var sS=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var VK=sS((mX,Vc)=>{function oS(e,t){for(var r=0;r<t.length;r++){const a=t[r];if(typeof a!="string"&&!Array.isArray(a)){for(const s in a)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(a,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>a[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();var Br=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var zE={exports:{}},_e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ui=Symbol.for("react.element"),lS=Symbol.for("react.portal"),iS=Symbol.for("react.fragment"),cS=Symbol.for("react.strict_mode"),uS=Symbol.for("react.profiler"),dS=Symbol.for("react.provider"),mS=Symbol.for("react.context"),fS=Symbol.for("react.forward_ref"),pS=Symbol.for("react.suspense"),hS=Symbol.for("react.memo"),gS=Symbol.for("react.lazy"),c0=Symbol.iterator;function vS(e){return e===null||typeof e!="object"?null:(e=c0&&e[c0]||e["@@iterator"],typeof e=="function"?e:null)}var UE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},VE=Object.assign,WE={};function ho(e,t,r){this.props=e,this.context=t,this.refs=WE,this.updater=r||UE}ho.prototype.isReactComponent={};ho.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ho.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function HE(){}HE.prototype=ho.prototype;function Lp(e,t,r){this.props=e,this.context=t,this.refs=WE,this.updater=r||UE}var Ip=Lp.prototype=new HE;Ip.constructor=Lp;VE(Ip,ho.prototype);Ip.isPureReactComponent=!0;var u0=Array.isArray,YE=Object.prototype.hasOwnProperty,$p={current:null},qE={key:!0,ref:!0,__self:!0,__source:!0};function GE(e,t,r){var a,s={},o=null,l=null;if(t!=null)for(a in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(o=""+t.key),t)YE.call(t,a)&&!qE.hasOwnProperty(a)&&(s[a]=t[a]);var i=arguments.length-2;if(i===1)s.children=r;else if(1<i){for(var c=Array(i),d=0;d<i;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(a in i=e.defaultProps,i)s[a]===void 0&&(s[a]=i[a]);return{$$typeof:ui,type:e,key:o,ref:l,props:s,_owner:$p.current}}function yS(e,t){return{$$typeof:ui,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Fp(e){return typeof e=="object"&&e!==null&&e.$$typeof===ui}function ES(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var d0=/\/+/g;function Qd(e,t){return typeof e=="object"&&e!==null&&e.key!=null?ES(""+e.key):t.toString(36)}function pc(e,t,r,a,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case ui:case lS:l=!0}}if(l)return l=e,s=s(l),e=a===""?"."+Qd(l,0):a,u0(s)?(r="",e!=null&&(r=e.replace(d0,"$&/")+"/"),pc(s,t,r,"",function(d){return d})):s!=null&&(Fp(s)&&(s=yS(s,r+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(d0,"$&/")+"/")+e)),t.push(s)),1;if(l=0,a=a===""?".":a+":",u0(e))for(var i=0;i<e.length;i++){o=e[i];var c=a+Qd(o,i);l+=pc(o,t,r,c,s)}else if(c=vS(e),typeof c=="function")for(e=c.call(e),i=0;!(o=e.next()).done;)o=o.value,c=a+Qd(o,i++),l+=pc(o,t,r,c,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function $i(e,t,r){if(e==null)return e;var a=[],s=0;return pc(e,a,"","",function(o){return t.call(r,o,s++)}),a}function xS(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var tr={current:null},hc={transition:null},bS={ReactCurrentDispatcher:tr,ReactCurrentBatchConfig:hc,ReactCurrentOwner:$p};function KE(){throw Error("act(...) is not supported in production builds of React.")}_e.Children={map:$i,forEach:function(e,t,r){$i(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return $i(e,function(){t++}),t},toArray:function(e){return $i(e,function(t){return t})||[]},only:function(e){if(!Fp(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};_e.Component=ho;_e.Fragment=iS;_e.Profiler=uS;_e.PureComponent=Lp;_e.StrictMode=cS;_e.Suspense=pS;_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bS;_e.act=KE;_e.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=VE({},e.props),s=e.key,o=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,l=$p.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(c in t)YE.call(t,c)&&!qE.hasOwnProperty(c)&&(a[c]=t[c]===void 0&&i!==void 0?i[c]:t[c])}var c=arguments.length-2;if(c===1)a.children=r;else if(1<c){i=Array(c);for(var d=0;d<c;d++)i[d]=arguments[d+2];a.children=i}return{$$typeof:ui,type:e.type,key:s,ref:o,props:a,_owner:l}};_e.createContext=function(e){return e={$$typeof:mS,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:dS,_context:e},e.Consumer=e};_e.createElement=GE;_e.createFactory=function(e){var t=GE.bind(null,e);return t.type=e,t};_e.createRef=function(){return{current:null}};_e.forwardRef=function(e){return{$$typeof:fS,render:e}};_e.isValidElement=Fp;_e.lazy=function(e){return{$$typeof:gS,_payload:{_status:-1,_result:e},_init:xS}};_e.memo=function(e,t){return{$$typeof:hS,type:e,compare:t===void 0?null:t}};_e.startTransition=function(e){var t=hc.transition;hc.transition={};try{e()}finally{hc.transition=t}};_e.unstable_act=KE;_e.useCallback=function(e,t){return tr.current.useCallback(e,t)};_e.useContext=function(e){return tr.current.useContext(e)};_e.useDebugValue=function(){};_e.useDeferredValue=function(e){return tr.current.useDeferredValue(e)};_e.useEffect=function(e,t){return tr.current.useEffect(e,t)};_e.useId=function(){return tr.current.useId()};_e.useImperativeHandle=function(e,t,r){return tr.current.useImperativeHandle(e,t,r)};_e.useInsertionEffect=function(e,t){return tr.current.useInsertionEffect(e,t)};_e.useLayoutEffect=function(e,t){return tr.current.useLayoutEffect(e,t)};_e.useMemo=function(e,t){return tr.current.useMemo(e,t)};_e.useReducer=function(e,t,r){return tr.current.useReducer(e,t,r)};_e.useRef=function(e){return tr.current.useRef(e)};_e.useState=function(e){return tr.current.useState(e)};_e.useSyncExternalStore=function(e,t,r){return tr.current.useSyncExternalStore(e,t,r)};_e.useTransition=function(){return tr.current.useTransition()};_e.version="18.3.1";zE.exports=_e;var g=zE.exports;const n=gr(g),wS=oS({__proto__:null,default:n},[g]);var Zm={},XE={exports:{}},Cr={},QE={exports:{}},JE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(M,V){var K=M.length;M.push(V);e:for(;0<K;){var z=K-1>>>1,U=M[z];if(0<s(U,V))M[z]=V,M[K]=U,K=z;else break e}}function r(M){return M.length===0?null:M[0]}function a(M){if(M.length===0)return null;var V=M[0],K=M.pop();if(K!==V){M[0]=K;e:for(var z=0,U=M.length,Y=U>>>1;z<Y;){var X=2*(z+1)-1,j=M[X],B=X+1,H=M[B];if(0>s(j,K))B<U&&0>s(H,j)?(M[z]=H,M[B]=K,z=B):(M[z]=j,M[X]=K,z=X);else if(B<U&&0>s(H,K))M[z]=H,M[B]=K,z=B;else break e}}return V}function s(M,V){var K=M.sortIndex-V.sortIndex;return K!==0?K:M.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var l=Date,i=l.now();e.unstable_now=function(){return l.now()-i}}var c=[],d=[],u=1,m=null,f=3,x=!1,b=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(M){for(var V=r(d);V!==null;){if(V.callback===null)a(d);else if(V.startTime<=M)a(d),V.sortIndex=V.expirationTime,t(c,V);else break;V=r(d)}}function w(M){if(y=!1,E(M),!b)if(r(c)!==null)b=!0,F(N);else{var V=r(d);V!==null&&T(w,V.startTime-M)}}function N(M,V){b=!1,y&&(y=!1,p(k),k=-1),x=!0;var K=f;try{for(E(V),m=r(c);m!==null&&(!(m.expirationTime>V)||M&&!A());){var z=m.callback;if(typeof z=="function"){m.callback=null,f=m.priorityLevel;var U=z(m.expirationTime<=V);V=e.unstable_now(),typeof U=="function"?m.callback=U:m===r(c)&&a(c),E(V)}else a(c);m=r(c)}if(m!==null)var Y=!0;else{var X=r(d);X!==null&&T(w,X.startTime-V),Y=!1}return Y}finally{m=null,f=K,x=!1}}var S=!1,C=null,k=-1,D=5,O=-1;function A(){return!(e.unstable_now()-O<D)}function $(){if(C!==null){var M=e.unstable_now();O=M;var V=!0;try{V=C(!0,M)}finally{V?P():(S=!1,C=null)}}else S=!1}var P;if(typeof h=="function")P=function(){h($)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,L=I.port2;I.port1.onmessage=$,P=function(){L.postMessage(null)}}else P=function(){v($,0)};function F(M){C=M,S||(S=!0,P())}function T(M,V){k=v(function(){M(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){b||x||(b=!0,F(N))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(M){switch(f){case 1:case 2:case 3:var V=3;break;default:V=f}var K=f;f=V;try{return M()}finally{f=K}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,V){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var K=f;f=M;try{return V()}finally{f=K}},e.unstable_scheduleCallback=function(M,V,K){var z=e.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?z+K:z):K=z,M){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=K+U,M={id:u++,callback:V,priorityLevel:M,startTime:K,expirationTime:U,sortIndex:-1},K>z?(M.sortIndex=K,t(d,M),r(c)===null&&M===r(d)&&(y?(p(k),k=-1):y=!0,T(w,K-z))):(M.sortIndex=U,t(c,M),b||x||(b=!0,F(N))),M},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(M){var V=f;return function(){var K=f;f=V;try{return M.apply(this,arguments)}finally{f=K}}}})(JE);QE.exports=JE;var NS=QE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SS=g,Nr=NS;function Z(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ZE=new Set,Sl={};function ws(e,t){to(e,t),to(e+"Capture",t)}function to(e,t){for(Sl[e]=t,e=0;e<t.length;e++)ZE.add(t[e])}var Qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ef=Object.prototype.hasOwnProperty,CS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m0={},f0={};function kS(e){return ef.call(f0,e)?!0:ef.call(m0,e)?!1:CS.test(e)?f0[e]=!0:(m0[e]=!0,!1)}function DS(e,t,r,a){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function AS(e,t,r,a){if(t===null||typeof t>"u"||DS(e,t,r,a))return!0;if(a)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function rr(e,t,r,a,s,o,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=l}var zt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){zt[e]=new rr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];zt[t]=new rr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){zt[e]=new rr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){zt[e]=new rr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){zt[e]=new rr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){zt[e]=new rr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){zt[e]=new rr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){zt[e]=new rr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){zt[e]=new rr(e,5,!1,e.toLowerCase(),null,!1,!1)});var jp=/[\-:]([a-z])/g;function Bp(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(jp,Bp);zt[t]=new rr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(jp,Bp);zt[t]=new rr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(jp,Bp);zt[t]=new rr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){zt[e]=new rr(e,1,!1,e.toLowerCase(),null,!1,!1)});zt.xlinkHref=new rr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){zt[e]=new rr(e,1,!1,e.toLowerCase(),null,!0,!0)});function zp(e,t,r,a){var s=zt.hasOwnProperty(t)?zt[t]:null;(s!==null?s.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(AS(t,r,s,a)&&(r=null),a||s===null?kS(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,a=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,a?e.setAttributeNS(a,t,r):e.setAttribute(t,r))))}var aa=SS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fi=Symbol.for("react.element"),_s=Symbol.for("react.portal"),Os=Symbol.for("react.fragment"),Up=Symbol.for("react.strict_mode"),tf=Symbol.for("react.profiler"),ex=Symbol.for("react.provider"),tx=Symbol.for("react.context"),Vp=Symbol.for("react.forward_ref"),rf=Symbol.for("react.suspense"),nf=Symbol.for("react.suspense_list"),Wp=Symbol.for("react.memo"),da=Symbol.for("react.lazy"),rx=Symbol.for("react.offscreen"),p0=Symbol.iterator;function zo(e){return e===null||typeof e!="object"?null:(e=p0&&e[p0]||e["@@iterator"],typeof e=="function"?e:null)}var gt=Object.assign,Jd;function rl(e){if(Jd===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Jd=t&&t[1]||""}return`
`+Jd+e}var Zd=!1;function em(e,t){if(!e||Zd)return"";Zd=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var a=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){a=d}e.call(t.prototype)}else{try{throw Error()}catch(d){a=d}e()}}catch(d){if(d&&a&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),o=a.stack.split(`
`),l=s.length-1,i=o.length-1;1<=l&&0<=i&&s[l]!==o[i];)i--;for(;1<=l&&0<=i;l--,i--)if(s[l]!==o[i]){if(l!==1||i!==1)do if(l--,i--,0>i||s[l]!==o[i]){var c=`
`+s[l].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=l&&0<=i);break}}}finally{Zd=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?rl(e):""}function TS(e){switch(e.tag){case 5:return rl(e.type);case 16:return rl("Lazy");case 13:return rl("Suspense");case 19:return rl("SuspenseList");case 0:case 2:case 15:return e=em(e.type,!1),e;case 11:return e=em(e.type.render,!1),e;case 1:return e=em(e.type,!0),e;default:return""}}function af(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Os:return"Fragment";case _s:return"Portal";case tf:return"Profiler";case Up:return"StrictMode";case rf:return"Suspense";case nf:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case tx:return(e.displayName||"Context")+".Consumer";case ex:return(e._context.displayName||"Context")+".Provider";case Vp:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Wp:return t=e.displayName||null,t!==null?t:af(e.type)||"Memo";case da:t=e._payload,e=e._init;try{return af(e(t))}catch{}}return null}function _S(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return af(t);case 8:return t===Up?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ra(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function nx(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function OS(e){var t=nx(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(l){a=""+l,o.call(this,l)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(l){a=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ji(e){e._valueTracker||(e._valueTracker=OS(e))}function ax(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),a="";return e&&(a=nx(e)?e.checked?"true":"false":e.value),e=a,e!==r?(t.setValue(e),!0):!1}function Wc(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function sf(e,t){var r=t.checked;return gt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function h0(e,t){var r=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;r=Ra(t.value!=null?t.value:r),e._wrapperState={initialChecked:a,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function sx(e,t){t=t.checked,t!=null&&zp(e,"checked",t,!1)}function of(e,t){sx(e,t);var r=Ra(t.value),a=t.type;if(r!=null)a==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?lf(e,t.type,r):t.hasOwnProperty("defaultValue")&&lf(e,t.type,Ra(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function g0(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function lf(e,t,r){(t!=="number"||Wc(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var nl=Array.isArray;function Vs(e,t,r,a){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&a&&(e[r].defaultSelected=!0)}else{for(r=""+Ra(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,a&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function cf(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Z(91));return gt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function v0(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Z(92));if(nl(r)){if(1<r.length)throw Error(Z(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Ra(r)}}function ox(e,t){var r=Ra(t.value),a=Ra(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),a!=null&&(e.defaultValue=""+a)}function y0(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function lx(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function uf(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?lx(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Bi,ix=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,a,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,a,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Bi=Bi||document.createElement("div"),Bi.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Bi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Cl(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var cl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},RS=["Webkit","ms","Moz","O"];Object.keys(cl).forEach(function(e){RS.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),cl[t]=cl[e]})});function cx(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||cl.hasOwnProperty(e)&&cl[e]?(""+t).trim():t+"px"}function ux(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var a=r.indexOf("--")===0,s=cx(r,t[r],a);r==="float"&&(r="cssFloat"),a?e.setProperty(r,s):e[r]=s}}var MS=gt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function df(e,t){if(t){if(MS[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Z(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Z(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Z(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Z(62))}}function mf(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ff=null;function Hp(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var pf=null,Ws=null,Hs=null;function E0(e){if(e=fi(e)){if(typeof pf!="function")throw Error(Z(280));var t=e.stateNode;t&&(t=Vu(t),pf(e.stateNode,e.type,t))}}function dx(e){Ws?Hs?Hs.push(e):Hs=[e]:Ws=e}function mx(){if(Ws){var e=Ws,t=Hs;if(Hs=Ws=null,E0(e),t)for(e=0;e<t.length;e++)E0(t[e])}}function fx(e,t){return e(t)}function px(){}var tm=!1;function hx(e,t,r){if(tm)return e(t,r);tm=!0;try{return fx(e,t,r)}finally{tm=!1,(Ws!==null||Hs!==null)&&(px(),mx())}}function kl(e,t){var r=e.stateNode;if(r===null)return null;var a=Vu(r);if(a===null)return null;r=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Z(231,t,typeof r));return r}var hf=!1;if(Qn)try{var Uo={};Object.defineProperty(Uo,"passive",{get:function(){hf=!0}}),window.addEventListener("test",Uo,Uo),window.removeEventListener("test",Uo,Uo)}catch{hf=!1}function PS(e,t,r,a,s,o,l,i,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(u){this.onError(u)}}var ul=!1,Hc=null,Yc=!1,gf=null,LS={onError:function(e){ul=!0,Hc=e}};function IS(e,t,r,a,s,o,l,i,c){ul=!1,Hc=null,PS.apply(LS,arguments)}function $S(e,t,r,a,s,o,l,i,c){if(IS.apply(this,arguments),ul){if(ul){var d=Hc;ul=!1,Hc=null}else throw Error(Z(198));Yc||(Yc=!0,gf=d)}}function Ns(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function gx(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function x0(e){if(Ns(e)!==e)throw Error(Z(188))}function FS(e){var t=e.alternate;if(!t){if(t=Ns(e),t===null)throw Error(Z(188));return t!==e?null:e}for(var r=e,a=t;;){var s=r.return;if(s===null)break;var o=s.alternate;if(o===null){if(a=s.return,a!==null){r=a;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===r)return x0(s),e;if(o===a)return x0(s),t;o=o.sibling}throw Error(Z(188))}if(r.return!==a.return)r=s,a=o;else{for(var l=!1,i=s.child;i;){if(i===r){l=!0,r=s,a=o;break}if(i===a){l=!0,a=s,r=o;break}i=i.sibling}if(!l){for(i=o.child;i;){if(i===r){l=!0,r=o,a=s;break}if(i===a){l=!0,a=o,r=s;break}i=i.sibling}if(!l)throw Error(Z(189))}}if(r.alternate!==a)throw Error(Z(190))}if(r.tag!==3)throw Error(Z(188));return r.stateNode.current===r?e:t}function vx(e){return e=FS(e),e!==null?yx(e):null}function yx(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=yx(e);if(t!==null)return t;e=e.sibling}return null}var Ex=Nr.unstable_scheduleCallback,b0=Nr.unstable_cancelCallback,jS=Nr.unstable_shouldYield,BS=Nr.unstable_requestPaint,St=Nr.unstable_now,zS=Nr.unstable_getCurrentPriorityLevel,Yp=Nr.unstable_ImmediatePriority,xx=Nr.unstable_UserBlockingPriority,qc=Nr.unstable_NormalPriority,US=Nr.unstable_LowPriority,bx=Nr.unstable_IdlePriority,ju=null,Cn=null;function VS(e){if(Cn&&typeof Cn.onCommitFiberRoot=="function")try{Cn.onCommitFiberRoot(ju,e,void 0,(e.current.flags&128)===128)}catch{}}var on=Math.clz32?Math.clz32:YS,WS=Math.log,HS=Math.LN2;function YS(e){return e>>>=0,e===0?32:31-(WS(e)/HS|0)|0}var zi=64,Ui=4194304;function al(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Gc(e,t){var r=e.pendingLanes;if(r===0)return 0;var a=0,s=e.suspendedLanes,o=e.pingedLanes,l=r&268435455;if(l!==0){var i=l&~s;i!==0?a=al(i):(o&=l,o!==0&&(a=al(o)))}else l=r&~s,l!==0?a=al(l):o!==0&&(a=al(o));if(a===0)return 0;if(t!==0&&t!==a&&!(t&s)&&(s=a&-a,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(a&4&&(a|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)r=31-on(t),s=1<<r,a|=e[r],t&=~s;return a}function qS(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function GS(e,t){for(var r=e.suspendedLanes,a=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var l=31-on(o),i=1<<l,c=s[l];c===-1?(!(i&r)||i&a)&&(s[l]=qS(i,t)):c<=t&&(e.expiredLanes|=i),o&=~i}}function vf(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function wx(){var e=zi;return zi<<=1,!(zi&4194240)&&(zi=64),e}function rm(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function di(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-on(t),e[t]=r}function KS(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-on(r),o=1<<s;t[s]=0,a[s]=-1,e[s]=-1,r&=~o}}function qp(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var a=31-on(r),s=1<<a;s&t|e[a]&t&&(e[a]|=t),r&=~s}}var qe=0;function Nx(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Sx,Gp,Cx,kx,Dx,yf=!1,Vi=[],ba=null,wa=null,Na=null,Dl=new Map,Al=new Map,pa=[],XS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function w0(e,t){switch(e){case"focusin":case"focusout":ba=null;break;case"dragenter":case"dragleave":wa=null;break;case"mouseover":case"mouseout":Na=null;break;case"pointerover":case"pointerout":Dl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Al.delete(t.pointerId)}}function Vo(e,t,r,a,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:a,nativeEvent:o,targetContainers:[s]},t!==null&&(t=fi(t),t!==null&&Gp(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function QS(e,t,r,a,s){switch(t){case"focusin":return ba=Vo(ba,e,t,r,a,s),!0;case"dragenter":return wa=Vo(wa,e,t,r,a,s),!0;case"mouseover":return Na=Vo(Na,e,t,r,a,s),!0;case"pointerover":var o=s.pointerId;return Dl.set(o,Vo(Dl.get(o)||null,e,t,r,a,s)),!0;case"gotpointercapture":return o=s.pointerId,Al.set(o,Vo(Al.get(o)||null,e,t,r,a,s)),!0}return!1}function Ax(e){var t=Qa(e.target);if(t!==null){var r=Ns(t);if(r!==null){if(t=r.tag,t===13){if(t=gx(r),t!==null){e.blockedOn=t,Dx(e.priority,function(){Cx(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function gc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Ef(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var a=new r.constructor(r.type,r);ff=a,r.target.dispatchEvent(a),ff=null}else return t=fi(r),t!==null&&Gp(t),e.blockedOn=r,!1;t.shift()}return!0}function N0(e,t,r){gc(e)&&r.delete(t)}function JS(){yf=!1,ba!==null&&gc(ba)&&(ba=null),wa!==null&&gc(wa)&&(wa=null),Na!==null&&gc(Na)&&(Na=null),Dl.forEach(N0),Al.forEach(N0)}function Wo(e,t){e.blockedOn===t&&(e.blockedOn=null,yf||(yf=!0,Nr.unstable_scheduleCallback(Nr.unstable_NormalPriority,JS)))}function Tl(e){function t(s){return Wo(s,e)}if(0<Vi.length){Wo(Vi[0],e);for(var r=1;r<Vi.length;r++){var a=Vi[r];a.blockedOn===e&&(a.blockedOn=null)}}for(ba!==null&&Wo(ba,e),wa!==null&&Wo(wa,e),Na!==null&&Wo(Na,e),Dl.forEach(t),Al.forEach(t),r=0;r<pa.length;r++)a=pa[r],a.blockedOn===e&&(a.blockedOn=null);for(;0<pa.length&&(r=pa[0],r.blockedOn===null);)Ax(r),r.blockedOn===null&&pa.shift()}var Ys=aa.ReactCurrentBatchConfig,Kc=!0;function ZS(e,t,r,a){var s=qe,o=Ys.transition;Ys.transition=null;try{qe=1,Kp(e,t,r,a)}finally{qe=s,Ys.transition=o}}function eC(e,t,r,a){var s=qe,o=Ys.transition;Ys.transition=null;try{qe=4,Kp(e,t,r,a)}finally{qe=s,Ys.transition=o}}function Kp(e,t,r,a){if(Kc){var s=Ef(e,t,r,a);if(s===null)mm(e,t,a,Xc,r),w0(e,a);else if(QS(s,e,t,r,a))a.stopPropagation();else if(w0(e,a),t&4&&-1<XS.indexOf(e)){for(;s!==null;){var o=fi(s);if(o!==null&&Sx(o),o=Ef(e,t,r,a),o===null&&mm(e,t,a,Xc,r),o===s)break;s=o}s!==null&&a.stopPropagation()}else mm(e,t,a,null,r)}}var Xc=null;function Ef(e,t,r,a){if(Xc=null,e=Hp(a),e=Qa(e),e!==null)if(t=Ns(e),t===null)e=null;else if(r=t.tag,r===13){if(e=gx(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xc=e,null}function Tx(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zS()){case Yp:return 1;case xx:return 4;case qc:case US:return 16;case bx:return 536870912;default:return 16}default:return 16}}var ga=null,Xp=null,vc=null;function _x(){if(vc)return vc;var e,t=Xp,r=t.length,a,s="value"in ga?ga.value:ga.textContent,o=s.length;for(e=0;e<r&&t[e]===s[e];e++);var l=r-e;for(a=1;a<=l&&t[r-a]===s[o-a];a++);return vc=s.slice(e,1<a?1-a:void 0)}function yc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Wi(){return!0}function S0(){return!1}function kr(e){function t(r,a,s,o,l){this._reactName=r,this._targetInst=s,this.type=a,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(r=e[i],this[i]=r?r(o):o[i]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Wi:S0,this.isPropagationStopped=S0,this}return gt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Wi)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Wi)},persist:function(){},isPersistent:Wi}),t}var go={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qp=kr(go),mi=gt({},go,{view:0,detail:0}),tC=kr(mi),nm,am,Ho,Bu=gt({},mi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jp,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ho&&(Ho&&e.type==="mousemove"?(nm=e.screenX-Ho.screenX,am=e.screenY-Ho.screenY):am=nm=0,Ho=e),nm)},movementY:function(e){return"movementY"in e?e.movementY:am}}),C0=kr(Bu),rC=gt({},Bu,{dataTransfer:0}),nC=kr(rC),aC=gt({},mi,{relatedTarget:0}),sm=kr(aC),sC=gt({},go,{animationName:0,elapsedTime:0,pseudoElement:0}),oC=kr(sC),lC=gt({},go,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),iC=kr(lC),cC=gt({},go,{data:0}),k0=kr(cC),uC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fC(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=mC[e])?!!t[e]:!1}function Jp(){return fC}var pC=gt({},mi,{key:function(e){if(e.key){var t=uC[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=yc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?dC[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jp,charCode:function(e){return e.type==="keypress"?yc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?yc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),hC=kr(pC),gC=gt({},Bu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),D0=kr(gC),vC=gt({},mi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jp}),yC=kr(vC),EC=gt({},go,{propertyName:0,elapsedTime:0,pseudoElement:0}),xC=kr(EC),bC=gt({},Bu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),wC=kr(bC),NC=[9,13,27,32],Zp=Qn&&"CompositionEvent"in window,dl=null;Qn&&"documentMode"in document&&(dl=document.documentMode);var SC=Qn&&"TextEvent"in window&&!dl,Ox=Qn&&(!Zp||dl&&8<dl&&11>=dl),A0=" ",T0=!1;function Rx(e,t){switch(e){case"keyup":return NC.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mx(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Rs=!1;function CC(e,t){switch(e){case"compositionend":return Mx(t);case"keypress":return t.which!==32?null:(T0=!0,A0);case"textInput":return e=t.data,e===A0&&T0?null:e;default:return null}}function kC(e,t){if(Rs)return e==="compositionend"||!Zp&&Rx(e,t)?(e=_x(),vc=Xp=ga=null,Rs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ox&&t.locale!=="ko"?null:t.data;default:return null}}var DC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!DC[e.type]:t==="textarea"}function Px(e,t,r,a){dx(a),t=Qc(t,"onChange"),0<t.length&&(r=new Qp("onChange","change",null,r,a),e.push({event:r,listeners:t}))}var ml=null,_l=null;function AC(e){Hx(e,0)}function zu(e){var t=Ls(e);if(ax(t))return e}function TC(e,t){if(e==="change")return t}var Lx=!1;if(Qn){var om;if(Qn){var lm="oninput"in document;if(!lm){var O0=document.createElement("div");O0.setAttribute("oninput","return;"),lm=typeof O0.oninput=="function"}om=lm}else om=!1;Lx=om&&(!document.documentMode||9<document.documentMode)}function R0(){ml&&(ml.detachEvent("onpropertychange",Ix),_l=ml=null)}function Ix(e){if(e.propertyName==="value"&&zu(_l)){var t=[];Px(t,_l,e,Hp(e)),hx(AC,t)}}function _C(e,t,r){e==="focusin"?(R0(),ml=t,_l=r,ml.attachEvent("onpropertychange",Ix)):e==="focusout"&&R0()}function OC(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return zu(_l)}function RC(e,t){if(e==="click")return zu(t)}function MC(e,t){if(e==="input"||e==="change")return zu(t)}function PC(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var cn=typeof Object.is=="function"?Object.is:PC;function Ol(e,t){if(cn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var s=r[a];if(!ef.call(t,s)||!cn(e[s],t[s]))return!1}return!0}function M0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function P0(e,t){var r=M0(e);e=0;for(var a;r;){if(r.nodeType===3){if(a=e+r.textContent.length,e<=t&&a>=t)return{node:r,offset:t-e};e=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=M0(r)}}function $x(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?$x(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Fx(){for(var e=window,t=Wc();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Wc(e.document)}return t}function eh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function LC(e){var t=Fx(),r=e.focusedElem,a=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&$x(r.ownerDocument.documentElement,r)){if(a!==null&&eh(r)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,o=Math.min(a.start,s);a=a.end===void 0?o:Math.min(a.end,s),!e.extend&&o>a&&(s=a,a=o,o=s),s=P0(r,o);var l=P0(r,a);s&&l&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>a?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var IC=Qn&&"documentMode"in document&&11>=document.documentMode,Ms=null,xf=null,fl=null,bf=!1;function L0(e,t,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;bf||Ms==null||Ms!==Wc(a)||(a=Ms,"selectionStart"in a&&eh(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),fl&&Ol(fl,a)||(fl=a,a=Qc(xf,"onSelect"),0<a.length&&(t=new Qp("onSelect","select",null,t,r),e.push({event:t,listeners:a}),t.target=Ms)))}function Hi(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ps={animationend:Hi("Animation","AnimationEnd"),animationiteration:Hi("Animation","AnimationIteration"),animationstart:Hi("Animation","AnimationStart"),transitionend:Hi("Transition","TransitionEnd")},im={},jx={};Qn&&(jx=document.createElement("div").style,"AnimationEvent"in window||(delete Ps.animationend.animation,delete Ps.animationiteration.animation,delete Ps.animationstart.animation),"TransitionEvent"in window||delete Ps.transitionend.transition);function Uu(e){if(im[e])return im[e];if(!Ps[e])return e;var t=Ps[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in jx)return im[e]=t[r];return e}var Bx=Uu("animationend"),zx=Uu("animationiteration"),Ux=Uu("animationstart"),Vx=Uu("transitionend"),Wx=new Map,I0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $a(e,t){Wx.set(e,t),ws(t,[e])}for(var cm=0;cm<I0.length;cm++){var um=I0[cm],$C=um.toLowerCase(),FC=um[0].toUpperCase()+um.slice(1);$a($C,"on"+FC)}$a(Bx,"onAnimationEnd");$a(zx,"onAnimationIteration");$a(Ux,"onAnimationStart");$a("dblclick","onDoubleClick");$a("focusin","onFocus");$a("focusout","onBlur");$a(Vx,"onTransitionEnd");to("onMouseEnter",["mouseout","mouseover"]);to("onMouseLeave",["mouseout","mouseover"]);to("onPointerEnter",["pointerout","pointerover"]);to("onPointerLeave",["pointerout","pointerover"]);ws("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ws("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ws("onBeforeInput",["compositionend","keypress","textInput","paste"]);ws("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ws("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ws("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jC=new Set("cancel close invalid load scroll toggle".split(" ").concat(sl));function $0(e,t,r){var a=e.type||"unknown-event";e.currentTarget=r,$S(a,t,void 0,e),e.currentTarget=null}function Hx(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var a=e[r],s=a.event;a=a.listeners;e:{var o=void 0;if(t)for(var l=a.length-1;0<=l;l--){var i=a[l],c=i.instance,d=i.currentTarget;if(i=i.listener,c!==o&&s.isPropagationStopped())break e;$0(s,i,d),o=c}else for(l=0;l<a.length;l++){if(i=a[l],c=i.instance,d=i.currentTarget,i=i.listener,c!==o&&s.isPropagationStopped())break e;$0(s,i,d),o=c}}}if(Yc)throw e=gf,Yc=!1,gf=null,e}function st(e,t){var r=t[kf];r===void 0&&(r=t[kf]=new Set);var a=e+"__bubble";r.has(a)||(Yx(t,e,2,!1),r.add(a))}function dm(e,t,r){var a=0;t&&(a|=4),Yx(r,e,a,t)}var Yi="_reactListening"+Math.random().toString(36).slice(2);function Rl(e){if(!e[Yi]){e[Yi]=!0,ZE.forEach(function(r){r!=="selectionchange"&&(jC.has(r)||dm(r,!1,e),dm(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Yi]||(t[Yi]=!0,dm("selectionchange",!1,t))}}function Yx(e,t,r,a){switch(Tx(t)){case 1:var s=ZS;break;case 4:s=eC;break;default:s=Kp}r=s.bind(null,t,r,e),s=void 0,!hf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),a?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function mm(e,t,r,a,s){var o=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var l=a.tag;if(l===3||l===4){var i=a.stateNode.containerInfo;if(i===s||i.nodeType===8&&i.parentNode===s)break;if(l===4)for(l=a.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;l=l.return}for(;i!==null;){if(l=Qa(i),l===null)return;if(c=l.tag,c===5||c===6){a=o=l;continue e}i=i.parentNode}}a=a.return}hx(function(){var d=o,u=Hp(r),m=[];e:{var f=Wx.get(e);if(f!==void 0){var x=Qp,b=e;switch(e){case"keypress":if(yc(r)===0)break e;case"keydown":case"keyup":x=hC;break;case"focusin":b="focus",x=sm;break;case"focusout":b="blur",x=sm;break;case"beforeblur":case"afterblur":x=sm;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=C0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=nC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=yC;break;case Bx:case zx:case Ux:x=oC;break;case Vx:x=xC;break;case"scroll":x=tC;break;case"wheel":x=wC;break;case"copy":case"cut":case"paste":x=iC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=D0}var y=(t&4)!==0,v=!y&&e==="scroll",p=y?f!==null?f+"Capture":null:f;y=[];for(var h=d,E;h!==null;){E=h;var w=E.stateNode;if(E.tag===5&&w!==null&&(E=w,p!==null&&(w=kl(h,p),w!=null&&y.push(Ml(h,w,E)))),v)break;h=h.return}0<y.length&&(f=new x(f,b,null,r,u),m.push({event:f,listeners:y}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",f&&r!==ff&&(b=r.relatedTarget||r.fromElement)&&(Qa(b)||b[Jn]))break e;if((x||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,x?(b=r.relatedTarget||r.toElement,x=d,b=b?Qa(b):null,b!==null&&(v=Ns(b),b!==v||b.tag!==5&&b.tag!==6)&&(b=null)):(x=null,b=d),x!==b)){if(y=C0,w="onMouseLeave",p="onMouseEnter",h="mouse",(e==="pointerout"||e==="pointerover")&&(y=D0,w="onPointerLeave",p="onPointerEnter",h="pointer"),v=x==null?f:Ls(x),E=b==null?f:Ls(b),f=new y(w,h+"leave",x,r,u),f.target=v,f.relatedTarget=E,w=null,Qa(u)===d&&(y=new y(p,h+"enter",b,r,u),y.target=E,y.relatedTarget=v,w=y),v=w,x&&b)t:{for(y=x,p=b,h=0,E=y;E;E=ks(E))h++;for(E=0,w=p;w;w=ks(w))E++;for(;0<h-E;)y=ks(y),h--;for(;0<E-h;)p=ks(p),E--;for(;h--;){if(y===p||p!==null&&y===p.alternate)break t;y=ks(y),p=ks(p)}y=null}else y=null;x!==null&&F0(m,f,x,y,!1),b!==null&&v!==null&&F0(m,v,b,y,!0)}}e:{if(f=d?Ls(d):window,x=f.nodeName&&f.nodeName.toLowerCase(),x==="select"||x==="input"&&f.type==="file")var N=TC;else if(_0(f))if(Lx)N=MC;else{N=OC;var S=_C}else(x=f.nodeName)&&x.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(N=RC);if(N&&(N=N(e,d))){Px(m,N,r,u);break e}S&&S(e,f,d),e==="focusout"&&(S=f._wrapperState)&&S.controlled&&f.type==="number"&&lf(f,"number",f.value)}switch(S=d?Ls(d):window,e){case"focusin":(_0(S)||S.contentEditable==="true")&&(Ms=S,xf=d,fl=null);break;case"focusout":fl=xf=Ms=null;break;case"mousedown":bf=!0;break;case"contextmenu":case"mouseup":case"dragend":bf=!1,L0(m,r,u);break;case"selectionchange":if(IC)break;case"keydown":case"keyup":L0(m,r,u)}var C;if(Zp)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Rs?Rx(e,r)&&(k="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(k="onCompositionStart");k&&(Ox&&r.locale!=="ko"&&(Rs||k!=="onCompositionStart"?k==="onCompositionEnd"&&Rs&&(C=_x()):(ga=u,Xp="value"in ga?ga.value:ga.textContent,Rs=!0)),S=Qc(d,k),0<S.length&&(k=new k0(k,e,null,r,u),m.push({event:k,listeners:S}),C?k.data=C:(C=Mx(r),C!==null&&(k.data=C)))),(C=SC?CC(e,r):kC(e,r))&&(d=Qc(d,"onBeforeInput"),0<d.length&&(u=new k0("onBeforeInput","beforeinput",null,r,u),m.push({event:u,listeners:d}),u.data=C))}Hx(m,t)})}function Ml(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Qc(e,t){for(var r=t+"Capture",a=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=kl(e,r),o!=null&&a.unshift(Ml(e,o,s)),o=kl(e,t),o!=null&&a.push(Ml(e,o,s))),e=e.return}return a}function ks(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function F0(e,t,r,a,s){for(var o=t._reactName,l=[];r!==null&&r!==a;){var i=r,c=i.alternate,d=i.stateNode;if(c!==null&&c===a)break;i.tag===5&&d!==null&&(i=d,s?(c=kl(r,o),c!=null&&l.unshift(Ml(r,c,i))):s||(c=kl(r,o),c!=null&&l.push(Ml(r,c,i)))),r=r.return}l.length!==0&&e.push({event:t,listeners:l})}var BC=/\r\n?/g,zC=/\u0000|\uFFFD/g;function j0(e){return(typeof e=="string"?e:""+e).replace(BC,`
`).replace(zC,"")}function qi(e,t,r){if(t=j0(t),j0(e)!==t&&r)throw Error(Z(425))}function Jc(){}var wf=null,Nf=null;function Sf(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Cf=typeof setTimeout=="function"?setTimeout:void 0,UC=typeof clearTimeout=="function"?clearTimeout:void 0,B0=typeof Promise=="function"?Promise:void 0,VC=typeof queueMicrotask=="function"?queueMicrotask:typeof B0<"u"?function(e){return B0.resolve(null).then(e).catch(WC)}:Cf;function WC(e){setTimeout(function(){throw e})}function fm(e,t){var r=t,a=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(a===0){e.removeChild(s),Tl(t);return}a--}else r!=="$"&&r!=="$?"&&r!=="$!"||a++;r=s}while(r);Tl(t)}function Sa(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function z0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var vo=Math.random().toString(36).slice(2),bn="__reactFiber$"+vo,Pl="__reactProps$"+vo,Jn="__reactContainer$"+vo,kf="__reactEvents$"+vo,HC="__reactListeners$"+vo,YC="__reactHandles$"+vo;function Qa(e){var t=e[bn];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Jn]||r[bn]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=z0(e);e!==null;){if(r=e[bn])return r;e=z0(e)}return t}e=r,r=e.parentNode}return null}function fi(e){return e=e[bn]||e[Jn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ls(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Z(33))}function Vu(e){return e[Pl]||null}var Df=[],Is=-1;function Fa(e){return{current:e}}function it(e){0>Is||(e.current=Df[Is],Df[Is]=null,Is--)}function et(e,t){Is++,Df[Is]=e.current,e.current=t}var Ma={},Kt=Fa(Ma),ir=Fa(!1),cs=Ma;function ro(e,t){var r=e.type.contextTypes;if(!r)return Ma;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in r)s[o]=t[o];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function cr(e){return e=e.childContextTypes,e!=null}function Zc(){it(ir),it(Kt)}function U0(e,t,r){if(Kt.current!==Ma)throw Error(Z(168));et(Kt,t),et(ir,r)}function qx(e,t,r){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return r;a=a.getChildContext();for(var s in a)if(!(s in t))throw Error(Z(108,_S(e)||"Unknown",s));return gt({},r,a)}function eu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ma,cs=Kt.current,et(Kt,e),et(ir,ir.current),!0}function V0(e,t,r){var a=e.stateNode;if(!a)throw Error(Z(169));r?(e=qx(e,t,cs),a.__reactInternalMemoizedMergedChildContext=e,it(ir),it(Kt),et(Kt,e)):it(ir),et(ir,r)}var Vn=null,Wu=!1,pm=!1;function Gx(e){Vn===null?Vn=[e]:Vn.push(e)}function qC(e){Wu=!0,Gx(e)}function ja(){if(!pm&&Vn!==null){pm=!0;var e=0,t=qe;try{var r=Vn;for(qe=1;e<r.length;e++){var a=r[e];do a=a(!0);while(a!==null)}Vn=null,Wu=!1}catch(s){throw Vn!==null&&(Vn=Vn.slice(e+1)),Ex(Yp,ja),s}finally{qe=t,pm=!1}}return null}var $s=[],Fs=0,tu=null,ru=0,Lr=[],Ir=0,us=null,Wn=1,Hn="";function qa(e,t){$s[Fs++]=ru,$s[Fs++]=tu,tu=e,ru=t}function Kx(e,t,r){Lr[Ir++]=Wn,Lr[Ir++]=Hn,Lr[Ir++]=us,us=e;var a=Wn;e=Hn;var s=32-on(a)-1;a&=~(1<<s),r+=1;var o=32-on(t)+s;if(30<o){var l=s-s%5;o=(a&(1<<l)-1).toString(32),a>>=l,s-=l,Wn=1<<32-on(t)+s|r<<s|a,Hn=o+e}else Wn=1<<o|r<<s|a,Hn=e}function th(e){e.return!==null&&(qa(e,1),Kx(e,1,0))}function rh(e){for(;e===tu;)tu=$s[--Fs],$s[Fs]=null,ru=$s[--Fs],$s[Fs]=null;for(;e===us;)us=Lr[--Ir],Lr[Ir]=null,Hn=Lr[--Ir],Lr[Ir]=null,Wn=Lr[--Ir],Lr[Ir]=null}var wr=null,br=null,mt=!1,nn=null;function Xx(e,t){var r=zr(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function W0(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,wr=e,br=Sa(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,wr=e,br=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=us!==null?{id:Wn,overflow:Hn}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=zr(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,wr=e,br=null,!0):!1;default:return!1}}function Af(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Tf(e){if(mt){var t=br;if(t){var r=t;if(!W0(e,t)){if(Af(e))throw Error(Z(418));t=Sa(r.nextSibling);var a=wr;t&&W0(e,t)?Xx(a,r):(e.flags=e.flags&-4097|2,mt=!1,wr=e)}}else{if(Af(e))throw Error(Z(418));e.flags=e.flags&-4097|2,mt=!1,wr=e}}}function H0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;wr=e}function Gi(e){if(e!==wr)return!1;if(!mt)return H0(e),mt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Sf(e.type,e.memoizedProps)),t&&(t=br)){if(Af(e))throw Qx(),Error(Z(418));for(;t;)Xx(e,t),t=Sa(t.nextSibling)}if(H0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Z(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){br=Sa(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}br=null}}else br=wr?Sa(e.stateNode.nextSibling):null;return!0}function Qx(){for(var e=br;e;)e=Sa(e.nextSibling)}function no(){br=wr=null,mt=!1}function nh(e){nn===null?nn=[e]:nn.push(e)}var GC=aa.ReactCurrentBatchConfig;function Yo(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Z(309));var a=r.stateNode}if(!a)throw Error(Z(147,e));var s=a,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(l){var i=s.refs;l===null?delete i[o]:i[o]=l},t._stringRef=o,t)}if(typeof e!="string")throw Error(Z(284));if(!r._owner)throw Error(Z(290,e))}return e}function Ki(e,t){throw e=Object.prototype.toString.call(t),Error(Z(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Y0(e){var t=e._init;return t(e._payload)}function Jx(e){function t(p,h){if(e){var E=p.deletions;E===null?(p.deletions=[h],p.flags|=16):E.push(h)}}function r(p,h){if(!e)return null;for(;h!==null;)t(p,h),h=h.sibling;return null}function a(p,h){for(p=new Map;h!==null;)h.key!==null?p.set(h.key,h):p.set(h.index,h),h=h.sibling;return p}function s(p,h){return p=Aa(p,h),p.index=0,p.sibling=null,p}function o(p,h,E){return p.index=E,e?(E=p.alternate,E!==null?(E=E.index,E<h?(p.flags|=2,h):E):(p.flags|=2,h)):(p.flags|=1048576,h)}function l(p){return e&&p.alternate===null&&(p.flags|=2),p}function i(p,h,E,w){return h===null||h.tag!==6?(h=bm(E,p.mode,w),h.return=p,h):(h=s(h,E),h.return=p,h)}function c(p,h,E,w){var N=E.type;return N===Os?u(p,h,E.props.children,w,E.key):h!==null&&(h.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===da&&Y0(N)===h.type)?(w=s(h,E.props),w.ref=Yo(p,h,E),w.return=p,w):(w=Cc(E.type,E.key,E.props,null,p.mode,w),w.ref=Yo(p,h,E),w.return=p,w)}function d(p,h,E,w){return h===null||h.tag!==4||h.stateNode.containerInfo!==E.containerInfo||h.stateNode.implementation!==E.implementation?(h=wm(E,p.mode,w),h.return=p,h):(h=s(h,E.children||[]),h.return=p,h)}function u(p,h,E,w,N){return h===null||h.tag!==7?(h=as(E,p.mode,w,N),h.return=p,h):(h=s(h,E),h.return=p,h)}function m(p,h,E){if(typeof h=="string"&&h!==""||typeof h=="number")return h=bm(""+h,p.mode,E),h.return=p,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case Fi:return E=Cc(h.type,h.key,h.props,null,p.mode,E),E.ref=Yo(p,null,h),E.return=p,E;case _s:return h=wm(h,p.mode,E),h.return=p,h;case da:var w=h._init;return m(p,w(h._payload),E)}if(nl(h)||zo(h))return h=as(h,p.mode,E,null),h.return=p,h;Ki(p,h)}return null}function f(p,h,E,w){var N=h!==null?h.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return N!==null?null:i(p,h,""+E,w);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Fi:return E.key===N?c(p,h,E,w):null;case _s:return E.key===N?d(p,h,E,w):null;case da:return N=E._init,f(p,h,N(E._payload),w)}if(nl(E)||zo(E))return N!==null?null:u(p,h,E,w,null);Ki(p,E)}return null}function x(p,h,E,w,N){if(typeof w=="string"&&w!==""||typeof w=="number")return p=p.get(E)||null,i(h,p,""+w,N);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Fi:return p=p.get(w.key===null?E:w.key)||null,c(h,p,w,N);case _s:return p=p.get(w.key===null?E:w.key)||null,d(h,p,w,N);case da:var S=w._init;return x(p,h,E,S(w._payload),N)}if(nl(w)||zo(w))return p=p.get(E)||null,u(h,p,w,N,null);Ki(h,w)}return null}function b(p,h,E,w){for(var N=null,S=null,C=h,k=h=0,D=null;C!==null&&k<E.length;k++){C.index>k?(D=C,C=null):D=C.sibling;var O=f(p,C,E[k],w);if(O===null){C===null&&(C=D);break}e&&C&&O.alternate===null&&t(p,C),h=o(O,h,k),S===null?N=O:S.sibling=O,S=O,C=D}if(k===E.length)return r(p,C),mt&&qa(p,k),N;if(C===null){for(;k<E.length;k++)C=m(p,E[k],w),C!==null&&(h=o(C,h,k),S===null?N=C:S.sibling=C,S=C);return mt&&qa(p,k),N}for(C=a(p,C);k<E.length;k++)D=x(C,p,k,E[k],w),D!==null&&(e&&D.alternate!==null&&C.delete(D.key===null?k:D.key),h=o(D,h,k),S===null?N=D:S.sibling=D,S=D);return e&&C.forEach(function(A){return t(p,A)}),mt&&qa(p,k),N}function y(p,h,E,w){var N=zo(E);if(typeof N!="function")throw Error(Z(150));if(E=N.call(E),E==null)throw Error(Z(151));for(var S=N=null,C=h,k=h=0,D=null,O=E.next();C!==null&&!O.done;k++,O=E.next()){C.index>k?(D=C,C=null):D=C.sibling;var A=f(p,C,O.value,w);if(A===null){C===null&&(C=D);break}e&&C&&A.alternate===null&&t(p,C),h=o(A,h,k),S===null?N=A:S.sibling=A,S=A,C=D}if(O.done)return r(p,C),mt&&qa(p,k),N;if(C===null){for(;!O.done;k++,O=E.next())O=m(p,O.value,w),O!==null&&(h=o(O,h,k),S===null?N=O:S.sibling=O,S=O);return mt&&qa(p,k),N}for(C=a(p,C);!O.done;k++,O=E.next())O=x(C,p,k,O.value,w),O!==null&&(e&&O.alternate!==null&&C.delete(O.key===null?k:O.key),h=o(O,h,k),S===null?N=O:S.sibling=O,S=O);return e&&C.forEach(function($){return t(p,$)}),mt&&qa(p,k),N}function v(p,h,E,w){if(typeof E=="object"&&E!==null&&E.type===Os&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Fi:e:{for(var N=E.key,S=h;S!==null;){if(S.key===N){if(N=E.type,N===Os){if(S.tag===7){r(p,S.sibling),h=s(S,E.props.children),h.return=p,p=h;break e}}else if(S.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===da&&Y0(N)===S.type){r(p,S.sibling),h=s(S,E.props),h.ref=Yo(p,S,E),h.return=p,p=h;break e}r(p,S);break}else t(p,S);S=S.sibling}E.type===Os?(h=as(E.props.children,p.mode,w,E.key),h.return=p,p=h):(w=Cc(E.type,E.key,E.props,null,p.mode,w),w.ref=Yo(p,h,E),w.return=p,p=w)}return l(p);case _s:e:{for(S=E.key;h!==null;){if(h.key===S)if(h.tag===4&&h.stateNode.containerInfo===E.containerInfo&&h.stateNode.implementation===E.implementation){r(p,h.sibling),h=s(h,E.children||[]),h.return=p,p=h;break e}else{r(p,h);break}else t(p,h);h=h.sibling}h=wm(E,p.mode,w),h.return=p,p=h}return l(p);case da:return S=E._init,v(p,h,S(E._payload),w)}if(nl(E))return b(p,h,E,w);if(zo(E))return y(p,h,E,w);Ki(p,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,h!==null&&h.tag===6?(r(p,h.sibling),h=s(h,E),h.return=p,p=h):(r(p,h),h=bm(E,p.mode,w),h.return=p,p=h),l(p)):r(p,h)}return v}var ao=Jx(!0),Zx=Jx(!1),nu=Fa(null),au=null,js=null,ah=null;function sh(){ah=js=au=null}function oh(e){var t=nu.current;it(nu),e._currentValue=t}function _f(e,t,r){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===r)break;e=e.return}}function qs(e,t){au=e,ah=js=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(lr=!0),e.firstContext=null)}function Vr(e){var t=e._currentValue;if(ah!==e)if(e={context:e,memoizedValue:t,next:null},js===null){if(au===null)throw Error(Z(308));js=e,au.dependencies={lanes:0,firstContext:e}}else js=js.next=e;return t}var Ja=null;function lh(e){Ja===null?Ja=[e]:Ja.push(e)}function eb(e,t,r,a){var s=t.interleaved;return s===null?(r.next=r,lh(t)):(r.next=s.next,s.next=r),t.interleaved=r,Zn(e,a)}function Zn(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var ma=!1;function ih(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tb(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Gn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ca(e,t,r){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,je&2){var s=a.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),a.pending=t,Zn(e,r)}return s=a.interleaved,s===null?(t.next=t,lh(a)):(t.next=s.next,s.next=t),a.interleaved=t,Zn(e,r)}function Ec(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,qp(e,r)}}function q0(e,t){var r=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var s=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?s=o=l:o=o.next=l,r=r.next}while(r!==null);o===null?s=o=t:o=o.next=t}else s=o=t;r={baseState:a.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:a.shared,effects:a.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function su(e,t,r,a){var s=e.updateQueue;ma=!1;var o=s.firstBaseUpdate,l=s.lastBaseUpdate,i=s.shared.pending;if(i!==null){s.shared.pending=null;var c=i,d=c.next;c.next=null,l===null?o=d:l.next=d,l=c;var u=e.alternate;u!==null&&(u=u.updateQueue,i=u.lastBaseUpdate,i!==l&&(i===null?u.firstBaseUpdate=d:i.next=d,u.lastBaseUpdate=c))}if(o!==null){var m=s.baseState;l=0,u=d=c=null,i=o;do{var f=i.lane,x=i.eventTime;if((a&f)===f){u!==null&&(u=u.next={eventTime:x,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var b=e,y=i;switch(f=t,x=r,y.tag){case 1:if(b=y.payload,typeof b=="function"){m=b.call(x,m,f);break e}m=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=y.payload,f=typeof b=="function"?b.call(x,m,f):b,f==null)break e;m=gt({},m,f);break e;case 2:ma=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[i]:f.push(i))}else x={eventTime:x,lane:f,tag:i.tag,payload:i.payload,callback:i.callback,next:null},u===null?(d=u=x,c=m):u=u.next=x,l|=f;if(i=i.next,i===null){if(i=s.shared.pending,i===null)break;f=i,i=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(u===null&&(c=m),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=u,t=s.shared.interleaved,t!==null){s=t;do l|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);ms|=l,e.lanes=l,e.memoizedState=m}}function G0(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],s=a.callback;if(s!==null){if(a.callback=null,a=r,typeof s!="function")throw Error(Z(191,s));s.call(a)}}}var pi={},kn=Fa(pi),Ll=Fa(pi),Il=Fa(pi);function Za(e){if(e===pi)throw Error(Z(174));return e}function ch(e,t){switch(et(Il,t),et(Ll,e),et(kn,pi),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:uf(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=uf(t,e)}it(kn),et(kn,t)}function so(){it(kn),it(Ll),it(Il)}function rb(e){Za(Il.current);var t=Za(kn.current),r=uf(t,e.type);t!==r&&(et(Ll,e),et(kn,r))}function uh(e){Ll.current===e&&(it(kn),it(Ll))}var pt=Fa(0);function ou(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var hm=[];function dh(){for(var e=0;e<hm.length;e++)hm[e]._workInProgressVersionPrimary=null;hm.length=0}var xc=aa.ReactCurrentDispatcher,gm=aa.ReactCurrentBatchConfig,ds=0,ht=null,At=null,Pt=null,lu=!1,pl=!1,$l=0,KC=0;function Vt(){throw Error(Z(321))}function mh(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!cn(e[r],t[r]))return!1;return!0}function fh(e,t,r,a,s,o){if(ds=o,ht=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,xc.current=e===null||e.memoizedState===null?ZC:ek,e=r(a,s),pl){o=0;do{if(pl=!1,$l=0,25<=o)throw Error(Z(301));o+=1,Pt=At=null,t.updateQueue=null,xc.current=tk,e=r(a,s)}while(pl)}if(xc.current=iu,t=At!==null&&At.next!==null,ds=0,Pt=At=ht=null,lu=!1,t)throw Error(Z(300));return e}function ph(){var e=$l!==0;return $l=0,e}function En(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?ht.memoizedState=Pt=e:Pt=Pt.next=e,Pt}function Wr(){if(At===null){var e=ht.alternate;e=e!==null?e.memoizedState:null}else e=At.next;var t=Pt===null?ht.memoizedState:Pt.next;if(t!==null)Pt=t,At=e;else{if(e===null)throw Error(Z(310));At=e,e={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},Pt===null?ht.memoizedState=Pt=e:Pt=Pt.next=e}return Pt}function Fl(e,t){return typeof t=="function"?t(e):t}function vm(e){var t=Wr(),r=t.queue;if(r===null)throw Error(Z(311));r.lastRenderedReducer=e;var a=At,s=a.baseQueue,o=r.pending;if(o!==null){if(s!==null){var l=s.next;s.next=o.next,o.next=l}a.baseQueue=s=o,r.pending=null}if(s!==null){o=s.next,a=a.baseState;var i=l=null,c=null,d=o;do{var u=d.lane;if((ds&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),a=d.hasEagerState?d.eagerState:e(a,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(i=c=m,l=a):c=c.next=m,ht.lanes|=u,ms|=u}d=d.next}while(d!==null&&d!==o);c===null?l=a:c.next=i,cn(a,t.memoizedState)||(lr=!0),t.memoizedState=a,t.baseState=l,t.baseQueue=c,r.lastRenderedState=a}if(e=r.interleaved,e!==null){s=e;do o=s.lane,ht.lanes|=o,ms|=o,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function ym(e){var t=Wr(),r=t.queue;if(r===null)throw Error(Z(311));r.lastRenderedReducer=e;var a=r.dispatch,s=r.pending,o=t.memoizedState;if(s!==null){r.pending=null;var l=s=s.next;do o=e(o,l.action),l=l.next;while(l!==s);cn(o,t.memoizedState)||(lr=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,a]}function nb(){}function ab(e,t){var r=ht,a=Wr(),s=t(),o=!cn(a.memoizedState,s);if(o&&(a.memoizedState=s,lr=!0),a=a.queue,hh(lb.bind(null,r,a,e),[e]),a.getSnapshot!==t||o||Pt!==null&&Pt.memoizedState.tag&1){if(r.flags|=2048,jl(9,ob.bind(null,r,a,s,t),void 0,null),It===null)throw Error(Z(349));ds&30||sb(r,t,s)}return s}function sb(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ht.updateQueue,t===null?(t={lastEffect:null,stores:null},ht.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function ob(e,t,r,a){t.value=r,t.getSnapshot=a,ib(t)&&cb(e)}function lb(e,t,r){return r(function(){ib(t)&&cb(e)})}function ib(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!cn(e,r)}catch{return!0}}function cb(e){var t=Zn(e,1);t!==null&&ln(t,e,1,-1)}function K0(e){var t=En();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fl,lastRenderedState:e},t.queue=e,e=e.dispatch=JC.bind(null,ht,e),[t.memoizedState,e]}function jl(e,t,r,a){return e={tag:e,create:t,destroy:r,deps:a,next:null},t=ht.updateQueue,t===null?(t={lastEffect:null,stores:null},ht.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(a=r.next,r.next=e,e.next=a,t.lastEffect=e)),e}function ub(){return Wr().memoizedState}function bc(e,t,r,a){var s=En();ht.flags|=e,s.memoizedState=jl(1|t,r,void 0,a===void 0?null:a)}function Hu(e,t,r,a){var s=Wr();a=a===void 0?null:a;var o=void 0;if(At!==null){var l=At.memoizedState;if(o=l.destroy,a!==null&&mh(a,l.deps)){s.memoizedState=jl(t,r,o,a);return}}ht.flags|=e,s.memoizedState=jl(1|t,r,o,a)}function X0(e,t){return bc(8390656,8,e,t)}function hh(e,t){return Hu(2048,8,e,t)}function db(e,t){return Hu(4,2,e,t)}function mb(e,t){return Hu(4,4,e,t)}function fb(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function pb(e,t,r){return r=r!=null?r.concat([e]):null,Hu(4,4,fb.bind(null,t,e),r)}function gh(){}function hb(e,t){var r=Wr();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&mh(t,a[1])?a[0]:(r.memoizedState=[e,t],e)}function gb(e,t){var r=Wr();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&mh(t,a[1])?a[0]:(e=e(),r.memoizedState=[e,t],e)}function vb(e,t,r){return ds&21?(cn(r,t)||(r=wx(),ht.lanes|=r,ms|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,lr=!0),e.memoizedState=r)}function XC(e,t){var r=qe;qe=r!==0&&4>r?r:4,e(!0);var a=gm.transition;gm.transition={};try{e(!1),t()}finally{qe=r,gm.transition=a}}function yb(){return Wr().memoizedState}function QC(e,t,r){var a=Da(e);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},Eb(e))xb(t,r);else if(r=eb(e,t,r,a),r!==null){var s=er();ln(r,e,a,s),bb(r,t,a)}}function JC(e,t,r){var a=Da(e),s={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(Eb(e))xb(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var l=t.lastRenderedState,i=o(l,r);if(s.hasEagerState=!0,s.eagerState=i,cn(i,l)){var c=t.interleaved;c===null?(s.next=s,lh(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=eb(e,t,s,a),r!==null&&(s=er(),ln(r,e,a,s),bb(r,t,a))}}function Eb(e){var t=e.alternate;return e===ht||t!==null&&t===ht}function xb(e,t){pl=lu=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function bb(e,t,r){if(r&4194240){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,qp(e,r)}}var iu={readContext:Vr,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useInsertionEffect:Vt,useLayoutEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useMutableSource:Vt,useSyncExternalStore:Vt,useId:Vt,unstable_isNewReconciler:!1},ZC={readContext:Vr,useCallback:function(e,t){return En().memoizedState=[e,t===void 0?null:t],e},useContext:Vr,useEffect:X0,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,bc(4194308,4,fb.bind(null,t,e),r)},useLayoutEffect:function(e,t){return bc(4194308,4,e,t)},useInsertionEffect:function(e,t){return bc(4,2,e,t)},useMemo:function(e,t){var r=En();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var a=En();return t=r!==void 0?r(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=QC.bind(null,ht,e),[a.memoizedState,e]},useRef:function(e){var t=En();return e={current:e},t.memoizedState=e},useState:K0,useDebugValue:gh,useDeferredValue:function(e){return En().memoizedState=e},useTransition:function(){var e=K0(!1),t=e[0];return e=XC.bind(null,e[1]),En().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var a=ht,s=En();if(mt){if(r===void 0)throw Error(Z(407));r=r()}else{if(r=t(),It===null)throw Error(Z(349));ds&30||sb(a,t,r)}s.memoizedState=r;var o={value:r,getSnapshot:t};return s.queue=o,X0(lb.bind(null,a,o,e),[e]),a.flags|=2048,jl(9,ob.bind(null,a,o,r,t),void 0,null),r},useId:function(){var e=En(),t=It.identifierPrefix;if(mt){var r=Hn,a=Wn;r=(a&~(1<<32-on(a)-1)).toString(32)+r,t=":"+t+"R"+r,r=$l++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=KC++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ek={readContext:Vr,useCallback:hb,useContext:Vr,useEffect:hh,useImperativeHandle:pb,useInsertionEffect:db,useLayoutEffect:mb,useMemo:gb,useReducer:vm,useRef:ub,useState:function(){return vm(Fl)},useDebugValue:gh,useDeferredValue:function(e){var t=Wr();return vb(t,At.memoizedState,e)},useTransition:function(){var e=vm(Fl)[0],t=Wr().memoizedState;return[e,t]},useMutableSource:nb,useSyncExternalStore:ab,useId:yb,unstable_isNewReconciler:!1},tk={readContext:Vr,useCallback:hb,useContext:Vr,useEffect:hh,useImperativeHandle:pb,useInsertionEffect:db,useLayoutEffect:mb,useMemo:gb,useReducer:ym,useRef:ub,useState:function(){return ym(Fl)},useDebugValue:gh,useDeferredValue:function(e){var t=Wr();return At===null?t.memoizedState=e:vb(t,At.memoizedState,e)},useTransition:function(){var e=ym(Fl)[0],t=Wr().memoizedState;return[e,t]},useMutableSource:nb,useSyncExternalStore:ab,useId:yb,unstable_isNewReconciler:!1};function en(e,t){if(e&&e.defaultProps){t=gt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Of(e,t,r,a){t=e.memoizedState,r=r(a,t),r=r==null?t:gt({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Yu={isMounted:function(e){return(e=e._reactInternals)?Ns(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var a=er(),s=Da(e),o=Gn(a,s);o.payload=t,r!=null&&(o.callback=r),t=Ca(e,o,s),t!==null&&(ln(t,e,s,a),Ec(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var a=er(),s=Da(e),o=Gn(a,s);o.tag=1,o.payload=t,r!=null&&(o.callback=r),t=Ca(e,o,s),t!==null&&(ln(t,e,s,a),Ec(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=er(),a=Da(e),s=Gn(r,a);s.tag=2,t!=null&&(s.callback=t),t=Ca(e,s,a),t!==null&&(ln(t,e,a,r),Ec(t,e,a))}};function Q0(e,t,r,a,s,o,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,o,l):t.prototype&&t.prototype.isPureReactComponent?!Ol(r,a)||!Ol(s,o):!0}function wb(e,t,r){var a=!1,s=Ma,o=t.contextType;return typeof o=="object"&&o!==null?o=Vr(o):(s=cr(t)?cs:Kt.current,a=t.contextTypes,o=(a=a!=null)?ro(e,s):Ma),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Yu,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function J0(e,t,r,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,a),t.state!==e&&Yu.enqueueReplaceState(t,t.state,null)}function Rf(e,t,r,a){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},ih(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=Vr(o):(o=cr(t)?cs:Kt.current,s.context=ro(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Of(e,t,o,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Yu.enqueueReplaceState(s,s.state,null),su(e,r,s,a),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function oo(e,t){try{var r="",a=t;do r+=TS(a),a=a.return;while(a);var s=r}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function Em(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Mf(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var rk=typeof WeakMap=="function"?WeakMap:Map;function Nb(e,t,r){r=Gn(-1,r),r.tag=3,r.payload={element:null};var a=t.value;return r.callback=function(){uu||(uu=!0,Vf=a),Mf(e,t)},r}function Sb(e,t,r){r=Gn(-1,r),r.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var s=t.value;r.payload=function(){return a(s)},r.callback=function(){Mf(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){Mf(e,t),typeof a!="function"&&(ka===null?ka=new Set([this]):ka.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),r}function Z0(e,t,r){var a=e.pingCache;if(a===null){a=e.pingCache=new rk;var s=new Set;a.set(t,s)}else s=a.get(t),s===void 0&&(s=new Set,a.set(t,s));s.has(r)||(s.add(r),e=gk.bind(null,e,t,r),t.then(e,e))}function ev(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function tv(e,t,r,a,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Gn(-1,1),t.tag=2,Ca(r,t,1))),r.lanes|=1),e)}var nk=aa.ReactCurrentOwner,lr=!1;function Jt(e,t,r,a){t.child=e===null?Zx(t,null,r,a):ao(t,e.child,r,a)}function rv(e,t,r,a,s){r=r.render;var o=t.ref;return qs(t,s),a=fh(e,t,r,a,o,s),r=ph(),e!==null&&!lr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ea(e,t,s)):(mt&&r&&th(t),t.flags|=1,Jt(e,t,a,s),t.child)}function nv(e,t,r,a,s){if(e===null){var o=r.type;return typeof o=="function"&&!Sh(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=o,Cb(e,t,o,a,s)):(e=Cc(r.type,null,a,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var l=o.memoizedProps;if(r=r.compare,r=r!==null?r:Ol,r(l,a)&&e.ref===t.ref)return ea(e,t,s)}return t.flags|=1,e=Aa(o,a),e.ref=t.ref,e.return=t,t.child=e}function Cb(e,t,r,a,s){if(e!==null){var o=e.memoizedProps;if(Ol(o,a)&&e.ref===t.ref)if(lr=!1,t.pendingProps=a=o,(e.lanes&s)!==0)e.flags&131072&&(lr=!0);else return t.lanes=e.lanes,ea(e,t,s)}return Pf(e,t,r,a,s)}function kb(e,t,r){var a=t.pendingProps,s=a.children,o=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},et(zs,xr),xr|=r;else{if(!(r&1073741824))return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,et(zs,xr),xr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=o!==null?o.baseLanes:r,et(zs,xr),xr|=a}else o!==null?(a=o.baseLanes|r,t.memoizedState=null):a=r,et(zs,xr),xr|=a;return Jt(e,t,s,r),t.child}function Db(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Pf(e,t,r,a,s){var o=cr(r)?cs:Kt.current;return o=ro(t,o),qs(t,s),r=fh(e,t,r,a,o,s),a=ph(),e!==null&&!lr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ea(e,t,s)):(mt&&a&&th(t),t.flags|=1,Jt(e,t,r,s),t.child)}function av(e,t,r,a,s){if(cr(r)){var o=!0;eu(t)}else o=!1;if(qs(t,s),t.stateNode===null)wc(e,t),wb(t,r,a),Rf(t,r,a,s),a=!0;else if(e===null){var l=t.stateNode,i=t.memoizedProps;l.props=i;var c=l.context,d=r.contextType;typeof d=="object"&&d!==null?d=Vr(d):(d=cr(r)?cs:Kt.current,d=ro(t,d));var u=r.getDerivedStateFromProps,m=typeof u=="function"||typeof l.getSnapshotBeforeUpdate=="function";m||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(i!==a||c!==d)&&J0(t,l,a,d),ma=!1;var f=t.memoizedState;l.state=f,su(t,a,l,s),c=t.memoizedState,i!==a||f!==c||ir.current||ma?(typeof u=="function"&&(Of(t,r,u,a),c=t.memoizedState),(i=ma||Q0(t,r,i,a,f,c,d))?(m||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=c),l.props=a,l.state=c,l.context=d,a=i):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{l=t.stateNode,tb(e,t),i=t.memoizedProps,d=t.type===t.elementType?i:en(t.type,i),l.props=d,m=t.pendingProps,f=l.context,c=r.contextType,typeof c=="object"&&c!==null?c=Vr(c):(c=cr(r)?cs:Kt.current,c=ro(t,c));var x=r.getDerivedStateFromProps;(u=typeof x=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(i!==m||f!==c)&&J0(t,l,a,c),ma=!1,f=t.memoizedState,l.state=f,su(t,a,l,s);var b=t.memoizedState;i!==m||f!==b||ir.current||ma?(typeof x=="function"&&(Of(t,r,x,a),b=t.memoizedState),(d=ma||Q0(t,r,d,a,f,b,c)||!1)?(u||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(a,b,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(a,b,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||i===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=b),l.props=a,l.state=b,l.context=c,a=d):(typeof l.componentDidUpdate!="function"||i===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),a=!1)}return Lf(e,t,r,a,o,s)}function Lf(e,t,r,a,s,o){Db(e,t);var l=(t.flags&128)!==0;if(!a&&!l)return s&&V0(t,r,!1),ea(e,t,o);a=t.stateNode,nk.current=t;var i=l&&typeof r.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&l?(t.child=ao(t,e.child,null,o),t.child=ao(t,null,i,o)):Jt(e,t,i,o),t.memoizedState=a.state,s&&V0(t,r,!0),t.child}function Ab(e){var t=e.stateNode;t.pendingContext?U0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&U0(e,t.context,!1),ch(e,t.containerInfo)}function sv(e,t,r,a,s){return no(),nh(s),t.flags|=256,Jt(e,t,r,a),t.child}var If={dehydrated:null,treeContext:null,retryLane:0};function $f(e){return{baseLanes:e,cachePool:null,transitions:null}}function Tb(e,t,r){var a=t.pendingProps,s=pt.current,o=!1,l=(t.flags&128)!==0,i;if((i=l)||(i=e!==null&&e.memoizedState===null?!1:(s&2)!==0),i?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),et(pt,s&1),e===null)return Tf(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=a.children,e=a.fallback,o?(a=t.mode,o=t.child,l={mode:"hidden",children:l},!(a&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=Ku(l,a,0,null),e=as(e,a,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=$f(r),t.memoizedState=If,e):vh(t,l));if(s=e.memoizedState,s!==null&&(i=s.dehydrated,i!==null))return ak(e,t,l,a,i,s,r);if(o){o=a.fallback,l=t.mode,s=e.child,i=s.sibling;var c={mode:"hidden",children:a.children};return!(l&1)&&t.child!==s?(a=t.child,a.childLanes=0,a.pendingProps=c,t.deletions=null):(a=Aa(s,c),a.subtreeFlags=s.subtreeFlags&14680064),i!==null?o=Aa(i,o):(o=as(o,l,r,null),o.flags|=2),o.return=t,a.return=t,a.sibling=o,t.child=a,a=o,o=t.child,l=e.child.memoizedState,l=l===null?$f(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~r,t.memoizedState=If,a}return o=e.child,e=o.sibling,a=Aa(o,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=r),a.return=t,a.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=a,t.memoizedState=null,a}function vh(e,t){return t=Ku({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Xi(e,t,r,a){return a!==null&&nh(a),ao(t,e.child,null,r),e=vh(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ak(e,t,r,a,s,o,l){if(r)return t.flags&256?(t.flags&=-257,a=Em(Error(Z(422))),Xi(e,t,l,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=a.fallback,s=t.mode,a=Ku({mode:"visible",children:a.children},s,0,null),o=as(o,s,l,null),o.flags|=2,a.return=t,o.return=t,a.sibling=o,t.child=a,t.mode&1&&ao(t,e.child,null,l),t.child.memoizedState=$f(l),t.memoizedState=If,o);if(!(t.mode&1))return Xi(e,t,l,null);if(s.data==="$!"){if(a=s.nextSibling&&s.nextSibling.dataset,a)var i=a.dgst;return a=i,o=Error(Z(419)),a=Em(o,a,void 0),Xi(e,t,l,a)}if(i=(l&e.childLanes)!==0,lr||i){if(a=It,a!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(a.suspendedLanes|l)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Zn(e,s),ln(a,e,s,-1))}return Nh(),a=Em(Error(Z(421))),Xi(e,t,l,a)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=vk.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,br=Sa(s.nextSibling),wr=t,mt=!0,nn=null,e!==null&&(Lr[Ir++]=Wn,Lr[Ir++]=Hn,Lr[Ir++]=us,Wn=e.id,Hn=e.overflow,us=t),t=vh(t,a.children),t.flags|=4096,t)}function ov(e,t,r){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),_f(e.return,t,r)}function xm(e,t,r,a,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=a,o.tail=r,o.tailMode=s)}function _b(e,t,r){var a=t.pendingProps,s=a.revealOrder,o=a.tail;if(Jt(e,t,a.children,r),a=pt.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ov(e,r,t);else if(e.tag===19)ov(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(et(pt,a),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&ou(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),xm(t,!1,s,r,o);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&ou(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}xm(t,!0,r,null,o);break;case"together":xm(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function wc(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ea(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),ms|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Z(153));if(t.child!==null){for(e=t.child,r=Aa(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Aa(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function sk(e,t,r){switch(t.tag){case 3:Ab(t),no();break;case 5:rb(t);break;case 1:cr(t.type)&&eu(t);break;case 4:ch(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,s=t.memoizedProps.value;et(nu,a._currentValue),a._currentValue=s;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(et(pt,pt.current&1),t.flags|=128,null):r&t.child.childLanes?Tb(e,t,r):(et(pt,pt.current&1),e=ea(e,t,r),e!==null?e.sibling:null);et(pt,pt.current&1);break;case 19:if(a=(r&t.childLanes)!==0,e.flags&128){if(a)return _b(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),et(pt,pt.current),a)break;return null;case 22:case 23:return t.lanes=0,kb(e,t,r)}return ea(e,t,r)}var Ob,Ff,Rb,Mb;Ob=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Ff=function(){};Rb=function(e,t,r,a){var s=e.memoizedProps;if(s!==a){e=t.stateNode,Za(kn.current);var o=null;switch(r){case"input":s=sf(e,s),a=sf(e,a),o=[];break;case"select":s=gt({},s,{value:void 0}),a=gt({},a,{value:void 0}),o=[];break;case"textarea":s=cf(e,s),a=cf(e,a),o=[];break;default:typeof s.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=Jc)}df(r,a);var l;r=null;for(d in s)if(!a.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var i=s[d];for(l in i)i.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Sl.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in a){var c=a[d];if(i=s!=null?s[d]:void 0,a.hasOwnProperty(d)&&c!==i&&(c!=null||i!=null))if(d==="style")if(i){for(l in i)!i.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in c)c.hasOwnProperty(l)&&i[l]!==c[l]&&(r||(r={}),r[l]=c[l])}else r||(o||(o=[]),o.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,i=i?i.__html:void 0,c!=null&&i!==c&&(o=o||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Sl.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&st("scroll",e),o||i===c||(o=[])):(o=o||[]).push(d,c))}r&&(o=o||[]).push("style",r);var d=o;(t.updateQueue=d)&&(t.flags|=4)}};Mb=function(e,t,r,a){r!==a&&(t.flags|=4)};function qo(e,t){if(!mt)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Wt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,a=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,a|=s.subtreeFlags&14680064,a|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,a|=s.subtreeFlags,a|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=a,e.childLanes=r,t}function ok(e,t,r){var a=t.pendingProps;switch(rh(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(t),null;case 1:return cr(t.type)&&Zc(),Wt(t),null;case 3:return a=t.stateNode,so(),it(ir),it(Kt),dh(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Gi(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,nn!==null&&(Yf(nn),nn=null))),Ff(e,t),Wt(t),null;case 5:uh(t);var s=Za(Il.current);if(r=t.type,e!==null&&t.stateNode!=null)Rb(e,t,r,a,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(Z(166));return Wt(t),null}if(e=Za(kn.current),Gi(t)){a=t.stateNode,r=t.type;var o=t.memoizedProps;switch(a[bn]=t,a[Pl]=o,e=(t.mode&1)!==0,r){case"dialog":st("cancel",a),st("close",a);break;case"iframe":case"object":case"embed":st("load",a);break;case"video":case"audio":for(s=0;s<sl.length;s++)st(sl[s],a);break;case"source":st("error",a);break;case"img":case"image":case"link":st("error",a),st("load",a);break;case"details":st("toggle",a);break;case"input":h0(a,o),st("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!o.multiple},st("invalid",a);break;case"textarea":v0(a,o),st("invalid",a)}df(r,o),s=null;for(var l in o)if(o.hasOwnProperty(l)){var i=o[l];l==="children"?typeof i=="string"?a.textContent!==i&&(o.suppressHydrationWarning!==!0&&qi(a.textContent,i,e),s=["children",i]):typeof i=="number"&&a.textContent!==""+i&&(o.suppressHydrationWarning!==!0&&qi(a.textContent,i,e),s=["children",""+i]):Sl.hasOwnProperty(l)&&i!=null&&l==="onScroll"&&st("scroll",a)}switch(r){case"input":ji(a),g0(a,o,!0);break;case"textarea":ji(a),y0(a);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(a.onclick=Jc)}a=s,t.updateQueue=a,a!==null&&(t.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=lx(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=l.createElement(r,{is:a.is}):(e=l.createElement(r),r==="select"&&(l=e,a.multiple?l.multiple=!0:a.size&&(l.size=a.size))):e=l.createElementNS(e,r),e[bn]=t,e[Pl]=a,Ob(e,t,!1,!1),t.stateNode=e;e:{switch(l=mf(r,a),r){case"dialog":st("cancel",e),st("close",e),s=a;break;case"iframe":case"object":case"embed":st("load",e),s=a;break;case"video":case"audio":for(s=0;s<sl.length;s++)st(sl[s],e);s=a;break;case"source":st("error",e),s=a;break;case"img":case"image":case"link":st("error",e),st("load",e),s=a;break;case"details":st("toggle",e),s=a;break;case"input":h0(e,a),s=sf(e,a),st("invalid",e);break;case"option":s=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},s=gt({},a,{value:void 0}),st("invalid",e);break;case"textarea":v0(e,a),s=cf(e,a),st("invalid",e);break;default:s=a}df(r,s),i=s;for(o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="style"?ux(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&ix(e,c)):o==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Cl(e,c):typeof c=="number"&&Cl(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Sl.hasOwnProperty(o)?c!=null&&o==="onScroll"&&st("scroll",e):c!=null&&zp(e,o,c,l))}switch(r){case"input":ji(e),g0(e,a,!1);break;case"textarea":ji(e),y0(e);break;case"option":a.value!=null&&e.setAttribute("value",""+Ra(a.value));break;case"select":e.multiple=!!a.multiple,o=a.value,o!=null?Vs(e,!!a.multiple,o,!1):a.defaultValue!=null&&Vs(e,!!a.multiple,a.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Jc)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Wt(t),null;case 6:if(e&&t.stateNode!=null)Mb(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(Z(166));if(r=Za(Il.current),Za(kn.current),Gi(t)){if(a=t.stateNode,r=t.memoizedProps,a[bn]=t,(o=a.nodeValue!==r)&&(e=wr,e!==null))switch(e.tag){case 3:qi(a.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&qi(a.nodeValue,r,(e.mode&1)!==0)}o&&(t.flags|=4)}else a=(r.nodeType===9?r:r.ownerDocument).createTextNode(a),a[bn]=t,t.stateNode=a}return Wt(t),null;case 13:if(it(pt),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(mt&&br!==null&&t.mode&1&&!(t.flags&128))Qx(),no(),t.flags|=98560,o=!1;else if(o=Gi(t),a!==null&&a.dehydrated!==null){if(e===null){if(!o)throw Error(Z(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Z(317));o[bn]=t}else no(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Wt(t),o=!1}else nn!==null&&(Yf(nn),nn=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||pt.current&1?_t===0&&(_t=3):Nh())),t.updateQueue!==null&&(t.flags|=4),Wt(t),null);case 4:return so(),Ff(e,t),e===null&&Rl(t.stateNode.containerInfo),Wt(t),null;case 10:return oh(t.type._context),Wt(t),null;case 17:return cr(t.type)&&Zc(),Wt(t),null;case 19:if(it(pt),o=t.memoizedState,o===null)return Wt(t),null;if(a=(t.flags&128)!==0,l=o.rendering,l===null)if(a)qo(o,!1);else{if(_t!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=ou(e),l!==null){for(t.flags|=128,qo(o,!1),a=l.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=r,r=t.child;r!==null;)o=r,e=a,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return et(pt,pt.current&1|2),t.child}e=e.sibling}o.tail!==null&&St()>lo&&(t.flags|=128,a=!0,qo(o,!1),t.lanes=4194304)}else{if(!a)if(e=ou(l),e!==null){if(t.flags|=128,a=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),qo(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!mt)return Wt(t),null}else 2*St()-o.renderingStartTime>lo&&r!==1073741824&&(t.flags|=128,a=!0,qo(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(r=o.last,r!==null?r.sibling=l:t.child=l,o.last=l)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=St(),t.sibling=null,r=pt.current,et(pt,a?r&1|2:r&1),t):(Wt(t),null);case 22:case 23:return wh(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?xr&1073741824&&(Wt(t),t.subtreeFlags&6&&(t.flags|=8192)):Wt(t),null;case 24:return null;case 25:return null}throw Error(Z(156,t.tag))}function lk(e,t){switch(rh(t),t.tag){case 1:return cr(t.type)&&Zc(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return so(),it(ir),it(Kt),dh(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return uh(t),null;case 13:if(it(pt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Z(340));no()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return it(pt),null;case 4:return so(),null;case 10:return oh(t.type._context),null;case 22:case 23:return wh(),null;case 24:return null;default:return null}}var Qi=!1,Yt=!1,ik=typeof WeakSet=="function"?WeakSet:Set,ce=null;function Bs(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(a){yt(e,t,a)}else r.current=null}function jf(e,t,r){try{r()}catch(a){yt(e,t,a)}}var lv=!1;function ck(e,t){if(wf=Kc,e=Fx(),eh(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var s=a.anchorOffset,o=a.focusNode;a=a.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var l=0,i=-1,c=-1,d=0,u=0,m=e,f=null;t:for(;;){for(var x;m!==r||s!==0&&m.nodeType!==3||(i=l+s),m!==o||a!==0&&m.nodeType!==3||(c=l+a),m.nodeType===3&&(l+=m.nodeValue.length),(x=m.firstChild)!==null;)f=m,m=x;for(;;){if(m===e)break t;if(f===r&&++d===s&&(i=l),f===o&&++u===a&&(c=l),(x=m.nextSibling)!==null)break;m=f,f=m.parentNode}m=x}r=i===-1||c===-1?null:{start:i,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Nf={focusedElem:e,selectionRange:r},Kc=!1,ce=t;ce!==null;)if(t=ce,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ce=e;else for(;ce!==null;){t=ce;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var y=b.memoizedProps,v=b.memoizedState,p=t.stateNode,h=p.getSnapshotBeforeUpdate(t.elementType===t.type?y:en(t.type,y),v);p.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var E=t.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(w){yt(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,ce=e;break}ce=t.return}return b=lv,lv=!1,b}function hl(e,t,r){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var s=a=a.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&jf(t,r,o)}s=s.next}while(s!==a)}}function qu(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var a=r.create;r.destroy=a()}r=r.next}while(r!==t)}}function Bf(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Pb(e){var t=e.alternate;t!==null&&(e.alternate=null,Pb(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[bn],delete t[Pl],delete t[kf],delete t[HC],delete t[YC])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Lb(e){return e.tag===5||e.tag===3||e.tag===4}function iv(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Lb(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function zf(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Jc));else if(a!==4&&(e=e.child,e!==null))for(zf(e,t,r),e=e.sibling;e!==null;)zf(e,t,r),e=e.sibling}function Uf(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Uf(e,t,r),e=e.sibling;e!==null;)Uf(e,t,r),e=e.sibling}var Ft=null,tn=!1;function ia(e,t,r){for(r=r.child;r!==null;)Ib(e,t,r),r=r.sibling}function Ib(e,t,r){if(Cn&&typeof Cn.onCommitFiberUnmount=="function")try{Cn.onCommitFiberUnmount(ju,r)}catch{}switch(r.tag){case 5:Yt||Bs(r,t);case 6:var a=Ft,s=tn;Ft=null,ia(e,t,r),Ft=a,tn=s,Ft!==null&&(tn?(e=Ft,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ft.removeChild(r.stateNode));break;case 18:Ft!==null&&(tn?(e=Ft,r=r.stateNode,e.nodeType===8?fm(e.parentNode,r):e.nodeType===1&&fm(e,r),Tl(e)):fm(Ft,r.stateNode));break;case 4:a=Ft,s=tn,Ft=r.stateNode.containerInfo,tn=!0,ia(e,t,r),Ft=a,tn=s;break;case 0:case 11:case 14:case 15:if(!Yt&&(a=r.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){s=a=a.next;do{var o=s,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&jf(r,t,l),s=s.next}while(s!==a)}ia(e,t,r);break;case 1:if(!Yt&&(Bs(r,t),a=r.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(i){yt(r,t,i)}ia(e,t,r);break;case 21:ia(e,t,r);break;case 22:r.mode&1?(Yt=(a=Yt)||r.memoizedState!==null,ia(e,t,r),Yt=a):ia(e,t,r);break;default:ia(e,t,r)}}function cv(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new ik),t.forEach(function(a){var s=yk.bind(null,e,a);r.has(a)||(r.add(a),a.then(s,s))})}}function Zr(e,t){var r=t.deletions;if(r!==null)for(var a=0;a<r.length;a++){var s=r[a];try{var o=e,l=t,i=l;e:for(;i!==null;){switch(i.tag){case 5:Ft=i.stateNode,tn=!1;break e;case 3:Ft=i.stateNode.containerInfo,tn=!0;break e;case 4:Ft=i.stateNode.containerInfo,tn=!0;break e}i=i.return}if(Ft===null)throw Error(Z(160));Ib(o,l,s),Ft=null,tn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){yt(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)$b(t,e),t=t.sibling}function $b(e,t){var r=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Zr(t,e),vn(e),a&4){try{hl(3,e,e.return),qu(3,e)}catch(y){yt(e,e.return,y)}try{hl(5,e,e.return)}catch(y){yt(e,e.return,y)}}break;case 1:Zr(t,e),vn(e),a&512&&r!==null&&Bs(r,r.return);break;case 5:if(Zr(t,e),vn(e),a&512&&r!==null&&Bs(r,r.return),e.flags&32){var s=e.stateNode;try{Cl(s,"")}catch(y){yt(e,e.return,y)}}if(a&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,l=r!==null?r.memoizedProps:o,i=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{i==="input"&&o.type==="radio"&&o.name!=null&&sx(s,o),mf(i,l);var d=mf(i,o);for(l=0;l<c.length;l+=2){var u=c[l],m=c[l+1];u==="style"?ux(s,m):u==="dangerouslySetInnerHTML"?ix(s,m):u==="children"?Cl(s,m):zp(s,u,m,d)}switch(i){case"input":of(s,o);break;case"textarea":ox(s,o);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var x=o.value;x!=null?Vs(s,!!o.multiple,x,!1):f!==!!o.multiple&&(o.defaultValue!=null?Vs(s,!!o.multiple,o.defaultValue,!0):Vs(s,!!o.multiple,o.multiple?[]:"",!1))}s[Pl]=o}catch(y){yt(e,e.return,y)}}break;case 6:if(Zr(t,e),vn(e),a&4){if(e.stateNode===null)throw Error(Z(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(y){yt(e,e.return,y)}}break;case 3:if(Zr(t,e),vn(e),a&4&&r!==null&&r.memoizedState.isDehydrated)try{Tl(t.containerInfo)}catch(y){yt(e,e.return,y)}break;case 4:Zr(t,e),vn(e);break;case 13:Zr(t,e),vn(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(xh=St())),a&4&&cv(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(Yt=(d=Yt)||u,Zr(t,e),Yt=d):Zr(t,e),vn(e),a&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(ce=e,u=e.child;u!==null;){for(m=ce=u;ce!==null;){switch(f=ce,x=f.child,f.tag){case 0:case 11:case 14:case 15:hl(4,f,f.return);break;case 1:Bs(f,f.return);var b=f.stateNode;if(typeof b.componentWillUnmount=="function"){a=f,r=f.return;try{t=a,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(y){yt(a,r,y)}}break;case 5:Bs(f,f.return);break;case 22:if(f.memoizedState!==null){dv(m);continue}}x!==null?(x.return=f,ce=x):dv(m)}u=u.sibling}e:for(u=null,m=e;;){if(m.tag===5){if(u===null){u=m;try{s=m.stateNode,d?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(i=m.stateNode,c=m.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,i.style.display=cx("display",l))}catch(y){yt(e,e.return,y)}}}else if(m.tag===6){if(u===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(y){yt(e,e.return,y)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Zr(t,e),vn(e),a&4&&cv(e);break;case 21:break;default:Zr(t,e),vn(e)}}function vn(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Lb(r)){var a=r;break e}r=r.return}throw Error(Z(160))}switch(a.tag){case 5:var s=a.stateNode;a.flags&32&&(Cl(s,""),a.flags&=-33);var o=iv(e);Uf(e,o,s);break;case 3:case 4:var l=a.stateNode.containerInfo,i=iv(e);zf(e,i,l);break;default:throw Error(Z(161))}}catch(c){yt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function uk(e,t,r){ce=e,Fb(e)}function Fb(e,t,r){for(var a=(e.mode&1)!==0;ce!==null;){var s=ce,o=s.child;if(s.tag===22&&a){var l=s.memoizedState!==null||Qi;if(!l){var i=s.alternate,c=i!==null&&i.memoizedState!==null||Yt;i=Qi;var d=Yt;if(Qi=l,(Yt=c)&&!d)for(ce=s;ce!==null;)l=ce,c=l.child,l.tag===22&&l.memoizedState!==null?mv(s):c!==null?(c.return=l,ce=c):mv(s);for(;o!==null;)ce=o,Fb(o),o=o.sibling;ce=s,Qi=i,Yt=d}uv(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,ce=o):uv(e)}}function uv(e){for(;ce!==null;){var t=ce;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Yt||qu(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!Yt)if(r===null)a.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:en(t.type,r.memoizedProps);a.componentDidUpdate(s,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&G0(t,o,a);break;case 3:var l=t.updateQueue;if(l!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}G0(t,l,r)}break;case 5:var i=t.stateNode;if(r===null&&t.flags&4){r=i;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var m=u.dehydrated;m!==null&&Tl(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}Yt||t.flags&512&&Bf(t)}catch(f){yt(t,t.return,f)}}if(t===e){ce=null;break}if(r=t.sibling,r!==null){r.return=t.return,ce=r;break}ce=t.return}}function dv(e){for(;ce!==null;){var t=ce;if(t===e){ce=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ce=r;break}ce=t.return}}function mv(e){for(;ce!==null;){var t=ce;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{qu(4,t)}catch(c){yt(t,r,c)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var s=t.return;try{a.componentDidMount()}catch(c){yt(t,s,c)}}var o=t.return;try{Bf(t)}catch(c){yt(t,o,c)}break;case 5:var l=t.return;try{Bf(t)}catch(c){yt(t,l,c)}}}catch(c){yt(t,t.return,c)}if(t===e){ce=null;break}var i=t.sibling;if(i!==null){i.return=t.return,ce=i;break}ce=t.return}}var dk=Math.ceil,cu=aa.ReactCurrentDispatcher,yh=aa.ReactCurrentOwner,Ur=aa.ReactCurrentBatchConfig,je=0,It=null,kt=null,Bt=0,xr=0,zs=Fa(0),_t=0,Bl=null,ms=0,Gu=0,Eh=0,gl=null,or=null,xh=0,lo=1/0,zn=null,uu=!1,Vf=null,ka=null,Ji=!1,va=null,du=0,vl=0,Wf=null,Nc=-1,Sc=0;function er(){return je&6?St():Nc!==-1?Nc:Nc=St()}function Da(e){return e.mode&1?je&2&&Bt!==0?Bt&-Bt:GC.transition!==null?(Sc===0&&(Sc=wx()),Sc):(e=qe,e!==0||(e=window.event,e=e===void 0?16:Tx(e.type)),e):1}function ln(e,t,r,a){if(50<vl)throw vl=0,Wf=null,Error(Z(185));di(e,r,a),(!(je&2)||e!==It)&&(e===It&&(!(je&2)&&(Gu|=r),_t===4&&ha(e,Bt)),ur(e,a),r===1&&je===0&&!(t.mode&1)&&(lo=St()+500,Wu&&ja()))}function ur(e,t){var r=e.callbackNode;GS(e,t);var a=Gc(e,e===It?Bt:0);if(a===0)r!==null&&b0(r),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(r!=null&&b0(r),t===1)e.tag===0?qC(fv.bind(null,e)):Gx(fv.bind(null,e)),VC(function(){!(je&6)&&ja()}),r=null;else{switch(Nx(a)){case 1:r=Yp;break;case 4:r=xx;break;case 16:r=qc;break;case 536870912:r=bx;break;default:r=qc}r=Yb(r,jb.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function jb(e,t){if(Nc=-1,Sc=0,je&6)throw Error(Z(327));var r=e.callbackNode;if(Gs()&&e.callbackNode!==r)return null;var a=Gc(e,e===It?Bt:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=mu(e,a);else{t=a;var s=je;je|=2;var o=zb();(It!==e||Bt!==t)&&(zn=null,lo=St()+500,ns(e,t));do try{pk();break}catch(i){Bb(e,i)}while(!0);sh(),cu.current=o,je=s,kt!==null?t=0:(It=null,Bt=0,t=_t)}if(t!==0){if(t===2&&(s=vf(e),s!==0&&(a=s,t=Hf(e,s))),t===1)throw r=Bl,ns(e,0),ha(e,a),ur(e,St()),r;if(t===6)ha(e,a);else{if(s=e.current.alternate,!(a&30)&&!mk(s)&&(t=mu(e,a),t===2&&(o=vf(e),o!==0&&(a=o,t=Hf(e,o))),t===1))throw r=Bl,ns(e,0),ha(e,a),ur(e,St()),r;switch(e.finishedWork=s,e.finishedLanes=a,t){case 0:case 1:throw Error(Z(345));case 2:Ga(e,or,zn);break;case 3:if(ha(e,a),(a&130023424)===a&&(t=xh+500-St(),10<t)){if(Gc(e,0)!==0)break;if(s=e.suspendedLanes,(s&a)!==a){er(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Cf(Ga.bind(null,e,or,zn),t);break}Ga(e,or,zn);break;case 4:if(ha(e,a),(a&4194240)===a)break;for(t=e.eventTimes,s=-1;0<a;){var l=31-on(a);o=1<<l,l=t[l],l>s&&(s=l),a&=~o}if(a=s,a=St()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*dk(a/1960))-a,10<a){e.timeoutHandle=Cf(Ga.bind(null,e,or,zn),a);break}Ga(e,or,zn);break;case 5:Ga(e,or,zn);break;default:throw Error(Z(329))}}}return ur(e,St()),e.callbackNode===r?jb.bind(null,e):null}function Hf(e,t){var r=gl;return e.current.memoizedState.isDehydrated&&(ns(e,t).flags|=256),e=mu(e,t),e!==2&&(t=or,or=r,t!==null&&Yf(t)),e}function Yf(e){or===null?or=e:or.push.apply(or,e)}function mk(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var a=0;a<r.length;a++){var s=r[a],o=s.getSnapshot;s=s.value;try{if(!cn(o(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ha(e,t){for(t&=~Eh,t&=~Gu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-on(t),a=1<<r;e[r]=-1,t&=~a}}function fv(e){if(je&6)throw Error(Z(327));Gs();var t=Gc(e,0);if(!(t&1))return ur(e,St()),null;var r=mu(e,t);if(e.tag!==0&&r===2){var a=vf(e);a!==0&&(t=a,r=Hf(e,a))}if(r===1)throw r=Bl,ns(e,0),ha(e,t),ur(e,St()),r;if(r===6)throw Error(Z(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ga(e,or,zn),ur(e,St()),null}function bh(e,t){var r=je;je|=1;try{return e(t)}finally{je=r,je===0&&(lo=St()+500,Wu&&ja())}}function fs(e){va!==null&&va.tag===0&&!(je&6)&&Gs();var t=je;je|=1;var r=Ur.transition,a=qe;try{if(Ur.transition=null,qe=1,e)return e()}finally{qe=a,Ur.transition=r,je=t,!(je&6)&&ja()}}function wh(){xr=zs.current,it(zs)}function ns(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,UC(r)),kt!==null)for(r=kt.return;r!==null;){var a=r;switch(rh(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&Zc();break;case 3:so(),it(ir),it(Kt),dh();break;case 5:uh(a);break;case 4:so();break;case 13:it(pt);break;case 19:it(pt);break;case 10:oh(a.type._context);break;case 22:case 23:wh()}r=r.return}if(It=e,kt=e=Aa(e.current,null),Bt=xr=t,_t=0,Bl=null,Eh=Gu=ms=0,or=gl=null,Ja!==null){for(t=0;t<Ja.length;t++)if(r=Ja[t],a=r.interleaved,a!==null){r.interleaved=null;var s=a.next,o=r.pending;if(o!==null){var l=o.next;o.next=s,a.next=l}r.pending=a}Ja=null}return e}function Bb(e,t){do{var r=kt;try{if(sh(),xc.current=iu,lu){for(var a=ht.memoizedState;a!==null;){var s=a.queue;s!==null&&(s.pending=null),a=a.next}lu=!1}if(ds=0,Pt=At=ht=null,pl=!1,$l=0,yh.current=null,r===null||r.return===null){_t=1,Bl=t,kt=null;break}e:{var o=e,l=r.return,i=r,c=t;if(t=Bt,i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=i,m=u.tag;if(!(u.mode&1)&&(m===0||m===11||m===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var x=ev(l);if(x!==null){x.flags&=-257,tv(x,l,i,o,t),x.mode&1&&Z0(o,d,t),t=x,c=d;var b=t.updateQueue;if(b===null){var y=new Set;y.add(c),t.updateQueue=y}else b.add(c);break e}else{if(!(t&1)){Z0(o,d,t),Nh();break e}c=Error(Z(426))}}else if(mt&&i.mode&1){var v=ev(l);if(v!==null){!(v.flags&65536)&&(v.flags|=256),tv(v,l,i,o,t),nh(oo(c,i));break e}}o=c=oo(c,i),_t!==4&&(_t=2),gl===null?gl=[o]:gl.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var p=Nb(o,c,t);q0(o,p);break e;case 1:i=c;var h=o.type,E=o.stateNode;if(!(o.flags&128)&&(typeof h.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(ka===null||!ka.has(E)))){o.flags|=65536,t&=-t,o.lanes|=t;var w=Sb(o,i,t);q0(o,w);break e}}o=o.return}while(o!==null)}Vb(r)}catch(N){t=N,kt===r&&r!==null&&(kt=r=r.return);continue}break}while(!0)}function zb(){var e=cu.current;return cu.current=iu,e===null?iu:e}function Nh(){(_t===0||_t===3||_t===2)&&(_t=4),It===null||!(ms&268435455)&&!(Gu&268435455)||ha(It,Bt)}function mu(e,t){var r=je;je|=2;var a=zb();(It!==e||Bt!==t)&&(zn=null,ns(e,t));do try{fk();break}catch(s){Bb(e,s)}while(!0);if(sh(),je=r,cu.current=a,kt!==null)throw Error(Z(261));return It=null,Bt=0,_t}function fk(){for(;kt!==null;)Ub(kt)}function pk(){for(;kt!==null&&!jS();)Ub(kt)}function Ub(e){var t=Hb(e.alternate,e,xr);e.memoizedProps=e.pendingProps,t===null?Vb(e):kt=t,yh.current=null}function Vb(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=lk(r,t),r!==null){r.flags&=32767,kt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{_t=6,kt=null;return}}else if(r=ok(r,t,xr),r!==null){kt=r;return}if(t=t.sibling,t!==null){kt=t;return}kt=t=e}while(t!==null);_t===0&&(_t=5)}function Ga(e,t,r){var a=qe,s=Ur.transition;try{Ur.transition=null,qe=1,hk(e,t,r,a)}finally{Ur.transition=s,qe=a}return null}function hk(e,t,r,a){do Gs();while(va!==null);if(je&6)throw Error(Z(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Z(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(KS(e,o),e===It&&(kt=It=null,Bt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ji||(Ji=!0,Yb(qc,function(){return Gs(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=Ur.transition,Ur.transition=null;var l=qe;qe=1;var i=je;je|=4,yh.current=null,ck(e,r),$b(r,e),LC(Nf),Kc=!!wf,Nf=wf=null,e.current=r,uk(r),BS(),je=i,qe=l,Ur.transition=o}else e.current=r;if(Ji&&(Ji=!1,va=e,du=s),o=e.pendingLanes,o===0&&(ka=null),VS(r.stateNode),ur(e,St()),t!==null)for(a=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],a(s.value,{componentStack:s.stack,digest:s.digest});if(uu)throw uu=!1,e=Vf,Vf=null,e;return du&1&&e.tag!==0&&Gs(),o=e.pendingLanes,o&1?e===Wf?vl++:(vl=0,Wf=e):vl=0,ja(),null}function Gs(){if(va!==null){var e=Nx(du),t=Ur.transition,r=qe;try{if(Ur.transition=null,qe=16>e?16:e,va===null)var a=!1;else{if(e=va,va=null,du=0,je&6)throw Error(Z(331));var s=je;for(je|=4,ce=e.current;ce!==null;){var o=ce,l=o.child;if(ce.flags&16){var i=o.deletions;if(i!==null){for(var c=0;c<i.length;c++){var d=i[c];for(ce=d;ce!==null;){var u=ce;switch(u.tag){case 0:case 11:case 15:hl(8,u,o)}var m=u.child;if(m!==null)m.return=u,ce=m;else for(;ce!==null;){u=ce;var f=u.sibling,x=u.return;if(Pb(u),u===d){ce=null;break}if(f!==null){f.return=x,ce=f;break}ce=x}}}var b=o.alternate;if(b!==null){var y=b.child;if(y!==null){b.child=null;do{var v=y.sibling;y.sibling=null,y=v}while(y!==null)}}ce=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,ce=l;else e:for(;ce!==null;){if(o=ce,o.flags&2048)switch(o.tag){case 0:case 11:case 15:hl(9,o,o.return)}var p=o.sibling;if(p!==null){p.return=o.return,ce=p;break e}ce=o.return}}var h=e.current;for(ce=h;ce!==null;){l=ce;var E=l.child;if(l.subtreeFlags&2064&&E!==null)E.return=l,ce=E;else e:for(l=h;ce!==null;){if(i=ce,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:qu(9,i)}}catch(N){yt(i,i.return,N)}if(i===l){ce=null;break e}var w=i.sibling;if(w!==null){w.return=i.return,ce=w;break e}ce=i.return}}if(je=s,ja(),Cn&&typeof Cn.onPostCommitFiberRoot=="function")try{Cn.onPostCommitFiberRoot(ju,e)}catch{}a=!0}return a}finally{qe=r,Ur.transition=t}}return!1}function pv(e,t,r){t=oo(r,t),t=Nb(e,t,1),e=Ca(e,t,1),t=er(),e!==null&&(di(e,1,t),ur(e,t))}function yt(e,t,r){if(e.tag===3)pv(e,e,r);else for(;t!==null;){if(t.tag===3){pv(t,e,r);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(ka===null||!ka.has(a))){e=oo(r,e),e=Sb(t,e,1),t=Ca(t,e,1),e=er(),t!==null&&(di(t,1,e),ur(t,e));break}}t=t.return}}function gk(e,t,r){var a=e.pingCache;a!==null&&a.delete(t),t=er(),e.pingedLanes|=e.suspendedLanes&r,It===e&&(Bt&r)===r&&(_t===4||_t===3&&(Bt&130023424)===Bt&&500>St()-xh?ns(e,0):Eh|=r),ur(e,t)}function Wb(e,t){t===0&&(e.mode&1?(t=Ui,Ui<<=1,!(Ui&130023424)&&(Ui=4194304)):t=1);var r=er();e=Zn(e,t),e!==null&&(di(e,t,r),ur(e,r))}function vk(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Wb(e,r)}function yk(e,t){var r=0;switch(e.tag){case 13:var a=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(Z(314))}a!==null&&a.delete(t),Wb(e,r)}var Hb;Hb=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||ir.current)lr=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return lr=!1,sk(e,t,r);lr=!!(e.flags&131072)}else lr=!1,mt&&t.flags&1048576&&Kx(t,ru,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;wc(e,t),e=t.pendingProps;var s=ro(t,Kt.current);qs(t,r),s=fh(null,t,a,e,s,r);var o=ph();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,cr(a)?(o=!0,eu(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ih(t),s.updater=Yu,t.stateNode=s,s._reactInternals=t,Rf(t,a,e,r),t=Lf(null,t,a,!0,o,r)):(t.tag=0,mt&&o&&th(t),Jt(null,t,s,r),t=t.child),t;case 16:a=t.elementType;e:{switch(wc(e,t),e=t.pendingProps,s=a._init,a=s(a._payload),t.type=a,s=t.tag=xk(a),e=en(a,e),s){case 0:t=Pf(null,t,a,e,r);break e;case 1:t=av(null,t,a,e,r);break e;case 11:t=rv(null,t,a,e,r);break e;case 14:t=nv(null,t,a,en(a.type,e),r);break e}throw Error(Z(306,a,""))}return t;case 0:return a=t.type,s=t.pendingProps,s=t.elementType===a?s:en(a,s),Pf(e,t,a,s,r);case 1:return a=t.type,s=t.pendingProps,s=t.elementType===a?s:en(a,s),av(e,t,a,s,r);case 3:e:{if(Ab(t),e===null)throw Error(Z(387));a=t.pendingProps,o=t.memoizedState,s=o.element,tb(e,t),su(t,a,null,r);var l=t.memoizedState;if(a=l.element,o.isDehydrated)if(o={element:a,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=oo(Error(Z(423)),t),t=sv(e,t,a,r,s);break e}else if(a!==s){s=oo(Error(Z(424)),t),t=sv(e,t,a,r,s);break e}else for(br=Sa(t.stateNode.containerInfo.firstChild),wr=t,mt=!0,nn=null,r=Zx(t,null,a,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(no(),a===s){t=ea(e,t,r);break e}Jt(e,t,a,r)}t=t.child}return t;case 5:return rb(t),e===null&&Tf(t),a=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,l=s.children,Sf(a,s)?l=null:o!==null&&Sf(a,o)&&(t.flags|=32),Db(e,t),Jt(e,t,l,r),t.child;case 6:return e===null&&Tf(t),null;case 13:return Tb(e,t,r);case 4:return ch(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=ao(t,null,a,r):Jt(e,t,a,r),t.child;case 11:return a=t.type,s=t.pendingProps,s=t.elementType===a?s:en(a,s),rv(e,t,a,s,r);case 7:return Jt(e,t,t.pendingProps,r),t.child;case 8:return Jt(e,t,t.pendingProps.children,r),t.child;case 12:return Jt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(a=t.type._context,s=t.pendingProps,o=t.memoizedProps,l=s.value,et(nu,a._currentValue),a._currentValue=l,o!==null)if(cn(o.value,l)){if(o.children===s.children&&!ir.current){t=ea(e,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var i=o.dependencies;if(i!==null){l=o.child;for(var c=i.firstContext;c!==null;){if(c.context===a){if(o.tag===1){c=Gn(-1,r&-r),c.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),_f(o.return,r,t),i.lanes|=r;break}c=c.next}}else if(o.tag===10)l=o.type===t.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(Z(341));l.lanes|=r,i=l.alternate,i!==null&&(i.lanes|=r),_f(l,r,t),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===t){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}Jt(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,a=t.pendingProps.children,qs(t,r),s=Vr(s),a=a(s),t.flags|=1,Jt(e,t,a,r),t.child;case 14:return a=t.type,s=en(a,t.pendingProps),s=en(a.type,s),nv(e,t,a,s,r);case 15:return Cb(e,t,t.type,t.pendingProps,r);case 17:return a=t.type,s=t.pendingProps,s=t.elementType===a?s:en(a,s),wc(e,t),t.tag=1,cr(a)?(e=!0,eu(t)):e=!1,qs(t,r),wb(t,a,s),Rf(t,a,s,r),Lf(null,t,a,!0,e,r);case 19:return _b(e,t,r);case 22:return kb(e,t,r)}throw Error(Z(156,t.tag))};function Yb(e,t){return Ex(e,t)}function Ek(e,t,r,a){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zr(e,t,r,a){return new Ek(e,t,r,a)}function Sh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function xk(e){if(typeof e=="function")return Sh(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Vp)return 11;if(e===Wp)return 14}return 2}function Aa(e,t){var r=e.alternate;return r===null?(r=zr(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Cc(e,t,r,a,s,o){var l=2;if(a=e,typeof e=="function")Sh(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Os:return as(r.children,s,o,t);case Up:l=8,s|=8;break;case tf:return e=zr(12,r,t,s|2),e.elementType=tf,e.lanes=o,e;case rf:return e=zr(13,r,t,s),e.elementType=rf,e.lanes=o,e;case nf:return e=zr(19,r,t,s),e.elementType=nf,e.lanes=o,e;case rx:return Ku(r,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ex:l=10;break e;case tx:l=9;break e;case Vp:l=11;break e;case Wp:l=14;break e;case da:l=16,a=null;break e}throw Error(Z(130,e==null?e:typeof e,""))}return t=zr(l,r,t,s),t.elementType=e,t.type=a,t.lanes=o,t}function as(e,t,r,a){return e=zr(7,e,a,t),e.lanes=r,e}function Ku(e,t,r,a){return e=zr(22,e,a,t),e.elementType=rx,e.lanes=r,e.stateNode={isHidden:!1},e}function bm(e,t,r){return e=zr(6,e,null,t),e.lanes=r,e}function wm(e,t,r){return t=zr(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function bk(e,t,r,a,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rm(0),this.expirationTimes=rm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rm(0),this.identifierPrefix=a,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ch(e,t,r,a,s,o,l,i,c){return e=new bk(e,t,r,i,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=zr(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},ih(o),e}function wk(e,t,r){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_s,key:a==null?null:""+a,children:e,containerInfo:t,implementation:r}}function qb(e){if(!e)return Ma;e=e._reactInternals;e:{if(Ns(e)!==e||e.tag!==1)throw Error(Z(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(cr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Z(171))}if(e.tag===1){var r=e.type;if(cr(r))return qx(e,r,t)}return t}function Gb(e,t,r,a,s,o,l,i,c){return e=Ch(r,a,!0,e,s,o,l,i,c),e.context=qb(null),r=e.current,a=er(),s=Da(r),o=Gn(a,s),o.callback=t??null,Ca(r,o,s),e.current.lanes=s,di(e,s,a),ur(e,a),e}function Xu(e,t,r,a){var s=t.current,o=er(),l=Da(s);return r=qb(r),t.context===null?t.context=r:t.pendingContext=r,t=Gn(o,l),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=Ca(s,t,l),e!==null&&(ln(e,s,l,o),Ec(e,s,l)),l}function fu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function hv(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function kh(e,t){hv(e,t),(e=e.alternate)&&hv(e,t)}function Nk(){return null}var Kb=typeof reportError=="function"?reportError:function(e){console.error(e)};function Dh(e){this._internalRoot=e}Qu.prototype.render=Dh.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Z(409));Xu(e,t,null,null)};Qu.prototype.unmount=Dh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;fs(function(){Xu(null,e,null,null)}),t[Jn]=null}};function Qu(e){this._internalRoot=e}Qu.prototype.unstable_scheduleHydration=function(e){if(e){var t=kx();e={blockedOn:null,target:e,priority:t};for(var r=0;r<pa.length&&t!==0&&t<pa[r].priority;r++);pa.splice(r,0,e),r===0&&Ax(e)}};function Ah(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ju(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function gv(){}function Sk(e,t,r,a,s){if(s){if(typeof a=="function"){var o=a;a=function(){var d=fu(l);o.call(d)}}var l=Gb(t,a,e,0,null,!1,!1,"",gv);return e._reactRootContainer=l,e[Jn]=l.current,Rl(e.nodeType===8?e.parentNode:e),fs(),l}for(;s=e.lastChild;)e.removeChild(s);if(typeof a=="function"){var i=a;a=function(){var d=fu(c);i.call(d)}}var c=Ch(e,0,!1,null,null,!1,!1,"",gv);return e._reactRootContainer=c,e[Jn]=c.current,Rl(e.nodeType===8?e.parentNode:e),fs(function(){Xu(t,c,r,a)}),c}function Zu(e,t,r,a,s){var o=r._reactRootContainer;if(o){var l=o;if(typeof s=="function"){var i=s;s=function(){var c=fu(l);i.call(c)}}Xu(t,l,e,s)}else l=Sk(r,t,e,s,a);return fu(l)}Sx=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=al(t.pendingLanes);r!==0&&(qp(t,r|1),ur(t,St()),!(je&6)&&(lo=St()+500,ja()))}break;case 13:fs(function(){var a=Zn(e,1);if(a!==null){var s=er();ln(a,e,1,s)}}),kh(e,1)}};Gp=function(e){if(e.tag===13){var t=Zn(e,134217728);if(t!==null){var r=er();ln(t,e,134217728,r)}kh(e,134217728)}};Cx=function(e){if(e.tag===13){var t=Da(e),r=Zn(e,t);if(r!==null){var a=er();ln(r,e,t,a)}kh(e,t)}};kx=function(){return qe};Dx=function(e,t){var r=qe;try{return qe=e,t()}finally{qe=r}};pf=function(e,t,r){switch(t){case"input":if(of(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var a=r[t];if(a!==e&&a.form===e.form){var s=Vu(a);if(!s)throw Error(Z(90));ax(a),of(a,s)}}}break;case"textarea":ox(e,r);break;case"select":t=r.value,t!=null&&Vs(e,!!r.multiple,t,!1)}};fx=bh;px=fs;var Ck={usingClientEntryPoint:!1,Events:[fi,Ls,Vu,dx,mx,bh]},Go={findFiberByHostInstance:Qa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},kk={bundleType:Go.bundleType,version:Go.version,rendererPackageName:Go.rendererPackageName,rendererConfig:Go.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:aa.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=vx(e),e===null?null:e.stateNode},findFiberByHostInstance:Go.findFiberByHostInstance||Nk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zi.isDisabled&&Zi.supportsFiber)try{ju=Zi.inject(kk),Cn=Zi}catch{}}Cr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ck;Cr.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ah(t))throw Error(Z(200));return wk(e,t,null,r)};Cr.createRoot=function(e,t){if(!Ah(e))throw Error(Z(299));var r=!1,a="",s=Kb;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Ch(e,1,!1,null,null,r,!1,a,s),e[Jn]=t.current,Rl(e.nodeType===8?e.parentNode:e),new Dh(t)};Cr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Z(188)):(e=Object.keys(e).join(","),Error(Z(268,e)));return e=vx(t),e=e===null?null:e.stateNode,e};Cr.flushSync=function(e){return fs(e)};Cr.hydrate=function(e,t,r){if(!Ju(t))throw Error(Z(200));return Zu(null,e,t,!0,r)};Cr.hydrateRoot=function(e,t,r){if(!Ah(e))throw Error(Z(405));var a=r!=null&&r.hydratedSources||null,s=!1,o="",l=Kb;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),t=Gb(t,null,e,1,r??null,s,!1,o,l),e[Jn]=t.current,Rl(e),a)for(e=0;e<a.length;e++)r=a[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Qu(t)};Cr.render=function(e,t,r){if(!Ju(t))throw Error(Z(200));return Zu(null,e,t,!1,r)};Cr.unmountComponentAtNode=function(e){if(!Ju(e))throw Error(Z(40));return e._reactRootContainer?(fs(function(){Zu(null,null,e,!1,function(){e._reactRootContainer=null,e[Jn]=null})}),!0):!1};Cr.unstable_batchedUpdates=bh;Cr.unstable_renderSubtreeIntoContainer=function(e,t,r,a){if(!Ju(r))throw Error(Z(200));if(e==null||e._reactInternals===void 0)throw Error(Z(38));return Zu(e,t,r,!1,a)};Cr.version="18.3.1-next-f1338f8080-20240426";function Xb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Xb)}catch(e){console.error(e)}}Xb(),XE.exports=Cr;var es=XE.exports;const Qb=gr(es);var vv=es;Zm.createRoot=vv.createRoot,Zm.hydrateRoot=vv.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zl(){return zl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},zl.apply(this,arguments)}var ya;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ya||(ya={}));const yv="popstate";function Dk(e){e===void 0&&(e={});function t(a,s){let{pathname:o,search:l,hash:i}=a.location;return qf("",{pathname:o,search:l,hash:i},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(a,s){return typeof s=="string"?s:pu(s)}return Tk(t,r,null,e)}function Ct(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Jb(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Ak(){return Math.random().toString(36).substr(2,8)}function Ev(e,t){return{usr:e.state,key:e.key,idx:t}}function qf(e,t,r,a){return r===void 0&&(r=null),zl({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?yo(t):t,{state:r,key:t&&t.key||a||Ak()})}function pu(e){let{pathname:t="/",search:r="",hash:a=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function yo(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let a=e.indexOf("?");a>=0&&(t.search=e.substr(a),e=e.substr(0,a)),e&&(t.pathname=e)}return t}function Tk(e,t,r,a){a===void 0&&(a={});let{window:s=document.defaultView,v5Compat:o=!1}=a,l=s.history,i=ya.Pop,c=null,d=u();d==null&&(d=0,l.replaceState(zl({},l.state,{idx:d}),""));function u(){return(l.state||{idx:null}).idx}function m(){i=ya.Pop;let v=u(),p=v==null?null:v-d;d=v,c&&c({action:i,location:y.location,delta:p})}function f(v,p){i=ya.Push;let h=qf(y.location,v,p);d=u()+1;let E=Ev(h,d),w=y.createHref(h);try{l.pushState(E,"",w)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;s.location.assign(w)}o&&c&&c({action:i,location:y.location,delta:1})}function x(v,p){i=ya.Replace;let h=qf(y.location,v,p);d=u();let E=Ev(h,d),w=y.createHref(h);l.replaceState(E,"",w),o&&c&&c({action:i,location:y.location,delta:0})}function b(v){let p=s.location.origin!=="null"?s.location.origin:s.location.href,h=typeof v=="string"?v:pu(v);return h=h.replace(/ $/,"%20"),Ct(p,"No window.location.(origin|href) available to create URL for href: "+h),new URL(h,p)}let y={get action(){return i},get location(){return e(s,l)},listen(v){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(yv,m),c=v,()=>{s.removeEventListener(yv,m),c=null}},createHref(v){return t(s,v)},createURL:b,encodeLocation(v){let p=b(v);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:f,replace:x,go(v){return l.go(v)}};return y}var xv;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(xv||(xv={}));function _k(e,t,r){return r===void 0&&(r="/"),Ok(e,t,r)}function Ok(e,t,r,a){let s=typeof t=="string"?yo(t):t,o=Th(s.pathname||"/",r);if(o==null)return null;let l=Zb(e);Rk(l);let i=null;for(let c=0;i==null&&c<l.length;++c){let d=Wk(o);i=zk(l[c],d)}return i}function Zb(e,t,r,a){t===void 0&&(t=[]),r===void 0&&(r=[]),a===void 0&&(a="");let s=(o,l,i)=>{let c={relativePath:i===void 0?o.path||"":i,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};c.relativePath.startsWith("/")&&(Ct(c.relativePath.startsWith(a),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(a.length));let d=Ta([a,c.relativePath]),u=r.concat(c);o.children&&o.children.length>0&&(Ct(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Zb(o.children,t,u,d)),!(o.path==null&&!o.index)&&t.push({path:d,score:jk(d,o.index),routesMeta:u})};return e.forEach((o,l)=>{var i;if(o.path===""||!((i=o.path)!=null&&i.includes("?")))s(o,l);else for(let c of ew(o.path))s(o,l,c)}),t}function ew(e){let t=e.split("/");if(t.length===0)return[];let[r,...a]=t,s=r.endsWith("?"),o=r.replace(/\?$/,"");if(a.length===0)return s?[o,""]:[o];let l=ew(a.join("/")),i=[];return i.push(...l.map(c=>c===""?o:[o,c].join("/"))),s&&i.push(...l),i.map(c=>e.startsWith("/")&&c===""?"/":c)}function Rk(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Bk(t.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}const Mk=/^:[\w-]+$/,Pk=3,Lk=2,Ik=1,$k=10,Fk=-2,bv=e=>e==="*";function jk(e,t){let r=e.split("/"),a=r.length;return r.some(bv)&&(a+=Fk),t&&(a+=Lk),r.filter(s=>!bv(s)).reduce((s,o)=>s+(Mk.test(o)?Pk:o===""?Ik:$k),a)}function Bk(e,t){return e.length===t.length&&e.slice(0,-1).every((a,s)=>a===t[s])?e[e.length-1]-t[t.length-1]:0}function zk(e,t,r){let{routesMeta:a}=e,s={},o="/",l=[];for(let i=0;i<a.length;++i){let c=a[i],d=i===a.length-1,u=o==="/"?t:t.slice(o.length)||"/",m=Uk({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),f=c.route;if(!m)return null;Object.assign(s,m.params),l.push({params:s,pathname:Ta([o,m.pathname]),pathnameBase:Gk(Ta([o,m.pathnameBase])),route:f}),m.pathnameBase!=="/"&&(o=Ta([o,m.pathnameBase]))}return l}function Uk(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,a]=Vk(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),i=s.slice(1);return{params:a.reduce((d,u,m)=>{let{paramName:f,isOptional:x}=u;if(f==="*"){let y=i[m]||"";l=o.slice(0,o.length-y.length).replace(/(.)\/+$/,"$1")}const b=i[m];return x&&!b?d[f]=void 0:d[f]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:l,pattern:e}}function Vk(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Jb(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let a=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,i,c)=>(a.push({paramName:i,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(a.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),a]}function Wk(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Jb(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Th(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,a=e.charAt(r);return a&&a!=="/"?null:e.slice(r)||"/"}function Hk(e,t){t===void 0&&(t="/");let{pathname:r,search:a="",hash:s=""}=typeof e=="string"?yo(e):e;return{pathname:r?r.startsWith("/")?r:Yk(r,t):t,search:Kk(a),hash:Xk(s)}}function Yk(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Nm(e,t,r,a){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function qk(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function _h(e,t){let r=qk(e);return t?r.map((a,s)=>s===r.length-1?a.pathname:a.pathnameBase):r.map(a=>a.pathnameBase)}function Oh(e,t,r,a){a===void 0&&(a=!1);let s;typeof e=="string"?s=yo(e):(s=zl({},e),Ct(!s.pathname||!s.pathname.includes("?"),Nm("?","pathname","search",s)),Ct(!s.pathname||!s.pathname.includes("#"),Nm("#","pathname","hash",s)),Ct(!s.search||!s.search.includes("#"),Nm("#","search","hash",s)));let o=e===""||s.pathname==="",l=o?"/":s.pathname,i;if(l==null)i=r;else{let m=t.length-1;if(!a&&l.startsWith("..")){let f=l.split("/");for(;f[0]==="..";)f.shift(),m-=1;s.pathname=f.join("/")}i=m>=0?t[m]:"/"}let c=Hk(s,i),d=l&&l!=="/"&&l.endsWith("/"),u=(o||l===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const Ta=e=>e.join("/").replace(/\/\/+/g,"/"),Gk=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Kk=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Xk=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Qk(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const tw=["post","put","patch","delete"];new Set(tw);const Jk=["get",...tw];new Set(Jk);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ul(){return Ul=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Ul.apply(this,arguments)}const Rh=g.createContext(null),Zk=g.createContext(null),Ba=g.createContext(null),ed=g.createContext(null),Mn=g.createContext({outlet:null,matches:[],isDataRoute:!1}),rw=g.createContext(null);function e4(e,t){let{relative:r}=t===void 0?{}:t;Eo()||Ct(!1);let{basename:a,navigator:s}=g.useContext(Ba),{hash:o,pathname:l,search:i}=aw(e,{relative:r}),c=l;return a!=="/"&&(c=l==="/"?a:Ta([a,l])),s.createHref({pathname:c,search:i,hash:o})}function Eo(){return g.useContext(ed)!=null}function xo(){return Eo()||Ct(!1),g.useContext(ed).location}function nw(e){g.useContext(Ba).static||g.useLayoutEffect(e)}function qr(){let{isDataRoute:e}=g.useContext(Mn);return e?h4():t4()}function t4(){Eo()||Ct(!1);let e=g.useContext(Rh),{basename:t,future:r,navigator:a}=g.useContext(Ba),{matches:s}=g.useContext(Mn),{pathname:o}=xo(),l=JSON.stringify(_h(s,r.v7_relativeSplatPath)),i=g.useRef(!1);return nw(()=>{i.current=!0}),g.useCallback(function(d,u){if(u===void 0&&(u={}),!i.current)return;if(typeof d=="number"){a.go(d);return}let m=Oh(d,JSON.parse(l),o,u.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:Ta([t,m.pathname])),(u.replace?a.replace:a.push)(m,u.state,u)},[t,a,l,o,e])}const r4=g.createContext(null);function n4(e){let t=g.useContext(Mn).outlet;return t&&g.createElement(r4.Provider,{value:e},t)}function Mh(){let{matches:e}=g.useContext(Mn),t=e[e.length-1];return t?t.params:{}}function aw(e,t){let{relative:r}=t===void 0?{}:t,{future:a}=g.useContext(Ba),{matches:s}=g.useContext(Mn),{pathname:o}=xo(),l=JSON.stringify(_h(s,a.v7_relativeSplatPath));return g.useMemo(()=>Oh(e,JSON.parse(l),o,r==="path"),[e,l,o,r])}function a4(e,t){return s4(e,t)}function s4(e,t,r,a){Eo()||Ct(!1);let{navigator:s}=g.useContext(Ba),{matches:o}=g.useContext(Mn),l=o[o.length-1],i=l?l.params:{};l&&l.pathname;let c=l?l.pathnameBase:"/";l&&l.route;let d=xo(),u;if(t){var m;let v=typeof t=="string"?yo(t):t;c==="/"||(m=v.pathname)!=null&&m.startsWith(c)||Ct(!1),u=v}else u=d;let f=u.pathname||"/",x=f;if(c!=="/"){let v=c.replace(/^\//,"").split("/");x="/"+f.replace(/^\//,"").split("/").slice(v.length).join("/")}let b=_k(e,{pathname:x}),y=u4(b&&b.map(v=>Object.assign({},v,{params:Object.assign({},i,v.params),pathname:Ta([c,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:Ta([c,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),o,r,a);return t&&y?g.createElement(ed.Provider,{value:{location:Ul({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:ya.Pop}},y):y}function o4(){let e=p4(),t=Qk(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),r?g.createElement("pre",{style:s},r):null,null)}const l4=g.createElement(o4,null);class i4 extends g.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?g.createElement(Mn.Provider,{value:this.props.routeContext},g.createElement(rw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function c4(e){let{routeContext:t,match:r,children:a}=e,s=g.useContext(Rh);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),g.createElement(Mn.Provider,{value:t},a)}function u4(e,t,r,a){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),a===void 0&&(a=null),e==null){var o;if(!r)return null;if(r.errors)e=r.matches;else if((o=a)!=null&&o.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let l=e,i=(s=r)==null?void 0:s.errors;if(i!=null){let u=l.findIndex(m=>m.route.id&&(i==null?void 0:i[m.route.id])!==void 0);u>=0||Ct(!1),l=l.slice(0,Math.min(l.length,u+1))}let c=!1,d=-1;if(r&&a&&a.v7_partialHydration)for(let u=0;u<l.length;u++){let m=l[u];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=u),m.route.id){let{loaderData:f,errors:x}=r,b=m.route.loader&&f[m.route.id]===void 0&&(!x||x[m.route.id]===void 0);if(m.route.lazy||b){c=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}return l.reduceRight((u,m,f)=>{let x,b=!1,y=null,v=null;r&&(x=i&&m.route.id?i[m.route.id]:void 0,y=m.route.errorElement||l4,c&&(d<0&&f===0?(g4("route-fallback"),b=!0,v=null):d===f&&(b=!0,v=m.route.hydrateFallbackElement||null)));let p=t.concat(l.slice(0,f+1)),h=()=>{let E;return x?E=y:b?E=v:m.route.Component?E=g.createElement(m.route.Component,null):m.route.element?E=m.route.element:E=u,g.createElement(c4,{match:m,routeContext:{outlet:u,matches:p,isDataRoute:r!=null},children:E})};return r&&(m.route.ErrorBoundary||m.route.errorElement||f===0)?g.createElement(i4,{location:r.location,revalidation:r.revalidation,component:y,error:x,children:h(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):h()},null)}var sw=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(sw||{}),ow=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ow||{});function d4(e){let t=g.useContext(Rh);return t||Ct(!1),t}function m4(e){let t=g.useContext(Zk);return t||Ct(!1),t}function f4(e){let t=g.useContext(Mn);return t||Ct(!1),t}function lw(e){let t=f4(),r=t.matches[t.matches.length-1];return r.route.id||Ct(!1),r.route.id}function p4(){var e;let t=g.useContext(rw),r=m4(),a=lw();return t!==void 0?t:(e=r.errors)==null?void 0:e[a]}function h4(){let{router:e}=d4(sw.UseNavigateStable),t=lw(ow.UseNavigateStable),r=g.useRef(!1);return nw(()=>{r.current=!0}),g.useCallback(function(s,o){o===void 0&&(o={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Ul({fromRouteId:t},o)))},[e,t])}const wv={};function g4(e,t,r){wv[e]||(wv[e]=!0)}function v4(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function iw(e){let{to:t,replace:r,state:a,relative:s}=e;Eo()||Ct(!1);let{future:o,static:l}=g.useContext(Ba),{matches:i}=g.useContext(Mn),{pathname:c}=xo(),d=qr(),u=Oh(t,_h(i,o.v7_relativeSplatPath),c,s==="path"),m=JSON.stringify(u);return g.useEffect(()=>d(JSON.parse(m),{replace:r,state:a,relative:s}),[d,m,s,r,a]),null}function Ph(e){return n4(e.context)}function fe(e){Ct(!1)}function y4(e){let{basename:t="/",children:r=null,location:a,navigationType:s=ya.Pop,navigator:o,static:l=!1,future:i}=e;Eo()&&Ct(!1);let c=t.replace(/^\/*/,"/"),d=g.useMemo(()=>({basename:c,navigator:o,static:l,future:Ul({v7_relativeSplatPath:!1},i)}),[c,i,o,l]);typeof a=="string"&&(a=yo(a));let{pathname:u="/",search:m="",hash:f="",state:x=null,key:b="default"}=a,y=g.useMemo(()=>{let v=Th(u,c);return v==null?null:{location:{pathname:v,search:m,hash:f,state:x,key:b},navigationType:s}},[c,u,m,f,x,b,s]);return y==null?null:g.createElement(Ba.Provider,{value:d},g.createElement(ed.Provider,{children:r,value:y}))}function E4(e){let{children:t,location:r}=e;return a4(Gf(t),r)}new Promise(()=>{});function Gf(e,t){t===void 0&&(t=[]);let r=[];return g.Children.forEach(e,(a,s)=>{if(!g.isValidElement(a))return;let o=[...t,s];if(a.type===g.Fragment){r.push.apply(r,Gf(a.props.children,o));return}a.type!==fe&&Ct(!1),!a.props.index||!a.props.children||Ct(!1);let l={id:a.props.id||o.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(l.children=Gf(a.props.children,o)),r.push(l)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Kf(){return Kf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Kf.apply(this,arguments)}function x4(e,t){if(e==null)return{};var r={},a=Object.keys(e),s,o;for(o=0;o<a.length;o++)s=a[o],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function b4(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function w4(e,t){return e.button===0&&(!t||t==="_self")&&!b4(e)}const N4=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],S4="6";try{window.__reactRouterVersion=S4}catch{}const C4="startTransition",Nv=wS[C4];function k4(e){let{basename:t,children:r,future:a,window:s}=e,o=g.useRef();o.current==null&&(o.current=Dk({window:s,v5Compat:!0}));let l=o.current,[i,c]=g.useState({action:l.action,location:l.location}),{v7_startTransition:d}=a||{},u=g.useCallback(m=>{d&&Nv?Nv(()=>c(m)):c(m)},[c,d]);return g.useLayoutEffect(()=>l.listen(u),[l,u]),g.useEffect(()=>v4(a),[a]),g.createElement(y4,{basename:t,children:r,location:i.location,navigationType:i.action,navigator:l,future:a})}const D4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",A4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ne=g.forwardRef(function(t,r){let{onClick:a,relative:s,reloadDocument:o,replace:l,state:i,target:c,to:d,preventScrollReset:u,viewTransition:m}=t,f=x4(t,N4),{basename:x}=g.useContext(Ba),b,y=!1;if(typeof d=="string"&&A4.test(d)&&(b=d,D4))try{let E=new URL(window.location.href),w=d.startsWith("//")?new URL(E.protocol+d):new URL(d),N=Th(w.pathname,x);w.origin===E.origin&&N!=null?d=N+w.search+w.hash:y=!0}catch{}let v=e4(d,{relative:s}),p=T4(d,{replace:l,state:i,target:c,preventScrollReset:u,relative:s,viewTransition:m});function h(E){a&&a(E),E.defaultPrevented||p(E)}return g.createElement("a",Kf({},f,{href:b||v,onClick:y||o?a:h,ref:r,target:c}))});var Sv;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Sv||(Sv={}));var Cv;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Cv||(Cv={}));function T4(e,t){let{target:r,replace:a,state:s,preventScrollReset:o,relative:l,viewTransition:i}=t===void 0?{}:t,c=qr(),d=xo(),u=aw(e,{relative:l});return g.useCallback(m=>{if(w4(m,r)){m.preventDefault();let f=a!==void 0?a:pu(d)===pu(u);c(e,{replace:f,state:s,preventScrollReset:o,relative:l,viewTransition:i})}},[d,c,u,a,s,r,e,o,l,i])}function cw(e,t){return function(){return e.apply(t,arguments)}}const{toString:_4}=Object.prototype,{getPrototypeOf:Lh}=Object,{iterator:td,toStringTag:uw}=Symbol,rd=(e=>t=>{const r=_4.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),pn=e=>(e=e.toLowerCase(),t=>rd(t)===e),nd=e=>t=>typeof t===e,{isArray:bo}=Array,Vl=nd("undefined");function O4(e){return e!==null&&!Vl(e)&&e.constructor!==null&&!Vl(e.constructor)&&dr(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const dw=pn("ArrayBuffer");function R4(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&dw(e.buffer),t}const M4=nd("string"),dr=nd("function"),mw=nd("number"),ad=e=>e!==null&&typeof e=="object",P4=e=>e===!0||e===!1,kc=e=>{if(rd(e)!=="object")return!1;const t=Lh(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(uw in e)&&!(td in e)},L4=pn("Date"),I4=pn("File"),$4=pn("Blob"),F4=pn("FileList"),j4=e=>ad(e)&&dr(e.pipe),B4=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||dr(e.append)&&((t=rd(e))==="formdata"||t==="object"&&dr(e.toString)&&e.toString()==="[object FormData]"))},z4=pn("URLSearchParams"),[U4,V4,W4,H4]=["ReadableStream","Request","Response","Headers"].map(pn),Y4=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function hi(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let a,s;if(typeof e!="object"&&(e=[e]),bo(e))for(a=0,s=e.length;a<s;a++)t.call(null,e[a],a,e);else{const o=r?Object.getOwnPropertyNames(e):Object.keys(e),l=o.length;let i;for(a=0;a<l;a++)i=o[a],t.call(null,e[i],i,e)}}function fw(e,t){t=t.toLowerCase();const r=Object.keys(e);let a=r.length,s;for(;a-- >0;)if(s=r[a],t===s.toLowerCase())return s;return null}const ts=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,pw=e=>!Vl(e)&&e!==ts;function Xf(){const{caseless:e}=pw(this)&&this||{},t={},r=(a,s)=>{const o=e&&fw(t,s)||s;kc(t[o])&&kc(a)?t[o]=Xf(t[o],a):kc(a)?t[o]=Xf({},a):bo(a)?t[o]=a.slice():t[o]=a};for(let a=0,s=arguments.length;a<s;a++)arguments[a]&&hi(arguments[a],r);return t}const q4=(e,t,r,{allOwnKeys:a}={})=>(hi(t,(s,o)=>{r&&dr(s)?e[o]=cw(s,r):e[o]=s},{allOwnKeys:a}),e),G4=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),K4=(e,t,r,a)=>{e.prototype=Object.create(t.prototype,a),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},X4=(e,t,r,a)=>{let s,o,l;const i={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),o=s.length;o-- >0;)l=s[o],(!a||a(l,e,t))&&!i[l]&&(t[l]=e[l],i[l]=!0);e=r!==!1&&Lh(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},Q4=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const a=e.indexOf(t,r);return a!==-1&&a===r},J4=e=>{if(!e)return null;if(bo(e))return e;let t=e.length;if(!mw(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},Z4=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Lh(Uint8Array)),eD=(e,t)=>{const a=(e&&e[td]).call(e);let s;for(;(s=a.next())&&!s.done;){const o=s.value;t.call(e,o[0],o[1])}},tD=(e,t)=>{let r;const a=[];for(;(r=e.exec(t))!==null;)a.push(r);return a},rD=pn("HTMLFormElement"),nD=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,a,s){return a.toUpperCase()+s}),kv=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),aD=pn("RegExp"),hw=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),a={};hi(r,(s,o)=>{let l;(l=t(s,o,e))!==!1&&(a[o]=l||s)}),Object.defineProperties(e,a)},sD=e=>{hw(e,(t,r)=>{if(dr(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const a=e[r];if(dr(a)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},oD=(e,t)=>{const r={},a=s=>{s.forEach(o=>{r[o]=!0})};return bo(e)?a(e):a(String(e).split(t)),r},lD=()=>{},iD=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function cD(e){return!!(e&&dr(e.append)&&e[uw]==="FormData"&&e[td])}const uD=e=>{const t=new Array(10),r=(a,s)=>{if(ad(a)){if(t.indexOf(a)>=0)return;if(!("toJSON"in a)){t[s]=a;const o=bo(a)?[]:{};return hi(a,(l,i)=>{const c=r(l,s+1);!Vl(c)&&(o[i]=c)}),t[s]=void 0,o}}return a};return r(e,0)},dD=pn("AsyncFunction"),mD=e=>e&&(ad(e)||dr(e))&&dr(e.then)&&dr(e.catch),gw=((e,t)=>e?setImmediate:t?((r,a)=>(ts.addEventListener("message",({source:s,data:o})=>{s===ts&&o===r&&a.length&&a.shift()()},!1),s=>{a.push(s),ts.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",dr(ts.postMessage)),fD=typeof queueMicrotask<"u"?queueMicrotask.bind(ts):typeof process<"u"&&process.nextTick||gw,pD=e=>e!=null&&dr(e[td]),q={isArray:bo,isArrayBuffer:dw,isBuffer:O4,isFormData:B4,isArrayBufferView:R4,isString:M4,isNumber:mw,isBoolean:P4,isObject:ad,isPlainObject:kc,isReadableStream:U4,isRequest:V4,isResponse:W4,isHeaders:H4,isUndefined:Vl,isDate:L4,isFile:I4,isBlob:$4,isRegExp:aD,isFunction:dr,isStream:j4,isURLSearchParams:z4,isTypedArray:Z4,isFileList:F4,forEach:hi,merge:Xf,extend:q4,trim:Y4,stripBOM:G4,inherits:K4,toFlatObject:X4,kindOf:rd,kindOfTest:pn,endsWith:Q4,toArray:J4,forEachEntry:eD,matchAll:tD,isHTMLForm:rD,hasOwnProperty:kv,hasOwnProp:kv,reduceDescriptors:hw,freezeMethods:sD,toObjectSet:oD,toCamelCase:nD,noop:lD,toFiniteNumber:iD,findKey:fw,global:ts,isContextDefined:pw,isSpecCompliantForm:cD,toJSONObject:uD,isAsyncFn:dD,isThenable:mD,setImmediate:gw,asap:fD,isIterable:pD};function Se(e,t,r,a,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),a&&(this.request=a),s&&(this.response=s,this.status=s.status?s.status:null)}q.inherits(Se,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:q.toJSONObject(this.config),code:this.code,status:this.status}}});const vw=Se.prototype,yw={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{yw[e]={value:e}});Object.defineProperties(Se,yw);Object.defineProperty(vw,"isAxiosError",{value:!0});Se.from=(e,t,r,a,s,o)=>{const l=Object.create(vw);return q.toFlatObject(e,l,function(c){return c!==Error.prototype},i=>i!=="isAxiosError"),Se.call(l,e.message,t,r,a,s),l.cause=e,l.name=e.name,o&&Object.assign(l,o),l};const hD=null;function Qf(e){return q.isPlainObject(e)||q.isArray(e)}function Ew(e){return q.endsWith(e,"[]")?e.slice(0,-2):e}function Dv(e,t,r){return e?e.concat(t).map(function(s,o){return s=Ew(s),!r&&o?"["+s+"]":s}).join(r?".":""):t}function gD(e){return q.isArray(e)&&!e.some(Qf)}const vD=q.toFlatObject(q,{},null,function(t){return/^is[A-Z]/.test(t)});function sd(e,t,r){if(!q.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=q.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,v){return!q.isUndefined(v[y])});const a=r.metaTokens,s=r.visitor||u,o=r.dots,l=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&q.isSpecCompliantForm(t);if(!q.isFunction(s))throw new TypeError("visitor must be a function");function d(b){if(b===null)return"";if(q.isDate(b))return b.toISOString();if(q.isBoolean(b))return b.toString();if(!c&&q.isBlob(b))throw new Se("Blob is not supported. Use a Buffer instead.");return q.isArrayBuffer(b)||q.isTypedArray(b)?c&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function u(b,y,v){let p=b;if(b&&!v&&typeof b=="object"){if(q.endsWith(y,"{}"))y=a?y:y.slice(0,-2),b=JSON.stringify(b);else if(q.isArray(b)&&gD(b)||(q.isFileList(b)||q.endsWith(y,"[]"))&&(p=q.toArray(b)))return y=Ew(y),p.forEach(function(E,w){!(q.isUndefined(E)||E===null)&&t.append(l===!0?Dv([y],w,o):l===null?y:y+"[]",d(E))}),!1}return Qf(b)?!0:(t.append(Dv(v,y,o),d(b)),!1)}const m=[],f=Object.assign(vD,{defaultVisitor:u,convertValue:d,isVisitable:Qf});function x(b,y){if(!q.isUndefined(b)){if(m.indexOf(b)!==-1)throw Error("Circular reference detected in "+y.join("."));m.push(b),q.forEach(b,function(p,h){(!(q.isUndefined(p)||p===null)&&s.call(t,p,q.isString(h)?h.trim():h,y,f))===!0&&x(p,y?y.concat(h):[h])}),m.pop()}}if(!q.isObject(e))throw new TypeError("data must be an object");return x(e),t}function Av(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(a){return t[a]})}function Ih(e,t){this._pairs=[],e&&sd(e,this,t)}const xw=Ih.prototype;xw.append=function(t,r){this._pairs.push([t,r])};xw.toString=function(t){const r=t?function(a){return t.call(this,a,Av)}:Av;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};function yD(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function bw(e,t,r){if(!t)return e;const a=r&&r.encode||yD;q.isFunction(r)&&(r={serialize:r});const s=r&&r.serialize;let o;if(s?o=s(t,r):o=q.isURLSearchParams(t)?t.toString():new Ih(t,r).toString(a),o){const l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class Tv{constructor(){this.handlers=[]}use(t,r,a){return this.handlers.push({fulfilled:t,rejected:r,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){q.forEach(this.handlers,function(a){a!==null&&t(a)})}}const ww={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ED=typeof URLSearchParams<"u"?URLSearchParams:Ih,xD=typeof FormData<"u"?FormData:null,bD=typeof Blob<"u"?Blob:null,wD={isBrowser:!0,classes:{URLSearchParams:ED,FormData:xD,Blob:bD},protocols:["http","https","file","blob","url","data"]},$h=typeof window<"u"&&typeof document<"u",Jf=typeof navigator=="object"&&navigator||void 0,ND=$h&&(!Jf||["ReactNative","NativeScript","NS"].indexOf(Jf.product)<0),SD=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",CD=$h&&window.location.href||"http://localhost",kD=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:$h,hasStandardBrowserEnv:ND,hasStandardBrowserWebWorkerEnv:SD,navigator:Jf,origin:CD},Symbol.toStringTag,{value:"Module"})),qt={...kD,...wD};function DD(e,t){return sd(e,new qt.classes.URLSearchParams,Object.assign({visitor:function(r,a,s,o){return qt.isNode&&q.isBuffer(r)?(this.append(a,r.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function AD(e){return q.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function TD(e){const t={},r=Object.keys(e);let a;const s=r.length;let o;for(a=0;a<s;a++)o=r[a],t[o]=e[o];return t}function Nw(e){function t(r,a,s,o){let l=r[o++];if(l==="__proto__")return!0;const i=Number.isFinite(+l),c=o>=r.length;return l=!l&&q.isArray(s)?s.length:l,c?(q.hasOwnProp(s,l)?s[l]=[s[l],a]:s[l]=a,!i):((!s[l]||!q.isObject(s[l]))&&(s[l]=[]),t(r,a,s[l],o)&&q.isArray(s[l])&&(s[l]=TD(s[l])),!i)}if(q.isFormData(e)&&q.isFunction(e.entries)){const r={};return q.forEachEntry(e,(a,s)=>{t(AD(a),s,r,0)}),r}return null}function _D(e,t,r){if(q.isString(e))try{return(t||JSON.parse)(e),q.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(r||JSON.stringify)(e)}const gi={transitional:ww,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const a=r.getContentType()||"",s=a.indexOf("application/json")>-1,o=q.isObject(t);if(o&&q.isHTMLForm(t)&&(t=new FormData(t)),q.isFormData(t))return s?JSON.stringify(Nw(t)):t;if(q.isArrayBuffer(t)||q.isBuffer(t)||q.isStream(t)||q.isFile(t)||q.isBlob(t)||q.isReadableStream(t))return t;if(q.isArrayBufferView(t))return t.buffer;if(q.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let i;if(o){if(a.indexOf("application/x-www-form-urlencoded")>-1)return DD(t,this.formSerializer).toString();if((i=q.isFileList(t))||a.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return sd(i?{"files[]":t}:t,c&&new c,this.formSerializer)}}return o||s?(r.setContentType("application/json",!1),_D(t)):t}],transformResponse:[function(t){const r=this.transitional||gi.transitional,a=r&&r.forcedJSONParsing,s=this.responseType==="json";if(q.isResponse(t)||q.isReadableStream(t))return t;if(t&&q.isString(t)&&(a&&!this.responseType||s)){const l=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(i){if(l)throw i.name==="SyntaxError"?Se.from(i,Se.ERR_BAD_RESPONSE,this,null,this.response):i}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:qt.classes.FormData,Blob:qt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};q.forEach(["delete","get","head","post","put","patch"],e=>{gi.headers[e]={}});const OD=q.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),RD=e=>{const t={};let r,a,s;return e&&e.split(`
`).forEach(function(l){s=l.indexOf(":"),r=l.substring(0,s).trim().toLowerCase(),a=l.substring(s+1).trim(),!(!r||t[r]&&OD[r])&&(r==="set-cookie"?t[r]?t[r].push(a):t[r]=[a]:t[r]=t[r]?t[r]+", "+a:a)}),t},_v=Symbol("internals");function Ko(e){return e&&String(e).trim().toLowerCase()}function Dc(e){return e===!1||e==null?e:q.isArray(e)?e.map(Dc):String(e)}function MD(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=r.exec(e);)t[a[1]]=a[2];return t}const PD=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Sm(e,t,r,a,s){if(q.isFunction(a))return a.call(this,t,r);if(s&&(t=r),!!q.isString(t)){if(q.isString(a))return t.indexOf(a)!==-1;if(q.isRegExp(a))return a.test(t)}}function LD(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,a)=>r.toUpperCase()+a)}function ID(e,t){const r=q.toCamelCase(" "+t);["get","set","has"].forEach(a=>{Object.defineProperty(e,a+r,{value:function(s,o,l){return this[a].call(this,t,s,o,l)},configurable:!0})})}let mr=class{constructor(t){t&&this.set(t)}set(t,r,a){const s=this;function o(i,c,d){const u=Ko(c);if(!u)throw new Error("header name must be a non-empty string");const m=q.findKey(s,u);(!m||s[m]===void 0||d===!0||d===void 0&&s[m]!==!1)&&(s[m||c]=Dc(i))}const l=(i,c)=>q.forEach(i,(d,u)=>o(d,u,c));if(q.isPlainObject(t)||t instanceof this.constructor)l(t,r);else if(q.isString(t)&&(t=t.trim())&&!PD(t))l(RD(t),r);else if(q.isObject(t)&&q.isIterable(t)){let i={},c,d;for(const u of t){if(!q.isArray(u))throw TypeError("Object iterator must return a key-value pair");i[d=u[0]]=(c=i[d])?q.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}l(i,r)}else t!=null&&o(r,t,a);return this}get(t,r){if(t=Ko(t),t){const a=q.findKey(this,t);if(a){const s=this[a];if(!r)return s;if(r===!0)return MD(s);if(q.isFunction(r))return r.call(this,s,a);if(q.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=Ko(t),t){const a=q.findKey(this,t);return!!(a&&this[a]!==void 0&&(!r||Sm(this,this[a],a,r)))}return!1}delete(t,r){const a=this;let s=!1;function o(l){if(l=Ko(l),l){const i=q.findKey(a,l);i&&(!r||Sm(a,a[i],i,r))&&(delete a[i],s=!0)}}return q.isArray(t)?t.forEach(o):o(t),s}clear(t){const r=Object.keys(this);let a=r.length,s=!1;for(;a--;){const o=r[a];(!t||Sm(this,this[o],o,t,!0))&&(delete this[o],s=!0)}return s}normalize(t){const r=this,a={};return q.forEach(this,(s,o)=>{const l=q.findKey(a,o);if(l){r[l]=Dc(s),delete r[o];return}const i=t?LD(o):String(o).trim();i!==o&&delete r[o],r[i]=Dc(s),a[i]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return q.forEach(this,(a,s)=>{a!=null&&a!==!1&&(r[s]=t&&q.isArray(a)?a.join(", "):a)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const a=new this(t);return r.forEach(s=>a.set(s)),a}static accessor(t){const a=(this[_v]=this[_v]={accessors:{}}).accessors,s=this.prototype;function o(l){const i=Ko(l);a[i]||(ID(s,l),a[i]=!0)}return q.isArray(t)?t.forEach(o):o(t),this}};mr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);q.reduceDescriptors(mr.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(a){this[r]=a}}});q.freezeMethods(mr);function Cm(e,t){const r=this||gi,a=t||r,s=mr.from(a.headers);let o=a.data;return q.forEach(e,function(i){o=i.call(r,o,s.normalize(),t?t.status:void 0)}),s.normalize(),o}function Sw(e){return!!(e&&e.__CANCEL__)}function wo(e,t,r){Se.call(this,e??"canceled",Se.ERR_CANCELED,t,r),this.name="CanceledError"}q.inherits(wo,Se,{__CANCEL__:!0});function Cw(e,t,r){const a=r.config.validateStatus;!r.status||!a||a(r.status)?e(r):t(new Se("Request failed with status code "+r.status,[Se.ERR_BAD_REQUEST,Se.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function $D(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function FD(e,t){e=e||10;const r=new Array(e),a=new Array(e);let s=0,o=0,l;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),u=a[o];l||(l=d),r[s]=c,a[s]=d;let m=o,f=0;for(;m!==s;)f+=r[m++],m=m%e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),d-l<t)return;const x=u&&d-u;return x?Math.round(f*1e3/x):void 0}}function jD(e,t){let r=0,a=1e3/t,s,o;const l=(d,u=Date.now())=>{r=u,s=null,o&&(clearTimeout(o),o=null),e.apply(null,d)};return[(...d)=>{const u=Date.now(),m=u-r;m>=a?l(d,u):(s=d,o||(o=setTimeout(()=>{o=null,l(s)},a-m)))},()=>s&&l(s)]}const hu=(e,t,r=3)=>{let a=0;const s=FD(50,250);return jD(o=>{const l=o.loaded,i=o.lengthComputable?o.total:void 0,c=l-a,d=s(c),u=l<=i;a=l;const m={loaded:l,total:i,progress:i?l/i:void 0,bytes:c,rate:d||void 0,estimated:d&&i&&u?(i-l)/d:void 0,event:o,lengthComputable:i!=null,[t?"download":"upload"]:!0};e(m)},r)},Ov=(e,t)=>{const r=e!=null;return[a=>t[0]({lengthComputable:r,total:e,loaded:a}),t[1]]},Rv=e=>(...t)=>q.asap(()=>e(...t)),BD=qt.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,qt.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(qt.origin),qt.navigator&&/(msie|trident)/i.test(qt.navigator.userAgent)):()=>!0,zD=qt.hasStandardBrowserEnv?{write(e,t,r,a,s,o){const l=[e+"="+encodeURIComponent(t)];q.isNumber(r)&&l.push("expires="+new Date(r).toGMTString()),q.isString(a)&&l.push("path="+a),q.isString(s)&&l.push("domain="+s),o===!0&&l.push("secure"),document.cookie=l.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function UD(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function VD(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function kw(e,t,r){let a=!UD(t);return e&&(a||r==!1)?VD(e,t):t}const Mv=e=>e instanceof mr?{...e}:e;function ps(e,t){t=t||{};const r={};function a(d,u,m,f){return q.isPlainObject(d)&&q.isPlainObject(u)?q.merge.call({caseless:f},d,u):q.isPlainObject(u)?q.merge({},u):q.isArray(u)?u.slice():u}function s(d,u,m,f){if(q.isUndefined(u)){if(!q.isUndefined(d))return a(void 0,d,m,f)}else return a(d,u,m,f)}function o(d,u){if(!q.isUndefined(u))return a(void 0,u)}function l(d,u){if(q.isUndefined(u)){if(!q.isUndefined(d))return a(void 0,d)}else return a(void 0,u)}function i(d,u,m){if(m in t)return a(d,u);if(m in e)return a(void 0,d)}const c={url:o,method:o,data:o,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:i,headers:(d,u,m)=>s(Mv(d),Mv(u),m,!0)};return q.forEach(Object.keys(Object.assign({},e,t)),function(u){const m=c[u]||s,f=m(e[u],t[u],u);q.isUndefined(f)&&m!==i||(r[u]=f)}),r}const Dw=e=>{const t=ps({},e);let{data:r,withXSRFToken:a,xsrfHeaderName:s,xsrfCookieName:o,headers:l,auth:i}=t;t.headers=l=mr.from(l),t.url=bw(kw(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),i&&l.set("Authorization","Basic "+btoa((i.username||"")+":"+(i.password?unescape(encodeURIComponent(i.password)):"")));let c;if(q.isFormData(r)){if(qt.hasStandardBrowserEnv||qt.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if((c=l.getContentType())!==!1){const[d,...u]=c?c.split(";").map(m=>m.trim()).filter(Boolean):[];l.setContentType([d||"multipart/form-data",...u].join("; "))}}if(qt.hasStandardBrowserEnv&&(a&&q.isFunction(a)&&(a=a(t)),a||a!==!1&&BD(t.url))){const d=s&&o&&zD.read(o);d&&l.set(s,d)}return t},WD=typeof XMLHttpRequest<"u",HD=WD&&function(e){return new Promise(function(r,a){const s=Dw(e);let o=s.data;const l=mr.from(s.headers).normalize();let{responseType:i,onUploadProgress:c,onDownloadProgress:d}=s,u,m,f,x,b;function y(){x&&x(),b&&b(),s.cancelToken&&s.cancelToken.unsubscribe(u),s.signal&&s.signal.removeEventListener("abort",u)}let v=new XMLHttpRequest;v.open(s.method.toUpperCase(),s.url,!0),v.timeout=s.timeout;function p(){if(!v)return;const E=mr.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),N={data:!i||i==="text"||i==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:E,config:e,request:v};Cw(function(C){r(C),y()},function(C){a(C),y()},N),v=null}"onloadend"in v?v.onloadend=p:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(p)},v.onabort=function(){v&&(a(new Se("Request aborted",Se.ECONNABORTED,e,v)),v=null)},v.onerror=function(){a(new Se("Network Error",Se.ERR_NETWORK,e,v)),v=null},v.ontimeout=function(){let w=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const N=s.transitional||ww;s.timeoutErrorMessage&&(w=s.timeoutErrorMessage),a(new Se(w,N.clarifyTimeoutError?Se.ETIMEDOUT:Se.ECONNABORTED,e,v)),v=null},o===void 0&&l.setContentType(null),"setRequestHeader"in v&&q.forEach(l.toJSON(),function(w,N){v.setRequestHeader(N,w)}),q.isUndefined(s.withCredentials)||(v.withCredentials=!!s.withCredentials),i&&i!=="json"&&(v.responseType=s.responseType),d&&([f,b]=hu(d,!0),v.addEventListener("progress",f)),c&&v.upload&&([m,x]=hu(c),v.upload.addEventListener("progress",m),v.upload.addEventListener("loadend",x)),(s.cancelToken||s.signal)&&(u=E=>{v&&(a(!E||E.type?new wo(null,e,v):E),v.abort(),v=null)},s.cancelToken&&s.cancelToken.subscribe(u),s.signal&&(s.signal.aborted?u():s.signal.addEventListener("abort",u)));const h=$D(s.url);if(h&&qt.protocols.indexOf(h)===-1){a(new Se("Unsupported protocol "+h+":",Se.ERR_BAD_REQUEST,e));return}v.send(o||null)})},YD=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let a=new AbortController,s;const o=function(d){if(!s){s=!0,i();const u=d instanceof Error?d:this.reason;a.abort(u instanceof Se?u:new wo(u instanceof Error?u.message:u))}};let l=t&&setTimeout(()=>{l=null,o(new Se(`timeout ${t} of ms exceeded`,Se.ETIMEDOUT))},t);const i=()=>{e&&(l&&clearTimeout(l),l=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(o):d.removeEventListener("abort",o)}),e=null)};e.forEach(d=>d.addEventListener("abort",o));const{signal:c}=a;return c.unsubscribe=()=>q.asap(i),c}},qD=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let a=0,s;for(;a<r;)s=a+t,yield e.slice(a,s),a=s},GD=async function*(e,t){for await(const r of KD(e))yield*qD(r,t)},KD=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:a}=await t.read();if(r)break;yield a}}finally{await t.cancel()}},Pv=(e,t,r,a)=>{const s=GD(e,t);let o=0,l,i=c=>{l||(l=!0,a&&a(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await s.next();if(d){i(),c.close();return}let m=u.byteLength;if(r){let f=o+=m;r(f)}c.enqueue(new Uint8Array(u))}catch(d){throw i(d),d}},cancel(c){return i(c),s.return()}},{highWaterMark:2})},od=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Aw=od&&typeof ReadableStream=="function",XD=od&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Tw=(e,...t)=>{try{return!!e(...t)}catch{return!1}},QD=Aw&&Tw(()=>{let e=!1;const t=new Request(qt.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),Lv=64*1024,Zf=Aw&&Tw(()=>q.isReadableStream(new Response("").body)),gu={stream:Zf&&(e=>e.body)};od&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!gu[t]&&(gu[t]=q.isFunction(e[t])?r=>r[t]():(r,a)=>{throw new Se(`Response type '${t}' is not supported`,Se.ERR_NOT_SUPPORT,a)})})})(new Response);const JD=async e=>{if(e==null)return 0;if(q.isBlob(e))return e.size;if(q.isSpecCompliantForm(e))return(await new Request(qt.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(q.isArrayBufferView(e)||q.isArrayBuffer(e))return e.byteLength;if(q.isURLSearchParams(e)&&(e=e+""),q.isString(e))return(await XD(e)).byteLength},ZD=async(e,t)=>{const r=q.toFiniteNumber(e.getContentLength());return r??JD(t)},eA=od&&(async e=>{let{url:t,method:r,data:a,signal:s,cancelToken:o,timeout:l,onDownloadProgress:i,onUploadProgress:c,responseType:d,headers:u,withCredentials:m="same-origin",fetchOptions:f}=Dw(e);d=d?(d+"").toLowerCase():"text";let x=YD([s,o&&o.toAbortSignal()],l),b;const y=x&&x.unsubscribe&&(()=>{x.unsubscribe()});let v;try{if(c&&QD&&r!=="get"&&r!=="head"&&(v=await ZD(u,a))!==0){let N=new Request(t,{method:"POST",body:a,duplex:"half"}),S;if(q.isFormData(a)&&(S=N.headers.get("content-type"))&&u.setContentType(S),N.body){const[C,k]=Ov(v,hu(Rv(c)));a=Pv(N.body,Lv,C,k)}}q.isString(m)||(m=m?"include":"omit");const p="credentials"in Request.prototype;b=new Request(t,{...f,signal:x,method:r.toUpperCase(),headers:u.normalize().toJSON(),body:a,duplex:"half",credentials:p?m:void 0});let h=await fetch(b,f);const E=Zf&&(d==="stream"||d==="response");if(Zf&&(i||E&&y)){const N={};["status","statusText","headers"].forEach(D=>{N[D]=h[D]});const S=q.toFiniteNumber(h.headers.get("content-length")),[C,k]=i&&Ov(S,hu(Rv(i),!0))||[];h=new Response(Pv(h.body,Lv,C,()=>{k&&k(),y&&y()}),N)}d=d||"text";let w=await gu[q.findKey(gu,d)||"text"](h,e);return!E&&y&&y(),await new Promise((N,S)=>{Cw(N,S,{data:w,headers:mr.from(h.headers),status:h.status,statusText:h.statusText,config:e,request:b})})}catch(p){throw y&&y(),p&&p.name==="TypeError"&&/Load failed|fetch/i.test(p.message)?Object.assign(new Se("Network Error",Se.ERR_NETWORK,e,b),{cause:p.cause||p}):Se.from(p,p&&p.code,e,b)}}),ep={http:hD,xhr:HD,fetch:eA};q.forEach(ep,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Iv=e=>`- ${e}`,tA=e=>q.isFunction(e)||e===null||e===!1,_w={getAdapter:e=>{e=q.isArray(e)?e:[e];const{length:t}=e;let r,a;const s={};for(let o=0;o<t;o++){r=e[o];let l;if(a=r,!tA(r)&&(a=ep[(l=String(r)).toLowerCase()],a===void 0))throw new Se(`Unknown adapter '${l}'`);if(a)break;s[l||"#"+o]=a}if(!a){const o=Object.entries(s).map(([i,c])=>`adapter ${i} `+(c===!1?"is not supported by the environment":"is not available in the build"));let l=t?o.length>1?`since :
`+o.map(Iv).join(`
`):" "+Iv(o[0]):"as no adapter specified";throw new Se("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return a},adapters:ep};function km(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new wo(null,e)}function $v(e){return km(e),e.headers=mr.from(e.headers),e.data=Cm.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),_w.getAdapter(e.adapter||gi.adapter)(e).then(function(a){return km(e),a.data=Cm.call(e,e.transformResponse,a),a.headers=mr.from(a.headers),a},function(a){return Sw(a)||(km(e),a&&a.response&&(a.response.data=Cm.call(e,e.transformResponse,a.response),a.response.headers=mr.from(a.response.headers))),Promise.reject(a)})}const Ow="1.10.0",ld={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{ld[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});const Fv={};ld.transitional=function(t,r,a){function s(o,l){return"[Axios v"+Ow+"] Transitional option '"+o+"'"+l+(a?". "+a:"")}return(o,l,i)=>{if(t===!1)throw new Se(s(l," has been removed"+(r?" in "+r:"")),Se.ERR_DEPRECATED);return r&&!Fv[l]&&(Fv[l]=!0,console.warn(s(l," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(o,l,i):!0}};ld.spelling=function(t){return(r,a)=>(console.warn(`${a} is likely a misspelling of ${t}`),!0)};function rA(e,t,r){if(typeof e!="object")throw new Se("options must be an object",Se.ERR_BAD_OPTION_VALUE);const a=Object.keys(e);let s=a.length;for(;s-- >0;){const o=a[s],l=t[o];if(l){const i=e[o],c=i===void 0||l(i,o,e);if(c!==!0)throw new Se("option "+o+" must be "+c,Se.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Se("Unknown option "+o,Se.ERR_BAD_OPTION)}}const Ac={assertOptions:rA,validators:ld},yn=Ac.validators;let ss=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Tv,response:new Tv}}async request(t,r){try{return await this._request(t,r)}catch(a){if(a instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const o=s.stack?s.stack.replace(/^.+\n/,""):"";try{a.stack?o&&!String(a.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+o):a.stack=o}catch{}}throw a}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=ps(this.defaults,r);const{transitional:a,paramsSerializer:s,headers:o}=r;a!==void 0&&Ac.assertOptions(a,{silentJSONParsing:yn.transitional(yn.boolean),forcedJSONParsing:yn.transitional(yn.boolean),clarifyTimeoutError:yn.transitional(yn.boolean)},!1),s!=null&&(q.isFunction(s)?r.paramsSerializer={serialize:s}:Ac.assertOptions(s,{encode:yn.function,serialize:yn.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Ac.assertOptions(r,{baseUrl:yn.spelling("baseURL"),withXsrfToken:yn.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let l=o&&q.merge(o.common,o[r.method]);o&&q.forEach(["delete","get","head","post","put","patch","common"],b=>{delete o[b]}),r.headers=mr.concat(l,o);const i=[];let c=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(r)===!1||(c=c&&y.synchronous,i.unshift(y.fulfilled,y.rejected))});const d=[];this.interceptors.response.forEach(function(y){d.push(y.fulfilled,y.rejected)});let u,m=0,f;if(!c){const b=[$v.bind(this),void 0];for(b.unshift.apply(b,i),b.push.apply(b,d),f=b.length,u=Promise.resolve(r);m<f;)u=u.then(b[m++],b[m++]);return u}f=i.length;let x=r;for(m=0;m<f;){const b=i[m++],y=i[m++];try{x=b(x)}catch(v){y.call(this,v);break}}try{u=$v.call(this,x)}catch(b){return Promise.reject(b)}for(m=0,f=d.length;m<f;)u=u.then(d[m++],d[m++]);return u}getUri(t){t=ps(this.defaults,t);const r=kw(t.baseURL,t.url,t.allowAbsoluteUrls);return bw(r,t.params,t.paramsSerializer)}};q.forEach(["delete","get","head","options"],function(t){ss.prototype[t]=function(r,a){return this.request(ps(a||{},{method:t,url:r,data:(a||{}).data}))}});q.forEach(["post","put","patch"],function(t){function r(a){return function(o,l,i){return this.request(ps(i||{},{method:t,headers:a?{"Content-Type":"multipart/form-data"}:{},url:o,data:l}))}}ss.prototype[t]=r(),ss.prototype[t+"Form"]=r(!0)});let nA=class Rw{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(o){r=o});const a=this;this.promise.then(s=>{if(!a._listeners)return;let o=a._listeners.length;for(;o-- >0;)a._listeners[o](s);a._listeners=null}),this.promise.then=s=>{let o;const l=new Promise(i=>{a.subscribe(i),o=i}).then(s);return l.cancel=function(){a.unsubscribe(o)},l},t(function(o,l,i){a.reason||(a.reason=new wo(o,l,i),r(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=a=>{t.abort(a)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new Rw(function(s){t=s}),cancel:t}}};function aA(e){return function(r){return e.apply(null,r)}}function sA(e){return q.isObject(e)&&e.isAxiosError===!0}const tp={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(tp).forEach(([e,t])=>{tp[t]=e});function Mw(e){const t=new ss(e),r=cw(ss.prototype.request,t);return q.extend(r,ss.prototype,t,{allOwnKeys:!0}),q.extend(r,t,null,{allOwnKeys:!0}),r.create=function(s){return Mw(ps(e,s))},r}const ye=Mw(gi);ye.Axios=ss;ye.CanceledError=wo;ye.CancelToken=nA;ye.isCancel=Sw;ye.VERSION=Ow;ye.toFormData=sd;ye.AxiosError=Se;ye.Cancel=ye.CanceledError;ye.all=function(t){return Promise.all(t)};ye.spread=aA;ye.isAxiosError=sA;ye.mergeConfig=ps;ye.AxiosHeaders=mr;ye.formToJSON=e=>Nw(q.isHTMLForm(e)?new FormData(e):e);ye.getAdapter=_w.getAdapter;ye.HttpStatusCode=tp;ye.default=ye;const{Axios:KK,AxiosError:XK,CanceledError:QK,isCancel:JK,CancelToken:ZK,VERSION:eX,all:tX,Cancel:rX,isAxiosError:nX,spread:aX,toFormData:sX,AxiosHeaders:oX,HttpStatusCode:lX,formToJSON:iX,getAdapter:cX,mergeConfig:uX}=ye,J=ye.create({baseURL:"http://localhost:3000/api"});J.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e});J.interceptors.response.use(e=>e,e=>(e.response&&(e.response.status===401?(localStorage.removeItem("token"),window.location.href="/login",alert("Sesión expirada o no autorizada. Por favor, inicia sesión de nuevo.")):e.response.status===429&&alert("Demasiados intentos de autenticación. Espera unos minutos antes de volver a intentarlo.")),Promise.reject(e)));const Pw=g.createContext(null),Te=()=>{const e=g.useContext(Pw);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},oA=({children:e})=>{const[t,r]=g.useState(null),[a,s]=g.useState(!0);g.useEffect(()=>{o()},[]);const o=async()=>{var u;try{const m=localStorage.getItem("token");if(console.log("checkAuth - Token exists:",!!m),console.log("checkAuth - Token value:",m?m.substring(0,50)+"...":"No token"),m){console.log("checkAuth - Making request to /auth/me");const f=await J.get("/auth/me",{headers:{Authorization:`Bearer ${m}`}});if(console.log("checkAuth - Response data:",f.data),f.data&&f.data.role)r(f.data),console.log("checkAuth - User set:",f.data);else throw console.error("checkAuth - Invalid user data structure:",f.data),new Error("Datos de usuario incompletos")}else console.log("checkAuth - No token found, user remains null")}catch(m){console.error("Error en checkAuth:",m),console.error("Error details:",((u=m.response)==null?void 0:u.data)||m.message),localStorage.removeItem("token")}finally{s(!1)}},d={user:t,loading:a,login:async(u,m)=>{var f,x,b;try{const y=await J.post("/auth/login",{email:u,password:m}),{token:v,user:p}=y.data;localStorage.setItem("token",v),r({id:p.id,email:p.email,name:p.name,role:p.role}),p.role==="ADMIN"?window.location.href="/admin/dashboard":window.location.href="/dashboard"}catch(y){throw console.error("Error completo en login:",((f=y==null?void 0:y.response)==null?void 0:f.data)||(y==null?void 0:y.message)),new Error(((b=(x=y==null?void 0:y.response)==null?void 0:x.data)==null?void 0:b.message)||"Error en el inicio de sesión")}},logout:()=>{localStorage.removeItem("token"),r(null),window.location.href="/login"},register:async u=>{try{const m=await J.post("/auth/register",u),{token:f,user:x}=m.data;localStorage.setItem("token",f),r(x)}catch{throw new Error("Error en el registro")}}};return n.createElement(Pw.Provider,{value:d},e)},Tn=Object.create(null);Tn.open="0";Tn.close="1";Tn.ping="2";Tn.pong="3";Tn.message="4";Tn.upgrade="5";Tn.noop="6";const Tc=Object.create(null);Object.keys(Tn).forEach(e=>{Tc[Tn[e]]=e});const rp={type:"error",data:"parser error"},Lw=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Iw=typeof ArrayBuffer=="function",$w=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Fh=({type:e,data:t},r,a)=>Lw&&t instanceof Blob?r?a(t):jv(t,a):Iw&&(t instanceof ArrayBuffer||$w(t))?r?a(t):jv(new Blob([t]),a):a(Tn[e]+(t||"")),jv=(e,t)=>{const r=new FileReader;return r.onload=function(){const a=r.result.split(",")[1];t("b"+(a||""))},r.readAsDataURL(e)};function Bv(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Dm;function lA(e,t){if(Lw&&e.data instanceof Blob)return e.data.arrayBuffer().then(Bv).then(t);if(Iw&&(e.data instanceof ArrayBuffer||$w(e.data)))return t(Bv(e.data));Fh(e,!1,r=>{Dm||(Dm=new TextEncoder),t(Dm.encode(r))})}const zv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ol=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<zv.length;e++)ol[zv.charCodeAt(e)]=e;const iA=e=>{let t=e.length*.75,r=e.length,a,s=0,o,l,i,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const d=new ArrayBuffer(t),u=new Uint8Array(d);for(a=0;a<r;a+=4)o=ol[e.charCodeAt(a)],l=ol[e.charCodeAt(a+1)],i=ol[e.charCodeAt(a+2)],c=ol[e.charCodeAt(a+3)],u[s++]=o<<2|l>>4,u[s++]=(l&15)<<4|i>>2,u[s++]=(i&3)<<6|c&63;return d},cA=typeof ArrayBuffer=="function",jh=(e,t)=>{if(typeof e!="string")return{type:"message",data:Fw(e,t)};const r=e.charAt(0);return r==="b"?{type:"message",data:uA(e.substring(1),t)}:Tc[r]?e.length>1?{type:Tc[r],data:e.substring(1)}:{type:Tc[r]}:rp},uA=(e,t)=>{if(cA){const r=iA(e);return Fw(r,t)}else return{base64:!0,data:e}},Fw=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},jw="",dA=(e,t)=>{const r=e.length,a=new Array(r);let s=0;e.forEach((o,l)=>{Fh(o,!1,i=>{a[l]=i,++s===r&&t(a.join(jw))})})},mA=(e,t)=>{const r=e.split(jw),a=[];for(let s=0;s<r.length;s++){const o=jh(r[s],t);if(a.push(o),o.type==="error")break}return a};function fA(){return new TransformStream({transform(e,t){lA(e,r=>{const a=r.length;let s;if(a<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,a);else if(a<65536){s=new Uint8Array(3);const o=new DataView(s.buffer);o.setUint8(0,126),o.setUint16(1,a)}else{s=new Uint8Array(9);const o=new DataView(s.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(a))}e.data&&typeof e.data!="string"&&(s[0]|=128),t.enqueue(s),t.enqueue(r)})}})}let Am;function ec(e){return e.reduce((t,r)=>t+r.length,0)}function tc(e,t){if(e[0].length===t)return e.shift();const r=new Uint8Array(t);let a=0;for(let s=0;s<t;s++)r[s]=e[0][a++],a===e[0].length&&(e.shift(),a=0);return e.length&&a<e[0].length&&(e[0]=e[0].slice(a)),r}function pA(e,t){Am||(Am=new TextDecoder);const r=[];let a=0,s=-1,o=!1;return new TransformStream({transform(l,i){for(r.push(l);;){if(a===0){if(ec(r)<1)break;const c=tc(r,1);o=(c[0]&128)===128,s=c[0]&127,s<126?a=3:s===126?a=1:a=2}else if(a===1){if(ec(r)<2)break;const c=tc(r,2);s=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),a=3}else if(a===2){if(ec(r)<8)break;const c=tc(r,8),d=new DataView(c.buffer,c.byteOffset,c.length),u=d.getUint32(0);if(u>Math.pow(2,21)-1){i.enqueue(rp);break}s=u*Math.pow(2,32)+d.getUint32(4),a=3}else{if(ec(r)<s)break;const c=tc(r,s);i.enqueue(jh(o?c:Am.decode(c),t)),a=0}if(s===0||s>e){i.enqueue(rp);break}}}})}const Bw=4;function Dt(e){if(e)return hA(e)}function hA(e){for(var t in Dt.prototype)e[t]=Dt.prototype[t];return e}Dt.prototype.on=Dt.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};Dt.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this};Dt.prototype.off=Dt.prototype.removeListener=Dt.prototype.removeAllListeners=Dt.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var a,s=0;s<r.length;s++)if(a=r[s],a===t||a.fn===t){r.splice(s,1);break}return r.length===0&&delete this._callbacks["$"+e],this};Dt.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],a=1;a<arguments.length;a++)t[a-1]=arguments[a];if(r){r=r.slice(0);for(var a=0,s=r.length;a<s;++a)r[a].apply(this,t)}return this};Dt.prototype.emitReserved=Dt.prototype.emit;Dt.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};Dt.prototype.hasListeners=function(e){return!!this.listeners(e).length};const id=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,r)=>r(t,0),$r=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),gA="arraybuffer";function zw(e,...t){return t.reduce((r,a)=>(e.hasOwnProperty(a)&&(r[a]=e[a]),r),{})}const vA=$r.setTimeout,yA=$r.clearTimeout;function cd(e,t){t.useNativeTimers?(e.setTimeoutFn=vA.bind($r),e.clearTimeoutFn=yA.bind($r)):(e.setTimeoutFn=$r.setTimeout.bind($r),e.clearTimeoutFn=$r.clearTimeout.bind($r))}const EA=1.33;function xA(e){return typeof e=="string"?bA(e):Math.ceil((e.byteLength||e.size)*EA)}function bA(e){let t=0,r=0;for(let a=0,s=e.length;a<s;a++)t=e.charCodeAt(a),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(a++,r+=4);return r}function Uw(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function wA(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}function NA(e){let t={},r=e.split("&");for(let a=0,s=r.length;a<s;a++){let o=r[a].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}class SA extends Error{constructor(t,r,a){super(t),this.description=r,this.context=a,this.type="TransportError"}}class Bh extends Dt{constructor(t){super(),this.writable=!1,cd(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,r,a){return super.emitReserved("error",new SA(t,r,a)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=jh(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,r={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const r=wA(t);return r.length?"?"+r:""}}class CA extends Bh{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let a=0;this._polling&&(a++,this.once("pollComplete",function(){--a||r()})),this.writable||(a++,this.once("drain",function(){--a||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=a=>{if(this.readyState==="opening"&&a.type==="open"&&this.onOpen(),a.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(a)};mA(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,dA(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=Uw()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(t,r)}}let Vw=!1;try{Vw=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const kA=Vw;function DA(){}class AA extends CA{constructor(t){if(super(t),typeof location<"u"){const r=location.protocol==="https:";let a=location.port;a||(a=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||a!==t.port}}doWrite(t,r){const a=this.request({method:"POST",data:t});a.on("success",r),a.on("error",(s,o)=>{this.onError("xhr post error",s,o)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,a)=>{this.onError("xhr poll error",r,a)}),this.pollXhr=t}}let Ks=class _c extends Dt{constructor(t,r,a){super(),this.createRequest=t,cd(this,a),this._opts=a,this._method=a.method||"GET",this._uri=r,this._data=a.data!==void 0?a.data:null,this._create()}_create(){var t;const r=zw(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const a=this._xhr=this.createRequest(r);try{a.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){a.setDisableHeaderCheck&&a.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&a.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{a.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{a.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(a),"withCredentials"in a&&(a.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(a.timeout=this._opts.requestTimeout),a.onreadystatechange=()=>{var s;a.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(a.getResponseHeader("set-cookie"))),a.readyState===4&&(a.status===200||a.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof a.status=="number"?a.status:0)},0))},a.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=_c.requestsCount++,_c.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=DA,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete _c.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};Ks.requestsCount=0;Ks.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Uv);else if(typeof addEventListener=="function"){const e="onpagehide"in $r?"pagehide":"unload";addEventListener(e,Uv,!1)}}function Uv(){for(let e in Ks.requests)Ks.requests.hasOwnProperty(e)&&Ks.requests[e].abort()}const TA=function(){const e=Ww({xdomain:!1});return e&&e.responseType!==null}();class _A extends AA{constructor(t){super(t);const r=t&&t.forceBase64;this.supportsBinary=TA&&!r}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Ks(Ww,this.uri(),t)}}function Ww(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||kA))return new XMLHttpRequest}catch{}if(!t)try{return new $r[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Hw=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class OA extends Bh{get name(){return"websocket"}doOpen(){const t=this.uri(),r=this.opts.protocols,a=Hw?{}:zw(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(a.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,r,a)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const a=t[r],s=r===t.length-1;Fh(a,this.supportsBinary,o=>{try{this.doWrite(a,o)}catch{}s&&id(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=Uw()),this.supportsBinary||(r.b64=1),this.createUri(t,r)}}const Tm=$r.WebSocket||$r.MozWebSocket;class RA extends OA{createSocket(t,r,a){return Hw?new Tm(t,r,a):r?new Tm(t,r):new Tm(t)}doWrite(t,r){this.ws.send(r)}}class MA extends Bh{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const r=pA(Number.MAX_SAFE_INTEGER,this.socket.binaryType),a=t.readable.pipeThrough(r).getReader(),s=fA();s.readable.pipeTo(t.writable),this._writer=s.writable.getWriter();const o=()=>{a.read().then(({done:i,value:c})=>{i||(this.onPacket(c),o())}).catch(i=>{})};o();const l={type:"open"};this.query.sid&&(l.data=`{"sid":"${this.query.sid}"}`),this._writer.write(l).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const a=t[r],s=r===t.length-1;this._writer.write(a).then(()=>{s&&id(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const PA={websocket:RA,webtransport:MA,polling:_A},LA=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,IA=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function np(e){if(e.length>8e3)throw"URI too long";const t=e,r=e.indexOf("["),a=e.indexOf("]");r!=-1&&a!=-1&&(e=e.substring(0,r)+e.substring(r,a).replace(/:/g,";")+e.substring(a,e.length));let s=LA.exec(e||""),o={},l=14;for(;l--;)o[IA[l]]=s[l]||"";return r!=-1&&a!=-1&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=$A(o,o.path),o.queryKey=FA(o,o.query),o}function $A(e,t){const r=/\/{2,9}/g,a=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&a.splice(0,1),t.slice(-1)=="/"&&a.splice(a.length-1,1),a}function FA(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(a,s,o){s&&(r[s]=o)}),r}const ap=typeof addEventListener=="function"&&typeof removeEventListener=="function",Oc=[];ap&&addEventListener("offline",()=>{Oc.forEach(e=>e())},!1);class _a extends Dt{constructor(t,r){if(super(),this.binaryType=gA,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(r=t,t=null),t){const a=np(t);r.hostname=a.host,r.secure=a.protocol==="https"||a.protocol==="wss",r.port=a.port,a.query&&(r.query=a.query)}else r.host&&(r.hostname=np(r.host).host);cd(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(a=>{const s=a.prototype.name;this.transports.push(s),this._transportsByName[s]=a}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=NA(this.opts.query)),ap&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Oc.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=Bw,r.transport=t,this.id&&(r.sid=this.id);const a=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](a)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&_a.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(t);r.open(),this.setTransport(r)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",_a.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=t.data,this._onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let a=0;a<this.writeBuffer.length;a++){const s=this.writeBuffer[a].data;if(s&&(r+=xA(s)),a>0&&r>this._maxPayload)return this.writeBuffer.slice(0,a);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,id(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,r,a){return this._sendPacket("message",t,r,a),this}send(t,r,a){return this._sendPacket("message",t,r,a),this}_sendPacket(t,r,a,s){if(typeof r=="function"&&(s=r,r=void 0),typeof a=="function"&&(s=a,a=null),this.readyState==="closing"||this.readyState==="closed")return;a=a||{},a.compress=a.compress!==!1;const o={type:t,data:r,options:a};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),s&&this.once("flush",s),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},a=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?a():t()}):this.upgrading?a():t()),this}_onError(t){if(_a.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),ap&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const a=Oc.indexOf(this._offlineEventListener);a!==-1&&Oc.splice(a,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this._prevBufferLen=0}}}_a.protocol=Bw;class jA extends _a{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let r=this.createTransport(t),a=!1;_a.priorWebsocketSuccess=!1;const s=()=>{a||(r.send([{type:"ping",data:"probe"}]),r.once("packet",m=>{if(!a)if(m.type==="pong"&&m.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;_a.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{a||this.readyState!=="closed"&&(u(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=r.name,this.emitReserved("upgradeError",f)}}))};function o(){a||(a=!0,u(),r.close(),r=null)}const l=m=>{const f=new Error("probe error: "+m);f.transport=r.name,o(),this.emitReserved("upgradeError",f)};function i(){l("transport closed")}function c(){l("socket closed")}function d(m){r&&m.name!==r.name&&o()}const u=()=>{r.removeListener("open",s),r.removeListener("error",l),r.removeListener("close",i),this.off("close",c),this.off("upgrading",d)};r.once("open",s),r.once("error",l),r.once("close",i),this.once("close",c),this.once("upgrading",d),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{a||r.open()},200):r.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const r=[];for(let a=0;a<t.length;a++)~this.transports.indexOf(t[a])&&r.push(t[a]);return r}}let BA=class extends jA{constructor(t,r={}){const a=typeof t=="object"?t:r;(!a.transports||a.transports&&typeof a.transports[0]=="string")&&(a.transports=(a.transports||["polling","websocket","webtransport"]).map(s=>PA[s]).filter(s=>!!s)),super(t,a)}};function zA(e,t="",r){let a=e;r=r||typeof location<"u"&&location,e==null&&(e=r.protocol+"//"+r.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=r.protocol+e:e=r.host+e),/^(https?|wss?):\/\//.test(e)||(typeof r<"u"?e=r.protocol+"//"+e:e="https://"+e),a=np(e)),a.port||(/^(http|ws)$/.test(a.protocol)?a.port="80":/^(http|ws)s$/.test(a.protocol)&&(a.port="443")),a.path=a.path||"/";const o=a.host.indexOf(":")!==-1?"["+a.host+"]":a.host;return a.id=a.protocol+"://"+o+":"+a.port+t,a.href=a.protocol+"://"+o+(r&&r.port===a.port?"":":"+a.port),a}const UA=typeof ArrayBuffer=="function",VA=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,Yw=Object.prototype.toString,WA=typeof Blob=="function"||typeof Blob<"u"&&Yw.call(Blob)==="[object BlobConstructor]",HA=typeof File=="function"||typeof File<"u"&&Yw.call(File)==="[object FileConstructor]";function zh(e){return UA&&(e instanceof ArrayBuffer||VA(e))||WA&&e instanceof Blob||HA&&e instanceof File}function Rc(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let r=0,a=e.length;r<a;r++)if(Rc(e[r]))return!0;return!1}if(zh(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return Rc(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&Rc(e[r]))return!0;return!1}function YA(e){const t=[],r=e.data,a=e;return a.data=sp(r,t),a.attachments=t.length,{packet:a,buffers:t}}function sp(e,t){if(!e)return e;if(zh(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}else if(Array.isArray(e)){const r=new Array(e.length);for(let a=0;a<e.length;a++)r[a]=sp(e[a],t);return r}else if(typeof e=="object"&&!(e instanceof Date)){const r={};for(const a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=sp(e[a],t));return r}return e}function qA(e,t){return e.data=op(e.data,t),delete e.attachments,e}function op(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=op(e[r],t);else if(typeof e=="object")for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=op(e[r],t));return e}const GA=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],KA=5;var Le;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(Le||(Le={}));class XA{constructor(t){this.replacer=t}encode(t){return(t.type===Le.EVENT||t.type===Le.ACK)&&Rc(t)?this.encodeAsBinary({type:t.type===Le.EVENT?Le.BINARY_EVENT:Le.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===Le.BINARY_EVENT||t.type===Le.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=YA(t),a=this.encodeAsString(r.packet),s=r.buffers;return s.unshift(a),s}}function Vv(e){return Object.prototype.toString.call(e)==="[object Object]"}class Uh extends Dt{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t);const a=r.type===Le.BINARY_EVENT;a||r.type===Le.BINARY_ACK?(r.type=a?Le.EVENT:Le.ACK,this.reconstructor=new QA(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(zh(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const a={type:Number(t.charAt(0))};if(Le[a.type]===void 0)throw new Error("unknown packet type "+a.type);if(a.type===Le.BINARY_EVENT||a.type===Le.BINARY_ACK){const o=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const l=t.substring(o,r);if(l!=Number(l)||t.charAt(r)!=="-")throw new Error("Illegal attachments");a.attachments=Number(l)}if(t.charAt(r+1)==="/"){const o=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););a.nsp=t.substring(o,r)}else a.nsp="/";const s=t.charAt(r+1);if(s!==""&&Number(s)==s){const o=r+1;for(;++r;){const l=t.charAt(r);if(l==null||Number(l)!=l){--r;break}if(r===t.length)break}a.id=Number(t.substring(o,r+1))}if(t.charAt(++r)){const o=this.tryParse(t.substr(r));if(Uh.isPayloadValid(a.type,o))a.data=o;else throw new Error("invalid payload")}return a}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case Le.CONNECT:return Vv(r);case Le.DISCONNECT:return r===void 0;case Le.CONNECT_ERROR:return typeof r=="string"||Vv(r);case Le.EVENT:case Le.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&GA.indexOf(r[0])===-1);case Le.ACK:case Le.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class QA{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=qA(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const JA=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Uh,Encoder:XA,get PacketType(){return Le},protocol:KA},Symbol.toStringTag,{value:"Module"}));function rn(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const ZA=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class qw extends Dt{constructor(t,r,a){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,a&&a.auth&&(this.auth=a.auth),this._opts=Object.assign({},a),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[rn(t,"open",this.onopen.bind(this)),rn(t,"packet",this.onpacket.bind(this)),rn(t,"error",this.onerror.bind(this)),rn(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){var a,s,o;if(ZA.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(r.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const l={type:Le.EVENT,data:r};if(l.options={},l.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const u=this.ids++,m=r.pop();this._registerAckCallback(u,m),l.id=u}const i=(s=(a=this.io.engine)===null||a===void 0?void 0:a.transport)===null||s===void 0?void 0:s.writable,c=this.connected&&!(!((o=this.io.engine)===null||o===void 0)&&o._hasPingExpired());return this.flags.volatile&&!i||(c?(this.notifyOutgoingListeners(l),this.packet(l)):this.sendBuffer.push(l)),this.flags={},this}_registerAckCallback(t,r){var a;const s=(a=this.flags.timeout)!==null&&a!==void 0?a:this._opts.ackTimeout;if(s===void 0){this.acks[t]=r;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let i=0;i<this.sendBuffer.length;i++)this.sendBuffer[i].id===t&&this.sendBuffer.splice(i,1);r.call(this,new Error("operation has timed out"))},s),l=(...i)=>{this.io.clearTimeoutFn(o),r.apply(this,i)};l.withError=!0,this.acks[t]=l}emitWithAck(t,...r){return new Promise((a,s)=>{const o=(l,i)=>l?s(l):a(i);o.withError=!0,r.push(o),this.emit(t,...r)})}_addToQueue(t){let r;typeof t[t.length-1]=="function"&&(r=t.pop());const a={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((s,...o)=>a!==this._queue[0]?void 0:(s!==null?a.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(s)):(this._queue.shift(),r&&r(null,...o)),a.pending=!1,this._drainQueue())),this._queue.push(a),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!t||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Le.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(a=>String(a.id)===t)){const a=this.acks[t];delete this.acks[t],a.withError&&a.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Le.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Le.EVENT:case Le.BINARY_EVENT:this.onevent(t);break;case Le.ACK:case Le.BINARY_ACK:this.onack(t);break;case Le.DISCONNECT:this.ondisconnect();break;case Le.CONNECT_ERROR:this.destroy();const a=new Error(t.data.message);a.data=t.data.data,this.emitReserved("connect_error",a);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const a of r)a.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const r=this;let a=!1;return function(...s){a||(a=!0,r.packet({type:Le.ACK,id:t,data:s}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(delete this.acks[t.id],r.withError&&t.data.unshift(null),r.apply(this,t.data))}onconnect(t,r){this.id=t,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Le.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let a=0;a<r.length;a++)if(t===r[a])return r.splice(a,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let a=0;a<r.length;a++)if(t===r[a])return r.splice(a,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const a of r)a.apply(this,t.data)}}}function No(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}No.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+r:e-r}return Math.min(e,this.max)|0};No.prototype.reset=function(){this.attempts=0};No.prototype.setMin=function(e){this.ms=e};No.prototype.setMax=function(e){this.max=e};No.prototype.setJitter=function(e){this.jitter=e};class lp extends Dt{constructor(t,r){var a;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,cd(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((a=r.randomizationFactor)!==null&&a!==void 0?a:.5),this.backoff=new No({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const s=r.parser||JA;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new BA(this.uri,this.opts);const r=this.engine,a=this;this._readyState="opening",this.skipReconnect=!1;const s=rn(r,"open",function(){a.onopen(),t&&t()}),o=i=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",i),t?t(i):this.maybeReconnectOnOpen()},l=rn(r,"error",o);if(this._timeout!==!1){const i=this._timeout,c=this.setTimeoutFn(()=>{s(),o(new Error("timeout")),r.close()},i);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(s),this.subs.push(l),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(rn(t,"ping",this.onping.bind(this)),rn(t,"data",this.ondata.bind(this)),rn(t,"error",this.onerror.bind(this)),rn(t,"close",this.onclose.bind(this)),rn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){id(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let a=this.nsps[t];return a?this._autoConnect&&!a.active&&a.connect():(a=new qw(this,t,r),this.nsps[t]=a),a}_destroy(t){const r=Object.keys(this.nsps);for(const a of r)if(this.nsps[a].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let a=0;a<r.length;a++)this.engine.write(r[a],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,r){var a;this.cleanup(),(a=this.engine)===null||a===void 0||a.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const a=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(s=>{s?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",s)):t.onreconnect()}))},r);this.opts.autoUnref&&a.unref(),this.subs.push(()=>{this.clearTimeoutFn(a)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Xo={};function Xs(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const r=zA(e,t.path||"/socket.io"),a=r.source,s=r.id,o=r.path,l=Xo[s]&&o in Xo[s].nsps,i=t.forceNew||t["force new connection"]||t.multiplex===!1||l;let c;return i?c=new lp(a,t):(Xo[s]||(Xo[s]=new lp(a,t)),c=Xo[s]),r.query&&!t.query&&(t.query=r.queryKey),c.socket(r.path,t)}Object.assign(Xs,{Manager:lp,Socket:qw,io:Xs,connect:Xs});const eT=()=>{var tt,vr,yr,Qr;const[e,t]=g.useState(!1),[r,a]=g.useState([]),[s,o]=g.useState([]),[l,i]=g.useState(""),[c,d]=g.useState(""),[u,m]=g.useState(!0),[f,x]=g.useState(null),[b,y]=g.useState(!1),[v,p]=g.useState(null),[h,E]=g.useState([]),[w,N]=g.useState(new Set),[S,C]=g.useState(!1),[k,D]=g.useState(0),[O,A]=g.useState([]),[$,P]=g.useState(!1),[I,L]=g.useState(!1),[F,T]=g.useState(!1),[M,V]=g.useState(60),K=g.useRef(null),z=g.useRef(null),U=g.useRef(null),Y=g.useRef(null),{user:X}=Te();g.useEffect(()=>{if(!X||!e)return;const re=localStorage.getItem("token"),ge=Xs("http://localhost:3000",{auth:{token:re,user:{id:X.id,name:X.name,role:X.role}}});return ge.on("connect",()=>{console.log("🔌 WebSocket connected:",ge.id)}),ge.on("disconnect",()=>{console.log("🔌 WebSocket disconnected")}),ge.on("new_message",be=>{console.log("📨 Received new message:",be),a(De=>[...De,be]),o(De=>De.map(R=>R.userId===be.senderId?{...R,lastMessage:be.content,lastMessageTime:be.createdAt}:R)),l!==be.senderId&&"Notification"in window&&Notification.permission==="granted"&&new Notification(be.senderName,{body:be.content}),console.log("✅ Message sent confirmation:",be),a(De=>[...De,be])}),ge.on("message_error",be=>{console.error("❌ Message error:",be.error),x(be.error)}),ge.on("user_typing",be=>{be.isTyping?N(De=>new Set(De).add(be.userId)):N(De=>{const R=new Set(De);return R.delete(be.userId),R})}),ge.on("user_connected",be=>{E(De=>[...De,be])}),ge.on("user_disconnected",be=>{E(De=>De.filter(R=>R.userId!==be.userId))}),p(ge),()=>{ge.close()}},[X,e]),g.useEffect(()=>{e&&(j(),B())},[e]),g.useEffect(()=>{l&&(H(l),D(0))},[l]),g.useEffect(()=>{G()},[r]),g.useEffect(()=>{if(!e)return;const re=()=>{de()},ge=["mousedown","mousemove","keypress","scroll","touchstart","click"];return ge.forEach(be=>{document.addEventListener(be,re,!0)}),de(),()=>{ge.forEach(be=>{document.removeEventListener(be,re,!0)}),U.current&&clearTimeout(U.current),Y.current&&clearInterval(Y.current)}},[e]);const j=async()=>{try{m(!0);const re=localStorage.getItem("token"),ge=await J.get("/chat/conversations",{headers:{Authorization:`Bearer ${re}`}});o(ge.data);const be=ge.data.reduce((De,R)=>De+R.unreadCount,0);D(be)}catch(re){console.error("Error fetching conversations:",re),x("Error al cargar las conversaciones")}finally{m(!1)}},B=async()=>{try{const re=localStorage.getItem("token");let ge="";if((X==null?void 0:X.role)==="CLIENTE")ge="/users/lawyers";else if((X==null?void 0:X.role)==="ABOGADO")ge="/users/clients";else return;const be=await J.get(ge,{headers:{Authorization:`Bearer ${re}`}});(X==null?void 0:X.role)==="ABOGADO"?A(be.data.map(De=>({id:De.user.id,name:De.user.name,email:De.user.email,role:"CLIENTE"}))):A(be.data.map(De=>({id:De.id,name:De.name,email:De.email,role:"ABOGADO"})))}catch(re){console.error("Error fetching available users:",re)}},H=async re=>{try{const ge=localStorage.getItem("token"),be=await J.get(`/chat/messages/${re}`,{headers:{Authorization:`Bearer ${ge}`}});a(be.data)}catch(ge){console.error("Error fetching messages:",ge),x("Error al cargar los mensajes")}},G=()=>{var re;(re=K.current)==null||re.scrollIntoView({behavior:"smooth"})},ue=async re=>{var ge,be;if(re.preventDefault(),console.log("🚀 SEND MESSAGE TRIGGERED!",{newMessage:c,selectedConversation:l}),!(!c.trim()||!l||!v))try{y(!0);const De={id:`temp-${Date.now()}`,content:c,senderId:X.id,senderName:X.name,receiverId:l,receiverName:((ge=s.find(oe=>oe.userId===l))==null?void 0:ge.userName)||((be=O.find(oe=>oe.id===l))==null?void 0:be.name)||"Usuario",createdAt:new Date().toISOString(),isOwnMessage:!0};a(oe=>[...oe,De]),console.log("📤 Sending message via WebSocket",{receiverId:l,content:c,socketId:v.id});const R=c;d(""),v.emit("send_message",{receiverId:l,content:R}),v.emit("typing_stop",{receiverId:l}),C(!1),setTimeout(()=>{G()},100),de(),console.log("✅ Message sent successfully")}catch(De){console.error("❌ Error sending message:",De),x("Error al enviar el mensaje")}finally{y(!1)}},W=re=>{re.key==="Enter"&&!re.shiftKey&&(re.preventDefault(),c.trim()&&!b&&ue({preventDefault:()=>{}}))},me=re=>{i(re),P(!1),H(re)},ae=re=>{i(re),P(!1),a([])},xe=re=>{d(re.target.value),!(!v||!l)&&(S||(C(!0),v.emit("typing_start",{receiverId:l})),z.current&&clearTimeout(z.current),z.current=setTimeout(()=>{C(!1),v.emit("typing_stop",{receiverId:l})},1e3))},Me=re=>{const ge=new Date(re),De=(new Date().getTime()-ge.getTime())/(1e3*60*60);return De<24?ge.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):De<48?"Ayer":ge.toLocaleDateString()},Be=re=>h.some(ge=>ge.userId===re),Q=re=>re.charAt(0).toUpperCase(),de=()=>{U.current&&clearTimeout(U.current),Y.current&&clearInterval(Y.current),T(!1),V(60),U.current=setTimeout(()=>{T(!0),ke()},6e4)},ke=()=>{const re=setInterval(()=>{V(ge=>ge<=1?(clearInterval(re),Ve(),0):ge-1)},1e3);Y.current=re},Ve=()=>{a([]),o([]),i(""),d(""),x(null),D(0),T(!1),V(60),t(!1),U.current&&clearTimeout(U.current),Y.current&&clearInterval(Y.current),v&&v.emit("end_chat"),console.log("💬 Chat finalizado y historial limpiado")},we=()=>{T(!1),V(60),de()},Pe=()=>{t(!e),e?(a([]),o([]),i(""),d(""),x(null),D(0),U.current&&clearTimeout(U.current),Y.current&&clearInterval(Y.current),T(!1),V(60),v&&v.emit("end_chat")):(x(null),de())},He=()=>{a([])};return X?n.createElement(n.Fragment,null,n.createElement("button",{onClick:Pe,className:"fixed bottom-4 right-4 w-14 h-14 bg-blue-600 text-white rounded-full shadow-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 z-50","aria-label":"Abrir chat"},n.createElement("svg",{className:"w-6 h-6 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})),k>0&&n.createElement("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center"},k>9?"9+":k)),e&&n.createElement("div",{className:`fixed bottom-20 right-4 bg-white rounded-lg shadow-xl border z-50 flex flex-col transition-all duration-300 ${I?"w-80 h-96":"w-[450px] h-[600px]"}`},n.createElement("div",{className:"p-4 border-b bg-blue-600 text-white rounded-t-lg"},n.createElement("div",{className:"flex justify-between items-center"},n.createElement("h3",{className:"font-medium"},"Chat"),n.createElement("div",{className:"flex items-center space-x-2"},n.createElement("button",{onClick:Ve,className:"text-white hover:text-red-200 text-xs px-2 py-1 bg-red-600 rounded",title:"Finalizar chat"},"Finalizar"),n.createElement("button",{onClick:()=>L(!I),className:"text-white hover:text-gray-200","aria-label":I?"Maximizar":"Minimizar"},n.createElement("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},I?n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"}):n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4h16v16H4V4z"}))),n.createElement("button",{onClick:Pe,className:"text-white hover:text-gray-200","aria-label":"Cerrar chat"},n.createElement("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})))))),F&&n.createElement("div",{className:"bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-3"},n.createElement("div",{className:"flex items-center justify-between"},n.createElement("div",{className:"flex items-center"},n.createElement("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})),n.createElement("span",{className:"text-sm font-medium"},"El chat se cerrará automáticamente en ",M," segundos por inactividad")),n.createElement("button",{onClick:we,className:"ml-2 text-yellow-800 hover:text-yellow-900 text-sm font-medium underline"},"Mantener abierto"))),n.createElement("div",{className:"flex-1 flex flex-col"},l?n.createElement(n.Fragment,null,n.createElement("div",{className:"p-3 border-b bg-gray-50 flex items-center justify-between"},n.createElement("div",{className:"flex items-center"},n.createElement("button",{onClick:()=>i(""),className:"mr-2 text-gray-500 hover:text-gray-700","aria-label":"Volver a conversaciones"},n.createElement("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"}))),n.createElement("div",{className:"relative"},n.createElement("div",{className:"w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center"},n.createElement("span",{className:"text-white text-xs font-medium"},Q(((tt=s.find(re=>re.userId===l))==null?void 0:tt.userName)||((vr=O.find(re=>re.id===l))==null?void 0:vr.name)||"U"))),Be(l)&&n.createElement("div",{className:"absolute -bottom-0.5 -right-0.5 w-2 h-2 bg-green-500 rounded-full border border-white"})),n.createElement("div",{className:"ml-2"},n.createElement("p",{className:"text-sm font-medium text-gray-900"},((yr=s.find(re=>re.userId===l))==null?void 0:yr.userName)||((Qr=O.find(re=>re.id===l))==null?void 0:Qr.name)||"Usuario"),n.createElement("p",{className:"text-xs text-gray-500"},Be(l)?"En línea":"Desconectado"))),n.createElement("div",{className:"flex items-center space-x-2"},n.createElement("button",{onClick:He,className:"text-blue-600 hover:text-blue-800 text-xs px-2 py-1 border border-blue-200 rounded",title:"Reiniciar conversación"},"Reiniciar"),n.createElement("button",{onClick:Pe,className:"text-gray-500 hover:text-red-600 ml-2","aria-label":"Cerrar chat"},n.createElement("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}))))),n.createElement("div",{className:"flex-1 overflow-y-auto p-3 space-y-2 max-h-[60vh] min-h-[200px]",style:{scrollBehavior:"smooth"}},r.length===0?n.createElement("div",{className:"text-center text-gray-500 text-sm"},"No hay mensajes aún"):r.map(re=>n.createElement("div",{key:re.id,className:`flex ${re.isOwnMessage?"justify-end":"justify-start"}`},n.createElement("div",{className:`max-w-[280px] px-3 py-2 rounded-lg text-sm break-words ${re.isOwnMessage?"bg-blue-600 text-white":"bg-gray-200 text-gray-900"}`},n.createElement("div",null,re.content),n.createElement("div",{className:`text-xs mt-1 ${re.isOwnMessage?"text-blue-100":"text-gray-500"}`},Me(re.createdAt))))),w.has(l)&&n.createElement("div",{className:"flex justify-start"},n.createElement("div",{className:"bg-gray-200 text-gray-900 px-3 py-2 rounded-lg text-sm"},"Escribiendo...")),n.createElement("div",{ref:K})),n.createElement("form",{onSubmit:ue,className:"p-3 border-t"},n.createElement("div",{className:"flex space-x-2"},n.createElement("textarea",{value:c,onChange:xe,placeholder:"Escribe tu mensaje...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 min-h-[40px] max-h-[100px] resize-none",disabled:b,rows:1,onKeyDown:W}),n.createElement("button",{type:"submit",disabled:!c.trim()||b,className:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed min-h-[40px] min-w-[40px]"},b?"...":"→")))):n.createElement("div",{className:"flex-1 overflow-y-auto p-4"},n.createElement("div",{className:"flex justify-between items-center mb-3"},n.createElement("h4",{className:"font-medium text-gray-900"},"Conversaciones"),n.createElement("button",{onClick:()=>P(!$),className:"text-blue-600 hover:text-blue-700 text-sm"},$?"Cancelar":"Nueva")),$?n.createElement("div",{className:"space-y-2"},n.createElement("h5",{className:"text-sm font-medium text-gray-700 mb-2"},(X==null?void 0:X.role)==="CLIENTE"?"Seleccionar Abogado":"Seleccionar Cliente"),O.length===0?n.createElement("div",{className:"text-center text-gray-500 text-sm"},"Cargando usuarios..."):O.map(re=>n.createElement("div",{key:re.id,onClick:()=>ae(re.id),className:"p-3 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors"},n.createElement("div",{className:"flex items-center space-x-3"},n.createElement("div",{className:"w-8 h-8 bg-green-600 rounded-full flex items-center justify-center"},n.createElement("span",{className:"text-white text-sm font-medium"},Q(re.name))),n.createElement("div",{className:"flex-1 min-w-0"},n.createElement("p",{className:"text-sm font-medium text-gray-900 truncate"},re.name),n.createElement("p",{className:"text-xs text-gray-500 truncate"},re.email)))))):n.createElement(n.Fragment,null,u?n.createElement("div",{className:"text-center text-gray-500"},"Cargando..."):s.length===0?n.createElement("div",{className:"text-center text-gray-500"},"No hay conversaciones"):n.createElement("div",{className:"space-y-2"},s.map(re=>n.createElement("div",{key:re.userId,onClick:()=>me(re.userId),className:"p-3 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors"},n.createElement("div",{className:"flex items-center space-x-3"},n.createElement("div",{className:"relative"},n.createElement("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center"},n.createElement("span",{className:"text-white text-sm font-medium"},Q(re.userName))),Be(re.userId)&&n.createElement("div",{className:"absolute -bottom-1 -right-1 w-2 h-2 bg-green-500 rounded-full border border-white"})),n.createElement("div",{className:"flex-1 min-w-0"},n.createElement("div",{className:"flex justify-between items-start"},n.createElement("p",{className:"text-sm font-medium text-gray-900 truncate"},re.userName),n.createElement("div",{className:"text-xs text-gray-400"},Me(re.lastMessageTime))),n.createElement("p",{className:"text-xs text-gray-500 truncate"},re.lastMessage),re.unreadCount>0&&n.createElement("div",{className:"mt-1"},n.createElement("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800"},re.unreadCount)))))))))),f&&n.createElement("div",{className:"p-3 bg-red-50 border-t border-red-200"},n.createElement("div",{className:"text-red-600 text-xs"},f)))):null},tT=()=>{const[e,t]=g.useState([]),[r,a]=g.useState(!0),[s,o]=g.useState(new Set),{user:l}=Te(),i=xo();g.useEffect(()=>{if(!l)return;const u=async()=>{try{a(!0);const f=localStorage.getItem("token"),x=await J.get("/appointments",{headers:{Authorization:`Bearer ${f}`}});let b=0;try{b=(await J.get("/chat/unread-count",{headers:{Authorization:`Bearer ${f}`}})).data.count||0}catch{}const y=[],v=new Date,p=new Date(v.getFullYear(),v.getMonth(),v.getDate()),h=new Date(p);if(h.setDate(h.getDate()+1),l.role!=="ADMIN"){const E=x.data.filter(w=>new Date(w.date)>=p);if(E.length>0){const w=E.filter(N=>{const S=new Date(N.date);return S>=p&&S<h});w.length>0?y.push({id:"appointments-today",type:"appointment",count:w.length,title:"Citas de Hoy",description:`Tienes ${w.length} cita${w.length>1?"s":""} programada${w.length>1?"s":""} para hoy`,link:l.role==="CLIENTE"?"/client/appointments":"/lawyer/appointments"}):y.push({id:"appointments-upcoming",type:"appointment",count:E.length,title:"Próximas Citas",description:`Tienes ${E.length} cita${E.length>1?"s":""} programada${E.length>1?"s":""}`,link:l.role==="CLIENTE"?"/client/appointments":"/lawyer/appointments"})}}b>0&&y.push({id:"unread-messages",type:"message",count:b,title:"Mensajes Nuevos",description:`Tienes ${b} mensaje${b>1?"s":""} sin leer`,link:l.role==="CLIENTE"?"/client/chat":"/lawyer/chat"}),t(y)}catch(f){console.error("Error fetching notifications:",f)}finally{a(!1)}};u();const m=setInterval(u,3e4);return()=>clearInterval(m)},[l]),g.useEffect(()=>{const u=new Set(s);e.forEach(m=>{i.pathname===m.link&&u.add(m.id)}),u.size!==s.size&&o(u)},[i.pathname,e,s]);const c=u=>{o(m=>new Set([...m,u]))},d=e.filter(u=>!s.has(u.id));return r||d.length===0?null:n.createElement("div",{className:"fixed top-20 left-4 z-50 space-y-2 max-w-sm"},d.map(u=>n.createElement("div",{key:u.id,className:`bg-white rounded-lg shadow-lg border-l-4 p-4 transform transition-all duration-300 ${u.type==="appointment"?"border-blue-500":"border-green-500"}`},n.createElement("div",{className:"flex items-start justify-between"},n.createElement("div",{className:"flex-1"},n.createElement("div",{className:"flex items-center space-x-2 mb-1"},n.createElement("span",{className:"text-sm font-semibold text-gray-900"},u.title),n.createElement("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${u.type==="appointment"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`},u.count)),n.createElement("p",{className:"text-sm text-gray-600 mb-2"},u.description),n.createElement("div",{className:"flex space-x-2"},n.createElement("a",{href:u.link,className:`text-sm font-medium px-3 py-1 rounded-md transition-colors ${u.type==="appointment"?"bg-blue-100 text-blue-700 hover:bg-blue-200":"bg-green-100 text-green-700 hover:bg-green-200"}`},"Ver ",u.type==="appointment"?"Citas":"Mensajes"),n.createElement("button",{onClick:()=>c(u.id),className:"text-sm text-gray-500 hover:text-gray-700 px-2 py-1 rounded-md hover:bg-gray-100"},"Ocultar"))),n.createElement("button",{onClick:()=>c(u.id),className:"text-gray-400 hover:text-gray-600 ml-2"},n.createElement("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})))))))},rT=()=>{const[e,t]=g.useState({}),[r,a]=g.useState(!0),[s,o]=g.useState(null);g.useEffect(()=>{l()},[]);const l=async()=>{try{a(!0),o(null);const m=await J.get("/site-config/public"),f={};m.data.forEach(x=>{f[x.key]=x.value}),t(f)}catch(m){console.error("Error fetching site configs:",m),o("Error al cargar las configuraciones del sitio")}finally{a(!1)}};return{configs:e,loading:r,error:s,getConfig:(m,f="")=>e[m]||f,getBooleanConfig:(m,f=!1)=>e[m]==="true"||f,getNumberConfig:(m,f=0)=>{const x=e[m];return x?parseInt(x,10):f},updateConfig:async(m,f)=>{try{return await J.patch(`/site-config/key/${m}`,{value:f}),t(x=>({...x,[m]:f})),!0}catch(x){return console.error("Error updating config:",x),!1}},refresh:l}},nT=e=>{const[t,r]=g.useState(null),[a,s]=g.useState(!0),[o,l]=g.useState(null);g.useEffect(()=>{i()},[e]);const i=async()=>{try{s(!0),l(null);const u=await J.get(`/menu-config/role/${e}`);r(u.data)}catch(u){console.error("Error fetching menu config:",u),l("Error al cargar la configuración del menú"),r(null)}finally{s(!1)}},c=()=>t?t.items.filter(u=>u.isVisible).sort((u,m)=>u.order-m.order):[],d=()=>(t==null?void 0:t.orientation)||"horizontal";return{menuConfig:t,menuItems:c(),orientation:d(),loading:a,error:o,refresh:i}},aT=e=>{const t=rT(),r=nT(e);return{siteName:t.getConfig("site_name","Despacho Legal"),siteDescription:t.getConfig("site_description","Servicios legales profesionales"),logoUrl:t.getConfig("logo_url","/images/logo.png"),faviconUrl:t.getConfig("favicon_url","/images/favicon.ico"),primaryColor:t.getConfig("primary_color","#1e40af"),secondaryColor:t.getConfig("secondary_color","#3b82f6"),sidebarPosition:t.getConfig("sidebar_position","left"),sidebarWidth:t.getConfig("sidebar_width","250px"),headerFixed:t.getBooleanConfig("header_fixed",!0),footerVisible:t.getBooleanConfig("footer_visible",!0),contactEmail:t.getConfig("contact_email","info@despacholegal.com"),contactPhone:t.getConfig("contact_phone","+34 123 456 789"),contactAddress:t.getConfig("contact_address","Calle Principal 123, Madrid"),officeHours:t.getConfig("office_hours","Lunes a Viernes: 9:00 - 18:00"),socialFacebook:t.getConfig("social_facebook",""),socialTwitter:t.getConfig("social_twitter",""),socialLinkedin:t.getConfig("social_linkedin",""),socialInstagram:t.getConfig("social_instagram",""),maintenanceMode:t.getBooleanConfig("maintenance_mode",!1),defaultLanguage:t.getConfig("default_language","es"),timezone:t.getConfig("timezone","Europe/Madrid"),dateFormat:t.getConfig("date_format","DD/MM/YYYY"),menuItems:r.menuItems,menuOrientation:r.orientation,loading:t.loading||r.loading,error:t.error||r.error,updateSiteConfig:t.updateConfig,refreshSiteConfig:t.refresh,refreshMenuConfig:r.refresh}},Gw=()=>{const{user:e,logout:t}=Te(),[r,a]=g.useState(!1),[s,o]=g.useState([]),[l,i]=g.useState("© 2024 Despacho Legal. Todos los derechos reservados."),[c,d]=g.useState(0),u=(e==null?void 0:e.role)==="ADMIN",m=(e==null?void 0:e.role)==="ABOGADO",f=(e==null?void 0:e.role)==="CLIENTE",{siteName:x,logoUrl:b,primaryColor:y,menuItems:v,menuOrientation:p,headerFixed:h,footerVisible:E,loading:w}=aT((e==null?void 0:e.role)||"CLIENTE"),N={backgroundColor:y},S=h?"fixed top-0 w-full z-50":"",C=A=>{if(A.children&&A.children.length>0)return n.createElement("div",{className:"relative"},n.createElement("button",{className:"hover:text-blue-200 px-2 py-1 rounded focus:outline-none flex items-center",onClick:()=>a(P=>!P),onBlur:()=>setTimeout(()=>a(!1),150)},A.icon&&n.createElement("span",{className:"mr-1"},A.icon),A.label,n.createElement("svg",{className:"inline w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"}))),r&&n.createElement("div",{className:"absolute right-0 mt-2 w-56 bg-white text-gray-900 rounded shadow-lg z-50"},A.children.map((P,I)=>n.createElement(Ne,{key:P.id||P.label||`child-${I}`,to:P.url,className:"block px-4 py-2 hover:bg-blue-100",onClick:()=>a(!1)},P.icon&&n.createElement("span",{className:"mr-2"},P.icon),P.label))));const $=A.url&&A.url.includes("/chat");return n.createElement(Ne,{to:A.url,className:"hover:text-blue-200 flex items-center relative",target:A.isExternal?"_blank":void 0,rel:A.isExternal?"noopener noreferrer":void 0},A.icon&&n.createElement("span",{className:"mr-1"},A.icon),A.label,$&&c>0&&n.createElement("span",{className:"ml-1 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-600 text-white absolute -top-2 -right-4"},c))},D=w?u?[{label:"Admin Dashboard",url:"/admin/dashboard",icon:"🏠"},{label:"Usuarios",url:"/admin/users",icon:"👥"},{label:"Expedientes",url:"/admin/cases",icon:"📋"},{label:"Citas",url:"/admin/appointments",icon:"📅"},{label:"Tareas",url:"/admin/tasks",icon:"✅"},{label:"Documentos",url:"/admin/documents",icon:"📄"},{label:"Reportes",url:"/admin/reports",icon:"📊"},{label:"Home Builder",url:"/admin/home-builder",icon:"🎨"}]:m?[{label:"Dashboard",url:"/dashboard",icon:"🏠"},{label:"Mis Expedientes",url:"/lawyer/cases",icon:"📋"},{label:"Citas",url:"/lawyer/appointments",icon:"📅"},{label:"Tareas",url:"/lawyer/tasks",icon:"✅"},{label:"Chat",url:"/lawyer/chat",icon:"💬"},{label:"Reportes",url:"/lawyer/reports",icon:"📊"},{label:"Facturación",url:"/lawyer/facturacion",icon:"🧾",children:[{label:"Provisión de Fondos",url:"/lawyer/provisiones",icon:"💰"},{label:"Facturación Electrónica",url:"/lawyer/facturacion",icon:"📄"}]}]:f?[{label:"Dashboard",url:"/dashboard",icon:"🏠"},{label:"Mis Expedientes",url:"/client/cases",icon:"📋"},{label:"Provisiones",url:"/client/provisiones",icon:"💰"},{label:"Mis Citas",url:"/client/appointments",icon:"📅"},{label:"Chat",url:"/client/chat",icon:"💬"}]:[]:v;g.useEffect(()=>{(async()=>{try{const[$,P]=await Promise.all([J.get("/parametros/contact"),J.get("/parametros/legal")]);o($.data);const I=P.data.find(L=>L.clave==="COPYRIGHT_TEXT");I&&i(I.valor)}catch($){console.error("Error fetching contact and legal params:",$)}})()},[]),g.useEffect(()=>{e&&(async()=>{try{const $=localStorage.getItem("token");if(!e)return;const P=await J.get("/chat/unread-count",{headers:{Authorization:`Bearer ${$}`}});d(P.data.count||0)}catch{d(0)}})()},[e]);const O=A=>{const $=s.find(P=>P.clave===A);return $?$.valor:""};return n.createElement("div",{className:"min-h-screen flex flex-col"},n.createElement("nav",{className:`text-white ${S}`,style:N},n.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"flex items-center justify-between h-16"},n.createElement("div",{className:"flex items-center"},n.createElement(Ne,{to:"/",className:"text-xl font-bold flex items-center"},b&&n.createElement("img",{src:b,alt:x,className:"h-8 w-auto mr-2",onError:A=>{A.currentTarget.style.display="none"}}),x)),n.createElement("div",{className:"flex items-center space-x-4 relative"},e?n.createElement(n.Fragment,null,n.createElement("div",{className:`flex items-center space-x-4 ${p==="vertical"?"flex-col":""}`},D.map((A,$)=>n.createElement(n.Fragment,{key:A.id||A.label||`menu-item-${$}`},C(A)))),n.createElement("span",{className:"text-sm font-medium text-white bg-blue-900 rounded px-3 py-1"},e.name," ",e.email&&n.createElement("span",{className:"text-gray-300"},"(",e.email,")")),n.createElement("button",{onClick:t,className:"hover:text-blue-200"},"Cerrar Sesión")):n.createElement(n.Fragment,null,n.createElement(Ne,{to:"/login",className:"hover:text-blue-200"},"Iniciar Sesión"),n.createElement(Ne,{to:"/register",className:"hover:text-blue-200"},"Registro")))))),h&&n.createElement("div",{className:"h-16"}),e&&n.createElement(tT,null),n.createElement("main",{className:"flex-grow"},n.createElement("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},n.createElement(Ph,null))),E&&n.createElement("footer",{className:"bg-gray-800 text-white"},n.createElement("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8"},n.createElement("div",null,n.createElement("h3",{className:"text-lg font-semibold mb-4"},"Contacto"),n.createElement("div",{className:"space-y-2 text-sm"},O("CONTACT_INFO")&&n.createElement("p",{className:"text-gray-300 mb-2"},O("CONTACT_INFO")),O("CONTACT_EMAIL")&&n.createElement("p",null,"📧 ",O("CONTACT_EMAIL")),O("CONTACT_PHONE_PREFIX")&&O("CONTACT_PHONE")&&n.createElement("p",null,"📞 ",O("CONTACT_PHONE_PREFIX")," ",O("CONTACT_PHONE")))),n.createElement("div",null,n.createElement("h3",{className:"text-lg font-semibold mb-4"},"Enlaces"),n.createElement("div",{className:"space-y-2 text-sm"},n.createElement(Ne,{to:"/privacidad",className:"hover:text-gray-300 block"},"Política de Privacidad"),n.createElement(Ne,{to:"/terminos",className:"hover:text-gray-300 block"},"Términos de Servicio"),n.createElement(Ne,{to:"/cookies",className:"hover:text-gray-300 block"},"Política de Cookies"))),n.createElement("div",null,n.createElement("h3",{className:"text-lg font-semibold mb-4"},"Síguenos"),n.createElement("div",{className:"flex space-x-4"},O("SOCIAL_FACEBOOK")&&n.createElement("a",{href:O("SOCIAL_FACEBOOK"),target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-white"},"📘 Facebook"),O("SOCIAL_TWITTER")&&n.createElement("a",{href:O("SOCIAL_TWITTER"),target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-white"},"🐦 Twitter"),O("SOCIAL_LINKEDIN")&&n.createElement("a",{href:O("SOCIAL_LINKEDIN"),target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-white"},"💼 LinkedIn"),O("SOCIAL_INSTAGRAM")&&n.createElement("a",{href:O("SOCIAL_INSTAGRAM"),target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-white"},"📷 Instagram")))),n.createElement("div",{className:"mt-8 pt-8 border-t border-gray-700 text-center"},n.createElement("p",null,l)))),!e&&n.createElement(eT,null))},Kw=({component:e})=>{console.log("ComponentRenderer - Rendering component:",e.type,e.props);const t=()=>{switch(e.type){case"hero-banner":return n.createElement(sT,{props:e.props});case"service-cards":return n.createElement(oT,{props:e.props});case"contact-form":return n.createElement(lT,{props:e.props});case"testimonials":return n.createElement(iT,{props:e.props});case"stats":return n.createElement(cT,{props:e.props});case"text-block":return n.createElement(uT,{props:e.props});case"image-gallery":return n.createElement(dT,{props:e.props});case"map":return n.createElement(mT,{props:e.props});case"divider":return n.createElement(fT,{props:e.props});case"spacer":return n.createElement(pT,{props:e.props});default:return n.createElement("div",{className:"p-4 bg-red-100 border border-red-300 rounded"},n.createElement("p",{className:"text-red-700"},"Componente no reconocido: ",e.type))}};return n.createElement("div",{className:"component-renderer"},t())},sT=({props:e})=>n.createElement("div",{className:"relative bg-gradient-to-r from-blue-600 to-purple-700 text-white p-8 rounded-lg"},n.createElement("div",{className:"text-center"},n.createElement("h1",{className:"text-4xl font-bold mb-4"},e.title||"Banner Principal"),n.createElement("p",{className:"text-xl mb-6 opacity-90"},e.subtitle||"Subtítulo del banner"),n.createElement("a",{href:e.ctaLink||"/contact",className:"inline-block bg-white text-blue-600 px-6 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors"},e.ctaText||"Consultar Ahora"))),oT=({props:e})=>n.createElement("div",{className:"bg-white p-6 rounded-lg border"},n.createElement("h2",{className:"text-2xl font-bold text-center mb-6"},e.title||"Nuestros Servicios"),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6"},(e.services||[]).map((t,r)=>n.createElement("div",{key:r,className:"text-center p-4 border rounded-lg hover:shadow-md transition-shadow"},n.createElement("div",{className:"text-4xl mb-3"},t.icon||"⚖️"),n.createElement("h3",{className:"text-lg font-semibold mb-2"},t.title||"Servicio"),n.createElement("p",{className:"text-gray-600"},t.description||"Descripción del servicio"))))),lT=({props:e})=>n.createElement("div",{className:"bg-white p-6 rounded-lg border"},n.createElement("h2",{className:"text-2xl font-bold text-center mb-4"},e.title||"Contáctanos"),n.createElement("p",{className:"text-center text-gray-600 mb-6"},e.subtitle||"Estamos aquí para ayudarte"),n.createElement("form",{className:"space-y-4"},n.createElement("input",{type:"text",placeholder:"Nombre",className:"w-full p-3 border rounded-lg",disabled:!0}),n.createElement("input",{type:"email",placeholder:"Email",className:"w-full p-3 border rounded-lg",disabled:!0}),n.createElement("input",{type:"tel",placeholder:"Teléfono",className:"w-full p-3 border rounded-lg",disabled:!0}),n.createElement("textarea",{placeholder:"Mensaje",rows:4,className:"w-full p-3 border rounded-lg",disabled:!0}),n.createElement("button",{type:"submit",className:"w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors",disabled:!0},"Enviar Mensaje"))),iT=({props:e})=>n.createElement("div",{className:"bg-gray-50 p-6 rounded-lg"},n.createElement("h2",{className:"text-2xl font-bold text-center mb-6"},e.title||"Lo que dicen nuestros clientes"),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},(e.testimonials||[]).map((t,r)=>n.createElement("div",{key:r,className:"bg-white p-4 rounded-lg shadow-sm"},n.createElement("div",{className:"flex items-center mb-3"},n.createElement("div",{className:"text-yellow-400 text-lg"},"★★★★★")),n.createElement("p",{className:"text-gray-700 mb-3"},'"',t.text||"Excelente servicio",'"'),n.createElement("p",{className:"font-semibold text-gray-900"},t.name||"Cliente"))))),cT=({props:e})=>n.createElement("div",{className:"bg-white p-6 rounded-lg border"},n.createElement("h2",{className:"text-2xl font-bold text-center mb-6"},e.title||"Nuestros Números"),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6"},(e.stats||[]).map((t,r)=>n.createElement("div",{key:r,className:"text-center"},n.createElement("div",{className:"text-3xl font-bold text-blue-600 mb-2"},t.value||"0"),n.createElement("div",{className:"text-gray-600"},t.label||"Estadística"))))),uT=({props:e})=>n.createElement("div",{className:`bg-white p-6 rounded-lg border text-${e.alignment||"left"}`},n.createElement("h2",{className:"text-2xl font-bold mb-4"},e.title||"Título del bloque"),n.createElement("p",{className:`text-gray-700 ${e.fontSize==="large"?"text-lg":e.fontSize==="small"?"text-sm":"text-base"}`},e.content||"Contenido del bloque de texto. Aquí puedes escribir cualquier información relevante.")),dT=({props:e})=>n.createElement("div",{className:"bg-white p-6 rounded-lg border"},n.createElement("h2",{className:"text-2xl font-bold text-center mb-6"},e.title||"Galería de Imágenes"),n.createElement("div",{className:`grid grid-cols-${e.columns||3} gap-4`},(e.images||[]).map((t,r)=>n.createElement("div",{key:r,className:"aspect-square bg-gray-200 rounded-lg flex items-center justify-center"},n.createElement("span",{className:"text-gray-500"},"🖼️ Imagen ",r+1))))),mT=({props:e})=>n.createElement("div",{className:"bg-white p-6 rounded-lg border"},n.createElement("h2",{className:"text-2xl font-bold text-center mb-4"},e.title||"Nuestra Ubicación"),n.createElement("div",{className:"bg-gray-200 h-64 rounded-lg flex items-center justify-center"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-4xl mb-2"},"🗺️"),n.createElement("p",{className:"text-gray-600"},e.address||"Dirección del despacho")))),fT=({props:e})=>n.createElement("div",{className:"flex items-center justify-center py-4"},n.createElement("div",{className:`w-full h-${e.thickness||1} bg-${e.color||"gray-300"}`,style:{backgroundColor:e.color||"#e5e7eb"}})),pT=({props:e})=>n.createElement("div",{style:{height:`${e.height||40}px`}}),Vh=ye.create({baseURL:"http://localhost:8000"});Vh.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e});Vh.interceptors.response.use(e=>e,e=>(console.error("Chatbot API Error:",e),Promise.reject(e)));const hT=()=>{const[e,t]=g.useState(!1),[r,a]=g.useState([]),[s,o]=g.useState(""),[l,i]=g.useState(!1),[c,d]=g.useState(null),u=g.useRef(null);g.useEffect(()=>{e&&r.length===0&&a([{text:"¡Hola! Soy el asistente virtual del despacho legal. ¿En qué puedo ayudarte hoy? Puedo informarte sobre nuestros servicios, honorarios, horarios de atención o ayudarte a agendar una cita.",isUser:!1,timestamp:new Date().toISOString()}])},[e,r.length]),g.useEffect(()=>{m()},[r]);const m=()=>{var y;(y=u.current)==null||y.scrollIntoView({behavior:"smooth"})},f=async y=>{if(y.preventDefault(),!s.trim()||l)return;const v=s.trim();o(""),i(!0),d(null);const p={text:v,isUser:!0,timestamp:new Date().toISOString()};a(h=>[...h,p]);try{const E={text:(await Vh.post("/chat",{text:v,language:"es"})).data.response,isUser:!1,timestamp:new Date().toISOString()};a(w=>[...w,E])}catch(h){console.error("Error sending message:",h),d("Error al enviar el mensaje. Por favor, intenta de nuevo.");const E={text:"Lo siento, estoy teniendo problemas para procesar tu mensaje. Por favor, intenta de nuevo o contacta directamente al despacho.",isUser:!1,timestamp:new Date().toISOString()};a(w=>[...w,E])}finally{i(!1)}},x=()=>{t(!e),e||d(null)},b=y=>new Date(y).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"});return n.createElement("div",{className:"fixed bottom-4 right-4 z-50"},n.createElement("button",{onClick:x,className:"bg-blue-600 hover:bg-blue-700 text-white rounded-full p-4 shadow-lg transition-all duration-200 transform hover:scale-110",title:"Chat del despacho - ¡Consulta gratis!"},n.createElement("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"}))),e&&n.createElement("div",{className:"absolute bottom-16 right-0 w-96 h-96 bg-white rounded-lg shadow-xl border border-gray-200 flex flex-col"},n.createElement("div",{className:"bg-blue-600 text-white p-4 rounded-t-lg"},n.createElement("div",{className:"flex justify-between items-center"},n.createElement("div",null,n.createElement("h3",{className:"font-semibold"},"Asistente Virtual"),n.createElement("p",{className:"text-sm opacity-90"},"Despacho Legal García & Asociados"),n.createElement("p",{className:"text-xs opacity-75"},"Consulta inicial gratuita")),n.createElement("button",{onClick:x,className:"text-white hover:text-gray-200"},n.createElement("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}))))),n.createElement("div",{className:"flex-1 overflow-y-auto p-4 space-y-3"},r.map((y,v)=>n.createElement("div",{key:v,className:`flex ${y.isUser?"justify-end":"justify-start"}`},n.createElement("div",{className:`max-w-xs px-3 py-2 rounded-lg ${y.isUser?"bg-blue-600 text-white":"bg-gray-100 text-gray-800"}`},n.createElement("p",{className:"text-sm whitespace-pre-wrap"},y.text),n.createElement("p",{className:`text-xs mt-1 ${y.isUser?"text-blue-100":"text-gray-500"}`},b(y.timestamp))))),l&&n.createElement("div",{className:"flex justify-start"},n.createElement("div",{className:"bg-gray-100 text-gray-800 max-w-xs px-3 py-2 rounded-lg"},n.createElement("div",{className:"flex space-x-1"},n.createElement("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),n.createElement("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),n.createElement("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})))),c&&n.createElement("div",{className:"flex justify-start"},n.createElement("div",{className:"bg-red-100 text-red-800 max-w-xs px-3 py-2 rounded-lg"},n.createElement("p",{className:"text-sm"},c))),n.createElement("div",{ref:u})),n.createElement("div",{className:"p-4 border-t border-gray-200"},n.createElement("div",{className:"mb-3 flex flex-wrap gap-2"},["Honorarios","Servicios","Cita","Horarios"].map(y=>n.createElement("button",{key:y,onClick:()=>o(y),className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded hover:bg-blue-200 transition-colors"},y))),n.createElement("form",{onSubmit:f,className:"flex space-x-2"},n.createElement("input",{type:"text",value:s,onChange:y=>o(y.target.value),placeholder:"Escribe tu consulta...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:l}),n.createElement("button",{type:"submit",disabled:l||!s.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"},n.createElement("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})))))))},gT=()=>{const[e,t]=g.useState(!0);return e?n.createElement("div",{className:"fixed bottom-20 right-4 z-40 bg-blue-600 text-white p-4 rounded-lg shadow-lg max-w-sm animate-pulse"},n.createElement("div",{className:"flex items-start space-x-3"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"}))),n.createElement("div",{className:"flex-1"},n.createElement("h4",{className:"font-semibold text-sm"},"¿Necesitas ayuda legal?"),n.createElement("p",{className:"text-xs opacity-90 mt-1"},"Nuestro asistente virtual está aquí para ayudarte. Consulta gratuita disponible.")),n.createElement("button",{onClick:()=>t(!1),className:"text-white hover:text-gray-200"},n.createElement("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}))))):null},vT=()=>{const[e,t]=g.useState(null),[r,a]=g.useState(!0),[s,o]=g.useState(null),{user:l}=Te();return g.useEffect(()=>{(async()=>{try{a(!0);const c=await fetch("/api/layouts/home");if(c.ok){const d=await c.json();t(d)}else if(c.status===404)t(Wv());else throw new Error("Error al cargar el layout")}catch(c){console.error("Error fetching layout:",c),o("Error al cargar la página"),t(Wv())}finally{a(!1)}})()},[]),r?n.createElement("div",{className:"min-h-screen flex items-center justify-center"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.createElement("p",{className:"text-gray-600"},"Cargando..."))):s&&!e?n.createElement("div",{className:"min-h-screen flex items-center justify-center"},n.createElement("div",{className:"text-center"},n.createElement("h2",{className:"text-2xl font-bold text-red-600 mb-4"},"Error"),n.createElement("p",{className:"text-gray-600"},s))):e?n.createElement("div",{className:"min-h-screen"},e.components.map(i=>n.createElement("div",{key:i.id},n.createElement(Kw,{component:i}))),!l&&n.createElement(n.Fragment,null,n.createElement(hT,null),n.createElement(gT,null))):n.createElement("div",{className:"min-h-screen flex items-center justify-center"},n.createElement("div",{className:"text-center"},n.createElement("h2",{className:"text-2xl font-bold text-gray-600 mb-4"},"Página no encontrada"),n.createElement("p",{className:"text-gray-500"},"No hay contenido configurado para esta página.")))},Wv=()=>({id:"default-home",name:"Home Page",components:[{id:"default-hero",type:"hero-banner",props:{title:"Bienvenido a Nuestro Despacho Legal",subtitle:"Servicios legales profesionales y confiables para proteger sus derechos",backgroundImage:"/images/hero-bg.jpg",ctaText:"Consultar Ahora",ctaLink:"/contact"},order:0},{id:"default-services",type:"service-cards",props:{title:"Nuestros Servicios",services:[{title:"Derecho Civil",description:"Asesoría especializada en casos civiles y comerciales",icon:"⚖️"},{title:"Derecho Laboral",description:"Protección de sus derechos laborales y reclamaciones",icon:"👥"},{title:"Derecho Familiar",description:"Divorcios, custodia y asuntos familiares",icon:"👨‍👩‍👧‍👦"}]},order:1},{id:"default-stats",type:"stats",props:{title:"Nuestros Números",stats:[{label:"Casos Exitosos",value:"500+",icon:"✅"},{label:"Años de Experiencia",value:"15",icon:"📅"},{label:"Clientes Satisfechos",value:"1000+",icon:"👥"}]},order:2},{id:"default-contact",type:"contact-form",props:{title:"Contáctanos",subtitle:"Estamos aquí para ayudarte con tu caso legal",fields:["nombre","email","telefono","mensaje"],submitText:"Enviar Consulta"},order:3}],version:1,lastModified:new Date().toISOString()}),yT=()=>n.createElement(vT,null),ET=()=>{const[e,t]=g.useState({nombre:"",email:"",telefono:"",asunto:"",mensaje:""}),[r,a]=g.useState(!1),[s,o]=g.useState("idle"),l=c=>{const{name:d,value:u}=c.target;t(m=>({...m,[d]:u}))},i=async c=>{c.preventDefault(),a(!0),o("idle");try{if((await fetch("/api/contact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,ip:"unknown",userAgent:navigator.userAgent})})).ok)o("success"),t({nombre:"",email:"",telefono:"",asunto:"",mensaje:""});else throw new Error("Error en el servidor")}catch(d){console.error("Error al enviar formulario:",d),o("error")}finally{a(!1)}};return n.createElement(Gw,null,n.createElement("div",{className:"min-h-screen bg-gray-50 py-12"},n.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"text-center mb-12"},n.createElement("h1",{className:"text-4xl font-bold text-gray-900 mb-4"},"Contáctanos"),n.createElement("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto"},"Estamos aquí para ayudarte. Nuestros abogados especialistas están listos para atender tu consulta y brindarte la asesoría legal que necesitas.")),n.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12"},n.createElement("div",{className:"space-y-8"},n.createElement("div",{className:"bg-white rounded-lg shadow-sm border p-8"},n.createElement("h2",{className:"text-2xl font-semibold text-gray-900 mb-6"},"Información de Contacto"),n.createElement("div",{className:"space-y-6"},n.createElement("div",{className:"flex items-start space-x-4"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center"},n.createElement("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})))),n.createElement("div",null,n.createElement("h3",{className:"text-lg font-medium text-gray-900"},"Dirección"),n.createElement("p",{className:"text-gray-600 mt-1"},"Calle Principal 123",n.createElement("br",null),"Madrid, 28001",n.createElement("br",null),"España"))),n.createElement("div",{className:"flex items-start space-x-4"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center"},n.createElement("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})))),n.createElement("div",null,n.createElement("h3",{className:"text-lg font-medium text-gray-900"},"Teléfono"),n.createElement("p",{className:"text-gray-600 mt-1"},n.createElement("a",{href:"tel:+34612345678",className:"hover:text-blue-600"},"+34 612 345 678")))),n.createElement("div",{className:"flex items-start space-x-4"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center"},n.createElement("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})))),n.createElement("div",null,n.createElement("h3",{className:"text-lg font-medium text-gray-900"},"Email"),n.createElement("p",{className:"text-gray-600 mt-1"},n.createElement("a",{href:"mailto:info@despachoabogados.com",className:"hover:text-blue-600"},"info@despachoabogados.com")))),n.createElement("div",{className:"flex items-start space-x-4"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center"},n.createElement("svg",{className:"w-6 h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})))),n.createElement("div",null,n.createElement("h3",{className:"text-lg font-medium text-gray-900"},"Horario de Atención"),n.createElement("p",{className:"text-gray-600 mt-1"},"Lunes - Viernes: 9:00 - 18:00",n.createElement("br",null),"Sábados: 9:00 - 14:00",n.createElement("br",null),"Domingos: Cerrado"))))),n.createElement("div",{className:"bg-white rounded-lg shadow-sm border p-8"},n.createElement("h2",{className:"text-2xl font-semibold text-gray-900 mb-6"},"Servicios Destacados"),n.createElement("div",{className:"space-y-4"},n.createElement("div",{className:"flex items-center space-x-3"},n.createElement("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center"},n.createElement("span",{className:"text-blue-600 text-sm font-semibold"},"⚖️")),n.createElement("span",{className:"text-gray-700"},"Derecho Civil")),n.createElement("div",{className:"flex items-center space-x-3"},n.createElement("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center"},n.createElement("span",{className:"text-green-600 text-sm font-semibold"},"👥")),n.createElement("span",{className:"text-gray-700"},"Derecho Laboral")),n.createElement("div",{className:"flex items-center space-x-3"},n.createElement("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center"},n.createElement("span",{className:"text-purple-600 text-sm font-semibold"},"👨‍👩‍👧‍👦")),n.createElement("span",{className:"text-gray-700"},"Derecho Familiar")),n.createElement("div",{className:"flex items-center space-x-3"},n.createElement("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center"},n.createElement("span",{className:"text-orange-600 text-sm font-semibold"},"🏢")),n.createElement("span",{className:"text-gray-700"},"Derecho Empresarial"))))),n.createElement("div",{className:"bg-white rounded-lg shadow-sm border p-8"},n.createElement("h2",{className:"text-2xl font-semibold text-gray-900 mb-6"},"Solicita tu Consulta Gratuita"),s==="success"&&n.createElement("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg"},n.createElement("div",{className:"flex"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor"},n.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"}))),n.createElement("div",{className:"ml-3"},n.createElement("p",{className:"text-sm text-green-800"},"¡Gracias por tu mensaje! Nos pondremos en contacto contigo en las próximas 24 horas.")))),s==="error"&&n.createElement("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg"},n.createElement("div",{className:"flex"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},n.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))),n.createElement("div",{className:"ml-3"},n.createElement("p",{className:"text-sm text-red-800"},"Ha ocurrido un error al enviar tu mensaje. Por favor, inténtalo de nuevo.")))),n.createElement("form",{onSubmit:i,className:"space-y-6"},n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},n.createElement("div",null,n.createElement("label",{htmlFor:"nombre",className:"block text-sm font-medium text-gray-700 mb-2"},"Nombre Completo *"),n.createElement("input",{type:"text",id:"nombre",name:"nombre",value:e.nombre,onChange:l,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Tu nombre completo"})),n.createElement("div",null,n.createElement("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2"},"Email *"),n.createElement("input",{type:"email",id:"email",name:"email",value:e.email,onChange:l,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"tu@email.com"}))),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},n.createElement("div",null,n.createElement("label",{htmlFor:"telefono",className:"block text-sm font-medium text-gray-700 mb-2"},"Teléfono"),n.createElement("input",{type:"tel",id:"telefono",name:"telefono",value:e.telefono,onChange:l,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"+34 612 345 678"})),n.createElement("div",null,n.createElement("label",{htmlFor:"asunto",className:"block text-sm font-medium text-gray-700 mb-2"},"Asunto *"),n.createElement("select",{id:"asunto",name:"asunto",value:e.asunto,onChange:l,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},n.createElement("option",{value:""},"Selecciona un asunto"),n.createElement("option",{value:"consulta-civil"},"Consulta - Derecho Civil"),n.createElement("option",{value:"consulta-laboral"},"Consulta - Derecho Laboral"),n.createElement("option",{value:"consulta-familiar"},"Consulta - Derecho Familiar"),n.createElement("option",{value:"consulta-empresarial"},"Consulta - Derecho Empresarial"),n.createElement("option",{value:"contratos"},"Elaboración de Contratos"),n.createElement("option",{value:"herencias"},"Gestión de Herencias"),n.createElement("option",{value:"otro"},"Otro")))),n.createElement("div",null,n.createElement("label",{htmlFor:"mensaje",className:"block text-sm font-medium text-gray-700 mb-2"},"Mensaje *"),n.createElement("textarea",{id:"mensaje",name:"mensaje",value:e.mensaje,onChange:l,required:!0,rows:6,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Describe tu consulta o situación legal..."})),n.createElement("div",{className:"flex items-start space-x-3"},n.createElement("input",{type:"checkbox",id:"privacidad",required:!0,className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),n.createElement("label",{htmlFor:"privacidad",className:"text-sm text-gray-600"},"Acepto la"," ",n.createElement("a",{href:"/privacidad",className:"text-blue-600 hover:text-blue-500"},"política de privacidad")," ","y el"," ",n.createElement("a",{href:"/terminos",className:"text-blue-600 hover:text-blue-500"},"tratamiento de datos personales"))),n.createElement("button",{type:"submit",disabled:r,className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},r?n.createElement("div",{className:"flex items-center justify-center"},n.createElement("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},n.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),"Enviando..."):"Enviar Consulta")))),n.createElement("div",{className:"mt-16"},n.createElement("div",{className:"bg-white rounded-lg shadow-sm border p-8"},n.createElement("h2",{className:"text-2xl font-semibold text-gray-900 mb-6 text-center"},"Nuestra Ubicación"),n.createElement("div",{className:"bg-gray-200 h-96 rounded-lg flex items-center justify-center"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-6xl mb-4"},"🗺️"),n.createElement("p",{className:"text-gray-600 text-lg"},"Calle Principal 123, Madrid, 28001"),n.createElement("p",{className:"text-gray-500 mt-2"},"Mapa interactivo (integrado con Google Maps)"))))))))},_m=()=>{const{user:e}=Te(),t=qr(),[r,a]=g.useState({totalCases:0,activeCases:0,pendingAppointments:0,recentDocuments:0,totalUsers:0}),[s,o]=g.useState(!0),[l,i]=g.useState(null),[c,d]=g.useState([]);g.useEffect(()=>{e&&window.location.pathname==="/dashboard"&&(e.role==="ADMIN"?t("/admin/dashboard",{replace:!0}):e.role==="ABOGADO"?t("/lawyer/dashboard",{replace:!0}):e.role==="CLIENTE"&&t("/client/dashboard",{replace:!0}))},[e,t]);const u=(v,p)=>{if(v===0)return{value:"0%",positive:!1,neutral:!0};const h=Math.random()*20+5;return Math.random()>.3?{value:`+${h.toFixed(1)}%`,positive:!0,neutral:!1}:{value:`-${(h*.5).toFixed(1)}%`,positive:!1,neutral:!1}},m=()=>{const v=u(r.totalCases),p=u(r.activeCases),h=u(r.pendingAppointments),E=u(r.recentDocuments);return{cases:v,activeCases:p,appointments:h,documents:E}};g.useEffect(()=>{if(console.log("Dashboard useEffect: user",e),!e)return;(async()=>{o(!0),i(null);try{const p=localStorage.getItem("token"),h=[J.get("/cases/stats"),J.get("/appointments"),J.get("/documents/stats")];(e==null?void 0:e.role)==="ADMIN"&&h.push(J.get("/users")),h.push(J.get("/cases/recent")),(e==null?void 0:e.role)==="ABOGADO"&&h.push(J.get("/cases/recent-activities"));const E=await Promise.allSettled(h);E.forEach((F,T)=>{F.status==="fulfilled"&&"value"in F?console.log(`Dashboard stats result[${T}]`,F.value.data):F.status==="rejected"&&"reason"in F&&console.error(`Dashboard stats error[${T}]`,F.reason)});const w=E[0].status==="fulfilled"?E[0].value.data:{},N=E[1].status==="fulfilled"?E[1].value.data:[],S=E[2].status==="fulfilled"?E[2].value.data:{},C=(e==null?void 0:e.role)==="ADMIN"&&E[3]&&E[3].status==="fulfilled"?E[3].value.data:[],k=E[(e==null?void 0:e.role)==="ADMIN"?4:3]&&E[(e==null?void 0:e.role)==="ADMIN"?4:3].status==="fulfilled"?E[(e==null?void 0:e.role)==="ADMIN"?4:3].value.data:[],D=(e==null?void 0:e.role)==="ABOGADO"&&E[4]&&E[4].status==="fulfilled"?E[4].value.data:null;let O=0,A=0,$=0,P=0,I=0;if(((e==null?void 0:e.role)==="ADMIN"||(e==null?void 0:e.role)==="ABOGADO"||(e==null?void 0:e.role)==="CLIENTE")&&(O=w.total||0,A=(w.abiertos||0)+(w.enProceso||0)),Array.isArray(N)){const F=new Date;(e==null?void 0:e.role)==="ADMIN"?$=N.filter(T=>new Date(T.date)>F).length:((e==null?void 0:e.role)==="ABOGADO"||(e==null?void 0:e.role)==="CLIENTE")&&($=N.filter(T=>{const M=new Date(T.date);return M.getDate()===F.getDate()&&M.getMonth()===F.getMonth()&&M.getFullYear()===F.getFullYear()}).length)}S&&typeof S.total=="number"&&(P=S.total),(e==null?void 0:e.role)==="ADMIN"&&Array.isArray(C)&&(I=C.length),a({totalCases:O,activeCases:A,pendingAppointments:$,recentDocuments:P,totalUsers:I});const L=[];(e==null?void 0:e.role)==="ABOGADO"&&D?(D.cases&&D.cases.length>0&&D.cases.forEach(F=>{L.push({action:`Expediente: ${F.title}`,time:F.createdAt,type:"case",id:F.id,link:`/lawyer/cases/${F.id}`,entityType:"Expediente"})}),D.tasks&&D.tasks.length>0&&D.tasks.forEach(F=>{var V,K,z;const T=((K=(V=F.client)==null?void 0:V.user)==null?void 0:K.name)||"Cliente",M=(z=F.expediente)!=null&&z.title?` - ${F.expediente.title}`:"";L.push({action:`Tarea: ${F.title} (${T}${M})`,time:new Date(F.createdAt).toLocaleDateString(),type:"task",id:F.id,link:"/lawyer/tasks",entityType:"task"})}),D.appointments&&D.appointments.length>0&&D.appointments.forEach(F=>{var M,V;const T=((V=(M=F.client)==null?void 0:M.user)==null?void 0:V.name)||"Cliente";L.push({action:`Cita con ${T} - ${new Date(F.date).toLocaleDateString()}`,time:new Date(F.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),type:"appointment",id:F.id,link:"/lawyer/appointments",entityType:"appointment"})}),D.provisions&&D.provisions.length>0&&D.provisions.forEach(F=>{var V,K,z;const T=((K=(V=F.client)==null?void 0:V.user)==null?void 0:K.name)||"Cliente",M=(z=F.expediente)!=null&&z.title?` - ${F.expediente.title}`:"";L.push({action:`Provisión de fondos: ${F.amount}€ (${T}${M})`,time:new Date(F.createdAt).toLocaleDateString(),type:"provision",id:F.id,link:"/lawyer/provisiones",entityType:"provision"})})):(e==null?void 0:e.role)==="CLIENTE"?(Array.isArray(k)&&k.length>0&&k.slice(0,2).forEach(F=>{L.push({action:`Expediente: ${F.title}`,time:new Date(F.createdAt).toLocaleDateString(),type:"case",id:F.id,link:`/client/cases/${F.id}`,entityType:"case"})}),Array.isArray(N)&&N.length>0&&N.filter(T=>new Date(T.date)>new Date).slice(0,2).forEach(T=>{var V;const M=((V=T.lawyer)==null?void 0:V.name)||"Abogado";L.push({action:`Cita con ${M} - ${new Date(T.date).toLocaleDateString()}`,time:new Date(T.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),type:"appointment",id:T.id,link:"/client/appointments",entityType:"appointment"})}),S&&S.total>0&&L.push({action:`${S.total} documentos disponibles`,time:"Total",type:"document",link:"/client/documents",entityType:"document"}),r.totalCases>0&&L.push({action:"Ver mis provisiones de fondos",time:"Acceso directo",type:"provision",link:"/client/provisiones",entityType:"provision"})):(Array.isArray(k)&&k.length>0&&k.slice(0,3).forEach(F=>{L.push({action:`Expediente: ${F.title}`,time:new Date(F.createdAt).toLocaleDateString(),type:"case",id:F.id,link:(e==null?void 0:e.role)==="ADMIN"?`/admin/cases/${F.id}`:(e==null?void 0:e.role)==="ABOGADO"?`/lawyer/cases/${F.id}`:`/client/cases/${F.id}`,entityType:"case"})}),Array.isArray(N)&&N.length>0&&N.filter(T=>new Date(T.date)>new Date).slice(0,2).forEach(T=>{var M,V;L.push({action:`Cita con ${((V=(M=T.client)==null?void 0:M.user)==null?void 0:V.name)||"Cliente"} - ${new Date(T.date).toLocaleDateString()}`,time:new Date(T.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),type:"appointment",id:T.id,link:(e==null?void 0:e.role)==="ADMIN"?`/admin/appointments/${T.id}`:(e==null?void 0:e.role)==="ABOGADO"?"/lawyer/appointments":"/client/appointments",entityType:"appointment"})}),S&&S.total>0&&L.push({action:`${S.total} documentos en el sistema`,time:"Total",type:"document",link:(e==null?void 0:e.role)==="ADMIN"?"/admin/documents":(e==null?void 0:e.role)==="ABOGADO"?"/lawyer/documents":"/client/documents",entityType:"document"}),(e==null?void 0:e.role)==="ADMIN"&&I>0&&L.push({action:`${I} usuarios registrados`,time:"Total",type:"user",link:"/admin/users",entityType:"user"})),d(L.slice(0,4))}catch{i("Error al cargar las estadísticas del dashboard")}finally{o(!1)}})()},[e]);const f=()=>{const v=m();return n.createElement("div",{className:"space-y-6"},n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},n.createElement(_r,{title:"Total Usuarios",value:r.totalUsers,change:u(r.totalUsers).value,positive:u(r.totalUsers).positive,neutral:u(r.totalUsers).neutral}),n.createElement(_r,{title:"Expedientes Activos",value:r.activeCases,change:v.activeCases.value,positive:v.activeCases.positive,neutral:v.activeCases.neutral}),n.createElement(_r,{title:"Citas Pendientes",value:r.pendingAppointments,change:v.appointments.value,positive:v.appointments.positive,neutral:v.appointments.neutral}),n.createElement(_r,{title:"Documentos",value:r.recentDocuments,change:v.documents.value,positive:v.documents.positive,neutral:v.documents.neutral})),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},n.createElement(wt,{title:"Gestión de Usuarios",description:"Administrar usuarios, roles y permisos",icon:"👥",link:"/admin/users",color:"blue"}),n.createElement(wt,{title:"Todos los Expedientes",description:"Ver y gestionar todos los casos",icon:"📋",link:"/admin/cases",color:"green"}),n.createElement(wt,{title:"Reportes y Estadísticas",description:"Análisis y reportes del sistema",icon:"📊",link:"/admin/reports",color:"purple"}),n.createElement(wt,{title:"Configuración del Sistema",description:"Configurar parámetros generales",icon:"⚙️",link:"/admin/settings",color:"gray"}),n.createElement(wt,{title:"Auditoría",description:"Registros de actividad del sistema",icon:"🔍",link:"/admin/audit",color:"yellow"}),n.createElement(wt,{title:"Backup y Restauración",description:"Gestionar copias de seguridad",icon:"💾",link:"/admin/backup",color:"red"})),n.createElement(Om,{role:"ADMIN",activities:c}))},x=()=>{const v=m();return n.createElement("div",{className:"space-y-6"},n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},n.createElement(_r,{title:"Mis Casos",value:r.totalCases,change:v.cases.value,positive:v.cases.positive,neutral:v.cases.neutral}),n.createElement(_r,{title:"Casos Activos",value:r.activeCases,change:v.activeCases.value,positive:v.activeCases.positive,neutral:v.activeCases.neutral}),n.createElement(_r,{title:"Citas Hoy",value:r.pendingAppointments,change:v.appointments.value,positive:v.appointments.positive,neutral:v.appointments.neutral}),n.createElement(_r,{title:"Documentos",value:r.recentDocuments,change:v.documents.value,positive:v.documents.positive,neutral:v.documents.neutral})),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},n.createElement(wt,{title:"Mis Casos",description:"Gestionar casos asignados",icon:"📁",link:"/lawyer/cases",color:"blue"}),n.createElement(wt,{title:"Mis Clientes",description:"Ver información de clientes",icon:"👤",link:"/lawyer/clients",color:"green"}),n.createElement(wt,{title:"Provisión de Fondos",description:"Gestiona provisiones de fondos",icon:"💰",link:"/lawyer/provisiones",color:"blue"}),n.createElement(wt,{title:"Facturación Electrónica",description:"Gestiona y firma tus facturas",icon:"🧾",link:"/lawyer/facturacion",color:"green"}),n.createElement(wt,{title:"Calendario de Citas",description:"Programar y gestionar citas",icon:"📅",link:"/lawyer/appointments",color:"purple"}),n.createElement(wt,{title:"Documentos",description:"Gestionar documentos legales",icon:"📄",link:"/lawyer/documents",color:"yellow"}),n.createElement(wt,{title:"Tareas Pendientes",description:"Ver tareas y recordatorios",icon:"✅",link:"/lawyer/tasks",color:"red"}),n.createElement(wt,{title:"Reportes Personales",description:"Mis estadísticas y reportes",icon:"📊",link:"/lawyer/reports",color:"gray"})),n.createElement(Om,{role:"ABOGADO",activities:c}))},b=()=>{const v=m();return n.createElement("div",{className:"space-y-6"},n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},n.createElement(_r,{title:"Mis Expedientes",value:r.totalCases,change:v.cases.value,positive:v.cases.positive,neutral:v.cases.neutral}),n.createElement(_r,{title:"Casos Activos",value:r.activeCases,change:v.activeCases.value,positive:v.activeCases.positive,neutral:v.activeCases.neutral}),n.createElement(_r,{title:"Próxima Cita",value:r.pendingAppointments,change:v.appointments.value,positive:v.appointments.positive,neutral:v.appointments.neutral}),n.createElement(_r,{title:"Documentos",value:r.recentDocuments,change:v.documents.value,positive:v.documents.positive,neutral:v.documents.neutral})),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},n.createElement(wt,{title:"Mis Expedientes",description:"Ver el estado de mis casos",icon:"📋",link:"/client/cases",color:"blue"}),n.createElement(wt,{title:"Mis Documentos",description:"Acceder a documentos legales",icon:"📄",link:"/client/documents",color:"green"}),n.createElement(wt,{title:"Provisiones de Fondos",description:"Consulta tus provisiones de fondos",icon:"💰",link:"/client/provisiones",color:"blue"}),n.createElement(wt,{title:"Pagos y Facturas",description:"Gestiona tus pagos y facturas",icon:"🧾",link:"/client/payments",color:"green"}),n.createElement(wt,{title:"Programar Cita",description:"Agendar consulta con abogado",icon:"📅",link:"/client/appointments",color:"purple"}),n.createElement(wt,{title:"Chat con Abogado",description:"Comunicación directa",icon:"💬",link:"/client/chat",color:"yellow"}),n.createElement(wt,{title:"Perfil",description:"Actualizar información personal",icon:"👤",link:"/client/profile",color:"gray"})),n.createElement(Om,{role:"CLIENTE",activities:c}))},y=()=>{switch(e==null?void 0:e.role){case"ADMIN":return f();case"ABOGADO":return x();case"CLIENTE":return b();default:return n.createElement("div",null,"Acceso no autorizado")}};return s?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})):l?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-red-600 text-xl mb-4"},"Error"),n.createElement("div",{className:"text-gray-600"},l),n.createElement("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},"Reintentar"))):n.createElement("div",{className:"py-6"},n.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"mb-8"},n.createElement("h1",{className:"text-3xl font-bold text-gray-900"},"Bienvenido, ",e==null?void 0:e.name,(e==null?void 0:e.email)&&` (${e.email})`),n.createElement("p",{className:"mt-2 text-gray-600"},(e==null?void 0:e.role)==="ADMIN"&&"Panel de administración del sistema",(e==null?void 0:e.role)==="ABOGADO"&&"Gestiona tus casos y clientes",(e==null?void 0:e.role)==="CLIENTE"&&"Sigue el progreso de tus casos legales")),y()))},_r=({title:e,value:t,change:r,positive:a,negative:s,neutral:o})=>n.createElement("div",{className:"bg-white overflow-hidden shadow rounded-lg"},n.createElement("div",{className:"p-5"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"text-2xl font-bold text-gray-900"},t)),n.createElement("div",{className:"ml-5 w-0 flex-1"},n.createElement("dl",null,n.createElement("dt",{className:"text-sm font-medium text-gray-500 truncate"},e),n.createElement("dd",{className:"flex items-baseline"},n.createElement("div",{className:`text-sm font-semibold ${a?"text-green-600":s?"text-red-600":"text-gray-500"}`},r))))))),wt=({title:e,description:t,icon:r,link:a,color:s})=>{const o={blue:"bg-blue-50 border-blue-200 hover:bg-blue-100",green:"bg-green-50 border-green-200 hover:bg-green-100",purple:"bg-purple-50 border-purple-200 hover:bg-purple-100",yellow:"bg-yellow-50 border-yellow-200 hover:bg-yellow-100",red:"bg-red-50 border-red-200 hover:bg-red-100",gray:"bg-gray-50 border-gray-200 hover:bg-gray-100"};return n.createElement(Ne,{to:a,className:"block"},n.createElement("div",{className:`bg-white overflow-hidden shadow rounded-lg border-2 transition-colors duration-200 ${o[s]}`},n.createElement("div",{className:"p-6"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"text-3xl"},r)),n.createElement("div",{className:"ml-4"},n.createElement("h3",{className:"text-lg font-medium text-gray-900"},e),n.createElement("p",{className:"text-sm text-gray-600"},t))))))},Om=({role:e,activities:t=[]})=>{const r=qr(),a=()=>{if(t&&t.length>0)return t;switch(e){case"ADMIN":return[{action:"Nuevo usuario registrado",time:"Hace 5 minutos",type:"user",link:"/admin/users",entityType:"user"},{action:"Expediente creado #1234",time:"Hace 15 minutos",type:"case",link:"/admin/cases",entityType:"case"},{action:"Cita programada",time:"Hace 1 hora",type:"appointment",link:"/admin/appointments",entityType:"appointment"},{action:"Documento subido",time:"Hace 2 horas",type:"document",link:"/admin/documents",entityType:"document"}];case"ABOGADO":return[{action:"Nuevo caso asignado",time:"Hace 10 minutos",type:"case",link:"/lawyer/cases",entityType:"case"},{action:"Cita con cliente",time:"Hace 30 minutos",type:"appointment",link:"/lawyer/appointments",entityType:"appointment"},{action:"Documento revisado",time:"Hace 1 hora",type:"document",link:"/lawyer/documents",entityType:"document"},{action:"Tarea completada",time:"Hace 2 horas",type:"task",link:"/lawyer/tasks",entityType:"task"}];case"CLIENTE":return[{action:"Documento recibido",time:"Hace 5 minutos",type:"document",link:"/client/documents",entityType:"document"},{action:"Cita confirmada",time:"Hace 1 hora",type:"appointment",link:"/client/appointments",entityType:"appointment"},{action:"Actualización de caso",time:"Hace 3 horas",type:"case",link:"/client/cases",entityType:"case"},{action:"Pago procesado",time:"Hace 1 día",type:"payment",link:"/client/payments",entityType:"payment"}];default:return[]}},s=i=>{i.link&&r(i.link)},o=i=>{switch(i){case"case":return"📋";case"appointment":return"📅";case"document":return"📄";case"task":return"✅";case"user":return"👤";case"payment":return"💰";case"provision":return"💳";default:return"📌"}},l=a();return n.createElement("div",{className:"bg-white shadow rounded-lg"},n.createElement("div",{className:"px-6 py-4 border-b border-gray-200"},n.createElement("h3",{className:"text-lg font-medium text-gray-900"},"Actividad Reciente")),n.createElement("div",{className:"divide-y divide-gray-200"},l.map((i,c)=>n.createElement("div",{key:c,className:`px-6 py-4 ${i.link?"cursor-pointer hover:bg-gray-50 transition-colors":""}`,onClick:()=>i.link&&s(i)},n.createElement("div",{className:"flex items-center justify-between"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"text-lg mr-3"},o(i.type))),n.createElement("div",{className:"ml-3 flex-1"},n.createElement("p",{className:`text-sm font-medium ${i.link?"text-blue-600 hover:text-blue-800":"text-gray-900"}`},i.action),n.createElement("p",{className:"text-sm text-gray-500"},i.time))),i.link&&n.createElement("div",{className:"flex-shrink-0"},n.createElement("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"}))))))))};class ll extends Error{}ll.prototype.name="InvalidTokenError";function xT(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,r)=>{let a=r.charCodeAt(0).toString(16).toUpperCase();return a.length<2&&(a="0"+a),"%"+a}))}function bT(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return xT(t)}catch{return atob(t)}}function wT(e,t){if(typeof e!="string")throw new ll("Invalid token specified: must be a string");t||(t={});const r=t.header===!0?0:1,a=e.split(".")[r];if(typeof a!="string")throw new ll(`Invalid token specified: missing part #${r+1}`);let s;try{s=bT(a)}catch(o){throw new ll(`Invalid token specified: invalid base64 for part #${r+1} (${o.message})`)}try{return JSON.parse(s)}catch(o){throw new ll(`Invalid token specified: invalid json for part #${r+1} (${o.message})`)}}const NT=()=>{const e=qr(),{login:t}=Te(),[r,a]=g.useState({email:"admin@despacho.com",password:"password123"}),[s,o]=g.useState(""),[l,i]=g.useState(!1),c=u=>{const{name:m,value:f}=u.target;a(x=>({...x,[m]:f}))},d=async u=>{u.preventDefault();try{o(""),i(!0),await t(r.email,r.password);const m=localStorage.getItem("token");if(m){const f=wT(m);switch(console.log("Usuario decodificado:",f),f.role){case"ADMIN":e("/admin/dashboard");break;case"ABOGADO":e("/lawyer/dashboard");break;case"CLIENTE":e("/client/dashboard");break;default:e("/")}}}catch(m){console.error("Error completo:",m),o("Error al iniciar sesión. Por favor, verifique sus credenciales.")}finally{i(!1)}};return n.createElement("div",{className:"min-h-[calc(100vh-64px)] flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"max-w-md w-full space-y-8"},n.createElement("div",null,n.createElement("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900"},"Iniciar Sesión"),n.createElement("p",{className:"mt-2 text-center text-sm text-gray-600"},"¿No tiene una cuenta?"," ",n.createElement(Ne,{to:"/register",className:"font-medium text-blue-600 hover:text-blue-500"},"Regístrese aquí"))),n.createElement("form",{className:"mt-8 space-y-6",onSubmit:d},s&&n.createElement("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert"},n.createElement("span",{className:"block sm:inline"},s)),n.createElement("div",{className:"rounded-md shadow-sm -space-y-px"},n.createElement("div",null,n.createElement("label",{htmlFor:"email",className:"sr-only"},"Correo Electrónico"),n.createElement("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Correo Electrónico",value:r.email,onChange:c})),n.createElement("div",null,n.createElement("label",{htmlFor:"password",className:"sr-only"},"Contraseña"),n.createElement("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Contraseña",value:r.password,onChange:c}))),n.createElement("div",{className:"flex items-center justify-between"},n.createElement("div",{className:"text-sm"},n.createElement(Ne,{to:"/forgot-password",className:"font-medium text-blue-600 hover:text-blue-500"},"¿Olvidó su contraseña?"))),n.createElement("div",null,n.createElement("button",{type:"submit",disabled:l,className:`group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${l?"opacity-50 cursor-not-allowed":""}`},l?"Iniciando sesión...":"Iniciar Sesión")))))},ST=()=>{const e=qr(),{register:t}=Te(),[r,a]=g.useState({email:"",password:"",confirmPassword:"",name:"",role:"CLIENTE"}),[s,o]=g.useState(""),[l,i]=g.useState(!1),c=u=>{const{name:m,value:f}=u.target;a(x=>({...x,[m]:f}))},d=async u=>{if(u.preventDefault(),r.password!==r.confirmPassword)return o("Las contraseñas no coinciden");try{o(""),i(!0),await t({email:r.email,password:r.password,name:r.name,role:r.role}),e("/dashboard")}catch{o("Error al crear la cuenta. Por favor, inténtelo de nuevo.")}finally{i(!1)}};return n.createElement("div",{className:"min-h-[calc(100vh-64px)] flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"max-w-md w-full space-y-8"},n.createElement("div",null,n.createElement("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900"},"Crear una cuenta"),n.createElement("p",{className:"mt-2 text-center text-sm text-gray-600"},"¿Ya tiene una cuenta?"," ",n.createElement(Ne,{to:"/login",className:"font-medium text-blue-600 hover:text-blue-500"},"Inicie sesión aquí"))),n.createElement("form",{className:"mt-8 space-y-6",onSubmit:d},s&&n.createElement("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert"},n.createElement("span",{className:"block sm:inline"},s)),n.createElement("div",{className:"rounded-md shadow-sm -space-y-px"},n.createElement("div",null,n.createElement("label",{htmlFor:"name",className:"sr-only"},"Nombre Completo"),n.createElement("input",{id:"name",name:"name",type:"text",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Nombre Completo",value:r.name,onChange:c})),n.createElement("div",null,n.createElement("label",{htmlFor:"email",className:"sr-only"},"Correo Electrónico"),n.createElement("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Correo Electrónico",value:r.email,onChange:c})),n.createElement("div",null,n.createElement("label",{htmlFor:"password",className:"sr-only"},"Contraseña"),n.createElement("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Contraseña",value:r.password,onChange:c})),n.createElement("div",null,n.createElement("label",{htmlFor:"confirmPassword",className:"sr-only"},"Confirmar Contraseña"),n.createElement("input",{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Confirmar Contraseña",value:r.confirmPassword,onChange:c})),n.createElement("div",null,n.createElement("label",{htmlFor:"role",className:"sr-only"},"Tipo de Usuario"),n.createElement("select",{id:"role",name:"role",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",value:r.role,onChange:c},n.createElement("option",{value:"CLIENTE"},"Cliente"),n.createElement("option",{value:"ABOGADO"},"Abogado")))),n.createElement("div",null,n.createElement("button",{type:"submit",disabled:l,className:`group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${l?"opacity-50 cursor-not-allowed":""}`},l?"Creando cuenta...":"Registrarse")))))},Rm=({allowedRoles:e})=>{const{user:t,loading:r}=Te();return r?n.createElement("div",null,"Cargando..."):!t||!e.includes(t.role)?n.createElement(iw,{to:"/login",replace:!0}):n.createElement(Ph,null)},CT=()=>{const{user:e,loading:t}=Te();return t?n.createElement("div",null,"Cargando..."):e?n.createElement(Ph,null):n.createElement(iw,{to:"/login",replace:!0})},rc=({title:e,description:t,icon:r="🚧"})=>React.createElement("div",{className:"min-h-[calc(100vh-200px)] flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8"},React.createElement("div",{className:"max-w-md w-full text-center"},React.createElement("div",{className:"text-6xl mb-6"},r),React.createElement("h1",{className:"text-3xl font-bold text-gray-900 mb-4"},e),React.createElement("p",{className:"text-lg text-gray-600 mb-8"},t||"Esta funcionalidad está en desarrollo y estará disponible pronto."),React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4"},React.createElement("h3",{className:"font-semibold text-blue-900 mb-2"},"Próximas funcionalidades:"),React.createElement("ul",{className:"text-sm text-blue-800 space-y-1"},React.createElement("li",null,"• Interfaz completa y funcional"),React.createElement("li",null,"• Integración con backend"),React.createElement("li",null,"• Gestión de datos en tiempo real"),React.createElement("li",null,"• Reportes y estadísticas"))),React.createElement(Ne,{to:"/dashboard",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},"Volver al Dashboard")))),kT=()=>{const[e,t]=g.useState([]),[r,a]=g.useState([]),[s,o]=g.useState(!0),[l,i]=g.useState(null),[c,d]=g.useState(""),[u,m]=g.useState("todos"),[f,x]=g.useState(null),{user:b}=Te(),[y,v]=g.useState([]);return g.useEffect(()=>{(async()=>{try{o(!0);const h=localStorage.getItem("token"),[E,w]=await Promise.all([J.get("/cases",{headers:{Authorization:`Bearer ${h}`}}),J.get("/cases/stats",{headers:{Authorization:`Bearer ${h}`}})]);t(E.data),i(w.data),x(null)}catch(h){console.error("Error fetching cases:",h),x("Error al cargar los expedientes")}finally{o(!1)}})()},[]),g.useEffect(()=>{(async()=>{try{const h=localStorage.getItem("token"),E=await J.get("/chat/conversations",{headers:{Authorization:`Bearer ${h}`}});v(E.data)}catch{}})()},[]),g.useEffect(()=>{let p=e;c&&(p=p.filter(h=>{var E;return h.title.toLowerCase().includes(c.toLowerCase())||h.client.user.name.toLowerCase().includes(c.toLowerCase())||((E=h.description)==null?void 0:E.toLowerCase().includes(c.toLowerCase()))})),u!=="todos"&&(p=p.filter(h=>h.status===u)),a(p)},[e,c,u]),s?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})):f?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-red-600 text-xl mb-4"},"Error"),n.createElement("div",{className:"text-gray-600"},f),n.createElement("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},"Reintentar"))):n.createElement("div",{className:"py-6"},n.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"flex justify-between items-center"},n.createElement("div",null,n.createElement("h1",{className:"text-3xl font-bold text-gray-900"},"Mis Expedientes"),n.createElement("p",{className:"mt-2 text-gray-600"},"Gestiona y da seguimiento a todos tus casos legales")),n.createElement(Ne,{to:"/lawyer/cases/new",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"},"Nuevo Expediente"))),l&&n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6"},n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-blue-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Total Expedientes"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},l.total)))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-green-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Abiertos"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},l.abiertos)))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-yellow-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"En Proceso"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},l.enProceso)))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-gray-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Cerrados"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},l.cerrados))))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow mb-6"},n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Buscar"),n.createElement("input",{type:"text",placeholder:"Buscar por título, cliente o descripción...",value:c,onChange:p=>d(p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Estado"),n.createElement("select",{value:u,onChange:p=>m(p.target.value),"aria-label":"Filtrar por estado",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},n.createElement("option",{value:"todos"},"Todos los estados"),n.createElement("option",{value:"ABIERTO"},"Abierto"),n.createElement("option",{value:"EN_PROCESO"},"En Proceso"),n.createElement("option",{value:"CERRADO"},"Cerrado"))),n.createElement("div",{className:"flex items-end"},n.createElement("button",{onClick:()=>{d(""),m("todos")},className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"},"Limpiar Filtros")))),n.createElement("div",{className:"bg-white shadow rounded-lg overflow-hidden"},n.createElement("div",{className:"overflow-x-auto"},n.createElement("table",{className:"min-w-full divide-y divide-gray-200"},n.createElement("thead",{className:"bg-gray-50"},n.createElement("tr",null,n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"ID de Expediente"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Título"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Cliente"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Estado"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Acciones"))),n.createElement("tbody",{className:"bg-white divide-y divide-gray-200"},r.map(p=>{const h=y.find(E=>E.userId===p.client.user.id);return n.createElement("tr",{key:p.id,className:"hover:bg-gray-50"},n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 flex items-center gap-2"},n.createElement("span",null,p.id),n.createElement("button",{className:"ml-2 px-2 py-1 text-xs bg-gray-200 rounded hover:bg-gray-300",title:"Copiar ID",onClick:()=>navigator.clipboard.writeText(p.id)},"Copiar")),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},p.title),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 flex items-center gap-2"},p.client.user.name,h&&h.unreadCount>0&&n.createElement("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-yellow-100 text-yellow-800",title:"Mensajes no leídos"},n.createElement("svg",{className:"w-3 h-3 mr-1 text-yellow-600",fill:"currentColor",viewBox:"0 0 20 20"},n.createElement("path",{d:"M10 2a8 8 0 100 16 8 8 0 000-16zm1 12H9v-2h2v2zm0-4H9V6h2v4z"})),h.unreadCount)),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},p.status),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},n.createElement("div",{className:"flex space-x-2"},n.createElement(Ne,{to:`/lawyer/cases/${p.id}`,className:"text-blue-600 hover:text-blue-900"},"Ver"),n.createElement(Ne,{to:`/lawyer/cases/${p.id}/edit`,className:"text-green-600 hover:text-green-900"},"Editar"))))}))))),r.length===0&&n.createElement("div",{className:"text-center py-12"},n.createElement("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})),n.createElement("h3",{className:"mt-2 text-sm font-medium text-gray-900"},"No se encontraron expedientes"),n.createElement("p",{className:"mt-1 text-sm text-gray-500"},"Intenta ajustar los filtros o crear un nuevo expediente."))))},DT=()=>{const e=qr(),{user:t}=Te(),[r,a]=g.useState(!1),[s,o]=g.useState(!1),[l,i]=g.useState(null),[c,d]=g.useState([]),[u,m]=g.useState([]),[f,x]=g.useState({title:"",description:"",clientId:"",lawyerId:(t==null?void 0:t.role)==="ABOGADO"?t.id:""});g.useEffect(()=>{(async()=>{try{a(!0);const p=localStorage.getItem("token"),[h,E]=await Promise.all([J.get("/users/clients"),J.get("/users/lawyers")]);d(h.data),m(E.data)}catch(p){console.error("Error fetching data:",p),i("Error al cargar los datos")}finally{a(!1)}})()},[t]);const b=v=>{const{name:p,value:h}=v.target;x(E=>({...E,[p]:h}))},y=async v=>{var p,h;if(v.preventDefault(),!f.title||!f.clientId||!f.lawyerId){i("Por favor completa todos los campos obligatorios");return}try{o(!0),i(null);const E=localStorage.getItem("token");await J.post("/cases",f,{headers:{Authorization:`Bearer ${E}`}}),e("/lawyer/cases")}catch(E){console.error("Error creating case:",E),i(((h=(p=E.response)==null?void 0:p.data)==null?void 0:h.message)||"Error al crear el expediente")}finally{o(!1)}};return r?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})):n.createElement("div",{className:"py-6"},n.createElement("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"flex items-center justify-between"},n.createElement("div",null,n.createElement("h1",{className:"text-3xl font-bold text-gray-900"},"Nuevo Expediente"),n.createElement("p",{className:"mt-2 text-gray-600"},"Crea un nuevo expediente legal")),n.createElement("button",{onClick:()=>e("/lawyer/cases"),className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"},"Cancelar"))),n.createElement("div",{className:"bg-white shadow rounded-lg"},n.createElement("form",{onSubmit:y,className:"p-6 space-y-6"},l&&n.createElement("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md"},l),n.createElement("div",null,n.createElement("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2"},"Título del Expediente *"),n.createElement("input",{type:"text",id:"title",name:"title",value:f.title,onChange:b,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: Contrato de Compraventa"})),n.createElement("div",null,n.createElement("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2"},"Descripción"),n.createElement("textarea",{id:"description",name:"description",value:f.description,onChange:b,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe brevemente el caso..."})),n.createElement("div",null,n.createElement("label",{htmlFor:"clientId",className:"block text-sm font-medium text-gray-700 mb-2"},"Cliente *"),n.createElement("select",{id:"clientId",name:"clientId",value:f.clientId,onChange:b,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},n.createElement("option",{value:""},"Selecciona un cliente"),c.filter(v=>v.user).length===0&&n.createElement("option",{disabled:!0,value:""},"No hay clientes disponibles"),c.filter(v=>v.user).map(v=>{var p,h;return n.createElement("option",{key:v.id,value:v.id},((p=v.user)==null?void 0:p.name)||"Sin nombre"," - ",((h=v.user)==null?void 0:h.email)||"Sin email"," (DNI: ",v.dni,")")}))),n.createElement("div",null,n.createElement("label",{htmlFor:"lawyerId",className:"block text-sm font-medium text-gray-700 mb-2"},"Abogado Asignado *"),n.createElement("select",{id:"lawyerId",name:"lawyerId",value:f.lawyerId,onChange:b,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:(t==null?void 0:t.role)==="ABOGADO"},n.createElement("option",{value:""},"Selecciona un abogado"),u.map(v=>n.createElement("option",{key:v.id,value:v.id},v.name," - ",v.email))),(t==null?void 0:t.role)==="ABOGADO"&&n.createElement("p",{className:"mt-1 text-sm text-gray-500"},"Serás asignado automáticamente como abogado responsable")),n.createElement("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200"},n.createElement("button",{type:"button",onClick:()=>e("/lawyer/cases"),className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"},"Cancelar"),n.createElement("button",{type:"submit",disabled:s,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"},s?"Creando...":"Crear Expediente"))))))},Xw=({expedienteId:e,expedienteData:t,onAppointmentCreated:r,onNoteAdded:a,onMessageSent:s})=>{const[o,l]=g.useState(null),[i,c]=g.useState({}),[d,u]=g.useState(!1),[m,f]=g.useState(null),[x,b]=g.useState(null),y=()=>{l(null),c({}),f(null),b(null)},v=h=>{c({...i,[h.target.name]:h.target.value})},p=async h=>{var E,w,N,S;if(h.preventDefault(),u(!0),f(null),b(null),o==="cita"){let C=(E=t==null?void 0:t.client)==null?void 0:E.id,k=(w=t==null?void 0:t.lawyer)==null?void 0:w.id;if(!C||!k){f("No se pudo obtener el cliente o abogado del expediente."),u(!1);return}try{const D=localStorage.getItem("token"),O={clientId:C,lawyerId:k,date:i.datetime,location:i.location,notes:i.notes},A=await J.post("/appointments",O,{headers:{Authorization:`Bearer ${D}`}});b("Cita programada con éxito"),r&&r(A.data),setTimeout(y,1200)}catch(D){f(((S=(N=D.response)==null?void 0:N.data)==null?void 0:S.message)||"Error al programar la cita")}finally{u(!1)}return}setTimeout(()=>{u(!1),b("Acción realizada con éxito"),o==="nota"&&a&&a(i),o==="mensaje"&&s&&s(i),setTimeout(y,1e3)},800)};return n.createElement("div",{className:"flex flex-col md:flex-row gap-2 md:gap-4 my-4"},n.createElement("button",{className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:()=>l("cita")},"Programar Cita"),n.createElement("button",{className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",onClick:()=>l("nota")},"Agregar Nota"),n.createElement("button",{className:"px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700",onClick:()=>l("mensaje")},"Enviar Mensaje"),o==="cita"&&n.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40"},n.createElement("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md relative"},n.createElement("button",{className:"absolute top-2 right-2 text-gray-500",onClick:y},"×"),n.createElement("h2",{className:"text-xl font-bold mb-4"},"Programar Cita"),n.createElement("form",{onSubmit:p,className:"space-y-4"},n.createElement("input",{type:"hidden",name:"expedienteId",value:e||""}),n.createElement("div",null,n.createElement("label",{htmlFor:"datetime",className:"block text-sm font-medium mb-1"},"Fecha y hora"),n.createElement("input",{id:"datetime",type:"datetime-local",name:"datetime",required:!0,className:"w-full border rounded px-2 py-1",onChange:v,title:"Seleccione la fecha y hora",placeholder:"Seleccione la fecha y hora"})),n.createElement("div",null,n.createElement("label",{htmlFor:"location",className:"block text-sm font-medium mb-1"},"Lugar"),n.createElement("input",{id:"location",type:"text",name:"location",required:!0,className:"w-full border rounded px-2 py-1",onChange:v,title:"Ingrese el lugar",placeholder:"Ingrese el lugar"})),n.createElement("div",null,n.createElement("label",{htmlFor:"notes",className:"block text-sm font-medium mb-1"},"Notas"),n.createElement("textarea",{id:"notes",name:"notes",className:"w-full border rounded px-2 py-1",onChange:v,title:"Ingrese notas adicionales",placeholder:"Ingrese notas adicionales"})),m&&n.createElement("div",{className:"text-red-600 text-sm"},m),x&&n.createElement("div",{className:"text-green-600 text-sm"},x),n.createElement("div",{className:"flex justify-end gap-2"},n.createElement("button",{type:"button",onClick:y,className:"px-3 py-1 bg-gray-200 rounded"},"Cancelar"),n.createElement("button",{type:"submit",disabled:d,className:"px-4 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50"},d?"Guardando...":"Guardar"))))),o==="nota"&&n.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40"},n.createElement("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md relative"},n.createElement("button",{className:"absolute top-2 right-2 text-gray-500",onClick:y},"×"),n.createElement("h2",{className:"text-xl font-bold mb-4"},"Agregar Nota"),n.createElement("form",{onSubmit:p,className:"space-y-4"},n.createElement("input",{type:"hidden",name:"expedienteId",value:e||""}),n.createElement("div",null,n.createElement("label",{htmlFor:"nota-textarea",className:"block text-sm font-medium mb-1"},"Nota"),n.createElement("textarea",{id:"nota-textarea",name:"note",required:!0,className:"w-full border rounded px-2 py-1",onChange:v,title:"Ingrese la nota",placeholder:"Ingrese la nota"})),m&&n.createElement("div",{className:"text-red-600 text-sm"},m),x&&n.createElement("div",{className:"text-green-600 text-sm"},x),n.createElement("div",{className:"flex justify-end gap-2"},n.createElement("button",{type:"button",onClick:y,className:"px-3 py-1 bg-gray-200 rounded"},"Cancelar"),n.createElement("button",{type:"submit",disabled:d,className:"px-4 py-1 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50"},d?"Guardando...":"Guardar"))))),o==="mensaje"&&n.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40"},n.createElement("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md relative"},n.createElement("button",{className:"absolute top-2 right-2 text-gray-500",onClick:y},"×"),n.createElement("h2",{className:"text-xl font-bold mb-4"},"Enviar Mensaje"),n.createElement("form",{onSubmit:p,className:"space-y-4"},n.createElement("input",{type:"hidden",name:"expedienteId",value:e||""}),n.createElement("div",null,n.createElement("label",{htmlFor:"mensaje-textarea",className:"block text-sm font-medium mb-1"},"Mensaje"),n.createElement("textarea",{id:"mensaje-textarea",name:"message",required:!0,className:"w-full border rounded px-2 py-1",onChange:v,title:"Ingrese el mensaje a enviar",placeholder:"Escriba su mensaje aquí"})),m&&n.createElement("div",{className:"text-red-600 text-sm"},m),x&&n.createElement("div",{className:"text-green-600 text-sm"},x),n.createElement("div",{className:"flex justify-end gap-2"},n.createElement("button",{type:"button",onClick:y,className:"px-3 py-1 bg-gray-200 rounded"},"Cancelar"),n.createElement("button",{type:"submit",disabled:d,className:"px-4 py-1 bg-purple-600 text-white rounded hover:bg-purple-700 disabled:opacity-50"},d?"Enviando...":"Enviar"))))))},Hv=()=>{const{id:e}=Mh(),t=qr(),{user:r}=Te();console.log("Usuario en frontend:",r);const[a,s]=g.useState(null),[o,l]=g.useState(!0),[i,c]=g.useState(null),[d,u]=g.useState(!1);g.useEffect(()=>{(async()=>{var y,v;if(e)try{l(!0);const p=localStorage.getItem("token"),h=await ye.get(`/api/cases/${e}`,{headers:{Authorization:`Bearer ${p}`}});s(h.data),c(null)}catch(p){console.error("Error fetching case:",p),c(((v=(y=p.response)==null?void 0:y.data)==null?void 0:v.message)||"Error al cargar el expediente")}finally{l(!1)}})()},[e]);const m=async b=>{if(a)try{u(!0);const y=localStorage.getItem("token");await ye.patch(`/api/cases/${e}/status`,{status:b},{headers:{Authorization:`Bearer ${y}`}}),s(v=>v?{...v,status:b}:null)}catch(y){console.error("Error updating status:",y),c("Error al actualizar el estado del expediente")}finally{u(!1)}},f=b=>{switch(b){case"ABIERTO":return"bg-green-100 text-green-800";case"EN_PROCESO":return"bg-yellow-100 text-yellow-800";case"CERRADO":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},x=b=>{switch(b){case"ABIERTO":return"Abierto";case"EN_PROCESO":return"En Proceso";case"CERRADO":return"Cerrado";default:return b}};return o?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})):i||!a?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-red-600 text-xl mb-4"},"Error"),n.createElement("div",{className:"text-gray-600"},i||"Expediente no encontrado"),n.createElement("button",{onClick:()=>t("/lawyer/cases"),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},"Volver a Expedientes"))):n.createElement("div",{className:"py-6"},n.createElement("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"flex items-center justify-between"},n.createElement("div",null,n.createElement("div",{className:"flex items-center space-x-4"},n.createElement("button",{onClick:()=>t("/lawyer/cases"),className:"text-gray-400 hover:text-gray-600","aria-label":"Volver a Expedientes",title:"Volver a Expedientes",type:"button"},n.createElement("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"}))),n.createElement("h1",{className:"text-3xl font-bold text-gray-900"},a.title)),n.createElement("p",{className:"mt-2 text-gray-600"},"Expediente creado el ",new Date(a.createdAt).toLocaleDateString())),n.createElement("div",{className:"flex space-x-3"},n.createElement(Ne,{to:`/lawyer/cases/${e}/edit`,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2"},"Editar")))),n.createElement(Xw,{expedienteId:a.id,expedienteData:a}),n.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6"},n.createElement("div",{className:"lg:col-span-2 space-y-6"},n.createElement("div",{className:"bg-white shadow rounded-lg p-6"},n.createElement("h2",{className:"text-lg font-semibold text-gray-900 mb-4"},"Estado del Expediente"),n.createElement("div",{className:"flex items-center space-x-4"},n.createElement("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${f(a.status)}`},x(a.status)),((r==null?void 0:r.role)==="ABOGADO"||(r==null?void 0:r.role)==="ADMIN")&&n.createElement("label",null,n.createElement("span",{className:"sr-only"},"Cambiar estado del expediente"),n.createElement("select",{value:a.status,onChange:b=>m(b.target.value),disabled:d,className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",title:"Cambiar estado del expediente"},n.createElement("option",{value:"ABIERTO"},"Abierto"),n.createElement("option",{value:"EN_PROCESO"},"En Proceso"),n.createElement("option",{value:"CERRADO"},"Cerrado"))))),n.createElement("div",{className:"bg-white shadow rounded-lg p-6"},n.createElement("h2",{className:"text-lg font-semibold text-gray-900 mb-4"},"Descripción"),n.createElement("p",{className:"text-gray-700"},a.description||"No hay descripción disponible para este expediente.")),n.createElement("div",{className:"bg-white shadow rounded-lg p-6"},n.createElement("div",{className:"flex items-center justify-between mb-4"},n.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"Documentos"),n.createElement("button",{className:"px-3 py-1 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700"},"Subir Documento")),a.documents.length>0?n.createElement("div",{className:"space-y-3"},a.documents.map(b=>n.createElement("div",{key:b.id,className:"flex items-center justify-between p-3 border border-gray-200 rounded-md"},n.createElement("div",{className:"flex items-center space-x-3"},n.createElement("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})),n.createElement("div",null,n.createElement("p",{className:"text-sm font-medium text-gray-900"},b.filename),n.createElement("p",{className:"text-xs text-gray-500"},"Subido el ",new Date(b.uploadedAt).toLocaleDateString()))),n.createElement("a",{href:b.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-sm"},"Ver")))):n.createElement("p",{className:"text-gray-500 text-center py-4"},"No hay documentos subidos aún."))),n.createElement("div",{className:"space-y-6"},n.createElement("div",{className:"bg-white shadow rounded-lg p-6"},n.createElement("h2",{className:"text-lg font-semibold text-gray-900 mb-4"},"Información del Cliente"),n.createElement("div",{className:"space-y-3"},n.createElement("div",null,n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Nombre"),n.createElement("p",{className:"text-sm text-gray-900"},a.client.user.name)),n.createElement("div",null,n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Email"),n.createElement("p",{className:"text-sm text-gray-900"},a.client.user.email)),n.createElement("div",null,n.createElement("p",{className:"text-sm font-medium text-gray-500"},"DNI"),n.createElement("p",{className:"text-sm text-gray-900"},a.client.dni)),a.client.phone&&n.createElement("div",null,n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Teléfono"),n.createElement("p",{className:"text-sm text-gray-900"},a.client.phone)),a.client.address&&n.createElement("div",null,n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Dirección"),n.createElement("p",{className:"text-sm text-gray-900"},a.client.address)))),n.createElement("div",{className:"bg-white shadow rounded-lg p-6"},n.createElement("h2",{className:"text-lg font-semibold text-gray-900 mb-4"},"Abogado Asignado"),n.createElement("div",{className:"space-y-3"},n.createElement("div",null,n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Nombre"),n.createElement("p",{className:"text-sm text-gray-900"},a.lawyer.name)),n.createElement("div",null,n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Email"),n.createElement("p",{className:"text-sm text-gray-900"},a.lawyer.email)))),n.createElement("div",{className:"bg-white shadow rounded-lg p-6"},n.createElement("h2",{className:"text-lg font-semibold text-gray-900 mb-4"},"Acciones Rápidas"),n.createElement("div",{className:"space-y-3"},n.createElement("button",{className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm"},"Programar Cita"),n.createElement("button",{className:"w-full px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 text-sm"},"Agregar Nota"),n.createElement("button",{className:"w-full px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 text-sm"},"Enviar Mensaje")))))))},AT=()=>{const[e,t]=g.useState([]),[r,a]=g.useState([]),[s,o]=g.useState(!0),[l,i]=g.useState(""),[c,d]=g.useState("todos"),[u,m]=g.useState(null),{user:f}=Te(),[x,b]=g.useState(!1),[y,v]=g.useState(null),[p,h]=g.useState(""),[E,w]=g.useState(!1),[N,S]=g.useState(null),[C,k]=g.useState({}),[D,O]=g.useState([]),[A,$]=g.useState({});g.useEffect(()=>{(async()=>{try{o(!0);const M=localStorage.getItem("token"),V=await ye.get("/api/cases",{headers:{Authorization:`Bearer ${M}`}});t(V.data),m(null)}catch(M){console.error("Error fetching cases:",M),m("Error al cargar los expedientes")}finally{o(!1)}})()},[]),g.useEffect(()=>{(async()=>{try{const M=localStorage.getItem("token"),V=await ye.get("/chat/conversations",{headers:{Authorization:`Bearer ${M}`}});O(V.data)}catch{}})()},[]),g.useEffect(()=>{const T=async()=>{const M=localStorage.getItem("token"),V={};for(const K of e)try{const Y=[...(await ye.get(`/chat/messages/${K.lawyer.id}`,{headers:{Authorization:`Bearer ${M}`}})).data].reverse().find(X=>X.isOwnMessage);Y?V[K.lawyer.id]={read:!!Y.read,lastMessage:Y.content}:V[K.lawyer.id]={read:null,lastMessage:null}}catch{V[K.lawyer.id]={read:null,lastMessage:null}}$(V)};e.length>0&&T()},[e]),g.useEffect(()=>{let T=e;l&&(T=T.filter(M=>{var V,K,z;return M.title.toLowerCase().includes(l.toLowerCase())||((V=M.description)==null?void 0:V.toLowerCase().includes(l.toLowerCase()))||((z=(K=M.lawyer)==null?void 0:K.name)==null?void 0:z.toLowerCase().includes(l.toLowerCase()))})),c!=="todos"&&(T=T.filter(M=>M.status===c)),a(T)},[e,l,c]);const P=T=>{switch(T){case"ABIERTO":return"bg-green-100 text-green-800";case"EN_PROCESO":return"bg-yellow-100 text-yellow-800";case"CERRADO":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},I=T=>{switch(T){case"ABIERTO":return"Abierto";case"EN_PROCESO":return"En Proceso";case"CERRADO":return"Cerrado";default:return T}},L=T=>{v(T),h(""),S(null),b(!0)},F=async()=>{if(!(!p.trim()||!y)){w(!0),S(null);try{const T=localStorage.getItem("token");await ye.post("/api/chat/messages",{content:p,receiverId:y.lawyer.id},{headers:{Authorization:`Bearer ${T}`}}),k(M=>({...M,[y.id]:!0})),b(!1)}catch{S("Error al enviar el mensaje")}finally{w(!1)}}};return s?React.createElement("div",{className:"flex items-center justify-center min-h-screen"},React.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})):u?React.createElement("div",{className:"flex items-center justify-center min-h-screen"},React.createElement("div",{className:"text-center"},React.createElement("div",{className:"text-red-600 text-xl mb-4"},"Error"),React.createElement("div",{className:"text-gray-600"},u),React.createElement("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},"Reintentar"))):React.createElement("div",{className:"py-6"},React.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},React.createElement("div",{className:"mb-8"},React.createElement("div",null,React.createElement("h1",{className:"text-3xl font-bold text-gray-900"},"Mis Expedientes"),React.createElement("p",{className:"mt-2 text-gray-600"},"Revisa el estado de tus casos legales"))),React.createElement("div",{className:"bg-white p-6 rounded-lg shadow mb-6"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},React.createElement("div",null,React.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Buscar"),React.createElement("input",{type:"text",placeholder:"Buscar por título, descripción o abogado...",value:l,onChange:T=>i(T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),React.createElement("div",null,React.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Estado"),React.createElement("select",{id:"statusFilter","aria-label":"Estado",value:c,onChange:T=>d(T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},React.createElement("option",{value:"todos"},"Todos los estados"),React.createElement("option",{value:"ABIERTO"},"Abierto"),React.createElement("option",{value:"EN_PROCESO"},"En Proceso"),React.createElement("option",{value:"CERRADO"},"Cerrado"))),React.createElement("div",{className:"flex items-end"},React.createElement("button",{onClick:()=>{i(""),d("todos")},className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"},"Limpiar Filtros")))),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},r.map(T=>{var M;return React.createElement("div",{key:T.id,className:"bg-white shadow rounded-lg overflow-hidden"},React.createElement("div",{className:"p-6"},React.createElement("div",{className:"flex items-center justify-between mb-4"},React.createElement("h3",{className:"text-lg font-semibold text-gray-900 truncate"},T.title),React.createElement("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${P(T.status)}`},I(T.status))),React.createElement("p",{className:"text-gray-600 text-sm mb-4 line-clamp-3"},T.description||"Sin descripción disponible"),React.createElement("div",{className:"space-y-2 mb-4"},React.createElement("div",{className:"flex items-center text-sm text-gray-500"},React.createElement("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})),((M=T.lawyer)==null?void 0:M.name)||"Abogado no asignado"),React.createElement("div",{className:"flex items-center text-sm text-gray-500"},React.createElement("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3a4 4 0 118 0v4m-4 6v6m-4-6h8"})),T.documents.length," documentos"),React.createElement("div",{className:"flex items-center text-sm text-gray-500"},React.createElement("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})),new Date(T.createdAt).toLocaleDateString())),React.createElement("div",{className:"flex space-x-2 items-center"},React.createElement(Ne,{to:`/client/cases/${T.id}`,className:"flex-1 px-3 py-2 bg-blue-600 text-white text-center text-sm rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"},"Ver Detalles"),React.createElement("button",{className:`px-3 py-2 text-white text-sm rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 ${C[T.id]?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"}`,onClick:()=>L(T),disabled:!!C[T.id]},C[T.id]?"Mensaje enviado":"Contactar"),A[T.lawyer.id]&&A[T.lawyer.id].lastMessage&&React.createElement("span",{className:`ml-2 text-xs font-semibold ${A[T.lawyer.id].read?"text-green-600":"text-yellow-600"}`},A[T.lawyer.id].read?"Leído":"No leído"))))})),x&&y&&React.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40"},React.createElement("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md"},React.createElement("h2",{className:"text-lg font-semibold mb-4"},"Contactar a ",y.lawyer.name),React.createElement("textarea",{className:"w-full border border-gray-300 rounded-md p-2 mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:4,placeholder:"Escribe tu mensaje...",value:p,onChange:T=>h(T.target.value),disabled:E}),N&&React.createElement("div",{className:"text-red-600 mb-2"},N),React.createElement("div",{className:"flex justify-end space-x-2"},React.createElement("button",{className:"px-4 py-2 bg-gray-300 rounded hover:bg-gray-400",onClick:()=>b(!1),disabled:E},"Cancelar"),React.createElement("button",{className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50",onClick:F,disabled:E||!p.trim()},E?"Enviando...":"Enviar")))),r.length===0&&React.createElement("div",{className:"text-center py-12"},React.createElement("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})),React.createElement("h3",{className:"mt-2 text-sm font-medium text-gray-900"},"No se encontraron expedientes"),React.createElement("p",{className:"mt-1 text-sm text-gray-500"},e.length===0?"Aún no tienes expedientes asignados. Contacta con un abogado para iniciar un caso.":"Intenta ajustar los filtros de búsqueda."),e.length===0&&React.createElement("div",{className:"mt-6"},React.createElement(Ne,{to:"/client/appointments",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"},"Programar Consulta")))))},TT=()=>{var u,m,f,x;const{id:e}=Mh(),t=qr(),[r,a]=g.useState(null),[s,o]=g.useState(!0),[l,i]=g.useState(null);g.useEffect(()=>{(async()=>{var y,v;if(e)try{o(!0);const p=localStorage.getItem("token"),h=await ye.get(`/api/cases/${e}`,{headers:{Authorization:`Bearer ${p}`}});a(h.data),i(null)}catch(p){console.error("Error fetching case:",p),i(((v=(y=p.response)==null?void 0:y.data)==null?void 0:v.message)||"Error al cargar el expediente")}finally{o(!1)}})()},[e]);const c=b=>{switch(b){case"ABIERTO":return"bg-green-100 text-green-800";case"EN_PROCESO":return"bg-yellow-100 text-yellow-800";case"CERRADO":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},d=b=>{switch(b){case"ABIERTO":return"Abierto";case"EN_PROCESO":return"En Proceso";case"CERRADO":return"Cerrado";default:return b}};return s?React.createElement("div",{className:"flex items-center justify-center min-h-screen"},React.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})):l||!r?React.createElement("div",{className:"flex items-center justify-center min-h-screen"},React.createElement("div",{className:"text-center"},React.createElement("div",{className:"text-red-600 text-xl mb-4"},"Error"),React.createElement("div",{className:"text-gray-600"},l||"Expediente no encontrado"),React.createElement("button",{onClick:()=>t("/client/cases"),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},"Volver a Expedientes"))):React.createElement("div",{className:"py-6"},React.createElement("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},React.createElement("div",{className:"mb-8"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",null,React.createElement("div",{className:"flex items-center space-x-4"},React.createElement("button",{onClick:()=>t("/client/cases"),className:"text-gray-400 hover:text-gray-600","aria-label":"Volver a Expedientes",title:"Volver a Expedientes"},React.createElement("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"}))),React.createElement("h1",{className:"text-3xl font-bold text-gray-900"},r.title)),React.createElement("p",{className:"mt-2 text-gray-600"},"Expediente creado el ",new Date(r.createdAt).toLocaleDateString())))),React.createElement(Xw,{expedienteId:r.id,expedienteData:r}),React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6"},React.createElement("div",{className:"lg:col-span-2 space-y-6"},React.createElement("div",{className:"bg-white shadow rounded-lg p-6"},React.createElement("h2",{className:"text-lg font-semibold text-gray-900 mb-4"},"Estado del Expediente"),React.createElement("div",{className:"flex items-center space-x-4"},React.createElement("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${c(r.status)}`},d(r.status)),React.createElement("p",{className:"text-sm text-gray-600"},r.status==="ABIERTO"&&"Tu caso está siendo revisado por nuestro equipo legal.",r.status==="EN_PROCESO"&&"Tu caso está en proceso activo. Nuestro abogado está trabajando en él.",r.status==="CERRADO"&&"Tu caso ha sido completado y cerrado."))),React.createElement("div",{className:"bg-white shadow rounded-lg p-6"},React.createElement("h2",{className:"text-lg font-semibold text-gray-900 mb-4"},"Descripción del Caso"),React.createElement("p",{className:"text-gray-700"},r.description||"No hay descripción disponible para este expediente.")),React.createElement("div",{className:"bg-white shadow rounded-lg p-6"},React.createElement("h2",{className:"text-lg font-semibold text-gray-900 mb-4"},"Documentos del Caso"),r.documents.length>0?React.createElement("div",{className:"space-y-3"},r.documents.map(b=>React.createElement("div",{key:b.id,className:"flex items-center justify-between p-3 border border-gray-200 rounded-md"},React.createElement("div",{className:"flex items-center space-x-3"},React.createElement("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})),React.createElement("div",null,React.createElement("p",{className:"text-sm font-medium text-gray-900"},b.filename),React.createElement("p",{className:"text-xs text-gray-500"},"Subido el ",new Date(b.uploadedAt).toLocaleDateString()))),React.createElement("a",{href:b.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-sm"},"Descargar")))):React.createElement("p",{className:"text-gray-500 text-center py-4"},"No hay documentos disponibles aún.")),React.createElement("div",{className:"bg-white shadow rounded-lg p-6"},React.createElement("h2",{className:"text-lg font-semibold text-gray-900 mb-4"},"Próximos Pasos"),React.createElement("div",{className:"space-y-3"},r.status==="ABIERTO"&&React.createElement(React.Fragment,null,React.createElement("div",{className:"flex items-start space-x-3"},React.createElement("div",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center"},React.createElement("span",{className:"text-blue-600 text-xs font-semibold"},"1")),React.createElement("div",null,React.createElement("p",{className:"text-sm font-medium text-gray-900"},"Revisión Inicial"),React.createElement("p",{className:"text-sm text-gray-600"},"Nuestro abogado está revisando los detalles de tu caso."))),React.createElement("div",{className:"flex items-start space-x-3"},React.createElement("div",{className:"flex-shrink-0 w-6 h-6 bg-gray-100 rounded-full flex items-center justify-center"},React.createElement("span",{className:"text-gray-400 text-xs font-semibold"},"2")),React.createElement("div",null,React.createElement("p",{className:"text-sm font-medium text-gray-400"},"Análisis Legal"),React.createElement("p",{className:"text-sm text-gray-400"},"Se realizará un análisis completo de tu situación legal.")))),r.status==="EN_PROCESO"&&React.createElement(React.Fragment,null,React.createElement("div",{className:"flex items-start space-x-3"},React.createElement("div",{className:"flex-shrink-0 w-6 h-6 bg-green-100 rounded-full flex items-center justify-center"},React.createElement("svg",{className:"w-3 h-3 text-green-600",fill:"currentColor",viewBox:"0 0 20 20"},React.createElement("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"}))),React.createElement("div",null,React.createElement("p",{className:"text-sm font-medium text-gray-900"},"Análisis Completado"),React.createElement("p",{className:"text-sm text-gray-600"},"El análisis inicial de tu caso ha sido completado."))),React.createElement("div",{className:"flex items-start space-x-3"},React.createElement("div",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center"},React.createElement("span",{className:"text-blue-600 text-xs font-semibold"},"2")),React.createElement("div",null,React.createElement("p",{className:"text-sm font-medium text-gray-900"},"Proceso Activo"),React.createElement("p",{className:"text-sm text-gray-600"},"Tu abogado está trabajando activamente en tu caso.")))),r.status==="CERRADO"&&React.createElement("div",{className:"flex items-start space-x-3"},React.createElement("div",{className:"flex-shrink-0 w-6 h-6 bg-green-100 rounded-full flex items-center justify-center"},React.createElement("svg",{className:"w-3 h-3 text-green-600",fill:"currentColor",viewBox:"0 0 20 20"},React.createElement("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"}))),React.createElement("div",null,React.createElement("p",{className:"text-sm font-medium text-gray-900"},"Caso Completado"),React.createElement("p",{className:"text-sm text-gray-600"},"Tu caso ha sido completado exitosamente.")))))),React.createElement("div",{className:"space-y-6"},React.createElement("div",{className:"bg-white shadow rounded-lg p-6"},React.createElement("h2",{className:"text-lg font-semibold text-gray-900 mb-4"},"Tu Abogado"),React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"flex items-center space-x-3"},React.createElement("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center"},React.createElement("span",{className:"text-blue-600 font-semibold"},((m=(u=r.lawyer)==null?void 0:u.name)==null?void 0:m.split(" ").map(b=>b[0]).join(""))||"AB")),React.createElement("div",null,React.createElement("p",{className:"text-sm font-medium text-gray-900"},((f=r.lawyer)==null?void 0:f.name)||"Abogado no asignado"),React.createElement("p",{className:"text-sm text-gray-500"},((x=r.lawyer)==null?void 0:x.email)||"Email no disponible"))),React.createElement("button",{className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm"},"Contactar Abogado"))),React.createElement("div",{className:"bg-white shadow rounded-lg p-6"},React.createElement("h2",{className:"text-lg font-semibold text-gray-900 mb-4"},"Acciones Rápidas"),React.createElement("div",{className:"space-y-3"},React.createElement("button",{className:"w-full px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 text-sm"},"Programar Cita"),React.createElement("button",{className:"w-full px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 text-sm"},"Enviar Mensaje"),React.createElement("button",{className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 text-sm"},"Solicitar Información"))),React.createElement("div",{className:"bg-white shadow rounded-lg p-6"},React.createElement("h2",{className:"text-lg font-semibold text-gray-900 mb-4"},"Información de Contacto"),React.createElement("div",{className:"space-y-3 text-sm"},React.createElement("div",{className:"flex items-center space-x-2"},React.createElement("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})),React.createElement("span",{className:"text-gray-600"},"(555) 123-4567")),React.createElement("div",{className:"flex items-center space-x-2"},React.createElement("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})),React.createElement("span",{className:"text-gray-600"},"info@despacholegal.com")),React.createElement("div",{className:"flex items-center space-x-2"},React.createElement("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})),React.createElement("span",{className:"text-gray-600"},"Av. Principal 123, Ciudad"))))))))},_T=({onFileSelect:e,maxFiles:t=5,maxSize:r=5*1024*1024,acceptedTypes:a=[".pdf",".txt",".csv",".doc",".docx",".jpg",".jpeg",".png",".gif",".webp"],disabled:s=!1})=>{const[o,l]=g.useState(!1),[i,c]=g.useState(null),d=g.useRef(null),u=p=>{const h=[],E=[];return p.length>t&&E.push(`No se pueden subir más de ${t} archivos`),Array.from(p).forEach(w=>{var S;w.size>r&&E.push(`${w.name} excede el tamaño máximo de ${r/(1024*1024)}MB`);const N="."+((S=w.name.split(".").pop())==null?void 0:S.toLowerCase());a.includes(N)||E.push(`${w.name} no es un tipo de archivo permitido`),w.size===0&&E.push(`${w.name} está vacío`),E.length===0&&h.push(w)}),E.length>0?(c(E.join(", ")),[]):(c(null),h)},m=p=>{console.log("FileUpload: handleFiles called with",p.length,"files"),console.log("FileUpload: File names:",Array.from(p).map(E=>E.name));const h=u(p);h.length>0&&(console.log("FileUpload: Valid files to send:",h.map(E=>E.name)),e(h)),d.current&&(d.current.value="")},f=p=>{p.preventDefault(),p.stopPropagation(),p.type==="dragenter"||p.type==="dragover"?l(!0):p.type==="dragleave"&&l(!1)},x=p=>{p.preventDefault(),p.stopPropagation(),l(!1),p.dataTransfer.files&&p.dataTransfer.files[0]&&m(p.dataTransfer.files)},b=p=>{p.preventDefault(),p.target.files&&p.target.files[0]&&m(p.target.files)},y=p=>{p.preventDefault(),p.stopPropagation(),d.current&&!s&&d.current.click()},v=p=>{p.preventDefault(),p.stopPropagation(),s||y(p)};return n.createElement("div",{className:"w-full"},n.createElement("input",{ref:d,type:"file",multiple:!0,accept:a.join(","),"aria-label":"Seleccionar archivos para subir",title:"Seleccionar archivos para subir",placeholder:"Selecciona archivos",onChange:b,className:"hidden",disabled:s,style:{display:"none"}}),n.createElement("div",{className:`relative border-2 border-dashed rounded-lg p-6 text-center ${o?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"} ${s?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,onDragEnter:f,onDragLeave:f,onDragOver:f,onDrop:x,onClick:v,"aria-label":"Área de carga de archivos"},n.createElement("div",{className:"space-y-2"},n.createElement("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true"},n.createElement("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),n.createElement("div",{className:"text-gray-600"},n.createElement("span",{className:"font-medium"},"Haz clic para subir")," o arrastra y suelta"),n.createElement("p",{className:"text-xs text-gray-500"},"PDF, TXT, CSV, DOC, DOCX, JPG, PNG, GIF, WEBP hasta ",r/(1024*1024),"MB"),n.createElement("p",{className:"text-xs text-gray-500"},"Máximo ",t," archivos"))),i&&n.createElement("div",{className:"mt-2 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md p-2"},i))},OT=()=>{const[e,t]=g.useState([]),[r,a]=g.useState([]),[s,o]=g.useState(!0),[l,i]=g.useState(null),[c,d]=g.useState(""),[u,m]=g.useState("todos"),[f,x]=g.useState(null),[b,y]=g.useState(!1),[v,p]=g.useState([]),[h,E]=g.useState(!1),[w,N]=g.useState({expedienteId:"",description:""}),[S,C]=g.useState([]),{user:k}=Te();g.useEffect(()=>{(async()=>{try{o(!0);const M=localStorage.getItem("token"),[V,K,z]=await Promise.all([ye.get("/documents",{headers:{Authorization:`Bearer ${M}`}}),ye.get("/documents/stats",{headers:{Authorization:`Bearer ${M}`}}),ye.get("/cases",{headers:{Authorization:`Bearer ${M}`}})]);t(V.data),i(K.data),C(z.data),x(null)}catch(M){console.error("Error fetching documents:",M),x("Error al cargar los documentos")}finally{o(!1)}})()},[]),g.useEffect(()=>{let T=Array.isArray(e)?e:[];c&&(T=T.filter(M=>{var V;return M.originalName.toLowerCase().includes(c.toLowerCase())||M.expediente.title.toLowerCase().includes(c.toLowerCase())||M.expediente.client.user.name.toLowerCase().includes(c.toLowerCase())||((V=M.description)==null?void 0:V.toLowerCase().includes(c.toLowerCase()))})),u!=="todos"&&(T=T.filter(M=>M.mimeType===u)),a(T)},[e,c,u]);const D=T=>{console.log("handleFileSelect called with:",T.length,"files"),console.log("Files:",T.map(V=>V.name)),console.log("Files details:",T.map(V=>({name:V.name,size:V.size,type:V.type})));const M=T.filter((V,K,z)=>K===z.findIndex(U=>U.name===V.name&&U.size===V.size));M.length!==T.length&&console.warn("Se encontraron archivos duplicados, eliminando..."),p(M)},O=()=>{p([])},A=()=>{E(!0),x(null),p([])},$=()=>{E(!1),p([]),N({expedienteId:"",description:""}),x(null)},P=async()=>{var T,M,V;if(v.length===0||!w.expedienteId){x("Por favor selecciona archivos y un expediente");return}try{y(!0),x(null);const K=localStorage.getItem("token"),z=v.map(j=>{const B=new FormData;return B.append("file",j),B.append("expedienteId",w.expedienteId),w.description&&B.append("description",w.description),ye.post("/documents/upload",B,{headers:{Authorization:`Bearer ${K}`,"Content-Type":"multipart/form-data"}})});console.log("Subiendo archivos...");const U=await Promise.all(z);console.log("Resultados de subida:",U.map(j=>j.data)),console.log("Recargando documentos...");const Y=await ye.get("/documents",{headers:{Authorization:`Bearer ${K}`}});console.log("Documentos cargados:",Y.data);const X=Y.data.filter(j=>{const B=j&&j.id&&j.originalName;return B||console.warn("Documento inválido encontrado:",j),B});t(X),$()}catch(K){console.error("Error uploading files:",K),console.error("Error response:",(T=K.response)==null?void 0:T.data),x(((V=(M=K.response)==null?void 0:M.data)==null?void 0:V.message)||"Error al subir los archivos")}finally{y(!1)}},I=async T=>{if(confirm("¿Estás seguro de que quieres eliminar este documento?"))try{const M=localStorage.getItem("token");await ye.delete(`/documents/${T}`,{headers:{Authorization:`Bearer ${M}`}}),t(V=>V.filter(K=>K.id!==T))}catch(M){console.error("Error deleting document:",M),x("Error al eliminar el documento")}},L=T=>{if(T===0)return"0 Bytes";const M=1024,V=["Bytes","KB","MB","GB"],K=Math.floor(Math.log(T)/Math.log(M));return parseFloat((T/Math.pow(M,K)).toFixed(2))+" "+V[K]},F=T=>T.includes("pdf")?"📄":T.includes("image")?"🖼️":T.includes("text")?"📝":T.includes("word")?"📄":"📎";return s?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})):n.createElement("div",{className:"py-6"},n.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"flex justify-between items-center"},n.createElement("div",null,n.createElement("h1",{className:"text-3xl font-bold text-gray-900"},"Documentos"),n.createElement("p",{className:"mt-2 text-gray-600"},"Gestiona todos los documentos legales")),n.createElement("button",{onClick:A,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"},"Subir Documentos"))),l&&n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6"},n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-blue-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Total Documentos"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},typeof l.total=="number"&&!isNaN(l.total)?l.total:0)))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-green-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Tamaño Total"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},typeof l.totalSize=="number"&&!isNaN(l.totalSize)?L(l.totalSize):"-")))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-yellow-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"PDFs"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},(Array.isArray(l.byType)?l.byType:[]).filter(T=>T.type.includes("pdf")).reduce((T,M)=>T+M.count,0))))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-purple-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 002 2z"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Imágenes"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},(Array.isArray(l.byType)?l.byType:[]).filter(T=>T.type.includes("image")).reduce((T,M)=>T+M.count,0)))))),l&&n.createElement("div",{className:"bg-white p-6 rounded-lg shadow mb-6"},n.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-4"},"Estadísticas por Tipo"),n.createElement("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-2xl font-bold text-blue-600"},(Array.isArray(l.byType)?l.byType:[]).filter(T=>T.type.includes("pdf")).reduce((T,M)=>T+M.count,0)),n.createElement("div",{className:"text-sm text-gray-600"},"PDFs")),n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-2xl font-bold text-green-600"},(Array.isArray(l.byType)?l.byType:[]).filter(T=>T.type.includes("text")).reduce((T,M)=>T+M.count,0)),n.createElement("div",{className:"text-sm text-gray-600"},"Documentos de Texto")),n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-2xl font-bold text-purple-600"},(Array.isArray(l.byType)?l.byType:[]).filter(T=>T.type.includes("image")).reduce((T,M)=>T+M.count,0)),n.createElement("div",{className:"text-sm text-gray-600"},"Imágenes")),n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-2xl font-bold text-orange-600"},(Array.isArray(l.byType)?l.byType:[]).filter(T=>T.type.includes("word")||T.type.includes("document")).reduce((T,M)=>T+M.count,0)),n.createElement("div",{className:"text-sm text-gray-600"},"Documentos Word")))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow mb-6"},n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Buscar"),n.createElement("input",{type:"text",placeholder:"Buscar por nombre, expediente o descripción...",value:c,onChange:T=>d(T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Tipo de Archivo"),n.createElement("select",{value:u,onChange:T=>m(T.target.value),"aria-label":"Filtrar por tipo de archivo",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},n.createElement("option",{value:"todos"},"Todos los tipos"),n.createElement("option",{value:"application/pdf"},"PDF"),n.createElement("option",{value:"text/plain"},"Texto"),n.createElement("option",{value:"image/jpeg"},"Imágenes"),n.createElement("option",{value:"application/msword"},"Word"))),n.createElement("div",{className:"flex items-end"},n.createElement("button",{onClick:()=>{d(""),m("todos")},className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"},"Limpiar Filtros")))),n.createElement("div",{className:"bg-white shadow rounded-lg overflow-hidden"},n.createElement("div",{className:"overflow-x-auto"},n.createElement("table",{className:"min-w-full divide-y divide-gray-200"},n.createElement("thead",{className:"bg-gray-50"},n.createElement("tr",null,n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Documento"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Expediente"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Cliente"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Tamaño"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Subido Por"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Fecha"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Acciones"))),n.createElement("tbody",{className:"bg-white divide-y divide-gray-200"},(Array.isArray(r)?r:[]).map(T=>{var M,V,K,z,U;return n.createElement("tr",{key:T.id,className:"hover:bg-gray-50"},n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("div",{className:"flex items-center"},n.createElement("span",{className:"text-2xl mr-3"},F(T.mimeType)),n.createElement("div",null,n.createElement("div",{className:"text-sm font-medium text-gray-900"},T.originalName),T.description&&n.createElement("div",{className:"text-sm text-gray-500"},T.description)))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement(Ne,{to:`/lawyer/cases/${T.expedienteId}`,className:"text-blue-600 hover:text-blue-900 text-sm"},((M=T.expediente)==null?void 0:M.title)||"Sin título")),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},((z=(K=(V=T.expediente)==null?void 0:V.client)==null?void 0:K.user)==null?void 0:z.name)||"Cliente no disponible"),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},L(T.fileSize)),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},((U=T.uploadedByUser)==null?void 0:U.name)||"Usuario no disponible"),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},new Date(T.uploadedAt).toLocaleDateString()),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium"},n.createElement("div",{className:"flex space-x-2"},n.createElement("a",{href:`/api/documents/${T.id}/download`,className:"text-blue-600 hover:text-blue-900",target:"_blank",rel:"noopener noreferrer"},"Descargar"),n.createElement("button",{onClick:()=>I(T.id),className:"text-red-600 hover:text-red-900"},"Eliminar"))))}))))),r.length===0&&n.createElement("div",{className:"text-center py-12"},n.createElement("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})),n.createElement("h3",{className:"mt-2 text-sm font-medium text-gray-900"},"No se encontraron documentos"),n.createElement("p",{className:"mt-1 text-sm text-gray-500"},"Intenta ajustar los filtros o subir nuevos documentos."))),h&&n.createElement("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},n.createElement("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},n.createElement("div",{className:"mt-3"},n.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-4"},"Subir Documentos"),f&&n.createElement("div",{className:"mb-4 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md p-2"},f),n.createElement("div",{className:"space-y-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Expediente"),n.createElement("select",{id:"expediente-select","aria-label":"Expediente",value:w.expedienteId,onChange:T=>N(M=>({...M,expedienteId:T.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},n.createElement("option",{value:""},"Selecciona un expediente"),S.map(T=>n.createElement("option",{key:T.id,value:T.id},T.title," - ",T.client.user.name)))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Descripción (opcional)"),n.createElement("textarea",{value:w.description,onChange:T=>N(M=>({...M,description:T.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Descripción del documento..."})),n.createElement(_T,{onFileSelect:D,maxFiles:5,maxSize:5*1024*1024}),v.length>0&&n.createElement("div",{className:"mt-4"},n.createElement("div",{className:"flex justify-between items-center mb-2"},n.createElement("h4",{className:"text-sm font-medium text-gray-700"},"Archivos seleccionados:"),n.createElement("button",{onClick:O,className:"text-sm text-red-600 hover:text-red-800"},"Limpiar")),n.createElement("ul",{className:"text-sm text-gray-600 space-y-1"},v.map((T,M)=>n.createElement("li",{key:M},T.name," (",L(T.size),")"))))),n.createElement("div",{className:"flex justify-end space-x-3 mt-6"},n.createElement("button",{onClick:$,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"},"Cancelar"),n.createElement("button",{onClick:P,disabled:b||v.length===0||!w.expedienteId,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"},b?"Subiendo...":"Subir Documentos"))))))},RT=()=>{const[e,t]=g.useState([]),[r,a]=g.useState([]),[s,o]=g.useState(!0),[l,i]=g.useState(""),[c,d]=g.useState("todos"),[u,m]=g.useState(null),{user:f}=Te();g.useEffect(()=>{(async()=>{try{o(!0);const h=localStorage.getItem("token"),E=await J.get("/documents",{headers:{Authorization:`Bearer ${h}`}});t(E.data),m(null)}catch(h){console.error("Error fetching documents:",h),m("Error al cargar los documentos")}finally{o(!1)}})()},[]),g.useEffect(()=>{let p=e;l&&(p=p.filter(h=>{var E;return h.originalName.toLowerCase().includes(l.toLowerCase())||h.expediente.title.toLowerCase().includes(l.toLowerCase())||((E=h.description)==null?void 0:E.toLowerCase().includes(l.toLowerCase()))})),c!=="todos"&&(p=p.filter(h=>h.mimeType===c)),a(p)},[e,l,c]);const x=p=>{if(p===0)return"0 Bytes";const h=1024,E=["Bytes","KB","MB","GB"],w=Math.floor(Math.log(p)/Math.log(h));return parseFloat((p/Math.pow(h,w)).toFixed(2))+" "+E[w]},b=p=>p.includes("pdf")?"📄":p.includes("image")?"🖼️":p.includes("text")?"📝":p.includes("word")?"📄":"📎",y=p=>{switch(p){case"ABIERTO":return"bg-green-100 text-green-800";case"EN_PROCESO":return"bg-yellow-100 text-yellow-800";case"CERRADO":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},v=p=>{switch(p){case"ABIERTO":return"Abierto";case"EN_PROCESO":return"En Proceso";case"CERRADO":return"Cerrado";default:return p}};return s?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})):u?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-red-600 text-xl mb-4"},"Error"),n.createElement("div",{className:"text-gray-600"},u),n.createElement("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},"Reintentar"))):n.createElement("div",{className:"py-6"},n.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"mb-8"},n.createElement("div",null,n.createElement("h1",{className:"text-3xl font-bold text-gray-900"},"Mis Documentos"),n.createElement("p",{className:"mt-2 text-gray-600"},"Accede a todos los documentos de tus expedientes"))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow mb-6"},n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Buscar"),n.createElement("input",{type:"text",placeholder:"Buscar por nombre de documento o expediente...",value:l,onChange:p=>i(p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Tipo de Archivo"),n.createElement("select",{value:c,onChange:p=>d(p.target.value),"aria-label":"Filtrar por tipo de archivo",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},n.createElement("option",{value:"todos"},"Todos los tipos"),n.createElement("option",{value:"application/pdf"},"PDF"),n.createElement("option",{value:"text/plain"},"Texto"),n.createElement("option",{value:"image/jpeg"},"Imágenes"),n.createElement("option",{value:"application/msword"},"Word"))),n.createElement("div",{className:"flex items-end"},n.createElement("button",{onClick:()=>{i(""),d("todos")},className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"},"Limpiar Filtros")))),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},r.map(p=>n.createElement("div",{key:p.id,className:"bg-white shadow rounded-lg overflow-hidden"},n.createElement("div",{className:"p-6"},n.createElement("div",{className:"flex items-center justify-between mb-4"},n.createElement("span",{className:"text-3xl"},b(p.mimeType)),n.createElement("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${y(p.expediente.status)}`},v(p.expediente.status))),n.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-2 truncate"},p.originalName),p.description&&n.createElement("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2"},p.description),n.createElement("div",{className:"space-y-2 mb-4"},n.createElement("div",{className:"flex items-center text-sm text-gray-500"},n.createElement("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})),p.expediente.title),n.createElement("div",{className:"flex items-center text-sm text-gray-500"},n.createElement("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})),p.uploadedBy.name),n.createElement("div",{className:"flex items-center text-sm text-gray-500"},n.createElement("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"})),x(p.fileSize)),n.createElement("div",{className:"flex items-center text-sm text-gray-500"},n.createElement("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})),new Date(p.uploadedAt).toLocaleDateString())),n.createElement("div",{className:"flex space-x-2"},n.createElement("a",{href:`/api/documents/${p.id}/download`,className:"flex-1 px-3 py-2 bg-blue-600 text-white text-center text-sm rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",target:"_blank",rel:"noopener noreferrer"},"Descargar"),n.createElement("button",{className:"px-3 py-2 bg-green-600 text-white text-sm rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2"},"Ver")))))),r.length===0&&n.createElement("div",{className:"text-center py-12"},n.createElement("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})),n.createElement("h3",{className:"mt-2 text-sm font-medium text-gray-900"},"No se encontraron documentos"),n.createElement("p",{className:"mt-1 text-sm text-gray-500"},e.length===0?"Aún no tienes documentos en tus expedientes.":"Intenta ajustar los filtros de búsqueda."))))},MT=()=>{const e=qr(),{id:t}=Mh(),{user:r}=Te(),[a,s]=g.useState(!0),[o,l]=g.useState(!1),[i,c]=g.useState(null),[d,u]=g.useState([]),[m,f]=g.useState([]),[x,b]=g.useState({title:"",description:"",clientId:"",lawyerId:(r==null?void 0:r.role)==="ABOGADO"?r.id:""});g.useEffect(()=>{(async()=>{var h,E;try{s(!0);const w=localStorage.getItem("token"),[N,S,C]=await Promise.all([J.get("/users/clients"),J.get("/users/lawyers"),J.get(`/cases/${t}`)]);u(N.data),f(S.data);const k=C.data;b({title:k.title||"",description:k.description||"",clientId:((h=k.client)==null?void 0:h.id)||"",lawyerId:((E=k.lawyer)==null?void 0:E.id)||((r==null?void 0:r.role)==="ABOGADO"?r.id:"")}),c(null)}catch(w){console.error("Error fetching data:",w),c("Error al cargar los datos del expediente")}finally{s(!1)}})()},[t,r]);const y=p=>{const{name:h,value:E}=p.target;b(w=>({...w,[h]:E}))},v=async p=>{var h,E;if(p.preventDefault(),!x.title||!x.clientId||!x.lawyerId){c("Por favor completa todos los campos obligatorios");return}try{l(!0),c(null),await J.patch(`/cases/${t}`,x),e(`/lawyer/cases/${t}`)}catch(w){console.error("Error updating case:",w),c(((E=(h=w.response)==null?void 0:h.data)==null?void 0:E.message)||"Error al actualizar el expediente")}finally{l(!1)}};return a?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})):n.createElement("div",{className:"py-6"},n.createElement("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"flex items-center justify-between"},n.createElement("div",null,n.createElement("h1",{className:"text-3xl font-bold text-gray-900"},"Editar Expediente"),n.createElement("p",{className:"mt-2 text-gray-600"},"Modifica los datos del expediente legal")),n.createElement("button",{onClick:()=>e(`/lawyer/cases/${t}`),className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"},"Cancelar"))),n.createElement("div",{className:"bg-white shadow rounded-lg"},n.createElement("form",{onSubmit:v,className:"p-6 space-y-6"},i&&n.createElement("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md"},i),n.createElement("div",null,n.createElement("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2"},"Título del Expediente *"),n.createElement("input",{type:"text",id:"title",name:"title",value:x.title,onChange:y,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: Contrato de Compraventa"})),n.createElement("div",null,n.createElement("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2"},"Descripción"),n.createElement("textarea",{id:"description",name:"description",value:x.description,onChange:y,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe brevemente el caso..."})),n.createElement("div",null,n.createElement("label",{htmlFor:"clientId",className:"block text-sm font-medium text-gray-700 mb-2"},"Cliente *"),n.createElement("select",{id:"clientId",name:"clientId",value:x.clientId,onChange:y,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},n.createElement("option",{value:""},"Selecciona un cliente"),d.filter(p=>p.user).length===0&&n.createElement("option",{disabled:!0,value:""},"No hay clientes disponibles"),d.filter(p=>p.user).map(p=>{var h,E;return n.createElement("option",{key:p.id,value:p.id},((h=p.user)==null?void 0:h.name)||"Sin nombre"," - ",((E=p.user)==null?void 0:E.email)||"Sin email"," (DNI: ",p.dni,")")}))),n.createElement("div",null,n.createElement("label",{htmlFor:"lawyerId",className:"block text-sm font-medium text-gray-700 mb-2"},"Abogado Asignado *"),n.createElement("select",{id:"lawyerId",name:"lawyerId",value:x.lawyerId,onChange:y,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:(r==null?void 0:r.role)==="ABOGADO"},n.createElement("option",{value:""},"Selecciona un abogado"),m.map(p=>n.createElement("option",{key:p.id,value:p.id},p.name," - ",p.email))),(r==null?void 0:r.role)==="ABOGADO"&&n.createElement("p",{className:"mt-1 text-sm text-gray-500"},"Serás asignado automáticamente como abogado responsable")),n.createElement("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200"},n.createElement("button",{type:"button",onClick:()=>e(`/lawyer/cases/${t}`),className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"},"Cancelar"),n.createElement("button",{type:"submit",disabled:o,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"},o?"Guardando...":"Guardar Cambios"))))))};function ta(e){"@babel/helpers - typeof";return ta=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ta(e)}function PT(e,t){if(ta(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(ta(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qw(e){var t=PT(e,"string");return ta(t)=="symbol"?t:t+""}function Xa(e,t,r){return(t=Qw(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Qe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Yv(Object(r),!0).forEach(function(a){Xa(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yv(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function ud(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function _n(e,t){if(e==null)return{};var r,a,s=ud(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Rt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qv(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,Qw(a.key),a)}}function Mt(e,t,r){return t&&qv(e.prototype,t),r&&qv(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function vu(e){return vu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},vu(e)}function Jw(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Jw=function(){return!!e})()}function LT(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function IT(e,t){if(t&&(ta(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LT(e)}function Xt(e,t,r){return t=vu(t),IT(e,Jw()?Reflect.construct(t,r||[],vu(e).constructor):t.apply(e,r))}function yu(e,t){return yu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},yu(e,t)}function Qt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&yu(e,t)}function Zw(e){if(Array.isArray(e))return e}function $T(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,o,l,i=[],c=!0,d=!1;try{if(o=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(a=o.call(r)).done)&&(i.push(a.value),i.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw s}}return i}}function ip(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function Wh(e,t){if(e){if(typeof e=="string")return ip(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ip(e,t):void 0}}function eN(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jr(e,t){return Zw(e)||$T(e,t)||Wh(e,t)||eN()}function tN(e){var t,r,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=tN(e[t]))&&(a&&(a+=" "),a+=r);else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}function xt(){for(var e,t,r=0,a="";r<arguments.length;)(e=arguments[r++])&&(t=tN(e))&&(a&&(a+=" "),a+=t);return a}function Et(){return Et=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Et.apply(null,arguments)}var FT=function(e,t,r,a,s,o,l,i){if(!e){var c;if(t===void 0)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[r,a,s,o,l,i],u=0;c=new Error(t.replace(/%s/g,function(){return d[u++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}},jT=FT;const Wl=gr(jT);var BT=function(){};function zT(e,t){var r={};return Object.keys(e).forEach(function(a){r[Mc(a)]=BT}),r}function Gv(e,t){return e[t]!==void 0}function Mc(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function UT(e){return!!e&&(typeof e!="function"||e.prototype&&e.prototype.isReactComponent)}function VT(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,yu(e,t)}function rN(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);e!=null&&this.setState(e)}function nN(e){function t(r){var a=this.constructor.getDerivedStateFromProps(e,r);return a??null}this.setState(t.bind(this))}function aN(e,t){try{var r=this.props,a=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(r,a)}finally{this.props=r,this.state=a}}rN.__suppressDeprecationWarning=!0;nN.__suppressDeprecationWarning=!0;aN.__suppressDeprecationWarning=!0;function WT(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if(typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function")return e;var r=null,a=null,s=null;if(typeof t.componentWillMount=="function"?r="componentWillMount":typeof t.UNSAFE_componentWillMount=="function"&&(r="UNSAFE_componentWillMount"),typeof t.componentWillReceiveProps=="function"?a="componentWillReceiveProps":typeof t.UNSAFE_componentWillReceiveProps=="function"&&(a="UNSAFE_componentWillReceiveProps"),typeof t.componentWillUpdate=="function"?s="componentWillUpdate":typeof t.UNSAFE_componentWillUpdate=="function"&&(s="UNSAFE_componentWillUpdate"),r!==null||a!==null||s!==null){var o=e.displayName||e.name,l=typeof e.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+o+" uses "+l+" but also contains the following legacy lifecycles:"+(r!==null?`
  `+r:"")+(a!==null?`
  `+a:"")+(s!==null?`
  `+s:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof e.getDerivedStateFromProps=="function"&&(t.componentWillMount=rN,t.componentWillReceiveProps=nN),typeof t.getSnapshotBeforeUpdate=="function"){if(typeof t.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=aN;var i=t.componentDidUpdate;t.componentDidUpdate=function(d,u,m){var f=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:m;i.call(this,d,u,f)}}return e}var HT="/Users/jquense/src/uncontrollable/src/uncontrollable.js";function sN(e,t,r){r===void 0&&(r=[]);var a=e.displayName||e.name||"Component",s=UT(e),o=Object.keys(t),l=o.map(Mc);s||!r.length||Wl(!1);var i=function(d){VT(u,d);function u(){for(var f,x=arguments.length,b=new Array(x),y=0;y<x;y++)b[y]=arguments[y];f=d.call.apply(d,[this].concat(b))||this,f.handlers=Object.create(null),o.forEach(function(p){var h=t[p],E=function(N){if(f.props[h]){var S;f._notifying=!0;for(var C=arguments.length,k=new Array(C>1?C-1:0),D=1;D<C;D++)k[D-1]=arguments[D];(S=f.props)[h].apply(S,[N].concat(k)),f._notifying=!1}f.unmounted||f.setState(function(O){var A,$=O.values;return{values:Et(Object.create(null),$,(A={},A[p]=N,A))}})};f.handlers[h]=E}),r.length&&(f.attachRef=function(p){f.inner=p});var v=Object.create(null);return o.forEach(function(p){v[p]=f.props[Mc(p)]}),f.state={values:v,prevProps:{}},f}var m=u.prototype;return m.shouldComponentUpdate=function(){return!this._notifying},u.getDerivedStateFromProps=function(x,b){var y=b.values,v=b.prevProps,p={values:Et(Object.create(null),y),prevProps:{}};return o.forEach(function(h){p.prevProps[h]=x[h],!Gv(x,h)&&Gv(v,h)&&(p.values[h]=x[Mc(h)])}),p},m.componentWillUnmount=function(){this.unmounted=!0},m.render=function(){var x=this,b=this.props,y=b.innerRef,v=ud(b,["innerRef"]);l.forEach(function(h){delete v[h]});var p={};return o.forEach(function(h){var E=x.props[h];p[h]=E!==void 0?E:x.state.values[h]}),n.createElement(e,Et({},v,p,this.handlers,{ref:y||this.attachRef}))},u}(n.Component);WT(i),i.displayName="Uncontrolled("+a+")",i.propTypes=Et({innerRef:function(){}},zT(t)),r.forEach(function(d){i.prototype[d]=function(){var m;return(m=this.inner)[d].apply(m,arguments)}});var c=i;return n.forwardRef&&(c=n.forwardRef(function(d,u){return n.createElement(i,Et({},d,{innerRef:u,__source:{fileName:HT,lineNumber:128},__self:this}))}),c.propTypes=i.propTypes),c.ControlledComponent=e,c.deferControlTo=function(d,u,m){return u===void 0&&(u={}),sN(d,Et({},t,u),m)},c}var oN={exports:{}},YT="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",qT=YT,GT=qT;function lN(){}function iN(){}iN.resetWarningCache=lN;var KT=function(){function e(a,s,o,l,i,c){if(c!==GT){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:iN,resetWarningCache:lN};return r.PropTypes=r,r};oN.exports=KT();var Hh=oN.exports;const te=gr(Hh);var Eu="milliseconds",Hl="seconds",Yl="minutes",ql="hours",hs="day",io="week",Gl="month",gs="year",vs="decade",ys="century",cN={milliseconds:1,seconds:1e3,minutes:60*1e3,hours:60*60*1e3,day:24*60*60*1e3,week:7*24*60*60*1e3},XT={month:1,year:12,decade:10*12,century:100*12};function QT(e){return[31,JT(e),31,30,31,30,31,31,30,31,30,31]}function JT(e){return e%4===0&&e%100!==0||e%400===0?29:28}function un(e,t,r){switch(e=new Date(e),r){case Eu:case Hl:case Yl:case ql:case hs:case io:return ZT(e,t*cN[r]);case Gl:case gs:case vs:case ys:return e_(e,t*XT[r])}throw new TypeError('Invalid units: "'+r+'"')}function ZT(e,t){var r=new Date(+e+t);return t_(e,r)}function e_(e,t){var r=e.getFullYear(),a=e.getMonth(),s=e.getDate(),o=r*12+a+t,l=Math.trunc(o/12),i=o%12,c=Math.min(s,QT(l)[i]),d=new Date(e);return d.setFullYear(l),d.setDate(1),d.setMonth(i),d.setDate(c),d}function t_(e,t){var r=e.getTimezoneOffset(),a=t.getTimezoneOffset(),s=a-r;return new Date(+t+s*cN.minutes)}function Kl(e,t,r){return un(e,-t,r)}function Ut(e,t,r){switch(e=new Date(e),t){case ys:case vs:case gs:e=bu(e,0);case Gl:e=pN(e,1);case io:case hs:e=Jl(e,0);case ql:e=co(e,0);case Yl:e=Ql(e,0);case Hl:e=Xl(e,0)}return t===vs&&(e=Kl(e,Es(e)%10,"year")),t===ys&&(e=Kl(e,Es(e)%100,"year")),t===io&&(e=hN(e,0,r)),e}function xu(e,t,r){switch(e=new Date(e),e=Ut(e,t,r),t){case ys:case vs:case gs:case Gl:case io:e=un(e,1,t),e=Kl(e,1,hs),e.setHours(23,59,59,999);break;case hs:e.setHours(23,59,59,999);break;case ql:case Yl:case Hl:e=un(e,1,t),e=Kl(e,1,Eu)}return e}var vi=Co(function(e,t){return e===t}),Yh=Co(function(e,t){return e!==t}),dd=Co(function(e,t){return e>t}),yi=Co(function(e,t){return e>=t}),qh=Co(function(e,t){return e<t}),So=Co(function(e,t){return e<=t});function uN(){return new Date(Math.min.apply(Math,arguments))}function dN(){return new Date(Math.max.apply(Math,arguments))}function mN(e,t,r,a){return a=a||"day",(!t||yi(e,t,a))&&(!r||So(e,r,a))}var Xl=za("Milliseconds"),Ql=za("Seconds"),co=za("Minutes"),Jl=za("Hours"),fN=za("Day"),pN=za("Date"),bu=za("Month"),Es=za("FullYear");function r_(e,t){return t===void 0?Es(Ut(e,vs)):un(e,t+10,gs)}function n_(e,t){return t===void 0?Es(Ut(e,ys)):un(e,t+100,gs)}function hN(e,t,r){var a=(fN(e)+7-(r||0))%7;return t===void 0?a:un(e,t-a,hs)}function a_(e,t,r,a){var s,o,l;switch(r){case Eu:case Hl:case Yl:case ql:case hs:case io:s=t.getTime()-e.getTime();break;case Gl:case gs:case vs:case ys:s=(Es(t)-Es(e))*12+bu(t)-bu(e);break;default:throw new TypeError('Invalid units: "'+r+'"')}switch(r){case Eu:o=1;break;case Hl:o=1e3;break;case Yl:o=1e3*60;break;case ql:o=1e3*60*60;break;case hs:o=1e3*60*60*24;break;case io:o=1e3*60*60*24*7;break;case Gl:o=1;break;case gs:o=12;break;case vs:o=120;break;case ys:o=1200;break;default:throw new TypeError('Invalid units: "'+r+'"')}return l=s/o,a?l:Math.round(l)}function za(e){var t=function(r){switch(r){case"Milliseconds":return 36e5;case"Seconds":return 3600;case"Minutes":return 60;case"Hours":return 1;default:return null}}(e);return function(r,a){if(a===void 0)return r["get"+e]();var s=new Date(r);return s["set"+e](a),t&&s["get"+e]()!=a&&(e==="Hours"||a>=t&&s.getHours()-r.getHours()<Math.floor(a/t))&&s["set"+e](a+t),s}}function Co(e){return function(t,r,a){return e(+Ut(t,a),+Ut(r,a))}}const Kv=Object.freeze(Object.defineProperty({__proto__:null,add:un,century:n_,date:pN,day:fN,decade:r_,diff:a_,endOf:xu,eq:vi,gt:dd,gte:yi,hours:Jl,inRange:mN,lt:qh,lte:So,max:dN,milliseconds:Xl,min:uN,minutes:co,month:bu,neq:Yh,seconds:Ql,startOf:Ut,subtract:Kl,weekday:hN,year:Es},Symbol.toStringTag,{value:"Module"}));function s_(e){if(Array.isArray(e))return ip(e)}function gN(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function o_(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pc(e){return s_(e)||gN(e)||Wh(e)||o_()}function l_(e,t,r){var a=-1,s=e.length;t<0&&(t=-t>s?0:s+t),r=r>s?s:r,r<0&&(r+=s),s=t>r?0:r-t>>>0,t>>>=0;for(var o=Array(s);++a<s;)o[a]=e[a+t];return o}var vN=l_;function i_(e,t){return e===t||e!==e&&t!==t}var Ei=i_,c_=typeof Br=="object"&&Br&&Br.Object===Object&&Br,yN=c_,u_=yN,d_=typeof self=="object"&&self&&self.Object===Object&&self,m_=u_||d_||Function("return this")(),Pn=m_,f_=Pn,p_=f_.Symbol,ko=p_,Xv=ko,EN=Object.prototype,h_=EN.hasOwnProperty,g_=EN.toString,Qo=Xv?Xv.toStringTag:void 0;function v_(e){var t=h_.call(e,Qo),r=e[Qo];try{e[Qo]=void 0;var a=!0}catch{}var s=g_.call(e);return a&&(t?e[Qo]=r:delete e[Qo]),s}var y_=v_,E_=Object.prototype,x_=E_.toString;function b_(e){return x_.call(e)}var w_=b_,Qv=ko,N_=y_,S_=w_,C_="[object Null]",k_="[object Undefined]",Jv=Qv?Qv.toStringTag:void 0;function D_(e){return e==null?e===void 0?k_:C_:Jv&&Jv in Object(e)?N_(e):S_(e)}var Do=D_;function A_(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var sa=A_,T_=Do,__=sa,O_="[object AsyncFunction]",R_="[object Function]",M_="[object GeneratorFunction]",P_="[object Proxy]";function L_(e){if(!__(e))return!1;var t=T_(e);return t==R_||t==M_||t==O_||t==P_}var Gh=L_,I_=9007199254740991;function $_(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=I_}var Kh=$_,F_=Gh,j_=Kh;function B_(e){return e!=null&&j_(e.length)&&!F_(e)}var xi=B_,z_=9007199254740991,U_=/^(?:0|[1-9]\d*)$/;function V_(e,t){var r=typeof e;return t=t??z_,!!t&&(r=="number"||r!="symbol"&&U_.test(e))&&e>-1&&e%1==0&&e<t}var Xh=V_,W_=Ei,H_=xi,Y_=Xh,q_=sa;function G_(e,t,r){if(!q_(r))return!1;var a=typeof t;return(a=="number"?H_(r)&&Y_(t,r.length):a=="string"&&t in r)?W_(r[t],e):!1}var md=G_,K_=/\s/;function X_(e){for(var t=e.length;t--&&K_.test(e.charAt(t)););return t}var Q_=X_,J_=Q_,Z_=/^\s+/;function e6(e){return e&&e.slice(0,J_(e)+1).replace(Z_,"")}var t6=e6;function r6(e){return e!=null&&typeof e=="object"}var Ua=r6,n6=Do,a6=Ua,s6="[object Symbol]";function o6(e){return typeof e=="symbol"||a6(e)&&n6(e)==s6}var bi=o6,l6=t6,Zv=sa,i6=bi,ey=NaN,c6=/^[-+]0x[0-9a-f]+$/i,u6=/^0b[01]+$/i,d6=/^0o[0-7]+$/i,m6=parseInt;function f6(e){if(typeof e=="number")return e;if(i6(e))return ey;if(Zv(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Zv(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=l6(e);var r=u6.test(e);return r||d6.test(e)?m6(e.slice(2),r?2:8):c6.test(e)?ey:+e}var p6=f6,h6=p6,ty=1/0,g6=17976931348623157e292;function v6(e){if(!e)return e===0?e:0;if(e=h6(e),e===ty||e===-ty){var t=e<0?-1:1;return t*g6}return e===e?e:0}var xN=v6,y6=xN;function E6(e){var t=y6(e),r=t%1;return t===t?r?t-r:t:0}var bN=E6,x6=vN,b6=md,w6=bN,N6=Math.ceil,S6=Math.max;function C6(e,t,r){(r?b6(e,t,r):t===void 0)?t=1:t=S6(w6(t),0);var a=e==null?0:e.length;if(!a||t<1)return[];for(var s=0,o=0,l=Array(N6(a/t));s<a;)l[o++]=x6(e,s,s+=t);return l}var k6=C6;const D6=gr(k6);function wi(e){return e&&e.ownerDocument||document}function A6(e){var t=wi(e);return t&&t.defaultView||window}function T6(e,t){return A6(e).getComputedStyle(e,t)}var _6=/([A-Z])/g;function O6(e){return e.replace(_6,"-$1").toLowerCase()}var R6=/^ms-/;function nc(e){return O6(e).replace(R6,"-ms-")}var M6=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function P6(e){return!!(e&&M6.test(e))}function As(e,t){var r="",a="";if(typeof t=="string")return e.style.getPropertyValue(nc(t))||T6(e).getPropertyValue(nc(t));Object.keys(t).forEach(function(s){var o=t[s];!o&&o!==0?e.style.removeProperty(nc(s)):P6(s)?a+=s+"("+o+") ":r+=nc(s)+": "+o+";"}),a&&(r+="transform: "+a+";"),e.style.cssText+=";"+r}function Zl(e,t){if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return e===t||!!(e.compareDocumentPosition(t)&16)}function L6(e){return"nodeType"in e&&e.nodeType===document.DOCUMENT_NODE}function Qh(e){return"window"in e&&e.window===e?e:L6(e)&&e.defaultView||!1}function wN(e){var t=e==="pageXOffset"?"scrollLeft":"scrollTop";function r(a,s){var o=Qh(a);if(s===void 0)return o?o[e]:a[t];o?o.scrollTo(o[e],s):a[t]=s}return r}const NN=wN("pageXOffset"),SN=wN("pageYOffset");function os(e){var t=wi(e),r={top:0,left:0,height:0,width:0},a=t&&t.documentElement;return!a||!Zl(a,e)||(e.getBoundingClientRect!==void 0&&(r=e.getBoundingClientRect()),r={top:r.top+SN(a)-(a.clientTop||0),left:r.left+NN(a)-(a.clientLeft||0),width:r.width,height:r.height}),r}var I6=function(t){return!!t&&"offsetParent"in t};function $6(e){for(var t=wi(e),r=e&&e.offsetParent;I6(r)&&r.nodeName!=="HTML"&&As(r,"position")==="static";)r=r.offsetParent;return r||t.documentElement}var F6=function(t){return t.nodeName&&t.nodeName.toLowerCase()};function CN(e,t){var r={top:0,left:0},a;if(As(e,"position")==="fixed")a=e.getBoundingClientRect();else{var s=t||$6(e);a=os(e),F6(s)!=="html"&&(r=os(s));var o=String(As(s,"borderTopWidth")||0);r.top+=parseInt(o,10)-SN(s)||0;var l=String(As(s,"borderLeftWidth")||0);r.left+=parseInt(l,10)-NN(s)||0}var i=String(As(e,"marginTop")||0),c=String(As(e,"marginLeft")||0);return Et({},a,{top:a.top-r.top-(parseInt(i,10)||0),left:a.left-r.left-(parseInt(c,10)||0)})}const Jh=!!(typeof window<"u"&&window.document&&window.document.createElement);var ry=new Date().getTime();function j6(e){var t=new Date().getTime(),r=Math.max(0,16-(t-ry)),a=setTimeout(e,r);return ry=t,a}var B6=["","webkit","moz","o","ms"],cp="clearTimeout",up=j6,ny=function(t,r){return t+(t?r[0].toUpperCase()+r.substr(1):r)+"AnimationFrame"};Jh&&B6.some(function(e){var t=ny(e,"request");return t in window&&(cp=ny(e,"cancel"),up=function(a){return window[t](a)}),!!up});var ay=function(t){typeof window[cp]=="function"&&window[cp](t)},kN=up,Mm;function z6(e,t){if(!Mm){var r=document.body,a=r.matches||r.matchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector;Mm=function(o,l){return a.call(o,l)}}return Mm(e,t)}var U6=Function.prototype.bind.call(Function.prototype.call,[].slice);function V6(e,t){return U6(e.querySelectorAll(t))}var dp=!1,mp=!1;try{var Pm={get passive(){return dp=!0},get once(){return mp=dp=!0}};Jh&&(window.addEventListener("test",Pm,Pm),window.removeEventListener("test",Pm,!0))}catch{}function W6(e,t,r,a){if(a&&typeof a!="boolean"&&!mp){var s=a.once,o=a.capture,l=r;!mp&&s&&(l=r.__once||function i(c){this.removeEventListener(t,i,o),r.call(this,c)},r.__once=l),e.addEventListener(t,l,dp?a:o)}e.addEventListener(t,r,a)}function H6(e){const t=g.useRef(e);return g.useEffect(()=>{t.current=e},[e]),t}function sy(e){const t=H6(e);return g.useCallback(function(...r){return t.current&&t.current(...r)},[t])}function oy(){return g.useState(null)}function Y6(){const e=g.useRef(!0),t=g.useRef(()=>e.current);return g.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}function q6(e){const t=Y6();return[e[0],g.useCallback(r=>{if(t())return e[1](r)},[t,e[1]])]}var fr="top",Hr="bottom",Yr="right",pr="left",Zh="auto",Ni=[fr,Hr,Yr,pr],uo="start",ei="end",G6="clippingParents",DN="viewport",Jo="popper",K6="reference",ly=Ni.reduce(function(e,t){return e.concat([t+"-"+uo,t+"-"+ei])},[]),eg=[].concat(Ni,[Zh]).reduce(function(e,t){return e.concat([t,t+"-"+uo,t+"-"+ei])},[]),X6="beforeRead",Q6="read",J6="afterRead",Z6="beforeMain",e3="main",t3="afterMain",r3="beforeWrite",n3="write",a3="afterWrite",s3=[X6,Q6,J6,Z6,e3,t3,r3,n3,a3];function Dn(e){return e.split("-")[0]}function Sr(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function xs(e){var t=Sr(e).Element;return e instanceof t||e instanceof Element}function An(e){var t=Sr(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function tg(e){if(typeof ShadowRoot>"u")return!1;var t=Sr(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}var ls=Math.max,wu=Math.min,mo=Math.round;function fp(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function AN(){return!/^((?!chrome|android).)*safari/i.test(fp())}function fo(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var a=e.getBoundingClientRect(),s=1,o=1;t&&An(e)&&(s=e.offsetWidth>0&&mo(a.width)/e.offsetWidth||1,o=e.offsetHeight>0&&mo(a.height)/e.offsetHeight||1);var l=xs(e)?Sr(e):window,i=l.visualViewport,c=!AN()&&r,d=(a.left+(c&&i?i.offsetLeft:0))/s,u=(a.top+(c&&i?i.offsetTop:0))/o,m=a.width/s,f=a.height/o;return{width:m,height:f,top:u,right:d+m,bottom:u+f,left:d,x:d,y:u}}function rg(e){var t=fo(e),r=e.offsetWidth,a=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-a)<=1&&(a=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:a}}function TN(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&tg(r)){var a=t;do{if(a&&e.isSameNode(a))return!0;a=a.parentNode||a.host}while(a)}return!1}function Pa(e){return e?(e.nodeName||"").toLowerCase():null}function ra(e){return Sr(e).getComputedStyle(e)}function o3(e){return["table","td","th"].indexOf(Pa(e))>=0}function Va(e){return((xs(e)?e.ownerDocument:e.document)||window.document).documentElement}function fd(e){return Pa(e)==="html"?e:e.assignedSlot||e.parentNode||(tg(e)?e.host:null)||Va(e)}function iy(e){return!An(e)||ra(e).position==="fixed"?null:e.offsetParent}function l3(e){var t=/firefox/i.test(fp()),r=/Trident/i.test(fp());if(r&&An(e)){var a=ra(e);if(a.position==="fixed")return null}var s=fd(e);for(tg(s)&&(s=s.host);An(s)&&["html","body"].indexOf(Pa(s))<0;){var o=ra(s);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||t&&o.willChange==="filter"||t&&o.filter&&o.filter!=="none")return s;s=s.parentNode}return null}function Si(e){for(var t=Sr(e),r=iy(e);r&&o3(r)&&ra(r).position==="static";)r=iy(r);return r&&(Pa(r)==="html"||Pa(r)==="body"&&ra(r).position==="static")?t:r||l3(e)||t}function ng(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function yl(e,t,r){return ls(e,wu(t,r))}function i3(e,t,r){var a=yl(e,t,r);return a>r?r:a}function _N(){return{top:0,right:0,bottom:0,left:0}}function ON(e){return Object.assign({},_N(),e)}function RN(e,t){return t.reduce(function(r,a){return r[a]=e,r},{})}var c3=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,ON(typeof t!="number"?t:RN(t,Ni))};function u3(e){var t,r=e.state,a=e.name,s=e.options,o=r.elements.arrow,l=r.modifiersData.popperOffsets,i=Dn(r.placement),c=ng(i),d=[pr,Yr].indexOf(i)>=0,u=d?"height":"width";if(!(!o||!l)){var m=c3(s.padding,r),f=rg(o),x=c==="y"?fr:pr,b=c==="y"?Hr:Yr,y=r.rects.reference[u]+r.rects.reference[c]-l[c]-r.rects.popper[u],v=l[c]-r.rects.reference[c],p=Si(o),h=p?c==="y"?p.clientHeight||0:p.clientWidth||0:0,E=y/2-v/2,w=m[x],N=h-f[u]-m[b],S=h/2-f[u]/2+E,C=yl(w,S,N),k=c;r.modifiersData[a]=(t={},t[k]=C,t.centerOffset=C-S,t)}}function d3(e){var t=e.state,r=e.options,a=r.element,s=a===void 0?"[data-popper-arrow]":a;s!=null&&(typeof s=="string"&&(s=t.elements.popper.querySelector(s),!s)||TN(t.elements.popper,s)&&(t.elements.arrow=s))}const m3={name:"arrow",enabled:!0,phase:"main",fn:u3,effect:d3,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function po(e){return e.split("-")[1]}var f3={top:"auto",right:"auto",bottom:"auto",left:"auto"};function p3(e,t){var r=e.x,a=e.y,s=t.devicePixelRatio||1;return{x:mo(r*s)/s||0,y:mo(a*s)/s||0}}function cy(e){var t,r=e.popper,a=e.popperRect,s=e.placement,o=e.variation,l=e.offsets,i=e.position,c=e.gpuAcceleration,d=e.adaptive,u=e.roundOffsets,m=e.isFixed,f=l.x,x=f===void 0?0:f,b=l.y,y=b===void 0?0:b,v=typeof u=="function"?u({x,y}):{x,y};x=v.x,y=v.y;var p=l.hasOwnProperty("x"),h=l.hasOwnProperty("y"),E=pr,w=fr,N=window;if(d){var S=Si(r),C="clientHeight",k="clientWidth";if(S===Sr(r)&&(S=Va(r),ra(S).position!=="static"&&i==="absolute"&&(C="scrollHeight",k="scrollWidth")),S=S,s===fr||(s===pr||s===Yr)&&o===ei){w=Hr;var D=m&&S===N&&N.visualViewport?N.visualViewport.height:S[C];y-=D-a.height,y*=c?1:-1}if(s===pr||(s===fr||s===Hr)&&o===ei){E=Yr;var O=m&&S===N&&N.visualViewport?N.visualViewport.width:S[k];x-=O-a.width,x*=c?1:-1}}var A=Object.assign({position:i},d&&f3),$=u===!0?p3({x,y},Sr(r)):{x,y};if(x=$.x,y=$.y,c){var P;return Object.assign({},A,(P={},P[w]=h?"0":"",P[E]=p?"0":"",P.transform=(N.devicePixelRatio||1)<=1?"translate("+x+"px, "+y+"px)":"translate3d("+x+"px, "+y+"px, 0)",P))}return Object.assign({},A,(t={},t[w]=h?y+"px":"",t[E]=p?x+"px":"",t.transform="",t))}function h3(e){var t=e.state,r=e.options,a=r.gpuAcceleration,s=a===void 0?!0:a,o=r.adaptive,l=o===void 0?!0:o,i=r.roundOffsets,c=i===void 0?!0:i,d={placement:Dn(t.placement),variation:po(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:s,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,cy(Object.assign({},d,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:l,roundOffsets:c})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,cy(Object.assign({},d,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const g3={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:h3,data:{}};var ac={passive:!0};function v3(e){var t=e.state,r=e.instance,a=e.options,s=a.scroll,o=s===void 0?!0:s,l=a.resize,i=l===void 0?!0:l,c=Sr(t.elements.popper),d=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&d.forEach(function(u){u.addEventListener("scroll",r.update,ac)}),i&&c.addEventListener("resize",r.update,ac),function(){o&&d.forEach(function(u){u.removeEventListener("scroll",r.update,ac)}),i&&c.removeEventListener("resize",r.update,ac)}}const y3={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:v3,data:{}};var E3={left:"right",right:"left",bottom:"top",top:"bottom"};function Lc(e){return e.replace(/left|right|bottom|top/g,function(t){return E3[t]})}var x3={start:"end",end:"start"};function uy(e){return e.replace(/start|end/g,function(t){return x3[t]})}function ag(e){var t=Sr(e),r=t.pageXOffset,a=t.pageYOffset;return{scrollLeft:r,scrollTop:a}}function sg(e){return fo(Va(e)).left+ag(e).scrollLeft}function b3(e,t){var r=Sr(e),a=Va(e),s=r.visualViewport,o=a.clientWidth,l=a.clientHeight,i=0,c=0;if(s){o=s.width,l=s.height;var d=AN();(d||!d&&t==="fixed")&&(i=s.offsetLeft,c=s.offsetTop)}return{width:o,height:l,x:i+sg(e),y:c}}function w3(e){var t,r=Va(e),a=ag(e),s=(t=e.ownerDocument)==null?void 0:t.body,o=ls(r.scrollWidth,r.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),l=ls(r.scrollHeight,r.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),i=-a.scrollLeft+sg(e),c=-a.scrollTop;return ra(s||r).direction==="rtl"&&(i+=ls(r.clientWidth,s?s.clientWidth:0)-o),{width:o,height:l,x:i,y:c}}function og(e){var t=ra(e),r=t.overflow,a=t.overflowX,s=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+s+a)}function MN(e){return["html","body","#document"].indexOf(Pa(e))>=0?e.ownerDocument.body:An(e)&&og(e)?e:MN(fd(e))}function El(e,t){var r;t===void 0&&(t=[]);var a=MN(e),s=a===((r=e.ownerDocument)==null?void 0:r.body),o=Sr(a),l=s?[o].concat(o.visualViewport||[],og(a)?a:[]):a,i=t.concat(l);return s?i:i.concat(El(fd(l)))}function pp(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function N3(e,t){var r=fo(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function dy(e,t,r){return t===DN?pp(b3(e,r)):xs(t)?N3(t,r):pp(w3(Va(e)))}function S3(e){var t=El(fd(e)),r=["absolute","fixed"].indexOf(ra(e).position)>=0,a=r&&An(e)?Si(e):e;return xs(a)?t.filter(function(s){return xs(s)&&TN(s,a)&&Pa(s)!=="body"}):[]}function C3(e,t,r,a){var s=t==="clippingParents"?S3(e):[].concat(t),o=[].concat(s,[r]),l=o[0],i=o.reduce(function(c,d){var u=dy(e,d,a);return c.top=ls(u.top,c.top),c.right=wu(u.right,c.right),c.bottom=wu(u.bottom,c.bottom),c.left=ls(u.left,c.left),c},dy(e,l,a));return i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}function PN(e){var t=e.reference,r=e.element,a=e.placement,s=a?Dn(a):null,o=a?po(a):null,l=t.x+t.width/2-r.width/2,i=t.y+t.height/2-r.height/2,c;switch(s){case fr:c={x:l,y:t.y-r.height};break;case Hr:c={x:l,y:t.y+t.height};break;case Yr:c={x:t.x+t.width,y:i};break;case pr:c={x:t.x-r.width,y:i};break;default:c={x:t.x,y:t.y}}var d=s?ng(s):null;if(d!=null){var u=d==="y"?"height":"width";switch(o){case uo:c[d]=c[d]-(t[u]/2-r[u]/2);break;case ei:c[d]=c[d]+(t[u]/2-r[u]/2);break}}return c}function ti(e,t){t===void 0&&(t={});var r=t,a=r.placement,s=a===void 0?e.placement:a,o=r.strategy,l=o===void 0?e.strategy:o,i=r.boundary,c=i===void 0?G6:i,d=r.rootBoundary,u=d===void 0?DN:d,m=r.elementContext,f=m===void 0?Jo:m,x=r.altBoundary,b=x===void 0?!1:x,y=r.padding,v=y===void 0?0:y,p=ON(typeof v!="number"?v:RN(v,Ni)),h=f===Jo?K6:Jo,E=e.rects.popper,w=e.elements[b?h:f],N=C3(xs(w)?w:w.contextElement||Va(e.elements.popper),c,u,l),S=fo(e.elements.reference),C=PN({reference:S,element:E,placement:s}),k=pp(Object.assign({},E,C)),D=f===Jo?k:S,O={top:N.top-D.top+p.top,bottom:D.bottom-N.bottom+p.bottom,left:N.left-D.left+p.left,right:D.right-N.right+p.right},A=e.modifiersData.offset;if(f===Jo&&A){var $=A[s];Object.keys(O).forEach(function(P){var I=[Yr,Hr].indexOf(P)>=0?1:-1,L=[fr,Hr].indexOf(P)>=0?"y":"x";O[P]+=$[L]*I})}return O}function k3(e,t){t===void 0&&(t={});var r=t,a=r.placement,s=r.boundary,o=r.rootBoundary,l=r.padding,i=r.flipVariations,c=r.allowedAutoPlacements,d=c===void 0?eg:c,u=po(a),m=u?i?ly:ly.filter(function(b){return po(b)===u}):Ni,f=m.filter(function(b){return d.indexOf(b)>=0});f.length===0&&(f=m);var x=f.reduce(function(b,y){return b[y]=ti(e,{placement:y,boundary:s,rootBoundary:o,padding:l})[Dn(y)],b},{});return Object.keys(x).sort(function(b,y){return x[b]-x[y]})}function D3(e){if(Dn(e)===Zh)return[];var t=Lc(e);return[uy(e),t,uy(t)]}function A3(e){var t=e.state,r=e.options,a=e.name;if(!t.modifiersData[a]._skip){for(var s=r.mainAxis,o=s===void 0?!0:s,l=r.altAxis,i=l===void 0?!0:l,c=r.fallbackPlacements,d=r.padding,u=r.boundary,m=r.rootBoundary,f=r.altBoundary,x=r.flipVariations,b=x===void 0?!0:x,y=r.allowedAutoPlacements,v=t.options.placement,p=Dn(v),h=p===v,E=c||(h||!b?[Lc(v)]:D3(v)),w=[v].concat(E).reduce(function(X,j){return X.concat(Dn(j)===Zh?k3(t,{placement:j,boundary:u,rootBoundary:m,padding:d,flipVariations:b,allowedAutoPlacements:y}):j)},[]),N=t.rects.reference,S=t.rects.popper,C=new Map,k=!0,D=w[0],O=0;O<w.length;O++){var A=w[O],$=Dn(A),P=po(A)===uo,I=[fr,Hr].indexOf($)>=0,L=I?"width":"height",F=ti(t,{placement:A,boundary:u,rootBoundary:m,altBoundary:f,padding:d}),T=I?P?Yr:pr:P?Hr:fr;N[L]>S[L]&&(T=Lc(T));var M=Lc(T),V=[];if(o&&V.push(F[$]<=0),i&&V.push(F[T]<=0,F[M]<=0),V.every(function(X){return X})){D=A,k=!1;break}C.set(A,V)}if(k)for(var K=b?3:1,z=function(j){var B=w.find(function(H){var G=C.get(H);if(G)return G.slice(0,j).every(function(ue){return ue})});if(B)return D=B,"break"},U=K;U>0;U--){var Y=z(U);if(Y==="break")break}t.placement!==D&&(t.modifiersData[a]._skip=!0,t.placement=D,t.reset=!0)}}const T3={name:"flip",enabled:!0,phase:"main",fn:A3,requiresIfExists:["offset"],data:{_skip:!1}};function my(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function fy(e){return[fr,Yr,Hr,pr].some(function(t){return e[t]>=0})}function _3(e){var t=e.state,r=e.name,a=t.rects.reference,s=t.rects.popper,o=t.modifiersData.preventOverflow,l=ti(t,{elementContext:"reference"}),i=ti(t,{altBoundary:!0}),c=my(l,a),d=my(i,s,o),u=fy(c),m=fy(d);t.modifiersData[r]={referenceClippingOffsets:c,popperEscapeOffsets:d,isReferenceHidden:u,hasPopperEscaped:m},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":m})}const O3={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:_3};function R3(e,t,r){var a=Dn(e),s=[pr,fr].indexOf(a)>=0?-1:1,o=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,l=o[0],i=o[1];return l=l||0,i=(i||0)*s,[pr,Yr].indexOf(a)>=0?{x:i,y:l}:{x:l,y:i}}function M3(e){var t=e.state,r=e.options,a=e.name,s=r.offset,o=s===void 0?[0,0]:s,l=eg.reduce(function(u,m){return u[m]=R3(m,t.rects,o),u},{}),i=l[t.placement],c=i.x,d=i.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=d),t.modifiersData[a]=l}const P3={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:M3};function L3(e){var t=e.state,r=e.name;t.modifiersData[r]=PN({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const I3={name:"popperOffsets",enabled:!0,phase:"read",fn:L3,data:{}};function $3(e){return e==="x"?"y":"x"}function F3(e){var t=e.state,r=e.options,a=e.name,s=r.mainAxis,o=s===void 0?!0:s,l=r.altAxis,i=l===void 0?!1:l,c=r.boundary,d=r.rootBoundary,u=r.altBoundary,m=r.padding,f=r.tether,x=f===void 0?!0:f,b=r.tetherOffset,y=b===void 0?0:b,v=ti(t,{boundary:c,rootBoundary:d,padding:m,altBoundary:u}),p=Dn(t.placement),h=po(t.placement),E=!h,w=ng(p),N=$3(w),S=t.modifiersData.popperOffsets,C=t.rects.reference,k=t.rects.popper,D=typeof y=="function"?y(Object.assign({},t.rects,{placement:t.placement})):y,O=typeof D=="number"?{mainAxis:D,altAxis:D}:Object.assign({mainAxis:0,altAxis:0},D),A=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,$={x:0,y:0};if(S){if(o){var P,I=w==="y"?fr:pr,L=w==="y"?Hr:Yr,F=w==="y"?"height":"width",T=S[w],M=T+v[I],V=T-v[L],K=x?-k[F]/2:0,z=h===uo?C[F]:k[F],U=h===uo?-k[F]:-C[F],Y=t.elements.arrow,X=x&&Y?rg(Y):{width:0,height:0},j=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:_N(),B=j[I],H=j[L],G=yl(0,C[F],X[F]),ue=E?C[F]/2-K-G-B-O.mainAxis:z-G-B-O.mainAxis,W=E?-C[F]/2+K+G+H+O.mainAxis:U+G+H+O.mainAxis,me=t.elements.arrow&&Si(t.elements.arrow),ae=me?w==="y"?me.clientTop||0:me.clientLeft||0:0,xe=(P=A==null?void 0:A[w])!=null?P:0,Me=T+ue-xe-ae,Be=T+W-xe,Q=yl(x?wu(M,Me):M,T,x?ls(V,Be):V);S[w]=Q,$[w]=Q-T}if(i){var de,ke=w==="x"?fr:pr,Ve=w==="x"?Hr:Yr,we=S[N],Pe=N==="y"?"height":"width",He=we+v[ke],tt=we-v[Ve],vr=[fr,pr].indexOf(p)!==-1,yr=(de=A==null?void 0:A[N])!=null?de:0,Qr=vr?He:we-C[Pe]-k[Pe]-yr+O.altAxis,re=vr?we+C[Pe]+k[Pe]-yr-O.altAxis:tt,ge=x&&vr?i3(Qr,we,re):yl(x?Qr:He,we,x?re:tt);S[N]=ge,$[N]=ge-we}t.modifiersData[a]=$}}const j3={name:"preventOverflow",enabled:!0,phase:"main",fn:F3,requiresIfExists:["offset"]};function B3(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function z3(e){return e===Sr(e)||!An(e)?ag(e):B3(e)}function U3(e){var t=e.getBoundingClientRect(),r=mo(t.width)/e.offsetWidth||1,a=mo(t.height)/e.offsetHeight||1;return r!==1||a!==1}function V3(e,t,r){r===void 0&&(r=!1);var a=An(t),s=An(t)&&U3(t),o=Va(t),l=fo(e,s,r),i={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(a||!a&&!r)&&((Pa(t)!=="body"||og(o))&&(i=z3(t)),An(t)?(c=fo(t,!0),c.x+=t.clientLeft,c.y+=t.clientTop):o&&(c.x=sg(o))),{x:l.left+i.scrollLeft-c.x,y:l.top+i.scrollTop-c.y,width:l.width,height:l.height}}function W3(e){var t=new Map,r=new Set,a=[];e.forEach(function(o){t.set(o.name,o)});function s(o){r.add(o.name);var l=[].concat(o.requires||[],o.requiresIfExists||[]);l.forEach(function(i){if(!r.has(i)){var c=t.get(i);c&&s(c)}}),a.push(o)}return e.forEach(function(o){r.has(o.name)||s(o)}),a}function H3(e){var t=W3(e);return s3.reduce(function(r,a){return r.concat(t.filter(function(s){return s.phase===a}))},[])}function Y3(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function q3(e){var t=e.reduce(function(r,a){var s=r[a.name];return r[a.name]=s?Object.assign({},s,a,{options:Object.assign({},s.options,a.options),data:Object.assign({},s.data,a.data)}):a,r},{});return Object.keys(t).map(function(r){return t[r]})}var py={placement:"bottom",modifiers:[],strategy:"absolute"};function hy(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(a){return!(a&&typeof a.getBoundingClientRect=="function")})}function G3(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,a=r===void 0?[]:r,s=t.defaultOptions,o=s===void 0?py:s;return function(i,c,d){d===void 0&&(d=o);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},py,o),modifiersData:{},elements:{reference:i,popper:c},attributes:{},styles:{}},m=[],f=!1,x={state:u,setOptions:function(p){var h=typeof p=="function"?p(u.options):p;y(),u.options=Object.assign({},o,u.options,h),u.scrollParents={reference:xs(i)?El(i):i.contextElement?El(i.contextElement):[],popper:El(c)};var E=H3(q3([].concat(a,u.options.modifiers)));return u.orderedModifiers=E.filter(function(w){return w.enabled}),b(),x.update()},forceUpdate:function(){if(!f){var p=u.elements,h=p.reference,E=p.popper;if(hy(h,E)){u.rects={reference:V3(h,Si(E),u.options.strategy==="fixed"),popper:rg(E)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(O){return u.modifiersData[O.name]=Object.assign({},O.data)});for(var w=0;w<u.orderedModifiers.length;w++){if(u.reset===!0){u.reset=!1,w=-1;continue}var N=u.orderedModifiers[w],S=N.fn,C=N.options,k=C===void 0?{}:C,D=N.name;typeof S=="function"&&(u=S({state:u,options:k,name:D,instance:x})||u)}}}},update:Y3(function(){return new Promise(function(v){x.forceUpdate(),v(u)})}),destroy:function(){y(),f=!0}};if(!hy(i,c))return x;x.setOptions(d).then(function(v){!f&&d.onFirstUpdate&&d.onFirstUpdate(v)});function b(){u.orderedModifiers.forEach(function(v){var p=v.name,h=v.options,E=h===void 0?{}:h,w=v.effect;if(typeof w=="function"){var N=w({state:u,name:p,instance:x,options:E}),S=function(){};m.push(N||S)}})}function y(){m.forEach(function(v){return v()}),m=[]}return x}}var K3=G3({defaultModifiers:[O3,I3,g3,y3,P3,T3,j3,m3]}),gy=function(t){return{position:t,top:"0",left:"0",opacity:"0",pointerEvents:"none"}},X3={name:"applyStyles",enabled:!1},Q3={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:function(t){var r=t.state;return function(){var a=r.elements,s=a.reference,o=a.popper;if("removeAttribute"in s){var l=(s.getAttribute("aria-describedby")||"").split(",").filter(function(i){return i.trim()!==o.id});l.length?s.setAttribute("aria-describedby",l.join(",")):s.removeAttribute("aria-describedby")}}},fn:function(t){var r,a=t.state,s=a.elements,o=s.popper,l=s.reference,i=(r=o.getAttribute("role"))==null?void 0:r.toLowerCase();if(o.id&&i==="tooltip"&&"setAttribute"in l){var c=l.getAttribute("aria-describedby");if(c&&c.split(",").indexOf(o.id)!==-1)return;l.setAttribute("aria-describedby",c?c+","+o.id:o.id)}}},J3=[];function Z3(e,t,r){var a=r===void 0?{}:r,s=a.enabled,o=s===void 0?!0:s,l=a.placement,i=l===void 0?"bottom":l,c=a.strategy,d=c===void 0?"absolute":c,u=a.modifiers,m=u===void 0?J3:u,f=ud(a,["enabled","placement","strategy","modifiers"]),x=g.useRef(),b=g.useCallback(function(){var w;(w=x.current)==null||w.update()},[]),y=g.useCallback(function(){var w;(w=x.current)==null||w.forceUpdate()},[]),v=q6(g.useState({placement:i,update:b,forceUpdate:y,attributes:{},styles:{popper:gy(d),arrow:{}}})),p=v[0],h=v[1],E=g.useMemo(function(){return{name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:function(N){var S=N.state,C={},k={};Object.keys(S.elements).forEach(function(D){C[D]=S.styles[D],k[D]=S.attributes[D]}),h({state:S,styles:C,attributes:k,update:b,forceUpdate:y,placement:S.placement})}}},[b,y,h]);return g.useEffect(function(){!x.current||!o||x.current.setOptions({placement:i,strategy:d,modifiers:[].concat(m,[E,X3])})},[d,i,E,o]),g.useEffect(function(){if(!(!o||e==null||t==null))return x.current=K3(e,t,Et({},f,{placement:i,strategy:d,modifiers:[].concat(m,[Q3,E])})),function(){x.current!=null&&(x.current.destroy(),x.current=void 0,h(function(w){return Et({},w,{attributes:{},styles:{popper:gy(d)}})}))}},[o,e,t]),p}function e5(e,t,r,a){var s=a&&typeof a!="boolean"?a.capture:a;e.removeEventListener(t,r,s),r.__once&&e.removeEventListener(t,r.__once,s)}function il(e,t,r,a){return W6(e,t,r,a),function(){e5(e,t,r,a)}}var t5=function(){},r5=t5;const n5=gr(r5);function a5(e){return e&&"setState"in e?Qb.findDOMNode(e):e??null}const s5=function(e){return wi(a5(e))};var o5=27,vy=function(){};function l5(e){return e.button===0}function i5(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}var yy=function(t){return t&&("current"in t?t.current:t)};function c5(e,t,r){var a=r===void 0?{}:r,s=a.disabled,o=a.clickTrigger,l=o===void 0?"click":o,i=g.useRef(!1),c=t||vy,d=g.useCallback(function(f){var x,b=yy(e);n5(!!b,"RootClose captured a close event but does not have a ref to compare it to. useRootClose(), should be passed a ref that resolves to a DOM node"),i.current=!b||i5(f)||!l5(f)||!!Zl(b,(x=f.composedPath==null?void 0:f.composedPath()[0])!=null?x:f.target)},[e]),u=sy(function(f){i.current||c(f)}),m=sy(function(f){f.keyCode===o5&&c(f)});g.useEffect(function(){if(!(s||e==null)){var f=window.event,x=s5(yy(e)),b=il(x,l,d,!0),y=il(x,l,function(h){if(h===f){f=void 0;return}u(h)}),v=il(x,"keyup",function(h){if(h===f){f=void 0;return}m(h)}),p=[];return"ontouchstart"in x.documentElement&&(p=[].slice.call(x.body.children).map(function(h){return il(h,"mousemove",vy)})),function(){b(),y(),v(),p.forEach(function(h){return h()})}}},[e,s,l,d,u,m])}function u5(e){var t={};return Array.isArray(e)?(e==null||e.forEach(function(r){t[r.name]=r}),t):e||t}function d5(e){return e===void 0&&(e={}),Array.isArray(e)?e:Object.keys(e).map(function(t){return e[t].name=t,e[t]})}function m5(e){var t,r,a,s,o=e.enabled,l=e.enableEvents,i=e.placement,c=e.flip,d=e.offset,u=e.fixed,m=e.containerPadding,f=e.arrowElement,x=e.popperConfig,b=x===void 0?{}:x,y=u5(b.modifiers);return Et({},b,{placement:i,enabled:o,strategy:u?"fixed":b.strategy,modifiers:d5(Et({},y,{eventListeners:{enabled:l},preventOverflow:Et({},y.preventOverflow,{options:m?Et({padding:m},(t=y.preventOverflow)==null?void 0:t.options):(r=y.preventOverflow)==null?void 0:r.options}),offset:{options:Et({offset:d},(a=y.offset)==null?void 0:a.options)},arrow:Et({},y.arrow,{enabled:!!f,options:Et({},(s=y.arrow)==null?void 0:s.options,{element:f})}),flip:Et({enabled:!!c},y.flip)}))})}function f5(e,t){return e.classList?e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function p5(e,t){e.classList?e.classList.add(t):f5(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function Ey(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function h5(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=Ey(e.className,t):e.setAttribute("class",Ey(e.className&&e.className.baseVal||"",t))}var sc;function lg(e){if((!sc&&sc!==0||e)&&Jh){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),sc=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return sc}var Lm=function(t){var r;return typeof document>"u"?null:t==null?wi().body:(typeof t=="function"&&(t=t()),t&&"current"in t&&(t=t.current),(r=t)!=null&&r.nodeType&&t||null)};function xy(e,t){var r=g.useState(function(){return Lm(e)}),a=r[0],s=r[1];if(!a){var o=Lm(e);o&&s(o)}return g.useEffect(function(){},[t,a]),g.useEffect(function(){var l=Lm(e);l!==a&&s(l)},[e,a]),a}const by=e=>!e||typeof e=="function"?e:t=>{e.current=t};function g5(e,t){const r=by(e),a=by(t);return s=>{r&&r(s),a&&a(s)}}function v5(e,t){return g.useMemo(()=>g5(e,t),[e,t])}var ig=n.forwardRef(function(e,t){var r=e.flip,a=e.offset,s=e.placement,o=e.containerPadding,l=o===void 0?5:o,i=e.popperConfig,c=i===void 0?{}:i,d=e.transition,u=oy(),m=u[0],f=u[1],x=oy(),b=x[0],y=x[1],v=v5(f,t),p=xy(e.container),h=xy(e.target),E=g.useState(!e.show),w=E[0],N=E[1],S=Z3(h,m,m5({placement:s,enableEvents:!!e.show,containerPadding:l||5,flip:r,offset:a,arrowElement:b,popperConfig:c})),C=S.styles,k=S.attributes,D=ud(S,["styles","attributes"]);e.show?w&&N(!1):!e.transition&&!w&&N(!0);var O=function(){N(!0),e.onExited&&e.onExited.apply(e,arguments)},A=e.show||d&&!w;if(c5(m,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!A)return null;var $=e.children(Et({},D,{show:!!e.show,props:Et({},k.popper,{style:C.popper,ref:v}),arrowProps:Et({},k.arrow,{style:C.arrow,ref:y})}));if(d){var P=e.onExit,I=e.onExiting,L=e.onEnter,F=e.onEntering,T=e.onEntered;$=n.createElement(d,{in:e.show,appear:!0,onExit:P,onExiting:I,onExited:O,onEnter:L,onEntering:F,onEntered:T},$)}return p?Qb.createPortal($,p):null});ig.displayName="Overlay";ig.propTypes={show:te.bool,placement:te.oneOf(eg),target:te.any,container:te.any,flip:te.bool,children:te.func.isRequired,containerPadding:te.number,popperConfig:te.object,rootClose:te.bool,rootCloseEvent:te.oneOf(["click","mousedown"]),rootCloseDisabled:te.bool,onHide:function(t){for(var r=arguments.length,a=new Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];if(t.rootClose){var o;return(o=te.func).isRequired.apply(o,[t].concat(a))}return te.func.apply(te,[t].concat(a))},transition:te.elementType,onEnter:te.func,onEntering:te.func,onEntered:te.func,onExit:te.func,onExiting:te.func,onExited:te.func};function y5(){this.__data__=[],this.size=0}var E5=y5,x5=Ei;function b5(e,t){for(var r=e.length;r--;)if(x5(e[r][0],t))return r;return-1}var pd=b5,w5=pd,N5=Array.prototype,S5=N5.splice;function C5(e){var t=this.__data__,r=w5(t,e);if(r<0)return!1;var a=t.length-1;return r==a?t.pop():S5.call(t,r,1),--this.size,!0}var k5=C5,D5=pd;function A5(e){var t=this.__data__,r=D5(t,e);return r<0?void 0:t[r][1]}var T5=A5,_5=pd;function O5(e){return _5(this.__data__,e)>-1}var R5=O5,M5=pd;function P5(e,t){var r=this.__data__,a=M5(r,e);return a<0?(++this.size,r.push([e,t])):r[a][1]=t,this}var L5=P5,I5=E5,$5=k5,F5=T5,j5=R5,B5=L5;function Ao(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}Ao.prototype.clear=I5;Ao.prototype.delete=$5;Ao.prototype.get=F5;Ao.prototype.has=j5;Ao.prototype.set=B5;var hd=Ao,z5=hd;function U5(){this.__data__=new z5,this.size=0}var V5=U5;function W5(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var H5=W5;function Y5(e){return this.__data__.get(e)}var q5=Y5;function G5(e){return this.__data__.has(e)}var K5=G5,X5=Pn,Q5=X5["__core-js_shared__"],J5=Q5,Im=J5,wy=function(){var e=/[^.]+$/.exec(Im&&Im.keys&&Im.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Z5(e){return!!wy&&wy in e}var eO=Z5,tO=Function.prototype,rO=tO.toString;function nO(e){if(e!=null){try{return rO.call(e)}catch{}try{return e+""}catch{}}return""}var LN=nO,aO=Gh,sO=eO,oO=sa,lO=LN,iO=/[\\^$.*+?()[\]{}|]/g,cO=/^\[object .+?Constructor\]$/,uO=Function.prototype,dO=Object.prototype,mO=uO.toString,fO=dO.hasOwnProperty,pO=RegExp("^"+mO.call(fO).replace(iO,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function hO(e){if(!oO(e)||sO(e))return!1;var t=aO(e)?pO:cO;return t.test(lO(e))}var gO=hO;function vO(e,t){return e==null?void 0:e[t]}var yO=vO,EO=gO,xO=yO;function bO(e,t){var r=xO(e,t);return EO(r)?r:void 0}var Ss=bO,wO=Ss,NO=Pn,SO=wO(NO,"Map"),cg=SO,CO=Ss,kO=CO(Object,"create"),gd=kO,Ny=gd;function DO(){this.__data__=Ny?Ny(null):{},this.size=0}var AO=DO;function TO(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var _O=TO,OO=gd,RO="__lodash_hash_undefined__",MO=Object.prototype,PO=MO.hasOwnProperty;function LO(e){var t=this.__data__;if(OO){var r=t[e];return r===RO?void 0:r}return PO.call(t,e)?t[e]:void 0}var IO=LO,$O=gd,FO=Object.prototype,jO=FO.hasOwnProperty;function BO(e){var t=this.__data__;return $O?t[e]!==void 0:jO.call(t,e)}var zO=BO,UO=gd,VO="__lodash_hash_undefined__";function WO(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=UO&&t===void 0?VO:t,this}var HO=WO,YO=AO,qO=_O,GO=IO,KO=zO,XO=HO;function To(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}To.prototype.clear=YO;To.prototype.delete=qO;To.prototype.get=GO;To.prototype.has=KO;To.prototype.set=XO;var QO=To,Sy=QO,JO=hd,ZO=cg;function eR(){this.size=0,this.__data__={hash:new Sy,map:new(ZO||JO),string:new Sy}}var tR=eR;function rR(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var nR=rR,aR=nR;function sR(e,t){var r=e.__data__;return aR(t)?r[typeof t=="string"?"string":"hash"]:r.map}var vd=sR,oR=vd;function lR(e){var t=oR(this,e).delete(e);return this.size-=t?1:0,t}var iR=lR,cR=vd;function uR(e){return cR(this,e).get(e)}var dR=uR,mR=vd;function fR(e){return mR(this,e).has(e)}var pR=fR,hR=vd;function gR(e,t){var r=hR(this,e),a=r.size;return r.set(e,t),this.size+=r.size==a?0:1,this}var vR=gR,yR=tR,ER=iR,xR=dR,bR=pR,wR=vR;function _o(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}_o.prototype.clear=yR;_o.prototype.delete=ER;_o.prototype.get=xR;_o.prototype.has=bR;_o.prototype.set=wR;var ug=_o,NR=hd,SR=cg,CR=ug,kR=200;function DR(e,t){var r=this.__data__;if(r instanceof NR){var a=r.__data__;if(!SR||a.length<kR-1)return a.push([e,t]),this.size=++r.size,this;r=this.__data__=new CR(a)}return r.set(e,t),this.size=r.size,this}var AR=DR,TR=hd,_R=V5,OR=H5,RR=q5,MR=K5,PR=AR;function Oo(e){var t=this.__data__=new TR(e);this.size=t.size}Oo.prototype.clear=_R;Oo.prototype.delete=OR;Oo.prototype.get=RR;Oo.prototype.has=MR;Oo.prototype.set=PR;var dg=Oo,LR="__lodash_hash_undefined__";function IR(e){return this.__data__.set(e,LR),this}var $R=IR;function FR(e){return this.__data__.has(e)}var jR=FR,BR=ug,zR=$R,UR=jR;function Nu(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new BR;++t<r;)this.add(e[t])}Nu.prototype.add=Nu.prototype.push=zR;Nu.prototype.has=UR;var VR=Nu;function WR(e,t){for(var r=-1,a=e==null?0:e.length;++r<a;)if(t(e[r],r,e))return!0;return!1}var HR=WR;function YR(e,t){return e.has(t)}var qR=YR,GR=VR,KR=HR,XR=qR,QR=1,JR=2;function ZR(e,t,r,a,s,o){var l=r&QR,i=e.length,c=t.length;if(i!=c&&!(l&&c>i))return!1;var d=o.get(e),u=o.get(t);if(d&&u)return d==t&&u==e;var m=-1,f=!0,x=r&JR?new GR:void 0;for(o.set(e,t),o.set(t,e);++m<i;){var b=e[m],y=t[m];if(a)var v=l?a(y,b,m,t,e,o):a(b,y,m,e,t,o);if(v!==void 0){if(v)continue;f=!1;break}if(x){if(!KR(t,function(p,h){if(!XR(x,h)&&(b===p||s(b,p,r,a,o)))return x.push(h)})){f=!1;break}}else if(!(b===y||s(b,y,r,a,o))){f=!1;break}}return o.delete(e),o.delete(t),f}var IN=ZR,eM=Pn,tM=eM.Uint8Array,$N=tM;function rM(e){var t=-1,r=Array(e.size);return e.forEach(function(a,s){r[++t]=[s,a]}),r}var nM=rM;function aM(e){var t=-1,r=Array(e.size);return e.forEach(function(a){r[++t]=a}),r}var sM=aM,Cy=ko,ky=$N,oM=Ei,lM=IN,iM=nM,cM=sM,uM=1,dM=2,mM="[object Boolean]",fM="[object Date]",pM="[object Error]",hM="[object Map]",gM="[object Number]",vM="[object RegExp]",yM="[object Set]",EM="[object String]",xM="[object Symbol]",bM="[object ArrayBuffer]",wM="[object DataView]",Dy=Cy?Cy.prototype:void 0,$m=Dy?Dy.valueOf:void 0;function NM(e,t,r,a,s,o,l){switch(r){case wM:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case bM:return!(e.byteLength!=t.byteLength||!o(new ky(e),new ky(t)));case mM:case fM:case gM:return oM(+e,+t);case pM:return e.name==t.name&&e.message==t.message;case vM:case EM:return e==t+"";case hM:var i=iM;case yM:var c=a&uM;if(i||(i=cM),e.size!=t.size&&!c)return!1;var d=l.get(e);if(d)return d==t;a|=dM,l.set(e,t);var u=lM(i(e),i(t),a,s,o,l);return l.delete(e),u;case xM:if($m)return $m.call(e)==$m.call(t)}return!1}var SM=NM;function CM(e,t){for(var r=-1,a=t.length,s=e.length;++r<a;)e[s+r]=t[r];return e}var mg=CM,kM=Array.isArray,Gr=kM,DM=mg,AM=Gr;function TM(e,t,r){var a=t(e);return AM(e)?a:DM(a,r(e))}var FN=TM;function _M(e,t){for(var r=-1,a=e==null?0:e.length,s=0,o=[];++r<a;){var l=e[r];t(l,r,e)&&(o[s++]=l)}return o}var OM=_M;function RM(){return[]}var jN=RM,MM=OM,PM=jN,LM=Object.prototype,IM=LM.propertyIsEnumerable,Ay=Object.getOwnPropertySymbols,$M=Ay?function(e){return e==null?[]:(e=Object(e),MM(Ay(e),function(t){return IM.call(e,t)}))}:PM,fg=$M;function FM(e,t){for(var r=-1,a=Array(e);++r<e;)a[r]=t(r);return a}var jM=FM,BM=Do,zM=Ua,UM="[object Arguments]";function VM(e){return zM(e)&&BM(e)==UM}var WM=VM,Ty=WM,HM=Ua,BN=Object.prototype,YM=BN.hasOwnProperty,qM=BN.propertyIsEnumerable,GM=Ty(function(){return arguments}())?Ty:function(e){return HM(e)&&YM.call(e,"callee")&&!qM.call(e,"callee")},pg=GM,Su={exports:{}};function KM(){return!1}var XM=KM;Su.exports;(function(e,t){var r=Pn,a=XM,s=t&&!t.nodeType&&t,o=s&&!0&&e&&!e.nodeType&&e,l=o&&o.exports===s,i=l?r.Buffer:void 0,c=i?i.isBuffer:void 0,d=c||a;e.exports=d})(Su,Su.exports);var yd=Su.exports,QM=Do,JM=Kh,ZM=Ua,eP="[object Arguments]",tP="[object Array]",rP="[object Boolean]",nP="[object Date]",aP="[object Error]",sP="[object Function]",oP="[object Map]",lP="[object Number]",iP="[object Object]",cP="[object RegExp]",uP="[object Set]",dP="[object String]",mP="[object WeakMap]",fP="[object ArrayBuffer]",pP="[object DataView]",hP="[object Float32Array]",gP="[object Float64Array]",vP="[object Int8Array]",yP="[object Int16Array]",EP="[object Int32Array]",xP="[object Uint8Array]",bP="[object Uint8ClampedArray]",wP="[object Uint16Array]",NP="[object Uint32Array]",ot={};ot[hP]=ot[gP]=ot[vP]=ot[yP]=ot[EP]=ot[xP]=ot[bP]=ot[wP]=ot[NP]=!0;ot[eP]=ot[tP]=ot[fP]=ot[rP]=ot[pP]=ot[nP]=ot[aP]=ot[sP]=ot[oP]=ot[lP]=ot[iP]=ot[cP]=ot[uP]=ot[dP]=ot[mP]=!1;function SP(e){return ZM(e)&&JM(e.length)&&!!ot[QM(e)]}var CP=SP;function kP(e){return function(t){return e(t)}}var Ed=kP,Cu={exports:{}};Cu.exports;(function(e,t){var r=yN,a=t&&!t.nodeType&&t,s=a&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===a,l=o&&r.process,i=function(){try{var c=s&&s.require&&s.require("util").types;return c||l&&l.binding&&l.binding("util")}catch{}}();e.exports=i})(Cu,Cu.exports);var hg=Cu.exports,DP=CP,AP=Ed,_y=hg,Oy=_y&&_y.isTypedArray,TP=Oy?AP(Oy):DP,gg=TP,_P=jM,OP=pg,RP=Gr,MP=yd,PP=Xh,LP=gg,IP=Object.prototype,$P=IP.hasOwnProperty;function FP(e,t){var r=RP(e),a=!r&&OP(e),s=!r&&!a&&MP(e),o=!r&&!a&&!s&&LP(e),l=r||a||s||o,i=l?_P(e.length,String):[],c=i.length;for(var d in e)(t||$P.call(e,d))&&!(l&&(d=="length"||s&&(d=="offset"||d=="parent")||o&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||PP(d,c)))&&i.push(d);return i}var zN=FP,jP=Object.prototype;function BP(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||jP;return e===r}var vg=BP;function zP(e,t){return function(r){return e(t(r))}}var UN=zP,UP=UN,VP=UP(Object.keys,Object),WP=VP,HP=vg,YP=WP,qP=Object.prototype,GP=qP.hasOwnProperty;function KP(e){if(!HP(e))return YP(e);var t=[];for(var r in Object(e))GP.call(e,r)&&r!="constructor"&&t.push(r);return t}var XP=KP,QP=zN,JP=XP,ZP=xi;function eL(e){return ZP(e)?QP(e):JP(e)}var Ci=eL,tL=FN,rL=fg,nL=Ci;function aL(e){return tL(e,nL,rL)}var VN=aL,Ry=VN,sL=1,oL=Object.prototype,lL=oL.hasOwnProperty;function iL(e,t,r,a,s,o){var l=r&sL,i=Ry(e),c=i.length,d=Ry(t),u=d.length;if(c!=u&&!l)return!1;for(var m=c;m--;){var f=i[m];if(!(l?f in t:lL.call(t,f)))return!1}var x=o.get(e),b=o.get(t);if(x&&b)return x==t&&b==e;var y=!0;o.set(e,t),o.set(t,e);for(var v=l;++m<c;){f=i[m];var p=e[f],h=t[f];if(a)var E=l?a(h,p,f,t,e,o):a(p,h,f,e,t,o);if(!(E===void 0?p===h||s(p,h,r,a,o):E)){y=!1;break}v||(v=f=="constructor")}if(y&&!v){var w=e.constructor,N=t.constructor;w!=N&&"constructor"in e&&"constructor"in t&&!(typeof w=="function"&&w instanceof w&&typeof N=="function"&&N instanceof N)&&(y=!1)}return o.delete(e),o.delete(t),y}var cL=iL,uL=Ss,dL=Pn,mL=uL(dL,"DataView"),fL=mL,pL=Ss,hL=Pn,gL=pL(hL,"Promise"),vL=gL,yL=Ss,EL=Pn,xL=yL(EL,"Set"),bL=xL,wL=Ss,NL=Pn,SL=wL(NL,"WeakMap"),CL=SL,hp=fL,gp=cg,vp=vL,yp=bL,Ep=CL,WN=Do,Ro=LN,My="[object Map]",kL="[object Object]",Py="[object Promise]",Ly="[object Set]",Iy="[object WeakMap]",$y="[object DataView]",DL=Ro(hp),AL=Ro(gp),TL=Ro(vp),_L=Ro(yp),OL=Ro(Ep),Ka=WN;(hp&&Ka(new hp(new ArrayBuffer(1)))!=$y||gp&&Ka(new gp)!=My||vp&&Ka(vp.resolve())!=Py||yp&&Ka(new yp)!=Ly||Ep&&Ka(new Ep)!=Iy)&&(Ka=function(e){var t=WN(e),r=t==kL?e.constructor:void 0,a=r?Ro(r):"";if(a)switch(a){case DL:return $y;case AL:return My;case TL:return Py;case _L:return Ly;case OL:return Iy}return t});var xd=Ka,Fm=dg,RL=IN,ML=SM,PL=cL,Fy=xd,jy=Gr,By=yd,LL=gg,IL=1,zy="[object Arguments]",Uy="[object Array]",oc="[object Object]",$L=Object.prototype,Vy=$L.hasOwnProperty;function FL(e,t,r,a,s,o){var l=jy(e),i=jy(t),c=l?Uy:Fy(e),d=i?Uy:Fy(t);c=c==zy?oc:c,d=d==zy?oc:d;var u=c==oc,m=d==oc,f=c==d;if(f&&By(e)){if(!By(t))return!1;l=!0,u=!1}if(f&&!u)return o||(o=new Fm),l||LL(e)?RL(e,t,r,a,s,o):ML(e,t,c,r,a,s,o);if(!(r&IL)){var x=u&&Vy.call(e,"__wrapped__"),b=m&&Vy.call(t,"__wrapped__");if(x||b){var y=x?e.value():e,v=b?t.value():t;return o||(o=new Fm),s(y,v,r,a,o)}}return f?(o||(o=new Fm),PL(e,t,r,a,s,o)):!1}var jL=FL,BL=jL,Wy=Ua;function HN(e,t,r,a,s){return e===t?!0:e==null||t==null||!Wy(e)&&!Wy(t)?e!==e&&t!==t:BL(e,t,r,a,HN,s)}var yg=HN,zL=yg;function UL(e,t){return zL(e,t)}var VL=UL;const WL=gr(VL);function jm(e,t){var r=Qh(e);return r?r.innerHeight:os(e).height}function YN(e,t,r){e.closest&&!r&&e.closest(t);var a=e;do{if(z6(a,t))return a;a=a.parentElement}while(a&&a!==r&&a.nodeType===document.ELEMENT_NODE);return null}function HL(e,t,r,a){for(var s=e.length,o=r+(a?1:-1);a?o--:++o<s;)if(t(e[o],o,e))return o;return-1}var YL=HL,qL=dg,GL=yg,KL=1,XL=2;function QL(e,t,r,a){var s=r.length,o=s,l=!a;if(e==null)return!o;for(e=Object(e);s--;){var i=r[s];if(l&&i[2]?i[1]!==e[i[0]]:!(i[0]in e))return!1}for(;++s<o;){i=r[s];var c=i[0],d=e[c],u=i[1];if(l&&i[2]){if(d===void 0&&!(c in e))return!1}else{var m=new qL;if(a)var f=a(d,u,c,e,t,m);if(!(f===void 0?GL(u,d,KL|XL,a,m):f))return!1}}return!0}var JL=QL,ZL=sa;function eI(e){return e===e&&!ZL(e)}var qN=eI,tI=qN,rI=Ci;function nI(e){for(var t=rI(e),r=t.length;r--;){var a=t[r],s=e[a];t[r]=[a,s,tI(s)]}return t}var aI=nI;function sI(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var GN=sI,oI=JL,lI=aI,iI=GN;function cI(e){var t=lI(e);return t.length==1&&t[0][2]?iI(t[0][0],t[0][1]):function(r){return r===e||oI(r,e,t)}}var uI=cI,dI=Gr,mI=bi,fI=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,pI=/^\w*$/;function hI(e,t){if(dI(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||mI(e)?!0:pI.test(e)||!fI.test(e)||t!=null&&e in Object(t)}var Eg=hI,KN=ug,gI="Expected a function";function xg(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(gI);var r=function(){var a=arguments,s=t?t.apply(this,a):a[0],o=r.cache;if(o.has(s))return o.get(s);var l=e.apply(this,a);return r.cache=o.set(s,l)||o,l};return r.cache=new(xg.Cache||KN),r}xg.Cache=KN;var vI=xg,yI=vI,EI=500;function xI(e){var t=yI(e,function(a){return r.size===EI&&r.clear(),a}),r=t.cache;return t}var bI=xI,wI=bI,NI=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,SI=/\\(\\)?/g,CI=wI(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(NI,function(r,a,s,o){t.push(s?o.replace(SI,"$1"):a||r)}),t}),kI=CI;function DI(e,t){for(var r=-1,a=e==null?0:e.length,s=Array(a);++r<a;)s[r]=t(e[r],r,e);return s}var bg=DI,Hy=ko,AI=bg,TI=Gr,_I=bi,Yy=Hy?Hy.prototype:void 0,qy=Yy?Yy.toString:void 0;function XN(e){if(typeof e=="string")return e;if(TI(e))return AI(e,XN)+"";if(_I(e))return qy?qy.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var OI=XN,RI=OI;function MI(e){return e==null?"":RI(e)}var PI=MI,LI=Gr,II=Eg,$I=kI,FI=PI;function jI(e,t){return LI(e)?e:II(e,t)?[e]:$I(FI(e))}var bd=jI,BI=bi;function zI(e){if(typeof e=="string"||BI(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var ki=zI,UI=bd,VI=ki;function WI(e,t){t=UI(t,e);for(var r=0,a=t.length;e!=null&&r<a;)e=e[VI(t[r++])];return r&&r==a?e:void 0}var wd=WI,HI=wd;function YI(e,t,r){var a=e==null?void 0:HI(e,t);return a===void 0?r:a}var qI=YI;function GI(e,t){return e!=null&&t in Object(e)}var KI=GI,XI=bd,QI=pg,JI=Gr,ZI=Xh,e$=Kh,t$=ki;function r$(e,t,r){t=XI(t,e);for(var a=-1,s=t.length,o=!1;++a<s;){var l=t$(t[a]);if(!(o=e!=null&&r(e,l)))break;e=e[l]}return o||++a!=s?o:(s=e==null?0:e.length,!!s&&e$(s)&&ZI(l,s)&&(JI(e)||QI(e)))}var n$=r$,a$=KI,s$=n$;function o$(e,t){return e!=null&&s$(e,t,a$)}var l$=o$,i$=yg,c$=qI,u$=l$,d$=Eg,m$=qN,f$=GN,p$=ki,h$=1,g$=2;function v$(e,t){return d$(e)&&m$(t)?f$(p$(e),t):function(r){var a=c$(r,e);return a===void 0&&a===t?u$(r,e):i$(t,a,h$|g$)}}var y$=v$;function E$(e){return e}var Nd=E$;function x$(e){return function(t){return t==null?void 0:t[e]}}var b$=x$,w$=wd;function N$(e){return function(t){return w$(t,e)}}var S$=N$,C$=b$,k$=S$,D$=Eg,A$=ki;function T$(e){return D$(e)?C$(A$(e)):k$(e)}var _$=T$,O$=uI,R$=y$,M$=Nd,P$=Gr,L$=_$;function I$(e){return typeof e=="function"?e:e==null?M$:typeof e=="object"?P$(e)?R$(e[0],e[1]):O$(e):L$(e)}var Sd=I$,$$=YL,F$=Sd,j$=bN,B$=Math.max;function z$(e,t,r){var a=e==null?0:e.length;if(!a)return-1;var s=r==null?0:j$(r);return s<0&&(s=B$(a+s,0)),$$(e,F$(t),s)}var U$=z$;const V$=gr(U$);var W$=Math.ceil,H$=Math.max;function Y$(e,t,r,a){for(var s=-1,o=H$(W$((t-e)/(r||1)),0),l=Array(o);o--;)l[a?o:++s]=e,e+=r;return l}var q$=Y$,G$=q$,K$=md,Bm=xN;function X$(e){return function(t,r,a){return a&&typeof a!="number"&&K$(t,r,a)&&(r=a=void 0),t=Bm(t),r===void 0?(r=t,t=0):r=Bm(r),a=a===void 0?t<r?1:-1:Bm(a),G$(t,r,a,e)}}var Q$=X$,J$=Q$,Z$=J$(),e8=Z$;const t8=gr(e8);var Gy=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function r8(e,t){return!!(e===t||Gy(e)&&Gy(t))}function n8(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!r8(e[r],t[r]))return!1;return!0}function QN(e,t){t===void 0&&(t=n8);var r=null;function a(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];if(r&&r.lastThis===this&&t(s,r.lastArgs))return r.lastResult;var l=e.apply(this,s);return r={lastResult:l,lastArgs:s,lastThis:this},l}return a.clear=function(){r=null},a}function xp(e,t){var r=Qh(e);return r?r.innerWidth:os(e).width}var Ky=ko,a8=pg,s8=Gr,Xy=Ky?Ky.isConcatSpreadable:void 0;function o8(e){return s8(e)||a8(e)||!!(Xy&&e&&e[Xy])}var l8=o8,i8=mg,c8=l8;function JN(e,t,r,a,s){var o=-1,l=e.length;for(r||(r=c8),s||(s=[]);++o<l;){var i=e[o];t>0&&r(i)?t>1?JN(i,t-1,r,a,s):i8(s,i):a||(s[s.length]=i)}return s}var ZN=JN;function u8(e){return function(t,r,a){for(var s=-1,o=Object(t),l=a(t),i=l.length;i--;){var c=l[e?i:++s];if(r(o[c],c,o)===!1)break}return t}}var d8=u8,m8=d8,f8=m8(),p8=f8,h8=p8,g8=Ci;function v8(e,t){return e&&h8(e,t,g8)}var wg=v8,y8=xi;function E8(e,t){return function(r,a){if(r==null)return r;if(!y8(r))return e(r,a);for(var s=r.length,o=t?s:-1,l=Object(r);(t?o--:++o<s)&&a(l[o],o,l)!==!1;);return r}}var x8=E8,b8=wg,w8=x8,N8=w8(b8),S8=N8,C8=S8,k8=xi;function D8(e,t){var r=-1,a=k8(e)?Array(e.length):[];return C8(e,function(s,o,l){a[++r]=t(s,o,l)}),a}var A8=D8;function T8(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var _8=T8,Qy=bi;function O8(e,t){if(e!==t){var r=e!==void 0,a=e===null,s=e===e,o=Qy(e),l=t!==void 0,i=t===null,c=t===t,d=Qy(t);if(!i&&!d&&!o&&e>t||o&&l&&c&&!i&&!d||a&&l&&c||!r&&c||!s)return 1;if(!a&&!o&&!d&&e<t||d&&r&&s&&!a&&!o||i&&r&&s||!l&&s||!c)return-1}return 0}var R8=O8,M8=R8;function P8(e,t,r){for(var a=-1,s=e.criteria,o=t.criteria,l=s.length,i=r.length;++a<l;){var c=M8(s[a],o[a]);if(c){if(a>=i)return c;var d=r[a];return c*(d=="desc"?-1:1)}}return e.index-t.index}var L8=P8,zm=bg,I8=wd,$8=Sd,F8=A8,j8=_8,B8=Ed,z8=L8,U8=Nd,V8=Gr;function W8(e,t,r){t.length?t=zm(t,function(o){return V8(o)?function(l){return I8(l,o.length===1?o[0]:o)}:o}):t=[U8];var a=-1;t=zm(t,B8($8));var s=F8(e,function(o,l,i){var c=zm(t,function(d){return d(o)});return{criteria:c,index:++a,value:o}});return j8(s,function(o,l){return z8(o,l,r)})}var H8=W8;function Y8(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var q8=Y8,G8=q8,Jy=Math.max;function K8(e,t,r){return t=Jy(t===void 0?e.length-1:t,0),function(){for(var a=arguments,s=-1,o=Jy(a.length-t,0),l=Array(o);++s<o;)l[s]=a[t+s];s=-1;for(var i=Array(t+1);++s<t;)i[s]=a[s];return i[t]=r(l),G8(e,this,i)}}var e1=K8;function X8(e){return function(){return e}}var Q8=X8,J8=Ss,Z8=function(){try{var e=J8(Object,"defineProperty");return e({},"",{}),e}catch{}}(),t1=Z8,eF=Q8,Zy=t1,tF=Nd,rF=Zy?function(e,t){return Zy(e,"toString",{configurable:!0,enumerable:!1,value:eF(t),writable:!0})}:tF,nF=rF,aF=800,sF=16,oF=Date.now;function lF(e){var t=0,r=0;return function(){var a=oF(),s=sF-(a-r);if(r=a,s>0){if(++t>=aF)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var iF=lF,cF=nF,uF=iF,dF=uF(cF),r1=dF,mF=Nd,fF=e1,pF=r1;function hF(e,t){return pF(fF(e,t,mF),e+"")}var n1=hF,gF=ZN,vF=H8,yF=n1,eE=md,EF=yF(function(e,t){if(e==null)return[];var r=t.length;return r>1&&eE(e,t[0],t[1])?t=[]:r>2&&eE(t[0],t[1],t[2])&&(t=[t[0]]),vF(e,gF(t,1),[])}),xF=EF;const bF=gr(xF);function a1(e){return Zw(e)||gN(e)||Wh(e)||eN()}function wF(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var NF=wF,SF=sa,CF=vg,kF=NF,DF=Object.prototype,AF=DF.hasOwnProperty;function TF(e){if(!SF(e))return kF(e);var t=CF(e),r=[];for(var a in e)a=="constructor"&&(t||!AF.call(e,a))||r.push(a);return r}var _F=TF,OF=zN,RF=_F,MF=xi;function PF(e){return MF(e)?OF(e,!0):RF(e)}var Cd=PF,LF=n1,IF=Ei,$F=md,FF=Cd,s1=Object.prototype,jF=s1.hasOwnProperty,BF=LF(function(e,t){e=Object(e);var r=-1,a=t.length,s=a>2?t[2]:void 0;for(s&&$F(t[0],t[1],s)&&(a=1);++r<a;)for(var o=t[r],l=FF(o),i=-1,c=l.length;++i<c;){var d=l[i],u=e[d];(u===void 0||IF(u,s1[d])&&!jF.call(e,d))&&(e[d]=o[d])}return e}),zF=BF;const UF=gr(zF);var tE=t1;function VF(e,t,r){t=="__proto__"&&tE?tE(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var Ng=VF,WF=Ng,HF=wg,YF=Sd;function qF(e,t){var r={};return t=YF(t),HF(e,function(a,s,o){WF(r,s,t(a,s,o))}),r}var GF=qF;const KF=gr(GF);function XF(e,t){for(var r=-1,a=e==null?0:e.length;++r<a&&t(e[r],r,e)!==!1;);return e}var o1=XF,QF=Ng,JF=Ei,ZF=Object.prototype,e7=ZF.hasOwnProperty;function t7(e,t,r){var a=e[t];(!(e7.call(e,t)&&JF(a,r))||r===void 0&&!(t in e))&&QF(e,t,r)}var l1=t7,r7=l1,n7=Ng;function a7(e,t,r,a){var s=!r;r||(r={});for(var o=-1,l=t.length;++o<l;){var i=t[o],c=a?a(r[i],e[i],i,r,e):void 0;c===void 0&&(c=e[i]),s?n7(r,i,c):r7(r,i,c)}return r}var Di=a7,s7=Di,o7=Ci;function l7(e,t){return e&&s7(t,o7(t),e)}var i7=l7,c7=Di,u7=Cd;function d7(e,t){return e&&c7(t,u7(t),e)}var m7=d7,ku={exports:{}};ku.exports;(function(e,t){var r=Pn,a=t&&!t.nodeType&&t,s=a&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===a,l=o?r.Buffer:void 0,i=l?l.allocUnsafe:void 0;function c(d,u){if(u)return d.slice();var m=d.length,f=i?i(m):new d.constructor(m);return d.copy(f),f}e.exports=c})(ku,ku.exports);var f7=ku.exports;function p7(e,t){var r=-1,a=e.length;for(t||(t=Array(a));++r<a;)t[r]=e[r];return t}var h7=p7,g7=Di,v7=fg;function y7(e,t){return g7(e,v7(e),t)}var E7=y7,x7=UN,b7=x7(Object.getPrototypeOf,Object),kd=b7,w7=mg,N7=kd,S7=fg,C7=jN,k7=Object.getOwnPropertySymbols,D7=k7?function(e){for(var t=[];e;)w7(t,S7(e)),e=N7(e);return t}:C7,i1=D7,A7=Di,T7=i1;function _7(e,t){return A7(e,T7(e),t)}var O7=_7,R7=FN,M7=i1,P7=Cd;function L7(e){return R7(e,P7,M7)}var c1=L7,I7=Object.prototype,$7=I7.hasOwnProperty;function F7(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&$7.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var j7=F7,rE=$N;function B7(e){var t=new e.constructor(e.byteLength);return new rE(t).set(new rE(e)),t}var Sg=B7,z7=Sg;function U7(e,t){var r=t?z7(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var V7=U7,W7=/\w*$/;function H7(e){var t=new e.constructor(e.source,W7.exec(e));return t.lastIndex=e.lastIndex,t}var Y7=H7,nE=ko,aE=nE?nE.prototype:void 0,sE=aE?aE.valueOf:void 0;function q7(e){return sE?Object(sE.call(e)):{}}var G7=q7,K7=Sg;function X7(e,t){var r=t?K7(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var Q7=X7,J7=Sg,Z7=V7,ej=Y7,tj=G7,rj=Q7,nj="[object Boolean]",aj="[object Date]",sj="[object Map]",oj="[object Number]",lj="[object RegExp]",ij="[object Set]",cj="[object String]",uj="[object Symbol]",dj="[object ArrayBuffer]",mj="[object DataView]",fj="[object Float32Array]",pj="[object Float64Array]",hj="[object Int8Array]",gj="[object Int16Array]",vj="[object Int32Array]",yj="[object Uint8Array]",Ej="[object Uint8ClampedArray]",xj="[object Uint16Array]",bj="[object Uint32Array]";function wj(e,t,r){var a=e.constructor;switch(t){case dj:return J7(e);case nj:case aj:return new a(+e);case mj:return Z7(e,r);case fj:case pj:case hj:case gj:case vj:case yj:case Ej:case xj:case bj:return rj(e,r);case sj:return new a;case oj:case cj:return new a(e);case lj:return ej(e);case ij:return new a;case uj:return tj(e)}}var Nj=wj,Sj=sa,oE=Object.create,Cj=function(){function e(){}return function(t){if(!Sj(t))return{};if(oE)return oE(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),u1=Cj,kj=u1,Dj=kd,Aj=vg;function Tj(e){return typeof e.constructor=="function"&&!Aj(e)?kj(Dj(e)):{}}var _j=Tj,Oj=xd,Rj=Ua,Mj="[object Map]";function Pj(e){return Rj(e)&&Oj(e)==Mj}var Lj=Pj,Ij=Lj,$j=Ed,lE=hg,iE=lE&&lE.isMap,Fj=iE?$j(iE):Ij,jj=Fj,Bj=xd,zj=Ua,Uj="[object Set]";function Vj(e){return zj(e)&&Bj(e)==Uj}var Wj=Vj,Hj=Wj,Yj=Ed,cE=hg,uE=cE&&cE.isSet,qj=uE?Yj(uE):Hj,Gj=qj,Kj=dg,Xj=o1,Qj=l1,Jj=i7,Zj=m7,e9=f7,t9=h7,r9=E7,n9=O7,a9=VN,s9=c1,o9=xd,l9=j7,i9=Nj,c9=_j,u9=Gr,d9=yd,m9=jj,f9=sa,p9=Gj,h9=Ci,g9=Cd,v9=1,y9=2,E9=4,d1="[object Arguments]",x9="[object Array]",b9="[object Boolean]",w9="[object Date]",N9="[object Error]",m1="[object Function]",S9="[object GeneratorFunction]",C9="[object Map]",k9="[object Number]",f1="[object Object]",D9="[object RegExp]",A9="[object Set]",T9="[object String]",_9="[object Symbol]",O9="[object WeakMap]",R9="[object ArrayBuffer]",M9="[object DataView]",P9="[object Float32Array]",L9="[object Float64Array]",I9="[object Int8Array]",$9="[object Int16Array]",F9="[object Int32Array]",j9="[object Uint8Array]",B9="[object Uint8ClampedArray]",z9="[object Uint16Array]",U9="[object Uint32Array]",Ze={};Ze[d1]=Ze[x9]=Ze[R9]=Ze[M9]=Ze[b9]=Ze[w9]=Ze[P9]=Ze[L9]=Ze[I9]=Ze[$9]=Ze[F9]=Ze[C9]=Ze[k9]=Ze[f1]=Ze[D9]=Ze[A9]=Ze[T9]=Ze[_9]=Ze[j9]=Ze[B9]=Ze[z9]=Ze[U9]=!0;Ze[N9]=Ze[m1]=Ze[O9]=!1;function Ic(e,t,r,a,s,o){var l,i=t&v9,c=t&y9,d=t&E9;if(r&&(l=s?r(e,a,s,o):r(e)),l!==void 0)return l;if(!f9(e))return e;var u=u9(e);if(u){if(l=l9(e),!i)return t9(e,l)}else{var m=o9(e),f=m==m1||m==S9;if(d9(e))return e9(e,i);if(m==f1||m==d1||f&&!s){if(l=c||f?{}:c9(e),!i)return c?n9(e,Zj(l,e)):r9(e,Jj(l,e))}else{if(!Ze[m])return s?e:{};l=i9(e,m,i)}}o||(o=new Kj);var x=o.get(e);if(x)return x;o.set(e,l),p9(e)?e.forEach(function(v){l.add(Ic(v,t,r,v,e,o))}):m9(e)&&e.forEach(function(v,p){l.set(p,Ic(v,t,r,p,e,o))});var b=d?c?s9:a9:c?g9:h9,y=u?void 0:b(e);return Xj(y||e,function(v,p){y&&(p=v,v=e[p]),Qj(l,p,Ic(v,t,r,p,e,o))}),l}var V9=Ic;function W9(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var H9=W9,Y9=wd,q9=vN;function G9(e,t){return t.length<2?e:Y9(e,q9(t,0,-1))}var K9=G9,X9=bd,Q9=H9,J9=K9,Z9=ki;function eB(e,t){return t=X9(t,e),e=J9(e,t),e==null||delete e[Z9(Q9(t))]}var tB=eB,rB=Do,nB=kd,aB=Ua,sB="[object Object]",oB=Function.prototype,lB=Object.prototype,p1=oB.toString,iB=lB.hasOwnProperty,cB=p1.call(Object);function uB(e){if(!aB(e)||rB(e)!=sB)return!1;var t=nB(e);if(t===null)return!0;var r=iB.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&p1.call(r)==cB}var dB=uB,mB=dB;function fB(e){return mB(e)?void 0:e}var pB=fB,hB=ZN;function gB(e){var t=e==null?0:e.length;return t?hB(e,1):[]}var vB=gB,yB=vB,EB=e1,xB=r1;function bB(e){return xB(EB(e,void 0,yB),e+"")}var wB=bB,NB=bg,SB=V9,CB=tB,kB=bd,DB=Di,AB=pB,TB=wB,_B=c1,OB=1,RB=2,MB=4,PB=TB(function(e,t){var r={};if(e==null)return r;var a=!1;t=NB(t,function(o){return o=kB(o,e),a||(a=o.length>1),o}),DB(e,_B(e),r),a&&(r=SB(r,OB|RB|MB,AB));for(var s=t.length;s--;)CB(r,t[s]);return r}),LB=PB;const IB=gr(LB);var $B=o1,FB=u1,jB=wg,BB=Sd,zB=kd,UB=Gr,VB=yd,WB=Gh,HB=sa,YB=gg;function qB(e,t,r){var a=UB(e),s=a||VB(e)||YB(e);if(t=BB(t),r==null){var o=e&&e.constructor;s?r=a?new o:[]:HB(e)?r=WB(o)?FB(zB(e)):{}:r={}}return(s?$B:jB)(e,function(l,i,c){return t(r,l,i,c)}),r}var GB=qB;const KB=gr(GB);var XB={exports:{}};(function(e,t){(function(r,a){e.exports=a()})(Br,function(){return function(r,a,s){a.prototype.isBetween=function(o,l,i,c){var d=s(o),u=s(l),m=(c=c||"()")[0]==="(",f=c[1]===")";return(m?this.isAfter(d,i):!this.isBefore(d,i))&&(f?this.isBefore(u,i):!this.isAfter(u,i))||(m?this.isBefore(d,i):!this.isAfter(d,i))&&(f?this.isAfter(u,i):!this.isBefore(u,i))}}})})(XB);var QB={exports:{}};(function(e,t){(function(r,a){e.exports=a()})(Br,function(){return function(r,a){a.prototype.isSameOrAfter=function(s,o){return this.isSame(s,o)||this.isAfter(s,o)}}})})(QB);var JB={exports:{}};(function(e,t){(function(r,a){e.exports=a()})(Br,function(){return function(r,a){a.prototype.isSameOrBefore=function(s,o){return this.isSame(s,o)||this.isBefore(s,o)}}})})(JB);var ZB={exports:{}};(function(e,t){(function(r,a){e.exports=a()})(Br,function(){return function(r,a,s){var o=a.prototype,l=function(m){return m&&(m.indexOf?m:m.s)},i=function(m,f,x,b,y){var v=m.name?m:m.$locale(),p=l(v[f]),h=l(v[x]),E=p||h.map(function(N){return N.slice(0,b)});if(!y)return E;var w=v.weekStart;return E.map(function(N,S){return E[(S+(w||0))%7]})},c=function(){return s.Ls[s.locale()]},d=function(m,f){return m.formats[f]||function(x){return x.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(b,y,v){return y||v.slice(1)})}(m.formats[f.toUpperCase()])},u=function(){var m=this;return{months:function(f){return f?f.format("MMMM"):i(m,"months")},monthsShort:function(f){return f?f.format("MMM"):i(m,"monthsShort","months",3)},firstDayOfWeek:function(){return m.$locale().weekStart||0},weekdays:function(f){return f?f.format("dddd"):i(m,"weekdays")},weekdaysMin:function(f){return f?f.format("dd"):i(m,"weekdaysMin","weekdays",2)},weekdaysShort:function(f){return f?f.format("ddd"):i(m,"weekdaysShort","weekdays",3)},longDateFormat:function(f){return d(m.$locale(),f)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};o.localeData=function(){return u.bind(this)()},s.localeData=function(){var m=c();return{firstDayOfWeek:function(){return m.weekStart||0},weekdays:function(){return s.weekdays()},weekdaysShort:function(){return s.weekdaysShort()},weekdaysMin:function(){return s.weekdaysMin()},months:function(){return s.months()},monthsShort:function(){return s.monthsShort()},longDateFormat:function(f){return d(m,f)},meridiem:m.meridiem,ordinal:m.ordinal}},s.months=function(){return i(c(),"months")},s.monthsShort=function(){return i(c(),"monthsShort","months",3)},s.weekdays=function(m){return i(c(),"weekdays",null,null,m)},s.weekdaysShort=function(m){return i(c(),"weekdaysShort","weekdays",3,m)},s.weekdaysMin=function(m){return i(c(),"weekdaysMin","weekdays",2,m)}}})})(ZB);var ez={exports:{}};(function(e,t){(function(r,a){e.exports=a()})(Br,function(){var r={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(a,s,o){var l=s.prototype,i=l.format;o.en.formats=r,l.format=function(c){c===void 0&&(c="YYYY-MM-DDTHH:mm:ssZ");var d=this.$locale().formats,u=function(m,f){return m.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(x,b,y){var v=y&&y.toUpperCase();return b||f[y]||r[y]||f[v].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(p,h,E){return h||E.slice(1)})})}(c,d===void 0?{}:d);return i.call(this,u)}}})})(ez);var tz={exports:{}};(function(e,t){(function(r,a){e.exports=a()})(Br,function(){return function(r,a,s){var o=function(l,i){if(!i||!i.length||i.length===1&&!i[0]||i.length===1&&Array.isArray(i[0])&&!i[0].length)return null;var c;i.length===1&&i[0].length>0&&(i=i[0]),c=(i=i.filter(function(u){return u}))[0];for(var d=1;d<i.length;d+=1)i[d].isValid()&&!i[d][l](c)||(c=i[d]);return c};s.max=function(){var l=[].slice.call(arguments,0);return o("isAfter",l)},s.min=function(){var l=[].slice.call(arguments,0);return o("isBefore",l)}}})})(tz);var rz={exports:{}};(function(e,t){(function(r,a){e.exports=a()})(Br,function(){var r="minute",a=/[+-]\d\d(?::?\d\d)?/g,s=/([+-]|\d\d)/g;return function(o,l,i){var c=l.prototype;i.utc=function(y){var v={date:y,utc:!0,args:arguments};return new l(v)},c.utc=function(y){var v=i(this.toDate(),{locale:this.$L,utc:!0});return y?v.add(this.utcOffset(),r):v},c.local=function(){return i(this.toDate(),{locale:this.$L,utc:!1})};var d=c.parse;c.parse=function(y){y.utc&&(this.$u=!0),this.$utils().u(y.$offset)||(this.$offset=y.$offset),d.call(this,y)};var u=c.init;c.init=function(){if(this.$u){var y=this.$d;this.$y=y.getUTCFullYear(),this.$M=y.getUTCMonth(),this.$D=y.getUTCDate(),this.$W=y.getUTCDay(),this.$H=y.getUTCHours(),this.$m=y.getUTCMinutes(),this.$s=y.getUTCSeconds(),this.$ms=y.getUTCMilliseconds()}else u.call(this)};var m=c.utcOffset;c.utcOffset=function(y,v){var p=this.$utils().u;if(p(y))return this.$u?0:p(this.$offset)?m.call(this):this.$offset;if(typeof y=="string"&&(y=function(N){N===void 0&&(N="");var S=N.match(a);if(!S)return null;var C=(""+S[0]).match(s)||["-",0,0],k=C[0],D=60*+C[1]+ +C[2];return D===0?0:k==="+"?D:-D}(y),y===null))return this;var h=Math.abs(y)<=16?60*y:y,E=this;if(v)return E.$offset=h,E.$u=y===0,E;if(y!==0){var w=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(E=this.local().add(h+w,r)).$offset=h,E.$x.$localOffset=w}else E=this.utc();return E};var f=c.format;c.format=function(y){var v=y||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return f.call(this,v)},c.valueOf=function(){var y=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*y},c.isUTC=function(){return!!this.$u},c.toISOString=function(){return this.toDate().toISOString()},c.toString=function(){return this.toDate().toUTCString()};var x=c.toDate;c.toDate=function(y){return y==="s"&&this.$offset?i(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():x.call(this)};var b=c.diff;c.diff=function(y,v,p){if(y&&this.$u===y.$u)return b.call(this,y,v,p);var h=this.local(),E=i(y).local();return b.call(h,E,v,p)}}})})(rz);var nz={exports:{}};(function(e,t){(function(r,a){e.exports=a()})(Br,function(){return function(r,a){a.prototype.isLeapYear=function(){return this.$y%4==0&&this.$y%100!=0||this.$y%400==0}}})})(nz);function xn(e){return e.children}var hr={PREVIOUS:"PREV",NEXT:"NEXT",TODAY:"TODAY",DATE:"DATE"},Zt={MONTH:"month",WEEK:"week",WORK_WEEK:"work_week",DAY:"day",AGENDA:"agenda"},dE=Object.keys(Zt).map(function(e){return Zt[e]});te.oneOfType([te.string,te.func]);te.any;te.func;te.oneOfType([te.arrayOf(te.oneOf(dE)),te.objectOf(function(e,t){var r=dE.indexOf(t)!==-1&&typeof e[t]=="boolean";if(r)return null;for(var a=arguments.length,s=new Array(a>2?a-2:0),o=2;o<a;o++)s[o-2]=arguments[o];return te.elementType.apply(te,[e,t].concat(s))})]);te.oneOfType([te.oneOf(["overlap","no-overlap"]),te.func]);var mE={seconds:1e3,minutes:1e3*60,hours:1e3*60*60,day:1e3*60*60*24};function h1(e,t){var r=Ut(e,"month");return Ut(r,"week",t.startOfWeek())}function g1(e,t){var r=xu(e,"month");return xu(r,"week",t.startOfWeek())}function az(e,t){for(var r=h1(e,t),a=g1(e,t),s=[];So(r,a,"day");)s.push(r),r=un(r,1,"day");return s}function sz(e,t){var r=Ut(e,t);return vi(r,e)?r:un(r,1,t)}function oz(e,t){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"day",a=e,s=[];So(a,t,r);)s.push(a),a=un(a,1,r);return s}function lz(e,t){return t==null&&e==null?null:(t==null&&(t=new Date),e==null&&(e=new Date),e=Ut(e,"day"),e=Jl(e,Jl(t)),e=co(e,co(t)),e=Ql(e,Ql(t)),Xl(e,Xl(t)))}function fE(e){return Jl(e)===0&&co(e)===0&&Ql(e)===0&&Xl(e)===0}function iz(e,t,r,a){return r==="day"&&(r="date"),Math.abs(Kv[r](e,void 0,a)-Kv[r](t,void 0,a))}function Cg(e,t,r){return!r||r==="milliseconds"?Math.abs(+e-+t):Math.round(Math.abs(+Ut(e,r)/mE[r]-+Ut(t,r)/mE[r]))}var cz=te.oneOfType([te.string,te.func]);function uz(e,t,r,a,s){var o=typeof a=="function"?a(r,s,e):t.call(e,r,a,s);return Wl(o==null||typeof o=="string","`localizer format(..)` must return a string, null, or undefined"),o}function dz(e,t,r){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,t+r,0,0)}function kg(e,t){return e.getTimezoneOffset()-t.getTimezoneOffset()}function mz(e,t){return Cg(e,t,"minutes")+kg(e,t)}function fz(e){var t=Ut(e,"day");return Cg(t,e,"minutes")+kg(t,e)}function pz(e,t){return qh(e,t,"day")}function hz(e,t,r){var a=vi(e,t,"minutes");return a?yi(t,r,"minutes"):dd(t,r,"minutes")}function bp(e,t){return iz(e,t,"day")}function gz(e){var t=e.evtA,r=t.start,a=t.end,s=t.allDay,o=e.evtB,l=o.start,i=o.end,c=o.allDay,d=+Ut(r,"day")-+Ut(l,"day"),u=bp(r,a),m=bp(l,i);return d||m-u||!!c-!!s||+r-+l||+a-+i}function vz(e){var t=e.event,r=t.start,a=t.end,s=e.range,o=s.start,l=s.end,i=Ut(r,"day"),c=So(i,l,"day"),d=Yh(i,a,"minutes"),u=d?dd(a,o,"minutes"):yi(a,o,"minutes");return c&&u}function yz(e,t){return vi(e,t,"day")}function Ez(e,t){return fE(e)&&fE(t)}var xz=Mt(function e(t){var r=this;Rt(this,e),Wl(typeof t.format=="function","date localizer `format(..)` must be a function"),Wl(typeof t.firstOfWeek=="function","date localizer `firstOfWeek(..)` must be a function"),this.propType=t.propType||cz,this.formats=t.formats,this.format=function(){for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return uz.apply(void 0,[r,t.format].concat(s))},this.startOfWeek=t.firstOfWeek,this.merge=t.merge||lz,this.inRange=t.inRange||mN,this.lt=t.lt||qh,this.lte=t.lte||So,this.gt=t.gt||dd,this.gte=t.gte||yi,this.eq=t.eq||vi,this.neq=t.neq||Yh,this.startOf=t.startOf||Ut,this.endOf=t.endOf||xu,this.add=t.add||un,this.range=t.range||oz,this.diff=t.diff||Cg,this.ceil=t.ceil||sz,this.min=t.min||uN,this.max=t.max||dN,this.minutes=t.minutes||co,this.daySpan=t.daySpan||bp,this.firstVisibleDay=t.firstVisibleDay||h1,this.lastVisibleDay=t.lastVisibleDay||g1,this.visibleDays=t.visibleDays||az,this.getSlotDate=t.getSlotDate||dz,this.getTimezoneOffset=t.getTimezoneOffset||function(a){return a.getTimezoneOffset()},this.getDstOffset=t.getDstOffset||kg,this.getTotalMin=t.getTotalMin||mz,this.getMinutesFromMidnight=t.getMinutesFromMidnight||fz,this.continuesPrior=t.continuesPrior||pz,this.continuesAfter=t.continuesAfter||hz,this.sortEvents=t.sortEvents||gz,this.inEventRange=t.inEventRange||vz,this.isSameDate=t.isSameDate||yz,this.startAndEndAreDateOnly=t.startAndEndAreDateOnly||Ez,this.segmentOffset=t.browserTZOffset?t.browserTZOffset():0});function bz(e,t,r,a){var s=Qe(Qe({},e.formats),r);return Qe(Qe({},e),{},{messages:a,startOfWeek:function(){return e.startOfWeek(t)},format:function(l,i){return e.format(l,s[i]||i,t)}})}var wz=function(e){function t(){var r;Rt(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return r=Xt(this,t,[].concat(s)),r.navigate=function(l){r.props.onNavigate(l)},r.view=function(l){r.props.onView(l)},r}return Qt(t,e),Mt(t,[{key:"render",value:function(){var a=this.props,s=a.localizer.messages,o=a.label;return n.createElement("div",{className:"rbc-toolbar"},n.createElement("span",{className:"rbc-btn-group"},n.createElement("button",{type:"button",onClick:this.navigate.bind(null,hr.TODAY)},s.today),n.createElement("button",{type:"button",onClick:this.navigate.bind(null,hr.PREVIOUS)},s.previous),n.createElement("button",{type:"button",onClick:this.navigate.bind(null,hr.NEXT)},s.next)),n.createElement("span",{className:"rbc-toolbar-label"},o),n.createElement("span",{className:"rbc-btn-group"},this.viewNamesGroup(s)))}},{key:"viewNamesGroup",value:function(a){var s=this,o=this.props.views,l=this.props.view;if(o.length>1)return o.map(function(i){return n.createElement("button",{type:"button",key:i,className:xt({"rbc-active":l===i}),onClick:s.view.bind(null,i)},a[i])})}}])}(n.Component);function lt(e,t){e&&e.apply(null,[].concat(t))}var Nz={date:"Date",time:"Time",event:"Event",allDay:"All Day",week:"Week",work_week:"Work Week",day:"Day",month:"Month",previous:"Back",next:"Next",yesterday:"Yesterday",tomorrow:"Tomorrow",today:"Today",agenda:"Agenda",noEventsInRange:"There are no events in this range.",showMore:function(t){return"+".concat(t," more")}};function Sz(e){return Qe(Qe({},Nz),e)}function Cz(e){var t=e.ref,r=e.callback;g.useEffect(function(){var a=function(o){t.current&&!t.current.contains(o.target)&&r()};return document.addEventListener("mousedown",a),function(){document.removeEventListener("mousedown",a)}},[t,r])}var kz=["style","className","event","selected","isAllDay","onSelect","onDoubleClick","onKeyPress","localizer","continuesPrior","continuesAfter","accessors","getters","children","components","slotStart","slotEnd"],v1=function(e){function t(){return Rt(this,t),Xt(this,t,arguments)}return Qt(t,e),Mt(t,[{key:"render",value:function(){var a=this.props,s=a.style,o=a.className,l=a.event,i=a.selected,c=a.isAllDay,d=a.onSelect,u=a.onDoubleClick,m=a.onKeyPress,f=a.localizer,x=a.continuesPrior,b=a.continuesAfter,y=a.accessors,v=a.getters,p=a.children,h=a.components,E=h.event,w=h.eventWrapper,N=a.slotStart,S=a.slotEnd,C=_n(a,kz);delete C.resizable;var k=y.title(l),D=y.tooltip(l),O=y.end(l),A=y.start(l),$=y.allDay(l),P=c||$||f.diff(A,f.ceil(O,"day"),"day")>1,I=v.eventProp(l,A,O,i),L=n.createElement("div",{className:"rbc-event-content",title:D||void 0},E?n.createElement(E,{event:l,continuesPrior:x,continuesAfter:b,title:k,isAllDay:$,localizer:f,slotStart:N,slotEnd:S}):k);return n.createElement(w,Object.assign({},this.props,{type:"date"}),n.createElement("div",Object.assign({},C,{style:Qe(Qe({},I.style),s),className:xt("rbc-event",o,I.className,{"rbc-selected":i,"rbc-event-allday":P,"rbc-event-continues-prior":x,"rbc-event-continues-after":b}),onClick:function(T){return d&&d(l,T)},onDoubleClick:function(T){return u&&u(l,T)},onKeyDown:function(T){return m&&m(l,T)}}),typeof p=="function"?p(L):L))}}])}(n.Component);function Dd(e,t){return!e||t==null?!1:WL(e,t)}function y1(e,t){var r=e.right-e.left,a=r/t;return a}function E1(e,t,r,a){var s=y1(e,a);return r?a-1-Math.floor((t-e.left)/s):Math.floor((t-e.left)/s)}function Dz(e,t){var r=t.x,a=t.y;return a>=e.top&&a<=e.bottom&&r>=e.left&&r<=e.right}function Az(e,t,r,a,s){var o=-1,l=-1,i=a-1,c=y1(t,a),d=E1(t,r.x,s,a),u=t.top<r.y&&t.bottom>r.y,m=t.top<e.y&&t.bottom>e.y,f=e.y>t.bottom,x=t.top>e.y,b=r.top<t.top&&r.bottom>t.bottom;return b&&(o=0,l=i),u&&(x?(o=0,l=d):f&&(o=d,l=i)),m&&(o=l=s?i-Math.floor((e.x-t.left)/c):Math.floor((e.x-t.left)/c),u?d<o?o=d:l=d:e.y<r.y?l=i:o=0),{startIdx:o,endIdx:l}}function Tz(e){var t=e.target,r=e.offset,a=e.container,s=e.box,o=os(t),l=o.top,i=o.left,c=o.width,d=o.height,u=os(a),m=u.top,f=u.left,x=u.width,b=u.height,y=os(s),v=y.width,p=y.height,h=m+b,E=f+x,w=l+p,N=i+v,S=r.x,C=r.y,k=w>h?l-p-C:l+C+d,D=N>E?i+S-v+c:i+S;return{topOffset:k,leftOffset:D}}function _z(e){var t=e.containerRef,r=e.accessors,a=e.getters,s=e.selected,o=e.components,l=e.localizer,i=e.position,c=e.show,d=e.events,u=e.slotStart,m=e.slotEnd,f=e.onSelect,x=e.onDoubleClick,b=e.onKeyPress,y=e.handleDragStart,v=e.popperRef,p=e.target,h=e.offset;Cz({ref:v,callback:c}),g.useLayoutEffect(function(){var N=Tz({target:p,offset:h,container:t.current,box:v.current}),S=N.topOffset,C=N.leftOffset;v.current.style.top="".concat(S,"px"),v.current.style.left="".concat(C,"px")},[h.x,h.y,p]);var E=i.width,w={minWidth:E+E/2};return n.createElement("div",{style:w,className:"rbc-overlay",ref:v},n.createElement("div",{className:"rbc-overlay-header"},l.format(u,"dayHeaderFormat")),d.map(function(N,S){return n.createElement(v1,{key:S,type:"popup",localizer:l,event:N,getters:a,onSelect:f,accessors:r,components:o,onDoubleClick:x,onKeyPress:b,continuesPrior:l.lt(r.end(N),u,"day"),continuesAfter:l.gte(r.start(N),m,"day"),slotStart:u,slotEnd:m,selected:Dd(N,s),draggable:!0,onDragStart:function(){return y(N)},onDragEnd:function(){return c()}})}))}var x1=n.forwardRef(function(e,t){return n.createElement(_z,Object.assign({},e,{popperRef:t}))});x1.propTypes={accessors:te.object.isRequired,getters:te.object.isRequired,selected:te.object,components:te.object.isRequired,localizer:te.object.isRequired,position:te.object.isRequired,show:te.func.isRequired,events:te.array.isRequired,slotStart:te.instanceOf(Date).isRequired,slotEnd:te.instanceOf(Date),onSelect:te.func,onDoubleClick:te.func,onKeyPress:te.func,handleDragStart:te.func,style:te.object,offset:te.shape({x:te.number,y:te.number})};function Oz(e){var t=e.containerRef,r=e.popupOffset,a=r===void 0?5:r,s=e.overlay,o=e.accessors,l=e.localizer,i=e.components,c=e.getters,d=e.selected,u=e.handleSelectEvent,m=e.handleDoubleClickEvent,f=e.handleKeyPressEvent,x=e.handleDragStart,b=e.onHide,y=e.overlayDisplay,v=g.useRef(null);if(!s.position)return null;var p=a;isNaN(a)||(p={x:a,y:a});var h=s.position,E=s.events,w=s.date,N=s.end;return n.createElement(ig,{rootClose:!0,flip:!0,show:!0,placement:"bottom",onHide:b,target:s.target},function(S){var C=S.props;return n.createElement(x1,Object.assign({},C,{containerRef:t,ref:v,target:s.target,offset:p,accessors:o,getters:c,selected:d,components:i,localizer:l,position:h,show:y,events:E,slotStart:w,slotEnd:N,onSelect:u,onDoubleClick:m,onKeyPress:f,handleDragStart:x}))})}var Dg=n.forwardRef(function(e,t){return n.createElement(Oz,Object.assign({},e,{containerRef:t}))});Dg.propTypes={popupOffset:te.oneOfType([te.number,te.shape({x:te.number,y:te.number})]),overlay:te.shape({position:te.object,events:te.array,date:te.instanceOf(Date),end:te.instanceOf(Date)}),accessors:te.object.isRequired,localizer:te.object.isRequired,components:te.object.isRequired,getters:te.object.isRequired,selected:te.object,handleSelectEvent:te.func,handleDoubleClickEvent:te.func,handleKeyPressEvent:te.func,handleDragStart:te.func,onHide:te.func,overlayDisplay:te.func};function Ht(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;return il(r,e,t,{passive:!1})}function Rz(e,t,r){return!e||Zl(e,document.elementFromPoint(t,r))}function Mz(e,t){var r=t.clientX,a=t.clientY,s=document.elementFromPoint(r,a);return YN(s,".rbc-event",e)}function Pz(e,t){var r=t.clientX,a=t.clientY,s=document.elementFromPoint(r,a);return YN(s,".rbc-show-more",e)}function Du(e,t){return!!Mz(e,t)}function Lz(e,t){return!!Pz(e,t)}function Zo(e){var t=e;return e.touches&&e.touches.length&&(t=e.touches[0]),{clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY}}var pE=5,Iz=250,b1=function(){function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=r.global,s=a===void 0?!1:a,o=r.longPressThreshold,l=o===void 0?250:o,i=r.validContainers,c=i===void 0?[]:i;Rt(this,e),this._initialEvent=null,this.selecting=!1,this.isDetached=!1,this.container=t,this.globalMouse=!t||s,this.longPressThreshold=l,this.validContainers=c,this._listeners=Object.create(null),this._handleInitialEvent=this._handleInitialEvent.bind(this),this._handleMoveEvent=this._handleMoveEvent.bind(this),this._handleTerminatingEvent=this._handleTerminatingEvent.bind(this),this._keyListener=this._keyListener.bind(this),this._dropFromOutsideListener=this._dropFromOutsideListener.bind(this),this._dragOverFromOutsideListener=this._dragOverFromOutsideListener.bind(this),this._removeTouchMoveWindowListener=Ht("touchmove",function(){},window),this._removeKeyDownListener=Ht("keydown",this._keyListener),this._removeKeyUpListener=Ht("keyup",this._keyListener),this._removeDropFromOutsideListener=Ht("drop",this._dropFromOutsideListener),this._removeDragOverFromOutsideListener=Ht("dragover",this._dragOverFromOutsideListener),this._addInitialEventListener()}return Mt(e,[{key:"on",value:function(r,a){var s=this._listeners[r]||(this._listeners[r]=[]);return s.push(a),{remove:function(){var l=s.indexOf(a);l!==-1&&s.splice(l,1)}}}},{key:"emit",value:function(r){for(var a=arguments.length,s=new Array(a>1?a-1:0),o=1;o<a;o++)s[o-1]=arguments[o];var l,i=this._listeners[r]||[];return i.forEach(function(c){l===void 0&&(l=c.apply(void 0,s))}),l}},{key:"teardown",value:function(){this._initialEvent=null,this._initialEventData=null,this._selectRect=null,this.selecting=!1,this._lastClickData=null,this.isDetached=!0,this._listeners=Object.create(null),this._removeTouchMoveWindowListener&&this._removeTouchMoveWindowListener(),this._removeInitialEventListener&&this._removeInitialEventListener(),this._removeEndListener&&this._removeEndListener(),this._onEscListener&&this._onEscListener(),this._removeMoveListener&&this._removeMoveListener(),this._removeKeyUpListener&&this._removeKeyUpListener(),this._removeKeyDownListener&&this._removeKeyDownListener(),this._removeDropFromOutsideListener&&this._removeDropFromOutsideListener(),this._removeDragOverFromOutsideListener&&this._removeDragOverFromOutsideListener()}},{key:"isSelected",value:function(r){var a=this._selectRect;return!a||!this.selecting?!1:hE(a,bs(r))}},{key:"filter",value:function(r){var a=this._selectRect;return!a||!this.selecting?[]:r.filter(this.isSelected,this)}},{key:"_addLongPressListener",value:function(r,a){var s=this,o=null,l=null,i=null,c=function(f){o=setTimeout(function(){u(),r(f)},s.longPressThreshold),l=Ht("touchmove",function(){return u()}),i=Ht("touchend",function(){return u()})},d=Ht("touchstart",c),u=function(){o&&clearTimeout(o),l&&l(),i&&i(),o=null,l=null,i=null};return a&&c(a),function(){u(),d()}}},{key:"_addInitialEventListener",value:function(){var r=this,a=Ht("mousedown",function(o){r._removeInitialEventListener(),r._handleInitialEvent(o),r._removeInitialEventListener=Ht("mousedown",r._handleInitialEvent)}),s=Ht("touchstart",function(o){r._removeInitialEventListener(),r._removeInitialEventListener=r._addLongPressListener(r._handleInitialEvent,o)});this._removeInitialEventListener=function(){a(),s()}}},{key:"_dropFromOutsideListener",value:function(r){var a=Zo(r),s=a.pageX,o=a.pageY,l=a.clientX,i=a.clientY;this.emit("dropFromOutside",{x:s,y:o,clientX:l,clientY:i}),r.preventDefault()}},{key:"_dragOverFromOutsideListener",value:function(r){var a=Zo(r),s=a.pageX,o=a.pageY,l=a.clientX,i=a.clientY;this.emit("dragOverFromOutside",{x:s,y:o,clientX:l,clientY:i}),r.preventDefault()}},{key:"_handleInitialEvent",value:function(r){if(this._initialEvent=r,!this.isDetached){var a=Zo(r),s=a.clientX,o=a.clientY,l=a.pageX,i=a.pageY,c=this.container(),d,u;if(!(r.which===3||r.button===2||!Rz(c,s,o))){if(!this.globalMouse&&c&&!Zl(c,r.target)){var m=$z(0),f=m.top,x=m.left,b=m.bottom,y=m.right;if(u=bs(c),d=hE({top:u.top-f,left:u.left-x,bottom:u.bottom+b,right:u.right+y},{top:i,left:l}),!d)return}var v=this.emit("beforeSelect",this._initialEventData={isTouch:/^touch/.test(r.type),x:l,y:i,clientX:s,clientY:o});if(v!==!1)switch(r.type){case"mousedown":this._removeEndListener=Ht("mouseup",this._handleTerminatingEvent),this._onEscListener=Ht("keydown",this._handleTerminatingEvent),this._removeMoveListener=Ht("mousemove",this._handleMoveEvent);break;case"touchstart":this._handleMoveEvent(r),this._removeEndListener=Ht("touchend",this._handleTerminatingEvent),this._removeMoveListener=Ht("touchmove",this._handleMoveEvent);break}}}}},{key:"_isWithinValidContainer",value:function(r){var a=r.target,s=this.validContainers;return!s||!s.length||!a?!0:s.some(function(o){return!!a.closest(o)})}},{key:"_handleTerminatingEvent",value:function(r){var a=this.selecting,s=this._selectRect;if(!a&&r.type.includes("key")&&(r=this._initialEvent),this.selecting=!1,this._removeEndListener&&this._removeEndListener(),this._removeMoveListener&&this._removeMoveListener(),this._selectRect=null,this._initialEvent=null,this._initialEventData=null,!!r){var o=!this.container||Zl(this.container(),r.target),l=this._isWithinValidContainer(r);return r.key==="Escape"||!l?this.emit("reset"):!a&&o?this._handleClickEvent(r):a?this.emit("select",s):this.emit("reset")}}},{key:"_handleClickEvent",value:function(r){var a=Zo(r),s=a.pageX,o=a.pageY,l=a.clientX,i=a.clientY,c=new Date().getTime();return this._lastClickData&&c-this._lastClickData.timestamp<Iz?(this._lastClickData=null,this.emit("doubleClick",{x:s,y:o,clientX:l,clientY:i})):(this._lastClickData={timestamp:c},this.emit("click",{x:s,y:o,clientX:l,clientY:i}))}},{key:"_handleMoveEvent",value:function(r){if(!(this._initialEventData===null||this.isDetached)){var a=this._initialEventData,s=a.x,o=a.y,l=Zo(r),i=l.pageX,c=l.pageY,d=Math.abs(s-i),u=Math.abs(o-c),m=Math.min(i,s),f=Math.min(c,o),x=this.selecting,b=this.isClick(i,c);b&&!x&&!(d||u)||(!x&&!b&&this.emit("selectStart",this._initialEventData),b||(this.selecting=!0,this._selectRect={top:f,left:m,x:i,y:c,right:m+d,bottom:f+u},this.emit("selecting",this._selectRect)),r.preventDefault())}}},{key:"_keyListener",value:function(r){this.ctrl=r.metaKey||r.ctrlKey}},{key:"isClick",value:function(r,a){var s=this._initialEventData,o=s.x,l=s.y,i=s.isTouch;return!i&&Math.abs(r-o)<=pE&&Math.abs(a-l)<=pE}}])}();function $z(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return ta(e)!=="object"&&(e={top:e,left:e,right:e,bottom:e}),e}function hE(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=bs(e),s=a.top,o=a.left,l=a.right,i=l===void 0?o:l,c=a.bottom,d=c===void 0?s:c,u=bs(t),m=u.top,f=u.left,x=u.right,b=x===void 0?f:x,y=u.bottom,v=y===void 0?m:y;return!(d-r<m||s+r>v||i-r<f||o+r>b)}function bs(e){if(!e.getBoundingClientRect)return e;var t=e.getBoundingClientRect(),r=t.left+gE("left"),a=t.top+gE("top");return{top:a,left:r,right:(e.offsetWidth||0)+r,bottom:(e.offsetHeight||0)+a}}function gE(e){if(e==="left")return window.pageXOffset||document.body.scrollLeft||0;if(e==="top")return window.pageYOffset||document.body.scrollTop||0}var Fz=function(e){function t(r,a){var s;return Rt(this,t),s=Xt(this,t,[r,a]),s.state={selecting:!1},s.containerRef=g.createRef(),s}return Qt(t,e),Mt(t,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable()}},{key:"componentDidUpdate",value:function(a){!a.selectable&&this.props.selectable&&this._selectable(),a.selectable&&!this.props.selectable&&this._teardownSelectable()}},{key:"render",value:function(){var a=this.props,s=a.range,o=a.getNow,l=a.getters,i=a.date,c=a.components.dateCellWrapper,d=a.localizer,u=this.state,m=u.selecting,f=u.startIdx,x=u.endIdx,b=o();return n.createElement("div",{className:"rbc-row-bg",ref:this.containerRef},s.map(function(y,v){var p=m&&v>=f&&v<=x,h=l.dayProp(y),E=h.className,w=h.style;return n.createElement(c,{key:v,value:y,range:s},n.createElement("div",{style:w,className:xt("rbc-day-bg",E,p&&"rbc-selected-cell",d.isSameDate(y,b)&&"rbc-today",i&&d.neq(i,y,"month")&&"rbc-off-range-bg")}))}))}},{key:"_selectable",value:function(){var a=this,s=this.containerRef.current,o=this._selector=new b1(this.props.container,{longPressThreshold:this.props.longPressThreshold}),l=function(c,d){if(!Du(s,c)&&!Lz(s,c)){var u=bs(s),m=a.props,f=m.range,x=m.rtl;if(Dz(u,c)){var b=E1(u,c.x,x,f.length);a._selectSlot({startIdx:b,endIdx:b,action:d,box:c})}}a._initial={},a.setState({selecting:!1})};o.on("selecting",function(i){var c=a.props,d=c.range,u=c.rtl,m=-1,f=-1;if(a.state.selecting||(lt(a.props.onSelectStart,[i]),a._initial={x:i.x,y:i.y}),o.isSelected(s)){var x=bs(s),b=Az(a._initial,x,i,d.length,u);m=b.startIdx,f=b.endIdx}a.setState({selecting:!0,startIdx:m,endIdx:f})}),o.on("beforeSelect",function(i){if(a.props.selectable==="ignoreEvents")return!Du(a.containerRef.current,i)}),o.on("click",function(i){return l(i,"click")}),o.on("doubleClick",function(i){return l(i,"doubleClick")}),o.on("select",function(i){a._selectSlot(Qe(Qe({},a.state),{},{action:"select",bounds:i})),a._initial={},a.setState({selecting:!1}),lt(a.props.onSelectEnd,[a.state])})}},{key:"_teardownSelectable",value:function(){this._selector&&(this._selector.teardown(),this._selector=null)}},{key:"_selectSlot",value:function(a){var s=a.endIdx,o=a.startIdx,l=a.action,i=a.bounds,c=a.box;s!==-1&&o!==-1&&this.props.onSelectSlot&&this.props.onSelectSlot({start:o,end:s,action:l,bounds:i,box:c,resourceId:this.props.resourceId})}}])}(n.Component),Mr={propTypes:{slotMetrics:te.object.isRequired,selected:te.object,isAllDay:te.bool,accessors:te.object.isRequired,localizer:te.object.isRequired,components:te.object.isRequired,getters:te.object.isRequired,onSelect:te.func,onDoubleClick:te.func,onKeyPress:te.func},defaultProps:{segments:[],selected:{}},renderEvent:function(t,r){var a=t.selected;t.isAllDay;var s=t.accessors,o=t.getters,l=t.onSelect,i=t.onDoubleClick,c=t.onKeyPress,d=t.localizer,u=t.slotMetrics,m=t.components,f=t.resizable,x=u.continuesPrior(r),b=u.continuesAfter(r);return n.createElement(v1,{event:r,getters:o,localizer:d,accessors:s,components:m,onSelect:l,onDoubleClick:i,onKeyPress:c,continuesPrior:x,continuesAfter:b,slotStart:u.first,slotEnd:u.last,selected:Dd(r,a),resizable:f})},renderSpan:function(t,r,a){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:" ",o=Math.abs(r)/t*100+"%";return n.createElement("div",{key:a,className:"rbc-row-segment",style:{WebkitFlexBasis:o,flexBasis:o,maxWidth:o}},s)}},w1=function(e){function t(){return Rt(this,t),Xt(this,t,arguments)}return Qt(t,e),Mt(t,[{key:"render",value:function(){var a=this,s=this.props,o=s.segments,l=s.slotMetrics.slots,i=s.className,c=1;return n.createElement("div",{className:xt(i,"rbc-row")},o.reduce(function(d,u,m){var f=u.event,x=u.left,b=u.right,y=u.span,v="_lvl_"+m,p=x-c,h=Mr.renderEvent(a.props,f);return p&&d.push(Mr.renderSpan(l,p,"".concat(v,"_gap"))),d.push(Mr.renderSpan(l,y,v,h)),c=b+1,d},[]))}}])}(n.Component);w1.defaultProps=Qe({},Mr.defaultProps);function N1(e){var t=e.dateRange,r=e.unit,a=r===void 0?"day":r,s=e.localizer;return{first:t[0],last:s.add(t[t.length-1],1,a)}}function jz(e,t,r,a){var s=N1({dateRange:t,localizer:a}),o=s.first,l=s.last,i=a.diff(o,l,"day"),c=a.max(a.startOf(r.start(e),"day"),o),d=a.min(a.ceil(r.end(e),"day"),l),u=V$(t,function(f){return a.isSameDate(f,c)}),m=a.diff(c,d,"day");return m=Math.min(m,i),m=Math.max(m-a.segmentOffset,1),{event:e,span:m,left:u+1,right:Math.max(u+m,1)}}function wp(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1/0,r,a,s,o=[],l=[];for(r=0;r<e.length;r++){for(s=e[r],a=0;a<o.length&&Bz(s,o[a]);a++);a>=t?l.push(s):(o[a]||(o[a]=[])).push(s)}for(r=0;r<o.length;r++)o[r].sort(function(i,c){return i.left-c.left});return{levels:o,extra:l}}function ri(e,t,r,a,s){var o={start:a.start(e),end:a.end(e)},l={start:t,end:r};return s.inEventRange({event:o,range:l})}function Bz(e,t){return t.some(function(r){return r.left<=e.right&&r.right>=e.left})}function zz(e,t,r){var a=Pc(e),s=[],o=[];a.forEach(function(c){var d=t.start(c),u=t.end(c);r.daySpan(d,u)>1?s.push(c):o.push(c)});var l=s.sort(function(c,d){return Np(c,d,t,r)}),i=o.sort(function(c,d){return Np(c,d,t,r)});return[].concat(Pc(l),Pc(i))}function Np(e,t,r,a){var s={start:r.start(e),end:r.end(e),allDay:r.allDay(e)},o={start:r.start(t),end:r.end(t),allDay:r.allDay(t)};return a.sortEvents({evtA:s,evtB:o})}var Sp=function(t,r){return t.left<=r&&t.right>=r},Um=function(t,r){return t.filter(function(a){return Sp(a,r)}).map(function(a){return a.event})},S1=function(e){function t(){return Rt(this,t),Xt(this,t,arguments)}return Qt(t,e),Mt(t,[{key:"render",value:function(){for(var a=this.props,s=a.segments,o=a.slotMetrics.slots,l=wp(s).levels[0],i=1,c=1,d=[];i<=o;){var u="_lvl_"+i,m=l.filter(function(w){return Sp(w,i)})[0]||{},f=m.event,x=m.left,b=m.right,y=m.span;if(!f){var v=this.getHiddenEventsForSlot(s,i);if(v.length>0){var p=i-c;p&&d.push(Mr.renderSpan(o,p,u+"_gap")),d.push(Mr.renderSpan(o,1,u,this.renderShowMore(s,i))),c=i=i+1;continue}i++;continue}var h=Math.max(0,x-c);if(this.canRenderSlotEvent(x,y)){var E=Mr.renderEvent(this.props,f);h&&d.push(Mr.renderSpan(o,h,u+"_gap")),d.push(Mr.renderSpan(o,y,u,E)),c=i=b+1}else h&&d.push(Mr.renderSpan(o,h,u+"_gap")),d.push(Mr.renderSpan(o,1,u,this.renderShowMore(s,i))),c=i=i+1}return n.createElement("div",{className:"rbc-row"},d)}},{key:"getHiddenEventsForSlot",value:function(a,s){var o=Um(a,s),l=wp(a).levels[0],i=l.filter(function(c){return Sp(c,s)}).map(function(c){return c.event});return o.filter(function(c){return!i.some(function(d){return d===c})})}},{key:"canRenderSlotEvent",value:function(a,s){var o=this.props.segments;return t8(a,a+s).every(function(l){var i=Um(o,l).length;return i===1})}},{key:"renderShowMore",value:function(a,s){var o=this,l=this.props,i=l.localizer,c=l.slotMetrics,d=l.components,u=c.getEventsForSlot(s),m=Um(a,s),f=m.length;if(d!=null&&d.showMore){var x=d.showMore,b=c.getDateForSlot(s-1);return f?n.createElement(x,{localizer:i,slotDate:b,slot:s,count:f,events:u,remainingEvents:m}):!1}return f?n.createElement("button",{type:"button",key:"sm_"+s,className:xt("rbc-button-link","rbc-show-more"),onClick:function(v){return o.showMore(s,v)}},i.messages.showMore(f,m,u)):!1}},{key:"showMore",value:function(a,s){s.preventDefault(),s.stopPropagation(),this.props.onShowMore(a,s.target)}}])}(n.Component);S1.defaultProps=Qe({},Mr.defaultProps);var Uz=function(t){var r=t.children;return n.createElement("div",{className:"rbc-row-content-scroll-container"},r)},Vz=function(t,r){return t.left<=r&&t.right>=r},Wz=function(t,r){return t[0].range===r[0].range&&t[0].events===r[0].events};function C1(){return QN(function(e){for(var t=e.range,r=e.events,a=e.maxRows,s=e.minRows,o=e.accessors,l=e.localizer,i=N1({dateRange:t,localizer:l}),c=i.first,d=i.last,u=r.map(function(y){return jz(y,t,o,l)}),m=wp(u,Math.max(a-1,1)),f=m.levels,x=m.extra,b=x.length>0?s-1:s;f.length<b;)f.push([]);return{first:c,last:d,levels:f,extra:x,range:t,slots:t.length,clone:function(v){var p=C1();return p(Qe(Qe({},e),v))},getDateForSlot:function(v){return t[v]},getSlotForDate:function(v){return t.find(function(p){return l.isSameDate(p,v)})},getEventsForSlot:function(v){return u.filter(function(p){return Vz(p,v)}).map(function(p){return p.event})},continuesPrior:function(v){return l.continuesPrior(o.start(v),c)},continuesAfter:function(v){var p=o.start(v),h=o.end(v);return l.continuesAfter(p,h,d)}}},Wz)}var ni=function(e){function t(){var r;Rt(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return r=Xt(this,t,[].concat(s)),r.handleSelectSlot=function(l){var i=r.props,c=i.range,d=i.onSelectSlot;d(c.slice(l.start,l.end+1),l)},r.handleShowMore=function(l,i){var c=r.props,d=c.range,u=c.onShowMore,m=r.slotMetrics(r.props),f=V6(r.containerRef.current,".rbc-row-bg")[0],x;f&&(x=f.children[l-1]);var b=m.getEventsForSlot(l);u(b,d[l-1],x,l,i)},r.getContainer=function(){var l=r.props.container;return l?l():r.containerRef.current},r.renderHeadingCell=function(l,i){var c=r.props,d=c.renderHeader,u=c.getNow,m=c.localizer;return d({date:l,key:"header_".concat(i),className:xt("rbc-date-cell",m.isSameDate(l,u())&&"rbc-now")})},r.renderDummy=function(){var l=r.props,i=l.className,c=l.range,d=l.renderHeader,u=l.showAllEvents;return n.createElement("div",{className:i,ref:r.containerRef},n.createElement("div",{className:xt("rbc-row-content",u&&"rbc-row-content-scrollable")},d&&n.createElement("div",{className:"rbc-row",ref:r.headingRowRef},c.map(r.renderHeadingCell)),n.createElement("div",{className:"rbc-row",ref:r.eventRowRef},n.createElement("div",{className:"rbc-row-segment"},n.createElement("div",{className:"rbc-event"},n.createElement("div",{className:"rbc-event-content"}," "))))))},r.containerRef=g.createRef(),r.headingRowRef=g.createRef(),r.eventRowRef=g.createRef(),r.slotMetrics=C1(),r}return Qt(t,e),Mt(t,[{key:"getRowLimit",value:function(){var a,s=jm(this.eventRowRef.current),o=(a=this.headingRowRef)!==null&&a!==void 0&&a.current?jm(this.headingRowRef.current):0,l=jm(this.containerRef.current)-o;return Math.max(Math.floor(l/s),1)}},{key:"render",value:function(){var a=this.props,s=a.date,o=a.rtl,l=a.range,i=a.className,c=a.selected,d=a.selectable,u=a.renderForMeasure,m=a.accessors,f=a.getters,x=a.components,b=a.getNow,y=a.renderHeader,v=a.onSelect,p=a.localizer,h=a.onSelectStart,E=a.onSelectEnd,w=a.onDoubleClick,N=a.onKeyPress,S=a.resourceId,C=a.longPressThreshold,k=a.isAllDay,D=a.resizable,O=a.showAllEvents;if(u)return this.renderDummy();var A=this.slotMetrics(this.props),$=A.levels,P=A.extra,I=O?Uz:xn,L=x.weekWrapper,F={selected:c,accessors:m,getters:f,localizer:p,components:x,onSelect:v,onDoubleClick:w,onKeyPress:N,resourceId:S,slotMetrics:A,resizable:D};return n.createElement("div",{className:i,role:"rowgroup",ref:this.containerRef},n.createElement(Fz,{localizer:p,date:s,getNow:b,rtl:o,range:l,selectable:d,container:this.getContainer,getters:f,onSelectStart:h,onSelectEnd:E,onSelectSlot:this.handleSelectSlot,components:x,longPressThreshold:C,resourceId:S}),n.createElement("div",{className:xt("rbc-row-content",O&&"rbc-row-content-scrollable"),role:"row"},y&&n.createElement("div",{className:"rbc-row ",ref:this.headingRowRef},l.map(this.renderHeadingCell)),n.createElement(I,null,n.createElement(L,Object.assign({isAllDay:k},F,{rtl:this.props.rtl}),$.map(function(T,M){return n.createElement(w1,Object.assign({key:M,segments:T},F))}),!!P.length&&n.createElement(S1,Object.assign({segments:P,onShowMore:this.handleShowMore},F))))))}}])}(n.Component);ni.defaultProps={minRows:0,maxRows:1/0};var Ag=function(t){var r=t.label;return n.createElement("span",{role:"columnheader","aria-sort":"none"},r)},Hz=function(t){var r=t.label,a=t.drilldownView,s=t.onDrillDown;return a?n.createElement("button",{type:"button",className:"rbc-button-link",onClick:s},r):n.createElement("span",null,r)},Yz=["date","className"],qz=function(t,r,a,s,o){return t.filter(function(l){return ri(l,r,a,s,o)})},Ad=function(e){function t(){var r;Rt(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return r=Xt(this,t,[].concat(s)),r.getContainer=function(){return r.containerRef.current},r.renderWeek=function(l,i){var c=r.props,d=c.events,u=c.components,m=c.selectable,f=c.getNow,x=c.selected,b=c.date,y=c.localizer,v=c.longPressThreshold,p=c.accessors,h=c.getters,E=c.showAllEvents,w=r.state,N=w.needLimitMeasure,S=w.rowLimit,C=qz(Pc(d),l[0],l[l.length-1],p,y),k=zz(C,p,y);return n.createElement(ni,{key:i,ref:i===0?r.slotRowRef:void 0,container:r.getContainer,className:"rbc-month-row",getNow:f,date:b,range:l,events:k,maxRows:E?1/0:S,selected:x,selectable:m,components:u,accessors:p,getters:h,localizer:y,renderHeader:r.readerDateHeading,renderForMeasure:N,onShowMore:r.handleShowMore,onSelect:r.handleSelectEvent,onDoubleClick:r.handleDoubleClickEvent,onKeyPress:r.handleKeyPressEvent,onSelectSlot:r.handleSelectSlot,longPressThreshold:v,rtl:r.props.rtl,resizable:r.props.resizable,showAllEvents:E})},r.readerDateHeading=function(l){var i=l.date,c=l.className,d=_n(l,Yz),u=r.props,m=u.date,f=u.getDrilldownView,x=u.localizer,b=x.neq(m,i,"month"),y=x.isSameDate(i,m),v=f(i),p=x.format(i,"dateFormat"),h=r.props.components.dateHeader||Hz;return n.createElement("div",Object.assign({},d,{className:xt(c,b&&"rbc-off-range",y&&"rbc-current"),role:"cell"}),n.createElement(h,{label:p,date:i,drilldownView:v,isOffRange:b,onDrillDown:function(w){return r.handleHeadingClick(i,v,w)}}))},r.handleSelectSlot=function(l,i){r._pendingSelection=r._pendingSelection.concat(l),clearTimeout(r._selectTimer),r._selectTimer=setTimeout(function(){return r.selectDates(i)})},r.handleHeadingClick=function(l,i,c){c.preventDefault(),r.clearSelection(),lt(r.props.onDrillDown,[l,i])},r.handleSelectEvent=function(){r.clearSelection();for(var l=arguments.length,i=new Array(l),c=0;c<l;c++)i[c]=arguments[c];lt(r.props.onSelectEvent,i)},r.handleDoubleClickEvent=function(){r.clearSelection();for(var l=arguments.length,i=new Array(l),c=0;c<l;c++)i[c]=arguments[c];lt(r.props.onDoubleClickEvent,i)},r.handleKeyPressEvent=function(){r.clearSelection();for(var l=arguments.length,i=new Array(l),c=0;c<l;c++)i[c]=arguments[c];lt(r.props.onKeyPressEvent,i)},r.handleShowMore=function(l,i,c,d,u){var m=r.props,f=m.popup,x=m.onDrillDown,b=m.onShowMore,y=m.getDrilldownView,v=m.doShowMoreDrillDown;if(r.clearSelection(),f){var p=CN(c,r.containerRef.current);r.setState({overlay:{date:i,events:l,position:p,target:u}})}else v&&lt(x,[i,y(i)||Zt.DAY]);lt(b,[l,i,d])},r.overlayDisplay=function(){r.setState({overlay:null})},r.state={rowLimit:5,needLimitMeasure:!0,date:null},r.containerRef=g.createRef(),r.slotRowRef=g.createRef(),r._bgRows=[],r._pendingSelection=[],r}return Qt(t,e),Mt(t,[{key:"componentDidMount",value:function(){var a=this,s;this.state.needLimitMeasure&&this.measureRowLimit(this.props),window.addEventListener("resize",this._resizeListener=function(){s||kN(function(){s=!1,a.setState({needLimitMeasure:!0})})},!1)}},{key:"componentDidUpdate",value:function(){this.state.needLimitMeasure&&this.measureRowLimit(this.props)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._resizeListener,!1)}},{key:"render",value:function(){var a=this.props,s=a.date,o=a.localizer,l=a.className,i=o.visibleDays(s,o),c=D6(i,7);return this._weekCount=c.length,n.createElement("div",{className:xt("rbc-month-view",l),role:"table","aria-label":"Month View",ref:this.containerRef},n.createElement("div",{className:"rbc-row rbc-month-header",role:"row"},this.renderHeaders(c[0])),c.map(this.renderWeek),this.props.popup&&this.renderOverlay())}},{key:"renderHeaders",value:function(a){var s=this.props,o=s.localizer,l=s.components,i=a[0],c=a[a.length-1],d=l.header||Ag;return o.range(i,c,"day").map(function(u,m){return n.createElement("div",{key:"header_"+m,className:"rbc-header"},n.createElement(d,{date:u,localizer:o,label:o.format(u,"weekdayFormat")}))})}},{key:"renderOverlay",value:function(){var a,s,o=this,l=(a=(s=this.state)===null||s===void 0?void 0:s.overlay)!==null&&a!==void 0?a:{},i=this.props,c=i.accessors,d=i.localizer,u=i.components,m=i.getters,f=i.selected,x=i.popupOffset,b=i.handleDragStart,y=function(){return o.setState({overlay:null})};return n.createElement(Dg,{overlay:l,accessors:c,localizer:d,components:u,getters:m,selected:f,popupOffset:x,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:b,show:!!l.position,overlayDisplay:this.overlayDisplay,onHide:y})}},{key:"measureRowLimit",value:function(){this.setState({needLimitMeasure:!1,rowLimit:this.slotRowRef.current.getRowLimit()})}},{key:"selectDates",value:function(a){var s=this._pendingSelection.slice();this._pendingSelection=[],s.sort(function(i,c){return+i-+c});var o=new Date(s[0]),l=new Date(s[s.length-1]);l.setDate(s[s.length-1].getDate()+1),lt(this.props.onSelectSlot,{slots:s,start:o,end:l,action:a.action,bounds:a.bounds,box:a.box})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}}],[{key:"getDerivedStateFromProps",value:function(a,s){var o=a.date,l=a.localizer;return{date:o,needLimitMeasure:l.neq(o,s.date,"month")}}}])}(n.Component);Ad.range=function(e,t){var r=t.localizer,a=r.firstVisibleDay(e,r),s=r.lastVisibleDay(e,r);return{start:a,end:s}};Ad.navigate=function(e,t,r){var a=r.localizer;switch(t){case hr.PREVIOUS:return a.add(e,-1,"month");case hr.NEXT:return a.add(e,1,"month");default:return e}};Ad.title=function(e,t){var r=t.localizer;return r.format(e,"monthHeaderFormat")};var vE=function(t){var r=t.min,a=t.max,s=t.step,o=t.slots,l=t.localizer;return"".concat(+l.startOf(r,"minutes"))+"".concat(+l.startOf(a,"minutes"))+"".concat(s,"-").concat(o)};function Tg(e){for(var t=e.min,r=e.max,a=e.step,s=e.timeslots,o=e.localizer,l=vE({step:a,localizer:o}),i=1+o.getTotalMin(t,r),c=o.getMinutesFromMidnight(t),d=Math.ceil((i-1)/(a*s)),u=d*s,m=new Array(d),f=new Array(u),x=0;x<d;x++){m[x]=new Array(s);for(var b=0;b<s;b++){var y=x*s+b,v=y*a;f[y]=m[x][b]=o.getSlotDate(t,c,v)}}var p=f.length*a;f.push(o.getSlotDate(t,c,p));function h(E){var w=o.diff(t,E,"minutes")+o.getDstOffset(t,E);return Math.min(w,i)}return{groups:m,update:function(w){return vE(w)!==l?Tg(w):this},dateIsInGroup:function(w,N){var S=m[N+1];return o.inRange(w,m[N][0],S?S[0]:r,"minutes")},nextSlot:function(w){var N=f[Math.min(f.findIndex(function(S){return S===w||o.eq(S,w)})+1,f.length-1)];return o.eq(N,w)&&(N=o.add(w,a,"minutes")),N},closestSlotToPosition:function(w){var N=Math.min(f.length-1,Math.max(0,Math.floor(w*u)));return f[N]},closestSlotFromPoint:function(w,N){var S=Math.abs(N.top-N.bottom);return this.closestSlotToPosition((w.y-N.top)/S)},closestSlotFromDate:function(w){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(o.lt(w,t,"minutes"))return f[0];if(o.gt(w,r,"minutes"))return f[f.length-1];var S=o.diff(t,w,"minutes");return f[(S-S%a)/a+N]},startsBeforeDay:function(w){return o.lt(w,t,"day")},startsAfterDay:function(w){return o.gt(w,r,"day")},startsBefore:function(w){return o.lt(o.merge(t,w),t,"minutes")},startsAfter:function(w){return o.gt(o.merge(r,w),r,"minutes")},getRange:function(w,N,S,C){S||(w=o.min(r,o.max(t,w))),C||(N=o.min(r,o.max(t,N)));var k=h(w),D=h(N),O=D>a*u&&!o.eq(r,N)?(k-a)/(a*u)*100:k/(a*u)*100;return{top:O,height:D/(a*u)*100-O,start:h(w),startDate:w,end:h(N),endDate:N}},getCurrentTimePosition:function(w){var N=h(w),S=N/(a*u)*100;return S}}}var Gz=function(){function e(t,r){var a=r.accessors,s=r.slotMetrics;Rt(this,e);var o=s.getRange(a.start(t),a.end(t)),l=o.start,i=o.startDate,c=o.end,d=o.endDate,u=o.top,m=o.height;this.start=l,this.end=c,this.startMs=+i,this.endMs=+d,this.top=u,this.height=m,this.data=t}return Mt(e,[{key:"_width",get:function(){if(this.rows){var r=this.rows.reduce(function(s,o){return Math.max(s,o.leaves.length+1)},0)+1;return 100/r}if(this.leaves){var a=100-this.container._width;return a/(this.leaves.length+1)}return this.row._width}},{key:"width",get:function(){var r=this._width,a=Math.min(100,this._width*1.7);if(this.rows)return a;if(this.leaves)return this.leaves.length>0?a:r;var s=this.row.leaves,o=s.indexOf(this);return o===s.length-1?r:a}},{key:"xOffset",get:function(){if(this.rows)return 0;if(this.leaves)return this.container._width;var r=this.row,a=r.leaves,s=r.xOffset,o=r._width,l=a.indexOf(this)+1;return s+l*o}}])}();function Kz(e,t,r){return Math.abs(t.start-e.start)<r||t.start>e.start&&t.start<e.end}function Xz(e){for(var t=bF(e,["startMs",function(i){return-i.endMs}]),r=[];t.length>0;){var a=t.shift();r.push(a);for(var s=0;s<t.length;s++){var o=t[s];if(!(a.endMs>o.startMs)){if(s>0){var l=t.splice(s,1)[0];r.push(l)}break}}}return r}function k1(e){for(var t=e.events,r=e.minimumStartDifference,a=e.slotMetrics,s=e.accessors,o=t.map(function(u){return new Gz(u,{slotMetrics:a,accessors:s})}),l=Xz(o),i=[],c=function(){var m=l[d],f=i.find(function(y){return y.end>m.start||Math.abs(m.start-y.start)<r});if(!f)return m.rows=[],i.push(m),1;m.container=f;for(var x=null,b=f.rows.length-1;!x&&b>=0;b--)Kz(f.rows[b],m,r)&&(x=f.rows[b]);x?(x.leaves.push(m),m.row=x):(m.leaves=[],f.rows.push(m))},d=0;d<l.length;d++)c();return l.map(function(u){return{event:u.data,style:{top:u.top,height:u.height,width:u.width,xOffset:Math.max(0,u.xOffset)}}})}function D1(e,t,r){for(var a=0;a<e.friends.length;++a)if(!(r.indexOf(e.friends[a])>-1)){t=t>e.friends[a].idx?t:e.friends[a].idx,r.push(e.friends[a]);var s=D1(e.friends[a],t,r);t=t>s?t:s}return t}function Qz(e){var t=e.events,r=e.minimumStartDifference,a=e.slotMetrics,s=e.accessors,o=k1({events:t,minimumStartDifference:r,slotMetrics:a,accessors:s});o.sort(function(L,F){return L=L.style,F=F.style,L.top!==F.top?L.top>F.top?1:-1:L.height!==F.height?L.top+L.height<F.top+F.height?1:-1:0});for(var l=0;l<o.length;++l)o[l].friends=[],delete o[l].style.left,delete o[l].style.left,delete o[l].idx,delete o[l].size;for(var i=0;i<o.length-1;++i)for(var c=o[i],d=c.style.top,u=c.style.top+c.style.height,m=i+1;m<o.length;++m){var f=o[m],x=f.style.top,b=f.style.top+f.style.height;(x>=d&&b<=u||b>d&&b<=u||x>=d&&x<u)&&(c.friends.push(f),f.friends.push(c))}for(var y=0;y<o.length;++y){for(var v=o[y],p=[],h=0;h<100;++h)p.push(1);for(var E=0;E<v.friends.length;++E)v.friends[E].idx!==void 0&&(p[v.friends[E].idx]=0);v.idx=p.indexOf(1)}for(var w=0;w<o.length;++w){var N=0;if(!o[w].size){var S=[],C=D1(o[w],0,S);N=100/(C+1),o[w].size=N;for(var k=0;k<S.length;++k)S[k].size=N}}for(var D=0;D<o.length;++D){var O=o[D];O.style.left=O.idx*O.size;for(var A=0,$=0;$<O.friends.length;++$){var P=O.friends[$].idx;A=A>P?A:P}A<=O.idx&&(O.size=100-O.idx*O.size);var I=O.idx===0?0:3;O.style.width="calc(".concat(O.size,"% - ").concat(I,"px)"),O.style.height="calc(".concat(O.style.height,"% - 2px)"),O.style.xOffset="calc(".concat(O.style.left,"% + ").concat(I,"px)")}return o}var yE={overlap:k1,"no-overlap":Qz};function Jz(e){return!!(e&&e.constructor&&e.call&&e.apply)}function Zz(e){e.events,e.minimumStartDifference,e.slotMetrics,e.accessors;var t=e.dayLayoutAlgorithm,r=t;return t in yE&&(r=yE[t]),Jz(r)?r.apply(this,arguments):[]}var A1=function(e){function t(){return Rt(this,t),Xt(this,t,arguments)}return Qt(t,e),Mt(t,[{key:"render",value:function(){var a=this.props,s=a.renderSlot,o=a.resource,l=a.group,i=a.getters,c=a.components,d=c===void 0?{}:c,u=d.timeSlotWrapper,m=u===void 0?xn:u,f=i?i.slotGroupProp(l):{};return n.createElement("div",Object.assign({className:"rbc-timeslot-group"},f),l.map(function(x,b){var y=i?i.slotProp(x,o):{};return n.createElement(m,{key:b,value:x,resource:o},n.createElement("div",Object.assign({},y,{className:xt("rbc-time-slot",y.className)}),s&&s(x,b)))}))}}])}(g.Component);function lc(e){return typeof e=="string"?e:e+"%"}function eU(e){var t=e.style,r=e.className,a=e.event,s=e.accessors,o=e.rtl,l=e.selected,i=e.label,c=e.continuesPrior,d=e.continuesAfter,u=e.getters,m=e.onClick,f=e.onDoubleClick,x=e.isBackgroundEvent,b=e.onKeyPress,y=e.components,v=y.event,p=y.eventWrapper,h=s.title(a),E=s.tooltip(a),w=s.end(a),N=s.start(a),S=u.eventProp(a,N,w,l),C=[n.createElement("div",{key:"1",className:"rbc-event-label"},i),n.createElement("div",{key:"2",className:"rbc-event-content"},v?n.createElement(v,{event:a,title:h}):h)],k=t.height,D=t.top,O=t.width,A=t.xOffset,$=Qe(Qe({},S.style),{},Xa({top:lc(D),height:lc(k),width:lc(O)},o?"right":"left",lc(A)));return n.createElement(p,Object.assign({type:"time"},e),n.createElement("div",{role:"button",tabIndex:0,onClick:m,onDoubleClick:f,style:$,onKeyDown:b,title:E?(typeof i=="string"?i+": ":"")+E:void 0,className:xt(x?"rbc-background-event":"rbc-event",r,S.className,{"rbc-selected":l,"rbc-event-continues-earlier":c,"rbc-event-continues-later":d})},C))}var tU=function(t){var r=t.children,a=t.className,s=t.style,o=t.innerRef;return n.createElement("div",{className:a,style:s,ref:o},r)},rU=n.forwardRef(function(e,t){return n.createElement(tU,Object.assign({},e,{innerRef:t}))}),nU=["dayProp"],aU=["eventContainerWrapper","timeIndicatorWrapper"],T1=function(e){function t(){var r;Rt(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return r=Xt(this,t,[].concat(s)),r.state={selecting:!1,timeIndicatorPosition:null},r.intervalTriggered=!1,r.renderEvents=function(l){var i=l.events,c=l.isBackgroundEvent,d=r.props,u=d.rtl,m=d.selected,f=d.accessors,x=d.localizer,b=d.getters,y=d.components,v=d.step,p=d.timeslots,h=d.dayLayoutAlgorithm,E=d.resizable,w=r,N=w.slotMetrics,S=x.messages,C=Zz({events:i,accessors:f,slotMetrics:N,minimumStartDifference:Math.ceil(v*p/2),dayLayoutAlgorithm:h});return C.map(function(k,D){var O,A=k.event,$=k.style,P=f.end(A),I=f.start(A),L=(O=f.eventId(A))!==null&&O!==void 0?O:"evt_"+D,F="eventTimeRangeFormat",T,M=N.startsBeforeDay(I),V=N.startsAfterDay(P);M?F="eventTimeRangeEndFormat":V&&(F="eventTimeRangeStartFormat"),M&&V?T=S.allDay:T=x.format({start:I,end:P},F);var K=M||N.startsBefore(I),z=V||N.startsAfter(P);return n.createElement(eU,{style:$,event:A,label:T,key:L,getters:b,rtl:u,components:y,continuesPrior:K,continuesAfter:z,accessors:f,resource:r.props.resource,selected:Dd(A,m),onClick:function(Y){return r._select(Qe(Qe(Qe({},A),r.props.resource&&{sourceResource:r.props.resource}),c&&{isBackgroundEvent:!0}),Y)},onDoubleClick:function(Y){return r._doubleClick(A,Y)},isBackgroundEvent:c,onKeyPress:function(Y){return r._keyPress(A,Y)},resizable:E})})},r._selectable=function(){var l=r.containerRef.current,i=r.props,c=i.longPressThreshold,d=i.localizer,u=r._selector=new b1(function(){return l},{longPressThreshold:c}),m=function(y){var v=r.props.onSelecting,p=r.state||{},h=f(y),E=h.startDate,w=h.endDate;v&&(d.eq(p.startDate,E,"minutes")&&d.eq(p.endDate,w,"minutes")||v({start:E,end:w,resourceId:r.props.resource})===!1)||(r.state.start!==h.start||r.state.end!==h.end||r.state.selecting!==h.selecting)&&r.setState(h)},f=function(y){var v=r.slotMetrics.closestSlotFromPoint(y,bs(l));r.state.selecting||(r._initialSlot=v);var p=r._initialSlot;d.lte(p,v)?v=r.slotMetrics.nextSlot(v):d.gt(p,v)&&(p=r.slotMetrics.nextSlot(p));var h=r.slotMetrics.getRange(d.min(p,v),d.max(p,v));return Qe(Qe({},h),{},{selecting:!0,top:"".concat(h.top,"%"),height:"".concat(h.height,"%")})},x=function(y,v){if(!Du(r.containerRef.current,y)){var p=f(y),h=p.startDate,E=p.endDate;r._selectSlot({startDate:h,endDate:E,action:v,box:y})}r.setState({selecting:!1})};u.on("selecting",m),u.on("selectStart",m),u.on("beforeSelect",function(b){if(r.props.selectable==="ignoreEvents")return!Du(r.containerRef.current,b)}),u.on("click",function(b){return x(b,"click")}),u.on("doubleClick",function(b){return x(b,"doubleClick")}),u.on("select",function(b){r.state.selecting&&(r._selectSlot(Qe(Qe({},r.state),{},{action:"select",bounds:b})),r.setState({selecting:!1}))}),u.on("reset",function(){r.state.selecting&&r.setState({selecting:!1})})},r._teardownSelectable=function(){r._selector&&(r._selector.teardown(),r._selector=null)},r._selectSlot=function(l){for(var i=l.startDate,c=l.endDate,d=l.action,u=l.bounds,m=l.box,f=i,x=[];r.props.localizer.lte(f,c);)x.push(f),f=new Date(+f+r.props.step*60*1e3);lt(r.props.onSelectSlot,{slots:x,start:i,end:c,resourceId:r.props.resource,action:d,bounds:u,box:m})},r._select=function(){for(var l=arguments.length,i=new Array(l),c=0;c<l;c++)i[c]=arguments[c];lt(r.props.onSelectEvent,i)},r._doubleClick=function(){for(var l=arguments.length,i=new Array(l),c=0;c<l;c++)i[c]=arguments[c];lt(r.props.onDoubleClickEvent,i)},r._keyPress=function(){for(var l=arguments.length,i=new Array(l),c=0;c<l;c++)i[c]=arguments[c];lt(r.props.onKeyPressEvent,i)},r.slotMetrics=Tg(r.props),r.containerRef=g.createRef(),r}return Qt(t,e),Mt(t,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable(),this.props.isNow&&this.setTimeIndicatorPositionUpdateInterval()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable(),this.clearTimeIndicatorInterval()}},{key:"componentDidUpdate",value:function(a,s){this.props.selectable&&!a.selectable&&this._selectable(),!this.props.selectable&&a.selectable&&this._teardownSelectable();var o=this.props,l=o.getNow,i=o.isNow,c=o.localizer,d=o.date,u=o.min,m=o.max,f=c.neq(a.getNow(),l(),"minutes");if(a.isNow!==i||f){if(this.clearTimeIndicatorInterval(),i){var x=!f&&c.eq(a.date,d,"minutes")&&s.timeIndicatorPosition===this.state.timeIndicatorPosition;this.setTimeIndicatorPositionUpdateInterval(x)}}else i&&(c.neq(a.min,u,"minutes")||c.neq(a.max,m,"minutes"))&&this.positionTimeIndicator()}},{key:"setTimeIndicatorPositionUpdateInterval",value:function(){var a=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;!this.intervalTriggered&&!s&&this.positionTimeIndicator(),this._timeIndicatorTimeout=window.setTimeout(function(){a.intervalTriggered=!0,a.positionTimeIndicator(),a.setTimeIndicatorPositionUpdateInterval()},6e4)}},{key:"clearTimeIndicatorInterval",value:function(){this.intervalTriggered=!1,window.clearTimeout(this._timeIndicatorTimeout)}},{key:"positionTimeIndicator",value:function(){var a=this.props,s=a.min,o=a.max,l=a.getNow,i=l();if(i>=s&&i<=o){var c=this.slotMetrics.getCurrentTimePosition(i);this.intervalTriggered=!0,this.setState({timeIndicatorPosition:c})}else this.clearTimeIndicatorInterval()}},{key:"render",value:function(){var a=this.props,s=a.date,o=a.max,l=a.rtl,i=a.isNow,c=a.resource,d=a.accessors,u=a.localizer,m=a.getters,f=m.dayProp,x=_n(m,nU),b=a.components,y=b.eventContainerWrapper,v=b.timeIndicatorWrapper,p=_n(b,aU);this.slotMetrics=this.slotMetrics.update(this.props);var h=this.slotMetrics,E=this.state,w=E.selecting,N=E.top,S=E.height,C=E.startDate,k=E.endDate,D={start:C,end:k},O=f(o,c),A=O.className,$=O.style,P={className:"rbc-current-time-indicator",style:{top:"".concat(this.state.timeIndicatorPosition,"%")}},I=p.dayColumnWrapper||rU;return n.createElement(I,{ref:this.containerRef,date:s,style:$,className:xt(A,"rbc-day-slot","rbc-time-column",i&&"rbc-now",i&&"rbc-today",w&&"rbc-slot-selecting"),slotMetrics:h,resource:c},h.groups.map(function(L,F){return n.createElement(A1,{key:F,group:L,resource:c,getters:x,components:p})}),n.createElement(y,{localizer:u,resource:c,accessors:d,getters:x,components:p,slotMetrics:h},n.createElement("div",{className:xt("rbc-events-container",l&&"rtl")},this.renderEvents({events:this.props.backgroundEvents,isBackgroundEvent:!0}),this.renderEvents({events:this.props.events}))),w&&n.createElement("div",{className:"rbc-slot-selection",style:{top:N,height:S}},n.createElement("span",null,u.format(D,"selectRangeFormat"))),i&&this.intervalTriggered&&n.createElement(v,P,n.createElement("div",P)))}}])}(n.Component);T1.defaultProps={dragThroughEvents:!0,timeslots:2};var _1=function(t){var r=t.label;return n.createElement(n.Fragment,null,r)},sU=function(e){function t(){var r;Rt(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return r=Xt(this,t,[].concat(s)),r.handleHeaderClick=function(l,i,c){c.preventDefault(),lt(r.props.onDrillDown,[l,i])},r.renderRow=function(l){var i=r.props,c=i.events,d=i.rtl,u=i.selectable,m=i.getNow,f=i.range,x=i.getters,b=i.localizer,y=i.accessors,v=i.components,p=i.resizable,h=y.resourceId(l),E=l?c.filter(function(w){return y.resource(w)===h}):c;return n.createElement(ni,{isAllDay:!0,rtl:d,getNow:m,minRows:2,maxRows:r.props.allDayMaxRows+1,range:f,events:E,resourceId:h,className:"rbc-allday-cell",selectable:u,selected:r.props.selected,components:v,accessors:y,getters:x,localizer:b,onSelect:r.props.onSelectEvent,onShowMore:r.props.onShowMore,onDoubleClick:r.props.onDoubleClickEvent,onKeyPress:r.props.onKeyPressEvent,onSelectSlot:r.props.onSelectSlot,longPressThreshold:r.props.longPressThreshold,resizable:p})},r}return Qt(t,e),Mt(t,[{key:"renderHeaderCells",value:function(a){var s=this,o=this.props,l=o.localizer,i=o.getDrilldownView,c=o.getNow,d=o.getters.dayProp,u=o.components.header,m=u===void 0?Ag:u,f=c();return a.map(function(x,b){var y=i(x),v=l.format(x,"dayFormat"),p=d(x),h=p.className,E=p.style,w=n.createElement(m,{date:x,label:v,localizer:l});return n.createElement("div",{key:b,style:E,className:xt("rbc-header",h,l.isSameDate(x,f)&&"rbc-today")},y?n.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(S){return s.handleHeaderClick(x,y,S)}},w):n.createElement("span",null,w))})}},{key:"render",value:function(){var a=this,s=this.props,o=s.width,l=s.rtl,i=s.resources,c=s.range,d=s.events,u=s.getNow,m=s.accessors,f=s.selectable,x=s.components,b=s.getters,y=s.scrollRef,v=s.localizer,p=s.isOverflowing,h=s.components,E=h.timeGutterHeader,w=h.resourceHeader,N=w===void 0?_1:w,S=s.resizable,C={};p&&(C[l?"marginLeft":"marginRight"]="".concat(lg()-1,"px"));var k=i.groupEvents(d);return n.createElement("div",{style:C,ref:y,className:xt("rbc-time-header",p&&"rbc-overflowing")},n.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:o,minWidth:o,maxWidth:o}},E&&n.createElement(E,null)),i.map(function(D,O){var A=jr(D,2),$=A[0],P=A[1];return n.createElement("div",{className:"rbc-time-header-content",key:$||O},P&&n.createElement("div",{className:"rbc-row rbc-row-resource",key:"resource_".concat(O)},n.createElement("div",{className:"rbc-header"},n.createElement(N,{index:O,label:m.resourceTitle(P),resource:P}))),n.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(c.length<=1?" rbc-time-header-cell-single-day":"")},a.renderHeaderCells(c)),n.createElement(ni,{isAllDay:!0,rtl:l,getNow:u,minRows:2,maxRows:a.props.allDayMaxRows+1,range:c,events:k.get($)||[],resourceId:P&&$,className:"rbc-allday-cell",selectable:f,selected:a.props.selected,components:x,accessors:m,getters:b,localizer:v,onSelect:a.props.onSelectEvent,onShowMore:a.props.onShowMore,onDoubleClick:a.props.onDoubleClickEvent,onKeyDown:a.props.onKeyPressEvent,onSelectSlot:a.props.onSelectSlot,longPressThreshold:a.props.longPressThreshold,resizable:S}))}))}}])}(n.Component),oU=function(e){function t(){var r;Rt(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return r=Xt(this,t,[].concat(s)),r.handleHeaderClick=function(l,i,c){c.preventDefault(),lt(r.props.onDrillDown,[l,i])},r}return Qt(t,e),Mt(t,[{key:"renderHeaderCells",value:function(a){var s=this,o=this.props,l=o.localizer,i=o.getDrilldownView,c=o.getNow,d=o.getters.dayProp,u=o.components,m=u.header,f=m===void 0?Ag:m,x=u.resourceHeader,b=x===void 0?_1:x,y=o.resources,v=o.accessors,p=o.events,h=o.rtl,E=o.selectable,w=o.components,N=o.getters,S=o.resizable,C=c(),k=y.groupEvents(p);return a.map(function(D,O){var A=i(D),$=l.format(D,"dayFormat"),P=d(D),I=P.className,L=P.style,F=n.createElement(f,{date:D,label:$,localizer:l});return n.createElement("div",{key:O,className:"rbc-time-header-content rbc-resource-grouping"},n.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(a.length<=1?" rbc-time-header-cell-single-day":"")},n.createElement("div",{style:L,className:xt("rbc-header",I,l.isSameDate(D,C)&&"rbc-today")},A?n.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(M){return s.handleHeaderClick(D,A,M)}},F):n.createElement("span",null,F))),n.createElement("div",{className:"rbc-row"},y.map(function(T,M){var V=jr(T,2),K=V[0],z=V[1];return n.createElement("div",{key:"resource_".concat(K,"_").concat(M),className:xt("rbc-header",I,l.isSameDate(D,C)&&"rbc-today")},n.createElement(b,{index:M,label:v.resourceTitle(z),resource:z}))})),n.createElement("div",{className:"rbc-row rbc-m-b-negative-3 rbc-h-full"},y.map(function(T,M){var V=jr(T,2),K=V[0],z=V[1],U=(k.get(K)||[]).filter(function(Y){return l.isSameDate(Y.start,D)||l.isSameDate(Y.end,D)});return n.createElement(ni,{key:"resource_".concat(K,"_").concat(M),isAllDay:!0,rtl:h,getNow:c,minRows:2,maxRows:s.props.allDayMaxRows+1,range:[D],events:U,resourceId:z&&K,className:"rbc-allday-cell",selectable:E,selected:s.props.selected,components:w,accessors:v,getters:N,localizer:l,onSelect:s.props.onSelectEvent,onShowMore:s.props.onShowMore,onDoubleClick:s.props.onDoubleClickEvent,onKeyDown:s.props.onKeyPressEvent,onSelectSlot:s.props.onSelectSlot,longPressThreshold:s.props.longPressThreshold,resizable:S})})))})}},{key:"render",value:function(){var a=this.props,s=a.width,o=a.rtl,l=a.range,i=a.scrollRef,c=a.isOverflowing,d=a.components.timeGutterHeader,u={};return c&&(u[o?"marginLeft":"marginRight"]="".concat(lg()-1,"px")),n.createElement("div",{style:u,ref:i,className:xt("rbc-time-header",c&&"rbc-overflowing")},n.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:s,minWidth:s,maxWidth:s}},d&&n.createElement(d,null)),this.renderHeaderCells(l))}}])}(n.Component);function lU(e){var t=e.min,r=e.max,a=e.localizer;return a.getTimezoneOffset(t)!==a.getTimezoneOffset(r)?{start:a.add(t,-1,"day"),end:a.add(r,-1,"day")}:{start:t,end:r}}var iU=function(t){var r=t.min,a=t.max,s=t.timeslots,o=t.step,l=t.localizer,i=t.getNow,c=t.resource,d=t.components,u=t.getters,m=t.gutterRef,f=d.timeGutterWrapper,x=g.useMemo(function(){return lU({min:r,max:a,localizer:l})},[r==null?void 0:r.toISOString(),a==null?void 0:a.toISOString(),l]),b=x.start,y=x.end,v=g.useState(Tg({min:b,max:y,timeslots:s,step:o,localizer:l})),p=jr(v,2),h=p[0],E=p[1];g.useEffect(function(){h&&E(h.update({min:b,max:y,timeslots:s,step:o,localizer:l}))},[b==null?void 0:b.toISOString(),y==null?void 0:y.toISOString(),s,o]);var w=g.useCallback(function(N,S){if(S)return null;var C=h.dateIsInGroup(i(),S);return n.createElement("span",{className:xt("rbc-label",C&&"rbc-now")},l.format(N,"timeGutterFormat"))},[h,l,i]);return n.createElement(f,{slotMetrics:h},n.createElement("div",{className:"rbc-time-gutter rbc-time-column",ref:m},h.groups.map(function(N,S){return n.createElement(A1,{key:S,group:N,resource:c,components:d,renderSlot:w,getters:u})})))},cU=n.forwardRef(function(e,t){return n.createElement(iU,Object.assign({gutterRef:t},e))}),Vm={};function uU(e,t){return{map:function(a){return e?e.map(function(s,o){return a([t.resourceId(s),s],o)}):[a([Vm,null],0)]},groupEvents:function(a){var s=new Map;return e?(a.forEach(function(o){var l=t.resource(o)||Vm;if(Array.isArray(l))l.forEach(function(c){var d=s.get(c)||[];d.push(o),s.set(c,d)});else{var i=s.get(l)||[];i.push(o),s.set(l,i)}}),s):(s.set(Vm,a),s)}}}var Mo=function(e){function t(r){var a;return Rt(this,t),a=Xt(this,t,[r]),a.handleScroll=function(s){a.scrollRef.current&&(a.scrollRef.current.scrollLeft=s.target.scrollLeft)},a.handleResize=function(){ay(a.rafHandle),a.rafHandle=kN(a.checkOverflow)},a.handleKeyPressEvent=function(){a.clearSelection();for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];lt(a.props.onKeyPressEvent,o)},a.handleSelectEvent=function(){a.clearSelection();for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];lt(a.props.onSelectEvent,o)},a.handleDoubleClickEvent=function(){a.clearSelection();for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];lt(a.props.onDoubleClickEvent,o)},a.handleShowMore=function(s,o,l,i,c){var d=a.props,u=d.popup,m=d.onDrillDown,f=d.onShowMore,x=d.getDrilldownView,b=d.doShowMoreDrillDown;if(a.clearSelection(),u){var y=CN(l,a.containerRef.current);a.setState({overlay:{date:o,events:s,position:Qe(Qe({},y),{},{width:"200px"}),target:c}})}else b&&lt(m,[o,x(o)||Zt.DAY]);lt(f,[s,o,i])},a.handleSelectAllDaySlot=function(s,o){var l=a.props.onSelectSlot,i=new Date(s[0]),c=new Date(s[s.length-1]);c.setDate(s[s.length-1].getDate()+1),lt(l,{slots:s,start:i,end:c,action:o.action,resourceId:o.resourceId})},a.overlayDisplay=function(){a.setState({overlay:null})},a.checkOverflow=function(){if(!a._updatingOverflow){var s=a.contentRef.current;if(s!=null&&s.scrollHeight){var o=s.scrollHeight>s.clientHeight;a.state.isOverflowing!==o&&(a._updatingOverflow=!0,a.setState({isOverflowing:o},function(){a._updatingOverflow=!1}))}}},a.memoizedResources=QN(function(s,o){return uU(s,o)}),a.state={gutterWidth:void 0,isOverflowing:null},a.scrollRef=n.createRef(),a.contentRef=n.createRef(),a.containerRef=n.createRef(),a._scrollRatio=null,a.gutterRef=g.createRef(),a}return Qt(t,e),Mt(t,[{key:"getSnapshotBeforeUpdate",value:function(){return this.checkOverflow(),null}},{key:"componentDidMount",value:function(){this.props.width==null&&this.measureGutter(),this.calculateScroll(),this.applyScroll(),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),ay(this.rafHandle),this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest)}},{key:"componentDidUpdate",value:function(){this.applyScroll()}},{key:"renderDayColumn",value:function(a,s,o,l,i,c,d,u,m,f){var x=this.props,b=x.min,y=x.max,v=(l.get(s)||[]).filter(function(h){return c.inRange(a,d.start(h),d.end(h),"day")}),p=(i.get(s)||[]).filter(function(h){return c.inRange(a,d.start(h),d.end(h),"day")});return n.createElement(T1,Object.assign({},this.props,{localizer:c,min:c.merge(a,b),max:c.merge(a,y),resource:o&&s,components:u,isNow:c.isSameDate(a,f),key:"".concat(s,"-").concat(a),date:a,events:v,backgroundEvents:p,dayLayoutAlgorithm:m}))}},{key:"renderResourcesFirst",value:function(a,s,o,l,i,c,d,u,m){var f=this;return s.map(function(x){var b=jr(x,2),y=b[0],v=b[1];return a.map(function(p){return f.renderDayColumn(p,y,v,o,l,i,c,u,m,d)})})}},{key:"renderRangeFirst",value:function(a,s,o,l,i,c,d,u,m){var f=this;return a.map(function(x){return n.createElement("div",{style:{display:"flex",minHeight:"100%",flex:1},key:x},s.map(function(b){var y=jr(b,2),v=y[0],p=y[1];return n.createElement("div",{style:{flex:1},key:c.resourceId(p)},f.renderDayColumn(x,v,p,o,l,i,c,u,m,d))}))})}},{key:"renderEvents",value:function(a,s,o,l){var i=this.props,c=i.accessors,d=i.localizer,u=i.resourceGroupingLayout,m=i.components,f=i.dayLayoutAlgorithm,x=this.memoizedResources(this.props.resources,c),b=x.groupEvents(s),y=x.groupEvents(o);return u?this.renderRangeFirst(a,x,b,y,d,c,l,m,f):this.renderResourcesFirst(a,x,b,y,d,c,l,m,f)}},{key:"render",value:function(){var a,s=this.props,o=s.events,l=s.backgroundEvents,i=s.range,c=s.width,d=s.rtl,u=s.selected,m=s.getNow,f=s.resources,x=s.components,b=s.accessors,y=s.getters,v=s.localizer,p=s.min,h=s.max,E=s.showMultiDayTimes,w=s.longPressThreshold,N=s.resizable,S=s.resourceGroupingLayout;c=c||this.state.gutterWidth;var C=i[0],k=i[i.length-1];this.slots=i.length;var D=[],O=[],A=[];o.forEach(function(P){if(ri(P,C,k,b,v)){var I=b.start(P),L=b.end(P);b.allDay(P)||v.startAndEndAreDateOnly(I,L)||!E&&!v.isSameDate(I,L)?D.push(P):O.push(P)}}),l.forEach(function(P){ri(P,C,k,b,v)&&A.push(P)}),D.sort(function(P,I){return Np(P,I,b,v)});var $={range:i,events:D,width:c,rtl:d,getNow:m,localizer:v,selected:u,allDayMaxRows:this.props.showAllEvents?1/0:(a=this.props.allDayMaxRows)!==null&&a!==void 0?a:1/0,resources:this.memoizedResources(f,b),selectable:this.props.selectable,accessors:b,getters:y,components:x,scrollRef:this.scrollRef,isOverflowing:this.state.isOverflowing,longPressThreshold:w,onSelectSlot:this.handleSelectAllDaySlot,onSelectEvent:this.handleSelectEvent,onShowMore:this.handleShowMore,onDoubleClickEvent:this.props.onDoubleClickEvent,onKeyPressEvent:this.props.onKeyPressEvent,onDrillDown:this.props.onDrillDown,getDrilldownView:this.props.getDrilldownView,resizable:N};return n.createElement("div",{className:xt("rbc-time-view",f&&"rbc-time-view-resources"),ref:this.containerRef},f&&f.length>1&&S?n.createElement(oU,$):n.createElement(sU,$),this.props.popup&&this.renderOverlay(),n.createElement("div",{ref:this.contentRef,className:"rbc-time-content",onScroll:this.handleScroll},n.createElement(cU,{date:C,ref:this.gutterRef,localizer:v,min:v.merge(C,p),max:v.merge(C,h),step:this.props.step,getNow:this.props.getNow,timeslots:this.props.timeslots,components:x,className:"rbc-time-gutter",getters:y}),this.renderEvents(i,O,A,m())))}},{key:"renderOverlay",value:function(){var a,s,o=this,l=(a=(s=this.state)===null||s===void 0?void 0:s.overlay)!==null&&a!==void 0?a:{},i=this.props,c=i.accessors,d=i.localizer,u=i.components,m=i.getters,f=i.selected,x=i.popupOffset,b=i.handleDragStart,y=function(){return o.setState({overlay:null})};return n.createElement(Dg,{overlay:l,accessors:c,localizer:d,components:u,getters:m,selected:f,popupOffset:x,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:b,show:!!l.position,overlayDisplay:this.overlayDisplay,onHide:y})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}},{key:"measureGutter",value:function(){var a=this;this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest),this.measureGutterAnimationFrameRequest=window.requestAnimationFrame(function(){var s,o=(s=a.gutterRef)!==null&&s!==void 0&&s.current?xp(a.gutterRef.current):void 0;o&&a.state.gutterWidth!==o&&a.setState({gutterWidth:o})})}},{key:"applyScroll",value:function(){if(this._scrollRatio!=null&&this.props.enableAutoScroll===!0){var a=this.contentRef.current;a.scrollTop=a.scrollHeight*this._scrollRatio,this._scrollRatio=null}}},{key:"calculateScroll",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,s=a.min,o=a.max,l=a.scrollToTime,i=a.localizer,c=i.diff(i.merge(l,s),l,"milliseconds"),d=i.diff(s,o,"milliseconds");this._scrollRatio=c/d}}])}(g.Component);Mo.defaultProps={step:30,timeslots:2,resourceGroupingLayout:!1};var dU=["date","localizer","min","max","scrollToTime","enableAutoScroll"],Td=function(e){function t(){return Rt(this,t),Xt(this,t,arguments)}return Qt(t,e),Mt(t,[{key:"render",value:function(){var a=this.props,s=a.date,o=a.localizer,l=a.min,i=l===void 0?o.startOf(new Date,"day"):l,c=a.max,d=c===void 0?o.endOf(new Date,"day"):c,u=a.scrollToTime,m=u===void 0?o.startOf(new Date,"day"):u,f=a.enableAutoScroll,x=f===void 0?!0:f,b=_n(a,dU),y=t.range(s,{localizer:o});return n.createElement(Mo,Object.assign({},b,{range:y,eventOffset:10,localizer:o,min:i,max:d,scrollToTime:m,enableAutoScroll:x}))}}])}(n.Component);Td.range=function(e,t){var r=t.localizer;return[r.startOf(e,"day")]};Td.navigate=function(e,t,r){var a=r.localizer;switch(t){case hr.PREVIOUS:return a.add(e,-1,"day");case hr.NEXT:return a.add(e,1,"day");default:return e}};Td.title=function(e,t){var r=t.localizer;return r.format(e,"dayHeaderFormat")};var mU=["date","localizer","min","max","scrollToTime","enableAutoScroll"],La=function(e){function t(){return Rt(this,t),Xt(this,t,arguments)}return Qt(t,e),Mt(t,[{key:"render",value:function(){var a=this.props,s=a.date,o=a.localizer,l=a.min,i=l===void 0?o.startOf(new Date,"day"):l,c=a.max,d=c===void 0?o.endOf(new Date,"day"):c,u=a.scrollToTime,m=u===void 0?o.startOf(new Date,"day"):u,f=a.enableAutoScroll,x=f===void 0?!0:f,b=_n(a,mU),y=t.range(s,this.props);return n.createElement(Mo,Object.assign({},b,{range:y,eventOffset:15,localizer:o,min:i,max:d,scrollToTime:m,enableAutoScroll:x}))}}])}(n.Component);La.defaultProps=Mo.defaultProps;La.navigate=function(e,t,r){var a=r.localizer;switch(t){case hr.PREVIOUS:return a.add(e,-1,"week");case hr.NEXT:return a.add(e,1,"week");default:return e}};La.range=function(e,t){var r=t.localizer,a=r.startOfWeek(),s=r.startOf(e,"week",a),o=r.endOf(e,"week",a);return r.range(s,o)};La.title=function(e,t){var r=t.localizer,a=La.range(e,{localizer:r}),s=a1(a),o=s[0],l=s.slice(1);return r.format({start:o,end:l.pop()},"dayRangeHeaderFormat")};var fU=["date","localizer","min","max","scrollToTime","enableAutoScroll"];function _g(e,t){return La.range(e,t).filter(function(r){return[6,0].indexOf(r.getDay())===-1})}var Ai=function(e){function t(){return Rt(this,t),Xt(this,t,arguments)}return Qt(t,e),Mt(t,[{key:"render",value:function(){var a=this.props,s=a.date,o=a.localizer,l=a.min,i=l===void 0?o.startOf(new Date,"day"):l,c=a.max,d=c===void 0?o.endOf(new Date,"day"):c,u=a.scrollToTime,m=u===void 0?o.startOf(new Date,"day"):u,f=a.enableAutoScroll,x=f===void 0?!0:f,b=_n(a,fU),y=_g(s,this.props);return n.createElement(Mo,Object.assign({},b,{range:y,eventOffset:15,localizer:o,min:i,max:d,scrollToTime:m,enableAutoScroll:x}))}}])}(n.Component);Ai.defaultProps=Mo.defaultProps;Ai.range=_g;Ai.navigate=La.navigate;Ai.title=function(e,t){var r=t.localizer,a=_g(e,{localizer:r}),s=a1(a),o=s[0],l=s.slice(1);return r.format({start:o,end:l.pop()},"dayRangeHeaderFormat")};var _d=30;function Od(e){var t=e.accessors,r=e.components,a=e.date,s=e.events,o=e.getters,l=e.length,i=l===void 0?_d:l,c=e.localizer,d=e.onDoubleClickEvent,u=e.onSelectEvent,m=e.selected,f=g.useRef(null),x=g.useRef(null),b=g.useRef(null),y=g.useRef(null),v=g.useRef(null);g.useEffect(function(){E()});var p=function(k,D,O){var A=r.event,$=r.date;return D=D.filter(function(P){return ri(P,c.startOf(k,"day"),c.endOf(k,"day"),t,c)}),D.map(function(P,I){var L=t.title(P),F=t.end(P),T=t.start(P),M=o.eventProp(P,T,F,Dd(P,m)),V=I===0&&c.format(k,"agendaDateFormat"),K=I===0?n.createElement("td",{rowSpan:D.length,className:"rbc-agenda-date-cell"},$?n.createElement($,{day:k,label:V}):V):!1;return n.createElement("tr",{key:O+"_"+I,className:M.className,style:M.style},K,n.createElement("td",{className:"rbc-agenda-time-cell"},h(k,P)),n.createElement("td",{className:"rbc-agenda-event-cell",onClick:function(U){return u&&u(P,U)},onDoubleClick:function(U){return d&&d(P,U)}},A?n.createElement(A,{event:P,title:L}):L))},[])},h=function(k,D){var O="",A=r.time,$=c.messages.allDay,P=t.end(D),I=t.start(D);return t.allDay(D)||(c.eq(I,P)?$=c.format(I,"agendaTimeFormat"):c.isSameDate(I,P)?$=c.format({start:I,end:P},"agendaTimeRangeFormat"):c.isSameDate(k,I)?$=c.format(I,"agendaTimeFormat"):c.isSameDate(k,P)&&($=c.format(P,"agendaTimeFormat"))),c.gt(k,I,"day")&&(O="rbc-continues-prior"),c.lt(k,P,"day")&&(O+=" rbc-continues-after"),n.createElement("span",{className:O.trim()},A?n.createElement(A,{event:D,day:k,label:$}):$)},E=function(){if(v.current){var k=f.current,D=v.current.firstChild;if(D){var O=y.current.scrollHeight>y.current.clientHeight,A=[],$=A;A=[xp(D.children[0]),xp(D.children[1])],($[0]!==A[0]||$[1]!==A[1])&&(x.current.style.width=A[0]+"px",b.current.style.width=A[1]+"px"),O?(p5(k,"rbc-header-overflowing"),k.style.marginRight=lg()+"px"):h5(k,"rbc-header-overflowing")}}},w=c.messages,N=c.add(a,i,"day"),S=c.range(a,N,"day");return s=s.filter(function(C){return ri(C,c.startOf(a,"day"),c.endOf(N,"day"),t,c)}),s.sort(function(C,k){return+t.start(C)-+t.start(k)}),n.createElement("div",{className:"rbc-agenda-view"},s.length!==0?n.createElement(n.Fragment,null,n.createElement("table",{ref:f,className:"rbc-agenda-table"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",{className:"rbc-header",ref:x},w.date),n.createElement("th",{className:"rbc-header",ref:b},w.time),n.createElement("th",{className:"rbc-header"},w.event)))),n.createElement("div",{className:"rbc-agenda-content",ref:y},n.createElement("table",{className:"rbc-agenda-table"},n.createElement("tbody",{ref:v},S.map(function(C,k){return p(C,s,k)}))))):n.createElement("span",{className:"rbc-agenda-empty"},w.noEventsInRange))}Od.range=function(e,t){var r=t.length,a=r===void 0?_d:r,s=t.localizer,o=s.add(e,a,"day");return{start:e,end:o}};Od.navigate=function(e,t,r){var a=r.length,s=a===void 0?_d:a,o=r.localizer;switch(t){case hr.PREVIOUS:return o.add(e,-s,"day");case hr.NEXT:return o.add(e,s,"day");default:return e}};Od.title=function(e,t){var r=t.length,a=r===void 0?_d:r,s=t.localizer,o=s.add(e,a,"day");return s.format({start:e,end:o},"agendaHeaderFormat")};var $c=Xa(Xa(Xa(Xa(Xa({},Zt.MONTH,Ad),Zt.WEEK,La),Zt.WORK_WEEK,Ai),Zt.DAY,Td),Zt.AGENDA,Od),pU=["action","date","today"];function hU(e,t){var r=t.action,a=t.date,s=t.today,o=_n(t,pU);switch(e=typeof e=="string"?$c[e]:e,r){case hr.TODAY:a=s||new Date;break;case hr.DATE:break;default:Wl(e&&typeof e.navigate=="function","Calendar View components must implement a static `.navigate(date, action)` method.s"),a=e.navigate(a,r,o)}return a}function gU(e,t){var r=null;return typeof t=="function"?r=t(e):typeof t=="string"&&ta(e)==="object"&&e!=null&&t in e&&(r=e[t]),r}var Fn=function(t){return function(r){return gU(r,t)}},vU=["view","date","getNow","onNavigate"],yU=["view","toolbar","events","backgroundEvents","resourceGroupingLayout","style","className","elementProps","date","getNow","length","showMultiDayTimes","onShowMore","doShowMoreDrillDown","components","formats","messages","culture"];function O1(e){if(Array.isArray(e))return e;for(var t=[],r=0,a=Object.entries(e);r<a.length;r++){var s=jr(a[r],2),o=s[0],l=s[1];l&&t.push(o)}return t}function EU(e,t){var r=t.views,a=O1(r);return a.indexOf(e)!==-1}var R1=function(e){function t(){var r;Rt(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return r=Xt(this,t,[].concat(s)),r.getViews=function(){var l=r.props.views;return Array.isArray(l)?KB(l,function(i,c){return i[c]=$c[c]},{}):ta(l)==="object"?KF(l,function(i,c){return i===!0?$c[c]:i}):$c},r.getView=function(){var l=r.getViews();return l[r.props.view]},r.getDrilldownView=function(l){var i=r.props,c=i.view,d=i.drilldownView,u=i.getDrilldownView;return u?u(l,c,Object.keys(r.getViews())):d},r.handleRangeChange=function(l,i,c){var d=r.props,u=d.onRangeChange,m=d.localizer;u&&i.range&&u(i.range(l,{localizer:m}),c)},r.handleNavigate=function(l,i){var c=r.props,d=c.view,u=c.date,m=c.getNow,f=c.onNavigate,x=_n(c,vU),b=r.getView(),y=m();u=hU(b,Qe(Qe({},x),{},{action:l,date:i||u||y,today:y})),f(u,d,l),r.handleRangeChange(u,b)},r.handleViewChange=function(l){l!==r.props.view&&EU(l,r.props)&&r.props.onView(l);var i=r.getViews();r.handleRangeChange(r.props.date||r.props.getNow(),i[l],l)},r.handleSelectEvent=function(){for(var l=arguments.length,i=new Array(l),c=0;c<l;c++)i[c]=arguments[c];lt(r.props.onSelectEvent,i)},r.handleDoubleClickEvent=function(){for(var l=arguments.length,i=new Array(l),c=0;c<l;c++)i[c]=arguments[c];lt(r.props.onDoubleClickEvent,i)},r.handleKeyPressEvent=function(){for(var l=arguments.length,i=new Array(l),c=0;c<l;c++)i[c]=arguments[c];lt(r.props.onKeyPressEvent,i)},r.handleSelectSlot=function(l){lt(r.props.onSelectSlot,l)},r.handleDrillDown=function(l,i){var c=r.props.onDrillDown;if(c){c(l,i,r.drilldownView);return}i&&r.handleViewChange(i),r.handleNavigate(hr.DATE,l)},r.state={context:t.getContext(r.props)},r}return Qt(t,e),Mt(t,[{key:"render",value:function(){var a=this.props,s=a.view,o=a.toolbar,l=a.events,i=a.backgroundEvents,c=a.resourceGroupingLayout,d=a.style,u=a.className,m=a.elementProps,f=a.date,x=a.getNow,b=a.length,y=a.showMultiDayTimes,v=a.onShowMore,p=a.doShowMoreDrillDown;a.components,a.formats,a.messages,a.culture;var h=_n(a,yU);f=f||x();var E=this.getView(),w=this.state.context,N=w.accessors,S=w.components,C=w.getters,k=w.localizer,D=w.viewNames,O=S.toolbar||wz,A=E.title(f,{localizer:k,length:b});return n.createElement("div",Object.assign({},m,{className:xt(u,"rbc-calendar",h.rtl&&"rbc-rtl"),style:d}),o&&n.createElement(O,{date:f,view:s,views:D,label:A,onView:this.handleViewChange,onNavigate:this.handleNavigate,localizer:k}),n.createElement(E,Object.assign({},h,{events:l,backgroundEvents:i,date:f,getNow:x,length:b,localizer:k,getters:C,components:S,accessors:N,showMultiDayTimes:y,getDrilldownView:this.getDrilldownView,onNavigate:this.handleNavigate,onDrillDown:this.handleDrillDown,onSelectEvent:this.handleSelectEvent,onDoubleClickEvent:this.handleDoubleClickEvent,onKeyPressEvent:this.handleKeyPressEvent,onSelectSlot:this.handleSelectSlot,onShowMore:v,doShowMoreDrillDown:p,resourceGroupingLayout:c})))}}],[{key:"getDerivedStateFromProps",value:function(a){return{context:t.getContext(a)}}},{key:"getContext",value:function(a){var s=a.startAccessor,o=a.endAccessor,l=a.allDayAccessor,i=a.tooltipAccessor,c=a.titleAccessor,d=a.resourceAccessor,u=a.resourceIdAccessor,m=a.resourceTitleAccessor,f=a.eventIdAccessor,x=a.eventPropGetter,b=a.backgroundEventPropGetter,y=a.slotPropGetter,v=a.slotGroupPropGetter,p=a.dayPropGetter,h=a.view,E=a.views,w=a.localizer,N=a.culture,S=a.messages,C=S===void 0?{}:S,k=a.components,D=k===void 0?{}:k,O=a.formats,A=O===void 0?{}:O,$=O1(E),P=Sz(C);return{viewNames:$,localizer:bz(w,N,A,P),getters:{eventProp:function(){return x&&x.apply(void 0,arguments)||{}},backgroundEventProp:function(){return b&&b.apply(void 0,arguments)||{}},slotProp:function(){return y&&y.apply(void 0,arguments)||{}},slotGroupProp:function(){return v&&v.apply(void 0,arguments)||{}},dayProp:function(){return p&&p.apply(void 0,arguments)||{}}},components:UF(D[h]||{},IB(D,$),{eventWrapper:xn,backgroundEventWrapper:xn,eventContainerWrapper:xn,dateCellWrapper:xn,weekWrapper:xn,timeSlotWrapper:xn,timeGutterWrapper:xn,timeIndicatorWrapper:xn}),accessors:{start:Fn(s),end:Fn(o),allDay:Fn(l),tooltip:Fn(i),title:Fn(c),resource:Fn(d),resourceId:Fn(u),resourceTitle:Fn(m),eventId:Fn(f)}}}}])}(n.Component);R1.defaultProps={events:[],backgroundEvents:[],elementProps:{},popup:!1,toolbar:!0,view:Zt.MONTH,views:[Zt.MONTH,Zt.WEEK,Zt.DAY,Zt.AGENDA],step:30,length:30,allDayMaxRows:1/0,doShowMoreDrillDown:!0,drilldownView:Zt.DAY,titleAccessor:"title",tooltipAccessor:"title",allDayAccessor:"allDay",startAccessor:"start",endAccessor:"end",resourceAccessor:"resourceId",resourceIdAccessor:"id",resourceTitleAccessor:"title",eventIdAccessor:"id",longPressThreshold:250,getNow:function(){return new Date},dayLayoutAlgorithm:"overlap"};var xU=sN(R1,{view:"onView",date:"onNavigate",selected:"onSelectEvent"}),bU=function(t,r,a){var s=t.start,o=t.end;return a.format(s,"MMMM DD",r)+" – "+a.format(o,a.eq(s,o,"month")?"DD":"MMMM DD",r)},wU=function(t,r,a){var s=t.start,o=t.end;return a.format(s,"L",r)+" – "+a.format(o,"L",r)},Wm=function(t,r,a){var s=t.start,o=t.end;return a.format(s,"LT",r)+" – "+a.format(o,"LT",r)},NU=function(t,r,a){var s=t.start;return a.format(s,"LT",r)+" – "},SU=function(t,r,a){var s=t.end;return" – "+a.format(s,"LT",r)},CU={dateFormat:"DD",dayFormat:"DD ddd",weekdayFormat:"ddd",selectRangeFormat:Wm,eventTimeRangeFormat:Wm,eventTimeRangeStartFormat:NU,eventTimeRangeEndFormat:SU,timeGutterFormat:"LT",monthHeaderFormat:"MMMM YYYY",dayHeaderFormat:"dddd MMM DD",dayRangeHeaderFormat:bU,agendaHeaderFormat:wU,agendaDateFormat:"ddd MMM DD",agendaTimeFormat:"LT",agendaTimeRangeFormat:Wm};function ca(e){var t=e&&e.toLowerCase();return t==="FullYear"?t="year":t||(t=void 0),t}function kU(e){var t=function(U,Y){return Y?U.locale(Y):U};function r(z){return e(z).toDate().getTimezoneOffset()}function a(z,U){var Y,X,j=e(z).local(),B=e(U).local();if(!e.tz)return j.toDate().getTimezoneOffset()-B.toDate().getTimezoneOffset();var H=(Y=j==null||(X=j._z)===null||X===void 0?void 0:X.name)!==null&&Y!==void 0?Y:e.tz.guess(),G=e.tz.zone(H).utcOffset(+j),ue=e.tz.zone(H).utcOffset(+B);return G-ue}function s(z){var U=e(z).startOf("day");return a(U,z)}function o(z,U,Y){var X=ca(Y),j=X?e(z).startOf(X):e(z),B=X?e(U).startOf(X):e(U);return[j,B,X]}function l(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,U=arguments.length>1?arguments[1]:void 0,Y=ca(U);return Y?e(z).startOf(Y).toDate():e(z).toDate()}function i(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,U=arguments.length>1?arguments[1]:void 0,Y=ca(U);return Y?e(z).endOf(Y).toDate():e(z).toDate()}function c(z,U,Y){var X=o(z,U,Y),j=jr(X,3),B=j[0],H=j[1],G=j[2];return B.isSame(H,G)}function d(z,U,Y){return!c(z,U,Y)}function u(z,U,Y){var X=o(z,U,Y),j=jr(X,3),B=j[0],H=j[1],G=j[2];return B.isAfter(H,G)}function m(z,U,Y){var X=o(z,U,Y),j=jr(X,3),B=j[0],H=j[1],G=j[2];return B.isBefore(H,G)}function f(z,U,Y){var X=o(z,U,Y),j=jr(X,3),B=j[0],H=j[1],G=j[2];return B.isSameOrBefore(H,G)}function x(z,U,Y){var X=o(z,U,Y),j=jr(X,3),B=j[0],H=j[1],G=j[2];return B.isSameOrBefore(H,G)}function b(z,U,Y){var X=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"day",j=ca(X),B=e(z),H=e(U),G=e(Y);return B.isBetween(H,G,j,"[]")}function y(z,U){var Y=e(z),X=e(U),j=e.min(Y,X);return j.toDate()}function v(z,U){var Y=e(z),X=e(U),j=e.max(Y,X);return j.toDate()}function p(z,U){if(!z&&!U)return null;var Y=e(U).format("HH:mm:ss"),X=e(z).startOf("day").format("MM/DD/YYYY");return e("".concat(X," ").concat(Y),"MM/DD/YYYY HH:mm:ss").toDate()}function h(z,U,Y){var X=ca(Y);return e(z).add(U,X).toDate()}function E(z,U){for(var Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"day",X=ca(Y),j=e(z).toDate(),B=[];x(j,U);)B.push(j),j=h(j,1,X);return B}function w(z,U){var Y=ca(U),X=l(z,Y);return c(X,z)?X:h(X,1,Y)}function N(z,U){var Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"day",X=ca(Y),j=e(z),B=e(U);return B.diff(j,X)}function S(z){var U=e(z);return U.minutes()}function C(z){var U=z?e.localeData(z):e.localeData();return U?U.firstDayOfWeek():0}function k(z){return e(z).startOf("month").startOf("week").toDate()}function D(z){return e(z).endOf("month").endOf("week").toDate()}function O(z){for(var U=k(z),Y=D(z),X=[];x(U,Y);)X.push(U),U=h(U,1,"d");return X}function A(z,U,Y){return e(z).startOf("day").minute(U+Y).toDate()}function $(z,U){return N(z,U,"minutes")}function P(z){var U=e(z).startOf("day"),Y=e(z);return Y.diff(U,"minutes")+s(z)}function I(z,U){var Y=e(z),X=e(U);return Y.isBefore(X,"day")}function L(z,U,Y){var X=e(U),j=e(Y);return X.isSameOrAfter(j,"minutes")}function F(z,U){var Y=e(z),X=e(U),j=e.duration(X.diff(Y));return j.days()}function T(z){var U=z.evtA,Y=U.start,X=U.end,j=U.allDay,B=z.evtB,H=B.start,G=B.end,ue=B.allDay,W=+l(Y,"day")-+l(H,"day"),me=F(Y,X),ae=F(H,G);return W||ae-me||!!ue-!!j||+Y-+H||+X-+G}function M(z){var U=z.event,Y=U.start,X=U.end,j=z.range,B=j.start,H=j.end,G=e(Y).startOf("day"),ue=e(X),W=e(B),me=e(H),ae=G.isSameOrBefore(me,"day"),xe=!G.isSame(ue,"minutes"),Me=xe?ue.isAfter(W,"minutes"):ue.isSameOrAfter(W,"minutes");return ae&&Me}function V(z,U){var Y=e(z),X=e(U);return Y.isSame(X,"day")}function K(){var z=new Date,U=/-/.test(z.toString())?"-":"",Y=z.getTimezoneOffset(),X=Number("".concat(U).concat(Math.abs(Y))),j=e().utcOffset();return j>X?1:0}return new xz({formats:CU,firstOfWeek:C,firstVisibleDay:k,lastVisibleDay:D,visibleDays:O,format:function(U,Y,X){return t(e(U),X).format(Y)},lt:m,lte:x,gt:u,gte:f,eq:c,neq:d,merge:p,inRange:b,startOf:l,endOf:i,range:E,add:h,diff:N,ceil:w,min:y,max:v,minutes:S,getSlotDate:A,getTimezoneOffset:r,getDstOffset:a,getTotalMin:$,getMinutesFromMidnight:P,continuesPrior:I,continuesAfter:L,sortEvents:T,inEventRange:M,isSameDate:V,daySpan:F,browserTZOffset:K})}//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var M1;function se(){return M1.apply(null,arguments)}function DU(e){M1=e}function dn(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function is(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function ze(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Og(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var t;for(t in e)if(ze(e,t))return!1;return!0}function sr(e){return e===void 0}function na(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function Ti(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function P1(e,t){var r=[],a,s=e.length;for(a=0;a<s;++a)r.push(t(e[a],a));return r}function Ea(e,t){for(var r in t)ze(t,r)&&(e[r]=t[r]);return ze(t,"toString")&&(e.toString=t.toString),ze(t,"valueOf")&&(e.valueOf=t.valueOf),e}function Ln(e,t,r,a){return n2(e,t,r,a,!0).utc()}function AU(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function Ce(e){return e._pf==null&&(e._pf=AU()),e._pf}var Cp;Array.prototype.some?Cp=Array.prototype.some:Cp=function(e){var t=Object(this),r=t.length>>>0,a;for(a=0;a<r;a++)if(a in t&&e.call(this,t[a],a,t))return!0;return!1};function Rg(e){var t=null,r=!1,a=e._d&&!isNaN(e._d.getTime());if(a&&(t=Ce(e),r=Cp.call(t.parsedDateParts,function(s){return s!=null}),a=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&r),e._strict&&(a=a&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=a;else return a;return e._isValid}function Rd(e){var t=Ln(NaN);return e!=null?Ea(Ce(t),e):Ce(t).userInvalidated=!0,t}var EE=se.momentProperties=[],Hm=!1;function Mg(e,t){var r,a,s,o=EE.length;if(sr(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),sr(t._i)||(e._i=t._i),sr(t._f)||(e._f=t._f),sr(t._l)||(e._l=t._l),sr(t._strict)||(e._strict=t._strict),sr(t._tzm)||(e._tzm=t._tzm),sr(t._isUTC)||(e._isUTC=t._isUTC),sr(t._offset)||(e._offset=t._offset),sr(t._pf)||(e._pf=Ce(t)),sr(t._locale)||(e._locale=t._locale),o>0)for(r=0;r<o;r++)a=EE[r],s=t[a],sr(s)||(e[a]=s);return e}function _i(e){Mg(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Hm===!1&&(Hm=!0,se.updateOffset(this),Hm=!1)}function mn(e){return e instanceof _i||e!=null&&e._isAMomentObject!=null}function L1(e){se.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function Kr(e,t){var r=!0;return Ea(function(){if(se.deprecationHandler!=null&&se.deprecationHandler(null,e),r){var a=[],s,o,l,i=arguments.length;for(o=0;o<i;o++){if(s="",typeof arguments[o]=="object"){s+=`
[`+o+"] ";for(l in arguments[0])ze(arguments[0],l)&&(s+=l+": "+arguments[0][l]+", ");s=s.slice(0,-2)}else s=arguments[o];a.push(s)}L1(e+`
Arguments: `+Array.prototype.slice.call(a).join("")+`
`+new Error().stack),r=!1}return t.apply(this,arguments)},t)}var xE={};function I1(e,t){se.deprecationHandler!=null&&se.deprecationHandler(e,t),xE[e]||(L1(t),xE[e]=!0)}se.suppressDeprecationWarnings=!1;se.deprecationHandler=null;function In(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function TU(e){var t,r;for(r in e)ze(e,r)&&(t=e[r],In(t)?this[r]=t:this["_"+r]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function kp(e,t){var r=Ea({},e),a;for(a in t)ze(t,a)&&(is(e[a])&&is(t[a])?(r[a]={},Ea(r[a],e[a]),Ea(r[a],t[a])):t[a]!=null?r[a]=t[a]:delete r[a]);for(a in e)ze(e,a)&&!ze(t,a)&&is(e[a])&&(r[a]=Ea({},r[a]));return r}function Pg(e){e!=null&&this.set(e)}var Dp;Object.keys?Dp=Object.keys:Dp=function(e){var t,r=[];for(t in e)ze(e,t)&&r.push(t);return r};var _U={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function OU(e,t,r){var a=this._calendar[e]||this._calendar.sameElse;return In(a)?a.call(t,r):a}function On(e,t,r){var a=""+Math.abs(e),s=t-a.length,o=e>=0;return(o?r?"+":"":"-")+Math.pow(10,Math.max(0,s)).toString().substr(1)+a}var Lg=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,ic=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ym={},Qs={};function pe(e,t,r,a){var s=a;typeof a=="string"&&(s=function(){return this[a]()}),e&&(Qs[e]=s),t&&(Qs[t[0]]=function(){return On(s.apply(this,arguments),t[1],t[2])}),r&&(Qs[r]=function(){return this.localeData().ordinal(s.apply(this,arguments),e)})}function RU(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function MU(e){var t=e.match(Lg),r,a;for(r=0,a=t.length;r<a;r++)Qs[t[r]]?t[r]=Qs[t[r]]:t[r]=RU(t[r]);return function(s){var o="",l;for(l=0;l<a;l++)o+=In(t[l])?t[l].call(s,e):t[l];return o}}function Fc(e,t){return e.isValid()?(t=$1(t,e.localeData()),Ym[t]=Ym[t]||MU(t),Ym[t](e)):e.localeData().invalidDate()}function $1(e,t){var r=5;function a(s){return t.longDateFormat(s)||s}for(ic.lastIndex=0;r>=0&&ic.test(e);)e=e.replace(ic,a),ic.lastIndex=0,r-=1;return e}var PU={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function LU(e){var t=this._longDateFormat[e],r=this._longDateFormat[e.toUpperCase()];return t||!r?t:(this._longDateFormat[e]=r.match(Lg).map(function(a){return a==="MMMM"||a==="MM"||a==="DD"||a==="dddd"?a.slice(1):a}).join(""),this._longDateFormat[e])}var IU="Invalid date";function $U(){return this._invalidDate}var FU="%d",jU=/\d{1,2}/;function BU(e){return this._ordinal.replace("%d",e)}var zU={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function UU(e,t,r,a){var s=this._relativeTime[r];return In(s)?s(e,t,r,a):s.replace(/%d/i,e)}function VU(e,t){var r=this._relativeTime[e>0?"future":"past"];return In(r)?r(t):r.replace(/%s/i,t)}var bE={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function Xr(e){return typeof e=="string"?bE[e]||bE[e.toLowerCase()]:void 0}function Ig(e){var t={},r,a;for(a in e)ze(e,a)&&(r=Xr(a),r&&(t[r]=e[a]));return t}var WU={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function HU(e){var t=[],r;for(r in e)ze(e,r)&&t.push({unit:r,priority:WU[r]});return t.sort(function(a,s){return a.priority-s.priority}),t}var F1=/\d/,Dr=/\d\d/,j1=/\d{3}/,$g=/\d{4}/,Md=/[+-]?\d{6}/,ut=/\d\d?/,B1=/\d\d\d\d?/,z1=/\d\d\d\d\d\d?/,Pd=/\d{1,3}/,Fg=/\d{1,4}/,Ld=/[+-]?\d{1,6}/,Po=/\d+/,Id=/[+-]?\d+/,YU=/Z|[+-]\d\d:?\d\d/gi,$d=/Z|[+-]\d\d(?::?\d\d)?/gi,qU=/[+-]?\d+(\.\d{1,3})?/,Oi=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Lo=/^[1-9]\d?/,jg=/^([1-9]\d|\d)/,Au;Au={};function le(e,t,r){Au[e]=In(t)?t:function(a,s){return a&&r?r:t}}function GU(e,t){return ze(Au,e)?Au[e](t._strict,t._locale):new RegExp(KU(e))}function KU(e){return Kn(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,r,a,s,o){return r||a||s||o}))}function Kn(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Fr(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function Re(e){var t=+e,r=0;return t!==0&&isFinite(t)&&(r=Fr(t)),r}var Ap={};function Ge(e,t){var r,a=t,s;for(typeof e=="string"&&(e=[e]),na(t)&&(a=function(o,l){l[t]=Re(o)}),s=e.length,r=0;r<s;r++)Ap[e[r]]=a}function Ri(e,t){Ge(e,function(r,a,s,o){s._w=s._w||{},t(r,s._w,s,o)})}function XU(e,t,r){t!=null&&ze(Ap,e)&&Ap[e](t,r._a,r,e)}function Fd(e){return e%4===0&&e%100!==0||e%400===0}var Gt=0,Yn=1,wn=2,Ot=3,sn=4,qn=5,rs=6,QU=7,JU=8;pe("Y",0,0,function(){var e=this.year();return e<=9999?On(e,4):"+"+e});pe(0,["YY",2],0,function(){return this.year()%100});pe(0,["YYYY",4],0,"year");pe(0,["YYYYY",5],0,"year");pe(0,["YYYYYY",6,!0],0,"year");le("Y",Id);le("YY",ut,Dr);le("YYYY",Fg,$g);le("YYYYY",Ld,Md);le("YYYYYY",Ld,Md);Ge(["YYYYY","YYYYYY"],Gt);Ge("YYYY",function(e,t){t[Gt]=e.length===2?se.parseTwoDigitYear(e):Re(e)});Ge("YY",function(e,t){t[Gt]=se.parseTwoDigitYear(e)});Ge("Y",function(e,t){t[Gt]=parseInt(e,10)});function xl(e){return Fd(e)?366:365}se.parseTwoDigitYear=function(e){return Re(e)+(Re(e)>68?1900:2e3)};var U1=Io("FullYear",!0);function ZU(){return Fd(this.year())}function Io(e,t){return function(r){return r!=null?(V1(this,e,r),se.updateOffset(this,t),this):ai(this,e)}}function ai(e,t){if(!e.isValid())return NaN;var r=e._d,a=e._isUTC;switch(t){case"Milliseconds":return a?r.getUTCMilliseconds():r.getMilliseconds();case"Seconds":return a?r.getUTCSeconds():r.getSeconds();case"Minutes":return a?r.getUTCMinutes():r.getMinutes();case"Hours":return a?r.getUTCHours():r.getHours();case"Date":return a?r.getUTCDate():r.getDate();case"Day":return a?r.getUTCDay():r.getDay();case"Month":return a?r.getUTCMonth():r.getMonth();case"FullYear":return a?r.getUTCFullYear():r.getFullYear();default:return NaN}}function V1(e,t,r){var a,s,o,l,i;if(!(!e.isValid()||isNaN(r))){switch(a=e._d,s=e._isUTC,t){case"Milliseconds":return void(s?a.setUTCMilliseconds(r):a.setMilliseconds(r));case"Seconds":return void(s?a.setUTCSeconds(r):a.setSeconds(r));case"Minutes":return void(s?a.setUTCMinutes(r):a.setMinutes(r));case"Hours":return void(s?a.setUTCHours(r):a.setHours(r));case"Date":return void(s?a.setUTCDate(r):a.setDate(r));case"FullYear":break;default:return}o=r,l=e.month(),i=e.date(),i=i===29&&l===1&&!Fd(o)?28:i,s?a.setUTCFullYear(o,l,i):a.setFullYear(o,l,i)}}function eV(e){return e=Xr(e),In(this[e])?this[e]():this}function tV(e,t){if(typeof e=="object"){e=Ig(e);var r=HU(e),a,s=r.length;for(a=0;a<s;a++)this[r[a].unit](e[r[a].unit])}else if(e=Xr(e),In(this[e]))return this[e](t);return this}function rV(e,t){return(e%t+t)%t}var Nt;Array.prototype.indexOf?Nt=Array.prototype.indexOf:Nt=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function Bg(e,t){if(isNaN(e)||isNaN(t))return NaN;var r=rV(t,12);return e+=(t-r)/12,r===1?Fd(e)?29:28:31-r%7%2}pe("M",["MM",2],"Mo",function(){return this.month()+1});pe("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});pe("MMMM",0,0,function(e){return this.localeData().months(this,e)});le("M",ut,Lo);le("MM",ut,Dr);le("MMM",function(e,t){return t.monthsShortRegex(e)});le("MMMM",function(e,t){return t.monthsRegex(e)});Ge(["M","MM"],function(e,t){t[Yn]=Re(e)-1});Ge(["MMM","MMMM"],function(e,t,r,a){var s=r._locale.monthsParse(e,a,r._strict);s!=null?t[Yn]=s:Ce(r).invalidMonth=e});var nV="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),W1="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),H1=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,aV=Oi,sV=Oi;function oV(e,t){return e?dn(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||H1).test(t)?"format":"standalone"][e.month()]:dn(this._months)?this._months:this._months.standalone}function lV(e,t){return e?dn(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[H1.test(t)?"format":"standalone"][e.month()]:dn(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function iV(e,t,r){var a,s,o,l=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],a=0;a<12;++a)o=Ln([2e3,a]),this._shortMonthsParse[a]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[a]=this.months(o,"").toLocaleLowerCase();return r?t==="MMM"?(s=Nt.call(this._shortMonthsParse,l),s!==-1?s:null):(s=Nt.call(this._longMonthsParse,l),s!==-1?s:null):t==="MMM"?(s=Nt.call(this._shortMonthsParse,l),s!==-1?s:(s=Nt.call(this._longMonthsParse,l),s!==-1?s:null)):(s=Nt.call(this._longMonthsParse,l),s!==-1?s:(s=Nt.call(this._shortMonthsParse,l),s!==-1?s:null))}function cV(e,t,r){var a,s,o;if(this._monthsParseExact)return iV.call(this,e,t,r);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),a=0;a<12;a++){if(s=Ln([2e3,a]),r&&!this._longMonthsParse[a]&&(this._longMonthsParse[a]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i"),this._shortMonthsParse[a]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")),!r&&!this._monthsParse[a]&&(o="^"+this.months(s,"")+"|^"+this.monthsShort(s,""),this._monthsParse[a]=new RegExp(o.replace(".",""),"i")),r&&t==="MMMM"&&this._longMonthsParse[a].test(e))return a;if(r&&t==="MMM"&&this._shortMonthsParse[a].test(e))return a;if(!r&&this._monthsParse[a].test(e))return a}}function Y1(e,t){if(!e.isValid())return e;if(typeof t=="string"){if(/^\d+$/.test(t))t=Re(t);else if(t=e.localeData().monthsParse(t),!na(t))return e}var r=t,a=e.date();return a=a<29?a:Math.min(a,Bg(e.year(),r)),e._isUTC?e._d.setUTCMonth(r,a):e._d.setMonth(r,a),e}function q1(e){return e!=null?(Y1(this,e),se.updateOffset(this,!0),this):ai(this,"Month")}function uV(){return Bg(this.year(),this.month())}function dV(e){return this._monthsParseExact?(ze(this,"_monthsRegex")||G1.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(ze(this,"_monthsShortRegex")||(this._monthsShortRegex=aV),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function mV(e){return this._monthsParseExact?(ze(this,"_monthsRegex")||G1.call(this),e?this._monthsStrictRegex:this._monthsRegex):(ze(this,"_monthsRegex")||(this._monthsRegex=sV),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function G1(){function e(c,d){return d.length-c.length}var t=[],r=[],a=[],s,o,l,i;for(s=0;s<12;s++)o=Ln([2e3,s]),l=Kn(this.monthsShort(o,"")),i=Kn(this.months(o,"")),t.push(l),r.push(i),a.push(i),a.push(l);t.sort(e),r.sort(e),a.sort(e),this._monthsRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}function fV(e,t,r,a,s,o,l){var i;return e<100&&e>=0?(i=new Date(e+400,t,r,a,s,o,l),isFinite(i.getFullYear())&&i.setFullYear(e)):i=new Date(e,t,r,a,s,o,l),i}function si(e){var t,r;return e<100&&e>=0?(r=Array.prototype.slice.call(arguments),r[0]=e+400,t=new Date(Date.UTC.apply(null,r)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function Tu(e,t,r){var a=7+t-r,s=(7+si(e,0,a).getUTCDay()-t)%7;return-s+a-1}function K1(e,t,r,a,s){var o=(7+r-a)%7,l=Tu(e,a,s),i=1+7*(t-1)+o+l,c,d;return i<=0?(c=e-1,d=xl(c)+i):i>xl(e)?(c=e+1,d=i-xl(e)):(c=e,d=i),{year:c,dayOfYear:d}}function oi(e,t,r){var a=Tu(e.year(),t,r),s=Math.floor((e.dayOfYear()-a-1)/7)+1,o,l;return s<1?(l=e.year()-1,o=s+Xn(l,t,r)):s>Xn(e.year(),t,r)?(o=s-Xn(e.year(),t,r),l=e.year()+1):(l=e.year(),o=s),{week:o,year:l}}function Xn(e,t,r){var a=Tu(e,t,r),s=Tu(e+1,t,r);return(xl(e)-a+s)/7}pe("w",["ww",2],"wo","week");pe("W",["WW",2],"Wo","isoWeek");le("w",ut,Lo);le("ww",ut,Dr);le("W",ut,Lo);le("WW",ut,Dr);Ri(["w","ww","W","WW"],function(e,t,r,a){t[a.substr(0,1)]=Re(e)});function pV(e){return oi(e,this._week.dow,this._week.doy).week}var hV={dow:0,doy:6};function gV(){return this._week.dow}function vV(){return this._week.doy}function yV(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function EV(e){var t=oi(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}pe("d",0,"do","day");pe("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});pe("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});pe("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});pe("e",0,0,"weekday");pe("E",0,0,"isoWeekday");le("d",ut);le("e",ut);le("E",ut);le("dd",function(e,t){return t.weekdaysMinRegex(e)});le("ddd",function(e,t){return t.weekdaysShortRegex(e)});le("dddd",function(e,t){return t.weekdaysRegex(e)});Ri(["dd","ddd","dddd"],function(e,t,r,a){var s=r._locale.weekdaysParse(e,a,r._strict);s!=null?t.d=s:Ce(r).invalidWeekday=e});Ri(["d","e","E"],function(e,t,r,a){t[a]=Re(e)});function xV(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function bV(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function zg(e,t){return e.slice(t,7).concat(e.slice(0,t))}var wV="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),X1="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),NV="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),SV=Oi,CV=Oi,kV=Oi;function DV(e,t){var r=dn(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===!0?zg(r,this._week.dow):e?r[e.day()]:r}function AV(e){return e===!0?zg(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function TV(e){return e===!0?zg(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function _V(e,t,r){var a,s,o,l=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],a=0;a<7;++a)o=Ln([2e3,1]).day(a),this._minWeekdaysParse[a]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[a]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[a]=this.weekdays(o,"").toLocaleLowerCase();return r?t==="dddd"?(s=Nt.call(this._weekdaysParse,l),s!==-1?s:null):t==="ddd"?(s=Nt.call(this._shortWeekdaysParse,l),s!==-1?s:null):(s=Nt.call(this._minWeekdaysParse,l),s!==-1?s:null):t==="dddd"?(s=Nt.call(this._weekdaysParse,l),s!==-1||(s=Nt.call(this._shortWeekdaysParse,l),s!==-1)?s:(s=Nt.call(this._minWeekdaysParse,l),s!==-1?s:null)):t==="ddd"?(s=Nt.call(this._shortWeekdaysParse,l),s!==-1||(s=Nt.call(this._weekdaysParse,l),s!==-1)?s:(s=Nt.call(this._minWeekdaysParse,l),s!==-1?s:null)):(s=Nt.call(this._minWeekdaysParse,l),s!==-1||(s=Nt.call(this._weekdaysParse,l),s!==-1)?s:(s=Nt.call(this._shortWeekdaysParse,l),s!==-1?s:null))}function OV(e,t,r){var a,s,o;if(this._weekdaysParseExact)return _V.call(this,e,t,r);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),a=0;a<7;a++){if(s=Ln([2e3,1]).day(a),r&&!this._fullWeekdaysParse[a]&&(this._fullWeekdaysParse[a]=new RegExp("^"+this.weekdays(s,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[a]=new RegExp("^"+this.weekdaysShort(s,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[a]=new RegExp("^"+this.weekdaysMin(s,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[a]||(o="^"+this.weekdays(s,"")+"|^"+this.weekdaysShort(s,"")+"|^"+this.weekdaysMin(s,""),this._weekdaysParse[a]=new RegExp(o.replace(".",""),"i")),r&&t==="dddd"&&this._fullWeekdaysParse[a].test(e))return a;if(r&&t==="ddd"&&this._shortWeekdaysParse[a].test(e))return a;if(r&&t==="dd"&&this._minWeekdaysParse[a].test(e))return a;if(!r&&this._weekdaysParse[a].test(e))return a}}function RV(e){if(!this.isValid())return e!=null?this:NaN;var t=ai(this,"Day");return e!=null?(e=xV(e,this.localeData()),this.add(e-t,"d")):t}function MV(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function PV(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=bV(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function LV(e){return this._weekdaysParseExact?(ze(this,"_weekdaysRegex")||Ug.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(ze(this,"_weekdaysRegex")||(this._weekdaysRegex=SV),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function IV(e){return this._weekdaysParseExact?(ze(this,"_weekdaysRegex")||Ug.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(ze(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=CV),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function $V(e){return this._weekdaysParseExact?(ze(this,"_weekdaysRegex")||Ug.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(ze(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=kV),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Ug(){function e(u,m){return m.length-u.length}var t=[],r=[],a=[],s=[],o,l,i,c,d;for(o=0;o<7;o++)l=Ln([2e3,1]).day(o),i=Kn(this.weekdaysMin(l,"")),c=Kn(this.weekdaysShort(l,"")),d=Kn(this.weekdays(l,"")),t.push(i),r.push(c),a.push(d),s.push(i),s.push(c),s.push(d);t.sort(e),r.sort(e),a.sort(e),s.sort(e),this._weekdaysRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function Vg(){return this.hours()%12||12}function FV(){return this.hours()||24}pe("H",["HH",2],0,"hour");pe("h",["hh",2],0,Vg);pe("k",["kk",2],0,FV);pe("hmm",0,0,function(){return""+Vg.apply(this)+On(this.minutes(),2)});pe("hmmss",0,0,function(){return""+Vg.apply(this)+On(this.minutes(),2)+On(this.seconds(),2)});pe("Hmm",0,0,function(){return""+this.hours()+On(this.minutes(),2)});pe("Hmmss",0,0,function(){return""+this.hours()+On(this.minutes(),2)+On(this.seconds(),2)});function Q1(e,t){pe(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}Q1("a",!0);Q1("A",!1);function J1(e,t){return t._meridiemParse}le("a",J1);le("A",J1);le("H",ut,jg);le("h",ut,Lo);le("k",ut,Lo);le("HH",ut,Dr);le("hh",ut,Dr);le("kk",ut,Dr);le("hmm",B1);le("hmmss",z1);le("Hmm",B1);le("Hmmss",z1);Ge(["H","HH"],Ot);Ge(["k","kk"],function(e,t,r){var a=Re(e);t[Ot]=a===24?0:a});Ge(["a","A"],function(e,t,r){r._isPm=r._locale.isPM(e),r._meridiem=e});Ge(["h","hh"],function(e,t,r){t[Ot]=Re(e),Ce(r).bigHour=!0});Ge("hmm",function(e,t,r){var a=e.length-2;t[Ot]=Re(e.substr(0,a)),t[sn]=Re(e.substr(a)),Ce(r).bigHour=!0});Ge("hmmss",function(e,t,r){var a=e.length-4,s=e.length-2;t[Ot]=Re(e.substr(0,a)),t[sn]=Re(e.substr(a,2)),t[qn]=Re(e.substr(s)),Ce(r).bigHour=!0});Ge("Hmm",function(e,t,r){var a=e.length-2;t[Ot]=Re(e.substr(0,a)),t[sn]=Re(e.substr(a))});Ge("Hmmss",function(e,t,r){var a=e.length-4,s=e.length-2;t[Ot]=Re(e.substr(0,a)),t[sn]=Re(e.substr(a,2)),t[qn]=Re(e.substr(s))});function jV(e){return(e+"").toLowerCase().charAt(0)==="p"}var BV=/[ap]\.?m?\.?/i,zV=Io("Hours",!0);function UV(e,t,r){return e>11?r?"pm":"PM":r?"am":"AM"}var Z1={calendar:_U,longDateFormat:PU,invalidDate:IU,ordinal:FU,dayOfMonthOrdinalParse:jU,relativeTime:zU,months:nV,monthsShort:W1,week:hV,weekdays:wV,weekdaysMin:NV,weekdaysShort:X1,meridiemParse:BV},dt={},el={},li;function VV(e,t){var r,a=Math.min(e.length,t.length);for(r=0;r<a;r+=1)if(e[r]!==t[r])return r;return a}function wE(e){return e&&e.toLowerCase().replace("_","-")}function WV(e){for(var t=0,r,a,s,o;t<e.length;){for(o=wE(e[t]).split("-"),r=o.length,a=wE(e[t+1]),a=a?a.split("-"):null;r>0;){if(s=jd(o.slice(0,r).join("-")),s)return s;if(a&&a.length>=r&&VV(o,a)>=r-1)break;r--}t++}return li}function HV(e){return!!(e&&e.match("^[^/\\\\]*$"))}function jd(e){var t=null,r;if(dt[e]===void 0&&typeof Vc<"u"&&Vc&&Vc.exports&&HV(e))try{t=li._abbr,r=require,r("./locale/"+e),Oa(t)}catch{dt[e]=null}return dt[e]}function Oa(e,t){var r;return e&&(sr(t)?r=oa(e):r=Wg(e,t),r?li=r:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),li._abbr}function Wg(e,t){if(t!==null){var r,a=Z1;if(t.abbr=e,dt[e]!=null)I1("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),a=dt[e]._config;else if(t.parentLocale!=null)if(dt[t.parentLocale]!=null)a=dt[t.parentLocale]._config;else if(r=jd(t.parentLocale),r!=null)a=r._config;else return el[t.parentLocale]||(el[t.parentLocale]=[]),el[t.parentLocale].push({name:e,config:t}),null;return dt[e]=new Pg(kp(a,t)),el[e]&&el[e].forEach(function(s){Wg(s.name,s.config)}),Oa(e),dt[e]}else return delete dt[e],null}function YV(e,t){if(t!=null){var r,a,s=Z1;dt[e]!=null&&dt[e].parentLocale!=null?dt[e].set(kp(dt[e]._config,t)):(a=jd(e),a!=null&&(s=a._config),t=kp(s,t),a==null&&(t.abbr=e),r=new Pg(t),r.parentLocale=dt[e],dt[e]=r),Oa(e)}else dt[e]!=null&&(dt[e].parentLocale!=null?(dt[e]=dt[e].parentLocale,e===Oa()&&Oa(e)):dt[e]!=null&&delete dt[e]);return dt[e]}function oa(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return li;if(!dn(e)){if(t=jd(e),t)return t;e=[e]}return WV(e)}function qV(){return Dp(dt)}function Hg(e){var t,r=e._a;return r&&Ce(e).overflow===-2&&(t=r[Yn]<0||r[Yn]>11?Yn:r[wn]<1||r[wn]>Bg(r[Gt],r[Yn])?wn:r[Ot]<0||r[Ot]>24||r[Ot]===24&&(r[sn]!==0||r[qn]!==0||r[rs]!==0)?Ot:r[sn]<0||r[sn]>59?sn:r[qn]<0||r[qn]>59?qn:r[rs]<0||r[rs]>999?rs:-1,Ce(e)._overflowDayOfYear&&(t<Gt||t>wn)&&(t=wn),Ce(e)._overflowWeeks&&t===-1&&(t=QU),Ce(e)._overflowWeekday&&t===-1&&(t=JU),Ce(e).overflow=t),e}var GV=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,KV=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,XV=/Z|[+-]\d\d(?::?\d\d)?/,cc=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],qm=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],QV=/^\/?Date\((-?\d+)/i,JV=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,ZV={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function e2(e){var t,r,a=e._i,s=GV.exec(a)||KV.exec(a),o,l,i,c,d=cc.length,u=qm.length;if(s){for(Ce(e).iso=!0,t=0,r=d;t<r;t++)if(cc[t][1].exec(s[1])){l=cc[t][0],o=cc[t][2]!==!1;break}if(l==null){e._isValid=!1;return}if(s[3]){for(t=0,r=u;t<r;t++)if(qm[t][1].exec(s[3])){i=(s[2]||" ")+qm[t][0];break}if(i==null){e._isValid=!1;return}}if(!o&&i!=null){e._isValid=!1;return}if(s[4])if(XV.exec(s[4]))c="Z";else{e._isValid=!1;return}e._f=l+(i||"")+(c||""),qg(e)}else e._isValid=!1}function eW(e,t,r,a,s,o){var l=[tW(e),W1.indexOf(t),parseInt(r,10),parseInt(a,10),parseInt(s,10)];return o&&l.push(parseInt(o,10)),l}function tW(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function rW(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function nW(e,t,r){if(e){var a=X1.indexOf(e),s=new Date(t[0],t[1],t[2]).getDay();if(a!==s)return Ce(r).weekdayMismatch=!0,r._isValid=!1,!1}return!0}function aW(e,t,r){if(e)return ZV[e];if(t)return 0;var a=parseInt(r,10),s=a%100,o=(a-s)/100;return o*60+s}function t2(e){var t=JV.exec(rW(e._i)),r;if(t){if(r=eW(t[4],t[3],t[2],t[5],t[6],t[7]),!nW(t[1],r,e))return;e._a=r,e._tzm=aW(t[8],t[9],t[10]),e._d=si.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),Ce(e).rfc2822=!0}else e._isValid=!1}function sW(e){var t=QV.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}if(e2(e),e._isValid===!1)delete e._isValid;else return;if(t2(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:se.createFromInputFallback(e)}se.createFromInputFallback=Kr("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function Ts(e,t,r){return e??t??r}function oW(e){var t=new Date(se.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Yg(e){var t,r,a=[],s,o,l;if(!e._d){for(s=oW(e),e._w&&e._a[wn]==null&&e._a[Yn]==null&&lW(e),e._dayOfYear!=null&&(l=Ts(e._a[Gt],s[Gt]),(e._dayOfYear>xl(l)||e._dayOfYear===0)&&(Ce(e)._overflowDayOfYear=!0),r=si(l,0,e._dayOfYear),e._a[Yn]=r.getUTCMonth(),e._a[wn]=r.getUTCDate()),t=0;t<3&&e._a[t]==null;++t)e._a[t]=a[t]=s[t];for(;t<7;t++)e._a[t]=a[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[Ot]===24&&e._a[sn]===0&&e._a[qn]===0&&e._a[rs]===0&&(e._nextDay=!0,e._a[Ot]=0),e._d=(e._useUTC?si:fV).apply(null,a),o=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Ot]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==o&&(Ce(e).weekdayMismatch=!0)}}function lW(e){var t,r,a,s,o,l,i,c,d;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(o=1,l=4,r=Ts(t.GG,e._a[Gt],oi(ct(),1,4).year),a=Ts(t.W,1),s=Ts(t.E,1),(s<1||s>7)&&(c=!0)):(o=e._locale._week.dow,l=e._locale._week.doy,d=oi(ct(),o,l),r=Ts(t.gg,e._a[Gt],d.year),a=Ts(t.w,d.week),t.d!=null?(s=t.d,(s<0||s>6)&&(c=!0)):t.e!=null?(s=t.e+o,(t.e<0||t.e>6)&&(c=!0)):s=o),a<1||a>Xn(r,o,l)?Ce(e)._overflowWeeks=!0:c!=null?Ce(e)._overflowWeekday=!0:(i=K1(r,a,s,o,l),e._a[Gt]=i.year,e._dayOfYear=i.dayOfYear)}se.ISO_8601=function(){};se.RFC_2822=function(){};function qg(e){if(e._f===se.ISO_8601){e2(e);return}if(e._f===se.RFC_2822){t2(e);return}e._a=[],Ce(e).empty=!0;var t=""+e._i,r,a,s,o,l,i=t.length,c=0,d,u;for(s=$1(e._f,e._locale).match(Lg)||[],u=s.length,r=0;r<u;r++)o=s[r],a=(t.match(GU(o,e))||[])[0],a&&(l=t.substr(0,t.indexOf(a)),l.length>0&&Ce(e).unusedInput.push(l),t=t.slice(t.indexOf(a)+a.length),c+=a.length),Qs[o]?(a?Ce(e).empty=!1:Ce(e).unusedTokens.push(o),XU(o,a,e)):e._strict&&!a&&Ce(e).unusedTokens.push(o);Ce(e).charsLeftOver=i-c,t.length>0&&Ce(e).unusedInput.push(t),e._a[Ot]<=12&&Ce(e).bigHour===!0&&e._a[Ot]>0&&(Ce(e).bigHour=void 0),Ce(e).parsedDateParts=e._a.slice(0),Ce(e).meridiem=e._meridiem,e._a[Ot]=iW(e._locale,e._a[Ot],e._meridiem),d=Ce(e).era,d!==null&&(e._a[Gt]=e._locale.erasConvertYear(d,e._a[Gt])),Yg(e),Hg(e)}function iW(e,t,r){var a;return r==null?t:e.meridiemHour!=null?e.meridiemHour(t,r):(e.isPM!=null&&(a=e.isPM(r),a&&t<12&&(t+=12),!a&&t===12&&(t=0)),t)}function cW(e){var t,r,a,s,o,l,i=!1,c=e._f.length;if(c===0){Ce(e).invalidFormat=!0,e._d=new Date(NaN);return}for(s=0;s<c;s++)o=0,l=!1,t=Mg({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[s],qg(t),Rg(t)&&(l=!0),o+=Ce(t).charsLeftOver,o+=Ce(t).unusedTokens.length*10,Ce(t).score=o,i?o<a&&(a=o,r=t):(a==null||o<a||l)&&(a=o,r=t,l&&(i=!0));Ea(e,r||t)}function uW(e){if(!e._d){var t=Ig(e._i),r=t.day===void 0?t.date:t.day;e._a=P1([t.year,t.month,r,t.hour,t.minute,t.second,t.millisecond],function(a){return a&&parseInt(a,10)}),Yg(e)}}function dW(e){var t=new _i(Hg(r2(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function r2(e){var t=e._i,r=e._f;return e._locale=e._locale||oa(e._l),t===null||r===void 0&&t===""?Rd({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),mn(t)?new _i(Hg(t)):(Ti(t)?e._d=t:dn(r)?cW(e):r?qg(e):mW(e),Rg(e)||(e._d=null),e))}function mW(e){var t=e._i;sr(t)?e._d=new Date(se.now()):Ti(t)?e._d=new Date(t.valueOf()):typeof t=="string"?sW(e):dn(t)?(e._a=P1(t.slice(0),function(r){return parseInt(r,10)}),Yg(e)):is(t)?uW(e):na(t)?e._d=new Date(t):se.createFromInputFallback(e)}function n2(e,t,r,a,s){var o={};return(t===!0||t===!1)&&(a=t,t=void 0),(r===!0||r===!1)&&(a=r,r=void 0),(is(e)&&Og(e)||dn(e)&&e.length===0)&&(e=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=s,o._l=r,o._i=e,o._f=t,o._strict=a,dW(o)}function ct(e,t,r,a){return n2(e,t,r,a,!1)}var fW=Kr("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=ct.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:Rd()}),pW=Kr("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=ct.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:Rd()});function a2(e,t){var r,a;if(t.length===1&&dn(t[0])&&(t=t[0]),!t.length)return ct();for(r=t[0],a=1;a<t.length;++a)(!t[a].isValid()||t[a][e](r))&&(r=t[a]);return r}function hW(){var e=[].slice.call(arguments,0);return a2("isBefore",e)}function gW(){var e=[].slice.call(arguments,0);return a2("isAfter",e)}var vW=function(){return Date.now?Date.now():+new Date},tl=["year","quarter","month","week","day","hour","minute","second","millisecond"];function yW(e){var t,r=!1,a,s=tl.length;for(t in e)if(ze(e,t)&&!(Nt.call(tl,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return!1;for(a=0;a<s;++a)if(e[tl[a]]){if(r)return!1;parseFloat(e[tl[a]])!==Re(e[tl[a]])&&(r=!0)}return!0}function EW(){return this._isValid}function xW(){return hn(NaN)}function Bd(e){var t=Ig(e),r=t.year||0,a=t.quarter||0,s=t.month||0,o=t.week||t.isoWeek||0,l=t.day||0,i=t.hour||0,c=t.minute||0,d=t.second||0,u=t.millisecond||0;this._isValid=yW(t),this._milliseconds=+u+d*1e3+c*6e4+i*1e3*60*60,this._days=+l+o*7,this._months=+s+a*3+r*12,this._data={},this._locale=oa(),this._bubble()}function jc(e){return e instanceof Bd}function Tp(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function bW(e,t,r){var a=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),o=0,l;for(l=0;l<a;l++)Re(e[l])!==Re(t[l])&&o++;return o+s}function s2(e,t){pe(e,0,0,function(){var r=this.utcOffset(),a="+";return r<0&&(r=-r,a="-"),a+On(~~(r/60),2)+t+On(~~r%60,2)})}s2("Z",":");s2("ZZ","");le("Z",$d);le("ZZ",$d);Ge(["Z","ZZ"],function(e,t,r){r._useUTC=!0,r._tzm=Gg($d,e)});var wW=/([\+\-]|\d\d)/gi;function Gg(e,t){var r=(t||"").match(e),a,s,o;return r===null?null:(a=r[r.length-1]||[],s=(a+"").match(wW)||["-",0,0],o=+(s[1]*60)+Re(s[2]),o===0?0:s[0]==="+"?o:-o)}function Kg(e,t){var r,a;return t._isUTC?(r=t.clone(),a=(mn(e)||Ti(e)?e.valueOf():ct(e).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+a),se.updateOffset(r,!1),r):ct(e).local()}function _p(e){return-Math.round(e._d.getTimezoneOffset())}se.updateOffset=function(){};function NW(e,t,r){var a=this._offset||0,s;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=Gg($d,e),e===null)return this}else Math.abs(e)<16&&!r&&(e=e*60);return!this._isUTC&&t&&(s=_p(this)),this._offset=e,this._isUTC=!0,s!=null&&this.add(s,"m"),a!==e&&(!t||this._changeInProgress?i2(this,hn(e-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,se.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?a:_p(this)}function SW(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function CW(e){return this.utcOffset(0,e)}function kW(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(_p(this),"m")),this}function DW(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=Gg(YU,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function AW(e){return this.isValid()?(e=e?ct(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function TW(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function _W(){if(!sr(this._isDSTShifted))return this._isDSTShifted;var e={},t;return Mg(e,this),e=r2(e),e._a?(t=e._isUTC?Ln(e._a):ct(e._a),this._isDSTShifted=this.isValid()&&bW(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function OW(){return this.isValid()?!this._isUTC:!1}function RW(){return this.isValid()?this._isUTC:!1}function o2(){return this.isValid()?this._isUTC&&this._offset===0:!1}var MW=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,PW=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function hn(e,t){var r=e,a=null,s,o,l;return jc(e)?r={ms:e._milliseconds,d:e._days,M:e._months}:na(e)||!isNaN(+e)?(r={},t?r[t]=+e:r.milliseconds=+e):(a=MW.exec(e))?(s=a[1]==="-"?-1:1,r={y:0,d:Re(a[wn])*s,h:Re(a[Ot])*s,m:Re(a[sn])*s,s:Re(a[qn])*s,ms:Re(Tp(a[rs]*1e3))*s}):(a=PW.exec(e))?(s=a[1]==="-"?-1:1,r={y:Ha(a[2],s),M:Ha(a[3],s),w:Ha(a[4],s),d:Ha(a[5],s),h:Ha(a[6],s),m:Ha(a[7],s),s:Ha(a[8],s)}):r==null?r={}:typeof r=="object"&&("from"in r||"to"in r)&&(l=LW(ct(r.from),ct(r.to)),r={},r.ms=l.milliseconds,r.M=l.months),o=new Bd(r),jc(e)&&ze(e,"_locale")&&(o._locale=e._locale),jc(e)&&ze(e,"_isValid")&&(o._isValid=e._isValid),o}hn.fn=Bd.prototype;hn.invalid=xW;function Ha(e,t){var r=e&&parseFloat(e.replace(",","."));return(isNaN(r)?0:r)*t}function NE(e,t){var r={};return r.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(r.months,"M").isAfter(t)&&--r.months,r.milliseconds=+t-+e.clone().add(r.months,"M"),r}function LW(e,t){var r;return e.isValid()&&t.isValid()?(t=Kg(t,e),e.isBefore(t)?r=NE(e,t):(r=NE(t,e),r.milliseconds=-r.milliseconds,r.months=-r.months),r):{milliseconds:0,months:0}}function l2(e,t){return function(r,a){var s,o;return a!==null&&!isNaN(+a)&&(I1(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=r,r=a,a=o),s=hn(r,a),i2(this,s,e),this}}function i2(e,t,r,a){var s=t._milliseconds,o=Tp(t._days),l=Tp(t._months);e.isValid()&&(a=a??!0,l&&Y1(e,ai(e,"Month")+l*r),o&&V1(e,"Date",ai(e,"Date")+o*r),s&&e._d.setTime(e._d.valueOf()+s*r),a&&se.updateOffset(e,o||l))}var IW=l2(1,"add"),$W=l2(-1,"subtract");function c2(e){return typeof e=="string"||e instanceof String}function FW(e){return mn(e)||Ti(e)||c2(e)||na(e)||BW(e)||jW(e)||e===null||e===void 0}function jW(e){var t=is(e)&&!Og(e),r=!1,a=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],s,o,l=a.length;for(s=0;s<l;s+=1)o=a[s],r=r||ze(e,o);return t&&r}function BW(e){var t=dn(e),r=!1;return t&&(r=e.filter(function(a){return!na(a)&&c2(e)}).length===0),t&&r}function zW(e){var t=is(e)&&!Og(e),r=!1,a=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],s,o;for(s=0;s<a.length;s+=1)o=a[s],r=r||ze(e,o);return t&&r}function UW(e,t){var r=e.diff(t,"days",!0);return r<-6?"sameElse":r<-1?"lastWeek":r<0?"lastDay":r<1?"sameDay":r<2?"nextDay":r<7?"nextWeek":"sameElse"}function VW(e,t){arguments.length===1&&(arguments[0]?FW(arguments[0])?(e=arguments[0],t=void 0):zW(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var r=e||ct(),a=Kg(r,this).startOf("day"),s=se.calendarFormat(this,a)||"sameElse",o=t&&(In(t[s])?t[s].call(this,r):t[s]);return this.format(o||this.localeData().calendar(s,this,ct(r)))}function WW(){return new _i(this)}function HW(e,t){var r=mn(e)?e:ct(e);return this.isValid()&&r.isValid()?(t=Xr(t)||"millisecond",t==="millisecond"?this.valueOf()>r.valueOf():r.valueOf()<this.clone().startOf(t).valueOf()):!1}function YW(e,t){var r=mn(e)?e:ct(e);return this.isValid()&&r.isValid()?(t=Xr(t)||"millisecond",t==="millisecond"?this.valueOf()<r.valueOf():this.clone().endOf(t).valueOf()<r.valueOf()):!1}function qW(e,t,r,a){var s=mn(e)?e:ct(e),o=mn(t)?t:ct(t);return this.isValid()&&s.isValid()&&o.isValid()?(a=a||"()",(a[0]==="("?this.isAfter(s,r):!this.isBefore(s,r))&&(a[1]===")"?this.isBefore(o,r):!this.isAfter(o,r))):!1}function GW(e,t){var r=mn(e)?e:ct(e),a;return this.isValid()&&r.isValid()?(t=Xr(t)||"millisecond",t==="millisecond"?this.valueOf()===r.valueOf():(a=r.valueOf(),this.clone().startOf(t).valueOf()<=a&&a<=this.clone().endOf(t).valueOf())):!1}function KW(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function XW(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function QW(e,t,r){var a,s,o;if(!this.isValid())return NaN;if(a=Kg(e,this),!a.isValid())return NaN;switch(s=(a.utcOffset()-this.utcOffset())*6e4,t=Xr(t),t){case"year":o=Bc(this,a)/12;break;case"month":o=Bc(this,a);break;case"quarter":o=Bc(this,a)/3;break;case"second":o=(this-a)/1e3;break;case"minute":o=(this-a)/6e4;break;case"hour":o=(this-a)/36e5;break;case"day":o=(this-a-s)/864e5;break;case"week":o=(this-a-s)/6048e5;break;default:o=this-a}return r?o:Fr(o)}function Bc(e,t){if(e.date()<t.date())return-Bc(t,e);var r=(t.year()-e.year())*12+(t.month()-e.month()),a=e.clone().add(r,"months"),s,o;return t-a<0?(s=e.clone().add(r-1,"months"),o=(t-a)/(a-s)):(s=e.clone().add(r+1,"months"),o=(t-a)/(s-a)),-(r+o)||0}se.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";se.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function JW(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function ZW(e){if(!this.isValid())return null;var t=e!==!0,r=t?this.clone().utc():this;return r.year()<0||r.year()>9999?Fc(r,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):In(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",Fc(r,"Z")):Fc(r,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function eH(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",r,a,s,o;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z"),r="["+e+'("]',a=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",s="-MM-DD[T]HH:mm:ss.SSS",o=t+'[")]',this.format(r+a+s+o)}function tH(e){e||(e=this.isUtc()?se.defaultFormatUtc:se.defaultFormat);var t=Fc(this,e);return this.localeData().postformat(t)}function rH(e,t){return this.isValid()&&(mn(e)&&e.isValid()||ct(e).isValid())?hn({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function nH(e){return this.from(ct(),e)}function aH(e,t){return this.isValid()&&(mn(e)&&e.isValid()||ct(e).isValid())?hn({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function sH(e){return this.to(ct(),e)}function u2(e){var t;return e===void 0?this._locale._abbr:(t=oa(e),t!=null&&(this._locale=t),this)}var d2=Kr("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function m2(){return this._locale}var _u=1e3,Js=60*_u,Ou=60*Js,f2=(365*400+97)*24*Ou;function Zs(e,t){return(e%t+t)%t}function p2(e,t,r){return e<100&&e>=0?new Date(e+400,t,r)-f2:new Date(e,t,r).valueOf()}function h2(e,t,r){return e<100&&e>=0?Date.UTC(e+400,t,r)-f2:Date.UTC(e,t,r)}function oH(e){var t,r;if(e=Xr(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(r=this._isUTC?h2:p2,e){case"year":t=r(this.year(),0,1);break;case"quarter":t=r(this.year(),this.month()-this.month()%3,1);break;case"month":t=r(this.year(),this.month(),1);break;case"week":t=r(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=r(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=Zs(t+(this._isUTC?0:this.utcOffset()*Js),Ou);break;case"minute":t=this._d.valueOf(),t-=Zs(t,Js);break;case"second":t=this._d.valueOf(),t-=Zs(t,_u);break}return this._d.setTime(t),se.updateOffset(this,!0),this}function lH(e){var t,r;if(e=Xr(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(r=this._isUTC?h2:p2,e){case"year":t=r(this.year()+1,0,1)-1;break;case"quarter":t=r(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=r(this.year(),this.month()+1,1)-1;break;case"week":t=r(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=r(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=Ou-Zs(t+(this._isUTC?0:this.utcOffset()*Js),Ou)-1;break;case"minute":t=this._d.valueOf(),t+=Js-Zs(t,Js)-1;break;case"second":t=this._d.valueOf(),t+=_u-Zs(t,_u)-1;break}return this._d.setTime(t),se.updateOffset(this,!0),this}function iH(){return this._d.valueOf()-(this._offset||0)*6e4}function cH(){return Math.floor(this.valueOf()/1e3)}function uH(){return new Date(this.valueOf())}function dH(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function mH(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function fH(){return this.isValid()?this.toISOString():null}function pH(){return Rg(this)}function hH(){return Ea({},Ce(this))}function gH(){return Ce(this).overflow}function vH(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}pe("N",0,0,"eraAbbr");pe("NN",0,0,"eraAbbr");pe("NNN",0,0,"eraAbbr");pe("NNNN",0,0,"eraName");pe("NNNNN",0,0,"eraNarrow");pe("y",["y",1],"yo","eraYear");pe("y",["yy",2],0,"eraYear");pe("y",["yyy",3],0,"eraYear");pe("y",["yyyy",4],0,"eraYear");le("N",Xg);le("NN",Xg);le("NNN",Xg);le("NNNN",AH);le("NNNNN",TH);Ge(["N","NN","NNN","NNNN","NNNNN"],function(e,t,r,a){var s=r._locale.erasParse(e,a,r._strict);s?Ce(r).era=s:Ce(r).invalidEra=e});le("y",Po);le("yy",Po);le("yyy",Po);le("yyyy",Po);le("yo",_H);Ge(["y","yy","yyy","yyyy"],Gt);Ge(["yo"],function(e,t,r,a){var s;r._locale._eraYearOrdinalRegex&&(s=e.match(r._locale._eraYearOrdinalRegex)),r._locale.eraYearOrdinalParse?t[Gt]=r._locale.eraYearOrdinalParse(e,s):t[Gt]=parseInt(e,10)});function yH(e,t){var r,a,s,o=this._eras||oa("en")._eras;for(r=0,a=o.length;r<a;++r){switch(typeof o[r].since){case"string":s=se(o[r].since).startOf("day"),o[r].since=s.valueOf();break}switch(typeof o[r].until){case"undefined":o[r].until=1/0;break;case"string":s=se(o[r].until).startOf("day").valueOf(),o[r].until=s.valueOf();break}}return o}function EH(e,t,r){var a,s,o=this.eras(),l,i,c;for(e=e.toUpperCase(),a=0,s=o.length;a<s;++a)if(l=o[a].name.toUpperCase(),i=o[a].abbr.toUpperCase(),c=o[a].narrow.toUpperCase(),r)switch(t){case"N":case"NN":case"NNN":if(i===e)return o[a];break;case"NNNN":if(l===e)return o[a];break;case"NNNNN":if(c===e)return o[a];break}else if([l,i,c].indexOf(e)>=0)return o[a]}function xH(e,t){var r=e.since<=e.until?1:-1;return t===void 0?se(e.since).year():se(e.since).year()+(t-e.offset)*r}function bH(){var e,t,r,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e)if(r=this.clone().startOf("day").valueOf(),a[e].since<=r&&r<=a[e].until||a[e].until<=r&&r<=a[e].since)return a[e].name;return""}function wH(){var e,t,r,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e)if(r=this.clone().startOf("day").valueOf(),a[e].since<=r&&r<=a[e].until||a[e].until<=r&&r<=a[e].since)return a[e].narrow;return""}function NH(){var e,t,r,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e)if(r=this.clone().startOf("day").valueOf(),a[e].since<=r&&r<=a[e].until||a[e].until<=r&&r<=a[e].since)return a[e].abbr;return""}function SH(){var e,t,r,a,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e)if(r=s[e].since<=s[e].until?1:-1,a=this.clone().startOf("day").valueOf(),s[e].since<=a&&a<=s[e].until||s[e].until<=a&&a<=s[e].since)return(this.year()-se(s[e].since).year())*r+s[e].offset;return this.year()}function CH(e){return ze(this,"_erasNameRegex")||Qg.call(this),e?this._erasNameRegex:this._erasRegex}function kH(e){return ze(this,"_erasAbbrRegex")||Qg.call(this),e?this._erasAbbrRegex:this._erasRegex}function DH(e){return ze(this,"_erasNarrowRegex")||Qg.call(this),e?this._erasNarrowRegex:this._erasRegex}function Xg(e,t){return t.erasAbbrRegex(e)}function AH(e,t){return t.erasNameRegex(e)}function TH(e,t){return t.erasNarrowRegex(e)}function _H(e,t){return t._eraYearOrdinalRegex||Po}function Qg(){var e=[],t=[],r=[],a=[],s,o,l,i,c,d=this.eras();for(s=0,o=d.length;s<o;++s)l=Kn(d[s].name),i=Kn(d[s].abbr),c=Kn(d[s].narrow),t.push(l),e.push(i),r.push(c),a.push(l),a.push(i),a.push(c);this._erasRegex=new RegExp("^("+a.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+r.join("|")+")","i")}pe(0,["gg",2],0,function(){return this.weekYear()%100});pe(0,["GG",2],0,function(){return this.isoWeekYear()%100});function zd(e,t){pe(0,[e,e.length],0,t)}zd("gggg","weekYear");zd("ggggg","weekYear");zd("GGGG","isoWeekYear");zd("GGGGG","isoWeekYear");le("G",Id);le("g",Id);le("GG",ut,Dr);le("gg",ut,Dr);le("GGGG",Fg,$g);le("gggg",Fg,$g);le("GGGGG",Ld,Md);le("ggggg",Ld,Md);Ri(["gggg","ggggg","GGGG","GGGGG"],function(e,t,r,a){t[a.substr(0,2)]=Re(e)});Ri(["gg","GG"],function(e,t,r,a){t[a]=se.parseTwoDigitYear(e)});function OH(e){return g2.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function RH(e){return g2.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function MH(){return Xn(this.year(),1,4)}function PH(){return Xn(this.isoWeekYear(),1,4)}function LH(){var e=this.localeData()._week;return Xn(this.year(),e.dow,e.doy)}function IH(){var e=this.localeData()._week;return Xn(this.weekYear(),e.dow,e.doy)}function g2(e,t,r,a,s){var o;return e==null?oi(this,a,s).year:(o=Xn(e,a,s),t>o&&(t=o),$H.call(this,e,t,r,a,s))}function $H(e,t,r,a,s){var o=K1(e,t,r,a,s),l=si(o.year,0,o.dayOfYear);return this.year(l.getUTCFullYear()),this.month(l.getUTCMonth()),this.date(l.getUTCDate()),this}pe("Q",0,"Qo","quarter");le("Q",F1);Ge("Q",function(e,t){t[Yn]=(Re(e)-1)*3});function FH(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}pe("D",["DD",2],"Do","date");le("D",ut,Lo);le("DD",ut,Dr);le("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});Ge(["D","DD"],wn);Ge("Do",function(e,t){t[wn]=Re(e.match(ut)[0])});var v2=Io("Date",!0);pe("DDD",["DDDD",3],"DDDo","dayOfYear");le("DDD",Pd);le("DDDD",j1);Ge(["DDD","DDDD"],function(e,t,r){r._dayOfYear=Re(e)});function jH(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}pe("m",["mm",2],0,"minute");le("m",ut,jg);le("mm",ut,Dr);Ge(["m","mm"],sn);var BH=Io("Minutes",!1);pe("s",["ss",2],0,"second");le("s",ut,jg);le("ss",ut,Dr);Ge(["s","ss"],qn);var zH=Io("Seconds",!1);pe("S",0,0,function(){return~~(this.millisecond()/100)});pe(0,["SS",2],0,function(){return~~(this.millisecond()/10)});pe(0,["SSS",3],0,"millisecond");pe(0,["SSSS",4],0,function(){return this.millisecond()*10});pe(0,["SSSSS",5],0,function(){return this.millisecond()*100});pe(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});pe(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});pe(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});pe(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});le("S",Pd,F1);le("SS",Pd,Dr);le("SSS",Pd,j1);var xa,y2;for(xa="SSSS";xa.length<=9;xa+="S")le(xa,Po);function UH(e,t){t[rs]=Re(("0."+e)*1e3)}for(xa="S";xa.length<=9;xa+="S")Ge(xa,UH);y2=Io("Milliseconds",!1);pe("z",0,0,"zoneAbbr");pe("zz",0,0,"zoneName");function VH(){return this._isUTC?"UTC":""}function WH(){return this._isUTC?"Coordinated Universal Time":""}var ee=_i.prototype;ee.add=IW;ee.calendar=VW;ee.clone=WW;ee.diff=QW;ee.endOf=lH;ee.format=tH;ee.from=rH;ee.fromNow=nH;ee.to=aH;ee.toNow=sH;ee.get=eV;ee.invalidAt=gH;ee.isAfter=HW;ee.isBefore=YW;ee.isBetween=qW;ee.isSame=GW;ee.isSameOrAfter=KW;ee.isSameOrBefore=XW;ee.isValid=pH;ee.lang=d2;ee.locale=u2;ee.localeData=m2;ee.max=pW;ee.min=fW;ee.parsingFlags=hH;ee.set=tV;ee.startOf=oH;ee.subtract=$W;ee.toArray=dH;ee.toObject=mH;ee.toDate=uH;ee.toISOString=ZW;ee.inspect=eH;typeof Symbol<"u"&&Symbol.for!=null&&(ee[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});ee.toJSON=fH;ee.toString=JW;ee.unix=cH;ee.valueOf=iH;ee.creationData=vH;ee.eraName=bH;ee.eraNarrow=wH;ee.eraAbbr=NH;ee.eraYear=SH;ee.year=U1;ee.isLeapYear=ZU;ee.weekYear=OH;ee.isoWeekYear=RH;ee.quarter=ee.quarters=FH;ee.month=q1;ee.daysInMonth=uV;ee.week=ee.weeks=yV;ee.isoWeek=ee.isoWeeks=EV;ee.weeksInYear=LH;ee.weeksInWeekYear=IH;ee.isoWeeksInYear=MH;ee.isoWeeksInISOWeekYear=PH;ee.date=v2;ee.day=ee.days=RV;ee.weekday=MV;ee.isoWeekday=PV;ee.dayOfYear=jH;ee.hour=ee.hours=zV;ee.minute=ee.minutes=BH;ee.second=ee.seconds=zH;ee.millisecond=ee.milliseconds=y2;ee.utcOffset=NW;ee.utc=CW;ee.local=kW;ee.parseZone=DW;ee.hasAlignedHourOffset=AW;ee.isDST=TW;ee.isLocal=OW;ee.isUtcOffset=RW;ee.isUtc=o2;ee.isUTC=o2;ee.zoneAbbr=VH;ee.zoneName=WH;ee.dates=Kr("dates accessor is deprecated. Use date instead.",v2);ee.months=Kr("months accessor is deprecated. Use month instead",q1);ee.years=Kr("years accessor is deprecated. Use year instead",U1);ee.zone=Kr("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",SW);ee.isDSTShifted=Kr("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",_W);function HH(e){return ct(e*1e3)}function YH(){return ct.apply(null,arguments).parseZone()}function E2(e){return e}var Ue=Pg.prototype;Ue.calendar=OU;Ue.longDateFormat=LU;Ue.invalidDate=$U;Ue.ordinal=BU;Ue.preparse=E2;Ue.postformat=E2;Ue.relativeTime=UU;Ue.pastFuture=VU;Ue.set=TU;Ue.eras=yH;Ue.erasParse=EH;Ue.erasConvertYear=xH;Ue.erasAbbrRegex=kH;Ue.erasNameRegex=CH;Ue.erasNarrowRegex=DH;Ue.months=oV;Ue.monthsShort=lV;Ue.monthsParse=cV;Ue.monthsRegex=mV;Ue.monthsShortRegex=dV;Ue.week=pV;Ue.firstDayOfYear=vV;Ue.firstDayOfWeek=gV;Ue.weekdays=DV;Ue.weekdaysMin=TV;Ue.weekdaysShort=AV;Ue.weekdaysParse=OV;Ue.weekdaysRegex=LV;Ue.weekdaysShortRegex=IV;Ue.weekdaysMinRegex=$V;Ue.isPM=jV;Ue.meridiem=UV;function Ru(e,t,r,a){var s=oa(),o=Ln().set(a,t);return s[r](o,e)}function x2(e,t,r){if(na(e)&&(t=e,e=void 0),e=e||"",t!=null)return Ru(e,t,r,"month");var a,s=[];for(a=0;a<12;a++)s[a]=Ru(e,a,r,"month");return s}function Jg(e,t,r,a){typeof e=="boolean"?(na(t)&&(r=t,t=void 0),t=t||""):(t=e,r=t,e=!1,na(t)&&(r=t,t=void 0),t=t||"");var s=oa(),o=e?s._week.dow:0,l,i=[];if(r!=null)return Ru(t,(r+o)%7,a,"day");for(l=0;l<7;l++)i[l]=Ru(t,(l+o)%7,a,"day");return i}function qH(e,t){return x2(e,t,"months")}function GH(e,t){return x2(e,t,"monthsShort")}function KH(e,t,r){return Jg(e,t,r,"weekdays")}function XH(e,t,r){return Jg(e,t,r,"weekdaysShort")}function QH(e,t,r){return Jg(e,t,r,"weekdaysMin")}Oa("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,r=Re(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+r}});se.lang=Kr("moment.lang is deprecated. Use moment.locale instead.",Oa);se.langData=Kr("moment.langData is deprecated. Use moment.localeData instead.",oa);var jn=Math.abs;function JH(){var e=this._data;return this._milliseconds=jn(this._milliseconds),this._days=jn(this._days),this._months=jn(this._months),e.milliseconds=jn(e.milliseconds),e.seconds=jn(e.seconds),e.minutes=jn(e.minutes),e.hours=jn(e.hours),e.months=jn(e.months),e.years=jn(e.years),this}function b2(e,t,r,a){var s=hn(t,r);return e._milliseconds+=a*s._milliseconds,e._days+=a*s._days,e._months+=a*s._months,e._bubble()}function ZH(e,t){return b2(this,e,t,1)}function eY(e,t){return b2(this,e,t,-1)}function SE(e){return e<0?Math.floor(e):Math.ceil(e)}function tY(){var e=this._milliseconds,t=this._days,r=this._months,a=this._data,s,o,l,i,c;return e>=0&&t>=0&&r>=0||e<=0&&t<=0&&r<=0||(e+=SE(Op(r)+t)*864e5,t=0,r=0),a.milliseconds=e%1e3,s=Fr(e/1e3),a.seconds=s%60,o=Fr(s/60),a.minutes=o%60,l=Fr(o/60),a.hours=l%24,t+=Fr(l/24),c=Fr(w2(t)),r+=c,t-=SE(Op(c)),i=Fr(r/12),r%=12,a.days=t,a.months=r,a.years=i,this}function w2(e){return e*4800/146097}function Op(e){return e*146097/4800}function rY(e){if(!this.isValid())return NaN;var t,r,a=this._milliseconds;if(e=Xr(e),e==="month"||e==="quarter"||e==="year")switch(t=this._days+a/864e5,r=this._months+w2(t),e){case"month":return r;case"quarter":return r/3;case"year":return r/12}else switch(t=this._days+Math.round(Op(this._months)),e){case"week":return t/7+a/6048e5;case"day":return t+a/864e5;case"hour":return t*24+a/36e5;case"minute":return t*1440+a/6e4;case"second":return t*86400+a/1e3;case"millisecond":return Math.floor(t*864e5)+a;default:throw new Error("Unknown unit "+e)}}function la(e){return function(){return this.as(e)}}var N2=la("ms"),nY=la("s"),aY=la("m"),sY=la("h"),oY=la("d"),lY=la("w"),iY=la("M"),cY=la("Q"),uY=la("y"),dY=N2;function mY(){return hn(this)}function fY(e){return e=Xr(e),this.isValid()?this[e+"s"]():NaN}function Cs(e){return function(){return this.isValid()?this._data[e]:NaN}}var pY=Cs("milliseconds"),hY=Cs("seconds"),gY=Cs("minutes"),vY=Cs("hours"),yY=Cs("days"),EY=Cs("months"),xY=Cs("years");function bY(){return Fr(this.days()/7)}var Un=Math.round,Us={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function wY(e,t,r,a,s){return s.relativeTime(t||1,!!r,e,a)}function NY(e,t,r,a){var s=hn(e).abs(),o=Un(s.as("s")),l=Un(s.as("m")),i=Un(s.as("h")),c=Un(s.as("d")),d=Un(s.as("M")),u=Un(s.as("w")),m=Un(s.as("y")),f=o<=r.ss&&["s",o]||o<r.s&&["ss",o]||l<=1&&["m"]||l<r.m&&["mm",l]||i<=1&&["h"]||i<r.h&&["hh",i]||c<=1&&["d"]||c<r.d&&["dd",c];return r.w!=null&&(f=f||u<=1&&["w"]||u<r.w&&["ww",u]),f=f||d<=1&&["M"]||d<r.M&&["MM",d]||m<=1&&["y"]||["yy",m],f[2]=t,f[3]=+e>0,f[4]=a,wY.apply(null,f)}function SY(e){return e===void 0?Un:typeof e=="function"?(Un=e,!0):!1}function CY(e,t){return Us[e]===void 0?!1:t===void 0?Us[e]:(Us[e]=t,e==="s"&&(Us.ss=t-1),!0)}function kY(e,t){if(!this.isValid())return this.localeData().invalidDate();var r=!1,a=Us,s,o;return typeof e=="object"&&(t=e,e=!1),typeof e=="boolean"&&(r=e),typeof t=="object"&&(a=Object.assign({},Us,t),t.s!=null&&t.ss==null&&(a.ss=t.s-1)),s=this.localeData(),o=NY(this,!r,a,s),r&&(o=s.pastFuture(+this,o)),s.postformat(o)}var Gm=Math.abs;function Ds(e){return(e>0)-(e<0)||+e}function Ud(){if(!this.isValid())return this.localeData().invalidDate();var e=Gm(this._milliseconds)/1e3,t=Gm(this._days),r=Gm(this._months),a,s,o,l,i=this.asSeconds(),c,d,u,m;return i?(a=Fr(e/60),s=Fr(a/60),e%=60,a%=60,o=Fr(r/12),r%=12,l=e?e.toFixed(3).replace(/\.?0+$/,""):"",c=i<0?"-":"",d=Ds(this._months)!==Ds(i)?"-":"",u=Ds(this._days)!==Ds(i)?"-":"",m=Ds(this._milliseconds)!==Ds(i)?"-":"",c+"P"+(o?d+o+"Y":"")+(r?d+r+"M":"")+(t?u+t+"D":"")+(s||a||e?"T":"")+(s?m+s+"H":"")+(a?m+a+"M":"")+(e?m+l+"S":"")):"P0D"}var Fe=Bd.prototype;Fe.isValid=EW;Fe.abs=JH;Fe.add=ZH;Fe.subtract=eY;Fe.as=rY;Fe.asMilliseconds=N2;Fe.asSeconds=nY;Fe.asMinutes=aY;Fe.asHours=sY;Fe.asDays=oY;Fe.asWeeks=lY;Fe.asMonths=iY;Fe.asQuarters=cY;Fe.asYears=uY;Fe.valueOf=dY;Fe._bubble=tY;Fe.clone=mY;Fe.get=fY;Fe.milliseconds=pY;Fe.seconds=hY;Fe.minutes=gY;Fe.hours=vY;Fe.days=yY;Fe.weeks=bY;Fe.months=EY;Fe.years=xY;Fe.humanize=kY;Fe.toISOString=Ud;Fe.toString=Ud;Fe.toJSON=Ud;Fe.locale=u2;Fe.localeData=m2;Fe.toIsoString=Kr("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Ud);Fe.lang=d2;pe("X",0,0,"unix");pe("x",0,0,"valueOf");le("x",Id);le("X",qU);Ge("X",function(e,t,r){r._d=new Date(parseFloat(e)*1e3)});Ge("x",function(e,t,r){r._d=new Date(Re(e))});//! moment.js
se.version="2.30.1";DU(ct);se.fn=ee;se.min=hW;se.max=gW;se.now=vW;se.utc=Ln;se.unix=HH;se.months=qH;se.isDate=Ti;se.locale=Oa;se.invalid=Rd;se.duration=hn;se.isMoment=mn;se.weekdays=KH;se.parseZone=YH;se.localeData=oa;se.isDuration=jc;se.monthsShort=GH;se.weekdaysMin=QH;se.defineLocale=Wg;se.updateLocale=YV;se.locales=qV;se.weekdaysShort=XH;se.normalizeUnits=Xr;se.relativeTimeRounding=SY;se.relativeTimeThreshold=CY;se.calendarFormat=UW;se.prototype=ee;se.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const DY=kU(se),AY=()=>{const[e,t]=g.useState([]),[r,a]=g.useState(!0),[s,o]=g.useState(null),[l,i]=g.useState(null),[c,d]=g.useState(null),[u,m]=g.useState(!1),[f,x]=g.useState({date:"",location:"",notes:""}),[b,y]=g.useState(!1);g.useEffect(()=>{(async()=>{try{a(!0);const S=localStorage.getItem("token"),C=await ye.get("/appointments",{headers:{Authorization:`Bearer ${S}`}});t(Array.isArray(C.data)?C.data:[]),o(null)}catch{o("Error al cargar las citas"),t([])}finally{a(!1)}})()},[]);const v=g.useMemo(()=>{const N=Array.isArray(e)?e:[],S=N.length,C=N.filter(D=>se(D.date).isAfter(se())).length,k=N.filter(D=>se(D.date).isBefore(se())).length;return{total:S,upcoming:C,past:k}},[e]),p=(Array.isArray(e)?e:[]).map(N=>({id:N.id,title:`${N.client.user.name} - ${se(N.date).format("HH:mm")}`,start:new Date(N.date),end:se(N.date).add(1,"hour").toDate(),resource:N})),h=N=>{d(N),x({date:se(N.date).format("YYYY-MM-DDTHH:mm"),location:N.location||"",notes:""}),m(!0)},E=async N=>{var S,C;if(N.preventDefault(),!!c)try{y(!0);const k=localStorage.getItem("token"),D=await ye.put(`/api/appointments/${c.id}/reschedule`,f,{headers:{Authorization:`Bearer ${k}`}});t(O=>O.map(A=>A.id===c.id?D.data:A)),i("Cita reprogramada exitosamente. Se ha enviado una notificación al cliente."),m(!1),d(null),setTimeout(()=>i(null),5e3)}catch(k){o(((C=(S=k.response)==null?void 0:S.data)==null?void 0:C.message)||"Error al reprogramar la cita")}finally{y(!1)}},w=N=>{x(S=>({...S,[N.target.name]:N.target.value}))};return n.createElement("div",{className:"py-6"},n.createElement("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("h1",{className:"text-3xl font-bold mb-6"},"Calendario de Citas"),l&&n.createElement("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-md"},n.createElement("p",{className:"text-green-700 text-sm"},l)),s&&n.createElement("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-md"},n.createElement("p",{className:"text-red-700 text-sm"},s)),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},n.createElement("div",{className:"bg-white p-4 rounded shadow text-center"},n.createElement("div",{className:"text-gray-500 text-sm"},"Total Citas"),n.createElement("div",{className:"text-2xl font-bold"},v.total)),n.createElement("div",{className:"bg-white p-4 rounded shadow text-center"},n.createElement("div",{className:"text-gray-500 text-sm"},"Próximas"),n.createElement("div",{className:"text-2xl font-bold"},v.upcoming)),n.createElement("div",{className:"bg-white p-4 rounded shadow text-center"},n.createElement("div",{className:"text-gray-500 text-sm"},"Pasadas"),n.createElement("div",{className:"text-2xl font-bold"},v.past))),n.createElement("div",{className:"bg-white rounded shadow p-4"},n.createElement(xU,{localizer:DY,events:p,startAccessor:"start",endAccessor:"end",style:{height:500},onSelectEvent:N=>d(N.resource),messages:{next:"Sig",previous:"Ant",today:"Hoy",month:"Mes",week:"Semana",day:"Día",agenda:"Agenda"}})),c&&!u&&n.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40"},n.createElement("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md relative"},n.createElement("button",{className:"absolute top-2 right-2 text-gray-500",onClick:()=>d(null)},"×"),n.createElement("h2",{className:"text-xl font-bold mb-4"},"Detalle de la Cita"),n.createElement("div",{className:"mb-2"},n.createElement("b",null,"Cliente:")," ",c.client.user.name," (",c.client.user.email,")"),n.createElement("div",{className:"mb-2"},n.createElement("b",null,"Abogado:")," ",c.lawyer.name," (",c.lawyer.email,")"),n.createElement("div",{className:"mb-2"},n.createElement("b",null,"Fecha y hora:")," ",se(c.date).format("DD/MM/YYYY HH:mm")),n.createElement("div",{className:"mb-2"},n.createElement("b",null,"Lugar:")," ",c.location),c.notes&&n.createElement("div",{className:"mb-2"},n.createElement("b",null,"Notas:")," ",c.notes),n.createElement("div",{className:"flex justify-end space-x-2 mt-4"},n.createElement("button",{className:"px-4 py-2 bg-orange-600 text-white rounded hover:bg-orange-700",onClick:()=>h(c)},"Reprogramar"),n.createElement("button",{className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",onClick:()=>d(null)},"Cerrar")))),u&&c&&n.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40"},n.createElement("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md relative"},n.createElement("button",{className:"absolute top-2 right-2 text-gray-500",onClick:()=>{m(!1),d(null)}},"×"),n.createElement("h2",{className:"text-xl font-bold mb-4"},"Reprogramar Cita"),n.createElement("p",{className:"text-sm text-gray-600 mb-4"},"Cliente: ",n.createElement("strong",null,c.client.user.name)),n.createElement("form",{onSubmit:E,className:"space-y-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Nueva fecha y hora"),n.createElement("input",{type:"datetime-local",name:"date",value:f.date,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Ubicación"),n.createElement("input",{type:"text",name:"location",value:f.location,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Oficina, online, etc."})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Notas adicionales (opcional)"),n.createElement("textarea",{name:"notes",value:f.notes,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Motivo del cambio, instrucciones especiales, etc."})),n.createElement("div",{className:"flex justify-end space-x-2 pt-4"},n.createElement("button",{type:"button",className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",onClick:()=>{m(!1),d(null)},disabled:b},"Cancelar"),n.createElement("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",disabled:b},b?"Reprogramando...":"Reprogramar Cita"))))),r&&n.createElement("div",{className:"text-center py-8"},"Cargando...")))},TY=()=>{var X,j;const[e,t]=g.useState([]),[r,a]=g.useState([]),[s,o]=g.useState(!0),[l,i]=g.useState(null),[c,d]=g.useState(""),[u,m]=g.useState("todos"),[f,x]=g.useState(null),[b,y]=g.useState(null),[v,p]=g.useState(!1),[h,E]=g.useState(!1),[w,N]=g.useState(null),{user:S}=Te(),[C,k]=g.useState("asc");g.useEffect(()=>{(async()=>{try{o(!0);const H=localStorage.getItem("token"),[G,ue]=await Promise.all([J.get("/users/clients/my"),J.get("/users/clients/stats")]);t(G.data),i(ue.data),x(null)}catch(H){console.error("Error fetching clients:",H),x("Error al cargar los clientes")}finally{o(!1)}})()},[]),g.useEffect(()=>{let B=e;c&&(B=B.filter(H=>{var G;return H.user.name.toLowerCase().includes(c.toLowerCase())||H.user.email.toLowerCase().includes(c.toLowerCase())||H.dni.toLowerCase().includes(c.toLowerCase())||((G=H.phone)==null?void 0:G.toLowerCase().includes(c.toLowerCase()))})),u==="activos"?B=B.filter(H=>{var G;return((G=H._count)==null?void 0:G.expedientes)&&H._count.expedientes>0}):u==="inactivos"&&(B=B.filter(H=>{var G;return!((G=H._count)!=null&&G.expedientes)||H._count.expedientes===0})),a(B)},[e,c,u]),g.useEffect(()=>()=>{w&&clearTimeout(w)},[w]);function D(B){if(!B)return"";const H=B.trim().split(" ");return H.length>1?H[1].toLowerCase():""}const O=g.useMemo(()=>[...r].sort((H,G)=>{const ue=D(H.user.name),W=D(G.user.name);return ue<W?C==="asc"?-1:1:ue>W?C==="asc"?1:-1:0}),[r,C]),A=B=>{y(B),p(!0)},$=()=>{y(null),p(!1)},P=B=>{var G;return((G=B._count)==null?void 0:G.expedientes)&&B._count.expedientes>0?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"},I=B=>{var G;return((G=B._count)==null?void 0:G.expedientes)&&B._count.expedientes>0?"Activo":"Inactivo"},L=()=>{const B=r.map(me=>{var ae,xe;return{Nombre:me.user.name,Email:me.user.email,DNI:me.dni,Teléfono:me.phone||"N/A",Dirección:me.address||"N/A",Estado:I(me),Expedientes:((ae=me._count)==null?void 0:ae.expedientes)||0,Citas:((xe=me._count)==null?void 0:xe.appointments)||0}}),H=[Object.keys(B[0]).join(","),...B.map(me=>Object.values(me).map(ae=>`"${ae}"`).join(","))].join(`
`),G=new Blob([H],{type:"text/csv;charset=utf-8;"}),ue=document.createElement("a"),W=URL.createObjectURL(G);ue.setAttribute("href",W),ue.setAttribute("download",`clientes_${new Date().toISOString().split("T")[0]}.csv`),ue.style.visibility="hidden",document.body.appendChild(ue),ue.click(),document.body.removeChild(ue)},F=B=>{const H=encodeURIComponent("Consulta Legal - Despacho"),G=encodeURIComponent(`Estimado/a ${B.user.name},

Esperamos que se encuentre bien.

Saludos cordiales,
Su equipo legal`);window.open(`mailto:${B.user.email}?subject=${H}&body=${G}`)},T=B=>{B.phone&&window.open(`tel:${B.phone}`)},M=()=>{E(!0),setTimeout(()=>{E(!1)},500)},V=()=>{d(""),m("todos"),E(!1)},K=B=>{B.key==="Enter"&&M()},z=B=>{m(B.target.value),E(!0),setTimeout(()=>{E(!1)},300)},U=B=>{const H=B.target.value;if(d(H),w&&clearTimeout(w),H.trim()){E(!0);const G=setTimeout(()=>{E(!1)},500);N(G)}else E(!1)},Y=()=>{k(B=>B==="asc"?"desc":"asc")};return s?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})):f?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-red-600 text-xl mb-4"},"Error"),n.createElement("div",{className:"text-gray-600"},f),n.createElement("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},"Reintentar"))):n.createElement("div",{className:"py-6"},n.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"flex justify-between items-center"},n.createElement("div",null,n.createElement("h1",{className:"text-3xl font-bold text-gray-900"},"Mis Clientes"),n.createElement("p",{className:"mt-2 text-gray-600"},"Gestiona y da seguimiento a todos tus clientes")),n.createElement("div",{className:"flex space-x-3"},n.createElement("button",{onClick:L,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2"},"Exportar Datos"),n.createElement(Ne,{to:"/lawyer/cases/new",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"},"Nuevo Cliente")))),l&&n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-6 mb-6"},n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-blue-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Total Clientes"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},l.total)))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-green-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Activos"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},l.active)))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-gray-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L18.364 5.636M5.636 18.364l12.728-12.728"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Inactivos"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},l.inactive)))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-yellow-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Total Expedientes"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},l.totalCases)))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-purple-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Total Citas"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},l.totalAppointments)))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-indigo-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Promedio Expedientes"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},l.averageCasesPerClient))))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow mb-6"},n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Buscar"),n.createElement("input",{type:"text",placeholder:"Buscar por nombre, email, DNI o teléfono...",value:c,onChange:U,onKeyDown:K,className:`w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${h&&c?"bg-blue-50 border-blue-300":""}`}),h&&c&&n.createElement("div",{className:"mt-1 text-xs text-blue-600 flex items-center"},n.createElement("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-blue-600 mr-1"}),"Buscando...")),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Estado"),n.createElement("select",{value:u,onChange:z,"aria-label":"Filtrar por estado",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},n.createElement("option",{value:"todos"},"Todos los estados"),n.createElement("option",{value:"activos"},"Solo activos"),n.createElement("option",{value:"inactivos"},"Solo inactivos"))),n.createElement("div",{className:"flex items-end"},n.createElement("button",{onClick:M,disabled:h,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"},h?n.createElement("div",{className:"flex items-center justify-center"},n.createElement("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Buscando..."):"🔍 Buscar")),n.createElement("div",{className:"flex items-end"},n.createElement("button",{onClick:V,className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"},"🗑️ Limpiar Filtros"))),(c||u!=="todos")&&n.createElement("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md"},n.createElement("div",{className:"flex items-center justify-between"},n.createElement("div",{className:"text-sm text-blue-800"},n.createElement("span",{className:"font-medium"},"Resultados de búsqueda:"),c&&n.createElement("span",{className:"ml-2"},'"',c,'"',u!=="todos"&&` + ${u}`),!c&&u!=="todos"&&n.createElement("span",{className:"ml-2"},"Estado: ",u)),n.createElement("div",{className:"text-sm text-blue-600"},r.length," de ",e.length," clientes encontrados")))),n.createElement("div",{className:"bg-white shadow rounded-lg overflow-hidden"},n.createElement("div",{className:"overflow-x-auto"},n.createElement("table",{className:"min-w-full divide-y divide-gray-200"},n.createElement("thead",{className:"bg-gray-50"},n.createElement("tr",null,n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:Y},"Cliente",n.createElement("span",{className:"ml-1"},C==="asc"?"▲":"▼")),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Contacto"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Estado"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Expedientes"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Citas"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Acciones"))),n.createElement("tbody",{className:"bg-white divide-y divide-gray-200"},O.map(B=>{var H,G;return n.createElement("tr",{key:B.id,className:"hover:bg-gray-50"},n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("div",null,n.createElement("div",{className:"text-sm font-medium text-gray-900"},B.user.name),n.createElement("div",{className:"text-sm text-gray-500"},"DNI: ",B.dni),B.address&&n.createElement("div",{className:"text-sm text-gray-500"},B.address))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("div",null,n.createElement("div",{className:"text-sm text-gray-900"},B.user.email),B.phone&&n.createElement("div",{className:"text-sm text-gray-500"},B.phone))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${P(B)}`},I(B))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},((H=B._count)==null?void 0:H.expedientes)||0),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},((G=B._count)==null?void 0:G.appointments)||0),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium"},n.createElement("div",{className:"flex flex-col space-y-1"},n.createElement("div",{className:"flex space-x-2"},n.createElement("button",{onClick:()=>A(B),className:"text-blue-600 hover:text-blue-900 text-xs"},"Ver Detalles"),n.createElement(Ne,{to:`/lawyer/cases/new?clientId=${B.id}`,className:"text-green-600 hover:text-green-900 text-xs"},"Nuevo Expediente")),n.createElement("div",{className:"flex space-x-2"},B.user.email&&n.createElement("button",{onClick:()=>F(B),className:"text-purple-600 hover:text-purple-900 text-xs",title:"Enviar email"},"📧 Email"),B.phone&&n.createElement("button",{onClick:()=>T(B),className:"text-orange-600 hover:text-orange-900 text-xs",title:"Llamar"},"📞 Llamar"),n.createElement(Ne,{to:`/lawyer/appointments?clientId=${B.id}`,className:"text-indigo-600 hover:text-indigo-900 text-xs"},"📅 Cita")))))}))))),r.length===0&&n.createElement("div",{className:"text-center py-12"},n.createElement("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})),n.createElement("h3",{className:"mt-2 text-sm font-medium text-gray-900"},"No se encontraron clientes"),n.createElement("p",{className:"mt-1 text-sm text-gray-500"},"Intenta ajustar los filtros o agregar nuevos clientes."))),v&&b&&n.createElement("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},n.createElement("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},n.createElement("div",{className:"mt-3"},n.createElement("div",{className:"flex justify-between items-center mb-4"},n.createElement("h3",{className:"text-lg font-medium text-gray-900"},"Detalles del Cliente"),n.createElement("button",{onClick:$,className:"text-gray-400 hover:text-gray-600",title:"Cerrar"},n.createElement("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})))),n.createElement("div",{className:"space-y-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Nombre"),n.createElement("p",{className:"text-sm text-gray-900"},b.user.name)),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Email"),n.createElement("p",{className:"text-sm text-gray-900"},b.user.email)),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700"},"DNI"),n.createElement("p",{className:"text-sm text-gray-900"},b.dni)),b.phone&&n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Teléfono"),n.createElement("p",{className:"text-sm text-gray-900"},b.phone)),b.address&&n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Dirección"),n.createElement("p",{className:"text-sm text-gray-900"},b.address)),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Estado"),n.createElement("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${P(b)}`},I(b))),n.createElement("div",{className:"grid grid-cols-2 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Expedientes"),n.createElement("p",{className:"text-sm text-gray-900"},((X=b._count)==null?void 0:X.expedientes)||0)),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Citas"),n.createElement("p",{className:"text-sm text-gray-900"},((j=b._count)==null?void 0:j.appointments)||0)))),n.createElement("div",{className:"flex justify-end space-x-3 mt-6"},n.createElement("button",{onClick:$,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"},"Cerrar"),b.user.email&&n.createElement("button",{onClick:()=>F(b),className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2"},"Enviar Email"),b.phone&&n.createElement("button",{onClick:()=>T(b),className:"px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2"},"Llamar"),n.createElement(Ne,{to:`/lawyer/cases/new?clientId=${b.id}`,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"},"Nuevo Expediente"))))))},_Y=()=>{var Be;const[e,t]=g.useState([]),[r,a]=g.useState([]),[s,o]=g.useState(!0),[l,i]=g.useState(null),[c,d]=g.useState(""),[u,m]=g.useState("todos"),[f,x]=g.useState("todos"),[b,y]=g.useState(null),[v,p]=g.useState(null),[h,E]=g.useState(!1),[w,N]=g.useState(!1),[S,C]=g.useState(!1),[k,D]=g.useState(null),[O,A]=g.useState([]),[$,P]=g.useState([]),{user:I}=Te(),[L,F]=g.useState({title:"",description:"",dueDate:"",priority:"MEDIA",expedienteId:"",clientId:"",assignedTo:""});g.useEffect(()=>{(async()=>{try{o(!0);const de=localStorage.getItem("token"),[ke,Ve,we,Pe]=await Promise.all([ye.get("/tasks",{headers:{Authorization:`Bearer ${de}`}}),ye.get("/tasks/stats",{headers:{Authorization:`Bearer ${de}`}}),ye.get("/cases",{headers:{Authorization:`Bearer ${de}`}}),ye.get("/users/clients",{headers:{Authorization:`Bearer ${de}`}})]);t(ke.data),i(Ve.data),A(we.data),P(Pe.data),y(null)}catch(de){console.error("Error fetching data:",de),y("Error al cargar los datos")}finally{o(!1)}})()},[]),g.useEffect(()=>{let Q=e;c&&(Q=Q.filter(de=>{var ke,Ve,we;return de.title.toLowerCase().includes(c.toLowerCase())||((ke=de.description)==null?void 0:ke.toLowerCase().includes(c.toLowerCase()))||((Ve=de.expediente)==null?void 0:Ve.title.toLowerCase().includes(c.toLowerCase()))||((we=de.client)==null?void 0:we.user.name.toLowerCase().includes(c.toLowerCase()))})),u!=="todos"&&(Q=Q.filter(de=>de.status===u)),f!=="todos"&&(Q=Q.filter(de=>de.priority===f)),a(Q)},[e,c,u,f]),g.useEffect(()=>()=>{k&&clearTimeout(k)},[k]);const T=Q=>{p(Q),E(!0)},M=()=>{p(null),E(!1)},V=()=>{N(!0),y(null)},K=()=>{N(!1),F({title:"",description:"",dueDate:"",priority:"MEDIA",expedienteId:"",clientId:"",assignedTo:""}),y(null)},z=async()=>{var Q,de;if(!L.title.trim()){y("El título es obligatorio");return}try{const ke=localStorage.getItem("token"),Ve={title:L.title,description:L.description||void 0,dueDate:L.dueDate||void 0,priority:L.priority,expedienteId:L.expedienteId||void 0,clientId:L.clientId||void 0,assignedTo:L.assignedTo||void 0},we=await ye.post("/tasks",Ve,{headers:{Authorization:`Bearer ${ke}`}});t(Pe=>[we.data,...Pe]),K()}catch(ke){console.error("Error creating task:",ke),y(((de=(Q=ke.response)==null?void 0:Q.data)==null?void 0:de.message)||"Error al crear la tarea")}},U=async(Q,de)=>{try{const ke=localStorage.getItem("token");await ye.patch(`/tasks/${Q}/status`,{status:de},{headers:{Authorization:`Bearer ${ke}`}}),t(Ve=>Ve.map(we=>we.id===Q?{...we,status:de}:we))}catch(ke){console.error("Error updating task status:",ke),y("Error al actualizar el estado de la tarea")}},Y=async Q=>{if(confirm("¿Estás seguro de que quieres eliminar esta tarea?"))try{const de=localStorage.getItem("token");await ye.delete(`/tasks/${Q}`,{headers:{Authorization:`Bearer ${de}`}}),t(ke=>ke.filter(Ve=>Ve.id!==Q))}catch(de){console.error("Error deleting task:",de),y("Error al eliminar la tarea")}},X=Q=>{switch(Q){case"URGENTE":return"bg-red-100 text-red-800";case"ALTA":return"bg-orange-100 text-orange-800";case"MEDIA":return"bg-yellow-100 text-yellow-800";case"BAJA":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},j=Q=>{switch(Q){case"PENDIENTE":return"bg-yellow-100 text-yellow-800";case"EN_PROGRESO":return"bg-blue-100 text-blue-800";case"COMPLETADA":return"bg-green-100 text-green-800";case"CANCELADA":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},B=Q=>{switch(Q){case"URGENTE":return"Urgente";case"ALTA":return"Alta";case"MEDIA":return"Media";case"BAJA":return"Baja";default:return Q}},H=Q=>{switch(Q){case"PENDIENTE":return"Pendiente";case"EN_PROGRESO":return"En Progreso";case"COMPLETADA":return"Completada";case"CANCELADA":return"Cancelada";default:return Q}},G=Q=>new Date(Q)<new Date,ue=()=>{C(!0),setTimeout(()=>{C(!1)},500)},W=()=>{d(""),m("todos"),x("todos"),C(!1)},me=Q=>{Q.key==="Enter"&&ue()},ae=Q=>{m(Q.target.value),C(!0),setTimeout(()=>{C(!1)},300)},xe=Q=>{x(Q.target.value),C(!0),setTimeout(()=>{C(!1)},300)},Me=Q=>{const de=Q.target.value;if(d(de),k&&clearTimeout(k),de.trim()){C(!0);const ke=setTimeout(()=>{C(!1)},500);D(ke)}else C(!1)};return s?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})):b?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-red-600 text-xl mb-4"},"Error"),n.createElement("div",{className:"text-gray-600"},b),n.createElement("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},"Reintentar"))):n.createElement("div",{className:"py-6"},n.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"flex justify-between items-center"},n.createElement("div",null,n.createElement("h1",{className:"text-3xl font-bold text-gray-900"},"Tareas Pendientes"),n.createElement("p",{className:"mt-2 text-gray-600"},"Gestiona y da seguimiento a todas tus tareas y recordatorios")),n.createElement("button",{onClick:V,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"},"Nueva Tarea"))),l&&n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-6 mb-6"},n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-blue-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Total Tareas"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},typeof l.total=="number"&&!isNaN(l.total)?l.total:0)))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-yellow-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Pendientes"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},typeof l.pendientes=="number"&&!isNaN(l.pendientes)?l.pendientes:0)))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-blue-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"En Progreso"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},typeof l.enProgreso=="number"&&!isNaN(l.enProgreso)?l.enProgreso:0)))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-green-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Completadas"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},typeof l.completadas=="number"&&!isNaN(l.completadas)?l.completadas:0)))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-gray-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L18.364 5.636M5.636 18.364l12.728-12.728"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Canceladas"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},typeof l.canceladas=="number"&&!isNaN(l.canceladas)?l.canceladas:0)))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-red-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Vencidas"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},typeof l.vencidas=="number"&&!isNaN(l.vencidas)?l.vencidas:0))))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow mb-6"},n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Buscar"),n.createElement("input",{type:"text",placeholder:"Buscar por título, descripción o expediente...",value:c,onChange:Me,onKeyDown:me,className:`w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${S&&c?"bg-blue-50 border-blue-300":""}`}),S&&c&&n.createElement("div",{className:"mt-1 text-xs text-blue-600 flex items-center"},n.createElement("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-blue-600 mr-1"}),"Buscando...")),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Estado"),n.createElement("select",{value:u,onChange:ae,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Filtrar por estado"},n.createElement("option",{value:"todos"},"Todos los estados"),n.createElement("option",{value:"PENDIENTE"},"Pendiente"),n.createElement("option",{value:"EN_PROGRESO"},"En Progreso"),n.createElement("option",{value:"COMPLETADA"},"Completada"),n.createElement("option",{value:"CANCELADA"},"Cancelada"))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Prioridad"),n.createElement("select",{value:f,onChange:xe,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Filtrar por prioridad"},n.createElement("option",{value:"todos"},"Todas las prioridades"),n.createElement("option",{value:"URGENTE"},"Urgente"),n.createElement("option",{value:"ALTA"},"Alta"),n.createElement("option",{value:"MEDIA"},"Media"),n.createElement("option",{value:"BAJA"},"Baja"))),n.createElement("div",{className:"flex items-end"},n.createElement("button",{onClick:ue,disabled:S,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"},S?n.createElement("div",{className:"flex items-center justify-center"},n.createElement("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Buscando..."):"🔍 Buscar")),n.createElement("div",{className:"flex items-end"},n.createElement("button",{onClick:W,className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"},"🗑️ Limpiar"))),(c||u!=="todos"||f!=="todos")&&n.createElement("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md"},n.createElement("div",{className:"flex items-center justify-between"},n.createElement("div",{className:"text-sm text-blue-800"},n.createElement("span",{className:"font-medium"},"Resultados de búsqueda:"),c&&n.createElement("span",{className:"ml-2"},'"',c,'"'),u!=="todos"&&n.createElement("span",{className:"ml-2"},"+ Estado: ",u),f!=="todos"&&n.createElement("span",{className:"ml-2"},"+ Prioridad: ",f)),n.createElement("div",{className:"text-sm text-blue-600"},r.length," de ",e.length," tareas encontradas")))),n.createElement("div",{className:"bg-white shadow rounded-lg overflow-hidden"},n.createElement("div",{className:"overflow-x-auto"},n.createElement("table",{className:"min-w-full divide-y divide-gray-200"},n.createElement("thead",{className:"bg-gray-50"},n.createElement("tr",null,n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Tarea"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Prioridad"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Estado"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Fecha Límite"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Asignado"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Acciones"))),n.createElement("tbody",{className:"bg-white divide-y divide-gray-200"},(Array.isArray(r)?r:[]).map(Q=>{var de;return n.createElement("tr",{key:Q.id,className:`hover:bg-gray-50 ${Q.dueDate&&G(Q.dueDate)&&Q.status!=="COMPLETADA"?"bg-red-50":""}`},n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("div",null,n.createElement("div",{className:"text-sm font-medium text-gray-900"},Q.title),n.createElement("div",{className:"text-sm text-gray-500"},Q.description||"Sin descripción"),Q.expediente&&n.createElement("div",{className:"text-xs text-blue-600"},"📋 ",Q.expediente.title),Q.client&&n.createElement("div",{className:"text-xs text-green-600"},"👤 ",Q.client.user.name))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${X(Q.priority)}`},B(Q.priority))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("select",{value:Q.status,onChange:ke=>U(Q.id,ke.target.value),className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full border ${j(Q.status)}`,"aria-label":`Cambiar estado de tarea: ${Q.title}`},n.createElement("option",{value:"PENDIENTE"},"Pendiente"),n.createElement("option",{value:"EN_PROGRESO"},"En Progreso"),n.createElement("option",{value:"COMPLETADA"},"Completada"),n.createElement("option",{value:"CANCELADA"},"Cancelada"))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Q.dueDate?n.createElement("div",null,n.createElement("div",{className:Q.dueDate&&G(Q.dueDate)&&Q.status!=="COMPLETADA"?"text-red-600 font-medium":""},new Date(Q.dueDate).toLocaleDateString()),Q.dueDate&&G(Q.dueDate)&&Q.status!=="COMPLETADA"&&n.createElement("div",{className:"text-xs text-red-500"},"⚠️ Vencida")):"Sin fecha límite"),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},((de=Q.assignedToUser)==null?void 0:de.name)||"Sin asignar"),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium"},n.createElement("div",{className:"flex space-x-2"},n.createElement("button",{onClick:()=>T(Q),className:"text-blue-600 hover:text-blue-900"},"Ver"),n.createElement("button",{onClick:()=>Y(Q.id),className:"text-red-600 hover:text-red-900"},"Eliminar"))))}))))),r.length===0&&n.createElement("div",{className:"text-center py-12"},n.createElement("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})),n.createElement("h3",{className:"mt-2 text-sm font-medium text-gray-900"},"No se encontraron tareas"),n.createElement("p",{className:"mt-1 text-sm text-gray-500"},"Intenta ajustar los filtros o crear una nueva tarea."))),h&&v&&n.createElement("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},n.createElement("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},n.createElement("div",{className:"mt-3"},n.createElement("div",{className:"flex justify-between items-center mb-4"},n.createElement("h3",{className:"text-lg font-medium text-gray-900"},"Detalles de la Tarea"),n.createElement("button",{onClick:M,className:"text-gray-400 hover:text-gray-600",title:"Cerrar modal"},n.createElement("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})))),n.createElement("div",{className:"space-y-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Título"),n.createElement("p",{className:"text-sm text-gray-900"},v.title)),v.description&&n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Descripción"),n.createElement("p",{className:"text-sm text-gray-900"},v.description)),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Prioridad"),n.createElement("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${X(v.priority)}`},B(v.priority))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Estado"),n.createElement("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${j(v.status)}`},H(v.status))),v.dueDate&&n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Fecha Límite"),n.createElement("p",{className:`text-sm ${G(v.dueDate)&&v.status!=="COMPLETADA"?"text-red-600 font-medium":"text-gray-900"}`},new Date(v.dueDate).toLocaleDateString(),G(v.dueDate)&&v.status!=="COMPLETADA"&&n.createElement("span",{className:"ml-2 text-red-500"},"⚠️ Vencida"))),v.expediente&&n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Expediente"),n.createElement("p",{className:"text-sm text-blue-600"},v.expediente.title),n.createElement("p",{className:"text-xs text-gray-500"},"Cliente: ",v.expediente.client.user.name)),v.client&&n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Cliente"),n.createElement("p",{className:"text-sm text-gray-900"},v.client.user.name),n.createElement("p",{className:"text-xs text-gray-500"},v.client.user.email)),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Asignado a"),n.createElement("p",{className:"text-sm text-gray-900"},((Be=v.assignedToUser)==null?void 0:Be.name)||"Sin asignar")),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Creado por"),n.createElement("p",{className:"text-sm text-gray-900"},v.createdByUser.name)),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Fecha de creación"),n.createElement("p",{className:"text-sm text-gray-900"},new Date(v.createdAt).toLocaleDateString()))),n.createElement("div",{className:"flex justify-end mt-6"},n.createElement("button",{onClick:M,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700"},"Cerrar"))))),w&&n.createElement("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},n.createElement("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},n.createElement("div",{className:"mt-3"},n.createElement("div",{className:"flex justify-between items-center mb-4"},n.createElement("h3",{className:"text-lg font-medium text-gray-900"},"Nueva Tarea"),n.createElement("button",{onClick:K,className:"text-gray-400 hover:text-gray-600",title:"Cerrar modal"},n.createElement("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})))),b&&n.createElement("div",{className:"mb-4 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md p-2"},b),n.createElement("div",{className:"space-y-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Título *"),n.createElement("input",{type:"text",value:L.title,onChange:Q=>F(de=>({...de,title:Q.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Título de la tarea"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Descripción"),n.createElement("textarea",{value:L.description,onChange:Q=>F(de=>({...de,description:Q.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Descripción de la tarea"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Fecha Límite"),n.createElement("input",{type:"datetime-local",value:L.dueDate,onChange:Q=>F(de=>({...de,dueDate:Q.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Fecha límite de la tarea"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Prioridad"),n.createElement("select",{value:L.priority,onChange:Q=>F(de=>({...de,priority:Q.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Prioridad de la tarea"},n.createElement("option",{value:"BAJA"},"Baja"),n.createElement("option",{value:"MEDIA"},"Media"),n.createElement("option",{value:"ALTA"},"Alta"),n.createElement("option",{value:"URGENTE"},"Urgente"))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Expediente (opcional)"),n.createElement("select",{value:L.expedienteId,onChange:Q=>F(de=>({...de,expedienteId:Q.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Seleccionar expediente"},n.createElement("option",{value:""},"Seleccionar expediente"),O.map(Q=>n.createElement("option",{key:Q.id,value:Q.id},Q.title," - ",Q.client.user.name)))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Cliente (opcional)"),n.createElement("select",{value:L.clientId,onChange:Q=>F(de=>({...de,clientId:Q.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Seleccionar cliente"},n.createElement("option",{value:""},"Seleccionar cliente"),$.map(Q=>n.createElement("option",{key:Q.id,value:Q.id},Q.user.name," - ",Q.user.email))))),n.createElement("div",{className:"flex justify-end space-x-3 mt-6"},n.createElement("button",{onClick:K,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"},"Cancelar"),n.createElement("button",{onClick:z,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"},"Crear Tarea"))))))},OY=()=>{var d,u,m,f,x,b,y,v;const[e,t]=g.useState(null),[r,a]=g.useState(!0),[s,o]=g.useState(null),{user:l}=Te();g.useEffect(()=>{(async()=>{try{a(!0);const h=localStorage.getItem("token"),E=await ye.get("/lawyer/reports",{headers:{Authorization:`Bearer ${h}`}});t(E.data),o(null)}catch(h){console.error("Error fetching reports:",h),o("Error al cargar los reportes")}finally{a(!1)}})()},[]);const i=p=>{switch(p){case"PENDIENTE":return"bg-yellow-100 text-yellow-800";case"EN_PROGRESO":return"bg-blue-100 text-blue-800";case"COMPLETADA":return"bg-green-100 text-green-800";case"CANCELADA":return"bg-gray-100 text-gray-800";case"ABIERTO":return"bg-green-100 text-green-800";case"EN_PROCESO":return"bg-blue-100 text-blue-800";case"CERRADO":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},c=p=>{switch(p){case"PENDIENTE":return"Pendiente";case"EN_PROGRESO":return"En Progreso";case"COMPLETADA":return"Completada";case"CANCELADA":return"Cancelada";case"ABIERTO":return"Abierto";case"EN_PROCESO":return"En Proceso";case"CERRADO":return"Cerrado";default:return p}};return r?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})):s?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-red-600 text-xl mb-4"},"Error"),n.createElement("div",{className:"text-gray-600"},s),n.createElement("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},"Reintentar"))):e?n.createElement("div",{className:"py-6"},n.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"mb-8"},n.createElement("h1",{className:"text-3xl font-bold text-gray-900"},"Mis Reportes"),n.createElement("p",{className:"mt-2 text-gray-600"},"Estadísticas y reportes personales de tu actividad")),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-blue-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Total Tareas"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},((d=e.tasks)==null?void 0:d.total)??0)))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-green-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Total Casos"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},((u=e.cases)==null?void 0:u.total)??0)))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-red-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Tareas Vencidas"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},((m=e.tasks)==null?void 0:m.overdue)??0)))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-purple-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Próximas Citas"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},((f=e.appointments)==null?void 0:f.upcoming)??0))))),n.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8"},n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-4"},"Estado de Tareas"),n.createElement("div",{className:"space-y-3"},Object.entries(((x=e.tasks)==null?void 0:x.byStatus)??{}).map(([p,h])=>n.createElement("div",{key:p,className:"flex items-center justify-between"},n.createElement("div",{className:"flex items-center"},n.createElement("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${i(p)}`},c(p))),n.createElement("span",{className:"text-sm font-medium text-gray-900"},h)))),n.createElement("div",{className:"mt-6"},n.createElement("div",{className:"flex items-end space-x-2 h-32"},Object.entries(((b=e.tasks)==null?void 0:b.byStatus)??{}).map(([p,h])=>{var N;const E=Math.max(...Object.values(((N=e.tasks)==null?void 0:N.byStatus)??{})),w=E>0?h/E*100:0;return n.createElement("div",{key:p,className:"flex-1 flex flex-col items-center"},n.createElement("div",{className:"w-full bg-blue-500 rounded-t",style:{height:`${w}%`}}),n.createElement("span",{className:"text-xs text-gray-500 mt-1"},h))})))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-4"},"Estado de Casos"),n.createElement("div",{className:"space-y-3"},Object.entries(((y=e.cases)==null?void 0:y.byStatus)??{}).map(([p,h])=>n.createElement("div",{key:p,className:"flex items-center justify-between"},n.createElement("div",{className:"flex items-center"},n.createElement("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${i(p)}`},c(p))),n.createElement("span",{className:"text-sm font-medium text-gray-900"},h)))),n.createElement("div",{className:"mt-6"},n.createElement("div",{className:"flex justify-center"},n.createElement("div",{className:"relative w-32 h-32"},(()=>{var w,N;const p=Object.values(((w=e.cases)==null?void 0:w.byStatus)??{}).reduce((S,C)=>S+C,0);let h=0;const E=["#10B981","#3B82F6","#6B7280"];return Object.entries(((N=e.cases)==null?void 0:N.byStatus)??{}).map(([S,C],k)=>{if(p===0)return null;const O=C/p*100/100*360,A=n.createElement("div",{key:S,className:"absolute inset-0 rounded-full",style:{background:`conic-gradient(from ${h}deg, ${E[k]} 0deg, ${E[k]} ${O}deg, transparent ${O}deg)`}});return h+=O,A})})())),n.createElement("div",{className:"mt-4 flex justify-center space-x-4"},Object.entries(((v=e.cases)==null?void 0:v.byStatus)??{}).map(([p,h],E)=>n.createElement("div",{key:p,className:"flex items-center"},n.createElement("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:["#10B981","#3B82F6","#6B7280"][E]}}),n.createElement("span",{className:"text-xs text-gray-600"},c(p)))))))))):n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-gray-600"},"No hay datos disponibles")))},RY=()=>{var i,c,d;const[e,t]=g.useState(null),[r,a]=g.useState(!0),[s,o]=g.useState(null),{user:l}=Te();return g.useEffect(()=>{(async()=>{var m,f;try{a(!0);const x=await J.get("/admin/dashboard");t(x.data),o(null)}catch(x){console.error("Error fetching dashboard stats:",x),o(((f=(m=x.response)==null?void 0:m.data)==null?void 0:f.message)||"Error al cargar las estadísticas")}finally{a(!1)}})()},[]),r?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})):s?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-red-600 text-xl mb-4"},"Error"),n.createElement("div",{className:"text-gray-600"},s),n.createElement("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},"Reintentar"))):n.createElement("div",{className:"py-6"},n.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"flex justify-between items-center"},n.createElement("div",null,n.createElement("h1",{className:"text-3xl font-bold text-gray-900"},"Bienvenido, ",l==null?void 0:l.name,(l==null?void 0:l.email)&&` (${l.email})`)),n.createElement("div",{className:"flex items-center gap-4"},n.createElement("div",{className:"text-sm text-gray-500"},"Última actualización: ",new Date().toLocaleString())))),e&&n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-blue-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Total Usuarios"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},e.totalUsers||0)))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-green-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Expedientes"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},e.totalCases||0)))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-purple-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Citas"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},e.totalAppointments||0)))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-orange-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Tareas"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},e.totalTasks||0))))),e&&n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center justify-between mb-4"},n.createElement("h3",{className:"text-lg font-medium text-gray-900"},"Usuarios por Rol")),n.createElement("div",{className:"space-y-3"},n.createElement("div",{className:"flex justify-between"},n.createElement("span",{className:"text-sm text-gray-600"},"Abogados"),n.createElement("span",{className:"text-sm font-medium text-gray-900"},e.totalLawyers||0)),n.createElement("div",{className:"flex justify-between"},n.createElement("span",{className:"text-sm text-gray-600"},"Clientes"),n.createElement("span",{className:"text-sm font-medium text-gray-900"},e.totalClients||0)),n.createElement("div",{className:"flex justify-between"},n.createElement("span",{className:"text-sm text-gray-600"},"Documentos"),n.createElement("span",{className:"text-sm font-medium text-gray-900"},e.totalDocuments||0)))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center justify-between mb-4"},n.createElement("h3",{className:"text-lg font-medium text-gray-900"},"Tareas Vencidas"),n.createElement("span",{className:"text-sm text-red-600 font-medium"},((i=e.overdueTasks)==null?void 0:i.length)||0)),n.createElement("div",{className:"space-y-2"},(c=e.overdueTasks)==null?void 0:c.slice(0,3).map(u=>{var m;return n.createElement("div",{key:u.id,className:"text-sm"},n.createElement("div",{className:"font-medium text-gray-900"},u.title),n.createElement("div",{className:"text-gray-500"},"Asignado a: ",((m=u.assignedToUser)==null?void 0:m.name)||"Sin asignar"))}),(!e.overdueTasks||e.overdueTasks.length===0)&&n.createElement("div",{className:"text-sm text-gray-500"},"No hay tareas vencidas"))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center justify-between mb-4"},n.createElement("h3",{className:"text-lg font-medium text-gray-900"},"Citas Recientes")),n.createElement("div",{className:"space-y-2"},(d=e.recentAppointments)==null?void 0:d.slice(0,3).map(u=>{var m,f,x;return n.createElement("div",{key:u.id,className:"text-sm"},n.createElement("div",{className:"font-medium text-gray-900"},u.fullName||((f=(m=u.client)==null?void 0:m.user)==null?void 0:f.name)||"Cliente"," - ",((x=u.lawyer)==null?void 0:x.name)||"Sin asignar"),n.createElement("div",{className:"text-gray-500"},new Date(u.date).toLocaleDateString(),u.type==="VISITOR"&&n.createElement("span",{className:"ml-2 inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-purple-100 text-purple-800"},"Visitante")))}),(!e.recentAppointments||e.recentAppointments.length===0)&&n.createElement("div",{className:"text-sm text-gray-500"},"No hay citas recientes")))),n.createElement("div",{className:"bg-white rounded-lg shadow"},n.createElement("div",{className:"px-6 py-4 border-b border-gray-200"},n.createElement("h3",{className:"text-lg font-medium text-gray-900"},"Acciones Rápidas")),n.createElement("div",{className:"p-6"},n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},n.createElement(Ne,{to:"/admin/users",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-blue-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})))),n.createElement("div",{className:"ml-3"},n.createElement("p",{className:"text-sm font-medium text-gray-900"},"Gestionar Usuarios"),n.createElement("p",{className:"text-xs text-gray-500"},"Ver y editar usuarios"))),n.createElement(Ne,{to:"/admin/cases",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-green-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})))),n.createElement("div",{className:"ml-3"},n.createElement("p",{className:"text-sm font-medium text-gray-900"},"Gestionar Expedientes"),n.createElement("p",{className:"text-xs text-gray-500"},"Ver y editar casos"))),n.createElement(Ne,{to:"/admin/appointments",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-purple-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})))),n.createElement("div",{className:"ml-3"},n.createElement("p",{className:"text-sm font-medium text-gray-900"},"Gestionar Citas"),n.createElement("p",{className:"text-xs text-gray-500"},"Ver y editar citas"))),n.createElement(Ne,{to:"/admin/tasks",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-orange-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})))),n.createElement("div",{className:"ml-3"},n.createElement("p",{className:"text-sm font-medium text-gray-900"},"Gestionar Tareas"),n.createElement("p",{className:"text-xs text-gray-500"},"Ver y editar tareas"))),n.createElement(Ne,{to:"/admin/documents",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-indigo-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})))),n.createElement("div",{className:"ml-3"},n.createElement("p",{className:"text-sm font-medium text-gray-900"},"Gestionar Documentos"),n.createElement("p",{className:"text-xs text-gray-500"},"Ver y gestionar archivos"))),n.createElement(Ne,{to:"/admin/invoices",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-emerald-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})))),n.createElement("div",{className:"ml-3"},n.createElement("p",{className:"text-sm font-medium text-gray-900"},"Gestionar Facturas"),n.createElement("p",{className:"text-xs text-gray-500"},"Ver y gestionar facturas"))),n.createElement(Ne,{to:"/admin/reports",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-red-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})))),n.createElement("div",{className:"ml-3"},n.createElement("p",{className:"text-sm font-medium text-gray-900"},"Reportes"),n.createElement("p",{className:"text-xs text-gray-500"},"Ver estadísticas del sistema"))),n.createElement(Ne,{to:"/admin/parametros",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-gray-700 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6 1a9 9 0 11-18 0 9 9 0 0118 0z"})))),n.createElement("div",{className:"ml-3"},n.createElement("p",{className:"text-sm font-medium text-gray-900"},"Configurar Parámetros"),n.createElement("p",{className:"text-xs text-gray-500"},"Gestionar parámetros globales"))),n.createElement(Ne,{to:"/admin/backup",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-pink-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})))),n.createElement("div",{className:"ml-3"},n.createElement("p",{className:"text-sm font-medium text-gray-900"},"Backup y Restauración"),n.createElement("p",{className:"text-xs text-gray-500"},"Gestionar copias de seguridad"))),n.createElement(Ne,{to:"/admin/menu-config",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-yellow-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})))),n.createElement("div",{className:"ml-3"},n.createElement("p",{className:"text-sm font-medium text-gray-900"},"Configurar Menús"),n.createElement("p",{className:"text-xs text-gray-500"},"Gestionar navegación del sitio"))),n.createElement(Ne,{to:"/admin/site-config",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-teal-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})))),n.createElement("div",{className:"ml-3"},n.createElement("p",{className:"text-sm font-medium text-gray-900"},"Configurar Sitio"),n.createElement("p",{className:"text-xs text-gray-500"},"Personalizar apariencia y contenido"))),n.createElement(Ne,{to:"/admin/home-builder",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-purple-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v12a4 4 0 004 4h4a2 2 0 002-2V5z"})))),n.createElement("div",{className:"ml-3"},n.createElement("p",{className:"text-sm font-medium text-gray-900"},"Home Builder"),n.createElement("p",{className:"text-xs text-gray-500"},"Diseñar página principal"))),n.createElement(Ne,{to:"/admin/guided-config",className:"flex items-center p-4 border-2 border-blue-500 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-blue-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})))),n.createElement("div",{className:"ml-3"},n.createElement("p",{className:"text-sm font-medium text-blue-900"},"🎯 Configuración Guiada"),n.createElement("p",{className:"text-xs text-blue-700"},"Configurar sistema paso a paso"))),n.createElement(Ne,{to:"/admin/teleassistance",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-green-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})))),n.createElement("div",{className:"ml-3"},n.createElement("p",{className:"text-sm font-medium text-gray-900"},"🖥️ Teleasistencia"),n.createElement("p",{className:"text-xs text-gray-500"},"Asistencia remota a usuarios"))))))))},MY=()=>{const[e,t]=g.useState(""),[r,a]=g.useState(""),s=()=>{e?(localStorage.setItem("token",e),a("Token establecido correctamente. Recargando página..."),setTimeout(()=>{window.location.reload()},1e3)):a("Por favor, ingresa un token válido")},o=()=>{localStorage.removeItem("token"),a("Token eliminado. Recargando página..."),setTimeout(()=>{window.location.reload()},1e3)},l=localStorage.getItem("token");return n.createElement("div",{className:"fixed top-4 right-4 bg-white p-4 border rounded-lg shadow-lg z-50 max-w-md"},n.createElement("h3",{className:"text-lg font-bold mb-2"},"Debug Auth"),n.createElement("div",{className:"mb-2"},n.createElement("label",{className:"block text-sm font-medium mb-1"},"Token actual:"),n.createElement("div",{className:"text-xs bg-gray-100 p-2 rounded break-all"},l?`${l.substring(0,50)}...`:"No hay token")),n.createElement("div",{className:"mb-2"},n.createElement("label",{className:"block text-sm font-medium mb-1"},"Nuevo token:"),n.createElement("textarea",{value:e,onChange:i=>t(i.target.value),className:"w-full p-2 border rounded text-xs",rows:3,placeholder:"Pega el token aquí..."})),n.createElement("div",{className:"flex gap-2 mb-2"},n.createElement("button",{onClick:s,className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700"},"Establecer Token"),n.createElement("button",{onClick:o,className:"px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700"},"Limpiar Token")),r&&n.createElement("div",{className:"text-sm text-blue-600 bg-blue-50 p-2 rounded"},r))},PY=()=>{const[e,t]=g.useState([]),[r,a]=g.useState([]),[s,o]=g.useState(!0),[l,i]=g.useState(null),[c,d]=g.useState(""),[u,m]=g.useState("todos"),[f,x]=g.useState(null),[b,y]=g.useState(!1),[v,p]=g.useState({name:"",email:"",role:"CLIENTE",dni:"",phone:"",address:""}),[h,E]=g.useState("asc"),{user:w}=Te(),N=async()=>{try{const L=await J.post("/auth/login",{email:"admin@despacho.com",password:"password123"}),{token:F,user:T}=L.data;localStorage.setItem("token",F),console.log("Auto login successful:",T),window.location.reload()}catch(L){console.error("Auto login failed:",L)}};g.useEffect(()=>{S()},[]);const S=async()=>{var L,F,T,M;try{o(!0);const V=localStorage.getItem("token");if(console.log("Fetching users with token:",V?"Token exists":"No token"),console.log("Current user from context:",w),!V){console.error("No token found in localStorage"),i("No hay token de autenticación");return}const K=await J.get("/admin/users");console.log("Users response:",K.data),console.log("Response type:",typeof K.data),console.log("Is array:",Array.isArray(K.data)),Array.isArray(K.data)&&(console.log("Number of users:",K.data.length),K.data.forEach((z,U)=>{console.log(`User ${U}:`,{id:z.id,name:z.name,email:z.email,role:z.role,createdAt:z.createdAt,client:z.client,expedientesAsLawyer:z.expedientesAsLawyer,appointmentsAsLawyer:z.appointmentsAsLawyer,assignedTasks:z.assignedTasks})})),t(K.data),i(null)}catch(V){console.error("Error fetching users:",V),console.error("Error response:",V.response),console.error("Error status:",(L=V.response)==null?void 0:L.status),console.error("Error data:",(F=V.response)==null?void 0:F.data),i(((M=(T=V.response)==null?void 0:T.data)==null?void 0:M.message)||"Error al cargar usuarios")}finally{o(!1)}};g.useEffect(()=>{let L=e;c&&(L=L.filter(F=>{var T;return F.name.toLowerCase().includes(c.toLowerCase())||F.email.toLowerCase().includes(c.toLowerCase())||((T=F.client)==null?void 0:T.dni.toLowerCase().includes(c.toLowerCase()))})),u!=="todos"&&(L=L.filter(F=>F.role===u)),a(L)},[e,c,u]);function C(L){if(!L)return"";const F=L.trim().split(" ");return F.length>1?F[1].toLowerCase():""}const k=g.useMemo(()=>[...r].sort((F,T)=>{const M=C(F.name),V=C(T.name);return M<V?h==="asc"?-1:1:M>V?h==="asc"?1:-1:0}),[r,h]),D=()=>{E(L=>L==="asc"?"desc":"asc")},O=L=>{var F,T,M;x(L),p({name:L.name,email:L.email,role:L.role,dni:((F=L.client)==null?void 0:F.dni)||"",phone:((T=L.client)==null?void 0:T.phone)||"",address:((M=L.client)==null?void 0:M.address)||""}),y(!0)},A=async()=>{var L,F;if(f)try{const T=localStorage.getItem("token"),M={name:v.name,email:v.email,role:v.role,client:v.role==="CLIENTE"?{dni:v.dni,phone:v.phone,address:v.address}:void 0};await J.put(`/admin/users/${f.id}`,M),y(!1),S()}catch(T){console.error("Error updating user:",T),i(((F=(L=T.response)==null?void 0:L.data)==null?void 0:F.message)||"Error al actualizar usuario")}},$=async L=>{var F,T;if(confirm("¿Estás seguro de que quieres eliminar este usuario?"))try{const M=localStorage.getItem("token");await J.delete(`/admin/users/${L}`),S()}catch(M){console.error("Error deleting user:",M),i(((T=(F=M.response)==null?void 0:F.data)==null?void 0:T.message)||"Error al eliminar usuario")}},P=L=>{switch(L){case"ADMIN":return"bg-red-100 text-red-800";case"ABOGADO":return"bg-blue-100 text-blue-800";case"CLIENTE":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},I=L=>{switch(L){case"ADMIN":return"Administrador";case"ABOGADO":return"Abogado";case"CLIENTE":return"Cliente";default:return L}};return s?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})):l?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-red-600 text-xl mb-4"},"Error"),n.createElement("div",{className:"text-gray-600"},l),n.createElement("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},"Reintentar"))):n.createElement("div",{className:"py-6"},n.createElement(MY,null),n.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"flex justify-between items-center"},n.createElement("div",null,n.createElement("h1",{className:"text-3xl font-bold text-gray-900"},"Gestión de Usuarios"),n.createElement("p",{className:"mt-2 text-gray-600"},"Administra todos los usuarios del sistema")),n.createElement("div",null,n.createElement("button",{onClick:N,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700"},"Login Admin (Pruebas)")))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow mb-6"},n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Buscar"),n.createElement("input",{type:"text",placeholder:"Buscar por nombre, email o DNI...",value:c,onChange:L=>d(L.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Rol"),n.createElement("select",{value:u,onChange:L=>m(L.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Filtrar por rol"},n.createElement("option",{value:"todos"},"Todos los roles"),n.createElement("option",{value:"ADMIN"},"Administrador"),n.createElement("option",{value:"ABOGADO"},"Abogado"),n.createElement("option",{value:"CLIENTE"},"Cliente"))),n.createElement("div",{className:"flex items-end"},n.createElement("button",{onClick:()=>{d(""),m("todos")},className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"},"Limpiar Filtros")))),n.createElement("div",{className:"bg-white shadow rounded-lg overflow-hidden"},n.createElement("div",{className:"overflow-x-auto"},n.createElement("table",{className:"min-w-full divide-y divide-gray-200"},n.createElement("thead",{className:"bg-gray-50"},n.createElement("tr",null,n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:D},"Usuario",n.createElement("span",{className:"ml-1"},h==="asc"?"▲":"▼")),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Rol"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Información Adicional"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actividad"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Acciones"))),n.createElement("tbody",{className:"bg-white divide-y divide-gray-200"},k.map(L=>{var F,T,M;return n.createElement("tr",{key:L.id,className:"hover:bg-gray-50"},n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("div",null,n.createElement("div",{className:"text-sm font-medium text-gray-900"},L.name),n.createElement("div",{className:"text-sm text-gray-500"},L.email),n.createElement("div",{className:"text-xs text-gray-400"},"Registrado: ",L.createdAt?new Date(L.createdAt).toLocaleDateString():"Fecha no disponible"))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${P(L.role)}`},I(L.role))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},L.client&&n.createElement("div",null,n.createElement("div",null,"DNI: ",L.client.dni),L.client.phone&&n.createElement("div",{key:L.client.dni+"-phone"},"Tel: ",L.client.phone),L.client.address&&n.createElement("div",{key:L.client.dni+"-address"},"Dir: ",L.client.address))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},n.createElement("div",null,n.createElement("div",null,"Casos: ",((F=L.expedientesAsLawyer)==null?void 0:F.length)||0),n.createElement("div",null,"Citas: ",((T=L.appointmentsAsLawyer)==null?void 0:T.length)||0),n.createElement("div",null,"Tareas: ",((M=L.assignedTasks)==null?void 0:M.length)||0))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium"},n.createElement("div",{className:"flex space-x-2"},n.createElement("button",{onClick:()=>O(L),className:"text-blue-600 hover:text-blue-900",key:L.id+"-edit"},"Editar"),L.id!==(w==null?void 0:w.id)&&n.createElement("button",{onClick:()=>$(L.id),className:"text-red-600 hover:text-red-900",key:L.id+"-delete"},"Eliminar"))))}))))),(!k||k.length===0)&&n.createElement("div",{className:"text-center py-12"},n.createElement("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})),n.createElement("h3",{className:"mt-2 text-sm font-medium text-gray-900"},"No se encontraron usuarios"),n.createElement("p",{className:"mt-1 text-sm text-gray-500"},"Intenta ajustar los filtros de búsqueda."))),b&&f&&n.createElement("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},n.createElement("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},n.createElement("div",{className:"mt-3"},n.createElement("div",{className:"flex justify-between items-center mb-4"},n.createElement("h3",{className:"text-lg font-medium text-gray-900"},"Editar Usuario"),n.createElement("button",{onClick:()=>y(!1),className:"text-gray-400 hover:text-gray-600","aria-label":"Cerrar modal de edición",title:"Cerrar modal de edición"},n.createElement("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})))),l&&n.createElement("div",{className:"mb-4 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md p-2"},l),n.createElement("div",{className:"space-y-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Nombre"),n.createElement("input",{type:"text",value:v.name,onChange:L=>p(F=>({...F,name:L.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ingrese el nombre","aria-label":"Nombre del usuario",title:"Nombre del usuario"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Email"),n.createElement("input",{type:"email",value:v.email,onChange:L=>p(F=>({...F,email:L.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ingrese el email","aria-label":"Email del usuario",title:"Email del usuario"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Rol"),n.createElement("select",{value:v.role,onChange:L=>p(F=>({...F,role:L.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Rol del usuario",title:"Rol del usuario"},n.createElement("option",{value:"CLIENTE"},"Cliente"),n.createElement("option",{value:"ABOGADO"},"Abogado"),n.createElement("option",{value:"ADMIN"},"Administrador"))),v.role==="CLIENTE"&&n.createElement(n.Fragment,null,n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"DNI"),n.createElement("input",{type:"text",value:v.dni,onChange:L=>p(F=>({...F,dni:L.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ingrese el DNI","aria-label":"DNI del cliente",title:"DNI del cliente"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Teléfono"),n.createElement("input",{type:"text",value:v.phone,onChange:L=>p(F=>({...F,phone:L.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ingrese el teléfono","aria-label":"Teléfono del cliente",title:"Teléfono del cliente"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Dirección"),n.createElement("input",{type:"text",value:v.address,onChange:L=>p(F=>({...F,address:L.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ingrese la dirección","aria-label":"Dirección del cliente",title:"Dirección del cliente"})))),n.createElement("div",{className:"flex justify-end space-x-3 mt-6"},n.createElement("button",{onClick:()=>y(!1),className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"},"Cancelar"),n.createElement("button",{onClick:A,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"},"Actualizar"))))))},LY=()=>{const{user:e}=Te(),t=o=>e?o.includes(e.role):!1,r=(e==null?void 0:e.role)==="ADMIN",a=(e==null?void 0:e.role)==="ABOGADO",s=(e==null?void 0:e.role)==="CLIENTE";return{hasPermission:t,isAdmin:r,isLawyer:a,isClient:s,userRole:(e==null?void 0:e.role)||null}},IY=()=>{const[e,t]=g.useState([]),[r,a]=g.useState([]),[s,o]=g.useState(!0),[l,i]=g.useState(null),[c,d]=g.useState(""),[u,m]=g.useState("todos"),[f,x]=g.useState("asc"),{isAdmin:b,userRole:y}=LY();g.useEffect(()=>{v()},[]);const v=async()=>{var S,C;try{o(!0);const k=await J.get("/admin/cases");console.log("Cases response:",k.data),Array.isArray(k.data)&&k.data.forEach((D,O)=>{console.log(`Case ${O}:`,{id:D.id,title:D.title,description:D.description,status:D.status,createdAt:D.createdAt,client:D.client,lawyer:D.lawyer,documents:D.documents,tasks:D.tasks})}),t(k.data),i(null)}catch(k){console.error("Error fetching cases:",k),i(((C=(S=k.response)==null?void 0:S.data)==null?void 0:C.message)||"Error al cargar expedientes")}finally{o(!1)}};g.useEffect(()=>{let S=e;c&&(S=S.filter(C=>{var k;return C.title.toLowerCase().includes(c.toLowerCase())||((k=C.description)==null?void 0:k.toLowerCase().includes(c.toLowerCase()))||C.client.user.name.toLowerCase().includes(c.toLowerCase())||C.lawyer.name.toLowerCase().includes(c.toLowerCase())})),u!=="todos"&&(S=S.filter(C=>C.status===u)),a(S)},[e,c,u]);const p=g.useMemo(()=>[...r].sort((C,k)=>C.id<k.id?f==="asc"?-1:1:C.id>k.id?f==="asc"?1:-1:0),[r,f]),h=()=>{x(S=>S==="asc"?"desc":"asc")},E=async S=>{var C,k;if(confirm("¿Estás seguro de que quieres eliminar este expediente?"))try{await J.delete(`/admin/cases/${S}`),v()}catch(D){console.error("Error deleting case:",D),i(((k=(C=D.response)==null?void 0:C.data)==null?void 0:k.message)||"Error al eliminar expediente")}},w=S=>{switch(S){case"ABIERTO":return"bg-green-100 text-green-800";case"EN_PROCESO":return"bg-yellow-100 text-yellow-800";case"CERRADO":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},N=S=>{switch(S){case"ABIERTO":return"Abierto";case"EN_PROCESO":return"En Proceso";case"CERRADO":return"Cerrado";default:return S}};return b?s?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})):l?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-red-600 text-xl mb-4"},"Error"),n.createElement("div",{className:"text-gray-600"},l),n.createElement("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},"Reintentar"))):n.createElement("div",{className:"py-6"},n.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"flex justify-between items-center"},n.createElement("div",null,n.createElement("h1",{className:"text-3xl font-bold text-gray-900"},"Gestión de Expedientes"),n.createElement("p",{className:"mt-2 text-gray-600"},"Administra todos los expedientes del sistema")))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow mb-6"},n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Buscar"),n.createElement("input",{type:"text",placeholder:"Buscar por título, descripción, cliente o abogado...",value:c,onChange:S=>d(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Estado"),n.createElement("select",{value:u,onChange:S=>m(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Filtrar por estado"},n.createElement("option",{value:"todos"},"Todos los estados"),n.createElement("option",{value:"ABIERTO"},"Abierto"),n.createElement("option",{value:"EN_PROCESO"},"En Proceso"),n.createElement("option",{value:"CERRADO"},"Cerrado"))),n.createElement("div",{className:"flex items-end"},n.createElement("button",{onClick:()=>{d(""),m("todos")},className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"},"Limpiar Filtros")))),n.createElement("div",{className:"bg-white shadow rounded-lg overflow-hidden"},n.createElement("div",{className:"overflow-x-auto"},n.createElement("table",{className:"min-w-full divide-y divide-gray-200"},n.createElement("thead",{className:"bg-gray-50"},n.createElement("tr",null,n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:h},"Expediente",n.createElement("span",{className:"ml-1"},f==="asc"?"▲":"▼")),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Cliente"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Abogado"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Estado"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actividad"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Acciones"))),n.createElement("tbody",{className:"bg-white divide-y divide-gray-200"},p.map(S=>{var C,k,D,O,A,$,P,I,L;return n.createElement("tr",{key:S.id||Math.random(),className:"hover:bg-gray-50"},n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("div",null,n.createElement("div",{className:"text-sm font-medium text-gray-900"},S.title||"Sin título"),n.createElement("div",{className:"text-sm text-gray-500"},S.description||"Sin descripción"),n.createElement("div",{className:"text-xs text-gray-400"},"Creado: ",S.createdAt&&!isNaN(Date.parse(S.createdAt))?new Date(S.createdAt).toLocaleDateString():"Fecha no disponible"))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("div",null,n.createElement("div",{className:"text-sm font-medium text-gray-900"},((k=(C=S.client)==null?void 0:C.user)==null?void 0:k.name)||((O=(D=S.client)==null?void 0:D.user)==null?void 0:O.email)||"Cliente no disponible"),n.createElement("div",{className:"text-sm text-gray-500"},(($=(A=S.client)==null?void 0:A.user)==null?void 0:$.email)||"Email no disponible"))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("div",null,n.createElement("div",{className:"text-sm font-medium text-gray-900"},((P=S.lawyer)==null?void 0:P.name)||((I=S.lawyer)==null?void 0:I.email)||"Abogado no disponible"),n.createElement("div",{className:"text-sm text-gray-500"},((L=S.lawyer)==null?void 0:L.email)||"Email no disponible"))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${w(S.status)}`},N(S.status))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},n.createElement("div",null,n.createElement("div",null,"Documentos: ",Array.isArray(S.documents)?S.documents.length:0),n.createElement("div",null,"Tareas: ",Array.isArray(S.tasks)?S.tasks.length:0))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium"},n.createElement("div",{className:"flex space-x-2"},n.createElement(Ne,{to:`/admin/cases/${S.id}`,className:"text-blue-600 hover:text-blue-900",key:S.id+"-ver"},"Ver"),n.createElement("button",{onClick:()=>E(S.id),className:"text-red-600 hover:text-red-900",key:S.id+"-eliminar"},"Eliminar"))))}))))),(!r||r.length===0)&&n.createElement("div",{className:"text-center py-12"},n.createElement("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})),n.createElement("h3",{className:"mt-2 text-sm font-medium text-gray-900"},"No se encontraron expedientes"),n.createElement("p",{className:"mt-1 text-sm text-gray-500"},"Intenta ajustar los filtros de búsqueda.")))):(console.warn(`Access denied: User role ${y} does not have admin permissions`),n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-red-600 text-xl mb-4"},"Acceso Denegado"),n.createElement("div",{className:"text-gray-600"},"No tienes permisos para acceder a esta página."))))},$Y=()=>{var G,ue;const[e,t]=g.useState([]),[r,a]=g.useState([]),[s,o]=g.useState([]),[l,i]=g.useState(!0),[c,d]=g.useState(null),[u,m]=g.useState(""),[f,x]=g.useState(""),[b,y]=g.useState("date"),[v,p]=g.useState("desc"),[h,E]=g.useState(1),[w]=g.useState(10),[N,S]=g.useState(null),[C,k]=g.useState(!1),[D,O]=g.useState(new Date),[A,$]=g.useState({date:"",time:"",location:"",notes:"",lawyerId:""});g.useEffect(()=>{P(),I();const W=setInterval(()=>{P()},3e4);return()=>clearInterval(W)},[]);const P=async()=>{var W,me;try{i(!0);const ae=await J.get("/admin/appointments");t(ae.data),O(new Date),d(null)}catch(ae){console.error("Error fetching appointments:",ae),d(((me=(W=ae.response)==null?void 0:W.data)==null?void 0:me.message)||"Error al cargar citas")}finally{i(!1)}},I=async()=>{try{console.log("🔍 Fetching lawyers...");const W=await J.get("/admin/users");if(console.log("📊 Response from /admin/users:",W),console.log("📋 Response data type:",typeof W.data),console.log("📋 Response data:",W.data),Array.isArray(W.data)){const me=W.data.filter(ae=>ae.role==="ABOGADO");console.log("👨‍💼 Found lawyers:",me),o(me)}else console.error("Error: response.data is not an array:",W.data),o([])}catch(W){console.error("Error fetching lawyers:",W)}};g.useEffect(()=>{let W=e;if(u){const me=u.toLowerCase().split(";").filter(ae=>ae.trim().length>0);W=W.filter(ae=>me.every(xe=>{var Q,de,ke,Ve,we,Pe;const Me=xe.trim(),Be={clientName:ae.fullName||((de=(Q=ae.client)==null?void 0:Q.user)==null?void 0:de.name)||"",clientEmail:ae.email||((Ve=(ke=ae.client)==null?void 0:ke.user)==null?void 0:Ve.email)||"",lawyerName:((we=ae.lawyer)==null?void 0:we.name)||"",lawyerEmail:((Pe=ae.lawyer)==null?void 0:Pe.email)||"",location:ae.location||"No especificada",notes:ae.notes||"",type:ae.type==="VISITOR"?"visitante":"cliente",status:L(ae.date)?"próxima":"pasada"};return Object.values(Be).some(He=>He.toLowerCase().includes(Me))}))}if(f){const me=new Date(f);W=W.filter(ae=>new Date(ae.date).toDateString()===me.toDateString())}a(W),E(1)},[e,u,f]);const L=W=>new Date(W)>new Date,F=W=>new Date(W)<new Date,T=(W,me)=>{var ae,xe,Me;switch(me){case"date":return new Date(W.date).getTime();case"client":return(W.fullName||((xe=(ae=W.client)==null?void 0:ae.user)==null?void 0:xe.name)||"").toLowerCase();case"lawyer":return(((Me=W.lawyer)==null?void 0:Me.name)||"").toLowerCase();case"location":return(W.location||"").toLowerCase();case"status":return L(W.date)?1:0;case"type":return W.type;default:return""}},M=g.useMemo(()=>[...r].sort((W,me)=>{const ae=T(W,b),xe=T(me,b);return typeof ae=="string"&&typeof xe=="string"?v==="asc"?ae.localeCompare(xe):xe.localeCompare(ae):v==="asc"?ae-xe:xe-ae}),[r,b,v]),V=Math.ceil(M.length/w),K=(h-1)*w,z=K+w,U=M.slice(K,z),Y=W=>{b===W?p(me=>me==="asc"?"desc":"asc"):(y(W),p("asc"))},X=W=>{E(W)},j=W=>{var ae;const me=new Date(W.date);$({date:me.toISOString().split("T")[0],time:me.toTimeString().slice(0,5),location:W.location||"",notes:W.notes||"",lawyerId:((ae=W.lawyer)==null?void 0:ae.id)||""}),S(W),k(!0)},B=async()=>{var W,me;if(N)try{const ae=localStorage.getItem("token"),xe={date:`${A.date}T${A.time}:00`,location:A.location,notes:A.notes,lawyerId:A.lawyerId};await J.put(`/admin/appointments/${N.id}`,xe),k(!1),S(null),P()}catch(ae){console.error("Error updating appointment:",ae),d(((me=(W=ae.response)==null?void 0:W.data)==null?void 0:me.message)||"Error al actualizar cita")}},H=async W=>{var me,ae;if(confirm("¿Estás seguro de que quieres eliminar esta cita?"))try{await J.delete(`/admin/appointments/${W}`),P()}catch(xe){console.error("Error deleting appointment:",xe),d(((ae=(me=xe.response)==null?void 0:me.data)==null?void 0:ae.message)||"Error al eliminar cita")}};return l?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})):c?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-red-600 text-xl mb-4"},"Error"),n.createElement("div",{className:"text-gray-600"},c),n.createElement("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},"Reintentar"))):n.createElement("div",{className:"py-6"},n.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"flex justify-between items-center"},n.createElement("div",null,n.createElement("h1",{className:"text-3xl font-bold text-gray-900"},"Gestión de Citas"),n.createElement("p",{className:"mt-2 text-gray-600"},"Administra todas las citas del sistema - Asigna abogados y reprograma citas"),n.createElement("p",{className:"mt-1 text-sm text-gray-500"},"Última actualización: ",D.toLocaleString(),n.createElement("span",{className:"ml-2 text-blue-600"},"(Actualización automática cada 30s)"))),n.createElement("div",{className:"flex items-center space-x-3"},n.createElement("button",{onClick:P,disabled:l,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2"},n.createElement("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})),n.createElement("span",null,"Refrescar")),u&&n.createElement("button",{onClick:()=>{console.log("🔍 DEBUG: Analizando búsqueda actual"),console.log("📝 Término de búsqueda:",u),console.log("📊 Total de citas:",e.length),console.log("🎯 Citas filtradas:",r.length),console.log("---"),e.forEach(W=>{var xe,Me,Be,Q,de,ke;const me=u.toLowerCase().split(";").filter(Ve=>Ve.trim().length>0),ae={clientName:W.fullName||((Me=(xe=W.client)==null?void 0:xe.user)==null?void 0:Me.name)||"",clientEmail:W.email||((Q=(Be=W.client)==null?void 0:Be.user)==null?void 0:Q.email)||"",lawyerName:((de=W.lawyer)==null?void 0:de.name)||"",lawyerEmail:((ke=W.lawyer)==null?void 0:ke.email)||"",location:W.location||"No especificada",notes:W.notes||"",type:W.type==="VISITOR"?"visitante":"cliente",status:L(W.date)?"próxima":"pasada"};console.log(`🔍 Cita ${W.id}:`),console.log("📋 Campos:",ae),me.forEach(Ve=>{const we=Ve.trim(),Pe=Object.entries(ae).filter(([He,tt])=>tt.toLowerCase().includes(we)).map(([He,tt])=>`${He}: "${tt}"`);Pe.length>0?console.log(`✅ "${we}" encontrado en:`,Pe):console.log(`❌ "${we}" NO encontrado`)}),console.log("---")})},className:"px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 flex items-center space-x-2"},n.createElement("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})),n.createElement("span",null,"Debug"))))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow mb-6"},n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Buscar"),n.createElement("input",{type:"text",placeholder:"Buscar por cliente, abogado, ubicación, notas, tipo (cliente/visitante) o estado (próxima/pasada). Puedes combinar términos separados por punto y coma (;)...",value:u,onChange:W=>m(W.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Fecha"),n.createElement("input",{type:"date",value:f,onChange:W=>x(W.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Filtrar por fecha"})),n.createElement("div",{className:"flex items-end"},n.createElement("button",{onClick:()=>{m(""),x("")},className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"},"Limpiar Filtros")))),n.createElement("div",{className:"bg-white p-4 rounded-lg shadow mb-4"},n.createElement("div",{className:"flex justify-between items-center"},n.createElement("div",{className:"text-sm text-gray-600"},n.createElement("span",{className:"font-medium"},M.length)," citas encontradas",u&&n.createElement("span",{className:"ml-2"},'para "',n.createElement("span",{className:"font-medium"},u),'"'),f&&n.createElement("span",{className:"ml-2"},"en ",n.createElement("span",{className:"font-medium"},new Date(f).toLocaleDateString()))),n.createElement("div",{className:"text-sm text-gray-500"},"Mostrando ",K+1,"-",Math.min(z,M.length)," de ",M.length," citas"))),n.createElement("div",{className:"bg-white shadow rounded-lg overflow-hidden"},n.createElement("div",{className:"overflow-x-auto"},n.createElement("table",{className:"min-w-full divide-y divide-gray-200"},n.createElement("thead",{className:"bg-gray-50"},n.createElement("tr",null,n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:()=>Y("date")},"Fecha y Hora",n.createElement("span",{className:"ml-1"},b==="date"?v==="asc"?"▲":"▼":"")),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:()=>Y("client")},"Cliente",n.createElement("span",{className:"ml-1"},b==="client"?v==="asc"?"▲":"▼":"")),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:()=>Y("lawyer")},"Abogado",n.createElement("span",{className:"ml-1"},b==="lawyer"?v==="asc"?"▲":"▼":"")),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:()=>Y("location")},"Ubicación",n.createElement("span",{className:"ml-1"},b==="location"?v==="asc"?"▲":"▼":"")),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:()=>Y("status")},"Estado",n.createElement("span",{className:"ml-1"},b==="status"?v==="asc"?"▲":"▼":"")),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:()=>Y("type")},"Tipo",n.createElement("span",{className:"ml-1"},b==="type"?v==="asc"?"▲":"▼":"")),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Acciones"))),n.createElement("tbody",{className:"bg-white divide-y divide-gray-200"},U.map(W=>{var me,ae,xe,Me,Be,Q;return n.createElement("tr",{key:W.id,className:`hover:bg-gray-50 ${F(W.date)?"bg-gray-50":""}`},n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("div",null,n.createElement("div",{className:"text-sm font-medium text-gray-900"},new Date(W.date).toLocaleDateString()),n.createElement("div",{className:"text-sm text-gray-500"},new Date(W.date).toLocaleTimeString()))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("div",null,n.createElement("div",{className:"text-sm font-medium text-gray-900"},W.fullName||((ae=(me=W.client)==null?void 0:me.user)==null?void 0:ae.name)||"—"),n.createElement("div",{className:"text-sm text-gray-500"},W.email||((Me=(xe=W.client)==null?void 0:xe.user)==null?void 0:Me.email)||"—"))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("div",null,n.createElement("div",{className:"text-sm font-medium text-gray-900"},((Be=W.lawyer)==null?void 0:Be.name)||"—"),n.createElement("div",{className:"text-sm text-gray-500"},((Q=W.lawyer)==null?void 0:Q.email)||"—"))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},W.location||"No especificada"),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},L(W.date)?n.createElement("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800"},"Próxima"):n.createElement("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800"},"Pasada")),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},W.type==="VISITOR"?n.createElement("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-purple-100 text-purple-800"},"Visitante (Chatbot)"):n.createElement("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800"},"Cliente")),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium"},n.createElement("div",{className:"flex space-x-2"},n.createElement("button",{onClick:()=>j(W),className:"text-blue-600 hover:text-blue-900"},"Editar"),n.createElement("button",{onClick:()=>H(W.id),className:"text-red-600 hover:text-red-900"},"Eliminar"))))}))))),V>1&&n.createElement("div",{className:"flex justify-center items-center space-x-2 mt-6"},n.createElement("button",{onClick:()=>X(h-1),disabled:h===1,className:"px-3 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed"},"Anterior"),n.createElement("span",{className:"text-sm text-gray-700"},"Página ",h," de ",V),n.createElement("button",{onClick:()=>X(h+1),disabled:h===V,className:"px-3 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed"},"Siguiente")),r.length===0&&n.createElement("div",{className:"text-center py-12"},n.createElement("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})),n.createElement("h3",{className:"mt-2 text-sm font-medium text-gray-900"},"No se encontraron citas"),n.createElement("p",{className:"mt-1 text-sm text-gray-500"},"Intenta ajustar los filtros de búsqueda."))),C&&N&&n.createElement("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},n.createElement("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},n.createElement("div",{className:"mt-3"},n.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-4"},"Editar Cita - ",((ue=(G=N.client)==null?void 0:G.user)==null?void 0:ue.name)||"Desconocido"),n.createElement("div",{className:"space-y-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Fecha"),n.createElement("input",{type:"date",value:A.date,onChange:W=>$({...A,date:W.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Hora"),n.createElement("input",{type:"time",value:A.time,onChange:W=>$({...A,time:W.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Abogado"),n.createElement("select",{value:A.lawyerId,onChange:W=>$({...A,lawyerId:W.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},s.map(W=>n.createElement("option",{key:W.id,value:W.id},W.name," (",W.email,")")))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Ubicación"),n.createElement("input",{type:"text",value:A.location,onChange:W=>$({...A,location:W.target.value}),placeholder:"Ubicación de la cita",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Notas"),n.createElement("textarea",{value:A.notes,onChange:W=>$({...A,notes:W.target.value}),placeholder:"Notas adicionales",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}))),n.createElement("div",{className:"flex justify-end space-x-3 mt-6"},n.createElement("button",{onClick:()=>{k(!1),S(null)},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400"},"Cancelar"),n.createElement("button",{onClick:B,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},"Guardar Cambios"))))))},FY=()=>{const[e,t]=g.useState([]),[r,a]=g.useState([]),[s,o]=g.useState(!0),[l,i]=g.useState(null),[c,d]=g.useState(""),[u,m]=g.useState("todos"),[f,x]=g.useState("todos"),[b,y]=g.useState("asc");g.useEffect(()=>{v()},[]);const v=async()=>{var D,O;try{o(!0);const A=await J.get("/admin/tasks");t(A.data),i(null)}catch(A){console.error("Error fetching tasks:",A),i(((O=(D=A.response)==null?void 0:D.data)==null?void 0:O.message)||"Error al cargar tareas")}finally{o(!1)}};g.useEffect(()=>{let D=e;c&&(D=D.filter(O=>{var A,$,P,I;return O.title.toLowerCase().includes(c.toLowerCase())||((A=O.description)==null?void 0:A.toLowerCase().includes(c.toLowerCase()))||(($=O.expediente)==null?void 0:$.title.toLowerCase().includes(c.toLowerCase()))||((P=O.client)==null?void 0:P.user.name.toLowerCase().includes(c.toLowerCase()))||((I=O.assignedToUser)==null?void 0:I.name.toLowerCase().includes(c.toLowerCase()))})),u!=="todos"&&(D=D.filter(O=>O.status===u)),f!=="todos"&&(D=D.filter(O=>O.priority===f)),a(D)},[e,c,u,f]);const p=g.useMemo(()=>[...r].sort((D,O)=>{if(!D.dueDate)return 1;if(!O.dueDate)return-1;const A=new Date(D.dueDate).getTime(),$=new Date(O.dueDate).getTime();return b==="asc"?A-$:$-A}),[r,b]),h=()=>{y(D=>D==="asc"?"desc":"asc")},E=async D=>{var O,A;if(confirm("¿Estás seguro de que quieres eliminar esta tarea?"))try{await J.delete(`/admin/tasks/${D}`),v()}catch($){console.error("Error deleting task:",$),i(((A=(O=$.response)==null?void 0:O.data)==null?void 0:A.message)||"Error al eliminar tarea")}},w=D=>{switch(D){case"URGENTE":return"bg-red-100 text-red-800";case"ALTA":return"bg-orange-100 text-orange-800";case"MEDIA":return"bg-yellow-100 text-yellow-800";case"BAJA":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},N=D=>{switch(D){case"PENDIENTE":return"bg-yellow-100 text-yellow-800";case"EN_PROGRESO":return"bg-blue-100 text-blue-800";case"COMPLETADA":return"bg-green-100 text-green-800";case"CANCELADA":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},S=D=>{switch(D){case"URGENTE":return"Urgente";case"ALTA":return"Alta";case"MEDIA":return"Media";case"BAJA":return"Baja";default:return D}},C=D=>{switch(D){case"PENDIENTE":return"Pendiente";case"EN_PROGRESO":return"En Progreso";case"COMPLETADA":return"Completada";case"CANCELADA":return"Cancelada";default:return D}},k=D=>new Date(D)<new Date;return s?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})):l?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-red-600 text-xl mb-4"},"Error"),n.createElement("div",{className:"text-gray-600"},l),n.createElement("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},"Reintentar"))):n.createElement("div",{className:"py-6"},n.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"flex justify-between items-center"},n.createElement("div",null,n.createElement("h1",{className:"text-3xl font-bold text-gray-900"},"Gestión de Tareas"),n.createElement("p",{className:"mt-2 text-gray-600"},"Administra todas las tareas del sistema")))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow mb-6"},n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Buscar"),n.createElement("input",{type:"text",placeholder:"Buscar por título, descripción, expediente, cliente o asignado...",value:c,onChange:D=>d(D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Estado"),n.createElement("select",{value:u,onChange:D=>m(D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Filtrar por estado"},n.createElement("option",{value:"todos"},"Todos los estados"),n.createElement("option",{value:"PENDIENTE"},"Pendiente"),n.createElement("option",{value:"EN_PROGRESO"},"En Progreso"),n.createElement("option",{value:"COMPLETADA"},"Completada"),n.createElement("option",{value:"CANCELADA"},"Cancelada"))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Prioridad"),n.createElement("select",{value:f,onChange:D=>x(D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Filtrar por prioridad"},n.createElement("option",{value:"todos"},"Todas las prioridades"),n.createElement("option",{value:"URGENTE"},"Urgente"),n.createElement("option",{value:"ALTA"},"Alta"),n.createElement("option",{value:"MEDIA"},"Media"),n.createElement("option",{value:"BAJA"},"Baja"))),n.createElement("div",{className:"flex items-end"},n.createElement("button",{onClick:()=>{d(""),m("todos"),x("todos")},className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"},"Limpiar Filtros")))),n.createElement("div",{className:"bg-white shadow rounded-lg overflow-hidden"},n.createElement("div",{className:"overflow-x-auto"},n.createElement("table",{className:"min-w-full divide-y divide-gray-200"},n.createElement("thead",{className:"bg-gray-50"},n.createElement("tr",null,n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Tarea"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Prioridad"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Estado"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:h},"Vencimiento",n.createElement("span",{className:"ml-1"},b==="asc"?"▲":"▼")),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Asignado"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Acciones"))),n.createElement("tbody",{className:"bg-white divide-y divide-gray-200"},p.map(D=>{var O;return n.createElement("tr",{key:D.id,className:`hover:bg-gray-50 ${D.dueDate&&k(D.dueDate)&&D.status!=="COMPLETADA"?"bg-red-50":""}`},n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("div",null,n.createElement("div",{className:"text-sm font-medium text-gray-900"},D.title),n.createElement("div",{className:"text-sm text-gray-500"},D.description||"Sin descripción"),D.expediente&&n.createElement("div",{className:"text-xs text-blue-600"},"📋 ",D.expediente.title),D.client&&n.createElement("div",{className:"text-xs text-green-600"},"👤 ",D.client.user.name))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${w(D.priority)}`},S(D.priority))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${N(D.status)}`},C(D.status))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},D.dueDate?n.createElement("div",null,n.createElement("div",{className:D.dueDate&&k(D.dueDate)&&D.status!=="COMPLETADA"?"text-red-600 font-medium":""},new Date(D.dueDate).toLocaleDateString()),D.dueDate&&k(D.dueDate)&&D.status!=="COMPLETADA"&&n.createElement("div",{className:"text-xs text-red-500"},"⚠️ Vencida")):"Sin fecha límite"),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},((O=D.assignedToUser)==null?void 0:O.name)||"Sin asignar"),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium"},n.createElement("div",{className:"flex space-x-2"},n.createElement("button",{onClick:()=>E(D.id),className:"text-red-600 hover:text-red-900"},"Eliminar"))))}))))),p.length===0&&n.createElement("div",{className:"text-center py-12"},n.createElement("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})),n.createElement("h3",{className:"mt-2 text-sm font-medium text-gray-900"},"No se encontraron tareas"),n.createElement("p",{className:"mt-1 text-sm text-gray-500"},"Intenta ajustar los filtros de búsqueda."))))},jY=()=>{const[e,t]=g.useState([]),[r,a]=g.useState([]),[s,o]=g.useState(!0),[l,i]=g.useState(null),[c,d]=g.useState(""),[u,m]=g.useState("todos");g.useEffect(()=>{f()},[]);const f=async()=>{var v,p;try{o(!0);const h=localStorage.getItem("token"),E=await J.get("/admin/documents",{headers:{Authorization:`Bearer ${h}`}});t(E.data),i(null)}catch(h){console.error("Error fetching documents:",h),i(((p=(v=h.response)==null?void 0:v.data)==null?void 0:p.message)||"Error al cargar documentos")}finally{o(!1)}};g.useEffect(()=>{let v=e;c&&(v=v.filter(p=>{var h;return p.originalName.toLowerCase().includes(c.toLowerCase())||((h=p.description)==null?void 0:h.toLowerCase().includes(c.toLowerCase()))||p.expediente.title.toLowerCase().includes(c.toLowerCase())||p.expediente.client.user.name.toLowerCase().includes(c.toLowerCase())||p.uploadedByUser.name.toLowerCase().includes(c.toLowerCase())})),u!=="todos"&&(v=v.filter(p=>p.mimeType.includes(u))),a(v)},[e,c,u]);const x=async v=>{var p,h;if(confirm("¿Estás seguro de que quieres eliminar este documento?"))try{const E=localStorage.getItem("token");await J.delete(`/admin/documents/${v}`,{headers:{Authorization:`Bearer ${E}`}}),f()}catch(E){console.error("Error deleting document:",E),i(((h=(p=E.response)==null?void 0:p.data)==null?void 0:h.message)||"Error al eliminar documento")}},b=v=>{if(v===0)return"0 Bytes";const p=1024,h=["Bytes","KB","MB","GB"],E=Math.floor(Math.log(v)/Math.log(p));return parseFloat((v/Math.pow(p,E)).toFixed(2))+" "+h[E]},y=v=>v.includes("pdf")?"📄":v.includes("image")?"🖼️":v.includes("word")||v.includes("document")?"📝":v.includes("excel")||v.includes("spreadsheet")?"📊":v.includes("powerpoint")||v.includes("presentation")?"📈":"📎";return s?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})):l?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-red-600 text-xl mb-4"},"Error"),n.createElement("div",{className:"text-gray-600"},l),n.createElement("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},"Reintentar"))):n.createElement("div",{className:"py-6"},n.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"flex justify-between items-center"},n.createElement("div",null,n.createElement("h1",{className:"text-3xl font-bold text-gray-900"},"Gestión de Documentos"),n.createElement("p",{className:"mt-2 text-gray-600"},"Administra todos los documentos del sistema")))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow mb-6"},n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Buscar"),n.createElement("input",{type:"text",placeholder:"Buscar por nombre, descripción, expediente, cliente o subido por...",value:c,onChange:v=>d(v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Tipo de Archivo"),n.createElement("select",{value:u,onChange:v=>m(v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Filtrar por tipo de archivo"},n.createElement("option",{value:"todos"},"Todos los tipos"),n.createElement("option",{value:"pdf"},"PDF"),n.createElement("option",{value:"image"},"Imágenes"),n.createElement("option",{value:"word"},"Documentos Word"),n.createElement("option",{value:"excel"},"Hojas de cálculo"),n.createElement("option",{value:"powerpoint"},"Presentaciones"))),n.createElement("div",{className:"flex items-end"},n.createElement("button",{onClick:()=>{d(""),m("todos")},className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"},"Limpiar Filtros")))),n.createElement("div",{className:"bg-white shadow rounded-lg overflow-hidden"},n.createElement("div",{className:"overflow-x-auto"},n.createElement("table",{className:"min-w-full divide-y divide-gray-200"},n.createElement("thead",{className:"bg-gray-50"},n.createElement("tr",null,n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Documento"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Expediente"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Cliente"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Subido por"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Tamaño"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Acciones"))),n.createElement("tbody",{className:"bg-white divide-y divide-gray-200"},r.map(v=>{var p,h,E,w,N,S,C,k,D;return n.createElement("tr",{key:v.id,className:"hover:bg-gray-50"},n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("span",{className:"text-2xl"},y(v.mimeType))),n.createElement("div",{className:"ml-3"},n.createElement("div",{className:"text-sm font-medium text-gray-900"},v.originalName),n.createElement("div",{className:"text-sm text-gray-500"},v.description||"Sin descripción"),n.createElement("div",{className:"text-xs text-gray-400"},"Subido: ",new Date(v.uploadedAt).toLocaleDateString())))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("div",{className:"text-sm text-gray-900"},((p=v.expediente)==null?void 0:p.title)||"Sin expediente")),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("div",null,n.createElement("div",{className:"text-sm font-medium text-gray-900"},((w=(E=(h=v.expediente)==null?void 0:h.client)==null?void 0:E.user)==null?void 0:w.name)||"Sin cliente"),n.createElement("div",{className:"text-sm text-gray-500"},((C=(S=(N=v.expediente)==null?void 0:N.client)==null?void 0:S.user)==null?void 0:C.email)||"Sin email"))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("div",null,n.createElement("div",{className:"text-sm font-medium text-gray-900"},((k=v.uploadedByUser)==null?void 0:k.name)||"Sin usuario"),n.createElement("div",{className:"text-sm text-gray-500"},((D=v.uploadedByUser)==null?void 0:D.email)||"Sin email"))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},b(v.fileSize)),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium"},n.createElement("div",{className:"flex space-x-2"},n.createElement("a",{href:v.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-900"},"Ver"),n.createElement("button",{onClick:()=>x(v.id),className:"text-red-600 hover:text-red-900"},"Eliminar"))))}))))),r.length===0&&n.createElement("div",{className:"text-center py-12"},n.createElement("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})),n.createElement("h3",{className:"mt-2 text-sm font-medium text-gray-900"},"No se encontraron documentos"),n.createElement("p",{className:"mt-1 text-sm text-gray-500"},"Intenta ajustar los filtros de búsqueda."))))};var Vd={},S2={L:1,M:0,Q:3,H:2},C2={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},BY=C2;function k2(e){this.mode=BY.MODE_8BIT_BYTE,this.data=e}k2.prototype={getLength:function(e){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}};var zY=k2,uc=S2;function Nn(e,t){this.totalCount=e,this.dataCount=t}Nn.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];Nn.getRSBlocks=function(e,t){var r=Nn.getRsBlockTable(e,t);if(r==null)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var a=r.length/3,s=new Array,o=0;o<a;o++)for(var l=r[o*3+0],i=r[o*3+1],c=r[o*3+2],d=0;d<l;d++)s.push(new Nn(i,c));return s};Nn.getRsBlockTable=function(e,t){switch(t){case uc.L:return Nn.RS_BLOCK_TABLE[(e-1)*4+0];case uc.M:return Nn.RS_BLOCK_TABLE[(e-1)*4+1];case uc.Q:return Nn.RS_BLOCK_TABLE[(e-1)*4+2];case uc.H:return Nn.RS_BLOCK_TABLE[(e-1)*4+3];default:return}};var UY=Nn;function D2(){this.buffer=new Array,this.length=0}D2.prototype={get:function(e){var t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1},put:function(e,t){for(var r=0;r<t;r++)this.putBit((e>>>t-r-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var VY=D2,an={glog:function(e){if(e<1)throw new Error("glog("+e+")");return an.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return an.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var jt=0;jt<8;jt++)an.EXP_TABLE[jt]=1<<jt;for(var jt=8;jt<256;jt++)an.EXP_TABLE[jt]=an.EXP_TABLE[jt-4]^an.EXP_TABLE[jt-5]^an.EXP_TABLE[jt-6]^an.EXP_TABLE[jt-8];for(var jt=0;jt<255;jt++)an.LOG_TABLE[an.EXP_TABLE[jt]]=jt;var A2=an,Ya=A2;function zc(e,t){if(e.length==null)throw new Error(e.length+"/"+t);for(var r=0;r<e.length&&e[r]==0;)r++;this.num=new Array(e.length-r+t);for(var a=0;a<e.length-r;a++)this.num[a]=e[a+r]}zc.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),r=0;r<this.getLength();r++)for(var a=0;a<e.getLength();a++)t[r+a]^=Ya.gexp(Ya.glog(this.get(r))+Ya.glog(e.get(a)));return new zc(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=Ya.glog(this.get(0))-Ya.glog(e.get(0)),r=new Array(this.getLength()),a=0;a<this.getLength();a++)r[a]=this.get(a);for(var a=0;a<e.getLength();a++)r[a]^=Ya.gexp(Ya.glog(e.get(a))+t);return new zc(r,0).mod(e)}};var T2=zc,Or=C2,CE=T2,WY=A2,ua={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},$t={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;$t.getBCHDigit(t)-$t.getBCHDigit($t.G15)>=0;)t^=$t.G15<<$t.getBCHDigit(t)-$t.getBCHDigit($t.G15);return(e<<10|t)^$t.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;$t.getBCHDigit(t)-$t.getBCHDigit($t.G18)>=0;)t^=$t.G18<<$t.getBCHDigit(t)-$t.getBCHDigit($t.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;e!=0;)t++,e>>>=1;return t},getPatternPosition:function(e){return $t.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,r){switch(e){case ua.PATTERN000:return(t+r)%2==0;case ua.PATTERN001:return t%2==0;case ua.PATTERN010:return r%3==0;case ua.PATTERN011:return(t+r)%3==0;case ua.PATTERN100:return(Math.floor(t/2)+Math.floor(r/3))%2==0;case ua.PATTERN101:return t*r%2+t*r%3==0;case ua.PATTERN110:return(t*r%2+t*r%3)%2==0;case ua.PATTERN111:return(t*r%3+(t+r)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new CE([1],0),r=0;r<e;r++)t=t.multiply(new CE([1,WY.gexp(r)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case Or.MODE_NUMBER:return 10;case Or.MODE_ALPHA_NUM:return 9;case Or.MODE_8BIT_BYTE:return 8;case Or.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case Or.MODE_NUMBER:return 12;case Or.MODE_ALPHA_NUM:return 11;case Or.MODE_8BIT_BYTE:return 16;case Or.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else if(t<41)switch(e){case Or.MODE_NUMBER:return 14;case Or.MODE_ALPHA_NUM:return 13;case Or.MODE_8BIT_BYTE:return 16;case Or.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}else throw new Error("type:"+t)},getLostPoint:function(e){for(var t=e.getModuleCount(),r=0,a=0;a<t;a++)for(var s=0;s<t;s++){for(var o=0,l=e.isDark(a,s),i=-1;i<=1;i++)if(!(a+i<0||t<=a+i))for(var c=-1;c<=1;c++)s+c<0||t<=s+c||i==0&&c==0||l==e.isDark(a+i,s+c)&&o++;o>5&&(r+=3+o-5)}for(var a=0;a<t-1;a++)for(var s=0;s<t-1;s++){var d=0;e.isDark(a,s)&&d++,e.isDark(a+1,s)&&d++,e.isDark(a,s+1)&&d++,e.isDark(a+1,s+1)&&d++,(d==0||d==4)&&(r+=3)}for(var a=0;a<t;a++)for(var s=0;s<t-6;s++)e.isDark(a,s)&&!e.isDark(a,s+1)&&e.isDark(a,s+2)&&e.isDark(a,s+3)&&e.isDark(a,s+4)&&!e.isDark(a,s+5)&&e.isDark(a,s+6)&&(r+=40);for(var s=0;s<t;s++)for(var a=0;a<t-6;a++)e.isDark(a,s)&&!e.isDark(a+1,s)&&e.isDark(a+2,s)&&e.isDark(a+3,s)&&e.isDark(a+4,s)&&!e.isDark(a+5,s)&&e.isDark(a+6,s)&&(r+=40);for(var u=0,s=0;s<t;s++)for(var a=0;a<t;a++)e.isDark(a,s)&&u++;var m=Math.abs(100*u/t/t-50)/5;return r+=m*10,r}},HY=$t,YY=zY,_2=UY,O2=VY,Wa=HY,qY=T2;function Sn(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var Ar=Sn.prototype;Ar.addData=function(e){var t=new YY(e);this.dataList.push(t),this.dataCache=null};Ar.isDark=function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]};Ar.getModuleCount=function(){return this.moduleCount};Ar.make=function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){for(var t=_2.getRSBlocks(e,this.errorCorrectLevel),r=new O2,a=0,s=0;s<t.length;s++)a+=t[s].dataCount;for(var s=0;s<this.dataList.length;s++){var o=this.dataList[s];r.put(o.mode,4),r.put(o.getLength(),Wa.getLengthInBits(o.mode,e)),o.write(r)}if(r.getLengthInBits()<=a*8)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())};Ar.makeImpl=function(e,t){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var a=0;a<this.moduleCount;a++)this.modules[r][a]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),this.dataCache==null&&(this.dataCache=Sn.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)};Ar.setupPositionProbePattern=function(e,t){for(var r=-1;r<=7;r++)if(!(e+r<=-1||this.moduleCount<=e+r))for(var a=-1;a<=7;a++)t+a<=-1||this.moduleCount<=t+a||(0<=r&&r<=6&&(a==0||a==6)||0<=a&&a<=6&&(r==0||r==6)||2<=r&&r<=4&&2<=a&&a<=4?this.modules[e+r][t+a]=!0:this.modules[e+r][t+a]=!1)};Ar.getBestMaskPattern=function(){for(var e=0,t=0,r=0;r<8;r++){this.makeImpl(!0,r);var a=Wa.getLostPoint(this);(r==0||e>a)&&(e=a,t=r)}return t};Ar.createMovieClip=function(e,t,r){var a=e.createEmptyMovieClip(t,r),s=1;this.make();for(var o=0;o<this.modules.length;o++)for(var l=o*s,i=0;i<this.modules[o].length;i++){var c=i*s,d=this.modules[o][i];d&&(a.beginFill(0,100),a.moveTo(c,l),a.lineTo(c+s,l),a.lineTo(c+s,l+s),a.lineTo(c,l+s),a.endFill())}return a};Ar.setupTimingPattern=function(){for(var e=8;e<this.moduleCount-8;e++)this.modules[e][6]==null&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)this.modules[6][t]==null&&(this.modules[6][t]=t%2==0)};Ar.setupPositionAdjustPattern=function(){for(var e=Wa.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var r=0;r<e.length;r++){var a=e[t],s=e[r];if(this.modules[a][s]==null)for(var o=-2;o<=2;o++)for(var l=-2;l<=2;l++)o==-2||o==2||l==-2||l==2||o==0&&l==0?this.modules[a+o][s+l]=!0:this.modules[a+o][s+l]=!1}};Ar.setupTypeNumber=function(e){for(var t=Wa.getBCHTypeNumber(this.typeNumber),r=0;r<18;r++){var a=!e&&(t>>r&1)==1;this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=a}for(var r=0;r<18;r++){var a=!e&&(t>>r&1)==1;this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=a}};Ar.setupTypeInfo=function(e,t){for(var r=this.errorCorrectLevel<<3|t,a=Wa.getBCHTypeInfo(r),s=0;s<15;s++){var o=!e&&(a>>s&1)==1;s<6?this.modules[s][8]=o:s<8?this.modules[s+1][8]=o:this.modules[this.moduleCount-15+s][8]=o}for(var s=0;s<15;s++){var o=!e&&(a>>s&1)==1;s<8?this.modules[8][this.moduleCount-s-1]=o:s<9?this.modules[8][15-s-1+1]=o:this.modules[8][15-s-1]=o}this.modules[this.moduleCount-8][8]=!e};Ar.mapData=function(e,t){for(var r=-1,a=this.moduleCount-1,s=7,o=0,l=this.moduleCount-1;l>0;l-=2)for(l==6&&l--;;){for(var i=0;i<2;i++)if(this.modules[a][l-i]==null){var c=!1;o<e.length&&(c=(e[o]>>>s&1)==1);var d=Wa.getMask(t,a,l-i);d&&(c=!c),this.modules[a][l-i]=c,s--,s==-1&&(o++,s=7)}if(a+=r,a<0||this.moduleCount<=a){a-=r,r=-r;break}}};Sn.PAD0=236;Sn.PAD1=17;Sn.createData=function(e,t,r){for(var a=_2.getRSBlocks(e,t),s=new O2,o=0;o<r.length;o++){var l=r[o];s.put(l.mode,4),s.put(l.getLength(),Wa.getLengthInBits(l.mode,e)),l.write(s)}for(var i=0,o=0;o<a.length;o++)i+=a[o].dataCount;if(s.getLengthInBits()>i*8)throw new Error("code length overflow. ("+s.getLengthInBits()+">"+i*8+")");for(s.getLengthInBits()+4<=i*8&&s.put(0,4);s.getLengthInBits()%8!=0;)s.putBit(!1);for(;!(s.getLengthInBits()>=i*8||(s.put(Sn.PAD0,8),s.getLengthInBits()>=i*8));)s.put(Sn.PAD1,8);return Sn.createBytes(s,a)};Sn.createBytes=function(e,t){for(var r=0,a=0,s=0,o=new Array(t.length),l=new Array(t.length),i=0;i<t.length;i++){var c=t[i].dataCount,d=t[i].totalCount-c;a=Math.max(a,c),s=Math.max(s,d),o[i]=new Array(c);for(var u=0;u<o[i].length;u++)o[i][u]=255&e.buffer[u+r];r+=c;var m=Wa.getErrorCorrectPolynomial(d),f=new qY(o[i],m.getLength()-1),x=f.mod(m);l[i]=new Array(m.getLength()-1);for(var u=0;u<l[i].length;u++){var b=u+x.getLength()-l[i].length;l[i][u]=b>=0?x.get(b):0}}for(var y=0,u=0;u<t.length;u++)y+=t[u].totalCount;for(var v=new Array(y),p=0,u=0;u<a;u++)for(var i=0;i<t.length;i++)u<o[i].length&&(v[p++]=o[i][u]);for(var u=0;u<s;u++)for(var i=0;i<t.length;i++)u<l[i].length&&(v[p++]=l[i][u]);return v};var GY=Sn,Zg={};Object.defineProperty(Zg,"__esModule",{value:!0});var KY=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},XY=Hh,Rr=M2(XY),R2=g,dc=M2(R2);function M2(e){return e&&e.__esModule?e:{default:e}}function QY(e,t){var r={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a]);return r}var JY={bgColor:Rr.default.oneOfType([Rr.default.object,Rr.default.string]).isRequired,bgD:Rr.default.string.isRequired,fgColor:Rr.default.oneOfType([Rr.default.object,Rr.default.string]).isRequired,fgD:Rr.default.string.isRequired,size:Rr.default.number.isRequired,title:Rr.default.string,viewBoxSize:Rr.default.number.isRequired,xmlns:Rr.default.string},e0=(0,R2.forwardRef)(function(e,t){var r=e.bgColor,a=e.bgD,s=e.fgD,o=e.fgColor,l=e.size,i=e.title,c=e.viewBoxSize,d=e.xmlns,u=d===void 0?"http://www.w3.org/2000/svg":d,m=QY(e,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return dc.default.createElement("svg",KY({},m,{height:l,ref:t,viewBox:"0 0 "+c+" "+c,width:l,xmlns:u}),i?dc.default.createElement("title",null,i):null,dc.default.createElement("path",{d:a,fill:r}),dc.default.createElement("path",{d:s,fill:o}))});e0.displayName="QRCodeSvg";e0.propTypes=JY;Zg.default=e0;Object.defineProperty(Vd,"__esModule",{value:!0});Vd.QRCode=void 0;var ZY=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},eq=Hh,Bn=Mi(eq),tq=S2,rq=Mi(tq),nq=GY,aq=Mi(nq),P2=g,sq=Mi(P2),oq=Zg,lq=Mi(oq);function Mi(e){return e&&e.__esModule?e:{default:e}}function iq(e,t){var r={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a]);return r}var cq={bgColor:Bn.default.oneOfType([Bn.default.object,Bn.default.string]),fgColor:Bn.default.oneOfType([Bn.default.object,Bn.default.string]),level:Bn.default.string,size:Bn.default.number,value:Bn.default.string.isRequired},Wd=(0,P2.forwardRef)(function(e,t){var r=e.bgColor,a=r===void 0?"#FFFFFF":r,s=e.fgColor,o=s===void 0?"#000000":s,l=e.level,i=l===void 0?"L":l,c=e.size,d=c===void 0?256:c,u=e.value,m=iq(e,["bgColor","fgColor","level","size","value"]),f=new aq.default(-1,rq.default[i]);f.addData(u),f.make();var x=f.modules;return sq.default.createElement(lq.default,ZY({},m,{bgColor:a,bgD:x.map(function(b,y){return b.map(function(v,p){return v?"":"M "+p+" "+y+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:o,fgD:x.map(function(b,y){return b.map(function(v,p){return v?"M "+p+" "+y+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:t,size:d,viewBoxSize:x.length}))});Vd.QRCode=Wd;Wd.displayName="QRCode";Wd.propTypes=cq;var L2=Vd.default=Wd;const uq=()=>{var De;const{user:e}=Te(),[t,r]=g.useState([]),[a,s]=g.useState([]),[o,l]=g.useState([]),[i,c]=g.useState(""),[d,u]=g.useState(""),[m,f]=g.useState(""),[x,b]=g.useState(!0),[y,v]=g.useState(null),[p,h]=g.useState(null),[E,w]=g.useState(!1),[N,S]=g.useState(null),[C,k]=g.useState(null),[D,O]=g.useState(null),[A,$]=g.useState([]),[P,I]=g.useState(null),[L,F]=g.useState(null),[T,M]=g.useState(!1),[V,K]=g.useState(null),[z,U]=g.useState(!1),[Y,X]=g.useState(null),[j,B]=g.useState(!1),[H,G]=g.useState(null),[ue,W]=g.useState(!1);g.useEffect(()=>{me(),ae()},[]),g.useEffect(()=>{ae()},[i,d,m]);const me=async()=>{try{const[R,oe]=await Promise.all([J.get("/admin/users?role=ABOGADO"),J.get("/admin/users?role=CLIENTE")]);s(R.data),l(oe.data)}catch(R){console.error("Error fetching users:",R)}},ae=async()=>{try{b(!0);const R={};i&&(R.lawyerId=i),d&&(R.clientId=d),m&&(R.paymentDate=m);const oe=await J.get("/invoices",{params:R});console.log("📊 Admin invoices response:",oe.data),r(oe.data),v(null)}catch(R){console.error("Error fetching invoices:",R),v("Error al cargar las facturas"),r([])}finally{b(!1)}},xe=async R=>{K(R),U(!0)},Me=async R=>{k(R.id);try{const oe=await J.get(`/invoices/${R.id}/pdf-qr`,{responseType:"blob"}),Ae=new Blob([oe.data],{type:"application/pdf"}),he=window.URL.createObjectURL(Ae),Ke=document.createElement("a");Ke.href=he,Ke.target="_blank",Ke.download=`factura_${R.numeroFactura||R.id}.pdf`,document.body.appendChild(Ke),Ke.click(),document.body.removeChild(Ke),window.URL.revokeObjectURL(he),O(`✅ PDF de factura ${R.numeroFactura} descargado`),setTimeout(()=>O(null),3e3)}catch(oe){console.error("Error downloading PDF:",oe),v("Error al descargar el PDF de la factura"),setTimeout(()=>v(null),3e3)}finally{k(null)}},Be=R=>{h(R),w(!0)},Q=async R=>{if(confirm("¿Estás seguro de que quieres eliminar esta factura? Esta acción no se puede deshacer.")){S(R);try{await J.delete(`/invoices/${R}`),O("✅ Factura eliminada correctamente"),ae(),setTimeout(()=>O(null),5e3)}catch(oe){console.error("Error deleting invoice:",oe),v("Error al eliminar la factura"),setTimeout(()=>v(null),5e3)}finally{S(null)}}},de=R=>{F(R),M(!0)},ke=async R=>{X(R),B(!0),W(!0);try{const oe=await J.get(`/invoices/${R.id}/audit-history`);G(oe.data)}catch(oe){console.error("Error fetching audit history:",oe),v("Error al cargar el historial de auditoría"),setTimeout(()=>v(null),5e3)}finally{W(!1)}},Ve=R=>{var Ae,he;const oe={ID:R.id,"Número de Factura":R.numeroFactura,"Fecha de Factura":R.fechaFactura,"Fecha de Creación":R.createdAt,"Última Actualización":R.updatedAt,Estado:R.estado,"XML Generado":R.xml?"Sí":"No","XML Firmado":R.xmlFirmado?"Sí":"No","Sello de Tiempo":R.selloTiempo||"No aplicado",Emisor:R.emisor?`${R.emisor.name} (${R.emisor.email})`:"No especificado",Receptor:R.receptor?`${R.receptor.name} (${R.receptor.email})`:"No especificado",Expediente:R.expediente?`${R.expediente.title} (ID: ${R.expediente.id})`:"No asociado",Items:((Ae=R.items)==null?void 0:Ae.length)||0,Provisiones:((he=R.provisionFondos)==null?void 0:he.length)||0};return Object.entries(oe).map(([Ke,Ye])=>`${Ke}: ${Ye}`).join(`
`)},we=async R=>{var oe;if(R.preventDefault(),!!p)try{const Ae={fechaFactura:p.fechaFactura,estado:p.estado,paymentDate:p.paymentDate,tipoIVA:p.tipoIVA,descuento:p.descuento,retencion:p.retencion,items:(oe=p.items)==null?void 0:oe.map(he=>({description:he.description,quantity:he.quantity,unitPrice:he.unitPrice}))};await J.put(`/invoices/${p.id}`,Ae),O("✅ Factura actualizada correctamente"),w(!1),ae(),setTimeout(()=>O(null),5e3)}catch(Ae){console.error("Error updating invoice:",Ae),v("Error al actualizar la factura"),setTimeout(()=>v(null),5e3)}},Pe=R=>new Date(R).toLocaleDateString("es-ES"),He=R=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(R||0),tt=async(R,oe)=>{I(oe);try{await navigator.clipboard.writeText(R),O(`✅ ${oe} copiado al portapapeles`),setTimeout(()=>O(null),3e3)}catch{v("Error al copiar al portapapeles"),setTimeout(()=>v(null),3e3)}finally{I(null)}},vr=R=>{$(oe=>oe.includes(R)?oe.filter(Ae=>Ae!==R):[...oe,R])},yr=()=>{A.length===t.length?$([]):$(t.map(R=>R.id))},Qr=()=>{if(t.length===0){v("No hay facturas para exportar"),setTimeout(()=>v(null),3e3);return}const oe=[["ID","Número Factura","Fecha Factura","Importe Total","Estado","Abogado","Cliente","Fecha de Pago","Base Imponible","IVA","Fecha de Creación"].join(","),...t.map(Ye=>{var ft,_;return[Ye.id,Ye.numeroFactura||"",Ye.fechaFactura||"",Ye.importeTotal||0,Ye.estado||"",((ft=Ye.emisor)==null?void 0:ft.name)||"",((_=Ye.receptor)==null?void 0:_.name)||"",Ye.paymentDate||"",Ye.baseImponible||0,Ye.cuotaIVA||0,Ye.createdAt||""].join(",")})].join(`
`),Ae=new Blob([oe],{type:"text/csv;charset=utf-8;"}),he=document.createElement("a"),Ke=URL.createObjectURL(Ae);he.setAttribute("href",Ke),he.setAttribute("download",`facturas_${new Date().toISOString().split("T")[0]}.csv`),he.style.visibility="hidden",document.body.appendChild(he),he.click(),document.body.removeChild(he),O("✅ CSV exportado correctamente"),setTimeout(()=>O(null),3e3)},re=R=>{var he,Ke,Ye,ft;const oe={"Número de Factura":R.numeroFactura||"N/A","Fecha de Factura":R.fechaFactura?Pe(R.fechaFactura):"N/A","Importe Total":He(R.importeTotal||0),Estado:R.estado||"N/A",Abogado:((he=R.emisor)==null?void 0:he.name)||"N/A",Cliente:((Ke=R.receptor)==null?void 0:Ke.name)||"N/A","Fecha de Pago":R.paymentDate?Pe(R.paymentDate):"N/A","Base Imponible":He(R.baseImponible||0),IVA:He(R.cuotaIVA||0),Items:((Ye=R.items)==null?void 0:Ye.length)||0,Provisiones:((ft=R.provisionFondos)==null?void 0:ft.length)||0},Ae=Object.entries(oe).map(([_,ne])=>`${_}: ${ne}`).join(`
`);tt(Ae,`Datos de factura ${R.numeroFactura}`)},ge=()=>{if(A.length===0){v("No hay facturas seleccionadas"),setTimeout(()=>v(null),3e3);return}const Ae=t.filter(he=>A.includes(he.id)).map(he=>{var Ke,Ye;return{"Número de Factura":he.numeroFactura||"N/A","Fecha de Factura":he.fechaFactura?Pe(he.fechaFactura):"N/A","Importe Total":He(he.importeTotal||0),Estado:he.estado||"N/A",Abogado:((Ke=he.emisor)==null?void 0:Ke.name)||"N/A",Cliente:((Ye=he.receptor)==null?void 0:Ye.name)||"N/A"}}).map((he,Ke)=>`Factura ${Ke+1}:
${Object.entries(he).map(([Ye,ft])=>`${Ye}: ${ft}`).join(`
`)}`).join(`

`);tt(Ae,`Datos de ${A.length} facturas seleccionadas`)},be=({invoice:R})=>{var oe,Ae,he,Ke,Ye;return n.createElement("div",{className:"bg-white p-8 max-w-4xl mx-auto"},n.createElement("div",{className:"border-b-2 border-gray-300 pb-6 mb-6"},n.createElement("div",{className:"flex justify-between items-start"},n.createElement("div",null,n.createElement("h1",{className:"text-3xl font-bold text-gray-800 mb-2"},"FACTURA"),n.createElement("div",{className:"my-4 flex flex-col items-center"},R.qrData?n.createElement(n.Fragment,null,n.createElement("h4",{className:"text-xs text-gray-600 mb-1"},"Código QR de la factura"),n.createElement(L2,{value:R.qrData,size:120}),n.createElement("pre",{className:"text-xs mt-1 bg-gray-100 p-1 rounded"},R.qrData)):n.createElement("span",{className:"text-xs text-gray-400"},"QR no disponible")),n.createElement("div",{className:"text-lg text-gray-600"},n.createElement("div",null,n.createElement("strong",null,"Número:")," ",R.numeroFactura||"N/A"),n.createElement("div",null,n.createElement("strong",null,"Fecha:")," ",R.fechaFactura?Pe(R.fechaFactura):"N/A"),n.createElement("div",null,n.createElement("strong",null,"Estado:")," ",n.createElement("span",{className:`px-2 py-1 rounded text-xs ${R.estado==="emitida"?"bg-green-100 text-green-800":R.estado==="pagada"?"bg-blue-100 text-blue-800":R.estado==="anulada"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`},(R.estado||"N/A").toUpperCase())))),n.createElement("div",{className:"text-right text-gray-600"},n.createElement("div",null,n.createElement("strong",null,"Fecha de Operación:")," ",R.fechaOperacion?Pe(R.fechaOperacion):"N/A"),n.createElement("div",null,n.createElement("strong",null,"Método de Pago:")," ",R.metodoPago||"N/A"),n.createElement("div",null,n.createElement("strong",null,"Clave de Operación:")," ",R.claveOperacion||"N/A")))),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8"},n.createElement("div",null,n.createElement("h3",{className:"text-lg font-bold text-gray-800 mb-3"},"DATOS DEL EMISOR"),n.createElement("div",{className:"bg-gray-50 p-4 rounded border"},n.createElement("div",null,n.createElement("strong",null,"Nombre:")," ",((oe=R.emisor)==null?void 0:oe.name)||"N/A"),n.createElement("div",null,n.createElement("strong",null,"Email:")," ",((Ae=R.emisor)==null?void 0:Ae.email)||"N/A"),n.createElement("div",null,n.createElement("strong",null,"Régimen IVA:")," ",R.regimenIvaEmisor||"N/A"))),n.createElement("div",null,n.createElement("h3",{className:"text-lg font-bold text-gray-800 mb-3"},"DATOS DEL RECEPTOR"),n.createElement("div",{className:"bg-gray-50 p-4 rounded border"},n.createElement("div",null,n.createElement("strong",null,"Nombre:")," ",((he=R.receptor)==null?void 0:he.name)||"N/A"),n.createElement("div",null,n.createElement("strong",null,"Email:")," ",((Ke=R.receptor)==null?void 0:Ke.email)||"N/A"),R.expediente&&n.createElement("div",null,n.createElement("strong",null,"Expediente:")," ",R.expediente.title)))),R.items&&R.items.length>0&&n.createElement("div",{className:"mb-8"},n.createElement("h3",{className:"text-lg font-bold text-gray-800 mb-3"},"CONCEPTOS"),n.createElement("table",{className:"w-full border-collapse border border-gray-300"},n.createElement("thead",null,n.createElement("tr",{className:"bg-gray-100"},n.createElement("th",{className:"border border-gray-300 px-3 py-2 text-left"},"Descripción"),n.createElement("th",{className:"border border-gray-300 px-3 py-2 text-center"},"Cantidad"),n.createElement("th",{className:"border border-gray-300 px-3 py-2 text-right"},"Precio Unitario"),n.createElement("th",{className:"border border-gray-300 px-3 py-2 text-right"},"Total"))),n.createElement("tbody",null,R.items.map((ft,_)=>n.createElement("tr",{key:_,className:_%2===0?"bg-white":"bg-gray-50"},n.createElement("td",{className:"border border-gray-300 px-3 py-2"},ft.description),n.createElement("td",{className:"border border-gray-300 px-3 py-2 text-center"},ft.quantity),n.createElement("td",{className:"border border-gray-300 px-3 py-2 text-right"},He(ft.unitPrice)),n.createElement("td",{className:"border border-gray-300 px-3 py-2 text-right font-semibold"},He(ft.total))))))),R.descuento&&R.descuento>0&&n.createElement("div",{className:"mb-8"},n.createElement("h3",{className:"text-lg font-bold text-gray-800 mb-3"},"DESCUENTOS"),n.createElement("div",{className:"bg-yellow-50 p-4 rounded border border-yellow-200"},n.createElement("div",{className:"flex justify-between items-center"},n.createElement("span",{className:"font-semibold text-yellow-800"},"Descuento (",R.descuento,"%)"),n.createElement("span",{className:"font-bold text-yellow-800 text-lg"},"-",He((((Ye=R.items)==null?void 0:Ye.reduce((ft,_)=>ft+_.quantity*_.unitPrice,0))||0)*(R.descuento/100)))))),R.provisionFondos&&R.provisionFondos.length>0&&n.createElement("div",{className:"mb-8"},n.createElement("h3",{className:"text-lg font-bold text-gray-800 mb-3"},"PROVISIONES DE FONDOS ASOCIADAS"),n.createElement("div",{className:"bg-blue-50 p-4 rounded border"},n.createElement("table",{className:"w-full"},n.createElement("thead",null,n.createElement("tr",{className:"border-b border-blue-200"},n.createElement("th",{className:"text-left py-2"},"Descripción"),n.createElement("th",{className:"text-right py-2"},"Fecha"),n.createElement("th",{className:"text-right py-2"},"Importe"))),n.createElement("tbody",null,R.provisionFondos.map(ft=>n.createElement("tr",{key:ft.id,className:"border-b border-blue-100"},n.createElement("td",{className:"py-2"},ft.description||"Sin descripción"),n.createElement("td",{className:"text-right py-2"},Pe(ft.date)),n.createElement("td",{className:"text-right py-2 font-semibold"},He(ft.amount)))))))),n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"flex justify-end"},n.createElement("div",{className:"w-64 space-y-2"},n.createElement("div",{className:"flex justify-between"},n.createElement("span",null,"Base Imponible:"),n.createElement("span",{className:"font-semibold"},He(R.baseImponible??0))),n.createElement("div",{className:"flex justify-between"},n.createElement("span",null,"IVA (",R.tipoIVA??21,"%):"),n.createElement("span",{className:"font-semibold"},He(R.cuotaIVA??0))),n.createElement("div",{className:"flex justify-between text-lg font-bold border-t border-gray-300 pt-2"},n.createElement("span",null,"TOTAL:"),n.createElement("span",null,He(R.importeTotal??0)))))),n.createElement("div",{className:"mt-8 pt-6 border-t border-gray-200"},n.createElement("div",{className:"grid grid-cols-2 gap-8 text-sm text-gray-600"},n.createElement("div",null,n.createElement("div",null,n.createElement("strong",null,"Método de pago:")," ",R.metodoPago||"N/A"),n.createElement("div",null,n.createElement("strong",null,"Clave de operación:")," ",R.claveOperacion||"N/A")),n.createElement("div",null,n.createElement("div",null,n.createElement("strong",null,"Fecha de creación:")," ",Pe(R.createdAt)),R.motivoAnulacion&&n.createElement("div",null,n.createElement("strong",null,"Motivo de anulación:")," ",R.motivoAnulacion)))),n.createElement("div",{className:"mt-8 pt-6 border-t border-gray-200 flex justify-end space-x-4"},n.createElement("button",{onClick:()=>Me(R),disabled:C===R.id,className:`px-4 py-2 rounded flex items-center space-x-2 ${C===R.id?"bg-gray-400 text-white cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`},n.createElement("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})),n.createElement("span",null,C===R.id?"Descargando...":"📄 Descargar PDF")),n.createElement("button",{onClick:()=>re(R),disabled:P!==null,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50 flex items-center space-x-2"},n.createElement("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})),n.createElement("span",null,P===`Datos de factura ${R.numeroFactura}`?"Copiando...":"📋 Copiar Datos"))))};return x?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})):n.createElement("div",{className:"py-6"},n.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"bg-white rounded-lg shadow p-6"},n.createElement("div",{className:"flex justify-between items-center mb-6"},n.createElement("div",null,n.createElement("h1",{className:"text-2xl font-semibold mb-2"},"Gestión de Facturas"),n.createElement("p",{className:"text-gray-600"},"Administra todas las facturas del sistema")),n.createElement("div",{className:"flex space-x-2"},n.createElement("button",{onClick:Qr,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 flex items-center space-x-2",title:"Exportar todas las facturas a CSV"},n.createElement("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})),n.createElement("span",null,"Exportar CSV")),n.createElement("button",{onClick:ae,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center space-x-2"},n.createElement("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})),n.createElement("span",null,"Refrescar")))),D&&n.createElement("div",{className:"mb-4 p-3 bg-green-100 text-green-700 rounded"},D),y&&n.createElement("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded"},y),n.createElement("div",{className:"flex flex-wrap gap-4 mb-6"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Abogado"),n.createElement("select",{value:i,onChange:R=>c(R.target.value),className:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},n.createElement("option",{value:""},"Todos"),a.map(R=>n.createElement("option",{key:R.id,value:R.id},R.name)))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Cliente"),n.createElement("select",{value:d,onChange:R=>u(R.target.value),className:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},n.createElement("option",{value:""},"Todos"),o.map(R=>n.createElement("option",{key:R.id,value:R.id},R.name)))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Fecha de pago"),n.createElement("input",{type:"date",value:m,onChange:R=>f(R.target.value),className:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})),n.createElement("div",{className:"flex items-end"},n.createElement("button",{onClick:()=>{c(""),u(""),f("")},className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700"},"Limpiar Filtros"))),t.length===0?n.createElement("div",{className:"text-center py-12"},n.createElement("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})),n.createElement("h3",{className:"mt-2 text-sm font-medium text-gray-900"},"No se encontraron facturas"),n.createElement("p",{className:"mt-1 text-sm text-gray-500"},i||d||m?"Intenta ajustar los filtros de búsqueda.":"No hay facturas registradas en el sistema.")):n.createElement(n.Fragment,null,A.length>0&&n.createElement("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg"},n.createElement("div",{className:"flex items-center justify-between"},n.createElement("span",{className:"text-sm text-blue-800"},A.length," factura",A.length!==1?"s":""," seleccionada",A.length!==1?"s":""),n.createElement("div",{className:"flex space-x-2"},n.createElement("button",{onClick:ge,disabled:P!==null,className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 disabled:opacity-50",title:"Copiar datos de facturas seleccionadas"},P?"📋 Copiando...":"📋 Copiar Seleccionadas"),n.createElement("button",{onClick:()=>$([]),className:"px-3 py-1 bg-gray-600 text-white text-sm rounded hover:bg-gray-700"},"Deseleccionar Todo")))),n.createElement("div",{className:"overflow-x-auto"},n.createElement("table",{className:"min-w-full divide-y divide-gray-200"},n.createElement("thead",{className:"bg-gray-50"},n.createElement("tr",null,n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},n.createElement("input",{type:"checkbox",checked:A.length===t.length&&t.length>0,onChange:yr,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",title:"Seleccionar todas las facturas"})),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Nº Factura"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Fecha"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Importe"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Estado"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Abogado"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Cliente"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Fecha de pago"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Acciones"))),n.createElement("tbody",{className:"bg-white divide-y divide-gray-200"},t.map(R=>{var oe,Ae;return n.createElement("tr",{key:R.id,className:"hover:bg-gray-50"},n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("input",{type:"checkbox",checked:A.includes(R.id),onChange:()=>vr(R.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",title:`Seleccionar factura ${R.numeroFactura}`})),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},R.numeroFactura||"N/A"),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},R.fechaFactura?Pe(R.fechaFactura):"N/A"),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},He(R.importeTotal||0)),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${R.estado==="emitida"?"bg-green-100 text-green-800":R.estado==="pagada"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`},R.estado||"N/A")),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},((oe=R.emisor)==null?void 0:oe.name)||"-"),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},((Ae=R.receptor)==null?void 0:Ae.name)||"-"),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},R.paymentDate?Pe(R.paymentDate):"-"),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium"},n.createElement("div",{className:"flex space-x-2"},n.createElement("button",{onClick:()=>xe(R),className:"text-blue-600 hover:text-blue-900 hover:bg-blue-50 px-2 py-1 rounded",title:"Ver factura completa con todos los detalles"},"👁️ Ver"),n.createElement("button",{onClick:()=>re(R),disabled:P!==null,className:"text-green-600 hover:text-green-900 px-2 py-1 rounded hover:bg-green-50",title:"Copiar datos de la factura"},P===`Datos de factura ${R.numeroFactura}`?"📋 Copiando...":"📋 Copiar"),n.createElement("button",{onClick:()=>Be(R),className:"text-yellow-600 hover:text-yellow-900 px-2 py-1 rounded hover:bg-yellow-50",title:"Editar factura"},"✏️ Editar"),n.createElement("button",{onClick:()=>Q(R.id),disabled:N===R.id,className:`px-2 py-1 rounded ${N===R.id?"text-gray-400 cursor-not-allowed":"text-red-600 hover:text-red-900 hover:bg-red-50"}`,title:"Eliminar factura"},N===R.id?"🗑️ Borrando...":"🗑️ Borrar"),n.createElement("button",{onClick:()=>de(R),className:"text-gray-600 hover:text-gray-900 px-2 py-1 rounded hover:bg-gray-50",title:"Ver metadatos técnicos"},"🔍 Metadatos"),n.createElement("button",{onClick:()=>ke(R),className:"text-purple-600 hover:text-purple-900 px-2 py-1 rounded hover:bg-purple-50",title:"Ver historial de cambios"},"📋 Auditoría"))))})))),n.createElement("div",{className:"mt-4 text-sm text-gray-500"},"Mostrando ",t.length," factura",t.length!==1?"s":"")))),E&&p&&n.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},n.createElement("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto"},n.createElement("div",{className:"flex justify-between items-center mb-4"},n.createElement("h2",{className:"text-xl font-bold"},"Editar Factura ",p.numeroFactura),n.createElement("button",{onClick:()=>w(!1),className:"text-gray-500 hover:text-gray-700 text-2xl"},"×")),n.createElement("form",{onSubmit:we,className:"space-y-6"},n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Número de Factura"),n.createElement("input",{type:"text",value:p.numeroFactura||"",readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500"}),n.createElement("p",{className:"text-xs text-gray-500 mt-1"},"No editable")),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Fecha de Factura"),n.createElement("input",{type:"date",value:p.fechaFactura?p.fechaFactura.split("T")[0]:"",onChange:R=>h({...p,fechaFactura:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Estado"),n.createElement("select",{value:p.estado||"emitida",onChange:R=>h({...p,estado:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"},n.createElement("option",{value:"emitida"},"Emitida"),n.createElement("option",{value:"pagada"},"Pagada"),n.createElement("option",{value:"anulada"},"Anulada"))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Fecha de Pago"),n.createElement("input",{type:"date",value:p.paymentDate?p.paymentDate.split("T")[0]:"",onChange:R=>h({...p,paymentDate:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"}))),n.createElement("div",{className:"border-t pt-4"},n.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-4"},"Configuración Fiscal"),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Tipo IVA (%)"),n.createElement("input",{type:"number",step:"0.01",value:p.tipoIVA||21,onChange:R=>h({...p,tipoIVA:parseFloat(R.target.value)||21}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Descuento (%)"),n.createElement("input",{type:"number",step:"0.01",value:p.descuento||0,onChange:R=>h({...p,descuento:parseFloat(R.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Retención (%)"),n.createElement("input",{type:"number",step:"0.01",value:p.retencion||0,onChange:R=>h({...p,retencion:parseFloat(R.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})))),n.createElement("div",{className:"border-t pt-4"},n.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-4"},"Conceptos"),n.createElement("div",{className:"space-y-3"},(De=p.items)==null?void 0:De.map((R,oe)=>n.createElement("div",{key:oe,className:"grid grid-cols-1 md:grid-cols-4 gap-3 p-3 border border-gray-200 rounded-md"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Descripción"),n.createElement("input",{type:"text",value:R.description,onChange:Ae=>{const he=[...p.items||[]];he[oe]={...he[oe],description:Ae.target.value},h({...p,items:he})},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Cantidad"),n.createElement("input",{type:"number",value:R.quantity,onChange:Ae=>{const he=[...p.items||[]];he[oe]={...he[oe],quantity:parseInt(Ae.target.value)||0,total:(parseInt(Ae.target.value)||0)*he[oe].unitPrice},h({...p,items:he})},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Precio Unitario"),n.createElement("input",{type:"number",step:"0.01",value:R.unitPrice,onChange:Ae=>{const he=[...p.items||[]];he[oe]={...he[oe],unitPrice:parseFloat(Ae.target.value)||0,total:he[oe].quantity*(parseFloat(Ae.target.value)||0)},h({...p,items:he})},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Total"),n.createElement("input",{type:"number",step:"0.01",value:R.total,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500"}))))),n.createElement("button",{type:"button",onClick:()=>{const R=[...p.items||[],{id:`temp-${Date.now()}`,description:"",quantity:1,unitPrice:0,total:0}];h({...p,items:R})},className:"mt-3 px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700"},"+ Agregar Concepto")),n.createElement("div",{className:"border-t pt-4"},n.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-4"},"Totales"),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Base Imponible"),n.createElement("input",{type:"number",step:"0.01",value:p.baseImponible||0,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Cuota IVA"),n.createElement("input",{type:"number",step:"0.01",value:p.cuotaIVA||0,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Importe Total"),n.createElement("input",{type:"number",step:"0.01",value:p.importeTotal||0,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500"})))),n.createElement("div",{className:"flex justify-end space-x-3 pt-4 border-t"},n.createElement("button",{type:"button",onClick:()=>w(!1),className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700"},"Cancelar"),n.createElement("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"},"Guardar Cambios"))))),T&&L&&n.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},n.createElement("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto"},n.createElement("div",{className:"flex justify-between items-center mb-4"},n.createElement("h2",{className:"text-xl font-bold"},"Metadatos - Factura ",L.numeroFactura),n.createElement("button",{onClick:()=>M(!1),className:"text-gray-500 hover:text-gray-700 text-2xl"},"×")),n.createElement("div",{className:"mb-4"},n.createElement("p",{className:"text-sm text-gray-600 mb-2"},"Información técnica de la factura. Puedes copiar estos datos al portapapeles.")),n.createElement("div",{className:"bg-gray-50 p-4 rounded-lg border"},n.createElement("pre",{className:"text-sm text-gray-800 whitespace-pre-wrap font-mono"},Ve(L))),n.createElement("div",{className:"flex justify-end space-x-3 mt-6"},n.createElement("button",{onClick:()=>{const R=Ve(L);tt(R,`Metadatos de factura ${L.numeroFactura}`)},disabled:P!==null,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 flex items-center space-x-2"},n.createElement("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})),n.createElement("span",null,P===`Metadatos de factura ${L.numeroFactura}`?"Copiando...":"Copiar Metadatos")),n.createElement("button",{onClick:()=>M(!1),className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700"},"Cerrar")))),z&&V&&n.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},n.createElement("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[95vh] overflow-y-auto"},n.createElement("div",{className:"flex justify-between items-center p-6 border-b border-gray-200"},n.createElement("h2",{className:"text-xl font-bold"},"Factura ",V.numeroFactura),n.createElement("button",{onClick:()=>U(!1),className:"text-gray-500 hover:text-gray-700 text-2xl"},"×")),n.createElement("div",{className:"p-6"},n.createElement(be,{invoice:V})))),j&&Y&&n.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},n.createElement("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[95vh] overflow-y-auto"},n.createElement("div",{className:"flex justify-between items-center p-6 border-b border-gray-200"},n.createElement("h2",{className:"text-xl font-bold"},"Historial de Auditoría - Factura ",Y.numeroFactura),n.createElement("button",{onClick:()=>B(!1),className:"text-gray-500 hover:text-gray-700 text-2xl"},"×")),n.createElement("div",{className:"p-6"},ue?n.createElement("div",{className:"flex items-center justify-center py-8"},n.createElement("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"}),n.createElement("span",{className:"ml-2"},"Cargando historial...")):H?n.createElement("div",{className:"space-y-6"},n.createElement("div",{className:"bg-blue-50 p-4 rounded-lg"},n.createElement("h3",{className:"text-lg font-medium text-blue-900 mb-2"},"Resumen de Cambios"),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm"},n.createElement("div",null,n.createElement("span",{className:"font-medium"},"Total de cambios:")," ",H.summary.totalChanges),n.createElement("div",null,n.createElement("span",{className:"font-medium"},"Última modificación:")," ",H.summary.lastModified?new Date(H.summary.lastModified).toLocaleString():"N/A"),n.createElement("div",null,n.createElement("span",{className:"font-medium"},"Último modificador:")," ",H.summary.lastModifiedBy||"N/A"))),Object.keys(H.summary.changesByField).length>0&&n.createElement("div",null,n.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-3"},"Cambios por Campo"),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},Object.entries(H.summary.changesByField).map(([R,oe])=>n.createElement("div",{key:R,className:"bg-gray-50 p-3 rounded"},n.createElement("span",{className:"font-medium"},R,":")," ",oe," cambio",oe!==1?"s":"")))),Object.keys(H.summary.changesByUser).length>0&&n.createElement("div",null,n.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-3"},"Cambios por Usuario"),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},Object.entries(H.summary.changesByUser).map(([R,oe])=>n.createElement("div",{key:R,className:"bg-gray-50 p-3 rounded"},n.createElement("span",{className:"font-medium"},R,":")," ",oe," cambio",oe!==1?"s":"")))),n.createElement("div",null,n.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-3"},"Historial Detallado"),n.createElement("div",{className:"space-y-3"},H.auditHistory.map(R=>{var oe,Ae;return n.createElement("div",{key:R.id,className:"border border-gray-200 rounded-lg p-4"},n.createElement("div",{className:"flex justify-between items-start mb-2"},n.createElement("div",{className:"flex items-center space-x-2"},n.createElement("span",{className:`px-2 py-1 text-xs rounded-full ${R.action==="created"?"bg-green-100 text-green-800":R.action==="updated"?"bg-blue-100 text-blue-800":R.action==="deleted"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`},R.action==="created"?"Creado":R.action==="updated"?"Actualizado":R.action==="deleted"?"Eliminado":R.action==="status_changed"?"Estado Cambiado":R.action),R.fieldName&&n.createElement("span",{className:"text-sm text-gray-600"},"Campo: ",R.fieldName)),n.createElement("span",{className:"text-sm text-gray-500"},new Date(R.createdAt).toLocaleString())),n.createElement("div",{className:"text-sm text-gray-700 mb-2"},R.description),R.fieldName&&R.oldValue!==R.newValue&&n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},n.createElement("div",null,n.createElement("span",{className:"font-medium text-red-600"},"Valor anterior:"),n.createElement("div",{className:"bg-red-50 p-2 rounded mt-1 break-all"},R.oldValue||"Vacío")),n.createElement("div",null,n.createElement("span",{className:"font-medium text-green-600"},"Nuevo valor:"),n.createElement("div",{className:"bg-green-50 p-2 rounded mt-1 break-all"},R.newValue||"Vacío"))),n.createElement("div",{className:"mt-3 pt-3 border-t border-gray-200"},n.createElement("div",{className:"flex justify-between items-center text-xs text-gray-500"},n.createElement("div",null,n.createElement("span",{className:"font-medium"},"Usuario:")," ",(oe=R.user)==null?void 0:oe.name," (",(Ae=R.user)==null?void 0:Ae.email,")"),R.ipAddress&&n.createElement("div",null,n.createElement("span",{className:"font-medium"},"IP:")," ",R.ipAddress)),R.userAgent&&n.createElement("div",{className:"text-xs text-gray-500 mt-1 break-all"},n.createElement("span",{className:"font-medium"},"User Agent:")," ",R.userAgent)))})))):n.createElement("div",{className:"text-center py-8 text-gray-500"},"No se encontró historial de auditoría para esta factura.")))))},dq=()=>{const[e,t]=g.useState(null),[r,a]=g.useState(!0),[s,o]=g.useState(null);g.useEffect(()=>{l()},[]);const l=async()=>{var u,m;try{a(!0);const f=localStorage.getItem("token"),x=await J.get("/admin/reports",{headers:{Authorization:`Bearer ${f}`}});t(x.data),o(null)}catch(f){console.error("Error fetching reports:",f),o(((m=(u=f.response)==null?void 0:u.data)==null?void 0:m.message)||"Error al cargar reportes")}finally{a(!1)}},i=u=>{if(!u||u===0)return"0 Bytes";const m=1024,f=["Bytes","KB","MB","GB"],x=Math.floor(Math.log(u)/Math.log(m));return parseFloat((u/Math.pow(m,x)).toFixed(2))+" "+f[x]},c=u=>{switch(u){case"ABIERTO":return"Abierto";case"EN_PROCESO":return"En Proceso";case"CERRADO":return"Cerrado";case"PENDIENTE":return"Pendiente";case"EN_PROGRESO":return"En Progreso";case"COMPLETADA":return"Completada";case"CANCELADA":return"Cancelada";default:return u}},d=u=>{switch(u){case"ADMIN":return"Administrador";case"ABOGADO":return"Abogado";case"CLIENTE":return"Cliente";default:return u}};return r?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})):s?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-red-600 text-xl mb-4"},"Error"),n.createElement("div",{className:"text-gray-600"},s),n.createElement("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},"Reintentar"))):n.createElement("div",{className:"py-6"},n.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"flex justify-between items-center"},n.createElement("div",null,n.createElement("h1",{className:"text-3xl font-bold text-gray-900"},"Reportes del Sistema"),n.createElement("p",{className:"mt-2 text-gray-600"},"Análisis y estadísticas del sistema")),n.createElement("button",{onClick:l,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"},"Actualizar"))),e&&n.createElement("div",{className:"space-y-6"},n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-4"},"Estadísticas de Expedientes"),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},e.casesByStatus.map(u=>n.createElement("div",{key:u.status,className:"bg-gray-50 p-4 rounded-lg"},n.createElement("div",{className:"text-sm font-medium text-gray-500"},c(u.status)),n.createElement("div",{className:"text-2xl font-semibold text-gray-900"},u._count.status))))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-4"},"Estadísticas de Tareas"),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4"},e.tasksByStatus.map(u=>n.createElement("div",{key:u.status,className:"bg-gray-50 p-4 rounded-lg"},n.createElement("div",{className:"text-sm font-medium text-gray-500"},c(u.status)),n.createElement("div",{className:"text-2xl font-semibold text-gray-900"},u._count.status))))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-4"},"Actividad de Usuarios"),n.createElement("div",{className:"overflow-x-auto"},n.createElement("table",{className:"min-w-full divide-y divide-gray-200"},n.createElement("thead",{className:"bg-gray-50"},n.createElement("tr",null,n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Usuario"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Rol"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Expedientes"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Citas"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Tareas"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Registro"))),n.createElement("tbody",{className:"bg-white divide-y divide-gray-200"},e.userActivity.map(u=>{var m,f,x;return n.createElement("tr",{key:u.id,className:"hover:bg-gray-50"},n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("div",{className:"text-sm font-medium text-gray-900"},u.name)),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800"},d(u.role))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},((m=u.expedientesAsLawyer)==null?void 0:m.length)||0),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},((f=u.appointmentsAsLawyer)==null?void 0:f.length)||0),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},((x=u.assignedTasks)==null?void 0:x.length)||0),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},new Date(u.createdAt).toLocaleDateString()))}))))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-4"},"Estadísticas de Documentos"),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},e.documentStats.map(u=>n.createElement("div",{key:u.mimeType,className:"bg-gray-50 p-4 rounded-lg"},n.createElement("div",{className:"text-sm font-medium text-gray-500"},u.mimeType),n.createElement("div",{className:"text-2xl font-semibold text-gray-900"},u._count.mimeType),n.createElement("div",{className:"text-sm text-gray-500"},i(u._sum.fileSize)))))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-4"},"Citas por Mes"),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},e.appointmentsByMonth.map(u=>n.createElement("div",{key:u.date,className:"bg-gray-50 p-4 rounded-lg"},n.createElement("div",{className:"text-sm font-medium text-gray-500"},new Date(u.date).toLocaleDateString("es-ES",{month:"long",year:"numeric"})),n.createElement("div",{className:"text-2xl font-semibold text-gray-900"},u._count.date))))))))};async function mq(e){return(await J.get("/parametros",{headers:{Authorization:`Bearer ${e}`}})).data}async function fq(e,t){return(await J.post("/parametros",e,{headers:{Authorization:`Bearer ${t}`}})).data}async function pq(e,t,r){return(await J.put(`/parametros/${e}`,t,{headers:{Authorization:`Bearer ${r}`}})).data}async function hq(e,t){await J.delete(`/parametros/${e}`,{headers:{Authorization:`Bearer ${t}`}})}const gq=()=>{const e=localStorage.getItem("token"),[t,r]=g.useState([]),[a,s]=g.useState(!0),[o,l]=g.useState(null),[i,c]=g.useState(!1),[d,u]=g.useState(null),[m,f]=g.useState({}),[x,b]=g.useState(!1),y=async()=>{var N,S;s(!0),l(null);try{if(!e)throw new Error("No autenticado");const C=await mq(e);r(C)}catch(C){l(((S=(N=C.response)==null?void 0:N.data)==null?void 0:S.message)||C.message||"Error al cargar parámetros")}finally{s(!1)}};g.useEffect(()=>{y()},[e]);const v=N=>{u(N||null),f(N||{}),c(!0)},p=()=>{c(!1),u(null),f({})},h=N=>{f({...m,[N.target.name]:N.target.value})},E=async()=>{var N,S;b(!0),l(null);try{if(!e)throw new Error("No autenticado");d?await pq(d.id,{valor:m.valor,etiqueta:m.etiqueta,tipo:m.tipo},e):await fq({clave:m.clave,valor:m.valor,etiqueta:m.etiqueta,tipo:m.tipo},e),await y(),p()}catch(C){l(((S=(N=C.response)==null?void 0:N.data)==null?void 0:S.message)||C.message||"Error al guardar parámetro")}finally{b(!1)}},w=async N=>{var S,C;if(window.confirm("¿Seguro que deseas eliminar este parámetro?")){l(null),b(!0);try{if(!e)throw new Error("No autenticado");await hq(N,e),await y()}catch(k){l(((C=(S=k.response)==null?void 0:S.data)==null?void 0:C.message)||k.message||"Error al eliminar parámetro")}finally{b(!1)}}};return n.createElement("div",{className:"max-w-3xl mx-auto py-8"},n.createElement("h1",{className:"text-2xl font-bold mb-6"},"Configuración de Parámetros Globales"),n.createElement("div",{className:"mb-4 flex justify-between items-center"},n.createElement("button",{className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",onClick:async()=>{var N,S;if(window.confirm("¿Desea inicializar los parámetros por defecto? Esto creará o actualizará los parámetros básicos del sistema."))try{if(!e)throw new Error("No autenticado");await fetch("/api/parametros/initialize",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}}),await y(),alert("Parámetros inicializados correctamente")}catch(C){l(((S=(N=C.response)==null?void 0:N.data)==null?void 0:S.message)||C.message||"Error al inicializar parámetros")}}},"🔧 Inicializar Parámetros"),n.createElement("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",onClick:()=>v()},"Nuevo Parámetro")),a?n.createElement("div",{className:"text-center py-8"},"Cargando..."):o?n.createElement("div",{className:"text-center text-red-600"},o):n.createElement("table",{className:"min-w-full bg-white border rounded shadow"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",{className:"px-4 py-2 border"},"Clave"),n.createElement("th",{className:"px-4 py-2 border"},"Valor"),n.createElement("th",{className:"px-4 py-2 border"},"Etiqueta"),n.createElement("th",{className:"px-4 py-2 border"},"Tipo"),n.createElement("th",{className:"px-4 py-2 border"},"Acciones"))),n.createElement("tbody",null,t.map(N=>n.createElement("tr",{key:N.id},n.createElement("td",{className:"px-4 py-2 border font-mono text-sm"},N.clave),n.createElement("td",{className:"px-4 py-2 border"},N.tipo==="html"?n.createElement("div",{className:"max-w-xs"},n.createElement("div",{className:"text-xs text-gray-500 mb-1"},"HTML Content"),n.createElement("div",{className:"text-xs bg-gray-100 p-2 rounded max-h-20 overflow-y-auto"},N.valor.substring(0,100),"...")):N.valor.length>50?n.createElement("div",{className:"max-w-xs"},n.createElement("div",{className:"text-sm truncate",title:N.valor},N.valor.substring(0,50),"...")):n.createElement("span",{className:"text-sm"},N.valor)),n.createElement("td",{className:"px-4 py-2 border text-sm"},N.etiqueta),n.createElement("td",{className:"px-4 py-2 border"},n.createElement("span",{className:`px-2 py-1 rounded text-xs font-medium ${N.tipo==="html"?"bg-purple-100 text-purple-800":N.tipo==="email"?"bg-blue-100 text-blue-800":N.tipo==="url"?"bg-green-100 text-green-800":N.tipo==="text"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`},N.tipo)),n.createElement("td",{className:"px-4 py-2 border"},n.createElement("button",{className:"text-blue-600 hover:underline mr-2 text-sm",onClick:()=>v(N)},"Editar"),n.createElement("button",{className:"text-red-600 hover:underline text-sm",onClick:()=>w(N.id),disabled:x},"Eliminar")))))),i&&n.createElement("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-30 z-50"},n.createElement("div",{className:"bg-white rounded-lg shadow-lg p-8 w-full max-w-md"},n.createElement("h2",{className:"text-xl font-bold mb-4"},d?"Editar":"Nuevo"," Parámetro"),o&&n.createElement("div",{className:"text-red-600 mb-2"},o),n.createElement("div",{className:"mb-4"},n.createElement("label",{className:"block mb-1 font-medium"},"Clave"),n.createElement("input",{type:"text",name:"clave",value:m.clave||"",onChange:h,className:"w-full border px-3 py-2 rounded",disabled:!!d})),n.createElement("div",{className:"mb-4"},n.createElement("label",{className:"block mb-1 font-medium"},"Valor"),m.tipo==="html"||m.tipo==="text"?n.createElement("textarea",{name:"valor",value:m.valor||"",onChange:N=>f({...m,valor:N.target.value}),className:"w-full border px-3 py-2 rounded",rows:m.tipo==="html"?10:5,placeholder:m.tipo==="html"?"Contenido HTML...":"Texto largo..."}):n.createElement("input",{type:m.tipo==="email"?"email":m.tipo==="number"?"number":"text",name:"valor",value:m.valor||"",onChange:h,className:"w-full border px-3 py-2 rounded"})),n.createElement("div",{className:"mb-4"},n.createElement("label",{className:"block mb-1 font-medium"},"Etiqueta"),n.createElement("input",{type:"text",name:"etiqueta",value:m.etiqueta||"",onChange:h,className:"w-full border px-3 py-2 rounded"})),n.createElement("div",{className:"mb-4"},n.createElement("label",{className:"block mb-1 font-medium"},"Tipo"),n.createElement("select",{name:"tipo",value:m.tipo||"",onChange:h,className:"w-full border px-3 py-2 rounded"},n.createElement("option",{value:""},"Selecciona tipo"),n.createElement("option",{value:"string"},"Texto"),n.createElement("option",{value:"number"},"Número"),n.createElement("option",{value:"email"},"Email"),n.createElement("option",{value:"url"},"URL"),n.createElement("option",{value:"text"},"Texto largo"),n.createElement("option",{value:"html"},"HTML"),n.createElement("option",{value:"image"},"Imagen/Base64"),n.createElement("option",{value:"boolean"},"Booleano"))),n.createElement("div",{className:"flex justify-end space-x-2"},n.createElement("button",{className:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",onClick:p,disabled:x},"Cancelar"),n.createElement("button",{className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:E,disabled:x},x?"Guardando...":"Guardar")))))};function vq(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return g.useMemo(()=>a=>{t.forEach(s=>s(a))},t)}const Hd=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function $o(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function t0(e){return"nodeType"in e}function nr(e){var t,r;return e?$o(e)?e:t0(e)&&(t=(r=e.ownerDocument)==null?void 0:r.defaultView)!=null?t:window:window}function r0(e){const{Document:t}=nr(e);return e instanceof t}function Pi(e){return $o(e)?!1:e instanceof nr(e).HTMLElement}function I2(e){return e instanceof nr(e).SVGElement}function Fo(e){return e?$o(e)?e.document:t0(e)?r0(e)?e:Pi(e)||I2(e)?e.ownerDocument:document:document:document}const Rn=Hd?g.useLayoutEffect:g.useEffect;function Yd(e){const t=g.useRef(e);return Rn(()=>{t.current=e}),g.useCallback(function(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return t.current==null?void 0:t.current(...a)},[])}function yq(){const e=g.useRef(null),t=g.useCallback((a,s)=>{e.current=setInterval(a,s)},[]),r=g.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,r]}function ii(e,t){t===void 0&&(t=[e]);const r=g.useRef(e);return Rn(()=>{r.current!==e&&(r.current=e)},t),r}function Li(e,t){const r=g.useRef();return g.useMemo(()=>{const a=e(r.current);return r.current=a,a},[...t])}function Mu(e){const t=Yd(e),r=g.useRef(null),a=g.useCallback(s=>{s!==r.current&&(t==null||t(s,r.current)),r.current=s},[]);return[r,a]}function Pu(e){const t=g.useRef();return g.useEffect(()=>{t.current=e},[e]),t.current}let Km={};function qd(e,t){return g.useMemo(()=>{if(t)return t;const r=Km[e]==null?0:Km[e]+1;return Km[e]=r,e+"-"+r},[e,t])}function $2(e){return function(t){for(var r=arguments.length,a=new Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];return a.reduce((o,l)=>{const i=Object.entries(l);for(const[c,d]of i){const u=o[c];u!=null&&(o[c]=u+e*d)}return o},{...t})}}const eo=$2(1),Lu=$2(-1);function Eq(e){return"clientX"in e&&"clientY"in e}function Gd(e){if(!e)return!1;const{KeyboardEvent:t}=nr(e.target);return t&&e instanceof t}function xq(e){if(!e)return!1;const{TouchEvent:t}=nr(e.target);return t&&e instanceof t}function Iu(e){if(xq(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return Eq(e)?{x:e.clientX,y:e.clientY}:null}const Ia=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[Ia.Translate.toString(e),Ia.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:a}=e;return t+" "+r+"ms "+a}}}),kE="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function bq(e){return e.matches(kE)?e:e.querySelector(kE)}const wq={display:"none"};function Nq(e){let{id:t,value:r}=e;return n.createElement("div",{id:t,style:wq},r)}function Sq(e){let{id:t,announcement:r,ariaLiveType:a="assertive"}=e;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return n.createElement("div",{id:t,style:s,role:"status","aria-live":a,"aria-atomic":!0},r)}function Cq(){const[e,t]=g.useState("");return{announce:g.useCallback(a=>{a!=null&&t(a)},[]),announcement:e}}const F2=g.createContext(null);function kq(e){const t=g.useContext(F2);g.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function Dq(){const[e]=g.useState(()=>new Set),t=g.useCallback(a=>(e.add(a),()=>e.delete(a)),[e]);return[g.useCallback(a=>{let{type:s,event:o}=a;e.forEach(l=>{var i;return(i=l[s])==null?void 0:i.call(l,o)})},[e]),t]}const Aq={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Tq={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function _q(e){let{announcements:t=Tq,container:r,hiddenTextDescribedById:a,screenReaderInstructions:s=Aq}=e;const{announce:o,announcement:l}=Cq(),i=qd("DndLiveRegion"),[c,d]=g.useState(!1);if(g.useEffect(()=>{d(!0)},[]),kq(g.useMemo(()=>({onDragStart(m){let{active:f}=m;o(t.onDragStart({active:f}))},onDragMove(m){let{active:f,over:x}=m;t.onDragMove&&o(t.onDragMove({active:f,over:x}))},onDragOver(m){let{active:f,over:x}=m;o(t.onDragOver({active:f,over:x}))},onDragEnd(m){let{active:f,over:x}=m;o(t.onDragEnd({active:f,over:x}))},onDragCancel(m){let{active:f,over:x}=m;o(t.onDragCancel({active:f,over:x}))}}),[o,t])),!c)return null;const u=n.createElement(n.Fragment,null,n.createElement(Nq,{id:a,value:s.draggable}),n.createElement(Sq,{id:i,announcement:l}));return r?es.createPortal(u,r):u}var Tt;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Tt||(Tt={}));function $u(){}function Oq(e,t){return g.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function Rq(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return g.useMemo(()=>[...t].filter(a=>a!=null),[...t])}const fn=Object.freeze({x:0,y:0});function Mq(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Pq(e,t){const r=Iu(e);if(!r)return"0 0";const a={x:(r.x-t.left)/t.width*100,y:(r.y-t.top)/t.height*100};return a.x+"% "+a.y+"%"}function Lq(e,t){let{data:{value:r}}=e,{data:{value:a}}=t;return r-a}function Iq(e,t){let{data:{value:r}}=e,{data:{value:a}}=t;return a-r}function $q(e,t){if(!e||e.length===0)return null;const[r]=e;return r[t]}function DE(e,t,r){return t===void 0&&(t=e.left),r===void 0&&(r=e.top),{x:t+e.width*.5,y:r+e.height*.5}}const Fq=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:a}=e;const s=DE(t,t.left,t.top),o=[];for(const l of a){const{id:i}=l,c=r.get(i);if(c){const d=Mq(DE(c),s);o.push({id:i,data:{droppableContainer:l,value:d}})}}return o.sort(Lq)};function jq(e,t){const r=Math.max(t.top,e.top),a=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),o=Math.min(t.top+t.height,e.top+e.height),l=s-a,i=o-r;if(a<s&&r<o){const c=t.width*t.height,d=e.width*e.height,u=l*i,m=u/(c+d-u);return Number(m.toFixed(4))}return 0}const Bq=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:a}=e;const s=[];for(const o of a){const{id:l}=o,i=r.get(l);if(i){const c=jq(i,t);c>0&&s.push({id:l,data:{droppableContainer:o,value:c}})}}return s.sort(Iq)};function zq(e,t,r){return{...e,scaleX:t&&r?t.width/r.width:1,scaleY:t&&r?t.height/r.height:1}}function j2(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:fn}function Uq(e){return function(r){for(var a=arguments.length,s=new Array(a>1?a-1:0),o=1;o<a;o++)s[o-1]=arguments[o];return s.reduce((l,i)=>({...l,top:l.top+e*i.y,bottom:l.bottom+e*i.y,left:l.left+e*i.x,right:l.right+e*i.x}),{...r})}}const Vq=Uq(1);function B2(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Wq(e,t,r){const a=B2(t);if(!a)return e;const{scaleX:s,scaleY:o,x:l,y:i}=a,c=e.left-l-(1-s)*parseFloat(r),d=e.top-i-(1-o)*parseFloat(r.slice(r.indexOf(" ")+1)),u=s?e.width/s:e.width,m=o?e.height/o:e.height;return{width:u,height:m,top:d,right:c+u,bottom:d+m,left:c}}const Hq={ignoreTransform:!1};function jo(e,t){t===void 0&&(t=Hq);let r=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:d,transformOrigin:u}=nr(e).getComputedStyle(e);d&&(r=Wq(r,d,u))}const{top:a,left:s,width:o,height:l,bottom:i,right:c}=r;return{top:a,left:s,width:o,height:l,bottom:i,right:c}}function AE(e){return jo(e,{ignoreTransform:!0})}function Yq(e){const t=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:t,bottom:r,width:t,height:r}}function qq(e,t){return t===void 0&&(t=nr(e).getComputedStyle(e)),t.position==="fixed"}function Gq(e,t){t===void 0&&(t=nr(e).getComputedStyle(e));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const o=t[s];return typeof o=="string"?r.test(o):!1})}function n0(e,t){const r=[];function a(s){if(t!=null&&r.length>=t||!s)return r;if(r0(s)&&s.scrollingElement!=null&&!r.includes(s.scrollingElement))return r.push(s.scrollingElement),r;if(!Pi(s)||I2(s)||r.includes(s))return r;const o=nr(e).getComputedStyle(s);return s!==e&&Gq(s,o)&&r.push(s),qq(s,o)?r:a(s.parentNode)}return e?a(e):r}function z2(e){const[t]=n0(e,1);return t??null}function Xm(e){return!Hd||!e?null:$o(e)?e:t0(e)?r0(e)||e===Fo(e).scrollingElement?window:Pi(e)?e:null:null}function U2(e){return $o(e)?e.scrollX:e.scrollLeft}function V2(e){return $o(e)?e.scrollY:e.scrollTop}function Rp(e){return{x:U2(e),y:V2(e)}}var Lt;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Lt||(Lt={}));function W2(e){return!Hd||!e?!1:e===document.scrollingElement}function H2(e){const t={x:0,y:0},r=W2(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},a={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},s=e.scrollTop<=t.y,o=e.scrollLeft<=t.x,l=e.scrollTop>=a.y,i=e.scrollLeft>=a.x;return{isTop:s,isLeft:o,isBottom:l,isRight:i,maxScroll:a,minScroll:t}}const Kq={x:.2,y:.2};function Xq(e,t,r,a,s){let{top:o,left:l,right:i,bottom:c}=r;a===void 0&&(a=10),s===void 0&&(s=Kq);const{isTop:d,isBottom:u,isLeft:m,isRight:f}=H2(e),x={x:0,y:0},b={x:0,y:0},y={height:t.height*s.y,width:t.width*s.x};return!d&&o<=t.top+y.height?(x.y=Lt.Backward,b.y=a*Math.abs((t.top+y.height-o)/y.height)):!u&&c>=t.bottom-y.height&&(x.y=Lt.Forward,b.y=a*Math.abs((t.bottom-y.height-c)/y.height)),!f&&i>=t.right-y.width?(x.x=Lt.Forward,b.x=a*Math.abs((t.right-y.width-i)/y.width)):!m&&l<=t.left+y.width&&(x.x=Lt.Backward,b.x=a*Math.abs((t.left+y.width-l)/y.width)),{direction:x,speed:b}}function Qq(e){if(e===document.scrollingElement){const{innerWidth:o,innerHeight:l}=window;return{top:0,left:0,right:o,bottom:l,width:o,height:l}}const{top:t,left:r,right:a,bottom:s}=e.getBoundingClientRect();return{top:t,left:r,right:a,bottom:s,width:e.clientWidth,height:e.clientHeight}}function Y2(e){return e.reduce((t,r)=>eo(t,Rp(r)),fn)}function Jq(e){return e.reduce((t,r)=>t+U2(r),0)}function Zq(e){return e.reduce((t,r)=>t+V2(r),0)}function q2(e,t){if(t===void 0&&(t=jo),!e)return;const{top:r,left:a,bottom:s,right:o}=t(e);z2(e)&&(s<=0||o<=0||r>=window.innerHeight||a>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const eG=[["x",["left","right"],Jq],["y",["top","bottom"],Zq]];class a0{constructor(t,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const a=n0(r),s=Y2(a);this.rect={...t},this.width=t.width,this.height=t.height;for(const[o,l,i]of eG)for(const c of l)Object.defineProperty(this,c,{get:()=>{const d=i(a),u=s[o]-d;return this.rect[c]+u},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class bl{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var a;return(a=this.target)==null?void 0:a.removeEventListener(...r)})},this.target=t}add(t,r,a){var s;(s=this.target)==null||s.addEventListener(t,r,a),this.listeners.push([t,r,a])}}function tG(e){const{EventTarget:t}=nr(e);return e instanceof t?e:Fo(e)}function Qm(e,t){const r=Math.abs(e.x),a=Math.abs(e.y);return typeof t=="number"?Math.sqrt(r**2+a**2)>t:"x"in t&&"y"in t?r>t.x&&a>t.y:"x"in t?r>t.x:"y"in t?a>t.y:!1}var Pr;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Pr||(Pr={}));function TE(e){e.preventDefault()}function rG(e){e.stopPropagation()}var We;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(We||(We={}));const G2={start:[We.Space,We.Enter],cancel:[We.Esc],end:[We.Space,We.Enter,We.Tab]},nG=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case We.Right:return{...r,x:r.x+25};case We.Left:return{...r,x:r.x-25};case We.Down:return{...r,y:r.y+25};case We.Up:return{...r,y:r.y-25}}};class K2{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:r}}=t;this.props=t,this.listeners=new bl(Fo(r)),this.windowListeners=new bl(nr(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Pr.Resize,this.handleCancel),this.windowListeners.add(Pr.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Pr.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:r}=this.props,a=t.node.current;a&&q2(a),r(fn)}handleKeyDown(t){if(Gd(t)){const{active:r,context:a,options:s}=this.props,{keyboardCodes:o=G2,coordinateGetter:l=nG,scrollBehavior:i="smooth"}=s,{code:c}=t;if(o.end.includes(c)){this.handleEnd(t);return}if(o.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:d}=a.current,u=d?{x:d.left,y:d.top}:fn;this.referenceCoordinates||(this.referenceCoordinates=u);const m=l(t,{active:r,context:a.current,currentCoordinates:u});if(m){const f=Lu(m,u),x={x:0,y:0},{scrollableAncestors:b}=a.current;for(const y of b){const v=t.code,{isTop:p,isRight:h,isLeft:E,isBottom:w,maxScroll:N,minScroll:S}=H2(y),C=Qq(y),k={x:Math.min(v===We.Right?C.right-C.width/2:C.right,Math.max(v===We.Right?C.left:C.left+C.width/2,m.x)),y:Math.min(v===We.Down?C.bottom-C.height/2:C.bottom,Math.max(v===We.Down?C.top:C.top+C.height/2,m.y))},D=v===We.Right&&!h||v===We.Left&&!E,O=v===We.Down&&!w||v===We.Up&&!p;if(D&&k.x!==m.x){const A=y.scrollLeft+f.x,$=v===We.Right&&A<=N.x||v===We.Left&&A>=S.x;if($&&!f.y){y.scrollTo({left:A,behavior:i});return}$?x.x=y.scrollLeft-A:x.x=v===We.Right?y.scrollLeft-N.x:y.scrollLeft-S.x,x.x&&y.scrollBy({left:-x.x,behavior:i});break}else if(O&&k.y!==m.y){const A=y.scrollTop+f.y,$=v===We.Down&&A<=N.y||v===We.Up&&A>=S.y;if($&&!f.x){y.scrollTo({top:A,behavior:i});return}$?x.y=y.scrollTop-A:x.y=v===We.Down?y.scrollTop-N.y:y.scrollTop-S.y,x.y&&y.scrollBy({top:-x.y,behavior:i});break}}this.handleMove(t,eo(Lu(m,this.referenceCoordinates),x))}}}handleMove(t,r){const{onMove:a}=this.props;t.preventDefault(),a(r)}handleEnd(t){const{onEnd:r}=this.props;t.preventDefault(),this.detach(),r()}handleCancel(t){const{onCancel:r}=this.props;t.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}K2.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:a=G2,onActivation:s}=t,{active:o}=r;const{code:l}=e.nativeEvent;if(a.start.includes(l)){const i=o.activatorNode.current;return i&&e.target!==i?!1:(e.preventDefault(),s==null||s({event:e.nativeEvent}),!0)}return!1}}];function _E(e){return!!(e&&"distance"in e)}function OE(e){return!!(e&&"delay"in e)}class s0{constructor(t,r,a){var s;a===void 0&&(a=tG(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=r;const{event:o}=t,{target:l}=o;this.props=t,this.events=r,this.document=Fo(l),this.documentListeners=new bl(this.document),this.listeners=new bl(a),this.windowListeners=new bl(nr(l)),this.initialCoordinates=(s=Iu(o))!=null?s:fn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:r,bypassActivationConstraint:a}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Pr.Resize,this.handleCancel),this.windowListeners.add(Pr.DragStart,TE),this.windowListeners.add(Pr.VisibilityChange,this.handleCancel),this.windowListeners.add(Pr.ContextMenu,TE),this.documentListeners.add(Pr.Keydown,this.handleKeydown),r){if(a!=null&&a({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(OE(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(_E(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,r){const{active:a,onPending:s}=this.props;s(a,t,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:t}=this,{onStart:r}=this.props;t&&(this.activated=!0,this.documentListeners.add(Pr.Click,rG,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Pr.SelectionChange,this.removeTextSelection),r(t))}handleMove(t){var r;const{activated:a,initialCoordinates:s,props:o}=this,{onMove:l,options:{activationConstraint:i}}=o;if(!s)return;const c=(r=Iu(t))!=null?r:fn,d=Lu(s,c);if(!a&&i){if(_E(i)){if(i.tolerance!=null&&Qm(d,i.tolerance))return this.handleCancel();if(Qm(d,i.distance))return this.handleStart()}if(OE(i)&&Qm(d,i.tolerance))return this.handleCancel();this.handlePending(i,d);return}t.cancelable&&t.preventDefault(),l(c)}handleEnd(){const{onAbort:t,onEnd:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleCancel(){const{onAbort:t,onCancel:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleKeydown(t){t.code===We.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const aG={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class o0 extends s0{constructor(t){const{event:r}=t,a=Fo(r.target);super(t,aG,a)}}o0.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:a}=t;return!r.isPrimary||r.button!==0?!1:(a==null||a({event:r}),!0)}}];const sG={move:{name:"mousemove"},end:{name:"mouseup"}};var Mp;(function(e){e[e.RightClick=2]="RightClick"})(Mp||(Mp={}));class oG extends s0{constructor(t){super(t,sG,Fo(t.event.target))}}oG.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:a}=t;return r.button===Mp.RightClick?!1:(a==null||a({event:r}),!0)}}];const Jm={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class lG extends s0{constructor(t){super(t,Jm)}static setup(){return window.addEventListener(Jm.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Jm.move.name,t)};function t(){}}}lG.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:a}=t;const{touches:s}=r;return s.length>1?!1:(a==null||a({event:r}),!0)}}];var wl;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(wl||(wl={}));var Fu;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Fu||(Fu={}));function iG(e){let{acceleration:t,activator:r=wl.Pointer,canScroll:a,draggingRect:s,enabled:o,interval:l=5,order:i=Fu.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:u,delta:m,threshold:f}=e;const x=uG({delta:m,disabled:!o}),[b,y]=yq(),v=g.useRef({x:0,y:0}),p=g.useRef({x:0,y:0}),h=g.useMemo(()=>{switch(r){case wl.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case wl.DraggableRect:return s}},[r,s,c]),E=g.useRef(null),w=g.useCallback(()=>{const S=E.current;if(!S)return;const C=v.current.x*p.current.x,k=v.current.y*p.current.y;S.scrollBy(C,k)},[]),N=g.useMemo(()=>i===Fu.TreeOrder?[...d].reverse():d,[i,d]);g.useEffect(()=>{if(!o||!d.length||!h){y();return}for(const S of N){if((a==null?void 0:a(S))===!1)continue;const C=d.indexOf(S),k=u[C];if(!k)continue;const{direction:D,speed:O}=Xq(S,k,h,t,f);for(const A of["x","y"])x[A][D[A]]||(O[A]=0,D[A]=0);if(O.x>0||O.y>0){y(),E.current=S,b(w,l),v.current=O,p.current=D;return}}v.current={x:0,y:0},p.current={x:0,y:0},y()},[t,w,a,y,o,l,JSON.stringify(h),JSON.stringify(x),b,d,N,u,JSON.stringify(f)])}const cG={x:{[Lt.Backward]:!1,[Lt.Forward]:!1},y:{[Lt.Backward]:!1,[Lt.Forward]:!1}};function uG(e){let{delta:t,disabled:r}=e;const a=Pu(t);return Li(s=>{if(r||!a||!s)return cG;const o={x:Math.sign(t.x-a.x),y:Math.sign(t.y-a.y)};return{x:{[Lt.Backward]:s.x[Lt.Backward]||o.x===-1,[Lt.Forward]:s.x[Lt.Forward]||o.x===1},y:{[Lt.Backward]:s.y[Lt.Backward]||o.y===-1,[Lt.Forward]:s.y[Lt.Forward]||o.y===1}}},[r,t,a])}function dG(e,t){const r=t!=null?e.get(t):void 0,a=r?r.node.current:null;return Li(s=>{var o;return t==null?null:(o=a??s)!=null?o:null},[a,t])}function mG(e,t){return g.useMemo(()=>e.reduce((r,a)=>{const{sensor:s}=a,o=s.activators.map(l=>({eventName:l.eventName,handler:t(l.handler,a)}));return[...r,...o]},[]),[e,t])}var ci;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(ci||(ci={}));var Pp;(function(e){e.Optimized="optimized"})(Pp||(Pp={}));const RE=new Map;function fG(e,t){let{dragging:r,dependencies:a,config:s}=t;const[o,l]=g.useState(null),{frequency:i,measure:c,strategy:d}=s,u=g.useRef(e),m=v(),f=ii(m),x=g.useCallback(function(p){p===void 0&&(p=[]),!f.current&&l(h=>h===null?p:h.concat(p.filter(E=>!h.includes(E))))},[f]),b=g.useRef(null),y=Li(p=>{if(m&&!r)return RE;if(!p||p===RE||u.current!==e||o!=null){const h=new Map;for(let E of e){if(!E)continue;if(o&&o.length>0&&!o.includes(E.id)&&E.rect.current){h.set(E.id,E.rect.current);continue}const w=E.node.current,N=w?new a0(c(w),w):null;E.rect.current=N,N&&h.set(E.id,N)}return h}return p},[e,o,r,m,c]);return g.useEffect(()=>{u.current=e},[e]),g.useEffect(()=>{m||x()},[r,m]),g.useEffect(()=>{o&&o.length>0&&l(null)},[JSON.stringify(o)]),g.useEffect(()=>{m||typeof i!="number"||b.current!==null||(b.current=setTimeout(()=>{x(),b.current=null},i))},[i,m,x,...a]),{droppableRects:y,measureDroppableContainers:x,measuringScheduled:o!=null};function v(){switch(d){case ci.Always:return!1;case ci.BeforeDragging:return r;default:return!r}}}function l0(e,t){return Li(r=>e?r||(typeof t=="function"?t(e):e):null,[t,e])}function pG(e,t){return l0(e,t)}function hG(e){let{callback:t,disabled:r}=e;const a=Yd(t),s=g.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(a)},[a,r]);return g.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Kd(e){let{callback:t,disabled:r}=e;const a=Yd(t),s=g.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(a)},[r]);return g.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function gG(e){return new a0(jo(e),e)}function ME(e,t,r){t===void 0&&(t=gG);const[a,s]=g.useState(null);function o(){s(c=>{if(!e)return null;if(e.isConnected===!1){var d;return(d=c??r)!=null?d:null}const u=t(e);return JSON.stringify(c)===JSON.stringify(u)?c:u})}const l=hG({callback(c){if(e)for(const d of c){const{type:u,target:m}=d;if(u==="childList"&&m instanceof HTMLElement&&m.contains(e)){o();break}}}}),i=Kd({callback:o});return Rn(()=>{o(),e?(i==null||i.observe(e),l==null||l.observe(document.body,{childList:!0,subtree:!0})):(i==null||i.disconnect(),l==null||l.disconnect())},[e]),a}function vG(e){const t=l0(e);return j2(e,t)}const PE=[];function yG(e){const t=g.useRef(e),r=Li(a=>e?a&&a!==PE&&e&&t.current&&e.parentNode===t.current.parentNode?a:n0(e):PE,[e]);return g.useEffect(()=>{t.current=e},[e]),r}function EG(e){const[t,r]=g.useState(null),a=g.useRef(e),s=g.useCallback(o=>{const l=Xm(o.target);l&&r(i=>i?(i.set(l,Rp(l)),new Map(i)):null)},[]);return g.useEffect(()=>{const o=a.current;if(e!==o){l(o);const i=e.map(c=>{const d=Xm(c);return d?(d.addEventListener("scroll",s,{passive:!0}),[d,Rp(d)]):null}).filter(c=>c!=null);r(i.length?new Map(i):null),a.current=e}return()=>{l(e),l(o)};function l(i){i.forEach(c=>{const d=Xm(c);d==null||d.removeEventListener("scroll",s)})}},[s,e]),g.useMemo(()=>e.length?t?Array.from(t.values()).reduce((o,l)=>eo(o,l),fn):Y2(e):fn,[e,t])}function LE(e,t){t===void 0&&(t=[]);const r=g.useRef(null);return g.useEffect(()=>{r.current=null},t),g.useEffect(()=>{const a=e!==fn;a&&!r.current&&(r.current=e),!a&&r.current&&(r.current=null)},[e]),r.current?Lu(e,r.current):fn}function xG(e){g.useEffect(()=>{if(!Hd)return;const t=e.map(r=>{let{sensor:a}=r;return a.setup==null?void 0:a.setup()});return()=>{for(const r of t)r==null||r()}},e.map(t=>{let{sensor:r}=t;return r}))}function bG(e,t){return g.useMemo(()=>e.reduce((r,a)=>{let{eventName:s,handler:o}=a;return r[s]=l=>{o(l,t)},r},{}),[e,t])}function X2(e){return g.useMemo(()=>e?Yq(e):null,[e])}const IE=[];function wG(e,t){t===void 0&&(t=jo);const[r]=e,a=X2(r?nr(r):null),[s,o]=g.useState(IE);function l(){o(()=>e.length?e.map(c=>W2(c)?a:new a0(t(c),c)):IE)}const i=Kd({callback:l});return Rn(()=>{i==null||i.disconnect(),l(),e.forEach(c=>i==null?void 0:i.observe(c))},[e]),s}function Q2(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Pi(t)?t:e}function NG(e){let{measure:t}=e;const[r,a]=g.useState(null),s=g.useCallback(d=>{for(const{target:u}of d)if(Pi(u)){a(m=>{const f=t(u);return m?{...m,width:f.width,height:f.height}:f});break}},[t]),o=Kd({callback:s}),l=g.useCallback(d=>{const u=Q2(d);o==null||o.disconnect(),u&&(o==null||o.observe(u)),a(u?t(u):null)},[t,o]),[i,c]=Mu(l);return g.useMemo(()=>({nodeRef:i,rect:r,setRef:c}),[r,i,c])}const SG=[{sensor:o0,options:{}},{sensor:K2,options:{}}],CG={current:{}},Uc={draggable:{measure:AE},droppable:{measure:AE,strategy:ci.WhileDragging,frequency:Pp.Optimized},dragOverlay:{measure:jo}};class Nl extends Map{get(t){var r;return t!=null&&(r=super.get(t))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:r}=t;return!r})}getNodeFor(t){var r,a;return(r=(a=this.get(t))==null?void 0:a.node.current)!=null?r:void 0}}const kG={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Nl,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:$u},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Uc,measureDroppableContainers:$u,windowRect:null,measuringScheduled:!1},J2={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:$u,draggableNodes:new Map,over:null,measureDroppableContainers:$u},Ii=g.createContext(J2),Z2=g.createContext(kG);function DG(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Nl}}}function AG(e,t){switch(t.type){case Tt.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Tt.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Tt.DragEnd:case Tt.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Tt.RegisterDroppable:{const{element:r}=t,{id:a}=r,s=new Nl(e.droppable.containers);return s.set(a,r),{...e,droppable:{...e.droppable,containers:s}}}case Tt.SetDroppableDisabled:{const{id:r,key:a,disabled:s}=t,o=e.droppable.containers.get(r);if(!o||a!==o.key)return e;const l=new Nl(e.droppable.containers);return l.set(r,{...o,disabled:s}),{...e,droppable:{...e.droppable,containers:l}}}case Tt.UnregisterDroppable:{const{id:r,key:a}=t,s=e.droppable.containers.get(r);if(!s||a!==s.key)return e;const o=new Nl(e.droppable.containers);return o.delete(r),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function TG(e){let{disabled:t}=e;const{active:r,activatorEvent:a,draggableNodes:s}=g.useContext(Ii),o=Pu(a),l=Pu(r==null?void 0:r.id);return g.useEffect(()=>{if(!t&&!a&&o&&l!=null){if(!Gd(o)||document.activeElement===o.target)return;const i=s.get(l);if(!i)return;const{activatorNode:c,node:d}=i;if(!c.current&&!d.current)return;requestAnimationFrame(()=>{for(const u of[c.current,d.current]){if(!u)continue;const m=bq(u);if(m){m.focus();break}}})}},[a,t,s,l,o]),null}function eS(e,t){let{transform:r,...a}=t;return e!=null&&e.length?e.reduce((s,o)=>o({transform:s,...a}),r):r}function _G(e){return g.useMemo(()=>({draggable:{...Uc.draggable,...e==null?void 0:e.draggable},droppable:{...Uc.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Uc.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function OG(e){let{activeNode:t,measure:r,initialRect:a,config:s=!0}=e;const o=g.useRef(!1),{x:l,y:i}=typeof s=="boolean"?{x:s,y:s}:s;Rn(()=>{if(!l&&!i||!t){o.current=!1;return}if(o.current||!a)return;const d=t==null?void 0:t.node.current;if(!d||d.isConnected===!1)return;const u=r(d),m=j2(u,a);if(l||(m.x=0),i||(m.y=0),o.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const f=z2(d);f&&f.scrollBy({top:m.y,left:m.x})}},[t,l,i,a,r])}const Xd=g.createContext({...fn,scaleX:1,scaleY:1});var fa;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(fa||(fa={}));const RG=g.memo(function(t){var r,a,s,o;let{id:l,accessibility:i,autoScroll:c=!0,children:d,sensors:u=SG,collisionDetection:m=Bq,measuring:f,modifiers:x,...b}=t;const y=g.useReducer(AG,void 0,DG),[v,p]=y,[h,E]=Dq(),[w,N]=g.useState(fa.Uninitialized),S=w===fa.Initialized,{draggable:{active:C,nodes:k,translate:D},droppable:{containers:O}}=v,A=C!=null?k.get(C):null,$=g.useRef({initial:null,translated:null}),P=g.useMemo(()=>{var ie;return C!=null?{id:C,data:(ie=A==null?void 0:A.data)!=null?ie:CG,rect:$}:null},[C,A]),I=g.useRef(null),[L,F]=g.useState(null),[T,M]=g.useState(null),V=ii(b,Object.values(b)),K=qd("DndDescribedBy",l),z=g.useMemo(()=>O.getEnabled(),[O]),U=_G(f),{droppableRects:Y,measureDroppableContainers:X,measuringScheduled:j}=fG(z,{dragging:S,dependencies:[D.x,D.y],config:U.droppable}),B=dG(k,C),H=g.useMemo(()=>T?Iu(T):null,[T]),G=ve(),ue=pG(B,U.draggable.measure);OG({activeNode:C!=null?k.get(C):null,config:G.layoutShiftCompensation,initialRect:ue,measure:U.draggable.measure});const W=ME(B,U.draggable.measure,ue),me=ME(B?B.parentElement:null),ae=g.useRef({activatorEvent:null,active:null,activeNode:B,collisionRect:null,collisions:null,droppableRects:Y,draggableNodes:k,draggingNode:null,draggingNodeRect:null,droppableContainers:O,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),xe=O.getNodeFor((r=ae.current.over)==null?void 0:r.id),Me=NG({measure:U.dragOverlay.measure}),Be=(a=Me.nodeRef.current)!=null?a:B,Q=S?(s=Me.rect)!=null?s:W:null,de=!!(Me.nodeRef.current&&Me.rect),ke=vG(de?null:W),Ve=X2(Be?nr(Be):null),we=yG(S?xe??B:null),Pe=wG(we),He=eS(x,{transform:{x:D.x-ke.x,y:D.y-ke.y,scaleX:1,scaleY:1},activatorEvent:T,active:P,activeNodeRect:W,containerNodeRect:me,draggingNodeRect:Q,over:ae.current.over,overlayNodeRect:Me.rect,scrollableAncestors:we,scrollableAncestorRects:Pe,windowRect:Ve}),tt=H?eo(H,D):null,vr=EG(we),yr=LE(vr),Qr=LE(vr,[W]),re=eo(He,yr),ge=Q?Vq(Q,He):null,be=P&&ge?m({active:P,collisionRect:ge,droppableRects:Y,droppableContainers:z,pointerCoordinates:tt}):null,De=$q(be,"id"),[R,oe]=g.useState(null),Ae=de?He:eo(He,Qr),he=zq(Ae,(o=R==null?void 0:R.rect)!=null?o:null,W),Ke=g.useRef(null),Ye=g.useCallback((ie,Ie)=>{let{sensor:$e,options:Je}=Ie;if(I.current==null)return;const rt=k.get(I.current);if(!rt)return;const nt=ie.nativeEvent,vt=new $e({active:I.current,activeNode:rt,event:nt,options:Je,context:ae,onAbort(Xe){if(!k.get(Xe))return;const{onDragAbort:ar}=V.current,Er={id:Xe};ar==null||ar(Er),h({type:"onDragAbort",event:Er})},onPending(Xe,Tr,ar,Er){if(!k.get(Xe))return;const{onDragPending:Jr}=V.current,bt={id:Xe,constraint:Tr,initialCoordinates:ar,offset:Er};Jr==null||Jr(bt),h({type:"onDragPending",event:bt})},onStart(Xe){const Tr=I.current;if(Tr==null)return;const ar=k.get(Tr);if(!ar)return;const{onDragStart:Er}=V.current,$n={activatorEvent:nt,active:{id:Tr,data:ar.data,rect:$}};es.unstable_batchedUpdates(()=>{Er==null||Er($n),N(fa.Initializing),p({type:Tt.DragStart,initialCoordinates:Xe,active:Tr}),h({type:"onDragStart",event:$n}),F(Ke.current),M(nt)})},onMove(Xe){p({type:Tt.DragMove,coordinates:Xe})},onEnd:Oe(Tt.DragEnd),onCancel:Oe(Tt.DragCancel)});Ke.current=vt;function Oe(Xe){return async function(){const{active:ar,collisions:Er,over:$n,scrollAdjustedTranslate:Jr}=ae.current;let bt=null;if(ar&&Jr){const{cancelDrop:gn}=V.current;bt={activatorEvent:nt,active:ar,collisions:Er,delta:Jr,over:$n},Xe===Tt.DragEnd&&typeof gn=="function"&&await Promise.resolve(gn(bt))&&(Xe=Tt.DragCancel)}I.current=null,es.unstable_batchedUpdates(()=>{p({type:Xe}),N(fa.Uninitialized),oe(null),F(null),M(null),Ke.current=null;const gn=Xe===Tt.DragEnd?"onDragEnd":"onDragCancel";if(bt){const Bo=V.current[gn];Bo==null||Bo(bt),h({type:gn,event:bt})}})}}},[k]),ft=g.useCallback((ie,Ie)=>($e,Je)=>{const rt=$e.nativeEvent,nt=k.get(Je);if(I.current!==null||!nt||rt.dndKit||rt.defaultPrevented)return;const vt={active:nt};ie($e,Ie.options,vt)===!0&&(rt.dndKit={capturedBy:Ie.sensor},I.current=Je,Ye($e,Ie))},[k,Ye]),_=mG(u,ft);xG(u),Rn(()=>{W&&w===fa.Initializing&&N(fa.Initialized)},[W,w]),g.useEffect(()=>{const{onDragMove:ie}=V.current,{active:Ie,activatorEvent:$e,collisions:Je,over:rt}=ae.current;if(!Ie||!$e)return;const nt={active:Ie,activatorEvent:$e,collisions:Je,delta:{x:re.x,y:re.y},over:rt};es.unstable_batchedUpdates(()=>{ie==null||ie(nt),h({type:"onDragMove",event:nt})})},[re.x,re.y]),g.useEffect(()=>{const{active:ie,activatorEvent:Ie,collisions:$e,droppableContainers:Je,scrollAdjustedTranslate:rt}=ae.current;if(!ie||I.current==null||!Ie||!rt)return;const{onDragOver:nt}=V.current,vt=Je.get(De),Oe=vt&&vt.rect.current?{id:vt.id,rect:vt.rect.current,data:vt.data,disabled:vt.disabled}:null,Xe={active:ie,activatorEvent:Ie,collisions:$e,delta:{x:rt.x,y:rt.y},over:Oe};es.unstable_batchedUpdates(()=>{oe(Oe),nt==null||nt(Xe),h({type:"onDragOver",event:Xe})})},[De]),Rn(()=>{ae.current={activatorEvent:T,active:P,activeNode:B,collisionRect:ge,collisions:be,droppableRects:Y,draggableNodes:k,draggingNode:Be,draggingNodeRect:Q,droppableContainers:O,over:R,scrollableAncestors:we,scrollAdjustedTranslate:re},$.current={initial:Q,translated:ge}},[P,B,be,ge,k,Be,Q,Y,O,R,we,re]),iG({...G,delta:D,draggingRect:ge,pointerCoordinates:tt,scrollableAncestors:we,scrollableAncestorRects:Pe});const ne=g.useMemo(()=>({active:P,activeNode:B,activeNodeRect:W,activatorEvent:T,collisions:be,containerNodeRect:me,dragOverlay:Me,draggableNodes:k,droppableContainers:O,droppableRects:Y,over:R,measureDroppableContainers:X,scrollableAncestors:we,scrollableAncestorRects:Pe,measuringConfiguration:U,measuringScheduled:j,windowRect:Ve}),[P,B,W,T,be,me,Me,k,O,Y,R,X,we,Pe,U,j,Ve]),Ee=g.useMemo(()=>({activatorEvent:T,activators:_,active:P,activeNodeRect:W,ariaDescribedById:{draggable:K},dispatch:p,draggableNodes:k,over:R,measureDroppableContainers:X}),[T,_,P,W,p,K,k,R,X]);return n.createElement(F2.Provider,{value:E},n.createElement(Ii.Provider,{value:Ee},n.createElement(Z2.Provider,{value:ne},n.createElement(Xd.Provider,{value:he},d)),n.createElement(TG,{disabled:(i==null?void 0:i.restoreFocus)===!1})),n.createElement(_q,{...i,hiddenTextDescribedById:K}));function ve(){const ie=(L==null?void 0:L.autoScrollEnabled)===!1,Ie=typeof c=="object"?c.enabled===!1:c===!1,$e=S&&!ie&&!Ie;return typeof c=="object"?{...c,enabled:$e}:{enabled:$e}}}),MG=g.createContext(null),$E="button",PG="Draggable";function tS(e){let{id:t,data:r,disabled:a=!1,attributes:s}=e;const o=qd(PG),{activators:l,activatorEvent:i,active:c,activeNodeRect:d,ariaDescribedById:u,draggableNodes:m,over:f}=g.useContext(Ii),{role:x=$E,roleDescription:b="draggable",tabIndex:y=0}=s??{},v=(c==null?void 0:c.id)===t,p=g.useContext(v?Xd:MG),[h,E]=Mu(),[w,N]=Mu(),S=bG(l,t),C=ii(r);Rn(()=>(m.set(t,{id:t,key:o,node:h,activatorNode:w,data:C}),()=>{const D=m.get(t);D&&D.key===o&&m.delete(t)}),[m,t]);const k=g.useMemo(()=>({role:x,tabIndex:y,"aria-disabled":a,"aria-pressed":v&&x===$E?!0:void 0,"aria-roledescription":b,"aria-describedby":u.draggable}),[a,x,y,v,b,u.draggable]);return{active:c,activatorEvent:i,activeNodeRect:d,attributes:k,isDragging:v,listeners:a?void 0:S,node:h,over:f,setNodeRef:E,setActivatorNodeRef:N,transform:p}}function LG(){return g.useContext(Z2)}const IG="Droppable",$G={timeout:25};function rS(e){let{data:t,disabled:r=!1,id:a,resizeObserverConfig:s}=e;const o=qd(IG),{active:l,dispatch:i,over:c,measureDroppableContainers:d}=g.useContext(Ii),u=g.useRef({disabled:r}),m=g.useRef(!1),f=g.useRef(null),x=g.useRef(null),{disabled:b,updateMeasurementsFor:y,timeout:v}={...$G,...s},p=ii(y??a),h=g.useCallback(()=>{if(!m.current){m.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{d(Array.isArray(p.current)?p.current:[p.current]),x.current=null},v)},[v]),E=Kd({callback:h,disabled:b||!l}),w=g.useCallback((k,D)=>{E&&(D&&(E.unobserve(D),m.current=!1),k&&E.observe(k))},[E]),[N,S]=Mu(w),C=ii(t);return g.useEffect(()=>{!E||!N.current||(E.disconnect(),m.current=!1,E.observe(N.current))},[N,E]),g.useEffect(()=>(i({type:Tt.RegisterDroppable,element:{id:a,key:o,disabled:r,node:N,rect:f,data:C}}),()=>i({type:Tt.UnregisterDroppable,key:o,id:a})),[a]),g.useEffect(()=>{r!==u.current.disabled&&(i({type:Tt.SetDroppableDisabled,id:a,key:o,disabled:r}),u.current.disabled=r)},[a,o,r,i]),{active:l,rect:f,isOver:(c==null?void 0:c.id)===a,node:N,over:c,setNodeRef:S}}function FG(e){let{animation:t,children:r}=e;const[a,s]=g.useState(null),[o,l]=g.useState(null),i=Pu(r);return!r&&!a&&i&&s(i),Rn(()=>{if(!o)return;const c=a==null?void 0:a.key,d=a==null?void 0:a.props.id;if(c==null||d==null){s(null);return}Promise.resolve(t(d,o)).then(()=>{s(null)})},[t,a,o]),n.createElement(n.Fragment,null,r,a?g.cloneElement(a,{ref:l}):null)}const jG={x:0,y:0,scaleX:1,scaleY:1};function BG(e){let{children:t}=e;return n.createElement(Ii.Provider,{value:J2},n.createElement(Xd.Provider,{value:jG},t))}const zG={position:"fixed",touchAction:"none"},UG=e=>Gd(e)?"transform 250ms ease":void 0,VG=g.forwardRef((e,t)=>{let{as:r,activatorEvent:a,adjustScale:s,children:o,className:l,rect:i,style:c,transform:d,transition:u=UG}=e;if(!i)return null;const m=s?d:{...d,scaleX:1,scaleY:1},f={...zG,width:i.width,height:i.height,top:i.top,left:i.left,transform:Ia.Transform.toString(m),transformOrigin:s&&a?Pq(a,i):void 0,transition:typeof u=="function"?u(a):u,...c};return n.createElement(r,{className:l,style:f,ref:t},o)}),WG=e=>t=>{let{active:r,dragOverlay:a}=t;const s={},{styles:o,className:l}=e;if(o!=null&&o.active)for(const[i,c]of Object.entries(o.active))c!==void 0&&(s[i]=r.node.style.getPropertyValue(i),r.node.style.setProperty(i,c));if(o!=null&&o.dragOverlay)for(const[i,c]of Object.entries(o.dragOverlay))c!==void 0&&a.node.style.setProperty(i,c);return l!=null&&l.active&&r.node.classList.add(l.active),l!=null&&l.dragOverlay&&a.node.classList.add(l.dragOverlay),function(){for(const[c,d]of Object.entries(s))r.node.style.setProperty(c,d);l!=null&&l.active&&r.node.classList.remove(l.active)}},HG=e=>{let{transform:{initial:t,final:r}}=e;return[{transform:Ia.Transform.toString(t)},{transform:Ia.Transform.toString(r)}]},YG={duration:250,easing:"ease",keyframes:HG,sideEffects:WG({styles:{active:{opacity:"0"}}})};function qG(e){let{config:t,draggableNodes:r,droppableContainers:a,measuringConfiguration:s}=e;return Yd((o,l)=>{if(t===null)return;const i=r.get(o);if(!i)return;const c=i.node.current;if(!c)return;const d=Q2(l);if(!d)return;const{transform:u}=nr(l).getComputedStyle(l),m=B2(u);if(!m)return;const f=typeof t=="function"?t:GG(t);return q2(c,s.draggable.measure),f({active:{id:o,data:i.data,node:c,rect:s.draggable.measure(c)},draggableNodes:r,dragOverlay:{node:l,rect:s.dragOverlay.measure(d)},droppableContainers:a,measuringConfiguration:s,transform:m})})}function GG(e){const{duration:t,easing:r,sideEffects:a,keyframes:s}={...YG,...e};return o=>{let{active:l,dragOverlay:i,transform:c,...d}=o;if(!t)return;const u={x:i.rect.left-l.rect.left,y:i.rect.top-l.rect.top},m={scaleX:c.scaleX!==1?l.rect.width*c.scaleX/i.rect.width:1,scaleY:c.scaleY!==1?l.rect.height*c.scaleY/i.rect.height:1},f={x:c.x-u.x,y:c.y-u.y,...m},x=s({...d,active:l,dragOverlay:i,transform:{initial:c,final:f}}),[b]=x,y=x[x.length-1];if(JSON.stringify(b)===JSON.stringify(y))return;const v=a==null?void 0:a({active:l,dragOverlay:i,...d}),p=i.node.animate(x,{duration:t,easing:r,fill:"forwards"});return new Promise(h=>{p.onfinish=()=>{v==null||v(),h()}})}}let FE=0;function KG(e){return g.useMemo(()=>{if(e!=null)return FE++,FE},[e])}const XG=n.memo(e=>{let{adjustScale:t=!1,children:r,dropAnimation:a,style:s,transition:o,modifiers:l,wrapperElement:i="div",className:c,zIndex:d=999}=e;const{activatorEvent:u,active:m,activeNodeRect:f,containerNodeRect:x,draggableNodes:b,droppableContainers:y,dragOverlay:v,over:p,measuringConfiguration:h,scrollableAncestors:E,scrollableAncestorRects:w,windowRect:N}=LG(),S=g.useContext(Xd),C=KG(m==null?void 0:m.id),k=eS(l,{activatorEvent:u,active:m,activeNodeRect:f,containerNodeRect:x,draggingNodeRect:v.rect,over:p,overlayNodeRect:v.rect,scrollableAncestors:E,scrollableAncestorRects:w,transform:S,windowRect:N}),D=l0(f),O=qG({config:a,draggableNodes:b,droppableContainers:y,measuringConfiguration:h}),A=D?v.setRef:void 0;return n.createElement(BG,null,n.createElement(FG,{animation:O},m&&C?n.createElement(VG,{key:C,id:m.id,ref:A,as:i,activatorEvent:u,adjustScale:t,className:c,transition:o,rect:D,style:{zIndex:d,...s},transform:k},r):null))});function i0(e,t,r){const a=e.slice();return a.splice(r<0?a.length+r:r,0,a.splice(t,1)[0]),a}function mc(e){return e!==null&&e>=0}const QG=e=>{let{rects:t,activeIndex:r,overIndex:a,index:s}=e;const o=i0(t,a,r),l=t[s],i=o[s];return!i||!l?null:{x:i.left-l.left,y:i.top-l.top,scaleX:i.width/l.width,scaleY:i.height/l.height}},JG="Sortable",ZG=n.createContext({activeIndex:-1,containerId:JG,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:QG,disabled:{draggable:!1,droppable:!1}}),eK=e=>{let{id:t,items:r,activeIndex:a,overIndex:s}=e;return i0(r,a,s).indexOf(t)},tK=e=>{let{containerId:t,isSorting:r,wasDragging:a,index:s,items:o,newIndex:l,previousItems:i,previousContainerId:c,transition:d}=e;return!d||!a||i!==o&&s===l?!1:r?!0:l!==s&&t===c},rK={duration:200,easing:"ease"},nS="transform",nK=Ia.Transition.toString({property:nS,duration:0,easing:"linear"}),aK={roleDescription:"sortable"};function sK(e){let{disabled:t,index:r,node:a,rect:s}=e;const[o,l]=g.useState(null),i=g.useRef(r);return Rn(()=>{if(!t&&r!==i.current&&a.current){const c=s.current;if(c){const d=jo(a.current,{ignoreTransform:!0}),u={x:c.left-d.left,y:c.top-d.top,scaleX:c.width/d.width,scaleY:c.height/d.height};(u.x||u.y)&&l(u)}}r!==i.current&&(i.current=r)},[t,r,a,s]),g.useEffect(()=>{o&&l(null)},[o]),o}function oK(e){let{animateLayoutChanges:t=tK,attributes:r,disabled:a,data:s,getNewIndex:o=eK,id:l,strategy:i,resizeObserverConfig:c,transition:d=rK}=e;const{items:u,containerId:m,activeIndex:f,disabled:x,disableTransforms:b,sortedRects:y,overIndex:v,useDragOverlay:p,strategy:h}=g.useContext(ZG),E=lK(a,x),w=u.indexOf(l),N=g.useMemo(()=>({sortable:{containerId:m,index:w,items:u},...s}),[m,s,w,u]),S=g.useMemo(()=>u.slice(u.indexOf(l)),[u,l]),{rect:C,node:k,isOver:D,setNodeRef:O}=rS({id:l,data:N,disabled:E.droppable,resizeObserverConfig:{updateMeasurementsFor:S,...c}}),{active:A,activatorEvent:$,activeNodeRect:P,attributes:I,setNodeRef:L,listeners:F,isDragging:T,over:M,setActivatorNodeRef:V,transform:K}=tS({id:l,data:N,attributes:{...aK,...r},disabled:E.draggable}),z=vq(O,L),U=!!A,Y=U&&!b&&mc(f)&&mc(v),X=!p&&T,j=X&&Y?K:null,H=Y?j??(i??h)({rects:y,activeNodeRect:P,activeIndex:f,overIndex:v,index:w}):null,G=mc(f)&&mc(v)?o({id:l,items:u,activeIndex:f,overIndex:v}):w,ue=A==null?void 0:A.id,W=g.useRef({activeId:ue,items:u,newIndex:G,containerId:m}),me=u!==W.current.items,ae=t({active:A,containerId:m,isDragging:T,isSorting:U,id:l,index:w,items:u,newIndex:W.current.newIndex,previousItems:W.current.items,previousContainerId:W.current.containerId,transition:d,wasDragging:W.current.activeId!=null}),xe=sK({disabled:!ae,index:w,node:k,rect:C});return g.useEffect(()=>{U&&W.current.newIndex!==G&&(W.current.newIndex=G),m!==W.current.containerId&&(W.current.containerId=m),u!==W.current.items&&(W.current.items=u)},[U,G,m,u]),g.useEffect(()=>{if(ue===W.current.activeId)return;if(ue!=null&&W.current.activeId==null){W.current.activeId=ue;return}const Be=setTimeout(()=>{W.current.activeId=ue},50);return()=>clearTimeout(Be)},[ue]),{active:A,activeIndex:f,attributes:I,data:N,rect:C,index:w,newIndex:G,items:u,isOver:D,isSorting:U,isDragging:T,listeners:F,node:k,overIndex:v,over:M,setNodeRef:z,setActivatorNodeRef:V,setDroppableNodeRef:O,setDraggableNodeRef:L,transform:xe??H,transition:Me()};function Me(){if(xe||me&&W.current.newIndex===w)return nK;if(!(X&&!Gd($)||!d)&&(U||ae))return Ia.Transition.toString({...d,property:nS})}}function lK(e,t){var r,a;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(r=e==null?void 0:e.draggable)!=null?r:t.draggable,droppable:(a=e==null?void 0:e.droppable)!=null?a:t.droppable}}We.Down,We.Right,We.Up,We.Left;const iK=()=>{console.log("ComponentLibrary - Rendering");const e=[{type:"hero-banner",name:"Banner Principal",description:"Banner destacado con título, subtítulo y botón CTA",icon:"🎯",category:"Contenido Principal",color:"bg-gradient-to-r from-blue-500 to-purple-600"},{type:"service-cards",name:"Tarjetas de Servicios",description:"Grid de servicios con iconos y descripciones",icon:"⚖️",category:"Servicios",color:"bg-gradient-to-r from-green-500 to-teal-600"},{type:"contact-form",name:"Formulario de Contacto",description:"Formulario para que los clientes se pongan en contacto",icon:"📧",category:"Contacto",color:"bg-gradient-to-r from-orange-500 to-red-600"},{type:"testimonials",name:"Testimonios",description:"Opiniones y comentarios de clientes satisfechos",icon:"💬",category:"Social Proof",color:"bg-gradient-to-r from-purple-500 to-pink-600"},{type:"stats",name:"Estadísticas",description:"Números y métricas importantes del despacho",icon:"📊",category:"Social Proof",color:"bg-gradient-to-r from-indigo-500 to-blue-600"},{type:"text-block",name:"Bloque de Texto",description:"Texto con título y contenido personalizable",icon:"📝",category:"Contenido",color:"bg-gradient-to-r from-gray-500 to-gray-700"},{type:"image-gallery",name:"Galería de Imágenes",description:"Grid de imágenes con títulos opcionales",icon:"🖼️",category:"Contenido",color:"bg-gradient-to-r from-yellow-500 to-orange-600"},{type:"map",name:"Mapa de Ubicación",description:"Mapa interactivo con la ubicación del despacho",icon:"🗺️",category:"Contacto",color:"bg-gradient-to-r from-teal-500 to-green-600"},{type:"divider",name:"Separador",description:"Línea divisoria para separar secciones",icon:"➖",category:"Layout",color:"bg-gradient-to-r from-gray-400 to-gray-600"},{type:"spacer",name:"Espaciador",description:"Espacio vertical para separar elementos",icon:"⬜",category:"Layout",color:"bg-gradient-to-r from-gray-300 to-gray-500"}],t=[...new Set(e.map(r=>r.category))];return n.createElement("div",{className:"bg-white rounded-lg shadow-sm border"},n.createElement("div",{className:"p-4 border-b bg-gradient-to-r from-blue-50 to-indigo-50"},n.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"📚 Biblioteca de Componentes"),n.createElement("p",{className:"text-sm text-gray-600"},"Arrastra componentes al canvas")),n.createElement("div",{className:"p-4 max-h-[800px] overflow-y-auto"},t.map(r=>n.createElement("div",{key:r,className:"mb-6"},n.createElement("h4",{className:"text-sm font-medium text-gray-700 mb-3 px-2 py-1 bg-gray-100 rounded"},r),n.createElement("div",{className:"space-y-2"},e.filter(a=>a.category===r).map(a=>n.createElement(cK,{key:a.type,component:a})))))))},cK=({component:e})=>{const{attributes:t,listeners:r,setNodeRef:a,transform:s,isDragging:o}=tS({id:e.type,data:{type:"component-library",component:e}}),l=s?{transform:`translate3d(${s.x}px, ${s.y}px, 0)`}:void 0;return console.log(`DraggableComponent - ${e.type} - isDragging:`,o),n.createElement("div",{ref:a,...r,...t,style:l,className:`
        p-4 border rounded-lg cursor-move transition-all hover:shadow-md
        ${o?"bg-blue-50 border-blue-300 shadow-lg opacity-50 scale-105":"bg-white border-gray-200 hover:border-blue-300 hover:bg-blue-50"}
      `},n.createElement("div",{className:"flex items-center space-x-3"},n.createElement("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center text-2xl ${e.color}`},e.icon),n.createElement("div",{className:"flex-1 min-w-0"},n.createElement("h5",{className:"text-sm font-semibold text-gray-900 truncate"},e.name),n.createElement("p",{className:"text-xs text-gray-500 mt-1 leading-relaxed"},e.description))),n.createElement("div",{className:"mt-2 text-xs text-gray-400 text-center"},"← Arrastra al canvas"))},uK=({layout:e,onComponentSelect:t,onComponentDelete:r,selectedComponent:a,isPreviewMode:s})=>{const{setNodeRef:o,isOver:l}=rS({id:"canvas-drop-zone"});return console.log("Canvas - Rendering, components:",e.components.length),console.log("Canvas - isPreviewMode:",s),n.createElement("div",{className:"bg-white rounded-lg shadow-sm border"},n.createElement("div",{className:"p-4 border-b bg-gradient-to-r from-green-50 to-emerald-50"},n.createElement("h3",{className:"text-lg font-semibold text-gray-900"},s?"👁️ Vista Previa":"🎨 Canvas de Diseño"),n.createElement("p",{className:"text-sm text-gray-600"},s?"Vista previa de la página principal":"Arrastra componentes aquí para diseñar la página")),n.createElement("div",{ref:o,className:`
          min-h-[600px] p-6 transition-all
          ${l?"bg-blue-50 border-2 border-dashed border-blue-400":"bg-gray-50 border-2 border-dashed border-gray-300"}
          ${s?"bg-white":""}
        `},e.components.length===0?n.createElement("div",{className:"flex flex-col items-center justify-center h-96 text-center"},n.createElement("div",{className:"text-6xl mb-4"},"🎨"),n.createElement("h3",{className:"text-xl font-semibold text-gray-700 mb-2"},"Canvas Vacío"),n.createElement("p",{className:"text-gray-500 mb-4 max-w-md"},s?"No hay componentes para mostrar en la vista previa":"Arrastra componentes desde la biblioteca para comenzar a diseñar"),!s&&n.createElement("div",{className:"text-sm text-gray-400"},"💡 Tip: Comienza con un Banner Principal")):n.createElement("div",{className:"space-y-4"},e.components.map((i,c)=>n.createElement(dK,{key:i.id,component:i,index:c,onSelect:t,onDelete:r,isSelected:(a==null?void 0:a.id)===i.id,isPreviewMode:s}))),l&&!s&&n.createElement("div",{className:"text-center py-8 text-blue-600 font-medium"},"✨ Suelta aquí para agregar el componente")))},dK=({component:e,index:t,onSelect:r,onDelete:a,isSelected:s,isPreviewMode:o})=>{const{attributes:l,listeners:i,setNodeRef:c,transform:d,transition:u,isDragging:m}=oK({id:e.id,data:{type:"canvas-component",component:e}}),f={transform:Ia.Transform.toString(d),transition:u};return console.log(`CanvasComponent - ${e.type} - isSelected:`,s),n.createElement("div",{ref:c,style:f,...l,...i,className:`
        relative group transition-all
        ${m?"opacity-50 scale-95":""}
        ${s&&!o?"ring-2 ring-blue-500 ring-offset-2":"hover:ring-1 hover:ring-gray-300"}
      `},!o&&n.createElement("div",{className:"absolute -top-2 -left-2 z-10 flex space-x-1 opacity-0 group-hover:opacity-100 transition-opacity"},n.createElement("button",{onClick:x=>{x.stopPropagation(),r(e)},className:"bg-blue-500 text-white p-1 rounded-full text-xs hover:bg-blue-600 transition-colors",title:"Editar componente"},"✏️"),n.createElement("button",{onClick:x=>{x.stopPropagation(),a(e.id)},className:"bg-red-500 text-white p-1 rounded-full text-xs hover:bg-red-600 transition-colors",title:"Eliminar componente"},"🗑️")),!o&&n.createElement("div",{className:"absolute -top-2 -right-2 bg-gray-500 text-white text-xs px-2 py-1 rounded-full"},t+1),n.createElement("div",{className:`
          ${o?"":"cursor-move"}
          ${s&&!o?"bg-blue-50":""}
        `,onClick:()=>!o&&r(e)},n.createElement(Kw,{component:e})),s&&!o&&n.createElement("div",{className:"absolute inset-0 border-2 border-blue-500 pointer-events-none rounded-lg"}))},mK=({component:e,onUpdate:t})=>{const[r,a]=g.useState(e.props);g.useEffect(()=>{a(e.props)},[e]),console.log("PropertiesPanel - Rendering for component:",e.type);const s=(d,u)=>{const m={...r,[d]:u};a(m),t(e.id,m)},o=(d,u,m,f)=>{const x=[...r[d]||[]];x[u]={...x[u],[m]:f},s(d,x)},l=(d,u)=>{const m=[...r[d]||[],u];s(d,m)},i=(d,u)=>{const m=[...r[d]||[]];m.splice(u,1),s(d,m)},c=()=>{switch(e.type){case"hero-banner":return n.createElement("div",{className:"space-y-4"},n.createElement(at,{label:"Título Principal",value:r.title||"",onChange:d=>s("title",d),type:"text",placeholder:"Ej: Despacho de Abogados García & Asociados"}),n.createElement(at,{label:"Subtítulo",value:r.subtitle||"",onChange:d=>s("subtitle",d),type:"textarea",placeholder:"Ej: Más de 15 años de experiencia en servicios legales profesionales"}),n.createElement(at,{label:"Texto del Botón",value:r.ctaText||"",onChange:d=>s("ctaText",d),type:"text",placeholder:"Ej: Consulta Gratuita"}),n.createElement(at,{label:"Enlace del Botón",value:r.ctaLink||"",onChange:d=>s("ctaLink",d),type:"text",placeholder:"Ej: /contacto o https://wa.me/34612345678"}));case"service-cards":return n.createElement("div",{className:"space-y-4"},n.createElement(at,{label:"Título de la Sección",value:r.title||"",onChange:d=>s("title",d),type:"text",placeholder:"Ej: Nuestros Servicios Legales"}),n.createElement("div",{className:"space-y-3"},n.createElement("div",{className:"flex justify-between items-center"},n.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Servicios"),n.createElement("button",{onClick:()=>l("services",{icon:"⚖️",title:"Nuevo Servicio",description:"Descripción del servicio"}),className:"text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600"},"+ Agregar")),(r.services||[]).map((d,u)=>n.createElement("div",{key:u,className:"p-3 border rounded-lg bg-gray-50 space-y-2"},n.createElement("div",{className:"flex justify-between items-center"},n.createElement("span",{className:"text-xs font-medium text-gray-600"},"Servicio ",u+1),n.createElement("button",{onClick:()=>i("services",u),className:"text-xs bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600"},"Eliminar")),n.createElement(at,{label:"Icono (emoji)",value:d.icon||"",onChange:m=>o("services",u,"icon",m),type:"text",placeholder:"Ej: ⚖️ 👥 🏢"}),n.createElement(at,{label:"Título del Servicio",value:d.title||"",onChange:m=>o("services",u,"title",m),type:"text",placeholder:"Ej: Derecho Civil"}),n.createElement(at,{label:"Descripción",value:d.description||"",onChange:m=>o("services",u,"description",m),type:"textarea",placeholder:"Ej: Asesoría especializada en casos civiles"})))));case"contact-form":return n.createElement("div",{className:"space-y-4"},n.createElement(at,{label:"Título del Formulario",value:r.title||"",onChange:d=>s("title",d),type:"text",placeholder:"Ej: Solicita tu Consulta Gratuita"}),n.createElement(at,{label:"Subtítulo",value:r.subtitle||"",onChange:d=>s("subtitle",d),type:"textarea",placeholder:"Ej: Nuestros abogados especialistas están listos para ayudarte"}),n.createElement(at,{label:"Texto del Botón",value:r.submitText||"",onChange:d=>s("submitText",d),type:"text",placeholder:"Ej: Enviar Consulta"}));case"testimonials":return n.createElement("div",{className:"space-y-4"},n.createElement(at,{label:"Título de la Sección",value:r.title||"",onChange:d=>s("title",d),type:"text",placeholder:"Ej: Lo que dicen nuestros clientes"}),n.createElement("div",{className:"space-y-3"},n.createElement("div",{className:"flex justify-between items-center"},n.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Testimonios"),n.createElement("button",{onClick:()=>l("testimonials",{name:"Cliente",text:"Excelente servicio",rating:5}),className:"text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600"},"+ Agregar")),(r.testimonials||[]).map((d,u)=>n.createElement("div",{key:u,className:"p-3 border rounded-lg bg-gray-50 space-y-2"},n.createElement("div",{className:"flex justify-between items-center"},n.createElement("span",{className:"text-xs font-medium text-gray-600"},"Testimonio ",u+1),n.createElement("button",{onClick:()=>i("testimonials",u),className:"text-xs bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600"},"Eliminar")),n.createElement(at,{label:"Nombre del Cliente",value:d.name||"",onChange:m=>o("testimonials",u,"name",m),type:"text",placeholder:"Ej: María García"}),n.createElement(at,{label:"Testimonio",value:d.text||"",onChange:m=>o("testimonials",u,"text",m),type:"textarea",placeholder:"Ej: Excelente servicio profesional..."})))));case"stats":return n.createElement("div",{className:"space-y-4"},n.createElement(at,{label:"Título de la Sección",value:r.title||"",onChange:d=>s("title",d),type:"text",placeholder:"Ej: Nuestros Números"}),n.createElement("div",{className:"space-y-3"},n.createElement("div",{className:"flex justify-between items-center"},n.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Estadísticas"),n.createElement("button",{onClick:()=>l("stats",{value:"0",label:"Nueva Estadística"}),className:"text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600"},"+ Agregar")),(r.stats||[]).map((d,u)=>n.createElement("div",{key:u,className:"p-3 border rounded-lg bg-gray-50 space-y-2"},n.createElement("div",{className:"flex justify-between items-center"},n.createElement("span",{className:"text-xs font-medium text-gray-600"},"Estadística ",u+1),n.createElement("button",{onClick:()=>i("stats",u),className:"text-xs bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600"},"Eliminar")),n.createElement(at,{label:"Valor",value:d.value||"",onChange:m=>o("stats",u,"value",m),type:"text",placeholder:"Ej: 500+"}),n.createElement(at,{label:"Etiqueta",value:d.label||"",onChange:m=>o("stats",u,"label",m),type:"text",placeholder:"Ej: Casos Exitosos"})))));case"text-block":return n.createElement("div",{className:"space-y-4"},n.createElement(at,{label:"Título",value:r.title||"",onChange:d=>s("title",d),type:"text",placeholder:"Ej: Sobre Nosotros"}),n.createElement(at,{label:"Contenido",value:r.content||"",onChange:d=>s("content",d),type:"textarea",placeholder:"Ej: Somos un despacho de abogados comprometido..."}),n.createElement(fc,{label:"Alineación del Texto",value:r.alignment||"left",onChange:d=>s("alignment",d),options:[{value:"left",label:"Izquierda"},{value:"center",label:"Centro"},{value:"right",label:"Derecha"}]}),n.createElement(fc,{label:"Tamaño de Fuente",value:r.fontSize||"medium",onChange:d=>s("fontSize",d),options:[{value:"small",label:"Pequeño"},{value:"medium",label:"Mediano"},{value:"large",label:"Grande"}]}));case"image-gallery":return n.createElement("div",{className:"space-y-4"},n.createElement(at,{label:"Título de la Galería",value:r.title||"",onChange:d=>s("title",d),type:"text",placeholder:"Ej: Nuestras Instalaciones"}),n.createElement(fc,{label:"Número de Columnas",value:r.columns||3,onChange:d=>s("columns",parseInt(d)),options:[{value:2,label:"2 columnas"},{value:3,label:"3 columnas"},{value:4,label:"4 columnas"}]}));case"map":return n.createElement("div",{className:"space-y-4"},n.createElement(at,{label:"Título",value:r.title||"",onChange:d=>s("title",d),type:"text",placeholder:"Ej: Nuestra Ubicación"}),n.createElement(at,{label:"Dirección",value:r.address||"",onChange:d=>s("address",d),type:"text",placeholder:"Ej: Calle Principal 123, Madrid"}));case"divider":return n.createElement("div",{className:"space-y-4"},n.createElement(fc,{label:"Tipo de Línea",value:r.type||"solid",onChange:d=>s("type",d),options:[{value:"solid",label:"Sólida"},{value:"dashed",label:"Punteada"},{value:"dotted",label:"Puntos"}]}),n.createElement(at,{label:"Color",value:r.color||"#e5e7eb",onChange:d=>s("color",d),type:"color"}),n.createElement(at,{label:"Grosor (px)",value:r.thickness||1,onChange:d=>s("thickness",parseInt(d)),type:"number"}));case"spacer":return n.createElement("div",{className:"space-y-4"},n.createElement(at,{label:"Altura (px)",value:r.height||40,onChange:d=>s("height",parseInt(d)),type:"number"}));default:return n.createElement("div",{className:"text-gray-500 text-center py-4"},"No hay propiedades editables para este componente")}};return n.createElement("div",{className:"bg-white rounded-lg shadow-sm border"},n.createElement("div",{className:"p-4 border-b bg-gradient-to-r from-purple-50 to-pink-50"},n.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"⚙️ Propiedades"),n.createElement("p",{className:"text-sm text-gray-600"},fK(e.type))),n.createElement("div",{className:"p-4 max-h-[600px] overflow-y-auto"},c()))},at=({label:e,value:t,onChange:r,type:a,placeholder:s})=>n.createElement("div",{className:"space-y-1"},n.createElement("label",{className:"block text-sm font-medium text-gray-700"},e),a==="textarea"?n.createElement("textarea",{value:t,onChange:o=>r(o.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",rows:3,placeholder:s}):n.createElement("input",{type:a,value:t,onChange:o=>r(o.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",placeholder:s})),fc=({label:e,value:t,onChange:r,options:a})=>n.createElement("div",{className:"space-y-1"},n.createElement("label",{className:"block text-sm font-medium text-gray-700"},e),n.createElement("select",{value:t,onChange:s=>r(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"},a.map(s=>n.createElement("option",{key:s.value,value:s.value},s.label)))),fK=e=>({"hero-banner":"Banner Principal","service-cards":"Tarjetas de Servicios","contact-form":"Formulario de Contacto",testimonials:"Testimonios",stats:"Estadísticas","text-block":"Bloque de Texto","image-gallery":"Galería de Imágenes",map:"Mapa de Ubicación",divider:"Separador",spacer:"Espaciador"})[e]||e,pK=()=>{const[e,t]=g.useState({id:"home-layout",name:"Home Page",components:[],version:1,lastModified:new Date().toISOString()}),[r,a]=g.useState(null),[s,o]=g.useState(!1),[l,i]=g.useState(null),c=Rq(Oq(o0,{activationConstraint:{distance:8}}));console.log("HomeBuilder - Rendering, components:",e.components.length);const d=v=>{console.log("Drag start:",v),i(v.active.id)},u=g.useCallback(v=>{var E;console.log("Drag end:",v);const{active:p,over:h}=v;if(i(null),!!h)if(((E=p.data.current)==null?void 0:E.type)==="component-library"){const w=p.id,N={id:`component-${Date.now()}`,type:w,props:hK(w),order:e.components.length};console.log("Adding new component:",N),t(S=>({...S,components:[...S.components,N]}))}else p.id!==h.id&&t(w=>({...w,components:i0(w.components,w.components.findIndex(N=>N.id===p.id),w.components.findIndex(N=>N.id===h.id)).map((N,S)=>({...N,order:S}))}))},[e.components]),m=g.useCallback(v=>{console.log("Component selected:",v),a(v)},[]),f=g.useCallback((v,p)=>{t(h=>({...h,components:h.components.map(E=>E.id===v?{...E,props:{...E.props,...p}}:E)}))},[]),x=g.useCallback(v=>{t(p=>({...p,components:p.components.filter(h=>h.id!==v)})),a(null)},[]),b=async()=>{try{console.log("Saving layout:",e),alert("Layout guardado exitosamente! (Modo demo)")}catch(v){console.error("Error saving layout:",v),alert("Error al guardar el layout")}},y=async()=>{try{console.log("Loading layout..."),alert("Layout cargado exitosamente! (Modo demo)")}catch(v){console.error("Error loading layout:",v)}};return n.createElement("div",{className:"min-h-screen bg-gray-50"},n.createElement("div",{className:"bg-white shadow-sm border-b"},n.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"flex justify-between items-center py-4"},n.createElement("div",null,n.createElement("h1",{className:"text-2xl font-bold text-gray-900"},"🎨 Home Builder"),n.createElement("p",{className:"text-sm text-gray-600"},"Diseña la página principal arrastrando componentes")),n.createElement("div",{className:"flex space-x-3"},n.createElement("button",{onClick:()=>o(!s),className:`px-4 py-2 rounded-md text-sm font-medium ${s?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`},s?"Editar":"Vista Previa"),n.createElement("button",{onClick:y,className:"px-4 py-2 bg-gray-600 text-white rounded-md text-sm font-medium hover:bg-gray-700"},"Cargar"),n.createElement("button",{onClick:b,className:"px-4 py-2 bg-green-600 text-white rounded-md text-sm font-medium hover:bg-green-700"},"Guardar"))))),n.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},n.createElement(RG,{sensors:c,collisionDetection:Fq,onDragStart:d,onDragEnd:u},n.createElement("div",{className:"grid grid-cols-12 gap-6"},!s&&n.createElement("div",{className:"col-span-3"},n.createElement(iK,null)),n.createElement("div",{className:s?"col-span-12":"col-span-6"},n.createElement(uK,{layout:e,onComponentSelect:m,onComponentDelete:x,selectedComponent:r,isPreviewMode:s})),!s&&r&&n.createElement("div",{className:"col-span-3"},n.createElement(mK,{component:r,onUpdate:f}))),n.createElement(XG,null,l?n.createElement("div",{className:"bg-white border-2 border-blue-500 rounded-lg p-4 shadow-lg opacity-80"},n.createElement("div",{className:"text-sm font-medium text-gray-900"},l.startsWith("component-")?"Nuevo componente":"Componente")):null))))},hK=e=>({"hero-banner":{title:"Bienvenido a Nuestro Despacho",subtitle:"Servicios legales profesionales y confiables",backgroundImage:"/images/hero-bg.jpg",ctaText:"Consultar Ahora",ctaLink:"/contact"},"service-cards":{title:"Nuestros Servicios",services:[{title:"Derecho Civil",description:"Asesoría en casos civiles",icon:"⚖️"},{title:"Derecho Laboral",description:"Protección de derechos laborales",icon:"👥"},{title:"Derecho Familiar",description:"Divorcios y custodia",icon:"👨‍👩‍👧‍👦"}]},"contact-form":{title:"Contáctanos",subtitle:"Estamos aquí para ayudarte",fields:["nombre","email","telefono","mensaje"]},testimonials:{title:"Lo que dicen nuestros clientes",testimonials:[{name:"María García",text:"Excelente servicio profesional",rating:5},{name:"Juan Pérez",text:"Muy satisfecho con el resultado",rating:5}]},stats:{title:"Nuestros Números",stats:[{label:"Casos Exitosos",value:"500+"},{label:"Años de Experiencia",value:"15"},{label:"Clientes Satisfechos",value:"1000+"}]},"text-block":{title:"Sobre Nosotros",content:"Somos un despacho de abogados comprometido con la excelencia y la justicia.",alignment:"left",fontSize:"medium"},"image-gallery":{title:"Nuestras Instalaciones",columns:3,showCaptions:!0,images:["/images/office-1.jpg","/images/office-2.jpg","/images/office-3.jpg"]},map:{title:"Nuestra Ubicación",address:"Calle Principal 123, Ciudad",latitude:40.4168,longitude:-3.7038,zoom:15},divider:{type:"solid",color:"#e5e7eb",thickness:1},spacer:{height:40}})[e]||{},gK=()=>n.createElement(pK,null),vK=()=>{const{user:e}=Te(),[t,r]=g.useState([]),[a,s]=g.useState(!0),[o,l]=g.useState(null),[i,c]=g.useState(null),[d,u]=g.useState(!1),[m,f]=g.useState({name:"",role:"ADMIN",orientation:"horizontal",isActive:!0,items:[]});g.useEffect(()=>{x()},[]);const x=async()=>{try{s(!0);const N=await J.get("/api/menu-config");r(N.data)}catch(N){console.error("Error fetching menu configs:",N)}finally{s(!1)}},b=async()=>{try{await J.post("/api/menu-config",m),u(!1),f({name:"",role:"ADMIN",orientation:"horizontal",isActive:!0,items:[]}),x()}catch(N){console.error("Error creating menu:",N)}},y=async()=>{if(i)try{await J.patch(`/api/menu-config/${i.id}`,i),c(null),x()}catch(N){console.error("Error updating menu:",N)}},v=async N=>{if(confirm("¿Estás seguro de que quieres eliminar este menú?"))try{await J.delete(`/api/menu-config/${N}`),x()}catch(S){console.error("Error deleting menu:",S)}},p=N=>{const S={label:"Nuevo elemento",url:"/",icon:"📄",order:N.items.length,isVisible:!0,isExternal:!1},C={...N,items:[...N.items,S]};(i==null?void 0:i.id)===N.id&&c(C)},h=(N,S,C,k)=>{const D=[...N.items];D[S]={...D[S],[C]:k};const O={...N,items:D};(i==null?void 0:i.id)===N.id&&c(O)},E=(N,S)=>{const C=N.items.filter((D,O)=>O!==S),k={...N,items:C};(i==null?void 0:i.id)===N.id&&c(k)},w=N=>({ADMIN:"Administrador",ABOGADO:"Abogado",CLIENTE:"Cliente"})[N]||N;return a?n.createElement("div",{className:"min-h-screen flex items-center justify-center"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.createElement("p",{className:"text-gray-600"},"Cargando configuraciones de menús..."))):n.createElement("div",{className:"min-h-screen bg-gray-50 py-8"},n.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"mb-8"},n.createElement("h1",{className:"text-3xl font-bold text-gray-900"},"🍽️ Configuración de Menús"),n.createElement("p",{className:"mt-2 text-gray-600"},"Gestiona los menús de navegación para cada rol de usuario")),n.createElement("div",{className:"mb-6"},n.createElement("button",{onClick:()=>u(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors"},"➕ Crear Nuevo Menú")),d&&n.createElement("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6"},n.createElement("h3",{className:"text-lg font-semibold mb-4"},"Crear Nuevo Menú"),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Nombre del Menú"),n.createElement("input",{type:"text",value:m.name,onChange:N=>f({...m,name:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ej: Menú Principal"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Rol"),n.createElement("select",{value:m.role,onChange:N=>f({...m,role:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},n.createElement("option",{value:"ADMIN"},"Administrador"),n.createElement("option",{value:"ABOGADO"},"Abogado"),n.createElement("option",{value:"CLIENTE"},"Cliente"))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Orientación"),n.createElement("select",{value:m.orientation,onChange:N=>f({...m,orientation:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},n.createElement("option",{value:"horizontal"},"Horizontal"),n.createElement("option",{value:"vertical"},"Vertical"))),n.createElement("div",{className:"flex items-center"},n.createElement("input",{type:"checkbox",checked:m.isActive,onChange:N=>f({...m,isActive:N.target.checked}),className:"mr-2"}),n.createElement("label",{className:"text-sm font-medium text-gray-700"},"Menú Activo"))),n.createElement("div",{className:"mt-4 flex space-x-3"},n.createElement("button",{onClick:b,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors"},"✅ Crear Menú"),n.createElement("button",{onClick:()=>u(!1),className:"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition-colors"},"❌ Cancelar"))),n.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6"},t.map(N=>n.createElement("div",{key:N.id,className:"bg-white rounded-lg shadow-md overflow-hidden"},n.createElement("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-4"},n.createElement("div",{className:"flex justify-between items-center"},n.createElement("div",null,n.createElement("h3",{className:"text-lg font-semibold"},N.name),n.createElement("p",{className:"text-blue-100 text-sm"},w(N.role)," • ",N.orientation==="horizontal"?"Horizontal":"Vertical")),n.createElement("div",{className:"flex space-x-2"},N.isActive&&n.createElement("span",{className:"bg-green-500 text-white px-2 py-1 rounded-full text-xs"},"Activo"),n.createElement("button",{onClick:()=>c((i==null?void 0:i.id)===N.id?null:N),className:"bg-white bg-opacity-20 hover:bg-opacity-30 px-3 py-1 rounded text-sm transition-colors"},(i==null?void 0:i.id)===N.id?"❌ Cancelar":"✏️ Editar"),n.createElement("button",{onClick:()=>v(N.id),className:"bg-red-500 hover:bg-red-600 px-3 py-1 rounded text-sm transition-colors"},"🗑️ Eliminar")))),n.createElement("div",{className:"p-4"},(i==null?void 0:i.id)===N.id?n.createElement("div",null,n.createElement("div",{className:"mb-4"},n.createElement("button",{onClick:()=>p(i),className:"bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600 transition-colors"},"➕ Agregar Elemento")),i.items.map((S,C)=>n.createElement("div",{key:C,className:"border border-gray-200 rounded p-3 mb-3"},n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},n.createElement("input",{type:"text",value:S.label,onChange:k=>h(i,C,"label",k.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"Etiqueta"}),n.createElement("input",{type:"text",value:S.url,onChange:k=>h(i,C,"url",k.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"URL"}),n.createElement("input",{type:"text",value:S.icon,onChange:k=>h(i,C,"icon",k.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"Icono (emoji)"}),n.createElement("input",{type:"number",value:S.order,onChange:k=>h(i,C,"order",parseInt(k.target.value)),className:"px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"Orden"}),n.createElement("div",{className:"flex items-center space-x-4"},n.createElement("label",{className:"flex items-center text-sm"},n.createElement("input",{type:"checkbox",checked:S.isVisible,onChange:k=>h(i,C,"isVisible",k.target.checked),className:"mr-2"}),"Visible"),n.createElement("label",{className:"flex items-center text-sm"},n.createElement("input",{type:"checkbox",checked:S.isExternal,onChange:k=>h(i,C,"isExternal",k.target.checked),className:"mr-2"}),"Externo")),n.createElement("button",{onClick:()=>E(i,C),className:"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600 transition-colors"},"🗑️ Eliminar")))),n.createElement("div",{className:"mt-4 flex space-x-3"},n.createElement("button",{onClick:y,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors"},"💾 Guardar Cambios"),n.createElement("button",{onClick:()=>c(null),className:"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition-colors"},"❌ Cancelar"))):n.createElement("div",null,N.items.length===0?n.createElement("p",{className:"text-gray-500 text-center py-4"},"No hay elementos en este menú"):n.createElement("div",{className:"space-y-2"},N.items.sort((S,C)=>S.order-C.order).map((S,C)=>n.createElement("div",{key:C,className:"flex items-center justify-between p-2 bg-gray-50 rounded"},n.createElement("div",{className:"flex items-center space-x-3"},n.createElement("span",{className:"text-lg"},S.icon),n.createElement("div",null,n.createElement("p",{className:"font-medium"},S.label),n.createElement("p",{className:"text-sm text-gray-500"},S.url))),n.createElement("div",{className:"flex items-center space-x-2"},!S.isVisible&&n.createElement("span",{className:"text-xs bg-gray-300 text-gray-600 px-2 py-1 rounded"},"Oculto"),S.isExternal&&n.createElement("span",{className:"text-xs bg-blue-300 text-blue-600 px-2 py-1 rounded"},"Externo"),n.createElement("span",{className:"text-xs bg-gray-200 text-gray-600 px-2 py-1 rounded"},S.order)))))))))),t.length===0&&n.createElement("div",{className:"text-center py-12"},n.createElement("p",{className:"text-gray-500 text-lg"},"No hay configuraciones de menús creadas"),n.createElement("button",{onClick:()=>u(!0),className:"mt-4 bg-blue-600 text-white px-6 py-3 rounded-md hover:bg-blue-700 transition-colors"},"➕ Crear Primer Menú"))))},yK=()=>{const{user:e}=Te(),[t,r]=g.useState([]),[a,s]=g.useState(!0),[o,l]=g.useState(null),[i,c]=g.useState(!1),[d,u]=g.useState({key:"",value:"",type:"string",category:"general",description:"",isPublic:!1});g.useEffect(()=>{m()},[]);const m=async()=>{try{s(!0);const E=await J.get("/api/site-config/categories");r(E.data)}catch(E){console.error("Error fetching site configs:",E)}finally{s(!1)}},f=async()=>{try{await J.post("/api/site-config",d),c(!1),u({key:"",value:"",type:"string",category:"general",description:"",isPublic:!1}),m()}catch(E){console.error("Error creating config:",E)}},x=async()=>{if(o)try{await J.patch(`/api/site-config/${o.id}`,o),l(null),m()}catch(E){console.error("Error updating config:",E)}},b=async E=>{if(confirm("¿Estás seguro de que quieres eliminar esta configuración?"))try{await J.delete(`/api/site-config/${E}`),m()}catch(w){console.error("Error deleting config:",w)}},y=async(E,w)=>{try{await J.patch(`/api/site-config/key/${E}`,{value:w}),m()}catch(N){console.error("Error updating config:",N)}},v=E=>({branding:"🎨 Marca",layout:"📐 Diseño",contact:"📞 Contacto",social:"🌐 Social",general:"⚙️ General"})[E]||E,p=E=>({string:"Texto",image:"Imagen",color:"Color",boolean:"Booleano",json:"JSON"})[E]||E,h=E=>{switch(E.type){case"boolean":return n.createElement("div",{className:"flex items-center"},n.createElement("input",{type:"checkbox",checked:E.value==="true",onChange:w=>y(E.key,w.target.checked.toString()),className:"mr-2"}),n.createElement("span",{className:"text-sm text-gray-600"},E.value==="true"?"Activado":"Desactivado"));case"color":return n.createElement("div",{className:"flex items-center space-x-2"},n.createElement("input",{type:"color",value:E.value,onChange:w=>y(E.key,w.target.value),className:"w-8 h-8 border border-gray-300 rounded"}),n.createElement("span",{className:"text-sm font-mono"},E.value));case"image":return n.createElement("div",{className:"flex items-center space-x-2"},n.createElement("img",{src:E.value,alt:"Preview",className:"w-8 h-8 object-cover border border-gray-300 rounded",onError:w=>{w.currentTarget.style.display="none"}}),n.createElement("input",{type:"text",value:E.value,onChange:w=>y(E.key,w.target.value),className:"flex-1 px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"URL de la imagen"}));default:return n.createElement("input",{type:"text",value:E.value,onChange:w=>y(E.key,w.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"Valor"})}};return a?n.createElement("div",{className:"min-h-screen flex items-center justify-center"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.createElement("p",{className:"text-gray-600"},"Cargando configuraciones del sitio..."))):n.createElement("div",{className:"min-h-screen bg-gray-50 py-8"},n.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"mb-8"},n.createElement("h1",{className:"text-3xl font-bold text-gray-900"},"⚙️ Configuración del Sitio"),n.createElement("p",{className:"mt-2 text-gray-600"},"Gestiona la configuración general del sitio web")),n.createElement("div",{className:"mb-6 flex space-x-4"},n.createElement("button",{onClick:()=>c(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors"},"➕ Nueva Configuración"),n.createElement("button",{onClick:async()=>{try{await J.post("/api/site-config/initialize"),m(),alert("Configuraciones por defecto inicializadas")}catch(E){console.error("Error initializing configs:",E)}},className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors"},"🔄 Inicializar Configuraciones")),i&&n.createElement("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6"},n.createElement("h3",{className:"text-lg font-semibold mb-4"},"Crear Nueva Configuración"),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Clave"),n.createElement("input",{type:"text",value:d.key,onChange:E=>u({...d,key:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ej: site_name"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Valor"),n.createElement("input",{type:"text",value:d.value,onChange:E=>u({...d,value:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Valor de la configuración"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Tipo"),n.createElement("select",{value:d.type,onChange:E=>u({...d,type:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},n.createElement("option",{value:"string"},"Texto"),n.createElement("option",{value:"image"},"Imagen"),n.createElement("option",{value:"color"},"Color"),n.createElement("option",{value:"boolean"},"Booleano"),n.createElement("option",{value:"json"},"JSON"))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Categoría"),n.createElement("select",{value:d.category,onChange:E=>u({...d,category:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},n.createElement("option",{value:"branding"},"Marca"),n.createElement("option",{value:"layout"},"Diseño"),n.createElement("option",{value:"contact"},"Contacto"),n.createElement("option",{value:"social"},"Social"),n.createElement("option",{value:"general"},"General"))),n.createElement("div",{className:"md:col-span-2"},n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Descripción"),n.createElement("input",{type:"text",value:d.description,onChange:E=>u({...d,description:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Descripción de la configuración"})),n.createElement("div",{className:"flex items-center"},n.createElement("input",{type:"checkbox",checked:d.isPublic,onChange:E=>u({...d,isPublic:E.target.checked}),className:"mr-2"}),n.createElement("label",{className:"text-sm font-medium text-gray-700"},"Configuración Pública"))),n.createElement("div",{className:"mt-4 flex space-x-3"},n.createElement("button",{onClick:f,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors"},"✅ Crear Configuración"),n.createElement("button",{onClick:()=>c(!1),className:"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition-colors"},"❌ Cancelar"))),n.createElement("div",{className:"space-y-6"},t.map(E=>n.createElement("div",{key:E.category,className:"bg-white rounded-lg shadow-md overflow-hidden"},n.createElement("div",{className:"bg-gradient-to-r from-gray-600 to-gray-700 text-white p-4"},n.createElement("h3",{className:"text-lg font-semibold"},v(E.category)),n.createElement("p",{className:"text-gray-200 text-sm"},E.configs.length," configuración",E.configs.length!==1?"es":"")),n.createElement("div",{className:"p-4"},n.createElement("div",{className:"space-y-4"},E.configs.map(w=>n.createElement("div",{key:w.id,className:"border border-gray-200 rounded-lg p-4"},n.createElement("div",{className:"flex justify-between items-start mb-3"},n.createElement("div",{className:"flex-1"},n.createElement("div",{className:"flex items-center space-x-2 mb-1"},n.createElement("h4",{className:"font-medium text-gray-900"},w.key),n.createElement("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded"},p(w.type)),w.isPublic&&n.createElement("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded"},"Público")),w.description&&n.createElement("p",{className:"text-sm text-gray-600"},w.description)),n.createElement("div",{className:"flex space-x-2"},n.createElement("button",{onClick:()=>l((o==null?void 0:o.id)===w.id?null:w),className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm transition-colors"},(o==null?void 0:o.id)===w.id?"❌ Cancelar":"✏️ Editar"),n.createElement("button",{onClick:()=>b(w.id),className:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm transition-colors"},"🗑️ Eliminar"))),(o==null?void 0:o.id)===w.id?n.createElement("div",{className:"space-y-3"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Valor"),w.type==="boolean"?n.createElement("select",{value:w.value,onChange:N=>l({...w,value:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"},n.createElement("option",{value:"true"},"Activado"),n.createElement("option",{value:"false"},"Desactivado")):w.type==="color"?n.createElement("input",{type:"color",value:w.value,onChange:N=>l({...w,value:N.target.value}),className:"w-full h-10 border border-gray-300 rounded-md"}):n.createElement("input",{type:"text",value:w.value,onChange:N=>l({...w,value:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Descripción"),n.createElement("input",{type:"text",value:w.description||"",onChange:N=>l({...w,description:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})),n.createElement("div",{className:"flex items-center"},n.createElement("input",{type:"checkbox",checked:w.isPublic,onChange:N=>l({...w,isPublic:N.target.checked}),className:"mr-2"}),n.createElement("label",{className:"text-sm font-medium text-gray-700"},"Configuración Pública")),n.createElement("div",{className:"flex space-x-3"},n.createElement("button",{onClick:x,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors"},"💾 Guardar Cambios"),n.createElement("button",{onClick:()=>l(null),className:"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition-colors"},"❌ Cancelar"))):n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Valor Actual"),h(w))))))))),t.length===0&&n.createElement("div",{className:"text-center py-12"},n.createElement("p",{className:"text-gray-500 text-lg"},"No hay configuraciones del sitio"),n.createElement("button",{onClick:()=>c(!0),className:"mt-4 bg-blue-600 text-white px-6 py-3 rounded-md hover:bg-blue-700 transition-colors"},"➕ Crear Primera Configuración"))))},EK=()=>{var k,D,O;const{user:e}=Te(),t=qr(),[r,a]=g.useState(0),[s,o]=g.useState(null),[l,i]=g.useState({}),[c,d]=g.useState(!1),[u,m]=g.useState(!1),f=[{id:"legal-office",name:"Despacho Legal",description:"Gestión completa de casos legales, clientes y documentación",icon:"⚖️",category:"Legal",features:["Gestión de expedientes y casos","Sistema de citas y calendario","Documentación legal","Facturación y pagos","Comunicación con clientes"],configSteps:[{id:"basic-info",title:"Información Básica del Despacho",description:"Configura los datos fundamentales de tu despacho",type:"site",questions:[{id:"office_name",question:"¿Cuál es el nombre de tu despacho legal?",type:"text",defaultValue:"Despacho Legal"},{id:"specialties",question:"¿En qué especialidades legales te enfocas?",type:"multiselect",options:["Derecho Civil","Derecho Penal","Derecho Laboral","Derecho Mercantil","Derecho Administrativo","Derecho de Familia","Derecho Inmobiliario","Derecho Fiscal"]},{id:"office_hours",question:"¿Cuáles son tus horarios de atención?",type:"text",defaultValue:"Lunes a Viernes: 9:00 - 18:00"}]},{id:"menu-setup",title:"Configuración de Menús",description:"Personaliza la navegación para abogados y clientes",type:"menu",questions:[{id:"enable_consultations",question:"¿Quieres ofrecer consultas online?",type:"boolean",defaultValue:!0},{id:"enable_document_templates",question:"¿Quieres vender plantillas de documentos legales?",type:"boolean",defaultValue:!0},{id:"enable_payment_plans",question:"¿Quieres ofrecer planes de pago a plazos?",type:"boolean",defaultValue:!1}]},{id:"ecommerce-setup",title:"Configuración de Tienda Online",description:"Configura la venta de servicios y productos legales",type:"ecommerce",questions:[{id:"enable_online_payments",question:"¿Quieres habilitar pagos online?",type:"boolean",defaultValue:!0},{id:"payment_methods",question:"¿Qué métodos de pago quieres aceptar?",type:"multiselect",options:["PayPal","Tarjeta de Crédito","Transferencia Bancaria"],dependsOn:"enable_online_payments",dependsValue:!0},{id:"consultation_price",question:"¿Cuál será el precio de la consulta inicial?",type:"text",defaultValue:"50",dependsOn:"enable_consultations",dependsValue:!0}]}]},{id:"consulting-firm",name:"Empresa de Consultoría",description:"Servicios de consultoría empresarial y estratégica",icon:"💼",category:"Business",features:["Consultoría estratégica","Análisis de procesos","Gestión de proyectos","Formación empresarial","Auditorías y reportes"],configSteps:[{id:"basic-info",title:"Información de la Consultora",description:"Configura los datos de tu empresa de consultoría",type:"site",questions:[{id:"company_name",question:"¿Cuál es el nombre de tu consultora?",type:"text",defaultValue:"Consultora Empresarial"},{id:"consulting_areas",question:"¿En qué áreas de consultoría te especializas?",type:"multiselect",options:["Estrategia Empresarial","Optimización de Procesos","Recursos Humanos","Finanzas Corporativas","Marketing Digital","Transformación Digital","Gestión de Calidad","Compliance y Legal"]}]},{id:"service-catalog",title:"Catálogo de Servicios",description:"Configura los servicios que ofreces",type:"ecommerce",questions:[{id:"service_types",question:"¿Qué tipos de servicios quieres ofrecer?",type:"multiselect",options:["Consultoría por Horas","Proyectos Completos","Auditorías","Formación","Mentoring","Análisis de Datos"]},{id:"enable_packages",question:"¿Quieres ofrecer paquetes de servicios?",type:"boolean",defaultValue:!0}]}]},{id:"online-academy",name:"Academia Online",description:"Plataforma de formación y cursos online",icon:"🎓",category:"Education",features:["Cursos online","Sistema de evaluación","Certificaciones","Comunidad de estudiantes","Contenido multimedia"],configSteps:[{id:"academy-info",title:"Información de la Academia",description:"Configura los datos de tu academia online",type:"site",questions:[{id:"academy_name",question:"¿Cuál es el nombre de tu academia?",type:"text",defaultValue:"Academia Online"},{id:"academic_areas",question:"¿En qué áreas académicas te especializas?",type:"multiselect",options:["Tecnología y Programación","Negocios y Emprendimiento","Idiomas","Arte y Diseño","Salud y Bienestar","Ciencias y Matemáticas","Humanidades","Formación Profesional"]}]},{id:"course-structure",title:"Estructura de Cursos",description:"Configura cómo organizarás tus cursos",type:"custom",questions:[{id:"course_types",question:"¿Qué tipos de cursos quieres ofrecer?",type:"multiselect",options:["Cursos Autodidactas","Cursos con Tutor","Bootcamps Intensivos","Webinars","Talleres Prácticos","Certificaciones"]},{id:"enable_subscriptions",question:"¿Quieres ofrecer suscripciones mensuales?",type:"boolean",defaultValue:!0}]}]},{id:"digital-agency",name:"Agencia Digital",description:"Servicios de marketing digital y desarrollo web",icon:"🚀",category:"Digital",features:["Desarrollo web","Marketing digital","SEO y SEM","Redes sociales","Analytics y reportes"],configSteps:[{id:"agency-info",title:"Información de la Agencia",description:"Configura los datos de tu agencia digital",type:"site",questions:[{id:"agency_name",question:"¿Cuál es el nombre de tu agencia?",type:"text",defaultValue:"Agencia Digital"},{id:"digital_services",question:"¿Qué servicios digitales ofreces?",type:"multiselect",options:["Desarrollo Web","Diseño Gráfico","Marketing Digital","SEO y SEM","Gestión de Redes Sociales","Email Marketing","Analytics y Reportes","Consultoría Digital"]}]},{id:"project-management",title:"Gestión de Proyectos",description:"Configura el sistema de gestión de proyectos",type:"custom",questions:[{id:"project_tracking",question:"¿Quieres que los clientes puedan seguir sus proyectos?",type:"boolean",defaultValue:!0},{id:"client_portal",question:"¿Quieres crear un portal para clientes?",type:"boolean",defaultValue:!0}]}]},{id:"health-clinic",name:"Clínica de Salud",description:"Gestión de citas médicas y pacientes",icon:"🏥",category:"Health",features:["Gestión de citas","Historiales médicos","Facturación médica","Comunicación con pacientes","Reportes médicos"],configSteps:[{id:"clinic-info",title:"Información de la Clínica",description:"Configura los datos de tu clínica",type:"site",questions:[{id:"clinic_name",question:"¿Cuál es el nombre de tu clínica?",type:"text",defaultValue:"Clínica de Salud"},{id:"medical_specialties",question:"¿Qué especialidades médicas ofreces?",type:"multiselect",options:["Medicina General","Cardiología","Dermatología","Ginecología","Pediatría","Psicología","Fisioterapia","Odontología"]}]},{id:"appointment-system",title:"Sistema de Citas",description:"Configura el sistema de citas médicas",type:"custom",questions:[{id:"online_booking",question:"¿Quieres que los pacientes puedan reservar citas online?",type:"boolean",defaultValue:!0},{id:"appointment_reminders",question:"¿Quieres enviar recordatorios de citas?",type:"boolean",defaultValue:!0}]}]}],x=A=>{o(A),a(0),i({})},b=(A,$)=>{i(P=>({...P,[A]:$}))},y=A=>A.dependsOn?l[A.dependsOn]===A.dependsValue:!0,v=()=>s?s.configSteps[r]:null,p=()=>{r<s.configSteps.length-1?a(r+1):E()},h=()=>{r>0&&a(r-1)},E=async()=>{m(!0);try{await w(),t("/admin/menu-config")}catch(A){console.error("Error applying configuration:",A)}finally{m(!1)}},w=async()=>{const A=N();for(const P of A)await J.post("/api/site-config",P);const $=S();for(const P of $)await J.post("/api/menu-config",P)},N=()=>{const A=[];return(s==null?void 0:s.id)==="legal-office"?A.push({key:"site_name",value:l.office_name||"Despacho Legal",type:"string",category:"branding",isPublic:!0},{key:"site_description",value:"Servicios legales profesionales",type:"string",category:"branding",isPublic:!0},{key:"office_hours",value:l.office_hours||"Lunes a Viernes: 9:00 - 18:00",type:"string",category:"contact",isPublic:!0}):(s==null?void 0:s.id)==="consulting-firm"&&A.push({key:"site_name",value:l.company_name||"Consultora Empresarial",type:"string",category:"branding",isPublic:!0},{key:"site_description",value:"Consultoría empresarial y estratégica",type:"string",category:"branding",isPublic:!0}),A},S=()=>{const A=[];if((s==null?void 0:s.id)==="legal-office"){const $={name:"Menú Abogado",role:"ABOGADO",orientation:"horizontal",isActive:!0,items:[{label:"Dashboard",url:"/dashboard",icon:"🏠",order:1,isVisible:!0,isExternal:!1},{label:"Expedientes",url:"/lawyer/cases",icon:"📋",order:2,isVisible:!0,isExternal:!1},{label:"Citas",url:"/lawyer/appointments",icon:"📅",order:3,isVisible:!0,isExternal:!1}]};l.enable_consultations&&$.items.push({label:"Consultas",url:"/lawyer/consultations",icon:"💬",order:4,isVisible:!0,isExternal:!1}),A.push($)}return A},C=A=>{var $,P;if(!y(A))return null;switch(A.type){case"boolean":return n.createElement("div",{key:A.id,className:"mb-6"},n.createElement("label",{className:"flex items-center space-x-3"},n.createElement("input",{type:"checkbox",checked:l[A.id]??A.defaultValue,onChange:I=>b(A.id,I.target.checked),className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),n.createElement("span",{className:"text-lg font-medium text-gray-900"},A.question)));case"text":return n.createElement("div",{key:A.id,className:"mb-6"},n.createElement("label",{className:"block text-lg font-medium text-gray-900 mb-2"},A.question),n.createElement("input",{type:"text",value:l[A.id]??A.defaultValue??"",onChange:I=>b(A.id,I.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Escribe tu respuesta..."}));case"select":return n.createElement("div",{key:A.id,className:"mb-6"},n.createElement("label",{className:"block text-lg font-medium text-gray-900 mb-2"},A.question),n.createElement("select",{value:l[A.id]??"",onChange:I=>b(A.id,I.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},n.createElement("option",{value:""},"Selecciona una opción"),($=A.options)==null?void 0:$.map(I=>n.createElement("option",{key:I,value:I},I))));case"multiselect":return n.createElement("div",{key:A.id,className:"mb-6"},n.createElement("label",{className:"block text-lg font-medium text-gray-900 mb-2"},A.question),n.createElement("div",{className:"space-y-2"},(P=A.options)==null?void 0:P.map(I=>n.createElement("label",{key:I,className:"flex items-center space-x-3"},n.createElement("input",{type:"checkbox",checked:(l[A.id]||[]).includes(I),onChange:L=>{const F=l[A.id]||[],T=L.target.checked?[...F,I]:F.filter(M=>M!==I);b(A.id,T)},className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),n.createElement("span",{className:"text-gray-700"},I)))));default:return null}};return c?n.createElement("div",{className:"min-h-screen flex items-center justify-center"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})):n.createElement("div",{className:"min-h-screen bg-gray-50 py-8"},n.createElement("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"text-center mb-8"},n.createElement("h1",{className:"text-3xl font-bold text-gray-900 mb-4"},"🎯 Configuración Guiada del Sistema"),n.createElement("p",{className:"text-lg text-gray-600"},"Te ayudaremos a configurar tu sistema paso a paso según tu tipo de negocio")),s?n.createElement("div",{className:"bg-white rounded-lg shadow-md p-8"},n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"flex items-center justify-between mb-2"},n.createElement("span",{className:"text-sm font-medium text-gray-700"},"Paso ",r+1," de ",s.configSteps.length),n.createElement("span",{className:"text-sm text-gray-500"},Math.round((r+1)/s.configSteps.length*100),"% completado")),n.createElement("div",{className:"w-full bg-gray-200 rounded-full h-2"},n.createElement("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${(r+1)/s.configSteps.length*100}%`}}))),n.createElement("div",{className:"mb-8 p-4 bg-blue-50 rounded-lg"},n.createElement("div",{className:"flex items-center"},n.createElement("span",{className:"text-2xl mr-3"},s.icon),n.createElement("div",null,n.createElement("h3",{className:"text-lg font-bold text-gray-900"},"Configurando: ",s.name),n.createElement("p",{className:"text-gray-600"},s.description)))),n.createElement("div",{className:"mb-8"},n.createElement("h2",{className:"text-2xl font-bold text-gray-900 mb-2"},(k=v())==null?void 0:k.title),n.createElement("p",{className:"text-gray-600 mb-6"},(D=v())==null?void 0:D.description),n.createElement("div",{className:"space-y-6"},(O=v())==null?void 0:O.questions.map(C))),n.createElement("div",{className:"flex justify-between"},n.createElement("button",{onClick:()=>o(null),className:"px-6 py-3 text-gray-600 hover:text-gray-800 transition-colors"},"← Cambiar tipo de negocio"),n.createElement("div",{className:"flex space-x-4"},r>0&&n.createElement("button",{onClick:h,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors"},"← Anterior"),n.createElement("button",{onClick:p,disabled:u,className:"px-6 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50"},u?n.createElement("span",{className:"flex items-center"},n.createElement("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Configurando..."):r===s.configSteps.length-1?"Finalizar Configuración":"Siguiente →")))):n.createElement("div",{className:"bg-white rounded-lg shadow-md p-8"},n.createElement("h2",{className:"text-2xl font-bold text-gray-900 mb-6 text-center"},"¿Qué tipo de negocio quieres configurar?"),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},f.map(A=>n.createElement("div",{key:A.id,onClick:()=>x(A),className:"border-2 border-gray-200 rounded-lg p-6 hover:border-blue-500 hover:shadow-lg transition-all cursor-pointer"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-4xl mb-4"},A.icon),n.createElement("h3",{className:"text-xl font-bold text-gray-900 mb-2"},A.name),n.createElement("p",{className:"text-gray-600 mb-4"},A.description),n.createElement("div",{className:"text-sm text-gray-500"},n.createElement("strong",null,"Características principales:"),n.createElement("ul",{className:"mt-2 space-y-1"},A.features.slice(0,3).map(($,P)=>n.createElement("li",{key:P},"• ",$))))))))),n.createElement("div",{className:"mt-8 bg-blue-50 rounded-lg p-6"},n.createElement("h3",{className:"text-lg font-bold text-gray-900 mb-4"},"💡 ¿Necesitas ayuda?"),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600"},n.createElement("div",null,n.createElement("strong",null,"Para Despachos Legales:"),n.createElement("ul",{className:"mt-1 space-y-1"},n.createElement("li",null,"• Configura especialidades legales"),n.createElement("li",null,"• Habilita consultas online"),n.createElement("li",null,"• Establece precios de servicios"))),n.createElement("div",null,n.createElement("strong",null,"Para Consultorías:"),n.createElement("ul",{className:"mt-1 space-y-1"},n.createElement("li",null,"• Define áreas de consultoría"),n.createElement("li",null,"• Configura tipos de servicios"),n.createElement("li",null,"• Establece paquetes de servicios")))))))},jE=()=>{var A,$,P;const{user:e}=Te(),[t,r]=g.useState([]),[a,s]=g.useState([]),[o,l]=g.useState(null),[i,c]=g.useState(!0),[d,u]=g.useState("pending"),[m,f]=g.useState([]),[x,b]=g.useState(""),[y,v]=g.useState({}),[p,h]=g.useState(!1);g.useEffect(()=>{E(),h(!0),J.get("/teleassistance/remote-tools").then(I=>f(I.data)).catch(()=>f([])).finally(()=>h(!1))},[e]);const E=async()=>{try{c(!0);const I=await J.get("/teleassistance/sessions/pending");if(s(I.data),e){const L=await J.get("/teleassistance/sessions/assistant/"+e.id);r(L.data)}if((e==null?void 0:e.role)==="ADMIN"){const L=await J.get("/teleassistance/stats");l(L.data)}}catch(I){console.error("Error loading teleassistance data:",I)}finally{c(!1)}},w=async I=>{try{await J.post(`/teleassistance/sessions/${I}/start`),E()}catch(L){console.error("Error starting session:",L)}},N=async(I,L)=>{try{await J.post(`/teleassistance/sessions/${I}/end`,{resolution:L}),E()}catch(F){console.error("Error ending session:",F)}},S=I=>{const L={PENDING:{color:"bg-yellow-100 text-yellow-800",text:"Pendiente"},ACTIVE:{color:"bg-green-100 text-green-800",text:"Activa"},COMPLETED:{color:"bg-blue-100 text-blue-800",text:"Completada"},CANCELLED:{color:"bg-red-100 text-red-800",text:"Cancelada"}},F=L[I]||L.PENDING;return n.createElement("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${F.color}`},F.text)},C=I=>({AUTOFIRMA:"🔐",CERTIFICADO_DIGITAL:"🆔",SEDES:"🏛️",CLAVE_PIN:"📱",NAVEGADOR:"🌐",SISTEMA_OPERATIVO:"💻",OTRO:"❓"})[I]||"❓",k=I=>{if(!I)return"N/A";const L=Math.floor(I/60),F=I%60;return L>0?`${L}h ${F}m`:`${F}m`},D=I=>new Date(I).toLocaleString("es-ES"),O=()=>{if(!x)return null;switch(x){case"teamviewer-quicksupport":return n.createElement(n.Fragment,null,n.createElement("label",null,"ID de TeamViewer",n.createElement("input",{type:"text",required:!0,value:y.teamviewerId||"",onChange:I=>v({...y,teamviewerId:I.target.value})})),n.createElement("label",null,"Contraseña",n.createElement("input",{type:"text",required:!0,value:y.teamviewerPassword||"",onChange:I=>v({...y,teamviewerPassword:I.target.value})})));case"remotely-anywhere":return n.createElement(n.Fragment,null,n.createElement("label",null,"Código de acceso",n.createElement("input",{type:"text",required:!0,value:y.remotelyCode||"",onChange:I=>v({...y,remotelyCode:I.target.value})})));case"anydesk":return n.createElement(n.Fragment,null,n.createElement("label",null,"Código de AnyDesk",n.createElement("input",{type:"text",required:!0,value:y.anydeskCode||"",onChange:I=>v({...y,anydeskCode:I.target.value})})));case"chrome-remote-desktop":return n.createElement(n.Fragment,null,n.createElement("label",null,"Código de acceso",n.createElement("input",{type:"text",required:!0,value:y.chromeCode||"",onChange:I=>v({...y,chromeCode:I.target.value})})));default:return null}};return i?n.createElement("div",{className:"min-h-screen flex items-center justify-center"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})):n.createElement("div",{className:"min-h-screen bg-gray-50 py-8"},n.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"mb-8"},n.createElement("h1",{className:"text-3xl font-bold text-gray-900 mb-2"},"🖥️ Sistema de Teleasistencia"),n.createElement("p",{className:"text-lg text-gray-600"},"Gestiona sesiones de asistencia remota para problemas de administración electrónica")),o&&n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6 mb-8"},n.createElement("div",{className:"bg-white rounded-lg shadow p-6"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"p-2 bg-blue-100 rounded-lg"},n.createElement("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"}))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Total Sesiones"),n.createElement("p",{className:"text-2xl font-bold text-gray-900"},o.totalSessions)))),n.createElement("div",{className:"bg-white rounded-lg shadow p-6"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"p-2 bg-yellow-100 rounded-lg"},n.createElement("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"}))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Pendientes"),n.createElement("p",{className:"text-2xl font-bold text-gray-900"},o.pendingSessions)))),n.createElement("div",{className:"bg-white rounded-lg shadow p-6"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"p-2 bg-green-100 rounded-lg"},n.createElement("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"}))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Activas"),n.createElement("p",{className:"text-2xl font-bold text-gray-900"},o.activeSessions)))),n.createElement("div",{className:"bg-white rounded-lg shadow p-6"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"p-2 bg-blue-100 rounded-lg"},n.createElement("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Completadas"),n.createElement("p",{className:"text-2xl font-bold text-gray-900"},o.completedSessions)))),n.createElement("div",{className:"bg-white rounded-lg shadow p-6"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"p-2 bg-purple-100 rounded-lg"},n.createElement("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"}))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Duración Promedio"),n.createElement("p",{className:"text-2xl font-bold text-gray-900"},k(o.averageDuration)))))),n.createElement("div",{className:"bg-white rounded-lg shadow mb-8"},n.createElement("div",{className:"border-b border-gray-200"},n.createElement("nav",{className:"-mb-px flex space-x-8 px-6"},n.createElement("button",{onClick:()=>u("pending"),className:`py-4 px-1 border-b-2 font-medium text-sm ${d==="pending"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`},"Sesiones Pendientes (",a.length,")"),n.createElement("button",{onClick:()=>u("all"),className:`py-4 px-1 border-b-2 font-medium text-sm ${d==="all"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`},"Mis Sesiones (",t.length,")"),(e==null?void 0:e.role)==="ADMIN"&&n.createElement("button",{onClick:()=>u("stats"),className:`py-4 px-1 border-b-2 font-medium text-sm ${d==="stats"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`},"Estadísticas"))),n.createElement("div",{className:"p-6"},d==="pending"&&n.createElement("div",null,n.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-4"},"Sesiones Pendientes de Asistencia"),a.length===0?n.createElement("div",{className:"text-center py-8"},n.createElement("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})),n.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No hay sesiones pendientes")):n.createElement("div",{className:"space-y-4"},a.map(I=>n.createElement("div",{key:I.id,className:"border border-gray-200 rounded-lg p-4"},n.createElement("div",{className:"flex items-center justify-between"},n.createElement("div",{className:"flex items-center space-x-4"},n.createElement("div",{className:"text-2xl"},C(I.issueType)),n.createElement("div",null,n.createElement("h4",{className:"text-lg font-medium text-gray-900"},I.user.name),n.createElement("p",{className:"text-sm text-gray-500"},I.issueType.replace("_"," ")," - ",I.description),n.createElement("p",{className:"text-xs text-gray-400"},"Creada: ",D(I.createdAt)))),n.createElement("div",{className:"flex items-center space-x-2"},S(I.status),n.createElement("button",{onClick:()=>w(I.id),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors"},"Iniciar Sesión"))))))),d==="all"&&n.createElement("div",null,n.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-4"},"Mis Sesiones de Teleasistencia"),t.length===0?n.createElement("div",{className:"text-center py-8"},n.createElement("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})),n.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No tienes sesiones de teleasistencia")):n.createElement("div",{className:"space-y-4"},t.map(I=>n.createElement("div",{key:I.id,className:"border border-gray-200 rounded-lg p-4"},n.createElement("div",{className:"flex items-center justify-between"},n.createElement("div",{className:"flex items-center space-x-4"},n.createElement("div",{className:"text-2xl"},C(I.issueType)),n.createElement("div",null,n.createElement("h4",{className:"text-lg font-medium text-gray-900"},I.user.name),n.createElement("p",{className:"text-sm text-gray-500"},I.issueType.replace("_"," ")," - ",I.description),n.createElement("p",{className:"text-xs text-gray-400"},I.startedAt&&`Iniciada: ${D(I.startedAt)}`,I.duration&&` | Duración: ${k(I.duration)}`))),n.createElement("div",{className:"flex items-center space-x-2"},S(I.status),I.status==="ACTIVE"&&n.createElement("button",{onClick:()=>N(I.id),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors"},"Finalizar"))))))),d==="stats"&&o&&n.createElement("div",null,n.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-4"},"Estadísticas Detalladas"),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},n.createElement("div",{className:"bg-gray-50 rounded-lg p-4"},n.createElement("h4",{className:"font-medium text-gray-900 mb-2"},"Resumen General"),n.createElement("ul",{className:"space-y-2 text-sm text-gray-600"},n.createElement("li",null,"Total de sesiones: ",o.totalSessions),n.createElement("li",null,"Sesiones pendientes: ",o.pendingSessions),n.createElement("li",null,"Sesiones activas: ",o.activeSessions),n.createElement("li",null,"Sesiones completadas: ",o.completedSessions))),n.createElement("div",{className:"bg-gray-50 rounded-lg p-4"},n.createElement("h4",{className:"font-medium text-gray-900 mb-2"},"Métricas de Tiempo"),n.createElement("ul",{className:"space-y-2 text-sm text-gray-600"},n.createElement("li",null,"Duración promedio: ",k(o.averageDuration)),n.createElement("li",null,"Tasa de resolución: ",o.totalSessions>0?Math.round(o.completedSessions/o.totalSessions*100):0,"%"))))),n.createElement("div",{className:"bg-white rounded-lg shadow p-6 mb-8"},n.createElement("h2",{className:"text-xl font-bold mb-4"},"Conectar con el cliente autenticado"),n.createElement("label",null,"Herramienta de escritorio remoto",n.createElement("select",{required:!0,value:x,onChange:I=>b(I.target.value)},n.createElement("option",{value:""},"Selecciona una herramienta"),m.map(I=>n.createElement("option",{key:I.id,value:I.id},I.name)))),O(),x&&n.createElement("div",{style:{marginTop:24,background:"#f8f8f8",borderRadius:6,padding:16}},n.createElement("h4",null,"Instrucciones para ",(A=m.find(I=>I.id===x))==null?void 0:A.name),n.createElement("ul",null,($=m.find(I=>I.id===x))==null?void 0:$.instructions.map((I,L)=>n.createElement("li",{key:L},I))),n.createElement("a",{href:(P=m.find(I=>I.id===x))==null?void 0:P.downloadUrl,target:"_blank",rel:"noopener noreferrer"},"Descargar / Abrir herramienta")))))))},xK=()=>{var Y,X;const[e,t]=g.useState([]),[r,a]=g.useState([]),[s,o]=g.useState([]),[l,i]=g.useState(""),[c,d]=g.useState(""),[u,m]=g.useState(""),[f,x]=g.useState(!0),[b,y]=g.useState(null),[v,p]=g.useState(!1),[h,E]=g.useState(null),[w,N]=g.useState([]),[S,C]=g.useState(new Set),[k,D]=g.useState(!1),O=g.useRef(null),A=g.useRef(null),{user:$}=Te();g.useEffect(()=>{if(!$)return;const j=localStorage.getItem("token"),B=Xs("http://localhost:3000",{auth:{token:j,user:{id:$.id,name:$.name,role:$.role}}});return B.on("connect",()=>{console.log("Conectado al servidor de chat")}),B.on("disconnect",()=>{console.log("Desconectado del servidor de chat")}),B.on("new_message",H=>{t(G=>[...G,H]),a(G=>G.map(ue=>ue.userId===H.senderId?{...ue,lastMessage:H.content,lastMessageTime:H.createdAt}:ue)),c!==H.senderId&&V(H.senderName,H.content)}),B.on("message_sent",H=>{t(G=>[...G,H])}),B.on("user_typing",H=>{H.isTyping?C(G=>new Set(G).add(H.userId)):C(G=>{const ue=new Set(G);return ue.delete(H.userId),ue})}),B.on("user_connected",H=>{N(G=>[...G,H])}),B.on("user_disconnected",H=>{N(G=>G.filter(ue=>ue.userId!==H.userId))}),B.on("message_error",H=>{y(H.error)}),E(B),()=>{B.close()}},[$]),g.useEffect(()=>{(async()=>{try{x(!0);const B=localStorage.getItem("token");if(console.log("Token from localStorage:",B?"Token exists":"No token found"),console.log("User from context:",$),!B||!$){console.error("No token or user found"),y("Usuario no autenticado"),a([]),o([]);return}const[H,G]=await Promise.all([ye.get("/api/users/lawyers",{headers:{Authorization:`Bearer ${B}`}}),ye.get("/api/chat/conversations",{headers:{Authorization:`Bearer ${B}`}})]);console.log("Lawyers response:",H.data),console.log("Lawyers response type:",typeof H.data),console.log("Lawyers response isArray:",Array.isArray(H.data)),console.log("Lawyers response status:",H.status),console.log("Conversations response:",G.data),console.log("Conversations response type:",typeof G.data),console.log("Conversations response isArray:",Array.isArray(G.data)),console.log("Conversations response status:",G.status),console.log("Conversations response headers:",G.headers),o(Array.isArray(H.data)?H.data:[]),a(Array.isArray(G.data)?G.data:[]),y(null)}catch(B){console.error("Error fetching data:",B),y("Error al cargar los datos"),a([]),o([])}finally{x(!1)}})()},[]),g.useEffect(()=>{c&&P(c)},[c]),g.useEffect(()=>{I()},[e]);const P=async j=>{try{const B=localStorage.getItem("token"),H=await ye.get(`/api/chat/messages/${j}`,{headers:{Authorization:`Bearer ${B}`}});t(H.data)}catch(B){console.error("Error fetching messages:",B),y("Error al cargar los mensajes")}},I=()=>{var j;(j=O.current)==null||j.scrollIntoView({behavior:"smooth"})},L=async j=>{if(j.preventDefault(),!(!u.trim()||!c||!h))try{p(!0),h.emit("send_message",{receiverId:c,content:u}),m(""),h.emit("typing_stop",{receiverId:c}),D(!1)}catch(B){console.error("Error sending message:",B),y("Error al enviar el mensaje")}finally{p(!1)}},F=j=>{i(j),d(j),t([])},T=j=>{d(j)},M=j=>{m(j.target.value),!(!h||!c)&&(k||(D(!0),h.emit("typing_start",{receiverId:c})),A.current&&clearTimeout(A.current),A.current=setTimeout(()=>{D(!1),h.emit("typing_stop",{receiverId:c})},1e3))},V=(j,B)=>{"Notification"in window&&Notification.permission==="granted"&&new Notification(`Nuevo mensaje de ${j}`,{body:B,icon:"/favicon.ico"})},K=j=>{const B=new Date(j),G=(new Date().getTime()-B.getTime())/(1e3*60*60);return G<24?B.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):G<48?"Ayer":B.toLocaleDateString()},z=j=>w.some(B=>B.userId===j),U=j=>j.charAt(0).toUpperCase();return f?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})):n.createElement("div",{className:"py-6"},n.createElement("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"bg-white rounded-lg shadow"},n.createElement("div",{className:"p-4 border-b"},n.createElement("h1",{className:"text-xl font-semibold"},"Chat con Abogado"),n.createElement("p",{className:"text-sm text-gray-600"},"Comunicación directa con tu abogado")),n.createElement("div",{className:"flex h-96"},n.createElement("div",{className:"w-1/3 border-r bg-gray-50"},n.createElement("div",{className:"p-4 border-b"},n.createElement("h2",{className:"font-medium text-gray-900 mb-3"},"Conversaciones"),!Array.isArray(r)||r.length===0?n.createElement("p",{className:"text-sm text-gray-500"},"No hay conversaciones activas"):n.createElement("div",{className:"space-y-2"},r.map(j=>n.createElement("div",{key:j.userId,onClick:()=>T(j.userId),className:`p-3 rounded-lg cursor-pointer transition-colors ${c===j.userId?"bg-blue-100 border-blue-300":"bg-white hover:bg-gray-100"}`},n.createElement("div",{className:"flex items-center space-x-3"},n.createElement("div",{className:"relative"},n.createElement("div",{className:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center"},n.createElement("span",{className:"text-white text-sm font-medium"},U(j.userName))),z(j.userId)&&n.createElement("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})),n.createElement("div",{className:"flex-1 min-w-0"},n.createElement("div",{className:"flex justify-between items-start"},n.createElement("p",{className:"text-sm font-medium text-gray-900 truncate"},j.userName),n.createElement("div",{className:"text-xs text-gray-400"},K(j.lastMessageTime))),n.createElement("p",{className:"text-xs text-gray-500 truncate"},j.lastMessage),j.unreadCount>0&&n.createElement("div",{className:"mt-1"},n.createElement("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800"},j.unreadCount)))))))),n.createElement("div",{className:"p-4 border-t"},n.createElement("h3",{className:"font-medium text-gray-900 mb-3"},"Nueva conversación"),n.createElement("select",{value:l,onChange:j=>F(j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Seleccionar abogado para nueva conversación"},n.createElement("option",{value:""},"Selecciona un abogado"),s.map(j=>n.createElement("option",{key:j.id,value:j.id},j.name," (",j.email,")"))))),n.createElement("div",{className:"flex-1 flex flex-col"},c?n.createElement(n.Fragment,null,n.createElement("div",{className:"p-4 border-b bg-gray-50"},n.createElement("div",{className:"flex items-center justify-between"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"relative"},n.createElement("div",{className:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center"},n.createElement("span",{className:"text-white text-sm font-medium"},U(Array.isArray(r)&&((Y=r.find(j=>j.userId===c))==null?void 0:Y.userName)||"A"))),z(c)&&n.createElement("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})),n.createElement("div",{className:"ml-3"},n.createElement("p",{className:"font-medium text-gray-900"},Array.isArray(r)&&((X=r.find(j=>j.userId===c))==null?void 0:X.userName)||"Abogado"),n.createElement("p",{className:"text-sm text-gray-500"},z(c)?"En línea":"Desconectado"))))),n.createElement("div",{className:"flex-1 overflow-y-auto p-4 space-y-4"},e.length===0?n.createElement("div",{className:"text-center text-gray-500 mt-8"},n.createElement("p",null,"No hay mensajes aún. ¡Inicia la conversación!")):e.map(j=>n.createElement("div",{key:j.id,className:`flex ${j.isOwnMessage?"justify-end":"justify-start"}`},n.createElement("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${j.isOwnMessage?"bg-blue-600 text-white":"bg-gray-200 text-gray-900"}`},n.createElement("div",{className:"text-sm"},j.content),n.createElement("div",{className:`text-xs mt-1 ${j.isOwnMessage?"text-blue-100":"text-gray-500"}`},K(j.createdAt))))),S.has(c)&&n.createElement("div",{className:"flex justify-start"},n.createElement("div",{className:"bg-gray-200 text-gray-900 px-4 py-2 rounded-lg"},n.createElement("div",{className:"text-sm"},"Escribiendo..."))),n.createElement("div",{ref:O})),n.createElement("form",{onSubmit:L,className:"p-4 border-t"},n.createElement("div",{className:"flex space-x-2"},n.createElement("input",{type:"text",value:u,onChange:M,placeholder:"Escribe tu mensaje...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:v}),n.createElement("button",{type:"submit",disabled:!u.trim()||v,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"},v?"Enviando...":"Enviar")))):n.createElement("div",{className:"flex-1 flex items-center justify-center"},n.createElement("div",{className:"text-center text-gray-500"},n.createElement("svg",{className:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})),n.createElement("p",{className:"text-lg font-medium"},"Selecciona una conversación"),n.createElement("p",{className:"text-sm"},"O inicia una nueva conversación con un abogado"))))),b&&n.createElement("div",{className:"p-4 bg-red-50 border-t border-red-200"},n.createElement("div",{className:"text-red-600 text-sm"},b)))))},bK=()=>{var Y,X;const[e,t]=g.useState([]),[r,a]=g.useState([]),[s,o]=g.useState([]),[l,i]=g.useState(""),[c,d]=g.useState(""),[u,m]=g.useState(""),[f,x]=g.useState(!0),[b,y]=g.useState(null),[v,p]=g.useState(!1),[h,E]=g.useState(null),[w,N]=g.useState([]),[S,C]=g.useState(new Set),[k,D]=g.useState(!1),O=g.useRef(null),A=g.useRef(null),{user:$}=Te();g.useEffect(()=>{if(!$)return;const j=localStorage.getItem("token"),B=Xs("http://localhost:3000",{auth:{token:j,user:{id:$.id,name:$.name,role:$.role}}});return B.on("connect",()=>{console.log("Conectado al servidor de chat")}),B.on("disconnect",()=>{console.log("Desconectado del servidor de chat")}),B.on("new_message",H=>{t(G=>[...G,H]),a(G=>G.map(ue=>ue.userId===H.senderId?{...ue,lastMessage:H.content,lastMessageTime:H.createdAt}:ue)),c!==H.senderId&&V(H.senderName,H.content)}),B.on("message_sent",H=>{t(G=>[...G,H])}),B.on("user_typing",H=>{H.isTyping?C(G=>new Set(G).add(H.userId)):C(G=>{const ue=new Set(G);return ue.delete(H.userId),ue})}),B.on("user_connected",H=>{N(G=>[...G,H])}),B.on("user_disconnected",H=>{N(G=>G.filter(ue=>ue.userId!==H.userId))}),B.on("message_error",H=>{y(H.error)}),E(B),()=>{B.close()}},[$]),g.useEffect(()=>{(async()=>{try{x(!0);const B=localStorage.getItem("token"),[H,G]=await Promise.all([J.get("/users/clients",{headers:{Authorization:`Bearer ${B}`}}),J.get("/chat/conversations",{headers:{Authorization:`Bearer ${B}`}})]);o(H.data),a(G.data),y(null)}catch(B){console.error("Error fetching data:",B),y("Error al cargar los datos")}finally{x(!1)}})()},[]),g.useEffect(()=>{c&&P(c)},[c]),g.useEffect(()=>{I()},[e]);const P=async j=>{try{const B=localStorage.getItem("token"),H=await J.get(`/chat/messages/${j}`,{headers:{Authorization:`Bearer ${B}`}});t(H.data)}catch(B){console.error("Error fetching messages:",B),y("Error al cargar los mensajes")}},I=()=>{var j;(j=O.current)==null||j.scrollIntoView({behavior:"smooth"})},L=async j=>{if(j.preventDefault(),!(!u.trim()||!c||!h))try{p(!0),h.emit("send_message",{receiverId:c,content:u}),m(""),h.emit("typing_stop",{receiverId:c}),D(!1)}catch(B){console.error("Error sending message:",B),y("Error al enviar el mensaje")}finally{p(!1)}},F=j=>{i(j),d(j),t([])},T=j=>{d(j)},M=j=>{m(j.target.value),!(!h||!c)&&(k||(D(!0),h.emit("typing_start",{receiverId:c})),A.current&&clearTimeout(A.current),A.current=setTimeout(()=>{D(!1),h.emit("typing_stop",{receiverId:c})},1e3))},V=(j,B)=>{"Notification"in window&&Notification.permission==="granted"&&new Notification(`Nuevo mensaje de ${j}`,{body:B,icon:"/favicon.ico"})},K=j=>{const B=new Date(j),G=(new Date().getTime()-B.getTime())/(1e3*60*60);return G<24?B.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):G<48?"Ayer":B.toLocaleDateString()},z=j=>w.some(B=>B.userId===j),U=j=>j.charAt(0).toUpperCase();return f?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})):n.createElement("div",{className:"py-6"},n.createElement("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"bg-white rounded-lg shadow"},n.createElement("div",{className:"p-4 border-b"},n.createElement("h1",{className:"text-xl font-semibold"},"Chat con Clientes"),n.createElement("p",{className:"text-sm text-gray-600"},"Comunicación directa con tus clientes")),n.createElement("div",{className:"flex h-96"},n.createElement("div",{className:"w-1/3 border-r bg-gray-50"},n.createElement("div",{className:"p-4 border-b"},n.createElement("h2",{className:"font-medium text-gray-900 mb-3"},"Conversaciones"),r.length===0?n.createElement("p",{className:"text-sm text-gray-500"},"No hay conversaciones activas"):n.createElement("div",{className:"space-y-2"},r.map(j=>n.createElement("div",{key:j.userId,onClick:()=>T(j.userId),className:`p-3 rounded-lg cursor-pointer transition-colors ${c===j.userId?"bg-blue-100 border-blue-300":"bg-white hover:bg-gray-100"}`},n.createElement("div",{className:"flex items-center space-x-3"},n.createElement("div",{className:"relative"},n.createElement("div",{className:"w-10 h-10 bg-green-600 rounded-full flex items-center justify-center"},n.createElement("span",{className:"text-white text-sm font-medium"},U(j.userName))),z(j.userId)&&n.createElement("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})),n.createElement("div",{className:"flex-1 min-w-0"},n.createElement("div",{className:"flex justify-between items-start"},n.createElement("p",{className:"text-sm font-medium text-gray-900 truncate"},j.userName),n.createElement("div",{className:"text-xs text-gray-400"},K(j.lastMessageTime))),n.createElement("p",{className:"text-xs text-gray-500 truncate"},j.lastMessage),j.unreadCount>0&&n.createElement("div",{className:"mt-1"},n.createElement("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800"},j.unreadCount)))))))),n.createElement("div",{className:"p-4 border-t"},n.createElement("h3",{className:"font-medium text-gray-900 mb-3"},"Nueva conversación"),n.createElement("select",{value:l,onChange:j=>F(j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Seleccionar cliente para nueva conversación"},n.createElement("option",{value:""},"Selecciona un cliente"),s.map(j=>n.createElement("option",{key:j.id,value:j.user.id},j.user.name," (",j.user.email,")"))))),n.createElement("div",{className:"flex-1 flex flex-col"},c?n.createElement(n.Fragment,null,n.createElement("div",{className:"p-4 border-b bg-gray-50"},n.createElement("div",{className:"flex items-center justify-between"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"relative"},n.createElement("div",{className:"w-10 h-10 bg-green-600 rounded-full flex items-center justify-center"},n.createElement("span",{className:"text-white text-sm font-medium"},U(((Y=r.find(j=>j.userId===c))==null?void 0:Y.userName)||"C"))),z(c)&&n.createElement("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})),n.createElement("div",{className:"ml-3"},n.createElement("p",{className:"font-medium text-gray-900"},((X=r.find(j=>j.userId===c))==null?void 0:X.userName)||"Cliente"),n.createElement("p",{className:"text-sm text-gray-500"},z(c)?"En línea":"Desconectado"))))),n.createElement("div",{className:"flex-1 overflow-y-auto p-4 space-y-4"},e.length===0?n.createElement("div",{className:"text-center text-gray-500 mt-8"},n.createElement("p",null,"No hay mensajes aún. ¡Inicia la conversación!")):e.map(j=>n.createElement("div",{key:j.id,className:`flex ${j.isOwnMessage?"justify-end":"justify-start"}`},n.createElement("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${j.isOwnMessage?"bg-blue-600 text-white":"bg-gray-200 text-gray-900"}`},n.createElement("div",{className:"text-sm"},j.content),n.createElement("div",{className:`text-xs mt-1 ${j.isOwnMessage?"text-blue-100":"text-gray-500"}`},K(j.createdAt))))),S.has(c)&&n.createElement("div",{className:"flex justify-start"},n.createElement("div",{className:"bg-gray-200 text-gray-900 px-4 py-2 rounded-lg"},n.createElement("div",{className:"text-sm"},"Escribiendo..."))),n.createElement("div",{ref:O})),n.createElement("form",{onSubmit:L,className:"p-4 border-t"},n.createElement("div",{className:"flex space-x-2"},n.createElement("input",{type:"text",value:u,onChange:M,placeholder:"Escribe tu mensaje...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:v}),n.createElement("button",{type:"submit",disabled:!u.trim()||v,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"},v?"Enviando...":"Enviar")))):n.createElement("div",{className:"flex-1 flex items-center justify-center"},n.createElement("div",{className:"text-center text-gray-500"},n.createElement("svg",{className:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})),n.createElement("p",{className:"text-lg font-medium"},"Selecciona una conversación"),n.createElement("p",{className:"text-sm"},"O inicia una nueva conversación con un cliente"))))),b&&n.createElement("div",{className:"p-4 bg-red-50 border-t border-red-200"},n.createElement("div",{className:"text-red-600 text-sm"},b)))))};async function wK(e){return(await J.get("/invoices",{headers:{Authorization:`Bearer ${e}`}})).data}async function NK(e,t){return(await J.post("/invoices",e,{headers:{Authorization:`Bearer ${t}`}})).data}async function SK(e,t,r){return(await J.put(`/invoices/${e}`,t,{headers:{Authorization:`Bearer ${r}`}})).data}async function CK(e,t){return(await J.delete(`/invoices/${e}`,{headers:{Authorization:`Bearer ${t}`}})).data}async function kK(e){return(await J.get("/users/clients",{headers:{Authorization:`Bearer ${e}`}})).data}const DK=async(e,t)=>(await J.post("/provision-fondos",e,{headers:{Authorization:`Bearer ${t}`}})).data,AK=async(e,t,r)=>(await J.patch("/provision-fondos/link-to-invoice",{provisionId:e,invoiceId:t},{headers:{Authorization:`Bearer ${r}`}})).data,TK=async e=>(await J.get("/provision-fondos",{params:{soloPendientes:!0},headers:{Authorization:`Bearer ${e}`}})).data,_K=async(e,t,r)=>(await J.get("/provision-fondos",{params:{clientId:e,expedienteId:t,soloPendientes:!0},headers:{Authorization:`Bearer ${r}`}})).data,OK=async(e,t)=>(await J.get("/provision-fondos",{params:{clientId:e},headers:{Authorization:`Bearer ${t}`}})).data,BE={numeroFactura:"",fechaFactura:"",tipoFactura:"F",receptorId:"",importeTotal:0,baseImponible:0,cuotaIVA:0,tipoIVA:21,regimenIvaEmisor:"General",claveOperacion:"01",metodoPago:"TRANSFERENCIA",fechaOperacion:"",items:[{description:"",quantity:1,unitPrice:0,total:0}],aplicarIVA:!0,retencion:"",descuento:""},RK=()=>{const{user:e}=Te(),t=localStorage.getItem("token"),[r,a]=g.useState([]),[s,o]=g.useState(!0),[l,i]=g.useState(null),[c,d]=g.useState(!1),[u,m]=g.useState(BE),[f,x]=g.useState(null),[b,y]=g.useState(""),[v,p]=g.useState(""),[h,E]=g.useState([]),[w,N]=g.useState(null),[S,C]=g.useState(null),[k,D]=g.useState(!1),[O,A]=g.useState(null),[$,P]=g.useState(null),[I,L]=g.useState([]),[F,T]=g.useState(""),[M,V]=g.useState(null),[K,z]=g.useState([]),[U,Y]=g.useState([]),[X,j]=g.useState([]),[B,H]=g.useState([]),[G,ue]=g.useState(null),[W,me]=g.useState(null),[ae,xe]=g.useState(!1),Me=h.find(_=>_.user.id===u.receptorId),Be=Me==null?void 0:Me.id,[Q,de]=g.useState(""),[ke,Ve]=g.useState("");g.useEffect(()=>{we(),Pe()},[]),g.useEffect(()=>{(async()=>{if(u.receptorId&&u.expedienteId)try{const ne=localStorage.getItem("token");if(!ne)throw new Error("No token found");const Ee=await TK(ne);console.log("Provisiones recibidas:",Ee),console.log("Buscando clientProfileId:",Be,"expedienteId:",u.expedienteId);const ve=Ee.filter(ie=>ie.clientId===Be&&ie.expedienteId===u.expedienteId&&(!ie.invoiceId||ie.invoiceId===u.id));console.log("Provisiones filtradas:",ve),ve.length>0?(V(ve[0]),Y(ve)):(V(null),Y([]))}catch{V(null),Y([])}else V(null),Y([])})()},[u.receptorId,u.expedienteId,Be,u.id]),g.useEffect(()=>{(async()=>{if(u.receptorId&&u.expedienteId&&Be)try{const ne=localStorage.getItem("token"),Ee=await _K(Be??"",u.expedienteId??"",ne??"");if(u.id){const ve=u.provisionFondos||[],Ie=[...Ee,...ve].filter(($e,Je,rt)=>Je===rt.findIndex(nt=>nt.id===$e.id));j(Ie)}else j(Ee)}catch{j([])}else j([])})()},[u.receptorId,u.expedienteId,Be,u.id]);const we=async()=>{o(!0);try{if(!t)throw new Error("No token available");const _={};Q&&(_.clientId=Q),ke&&(_.paymentDate=ke);const ne=await J.get("/invoices",{headers:{Authorization:`Bearer ${t}`},params:_});a(ne.data)}catch{i("Error al cargar las facturas")}finally{o(!1)}},Pe=async()=>{try{if(!t)throw new Error("No token available");const _=await kK(t);E(_)}catch{E([])}},He=()=>{m(BE),H([]),Y([]),V(null),d(!0)},tt=_=>{const{name:ne,value:Ee}=_.target;m(ve=>({...ve,[ne]:Ee}))},vr=async _=>{tt(_);const ne=_.target.value;if(m(Ee=>({...Ee,expedienteId:""})),ne)try{const Ee=localStorage.getItem("token"),ie=(await J.get("/cases",{headers:{Authorization:`Bearer ${Ee}`}})).data.filter(Ie=>{var $e,Je;return((Je=($e=Ie.client)==null?void 0:$e.user)==null?void 0:Je.id)===ne||Ie.clientId===ne});z(ie)}catch{z([])}else z([])},yr=(_,ne,Ee)=>{m(ve=>{const ie=[...ve.items];return ie[_][ne]=Ee,ie[_].total=ie[_].quantity*ie[_].unitPrice,{...ve,items:ie}})},Qr=()=>{m(_=>({..._,items:[..._.items,{description:"",quantity:1,unitPrice:0,total:0}]}))},re=async _=>{if(_.preventDefault(),N(null),C(null),D(!0),!u.receptorId||!u.fechaOperacion||!u.items.length){N("Completa todos los campos obligatorios."),D(!1);return}if(u.items.some(ne=>!ne.description||ne.quantity<=0||ne.unitPrice===void 0)){N("Todos los conceptos deben tener descripción, cantidad y precio válidos."),D(!1);return}try{const{emisorId:ne,fechaFactura:Ee,importeTotal:ve,baseImponible:ie,cuotaIVA:Ie,...$e}=u,Je={...$e,descuento:u.descuento===""||u.descuento==null?0:Number(u.descuento),retencion:u.retencion===""||u.retencion==null?0:Number(u.retencion),tipoIVA:u.tipoIVA===""||u.tipoIVA==null?21:Number(u.tipoIVA),estado:u.estado||"emitida",provisionIds:B};console.log("FRONTEND - provisionesSeleccionadas:",B),console.log("FRONTEND - facturaData a enviar:",Je),await NK(Je,t??""),C("✅ Factura creada correctamente."),d(!1),we(),setTimeout(()=>C(null),5e3)}catch{N("❌ Error al crear la factura. Verifica los datos e intenta de nuevo.")}finally{D(!1)}},ge=async _=>{if(_.preventDefault(),N(null),C(null),D(!0),!u.receptorId||!u.fechaOperacion||!u.items.length){N("Completa todos los campos obligatorios."),D(!1);return}if(u.items.some(ne=>!ne.description||ne.quantity<=0||ne.unitPrice===void 0)){N("Todos los conceptos deben tener descripción, cantidad y precio válidos."),D(!1);return}try{const{id:ne,emisorId:Ee,fechaFactura:ve,importeTotal:ie,baseImponible:Ie,cuotaIVA:$e,xml:Je,xmlFirmado:rt,estado:nt,selloTiempo:vt,createdAt:Oe,updatedAt:Xe,emisor:Tr,receptor:ar,expediente:Er,provisionFondos:$n,...Jr}=u,bt=Jr.items.map(Bo=>{const{id:WK,invoiceId:HK,...aS}=Bo;return aS}),gn={...Jr,items:bt,provisionIds:B,descuento:u.descuento===""||u.descuento==null?0:Number(u.descuento),retencion:u.retencion===""||u.retencion==null?0:Number(u.retencion),tipoIVA:u.tipoIVA===""||u.tipoIVA==null?21:Number(u.tipoIVA),estado:u.estado||"emitida"};await SK(u.id,gn,t??""),C("✅ Factura actualizada correctamente."),d(!1),we(),setTimeout(()=>C(null),5e3)}catch{N("❌ Error al actualizar la factura. Verifica los datos e intenta de nuevo.")}finally{D(!1)}},be=()=>n.createElement("div",{className:"mb-6 p-4 bg-blue-50 border-l-4 border-blue-400 rounded"},n.createElement("h2",{className:"font-bold mb-2 text-blue-800"},"¿Cómo funciona la firma electrónica de facturas?"),n.createElement("ol",{className:"list-decimal pl-6 mb-2 text-sm text-blue-900"},n.createElement("li",null,"Selecciona una o varias facturas pendientes de firma en la tabla."),n.createElement("li",null,"Pulsa ",n.createElement("b",null,'"Firmar electrónicamente"')," para iniciar el proceso."),n.createElement("li",null,"El sistema generará el XML Facturae y lo enviará a ",n.createElement("b",null,"Autofirma")," (debes tenerlo instalado y abierto)."),n.createElement("li",null,"Autofirma te pedirá seleccionar tu certificado y firmará el XML localmente, sin exponer tu clave privada."),n.createElement("li",null,"El XML firmado se subirá automáticamente y la factura quedará firmada digitalmente.")),n.createElement("div",{className:"text-xs text-blue-700"},n.createElement("b",null,"Seguridad:")," Tu clave privada ",n.createElement("b",null,"nunca se almacena")," en el sistema. Si subes archivos PEM, solo se usan en memoria para la firma y se descartan después.",n.createElement("br",null),n.createElement("b",null,"¿Qué es Autofirma?")," Es una aplicación oficial del Gobierno de España para firmar documentos electrónicos con tu certificado digital.",n.createElement("br",null),n.createElement("b",null,"¿Problemas?")," Si no tienes Autofirma, puedes descargarlo en ",n.createElement("a",{href:"https://firmaelectronica.gob.es/Home/Descargas.html",target:"_blank",rel:"noopener noreferrer",className:"underline text-blue-600"},"firmaelectronica.gob.es"),".")),De=_=>{L(ne=>ne.includes(_)?ne.filter(Ee=>Ee!==_):[...ne,_])},R=()=>{const _=document.createElement("a");_.href="afirma://service?op=launch",_.style.display="none",document.body.appendChild(_),_.click(),document.body.removeChild(_)},oe=async()=>{R(),T("Generando XML de las facturas seleccionadas...");try{const _=await fetch("/api/invoices/generate-xml",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({ids:I})});if(!_.ok)throw new Error("Error generando XML");const ne=await _.json();for(const{id:Ee,xml:ve}of ne){T(`Firmando factura ${Ee} con Autofirma...`);const ie=await fetch("http://127.0.0.1:8080/afirma-signature-http",{method:"POST",body:new Blob([ve],{type:"text/xml"}),headers:{"Content-Type":"application/xml"}});if(!ie.ok)throw new Error("Error en Autofirma");const Ie=await ie.text();if(T(`Subiendo XML firmado de la factura ${Ee}...`),!(await fetch("/api/invoices/upload-signed",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({id:Ee,signedXml:Ie})})).ok)throw new Error("Error subiendo XML firmado")}T("¡Facturas firmadas correctamente!"),L([]),we(),C("🔐 Facturas firmadas electrónicamente correctamente."),setTimeout(()=>C(null),5e3)}catch(_){T("Error en el proceso de firma: "+(_.message||_)),i("❌ Error en el proceso de firma: "+(_.message||_)),setTimeout(()=>i(null),5e3)}},Ae=_=>{me(_),xe(!0)},he=async _=>{if(console.log("EDITANDO FACTURA:",_),console.log("PROVISIONES DE LA FACTURA:",_.provisionFondos),m({..._,items:_.items||[],aplicarIVA:_.aplicarIVA!==!1,retencion:_.retencion??"",descuento:_.descuento??""}),d(!0),_.receptorId)try{const ne=localStorage.getItem("token"),ve=(await J.get("/cases",{headers:{Authorization:`Bearer ${ne}`}})).data.filter(ie=>{var Ie,$e;return(($e=(Ie=ie.client)==null?void 0:Ie.user)==null?void 0:$e.id)===_.receptorId||ie.clientId===_.receptorId});z(ve)}catch{z([])}if(_.provisionFondos&&_.provisionFondos.length>0){console.log("PROVISIONES ENCONTRADAS:",_.provisionFondos);const ne=_.provisionFondos.map(Ee=>Ee.id);console.log("PROVISION IDs:",ne),H(ne),Y(_.provisionFondos),V(_.provisionFondos[0])}else console.log("NO HAY PROVISIONES EN LA FACTURA"),H([]),Y([]),V(null)},Ke=async _=>{var ne,Ee;if(window.confirm("¿Estás seguro de que quieres eliminar esta factura? Esta acción no se puede deshacer.")){ue(_);try{await CK(_,t??""),await we(),C("🗑️ Factura eliminada correctamente."),setTimeout(()=>C(null),5e3)}catch(ve){console.error("Error al eliminar factura:",ve);const ie=((Ee=(ne=ve==null?void 0:ve.response)==null?void 0:ne.data)==null?void 0:Ee.message)||(ve==null?void 0:ve.message)||"Error al eliminar la factura.";i(`❌ Error al eliminar la factura: ${ie}`),setTimeout(()=>i(null),5e3)}finally{ue(null)}}},Ye=_=>{var ve,ie,Ie,$e,Je;const ne={"Información General":{ID:_.id,"Número de Factura":_.numeroFactura,Tipo:_.tipoFactura,Estado:_.estado,"Fecha de Creación":new Date(_.createdAt).toLocaleString("es-ES"),"Última Actualización":new Date(_.updatedAt).toLocaleString("es-ES")},Fechas:{"Fecha de Factura":new Date(_.fechaFactura).toLocaleDateString("es-ES"),"Fecha de Operación":new Date(_.fechaOperacion).toLocaleDateString("es-ES"),"Sello de Tiempo":_.selloTiempo?new Date(_.selloTiempo).toLocaleString("es-ES"):"No aplicado"},"Datos Fiscales":{"Base Imponible":`${(ve=_.baseImponible)==null?void 0:ve.toFixed(2)} €`,"Cuota IVA":`${(ie=_.cuotaIVA)==null?void 0:ie.toFixed(2)} €`,"Tipo IVA":`${_.tipoIVA}%`,"Importe Total":`${(Ie=_.importeTotal)==null?void 0:Ie.toFixed(2)} €`,"Régimen IVA Emisor":_.regimenIvaEmisor,"Clave de Operación":_.claveOperacion,"Método de Pago":_.metodoPago},Relaciones:{"Emisor ID":_.emisorId,"Receptor ID":_.receptorId,"Expediente ID":_.expedienteId||"No asociado","Número de Items":(($e=_.items)==null?void 0:$e.length)||0,"Provisiones Asociadas":((Je=_.provisionFondos)==null?void 0:Je.length)||0},XML:{"XML Generado":_.xml?"Sí":"No","XML Firmado":_.xmlFirmado?"Sí":"No","Tamaño XML":_.xml?`${Math.round(_.xml.length/1024)} KB`:"N/A","Tamaño XML Firmado":_.xmlFirmado?`${Math.round(_.xmlFirmado.length/1024)} KB`:"N/A"},Anulación:_.motivoAnulacion?{"Motivo de Anulación":_.motivoAnulacion}:"No anulada"},Ee=Object.entries(ne).map(([rt,nt])=>typeof nt=="string"?`${rt}: ${nt}`:`${rt}:
${Object.entries(nt).map(([vt,Oe])=>`  ${vt}: ${Oe}`).join(`
`)}`).join(`

`);alert(`METADATOS DE LA FACTURA

${Ee}`)},ft=({invoice:_})=>{var Ie,$e,Je,rt,nt,vt;console.log("Invoice data for view:",{descuento:_.descuento,baseImponible:_.baseImponible,cuotaIVA:_.cuotaIVA,importeTotal:_.importeTotal});const ne=()=>{var Xe,Tr,ar,Er,$n,Jr;const Oe=window.open("","_blank");Oe&&(Oe.document.write(`
          <!DOCTYPE html>
          <html>
            <head>
              <title>Factura ${_.numeroFactura}</title>
              <style>
                body { font-family: Arial, sans-serif; margin: 0; padding: 20px; }
                .invoice-container { max-width: 800px; margin: 0 auto; }
                table { width: 100%; border-collapse: collapse; margin: 20px 0; }
                th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
                th { background-color: #f2f2f2; }
                .totals { text-align: right; margin-top: 20px; }
                .totals div { margin: 5px 0; }
                .header { border-bottom: 2px solid #333; padding-bottom: 20px; margin-bottom: 20px; }
                .section { margin: 20px 0; }
                .section h3 { color: #333; margin-bottom: 10px; }
                .discount { background-color: #fff3cd; padding: 10px; border: 1px solid #ffeaa7; margin: 10px 0; }
                .provisions { background-color: #d1ecf1; padding: 10px; border: 1px solid #bee5eb; margin: 10px 0; }
                @media print {
                  body { margin: 0; }
                  .no-print { display: none; }
                }
              </style>
            </head>
            <body>
              <div class="invoice-container">
                <div class="header">
                  <h1>FACTURA</h1>
                  <div><strong>Número:</strong> ${_.numeroFactura}</div>
                  <div><strong>Fecha:</strong> ${ve(_.fechaFactura)}</div>
                  <div><strong>Tipo:</strong> ${_.tipoFactura==="F"?"Completa":"Rectificativa"}</div>
                  <div><strong>Estado:</strong> ${_.estado.toUpperCase()}</div>
                  <div><strong>Fecha de operación:</strong> ${ve(_.fechaOperacion)}</div>
                </div>
                
                <div class="section">
                  <h3>DATOS DEL EMISOR</h3>
                  <div><strong>Nombre:</strong> ${((Xe=_.emisor)==null?void 0:Xe.name)||"N/A"}</div>
                  <div><strong>Email:</strong> ${((Tr=_.emisor)==null?void 0:Tr.email)||"N/A"}</div>
                  <div><strong>Régimen IVA:</strong> ${_.regimenIvaEmisor}</div>
                </div>
                
                <div class="section">
                  <h3>DATOS DEL RECEPTOR</h3>
                  <div><strong>Nombre:</strong> ${((ar=_.receptor)==null?void 0:ar.name)||"N/A"}</div>
                  <div><strong>Email:</strong> ${((Er=_.receptor)==null?void 0:Er.email)||"N/A"}</div>
                  ${_.expediente?`<div><strong>Expediente:</strong> ${_.expediente.title}</div>`:""}
                </div>
                
                <div class="section">
                  <h3>CONCEPTOS</h3>
                  <table>
                    <thead>
                      <tr>
                        <th>Descripción</th>
                        <th>Cantidad</th>
                        <th>Precio Unitario</th>
                        <th>Total</th>
                      </tr>
                    </thead>
                    <tbody>
                      ${(($n=_.items)==null?void 0:$n.map(bt=>`
                        <tr>
                          <td>${bt.description}</td>
                          <td>${bt.quantity}</td>
                          <td>${ie(bt.unitPrice)}</td>
                          <td>${ie(bt.total)}</td>
                        </tr>
                      `).join(""))||""}
                    </tbody>
                  </table>
                </div>
                
                ${_.descuento&&_.descuento>0?`
                <div class="section">
                  <h3>DESCUENTOS</h3>
                  <div class="discount">
                    <strong>Descuento (${_.descuento??0}%):</strong> 
                    -${ie((((Jr=_.items)==null?void 0:Jr.reduce((bt,gn)=>bt+gn.quantity*gn.unitPrice,0))||0)*((_.descuento??0)/100))}
                  </div>
                </div>
                `:""}
                
                ${_.provisionFondos&&_.provisionFondos.length>0?`
                <div class="section">
                  <h3>PROVISIONES DE FONDOS ASOCIADAS</h3>
                  <div class="provisions">
                    <table>
                      <thead>
                        <tr>
                          <th>Descripción</th>
                          <th>Fecha</th>
                          <th>Importe</th>
                        </tr>
                      </thead>
                      <tbody>
                        ${_.provisionFondos.map(bt=>`
                          <tr>
                            <td>${bt.description||"Sin descripción"}</td>
                            <td>${ve(bt.date)}</td>
                            <td>${ie(bt.amount)}</td>
                          </tr>
                        `).join("")}
                      </tbody>
                    </table>
                  </div>
                </div>
                `:""}
                
                <div class="totals">
                  <div><strong>Base Imponible:</strong> ${ie(_.baseImponible??0)}</div>
                  <div><strong>IVA (${_.tipoIVA??21}%):</strong> ${ie(_.cuotaIVA??0)}</div>
                  <div style="font-size: 1.2em; font-weight: bold; border-top: 1px solid #333; padding-top: 10px;">
                    <strong>TOTAL:</strong> ${ie(_.importeTotal??0)}
                  </div>
                </div>
                
                <div class="section">
                  <div><strong>Método de pago:</strong> ${_.metodoPago}</div>
                  <div><strong>Clave de operación:</strong> ${_.claveOperacion}</div>
                  <div><strong>Fecha de creación:</strong> ${ve(_.createdAt)}</div>
                  ${_.motivoAnulacion?`<div><strong>Motivo de anulación:</strong> ${_.motivoAnulacion}</div>`:""}
                </div>
              </div>
            </body>
          </html>
        `),Oe.document.close(),Oe.focus(),Oe.print(),Oe.close())},Ee=()=>{ne()},ve=Oe=>new Date(Oe).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}),ie=Oe=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(Oe);return n.createElement("div",{className:"bg-white p-8 max-w-4xl mx-auto"},n.createElement("div",{className:"border-b-2 border-gray-300 pb-6 mb-6"},n.createElement("div",{className:"flex justify-between items-start"},n.createElement("div",null,n.createElement("h1",{className:"text-3xl font-bold text-gray-800 mb-2"},"FACTURA"),n.createElement("div",{className:"my-4 flex flex-col items-center"},_.qrData?n.createElement(n.Fragment,null,n.createElement("h4",{className:"text-xs text-gray-600 mb-1"},"Código QR de la factura"),n.createElement(L2,{value:_.qrData,size:120}),n.createElement("pre",{className:"text-xs mt-1 bg-gray-100 p-1 rounded"},_.qrData)):n.createElement("span",{className:"text-xs text-gray-400"},"QR no disponible")),n.createElement("div",{className:"text-lg text-gray-600"},n.createElement("div",null,n.createElement("strong",null,"Número:")," ",_.numeroFactura||"N/A"),n.createElement("div",null,n.createElement("strong",null,"Fecha:")," ",_.fechaFactura?ve(_.fechaFactura):"N/A"),n.createElement("div",null,n.createElement("strong",null,"Tipo:")," ",_.tipoFactura==="F"?"Completa":_.tipoFactura==="R"?"Rectificativa":"N/A"),n.createElement("div",null,n.createElement("strong",null,"Estado:")," ",n.createElement("span",{className:`px-2 py-1 rounded text-xs ${_.estado==="emitida"?"bg-green-100 text-green-800":_.estado==="anulada"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`},(_.estado||"N/A").toUpperCase())))),n.createElement("div",{className:"text-right"},n.createElement("div",{className:"text-sm text-gray-600"},n.createElement("div",null,n.createElement("strong",null,"Fecha de operación:")),n.createElement("div",null,ve(_.fechaOperacion)))))),n.createElement("div",{className:"grid grid-cols-2 gap-8 mb-8"},n.createElement("div",{className:"border-r border-gray-200 pr-4"},n.createElement("h3",{className:"text-lg font-bold text-gray-800 mb-3"},"DATOS DEL EMISOR"),n.createElement("div",{className:"space-y-1 text-sm"},n.createElement("div",null,n.createElement("strong",null,"Nombre:")," ",((Ie=_.emisor)==null?void 0:Ie.name)||"N/A"),n.createElement("div",null,n.createElement("strong",null,"Email:")," ",(($e=_.emisor)==null?void 0:$e.email)||"N/A"),n.createElement("div",null,n.createElement("strong",null,"Régimen IVA:")," ",_.regimenIvaEmisor))),n.createElement("div",null,n.createElement("h3",{className:"text-lg font-bold text-gray-800 mb-3"},"DATOS DEL RECEPTOR"),n.createElement("div",{className:"space-y-1 text-sm"},n.createElement("div",null,n.createElement("strong",null,"Nombre:")," ",((Je=_.receptor)==null?void 0:Je.name)||"N/A"),n.createElement("div",null,n.createElement("strong",null,"Email:")," ",((rt=_.receptor)==null?void 0:rt.email)||"N/A"),_.expediente&&n.createElement("div",null,n.createElement("strong",null,"Expediente:")," ",_.expediente.title)))),n.createElement("div",{className:"mb-8"},n.createElement("h3",{className:"text-lg font-bold text-gray-800 mb-3"},"CONCEPTOS"),n.createElement("table",{className:"w-full border-collapse border border-gray-300"},n.createElement("thead",null,n.createElement("tr",{className:"bg-gray-100"},n.createElement("th",{className:"border border-gray-300 px-3 py-2 text-left"},"Descripción"),n.createElement("th",{className:"border border-gray-300 px-3 py-2 text-center"},"Cantidad"),n.createElement("th",{className:"border border-gray-300 px-3 py-2 text-right"},"Precio Unitario"),n.createElement("th",{className:"border border-gray-300 px-3 py-2 text-right"},"Total"))),n.createElement("tbody",null,(nt=_.items)==null?void 0:nt.map((Oe,Xe)=>n.createElement("tr",{key:Xe,className:Xe%2===0?"bg-white":"bg-gray-50"},n.createElement("td",{className:"border border-gray-300 px-3 py-2"},Oe.description),n.createElement("td",{className:"border border-gray-300 px-3 py-2 text-center"},Oe.quantity),n.createElement("td",{className:"border border-gray-300 px-3 py-2 text-right"},ie(Oe.unitPrice)),n.createElement("td",{className:"border border-gray-300 px-3 py-2 text-right font-semibold"},ie(Oe.total))))))),_.descuento&&_.descuento>0&&n.createElement("div",{className:"mb-8"},n.createElement("h3",{className:"text-lg font-bold text-gray-800 mb-3"},"DESCUENTOS"),n.createElement("div",{className:"bg-yellow-50 p-4 rounded border border-yellow-200"},n.createElement("div",{className:"flex justify-between items-center"},n.createElement("span",{className:"font-semibold text-yellow-800"},"Descuento (",_.descuento??0,"%)"),n.createElement("span",{className:"font-bold text-yellow-800 text-lg"},"-",ie((((vt=_.items)==null?void 0:vt.reduce((Oe,Xe)=>Oe+Xe.quantity*Xe.unitPrice,0))||0)*((_.descuento??0)/100)))))),_.provisionFondos&&_.provisionFondos.length>0&&n.createElement("div",{className:"mb-8"},n.createElement("h3",{className:"text-lg font-bold text-gray-800 mb-3"},"PROVISIONES DE FONDOS ASOCIADAS"),n.createElement("div",{className:"bg-blue-50 p-4 rounded border"},n.createElement("table",{className:"w-full"},n.createElement("thead",null,n.createElement("tr",{className:"border-b border-blue-200"},n.createElement("th",{className:"text-left py-2"},"Descripción"),n.createElement("th",{className:"text-right py-2"},"Fecha"),n.createElement("th",{className:"text-right py-2"},"Importe"))),n.createElement("tbody",null,_.provisionFondos.map(Oe=>n.createElement("tr",{key:Oe.id,className:"border-b border-blue-100"},n.createElement("td",{className:"py-2"},Oe.description||"Sin descripción"),n.createElement("td",{className:"text-right py-2"},ve(Oe.date)),n.createElement("td",{className:"text-right py-2 font-semibold"},ie(Oe.amount)))))))),n.createElement("div",{className:"border-t-2 border-gray-300 pt-6"},n.createElement("div",{className:"flex justify-end"},n.createElement("div",{className:"w-64 space-y-2"},n.createElement("div",{className:"flex justify-between"},n.createElement("span",null,"Base Imponible:"),n.createElement("span",{className:"font-semibold"},ie(_.baseImponible??0))),n.createElement("div",{className:"flex justify-between"},n.createElement("span",null,"IVA (",_.tipoIVA??21,"%):"),n.createElement("span",{className:"font-semibold"},ie(_.cuotaIVA??0))),n.createElement("div",{className:"flex justify-between text-lg font-bold border-t border-gray-300 pt-2"},n.createElement("span",null,"TOTAL:"),n.createElement("span",null,ie(_.importeTotal??0)))))),n.createElement("div",{className:"mt-8 pt-6 border-t border-gray-200"},n.createElement("div",{className:"grid grid-cols-2 gap-8 text-sm text-gray-600"},n.createElement("div",null,n.createElement("div",null,n.createElement("strong",null,"Método de pago:")," ",_.metodoPago),n.createElement("div",null,n.createElement("strong",null,"Clave de operación:")," ",_.claveOperacion)),n.createElement("div",null,n.createElement("div",null,n.createElement("strong",null,"Fecha de creación:")," ",ve(_.createdAt)),_.motivoAnulacion&&n.createElement("div",null,n.createElement("strong",null,"Motivo de anulación:")," ",_.motivoAnulacion)))),n.createElement("div",{className:"mt-8 flex justify-center gap-4 print:hidden"},n.createElement("button",{onClick:ne,className:"px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center gap-2"},n.createElement("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})),"Imprimir"),n.createElement("button",{onClick:Ee,className:"px-6 py-2 bg-green-600 text-white rounded hover:bg-green-700 flex items-center gap-2"},n.createElement("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})),"Descargar PDF")))};return n.createElement("div",{className:"py-6 max-w-5xl mx-auto"},n.createElement(be,null),n.createElement("div",{className:"flex justify-between items-center mb-4"},n.createElement("h1",{className:"text-2xl font-bold"},"Facturación Electrónica"),n.createElement("button",{className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:He},"Nueva factura")),F&&n.createElement("div",{className:"mb-2 text-blue-700 font-semibold"},F),S&&n.createElement("div",{className:"mb-2 text-green-700 font-semibold"},S),s?n.createElement("div",{className:"flex items-center gap-2"},n.createElement("span",{className:"animate-spin h-5 w-5 border-2 border-blue-500 rounded-full"})," Cargando..."):l?n.createElement("div",{className:"text-red-600"},l):n.createElement(n.Fragment,null,n.createElement("div",{className:"flex flex-wrap gap-4 mb-6"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Cliente"),n.createElement("select",{value:Q,onChange:_=>de(_.target.value),className:"border rounded px-2 py-1"},n.createElement("option",{value:""},"Todos"),h.map(_=>n.createElement("option",{key:_.user.id,value:_.user.id},_.user.name)))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Fecha de pago"),n.createElement("input",{type:"date",value:ke,onChange:_=>Ve(_.target.value),className:"border rounded px-2 py-1"}))),n.createElement("div",{className:"overflow-x-auto"},n.createElement("table",{className:"min-w-full bg-white border"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",{className:"border px-2 py-1"}),n.createElement("th",{className:"border px-2 py-1"},"Nº Factura"),n.createElement("th",{className:"border px-2 py-1"},"Fecha"),n.createElement("th",{className:"border px-2 py-1"},"Cliente"),n.createElement("th",{className:"border px-2 py-1"},"Importe"),n.createElement("th",{className:"border px-2 py-1"},"Estado"),n.createElement("th",{className:"border px-2 py-1"},"Fecha de pago"),n.createElement("th",{className:"border px-2 py-1"},"Provisiones"),n.createElement("th",{className:"border px-2 py-1"},"Acciones"))),n.createElement("tbody",null,r.map(_=>{var ne,Ee,ve,ie;return n.createElement("tr",{key:_.id},n.createElement("td",{className:"border px-2 py-1 text-center"},!_.xmlFirmado&&_.xml&&n.createElement("input",{type:"checkbox",checked:I.includes(_.id),onChange:()=>De(_.id),"aria-label":`Seleccionar factura ${_.numeroFactura}`})),n.createElement("td",{className:"border px-2 py-1"},_.numeroFactura),n.createElement("td",{className:"border px-2 py-1"},(ne=_.fechaFactura)==null?void 0:ne.slice(0,10)),n.createElement("td",{className:"border px-2 py-1"},((Ee=_.receptor)==null?void 0:Ee.name)||_.receptorId),n.createElement("td",{className:"border px-2 py-1"},(ve=_.importeTotal)==null?void 0:ve.toFixed(2)," €"),n.createElement("td",{className:"border px-2 py-1"},_.estado),n.createElement("td",{className:"border px-2 py-1"},_.paymentDate?new Date(_.paymentDate).toLocaleDateString():"-"),n.createElement("td",{className:"border px-2 py-1"},((ie=_.provisionFondos)==null?void 0:ie.length)||0),n.createElement("td",{className:"border px-2 py-1 flex gap-1"},n.createElement("button",{className:"px-3 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 transition-colors",onClick:()=>Ae(_),title:"Ver factura completa"},"👁️ Ver"),n.createElement("button",{className:"px-3 py-1 bg-yellow-600 text-white text-xs rounded hover:bg-yellow-700 transition-colors",onClick:()=>he(_),title:"Editar factura"},"✏️ Editar"),n.createElement("button",{className:`px-3 py-1 text-xs rounded transition-colors ${G===_.id?"bg-gray-400 text-white cursor-not-allowed":"bg-red-600 text-white hover:bg-red-700"}`,onClick:()=>Ke(_.id),disabled:G===_.id,title:"Eliminar factura"},G===_.id?"🗑️ Borrando...":"🗑️ Borrar"),n.createElement("button",{className:"px-3 py-1 bg-gray-600 text-white text-xs rounded hover:bg-gray-700 transition-colors",onClick:()=>Ye(_),title:"Ver metadatos técnicos"},"🔍 Metadatos")))})))),n.createElement("div",{className:"mt-6 mb-2 p-3 bg-yellow-50 border-l-4 border-yellow-400 rounded"},n.createElement("ol",{className:"list-decimal pl-6 text-sm text-yellow-900"},n.createElement("li",null,"A continuación tiene que elegir su ",n.createElement("b",null,"certificado digital")," (.pem)."),n.createElement("li",null,"Después, elija la ",n.createElement("b",null,"clave privada asociada")," (.pem)."),n.createElement("li",null,"Con eso, el sistema preparará el XML de las facturas seleccionadas y lo enviará a ",n.createElement("b",null,"Autofirma"),"."),n.createElement("li",null,"Finalmente, pulse en ",n.createElement("b",null,"Firmar Electrónicamente"),": se producirá la firma digital y la subida automática del XML firmado."))),n.createElement("div",{className:"mt-6 flex gap-2 items-center"},n.createElement("input",{type:"file",accept:".pem",onChange:_=>{var ne;return A(((ne=_.target.files)==null?void 0:ne[0])||null)},title:"Subir certificado PEM","aria-label":"Subir certificado PEM"}),n.createElement("span",{className:"text-xs text-gray-600"},"Certificado digital (.pem)"),n.createElement("input",{type:"file",accept:".pem",onChange:_=>{var ne;return P(((ne=_.target.files)==null?void 0:ne[0])||null)},title:"Subir clave privada PEM","aria-label":"Subir clave privada PEM"}),n.createElement("span",{className:"text-xs text-gray-600"},"Clave privada (.pem)"),n.createElement("button",{className:"ml-4 px-4 py-2 bg-green-600 text-white rounded disabled:bg-gray-300",disabled:I.length===0||!!F,onClick:oe},"Firmar electrónicamente (",I.length,")"))),c&&n.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50"},n.createElement("div",{className:"bg-white rounded shadow-lg p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto relative"},n.createElement("button",{className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800",onClick:()=>d(!1)},"×"),n.createElement("h2",{className:"text-xl font-bold mb-4"},u.id?"Editar factura":"Nueva factura"),n.createElement("form",{onSubmit:u.id?ge:re,className:"space-y-4"},w&&n.createElement("div",{className:"mb-2 text-red-600"},w),n.createElement("div",{className:"mb-2"},n.createElement("label",{className:"block text-sm font-medium mb-1"},"Nº Factura"),n.createElement("input",{name:"numeroFactura",value:u.numeroFactura||"Se asignará automáticamente",readOnly:!0,className:"border px-2 py-1 rounded w-full bg-gray-100"})),!u.fechaFactura&&n.createElement("div",{className:"mb-2 text-xs text-gray-500"},"La fecha de la factura se asignará automáticamente al crearla."),u.fechaFactura&&n.createElement("div",{className:"mb-2"},n.createElement("label",{className:"block text-sm font-medium mb-1"},"Fecha de factura"),n.createElement("input",{value:u.fechaFactura.slice(0,10),readOnly:!0,className:"border px-2 py-1 rounded w-full bg-gray-100"})),n.createElement("div",{className:"mb-2"},n.createElement("label",{className:"block text-sm font-medium mb-1"},"Cliente"),n.createElement("select",{name:"receptorId",value:u.receptorId,onChange:vr,className:"border px-2 py-1 rounded w-full",required:!0},n.createElement("option",{value:""},"Selecciona un cliente"),h.map(_=>n.createElement("option",{key:_.user.id,value:_.user.id},_.user.name," (",_.dni,")")))),u.receptorId&&n.createElement("div",{className:"mb-2"},n.createElement("label",{className:"block text-sm font-medium mb-1"},"Expediente"),n.createElement("select",{name:"expedienteId",value:u.expedienteId,onChange:tt,className:"border px-2 py-1 rounded w-full",required:!0},n.createElement("option",{value:""},"Selecciona un expediente"),K.map(_=>n.createElement("option",{key:_.id,value:_.id},_.title," (ID: ",_.id,")")))),M&&n.createElement("div",{className:"mb-2 p-2 bg-green-50 border-l-4 border-green-400 text-green-800 text-sm rounded"},n.createElement("b",null,"Provisiones de fondos disponibles:"),n.createElement("br",null),"Se han encontrado ",U.length," provisiones de fondos asociadas a este cliente y expediente.",n.createElement("br",null),n.createElement("ul",{className:"list-disc pl-5"},U.map((_,ne)=>n.createElement("li",{key:_.id},"Provisión #",ne+1,": ",_.amount," € (ID: ",_.id,")"))),n.createElement("b",null,"Total disponible:")," ",U.reduce((_,ne)=>_+ne.amount,0)," €",n.createElement("br",null),n.createElement("em",null,"Selecciona las provisiones que quieres incluir en la factura. Se descontarán automáticamente del total final.")),U.length>0&&n.createElement("div",{className:"mb-2 p-2 bg-blue-50 border rounded"},n.createElement("label",{className:"block text-sm font-medium mb-2 text-blue-800"},"Seleccionar provisiones a incluir en la factura:"),U.map(_=>{var ne;return n.createElement("div",{key:_.id,className:"flex items-center mb-1"},n.createElement("input",{type:"checkbox",id:`provision-${_.id}`,checked:B.includes(_.id),onChange:Ee=>{Ee.target.checked?H(ve=>[...ve,_.id]):H(ve=>ve.filter(ie=>ie!==_.id))},className:"mr-2"}),n.createElement("label",{htmlFor:`provision-${_.id}`,className:"text-sm"},"Provisión de ",_.amount," € - ",_.description||"sin descripción"," (",((ne=_.date)==null?void 0:ne.slice(0,10))||"sin fecha",")"))}),B.length>0&&n.createElement("div",{className:"mt-2 text-sm font-semibold text-blue-700"},"Provisiones seleccionadas: ",B.length,"(Total: ",U.filter(_=>B.includes(_.id)).reduce((_,ne)=>_+ne.amount,0)," €)")),n.createElement("div",{className:"mb-2"},n.createElement("label",{className:"block text-sm font-medium mb-1"},"Tipo Factura"),n.createElement("select",{name:"tipoFactura",value:u.tipoFactura,onChange:tt,className:"border px-2 py-1 rounded w-full"},n.createElement("option",{value:"F"},"Completa"),n.createElement("option",{value:"R"},"Rectificativa"))),n.createElement("div",{className:"mb-2"},n.createElement("label",{className:"block text-sm font-medium mb-1"},"Fecha Operación"),n.createElement("input",{name:"fechaOperacion",type:"date",value:u.fechaOperacion,onChange:tt,className:"border px-2 py-1 rounded w-full",required:!0})),n.createElement("div",{className:"mb-2"},n.createElement("label",{className:"block text-sm font-medium mb-1"},"Método de Pago"),n.createElement("input",{name:"metodoPago",value:u.metodoPago,onChange:tt,className:"border px-2 py-1 rounded w-full",required:!0})),n.createElement("div",{className:"mb-2"},n.createElement("label",{className:"block text-sm font-medium mb-1"},"Régimen IVA Emisor"),n.createElement("input",{name:"regimenIvaEmisor",value:u.regimenIvaEmisor,onChange:tt,className:"border px-2 py-1 rounded w-full",required:!0})),n.createElement("div",{className:"mb-2"},n.createElement("label",{className:"block text-sm font-medium mb-1"},"Clave Operación"),n.createElement("input",{name:"claveOperacion",value:u.claveOperacion,onChange:tt,className:"border px-2 py-1 rounded w-full",required:!0})),n.createElement("div",{className:"mb-2"},n.createElement("label",{className:"block text-sm font-medium mb-1"},"Tipo IVA (%)"),n.createElement("input",{name:"tipoIVA",type:"number",value:u.tipoIVA,onChange:tt,className:"border px-2 py-1 rounded w-full",required:!0})),n.createElement("div",{className:"mb-2 flex gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium mb-1"},"Aplicar IVA"),n.createElement("input",{type:"checkbox",name:"aplicarIVA",checked:u.aplicarIVA!==!1,onChange:_=>m(ne=>({...ne,aplicarIVA:_.target.checked})),className:"mr-2"}),n.createElement("span",{className:"text-sm"},"Marcar si la factura debe llevar IVA")),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium mb-1"},"Retención (%)"),n.createElement("input",{type:"number",name:"retencion",min:"0",max:"100",step:"0.01",value:u.retencion??"",onChange:_=>m(ne=>({...ne,retencion:_.target.value===""?void 0:Number(_.target.value)})),className:"border px-2 py-1 rounded w-24",placeholder:"0"}),n.createElement("span",{className:"text-xs text-gray-500 ml-2"},"(opcional)")),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium mb-1"},"Descuento (%)"),n.createElement("input",{type:"number",name:"descuento",min:"0",max:"100",step:"0.01",value:u.descuento??"",onChange:_=>m(ne=>({...ne,descuento:_.target.value===""?void 0:Number(_.target.value)})),className:"border px-2 py-1 rounded w-24",placeholder:"0"}),n.createElement("span",{className:"text-xs text-gray-500 ml-2"},"(opcional)"))),n.createElement("div",{className:"mb-2"},n.createElement("label",{className:"block text-sm font-bold mb-1"},"Conceptos"),u.items.map((_,ne)=>n.createElement("div",{key:ne,className:"flex flex-wrap gap-2 mb-1"},n.createElement("input",{placeholder:"Descripción",value:_.description,onChange:Ee=>yr(ne,"description",Ee.target.value),className:"border px-2 py-1 rounded w-full sm:w-1/2",required:!0}),n.createElement("input",{type:"number",placeholder:"Cantidad",value:_.quantity,onChange:Ee=>yr(ne,"quantity",Number(Ee.target.value)),className:"border px-2 py-1 rounded w-full sm:w-1/4",required:!0}),n.createElement("input",{type:"number",placeholder:"Precio unitario",value:_.unitPrice,onChange:Ee=>yr(ne,"unitPrice",Number(Ee.target.value)),className:"border px-2 py-1 rounded w-full sm:w-1/4",required:!0}),n.createElement("span",{className:"px-2"},"Total: ",_.total))),n.createElement("button",{type:"button",className:"text-blue-600 underline mt-1",onClick:Qr},"Añadir concepto")),(()=>{const _=u.items.reduce((vt,Oe)=>vt+(Oe.total||0),0),ne=u.descuento?Number(u.descuento):0,Ee=_*(1-ne/100),ve=u.aplicarIVA!==!1,ie=u.tipoIVA||21,Ie=ve?Ee*(ie/100):0,$e=u.retencion?Number(u.retencion):0,Je=Ee*($e/100),rt=U.filter(vt=>B.includes(vt.id)).reduce((vt,Oe)=>vt+Oe.amount,0),nt=Ee+Ie-Je-rt;return n.createElement("div",{className:"mb-4 p-3 bg-blue-50 border rounded"},n.createElement("h3",{className:"font-bold text-blue-800 mb-2"},"Resumen de totales (calculado automáticamente):"),n.createElement("div",{className:"grid grid-cols-2 gap-2 text-sm"},n.createElement("div",null,"Base imponible: ",n.createElement("span",{className:"font-semibold"},Ee.toFixed(2)," €")),n.createElement("div",null,"Descuento: ",n.createElement("span",{className:"font-semibold"},ne.toFixed(2)," %")),n.createElement("div",null,"IVA (",ve?ie:0,"%): ",n.createElement("span",{className:"font-semibold"},Ie.toFixed(2)," €")),n.createElement("div",null,"Retención: ",n.createElement("span",{className:"font-semibold"},$e.toFixed(2)," % (",Je.toFixed(2)," €)")),rt>0&&n.createElement("div",{className:"col-span-2 text-green-700"},"Descuento por provisiones: ",n.createElement("span",{className:"font-semibold"},"-",rt.toFixed(2)," €")),n.createElement("div",{className:"col-span-2 border-t pt-1"},n.createElement("strong",null,"Total factura: ",nt.toFixed(2)," €"))))})(),n.createElement("div",{className:"flex justify-end gap-2 mt-4"},n.createElement("button",{type:"button",className:"px-4 py-2 bg-gray-300 rounded",onClick:()=>d(!1),disabled:k},"Cancelar"),n.createElement("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded",disabled:k},k?u.id?"Actualizando...":"Creando...":u.id?"Actualizar":"Crear"))))),ae&&W&&n.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50 modal-overlay"},n.createElement("div",{className:"bg-white rounded shadow-lg p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto relative modal-content"},n.createElement("button",{className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800 print:hidden",onClick:()=>xe(!1)},"×"),n.createElement("div",{className:"invoice-print"},n.createElement(ft,{invoice:W})))))},MK=()=>{const e=localStorage.getItem("token")||"",[t,r]=g.useState({expedienteId:"",amount:"",date:"",description:""}),[a,s]=g.useState(null),[o,l]=g.useState([]),[i,c]=g.useState(""),[d,u]=g.useState(""),[m,f]=g.useState(""),[x,b]=g.useState(!1),[y,v]=g.useState([]);g.useEffect(()=>{(async()=>{try{const C=await J.get("/cases",{headers:{Authorization:`Bearer ${e}`}});v(C.data)}catch{v([])}})()},[e]);const p=S=>{r({...t,[S.target.name]:S.target.value})},h=S=>{r({...t,expedienteId:S.target.value})},E=S=>{r({...t,expedienteId:S.target.value})},w=async S=>{var C;S.preventDefault(),f(""),u(""),b(!0);try{const k=y.find(P=>P.id===t.expedienteId),D=((C=k==null?void 0:k.client)==null?void 0:C.id)||"";if(!D){f("No se pudo determinar el cliente del expediente seleccionado"),b(!1);return}const O={clientId:D,expedienteId:t.expedienteId,amount:Number(t.amount),...t.date?{date:t.date}:{},description:t.description},A=await DK(O,e);s(A.id),u("Provisión creada. Ahora puedes vincularla a una factura.");const $=await wK(e);l($)}catch{f("Error al crear la provisión")}finally{b(!1)}},N=async()=>{if(!(!a||!i)){f(""),u(""),b(!0);try{await AK(a,i,e),u("Provisión vinculada correctamente a la factura."),s(null),c("")}catch{f("Error al vincular la provisión")}finally{b(!1)}}};return n.createElement("div",{className:"max-w-md mx-auto py-8"},n.createElement("h2",{className:"text-xl font-bold mb-4"},"Crear Provisión de Fondos"),d&&n.createElement("div",{className:"mb-2 text-green-700"},d),m&&n.createElement("div",{className:"mb-2 text-red-600"},m),a?n.createElement("div",{className:"space-y-3"},n.createElement("div",null,n.createElement("label",{htmlFor:"invoice-select",className:"block text-sm"},"Selecciona Factura para vincular"),n.createElement("select",{id:"invoice-select",value:i,onChange:S=>c(S.target.value),className:"border px-2 py-1 rounded w-full"},n.createElement("option",{value:""},"Selecciona una factura"),o.map(S=>{var C;return n.createElement("option",{key:S.id,value:S.id},S.numeroFactura," - ",(C=S.receptor)==null?void 0:C.name)}))),n.createElement("button",{onClick:N,className:"px-4 py-2 bg-green-600 text-white rounded",disabled:x||!i},x?"Vinculando...":"Vincular Provisión")):n.createElement("form",{onSubmit:w,className:"space-y-3"},n.createElement("div",{className:"mb-2"},n.createElement("label",{className:"block text-sm"},"Expediente (elige del desplegable o pega el ID)"),n.createElement("select",{className:"border px-2 py-1 rounded w-full mb-1",value:t.expedienteId,onChange:h},n.createElement("option",{value:""},"Selecciona un expediente"),y.map(S=>{var C,k;return n.createElement("option",{key:S.id,value:S.id},S.title," - ",((k=(C=S.client)==null?void 0:C.user)==null?void 0:k.name)||"Sin cliente"," (ID: ",S.id,")")})),n.createElement("input",{className:"border px-2 py-1 rounded w-full",placeholder:"O pega el ID del expediente",value:t.expedienteId,onChange:E})),!t.date&&n.createElement("div",{className:"mb-2 text-xs text-gray-500"},"La fecha de la provisión se asignará automáticamente al crearla."),t.date&&n.createElement("div",{className:"mb-2"},n.createElement("label",{className:"block text-sm font-medium mb-1"},"Fecha de provisión"),n.createElement("input",{value:t.date.slice(0,10),readOnly:!0,className:"border px-2 py-1 rounded w-full bg-gray-100"})),n.createElement("div",null,n.createElement("label",{htmlFor:"amount",className:"block text-sm"},"Importe"),n.createElement("input",{id:"amount",name:"amount",type:"number",value:t.amount,onChange:p,className:"border px-2 py-1 rounded w-full",required:!0})),n.createElement("div",null,n.createElement("label",{htmlFor:"description",className:"block text-sm"},"Descripción"),n.createElement("input",{id:"description",name:"description",value:t.description,onChange:p,className:"border px-2 py-1 rounded w-full"})),n.createElement("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded",disabled:x},x?"Creando...":"Crear Provisión")))},PK=()=>{const{user:e}=Te(),t=localStorage.getItem("token"),[r,a]=g.useState([]),[s,o]=g.useState(!0),[l,i]=g.useState(null),[c,d]=g.useState(null);g.useEffect(()=>{(async()=>{try{if(!t)throw new Error("No token available");const E=await J.get("/users/clients/profile",{headers:{Authorization:`Bearer ${t}`}});E.data?(d(E.data),await u(E.data.id)):i("No se encontró el perfil de cliente")}catch(E){console.error("Error fetching client profile:",E),i("Error al cargar el perfil de cliente")}finally{o(!1)}})()},[t,e]);const u=async h=>{try{const E=await OK(h,t);a(E)}catch{i("Error al cargar las provisiones")}},m=h=>new Date(h).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}),f=h=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(h),x=h=>h.invoiceId?n.createElement("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"},"Facturada"):n.createElement("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800"},"Pendiente");if(s)return n.createElement("div",{className:"max-w-6xl mx-auto py-8 px-4"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.createElement("p",{className:"mt-4 text-gray-600"},"Cargando provisiones...")));if(l)return n.createElement("div",{className:"max-w-6xl mx-auto py-8 px-4"},n.createElement("div",{className:"bg-red-50 border border-red-200 rounded-md p-4"},n.createElement("div",{className:"flex"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},n.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))),n.createElement("div",{className:"ml-3"},n.createElement("h3",{className:"text-sm font-medium text-red-800"},"Error"),n.createElement("div",{className:"mt-2 text-sm text-red-700"},l)))));const b=r.filter(h=>!h.invoiceId),y=r.filter(h=>h.invoiceId),v=b.reduce((h,E)=>h+E.amount,0),p=y.reduce((h,E)=>h+E.amount,0);return n.createElement("div",{className:"max-w-6xl mx-auto py-8 px-4"},n.createElement("div",{className:"mb-8"},n.createElement("h1",{className:"text-3xl font-bold text-gray-900 mb-2"},"Mis Provisiones de Fondos"),n.createElement("p",{className:"text-gray-600"},"Aquí puedes ver todas las provisiones de fondos asociadas a tus expedientes")),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},n.createElement("div",{className:"bg-white rounded-lg shadow p-6"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Total Provisiones"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},r.length)))),n.createElement("div",{className:"bg-white rounded-lg shadow p-6"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Pendientes"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},f(v))))),n.createElement("div",{className:"bg-white rounded-lg shadow p-6"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Facturadas"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},f(p)))))),b.length>0&&n.createElement("div",{className:"bg-white rounded-lg shadow mb-8"},n.createElement("div",{className:"px-6 py-4 border-b border-gray-200"},n.createElement("h2",{className:"text-lg font-medium text-gray-900"},"Provisiones Pendientes (",b.length,")"),n.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Provisiones que aún no han sido facturadas")),n.createElement("div",{className:"overflow-x-auto"},n.createElement("table",{className:"min-w-full divide-y divide-gray-200"},n.createElement("thead",{className:"bg-gray-50"},n.createElement("tr",null,n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Fecha"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Importe"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Descripción"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Expediente"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Abogado"))),n.createElement("tbody",{className:"bg-white divide-y divide-gray-200"},b.map(h=>{var E,w,N;return n.createElement("tr",{key:h.id,className:"hover:bg-gray-50"},n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},m(h.date)),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},f(h.amount)),n.createElement("td",{className:"px-6 py-4 text-sm text-gray-900"},h.description||"Sin descripción"),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},((E=h.expediente)==null?void 0:E.title)||"Sin expediente"),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},((N=(w=h.expediente)==null?void 0:w.lawyer)==null?void 0:N.name)||"No asignado"))}))))),y.length>0&&n.createElement("div",{className:"bg-white rounded-lg shadow"},n.createElement("div",{className:"px-6 py-4 border-b border-gray-200"},n.createElement("h2",{className:"text-lg font-medium text-gray-900"},"Provisiones Facturadas (",y.length,")"),n.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Provisiones que ya han sido incluidas en facturas")),n.createElement("div",{className:"overflow-x-auto"},n.createElement("table",{className:"min-w-full divide-y divide-gray-200"},n.createElement("thead",{className:"bg-gray-50"},n.createElement("tr",null,n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Fecha Provisión"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Importe"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Descripción"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Expediente"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Factura"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Estado"))),n.createElement("tbody",{className:"bg-white divide-y divide-gray-200"},y.map(h=>{var E,w,N,S;return n.createElement("tr",{key:h.id,className:"hover:bg-gray-50"},n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},m(h.date)),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},f(h.amount)),n.createElement("td",{className:"px-6 py-4 text-sm text-gray-900"},h.description||"Sin descripción"),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},((E=h.expediente)==null?void 0:E.title)||"Sin expediente"),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},n.createElement("div",null,n.createElement("div",{className:"font-medium"},(w=h.invoice)==null?void 0:w.numeroFactura),n.createElement("div",{className:"text-gray-500"},m(((N=h.invoice)==null?void 0:N.fechaFactura)||"")),n.createElement("div",{className:"text-gray-500"},f(((S=h.invoice)==null?void 0:S.importeTotal)||0)))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},x(h)))}))))),r.length===0&&n.createElement("div",{className:"bg-white rounded-lg shadow p-8 text-center"},n.createElement("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-gray-100 mb-4"},n.createElement("svg",{className:"h-6 w-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"}))),n.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"No hay provisiones de fondos"),n.createElement("p",{className:"text-gray-500"},"Aún no se han creado provisiones de fondos para tus expedientes.")))},LK=()=>{const[e,t]=g.useState([]),[r,a]=g.useState([]),[s,o]=g.useState({lawyerId:"",date:"",location:"",notes:""}),[l,i]=g.useState(!0),[c,d]=g.useState(null),[u,m]=g.useState(null),[f,x]=g.useState(!1),[b,y]=g.useState("all"),[v,p]=g.useState("list"),{user:h}=Te();g.useEffect(()=>{(async()=>{try{i(!0);const I=localStorage.getItem("token"),[L,F]=await Promise.all([J.get("/users/lawyers"),J.get("/appointments")]);t(L.data),a(F.data),d(null)}catch{d("Error al cargar los datos")}finally{i(!1)}})()},[]);const E=P=>{o({...s,[P.target.name]:P.target.value})},w=async P=>{var I,L;if(P.preventDefault(),d(null),m(null),!s.lawyerId||!s.date){d("Selecciona abogado y fecha/hora");return}try{const F=localStorage.getItem("token"),T=await J.post("/appointments",{lawyerId:s.lawyerId,date:s.date,location:s.location||void 0,notes:s.notes||void 0},{headers:{Authorization:`Bearer ${F}`}});a(M=>[T.data,...M]),o({lawyerId:"",date:"",location:"",notes:""}),x(!1),m("Cita agendada correctamente"),setTimeout(()=>m(null),3e3)}catch(F){d(((L=(I=F.response)==null?void 0:I.data)==null?void 0:L.message)||"Error al agendar la cita")}},N=async P=>{if(confirm("¿Estás seguro de que quieres cancelar esta cita?"))try{const I=localStorage.getItem("token");await J.delete(`/appointments/${P}`,{headers:{Authorization:`Bearer ${I}`}}),a(L=>L.filter(F=>F.id!==P)),m("Cita cancelada correctamente"),setTimeout(()=>m(null),3e3)}catch{d("Error al cancelar la cita")}},S=g.useMemo(()=>b==="all"?r:r.filter(P=>P.lawyer.id===b),[r,b]),C=g.useMemo(()=>{const P=new Date,I=new Date(P.getFullYear(),P.getMonth(),P.getDate()),L=new Date(I);return L.setDate(L.getDate()+1),{past:S.filter(F=>new Date(F.date)<I),today:S.filter(F=>{const T=new Date(F.date);return T>=I&&T<L}),upcoming:S.filter(F=>new Date(F.date)>=L)}},[S]),k=P=>new Date(P).toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),D=P=>new Date(P).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}),O=P=>{const I=new Date,L=new Date(P),F=new Date(I.getFullYear(),I.getMonth(),I.getDate()),T=new Date(F);return T.setDate(T.getDate()+1),L<F?n.createElement("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"},"Pasada"):L>=F&&L<T?n.createElement("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"},"Hoy"):n.createElement("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},"Próxima")},A=P=>n.createElement("div",{key:P.id,className:"bg-white rounded-lg shadow-md p-6 border-l-4 border-blue-500"},n.createElement("div",{className:"flex justify-between items-start mb-4"},n.createElement("div",null,n.createElement("h3",{className:"text-lg font-semibold text-gray-900"},P.lawyer.name),n.createElement("p",{className:"text-sm text-gray-600"},P.lawyer.email)),n.createElement("div",{className:"flex items-center space-x-2"},O(P.date),n.createElement("button",{onClick:()=>N(P.id),className:"text-red-600 hover:text-red-800 text-sm font-medium",title:"Cancelar cita"},"✕"))),n.createElement("div",{className:"space-y-2"},n.createElement("div",{className:"flex items-center text-sm text-gray-700"},n.createElement("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})),k(P.date)," a las ",D(P.date)),P.location&&n.createElement("div",{className:"flex items-center text-sm text-gray-700"},n.createElement("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})),P.location),P.notes&&n.createElement("div",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded-md"},n.createElement("strong",null,"Notas:")," ",P.notes))),$=()=>{const P=new Date,I=Array.from({length:7},(L,F)=>{const T=new Date(P);return T.setDate(T.getDate()+F),T});return n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-4"},I.map((L,F)=>{const T=S.filter(M=>new Date(M.date).toDateString()===L.toDateString());return n.createElement("div",{key:F,className:"bg-white rounded-lg shadow p-4"},n.createElement("div",{className:"text-center mb-3"},n.createElement("div",{className:"text-sm font-medium text-gray-500"},L.toLocaleDateString("es-ES",{weekday:"short"})),n.createElement("div",{className:`text-lg font-bold ${L.toDateString()===P.toDateString()?"text-blue-600":"text-gray-900"}`},L.getDate())),n.createElement("div",{className:"space-y-2"},T.map(M=>n.createElement("div",{key:M.id,className:"text-xs bg-blue-50 p-2 rounded border-l-2 border-blue-500"},n.createElement("div",{className:"font-medium"},M.lawyer.name),n.createElement("div",{className:"text-gray-600"},D(M.date))))))}))};return l?n.createElement("div",{className:"max-w-6xl mx-auto py-8 px-4"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.createElement("p",{className:"mt-4 text-gray-600"},"Cargando citas..."))):n.createElement("div",{className:"max-w-6xl mx-auto py-8 px-4"},n.createElement("div",{className:"mb-8"},n.createElement("h1",{className:"text-3xl font-bold text-gray-900 mb-2"},"Mis Citas"),n.createElement("p",{className:"text-gray-600"},"Gestiona tus citas con los abogados")),n.createElement("div",{className:"bg-white rounded-lg shadow p-6 mb-8"},n.createElement("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0"},n.createElement("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4"},n.createElement("button",{onClick:()=>x(!f),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},f?"Cancelar":"Nueva Cita"),n.createElement("select",{value:b,onChange:P=>y(P.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},n.createElement("option",{value:"all"},"Todos los abogados"),e.map(P=>n.createElement("option",{key:P.id,value:P.id},P.name)))),n.createElement("div",{className:"flex space-x-2"},n.createElement("button",{onClick:()=>p("list"),className:`px-3 py-2 rounded-md text-sm font-medium ${v==="list"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`},"Lista"),n.createElement("button",{onClick:()=>p("calendar"),className:`px-3 py-2 rounded-md text-sm font-medium ${v==="calendar"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`},"Calendario"))),c&&n.createElement("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-md"},n.createElement("p",{className:"text-red-700 text-sm"},c)),u&&n.createElement("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-md"},n.createElement("p",{className:"text-green-700 text-sm"},u))),f&&n.createElement("div",{className:"bg-white rounded-lg shadow p-6 mb-8"},n.createElement("h2",{className:"text-xl font-semibold mb-4"},"Agendar Nueva Cita"),n.createElement("form",{onSubmit:w,className:"space-y-4"},n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Abogado"),n.createElement("select",{name:"lawyerId",value:s.lawyerId,onChange:E,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0},n.createElement("option",{value:""},"Selecciona un abogado"),e.map(P=>n.createElement("option",{key:P.id,value:P.id},P.name," (",P.email,")")))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Fecha y hora"),n.createElement("input",{type:"datetime-local",name:"date",value:s.date,onChange:E,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Ubicación (opcional)"),n.createElement("input",{type:"text",name:"location",value:s.location,onChange:E,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Oficina, online, etc."})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Motivo / Notas (opcional)"),n.createElement("textarea",{name:"notes",value:s.notes,onChange:E,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Motivo de la cita, detalles, etc."})),n.createElement("div",{className:"flex justify-end space-x-3"},n.createElement("button",{type:"button",onClick:()=>x(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500"},"Cancelar"),n.createElement("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},"Agendar Cita")))),v==="calendar"?n.createElement("div",{className:"mb-8"},n.createElement("h2",{className:"text-xl font-semibold mb-4"},"Vista de Calendario"),$()):n.createElement("div",{className:"space-y-8"},C.today.length>0&&n.createElement("div",null,n.createElement("h2",{className:"text-xl font-semibold mb-4 text-green-700"},"Citas de Hoy"),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},C.today.map(A))),C.upcoming.length>0&&n.createElement("div",null,n.createElement("h2",{className:"text-xl font-semibold mb-4 text-blue-700"},"Próximas Citas"),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},C.upcoming.map(A))),C.past.length>0&&n.createElement("div",null,n.createElement("h2",{className:"text-xl font-semibold mb-4 text-gray-700"},"Citas Pasadas"),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},C.past.map(A))),S.length===0&&n.createElement("div",{className:"text-center py-12"},n.createElement("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})),n.createElement("h3",{className:"mt-2 text-sm font-medium text-gray-900"},"No hay citas"),n.createElement("p",{className:"mt-1 text-sm text-gray-500"},b==="all"?"No tienes citas agendadas. Agenda una nueva cita para comenzar.":"No tienes citas con este abogado."),n.createElement("div",{className:"mt-6"},n.createElement("button",{onClick:()=>x(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},"Agendar Nueva Cita")))))},IK=()=>{const{user:e}=Te(),[t,r]=g.useState([]),[a,s]=g.useState(!0),[o,l]=g.useState(null),[i,c]=g.useState([]),[d,u]=g.useState(""),[m,f]=g.useState("");return g.useEffect(()=>{(async()=>{try{const b=localStorage.getItem("token"),y=await ye.get("/api/users/lawyers",{headers:{Authorization:`Bearer ${b}`}});c(y.data)}catch{}})()},[]),g.useEffect(()=>{(async()=>{try{s(!0);const b=localStorage.getItem("token"),y={};d&&(y.lawyerId=d),m&&(y.paymentDate=m);const v=await ye.get("/api/invoices/my",{headers:{Authorization:`Bearer ${b}`},params:y});r(v.data),l(null)}catch{l("Error al cargar las facturas"),r([])}finally{s(!1)}})()},[d,m]),n.createElement("div",{className:"py-6"},n.createElement("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"bg-white rounded-lg shadow p-6"},n.createElement("h1",{className:"text-2xl font-semibold mb-2"},"Gestionar pagos y facturas"),n.createElement("p",{className:"text-gray-600 mb-6"},"Aquí puedes consultar tus facturas, descargar el PDF y acceder al QR para pago o verificación."),n.createElement("div",{className:"flex flex-wrap gap-4 mb-6"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Abogado"),n.createElement("select",{value:d,onChange:x=>u(x.target.value),className:"border rounded px-2 py-1"},n.createElement("option",{value:""},"Todos"),i.map(x=>n.createElement("option",{key:x.id,value:x.id},x.name)))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Fecha de pago"),n.createElement("input",{type:"date",value:m,onChange:x=>f(x.target.value),className:"border rounded px-2 py-1"}))),a?n.createElement("div",{className:"flex items-center justify-center h-40"},n.createElement("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-blue-500"})):o?n.createElement("div",{className:"bg-red-100 text-red-700 p-3 rounded mb-4"},o):t.length===0?n.createElement("div",{className:"text-gray-500"},"No tienes facturas registradas."):n.createElement("div",{className:"overflow-x-auto"},n.createElement("table",{className:"min-w-full divide-y divide-gray-200"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Nº Factura"),n.createElement("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Fecha"),n.createElement("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Importe"),n.createElement("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Estado"),n.createElement("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Abogado"),n.createElement("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Fecha de pago"),n.createElement("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"QR"),n.createElement("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"PDF"))),n.createElement("tbody",{className:"bg-white divide-y divide-gray-200"},t.map(x=>n.createElement("tr",{key:x.id},n.createElement("td",{className:"px-4 py-2"},x.number),n.createElement("td",{className:"px-4 py-2"},new Date(x.date).toLocaleDateString()),n.createElement("td",{className:"px-4 py-2"},x.amount.toFixed(2)," €"),n.createElement("td",{className:"px-4 py-2"},n.createElement("span",{className:`px-2 py-1 rounded text-xs font-semibold ${x.status==="PAGADA"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`},x.status)),n.createElement("td",{className:"px-4 py-2"},x.lawyerName||"-"),n.createElement("td",{className:"px-4 py-2"},x.paymentDate?new Date(x.paymentDate).toLocaleDateString():"-"),n.createElement("td",{className:"px-4 py-2"},x.qrUrl?n.createElement("img",{src:x.qrUrl,alt:"QR Factura",className:"h-12 w-12 object-contain"}):n.createElement("span",{className:"text-gray-400"},"No disponible")),n.createElement("td",{className:"px-4 py-2"},x.pdfUrl?n.createElement("a",{href:x.pdfUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline"},"Descargar"):n.createElement("span",{className:"text-gray-400"},"No disponible"))))))),n.createElement("div",{className:"mt-8 flex justify-between items-center"},n.createElement(Ne,{to:"/dashboard",className:"text-blue-600 hover:underline"},"Volver al Dashboard")))))},$K=()=>{const[e,t]=g.useState(""),[r,a]=g.useState(!0),[s,o]=g.useState(""),{user:l}=Te();return g.useEffect(()=>{(async()=>{try{a(!0);const c=await J.get("/parametros/legal/PRIVACY_POLICY");t(c.data.valor)}catch(c){console.error("Error fetching privacy content:",c),o("No se pudo cargar la política de privacidad"),t(`
          <h1>Política de Privacidad</h1>
          <p>Esta política de privacidad describe cómo recopilamos, usamos y protegemos su información personal.</p>
          <h2>Información que recopilamos</h2>
          <p>Recopilamos información que usted nos proporciona directamente, como cuando se registra en nuestro sitio web, nos contacta o utiliza nuestros servicios.</p>
          <h2>Cómo usamos su información</h2>
          <p>Utilizamos la información recopilada para proporcionar, mantener y mejorar nuestros servicios, comunicarnos con usted y cumplir con nuestras obligaciones legales.</p>
          <h2>Protección de la información</h2>
          <p>Implementamos medidas de seguridad técnicas y organizativas apropiadas para proteger su información personal contra acceso no autorizado, alteración, divulgación o destrucción.</p>
          <h2>Sus derechos</h2>
          <p>Usted tiene derecho a acceder, corregir, eliminar y oponerse al procesamiento de su información personal. Para ejercer estos derechos, contáctenos.</p>
          <h2>Contacto</h2>
          <p>Si tiene preguntas sobre esta política de privacidad, contáctenos en info@despacholegal.com</p>
        `)}finally{a(!1)}})()},[]),r?n.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.createElement("p",{className:"mt-4 text-gray-600"},"Cargando política de privacidad..."))):s?n.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-red-600 text-6xl mb-4"},"⚠️"),n.createElement("h1",{className:"text-2xl font-bold text-gray-900 mb-2"},"Error"),n.createElement("p",{className:"text-gray-600"},s))):n.createElement("div",{className:"min-h-screen bg-gray-50"},n.createElement("div",{className:"max-w-4xl mx-auto py-12 px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden"},n.createElement("div",{className:"px-6 py-8"},n.createElement("div",{className:"prose prose-lg max-w-none",dangerouslySetInnerHTML:{__html:e}})),(l==null?void 0:l.role)==="ADMIN"&&n.createElement("div",{className:"px-6 py-4 bg-gray-50 border-t"},n.createElement("button",{onClick:()=>window.location.href="/admin/parametros",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},"✏️ Editar Contenido")))))},FK=()=>{const[e,t]=g.useState(""),[r,a]=g.useState(!0),[s,o]=g.useState(""),{user:l}=Te();return g.useEffect(()=>{(async()=>{try{a(!0);const c=await J.get("/parametros/legal/TERMS_OF_SERVICE");t(c.data.valor)}catch(c){console.error("Error fetching terms content:",c),o("No se pudo cargar los términos de servicio"),t(`
          <h1>Términos de Servicio</h1>
          <p>Al utilizar nuestros servicios, usted acepta estos términos de servicio.</p>
          <h2>Servicios proporcionados</h2>
          <p>Proporcionamos servicios de asesoramiento jurídico y gestión legal a través de nuestra plataforma digital.</p>
          <h2>Uso aceptable</h2>
          <p>Usted se compromete a utilizar nuestros servicios únicamente para fines legales y de acuerdo con estos términos.</p>
          <h2>Propiedad intelectual</h2>
          <p>Todos los derechos de propiedad intelectual relacionados con nuestros servicios son propiedad de Despacho Legal.</p>
          <h2>Limitación de responsabilidad</h2>
          <p>En la máxima medida permitida por la ley, Despacho Legal no será responsable de daños indirectos, incidentales o consecuentes.</p>
          <h2>Modificaciones</h2>
          <p>Nos reservamos el derecho de modificar estos términos en cualquier momento. Los cambios serán efectivos inmediatamente después de su publicación.</p>
          <h2>Contacto</h2>
          <p>Si tiene preguntas sobre estos términos, contáctenos en info@despacholegal.com</p>
        `)}finally{a(!1)}})()},[]),r?n.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.createElement("p",{className:"mt-4 text-gray-600"},"Cargando términos de servicio..."))):s?n.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-red-600 text-6xl mb-4"},"⚠️"),n.createElement("h1",{className:"text-2xl font-bold text-gray-900 mb-2"},"Error"),n.createElement("p",{className:"text-gray-600"},s))):n.createElement("div",{className:"min-h-screen bg-gray-50"},n.createElement("div",{className:"max-w-4xl mx-auto py-12 px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden"},n.createElement("div",{className:"px-6 py-8"},n.createElement("div",{className:"prose prose-lg max-w-none",dangerouslySetInnerHTML:{__html:e}})),(l==null?void 0:l.role)==="ADMIN"&&n.createElement("div",{className:"px-6 py-4 bg-gray-50 border-t"},n.createElement("button",{onClick:()=>window.location.href="/admin/parametros",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},"✏️ Editar Contenido")))))},jK=()=>{const[e,t]=g.useState(""),[r,a]=g.useState(!0),[s,o]=g.useState(""),{user:l}=Te();return g.useEffect(()=>{(async()=>{try{a(!0);const c=await J.get("/parametros/legal/COOKIE_POLICY");t(c.data.valor)}catch(c){console.error("Error fetching cookies content:",c),o("No se pudo cargar la política de cookies"),t(`
          <h1>Política de Cookies</h1>
          <p>Esta política de cookies explica qué son las cookies, cómo las utilizamos y cómo puede gestionarlas.</p>
          
          <h2>¿Qué son las cookies?</h2>
          <p>Las cookies son pequeños archivos de texto que se almacenan en su dispositivo cuando visita nuestro sitio web. Nos ayudan a mejorar su experiencia y a analizar el tráfico del sitio.</p>
          
          <h2>Tipos de cookies que utilizamos</h2>
          
          <h3>Cookies técnicas (necesarias)</h3>
          <p>Estas cookies son esenciales para el funcionamiento del sitio web y no se pueden desactivar. Incluyen:</p>
          <ul>
            <li>Cookies de sesión para mantener su sesión activa</li>
            <li>Cookies de seguridad para proteger contra ataques</li>
            <li>Cookies de preferencias para recordar su configuración</li>
          </ul>
          
          <h3>Cookies analíticas</h3>
          <p>Nos ayudan a entender cómo interactúan los visitantes con nuestro sitio web:</p>
          <ul>
            <li>Análisis de tráfico y uso del sitio</li>
            <li>Identificación de páginas más populares</li>
            <li>Mejora de la experiencia del usuario</li>
          </ul>
          
          <h3>Cookies de funcionalidad</h3>
          <p>Mejoran la funcionalidad del sitio web:</p>
          <ul>
            <li>Recordar sus preferencias de idioma</li>
            <li>Personalizar el contenido mostrado</li>
            <li>Mejorar la navegación</li>
          </ul>
          
          <h2>Gestión de cookies</h2>
          <p>Puede gestionar las cookies a través de la configuración de su navegador:</p>
          <ul>
            <li><strong>Chrome:</strong> Configuración > Privacidad y seguridad > Cookies</li>
            <li><strong>Firefox:</strong> Opciones > Privacidad y seguridad > Cookies</li>
            <li><strong>Safari:</strong> Preferencias > Privacidad > Cookies</li>
            <li><strong>Edge:</strong> Configuración > Cookies y permisos del sitio</li>
          </ul>
          
          <h2>Cookies de terceros</h2>
          <p>Algunos servicios de terceros pueden instalar cookies en su dispositivo:</p>
          <ul>
            <li>Google Analytics para análisis web</li>
            <li>Servicios de chat en vivo</li>
            <li>Herramientas de redes sociales</li>
          </ul>
          
          <h2>Actualizaciones de esta política</h2>
          <p>Podemos actualizar esta política de cookies ocasionalmente. Le notificaremos cualquier cambio significativo.</p>
          
          <h2>Contacto</h2>
          <p>Si tiene preguntas sobre nuestra política de cookies, contáctenos en info@despacholegal.com</p>
          
          <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mt-6">
            <p class="text-sm text-blue-700">
              <strong>Nota:</strong> Esta política cumple con las directrices de la Agencia Española de Protección de Datos (AEPD) y el Reglamento General de Protección de Datos (RGPD).
            </p>
          </div>
        `)}finally{a(!1)}})()},[]),r?n.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.createElement("p",{className:"mt-4 text-gray-600"},"Cargando política de cookies..."))):s?n.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-red-600 text-6xl mb-4"},"⚠️"),n.createElement("h1",{className:"text-2xl font-bold text-gray-900 mb-2"},"Error"),n.createElement("p",{className:"text-gray-600"},s))):n.createElement("div",{className:"min-h-screen bg-gray-50"},n.createElement("div",{className:"max-w-4xl mx-auto py-12 px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden"},n.createElement("div",{className:"px-6 py-8"},n.createElement("div",{className:"prose prose-lg max-w-none",dangerouslySetInnerHTML:{__html:e}})),(l==null?void 0:l.role)==="ADMIN"&&n.createElement("div",{className:"px-6 py-4 bg-gray-50 border-t"},n.createElement("button",{onClick:()=>window.location.href="/admin/parametros",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},"✏️ Editar Contenido")))))},BK=()=>{const{user:e}=Te(),[t,r]=g.useState([]),[a,s]=g.useState(!0),[o,l]=g.useState(null),[i,c]=g.useState(""),[d,u]=g.useState(!1);g.useEffect(()=>{m()},[]);const m=async()=>{try{s(!0);const h=await J.get("/teleassistance/sessions/user/"+(e==null?void 0:e.id));r(h.data)}catch(h){console.error("Error loading sessions:",h)}finally{s(!1)}},f=async h=>{try{const E=await J.get(`/api/teleassistance/sessions/${h}`);l(E.data)}catch(E){console.error("Error loading session details:",E)}},x=async h=>{if(i.trim())try{u(!0),await J.post(`/api/teleassistance/sessions/${h}/messages`,{content:i,messageType:"TEXT"}),c(""),await f(h)}catch(E){console.error("Error sending message:",E)}finally{u(!1)}},b=h=>{const E={PENDING:{color:"bg-yellow-100 text-yellow-800",text:"Pendiente"},ACTIVE:{color:"bg-green-100 text-green-800",text:"Activa"},COMPLETED:{color:"bg-blue-100 text-blue-800",text:"Completada"},CANCELLED:{color:"bg-red-100 text-red-800",text:"Cancelada"}},w=E[h]||E.PENDING;return n.createElement("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${w.color}`},w.text)},y=h=>({AUTOFIRMA:"🔐",CERTIFICADO_DIGITAL:"🆔",SEDES:"🏛️",CLAVE_PIN:"📱",NAVEGADOR:"🌐",SISTEMA_OPERATIVO:"💻",OTRO:"❓"})[h]||"❓",v=h=>new Date(h).toLocaleString("es-ES"),p=h=>{if(!h)return"N/A";const E=Math.floor(h/60),w=h%60;return E>0?`${E}h ${w}m`:`${w}m`};return a?n.createElement("div",{className:"min-h-screen flex items-center justify-center"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})):n.createElement("div",{className:"min-h-screen bg-gray-50 py-8"},n.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"flex items-center justify-between"},n.createElement("div",null,n.createElement("h1",{className:"text-3xl font-bold text-gray-900 mb-2"},"🖥️ Mis Sesiones de Teleasistencia"),n.createElement("p",{className:"text-lg text-gray-600"},"Gestiona tus solicitudes de asistencia remota")),n.createElement(Ne,{to:"/client/teleassistance/request",className:"bg-blue-600 text-white px-6 py-3 rounded-md hover:bg-blue-700 transition-colors"},"Nueva Solicitud"))),n.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8"},n.createElement("div",{className:"lg:col-span-1"},n.createElement("div",{className:"bg-white rounded-lg shadow-md p-6"},n.createElement("h2",{className:"text-xl font-bold text-gray-900 mb-4"},"Mis Sesiones (",t.length,")"),t.length===0?n.createElement("div",{className:"text-center py-8"},n.createElement("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})),n.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No tienes sesiones de teleasistencia"),n.createElement(Ne,{to:"/client/teleassistance/request",className:"mt-4 inline-block bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors"},"Solicitar Asistencia")):n.createElement("div",{className:"space-y-3"},t.map(h=>n.createElement("div",{key:h.id,onClick:()=>f(h.id),className:`border rounded-lg p-3 cursor-pointer transition-colors ${(o==null?void 0:o.id)===h.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`},n.createElement("div",{className:"flex items-center justify-between mb-2"},n.createElement("div",{className:"flex items-center space-x-2"},n.createElement("span",{className:"text-lg"},y(h.issueType)),n.createElement("span",{className:"font-medium text-gray-900"},h.issueType.replace("_"," "))),b(h.status)),n.createElement("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2"},h.description),n.createElement("div",{className:"flex items-center justify-between text-xs text-gray-500"},n.createElement("span",null,"Asistente: ",h.assistant.name),n.createElement("span",null,v(h.createdAt)))))))),n.createElement("div",{className:"lg:col-span-2"},o?n.createElement("div",{className:"bg-white rounded-lg shadow-md"},n.createElement("div",{className:"border-b border-gray-200 p-6"},n.createElement("div",{className:"flex items-center justify-between mb-4"},n.createElement("div",{className:"flex items-center space-x-3"},n.createElement("span",{className:"text-2xl"},y(o.issueType)),n.createElement("div",null,n.createElement("h2",{className:"text-xl font-bold text-gray-900"},o.issueType.replace("_"," ")),n.createElement("p",{className:"text-sm text-gray-600"},"Asistente: ",o.assistant.name))),b(o.status)),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},n.createElement("div",null,n.createElement("span",{className:"font-medium text-gray-700"},"Descripción:"),n.createElement("p",{className:"text-gray-600"},o.description)),n.createElement("div",null,n.createElement("span",{className:"font-medium text-gray-700"},"Código de Sesión:"),n.createElement("p",{className:"text-gray-600 font-mono"},o.sessionCode)),o.startedAt&&n.createElement("div",null,n.createElement("span",{className:"font-medium text-gray-700"},"Iniciada:"),n.createElement("p",{className:"text-gray-600"},v(o.startedAt))),o.duration&&n.createElement("div",null,n.createElement("span",{className:"font-medium text-gray-700"},"Duración:"),n.createElement("p",{className:"text-gray-600"},p(o.duration)))),o.resolution&&n.createElement("div",{className:"mt-4 p-4 bg-green-50 rounded-lg"},n.createElement("h4",{className:"font-medium text-green-900 mb-2"},"Resolución:"),n.createElement("p",{className:"text-green-800"},o.resolution))),n.createElement("div",{className:"p-6"},n.createElement("h3",{className:"text-lg font-bold text-gray-900 mb-4"},"Mensajes"),n.createElement("div",{className:"space-y-4 mb-4 max-h-96 overflow-y-auto"},o.messages.length===0?n.createElement("p",{className:"text-gray-500 text-center py-4"},"No hay mensajes en esta sesión"):o.messages.map(h=>n.createElement("div",{key:h.id,className:`flex ${h.sender.id===(e==null?void 0:e.id)?"justify-end":"justify-start"}`},n.createElement("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${h.sender.id===(e==null?void 0:e.id)?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"}`},n.createElement("div",{className:"text-xs opacity-75 mb-1"},h.sender.name," - ",v(h.createdAt)),n.createElement("p",null,h.content))))),o.status==="ACTIVE"&&n.createElement("div",{className:"flex space-x-2"},n.createElement("input",{type:"text",value:i,onChange:h=>c(h.target.value),onKeyPress:h=>h.key==="Enter"&&x(o.id),placeholder:"Escribe un mensaje...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),n.createElement("button",{onClick:()=>x(o.id),disabled:d||!i.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50"},d?"Enviando...":"Enviar")))):n.createElement("div",{className:"bg-white rounded-lg shadow-md p-6"},n.createElement("div",{className:"text-center py-8"},n.createElement("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})),n.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Selecciona una sesión para ver los detalles")))))))},zK=()=>{const{user:e}=Te(),t=qr(),[r,a]=g.useState([]),[s,o]=g.useState([]),[l,i]=g.useState([]),[c,d]=g.useState(!0),[u,m]=g.useState(!1),[f,x]=g.useState(""),[b,y]=g.useState(""),[v,p]=g.useState(""),[h,E]=g.useState(""),[w,N]=g.useState(!1),[S,C]=g.useState(null);g.useEffect(()=>{k()},[]);const k=async()=>{try{d(!0);const[$,P,I]=await Promise.all([J.get("/teleassistance/available-assistants"),J.get("/teleassistance/remote-tools"),J.get("/teleassistance/common-issues")]);a($.data),o(P.data),i(I.data)}catch($){console.error("Error loading teleassistance data:",$)}finally{d(!1)}},D=async $=>{if($.preventDefault(),!f||!b||!h){alert("Por favor completa todos los campos obligatorios");return}try{m(!0);const P={userId:e==null?void 0:e.id,assistantId:f,issueType:b,description:h,remoteTool:v||void 0},I=await J.post("/api/teleassistance/sessions",P);alert("Solicitud de teleasistencia enviada exitosamente. Te contactaremos pronto."),t("/client/teleassistance")}catch(P){console.error("Error creating teleassistance session:",P),alert("Error al enviar la solicitud. Por favor intenta de nuevo.")}finally{m(!1)}},O=$=>{C($),N(!0)},A=$=>({AUTOFIRMA:"🔐",CERTIFICADO_DIGITAL:"🆔",SEDES:"🏛️",CLAVE_PIN:"📱",NAVEGADOR:"🌐",SISTEMA_OPERATIVO:"💻",OTRO:"❓"})[$]||"❓";return c?n.createElement("div",{className:"min-h-screen flex items-center justify-center"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})):n.createElement("div",{className:"min-h-screen bg-gray-50 py-8"},n.createElement("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"mb-8"},n.createElement("h1",{className:"text-3xl font-bold text-gray-900 mb-2"},"🖥️ Solicitar Teleasistencia"),n.createElement("p",{className:"text-lg text-gray-600"},"¿Necesitas ayuda con problemas de administración electrónica? Solicita asistencia remota")),n.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8"},n.createElement("div",{className:"lg:col-span-2"},n.createElement("div",{className:"bg-white rounded-lg shadow-md p-6"},n.createElement("h2",{className:"text-xl font-bold text-gray-900 mb-6"},"Nueva Solicitud de Teleasistencia"),n.createElement("form",{onSubmit:D,className:"space-y-6"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Seleccionar Asistente *"),n.createElement("select",{value:f,onChange:$=>x($.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0},n.createElement("option",{value:""},"Selecciona un asistente"),r.map($=>n.createElement("option",{key:$.id,value:$.id},$.name," (",$.role,")")))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Tipo de Problema *"),n.createElement("select",{value:b,onChange:$=>y($.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0},n.createElement("option",{value:""},"Selecciona el tipo de problema"),l.map($=>n.createElement("option",{key:$.id,value:$.id},A($.id)," ",$.name)))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Descripción del Problema *"),n.createElement("textarea",{value:h,onChange:$=>E($.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Describe detalladamente el problema que estás experimentando...",required:!0})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Herramienta de Control Remoto (Opcional)"),n.createElement("select",{value:v,onChange:$=>p($.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},n.createElement("option",{value:""},"Sin preferencia"),s.map($=>n.createElement("option",{key:$.id,value:$.id},$.name)))),n.createElement("div",{className:"pt-4"},n.createElement("button",{type:"submit",disabled:u,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50"},u?"Enviando...":"Enviar Solicitud de Teleasistencia"))))),n.createElement("div",{className:"space-y-6"},n.createElement("div",{className:"bg-white rounded-lg shadow-md p-6"},n.createElement("h3",{className:"text-lg font-bold text-gray-900 mb-4"},"🛠️ Herramientas de Control Remoto"),n.createElement("div",{className:"space-y-3"},s.map($=>n.createElement("div",{key:$.id,className:"border border-gray-200 rounded-lg p-3"},n.createElement("h4",{className:"font-medium text-gray-900 mb-1"},$.name),n.createElement("p",{className:"text-sm text-gray-600 mb-2"},$.description),n.createElement("button",{onClick:()=>O($),className:"text-blue-600 text-sm hover:text-blue-800"},"Ver instrucciones"))))),n.createElement("div",{className:"bg-white rounded-lg shadow-md p-6"},n.createElement("h3",{className:"text-lg font-bold text-gray-900 mb-4"},"❓ Problemas Comunes"),n.createElement("div",{className:"space-y-3"},l.slice(0,5).map($=>n.createElement("div",{key:$.id,className:"border border-gray-200 rounded-lg p-3"},n.createElement("div",{className:"flex items-center mb-2"},n.createElement("span",{className:"text-lg mr-2"},A($.id)),n.createElement("h4",{className:"font-medium text-gray-900"},$.name)),n.createElement("p",{className:"text-sm text-gray-600"},$.description))))),n.createElement("div",{className:"bg-blue-50 rounded-lg p-6"},n.createElement("h3",{className:"text-lg font-bold text-blue-900 mb-2"},"📞 Información de Contacto"),n.createElement("p",{className:"text-sm text-blue-800 mb-3"},"Una vez enviada tu solicitud, el asistente te contactará para coordinar la sesión de teleasistencia."),n.createElement("div",{className:"text-sm text-blue-700"},n.createElement("p",null,"• Tiempo de respuesta: 15-30 minutos"),n.createElement("p",null,"• Horario de atención: Lunes a Viernes 9:00-18:00"),n.createElement("p",null,"• Sesiones gratuitas incluidas en tu plan"))))),w&&S&&n.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},n.createElement("div",{className:"bg-white rounded-lg p-6 max-w-2xl mx-4 max-h-[80vh] overflow-y-auto"},n.createElement("div",{className:"flex items-center justify-between mb-4"},n.createElement("h3",{className:"text-xl font-bold text-gray-900"},"Instrucciones: ",S.name),n.createElement("button",{onClick:()=>N(!1),className:"text-gray-400 hover:text-gray-600"},n.createElement("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})))),n.createElement("div",{className:"mb-4"},n.createElement("h4",{className:"font-medium text-gray-900 mb-2"},"Características:"),n.createElement("ul",{className:"list-disc list-inside text-sm text-gray-600 space-y-1"},S.features.map(($,P)=>n.createElement("li",{key:P},$)))),n.createElement("div",{className:"mb-4"},n.createElement("h4",{className:"font-medium text-gray-900 mb-2"},"Instrucciones de Instalación:"),n.createElement("ol",{className:"list-decimal list-inside text-sm text-gray-600 space-y-1"},S.instructions.map(($,P)=>n.createElement("li",{key:P},$)))),n.createElement("div",{className:"flex justify-between"},n.createElement("a",{href:S.downloadUrl,target:"_blank",rel:"noopener noreferrer",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors"},"Descargar ",S.name),n.createElement("button",{onClick:()=>N(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors"},"Cerrar"))))))};function UK(){return n.createElement(oA,null,n.createElement(k4,null,n.createElement(E4,null,n.createElement(fe,{path:"/",element:n.createElement(Gw,null)},n.createElement(fe,{index:!0,element:n.createElement(yT,null)}),n.createElement(fe,{path:"contact",element:n.createElement(ET,null)}),n.createElement(fe,{path:"login",element:n.createElement(NT,null)}),n.createElement(fe,{path:"register",element:n.createElement(ST,null)}),n.createElement(fe,{path:"privacidad",element:n.createElement($K,null)}),n.createElement(fe,{path:"terminos",element:n.createElement(FK,null)}),n.createElement(fe,{path:"cookies",element:n.createElement(jK,null)}),n.createElement(fe,{path:"dashboard",element:n.createElement(_m,null)}),n.createElement(fe,{element:n.createElement(CT,null)},n.createElement(fe,{element:n.createElement(Rm,{allowedRoles:["ADMIN"]})},n.createElement(fe,{path:"admin"},n.createElement(fe,{path:"dashboard",element:n.createElement(RY,null)}),n.createElement(fe,{path:"users",element:n.createElement(PY,null)}),n.createElement(fe,{path:"cases",element:n.createElement(IY,null)}),n.createElement(fe,{path:"cases/:id",element:n.createElement(Hv,null)}),n.createElement(fe,{path:"appointments",element:n.createElement($Y,null)}),n.createElement(fe,{path:"tasks",element:n.createElement(FY,null)}),n.createElement(fe,{path:"documents",element:n.createElement(jY,null)}),n.createElement(fe,{path:"invoices",element:n.createElement(uq,null)}),n.createElement(fe,{path:"reports",element:n.createElement(dq,null)}),n.createElement(fe,{path:"home-builder",element:n.createElement(gK,null)}),n.createElement(fe,{path:"menu-config",element:n.createElement(vK,null)}),n.createElement(fe,{path:"site-config",element:n.createElement(yK,null)}),n.createElement(fe,{path:"guided-config",element:n.createElement(EK,null)}),n.createElement(fe,{path:"teleassistance",element:n.createElement(jE,null)}),n.createElement(fe,{path:"settings",element:n.createElement(rc,{title:"Configuración del Sistema",description:"Configurar parámetros generales",icon:"⚙️"})}),n.createElement(fe,{path:"audit",element:n.createElement(rc,{title:"Auditoría",description:"Registros de actividad del sistema",icon:"🔍"})}),n.createElement(fe,{path:"backup",element:n.createElement(rc,{title:"Backup y Restauración",description:"Gestionar copias de seguridad",icon:"💾"})}),n.createElement(fe,{path:"/admin/parametros",element:n.createElement(gq,null)}))),n.createElement(fe,{element:n.createElement(Rm,{allowedRoles:["ABOGADO"]})},n.createElement(fe,{path:"lawyer"},n.createElement(fe,{path:"dashboard",element:n.createElement(_m,null)}),n.createElement(fe,{path:"facturacion",element:n.createElement(RK,null)}),n.createElement(fe,{path:"provisiones",element:n.createElement(MK,null)}),n.createElement(fe,{path:"cases"},n.createElement(fe,{index:!0,element:n.createElement(kT,null)}),n.createElement(fe,{path:"new",element:n.createElement(DT,null)}),n.createElement(fe,{path:":id",element:n.createElement(Hv,null)}),n.createElement(fe,{path:":id/edit",element:n.createElement(MT,null)})),n.createElement(fe,{path:"clients",element:n.createElement(TY,null)}),n.createElement(fe,{path:"appointments",element:n.createElement(AY,null)}),n.createElement(fe,{path:"documents",element:n.createElement(OT,null)}),n.createElement(fe,{path:"tasks",element:n.createElement(_Y,null)}),n.createElement(fe,{path:"reports",element:n.createElement(OY,null)}),n.createElement(fe,{path:"chat",element:n.createElement(bK,null)}),n.createElement(fe,{path:"teleassistance",element:n.createElement(jE,null)}))),n.createElement(fe,{element:n.createElement(Rm,{allowedRoles:["CLIENTE"]})},n.createElement(fe,{path:"client"},n.createElement(fe,{path:"dashboard",element:n.createElement(_m,null)}),n.createElement(fe,{path:"cases",element:n.createElement(AT,null)}),n.createElement(fe,{path:"cases/:id",element:n.createElement(TT,null)}),n.createElement(fe,{path:"documents",element:n.createElement(RT,null)}),n.createElement(fe,{path:"provisiones",element:n.createElement(PK,null)}),n.createElement(fe,{path:"appointments",element:n.createElement(LK,null)}),n.createElement(fe,{path:"chat",element:n.createElement(xK,null)}),n.createElement(fe,{path:"teleassistance",element:n.createElement(BK,null)}),n.createElement(fe,{path:"teleassistance/request",element:n.createElement(zK,null)}),n.createElement(fe,{path:"payments",element:n.createElement(IK,null)}),n.createElement(fe,{path:"profile",element:n.createElement(rc,{title:"Perfil",description:"Actualizar información personal",icon:"👤"})}))))))))}Zm.createRoot(document.getElementById("root")).render(n.createElement(n.StrictMode,null,n.createElement(UK,null)))});export default VK();
