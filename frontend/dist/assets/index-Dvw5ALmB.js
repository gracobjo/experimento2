var GS=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var zJ=GS((mZ,Cd)=>{function KS(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var Hr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function br(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Zb={exports:{}},Nu={},ej={exports:{}},Ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $l=Symbol.for("react.element"),QS=Symbol.for("react.portal"),XS=Symbol.for("react.fragment"),JS=Symbol.for("react.strict_mode"),ZS=Symbol.for("react.profiler"),eE=Symbol.for("react.provider"),tE=Symbol.for("react.context"),rE=Symbol.for("react.forward_ref"),sE=Symbol.for("react.suspense"),nE=Symbol.for("react.memo"),aE=Symbol.for("react.lazy"),v0=Symbol.iterator;function iE(e){return e===null||typeof e!="object"?null:(e=v0&&e[v0]||e["@@iterator"],typeof e=="function"?e:null)}var tj={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rj=Object.assign,sj={};function Oi(e,t,r){this.props=e,this.context=t,this.refs=sj,this.updater=r||tj}Oi.prototype.isReactComponent={};Oi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Oi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function nj(){}nj.prototype=Oi.prototype;function Fp(e,t,r){this.props=e,this.context=t,this.refs=sj,this.updater=r||tj}var Bp=Fp.prototype=new nj;Bp.constructor=Fp;rj(Bp,Oi.prototype);Bp.isPureReactComponent=!0;var y0=Array.isArray,aj=Object.prototype.hasOwnProperty,zp={current:null},ij={key:!0,ref:!0,__self:!0,__source:!0};function oj(e,t,r){var n,a={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)aj.call(t,n)&&!ij.hasOwnProperty(n)&&(a[n]=t[n]);var c=arguments.length-2;if(c===1)a.children=r;else if(1<c){for(var l=Array(c),d=0;d<c;d++)l[d]=arguments[d+2];a.children=l}if(e&&e.defaultProps)for(n in c=e.defaultProps,c)a[n]===void 0&&(a[n]=c[n]);return{$$typeof:$l,type:e,key:i,ref:o,props:a,_owner:zp.current}}function oE(e,t){return{$$typeof:$l,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Up(e){return typeof e=="object"&&e!==null&&e.$$typeof===$l}function lE(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var b0=/\/+/g;function Vh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?lE(""+e.key):t.toString(36)}function Gc(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case $l:case QS:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+Vh(o,0):n,y0(a)?(r="",e!=null&&(r=e.replace(b0,"$&/")+"/"),Gc(a,t,r,"",function(d){return d})):a!=null&&(Up(a)&&(a=oE(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(b0,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",y0(e))for(var c=0;c<e.length;c++){i=e[c];var l=n+Vh(i,c);o+=Gc(i,t,r,l,a)}else if(l=iE(e),typeof l=="function")for(e=l.call(e),c=0;!(i=e.next()).done;)i=i.value,l=n+Vh(i,c++),o+=Gc(i,t,r,l,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function mc(e,t,r){if(e==null)return e;var n=[],a=0;return Gc(e,n,"","",function(i){return t.call(r,i,a++)}),n}function cE(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var nr={current:null},Kc={transition:null},dE={ReactCurrentDispatcher:nr,ReactCurrentBatchConfig:Kc,ReactCurrentOwner:zp};function lj(){throw Error("act(...) is not supported in production builds of React.")}Ae.Children={map:mc,forEach:function(e,t,r){mc(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return mc(e,function(){t++}),t},toArray:function(e){return mc(e,function(t){return t})||[]},only:function(e){if(!Up(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ae.Component=Oi;Ae.Fragment=XS;Ae.Profiler=ZS;Ae.PureComponent=Fp;Ae.StrictMode=JS;Ae.Suspense=sE;Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dE;Ae.act=lj;Ae.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=rj({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=zp.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)aj.call(t,l)&&!ij.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&c!==void 0?c[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){c=Array(l);for(var d=0;d<l;d++)c[d]=arguments[d+2];n.children=c}return{$$typeof:$l,type:e.type,key:a,ref:i,props:n,_owner:o}};Ae.createContext=function(e){return e={$$typeof:tE,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:eE,_context:e},e.Consumer=e};Ae.createElement=oj;Ae.createFactory=function(e){var t=oj.bind(null,e);return t.type=e,t};Ae.createRef=function(){return{current:null}};Ae.forwardRef=function(e){return{$$typeof:rE,render:e}};Ae.isValidElement=Up;Ae.lazy=function(e){return{$$typeof:aE,_payload:{_status:-1,_result:e},_init:cE}};Ae.memo=function(e,t){return{$$typeof:nE,type:e,compare:t===void 0?null:t}};Ae.startTransition=function(e){var t=Kc.transition;Kc.transition={};try{e()}finally{Kc.transition=t}};Ae.unstable_act=lj;Ae.useCallback=function(e,t){return nr.current.useCallback(e,t)};Ae.useContext=function(e){return nr.current.useContext(e)};Ae.useDebugValue=function(){};Ae.useDeferredValue=function(e){return nr.current.useDeferredValue(e)};Ae.useEffect=function(e,t){return nr.current.useEffect(e,t)};Ae.useId=function(){return nr.current.useId()};Ae.useImperativeHandle=function(e,t,r){return nr.current.useImperativeHandle(e,t,r)};Ae.useInsertionEffect=function(e,t){return nr.current.useInsertionEffect(e,t)};Ae.useLayoutEffect=function(e,t){return nr.current.useLayoutEffect(e,t)};Ae.useMemo=function(e,t){return nr.current.useMemo(e,t)};Ae.useReducer=function(e,t,r){return nr.current.useReducer(e,t,r)};Ae.useRef=function(e){return nr.current.useRef(e)};Ae.useState=function(e){return nr.current.useState(e)};Ae.useSyncExternalStore=function(e,t,r){return nr.current.useSyncExternalStore(e,t,r)};Ae.useTransition=function(){return nr.current.useTransition()};Ae.version="18.3.1";ej.exports=Ae;var g=ej.exports;const I=br(g),uE=KS({__proto__:null,default:I},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hE=g,fE=Symbol.for("react.element"),mE=Symbol.for("react.fragment"),pE=Object.prototype.hasOwnProperty,gE=hE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xE={key:!0,ref:!0,__self:!0,__source:!0};function cj(e,t,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)pE.call(t,n)&&!xE.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:fE,type:e,key:i,ref:o,props:a,_owner:gE.current}}Nu.Fragment=mE;Nu.jsx=cj;Nu.jsxs=cj;Zb.exports=Nu;var s=Zb.exports,Jf={},dj={exports:{}},kr={},uj={exports:{}},hj={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,W){var V=R.length;R.push(W);e:for(;0<V;){var z=V-1>>>1,H=R[z];if(0<a(H,W))R[z]=W,R[V]=H,V=z;else break e}}function r(R){return R.length===0?null:R[0]}function n(R){if(R.length===0)return null;var W=R[0],V=R.pop();if(V!==W){R[0]=V;e:for(var z=0,H=R.length,G=H>>>1;z<G;){var Z=2*(z+1)-1,F=R[Z],U=Z+1,Y=R[U];if(0>a(F,V))U<H&&0>a(Y,F)?(R[z]=Y,R[U]=V,z=U):(R[z]=F,R[Z]=V,z=Z);else if(U<H&&0>a(Y,V))R[z]=Y,R[U]=V,z=U;else break e}}return W}function a(R,W){var V=R.sortIndex-W.sortIndex;return V!==0?V:R.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();e.unstable_now=function(){return o.now()-c}}var l=[],d=[],u=1,h=null,f=3,x=!1,v=!1,y=!1,b=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(R){for(var W=r(d);W!==null;){if(W.callback===null)n(d);else if(W.startTime<=R)n(d),W.sortIndex=W.expirationTime,t(l,W);else break;W=r(d)}}function w(R){if(y=!1,j(R),!v)if(r(l)!==null)v=!0,P(N);else{var W=r(d);W!==null&&M(w,W.startTime-R)}}function N(R,W){v=!1,y&&(y=!1,p(E),E=-1),x=!0;var V=f;try{for(j(W),h=r(l);h!==null&&(!(h.expirationTime>W)||R&&!D());){var z=h.callback;if(typeof z=="function"){h.callback=null,f=h.priorityLevel;var H=z(h.expirationTime<=W);W=e.unstable_now(),typeof H=="function"?h.callback=H:h===r(l)&&n(l),j(W)}else n(l);h=r(l)}if(h!==null)var G=!0;else{var Z=r(d);Z!==null&&M(w,Z.startTime-W),G=!1}return G}finally{h=null,f=V,x=!1}}var C=!1,S=null,E=-1,k=5,T=-1;function D(){return!(e.unstable_now()-T<k)}function $(){if(S!==null){var R=e.unstable_now();T=R;var W=!0;try{W=S(!0,R)}finally{W?_():(C=!1,S=null)}}else C=!1}var _;if(typeof m=="function")_=function(){m($)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,B=A.port2;A.port1.onmessage=$,_=function(){B.postMessage(null)}}else _=function(){b($,0)};function P(R){S=R,C||(C=!0,_())}function M(R,W){E=b(function(){R(e.unstable_now())},W)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){v||x||(v=!0,P(N))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(R){switch(f){case 1:case 2:case 3:var W=3;break;default:W=f}var V=f;f=W;try{return R()}finally{f=V}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,W){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var V=f;f=R;try{return W()}finally{f=V}},e.unstable_scheduleCallback=function(R,W,V){var z=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?z+V:z):V=z,R){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=V+H,R={id:u++,callback:W,priorityLevel:R,startTime:V,expirationTime:H,sortIndex:-1},V>z?(R.sortIndex=V,t(d,R),r(l)===null&&R===r(d)&&(y?(p(E),E=-1):y=!0,M(w,V-z))):(R.sortIndex=H,t(l,R),v||x||(v=!0,P(N))),R},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(R){var W=f;return function(){var V=f;f=W;try{return R.apply(this,arguments)}finally{f=V}}}})(hj);uj.exports=hj;var vE=uj.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yE=g,Sr=vE;function ee(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var fj=new Set,Xo={};function La(e,t){gi(e,t),gi(e+"Capture",t)}function gi(e,t){for(Xo[e]=t,e=0;e<t.length;e++)fj.add(t[e])}var an=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zf=Object.prototype.hasOwnProperty,bE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,j0={},w0={};function jE(e){return Zf.call(w0,e)?!0:Zf.call(j0,e)?!1:bE.test(e)?w0[e]=!0:(j0[e]=!0,!1)}function wE(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function NE(e,t,r,n){if(t===null||typeof t>"u"||wE(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ar(e,t,r,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Ft={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ft[e]=new ar(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ft[t]=new ar(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ft[e]=new ar(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ft[e]=new ar(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ft[e]=new ar(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ft[e]=new ar(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ft[e]=new ar(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ft[e]=new ar(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ft[e]=new ar(e,5,!1,e.toLowerCase(),null,!1,!1)});var Vp=/[\-:]([a-z])/g;function Hp(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Vp,Hp);Ft[t]=new ar(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Vp,Hp);Ft[t]=new ar(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Vp,Hp);Ft[t]=new ar(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ft[e]=new ar(e,1,!1,e.toLowerCase(),null,!1,!1)});Ft.xlinkHref=new ar("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ft[e]=new ar(e,1,!1,e.toLowerCase(),null,!0,!0)});function Wp(e,t,r,n){var a=Ft.hasOwnProperty(t)?Ft[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(NE(t,r,a,n)&&(r=null),n||a===null?jE(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var fn=yE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pc=Symbol.for("react.element"),Wa=Symbol.for("react.portal"),Ya=Symbol.for("react.fragment"),Yp=Symbol.for("react.strict_mode"),em=Symbol.for("react.profiler"),mj=Symbol.for("react.provider"),pj=Symbol.for("react.context"),qp=Symbol.for("react.forward_ref"),tm=Symbol.for("react.suspense"),rm=Symbol.for("react.suspense_list"),Gp=Symbol.for("react.memo"),wn=Symbol.for("react.lazy"),gj=Symbol.for("react.offscreen"),N0=Symbol.iterator;function uo(e){return e===null||typeof e!="object"?null:(e=N0&&e[N0]||e["@@iterator"],typeof e=="function"?e:null)}var dt=Object.assign,Hh;function Eo(e){if(Hh===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Hh=t&&t[1]||""}return`
`+Hh+e}var Wh=!1;function Yh(e,t){if(!e||Wh)return"";Wh=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,c=i.length-1;1<=o&&0<=c&&a[o]!==i[c];)c--;for(;1<=o&&0<=c;o--,c--)if(a[o]!==i[c]){if(o!==1||c!==1)do if(o--,c--,0>c||a[o]!==i[c]){var l=`
`+a[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=c);break}}}finally{Wh=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Eo(e):""}function CE(e){switch(e.tag){case 5:return Eo(e.type);case 16:return Eo("Lazy");case 13:return Eo("Suspense");case 19:return Eo("SuspenseList");case 0:case 2:case 15:return e=Yh(e.type,!1),e;case 11:return e=Yh(e.type.render,!1),e;case 1:return e=Yh(e.type,!0),e;default:return""}}function sm(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ya:return"Fragment";case Wa:return"Portal";case em:return"Profiler";case Yp:return"StrictMode";case tm:return"Suspense";case rm:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case pj:return(e.displayName||"Context")+".Consumer";case mj:return(e._context.displayName||"Context")+".Provider";case qp:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Gp:return t=e.displayName||null,t!==null?t:sm(e.type)||"Memo";case wn:t=e._payload,e=e._init;try{return sm(e(t))}catch{}}return null}function SE(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sm(t);case 8:return t===Yp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Hn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function xj(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function EE(e){var t=xj(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function gc(e){e._valueTracker||(e._valueTracker=EE(e))}function vj(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=xj(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Sd(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function nm(e,t){var r=t.checked;return dt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function C0(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Hn(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function yj(e,t){t=t.checked,t!=null&&Wp(e,"checked",t,!1)}function am(e,t){yj(e,t);var r=Hn(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?im(e,t.type,r):t.hasOwnProperty("defaultValue")&&im(e,t.type,Hn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function S0(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function im(e,t,r){(t!=="number"||Sd(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var ko=Array.isArray;function ai(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Hn(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function om(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ee(91));return dt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function E0(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ee(92));if(ko(r)){if(1<r.length)throw Error(ee(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Hn(r)}}function bj(e,t){var r=Hn(t.value),n=Hn(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function k0(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function jj(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lm(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?jj(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var xc,wj=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(xc=xc||document.createElement("div"),xc.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=xc.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Jo(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Oo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kE=["Webkit","ms","Moz","O"];Object.keys(Oo).forEach(function(e){kE.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Oo[t]=Oo[e]})});function Nj(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Oo.hasOwnProperty(e)&&Oo[e]?(""+t).trim():t+"px"}function Cj(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=Nj(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var DE=dt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cm(e,t){if(t){if(DE[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ee(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ee(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ee(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ee(62))}}function dm(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var um=null;function Kp(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var hm=null,ii=null,oi=null;function D0(e){if(e=zl(e)){if(typeof hm!="function")throw Error(ee(280));var t=e.stateNode;t&&(t=Du(t),hm(e.stateNode,e.type,t))}}function Sj(e){ii?oi?oi.push(e):oi=[e]:ii=e}function Ej(){if(ii){var e=ii,t=oi;if(oi=ii=null,D0(e),t)for(e=0;e<t.length;e++)D0(t[e])}}function kj(e,t){return e(t)}function Dj(){}var qh=!1;function Aj(e,t,r){if(qh)return e(t,r);qh=!0;try{return kj(e,t,r)}finally{qh=!1,(ii!==null||oi!==null)&&(Dj(),Ej())}}function Zo(e,t){var r=e.stateNode;if(r===null)return null;var n=Du(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ee(231,t,typeof r));return r}var fm=!1;if(an)try{var ho={};Object.defineProperty(ho,"passive",{get:function(){fm=!0}}),window.addEventListener("test",ho,ho),window.removeEventListener("test",ho,ho)}catch{fm=!1}function AE(e,t,r,n,a,i,o,c,l){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(u){this.onError(u)}}var Ro=!1,Ed=null,kd=!1,mm=null,TE={onError:function(e){Ro=!0,Ed=e}};function _E(e,t,r,n,a,i,o,c,l){Ro=!1,Ed=null,AE.apply(TE,arguments)}function ME(e,t,r,n,a,i,o,c,l){if(_E.apply(this,arguments),Ro){if(Ro){var d=Ed;Ro=!1,Ed=null}else throw Error(ee(198));kd||(kd=!0,mm=d)}}function Ia(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Tj(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function A0(e){if(Ia(e)!==e)throw Error(ee(188))}function OE(e){var t=e.alternate;if(!t){if(t=Ia(e),t===null)throw Error(ee(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return A0(a),e;if(i===n)return A0(a),t;i=i.sibling}throw Error(ee(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,c=a.child;c;){if(c===r){o=!0,r=a,n=i;break}if(c===n){o=!0,n=a,r=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===r){o=!0,r=i,n=a;break}if(c===n){o=!0,n=i,r=a;break}c=c.sibling}if(!o)throw Error(ee(189))}}if(r.alternate!==n)throw Error(ee(190))}if(r.tag!==3)throw Error(ee(188));return r.stateNode.current===r?e:t}function _j(e){return e=OE(e),e!==null?Mj(e):null}function Mj(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Mj(e);if(t!==null)return t;e=e.sibling}return null}var Oj=Sr.unstable_scheduleCallback,T0=Sr.unstable_cancelCallback,RE=Sr.unstable_shouldYield,PE=Sr.unstable_requestPaint,xt=Sr.unstable_now,LE=Sr.unstable_getCurrentPriorityLevel,Qp=Sr.unstable_ImmediatePriority,Rj=Sr.unstable_UserBlockingPriority,Dd=Sr.unstable_NormalPriority,IE=Sr.unstable_LowPriority,Pj=Sr.unstable_IdlePriority,Cu=null,_s=null;function $E(e){if(_s&&typeof _s.onCommitFiberRoot=="function")try{_s.onCommitFiberRoot(Cu,e,void 0,(e.current.flags&128)===128)}catch{}}var hs=Math.clz32?Math.clz32:zE,FE=Math.log,BE=Math.LN2;function zE(e){return e>>>=0,e===0?32:31-(FE(e)/BE|0)|0}var vc=64,yc=4194304;function Do(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ad(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var c=o&~a;c!==0?n=Do(c):(i&=o,i!==0&&(n=Do(i)))}else o=r&~a,o!==0?n=Do(o):i!==0&&(n=Do(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-hs(t),a=1<<r,n|=e[r],t&=~a;return n}function UE(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function VE(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-hs(i),c=1<<o,l=a[o];l===-1?(!(c&r)||c&n)&&(a[o]=UE(c,t)):l<=t&&(e.expiredLanes|=c),i&=~c}}function pm(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Lj(){var e=vc;return vc<<=1,!(vc&4194240)&&(vc=64),e}function Gh(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Fl(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-hs(t),e[t]=r}function HE(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-hs(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function Xp(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-hs(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var Ve=0;function Ij(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var $j,Jp,Fj,Bj,zj,gm=!1,bc=[],On=null,Rn=null,Pn=null,el=new Map,tl=new Map,Sn=[],WE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _0(e,t){switch(e){case"focusin":case"focusout":On=null;break;case"dragenter":case"dragleave":Rn=null;break;case"mouseover":case"mouseout":Pn=null;break;case"pointerover":case"pointerout":el.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":tl.delete(t.pointerId)}}function fo(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=zl(t),t!==null&&Jp(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function YE(e,t,r,n,a){switch(t){case"focusin":return On=fo(On,e,t,r,n,a),!0;case"dragenter":return Rn=fo(Rn,e,t,r,n,a),!0;case"mouseover":return Pn=fo(Pn,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return el.set(i,fo(el.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,tl.set(i,fo(tl.get(i)||null,e,t,r,n,a)),!0}return!1}function Uj(e){var t=da(e.target);if(t!==null){var r=Ia(t);if(r!==null){if(t=r.tag,t===13){if(t=Tj(r),t!==null){e.blockedOn=t,zj(e.priority,function(){Fj(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Qc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=xm(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);um=n,r.target.dispatchEvent(n),um=null}else return t=zl(r),t!==null&&Jp(t),e.blockedOn=r,!1;t.shift()}return!0}function M0(e,t,r){Qc(e)&&r.delete(t)}function qE(){gm=!1,On!==null&&Qc(On)&&(On=null),Rn!==null&&Qc(Rn)&&(Rn=null),Pn!==null&&Qc(Pn)&&(Pn=null),el.forEach(M0),tl.forEach(M0)}function mo(e,t){e.blockedOn===t&&(e.blockedOn=null,gm||(gm=!0,Sr.unstable_scheduleCallback(Sr.unstable_NormalPriority,qE)))}function rl(e){function t(a){return mo(a,e)}if(0<bc.length){mo(bc[0],e);for(var r=1;r<bc.length;r++){var n=bc[r];n.blockedOn===e&&(n.blockedOn=null)}}for(On!==null&&mo(On,e),Rn!==null&&mo(Rn,e),Pn!==null&&mo(Pn,e),el.forEach(t),tl.forEach(t),r=0;r<Sn.length;r++)n=Sn[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Sn.length&&(r=Sn[0],r.blockedOn===null);)Uj(r),r.blockedOn===null&&Sn.shift()}var li=fn.ReactCurrentBatchConfig,Td=!0;function GE(e,t,r,n){var a=Ve,i=li.transition;li.transition=null;try{Ve=1,Zp(e,t,r,n)}finally{Ve=a,li.transition=i}}function KE(e,t,r,n){var a=Ve,i=li.transition;li.transition=null;try{Ve=4,Zp(e,t,r,n)}finally{Ve=a,li.transition=i}}function Zp(e,t,r,n){if(Td){var a=xm(e,t,r,n);if(a===null)nf(e,t,n,_d,r),_0(e,n);else if(YE(a,e,t,r,n))n.stopPropagation();else if(_0(e,n),t&4&&-1<WE.indexOf(e)){for(;a!==null;){var i=zl(a);if(i!==null&&$j(i),i=xm(e,t,r,n),i===null&&nf(e,t,n,_d,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else nf(e,t,n,null,r)}}var _d=null;function xm(e,t,r,n){if(_d=null,e=Kp(n),e=da(e),e!==null)if(t=Ia(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Tj(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return _d=e,null}function Vj(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(LE()){case Qp:return 1;case Rj:return 4;case Dd:case IE:return 16;case Pj:return 536870912;default:return 16}default:return 16}}var kn=null,eg=null,Xc=null;function Hj(){if(Xc)return Xc;var e,t=eg,r=t.length,n,a="value"in kn?kn.value:kn.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[i-n];n++);return Xc=a.slice(e,1<n?1-n:void 0)}function Jc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function jc(){return!0}function O0(){return!1}function Dr(e){function t(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(r=e[c],this[c]=r?r(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?jc:O0,this.isPropagationStopped=O0,this}return dt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=jc)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=jc)},persist:function(){},isPersistent:jc}),t}var Ri={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tg=Dr(Ri),Bl=dt({},Ri,{view:0,detail:0}),QE=Dr(Bl),Kh,Qh,po,Su=dt({},Bl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rg,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==po&&(po&&e.type==="mousemove"?(Kh=e.screenX-po.screenX,Qh=e.screenY-po.screenY):Qh=Kh=0,po=e),Kh)},movementY:function(e){return"movementY"in e?e.movementY:Qh}}),R0=Dr(Su),XE=dt({},Su,{dataTransfer:0}),JE=Dr(XE),ZE=dt({},Bl,{relatedTarget:0}),Xh=Dr(ZE),ek=dt({},Ri,{animationName:0,elapsedTime:0,pseudoElement:0}),tk=Dr(ek),rk=dt({},Ri,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),sk=Dr(rk),nk=dt({},Ri,{data:0}),P0=Dr(nk),ak={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ik={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ok={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lk(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ok[e])?!!t[e]:!1}function rg(){return lk}var ck=dt({},Bl,{key:function(e){if(e.key){var t=ak[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Jc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ik[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rg,charCode:function(e){return e.type==="keypress"?Jc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Jc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),dk=Dr(ck),uk=dt({},Su,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),L0=Dr(uk),hk=dt({},Bl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rg}),fk=Dr(hk),mk=dt({},Ri,{propertyName:0,elapsedTime:0,pseudoElement:0}),pk=Dr(mk),gk=dt({},Su,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),xk=Dr(gk),vk=[9,13,27,32],sg=an&&"CompositionEvent"in window,Po=null;an&&"documentMode"in document&&(Po=document.documentMode);var yk=an&&"TextEvent"in window&&!Po,Wj=an&&(!sg||Po&&8<Po&&11>=Po),I0=" ",$0=!1;function Yj(e,t){switch(e){case"keyup":return vk.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qj(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var qa=!1;function bk(e,t){switch(e){case"compositionend":return qj(t);case"keypress":return t.which!==32?null:($0=!0,I0);case"textInput":return e=t.data,e===I0&&$0?null:e;default:return null}}function jk(e,t){if(qa)return e==="compositionend"||!sg&&Yj(e,t)?(e=Hj(),Xc=eg=kn=null,qa=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Wj&&t.locale!=="ko"?null:t.data;default:return null}}var wk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function F0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!wk[e.type]:t==="textarea"}function Gj(e,t,r,n){Sj(n),t=Md(t,"onChange"),0<t.length&&(r=new tg("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Lo=null,sl=null;function Nk(e){aw(e,0)}function Eu(e){var t=Qa(e);if(vj(t))return e}function Ck(e,t){if(e==="change")return t}var Kj=!1;if(an){var Jh;if(an){var Zh="oninput"in document;if(!Zh){var B0=document.createElement("div");B0.setAttribute("oninput","return;"),Zh=typeof B0.oninput=="function"}Jh=Zh}else Jh=!1;Kj=Jh&&(!document.documentMode||9<document.documentMode)}function z0(){Lo&&(Lo.detachEvent("onpropertychange",Qj),sl=Lo=null)}function Qj(e){if(e.propertyName==="value"&&Eu(sl)){var t=[];Gj(t,sl,e,Kp(e)),Aj(Nk,t)}}function Sk(e,t,r){e==="focusin"?(z0(),Lo=t,sl=r,Lo.attachEvent("onpropertychange",Qj)):e==="focusout"&&z0()}function Ek(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Eu(sl)}function kk(e,t){if(e==="click")return Eu(t)}function Dk(e,t){if(e==="input"||e==="change")return Eu(t)}function Ak(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ms=typeof Object.is=="function"?Object.is:Ak;function nl(e,t){if(ms(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!Zf.call(t,a)||!ms(e[a],t[a]))return!1}return!0}function U0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function V0(e,t){var r=U0(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=U0(r)}}function Xj(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Xj(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Jj(){for(var e=window,t=Sd();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Sd(e.document)}return t}function ng(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Tk(e){var t=Jj(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Xj(r.ownerDocument.documentElement,r)){if(n!==null&&ng(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=V0(r,i);var o=V0(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var _k=an&&"documentMode"in document&&11>=document.documentMode,Ga=null,vm=null,Io=null,ym=!1;function H0(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ym||Ga==null||Ga!==Sd(n)||(n=Ga,"selectionStart"in n&&ng(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Io&&nl(Io,n)||(Io=n,n=Md(vm,"onSelect"),0<n.length&&(t=new tg("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Ga)))}function wc(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ka={animationend:wc("Animation","AnimationEnd"),animationiteration:wc("Animation","AnimationIteration"),animationstart:wc("Animation","AnimationStart"),transitionend:wc("Transition","TransitionEnd")},ef={},Zj={};an&&(Zj=document.createElement("div").style,"AnimationEvent"in window||(delete Ka.animationend.animation,delete Ka.animationiteration.animation,delete Ka.animationstart.animation),"TransitionEvent"in window||delete Ka.transitionend.transition);function ku(e){if(ef[e])return ef[e];if(!Ka[e])return e;var t=Ka[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Zj)return ef[e]=t[r];return e}var ew=ku("animationend"),tw=ku("animationiteration"),rw=ku("animationstart"),sw=ku("transitionend"),nw=new Map,W0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Kn(e,t){nw.set(e,t),La(t,[e])}for(var tf=0;tf<W0.length;tf++){var rf=W0[tf],Mk=rf.toLowerCase(),Ok=rf[0].toUpperCase()+rf.slice(1);Kn(Mk,"on"+Ok)}Kn(ew,"onAnimationEnd");Kn(tw,"onAnimationIteration");Kn(rw,"onAnimationStart");Kn("dblclick","onDoubleClick");Kn("focusin","onFocus");Kn("focusout","onBlur");Kn(sw,"onTransitionEnd");gi("onMouseEnter",["mouseout","mouseover"]);gi("onMouseLeave",["mouseout","mouseover"]);gi("onPointerEnter",["pointerout","pointerover"]);gi("onPointerLeave",["pointerout","pointerover"]);La("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));La("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));La("onBeforeInput",["compositionend","keypress","textInput","paste"]);La("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));La("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));La("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ao="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ao));function Y0(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,ME(n,t,void 0,e),e.currentTarget=null}function aw(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var c=n[o],l=c.instance,d=c.currentTarget;if(c=c.listener,l!==i&&a.isPropagationStopped())break e;Y0(a,c,d),i=l}else for(o=0;o<n.length;o++){if(c=n[o],l=c.instance,d=c.currentTarget,c=c.listener,l!==i&&a.isPropagationStopped())break e;Y0(a,c,d),i=l}}}if(kd)throw e=mm,kd=!1,mm=null,e}function Xe(e,t){var r=t[Cm];r===void 0&&(r=t[Cm]=new Set);var n=e+"__bubble";r.has(n)||(iw(t,e,2,!1),r.add(n))}function sf(e,t,r){var n=0;t&&(n|=4),iw(r,e,n,t)}var Nc="_reactListening"+Math.random().toString(36).slice(2);function al(e){if(!e[Nc]){e[Nc]=!0,fj.forEach(function(r){r!=="selectionchange"&&(Rk.has(r)||sf(r,!1,e),sf(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Nc]||(t[Nc]=!0,sf("selectionchange",!1,t))}}function iw(e,t,r,n){switch(Vj(t)){case 1:var a=GE;break;case 4:a=KE;break;default:a=Zp}r=a.bind(null,t,r,e),a=void 0,!fm||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function nf(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var c=n.stateNode.containerInfo;if(c===a||c.nodeType===8&&c.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===a||l.nodeType===8&&l.parentNode===a))return;o=o.return}for(;c!==null;){if(o=da(c),o===null)return;if(l=o.tag,l===5||l===6){n=i=o;continue e}c=c.parentNode}}n=n.return}Aj(function(){var d=i,u=Kp(r),h=[];e:{var f=nw.get(e);if(f!==void 0){var x=tg,v=e;switch(e){case"keypress":if(Jc(r)===0)break e;case"keydown":case"keyup":x=dk;break;case"focusin":v="focus",x=Xh;break;case"focusout":v="blur",x=Xh;break;case"beforeblur":case"afterblur":x=Xh;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=R0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=JE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=fk;break;case ew:case tw:case rw:x=tk;break;case sw:x=pk;break;case"scroll":x=QE;break;case"wheel":x=xk;break;case"copy":case"cut":case"paste":x=sk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=L0}var y=(t&4)!==0,b=!y&&e==="scroll",p=y?f!==null?f+"Capture":null:f;y=[];for(var m=d,j;m!==null;){j=m;var w=j.stateNode;if(j.tag===5&&w!==null&&(j=w,p!==null&&(w=Zo(m,p),w!=null&&y.push(il(m,w,j)))),b)break;m=m.return}0<y.length&&(f=new x(f,v,null,r,u),h.push({event:f,listeners:y}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",f&&r!==um&&(v=r.relatedTarget||r.fromElement)&&(da(v)||v[on]))break e;if((x||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,x?(v=r.relatedTarget||r.toElement,x=d,v=v?da(v):null,v!==null&&(b=Ia(v),v!==b||v.tag!==5&&v.tag!==6)&&(v=null)):(x=null,v=d),x!==v)){if(y=R0,w="onMouseLeave",p="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(y=L0,w="onPointerLeave",p="onPointerEnter",m="pointer"),b=x==null?f:Qa(x),j=v==null?f:Qa(v),f=new y(w,m+"leave",x,r,u),f.target=b,f.relatedTarget=j,w=null,da(u)===d&&(y=new y(p,m+"enter",v,r,u),y.target=j,y.relatedTarget=b,w=y),b=w,x&&v)t:{for(y=x,p=v,m=0,j=y;j;j=za(j))m++;for(j=0,w=p;w;w=za(w))j++;for(;0<m-j;)y=za(y),m--;for(;0<j-m;)p=za(p),j--;for(;m--;){if(y===p||p!==null&&y===p.alternate)break t;y=za(y),p=za(p)}y=null}else y=null;x!==null&&q0(h,f,x,y,!1),v!==null&&b!==null&&q0(h,b,v,y,!0)}}e:{if(f=d?Qa(d):window,x=f.nodeName&&f.nodeName.toLowerCase(),x==="select"||x==="input"&&f.type==="file")var N=Ck;else if(F0(f))if(Kj)N=Dk;else{N=Ek;var C=Sk}else(x=f.nodeName)&&x.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(N=kk);if(N&&(N=N(e,d))){Gj(h,N,r,u);break e}C&&C(e,f,d),e==="focusout"&&(C=f._wrapperState)&&C.controlled&&f.type==="number"&&im(f,"number",f.value)}switch(C=d?Qa(d):window,e){case"focusin":(F0(C)||C.contentEditable==="true")&&(Ga=C,vm=d,Io=null);break;case"focusout":Io=vm=Ga=null;break;case"mousedown":ym=!0;break;case"contextmenu":case"mouseup":case"dragend":ym=!1,H0(h,r,u);break;case"selectionchange":if(_k)break;case"keydown":case"keyup":H0(h,r,u)}var S;if(sg)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else qa?Yj(e,r)&&(E="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(Wj&&r.locale!=="ko"&&(qa||E!=="onCompositionStart"?E==="onCompositionEnd"&&qa&&(S=Hj()):(kn=u,eg="value"in kn?kn.value:kn.textContent,qa=!0)),C=Md(d,E),0<C.length&&(E=new P0(E,e,null,r,u),h.push({event:E,listeners:C}),S?E.data=S:(S=qj(r),S!==null&&(E.data=S)))),(S=yk?bk(e,r):jk(e,r))&&(d=Md(d,"onBeforeInput"),0<d.length&&(u=new P0("onBeforeInput","beforeinput",null,r,u),h.push({event:u,listeners:d}),u.data=S))}aw(h,t)})}function il(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Md(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Zo(e,r),i!=null&&n.unshift(il(e,i,a)),i=Zo(e,t),i!=null&&n.push(il(e,i,a))),e=e.return}return n}function za(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function q0(e,t,r,n,a){for(var i=t._reactName,o=[];r!==null&&r!==n;){var c=r,l=c.alternate,d=c.stateNode;if(l!==null&&l===n)break;c.tag===5&&d!==null&&(c=d,a?(l=Zo(r,i),l!=null&&o.unshift(il(r,l,c))):a||(l=Zo(r,i),l!=null&&o.push(il(r,l,c)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var Pk=/\r\n?/g,Lk=/\u0000|\uFFFD/g;function G0(e){return(typeof e=="string"?e:""+e).replace(Pk,`
`).replace(Lk,"")}function Cc(e,t,r){if(t=G0(t),G0(e)!==t&&r)throw Error(ee(425))}function Od(){}var bm=null,jm=null;function wm(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Nm=typeof setTimeout=="function"?setTimeout:void 0,Ik=typeof clearTimeout=="function"?clearTimeout:void 0,K0=typeof Promise=="function"?Promise:void 0,$k=typeof queueMicrotask=="function"?queueMicrotask:typeof K0<"u"?function(e){return K0.resolve(null).then(e).catch(Fk)}:Nm;function Fk(e){setTimeout(function(){throw e})}function af(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),rl(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);rl(t)}function Ln(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Q0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Pi=Math.random().toString(36).slice(2),ks="__reactFiber$"+Pi,ol="__reactProps$"+Pi,on="__reactContainer$"+Pi,Cm="__reactEvents$"+Pi,Bk="__reactListeners$"+Pi,zk="__reactHandles$"+Pi;function da(e){var t=e[ks];if(t)return t;for(var r=e.parentNode;r;){if(t=r[on]||r[ks]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Q0(e);e!==null;){if(r=e[ks])return r;e=Q0(e)}return t}e=r,r=e.parentNode}return null}function zl(e){return e=e[ks]||e[on],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Qa(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ee(33))}function Du(e){return e[ol]||null}var Sm=[],Xa=-1;function Qn(e){return{current:e}}function et(e){0>Xa||(e.current=Sm[Xa],Sm[Xa]=null,Xa--)}function Ge(e,t){Xa++,Sm[Xa]=e.current,e.current=t}var Wn={},Gt=Qn(Wn),hr=Qn(!1),wa=Wn;function xi(e,t){var r=e.type.contextTypes;if(!r)return Wn;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function fr(e){return e=e.childContextTypes,e!=null}function Rd(){et(hr),et(Gt)}function X0(e,t,r){if(Gt.current!==Wn)throw Error(ee(168));Ge(Gt,t),Ge(hr,r)}function ow(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(ee(108,SE(e)||"Unknown",a));return dt({},r,n)}function Pd(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Wn,wa=Gt.current,Ge(Gt,e),Ge(hr,hr.current),!0}function J0(e,t,r){var n=e.stateNode;if(!n)throw Error(ee(169));r?(e=ow(e,t,wa),n.__reactInternalMemoizedMergedChildContext=e,et(hr),et(Gt),Ge(Gt,e)):et(hr),Ge(hr,r)}var Xs=null,Au=!1,of=!1;function lw(e){Xs===null?Xs=[e]:Xs.push(e)}function Uk(e){Au=!0,lw(e)}function Xn(){if(!of&&Xs!==null){of=!0;var e=0,t=Ve;try{var r=Xs;for(Ve=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Xs=null,Au=!1}catch(a){throw Xs!==null&&(Xs=Xs.slice(e+1)),Oj(Qp,Xn),a}finally{Ve=t,of=!1}}return null}var Ja=[],Za=0,Ld=null,Id=0,Fr=[],Br=0,Na=null,Js=1,Zs="";function ia(e,t){Ja[Za++]=Id,Ja[Za++]=Ld,Ld=e,Id=t}function cw(e,t,r){Fr[Br++]=Js,Fr[Br++]=Zs,Fr[Br++]=Na,Na=e;var n=Js;e=Zs;var a=32-hs(n)-1;n&=~(1<<a),r+=1;var i=32-hs(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,Js=1<<32-hs(t)+a|r<<a|n,Zs=i+e}else Js=1<<i|r<<a|n,Zs=e}function ag(e){e.return!==null&&(ia(e,1),cw(e,1,0))}function ig(e){for(;e===Ld;)Ld=Ja[--Za],Ja[Za]=null,Id=Ja[--Za],Ja[Za]=null;for(;e===Na;)Na=Fr[--Br],Fr[Br]=null,Zs=Fr[--Br],Fr[Br]=null,Js=Fr[--Br],Fr[Br]=null}var Cr=null,Nr=null,it=!1,cs=null;function dw(e,t){var r=Wr(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Z0(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Cr=e,Nr=Ln(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Cr=e,Nr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Na!==null?{id:Js,overflow:Zs}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Wr(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Cr=e,Nr=null,!0):!1;default:return!1}}function Em(e){return(e.mode&1)!==0&&(e.flags&128)===0}function km(e){if(it){var t=Nr;if(t){var r=t;if(!Z0(e,t)){if(Em(e))throw Error(ee(418));t=Ln(r.nextSibling);var n=Cr;t&&Z0(e,t)?dw(n,r):(e.flags=e.flags&-4097|2,it=!1,Cr=e)}}else{if(Em(e))throw Error(ee(418));e.flags=e.flags&-4097|2,it=!1,Cr=e}}}function ev(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Cr=e}function Sc(e){if(e!==Cr)return!1;if(!it)return ev(e),it=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!wm(e.type,e.memoizedProps)),t&&(t=Nr)){if(Em(e))throw uw(),Error(ee(418));for(;t;)dw(e,t),t=Ln(t.nextSibling)}if(ev(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ee(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Nr=Ln(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Nr=null}}else Nr=Cr?Ln(e.stateNode.nextSibling):null;return!0}function uw(){for(var e=Nr;e;)e=Ln(e.nextSibling)}function vi(){Nr=Cr=null,it=!1}function og(e){cs===null?cs=[e]:cs.push(e)}var Vk=fn.ReactCurrentBatchConfig;function go(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ee(309));var n=r.stateNode}if(!n)throw Error(ee(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var c=a.refs;o===null?delete c[i]:c[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(ee(284));if(!r._owner)throw Error(ee(290,e))}return e}function Ec(e,t){throw e=Object.prototype.toString.call(t),Error(ee(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function tv(e){var t=e._init;return t(e._payload)}function hw(e){function t(p,m){if(e){var j=p.deletions;j===null?(p.deletions=[m],p.flags|=16):j.push(m)}}function r(p,m){if(!e)return null;for(;m!==null;)t(p,m),m=m.sibling;return null}function n(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function a(p,m){return p=Bn(p,m),p.index=0,p.sibling=null,p}function i(p,m,j){return p.index=j,e?(j=p.alternate,j!==null?(j=j.index,j<m?(p.flags|=2,m):j):(p.flags|=2,m)):(p.flags|=1048576,m)}function o(p){return e&&p.alternate===null&&(p.flags|=2),p}function c(p,m,j,w){return m===null||m.tag!==6?(m=mf(j,p.mode,w),m.return=p,m):(m=a(m,j),m.return=p,m)}function l(p,m,j,w){var N=j.type;return N===Ya?u(p,m,j.props.children,w,j.key):m!==null&&(m.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===wn&&tv(N)===m.type)?(w=a(m,j.props),w.ref=go(p,m,j),w.return=p,w):(w=ad(j.type,j.key,j.props,null,p.mode,w),w.ref=go(p,m,j),w.return=p,w)}function d(p,m,j,w){return m===null||m.tag!==4||m.stateNode.containerInfo!==j.containerInfo||m.stateNode.implementation!==j.implementation?(m=pf(j,p.mode,w),m.return=p,m):(m=a(m,j.children||[]),m.return=p,m)}function u(p,m,j,w,N){return m===null||m.tag!==7?(m=xa(j,p.mode,w,N),m.return=p,m):(m=a(m,j),m.return=p,m)}function h(p,m,j){if(typeof m=="string"&&m!==""||typeof m=="number")return m=mf(""+m,p.mode,j),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case pc:return j=ad(m.type,m.key,m.props,null,p.mode,j),j.ref=go(p,null,m),j.return=p,j;case Wa:return m=pf(m,p.mode,j),m.return=p,m;case wn:var w=m._init;return h(p,w(m._payload),j)}if(ko(m)||uo(m))return m=xa(m,p.mode,j,null),m.return=p,m;Ec(p,m)}return null}function f(p,m,j,w){var N=m!==null?m.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return N!==null?null:c(p,m,""+j,w);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case pc:return j.key===N?l(p,m,j,w):null;case Wa:return j.key===N?d(p,m,j,w):null;case wn:return N=j._init,f(p,m,N(j._payload),w)}if(ko(j)||uo(j))return N!==null?null:u(p,m,j,w,null);Ec(p,j)}return null}function x(p,m,j,w,N){if(typeof w=="string"&&w!==""||typeof w=="number")return p=p.get(j)||null,c(m,p,""+w,N);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case pc:return p=p.get(w.key===null?j:w.key)||null,l(m,p,w,N);case Wa:return p=p.get(w.key===null?j:w.key)||null,d(m,p,w,N);case wn:var C=w._init;return x(p,m,j,C(w._payload),N)}if(ko(w)||uo(w))return p=p.get(j)||null,u(m,p,w,N,null);Ec(m,w)}return null}function v(p,m,j,w){for(var N=null,C=null,S=m,E=m=0,k=null;S!==null&&E<j.length;E++){S.index>E?(k=S,S=null):k=S.sibling;var T=f(p,S,j[E],w);if(T===null){S===null&&(S=k);break}e&&S&&T.alternate===null&&t(p,S),m=i(T,m,E),C===null?N=T:C.sibling=T,C=T,S=k}if(E===j.length)return r(p,S),it&&ia(p,E),N;if(S===null){for(;E<j.length;E++)S=h(p,j[E],w),S!==null&&(m=i(S,m,E),C===null?N=S:C.sibling=S,C=S);return it&&ia(p,E),N}for(S=n(p,S);E<j.length;E++)k=x(S,p,E,j[E],w),k!==null&&(e&&k.alternate!==null&&S.delete(k.key===null?E:k.key),m=i(k,m,E),C===null?N=k:C.sibling=k,C=k);return e&&S.forEach(function(D){return t(p,D)}),it&&ia(p,E),N}function y(p,m,j,w){var N=uo(j);if(typeof N!="function")throw Error(ee(150));if(j=N.call(j),j==null)throw Error(ee(151));for(var C=N=null,S=m,E=m=0,k=null,T=j.next();S!==null&&!T.done;E++,T=j.next()){S.index>E?(k=S,S=null):k=S.sibling;var D=f(p,S,T.value,w);if(D===null){S===null&&(S=k);break}e&&S&&D.alternate===null&&t(p,S),m=i(D,m,E),C===null?N=D:C.sibling=D,C=D,S=k}if(T.done)return r(p,S),it&&ia(p,E),N;if(S===null){for(;!T.done;E++,T=j.next())T=h(p,T.value,w),T!==null&&(m=i(T,m,E),C===null?N=T:C.sibling=T,C=T);return it&&ia(p,E),N}for(S=n(p,S);!T.done;E++,T=j.next())T=x(S,p,E,T.value,w),T!==null&&(e&&T.alternate!==null&&S.delete(T.key===null?E:T.key),m=i(T,m,E),C===null?N=T:C.sibling=T,C=T);return e&&S.forEach(function($){return t(p,$)}),it&&ia(p,E),N}function b(p,m,j,w){if(typeof j=="object"&&j!==null&&j.type===Ya&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case pc:e:{for(var N=j.key,C=m;C!==null;){if(C.key===N){if(N=j.type,N===Ya){if(C.tag===7){r(p,C.sibling),m=a(C,j.props.children),m.return=p,p=m;break e}}else if(C.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===wn&&tv(N)===C.type){r(p,C.sibling),m=a(C,j.props),m.ref=go(p,C,j),m.return=p,p=m;break e}r(p,C);break}else t(p,C);C=C.sibling}j.type===Ya?(m=xa(j.props.children,p.mode,w,j.key),m.return=p,p=m):(w=ad(j.type,j.key,j.props,null,p.mode,w),w.ref=go(p,m,j),w.return=p,p=w)}return o(p);case Wa:e:{for(C=j.key;m!==null;){if(m.key===C)if(m.tag===4&&m.stateNode.containerInfo===j.containerInfo&&m.stateNode.implementation===j.implementation){r(p,m.sibling),m=a(m,j.children||[]),m.return=p,p=m;break e}else{r(p,m);break}else t(p,m);m=m.sibling}m=pf(j,p.mode,w),m.return=p,p=m}return o(p);case wn:return C=j._init,b(p,m,C(j._payload),w)}if(ko(j))return v(p,m,j,w);if(uo(j))return y(p,m,j,w);Ec(p,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,m!==null&&m.tag===6?(r(p,m.sibling),m=a(m,j),m.return=p,p=m):(r(p,m),m=mf(j,p.mode,w),m.return=p,p=m),o(p)):r(p,m)}return b}var yi=hw(!0),fw=hw(!1),$d=Qn(null),Fd=null,ei=null,lg=null;function cg(){lg=ei=Fd=null}function dg(e){var t=$d.current;et($d),e._currentValue=t}function Dm(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function ci(e,t){Fd=e,lg=ei=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ur=!0),e.firstContext=null)}function qr(e){var t=e._currentValue;if(lg!==e)if(e={context:e,memoizedValue:t,next:null},ei===null){if(Fd===null)throw Error(ee(308));ei=e,Fd.dependencies={lanes:0,firstContext:e}}else ei=ei.next=e;return t}var ua=null;function ug(e){ua===null?ua=[e]:ua.push(e)}function mw(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,ug(t)):(r.next=a.next,a.next=r),t.interleaved=r,ln(e,n)}function ln(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Nn=!1;function hg(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pw(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function rn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function In(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Re&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,ln(e,r)}return a=n.interleaved,a===null?(t.next=t,ug(n)):(t.next=a.next,a.next=t),n.interleaved=t,ln(e,r)}function Zc(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Xp(e,r)}}function rv(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Bd(e,t,r,n){var a=e.updateQueue;Nn=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,c=a.shared.pending;if(c!==null){a.shared.pending=null;var l=c,d=l.next;l.next=null,o===null?i=d:o.next=d,o=l;var u=e.alternate;u!==null&&(u=u.updateQueue,c=u.lastBaseUpdate,c!==o&&(c===null?u.firstBaseUpdate=d:c.next=d,u.lastBaseUpdate=l))}if(i!==null){var h=a.baseState;o=0,u=d=l=null,c=i;do{var f=c.lane,x=c.eventTime;if((n&f)===f){u!==null&&(u=u.next={eventTime:x,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var v=e,y=c;switch(f=t,x=r,y.tag){case 1:if(v=y.payload,typeof v=="function"){h=v.call(x,h,f);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,f=typeof v=="function"?v.call(x,h,f):v,f==null)break e;h=dt({},h,f);break e;case 2:Nn=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,f=a.effects,f===null?a.effects=[c]:f.push(c))}else x={eventTime:x,lane:f,tag:c.tag,payload:c.payload,callback:c.callback,next:null},u===null?(d=u=x,l=h):u=u.next=x,o|=f;if(c=c.next,c===null){if(c=a.shared.pending,c===null)break;f=c,c=f.next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}while(!0);if(u===null&&(l=h),a.baseState=l,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Sa|=o,e.lanes=o,e.memoizedState=h}}function sv(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(ee(191,a));a.call(n)}}}var Ul={},Ms=Qn(Ul),ll=Qn(Ul),cl=Qn(Ul);function ha(e){if(e===Ul)throw Error(ee(174));return e}function fg(e,t){switch(Ge(cl,t),Ge(ll,e),Ge(Ms,Ul),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:lm(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=lm(t,e)}et(Ms),Ge(Ms,t)}function bi(){et(Ms),et(ll),et(cl)}function gw(e){ha(cl.current);var t=ha(Ms.current),r=lm(t,e.type);t!==r&&(Ge(ll,e),Ge(Ms,r))}function mg(e){ll.current===e&&(et(Ms),et(ll))}var lt=Qn(0);function zd(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var lf=[];function pg(){for(var e=0;e<lf.length;e++)lf[e]._workInProgressVersionPrimary=null;lf.length=0}var ed=fn.ReactCurrentDispatcher,cf=fn.ReactCurrentBatchConfig,Ca=0,ct=null,St=null,Mt=null,Ud=!1,$o=!1,dl=0,Hk=0;function Ut(){throw Error(ee(321))}function gg(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!ms(e[r],t[r]))return!1;return!0}function xg(e,t,r,n,a,i){if(Ca=i,ct=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ed.current=e===null||e.memoizedState===null?Gk:Kk,e=r(n,a),$o){i=0;do{if($o=!1,dl=0,25<=i)throw Error(ee(301));i+=1,Mt=St=null,t.updateQueue=null,ed.current=Qk,e=r(n,a)}while($o)}if(ed.current=Vd,t=St!==null&&St.next!==null,Ca=0,Mt=St=ct=null,Ud=!1,t)throw Error(ee(300));return e}function vg(){var e=dl!==0;return dl=0,e}function Ss(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mt===null?ct.memoizedState=Mt=e:Mt=Mt.next=e,Mt}function Gr(){if(St===null){var e=ct.alternate;e=e!==null?e.memoizedState:null}else e=St.next;var t=Mt===null?ct.memoizedState:Mt.next;if(t!==null)Mt=t,St=e;else{if(e===null)throw Error(ee(310));St=e,e={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},Mt===null?ct.memoizedState=Mt=e:Mt=Mt.next=e}return Mt}function ul(e,t){return typeof t=="function"?t(e):t}function df(e){var t=Gr(),r=t.queue;if(r===null)throw Error(ee(311));r.lastRenderedReducer=e;var n=St,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var c=o=null,l=null,d=i;do{var u=d.lane;if((Ca&u)===u)l!==null&&(l=l.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};l===null?(c=l=h,o=n):l=l.next=h,ct.lanes|=u,Sa|=u}d=d.next}while(d!==null&&d!==i);l===null?o=n:l.next=c,ms(n,t.memoizedState)||(ur=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=l,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,ct.lanes|=i,Sa|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function uf(e){var t=Gr(),r=t.queue;if(r===null)throw Error(ee(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);ms(i,t.memoizedState)||(ur=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function xw(){}function vw(e,t){var r=ct,n=Gr(),a=t(),i=!ms(n.memoizedState,a);if(i&&(n.memoizedState=a,ur=!0),n=n.queue,yg(jw.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Mt!==null&&Mt.memoizedState.tag&1){if(r.flags|=2048,hl(9,bw.bind(null,r,n,a,t),void 0,null),Rt===null)throw Error(ee(349));Ca&30||yw(r,t,a)}return a}function yw(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ct.updateQueue,t===null?(t={lastEffect:null,stores:null},ct.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function bw(e,t,r,n){t.value=r,t.getSnapshot=n,ww(t)&&Nw(e)}function jw(e,t,r){return r(function(){ww(t)&&Nw(e)})}function ww(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ms(e,r)}catch{return!0}}function Nw(e){var t=ln(e,1);t!==null&&fs(t,e,1,-1)}function nv(e){var t=Ss();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ul,lastRenderedState:e},t.queue=e,e=e.dispatch=qk.bind(null,ct,e),[t.memoizedState,e]}function hl(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=ct.updateQueue,t===null?(t={lastEffect:null,stores:null},ct.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Cw(){return Gr().memoizedState}function td(e,t,r,n){var a=Ss();ct.flags|=e,a.memoizedState=hl(1|t,r,void 0,n===void 0?null:n)}function Tu(e,t,r,n){var a=Gr();n=n===void 0?null:n;var i=void 0;if(St!==null){var o=St.memoizedState;if(i=o.destroy,n!==null&&gg(n,o.deps)){a.memoizedState=hl(t,r,i,n);return}}ct.flags|=e,a.memoizedState=hl(1|t,r,i,n)}function av(e,t){return td(8390656,8,e,t)}function yg(e,t){return Tu(2048,8,e,t)}function Sw(e,t){return Tu(4,2,e,t)}function Ew(e,t){return Tu(4,4,e,t)}function kw(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Dw(e,t,r){return r=r!=null?r.concat([e]):null,Tu(4,4,kw.bind(null,t,e),r)}function bg(){}function Aw(e,t){var r=Gr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&gg(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Tw(e,t){var r=Gr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&gg(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function _w(e,t,r){return Ca&21?(ms(r,t)||(r=Lj(),ct.lanes|=r,Sa|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ur=!0),e.memoizedState=r)}function Wk(e,t){var r=Ve;Ve=r!==0&&4>r?r:4,e(!0);var n=cf.transition;cf.transition={};try{e(!1),t()}finally{Ve=r,cf.transition=n}}function Mw(){return Gr().memoizedState}function Yk(e,t,r){var n=Fn(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Ow(e))Rw(t,r);else if(r=mw(e,t,r,n),r!==null){var a=sr();fs(r,e,n,a),Pw(r,t,n)}}function qk(e,t,r){var n=Fn(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ow(e))Rw(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,c=i(o,r);if(a.hasEagerState=!0,a.eagerState=c,ms(c,o)){var l=t.interleaved;l===null?(a.next=a,ug(t)):(a.next=l.next,l.next=a),t.interleaved=a;return}}catch{}finally{}r=mw(e,t,a,n),r!==null&&(a=sr(),fs(r,e,n,a),Pw(r,t,n))}}function Ow(e){var t=e.alternate;return e===ct||t!==null&&t===ct}function Rw(e,t){$o=Ud=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Pw(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Xp(e,r)}}var Vd={readContext:qr,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useInsertionEffect:Ut,useLayoutEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useMutableSource:Ut,useSyncExternalStore:Ut,useId:Ut,unstable_isNewReconciler:!1},Gk={readContext:qr,useCallback:function(e,t){return Ss().memoizedState=[e,t===void 0?null:t],e},useContext:qr,useEffect:av,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,td(4194308,4,kw.bind(null,t,e),r)},useLayoutEffect:function(e,t){return td(4194308,4,e,t)},useInsertionEffect:function(e,t){return td(4,2,e,t)},useMemo:function(e,t){var r=Ss();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Ss();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Yk.bind(null,ct,e),[n.memoizedState,e]},useRef:function(e){var t=Ss();return e={current:e},t.memoizedState=e},useState:nv,useDebugValue:bg,useDeferredValue:function(e){return Ss().memoizedState=e},useTransition:function(){var e=nv(!1),t=e[0];return e=Wk.bind(null,e[1]),Ss().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ct,a=Ss();if(it){if(r===void 0)throw Error(ee(407));r=r()}else{if(r=t(),Rt===null)throw Error(ee(349));Ca&30||yw(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,av(jw.bind(null,n,i,e),[e]),n.flags|=2048,hl(9,bw.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=Ss(),t=Rt.identifierPrefix;if(it){var r=Zs,n=Js;r=(n&~(1<<32-hs(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=dl++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Hk++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Kk={readContext:qr,useCallback:Aw,useContext:qr,useEffect:yg,useImperativeHandle:Dw,useInsertionEffect:Sw,useLayoutEffect:Ew,useMemo:Tw,useReducer:df,useRef:Cw,useState:function(){return df(ul)},useDebugValue:bg,useDeferredValue:function(e){var t=Gr();return _w(t,St.memoizedState,e)},useTransition:function(){var e=df(ul)[0],t=Gr().memoizedState;return[e,t]},useMutableSource:xw,useSyncExternalStore:vw,useId:Mw,unstable_isNewReconciler:!1},Qk={readContext:qr,useCallback:Aw,useContext:qr,useEffect:yg,useImperativeHandle:Dw,useInsertionEffect:Sw,useLayoutEffect:Ew,useMemo:Tw,useReducer:uf,useRef:Cw,useState:function(){return uf(ul)},useDebugValue:bg,useDeferredValue:function(e){var t=Gr();return St===null?t.memoizedState=e:_w(t,St.memoizedState,e)},useTransition:function(){var e=uf(ul)[0],t=Gr().memoizedState;return[e,t]},useMutableSource:xw,useSyncExternalStore:vw,useId:Mw,unstable_isNewReconciler:!1};function is(e,t){if(e&&e.defaultProps){t=dt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Am(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:dt({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var _u={isMounted:function(e){return(e=e._reactInternals)?Ia(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=sr(),a=Fn(e),i=rn(n,a);i.payload=t,r!=null&&(i.callback=r),t=In(e,i,a),t!==null&&(fs(t,e,a,n),Zc(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=sr(),a=Fn(e),i=rn(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=In(e,i,a),t!==null&&(fs(t,e,a,n),Zc(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=sr(),n=Fn(e),a=rn(r,n);a.tag=2,t!=null&&(a.callback=t),t=In(e,a,n),t!==null&&(fs(t,e,n,r),Zc(t,e,n))}};function iv(e,t,r,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!nl(r,n)||!nl(a,i):!0}function Lw(e,t,r){var n=!1,a=Wn,i=t.contextType;return typeof i=="object"&&i!==null?i=qr(i):(a=fr(t)?wa:Gt.current,n=t.contextTypes,i=(n=n!=null)?xi(e,a):Wn),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=_u,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function ov(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&_u.enqueueReplaceState(t,t.state,null)}function Tm(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},hg(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=qr(i):(i=fr(t)?wa:Gt.current,a.context=xi(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Am(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&_u.enqueueReplaceState(a,a.state,null),Bd(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function ji(e,t){try{var r="",n=t;do r+=CE(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function hf(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function _m(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Xk=typeof WeakMap=="function"?WeakMap:Map;function Iw(e,t,r){r=rn(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Wd||(Wd=!0,zm=n),_m(e,t)},r}function $w(e,t,r){r=rn(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){_m(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){_m(e,t),typeof n!="function"&&($n===null?$n=new Set([this]):$n.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function lv(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Xk;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=u4.bind(null,e,t,r),t.then(e,e))}function cv(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function dv(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=rn(-1,1),t.tag=2,In(r,t,1))),r.lanes|=1),e)}var Jk=fn.ReactCurrentOwner,ur=!1;function tr(e,t,r,n){t.child=e===null?fw(t,null,r,n):yi(t,e.child,r,n)}function uv(e,t,r,n,a){r=r.render;var i=t.ref;return ci(t,a),n=xg(e,t,r,n,i,a),r=vg(),e!==null&&!ur?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,cn(e,t,a)):(it&&r&&ag(t),t.flags|=1,tr(e,t,n,a),t.child)}function hv(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!Dg(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,Fw(e,t,i,n,a)):(e=ad(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:nl,r(o,n)&&e.ref===t.ref)return cn(e,t,a)}return t.flags|=1,e=Bn(i,n),e.ref=t.ref,e.return=t,t.child=e}function Fw(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(nl(i,n)&&e.ref===t.ref)if(ur=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(ur=!0);else return t.lanes=e.lanes,cn(e,t,a)}return Mm(e,t,r,n,a)}function Bw(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ge(ri,wr),wr|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ge(ri,wr),wr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Ge(ri,wr),wr|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,Ge(ri,wr),wr|=n;return tr(e,t,a,r),t.child}function zw(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Mm(e,t,r,n,a){var i=fr(r)?wa:Gt.current;return i=xi(t,i),ci(t,a),r=xg(e,t,r,n,i,a),n=vg(),e!==null&&!ur?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,cn(e,t,a)):(it&&n&&ag(t),t.flags|=1,tr(e,t,r,a),t.child)}function fv(e,t,r,n,a){if(fr(r)){var i=!0;Pd(t)}else i=!1;if(ci(t,a),t.stateNode===null)rd(e,t),Lw(t,r,n),Tm(t,r,n,a),n=!0;else if(e===null){var o=t.stateNode,c=t.memoizedProps;o.props=c;var l=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=qr(d):(d=fr(r)?wa:Gt.current,d=xi(t,d));var u=r.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==n||l!==d)&&ov(t,o,n,d),Nn=!1;var f=t.memoizedState;o.state=f,Bd(t,n,o,a),l=t.memoizedState,c!==n||f!==l||hr.current||Nn?(typeof u=="function"&&(Am(t,r,u,n),l=t.memoizedState),(c=Nn||iv(t,r,c,n,f,l,d))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),o.props=n,o.state=l,o.context=d,n=c):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,pw(e,t),c=t.memoizedProps,d=t.type===t.elementType?c:is(t.type,c),o.props=d,h=t.pendingProps,f=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=qr(l):(l=fr(r)?wa:Gt.current,l=xi(t,l));var x=r.getDerivedStateFromProps;(u=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==h||f!==l)&&ov(t,o,n,l),Nn=!1,f=t.memoizedState,o.state=f,Bd(t,n,o,a);var v=t.memoizedState;c!==h||f!==v||hr.current||Nn?(typeof x=="function"&&(Am(t,r,x,n),v=t.memoizedState),(d=Nn||iv(t,r,d,n,f,v,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,v,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=v),o.props=n,o.state=v,o.context=l,n=d):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return Om(e,t,r,n,i,a)}function Om(e,t,r,n,a,i){zw(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&J0(t,r,!1),cn(e,t,i);n=t.stateNode,Jk.current=t;var c=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=yi(t,e.child,null,i),t.child=yi(t,null,c,i)):tr(e,t,c,i),t.memoizedState=n.state,a&&J0(t,r,!0),t.child}function Uw(e){var t=e.stateNode;t.pendingContext?X0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&X0(e,t.context,!1),fg(e,t.containerInfo)}function mv(e,t,r,n,a){return vi(),og(a),t.flags|=256,tr(e,t,r,n),t.child}var Rm={dehydrated:null,treeContext:null,retryLane:0};function Pm(e){return{baseLanes:e,cachePool:null,transitions:null}}function Vw(e,t,r){var n=t.pendingProps,a=lt.current,i=!1,o=(t.flags&128)!==0,c;if((c=o)||(c=e!==null&&e.memoizedState===null?!1:(a&2)!==0),c?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Ge(lt,a&1),e===null)return km(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Ru(o,n,0,null),e=xa(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Pm(r),t.memoizedState=Rm,e):jg(t,o));if(a=e.memoizedState,a!==null&&(c=a.dehydrated,c!==null))return Zk(e,t,o,n,c,a,r);if(i){i=n.fallback,o=t.mode,a=e.child,c=a.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=Bn(a,l),n.subtreeFlags=a.subtreeFlags&14680064),c!==null?i=Bn(c,i):(i=xa(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?Pm(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=Rm,n}return i=e.child,e=i.sibling,n=Bn(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function jg(e,t){return t=Ru({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function kc(e,t,r,n){return n!==null&&og(n),yi(t,e.child,null,r),e=jg(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Zk(e,t,r,n,a,i,o){if(r)return t.flags&256?(t.flags&=-257,n=hf(Error(ee(422))),kc(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=Ru({mode:"visible",children:n.children},a,0,null),i=xa(i,a,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&yi(t,e.child,null,o),t.child.memoizedState=Pm(o),t.memoizedState=Rm,i);if(!(t.mode&1))return kc(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var c=n.dgst;return n=c,i=Error(ee(419)),n=hf(i,n,void 0),kc(e,t,o,n)}if(c=(o&e.childLanes)!==0,ur||c){if(n=Rt,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,ln(e,a),fs(n,e,a,-1))}return kg(),n=hf(Error(ee(421))),kc(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=h4.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Nr=Ln(a.nextSibling),Cr=t,it=!0,cs=null,e!==null&&(Fr[Br++]=Js,Fr[Br++]=Zs,Fr[Br++]=Na,Js=e.id,Zs=e.overflow,Na=t),t=jg(t,n.children),t.flags|=4096,t)}function pv(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Dm(e.return,t,r)}function ff(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function Hw(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(tr(e,t,n.children,r),n=lt.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&pv(e,r,t);else if(e.tag===19)pv(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ge(lt,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&zd(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),ff(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&zd(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}ff(t,!0,r,null,i);break;case"together":ff(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function rd(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function cn(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Sa|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ee(153));if(t.child!==null){for(e=t.child,r=Bn(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Bn(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function e4(e,t,r){switch(t.tag){case 3:Uw(t),vi();break;case 5:gw(t);break;case 1:fr(t.type)&&Pd(t);break;case 4:fg(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;Ge($d,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Ge(lt,lt.current&1),t.flags|=128,null):r&t.child.childLanes?Vw(e,t,r):(Ge(lt,lt.current&1),e=cn(e,t,r),e!==null?e.sibling:null);Ge(lt,lt.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Hw(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ge(lt,lt.current),n)break;return null;case 22:case 23:return t.lanes=0,Bw(e,t,r)}return cn(e,t,r)}var Ww,Lm,Yw,qw;Ww=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Lm=function(){};Yw=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,ha(Ms.current);var i=null;switch(r){case"input":a=nm(e,a),n=nm(e,n),i=[];break;case"select":a=dt({},a,{value:void 0}),n=dt({},n,{value:void 0}),i=[];break;case"textarea":a=om(e,a),n=om(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Od)}cm(r,n);var o;r=null;for(d in a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var c=a[d];for(o in c)c.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Xo.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var l=n[d];if(c=a!=null?a[d]:void 0,n.hasOwnProperty(d)&&l!==c&&(l!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(i||(i=[]),i.push(d,r)),r=l;else d==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,c=c?c.__html:void 0,l!=null&&c!==l&&(i=i||[]).push(d,l)):d==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(d,""+l):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Xo.hasOwnProperty(d)?(l!=null&&d==="onScroll"&&Xe("scroll",e),i||c===l||(i=[])):(i=i||[]).push(d,l))}r&&(i=i||[]).push("style",r);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};qw=function(e,t,r,n){r!==n&&(t.flags|=4)};function xo(e,t){if(!it)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Vt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function t4(e,t,r){var n=t.pendingProps;switch(ig(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(t),null;case 1:return fr(t.type)&&Rd(),Vt(t),null;case 3:return n=t.stateNode,bi(),et(hr),et(Gt),pg(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Sc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,cs!==null&&(Hm(cs),cs=null))),Lm(e,t),Vt(t),null;case 5:mg(t);var a=ha(cl.current);if(r=t.type,e!==null&&t.stateNode!=null)Yw(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(ee(166));return Vt(t),null}if(e=ha(Ms.current),Sc(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[ks]=t,n[ol]=i,e=(t.mode&1)!==0,r){case"dialog":Xe("cancel",n),Xe("close",n);break;case"iframe":case"object":case"embed":Xe("load",n);break;case"video":case"audio":for(a=0;a<Ao.length;a++)Xe(Ao[a],n);break;case"source":Xe("error",n);break;case"img":case"image":case"link":Xe("error",n),Xe("load",n);break;case"details":Xe("toggle",n);break;case"input":C0(n,i),Xe("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Xe("invalid",n);break;case"textarea":E0(n,i),Xe("invalid",n)}cm(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="children"?typeof c=="string"?n.textContent!==c&&(i.suppressHydrationWarning!==!0&&Cc(n.textContent,c,e),a=["children",c]):typeof c=="number"&&n.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&Cc(n.textContent,c,e),a=["children",""+c]):Xo.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&Xe("scroll",n)}switch(r){case"input":gc(n),S0(n,i,!0);break;case"textarea":gc(n),k0(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Od)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=jj(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[ks]=t,e[ol]=n,Ww(e,t,!1,!1),t.stateNode=e;e:{switch(o=dm(r,n),r){case"dialog":Xe("cancel",e),Xe("close",e),a=n;break;case"iframe":case"object":case"embed":Xe("load",e),a=n;break;case"video":case"audio":for(a=0;a<Ao.length;a++)Xe(Ao[a],e);a=n;break;case"source":Xe("error",e),a=n;break;case"img":case"image":case"link":Xe("error",e),Xe("load",e),a=n;break;case"details":Xe("toggle",e),a=n;break;case"input":C0(e,n),a=nm(e,n),Xe("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=dt({},n,{value:void 0}),Xe("invalid",e);break;case"textarea":E0(e,n),a=om(e,n),Xe("invalid",e);break;default:a=n}cm(r,a),c=a;for(i in c)if(c.hasOwnProperty(i)){var l=c[i];i==="style"?Cj(e,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&wj(e,l)):i==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Jo(e,l):typeof l=="number"&&Jo(e,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Xo.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Xe("scroll",e):l!=null&&Wp(e,i,l,o))}switch(r){case"input":gc(e),S0(e,n,!1);break;case"textarea":gc(e),k0(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Hn(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?ai(e,!!n.multiple,i,!1):n.defaultValue!=null&&ai(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Od)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Vt(t),null;case 6:if(e&&t.stateNode!=null)qw(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(ee(166));if(r=ha(cl.current),ha(Ms.current),Sc(t)){if(n=t.stateNode,r=t.memoizedProps,n[ks]=t,(i=n.nodeValue!==r)&&(e=Cr,e!==null))switch(e.tag){case 3:Cc(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Cc(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ks]=t,t.stateNode=n}return Vt(t),null;case 13:if(et(lt),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(it&&Nr!==null&&t.mode&1&&!(t.flags&128))uw(),vi(),t.flags|=98560,i=!1;else if(i=Sc(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(ee(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ee(317));i[ks]=t}else vi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Vt(t),i=!1}else cs!==null&&(Hm(cs),cs=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||lt.current&1?kt===0&&(kt=3):kg())),t.updateQueue!==null&&(t.flags|=4),Vt(t),null);case 4:return bi(),Lm(e,t),e===null&&al(t.stateNode.containerInfo),Vt(t),null;case 10:return dg(t.type._context),Vt(t),null;case 17:return fr(t.type)&&Rd(),Vt(t),null;case 19:if(et(lt),i=t.memoizedState,i===null)return Vt(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)xo(i,!1);else{if(kt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=zd(e),o!==null){for(t.flags|=128,xo(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ge(lt,lt.current&1|2),t.child}e=e.sibling}i.tail!==null&&xt()>wi&&(t.flags|=128,n=!0,xo(i,!1),t.lanes=4194304)}else{if(!n)if(e=zd(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),xo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!it)return Vt(t),null}else 2*xt()-i.renderingStartTime>wi&&r!==1073741824&&(t.flags|=128,n=!0,xo(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=xt(),t.sibling=null,r=lt.current,Ge(lt,n?r&1|2:r&1),t):(Vt(t),null);case 22:case 23:return Eg(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?wr&1073741824&&(Vt(t),t.subtreeFlags&6&&(t.flags|=8192)):Vt(t),null;case 24:return null;case 25:return null}throw Error(ee(156,t.tag))}function r4(e,t){switch(ig(t),t.tag){case 1:return fr(t.type)&&Rd(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return bi(),et(hr),et(Gt),pg(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return mg(t),null;case 13:if(et(lt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ee(340));vi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return et(lt),null;case 4:return bi(),null;case 10:return dg(t.type._context),null;case 22:case 23:return Eg(),null;case 24:return null;default:return null}}var Dc=!1,Wt=!1,s4=typeof WeakSet=="function"?WeakSet:Set,ce=null;function ti(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ft(e,t,n)}else r.current=null}function Im(e,t,r){try{r()}catch(n){ft(e,t,n)}}var gv=!1;function n4(e,t){if(bm=Td,e=Jj(),ng(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,c=-1,l=-1,d=0,u=0,h=e,f=null;t:for(;;){for(var x;h!==r||a!==0&&h.nodeType!==3||(c=o+a),h!==i||n!==0&&h.nodeType!==3||(l=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(x=h.firstChild)!==null;)f=h,h=x;for(;;){if(h===e)break t;if(f===r&&++d===a&&(c=o),f===i&&++u===n&&(l=o),(x=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=x}r=c===-1||l===-1?null:{start:c,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(jm={focusedElem:e,selectionRange:r},Td=!1,ce=t;ce!==null;)if(t=ce,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ce=e;else for(;ce!==null;){t=ce;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,b=v.memoizedState,p=t.stateNode,m=p.getSnapshotBeforeUpdate(t.elementType===t.type?y:is(t.type,y),b);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var j=t.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(w){ft(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,ce=e;break}ce=t.return}return v=gv,gv=!1,v}function Fo(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&Im(t,r,i)}a=a.next}while(a!==n)}}function Mu(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function $m(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Gw(e){var t=e.alternate;t!==null&&(e.alternate=null,Gw(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ks],delete t[ol],delete t[Cm],delete t[Bk],delete t[zk])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Kw(e){return e.tag===5||e.tag===3||e.tag===4}function xv(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Kw(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Fm(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Od));else if(n!==4&&(e=e.child,e!==null))for(Fm(e,t,r),e=e.sibling;e!==null;)Fm(e,t,r),e=e.sibling}function Bm(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Bm(e,t,r),e=e.sibling;e!==null;)Bm(e,t,r),e=e.sibling}var Lt=null,os=!1;function yn(e,t,r){for(r=r.child;r!==null;)Qw(e,t,r),r=r.sibling}function Qw(e,t,r){if(_s&&typeof _s.onCommitFiberUnmount=="function")try{_s.onCommitFiberUnmount(Cu,r)}catch{}switch(r.tag){case 5:Wt||ti(r,t);case 6:var n=Lt,a=os;Lt=null,yn(e,t,r),Lt=n,os=a,Lt!==null&&(os?(e=Lt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Lt.removeChild(r.stateNode));break;case 18:Lt!==null&&(os?(e=Lt,r=r.stateNode,e.nodeType===8?af(e.parentNode,r):e.nodeType===1&&af(e,r),rl(e)):af(Lt,r.stateNode));break;case 4:n=Lt,a=os,Lt=r.stateNode.containerInfo,os=!0,yn(e,t,r),Lt=n,os=a;break;case 0:case 11:case 14:case 15:if(!Wt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Im(r,t,o),a=a.next}while(a!==n)}yn(e,t,r);break;case 1:if(!Wt&&(ti(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(c){ft(r,t,c)}yn(e,t,r);break;case 21:yn(e,t,r);break;case 22:r.mode&1?(Wt=(n=Wt)||r.memoizedState!==null,yn(e,t,r),Wt=n):yn(e,t,r);break;default:yn(e,t,r)}}function vv(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new s4),t.forEach(function(n){var a=f4.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function ns(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,c=o;e:for(;c!==null;){switch(c.tag){case 5:Lt=c.stateNode,os=!1;break e;case 3:Lt=c.stateNode.containerInfo,os=!0;break e;case 4:Lt=c.stateNode.containerInfo,os=!0;break e}c=c.return}if(Lt===null)throw Error(ee(160));Qw(i,o,a),Lt=null,os=!1;var l=a.alternate;l!==null&&(l.return=null),a.return=null}catch(d){ft(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Xw(t,e),t=t.sibling}function Xw(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ns(t,e),Ns(e),n&4){try{Fo(3,e,e.return),Mu(3,e)}catch(y){ft(e,e.return,y)}try{Fo(5,e,e.return)}catch(y){ft(e,e.return,y)}}break;case 1:ns(t,e),Ns(e),n&512&&r!==null&&ti(r,r.return);break;case 5:if(ns(t,e),Ns(e),n&512&&r!==null&&ti(r,r.return),e.flags&32){var a=e.stateNode;try{Jo(a,"")}catch(y){ft(e,e.return,y)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,c=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&yj(a,i),dm(c,o);var d=dm(c,i);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?Cj(a,h):u==="dangerouslySetInnerHTML"?wj(a,h):u==="children"?Jo(a,h):Wp(a,u,h,d)}switch(c){case"input":am(a,i);break;case"textarea":bj(a,i);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?ai(a,!!i.multiple,x,!1):f!==!!i.multiple&&(i.defaultValue!=null?ai(a,!!i.multiple,i.defaultValue,!0):ai(a,!!i.multiple,i.multiple?[]:"",!1))}a[ol]=i}catch(y){ft(e,e.return,y)}}break;case 6:if(ns(t,e),Ns(e),n&4){if(e.stateNode===null)throw Error(ee(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(y){ft(e,e.return,y)}}break;case 3:if(ns(t,e),Ns(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{rl(t.containerInfo)}catch(y){ft(e,e.return,y)}break;case 4:ns(t,e),Ns(e);break;case 13:ns(t,e),Ns(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(Cg=xt())),n&4&&vv(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(Wt=(d=Wt)||u,ns(t,e),Wt=d):ns(t,e),Ns(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(ce=e,u=e.child;u!==null;){for(h=ce=u;ce!==null;){switch(f=ce,x=f.child,f.tag){case 0:case 11:case 14:case 15:Fo(4,f,f.return);break;case 1:ti(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){ft(n,r,y)}}break;case 5:ti(f,f.return);break;case 22:if(f.memoizedState!==null){bv(h);continue}}x!==null?(x.return=f,ce=x):bv(h)}u=u.sibling}e:for(u=null,h=e;;){if(h.tag===5){if(u===null){u=h;try{a=h.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,c.style.display=Nj("display",o))}catch(y){ft(e,e.return,y)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(y){ft(e,e.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ns(t,e),Ns(e),n&4&&vv(e);break;case 21:break;default:ns(t,e),Ns(e)}}function Ns(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Kw(r)){var n=r;break e}r=r.return}throw Error(ee(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Jo(a,""),n.flags&=-33);var i=xv(e);Bm(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,c=xv(e);Fm(e,c,o);break;default:throw Error(ee(161))}}catch(l){ft(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function a4(e,t,r){ce=e,Jw(e)}function Jw(e,t,r){for(var n=(e.mode&1)!==0;ce!==null;){var a=ce,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||Dc;if(!o){var c=a.alternate,l=c!==null&&c.memoizedState!==null||Wt;c=Dc;var d=Wt;if(Dc=o,(Wt=l)&&!d)for(ce=a;ce!==null;)o=ce,l=o.child,o.tag===22&&o.memoizedState!==null?jv(a):l!==null?(l.return=o,ce=l):jv(a);for(;i!==null;)ce=i,Jw(i),i=i.sibling;ce=a,Dc=c,Wt=d}yv(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,ce=i):yv(e)}}function yv(e){for(;ce!==null;){var t=ce;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Wt||Mu(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Wt)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:is(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&sv(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}sv(t,o,r)}break;case 5:var c=t.stateNode;if(r===null&&t.flags&4){r=c;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&rl(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}Wt||t.flags&512&&$m(t)}catch(f){ft(t,t.return,f)}}if(t===e){ce=null;break}if(r=t.sibling,r!==null){r.return=t.return,ce=r;break}ce=t.return}}function bv(e){for(;ce!==null;){var t=ce;if(t===e){ce=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ce=r;break}ce=t.return}}function jv(e){for(;ce!==null;){var t=ce;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Mu(4,t)}catch(l){ft(t,r,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(l){ft(t,a,l)}}var i=t.return;try{$m(t)}catch(l){ft(t,i,l)}break;case 5:var o=t.return;try{$m(t)}catch(l){ft(t,o,l)}}}catch(l){ft(t,t.return,l)}if(t===e){ce=null;break}var c=t.sibling;if(c!==null){c.return=t.return,ce=c;break}ce=t.return}}var i4=Math.ceil,Hd=fn.ReactCurrentDispatcher,wg=fn.ReactCurrentOwner,Yr=fn.ReactCurrentBatchConfig,Re=0,Rt=null,bt=null,$t=0,wr=0,ri=Qn(0),kt=0,fl=null,Sa=0,Ou=0,Ng=0,Bo=null,dr=null,Cg=0,wi=1/0,Ks=null,Wd=!1,zm=null,$n=null,Ac=!1,Dn=null,Yd=0,zo=0,Um=null,sd=-1,nd=0;function sr(){return Re&6?xt():sd!==-1?sd:sd=xt()}function Fn(e){return e.mode&1?Re&2&&$t!==0?$t&-$t:Vk.transition!==null?(nd===0&&(nd=Lj()),nd):(e=Ve,e!==0||(e=window.event,e=e===void 0?16:Vj(e.type)),e):1}function fs(e,t,r,n){if(50<zo)throw zo=0,Um=null,Error(ee(185));Fl(e,r,n),(!(Re&2)||e!==Rt)&&(e===Rt&&(!(Re&2)&&(Ou|=r),kt===4&&En(e,$t)),mr(e,n),r===1&&Re===0&&!(t.mode&1)&&(wi=xt()+500,Au&&Xn()))}function mr(e,t){var r=e.callbackNode;VE(e,t);var n=Ad(e,e===Rt?$t:0);if(n===0)r!==null&&T0(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&T0(r),t===1)e.tag===0?Uk(wv.bind(null,e)):lw(wv.bind(null,e)),$k(function(){!(Re&6)&&Xn()}),r=null;else{switch(Ij(n)){case 1:r=Qp;break;case 4:r=Rj;break;case 16:r=Dd;break;case 536870912:r=Pj;break;default:r=Dd}r=i1(r,Zw.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Zw(e,t){if(sd=-1,nd=0,Re&6)throw Error(ee(327));var r=e.callbackNode;if(di()&&e.callbackNode!==r)return null;var n=Ad(e,e===Rt?$t:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=qd(e,n);else{t=n;var a=Re;Re|=2;var i=t1();(Rt!==e||$t!==t)&&(Ks=null,wi=xt()+500,ga(e,t));do try{c4();break}catch(c){e1(e,c)}while(!0);cg(),Hd.current=i,Re=a,bt!==null?t=0:(Rt=null,$t=0,t=kt)}if(t!==0){if(t===2&&(a=pm(e),a!==0&&(n=a,t=Vm(e,a))),t===1)throw r=fl,ga(e,0),En(e,n),mr(e,xt()),r;if(t===6)En(e,n);else{if(a=e.current.alternate,!(n&30)&&!o4(a)&&(t=qd(e,n),t===2&&(i=pm(e),i!==0&&(n=i,t=Vm(e,i))),t===1))throw r=fl,ga(e,0),En(e,n),mr(e,xt()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(ee(345));case 2:oa(e,dr,Ks);break;case 3:if(En(e,n),(n&130023424)===n&&(t=Cg+500-xt(),10<t)){if(Ad(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){sr(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Nm(oa.bind(null,e,dr,Ks),t);break}oa(e,dr,Ks);break;case 4:if(En(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-hs(n);i=1<<o,o=t[o],o>a&&(a=o),n&=~i}if(n=a,n=xt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*i4(n/1960))-n,10<n){e.timeoutHandle=Nm(oa.bind(null,e,dr,Ks),n);break}oa(e,dr,Ks);break;case 5:oa(e,dr,Ks);break;default:throw Error(ee(329))}}}return mr(e,xt()),e.callbackNode===r?Zw.bind(null,e):null}function Vm(e,t){var r=Bo;return e.current.memoizedState.isDehydrated&&(ga(e,t).flags|=256),e=qd(e,t),e!==2&&(t=dr,dr=r,t!==null&&Hm(t)),e}function Hm(e){dr===null?dr=e:dr.push.apply(dr,e)}function o4(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!ms(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function En(e,t){for(t&=~Ng,t&=~Ou,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-hs(t),n=1<<r;e[r]=-1,t&=~n}}function wv(e){if(Re&6)throw Error(ee(327));di();var t=Ad(e,0);if(!(t&1))return mr(e,xt()),null;var r=qd(e,t);if(e.tag!==0&&r===2){var n=pm(e);n!==0&&(t=n,r=Vm(e,n))}if(r===1)throw r=fl,ga(e,0),En(e,t),mr(e,xt()),r;if(r===6)throw Error(ee(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,oa(e,dr,Ks),mr(e,xt()),null}function Sg(e,t){var r=Re;Re|=1;try{return e(t)}finally{Re=r,Re===0&&(wi=xt()+500,Au&&Xn())}}function Ea(e){Dn!==null&&Dn.tag===0&&!(Re&6)&&di();var t=Re;Re|=1;var r=Yr.transition,n=Ve;try{if(Yr.transition=null,Ve=1,e)return e()}finally{Ve=n,Yr.transition=r,Re=t,!(Re&6)&&Xn()}}function Eg(){wr=ri.current,et(ri)}function ga(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Ik(r)),bt!==null)for(r=bt.return;r!==null;){var n=r;switch(ig(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Rd();break;case 3:bi(),et(hr),et(Gt),pg();break;case 5:mg(n);break;case 4:bi();break;case 13:et(lt);break;case 19:et(lt);break;case 10:dg(n.type._context);break;case 22:case 23:Eg()}r=r.return}if(Rt=e,bt=e=Bn(e.current,null),$t=wr=t,kt=0,fl=null,Ng=Ou=Sa=0,dr=Bo=null,ua!==null){for(t=0;t<ua.length;t++)if(r=ua[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}ua=null}return e}function e1(e,t){do{var r=bt;try{if(cg(),ed.current=Vd,Ud){for(var n=ct.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Ud=!1}if(Ca=0,Mt=St=ct=null,$o=!1,dl=0,wg.current=null,r===null||r.return===null){kt=1,fl=t,bt=null;break}e:{var i=e,o=r.return,c=r,l=t;if(t=$t,c.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var d=l,u=c,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var x=cv(o);if(x!==null){x.flags&=-257,dv(x,o,c,i,t),x.mode&1&&lv(i,d,t),t=x,l=d;var v=t.updateQueue;if(v===null){var y=new Set;y.add(l),t.updateQueue=y}else v.add(l);break e}else{if(!(t&1)){lv(i,d,t),kg();break e}l=Error(ee(426))}}else if(it&&c.mode&1){var b=cv(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),dv(b,o,c,i,t),og(ji(l,c));break e}}i=l=ji(l,c),kt!==4&&(kt=2),Bo===null?Bo=[i]:Bo.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var p=Iw(i,l,t);rv(i,p);break e;case 1:c=l;var m=i.type,j=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&($n===null||!$n.has(j)))){i.flags|=65536,t&=-t,i.lanes|=t;var w=$w(i,c,t);rv(i,w);break e}}i=i.return}while(i!==null)}s1(r)}catch(N){t=N,bt===r&&r!==null&&(bt=r=r.return);continue}break}while(!0)}function t1(){var e=Hd.current;return Hd.current=Vd,e===null?Vd:e}function kg(){(kt===0||kt===3||kt===2)&&(kt=4),Rt===null||!(Sa&268435455)&&!(Ou&268435455)||En(Rt,$t)}function qd(e,t){var r=Re;Re|=2;var n=t1();(Rt!==e||$t!==t)&&(Ks=null,ga(e,t));do try{l4();break}catch(a){e1(e,a)}while(!0);if(cg(),Re=r,Hd.current=n,bt!==null)throw Error(ee(261));return Rt=null,$t=0,kt}function l4(){for(;bt!==null;)r1(bt)}function c4(){for(;bt!==null&&!RE();)r1(bt)}function r1(e){var t=a1(e.alternate,e,wr);e.memoizedProps=e.pendingProps,t===null?s1(e):bt=t,wg.current=null}function s1(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=r4(r,t),r!==null){r.flags&=32767,bt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{kt=6,bt=null;return}}else if(r=t4(r,t,wr),r!==null){bt=r;return}if(t=t.sibling,t!==null){bt=t;return}bt=t=e}while(t!==null);kt===0&&(kt=5)}function oa(e,t,r){var n=Ve,a=Yr.transition;try{Yr.transition=null,Ve=1,d4(e,t,r,n)}finally{Yr.transition=a,Ve=n}return null}function d4(e,t,r,n){do di();while(Dn!==null);if(Re&6)throw Error(ee(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ee(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(HE(e,i),e===Rt&&(bt=Rt=null,$t=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ac||(Ac=!0,i1(Dd,function(){return di(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Yr.transition,Yr.transition=null;var o=Ve;Ve=1;var c=Re;Re|=4,wg.current=null,n4(e,r),Xw(r,e),Tk(jm),Td=!!bm,jm=bm=null,e.current=r,a4(r),PE(),Re=c,Ve=o,Yr.transition=i}else e.current=r;if(Ac&&(Ac=!1,Dn=e,Yd=a),i=e.pendingLanes,i===0&&($n=null),$E(r.stateNode),mr(e,xt()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Wd)throw Wd=!1,e=zm,zm=null,e;return Yd&1&&e.tag!==0&&di(),i=e.pendingLanes,i&1?e===Um?zo++:(zo=0,Um=e):zo=0,Xn(),null}function di(){if(Dn!==null){var e=Ij(Yd),t=Yr.transition,r=Ve;try{if(Yr.transition=null,Ve=16>e?16:e,Dn===null)var n=!1;else{if(e=Dn,Dn=null,Yd=0,Re&6)throw Error(ee(331));var a=Re;for(Re|=4,ce=e.current;ce!==null;){var i=ce,o=i.child;if(ce.flags&16){var c=i.deletions;if(c!==null){for(var l=0;l<c.length;l++){var d=c[l];for(ce=d;ce!==null;){var u=ce;switch(u.tag){case 0:case 11:case 15:Fo(8,u,i)}var h=u.child;if(h!==null)h.return=u,ce=h;else for(;ce!==null;){u=ce;var f=u.sibling,x=u.return;if(Gw(u),u===d){ce=null;break}if(f!==null){f.return=x,ce=f;break}ce=x}}}var v=i.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var b=y.sibling;y.sibling=null,y=b}while(y!==null)}}ce=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ce=o;else e:for(;ce!==null;){if(i=ce,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Fo(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,ce=p;break e}ce=i.return}}var m=e.current;for(ce=m;ce!==null;){o=ce;var j=o.child;if(o.subtreeFlags&2064&&j!==null)j.return=o,ce=j;else e:for(o=m;ce!==null;){if(c=ce,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Mu(9,c)}}catch(N){ft(c,c.return,N)}if(c===o){ce=null;break e}var w=c.sibling;if(w!==null){w.return=c.return,ce=w;break e}ce=c.return}}if(Re=a,Xn(),_s&&typeof _s.onPostCommitFiberRoot=="function")try{_s.onPostCommitFiberRoot(Cu,e)}catch{}n=!0}return n}finally{Ve=r,Yr.transition=t}}return!1}function Nv(e,t,r){t=ji(r,t),t=Iw(e,t,1),e=In(e,t,1),t=sr(),e!==null&&(Fl(e,1,t),mr(e,t))}function ft(e,t,r){if(e.tag===3)Nv(e,e,r);else for(;t!==null;){if(t.tag===3){Nv(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&($n===null||!$n.has(n))){e=ji(r,e),e=$w(t,e,1),t=In(t,e,1),e=sr(),t!==null&&(Fl(t,1,e),mr(t,e));break}}t=t.return}}function u4(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=sr(),e.pingedLanes|=e.suspendedLanes&r,Rt===e&&($t&r)===r&&(kt===4||kt===3&&($t&130023424)===$t&&500>xt()-Cg?ga(e,0):Ng|=r),mr(e,t)}function n1(e,t){t===0&&(e.mode&1?(t=yc,yc<<=1,!(yc&130023424)&&(yc=4194304)):t=1);var r=sr();e=ln(e,t),e!==null&&(Fl(e,t,r),mr(e,r))}function h4(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),n1(e,r)}function f4(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(ee(314))}n!==null&&n.delete(t),n1(e,r)}var a1;a1=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||hr.current)ur=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return ur=!1,e4(e,t,r);ur=!!(e.flags&131072)}else ur=!1,it&&t.flags&1048576&&cw(t,Id,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;rd(e,t),e=t.pendingProps;var a=xi(t,Gt.current);ci(t,r),a=xg(null,t,n,e,a,r);var i=vg();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,fr(n)?(i=!0,Pd(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,hg(t),a.updater=_u,t.stateNode=a,a._reactInternals=t,Tm(t,n,e,r),t=Om(null,t,n,!0,i,r)):(t.tag=0,it&&i&&ag(t),tr(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(rd(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=p4(n),e=is(n,e),a){case 0:t=Mm(null,t,n,e,r);break e;case 1:t=fv(null,t,n,e,r);break e;case 11:t=uv(null,t,n,e,r);break e;case 14:t=hv(null,t,n,is(n.type,e),r);break e}throw Error(ee(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:is(n,a),Mm(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:is(n,a),fv(e,t,n,a,r);case 3:e:{if(Uw(t),e===null)throw Error(ee(387));n=t.pendingProps,i=t.memoizedState,a=i.element,pw(e,t),Bd(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=ji(Error(ee(423)),t),t=mv(e,t,n,r,a);break e}else if(n!==a){a=ji(Error(ee(424)),t),t=mv(e,t,n,r,a);break e}else for(Nr=Ln(t.stateNode.containerInfo.firstChild),Cr=t,it=!0,cs=null,r=fw(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(vi(),n===a){t=cn(e,t,r);break e}tr(e,t,n,r)}t=t.child}return t;case 5:return gw(t),e===null&&km(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,wm(n,a)?o=null:i!==null&&wm(n,i)&&(t.flags|=32),zw(e,t),tr(e,t,o,r),t.child;case 6:return e===null&&km(t),null;case 13:return Vw(e,t,r);case 4:return fg(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=yi(t,null,n,r):tr(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:is(n,a),uv(e,t,n,a,r);case 7:return tr(e,t,t.pendingProps,r),t.child;case 8:return tr(e,t,t.pendingProps.children,r),t.child;case 12:return tr(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Ge($d,n._currentValue),n._currentValue=o,i!==null)if(ms(i.value,o)){if(i.children===a.children&&!hr.current){t=cn(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var c=i.dependencies;if(c!==null){o=i.child;for(var l=c.firstContext;l!==null;){if(l.context===n){if(i.tag===1){l=rn(-1,r&-r),l.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?l.next=l:(l.next=u.next,u.next=l),d.pending=l}}i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),Dm(i.return,r,t),c.lanes|=r;break}l=l.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ee(341));o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),Dm(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}tr(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,ci(t,r),a=qr(a),n=n(a),t.flags|=1,tr(e,t,n,r),t.child;case 14:return n=t.type,a=is(n,t.pendingProps),a=is(n.type,a),hv(e,t,n,a,r);case 15:return Fw(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:is(n,a),rd(e,t),t.tag=1,fr(n)?(e=!0,Pd(t)):e=!1,ci(t,r),Lw(t,n,a),Tm(t,n,a,r),Om(null,t,n,!0,e,r);case 19:return Hw(e,t,r);case 22:return Bw(e,t,r)}throw Error(ee(156,t.tag))};function i1(e,t){return Oj(e,t)}function m4(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wr(e,t,r,n){return new m4(e,t,r,n)}function Dg(e){return e=e.prototype,!(!e||!e.isReactComponent)}function p4(e){if(typeof e=="function")return Dg(e)?1:0;if(e!=null){if(e=e.$$typeof,e===qp)return 11;if(e===Gp)return 14}return 2}function Bn(e,t){var r=e.alternate;return r===null?(r=Wr(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function ad(e,t,r,n,a,i){var o=2;if(n=e,typeof e=="function")Dg(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Ya:return xa(r.children,a,i,t);case Yp:o=8,a|=8;break;case em:return e=Wr(12,r,t,a|2),e.elementType=em,e.lanes=i,e;case tm:return e=Wr(13,r,t,a),e.elementType=tm,e.lanes=i,e;case rm:return e=Wr(19,r,t,a),e.elementType=rm,e.lanes=i,e;case gj:return Ru(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case mj:o=10;break e;case pj:o=9;break e;case qp:o=11;break e;case Gp:o=14;break e;case wn:o=16,n=null;break e}throw Error(ee(130,e==null?e:typeof e,""))}return t=Wr(o,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function xa(e,t,r,n){return e=Wr(7,e,n,t),e.lanes=r,e}function Ru(e,t,r,n){return e=Wr(22,e,n,t),e.elementType=gj,e.lanes=r,e.stateNode={isHidden:!1},e}function mf(e,t,r){return e=Wr(6,e,null,t),e.lanes=r,e}function pf(e,t,r){return t=Wr(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function g4(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gh(0),this.expirationTimes=Gh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gh(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Ag(e,t,r,n,a,i,o,c,l){return e=new g4(e,t,r,c,l),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Wr(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},hg(i),e}function x4(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wa,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function o1(e){if(!e)return Wn;e=e._reactInternals;e:{if(Ia(e)!==e||e.tag!==1)throw Error(ee(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(fr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ee(171))}if(e.tag===1){var r=e.type;if(fr(r))return ow(e,r,t)}return t}function l1(e,t,r,n,a,i,o,c,l){return e=Ag(r,n,!0,e,a,i,o,c,l),e.context=o1(null),r=e.current,n=sr(),a=Fn(r),i=rn(n,a),i.callback=t??null,In(r,i,a),e.current.lanes=a,Fl(e,a,n),mr(e,n),e}function Pu(e,t,r,n){var a=t.current,i=sr(),o=Fn(a);return r=o1(r),t.context===null?t.context=r:t.pendingContext=r,t=rn(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=In(a,t,o),e!==null&&(fs(e,a,o,i),Zc(e,a,o)),o}function Gd(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Cv(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Tg(e,t){Cv(e,t),(e=e.alternate)&&Cv(e,t)}function v4(){return null}var c1=typeof reportError=="function"?reportError:function(e){console.error(e)};function _g(e){this._internalRoot=e}Lu.prototype.render=_g.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ee(409));Pu(e,t,null,null)};Lu.prototype.unmount=_g.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ea(function(){Pu(null,e,null,null)}),t[on]=null}};function Lu(e){this._internalRoot=e}Lu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Bj();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Sn.length&&t!==0&&t<Sn[r].priority;r++);Sn.splice(r,0,e),r===0&&Uj(e)}};function Mg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Iu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Sv(){}function y4(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var d=Gd(o);i.call(d)}}var o=l1(t,n,e,0,null,!1,!1,"",Sv);return e._reactRootContainer=o,e[on]=o.current,al(e.nodeType===8?e.parentNode:e),Ea(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var c=n;n=function(){var d=Gd(l);c.call(d)}}var l=Ag(e,0,!1,null,null,!1,!1,"",Sv);return e._reactRootContainer=l,e[on]=l.current,al(e.nodeType===8?e.parentNode:e),Ea(function(){Pu(t,l,r,n)}),l}function $u(e,t,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var c=a;a=function(){var l=Gd(o);c.call(l)}}Pu(t,o,e,a)}else o=y4(r,t,e,a,n);return Gd(o)}$j=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Do(t.pendingLanes);r!==0&&(Xp(t,r|1),mr(t,xt()),!(Re&6)&&(wi=xt()+500,Xn()))}break;case 13:Ea(function(){var n=ln(e,1);if(n!==null){var a=sr();fs(n,e,1,a)}}),Tg(e,1)}};Jp=function(e){if(e.tag===13){var t=ln(e,134217728);if(t!==null){var r=sr();fs(t,e,134217728,r)}Tg(e,134217728)}};Fj=function(e){if(e.tag===13){var t=Fn(e),r=ln(e,t);if(r!==null){var n=sr();fs(r,e,t,n)}Tg(e,t)}};Bj=function(){return Ve};zj=function(e,t){var r=Ve;try{return Ve=e,t()}finally{Ve=r}};hm=function(e,t,r){switch(t){case"input":if(am(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=Du(n);if(!a)throw Error(ee(90));vj(n),am(n,a)}}}break;case"textarea":bj(e,r);break;case"select":t=r.value,t!=null&&ai(e,!!r.multiple,t,!1)}};kj=Sg;Dj=Ea;var b4={usingClientEntryPoint:!1,Events:[zl,Qa,Du,Sj,Ej,Sg]},vo={findFiberByHostInstance:da,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},j4={bundleType:vo.bundleType,version:vo.version,rendererPackageName:vo.rendererPackageName,rendererConfig:vo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=_j(e),e===null?null:e.stateNode},findFiberByHostInstance:vo.findFiberByHostInstance||v4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tc.isDisabled&&Tc.supportsFiber)try{Cu=Tc.inject(j4),_s=Tc}catch{}}kr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=b4;kr.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Mg(t))throw Error(ee(200));return x4(e,t,null,r)};kr.createRoot=function(e,t){if(!Mg(e))throw Error(ee(299));var r=!1,n="",a=c1;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Ag(e,1,!1,null,null,r,!1,n,a),e[on]=t.current,al(e.nodeType===8?e.parentNode:e),new _g(t)};kr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ee(188)):(e=Object.keys(e).join(","),Error(ee(268,e)));return e=_j(t),e=e===null?null:e.stateNode,e};kr.flushSync=function(e){return Ea(e)};kr.hydrate=function(e,t,r){if(!Iu(t))throw Error(ee(200));return $u(null,e,t,!0,r)};kr.hydrateRoot=function(e,t,r){if(!Mg(e))throw Error(ee(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=c1;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=l1(t,null,e,1,r??null,a,!1,i,o),e[on]=t.current,al(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Lu(t)};kr.render=function(e,t,r){if(!Iu(t))throw Error(ee(200));return $u(null,e,t,!1,r)};kr.unmountComponentAtNode=function(e){if(!Iu(e))throw Error(ee(40));return e._reactRootContainer?(Ea(function(){$u(null,null,e,!1,function(){e._reactRootContainer=null,e[on]=null})}),!0):!1};kr.unstable_batchedUpdates=Sg;kr.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Iu(r))throw Error(ee(200));if(e==null||e._reactInternals===void 0)throw Error(ee(38));return $u(e,t,r,!1,n)};kr.version="18.3.1-next-f1338f8080-20240426";function d1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d1)}catch(e){console.error(e)}}d1(),dj.exports=kr;var fa=dj.exports;const u1=br(fa);var Ev=fa;Jf.createRoot=Ev.createRoot,Jf.hydrateRoot=Ev.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ml(){return ml=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ml.apply(this,arguments)}var An;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(An||(An={}));const kv="popstate";function w4(e){e===void 0&&(e={});function t(n,a){let{pathname:i,search:o,hash:c}=n.location;return Wm("",{pathname:i,search:o,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:Kd(a)}return C4(t,r,null,e)}function vt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function h1(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function N4(){return Math.random().toString(36).substr(2,8)}function Dv(e,t){return{usr:e.state,key:e.key,idx:t}}function Wm(e,t,r,n){return r===void 0&&(r=null),ml({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Li(t):t,{state:r,key:t&&t.key||n||N4()})}function Kd(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Li(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function C4(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,c=An.Pop,l=null,d=u();d==null&&(d=0,o.replaceState(ml({},o.state,{idx:d}),""));function u(){return(o.state||{idx:null}).idx}function h(){c=An.Pop;let b=u(),p=b==null?null:b-d;d=b,l&&l({action:c,location:y.location,delta:p})}function f(b,p){c=An.Push;let m=Wm(y.location,b,p);d=u()+1;let j=Dv(m,d),w=y.createHref(m);try{o.pushState(j,"",w)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;a.location.assign(w)}i&&l&&l({action:c,location:y.location,delta:1})}function x(b,p){c=An.Replace;let m=Wm(y.location,b,p);d=u();let j=Dv(m,d),w=y.createHref(m);o.replaceState(j,"",w),i&&l&&l({action:c,location:y.location,delta:0})}function v(b){let p=a.location.origin!=="null"?a.location.origin:a.location.href,m=typeof b=="string"?b:Kd(b);return m=m.replace(/ $/,"%20"),vt(p,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,p)}let y={get action(){return c},get location(){return e(a,o)},listen(b){if(l)throw new Error("A history only accepts one active listener");return a.addEventListener(kv,h),l=b,()=>{a.removeEventListener(kv,h),l=null}},createHref(b){return t(a,b)},createURL:v,encodeLocation(b){let p=v(b);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:f,replace:x,go(b){return o.go(b)}};return y}var Av;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Av||(Av={}));function S4(e,t,r){return r===void 0&&(r="/"),E4(e,t,r)}function E4(e,t,r,n){let a=typeof t=="string"?Li(t):t,i=Og(a.pathname||"/",r);if(i==null)return null;let o=f1(e);k4(o);let c=null;for(let l=0;c==null&&l<o.length;++l){let d=F4(i);c=L4(o[l],d)}return c}function f1(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(i,o,c)=>{let l={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(vt(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let d=zn([n,l.relativePath]),u=r.concat(l);i.children&&i.children.length>0&&(vt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),f1(i.children,t,u,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:R4(d,i.index),routesMeta:u})};return e.forEach((i,o)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))a(i,o);else for(let l of m1(i.path))a(i,o,l)}),t}function m1(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=m1(n.join("/")),c=[];return c.push(...o.map(l=>l===""?i:[i,l].join("/"))),a&&c.push(...o),c.map(l=>e.startsWith("/")&&l===""?"/":l)}function k4(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:P4(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const D4=/^:[\w-]+$/,A4=3,T4=2,_4=1,M4=10,O4=-2,Tv=e=>e==="*";function R4(e,t){let r=e.split("/"),n=r.length;return r.some(Tv)&&(n+=O4),t&&(n+=T4),r.filter(a=>!Tv(a)).reduce((a,i)=>a+(D4.test(i)?A4:i===""?_4:M4),n)}function P4(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function L4(e,t,r){let{routesMeta:n}=e,a={},i="/",o=[];for(let c=0;c<n.length;++c){let l=n[c],d=c===n.length-1,u=i==="/"?t:t.slice(i.length)||"/",h=I4({path:l.relativePath,caseSensitive:l.caseSensitive,end:d},u),f=l.route;if(!h)return null;Object.assign(a,h.params),o.push({params:a,pathname:zn([i,h.pathname]),pathnameBase:V4(zn([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=zn([i,h.pathnameBase]))}return o}function I4(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=$4(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),c=a.slice(1);return{params:n.reduce((d,u,h)=>{let{paramName:f,isOptional:x}=u;if(f==="*"){let y=c[h]||"";o=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const v=c[h];return x&&!v?d[f]=void 0:d[f]=(v||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function $4(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),h1(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,l)=>(n.push({paramName:c,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function F4(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return h1(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Og(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function B4(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?Li(e):e;return{pathname:r?r.startsWith("/")?r:z4(r,t):t,search:H4(n),hash:W4(a)}}function z4(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function gf(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function U4(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Rg(e,t){let r=U4(e);return t?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Pg(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=Li(e):(a=ml({},e),vt(!a.pathname||!a.pathname.includes("?"),gf("?","pathname","search",a)),vt(!a.pathname||!a.pathname.includes("#"),gf("#","pathname","hash",a)),vt(!a.search||!a.search.includes("#"),gf("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,c;if(o==null)c=r;else{let h=t.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;a.pathname=f.join("/")}c=h>=0?t[h]:"/"}let l=B4(a,c),d=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(d||u)&&(l.pathname+="/"),l}const zn=e=>e.join("/").replace(/\/\/+/g,"/"),V4=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),H4=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,W4=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Y4(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const p1=["post","put","patch","delete"];new Set(p1);const q4=["get",...p1];new Set(q4);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pl(){return pl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pl.apply(this,arguments)}const Lg=g.createContext(null),G4=g.createContext(null),Jn=g.createContext(null),Fu=g.createContext(null),Fs=g.createContext({outlet:null,matches:[],isDataRoute:!1}),g1=g.createContext(null);function K4(e,t){let{relative:r}=t===void 0?{}:t;Ii()||vt(!1);let{basename:n,navigator:a}=g.useContext(Jn),{hash:i,pathname:o,search:c}=v1(e,{relative:r}),l=o;return n!=="/"&&(l=o==="/"?n:zn([n,o])),a.createHref({pathname:l,search:c,hash:i})}function Ii(){return g.useContext(Fu)!=null}function $i(){return Ii()||vt(!1),g.useContext(Fu).location}function x1(e){g.useContext(Jn).static||g.useLayoutEffect(e)}function Ar(){let{isDataRoute:e}=g.useContext(Fs);return e?dD():Q4()}function Q4(){Ii()||vt(!1);let e=g.useContext(Lg),{basename:t,future:r,navigator:n}=g.useContext(Jn),{matches:a}=g.useContext(Fs),{pathname:i}=$i(),o=JSON.stringify(Rg(a,r.v7_relativeSplatPath)),c=g.useRef(!1);return x1(()=>{c.current=!0}),g.useCallback(function(d,u){if(u===void 0&&(u={}),!c.current)return;if(typeof d=="number"){n.go(d);return}let h=Pg(d,JSON.parse(o),i,u.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:zn([t,h.pathname])),(u.replace?n.replace:n.push)(h,u.state,u)},[t,n,o,i,e])}const X4=g.createContext(null);function J4(e){let t=g.useContext(Fs).outlet;return t&&g.createElement(X4.Provider,{value:e},t)}function Ig(){let{matches:e}=g.useContext(Fs),t=e[e.length-1];return t?t.params:{}}function v1(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=g.useContext(Jn),{matches:a}=g.useContext(Fs),{pathname:i}=$i(),o=JSON.stringify(Rg(a,n.v7_relativeSplatPath));return g.useMemo(()=>Pg(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function Z4(e,t){return eD(e,t)}function eD(e,t,r,n){Ii()||vt(!1);let{navigator:a}=g.useContext(Jn),{matches:i}=g.useContext(Fs),o=i[i.length-1],c=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let d=$i(),u;if(t){var h;let b=typeof t=="string"?Li(t):t;l==="/"||(h=b.pathname)!=null&&h.startsWith(l)||vt(!1),u=b}else u=d;let f=u.pathname||"/",x=f;if(l!=="/"){let b=l.replace(/^\//,"").split("/");x="/"+f.replace(/^\//,"").split("/").slice(b.length).join("/")}let v=S4(e,{pathname:x}),y=aD(v&&v.map(b=>Object.assign({},b,{params:Object.assign({},c,b.params),pathname:zn([l,a.encodeLocation?a.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?l:zn([l,a.encodeLocation?a.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,r,n);return t&&y?g.createElement(Fu.Provider,{value:{location:pl({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:An.Pop}},y):y}function tD(){let e=cD(),t=Y4(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),r?g.createElement("pre",{style:a},r):null,null)}const rD=g.createElement(tD,null);class sD extends g.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?g.createElement(Fs.Provider,{value:this.props.routeContext},g.createElement(g1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function nD(e){let{routeContext:t,match:r,children:n}=e,a=g.useContext(Lg);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),g.createElement(Fs.Provider,{value:t},n)}function aD(e,t,r,n){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,c=(a=r)==null?void 0:a.errors;if(c!=null){let u=o.findIndex(h=>h.route.id&&(c==null?void 0:c[h.route.id])!==void 0);u>=0||vt(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(d=u),h.route.id){let{loaderData:f,errors:x}=r,v=h.route.loader&&f[h.route.id]===void 0&&(!x||x[h.route.id]===void 0);if(h.route.lazy||v){l=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((u,h,f)=>{let x,v=!1,y=null,b=null;r&&(x=c&&h.route.id?c[h.route.id]:void 0,y=h.route.errorElement||rD,l&&(d<0&&f===0?(uD("route-fallback"),v=!0,b=null):d===f&&(v=!0,b=h.route.hydrateFallbackElement||null)));let p=t.concat(o.slice(0,f+1)),m=()=>{let j;return x?j=y:v?j=b:h.route.Component?j=g.createElement(h.route.Component,null):h.route.element?j=h.route.element:j=u,g.createElement(nD,{match:h,routeContext:{outlet:u,matches:p,isDataRoute:r!=null},children:j})};return r&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?g.createElement(sD,{location:r.location,revalidation:r.revalidation,component:y,error:x,children:m(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):m()},null)}var y1=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(y1||{}),b1=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(b1||{});function iD(e){let t=g.useContext(Lg);return t||vt(!1),t}function oD(e){let t=g.useContext(G4);return t||vt(!1),t}function lD(e){let t=g.useContext(Fs);return t||vt(!1),t}function j1(e){let t=lD(),r=t.matches[t.matches.length-1];return r.route.id||vt(!1),r.route.id}function cD(){var e;let t=g.useContext(g1),r=oD(),n=j1();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function dD(){let{router:e}=iD(y1.UseNavigateStable),t=j1(b1.UseNavigateStable),r=g.useRef(!1);return x1(()=>{r.current=!0}),g.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,pl({fromRouteId:t},i)))},[e,t])}const _v={};function uD(e,t,r){_v[e]||(_v[e]=!0)}function hD(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function w1(e){let{to:t,replace:r,state:n,relative:a}=e;Ii()||vt(!1);let{future:i,static:o}=g.useContext(Jn),{matches:c}=g.useContext(Fs),{pathname:l}=$i(),d=Ar(),u=Pg(t,Rg(c,i.v7_relativeSplatPath),l,a==="path"),h=JSON.stringify(u);return g.useEffect(()=>d(JSON.parse(h),{replace:r,state:n,relative:a}),[d,h,a,r,n]),null}function $g(e){return J4(e.context)}function he(e){vt(!1)}function fD(e){let{basename:t="/",children:r=null,location:n,navigationType:a=An.Pop,navigator:i,static:o=!1,future:c}=e;Ii()&&vt(!1);let l=t.replace(/^\/*/,"/"),d=g.useMemo(()=>({basename:l,navigator:i,static:o,future:pl({v7_relativeSplatPath:!1},c)}),[l,c,i,o]);typeof n=="string"&&(n=Li(n));let{pathname:u="/",search:h="",hash:f="",state:x=null,key:v="default"}=n,y=g.useMemo(()=>{let b=Og(u,l);return b==null?null:{location:{pathname:b,search:h,hash:f,state:x,key:v},navigationType:a}},[l,u,h,f,x,v,a]);return y==null?null:g.createElement(Jn.Provider,{value:d},g.createElement(Fu.Provider,{children:r,value:y}))}function mD(e){let{children:t,location:r}=e;return Z4(Ym(t),r)}new Promise(()=>{});function Ym(e,t){t===void 0&&(t=[]);let r=[];return g.Children.forEach(e,(n,a)=>{if(!g.isValidElement(n))return;let i=[...t,a];if(n.type===g.Fragment){r.push.apply(r,Ym(n.props.children,i));return}n.type!==he&&vt(!1),!n.props.index||!n.props.children||vt(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Ym(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qm(){return qm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qm.apply(this,arguments)}function pD(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function gD(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function xD(e,t){return e.button===0&&(!t||t==="_self")&&!gD(e)}const vD=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],yD="6";try{window.__reactRouterVersion=yD}catch{}const bD="startTransition",Mv=uE[bD];function jD(e){let{basename:t,children:r,future:n,window:a}=e,i=g.useRef();i.current==null&&(i.current=w4({window:a,v5Compat:!0}));let o=i.current,[c,l]=g.useState({action:o.action,location:o.location}),{v7_startTransition:d}=n||{},u=g.useCallback(h=>{d&&Mv?Mv(()=>l(h)):l(h)},[l,d]);return g.useLayoutEffect(()=>o.listen(u),[o,u]),g.useEffect(()=>hD(n),[n]),g.createElement(fD,{basename:t,children:r,location:c.location,navigationType:c.action,navigator:o,future:n})}const wD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ND=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,be=g.forwardRef(function(t,r){let{onClick:n,relative:a,reloadDocument:i,replace:o,state:c,target:l,to:d,preventScrollReset:u,viewTransition:h}=t,f=pD(t,vD),{basename:x}=g.useContext(Jn),v,y=!1;if(typeof d=="string"&&ND.test(d)&&(v=d,wD))try{let j=new URL(window.location.href),w=d.startsWith("//")?new URL(j.protocol+d):new URL(d),N=Og(w.pathname,x);w.origin===j.origin&&N!=null?d=N+w.search+w.hash:y=!0}catch{}let b=K4(d,{relative:a}),p=CD(d,{replace:o,state:c,target:l,preventScrollReset:u,relative:a,viewTransition:h});function m(j){n&&n(j),j.defaultPrevented||p(j)}return g.createElement("a",qm({},f,{href:v||b,onClick:y||i?n:m,ref:r,target:l}))});var Ov;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ov||(Ov={}));var Rv;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Rv||(Rv={}));function CD(e,t){let{target:r,replace:n,state:a,preventScrollReset:i,relative:o,viewTransition:c}=t===void 0?{}:t,l=Ar(),d=$i(),u=v1(e,{relative:o});return g.useCallback(h=>{if(xD(h,r)){h.preventDefault();let f=n!==void 0?n:Kd(d)===Kd(u);l(e,{replace:f,state:a,preventScrollReset:i,relative:o,viewTransition:c})}},[d,l,u,n,a,r,e,i,o,c])}function N1(e,t){return function(){return e.apply(t,arguments)}}const{toString:SD}=Object.prototype,{getPrototypeOf:Fg}=Object,{iterator:Bu,toStringTag:C1}=Symbol,zu=(e=>t=>{const r=SD.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),ys=e=>(e=e.toLowerCase(),t=>zu(t)===e),Uu=e=>t=>typeof t===e,{isArray:Fi}=Array,gl=Uu("undefined");function ED(e){return e!==null&&!gl(e)&&e.constructor!==null&&!gl(e.constructor)&&pr(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const S1=ys("ArrayBuffer");function kD(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&S1(e.buffer),t}const DD=Uu("string"),pr=Uu("function"),E1=Uu("number"),Vu=e=>e!==null&&typeof e=="object",AD=e=>e===!0||e===!1,id=e=>{if(zu(e)!=="object")return!1;const t=Fg(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(C1 in e)&&!(Bu in e)},TD=ys("Date"),_D=ys("File"),MD=ys("Blob"),OD=ys("FileList"),RD=e=>Vu(e)&&pr(e.pipe),PD=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||pr(e.append)&&((t=zu(e))==="formdata"||t==="object"&&pr(e.toString)&&e.toString()==="[object FormData]"))},LD=ys("URLSearchParams"),[ID,$D,FD,BD]=["ReadableStream","Request","Response","Headers"].map(ys),zD=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Vl(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,a;if(typeof e!="object"&&(e=[e]),Fi(e))for(n=0,a=e.length;n<a;n++)t.call(null,e[n],n,e);else{const i=r?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let c;for(n=0;n<o;n++)c=i[n],t.call(null,e[c],c,e)}}function k1(e,t){t=t.toLowerCase();const r=Object.keys(e);let n=r.length,a;for(;n-- >0;)if(a=r[n],t===a.toLowerCase())return a;return null}const ma=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,D1=e=>!gl(e)&&e!==ma;function Gm(){const{caseless:e}=D1(this)&&this||{},t={},r=(n,a)=>{const i=e&&k1(t,a)||a;id(t[i])&&id(n)?t[i]=Gm(t[i],n):id(n)?t[i]=Gm({},n):Fi(n)?t[i]=n.slice():t[i]=n};for(let n=0,a=arguments.length;n<a;n++)arguments[n]&&Vl(arguments[n],r);return t}const UD=(e,t,r,{allOwnKeys:n}={})=>(Vl(t,(a,i)=>{r&&pr(a)?e[i]=N1(a,r):e[i]=a},{allOwnKeys:n}),e),VD=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),HD=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},WD=(e,t,r,n)=>{let a,i,o;const c={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),i=a.length;i-- >0;)o=a[i],(!n||n(o,e,t))&&!c[o]&&(t[o]=e[o],c[o]=!0);e=r!==!1&&Fg(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},YD=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},qD=e=>{if(!e)return null;if(Fi(e))return e;let t=e.length;if(!E1(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},GD=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Fg(Uint8Array)),KD=(e,t)=>{const n=(e&&e[Bu]).call(e);let a;for(;(a=n.next())&&!a.done;){const i=a.value;t.call(e,i[0],i[1])}},QD=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},XD=ys("HTMLFormElement"),JD=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,a){return n.toUpperCase()+a}),Pv=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),ZD=ys("RegExp"),A1=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};Vl(r,(a,i)=>{let o;(o=t(a,i,e))!==!1&&(n[i]=o||a)}),Object.defineProperties(e,n)},e3=e=>{A1(e,(t,r)=>{if(pr(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(pr(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},t3=(e,t)=>{const r={},n=a=>{a.forEach(i=>{r[i]=!0})};return Fi(e)?n(e):n(String(e).split(t)),r},r3=()=>{},s3=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function n3(e){return!!(e&&pr(e.append)&&e[C1]==="FormData"&&e[Bu])}const a3=e=>{const t=new Array(10),r=(n,a)=>{if(Vu(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[a]=n;const i=Fi(n)?[]:{};return Vl(n,(o,c)=>{const l=r(o,a+1);!gl(l)&&(i[c]=l)}),t[a]=void 0,i}}return n};return r(e,0)},i3=ys("AsyncFunction"),o3=e=>e&&(Vu(e)||pr(e))&&pr(e.then)&&pr(e.catch),T1=((e,t)=>e?setImmediate:t?((r,n)=>(ma.addEventListener("message",({source:a,data:i})=>{a===ma&&i===r&&n.length&&n.shift()()},!1),a=>{n.push(a),ma.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",pr(ma.postMessage)),l3=typeof queueMicrotask<"u"?queueMicrotask.bind(ma):typeof process<"u"&&process.nextTick||T1,c3=e=>e!=null&&pr(e[Bu]),K={isArray:Fi,isArrayBuffer:S1,isBuffer:ED,isFormData:PD,isArrayBufferView:kD,isString:DD,isNumber:E1,isBoolean:AD,isObject:Vu,isPlainObject:id,isReadableStream:ID,isRequest:$D,isResponse:FD,isHeaders:BD,isUndefined:gl,isDate:TD,isFile:_D,isBlob:MD,isRegExp:ZD,isFunction:pr,isStream:RD,isURLSearchParams:LD,isTypedArray:GD,isFileList:OD,forEach:Vl,merge:Gm,extend:UD,trim:zD,stripBOM:VD,inherits:HD,toFlatObject:WD,kindOf:zu,kindOfTest:ys,endsWith:YD,toArray:qD,forEachEntry:KD,matchAll:QD,isHTMLForm:XD,hasOwnProperty:Pv,hasOwnProp:Pv,reduceDescriptors:A1,freezeMethods:e3,toObjectSet:t3,toCamelCase:JD,noop:r3,toFiniteNumber:s3,findKey:k1,global:ma,isContextDefined:D1,isSpecCompliantForm:n3,toJSONObject:a3,isAsyncFn:i3,isThenable:o3,setImmediate:T1,asap:l3,isIterable:c3};function je(e,t,r,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}K.inherits(je,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:K.toJSONObject(this.config),code:this.code,status:this.status}}});const _1=je.prototype,M1={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{M1[e]={value:e}});Object.defineProperties(je,M1);Object.defineProperty(_1,"isAxiosError",{value:!0});je.from=(e,t,r,n,a,i)=>{const o=Object.create(_1);return K.toFlatObject(e,o,function(l){return l!==Error.prototype},c=>c!=="isAxiosError"),je.call(o,e.message,t,r,n,a),o.cause=e,o.name=e.name,i&&Object.assign(o,i),o};const d3=null;function Km(e){return K.isPlainObject(e)||K.isArray(e)}function O1(e){return K.endsWith(e,"[]")?e.slice(0,-2):e}function Lv(e,t,r){return e?e.concat(t).map(function(a,i){return a=O1(a),!r&&i?"["+a+"]":a}).join(r?".":""):t}function u3(e){return K.isArray(e)&&!e.some(Km)}const h3=K.toFlatObject(K,{},null,function(t){return/^is[A-Z]/.test(t)});function Hu(e,t,r){if(!K.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=K.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,b){return!K.isUndefined(b[y])});const n=r.metaTokens,a=r.visitor||u,i=r.dots,o=r.indexes,l=(r.Blob||typeof Blob<"u"&&Blob)&&K.isSpecCompliantForm(t);if(!K.isFunction(a))throw new TypeError("visitor must be a function");function d(v){if(v===null)return"";if(K.isDate(v))return v.toISOString();if(K.isBoolean(v))return v.toString();if(!l&&K.isBlob(v))throw new je("Blob is not supported. Use a Buffer instead.");return K.isArrayBuffer(v)||K.isTypedArray(v)?l&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function u(v,y,b){let p=v;if(v&&!b&&typeof v=="object"){if(K.endsWith(y,"{}"))y=n?y:y.slice(0,-2),v=JSON.stringify(v);else if(K.isArray(v)&&u3(v)||(K.isFileList(v)||K.endsWith(y,"[]"))&&(p=K.toArray(v)))return y=O1(y),p.forEach(function(j,w){!(K.isUndefined(j)||j===null)&&t.append(o===!0?Lv([y],w,i):o===null?y:y+"[]",d(j))}),!1}return Km(v)?!0:(t.append(Lv(b,y,i),d(v)),!1)}const h=[],f=Object.assign(h3,{defaultVisitor:u,convertValue:d,isVisitable:Km});function x(v,y){if(!K.isUndefined(v)){if(h.indexOf(v)!==-1)throw Error("Circular reference detected in "+y.join("."));h.push(v),K.forEach(v,function(p,m){(!(K.isUndefined(p)||p===null)&&a.call(t,p,K.isString(m)?m.trim():m,y,f))===!0&&x(p,y?y.concat(m):[m])}),h.pop()}}if(!K.isObject(e))throw new TypeError("data must be an object");return x(e),t}function Iv(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function Bg(e,t){this._pairs=[],e&&Hu(e,this,t)}const R1=Bg.prototype;R1.append=function(t,r){this._pairs.push([t,r])};R1.toString=function(t){const r=t?function(n){return t.call(this,n,Iv)}:Iv;return this._pairs.map(function(a){return r(a[0])+"="+r(a[1])},"").join("&")};function f3(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function P1(e,t,r){if(!t)return e;const n=r&&r.encode||f3;K.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let i;if(a?i=a(t,r):i=K.isURLSearchParams(t)?t.toString():new Bg(t,r).toString(n),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class $v{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){K.forEach(this.handlers,function(n){n!==null&&t(n)})}}const L1={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},m3=typeof URLSearchParams<"u"?URLSearchParams:Bg,p3=typeof FormData<"u"?FormData:null,g3=typeof Blob<"u"?Blob:null,x3={isBrowser:!0,classes:{URLSearchParams:m3,FormData:p3,Blob:g3},protocols:["http","https","file","blob","url","data"]},zg=typeof window<"u"&&typeof document<"u",Qm=typeof navigator=="object"&&navigator||void 0,v3=zg&&(!Qm||["ReactNative","NativeScript","NS"].indexOf(Qm.product)<0),y3=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",b3=zg&&window.location.href||"http://localhost",j3=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:zg,hasStandardBrowserEnv:v3,hasStandardBrowserWebWorkerEnv:y3,navigator:Qm,origin:b3},Symbol.toStringTag,{value:"Module"})),Yt={...j3,...x3};function w3(e,t){return Hu(e,new Yt.classes.URLSearchParams,Object.assign({visitor:function(r,n,a,i){return Yt.isNode&&K.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}function N3(e){return K.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function C3(e){const t={},r=Object.keys(e);let n;const a=r.length;let i;for(n=0;n<a;n++)i=r[n],t[i]=e[i];return t}function I1(e){function t(r,n,a,i){let o=r[i++];if(o==="__proto__")return!0;const c=Number.isFinite(+o),l=i>=r.length;return o=!o&&K.isArray(a)?a.length:o,l?(K.hasOwnProp(a,o)?a[o]=[a[o],n]:a[o]=n,!c):((!a[o]||!K.isObject(a[o]))&&(a[o]=[]),t(r,n,a[o],i)&&K.isArray(a[o])&&(a[o]=C3(a[o])),!c)}if(K.isFormData(e)&&K.isFunction(e.entries)){const r={};return K.forEachEntry(e,(n,a)=>{t(N3(n),a,r,0)}),r}return null}function S3(e,t,r){if(K.isString(e))try{return(t||JSON.parse)(e),K.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const Hl={transitional:L1,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",a=n.indexOf("application/json")>-1,i=K.isObject(t);if(i&&K.isHTMLForm(t)&&(t=new FormData(t)),K.isFormData(t))return a?JSON.stringify(I1(t)):t;if(K.isArrayBuffer(t)||K.isBuffer(t)||K.isStream(t)||K.isFile(t)||K.isBlob(t)||K.isReadableStream(t))return t;if(K.isArrayBufferView(t))return t.buffer;if(K.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let c;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return w3(t,this.formSerializer).toString();if((c=K.isFileList(t))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Hu(c?{"files[]":t}:t,l&&new l,this.formSerializer)}}return i||a?(r.setContentType("application/json",!1),S3(t)):t}],transformResponse:[function(t){const r=this.transitional||Hl.transitional,n=r&&r.forcedJSONParsing,a=this.responseType==="json";if(K.isResponse(t)||K.isReadableStream(t))return t;if(t&&K.isString(t)&&(n&&!this.responseType||a)){const o=!(r&&r.silentJSONParsing)&&a;try{return JSON.parse(t)}catch(c){if(o)throw c.name==="SyntaxError"?je.from(c,je.ERR_BAD_RESPONSE,this,null,this.response):c}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Yt.classes.FormData,Blob:Yt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};K.forEach(["delete","get","head","post","put","patch"],e=>{Hl.headers[e]={}});const E3=K.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),k3=e=>{const t={};let r,n,a;return e&&e.split(`
`).forEach(function(o){a=o.indexOf(":"),r=o.substring(0,a).trim().toLowerCase(),n=o.substring(a+1).trim(),!(!r||t[r]&&E3[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},Fv=Symbol("internals");function yo(e){return e&&String(e).trim().toLowerCase()}function od(e){return e===!1||e==null?e:K.isArray(e)?e.map(od):String(e)}function D3(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const A3=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function xf(e,t,r,n,a){if(K.isFunction(n))return n.call(this,t,r);if(a&&(t=r),!!K.isString(t)){if(K.isString(n))return t.indexOf(n)!==-1;if(K.isRegExp(n))return n.test(t)}}function T3(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function _3(e,t){const r=K.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(a,i,o){return this[n].call(this,t,a,i,o)},configurable:!0})})}let gr=class{constructor(t){t&&this.set(t)}set(t,r,n){const a=this;function i(c,l,d){const u=yo(l);if(!u)throw new Error("header name must be a non-empty string");const h=K.findKey(a,u);(!h||a[h]===void 0||d===!0||d===void 0&&a[h]!==!1)&&(a[h||l]=od(c))}const o=(c,l)=>K.forEach(c,(d,u)=>i(d,u,l));if(K.isPlainObject(t)||t instanceof this.constructor)o(t,r);else if(K.isString(t)&&(t=t.trim())&&!A3(t))o(k3(t),r);else if(K.isObject(t)&&K.isIterable(t)){let c={},l,d;for(const u of t){if(!K.isArray(u))throw TypeError("Object iterator must return a key-value pair");c[d=u[0]]=(l=c[d])?K.isArray(l)?[...l,u[1]]:[l,u[1]]:u[1]}o(c,r)}else t!=null&&i(r,t,n);return this}get(t,r){if(t=yo(t),t){const n=K.findKey(this,t);if(n){const a=this[n];if(!r)return a;if(r===!0)return D3(a);if(K.isFunction(r))return r.call(this,a,n);if(K.isRegExp(r))return r.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=yo(t),t){const n=K.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||xf(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let a=!1;function i(o){if(o=yo(o),o){const c=K.findKey(n,o);c&&(!r||xf(n,n[c],c,r))&&(delete n[c],a=!0)}}return K.isArray(t)?t.forEach(i):i(t),a}clear(t){const r=Object.keys(this);let n=r.length,a=!1;for(;n--;){const i=r[n];(!t||xf(this,this[i],i,t,!0))&&(delete this[i],a=!0)}return a}normalize(t){const r=this,n={};return K.forEach(this,(a,i)=>{const o=K.findKey(n,i);if(o){r[o]=od(a),delete r[i];return}const c=t?T3(i):String(i).trim();c!==i&&delete r[i],r[c]=od(a),n[c]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return K.forEach(this,(n,a)=>{n!=null&&n!==!1&&(r[a]=t&&K.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(a=>n.set(a)),n}static accessor(t){const n=(this[Fv]=this[Fv]={accessors:{}}).accessors,a=this.prototype;function i(o){const c=yo(o);n[c]||(_3(a,o),n[c]=!0)}return K.isArray(t)?t.forEach(i):i(t),this}};gr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);K.reduceDescriptors(gr.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});K.freezeMethods(gr);function vf(e,t){const r=this||Hl,n=t||r,a=gr.from(n.headers);let i=n.data;return K.forEach(e,function(c){i=c.call(r,i,a.normalize(),t?t.status:void 0)}),a.normalize(),i}function $1(e){return!!(e&&e.__CANCEL__)}function Bi(e,t,r){je.call(this,e??"canceled",je.ERR_CANCELED,t,r),this.name="CanceledError"}K.inherits(Bi,je,{__CANCEL__:!0});function F1(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new je("Request failed with status code "+r.status,[je.ERR_BAD_REQUEST,je.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function M3(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function O3(e,t){e=e||10;const r=new Array(e),n=new Array(e);let a=0,i=0,o;return t=t!==void 0?t:1e3,function(l){const d=Date.now(),u=n[i];o||(o=d),r[a]=l,n[a]=d;let h=i,f=0;for(;h!==a;)f+=r[h++],h=h%e;if(a=(a+1)%e,a===i&&(i=(i+1)%e),d-o<t)return;const x=u&&d-u;return x?Math.round(f*1e3/x):void 0}}function R3(e,t){let r=0,n=1e3/t,a,i;const o=(d,u=Date.now())=>{r=u,a=null,i&&(clearTimeout(i),i=null),e.apply(null,d)};return[(...d)=>{const u=Date.now(),h=u-r;h>=n?o(d,u):(a=d,i||(i=setTimeout(()=>{i=null,o(a)},n-h)))},()=>a&&o(a)]}const Qd=(e,t,r=3)=>{let n=0;const a=O3(50,250);return R3(i=>{const o=i.loaded,c=i.lengthComputable?i.total:void 0,l=o-n,d=a(l),u=o<=c;n=o;const h={loaded:o,total:c,progress:c?o/c:void 0,bytes:l,rate:d||void 0,estimated:d&&c&&u?(c-o)/d:void 0,event:i,lengthComputable:c!=null,[t?"download":"upload"]:!0};e(h)},r)},Bv=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},zv=e=>(...t)=>K.asap(()=>e(...t)),P3=Yt.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,Yt.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(Yt.origin),Yt.navigator&&/(msie|trident)/i.test(Yt.navigator.userAgent)):()=>!0,L3=Yt.hasStandardBrowserEnv?{write(e,t,r,n,a,i){const o=[e+"="+encodeURIComponent(t)];K.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),K.isString(n)&&o.push("path="+n),K.isString(a)&&o.push("domain="+a),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function I3(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function $3(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function B1(e,t,r){let n=!I3(t);return e&&(n||r==!1)?$3(e,t):t}const Uv=e=>e instanceof gr?{...e}:e;function ka(e,t){t=t||{};const r={};function n(d,u,h,f){return K.isPlainObject(d)&&K.isPlainObject(u)?K.merge.call({caseless:f},d,u):K.isPlainObject(u)?K.merge({},u):K.isArray(u)?u.slice():u}function a(d,u,h,f){if(K.isUndefined(u)){if(!K.isUndefined(d))return n(void 0,d,h,f)}else return n(d,u,h,f)}function i(d,u){if(!K.isUndefined(u))return n(void 0,u)}function o(d,u){if(K.isUndefined(u)){if(!K.isUndefined(d))return n(void 0,d)}else return n(void 0,u)}function c(d,u,h){if(h in t)return n(d,u);if(h in e)return n(void 0,d)}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:c,headers:(d,u,h)=>a(Uv(d),Uv(u),h,!0)};return K.forEach(Object.keys(Object.assign({},e,t)),function(u){const h=l[u]||a,f=h(e[u],t[u],u);K.isUndefined(f)&&h!==c||(r[u]=f)}),r}const z1=e=>{const t=ka({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:i,headers:o,auth:c}=t;t.headers=o=gr.from(o),t.url=P1(B1(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),c&&o.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):"")));let l;if(K.isFormData(r)){if(Yt.hasStandardBrowserEnv||Yt.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[d,...u]=l?l.split(";").map(h=>h.trim()).filter(Boolean):[];o.setContentType([d||"multipart/form-data",...u].join("; "))}}if(Yt.hasStandardBrowserEnv&&(n&&K.isFunction(n)&&(n=n(t)),n||n!==!1&&P3(t.url))){const d=a&&i&&L3.read(i);d&&o.set(a,d)}return t},F3=typeof XMLHttpRequest<"u",B3=F3&&function(e){return new Promise(function(r,n){const a=z1(e);let i=a.data;const o=gr.from(a.headers).normalize();let{responseType:c,onUploadProgress:l,onDownloadProgress:d}=a,u,h,f,x,v;function y(){x&&x(),v&&v(),a.cancelToken&&a.cancelToken.unsubscribe(u),a.signal&&a.signal.removeEventListener("abort",u)}let b=new XMLHttpRequest;b.open(a.method.toUpperCase(),a.url,!0),b.timeout=a.timeout;function p(){if(!b)return;const j=gr.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),N={data:!c||c==="text"||c==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:j,config:e,request:b};F1(function(S){r(S),y()},function(S){n(S),y()},N),b=null}"onloadend"in b?b.onloadend=p:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(p)},b.onabort=function(){b&&(n(new je("Request aborted",je.ECONNABORTED,e,b)),b=null)},b.onerror=function(){n(new je("Network Error",je.ERR_NETWORK,e,b)),b=null},b.ontimeout=function(){let w=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const N=a.transitional||L1;a.timeoutErrorMessage&&(w=a.timeoutErrorMessage),n(new je(w,N.clarifyTimeoutError?je.ETIMEDOUT:je.ECONNABORTED,e,b)),b=null},i===void 0&&o.setContentType(null),"setRequestHeader"in b&&K.forEach(o.toJSON(),function(w,N){b.setRequestHeader(N,w)}),K.isUndefined(a.withCredentials)||(b.withCredentials=!!a.withCredentials),c&&c!=="json"&&(b.responseType=a.responseType),d&&([f,v]=Qd(d,!0),b.addEventListener("progress",f)),l&&b.upload&&([h,x]=Qd(l),b.upload.addEventListener("progress",h),b.upload.addEventListener("loadend",x)),(a.cancelToken||a.signal)&&(u=j=>{b&&(n(!j||j.type?new Bi(null,e,b):j),b.abort(),b=null)},a.cancelToken&&a.cancelToken.subscribe(u),a.signal&&(a.signal.aborted?u():a.signal.addEventListener("abort",u)));const m=M3(a.url);if(m&&Yt.protocols.indexOf(m)===-1){n(new je("Unsupported protocol "+m+":",je.ERR_BAD_REQUEST,e));return}b.send(i||null)})},z3=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,a;const i=function(d){if(!a){a=!0,c();const u=d instanceof Error?d:this.reason;n.abort(u instanceof je?u:new Bi(u instanceof Error?u.message:u))}};let o=t&&setTimeout(()=>{o=null,i(new je(`timeout ${t} of ms exceeded`,je.ETIMEDOUT))},t);const c=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),e=null)};e.forEach(d=>d.addEventListener("abort",i));const{signal:l}=n;return l.unsubscribe=()=>K.asap(c),l}},U3=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,a;for(;n<r;)a=n+t,yield e.slice(n,a),n=a},V3=async function*(e,t){for await(const r of H3(e))yield*U3(r,t)},H3=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},Vv=(e,t,r,n)=>{const a=V3(e,t);let i=0,o,c=l=>{o||(o=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:d,value:u}=await a.next();if(d){c(),l.close();return}let h=u.byteLength;if(r){let f=i+=h;r(f)}l.enqueue(new Uint8Array(u))}catch(d){throw c(d),d}},cancel(l){return c(l),a.return()}},{highWaterMark:2})},Wu=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",U1=Wu&&typeof ReadableStream=="function",W3=Wu&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),V1=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Y3=U1&&V1(()=>{let e=!1;const t=new Request(Yt.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),Hv=64*1024,Xm=U1&&V1(()=>K.isReadableStream(new Response("").body)),Xd={stream:Xm&&(e=>e.body)};Wu&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Xd[t]&&(Xd[t]=K.isFunction(e[t])?r=>r[t]():(r,n)=>{throw new je(`Response type '${t}' is not supported`,je.ERR_NOT_SUPPORT,n)})})})(new Response);const q3=async e=>{if(e==null)return 0;if(K.isBlob(e))return e.size;if(K.isSpecCompliantForm(e))return(await new Request(Yt.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(K.isArrayBufferView(e)||K.isArrayBuffer(e))return e.byteLength;if(K.isURLSearchParams(e)&&(e=e+""),K.isString(e))return(await W3(e)).byteLength},G3=async(e,t)=>{const r=K.toFiniteNumber(e.getContentLength());return r??q3(t)},K3=Wu&&(async e=>{let{url:t,method:r,data:n,signal:a,cancelToken:i,timeout:o,onDownloadProgress:c,onUploadProgress:l,responseType:d,headers:u,withCredentials:h="same-origin",fetchOptions:f}=z1(e);d=d?(d+"").toLowerCase():"text";let x=z3([a,i&&i.toAbortSignal()],o),v;const y=x&&x.unsubscribe&&(()=>{x.unsubscribe()});let b;try{if(l&&Y3&&r!=="get"&&r!=="head"&&(b=await G3(u,n))!==0){let N=new Request(t,{method:"POST",body:n,duplex:"half"}),C;if(K.isFormData(n)&&(C=N.headers.get("content-type"))&&u.setContentType(C),N.body){const[S,E]=Bv(b,Qd(zv(l)));n=Vv(N.body,Hv,S,E)}}K.isString(h)||(h=h?"include":"omit");const p="credentials"in Request.prototype;v=new Request(t,{...f,signal:x,method:r.toUpperCase(),headers:u.normalize().toJSON(),body:n,duplex:"half",credentials:p?h:void 0});let m=await fetch(v,f);const j=Xm&&(d==="stream"||d==="response");if(Xm&&(c||j&&y)){const N={};["status","statusText","headers"].forEach(k=>{N[k]=m[k]});const C=K.toFiniteNumber(m.headers.get("content-length")),[S,E]=c&&Bv(C,Qd(zv(c),!0))||[];m=new Response(Vv(m.body,Hv,S,()=>{E&&E(),y&&y()}),N)}d=d||"text";let w=await Xd[K.findKey(Xd,d)||"text"](m,e);return!j&&y&&y(),await new Promise((N,C)=>{F1(N,C,{data:w,headers:gr.from(m.headers),status:m.status,statusText:m.statusText,config:e,request:v})})}catch(p){throw y&&y(),p&&p.name==="TypeError"&&/Load failed|fetch/i.test(p.message)?Object.assign(new je("Network Error",je.ERR_NETWORK,e,v),{cause:p.cause||p}):je.from(p,p&&p.code,e,v)}}),Jm={http:d3,xhr:B3,fetch:K3};K.forEach(Jm,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Wv=e=>`- ${e}`,Q3=e=>K.isFunction(e)||e===null||e===!1,H1={getAdapter:e=>{e=K.isArray(e)?e:[e];const{length:t}=e;let r,n;const a={};for(let i=0;i<t;i++){r=e[i];let o;if(n=r,!Q3(r)&&(n=Jm[(o=String(r)).toLowerCase()],n===void 0))throw new je(`Unknown adapter '${o}'`);if(n)break;a[o||"#"+i]=n}if(!n){const i=Object.entries(a).map(([c,l])=>`adapter ${c} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=t?i.length>1?`since :
`+i.map(Wv).join(`
`):" "+Wv(i[0]):"as no adapter specified";throw new je("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:Jm};function yf(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Bi(null,e)}function Yv(e){return yf(e),e.headers=gr.from(e.headers),e.data=vf.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),H1.getAdapter(e.adapter||Hl.adapter)(e).then(function(n){return yf(e),n.data=vf.call(e,e.transformResponse,n),n.headers=gr.from(n.headers),n},function(n){return $1(n)||(yf(e),n&&n.response&&(n.response.data=vf.call(e,e.transformResponse,n.response),n.response.headers=gr.from(n.response.headers))),Promise.reject(n)})}const W1="1.10.0",Yu={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Yu[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const qv={};Yu.transitional=function(t,r,n){function a(i,o){return"[Axios v"+W1+"] Transitional option '"+i+"'"+o+(n?". "+n:"")}return(i,o,c)=>{if(t===!1)throw new je(a(o," has been removed"+(r?" in "+r:"")),je.ERR_DEPRECATED);return r&&!qv[o]&&(qv[o]=!0,console.warn(a(o," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,o,c):!0}};Yu.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function X3(e,t,r){if(typeof e!="object")throw new je("options must be an object",je.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let a=n.length;for(;a-- >0;){const i=n[a],o=t[i];if(o){const c=e[i],l=c===void 0||o(c,i,e);if(l!==!0)throw new je("option "+i+" must be "+l,je.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new je("Unknown option "+i,je.ERR_BAD_OPTION)}}const ld={assertOptions:X3,validators:Yu},Cs=ld.validators;let va=class{constructor(t){this.defaults=t||{},this.interceptors={request:new $v,response:new $v}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const i=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=ka(this.defaults,r);const{transitional:n,paramsSerializer:a,headers:i}=r;n!==void 0&&ld.assertOptions(n,{silentJSONParsing:Cs.transitional(Cs.boolean),forcedJSONParsing:Cs.transitional(Cs.boolean),clarifyTimeoutError:Cs.transitional(Cs.boolean)},!1),a!=null&&(K.isFunction(a)?r.paramsSerializer={serialize:a}:ld.assertOptions(a,{encode:Cs.function,serialize:Cs.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),ld.assertOptions(r,{baseUrl:Cs.spelling("baseURL"),withXsrfToken:Cs.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=i&&K.merge(i.common,i[r.method]);i&&K.forEach(["delete","get","head","post","put","patch","common"],v=>{delete i[v]}),r.headers=gr.concat(o,i);const c=[];let l=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(r)===!1||(l=l&&y.synchronous,c.unshift(y.fulfilled,y.rejected))});const d=[];this.interceptors.response.forEach(function(y){d.push(y.fulfilled,y.rejected)});let u,h=0,f;if(!l){const v=[Yv.bind(this),void 0];for(v.unshift.apply(v,c),v.push.apply(v,d),f=v.length,u=Promise.resolve(r);h<f;)u=u.then(v[h++],v[h++]);return u}f=c.length;let x=r;for(h=0;h<f;){const v=c[h++],y=c[h++];try{x=v(x)}catch(b){y.call(this,b);break}}try{u=Yv.call(this,x)}catch(v){return Promise.reject(v)}for(h=0,f=d.length;h<f;)u=u.then(d[h++],d[h++]);return u}getUri(t){t=ka(this.defaults,t);const r=B1(t.baseURL,t.url,t.allowAbsoluteUrls);return P1(r,t.params,t.paramsSerializer)}};K.forEach(["delete","get","head","options"],function(t){va.prototype[t]=function(r,n){return this.request(ka(n||{},{method:t,url:r,data:(n||{}).data}))}});K.forEach(["post","put","patch"],function(t){function r(n){return function(i,o,c){return this.request(ka(c||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}va.prototype[t]=r(),va.prototype[t+"Form"]=r(!0)});let J3=class Y1{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const n=this;this.promise.then(a=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](a);n._listeners=null}),this.promise.then=a=>{let i;const o=new Promise(c=>{n.subscribe(c),i=c}).then(a);return o.cancel=function(){n.unsubscribe(i)},o},t(function(i,o,c){n.reason||(n.reason=new Bi(i,o,c),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new Y1(function(a){t=a}),cancel:t}}};function Z3(e){return function(r){return e.apply(null,r)}}function e6(e){return K.isObject(e)&&e.isAxiosError===!0}const Zm={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Zm).forEach(([e,t])=>{Zm[t]=e});function q1(e){const t=new va(e),r=N1(va.prototype.request,t);return K.extend(r,va.prototype,t,{allOwnKeys:!0}),K.extend(r,t,null,{allOwnKeys:!0}),r.create=function(a){return q1(ka(e,a))},r}const Ne=q1(Hl);Ne.Axios=va;Ne.CanceledError=Bi;Ne.CancelToken=J3;Ne.isCancel=$1;Ne.VERSION=W1;Ne.toFormData=Hu;Ne.AxiosError=je;Ne.Cancel=Ne.CanceledError;Ne.all=function(t){return Promise.all(t)};Ne.spread=Z3;Ne.isAxiosError=e6;Ne.mergeConfig=ka;Ne.AxiosHeaders=gr;Ne.formToJSON=e=>I1(K.isHTMLForm(e)?new FormData(e):e);Ne.getAdapter=H1.getAdapter;Ne.HttpStatusCode=Zm;Ne.default=Ne;const{Axios:GJ,AxiosError:KJ,CanceledError:QJ,isCancel:XJ,CancelToken:JJ,VERSION:ZJ,all:eZ,Cancel:tZ,isAxiosError:rZ,spread:sZ,toFormData:nZ,AxiosHeaders:aZ,HttpStatusCode:iZ,formToJSON:oZ,getAdapter:lZ,mergeConfig:cZ}=Ne,X=Ne.create({baseURL:"/api"});X.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e});X.interceptors.response.use(e=>e,e=>(e.response&&(e.response.status===401?(localStorage.removeItem("token"),window.location.href="/login",alert("Sesión expirada o no autorizada. Por favor, inicia sesión de nuevo.")):e.response.status===429&&alert("Demasiados intentos de autenticación. Espera unos minutos antes de volver a intentarlo.")),Promise.reject(e)));const G1=g.createContext(null),Ee=()=>{const e=g.useContext(G1);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},t6=({children:e})=>{const[t,r]=g.useState(null),[n,a]=g.useState(!0);g.useEffect(()=>{i()},[]);const i=async()=>{try{const v=localStorage.getItem("token");if(v){const y=await X.get("/auth/me",{headers:{Authorization:`Bearer ${v}`}});if(y.data&&y.data.role)r(y.data);else throw new Error("Datos de usuario incompletos")}}catch{localStorage.removeItem("token")}finally{a(!1)}},o=async(v,y)=>{var b,p;try{const m=await X.post("/auth/login",{email:v,password:y}),{token:j,user:w}=m.data;localStorage.setItem("token",j),r({id:w.id,email:w.email,name:w.name,role:w.role}),w.role==="ADMIN"?window.location.href="/admin/dashboard":window.location.href="/dashboard"}catch(m){throw new Error(((p=(b=m==null?void 0:m.response)==null?void 0:b.data)==null?void 0:p.message)||"Error en el inicio de sesión")}},c=()=>{localStorage.removeItem("token"),r(null),window.location.href="/login"},l=async v=>{try{const y=await X.post("/auth/register",v),{token:b,user:p}=y.data;localStorage.setItem("token",b),r(p)}catch{throw new Error("Error en el registro")}},d=g.useMemo(()=>t,[t==null?void 0:t.id,t==null?void 0:t.email,t==null?void 0:t.name,t==null?void 0:t.role]),u=g.useCallback(o,[]),h=g.useCallback(c,[]),f=g.useCallback(l,[]),x=g.useMemo(()=>({user:d,loading:n,login:u,logout:h,register:f}),[d,n,u,h,f]);return s.jsx(G1.Provider,{value:x,children:e})},r6=()=>{const[e,t]=g.useState({}),[r,n]=g.useState(!0),[a,i]=g.useState(null),[o,c]=g.useState(!1);g.useEffect(()=>{o||l()},[o]);const l=async()=>{try{n(!0),i(null);const x=await X.get("/site-config/public"),v={};x.data.forEach(y=>{v[y.key]=y.value}),t(v),c(!0)}catch(x){console.error("Error fetching site configs:",x),i("Error al cargar las configuraciones del sitio")}finally{n(!1)}};return{configs:e,loading:r,error:a,getConfig:(x,v="")=>e[x]||v,getBooleanConfig:(x,v=!1)=>e[x]==="true"||v,getNumberConfig:(x,v=0)=>{const y=e[x];return y?parseInt(y,10):v},updateConfig:async(x,v)=>{try{return await X.patch(`/site-config/key/${x}`,{value:v}),t(y=>({...y,[x]:v})),!0}catch(y){return console.error("Error updating config:",y),!1}},refresh:l}},s6=e=>{const[t,r]=g.useState(null),[n,a]=g.useState(!0),[i,o]=g.useState(null),[c,l]=g.useState(null);g.useEffect(()=>{e&&e!==c?(l(e),d()):!e&&c?(l(null),r(null),a(!1)):!e&&!c&&n&&a(!1)},[e,c,n]);const d=async()=>{if(e)try{a(!0),o(null);const f=await X.get(`/menu-config/role/${e}`);r(f.data)}catch(f){console.error("Error fetching menu config:",f),o("Error al cargar la configuración del menú"),r(null)}finally{a(!1)}},u=()=>!t||!t.items?[]:t.items.filter(f=>f.isVisible).sort((f,x)=>f.order-x.order),h=()=>(t==null?void 0:t.orientation)||"horizontal";return{menuConfig:t,menuItems:u(),orientation:h(),loading:n,error:i,refresh:d}},n6=e=>{const t=r6(),r=s6(e);return{siteName:t.getConfig("site_name","Despacho Legal"),siteDescription:t.getConfig("site_description","Servicios legales profesionales"),logoUrl:t.getConfig("logo_url","/images/logo.png"),faviconUrl:t.getConfig("favicon_url","/images/favicon.ico"),primaryColor:t.getConfig("primary_color","#1e40af"),secondaryColor:t.getConfig("secondary_color","#3b82f6"),sidebarPosition:t.getConfig("sidebar_position","left"),sidebarWidth:t.getConfig("sidebar_width","250px"),headerFixed:t.getBooleanConfig("header_fixed",!0),footerVisible:t.getBooleanConfig("footer_visible",!0),contactEmail:t.getConfig("contact_email","info@despacholegal.com"),contactPhone:t.getConfig("contact_phone","+34 123 456 789"),contactAddress:t.getConfig("contact_address","Calle Principal 123, Madrid"),officeHours:t.getConfig("office_hours","Lunes a Viernes: 9:00 - 18:00"),socialFacebook:t.getConfig("social_facebook",""),socialTwitter:t.getConfig("social_twitter",""),socialLinkedin:t.getConfig("social_linkedin",""),socialInstagram:t.getConfig("social_instagram",""),maintenanceMode:t.getBooleanConfig("maintenance_mode",!1),defaultLanguage:t.getConfig("default_language","es"),timezone:t.getConfig("timezone","Europe/Madrid"),dateFormat:t.getConfig("date_format","DD/MM/YYYY"),menuItems:e?r.menuItems:[],menuOrientation:e?r.orientation:"horizontal",loading:t.loading||(e?r.loading:!1),error:t.error||(e?r.error:null),updateSiteConfig:t.updateConfig,refreshSiteConfig:t.refresh,refreshMenuConfig:r.refresh}},a6=()=>{const[e,t]=g.useState([]),[r,n]=g.useState(!0),[a,i]=g.useState(new Set),{user:o}=Ee(),c=$i();g.useEffect(()=>{if(!o)return;const u=async()=>{try{n(!0);const f=localStorage.getItem("token"),x=await X.get("/appointments",{headers:{Authorization:`Bearer ${f}`}});let v=0;try{v=(await X.get("/chat/unread-count",{headers:{Authorization:`Bearer ${f}`}})).data.count||0}catch{}const y=[],b=new Date,p=new Date(b.getFullYear(),b.getMonth(),b.getDate()),m=new Date(p);if(m.setDate(m.getDate()+1),o.role!=="ADMIN"){const j=x.data.filter(w=>new Date(w.date)>=p);if(j.length>0){const w=j.filter(N=>{const C=new Date(N.date);return C>=p&&C<m});w.length>0?y.push({id:"appointments-today",type:"appointment",count:w.length,title:"Citas de Hoy",description:`Tienes ${w.length} cita${w.length>1?"s":""} programada${w.length>1?"s":""} para hoy`,link:o.role==="CLIENTE"?"/client/appointments":"/lawyer/appointments"}):y.push({id:"appointments-upcoming",type:"appointment",count:j.length,title:"Próximas Citas",description:`Tienes ${j.length} cita${j.length>1?"s":""} programada${j.length>1?"s":""}`,link:o.role==="CLIENTE"?"/client/appointments":"/lawyer/appointments"})}}v>0&&y.push({id:"unread-messages",type:"message",count:v,title:"Mensajes Nuevos",description:`Tienes ${v} mensaje${v>1?"s":""} sin leer`,link:o.role==="CLIENTE"?"/client/chat":"/lawyer/chat"}),t(y)}catch(f){console.error("Error fetching notifications:",f)}finally{n(!1)}};u();const h=setInterval(u,3e4);return()=>clearInterval(h)},[o]),g.useEffect(()=>{const u=new Set(a);e.forEach(h=>{c.pathname===h.link&&u.add(h.id)}),u.size!==a.size&&i(u)},[c.pathname,e,a]);const l=u=>{i(h=>new Set([...h,u]))},d=e.filter(u=>!a.has(u.id));return r||d.length===0?null:s.jsx("div",{className:"fixed top-20 left-4 z-50 space-y-2 max-w-sm",children:d.map(u=>s.jsx("div",{className:`bg-white rounded-lg shadow-lg border-l-4 p-4 transform transition-all duration-300 ${u.type==="appointment"?"border-blue-500":"border-green-500"}`,children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-900",children:u.title}),s.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${u.type==="appointment"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:u.count})]}),s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:u.description}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("a",{href:u.link,className:`text-sm font-medium px-3 py-1 rounded-md transition-colors ${u.type==="appointment"?"bg-blue-100 text-blue-700 hover:bg-blue-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:["Ver ",u.type==="appointment"?"Citas":"Mensajes"]}),s.jsx("button",{onClick:()=>l(u.id),className:"text-sm text-gray-500 hover:text-gray-700 px-2 py-1 rounded-md hover:bg-gray-100",children:"Ocultar"})]})]}),s.jsx("button",{onClick:()=>l(u.id),className:"text-gray-400 hover:text-gray-600 ml-2",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},u.id))})},Uo=Ne.create({baseURL:"http://localhost:8000"});Uo.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e});Uo.interceptors.response.use(e=>e,e=>(console.error("Chatbot API Error:",e),Promise.reject(e)));const i6=({onDateSelect:e,onClose:t,isVisible:r})=>{const[n,a]=g.useState(""),[i,o]=g.useState(""),[c,l]=g.useState([]),[d,u]=g.useState(!1),[h,f]=g.useState(new Date),x=()=>{const N=[],C=new Date;for(let S=1;S<=14;S++){const E=new Date(C);E.setDate(C.getDate()+S),E.getDay()>=1&&E.getDay()<=5&&[9,10,11,12,16,17].forEach(T=>{const D=new Date(E);D.setHours(T,0,0,0),N.push({id:`${E.toISOString().split("T")[0]}-${T}`,date:E.toISOString().split("T")[0],time:`${T}:00`,available:!0,formatted:v(D)})})}return N},v=N=>{const C=["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],S=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];return`${C[N.getDay()]} ${N.getDate()} de ${S[N.getMonth()]} a las ${N.getHours()}:00`};g.useEffect(()=>{r&&l(x())},[r]);const y=N=>{console.log("handleDateSelect called with:",N),a(N),o("")},b=N=>{console.log("handleTimeSelect called with:",N),o(N)},p=()=>{if(console.log("handleConfirm called with:",{selectedDate:n,selectedTime:i}),!n||!i){console.error("Missing date or time:",{selectedDate:n,selectedTime:i}),alert("Por favor, selecciona una fecha y hora antes de confirmar.");return}if(!/^\d{4}-\d{2}-\d{2}$/.test(n)){console.error("Invalid date format:",n),alert("Formato de fecha inválido. Por favor, selecciona de nuevo.");return}if(!/^\d{1,2}:\d{2}$/.test(i)){console.error("Invalid time format:",i),alert("Formato de hora inválido. Por favor, selecciona de nuevo.");return}console.log("Calling onDateSelect with:",n,i),e(n,i),t()},m=N=>c.filter(C=>C.date===N),j=()=>[...new Set(c.map(N=>N.date))].sort(),w=N=>{const C=new Date(N),S=["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"],E=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"];return{day:S[C.getDay()],date:C.getDate(),month:E[C.getMonth()],full:`${S[C.getDay()]} ${C.getDate()} de ${E[C.getMonth()]}`}};return r?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[85vh] flex flex-col",children:[s.jsxs("div",{className:"bg-blue-600 text-white p-4 rounded-t-lg flex-shrink-0",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"📅 Selecciona tu cita"}),s.jsx("button",{onClick:t,className:"text-white hover:text-gray-200 text-xl font-bold",children:"×"})]}),s.jsx("p",{className:"text-blue-100 mt-1 text-sm",children:"Elige la fecha y hora que mejor te convenga"})]}),s.jsxs("div",{className:"flex flex-col lg:flex-row flex-1 overflow-hidden",children:[s.jsxs("div",{className:"lg:w-1/2 p-4 border-r border-gray-200 overflow-y-auto",children:[s.jsx("h3",{className:"text-md font-semibold mb-3 text-gray-800",children:"📆 Fechas disponibles"}),s.jsx("div",{className:"space-y-2",children:j().map(N=>{const C=w(N),S=n===N,E=m(N);return s.jsx("div",{className:`border rounded-lg p-2 cursor-pointer transition-all ${S?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300 hover:bg-gray-50"}`,onClick:()=>y(N),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("div",{className:`text-center min-w-[50px] ${S?"text-blue-600":"text-gray-600"}`,children:[s.jsx("div",{className:"text-xs font-medium",children:C.day}),s.jsx("div",{className:"text-md font-bold",children:C.date}),s.jsx("div",{className:"text-xs",children:C.month})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:`font-medium text-sm ${S?"text-blue-800":"text-gray-800"}`,children:C.full}),s.jsxs("div",{className:"text-xs text-gray-500",children:[E.length," horarios disponibles"]})]})]}),S&&s.jsx("div",{className:"text-blue-600",children:s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]})},N)})})]}),s.jsx("div",{className:"lg:w-1/2 p-4 overflow-y-auto",children:n?s.jsxs(s.Fragment,{children:[s.jsx("h3",{className:"text-md font-semibold mb-3 text-gray-800",children:"🕐 Horarios disponibles"}),s.jsx("div",{className:"mb-3 p-2 bg-blue-50 rounded-lg",children:s.jsxs("p",{className:"text-blue-800 font-medium text-sm",children:["Fecha seleccionada: ",w(n).full]})}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:m(n).map(N=>s.jsxs("button",{onClick:()=>b(N.time),className:`p-3 border rounded-lg text-center transition-all ${i===N.time?"border-blue-500 bg-blue-500 text-white":"border-gray-200 hover:border-blue-300 hover:bg-blue-50"}`,children:[s.jsx("div",{className:"text-md font-semibold",children:N.time}),s.jsx("div",{className:"text-xs opacity-75",children:"Disponible"})]},N.id))}),i&&s.jsxs("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:[s.jsx("h4",{className:"font-semibold text-green-800 mb-1 text-sm",children:"✅ Cita seleccionada"}),s.jsxs("p",{className:"text-green-700 text-sm",children:[w(n).full," a las ",i]})]})]}):s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsxs("div",{className:"text-center text-gray-500",children:[s.jsx("svg",{className:"w-12 h-12 mx-auto mb-3 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("p",{className:"text-sm",children:"Selecciona una fecha para ver los horarios disponibles"})]})})})]}),s.jsx("div",{className:"bg-gray-50 p-3 border-t border-gray-200 flex-shrink-0",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors text-sm",children:"Cancelar"}),s.jsx("button",{onClick:p,disabled:!n||!i,className:`px-4 py-2 rounded-lg font-medium transition-colors text-sm ${n&&i?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"Confirmar Cita"})]})})]})}):null},o6=()=>{const[e,t]=g.useState(!1),[r,n]=g.useState([]),[a,i]=g.useState(""),[o,c]=g.useState(!1),[l,d]=g.useState(null),[u,h]=g.useState(!1),[f,x]=g.useState(null),v=g.useRef(null),y=g.useRef(null),b=g.useRef("user_"+Math.random().toString(36).substring(2,12)),p=g.useRef(null),m=g.useRef(null);g.useEffect(()=>{e&&r.length===0&&n([{text:"¡Hola! Soy el asistente virtual del despacho legal. ¿En qué puedo ayudarte hoy?",isUser:!1,timestamp:new Date().toISOString()}])},[e,r.length]),g.useEffect(()=>{w()},[r]),g.useEffect(()=>{e&&y.current&&!u&&setTimeout(()=>{var T;(T=y.current)==null||T.focus()},100)},[e,u]);const j=()=>{p.current&&clearTimeout(p.current),m.current&&clearTimeout(m.current),e&&!u&&(m.current=setTimeout(()=>{e&&!u&&n(T=>[...T,{text:"⚠️ No hay actividad. El chat se cerrará automáticamente en 10 segundos si no respondes.",isUser:!1,timestamp:new Date().toISOString()}])},5e4),p.current=setTimeout(()=>{e&&!u&&N()},6e4))};g.useEffect(()=>(e&&r.length>0&&!u&&j(),()=>{p.current&&clearTimeout(p.current),m.current&&clearTimeout(m.current)}),[r,e,u]);const w=()=>{var T;(T=v.current)==null||T.scrollIntoView({behavior:"smooth"})},N=async()=>{p.current&&clearTimeout(p.current),m.current&&clearTimeout(m.current);try{await Uo.post("/end_chat",{user_id:b.current})}catch{}n([]),i(""),d(null),t(!1),h(!1),x(null),setTimeout(()=>{alert("El chat ha finalizado.")},100)},C=async(T,D)=>{if(console.log("handleDateSelect called with:",{date:T,time:D}),!T||!D||T.trim()===""||D.trim()===""){console.error("Invalid date or time:",{date:T,time:D});const $={text:"Error: Fecha o hora no válida. Por favor, selecciona de nuevo.",isUser:!1,timestamp:new Date().toISOString()};n(_=>[..._,$]);return}h(!1);try{if(!/^\d{4}-\d{2}-\d{2}$/.test(T))throw new Error(`Invalid date format: ${T}. Expected YYYY-MM-DD`);if(!/^\d{1,2}:\d{2}$/.test(D))throw new Error(`Invalid time format: ${D}. Expected HH:MM`);const A=`${T}T${D}:00`;console.log("selectedDateTime:",A);const B=new Date(A);if(console.log("formattedDate:",B),isNaN(B.getTime()))throw new Error(`Invalid date: ${A}`);const P=["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],M=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],R=P[B.getDay()],W=B.getDate(),V=M[B.getMonth()];if(!R||!V||isNaN(W))throw new Error(`Invalid date components: day=${R}, month=${V}, date=${W}`);const z=`${R} ${W} de ${V} a las ${D}`;console.log("formattedDateStr:",z);const H={text:`He seleccionado: ${z}`,isUser:!0,timestamp:new Date().toISOString()};n(F=>[...F,H]),c(!0);const Z={text:(await Uo.post("/chat",{text:z,language:"es",user_id:b.current})).data.response,isUser:!1,timestamp:new Date().toISOString()};n(F=>[...F,Z])}catch($){console.error("Error in handleDateSelect:",$);const A={text:`Lo siento, hubo un problema al procesar tu selección: ${$.message||"Error desconocido"}. Por favor, intenta de nuevo.`,isUser:!1,timestamp:new Date().toISOString()};n(B=>[...B,A])}finally{c(!1)}},S=async T=>{if(T.preventDefault(),!a.trim()||o)return;const D=a.trim();i(""),c(!0),d(null);const $={text:D,isUser:!0,timestamp:new Date().toISOString()};n(_=>[..._,$]);try{const A=(await Uo.post("/chat",{text:D,language:"es",user_id:b.current})).data.response,B=["si","sí","vale","ok","claro","jj","a","x","123","abc","xyz"],P=A.includes("Para ayudarte mejor")&&A.includes("¿En qué puedo ayudarte?")&&(D.length<10||B.includes(D.toLowerCase()));let M=A;P&&(M=`**Has indicado:** "${D}"

${A}`);const R={text:M,isUser:!1,timestamp:new Date().toISOString()};n(W=>[...W,R]),A.includes("¿Qué fecha prefieres para tu consulta?")&&A.includes("Opciones disponibles:")&&A.includes("Responde con el número de la opción que prefieras")&&h(!0)}catch(_){console.error("Error sending message:",_),d("Error al enviar el mensaje. Por favor, intenta de nuevo.");const A={text:"Lo siento, estoy teniendo problemas para procesar tu mensaje. Por favor, intenta de nuevo o contacta directamente al despacho.",isUser:!1,timestamp:new Date().toISOString()};n(B=>[...B,A])}finally{c(!1),u||setTimeout(()=>{var _;(_=y.current)==null||_.focus()},100)}},E=()=>{t(!e),e||(d(null),h(!1),x(null),p.current&&clearTimeout(p.current),m.current&&clearTimeout(m.current))},k=T=>new Date(T).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"});return s.jsxs("div",{className:"fixed bottom-4 right-4 z-50",children:[s.jsx("button",{onClick:E,className:"bg-blue-600 hover:bg-blue-700 text-white rounded-full p-4 shadow-lg transition-all duration-200",title:"Chat del despacho",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),s.jsx(i6,{isVisible:u,onDateSelect:C,onClose:()=>h(!1)}),e&&s.jsxs("div",{className:"absolute bottom-16 right-0 w-96 h-96 bg-white rounded-lg shadow-xl border border-gray-200 flex flex-col",children:[s.jsxs("div",{className:"bg-blue-600 text-white p-4 rounded-t-lg",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h3",{className:"font-semibold",children:"Asistente Virtual"}),s.jsx("button",{onClick:E,className:"text-white hover:text-gray-200",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("p",{className:"text-sm opacity-90",children:"Despacho Legal"})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[r.map((T,D)=>s.jsx("div",{className:`flex ${T.isUser?"justify-end":"justify-start"}`,children:s.jsxs("div",{className:`max-w-xs px-3 py-2 rounded-lg ${T.isUser?"bg-blue-600 text-white":"bg-gray-100 text-gray-800"}`,children:[s.jsx("p",{className:"text-sm",children:T.text}),s.jsx("p",{className:`text-xs mt-1 ${T.isUser?"text-blue-100":"text-gray-500"}`,children:k(T.timestamp)})]})},D)),o&&s.jsx("div",{className:"flex justify-start",children:s.jsx("div",{className:"bg-gray-100 text-gray-800 max-w-xs px-3 py-2 rounded-lg",children:s.jsxs("div",{className:"flex space-x-1",children:[s.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),s.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),s.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),l&&s.jsx("div",{className:"flex justify-start",children:s.jsx("div",{className:"bg-red-100 text-red-800 max-w-xs px-3 py-2 rounded-lg",children:s.jsx("p",{className:"text-sm",children:l})})}),s.jsx("div",{ref:v})]}),s.jsx("form",{onSubmit:S,className:"p-4 border-t border-gray-200",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("input",{ref:y,type:"text",value:a,onChange:T=>i(T.target.value),placeholder:"Escribe tu mensaje...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:o||u}),s.jsx("button",{type:"submit",disabled:o||!a.trim()||u,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})}),s.jsx("div",{className:"p-2 border-t border-gray-200 flex justify-end",children:s.jsx("button",{onClick:N,className:"px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700 text-sm",children:"Finalizar chat"})})]})]})};let l6=class{constructor(){this.results=[]}runAllTests(){return this.results=[],this.testKeyboardNavigation(),this.testScreenReaderSupport(),this.testColorContrast(),this.testSemanticStructure(),this.testFormLabels(),this.testModalAccessibility(),this.testFocusManagement(),this.results}testKeyboardNavigation(){const t=document.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');let r=t.length>0,n=!0;t.forEach(a=>{const i=a,o=window.getComputedStyle(i);!o.outline&&!o.boxShadow&&(n=!1)}),this.results.push({test:"Navegación por teclado",passed:r&&n,message:r?n?"Todos los elementos enfocables tienen estilos de focus visibles":"Algunos elementos enfocables no tienen estilos de focus visibles":"No se encontraron elementos enfocables"})}testScreenReaderSupport(){const t=document.querySelectorAll("img"),r=document.querySelectorAll("button"),n=document.querySelectorAll("input");let a=!0,i=!0,o=!0;t.forEach(c=>{c.getAttribute("alt")||(a=!1)}),r.forEach(c=>{var u;const l=c.getAttribute("aria-label"),d=(u=c.textContent)==null?void 0:u.trim();!l&&!d&&(i=!1)}),n.forEach(c=>{const l=c.getAttribute("id");l&&(document.querySelector(`label[for="${l}"]`)||(o=!1))}),this.results.push({test:"Soporte para lectores de pantalla",passed:a&&i&&o,message:`Imágenes con alt: ${a}, Botones con aria-label: ${i}, Inputs con labels: ${o}`})}testColorContrast(){const t=document.querySelectorAll("p, h1, h2, h3, h4, h5, h6, span, div");let r=!0;t.forEach(n=>{const a=n,i=window.getComputedStyle(a);i.color,i.backgroundColor}),this.results.push({test:"Contraste de colores",passed:r,message:"Verificación básica de contraste completada (recomendado usar herramienta especializada)"})}testSemanticStructure(){const t=document.querySelectorAll("h1, h2, h3, h4, h5, h6"),r=document.querySelectorAll("ul, ol"),n=document.querySelectorAll("nav, main, header, footer, aside");let a=!0,i=!0,o=n.length>0,c="",l=0;t.forEach(h=>{const f=parseInt(h.tagName.charAt(1));f>l+1&&(a=!1,c=`Salto de nivel detectado: h${l} -> h${f}`),l=f});const d=document.querySelectorAll("h1").length;d===0?(a=!1,c="No se encontró ningún encabezado h1"):d>1&&(a=!1,c=`Múltiples h1 encontrados: ${d}`),r.forEach(h=>{h.querySelectorAll("li").length===0&&(i=!1)});const u=a?`Estructura de encabezados: ✅, Listas semánticas: ${i?"✅":"❌"}, Landmarks: ${o?"✅":"❌"}`:`Estructura de encabezados: ❌ (${c}), Listas semánticas: ${i?"✅":"❌"}, Landmarks: ${o?"✅":"❌"}`;this.results.push({test:"Estructura semántica",passed:a&&i&&o,message:u})}testFormLabels(){const t=document.querySelectorAll("input, select, textarea");let r=!0;t.forEach(n=>{const a=n.getAttribute("id"),i=n.getAttribute("aria-label"),o=n.getAttribute("aria-labelledby"),c=n.getAttribute("placeholder");!a&&!i&&!o&&!c&&(r=!1),a&&!document.querySelector(`label[for="${a}"]`)&&!i&&!o&&(r=!1)}),this.results.push({test:"Etiquetas de formularios",passed:r,message:r?"Todos los campos de formulario tienen etiquetas apropiadas":"Algunos campos de formulario no tienen etiquetas"})}testModalAccessibility(){const t=document.querySelectorAll('[role="dialog"], .modal, [class*="fixed inset-0"]');let r=!0,n=[];if(t.length===0){this.results.push({test:"Accesibilidad de modales",passed:!0,message:"No se encontraron modales en esta página"});return}t.forEach((i,o)=>{const c=i,l=[],d=c.getAttribute("role")==="dialog",u=c.getAttribute("aria-modal")==="true",h=c.getAttribute("aria-labelledby"),f=c.getAttribute("aria-describedby");d||l.push('Falta role="dialog"'),u||l.push('Falta aria-modal="true"'),h||l.push("Falta aria-labelledby");const x=c.querySelectorAll("button");Array.from(x).some(b=>{const p=b.getAttribute("aria-label")||"",m=b.textContent||"";return p.toLowerCase().includes("cerrar")||p.toLowerCase().includes("close")||m.includes("×")||m.includes("X")})||l.push("Falta botón de cerrar accesible"),h&&(document.getElementById(h)||l.push("Elemento de título no encontrado")),f&&(document.getElementById(f)||l.push("Elemento de descripción no encontrado")),c.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])').length===0&&l.push("No hay elementos enfocables dentro del modal"),l.length>0&&(r=!1,n.push(`Modal ${o+1}: ${l.join(", ")}`))});const a=r?`✅ Todos los modales (${t.length}) son accesibles`:`❌ Problemas encontrados en modales: ${n.join("; ")}`;this.results.push({test:"Accesibilidad de modales",passed:r,message:a})}testFocusManagement(){const t=document.querySelectorAll('[role="dialog"]');let r=!0;t.forEach(n=>{n.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])').length===0&&(r=!1)}),this.results.push({test:"Manejo del focus",passed:r,message:r?"El manejo del focus está implementado correctamente":"Hay problemas con el manejo del focus en modales"})}generateReport(){const t=this.results.filter(i=>i.passed).length,r=this.results.length,n=Math.round(t/r*100);let a=`# Reporte de Accesibilidad

`;return a+=`**Resumen**: ${t}/${r} pruebas pasaron (${n}%)

`,a+=`## Detalles de las Pruebas

`,this.results.forEach(i=>{const o=i.passed?"✅":"❌";a+=`### ${o} ${i.test}
`,a+=`${i.message}

`}),a}runSpecificTest(t){const r={keyboard:()=>this.testKeyboardNavigation(),"screen-reader":()=>this.testScreenReaderSupport(),contrast:()=>this.testColorContrast(),semantic:()=>this.testSemanticStructure(),forms:()=>this.testFormLabels(),modals:()=>this.testModalAccessibility(),focus:()=>this.testFocusManagement()};return r[t]?(this.results=[],r[t](),this.results[0]||null):null}};const bf=new l6,c6=({isVisible:e=!1,onClose:t})=>{const[r,n]=g.useState([]),[a,i]=g.useState(!1),[o,c]=g.useState(!1),l=async()=>{i(!0),await new Promise(y=>setTimeout(y,500));const v=bf.runAllTests();n(v),i(!1)},d=async v=>{i(!0),await new Promise(b=>setTimeout(b,200));const y=bf.runSpecificTest(v);y&&n([y]),i(!1)},u=()=>{const v=bf.generateReport(),y=new Blob([v],{type:"text/markdown"}),b=URL.createObjectURL(y),p=document.createElement("a");p.href=b,p.download=`accessibility-report-${new Date().toISOString().split("T")[0]}.md`,document.body.appendChild(p),p.click(),document.body.removeChild(p),URL.revokeObjectURL(b)};if(g.useEffect(()=>{e&&l()},[e]),!e)return null;const h=r.filter(v=>v.passed).length,f=r.length,x=f>0?Math.round(h/f*100):0;return s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",role:"dialog","aria-modal":"true","aria-labelledby":"accessibility-tester-title",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{id:"accessibility-tester-title",className:"text-2xl font-bold text-gray-900",children:"Tester de Accesibilidad"}),s.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded","aria-label":"Cerrar tester de accesibilidad",children:"×"})]}),s.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Resumen"}),s.jsxs("p",{className:"text-gray-600",children:[h," de ",f," pruebas pasaron (",x,"%)"]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:l,disabled:a,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Ejecutar todas las pruebas de accesibilidad",children:a?"Ejecutando...":"Ejecutar Todas"}),s.jsx("button",{onClick:u,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500","aria-label":"Descargar reporte de accesibilidad",children:"Descargar Reporte"})]})]})}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Pruebas Específicas"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[{key:"keyboard",label:"Teclado"},{key:"screen-reader",label:"Lector Pantalla"},{key:"contrast",label:"Contraste"},{key:"semantic",label:"Estructura"},{key:"forms",label:"Formularios"},{key:"modals",label:"Modales"},{key:"focus",label:"Focus"}].map(v=>s.jsx("button",{onClick:()=>d(v.key),disabled:a,className:"px-3 py-2 text-sm bg-gray-200 text-gray-700 rounded hover:bg-gray-300 disabled:opacity-50 focus:outline-none focus:ring-2 focus:ring-gray-500","aria-label":`Ejecutar prueba de ${v.label}`,children:v.label},v.key))})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Resultados"}),a?s.jsxs("div",{className:"flex items-center justify-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"}),s.jsx("span",{className:"ml-2 text-gray-600",children:"Ejecutando pruebas..."})]}):r.length>0?s.jsx("div",{className:"space-y-3",children:r.map((v,y)=>s.jsx("div",{className:`p-4 rounded-lg border ${v.passed?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center",children:[v.passed?"✅":"❌"," ",v.test]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:v.message})]}),s.jsx("span",{className:`px-2 py-1 text-xs rounded ${v.passed?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:v.passed?"PASÓ":"FALLÓ"})]})},y))}):s.jsx("div",{className:"text-center py-8 text-gray-500",children:"No hay resultados disponibles. Ejecuta las pruebas para ver los resultados."})]}),s.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[s.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Información"}),s.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[s.jsx("li",{children:"• Las pruebas verifican el cumplimiento de WCAG 2.1 AA"}),s.jsx("li",{children:"• Se recomienda usar herramientas especializadas para contraste de colores"}),s.jsx("li",{children:"• Los resultados son una guía, no reemplazan pruebas manuales"}),s.jsx("li",{children:"• Para pruebas completas, usar lectores de pantalla reales"})]})]})]})})},cd=({isOpen:e,onClose:t,title:r,children:n,description:a,size:i="md",closeOnOverlayClick:o=!0,closeOnEscape:c=!0})=>{const l=g.useRef(null),d=g.useRef(null),u={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-2xl"};g.useEffect(()=>{const x=v=>{v.key==="Escape"&&c&&t()};return e&&(document.addEventListener("keydown",x),d.current=document.activeElement),()=>{document.removeEventListener("keydown",x)}},[e,t,c]),g.useEffect(()=>(e?(document.body.style.overflow="hidden",setTimeout(()=>{if(l.current){const v=l.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')[0];v&&v.focus()}},100)):(document.body.style.overflow="unset",d.current&&d.current.focus()),()=>{document.body.style.overflow="unset"}),[e]);const h=x=>{x.target===x.currentTarget&&o&&t()},f=()=>{t()};return e?s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title","aria-describedby":a?"modal-description":void 0,onClick:h,children:s.jsxs("div",{ref:l,className:`bg-white rounded-lg shadow-xl w-full ${u[i]} max-h-[90vh] overflow-y-auto`,role:"document",children:[s.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[s.jsxs("div",{children:[s.jsx("h2",{id:"modal-title",className:"text-xl font-bold text-gray-900",children:r}),a&&s.jsx("p",{id:"modal-description",className:"text-sm text-gray-600 mt-1",children:a})]}),s.jsx("button",{onClick:f,className:"text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded-md p-1","aria-label":"Cerrar modal",type:"button",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"p-6",children:n})]})}):null},d6=({isOpen:e,onClose:t})=>{const[r,n]=g.useState({nombre:"",email:"",telefono:"",asunto:"",mensaje:""}),[a,i]=g.useState(!1),[o,c]=g.useState("idle"),l=u=>{const{name:h,value:f}=u.target;n(x=>({...x,[h]:f}))},d=async u=>{u.preventDefault(),i(!0),c("idle");try{if((await fetch("/api/contact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...r,ip:"unknown",userAgent:navigator.userAgent})})).ok)c("success"),n({nombre:"",email:"",telefono:"",asunto:"",mensaje:""}),setTimeout(()=>{t(),c("idle")},2e3);else throw new Error("Error en el servidor")}catch(h){console.error("Error al enviar formulario:",h),c("error")}finally{i(!1)}};return s.jsx(cd,{isOpen:e,onClose:t,title:"Contáctanos",description:"Complete el formulario para solicitar una consulta gratuita",size:"xl",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Información de Contacto"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:s.jsxs("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Dirección"}),s.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Calle Principal 123",s.jsx("br",{}),"Madrid, 28001",s.jsx("br",{}),"España"]})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:s.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Teléfono"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s.jsx("a",{href:"tel:+34612345678",className:"hover:text-blue-600",children:"+34 612 345 678"})})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:s.jsx("svg",{className:"w-4 h-4 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Email"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s.jsx("a",{href:"mailto:info@despachoabogados.com",className:"hover:text-blue-600",children:"info@despachoabogados.com"})})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center",children:s.jsx("svg",{className:"w-4 h-4 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Horario de Atención"}),s.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Lunes - Viernes: 9:00 - 18:00",s.jsx("br",{}),"Sábados: 9:00 - 14:00",s.jsx("br",{}),"Domingos: Cerrado"]})]})]})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Servicios Destacados"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-blue-600 text-xs",children:"⚖️"})}),s.jsx("span",{className:"text-sm text-gray-700",children:"Derecho Civil"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-green-600 text-xs",children:"👥"})}),s.jsx("span",{className:"text-sm text-gray-700",children:"Derecho Laboral"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-6 h-6 bg-purple-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-purple-600 text-xs",children:"👨‍👩‍👧‍👦"})}),s.jsx("span",{className:"text-sm text-gray-700",children:"Derecho Familiar"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-6 h-6 bg-orange-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-orange-600 text-xs",children:"🏢"})}),s.jsx("span",{className:"text-sm text-gray-700",children:"Derecho Empresarial"})]})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Solicita tu Consulta Gratuita"}),s.jsxs("form",{onSubmit:d,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"nombre",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre completo *"}),s.jsx("input",{type:"text",id:"nombre",name:"nombre",value:r.nombre,onChange:l,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Tu nombre completo"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),s.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:l,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"tu@email.com"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"telefono",className:"block text-sm font-medium text-gray-700 mb-1",children:"Teléfono"}),s.jsx("input",{type:"tel",id:"telefono",name:"telefono",value:r.telefono,onChange:l,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"+34 612 345 678"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"asunto",className:"block text-sm font-medium text-gray-700 mb-1",children:"Asunto *"}),s.jsxs("select",{id:"asunto",name:"asunto",value:r.asunto,onChange:l,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Selecciona un asunto"}),s.jsx("option",{value:"Consulta General",children:"Consulta General"}),s.jsx("option",{value:"Derecho Civil",children:"Derecho Civil"}),s.jsx("option",{value:"Derecho Laboral",children:"Derecho Laboral"}),s.jsx("option",{value:"Derecho Familiar",children:"Derecho Familiar"}),s.jsx("option",{value:"Derecho Empresarial",children:"Derecho Empresarial"}),s.jsx("option",{value:"Otro",children:"Otro"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"mensaje",className:"block text-sm font-medium text-gray-700 mb-1",children:"Mensaje *"}),s.jsx("textarea",{id:"mensaje",name:"mensaje",value:r.mensaje,onChange:l,required:!0,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Describe tu consulta o situación legal..."})]}),o==="success"&&s.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md",role:"alert","aria-live":"polite",children:s.jsx("p",{className:"text-green-600 text-sm",children:"¡Gracias por tu mensaje! Nos pondremos en contacto contigo en las próximas 24 horas."})}),o==="error"&&s.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",role:"alert","aria-live":"polite",children:s.jsx("p",{className:"text-red-600 text-sm",children:"Ha ocurrido un error al enviar tu mensaje. Por favor, inténtalo de nuevo."})}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Cancelar"}),s.jsx("button",{type:"submit",disabled:a,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Enviando...":"Enviar Consulta"})]})]})]})]})})},K1=()=>{const{user:e,loading:t,logout:r}=Ee(),[n,a]=g.useState(!1),[i,o]=g.useState([]),[c,l]=g.useState("© 2024 Despacho Legal. Todos los derechos reservados."),[d,u]=g.useState(0),[h,f]=g.useState(!1),[x,v]=g.useState(!1),y=(e==null?void 0:e.role)==="ADMIN",b=(e==null?void 0:e.role)==="ABOGADO",p=(e==null?void 0:e.role)==="CLIENTE",{siteName:m,logoUrl:j,primaryColor:w,menuItems:N,menuOrientation:C,headerFixed:S,footerVisible:E,loading:k}=n6(t||e==null?void 0:e.role),T={backgroundColor:w},D=S?"fixed top-0 w-full z-50":"",$=P=>{if(P.children&&P.children.length>0)return s.jsxs("div",{className:"relative",children:[s.jsxs("button",{className:"hover:text-blue-200 px-2 py-1 rounded focus:outline-none flex items-center",onClick:()=>a(R=>!R),onBlur:()=>setTimeout(()=>a(!1),200),children:[P.icon&&s.jsx("span",{className:"mr-1",children:P.icon}),P.label,s.jsx("svg",{className:"inline w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),n&&s.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white text-gray-900 rounded shadow-lg z-50",onMouseEnter:()=>a(!0),onMouseLeave:()=>setTimeout(()=>a(!1),100),children:P.children.map((R,W)=>s.jsxs(be,{to:R.url,className:"block px-4 py-2 hover:bg-blue-100 transition-colors",onClick:V=>{V.stopPropagation(),a(!1)},children:[R.icon&&s.jsx("span",{className:"mr-2",children:R.icon}),R.label]},R.id||R.label||`child-${W}`))})]});const M=P.url&&P.url.includes("/chat");return s.jsxs(be,{to:P.url,className:"hover:text-blue-200 flex items-center relative",target:P.isExternal?"_blank":void 0,rel:P.isExternal?"noopener noreferrer":void 0,children:[P.icon&&s.jsx("span",{className:"mr-1",children:P.icon}),P.label,M&&d>0&&s.jsx("span",{className:"ml-1 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-600 text-white absolute -top-2 -right-4",children:d})]})},_=()=>y?[{label:"Admin Dashboard",url:"/admin/dashboard",icon:"🏠"},{label:"Usuarios",url:"/admin/users",icon:"👥"},{label:"Expedientes",url:"/admin/cases",icon:"📋"},{label:"Citas",url:"/admin/appointments",icon:"📅"},{label:"Tareas",url:"/admin/tasks",icon:"✅"},{label:"Documentos",url:"/admin/documents",icon:"📄"},{label:"Reportes",url:"/admin/reports",icon:"📊"},{label:"Servicios",url:"/admin/services",icon:"⚖️"},{label:"Home Builder",url:"/admin/home-builder",icon:"🎨"}]:b?[{label:"Dashboard",url:"/dashboard",icon:"🏠"},{label:"Mis Expedientes",url:"/lawyer/cases",icon:"📋"},{label:"Citas",url:"/lawyer/appointments",icon:"📅"},{label:"Tareas",url:"/lawyer/tasks",icon:"✅"},{label:"Chat",url:"/lawyer/chat",icon:"💬"},{label:"Reportes",url:"/lawyer/reports",icon:"📊"},{label:"Facturación",url:"/lawyer/facturacion",icon:"🧾",children:[{label:"Provisión de Fondos",url:"/lawyer/provisiones",icon:"💰"},{label:"Facturación Electrónica",url:"/lawyer/facturacion",icon:"📄"}]}]:p?[{label:"Dashboard",url:"/dashboard",icon:"🏠"},{label:"Mis Expedientes",url:"/client/cases",icon:"📋"},{label:"Provisiones",url:"/client/provisiones",icon:"💰"},{label:"Mis Citas",url:"/client/appointments",icon:"📅"},{label:"Chat",url:"/client/chat",icon:"💬"}]:[],A=k?_():N&&N.length>0?N:_();g.useEffect(()=>{(async()=>{try{const[M,R]=await Promise.all([X.get("/parametros/contact"),X.get("/parametros/legal")]),W=Array.isArray(M.data)?M.data:[];o(W);const z=(Array.isArray(R.data)?R.data:[]).find(H=>H.clave==="COPYRIGHT_TEXT");z&&l(z.valor)}catch{o([])}})()},[]),g.useEffect(()=>{e&&(async()=>{try{if(!e)return;const M=await X.get("/chat/unread-count");u(M.data.count||0)}catch{u(0)}})()},[e]);const B=P=>{if(!Array.isArray(i))return"";const M=i.find(R=>R.clave===P);return M?M.valor:""};return s.jsxs("div",{className:"min-h-screen flex flex-col",children:[s.jsx("nav",{className:`text-white ${D}`,style:T,children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex items-center justify-between h-16",children:[s.jsx("div",{className:"flex items-center",children:s.jsxs(be,{to:"/",className:"text-xl font-bold flex items-center",children:[j&&s.jsx("img",{src:j,alt:m,className:"h-8 w-auto mr-2",onError:P=>{P.currentTarget.style.display="none"}}),m]})}),s.jsx("div",{className:"flex items-center space-x-4 relative",children:e?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:`flex items-center space-x-4 ${C==="vertical"?"flex-col":""}`,children:A.map((P,M)=>s.jsx(I.Fragment,{children:$(P)},P.id||P.label||`menu-item-${M}`))}),s.jsxs("span",{className:"text-sm font-medium text-white bg-blue-900 rounded px-3 py-1",children:[e.name," ",e.email&&s.jsxs("span",{className:"text-gray-300",children:["(",e.email,")"]})]}),s.jsx("button",{onClick:()=>f(!0),className:"hover:text-blue-200 px-2 py-1 rounded focus:outline-none focus:ring-2 focus:ring-blue-300","aria-label":"Abrir tester de accesibilidad",title:"Probar accesibilidad",children:"♿"}),s.jsx("button",{onClick:r,className:"hover:text-blue-200",children:"Cerrar Sesión"})]}):s.jsxs(s.Fragment,{children:[s.jsx(be,{to:"/login",className:"hover:text-blue-200",children:"Iniciar Sesión"}),s.jsx(be,{to:"/register",className:"hover:text-blue-200",children:"Registro"})]})})]})})}),S&&s.jsx("div",{className:"h-16"}),e&&s.jsx(a6,{}),s.jsx("main",{className:"flex-grow",children:s.jsx("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:s.jsx($g,{})})}),E&&s.jsx("footer",{className:"bg-gray-800 text-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:[s.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Información de Contacto"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Contacto"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[B("CONTACT_INFO")&&s.jsx("p",{className:"text-gray-300 mb-2",children:B("CONTACT_INFO")}),B("CONTACT_EMAIL")&&s.jsxs("button",{onClick:()=>v(!0),className:"text-left hover:text-blue-300 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1 py-1 transition-colors","aria-label":`Abrir formulario de contacto. Email: ${B("CONTACT_EMAIL")}`,children:["📧 ",B("CONTACT_EMAIL")]}),B("CONTACT_PHONE_PREFIX")&&B("CONTACT_PHONE")&&s.jsxs("p",{children:["📞 ",B("CONTACT_PHONE_PREFIX")," ",B("CONTACT_PHONE")]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Enlaces"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsx(be,{to:"/privacidad",className:"hover:text-gray-300 block",children:"Política de Privacidad"}),s.jsx(be,{to:"/terminos",className:"hover:text-gray-300 block",children:"Términos de Servicio"}),s.jsx(be,{to:"/cookies",className:"hover:text-gray-300 block",children:"Política de Cookies"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Síguenos"}),s.jsxs("div",{className:"flex space-x-4",children:[B("SOCIAL_FACEBOOK")&&s.jsx("a",{href:B("SOCIAL_FACEBOOK"),target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-white",children:"📘 Facebook"}),B("SOCIAL_TWITTER")&&s.jsx("a",{href:B("SOCIAL_TWITTER"),target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-white",children:"🐦 Twitter"}),B("SOCIAL_LINKEDIN")&&s.jsx("a",{href:B("SOCIAL_LINKEDIN"),target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-white",children:"💼 LinkedIn"}),B("SOCIAL_INSTAGRAM")&&s.jsx("a",{href:B("SOCIAL_INSTAGRAM"),target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-white",children:"📷 Instagram"})]})]})]}),s.jsx("div",{className:"mt-8 pt-8 border-t border-gray-700 text-center",children:s.jsx("p",{children:c})})]})}),!e&&s.jsx(o6,{}),s.jsx(c6,{isVisible:h,onClose:()=>f(!1)}),s.jsx(d6,{isOpen:x,onClose:()=>v(!1)})]})},Q1=({component:e})=>{const t=()=>{switch(e.type){case"hero-banner":return s.jsx(u6,{props:e.props});case"service-cards":return s.jsx(h6,{props:e.props});case"contact-form":return s.jsx(f6,{props:e.props});case"testimonials":return s.jsx(p6,{props:e.props});case"stats":return s.jsx(g6,{props:e.props});case"text-block":return s.jsx(x6,{props:e.props});case"image-gallery":return s.jsx(v6,{props:e.props});case"map":return s.jsx(y6,{props:e.props});case"divider":return s.jsx(b6,{props:e.props});case"spacer":return s.jsx(j6,{props:e.props});default:return s.jsx("div",{className:"p-4 bg-red-100 border border-red-300 rounded",children:s.jsxs("p",{className:"text-red-700",children:["Componente no reconocido: ",e.type]})})}};return s.jsx("div",{className:"component-renderer",children:t()})},u6=({props:e})=>{const[t,r]=g.useState(!1),[n,a]=g.useState(!1);return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"relative bg-gradient-to-r from-blue-600 to-purple-700 text-white p-8 rounded-lg",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:e.title||"Banner Principal"}),s.jsx("p",{className:"text-xl mb-6 opacity-90",children:e.subtitle||"Subtítulo del banner"}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s.jsx("button",{onClick:()=>r(!0),className:"inline-block bg-white text-blue-600 px-6 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors",children:e.ctaText||"Consultar Ahora"}),s.jsx("button",{onClick:()=>a(!0),className:"inline-block border-2 border-white text-white px-6 py-3 rounded-lg font-semibold hover:bg-white hover:text-blue-600 transition-colors",children:e.secondaryText||"Conocer Servicios"})]})]})}),t&&s.jsx(X1,{onClose:()=>r(!1),props:{title:"Solicitar Consulta Gratuita",submitText:"Enviar Consulta"}}),n&&s.jsx(m6,{onClose:()=>a(!1)})]})},h6=({props:e})=>s.jsxs("div",{className:"bg-white p-6 rounded-lg border",children:[s.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:e.title||"Nuestros Servicios"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:(e.services||[]).map((t,r)=>s.jsxs("div",{className:"text-center p-4 border rounded-lg hover:shadow-md transition-shadow",children:[s.jsx("div",{className:"text-4xl mb-3",children:t.icon||"⚖️"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:t.title||"Servicio"}),s.jsx("p",{className:"text-gray-600",children:t.description||"Descripción del servicio"})]},r))})]}),f6=({props:e})=>{const[t,r]=g.useState(!1);return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg border text-center",children:[s.jsx("h2",{className:"text-2xl font-bold mb-4",children:e.title||"Contáctanos"}),s.jsx("p",{className:"text-gray-600 mb-6",children:e.subtitle||"Estamos aquí para ayudarte"}),s.jsx("button",{onClick:()=>r(!0),className:"bg-blue-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:e.buttonText||"Solicitar Consulta"})]}),t&&s.jsx(X1,{onClose:()=>r(!1),props:e})]})},X1=({onClose:e,props:t})=>{const[r,n]=g.useState({nombre:"",email:"",telefono:"",asunto:"Consulta desde formulario de contacto",mensaje:""}),[a,i]=g.useState(!1),[o,c]=g.useState("idle"),l=u=>{const{name:h,value:f}=u.target;n(x=>({...x,[h]:f}))},d=async u=>{u.preventDefault(),i(!0),c("idle");try{const h=await fetch("/api/contact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...r,ip:"unknown",userAgent:navigator.userAgent})});if(h.ok)c("success"),n({nombre:"",email:"",telefono:"",asunto:"Consulta desde formulario de contacto",mensaje:""}),setTimeout(()=>{e()},2e3);else{const f=await h.text();throw console.error("Error del servidor:",h.status,f),new Error(`Error ${h.status}: ${f}`)}}catch(h){console.error("Error al enviar formulario:",h),c("error")}finally{i(!1)}};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsx("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-2xl font-bold",children:t.title||"Contáctanos"}),s.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),o==="success"&&s.jsx("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),s.jsx("div",{className:"ml-3",children:s.jsx("p",{className:"text-sm text-green-800",children:"¡Gracias por tu mensaje! Nos pondremos en contacto contigo en las próximas 24 horas."})})]})}),o==="error"&&s.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),s.jsx("div",{className:"ml-3",children:s.jsx("p",{className:"text-sm text-red-800",children:"Ha ocurrido un error al enviar tu mensaje. Por favor, inténtalo de nuevo."})})]})}),s.jsxs("form",{onSubmit:d,className:"space-y-4",children:[s.jsx("input",{type:"text",name:"nombre",placeholder:"Nombre *",value:r.nombre,onChange:l,required:!0,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsx("input",{type:"email",name:"email",placeholder:"Email *",value:r.email,onChange:l,required:!0,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsx("input",{type:"tel",name:"telefono",placeholder:"Teléfono",value:r.telefono,onChange:l,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsx("input",{type:"text",name:"asunto",placeholder:"Asunto *",value:r.asunto,onChange:l,required:!0,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsx("textarea",{name:"mensaje",placeholder:"Mensaje *",rows:4,value:r.mensaje,onChange:l,required:!0,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsx("button",{type:"submit",disabled:a,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Enviando...":t.submitText||"Enviar Mensaje"})]})]})})})},m6=({onClose:e})=>{const[t,r]=g.useState([]),[n,a]=g.useState(!0),[i,o]=g.useState(null);return g.useEffect(()=>{(async()=>{try{a(!0);const l=await fetch("/api/parametros/services");if(l.ok){const d=await l.json();r(d)}else throw new Error("Error al cargar los servicios")}catch(l){console.error("Error fetching services:",l),o("Error al cargar los servicios")}finally{a(!1)}})()},[]),s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsx("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Nuestros Servicios Legales"}),s.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n&&s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Cargando servicios..."})]}),i&&s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"text-red-500 mb-4",children:s.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),s.jsx("p",{className:"text-gray-600",children:i})]}),!n&&!i&&s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.map(c=>s.jsx("div",{className:"bg-gray-50 p-6 rounded-lg hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"text-4xl flex-shrink-0",children:c.icon||"⚖️"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:c.title}),s.jsx("p",{className:"text-gray-600 leading-relaxed",children:c.description})]})]})},c.id))}),s.jsx("div",{className:"mt-8 text-center",children:s.jsx("button",{onClick:()=>{e(),setTimeout(()=>{const c=document.querySelector('[onclick*="setShowContactModal"]');c&&c.click()},100)},className:"bg-blue-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:"Solicitar Consulta Gratuita"})})]})})})},p6=({props:e})=>s.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[s.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:e.title||"Lo que dicen nuestros clientes"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:(e.testimonials||[]).map((t,r)=>s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[s.jsx("div",{className:"flex items-center mb-3",children:s.jsx("div",{className:"text-yellow-400 text-lg",children:"★★★★★"})}),s.jsxs("p",{className:"text-gray-700 mb-3",children:['"',t.text||"Excelente servicio",'"']}),s.jsx("p",{className:"font-semibold text-gray-900",children:t.name||"Cliente"})]},r))})]}),g6=({props:e})=>s.jsxs("div",{className:"bg-white p-6 rounded-lg border",children:[s.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:e.title||"Nuestros Números"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:(e.stats||[]).map((t,r)=>s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:t.value||"0"}),s.jsx("div",{className:"text-gray-600",children:t.label||"Estadística"})]},r))})]}),x6=({props:e})=>s.jsxs("div",{className:`bg-white p-6 rounded-lg border text-${e.alignment||"left"}`,children:[s.jsx("h2",{className:"text-2xl font-bold mb-4",children:e.title||"Título del bloque"}),s.jsx("p",{className:`text-gray-700 ${e.fontSize==="large"?"text-lg":e.fontSize==="small"?"text-sm":"text-base"}`,children:e.content||"Contenido del bloque de texto. Aquí puedes escribir cualquier información relevante."})]}),v6=({props:e})=>s.jsxs("div",{className:"bg-white p-6 rounded-lg border",children:[s.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:e.title||"Galería de Imágenes"}),s.jsx("div",{className:`grid grid-cols-${e.columns||3} gap-4`,children:(e.images||[]).map((t,r)=>s.jsx("div",{className:"aspect-square bg-gray-200 rounded-lg flex items-center justify-center",children:s.jsxs("span",{className:"text-gray-500",children:["🖼️ Imagen ",r+1]})},r))})]}),y6=({props:e})=>s.jsxs("div",{className:"bg-white p-6 rounded-lg border",children:[s.jsx("h2",{className:"text-2xl font-bold text-center mb-4",children:e.title||"Nuestra Ubicación"}),s.jsx("div",{className:"bg-gray-200 h-64 rounded-lg flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-4xl mb-2",children:"🗺️"}),s.jsx("p",{className:"text-gray-600",children:e.address||"Dirección del despacho"})]})})]}),b6=({props:e})=>s.jsx("div",{className:"flex items-center justify-center py-4",children:s.jsx("div",{className:`w-full h-${e.thickness||1} bg-${e.color||"gray-300"}`,style:{backgroundColor:e.color||"#e5e7eb"}})}),j6=({props:e})=>s.jsx("div",{style:{height:`${e.height||40}px`}}),w6=()=>{const[e,t]=g.useState(null),[r,n]=g.useState(!0),[a,i]=g.useState(null),{user:o}=Ee();return g.useEffect(()=>{(async()=>{try{n(!0);const l=await fetch("/api/layouts/home");if(l.ok){const d=await l.json();t(d)}else if(l.status===404)t(Gv());else throw new Error("Error al cargar el layout")}catch(l){console.error("Error fetching layout:",l),t(Gv())}finally{n(!1)}})()},[]),r?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Cargando..."})]})}):a&&!e?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Error"}),s.jsx("p",{className:"text-gray-600",children:a})]})}):e?s.jsxs("div",{className:"min-h-screen",children:[s.jsx("h1",{className:"sr-only",children:"Página Principal - Despacho Legal"}),e.components.map(c=>s.jsx("div",{children:s.jsx(Q1,{component:c})},c.id))]}):s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-600 mb-4",children:"Página no encontrada"}),s.jsx("p",{className:"text-gray-500",children:"No hay contenido configurado para esta página."})]})})},Gv=()=>({id:"default-home",name:"Home Page",components:[{id:"default-hero",type:"hero-banner",props:{title:"Bienvenido a Nuestro Despacho Legal",subtitle:"Servicios legales profesionales y confiables para proteger sus derechos",backgroundImage:"/images/hero-bg.jpg",ctaText:"Solicitar Consulta Gratuita",secondaryText:"Conocer Servicios",secondaryLink:"/contact"},order:0},{id:"default-services",type:"service-cards",props:{title:"Nuestros Servicios",services:[{title:"Derecho Civil",description:"Asesoría especializada en casos civiles y comerciales",icon:"⚖️"},{title:"Derecho Laboral",description:"Protección de sus derechos laborales y reclamaciones",icon:"👥"},{title:"Derecho Familiar",description:"Divorcios, custodia y asuntos familiares",icon:"👨‍👩‍👧‍👦"}]},order:1},{id:"default-stats",type:"stats",props:{title:"Nuestros Números",stats:[{label:"Casos Exitosos",value:"500+",icon:"✅"},{label:"Años de Experiencia",value:"15",icon:"📅"},{label:"Clientes Satisfechos",value:"1000+",icon:"👥"}]},order:2},{id:"default-contact",type:"contact-form",props:{title:"¿Necesitas Asesoría Legal?",subtitle:"Nuestros abogados especialistas están listos para ayudarte",buttonText:"Solicitar Consulta Gratuita",submitText:"Enviar Consulta"},order:3}],version:1,lastModified:new Date().toISOString()}),N6=()=>s.jsx(w6,{}),C6=()=>{const[e,t]=g.useState({nombre:"",email:"",telefono:"",asunto:"",mensaje:""}),[r,n]=g.useState(!1),[a,i]=g.useState("idle"),o=l=>{const{name:d,value:u}=l.target;t(h=>({...h,[d]:u}))},c=async l=>{l.preventDefault(),n(!0),i("idle");try{if((await fetch("/api/contact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,ip:"unknown",userAgent:navigator.userAgent})})).ok)i("success"),t({nombre:"",email:"",telefono:"",asunto:"",mensaje:""});else throw new Error("Error en el servidor")}catch(d){console.error("Error al enviar formulario:",d),i("error")}finally{n(!1)}};return s.jsx(K1,{children:s.jsx("div",{className:"min-h-screen bg-gray-50 py-12",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Contáctanos"}),s.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Estamos aquí para ayudarte. Nuestros abogados especialistas están listos para atender tu consulta y brindarte la asesoría legal que necesitas."})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-8",children:[s.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-6",children:"Información de Contacto"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:s.jsxs("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Dirección"}),s.jsxs("p",{className:"text-gray-600 mt-1",children:["Calle Principal 123",s.jsx("br",{}),"Madrid, 28001",s.jsx("br",{}),"España"]})]})]}),s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:s.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Teléfono"}),s.jsx("p",{className:"text-gray-600 mt-1",children:s.jsx("a",{href:"tel:+34612345678",className:"hover:text-blue-600",children:"+34 612 345 678"})})]})]}),s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:s.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Email"}),s.jsx("p",{className:"text-gray-600 mt-1",children:s.jsx("a",{href:"mailto:info@despachoabogados.com",className:"hover:text-blue-600",children:"info@despachoabogados.com"})})]})]}),s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:s.jsx("svg",{className:"w-6 h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Horario de Atención"}),s.jsxs("p",{className:"text-gray-600 mt-1",children:["Lunes - Viernes: 9:00 - 18:00",s.jsx("br",{}),"Sábados: 9:00 - 14:00",s.jsx("br",{}),"Domingos: Cerrado"]})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-8",children:[s.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-6",children:"Servicios Destacados"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-blue-600 text-sm font-semibold",children:"⚖️"})}),s.jsx("span",{className:"text-gray-700",children:"Derecho Civil"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-green-600 text-sm font-semibold",children:"👥"})}),s.jsx("span",{className:"text-gray-700",children:"Derecho Laboral"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-purple-600 text-sm font-semibold",children:"👨‍👩‍👧‍👦"})}),s.jsx("span",{className:"text-gray-700",children:"Derecho Familiar"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-orange-600 text-sm font-semibold",children:"🏢"})}),s.jsx("span",{className:"text-gray-700",children:"Derecho Empresarial"})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-8",children:[s.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-6",children:"Solicita tu Consulta Gratuita"}),a==="success"&&s.jsx("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),s.jsx("div",{className:"ml-3",children:s.jsx("p",{className:"text-sm text-green-800",children:"¡Gracias por tu mensaje! Nos pondremos en contacto contigo en las próximas 24 horas."})})]})}),a==="error"&&s.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),s.jsx("div",{className:"ml-3",children:s.jsx("p",{className:"text-sm text-red-800",children:"Ha ocurrido un error al enviar tu mensaje. Por favor, inténtalo de nuevo."})})]})}),s.jsxs("form",{onSubmit:c,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"nombre",className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre Completo *"}),s.jsx("input",{type:"text",id:"nombre",name:"nombre",value:e.nombre,onChange:o,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Tu nombre completo"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),s.jsx("input",{type:"email",id:"email",name:"email",value:e.email,onChange:o,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"tu@email.com"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"telefono",className:"block text-sm font-medium text-gray-700 mb-2",children:"Teléfono"}),s.jsx("input",{type:"tel",id:"telefono",name:"telefono",value:e.telefono,onChange:o,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"+34 612 345 678"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"asunto",className:"block text-sm font-medium text-gray-700 mb-2",children:"Asunto *"}),s.jsxs("select",{id:"asunto",name:"asunto",value:e.asunto,onChange:o,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Selecciona un asunto"}),s.jsx("option",{value:"consulta-civil",children:"Consulta - Derecho Civil"}),s.jsx("option",{value:"consulta-laboral",children:"Consulta - Derecho Laboral"}),s.jsx("option",{value:"consulta-familiar",children:"Consulta - Derecho Familiar"}),s.jsx("option",{value:"consulta-empresarial",children:"Consulta - Derecho Empresarial"}),s.jsx("option",{value:"contratos",children:"Elaboración de Contratos"}),s.jsx("option",{value:"herencias",children:"Gestión de Herencias"}),s.jsx("option",{value:"otro",children:"Otro"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"mensaje",className:"block text-sm font-medium text-gray-700 mb-2",children:"Mensaje *"}),s.jsx("textarea",{id:"mensaje",name:"mensaje",value:e.mensaje,onChange:o,required:!0,rows:6,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Describe tu consulta o situación legal..."})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("input",{type:"checkbox",id:"privacidad",required:!0,className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsxs("label",{htmlFor:"privacidad",className:"text-sm text-gray-600",children:["Acepto la"," ",s.jsx("a",{href:"/privacidad",className:"text-blue-600 hover:text-blue-500",children:"política de privacidad"})," ","y el"," ",s.jsx("a",{href:"/terminos",className:"text-blue-600 hover:text-blue-500",children:"tratamiento de datos personales"})]})]}),s.jsx("button",{type:"submit",disabled:r,className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:r?s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Enviando..."]}):"Enviar Consulta"})]})]})]}),s.jsx("div",{className:"mt-16",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-8",children:[s.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-6 text-center",children:"Nuestra Ubicación"}),s.jsx("div",{className:"bg-gray-200 h-96 rounded-lg flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-6xl mb-4",children:"🗺️"}),s.jsx("p",{className:"text-gray-600 text-lg",children:"Calle Principal 123, Madrid, 28001"}),s.jsx("p",{className:"text-gray-500 mt-2",children:"Mapa interactivo (integrado con Google Maps)"})]})})]})})]})})})},jf=()=>{const{user:e}=Ee(),t=Ar(),[r,n]=g.useState({totalCases:0,activeCases:0,pendingAppointments:0,recentDocuments:0,totalUsers:0}),[a,i]=g.useState(!1),[o,c]=g.useState(null),[l,d]=g.useState([]),u=g.useRef(null),h=g.useRef(!1),f=g.useRef(!1),x=g.useRef(0),v=async()=>{if(!e)return;x.current+=1,console.log(`Dashboard loadDashboardData: user (execution #${x.current})`,e);const N=e.id;if(console.log(`Dashboard loadDashboardData: Current user ID: ${N}, Last user ID: ${u.current}, Initialized: ${h.current}`),u.current===N&&h.current){console.log("Dashboard loadDashboardData: Already initialized for this user, skipping");return}if(f.current){console.log("Dashboard loadDashboardData: Already processing, skipping duplicate execution");return}f.current=!0,u.current=N,console.log("Dashboard loadDashboardData: Starting data fetch for user:",N);try{i(!0),c(null);const C=[X.get("/cases/stats"),X.get("/appointments"),X.get("/documents/stats")];e.role==="ADMIN"&&C.push(X.get("/users")),C.push(X.get("/cases/recent")),e.role==="ABOGADO"&&C.push(X.get("/cases/recent-activities"));const S=await Promise.allSettled(C);S.forEach((V,z)=>{V.status==="fulfilled"?console.log(`Dashboard stats result[${z}]`,V.value.data):console.error(`Dashboard stats error[${z}]`,V.reason)});const E=S[0].status==="fulfilled"?S[0].value.data:{},k=S[1].status==="fulfilled"?S[1].value.data:[],T=S[2].status==="fulfilled"?S[2].value.data:{},D=e.role==="ADMIN"&&S[3]&&S[3].status==="fulfilled"?S[3].value.data:[],$=S[e.role==="ADMIN"?4:3]&&S[e.role==="ADMIN"?4:3].status==="fulfilled"?S[e.role==="ADMIN"?4:3].value.data:[],_=e.role==="ABOGADO"&&S[4]&&S[4].status==="fulfilled"?S[4].value.data:null;let A=0,B=0,P=0,M=0,R=0;if((e.role==="ADMIN"||e.role==="ABOGADO"||e.role==="CLIENTE")&&(A=E.total||0,B=(E.abiertos||0)+(E.enProceso||0)),Array.isArray(k)){const V=new Date;e.role==="ADMIN"?P=k.filter(z=>new Date(z.date)>V).length:(e.role==="ABOGADO"||e.role==="CLIENTE")&&(P=k.filter(z=>{const H=new Date(z.date);return H.getDate()===V.getDate()&&H.getMonth()===V.getMonth()&&H.getFullYear()===V.getFullYear()}).length)}T&&typeof T.total=="number"&&(M=T.total),e.role==="ADMIN"&&Array.isArray(D)&&(R=D.length),n({totalCases:A,activeCases:B,pendingAppointments:P,recentDocuments:M,totalUsers:R});const W=[];e.role==="ABOGADO"&&_?(_.cases&&_.cases.length>0&&_.cases.forEach(V=>{W.push({action:`Expediente: ${V.title}`,time:V.createdAt,type:"case",id:V.id,link:`/lawyer/cases/${V.id}`,entityType:"Expediente"})}),_.tasks&&_.tasks.length>0&&_.tasks.forEach(V=>{var G,Z,F;const z=((Z=(G=V.client)==null?void 0:G.user)==null?void 0:Z.name)||"Cliente",H=(F=V.expediente)!=null&&F.title?` - ${V.expediente.title}`:"";W.push({action:`Tarea: ${V.title} (${z}${H})`,time:new Date(V.createdAt).toLocaleDateString(),type:"task",id:V.id,link:`/lawyer/tasks/${V.id}`,entityType:"Tarea"})}),_.appointments&&_.appointments.length>0&&_.appointments.forEach(V=>{var H,G;const z=((G=(H=V.client)==null?void 0:H.user)==null?void 0:G.name)||"Cliente";W.push({action:`Cita: ${V.title} (${z})`,time:new Date(V.date).toLocaleDateString(),type:"appointment",id:V.id,link:`/lawyer/appointments/${V.id}`,entityType:"Cita"})}),_.provisions&&_.provisions.length>0&&_.provisions.forEach(V=>{var H,G;const z=((G=(H=V.client)==null?void 0:H.user)==null?void 0:G.name)||"Cliente";W.push({action:`Provisión: ${V.concept} (${z})`,time:new Date(V.createdAt).toLocaleDateString(),type:"provision",id:V.id,link:`/lawyer/provisiones/${V.id}`,entityType:"Provisión"})})):e.role==="CLIENTE"?(Array.isArray($)&&$.forEach(V=>{W.push({action:`Expediente: ${V.title}`,time:V.createdAt,type:"case",id:V.id,link:`/client/cases/${V.id}`,entityType:"Expediente"})}),Array.isArray(k)&&k.slice(0,3).forEach(V=>{W.push({action:`Cita: ${V.title}`,time:new Date(V.date).toLocaleDateString(),type:"appointment",id:V.id,link:`/client/appointments/${V.id}`,entityType:"Cita"})})):(Array.isArray($)&&$.forEach(V=>{W.push({action:`Expediente: ${V.title}`,time:V.createdAt,type:"case",id:V.id,link:`/admin/cases/${V.id}`,entityType:"Expediente"})}),e.role==="ADMIN"&&R>0&&W.push({action:`${R} usuarios registrados`,time:"Total",type:"user",link:"/admin/users",entityType:"user"})),d(W.slice(0,4)),h.current=!0,console.log("Dashboard loadDashboardData: Data fetch completed successfully for user:",N)}catch(C){console.error("Error fetching dashboard data:",C),c("Error al cargar las estadísticas del dashboard")}finally{f.current=!1,i(!1)}};g.useEffect(()=>{e&&window.location.pathname==="/dashboard"&&(e.role==="ADMIN"?t("/admin/dashboard",{replace:!0}):e.role==="ABOGADO"?t("/lawyer/dashboard",{replace:!0}):e.role==="CLIENTE"&&t("/client/dashboard",{replace:!0}))},[e,t]),g.useEffect(()=>{e?v():(u.current=null,h.current=!1,f.current=!1)},[e==null?void 0:e.id]);const y=(N,C)=>{if(N===0)return{value:"0%",positive:!1,neutral:!0};const S=Math.random()*20+5;return Math.random()>.3?{value:`+${S.toFixed(1)}%`,positive:!0,neutral:!1}:{value:`-${(S*.5).toFixed(1)}%`,positive:!1,neutral:!1}},b=()=>{const N=y(r.totalCases),C=y(r.activeCases),S=y(r.pendingAppointments),E=y(r.recentDocuments);return{cases:N,activeCases:C,appointments:S,documents:E}},p=()=>{const N=b();return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(as,{title:"Total Usuarios",value:r.totalUsers,change:y(r.totalUsers).value,positive:y(r.totalUsers).positive,neutral:y(r.totalUsers).neutral}),s.jsx(as,{title:"Expedientes Activos",value:r.activeCases,change:N.activeCases.value,positive:N.activeCases.positive,neutral:N.activeCases.neutral}),s.jsx(as,{title:"Citas Pendientes",value:r.pendingAppointments,change:N.appointments.value,positive:N.appointments.positive,neutral:N.appointments.neutral}),s.jsx(as,{title:"Documentos",value:r.recentDocuments,change:N.documents.value,positive:N.documents.positive,neutral:N.documents.neutral})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsx(Ct,{title:"Gestión de Usuarios",description:"Administrar usuarios, roles y permisos",icon:"👥",link:"/admin/users",color:"blue"}),s.jsx(Ct,{title:"Todos los Expedientes",description:"Ver y gestionar todos los casos",icon:"📋",link:"/admin/cases",color:"green"}),s.jsx(Ct,{title:"Reportes y Estadísticas",description:"Análisis y reportes del sistema",icon:"📊",link:"/admin/reports",color:"purple"}),s.jsx(Ct,{title:"Configuración del Sistema",description:"Configurar parámetros generales",icon:"⚙️",link:"/admin/settings",color:"gray"}),s.jsx(Ct,{title:"Auditoría",description:"Registros de actividad del sistema",icon:"🔍",link:"/admin/audit",color:"yellow"}),s.jsx(Ct,{title:"Backup y Restauración",description:"Gestionar copias de seguridad",icon:"💾",link:"/admin/backup",color:"red"})]}),s.jsx(wf,{role:"ADMIN",activities:l})]})},m=()=>{const N=b();return s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Estadísticas Principales"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(as,{title:"Mis Casos",value:r.totalCases,change:N.cases.value,positive:N.cases.positive,neutral:N.cases.neutral}),s.jsx(as,{title:"Casos Activos",value:r.activeCases,change:N.activeCases.value,positive:N.activeCases.positive,neutral:N.activeCases.neutral}),s.jsx(as,{title:"Citas Hoy",value:r.pendingAppointments,change:N.appointments.value,positive:N.appointments.positive,neutral:N.appointments.neutral}),s.jsx(as,{title:"Documentos",value:r.recentDocuments,change:N.documents.value,positive:N.documents.positive,neutral:N.documents.neutral})]}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Acciones Rápidas"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsx(Ct,{title:"Mis Casos",description:"Gestionar casos asignados",icon:"📁",link:"/lawyer/cases",color:"blue"}),s.jsx(Ct,{title:"Mis Clientes",description:"Ver información de clientes",icon:"👤",link:"/lawyer/clients",color:"green"}),s.jsx(Ct,{title:"Provisión de Fondos",description:"Gestiona provisiones de fondos",icon:"💰",link:"/lawyer/provisiones",color:"blue"}),s.jsx(Ct,{title:"Facturación Electrónica",description:"Gestiona y firma tus facturas",icon:"🧾",link:"/lawyer/facturacion",color:"green"}),s.jsx(Ct,{title:"Calendario de Citas",description:"Programar y gestionar citas",icon:"📅",link:"/lawyer/appointments",color:"purple"}),s.jsx(Ct,{title:"Documentos",description:"Gestionar documentos legales",icon:"📄",link:"/lawyer/documents",color:"yellow"}),s.jsx(Ct,{title:"Tareas Pendientes",description:"Ver tareas y recordatorios",icon:"✅",link:"/lawyer/tasks",color:"red"})]}),s.jsx(wf,{role:"ABOGADO",activities:l})]})},j=()=>{const N=b();return s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Mis Expedientes"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsx(as,{title:"Mis Casos",value:r.totalCases,change:N.cases.value,positive:N.cases.positive,neutral:N.cases.neutral}),s.jsx(as,{title:"Casos Activos",value:r.activeCases,change:N.activeCases.value,positive:N.activeCases.positive,neutral:N.activeCases.neutral}),s.jsx(as,{title:"Citas Hoy",value:r.pendingAppointments,change:N.appointments.value,positive:N.appointments.positive,neutral:N.appointments.neutral})]}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Acciones Rápidas"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsx(Ct,{title:"Mis Expedientes",description:"Ver el estado de mis casos",icon:"📁",link:"/client/cases",color:"blue"}),s.jsx(Ct,{title:"Mis Citas",description:"Ver y programar citas",icon:"📅",link:"/client/appointments",color:"green"}),s.jsx(Ct,{title:"Documentos",description:"Acceder a mis documentos",icon:"📄",link:"/client/documents",color:"purple"}),s.jsx(Ct,{title:"Contactar Abogado",description:"Enviar mensaje a mi abogado",icon:"💬",link:"/client/chat",color:"yellow"}),s.jsx(Ct,{title:"Facturas",description:"Ver mis facturas",icon:"🧾",link:"/client/invoices",color:"red"}),s.jsx(Ct,{title:"Perfil",description:"Actualizar mi información",icon:"👤",link:"/client/profile",color:"gray"})]}),s.jsx(wf,{role:"CLIENTE",activities:l})]})},w=()=>{if(!e)return s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando dashboard..."})]})});switch(e.role){case"ADMIN":return p();case"ABOGADO":return m();case"CLIENTE":return j();default:return s.jsxs("div",{className:"text-center py-12",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Rol no reconocido"}),s.jsx("p",{className:"text-gray-600",children:"Contacta al administrador del sistema."})]})}};return a?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando estadísticas..."})]})}):o?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Error"}),s.jsx("p",{className:"text-gray-600 mb-4",children:o}),s.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Reintentar"})]}):s.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),s.jsxs("p",{className:"mt-2 text-gray-600",children:["Bienvenido, ",(e==null?void 0:e.name)||"Usuario"]})]}),w()]})})},as=({title:e,value:t,change:r,positive:n,negative:a,neutral:i})=>s.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:s.jsx("div",{className:"p-5",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-md flex items-center justify-center",children:s.jsx("span",{className:"text-white text-sm font-medium",children:"📊"})})}),s.jsx("div",{className:"ml-5 w-0 flex-1",children:s.jsxs("dl",{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:e}),s.jsxs("dd",{className:"flex items-baseline",children:[s.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:t}),s.jsx("div",{className:`ml-2 flex items-baseline text-sm font-semibold ${n?"text-green-600":a?"text-red-600":"text-gray-500"}`,children:r})]})]})})]})})}),Ct=({title:e,description:t,icon:r,link:n,color:a})=>{const i=Ar(),o=c=>{switch(c){case"blue":return"bg-blue-50 border-blue-200 hover:bg-blue-100";case"green":return"bg-green-50 border-green-200 hover:bg-green-100";case"purple":return"bg-purple-50 border-purple-200 hover:bg-purple-100";case"yellow":return"bg-yellow-50 border-yellow-200 hover:bg-yellow-100";case"red":return"bg-red-50 border-red-200 hover:bg-red-100";case"gray":return"bg-gray-50 border-gray-200 hover:bg-gray-100";default:return"bg-blue-50 border-blue-200 hover:bg-blue-100"}};return s.jsx("div",{className:`p-6 border rounded-lg cursor-pointer transition-colors duration-200 ${o(a)}`,onClick:()=>i(n),children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("span",{className:"text-2xl",children:r})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:e}),s.jsx("p",{className:"text-sm text-gray-600",children:t})]})]})})},wf=({role:e,activities:t=[]})=>{const r=Ar(),n=()=>t&&t.length>0?t:[{action:"Expediente creado",time:"Hace 2 horas",type:"case",link:"#"},{action:"Cita programada",time:"Hace 1 día",type:"appointment",link:"#"},{action:"Documento subido",time:"Hace 2 días",type:"document",link:"#"}],a=c=>{c.link&&c.link!=="#"&&r(c.link)},i=c=>{switch(c){case"case":return"📁";case"appointment":return"📅";case"document":return"📄";case"task":return"✅";case"provision":return"💰";case"user":return"👤";default:return"📋"}},o=n();return s.jsxs("div",{className:"bg-white shadow rounded-lg",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Actividad Reciente"})}),s.jsx("div",{className:"divide-y divide-gray-200",children:o.length>0?o.map((c,l)=>s.jsx("div",{className:"px-6 py-4 hover:bg-gray-50 cursor-pointer transition-colors duration-150",onClick:()=>a(c),children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("span",{className:"text-lg",children:i(c.type)})}),s.jsxs("div",{className:"ml-4 flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:c.action}),s.jsx("p",{className:"text-sm text-gray-500",children:c.time})]})]})},l)):s.jsx("div",{className:"px-6 py-8 text-center",children:s.jsx("p",{className:"text-gray-500",children:"No hay actividad reciente"})})})]})};class To extends Error{}To.prototype.name="InvalidTokenError";function S6(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,r)=>{let n=r.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}function E6(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return S6(t)}catch{return atob(t)}}function k6(e,t){if(typeof e!="string")throw new To("Invalid token specified: must be a string");t||(t={});const r=t.header===!0?0:1,n=e.split(".")[r];if(typeof n!="string")throw new To(`Invalid token specified: missing part #${r+1}`);let a;try{a=E6(n)}catch(i){throw new To(`Invalid token specified: invalid base64 for part #${r+1} (${i.message})`)}try{return JSON.parse(a)}catch(i){throw new To(`Invalid token specified: invalid json for part #${r+1} (${i.message})`)}}const D6=()=>{const e=Ar(),{login:t}=Ee(),[r,n]=g.useState({email:"",password:""}),[a,i]=g.useState(""),[o,c]=g.useState(!1),l=u=>{const{name:h,value:f}=u.target;n(x=>({...x,[h]:f}))},d=async u=>{u.preventDefault();try{i(""),c(!0),await t(r.email,r.password);const h=localStorage.getItem("token");if(h){const f=k6(h);switch(console.log("Usuario decodificado:",f),f.role){case"ADMIN":e("/admin/dashboard");break;case"ABOGADO":e("/lawyer/dashboard");break;case"CLIENTE":e("/client/dashboard");break;default:e("/")}}}catch(h){console.error("Error completo:",h),i("Error al iniciar sesión. Por favor, verifique sus credenciales.")}finally{c(!1)}};return s.jsx("div",{className:"min-h-[calc(100vh-64px)] flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full space-y-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Iniciar Sesión"}),s.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["¿No tiene una cuenta?"," ",s.jsx(be,{to:"/register",className:"font-medium text-blue-600 hover:text-blue-500",children:"Regístrese aquí"})]})]}),s.jsxs("form",{className:"mt-8 space-y-6",onSubmit:d,children:[a&&s.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:s.jsx("span",{className:"block sm:inline",children:a})}),s.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"sr-only",children:"Correo Electrónico"}),s.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Correo Electrónico",value:r.email,onChange:l})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"sr-only",children:"Contraseña"}),s.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Contraseña",value:r.password,onChange:l})]})]}),s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("div",{className:"text-sm",children:s.jsx(be,{to:"/forgot-password",className:"font-medium text-blue-600 hover:text-blue-500",children:"¿Olvidó su contraseña?"})})}),s.jsx("div",{children:s.jsx("button",{type:"submit",disabled:o,className:`group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${o?"opacity-50 cursor-not-allowed":""}`,children:o?"Iniciando sesión...":"Iniciar Sesión"})})]})]})})},A6=()=>{const e=Ar(),{register:t}=Ee(),[r,n]=g.useState({email:"",password:"",confirmPassword:"",name:"",role:"CLIENTE"}),[a,i]=g.useState(""),[o,c]=g.useState(!1),l=u=>{const{name:h,value:f}=u.target;n(x=>({...x,[h]:f}))},d=async u=>{if(u.preventDefault(),r.password!==r.confirmPassword)return i("Las contraseñas no coinciden");try{i(""),c(!0),await t({email:r.email,password:r.password,name:r.name,role:r.role}),e("/dashboard")}catch{i("Error al crear la cuenta. Por favor, inténtelo de nuevo.")}finally{c(!1)}};return s.jsx("div",{className:"min-h-[calc(100vh-64px)] flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full space-y-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Crear una cuenta"}),s.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["¿Ya tiene una cuenta?"," ",s.jsx(be,{to:"/login",className:"font-medium text-blue-600 hover:text-blue-500",children:"Inicie sesión aquí"})]})]}),s.jsxs("form",{className:"mt-8 space-y-6",onSubmit:d,children:[a&&s.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:s.jsx("span",{className:"block sm:inline",children:a})}),s.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"name",className:"sr-only",children:"Nombre Completo"}),s.jsx("input",{id:"name",name:"name",type:"text",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Nombre Completo",value:r.name,onChange:l})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"sr-only",children:"Correo Electrónico"}),s.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Correo Electrónico",value:r.email,onChange:l})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"sr-only",children:"Contraseña"}),s.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Contraseña",value:r.password,onChange:l})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"confirmPassword",className:"sr-only",children:"Confirmar Contraseña"}),s.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Confirmar Contraseña",value:r.confirmPassword,onChange:l})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"role",className:"sr-only",children:"Tipo de Usuario"}),s.jsxs("select",{id:"role",name:"role",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",value:r.role,onChange:l,children:[s.jsx("option",{value:"CLIENTE",children:"Cliente"}),s.jsx("option",{value:"ABOGADO",children:"Abogado"})]})]})]}),s.jsx("div",{children:s.jsx("button",{type:"submit",disabled:o,className:`group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${o?"opacity-50 cursor-not-allowed":""}`,children:o?"Creando cuenta...":"Registrarse"})})]})]})})},T6=()=>s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto h-16 w-16 text-gray-400",children:s.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 12h6m-6-4h6m2 5.291A7.962 7.962 0 0112 15c-2.34 0-4.47-.881-6.08-2.33"})})}),s.jsx("h1",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Página No Encontrada"}),s.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Lo sentimos, la página que buscas no existe o ha sido movida."})]}),s.jsxs("div",{className:"flex flex-col space-y-3",children:[s.jsx(be,{to:"/",className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Ir al Inicio"}),s.jsx(be,{to:"/contact",className:"group relative w-full flex justify-center py-2 px-4 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Contactar Soporte"})]})]})}),Nf=({allowedRoles:e})=>{const{user:t,loading:r}=Ee();return r?s.jsx("div",{children:"Cargando..."}):!t||!e.includes(t.role)?s.jsx(w1,{to:"/login",replace:!0}):s.jsx($g,{})},_6=()=>{const{user:e,loading:t}=Ee();return t?s.jsx("div",{children:"Cargando..."}):e?s.jsx($g,{}):s.jsx(w1,{to:"/login",replace:!0})},_c=({title:e,description:t,icon:r="🚧"})=>s.jsx("div",{className:"min-h-[calc(100vh-200px)] flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full text-center",children:[s.jsx("div",{className:"text-6xl mb-6",children:r}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:e}),s.jsx("p",{className:"text-lg text-gray-600 mb-8",children:t||"Esta funcionalidad está en desarrollo y estará disponible pronto."}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Próximas funcionalidades:"}),s.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[s.jsx("li",{children:"• Interfaz completa y funcional"}),s.jsx("li",{children:"• Integración con backend"}),s.jsx("li",{children:"• Gestión de datos en tiempo real"}),s.jsx("li",{children:"• Reportes y estadísticas"})]})]}),s.jsx(be,{to:"/dashboard",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Volver al Dashboard"})]})]})}),M6=()=>{const[e,t]=g.useState([]),[r,n]=g.useState([]),[a,i]=g.useState(!0),[o,c]=g.useState(null),[l,d]=g.useState(""),[u,h]=g.useState("todos"),[f,x]=g.useState(null),{user:v}=Ee(),[y,b]=g.useState([]);return g.useEffect(()=>{(async()=>{try{i(!0);const m=localStorage.getItem("token"),[j,w]=await Promise.all([X.get("/cases",{headers:{Authorization:`Bearer ${m}`}}),X.get("/cases/stats",{headers:{Authorization:`Bearer ${m}`}})]);t(j.data),c(w.data),x(null)}catch(m){console.error("Error fetching cases:",m),x("Error al cargar los expedientes")}finally{i(!1)}})()},[]),g.useEffect(()=>{(async()=>{try{const m=localStorage.getItem("token"),j=await X.get("/chat/conversations",{headers:{Authorization:`Bearer ${m}`}});b(j.data)}catch{}})()},[]),g.useEffect(()=>{let p=e;l&&(p=p.filter(m=>{var j;return m.title.toLowerCase().includes(l.toLowerCase())||m.client.user.name.toLowerCase().includes(l.toLowerCase())||((j=m.description)==null?void 0:j.toLowerCase().includes(l.toLowerCase()))})),u!=="todos"&&(p=p.filter(m=>m.status===u)),n(p)},[e,l,u]),a?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):f?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 text-xl mb-4",children:"Error"}),s.jsx("div",{className:"text-gray-600",children:f}),s.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Reintentar"})]})}):s.jsx("div",{className:"py-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mis Expedientes"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Gestiona y da seguimiento a todos tus casos legales"})]}),s.jsx(be,{to:"/lawyer/cases/new",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Nuevo Expediente"})]})}),o&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6 col-span-full",children:"Estadísticas de Expedientes"}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Expedientes"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:o.total})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-green-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Abiertos"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:o.abiertos})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-yellow-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"En Proceso"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:o.enProceso})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-gray-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Cerrados"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:o.cerrados})]})]})})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Filtros de Búsqueda"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar"}),s.jsx("input",{type:"text",placeholder:"Buscar por título, cliente o descripción...",value:l,onChange:p=>d(p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado"}),s.jsxs("select",{value:u,onChange:p=>h(p.target.value),"aria-label":"Filtrar por estado",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"todos",children:"Todos los estados"}),s.jsx("option",{value:"ABIERTO",children:"Abierto"}),s.jsx("option",{value:"EN_PROCESO",children:"En Proceso"}),s.jsx("option",{value:"CERRADO",children:"Cerrado"})]})]}),s.jsx("div",{className:"flex items-end",children:s.jsx("button",{onClick:()=>{d(""),h("todos")},className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Limpiar Filtros"})})]})]}),s.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 p-6 border-b border-gray-200",children:"Lista de Expedientes"}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID de Expediente"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Título"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(p=>{const m=y.find(j=>j.userId===p.client.user.id);return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 flex items-center gap-2",children:[s.jsx("span",{children:p.id}),s.jsx("button",{className:"ml-2 px-2 py-1 text-xs bg-gray-200 rounded hover:bg-gray-300",title:"Copiar ID",onClick:()=>navigator.clipboard.writeText(p.id),children:"Copiar"})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:p.title}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 flex items-center gap-2",children:[p.client.user.name,m&&m.unreadCount>0&&s.jsxs("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-yellow-100 text-yellow-800",title:"Mensajes no leídos",children:[s.jsx("svg",{className:"w-3 h-3 mr-1 text-yellow-600",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M10 2a8 8 0 100 16 8 8 0 000-16zm1 12H9v-2h2v2zm0-4H9V6h2v4z"})}),m.unreadCount]})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:p.status}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(be,{to:`/lawyer/cases/${p.id}`,className:"text-blue-600 hover:text-blue-900",children:"Ver"}),s.jsx(be,{to:`/lawyer/cases/${p.id}/edit`,className:"text-green-600 hover:text-green-900",children:"Editar"})]})})]},p.id)})})]})})]}),r.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsx("h4",{className:"mt-2 text-sm font-medium text-gray-900",children:"No se encontraron expedientes"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Intenta ajustar los filtros o crear un nuevo expediente."})]})]})})},O6=()=>{const e=Ar(),{user:t}=Ee(),[r,n]=g.useState(!1),[a,i]=g.useState(!1),[o,c]=g.useState(null),[l,d]=g.useState([]),[u,h]=g.useState([]),[f,x]=g.useState({title:"",description:"",clientId:"",lawyerId:(t==null?void 0:t.role)==="ABOGADO"?t.id:""});g.useEffect(()=>{(async()=>{try{n(!0);const p=localStorage.getItem("token"),[m,j]=await Promise.all([X.get("/users/clients"),X.get("/users/lawyers")]);d(m.data),h(j.data)}catch(p){console.error("Error fetching data:",p),c("Error al cargar los datos")}finally{n(!1)}})()},[t]);const v=b=>{const{name:p,value:m}=b.target;x(j=>({...j,[p]:m}))},y=async b=>{var p,m;if(b.preventDefault(),!f.title||!f.clientId||!f.lawyerId){c("Por favor completa todos los campos obligatorios");return}try{i(!0),c(null);const j=localStorage.getItem("token");await X.post("/cases",f,{headers:{Authorization:`Bearer ${j}`}}),e("/lawyer/cases")}catch(j){console.error("Error creating case:",j),c(((m=(p=j.response)==null?void 0:p.data)==null?void 0:m.message)||"Error al crear el expediente")}finally{i(!1)}};return r?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):s.jsx("div",{className:"py-6",children:s.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Nuevo Expediente"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Crea un nuevo expediente legal"})]}),s.jsx("button",{onClick:()=>e("/lawyer/cases"),className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Cancelar"})]})}),s.jsx("div",{className:"bg-white shadow rounded-lg",children:s.jsxs("form",{onSubmit:y,className:"p-6 space-y-6",children:[o&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md",children:o}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Título del Expediente *"}),s.jsx("input",{type:"text",id:"title",name:"title",value:f.title,onChange:v,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: Contrato de Compraventa"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripción"}),s.jsx("textarea",{id:"description",name:"description",value:f.description,onChange:v,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe brevemente el caso..."})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"clientId",className:"block text-sm font-medium text-gray-700 mb-2",children:"Cliente *"}),s.jsxs("select",{id:"clientId",name:"clientId",value:f.clientId,onChange:v,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Selecciona un cliente"}),l.filter(b=>b.user).length===0&&s.jsx("option",{disabled:!0,value:"",children:"No hay clientes disponibles"}),l.filter(b=>b.user).map(b=>{var p,m;return s.jsxs("option",{value:b.id,children:[((p=b.user)==null?void 0:p.name)||"Sin nombre"," - ",((m=b.user)==null?void 0:m.email)||"Sin email"," (DNI: ",b.dni,")"]},b.id)})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"lawyerId",className:"block text-sm font-medium text-gray-700 mb-2",children:"Abogado Asignado *"}),s.jsxs("select",{id:"lawyerId",name:"lawyerId",value:f.lawyerId,onChange:v,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:(t==null?void 0:t.role)==="ABOGADO",children:[s.jsx("option",{value:"",children:"Selecciona un abogado"}),u.map(b=>s.jsxs("option",{value:b.id,children:[b.name," - ",b.email]},b.id))]}),(t==null?void 0:t.role)==="ABOGADO"&&s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Serás asignado automáticamente como abogado responsable"})]}),s.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:()=>e("/lawyer/cases"),className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Cancelar"}),s.jsx("button",{type:"submit",disabled:a,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Creando...":"Crear Expediente"})]})]})})]})})},J1=({expedienteId:e,expedienteData:t,onAppointmentCreated:r,onNoteAdded:n,onMessageSent:a})=>{const[i,o]=g.useState(null),[c,l]=g.useState({}),[d,u]=g.useState(!1),[h,f]=g.useState(null),[x,v]=g.useState(null),y=()=>{o(null),l({}),f(null),v(null)},b=m=>{l({...c,[m.target.name]:m.target.value})},p=async m=>{var j,w,N,C;if(m.preventDefault(),u(!0),f(null),v(null),i==="cita"){let S=(j=t==null?void 0:t.client)==null?void 0:j.id,E=(w=t==null?void 0:t.lawyer)==null?void 0:w.id;if(!S||!E){f("No se pudo obtener el cliente o abogado del expediente."),u(!1);return}try{const k=localStorage.getItem("token"),T={clientId:S,lawyerId:E,date:c.datetime,location:c.location,notes:c.notes},D=await X.post("/appointments",T,{headers:{Authorization:`Bearer ${k}`}});v("Cita programada con éxito"),r&&r(D.data),setTimeout(y,1200)}catch(k){f(((C=(N=k.response)==null?void 0:N.data)==null?void 0:C.message)||"Error al programar la cita")}finally{u(!1)}return}setTimeout(()=>{u(!1),v("Acción realizada con éxito"),i==="nota"&&n&&n(c),i==="mensaje"&&a&&a(c),setTimeout(y,1e3)},800)};return s.jsxs("div",{className:"flex flex-col md:flex-row gap-2 md:gap-4 my-4",children:[s.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:()=>o("cita"),children:"Programar Cita"}),s.jsx("button",{className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",onClick:()=>o("nota"),children:"Agregar Nota"}),s.jsx("button",{className:"px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700",onClick:()=>o("mensaje"),children:"Enviar Mensaje"}),s.jsx(cd,{isOpen:i==="cita",onClose:y,title:"Programar Cita",description:"Complete los detalles para programar una nueva cita",size:"md",children:s.jsxs("form",{onSubmit:p,className:"space-y-4",children:[s.jsx("input",{type:"hidden",name:"expedienteId",value:e||""}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"datetime",className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha y hora"}),s.jsx("input",{id:"datetime",type:"datetime-local",name:"datetime",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onChange:b,"aria-describedby":"datetime-help"}),s.jsx("div",{id:"datetime-help",className:"sr-only",children:"Seleccione la fecha y hora para la cita"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700 mb-1",children:"Lugar"}),s.jsx("input",{id:"location",type:"text",name:"location",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onChange:b,placeholder:"Ingrese el lugar de la cita","aria-describedby":"location-help"}),s.jsx("div",{id:"location-help",className:"sr-only",children:"Especifique el lugar donde se realizará la cita"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas"}),s.jsx("textarea",{id:"notes",name:"notes",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onChange:b,placeholder:"Ingrese notas adicionales (opcional)","aria-describedby":"notes-help"}),s.jsx("div",{id:"notes-help",className:"sr-only",children:"Agregue información adicional sobre la cita"})]}),h&&s.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",role:"alert","aria-live":"polite",children:s.jsx("p",{className:"text-red-600 text-sm",children:h})}),x&&s.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md",role:"alert","aria-live":"polite",children:s.jsx("p",{className:"text-green-600 text-sm",children:x})}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:y,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Cancelar"}),s.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Guardando...":"Guardar"})]})]})}),s.jsx(cd,{isOpen:i==="nota",onClose:y,title:"Agregar Nota",description:"Agregue una nota al expediente",size:"md",children:s.jsxs("form",{onSubmit:p,className:"space-y-4",children:[s.jsx("input",{type:"hidden",name:"expedienteId",value:e||""}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"nota-textarea",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nota"}),s.jsx("textarea",{id:"nota-textarea",name:"note",required:!0,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",onChange:b,placeholder:"Escriba la nota aquí...","aria-describedby":"nota-help"}),s.jsx("div",{id:"nota-help",className:"sr-only",children:"Escriba la nota que desea agregar al expediente"})]}),h&&s.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",role:"alert","aria-live":"polite",children:s.jsx("p",{className:"text-red-600 text-sm",children:h})}),x&&s.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md",role:"alert","aria-live":"polite",children:s.jsx("p",{className:"text-green-600 text-sm",children:x})}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:y,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Cancelar"}),s.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Guardando...":"Guardar"})]})]})}),s.jsx(cd,{isOpen:i==="mensaje",onClose:y,title:"Enviar Mensaje",description:"Envíe un mensaje relacionado con este expediente",size:"md",children:s.jsxs("form",{onSubmit:p,className:"space-y-4",children:[s.jsx("input",{type:"hidden",name:"expedienteId",value:e||""}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"mensaje-textarea",className:"block text-sm font-medium text-gray-700 mb-1",children:"Mensaje"}),s.jsx("textarea",{id:"mensaje-textarea",name:"message",required:!0,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500",onChange:b,placeholder:"Escriba su mensaje aquí...","aria-describedby":"mensaje-help"}),s.jsx("div",{id:"mensaje-help",className:"sr-only",children:"Escriba el mensaje que desea enviar"})]}),h&&s.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",role:"alert","aria-live":"polite",children:s.jsx("p",{className:"text-red-600 text-sm",children:h})}),x&&s.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md",role:"alert","aria-live":"polite",children:s.jsx("p",{className:"text-green-600 text-sm",children:x})}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:y,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Cancelar"}),s.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Enviando...":"Enviar"})]})]})})]})},Kv=()=>{const{id:e}=Ig(),t=Ar(),{user:r}=Ee();console.log("Usuario en frontend:",r);const[n,a]=g.useState(null),[i,o]=g.useState(!0),[c,l]=g.useState(null),[d,u]=g.useState(!1);g.useEffect(()=>{(async()=>{var y,b;if(e)try{o(!0);const p=localStorage.getItem("token"),m=await Ne.get(`/api/cases/${e}`,{headers:{Authorization:`Bearer ${p}`}});a(m.data),l(null)}catch(p){console.error("Error fetching case:",p),l(((b=(y=p.response)==null?void 0:y.data)==null?void 0:b.message)||"Error al cargar el expediente")}finally{o(!1)}})()},[e]);const h=async v=>{if(n)try{u(!0);const y=localStorage.getItem("token");await Ne.patch(`/api/cases/${e}/status`,{status:v},{headers:{Authorization:`Bearer ${y}`}}),a(b=>b?{...b,status:v}:null)}catch(y){console.error("Error updating status:",y),l("Error al actualizar el estado del expediente")}finally{u(!1)}},f=v=>{switch(v){case"ABIERTO":return"bg-green-100 text-green-800";case"EN_PROCESO":return"bg-yellow-100 text-yellow-800";case"CERRADO":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},x=v=>{switch(v){case"ABIERTO":return"Abierto";case"EN_PROCESO":return"En Proceso";case"CERRADO":return"Cerrado";default:return v}};return i?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):c||!n?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 text-xl mb-4",children:"Error"}),s.jsx("div",{className:"text-gray-600",children:c||"Expediente no encontrado"}),s.jsx("button",{onClick:()=>t("/lawyer/cases"),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Volver a Expedientes"})]})}):s.jsx("div",{className:"py-6",children:s.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:()=>t("/lawyer/cases"),className:"text-gray-400 hover:text-gray-600","aria-label":"Volver a Expedientes",title:"Volver a Expedientes",type:"button",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:n.title})]}),s.jsxs("p",{className:"mt-2 text-gray-600",children:["Expediente creado el ",new Date(n.createdAt).toLocaleDateString()]})]}),s.jsx("div",{className:"flex space-x-3",children:s.jsx(be,{to:`/lawyer/cases/${e}/edit`,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",children:"Editar"})})]})}),s.jsx(J1,{expedienteId:n.id,expedienteData:n}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Estado del Expediente"}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${f(n.status)}`,children:x(n.status)}),((r==null?void 0:r.role)==="ABOGADO"||(r==null?void 0:r.role)==="ADMIN")&&s.jsxs("label",{children:[s.jsx("span",{className:"sr-only",children:"Cambiar estado del expediente"}),s.jsxs("select",{value:n.status,onChange:v=>h(v.target.value),disabled:d,className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",title:"Cambiar estado del expediente",children:[s.jsx("option",{value:"ABIERTO",children:"Abierto"}),s.jsx("option",{value:"EN_PROCESO",children:"En Proceso"}),s.jsx("option",{value:"CERRADO",children:"Cerrado"})]})]})]})]}),s.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Descripción"}),s.jsx("p",{className:"text-gray-700",children:n.description||"No hay descripción disponible para este expediente."})]}),s.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Documentos"}),s.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700",children:"Subir Documento"})]}),n.documents.length>0?s.jsx("div",{className:"space-y-3",children:n.documents.map(v=>s.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-md",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:v.filename}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Subido el ",new Date(v.uploadedAt).toLocaleDateString()]})]})]}),s.jsx("a",{href:v.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-sm",children:"Ver"})]},v.id))}):s.jsx("p",{className:"text-gray-500 text-center py-4",children:"No hay documentos subidos aún."})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Información del Cliente"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Nombre"}),s.jsx("p",{className:"text-sm text-gray-900",children:n.client.user.name})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Email"}),s.jsx("p",{className:"text-sm text-gray-900",children:n.client.user.email})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"DNI"}),s.jsx("p",{className:"text-sm text-gray-900",children:n.client.dni})]}),n.client.phone&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Teléfono"}),s.jsx("p",{className:"text-sm text-gray-900",children:n.client.phone})]}),n.client.address&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Dirección"}),s.jsx("p",{className:"text-sm text-gray-900",children:n.client.address})]})]})]}),s.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Abogado Asignado"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Nombre"}),s.jsx("p",{className:"text-sm text-gray-900",children:n.lawyer.name})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Email"}),s.jsx("p",{className:"text-sm text-gray-900",children:n.lawyer.email})]})]})]}),s.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Acciones Rápidas"}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("button",{className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm",children:"Programar Cita"}),s.jsx("button",{className:"w-full px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 text-sm",children:"Agregar Nota"}),s.jsx("button",{className:"w-full px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 text-sm",children:"Enviar Mensaje"})]})]})]})]})]})})},R6=()=>{const[e,t]=g.useState([]),[r,n]=g.useState(!0),[a,i]=g.useState(null),{user:o}=Ee();if(g.useEffect(()=>{(async()=>{try{n(!0);const d=await X.get("/cases"),u=Array.isArray(d.data)?d.data:[];console.log("Cases data:",u),t(u),i(null)}catch(d){console.error("Error fetching cases:",d),i("Error al cargar los expedientes"),t([])}finally{n(!1)}})()},[]),r)return s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})});if(a)return s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 text-xl mb-4",children:"Error"}),s.jsx("div",{className:"text-gray-600",children:a}),s.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Reintentar"})]})});const c=Array.isArray(e)?e:[];return s.jsx("div",{className:"py-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mis Expedientes"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Revisa el estado de tus casos legales"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(l=>{var d;return s.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:l.title}),s.jsx("p",{className:"text-gray-600 text-sm mb-4",children:l.description||"Sin descripción disponible"}),s.jsxs("div",{className:"text-sm text-gray-500 mb-4",children:["Abogado: ",((d=l.lawyer)==null?void 0:d.name)||"No asignado"]}),s.jsx(be,{to:`/client/cases/${l.id}`,className:"px-3 py-2 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700",children:"Ver Detalles"})]},l.id)})}),c.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"No se encontraron expedientes"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Aún no tienes expedientes asignados."})]})]})})},P6=()=>{var v,y,b,p;const{id:e}=Ig(),t=Ar(),[r,n]=g.useState(null),[a,i]=g.useState(!0),[o,c]=g.useState(null);g.useEffect(()=>{(async()=>{var j,w;if(e)try{i(!0);const N=localStorage.getItem("token"),C=await Ne.get(`/api/cases/${e}`,{headers:{Authorization:`Bearer ${N}`}});n(C.data),c(null)}catch(N){console.error("Error fetching case:",N),c(((w=(j=N.response)==null?void 0:j.data)==null?void 0:w.message)||"Error al cargar el expediente")}finally{i(!1)}})()},[e]);const l=m=>{switch(m){case"ABIERTO":return"bg-green-100 text-green-800";case"EN_PROCESO":return"bg-yellow-100 text-yellow-800";case"CERRADO":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},d=m=>{switch(m){case"ABIERTO":return"Abierto";case"EN_PROCESO":return"En Proceso";case"CERRADO":return"Cerrado";default:return m}},u=()=>{var m;if((m=r==null?void 0:r.lawyer)!=null&&m.email){const j=encodeURIComponent(`Consulta sobre expediente: ${r.title}`),w=encodeURIComponent(`Estimado/a ${r.lawyer.name},

Me gustaría consultar sobre mi expediente "${r.title}" (ID: ${r.id}).

Saludos cordiales.`);window.open(`mailto:${r.lawyer.email}?subject=${j}&body=${w}`)}else alert("No hay información de contacto del abogado disponible.")},h=()=>{t("/client/appointments")},f=()=>{t("/client/chat")},x=()=>{var m;if((m=r==null?void 0:r.lawyer)!=null&&m.email){const j=encodeURIComponent(`Solicitud de información: ${r.title}`),w=encodeURIComponent(`Estimado/a ${r.lawyer.name},

Me gustaría solicitar información adicional sobre mi expediente "${r.title}" (ID: ${r.id}).

Por favor, indíqueme qué documentación adicional necesito proporcionar o qué información específica requiere.

Saludos cordiales.`);window.open(`mailto:${r.lawyer.email}?subject=${j}&body=${w}`)}else alert("No hay información de contacto del abogado disponible.")};return a?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):o||!r?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 text-xl mb-4",children:"Error"}),s.jsx("div",{className:"text-gray-600",children:o||"Expediente no encontrado"}),s.jsx("button",{onClick:()=>t("/client/cases"),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Volver a Expedientes"})]})}):s.jsx("div",{className:"py-6",children:s.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"mb-8",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:()=>t("/client/cases"),className:"text-gray-400 hover:text-gray-600","aria-label":"Volver a Expedientes",title:"Volver a Expedientes",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:r.title})]}),s.jsxs("p",{className:"mt-2 text-gray-600",children:["Expediente creado el ",new Date(r.createdAt).toLocaleDateString()]})]})})}),s.jsx(J1,{expedienteId:r.id,expedienteData:r}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Estado del Expediente"}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${l(r.status)}`,children:d(r.status)}),s.jsxs("p",{className:"text-sm text-gray-600",children:[r.status==="ABIERTO"&&"Tu caso está siendo revisado por nuestro equipo legal.",r.status==="EN_PROCESO"&&"Tu caso está en proceso activo. Nuestro abogado está trabajando en él.",r.status==="CERRADO"&&"Tu caso ha sido completado y cerrado."]})]})]}),s.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Descripción del Caso"}),s.jsx("p",{className:"text-gray-700",children:r.description||"No hay descripción disponible para este expediente."})]}),s.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Documentos del Caso"}),r.documents.length>0?s.jsx("div",{className:"space-y-3",children:r.documents.map(m=>s.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-md",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:m.filename}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Subido el ",new Date(m.uploadedAt).toLocaleDateString()]})]})]}),s.jsx("a",{href:m.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-sm",children:"Descargar"})]},m.id))}):s.jsx("p",{className:"text-gray-500 text-center py-4",children:"No hay documentos disponibles aún."})]}),s.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Próximos Pasos"}),s.jsxs("div",{className:"space-y-3",children:[r.status==="ABIERTO"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-blue-600 text-xs font-semibold",children:"1"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Revisión Inicial"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Nuestro abogado está revisando los detalles de tu caso."})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-gray-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-gray-400 text-xs font-semibold",children:"2"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-400",children:"Análisis Legal"}),s.jsx("p",{className:"text-sm text-gray-400",children:"Se realizará un análisis completo de tu situación legal."})]})]})]}),r.status==="EN_PROCESO"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-3 h-3 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Análisis Completado"}),s.jsx("p",{className:"text-sm text-gray-600",children:"El análisis inicial de tu caso ha sido completado."})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-blue-600 text-xs font-semibold",children:"2"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Proceso Activo"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Tu abogado está trabajando activamente en tu caso."})]})]})]}),r.status==="CERRADO"&&s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0 w-6 h-6 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-3 h-3 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Caso Completado"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Tu caso ha sido completado exitosamente."})]})]})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Tu Abogado"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-blue-600 font-semibold",children:((y=(v=r.lawyer)==null?void 0:v.name)==null?void 0:y.split(" ").map(m=>m[0]).join(""))||"AB"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:((b=r.lawyer)==null?void 0:b.name)||"Abogado no asignado"}),s.jsx("p",{className:"text-sm text-gray-500",children:((p=r.lawyer)==null?void 0:p.email)||"Email no disponible"})]})]}),s.jsx("button",{onClick:u,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm",children:"Contactar Abogado"})]})]}),s.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Acciones Rápidas"}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("button",{onClick:h,className:"w-full px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 text-sm",children:"Programar Cita"}),s.jsx("button",{onClick:f,className:"w-full px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 text-sm",children:"Enviar Mensaje"}),s.jsx("button",{onClick:x,className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 text-sm",children:"Solicitar Información"})]})]}),s.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Información de Contacto"}),s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),s.jsx("span",{className:"text-gray-600",children:"(555) 123-4567"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),s.jsx("span",{className:"text-gray-600",children:"info@despacholegal.com"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),s.jsx("span",{className:"text-gray-600",children:"Av. Principal 123, Ciudad"})]})]})]})]})]})]})})},L6=({onFileSelect:e,maxFiles:t=5,maxSize:r=5*1024*1024,acceptedTypes:n=[".pdf",".txt",".csv",".doc",".docx",".jpg",".jpeg",".png",".gif",".webp"],disabled:a=!1})=>{const[i,o]=g.useState(!1),[c,l]=g.useState(null),d=g.useRef(null),u=p=>{const m=[],j=[];return p.length>t&&j.push(`No se pueden subir más de ${t} archivos`),Array.from(p).forEach(w=>{var C;w.size>r&&j.push(`${w.name} excede el tamaño máximo de ${r/(1024*1024)}MB`);const N="."+((C=w.name.split(".").pop())==null?void 0:C.toLowerCase());n.includes(N)||j.push(`${w.name} no es un tipo de archivo permitido`),w.size===0&&j.push(`${w.name} está vacío`),j.length===0&&m.push(w)}),j.length>0?(l(j.join(", ")),[]):(l(null),m)},h=p=>{console.log("FileUpload: handleFiles called with",p.length,"files"),console.log("FileUpload: File names:",Array.from(p).map(j=>j.name));const m=u(p);m.length>0&&(console.log("FileUpload: Valid files to send:",m.map(j=>j.name)),e(m)),d.current&&(d.current.value="")},f=p=>{p.preventDefault(),p.stopPropagation(),p.type==="dragenter"||p.type==="dragover"?o(!0):p.type==="dragleave"&&o(!1)},x=p=>{p.preventDefault(),p.stopPropagation(),o(!1),p.dataTransfer.files&&p.dataTransfer.files[0]&&h(p.dataTransfer.files)},v=p=>{p.preventDefault(),p.target.files&&p.target.files[0]&&h(p.target.files)},y=p=>{p.preventDefault(),p.stopPropagation(),d.current&&!a&&d.current.click()},b=p=>{p.preventDefault(),p.stopPropagation(),a||y(p)};return s.jsxs("div",{className:"w-full",children:[s.jsx("input",{ref:d,type:"file",multiple:!0,accept:n.join(","),"aria-label":"Seleccionar archivos para subir",title:"Seleccionar archivos para subir",placeholder:"Selecciona archivos",onChange:v,className:"hidden",disabled:a,style:{display:"none"}}),s.jsx("div",{className:`relative border-2 border-dashed rounded-lg p-6 text-center ${i?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"} ${a?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,onDragEnter:f,onDragLeave:f,onDragOver:f,onDrop:x,onClick:b,"aria-label":"Área de carga de archivos",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:s.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),s.jsxs("div",{className:"text-gray-600",children:[s.jsx("span",{className:"font-medium",children:"Haz clic para subir"})," o arrastra y suelta"]}),s.jsxs("p",{className:"text-xs text-gray-500",children:["PDF, TXT, CSV, DOC, DOCX, JPG, PNG, GIF, WEBP hasta ",r/(1024*1024),"MB"]}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Máximo ",t," archivos"]})]})}),c&&s.jsx("div",{className:"mt-2 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md p-2",children:c})]})},I6=()=>{const[e,t]=g.useState([]),[r,n]=g.useState([]),[a,i]=g.useState(!0),[o,c]=g.useState(null),[l,d]=g.useState(""),[u,h]=g.useState("todos"),[f,x]=g.useState(null),[v,y]=g.useState(!1),[b,p]=g.useState([]),[m,j]=g.useState(!1),[w,N]=g.useState({expedienteId:"",description:""}),[C,S]=g.useState([]),{user:E}=Ee();g.useEffect(()=>{(async()=>{try{i(!0);const R=localStorage.getItem("token"),[W,V,z]=await Promise.all([Ne.get("/documents",{headers:{Authorization:`Bearer ${R}`}}),Ne.get("/documents/stats",{headers:{Authorization:`Bearer ${R}`}}),Ne.get("/cases",{headers:{Authorization:`Bearer ${R}`}})]);t(W.data),c(V.data),S(z.data),x(null)}catch(R){console.error("Error fetching documents:",R),x("Error al cargar los documentos")}finally{i(!1)}})()},[]),g.useEffect(()=>{let M=Array.isArray(e)?e:[];l&&(M=M.filter(R=>{var W;return R.originalName.toLowerCase().includes(l.toLowerCase())||R.expediente.title.toLowerCase().includes(l.toLowerCase())||R.expediente.client.user.name.toLowerCase().includes(l.toLowerCase())||((W=R.description)==null?void 0:W.toLowerCase().includes(l.toLowerCase()))})),u!=="todos"&&(M=M.filter(R=>R.mimeType===u)),n(M)},[e,l,u]);const k=M=>{console.log("handleFileSelect called with:",M.length,"files"),console.log("Files:",M.map(W=>W.name)),console.log("Files details:",M.map(W=>({name:W.name,size:W.size,type:W.type})));const R=M.filter((W,V,z)=>V===z.findIndex(H=>H.name===W.name&&H.size===W.size));R.length!==M.length&&console.warn("Se encontraron archivos duplicados, eliminando..."),p(R)},T=()=>{p([])},D=()=>{j(!0),x(null),p([])},$=()=>{j(!1),p([]),N({expedienteId:"",description:""}),x(null)},_=async()=>{var M,R,W;if(b.length===0||!w.expedienteId){x("Por favor selecciona archivos y un expediente");return}try{y(!0),x(null);const V=localStorage.getItem("token"),z=b.map(F=>{const U=new FormData;return U.append("file",F),U.append("expedienteId",w.expedienteId),w.description&&U.append("description",w.description),Ne.post("/documents/upload",U,{headers:{Authorization:`Bearer ${V}`,"Content-Type":"multipart/form-data"}})});console.log("Subiendo archivos...");const H=await Promise.all(z);console.log("Resultados de subida:",H.map(F=>F.data)),console.log("Recargando documentos...");const G=await Ne.get("/documents",{headers:{Authorization:`Bearer ${V}`}});console.log("Documentos cargados:",G.data);const Z=G.data.filter(F=>{const U=F&&F.id&&F.originalName;return U||console.warn("Documento inválido encontrado:",F),U});t(Z),$()}catch(V){console.error("Error uploading files:",V),console.error("Error response:",(M=V.response)==null?void 0:M.data),x(((W=(R=V.response)==null?void 0:R.data)==null?void 0:W.message)||"Error al subir los archivos")}finally{y(!1)}},A=async M=>{if(confirm("¿Estás seguro de que quieres eliminar este documento?"))try{const R=localStorage.getItem("token");await Ne.delete(`/documents/${M}`,{headers:{Authorization:`Bearer ${R}`}}),t(W=>W.filter(V=>V.id!==M))}catch(R){console.error("Error deleting document:",R),x("Error al eliminar el documento")}},B=M=>{if(M===0)return"0 Bytes";const R=1024,W=["Bytes","KB","MB","GB"],V=Math.floor(Math.log(M)/Math.log(R));return parseFloat((M/Math.pow(R,V)).toFixed(2))+" "+W[V]},P=M=>M.includes("pdf")?"📄":M.includes("image")?"🖼️":M.includes("text")?"📝":M.includes("word")?"📄":"📎";return a?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):s.jsxs("div",{className:"py-6",children:[s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Documentos"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Gestiona todos los documentos legales"})]}),s.jsx("button",{onClick:D,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Subir Documentos"})]})}),o&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6 col-span-full",children:"Estadísticas de Documentos"}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Documentos"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:typeof o.total=="number"&&!isNaN(o.total)?o.total:0})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-green-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Tamaño Total"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:typeof o.totalSize=="number"&&!isNaN(o.totalSize)?B(o.totalSize):"-"})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-yellow-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"PDFs"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:(Array.isArray(o.byType)?o.byType:[]).filter(M=>M.type.includes("pdf")).reduce((M,R)=>M+R.count,0)})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-purple-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 002 2z"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Imágenes"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:(Array.isArray(o.byType)?o.byType:[]).filter(M=>M.type.includes("image")).reduce((M,R)=>M+R.count,0)})]})]})})]}),o&&s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Estadísticas por Tipo"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:(Array.isArray(o.byType)?o.byType:[]).filter(M=>M.type.includes("pdf")).reduce((M,R)=>M+R.count,0)}),s.jsx("div",{className:"text-sm text-gray-600",children:"PDFs"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:(Array.isArray(o.byType)?o.byType:[]).filter(M=>M.type.includes("text")).reduce((M,R)=>M+R.count,0)}),s.jsx("div",{className:"text-sm text-gray-600",children:"Documentos de Texto"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600",children:(Array.isArray(o.byType)?o.byType:[]).filter(M=>M.type.includes("image")).reduce((M,R)=>M+R.count,0)}),s.jsx("div",{className:"text-sm text-gray-600",children:"Imágenes"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-orange-600",children:(Array.isArray(o.byType)?o.byType:[]).filter(M=>M.type.includes("word")||M.type.includes("document")).reduce((M,R)=>M+R.count,0)}),s.jsx("div",{className:"text-sm text-gray-600",children:"Documentos Word"})]})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Filtros de Búsqueda"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar"}),s.jsx("input",{type:"text",placeholder:"Buscar por nombre, expediente o descripción...",value:l,onChange:M=>d(M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Archivo"}),s.jsxs("select",{value:u,onChange:M=>h(M.target.value),"aria-label":"Filtrar por tipo de archivo",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"todos",children:"Todos los tipos"}),s.jsx("option",{value:"application/pdf",children:"PDF"}),s.jsx("option",{value:"text/plain",children:"Texto"}),s.jsx("option",{value:"image/jpeg",children:"Imágenes"}),s.jsx("option",{value:"application/msword",children:"Word"})]})]}),s.jsx("div",{className:"flex items-end",children:s.jsx("button",{onClick:()=>{d(""),h("todos")},className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Limpiar Filtros"})})]})]}),s.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 p-6 border-b border-gray-200",children:"Lista de Documentos"}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Documento"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expediente"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tamaño"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subido Por"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(Array.isArray(r)?r:[]).map(M=>{var R,W,V,z,H;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-2xl mr-3",children:P(M.mimeType)}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:M.originalName}),M.description&&s.jsx("div",{className:"text-sm text-gray-500",children:M.description})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx(be,{to:`/lawyer/cases/${M.expedienteId}`,className:"text-blue-600 hover:text-blue-900 text-sm",children:((R=M.expediente)==null?void 0:R.title)||"Sin título"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((z=(V=(W=M.expediente)==null?void 0:W.client)==null?void 0:V.user)==null?void 0:z.name)||"Cliente no disponible"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:B(M.fileSize)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((H=M.uploadedByUser)==null?void 0:H.name)||"Usuario no disponible"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(M.uploadedAt).toLocaleDateString()}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("a",{href:`/api/documents/${M.id}/download`,className:"text-blue-600 hover:text-blue-900",target:"_blank",rel:"noopener noreferrer",children:"Descargar"}),s.jsx("button",{onClick:()=>A(M.id),className:"text-red-600 hover:text-red-900",children:"Eliminar"})]})})]},M.id)})})]})})]}),r.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No se encontraron documentos"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Intenta ajustar los filtros o subir nuevos documentos."})]})]}),m&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:s.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:s.jsxs("div",{className:"mt-3",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Subir Documentos"}),f&&s.jsx("div",{className:"mb-4 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md p-2",children:f}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expediente"}),s.jsxs("select",{id:"expediente-select","aria-label":"Expediente",value:w.expedienteId,onChange:M=>N(R=>({...R,expedienteId:M.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Selecciona un expediente"}),C.map(M=>s.jsxs("option",{value:M.id,children:[M.title," - ",M.client.user.name]},M.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripción (opcional)"}),s.jsx("textarea",{value:w.description,onChange:M=>N(R=>({...R,description:M.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Descripción del documento..."})]}),s.jsx(L6,{onFileSelect:k,maxFiles:5,maxSize:5*1024*1024}),b.length>0&&s.jsxs("div",{className:"mt-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Archivos seleccionados:"}),s.jsx("button",{onClick:T,className:"text-sm text-red-600 hover:text-red-800",children:"Limpiar"})]}),s.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:b.map((M,R)=>s.jsxs("li",{children:[M.name," (",B(M.size),")"]},R))})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx("button",{onClick:$,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Cancelar"}),s.jsx("button",{onClick:_,disabled:v||b.length===0||!w.expedienteId,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:v?"Subiendo...":"Subir Documentos"})]})]})})})]})},$6=()=>{const[e,t]=g.useState([]),[r,n]=g.useState([]),[a,i]=g.useState(!0),[o,c]=g.useState(""),[l,d]=g.useState("todos"),[u,h]=g.useState(null),{user:f}=Ee();g.useEffect(()=>{(async()=>{try{i(!0);const m=localStorage.getItem("token"),j=await X.get("/documents",{headers:{Authorization:`Bearer ${m}`}});t(j.data),h(null)}catch(m){console.error("Error fetching documents:",m),h("Error al cargar los documentos")}finally{i(!1)}})()},[]),g.useEffect(()=>{let p=e;o&&(p=p.filter(m=>{var j;return m.originalName.toLowerCase().includes(o.toLowerCase())||m.expediente.title.toLowerCase().includes(o.toLowerCase())||((j=m.description)==null?void 0:j.toLowerCase().includes(o.toLowerCase()))})),l!=="todos"&&(p=p.filter(m=>m.mimeType===l)),n(p)},[e,o,l]);const x=p=>{if(p===0)return"0 Bytes";const m=1024,j=["Bytes","KB","MB","GB"],w=Math.floor(Math.log(p)/Math.log(m));return parseFloat((p/Math.pow(m,w)).toFixed(2))+" "+j[w]},v=p=>p.includes("pdf")?"📄":p.includes("image")?"🖼️":p.includes("text")?"📝":p.includes("word")?"📄":"📎",y=p=>{switch(p){case"ABIERTO":return"bg-green-100 text-green-800";case"EN_PROCESO":return"bg-yellow-100 text-yellow-800";case"CERRADO":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},b=p=>{switch(p){case"ABIERTO":return"Abierto";case"EN_PROCESO":return"En Proceso";case"CERRADO":return"Cerrado";default:return p}};return a?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):u?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 text-xl mb-4",children:"Error"}),s.jsx("div",{className:"text-gray-600",children:u}),s.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Reintentar"})]})}):s.jsx("div",{className:"py-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mis Documentos"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Accede a todos los documentos de tus expedientes"})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar"}),s.jsx("input",{type:"text",placeholder:"Buscar por nombre de documento o expediente...",value:o,onChange:p=>c(p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Archivo"}),s.jsxs("select",{value:l,onChange:p=>d(p.target.value),"aria-label":"Filtrar por tipo de archivo",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"todos",children:"Todos los tipos"}),s.jsx("option",{value:"application/pdf",children:"PDF"}),s.jsx("option",{value:"text/plain",children:"Texto"}),s.jsx("option",{value:"image/jpeg",children:"Imágenes"}),s.jsx("option",{value:"application/msword",children:"Word"})]})]}),s.jsx("div",{className:"flex items-end",children:s.jsx("button",{onClick:()=>{c(""),d("todos")},className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Limpiar Filtros"})})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(p=>s.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("span",{className:"text-3xl",children:v(p.mimeType)}),s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${y(p.expediente.status)}`,children:b(p.expediente.status)})]}),s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2 truncate",children:p.originalName}),p.description&&s.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:p.description}),s.jsxs("div",{className:"space-y-2 mb-4",children:[s.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),p.expediente.title]}),s.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),p.uploadedBy.name]}),s.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"})}),x(p.fileSize)]}),s.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),new Date(p.uploadedAt).toLocaleDateString()]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("a",{href:`/api/documents/${p.id}/download`,className:"flex-1 px-3 py-2 bg-blue-600 text-white text-center text-sm rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",target:"_blank",rel:"noopener noreferrer",children:"Descargar"}),s.jsx("button",{className:"px-3 py-2 bg-green-600 text-white text-sm rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",children:"Ver"})]})]})},p.id))}),r.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No se encontraron documentos"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:e.length===0?"Aún no tienes documentos en tus expedientes.":"Intenta ajustar los filtros de búsqueda."})]})]})})},F6=()=>{const e=Ar(),{id:t}=Ig(),{user:r}=Ee(),[n,a]=g.useState(!0),[i,o]=g.useState(!1),[c,l]=g.useState(null),[d,u]=g.useState([]),[h,f]=g.useState([]),[x,v]=g.useState({title:"",description:"",clientId:"",lawyerId:(r==null?void 0:r.role)==="ABOGADO"?r.id:""});g.useEffect(()=>{(async()=>{var m,j;try{a(!0);const w=localStorage.getItem("token"),[N,C,S]=await Promise.all([X.get("/users/clients"),X.get("/users/lawyers"),X.get(`/cases/${t}`)]);u(N.data),f(C.data);const E=S.data;v({title:E.title||"",description:E.description||"",clientId:((m=E.client)==null?void 0:m.id)||"",lawyerId:((j=E.lawyer)==null?void 0:j.id)||((r==null?void 0:r.role)==="ABOGADO"?r.id:"")}),l(null)}catch(w){console.error("Error fetching data:",w),l("Error al cargar los datos del expediente")}finally{a(!1)}})()},[t,r]);const y=p=>{const{name:m,value:j}=p.target;v(w=>({...w,[m]:j}))},b=async p=>{var m,j;if(p.preventDefault(),!x.title||!x.clientId||!x.lawyerId){l("Por favor completa todos los campos obligatorios");return}try{o(!0),l(null),await X.patch(`/cases/${t}`,x),e(`/lawyer/cases/${t}`)}catch(w){console.error("Error updating case:",w),l(((j=(m=w.response)==null?void 0:m.data)==null?void 0:j.message)||"Error al actualizar el expediente")}finally{o(!1)}};return n?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):s.jsx("div",{className:"py-6",children:s.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Editar Expediente"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Modifica los datos del expediente legal"})]}),s.jsx("button",{onClick:()=>e(`/lawyer/cases/${t}`),className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Cancelar"})]})}),s.jsx("div",{className:"bg-white shadow rounded-lg",children:s.jsxs("form",{onSubmit:b,className:"p-6 space-y-6",children:[c&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md",children:c}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Título del Expediente *"}),s.jsx("input",{type:"text",id:"title",name:"title",value:x.title,onChange:y,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: Contrato de Compraventa"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripción"}),s.jsx("textarea",{id:"description",name:"description",value:x.description,onChange:y,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe brevemente el caso..."})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"clientId",className:"block text-sm font-medium text-gray-700 mb-2",children:"Cliente *"}),s.jsxs("select",{id:"clientId",name:"clientId",value:x.clientId,onChange:y,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Selecciona un cliente"}),d.filter(p=>p.user).length===0&&s.jsx("option",{disabled:!0,value:"",children:"No hay clientes disponibles"}),d.filter(p=>p.user).map(p=>{var m,j;return s.jsxs("option",{value:p.id,children:[((m=p.user)==null?void 0:m.name)||"Sin nombre"," - ",((j=p.user)==null?void 0:j.email)||"Sin email"," (DNI: ",p.dni,")"]},p.id)})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"lawyerId",className:"block text-sm font-medium text-gray-700 mb-2",children:"Abogado Asignado *"}),s.jsxs("select",{id:"lawyerId",name:"lawyerId",value:x.lawyerId,onChange:y,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:(r==null?void 0:r.role)==="ABOGADO",children:[s.jsx("option",{value:"",children:"Selecciona un abogado"}),h.map(p=>s.jsxs("option",{value:p.id,children:[p.name," - ",p.email]},p.id))]}),(r==null?void 0:r.role)==="ABOGADO"&&s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Serás asignado automáticamente como abogado responsable"})]}),s.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:()=>e(`/lawyer/cases/${t}`),className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Cancelar"}),s.jsx("button",{type:"submit",disabled:i,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Guardando...":"Guardar Cambios"})]})]})})]})})};function dn(e){"@babel/helpers - typeof";return dn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dn(e)}function B6(e,t){if(dn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(dn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Z1(e){var t=B6(e,"string");return dn(t)=="symbol"?t:t+""}function ca(e,t,r){return(t=Z1(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ye(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Qv(Object(r),!0).forEach(function(n){ca(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qv(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qu(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Ps(e,t){if(e==null)return{};var r,n,a=qu(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function At(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Z1(n.key),n)}}function Tt(e,t,r){return t&&Xv(e.prototype,t),r&&Xv(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Jd(e){return Jd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Jd(e)}function e2(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(e2=function(){return!!e})()}function z6(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U6(e,t){if(t&&(dn(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return z6(e)}function Kt(e,t,r){return t=Jd(t),U6(e,e2()?Reflect.construct(t,r||[],Jd(e).constructor):t.apply(e,r))}function Zd(e,t){return Zd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Zd(e,t)}function Qt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zd(e,t)}function t2(e){if(Array.isArray(e))return e}function V6(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,c=[],l=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(u){d=!0,a=u}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return c}}function ep(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Ug(e,t){if(e){if(typeof e=="string")return ep(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ep(e,t):void 0}}function r2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vr(e,t){return t2(e)||V6(e,t)||Ug(e,t)||r2()}function s2(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=s2(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function pt(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=s2(e))&&(n&&(n+=" "),n+=t);return n}function mt(){return mt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mt.apply(null,arguments)}var H6=function(e,t,r,n,a,i,o,c){if(!e){var l;if(t===void 0)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[r,n,a,i,o,c],u=0;l=new Error(t.replace(/%s/g,function(){return d[u++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}},W6=H6;const xl=br(W6);var Y6=function(){};function q6(e,t){var r={};return Object.keys(e).forEach(function(n){r[dd(n)]=Y6}),r}function Jv(e,t){return e[t]!==void 0}function dd(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function G6(e){return!!e&&(typeof e!="function"||e.prototype&&e.prototype.isReactComponent)}function K6(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Zd(e,t)}function n2(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);e!=null&&this.setState(e)}function a2(e){function t(r){var n=this.constructor.getDerivedStateFromProps(e,r);return n??null}this.setState(t.bind(this))}function i2(e,t){try{var r=this.props,n=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(r,n)}finally{this.props=r,this.state=n}}n2.__suppressDeprecationWarning=!0;a2.__suppressDeprecationWarning=!0;i2.__suppressDeprecationWarning=!0;function Q6(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if(typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function")return e;var r=null,n=null,a=null;if(typeof t.componentWillMount=="function"?r="componentWillMount":typeof t.UNSAFE_componentWillMount=="function"&&(r="UNSAFE_componentWillMount"),typeof t.componentWillReceiveProps=="function"?n="componentWillReceiveProps":typeof t.UNSAFE_componentWillReceiveProps=="function"&&(n="UNSAFE_componentWillReceiveProps"),typeof t.componentWillUpdate=="function"?a="componentWillUpdate":typeof t.UNSAFE_componentWillUpdate=="function"&&(a="UNSAFE_componentWillUpdate"),r!==null||n!==null||a!==null){var i=e.displayName||e.name,o=typeof e.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+i+" uses "+o+" but also contains the following legacy lifecycles:"+(r!==null?`
  `+r:"")+(n!==null?`
  `+n:"")+(a!==null?`
  `+a:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof e.getDerivedStateFromProps=="function"&&(t.componentWillMount=n2,t.componentWillReceiveProps=a2),typeof t.getSnapshotBeforeUpdate=="function"){if(typeof t.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=i2;var c=t.componentDidUpdate;t.componentDidUpdate=function(d,u,h){var f=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:h;c.call(this,d,u,f)}}return e}var X6="/Users/jquense/src/uncontrollable/src/uncontrollable.js";function o2(e,t,r){r===void 0&&(r=[]);var n=e.displayName||e.name||"Component",a=G6(e),i=Object.keys(t),o=i.map(dd);a||!r.length||xl(!1);var c=function(d){K6(u,d);function u(){for(var f,x=arguments.length,v=new Array(x),y=0;y<x;y++)v[y]=arguments[y];f=d.call.apply(d,[this].concat(v))||this,f.handlers=Object.create(null),i.forEach(function(p){var m=t[p],j=function(N){if(f.props[m]){var C;f._notifying=!0;for(var S=arguments.length,E=new Array(S>1?S-1:0),k=1;k<S;k++)E[k-1]=arguments[k];(C=f.props)[m].apply(C,[N].concat(E)),f._notifying=!1}f.unmounted||f.setState(function(T){var D,$=T.values;return{values:mt(Object.create(null),$,(D={},D[p]=N,D))}})};f.handlers[m]=j}),r.length&&(f.attachRef=function(p){f.inner=p});var b=Object.create(null);return i.forEach(function(p){b[p]=f.props[dd(p)]}),f.state={values:b,prevProps:{}},f}var h=u.prototype;return h.shouldComponentUpdate=function(){return!this._notifying},u.getDerivedStateFromProps=function(x,v){var y=v.values,b=v.prevProps,p={values:mt(Object.create(null),y),prevProps:{}};return i.forEach(function(m){p.prevProps[m]=x[m],!Jv(x,m)&&Jv(b,m)&&(p.values[m]=x[dd(m)])}),p},h.componentWillUnmount=function(){this.unmounted=!0},h.render=function(){var x=this,v=this.props,y=v.innerRef,b=qu(v,["innerRef"]);o.forEach(function(m){delete b[m]});var p={};return i.forEach(function(m){var j=x.props[m];p[m]=j!==void 0?j:x.state.values[m]}),I.createElement(e,mt({},b,p,this.handlers,{ref:y||this.attachRef}))},u}(I.Component);Q6(c),c.displayName="Uncontrolled("+n+")",c.propTypes=mt({innerRef:function(){}},q6(t)),r.forEach(function(d){c.prototype[d]=function(){var h;return(h=this.inner)[d].apply(h,arguments)}});var l=c;return I.forwardRef&&(l=I.forwardRef(function(d,u){return I.createElement(c,mt({},d,{innerRef:u,__source:{fileName:X6,lineNumber:128},__self:this}))}),l.propTypes=c.propTypes),l.ControlledComponent=e,l.deferControlTo=function(d,u,h){return u===void 0&&(u={}),o2(d,mt({},t,u),h)},l}var l2={exports:{}},J6="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Z6=J6,eA=Z6;function c2(){}function d2(){}d2.resetWarningCache=c2;var tA=function(){function e(n,a,i,o,c,l){if(l!==eA){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:d2,resetWarningCache:c2};return r.PropTypes=r,r};l2.exports=tA();var Vg=l2.exports;const se=br(Vg);var eu="milliseconds",vl="seconds",yl="minutes",bl="hours",Da="day",Ni="week",jl="month",Aa="year",Ta="decade",_a="century",u2={milliseconds:1,seconds:1e3,minutes:60*1e3,hours:60*60*1e3,day:24*60*60*1e3,week:7*24*60*60*1e3},rA={month:1,year:12,decade:10*12,century:100*12};function sA(e){return[31,nA(e),31,30,31,30,31,31,30,31,30,31]}function nA(e){return e%4===0&&e%100!==0||e%400===0?29:28}function ps(e,t,r){switch(e=new Date(e),r){case eu:case vl:case yl:case bl:case Da:case Ni:return aA(e,t*u2[r]);case jl:case Aa:case Ta:case _a:return iA(e,t*rA[r])}throw new TypeError('Invalid units: "'+r+'"')}function aA(e,t){var r=new Date(+e+t);return oA(e,r)}function iA(e,t){var r=e.getFullYear(),n=e.getMonth(),a=e.getDate(),i=r*12+n+t,o=Math.trunc(i/12),c=i%12,l=Math.min(a,sA(o)[c]),d=new Date(e);return d.setFullYear(o),d.setDate(1),d.setMonth(c),d.setDate(l),d}function oA(e,t){var r=e.getTimezoneOffset(),n=t.getTimezoneOffset(),a=n-r;return new Date(+t+a*u2.minutes)}function wl(e,t,r){return ps(e,-t,r)}function Bt(e,t,r){switch(e=new Date(e),t){case _a:case Ta:case Aa:e=ru(e,0);case jl:e=g2(e,1);case Ni:case Da:e=Sl(e,0);case bl:e=Ci(e,0);case yl:e=Cl(e,0);case vl:e=Nl(e,0)}return t===Ta&&(e=wl(e,Ma(e)%10,"year")),t===_a&&(e=wl(e,Ma(e)%100,"year")),t===Ni&&(e=x2(e,0,r)),e}function tu(e,t,r){switch(e=new Date(e),e=Bt(e,t,r),t){case _a:case Ta:case Aa:case jl:case Ni:e=ps(e,1,t),e=wl(e,1,Da),e.setHours(23,59,59,999);break;case Da:e.setHours(23,59,59,999);break;case bl:case yl:case vl:e=ps(e,1,t),e=wl(e,1,eu)}return e}var Wl=Ui(function(e,t){return e===t}),Hg=Ui(function(e,t){return e!==t}),Gu=Ui(function(e,t){return e>t}),Yl=Ui(function(e,t){return e>=t}),Wg=Ui(function(e,t){return e<t}),zi=Ui(function(e,t){return e<=t});function h2(){return new Date(Math.min.apply(Math,arguments))}function f2(){return new Date(Math.max.apply(Math,arguments))}function m2(e,t,r,n){return n=n||"day",(!t||Yl(e,t,n))&&(!r||zi(e,r,n))}var Nl=Zn("Milliseconds"),Cl=Zn("Seconds"),Ci=Zn("Minutes"),Sl=Zn("Hours"),p2=Zn("Day"),g2=Zn("Date"),ru=Zn("Month"),Ma=Zn("FullYear");function lA(e,t){return t===void 0?Ma(Bt(e,Ta)):ps(e,t+10,Aa)}function cA(e,t){return t===void 0?Ma(Bt(e,_a)):ps(e,t+100,Aa)}function x2(e,t,r){var n=(p2(e)+7-(r||0))%7;return t===void 0?n:ps(e,t-n,Da)}function dA(e,t,r,n){var a,i,o;switch(r){case eu:case vl:case yl:case bl:case Da:case Ni:a=t.getTime()-e.getTime();break;case jl:case Aa:case Ta:case _a:a=(Ma(t)-Ma(e))*12+ru(t)-ru(e);break;default:throw new TypeError('Invalid units: "'+r+'"')}switch(r){case eu:i=1;break;case vl:i=1e3;break;case yl:i=1e3*60;break;case bl:i=1e3*60*60;break;case Da:i=1e3*60*60*24;break;case Ni:i=1e3*60*60*24*7;break;case jl:i=1;break;case Aa:i=12;break;case Ta:i=120;break;case _a:i=1200;break;default:throw new TypeError('Invalid units: "'+r+'"')}return o=a/i,n?o:Math.round(o)}function Zn(e){var t=function(r){switch(r){case"Milliseconds":return 36e5;case"Seconds":return 3600;case"Minutes":return 60;case"Hours":return 1;default:return null}}(e);return function(r,n){if(n===void 0)return r["get"+e]();var a=new Date(r);return a["set"+e](n),t&&a["get"+e]()!=n&&(e==="Hours"||n>=t&&a.getHours()-r.getHours()<Math.floor(n/t))&&a["set"+e](n+t),a}}function Ui(e){return function(t,r,n){return e(+Bt(t,n),+Bt(r,n))}}const Zv=Object.freeze(Object.defineProperty({__proto__:null,add:ps,century:cA,date:g2,day:p2,decade:lA,diff:dA,endOf:tu,eq:Wl,gt:Gu,gte:Yl,hours:Sl,inRange:m2,lt:Wg,lte:zi,max:f2,milliseconds:Nl,min:h2,minutes:Ci,month:ru,neq:Hg,seconds:Cl,startOf:Bt,subtract:wl,weekday:x2,year:Ma},Symbol.toStringTag,{value:"Module"}));function uA(e){if(Array.isArray(e))return ep(e)}function v2(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function hA(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ud(e){return uA(e)||v2(e)||Ug(e)||hA()}function fA(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(a);++n<a;)i[n]=e[n+t];return i}var y2=fA;function mA(e,t){return e===t||e!==e&&t!==t}var ql=mA,pA=typeof Hr=="object"&&Hr&&Hr.Object===Object&&Hr,b2=pA,gA=b2,xA=typeof self=="object"&&self&&self.Object===Object&&self,vA=gA||xA||Function("return this")(),Bs=vA,yA=Bs,bA=yA.Symbol,Vi=bA,ey=Vi,j2=Object.prototype,jA=j2.hasOwnProperty,wA=j2.toString,bo=ey?ey.toStringTag:void 0;function NA(e){var t=jA.call(e,bo),r=e[bo];try{e[bo]=void 0;var n=!0}catch{}var a=wA.call(e);return n&&(t?e[bo]=r:delete e[bo]),a}var CA=NA,SA=Object.prototype,EA=SA.toString;function kA(e){return EA.call(e)}var DA=kA,ty=Vi,AA=CA,TA=DA,_A="[object Null]",MA="[object Undefined]",ry=ty?ty.toStringTag:void 0;function OA(e){return e==null?e===void 0?MA:_A:ry&&ry in Object(e)?AA(e):TA(e)}var Hi=OA;function RA(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var mn=RA,PA=Hi,LA=mn,IA="[object AsyncFunction]",$A="[object Function]",FA="[object GeneratorFunction]",BA="[object Proxy]";function zA(e){if(!LA(e))return!1;var t=PA(e);return t==$A||t==FA||t==IA||t==BA}var Yg=zA,UA=9007199254740991;function VA(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=UA}var qg=VA,HA=Yg,WA=qg;function YA(e){return e!=null&&WA(e.length)&&!HA(e)}var Gl=YA,qA=9007199254740991,GA=/^(?:0|[1-9]\d*)$/;function KA(e,t){var r=typeof e;return t=t??qA,!!t&&(r=="number"||r!="symbol"&&GA.test(e))&&e>-1&&e%1==0&&e<t}var Gg=KA,QA=ql,XA=Gl,JA=Gg,ZA=mn;function e5(e,t,r){if(!ZA(r))return!1;var n=typeof t;return(n=="number"?XA(r)&&JA(t,r.length):n=="string"&&t in r)?QA(r[t],e):!1}var Ku=e5,t5=/\s/;function r5(e){for(var t=e.length;t--&&t5.test(e.charAt(t)););return t}var s5=r5,n5=s5,a5=/^\s+/;function i5(e){return e&&e.slice(0,n5(e)+1).replace(a5,"")}var o5=i5;function l5(e){return e!=null&&typeof e=="object"}var ea=l5,c5=Hi,d5=ea,u5="[object Symbol]";function h5(e){return typeof e=="symbol"||d5(e)&&c5(e)==u5}var Kl=h5,f5=o5,sy=mn,m5=Kl,ny=NaN,p5=/^[-+]0x[0-9a-f]+$/i,g5=/^0b[01]+$/i,x5=/^0o[0-7]+$/i,v5=parseInt;function y5(e){if(typeof e=="number")return e;if(m5(e))return ny;if(sy(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=sy(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=f5(e);var r=g5.test(e);return r||x5.test(e)?v5(e.slice(2),r?2:8):p5.test(e)?ny:+e}var b5=y5,j5=b5,ay=1/0,w5=17976931348623157e292;function N5(e){if(!e)return e===0?e:0;if(e=j5(e),e===ay||e===-ay){var t=e<0?-1:1;return t*w5}return e===e?e:0}var w2=N5,C5=w2;function S5(e){var t=C5(e),r=t%1;return t===t?r?t-r:t:0}var N2=S5,E5=y2,k5=Ku,D5=N2,A5=Math.ceil,T5=Math.max;function _5(e,t,r){(r?k5(e,t,r):t===void 0)?t=1:t=T5(D5(t),0);var n=e==null?0:e.length;if(!n||t<1)return[];for(var a=0,i=0,o=Array(A5(n/t));a<n;)o[i++]=E5(e,a,a+=t);return o}var M5=_5;const O5=br(M5);function Ql(e){return e&&e.ownerDocument||document}function R5(e){var t=Ql(e);return t&&t.defaultView||window}function P5(e,t){return R5(e).getComputedStyle(e,t)}var L5=/([A-Z])/g;function I5(e){return e.replace(L5,"-$1").toLowerCase()}var $5=/^ms-/;function Mc(e){return I5(e).replace($5,"-ms-")}var F5=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function B5(e){return!!(e&&F5.test(e))}function Va(e,t){var r="",n="";if(typeof t=="string")return e.style.getPropertyValue(Mc(t))||P5(e).getPropertyValue(Mc(t));Object.keys(t).forEach(function(a){var i=t[a];!i&&i!==0?e.style.removeProperty(Mc(a)):B5(a)?n+=a+"("+i+") ":r+=Mc(a)+": "+i+";"}),n&&(r+="transform: "+n+";"),e.style.cssText+=";"+r}function El(e,t){if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return e===t||!!(e.compareDocumentPosition(t)&16)}function z5(e){return"nodeType"in e&&e.nodeType===document.DOCUMENT_NODE}function Kg(e){return"window"in e&&e.window===e?e:z5(e)&&e.defaultView||!1}function C2(e){var t=e==="pageXOffset"?"scrollLeft":"scrollTop";function r(n,a){var i=Kg(n);if(a===void 0)return i?i[e]:n[t];i?i.scrollTo(i[e],a):n[t]=a}return r}const S2=C2("pageXOffset"),E2=C2("pageYOffset");function ya(e){var t=Ql(e),r={top:0,left:0,height:0,width:0},n=t&&t.documentElement;return!n||!El(n,e)||(e.getBoundingClientRect!==void 0&&(r=e.getBoundingClientRect()),r={top:r.top+E2(n)-(n.clientTop||0),left:r.left+S2(n)-(n.clientLeft||0),width:r.width,height:r.height}),r}var U5=function(t){return!!t&&"offsetParent"in t};function V5(e){for(var t=Ql(e),r=e&&e.offsetParent;U5(r)&&r.nodeName!=="HTML"&&Va(r,"position")==="static";)r=r.offsetParent;return r||t.documentElement}var H5=function(t){return t.nodeName&&t.nodeName.toLowerCase()};function k2(e,t){var r={top:0,left:0},n;if(Va(e,"position")==="fixed")n=e.getBoundingClientRect();else{var a=t||V5(e);n=ya(e),H5(a)!=="html"&&(r=ya(a));var i=String(Va(a,"borderTopWidth")||0);r.top+=parseInt(i,10)-E2(a)||0;var o=String(Va(a,"borderLeftWidth")||0);r.left+=parseInt(o,10)-S2(a)||0}var c=String(Va(e,"marginTop")||0),l=String(Va(e,"marginLeft")||0);return mt({},n,{top:n.top-r.top-(parseInt(c,10)||0),left:n.left-r.left-(parseInt(l,10)||0)})}const Qg=!!(typeof window<"u"&&window.document&&window.document.createElement);var iy=new Date().getTime();function W5(e){var t=new Date().getTime(),r=Math.max(0,16-(t-iy)),n=setTimeout(e,r);return iy=t,n}var Y5=["","webkit","moz","o","ms"],tp="clearTimeout",rp=W5,oy=function(t,r){return t+(t?r[0].toUpperCase()+r.substr(1):r)+"AnimationFrame"};Qg&&Y5.some(function(e){var t=oy(e,"request");return t in window&&(tp=oy(e,"cancel"),rp=function(n){return window[t](n)}),!!rp});var ly=function(t){typeof window[tp]=="function"&&window[tp](t)},D2=rp,Cf;function q5(e,t){if(!Cf){var r=document.body,n=r.matches||r.matchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector;Cf=function(i,o){return n.call(i,o)}}return Cf(e,t)}var G5=Function.prototype.bind.call(Function.prototype.call,[].slice);function K5(e,t){return G5(e.querySelectorAll(t))}var sp=!1,np=!1;try{var Sf={get passive(){return sp=!0},get once(){return np=sp=!0}};Qg&&(window.addEventListener("test",Sf,Sf),window.removeEventListener("test",Sf,!0))}catch{}function Q5(e,t,r,n){if(n&&typeof n!="boolean"&&!np){var a=n.once,i=n.capture,o=r;!np&&a&&(o=r.__once||function c(l){this.removeEventListener(t,c,i),r.call(this,l)},r.__once=o),e.addEventListener(t,o,sp?n:i)}e.addEventListener(t,r,n)}function X5(e){const t=g.useRef(e);return g.useEffect(()=>{t.current=e},[e]),t}function cy(e){const t=X5(e);return g.useCallback(function(...r){return t.current&&t.current(...r)},[t])}function dy(){return g.useState(null)}function J5(){const e=g.useRef(!0),t=g.useRef(()=>e.current);return g.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}function Z5(e){const t=J5();return[e[0],g.useCallback(r=>{if(t())return e[1](r)},[t,e[1]])]}var xr="top",Kr="bottom",Qr="right",vr="left",Xg="auto",Xl=[xr,Kr,Qr,vr],Si="start",kl="end",eT="clippingParents",A2="viewport",jo="popper",tT="reference",uy=Xl.reduce(function(e,t){return e.concat([t+"-"+Si,t+"-"+kl])},[]),Jg=[].concat(Xl,[Xg]).reduce(function(e,t){return e.concat([t,t+"-"+Si,t+"-"+kl])},[]),rT="beforeRead",sT="read",nT="afterRead",aT="beforeMain",iT="main",oT="afterMain",lT="beforeWrite",cT="write",dT="afterWrite",uT=[rT,sT,nT,aT,iT,oT,lT,cT,dT];function Os(e){return e.split("-")[0]}function Er(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Oa(e){var t=Er(e).Element;return e instanceof t||e instanceof Element}function Rs(e){var t=Er(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Zg(e){if(typeof ShadowRoot>"u")return!1;var t=Er(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}var ba=Math.max,su=Math.min,Ei=Math.round;function ap(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function T2(){return!/^((?!chrome|android).)*safari/i.test(ap())}function ki(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var n=e.getBoundingClientRect(),a=1,i=1;t&&Rs(e)&&(a=e.offsetWidth>0&&Ei(n.width)/e.offsetWidth||1,i=e.offsetHeight>0&&Ei(n.height)/e.offsetHeight||1);var o=Oa(e)?Er(e):window,c=o.visualViewport,l=!T2()&&r,d=(n.left+(l&&c?c.offsetLeft:0))/a,u=(n.top+(l&&c?c.offsetTop:0))/i,h=n.width/a,f=n.height/i;return{width:h,height:f,top:u,right:d+h,bottom:u+f,left:d,x:d,y:u}}function ex(e){var t=ki(e),r=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function _2(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&Zg(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Yn(e){return e?(e.nodeName||"").toLowerCase():null}function un(e){return Er(e).getComputedStyle(e)}function hT(e){return["table","td","th"].indexOf(Yn(e))>=0}function ta(e){return((Oa(e)?e.ownerDocument:e.document)||window.document).documentElement}function Qu(e){return Yn(e)==="html"?e:e.assignedSlot||e.parentNode||(Zg(e)?e.host:null)||ta(e)}function hy(e){return!Rs(e)||un(e).position==="fixed"?null:e.offsetParent}function fT(e){var t=/firefox/i.test(ap()),r=/Trident/i.test(ap());if(r&&Rs(e)){var n=un(e);if(n.position==="fixed")return null}var a=Qu(e);for(Zg(a)&&(a=a.host);Rs(a)&&["html","body"].indexOf(Yn(a))<0;){var i=un(a);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||t&&i.willChange==="filter"||t&&i.filter&&i.filter!=="none")return a;a=a.parentNode}return null}function Jl(e){for(var t=Er(e),r=hy(e);r&&hT(r)&&un(r).position==="static";)r=hy(r);return r&&(Yn(r)==="html"||Yn(r)==="body"&&un(r).position==="static")?t:r||fT(e)||t}function tx(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Vo(e,t,r){return ba(e,su(t,r))}function mT(e,t,r){var n=Vo(e,t,r);return n>r?r:n}function M2(){return{top:0,right:0,bottom:0,left:0}}function O2(e){return Object.assign({},M2(),e)}function R2(e,t){return t.reduce(function(r,n){return r[n]=e,r},{})}var pT=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,O2(typeof t!="number"?t:R2(t,Xl))};function gT(e){var t,r=e.state,n=e.name,a=e.options,i=r.elements.arrow,o=r.modifiersData.popperOffsets,c=Os(r.placement),l=tx(c),d=[vr,Qr].indexOf(c)>=0,u=d?"height":"width";if(!(!i||!o)){var h=pT(a.padding,r),f=ex(i),x=l==="y"?xr:vr,v=l==="y"?Kr:Qr,y=r.rects.reference[u]+r.rects.reference[l]-o[l]-r.rects.popper[u],b=o[l]-r.rects.reference[l],p=Jl(i),m=p?l==="y"?p.clientHeight||0:p.clientWidth||0:0,j=y/2-b/2,w=h[x],N=m-f[u]-h[v],C=m/2-f[u]/2+j,S=Vo(w,C,N),E=l;r.modifiersData[n]=(t={},t[E]=S,t.centerOffset=S-C,t)}}function xT(e){var t=e.state,r=e.options,n=r.element,a=n===void 0?"[data-popper-arrow]":n;a!=null&&(typeof a=="string"&&(a=t.elements.popper.querySelector(a),!a)||_2(t.elements.popper,a)&&(t.elements.arrow=a))}const vT={name:"arrow",enabled:!0,phase:"main",fn:gT,effect:xT,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Di(e){return e.split("-")[1]}var yT={top:"auto",right:"auto",bottom:"auto",left:"auto"};function bT(e,t){var r=e.x,n=e.y,a=t.devicePixelRatio||1;return{x:Ei(r*a)/a||0,y:Ei(n*a)/a||0}}function fy(e){var t,r=e.popper,n=e.popperRect,a=e.placement,i=e.variation,o=e.offsets,c=e.position,l=e.gpuAcceleration,d=e.adaptive,u=e.roundOffsets,h=e.isFixed,f=o.x,x=f===void 0?0:f,v=o.y,y=v===void 0?0:v,b=typeof u=="function"?u({x,y}):{x,y};x=b.x,y=b.y;var p=o.hasOwnProperty("x"),m=o.hasOwnProperty("y"),j=vr,w=xr,N=window;if(d){var C=Jl(r),S="clientHeight",E="clientWidth";if(C===Er(r)&&(C=ta(r),un(C).position!=="static"&&c==="absolute"&&(S="scrollHeight",E="scrollWidth")),C=C,a===xr||(a===vr||a===Qr)&&i===kl){w=Kr;var k=h&&C===N&&N.visualViewport?N.visualViewport.height:C[S];y-=k-n.height,y*=l?1:-1}if(a===vr||(a===xr||a===Kr)&&i===kl){j=Qr;var T=h&&C===N&&N.visualViewport?N.visualViewport.width:C[E];x-=T-n.width,x*=l?1:-1}}var D=Object.assign({position:c},d&&yT),$=u===!0?bT({x,y},Er(r)):{x,y};if(x=$.x,y=$.y,l){var _;return Object.assign({},D,(_={},_[w]=m?"0":"",_[j]=p?"0":"",_.transform=(N.devicePixelRatio||1)<=1?"translate("+x+"px, "+y+"px)":"translate3d("+x+"px, "+y+"px, 0)",_))}return Object.assign({},D,(t={},t[w]=m?y+"px":"",t[j]=p?x+"px":"",t.transform="",t))}function jT(e){var t=e.state,r=e.options,n=r.gpuAcceleration,a=n===void 0?!0:n,i=r.adaptive,o=i===void 0?!0:i,c=r.roundOffsets,l=c===void 0?!0:c,d={placement:Os(t.placement),variation:Di(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:a,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,fy(Object.assign({},d,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,fy(Object.assign({},d,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const wT={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:jT,data:{}};var Oc={passive:!0};function NT(e){var t=e.state,r=e.instance,n=e.options,a=n.scroll,i=a===void 0?!0:a,o=n.resize,c=o===void 0?!0:o,l=Er(t.elements.popper),d=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&d.forEach(function(u){u.addEventListener("scroll",r.update,Oc)}),c&&l.addEventListener("resize",r.update,Oc),function(){i&&d.forEach(function(u){u.removeEventListener("scroll",r.update,Oc)}),c&&l.removeEventListener("resize",r.update,Oc)}}const CT={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:NT,data:{}};var ST={left:"right",right:"left",bottom:"top",top:"bottom"};function hd(e){return e.replace(/left|right|bottom|top/g,function(t){return ST[t]})}var ET={start:"end",end:"start"};function my(e){return e.replace(/start|end/g,function(t){return ET[t]})}function rx(e){var t=Er(e),r=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:r,scrollTop:n}}function sx(e){return ki(ta(e)).left+rx(e).scrollLeft}function kT(e,t){var r=Er(e),n=ta(e),a=r.visualViewport,i=n.clientWidth,o=n.clientHeight,c=0,l=0;if(a){i=a.width,o=a.height;var d=T2();(d||!d&&t==="fixed")&&(c=a.offsetLeft,l=a.offsetTop)}return{width:i,height:o,x:c+sx(e),y:l}}function DT(e){var t,r=ta(e),n=rx(e),a=(t=e.ownerDocument)==null?void 0:t.body,i=ba(r.scrollWidth,r.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),o=ba(r.scrollHeight,r.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),c=-n.scrollLeft+sx(e),l=-n.scrollTop;return un(a||r).direction==="rtl"&&(c+=ba(r.clientWidth,a?a.clientWidth:0)-i),{width:i,height:o,x:c,y:l}}function nx(e){var t=un(e),r=t.overflow,n=t.overflowX,a=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+a+n)}function P2(e){return["html","body","#document"].indexOf(Yn(e))>=0?e.ownerDocument.body:Rs(e)&&nx(e)?e:P2(Qu(e))}function Ho(e,t){var r;t===void 0&&(t=[]);var n=P2(e),a=n===((r=e.ownerDocument)==null?void 0:r.body),i=Er(n),o=a?[i].concat(i.visualViewport||[],nx(n)?n:[]):n,c=t.concat(o);return a?c:c.concat(Ho(Qu(o)))}function ip(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function AT(e,t){var r=ki(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function py(e,t,r){return t===A2?ip(kT(e,r)):Oa(t)?AT(t,r):ip(DT(ta(e)))}function TT(e){var t=Ho(Qu(e)),r=["absolute","fixed"].indexOf(un(e).position)>=0,n=r&&Rs(e)?Jl(e):e;return Oa(n)?t.filter(function(a){return Oa(a)&&_2(a,n)&&Yn(a)!=="body"}):[]}function _T(e,t,r,n){var a=t==="clippingParents"?TT(e):[].concat(t),i=[].concat(a,[r]),o=i[0],c=i.reduce(function(l,d){var u=py(e,d,n);return l.top=ba(u.top,l.top),l.right=su(u.right,l.right),l.bottom=su(u.bottom,l.bottom),l.left=ba(u.left,l.left),l},py(e,o,n));return c.width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c}function L2(e){var t=e.reference,r=e.element,n=e.placement,a=n?Os(n):null,i=n?Di(n):null,o=t.x+t.width/2-r.width/2,c=t.y+t.height/2-r.height/2,l;switch(a){case xr:l={x:o,y:t.y-r.height};break;case Kr:l={x:o,y:t.y+t.height};break;case Qr:l={x:t.x+t.width,y:c};break;case vr:l={x:t.x-r.width,y:c};break;default:l={x:t.x,y:t.y}}var d=a?tx(a):null;if(d!=null){var u=d==="y"?"height":"width";switch(i){case Si:l[d]=l[d]-(t[u]/2-r[u]/2);break;case kl:l[d]=l[d]+(t[u]/2-r[u]/2);break}}return l}function Dl(e,t){t===void 0&&(t={});var r=t,n=r.placement,a=n===void 0?e.placement:n,i=r.strategy,o=i===void 0?e.strategy:i,c=r.boundary,l=c===void 0?eT:c,d=r.rootBoundary,u=d===void 0?A2:d,h=r.elementContext,f=h===void 0?jo:h,x=r.altBoundary,v=x===void 0?!1:x,y=r.padding,b=y===void 0?0:y,p=O2(typeof b!="number"?b:R2(b,Xl)),m=f===jo?tT:jo,j=e.rects.popper,w=e.elements[v?m:f],N=_T(Oa(w)?w:w.contextElement||ta(e.elements.popper),l,u,o),C=ki(e.elements.reference),S=L2({reference:C,element:j,placement:a}),E=ip(Object.assign({},j,S)),k=f===jo?E:C,T={top:N.top-k.top+p.top,bottom:k.bottom-N.bottom+p.bottom,left:N.left-k.left+p.left,right:k.right-N.right+p.right},D=e.modifiersData.offset;if(f===jo&&D){var $=D[a];Object.keys(T).forEach(function(_){var A=[Qr,Kr].indexOf(_)>=0?1:-1,B=[xr,Kr].indexOf(_)>=0?"y":"x";T[_]+=$[B]*A})}return T}function MT(e,t){t===void 0&&(t={});var r=t,n=r.placement,a=r.boundary,i=r.rootBoundary,o=r.padding,c=r.flipVariations,l=r.allowedAutoPlacements,d=l===void 0?Jg:l,u=Di(n),h=u?c?uy:uy.filter(function(v){return Di(v)===u}):Xl,f=h.filter(function(v){return d.indexOf(v)>=0});f.length===0&&(f=h);var x=f.reduce(function(v,y){return v[y]=Dl(e,{placement:y,boundary:a,rootBoundary:i,padding:o})[Os(y)],v},{});return Object.keys(x).sort(function(v,y){return x[v]-x[y]})}function OT(e){if(Os(e)===Xg)return[];var t=hd(e);return[my(e),t,my(t)]}function RT(e){var t=e.state,r=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var a=r.mainAxis,i=a===void 0?!0:a,o=r.altAxis,c=o===void 0?!0:o,l=r.fallbackPlacements,d=r.padding,u=r.boundary,h=r.rootBoundary,f=r.altBoundary,x=r.flipVariations,v=x===void 0?!0:x,y=r.allowedAutoPlacements,b=t.options.placement,p=Os(b),m=p===b,j=l||(m||!v?[hd(b)]:OT(b)),w=[b].concat(j).reduce(function(Z,F){return Z.concat(Os(F)===Xg?MT(t,{placement:F,boundary:u,rootBoundary:h,padding:d,flipVariations:v,allowedAutoPlacements:y}):F)},[]),N=t.rects.reference,C=t.rects.popper,S=new Map,E=!0,k=w[0],T=0;T<w.length;T++){var D=w[T],$=Os(D),_=Di(D)===Si,A=[xr,Kr].indexOf($)>=0,B=A?"width":"height",P=Dl(t,{placement:D,boundary:u,rootBoundary:h,altBoundary:f,padding:d}),M=A?_?Qr:vr:_?Kr:xr;N[B]>C[B]&&(M=hd(M));var R=hd(M),W=[];if(i&&W.push(P[$]<=0),c&&W.push(P[M]<=0,P[R]<=0),W.every(function(Z){return Z})){k=D,E=!1;break}S.set(D,W)}if(E)for(var V=v?3:1,z=function(F){var U=w.find(function(Y){var Q=S.get(Y);if(Q)return Q.slice(0,F).every(function(de){return de})});if(U)return k=U,"break"},H=V;H>0;H--){var G=z(H);if(G==="break")break}t.placement!==k&&(t.modifiersData[n]._skip=!0,t.placement=k,t.reset=!0)}}const PT={name:"flip",enabled:!0,phase:"main",fn:RT,requiresIfExists:["offset"],data:{_skip:!1}};function gy(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function xy(e){return[xr,Qr,Kr,vr].some(function(t){return e[t]>=0})}function LT(e){var t=e.state,r=e.name,n=t.rects.reference,a=t.rects.popper,i=t.modifiersData.preventOverflow,o=Dl(t,{elementContext:"reference"}),c=Dl(t,{altBoundary:!0}),l=gy(o,n),d=gy(c,a,i),u=xy(l),h=xy(d);t.modifiersData[r]={referenceClippingOffsets:l,popperEscapeOffsets:d,isReferenceHidden:u,hasPopperEscaped:h},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":h})}const IT={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:LT};function $T(e,t,r){var n=Os(e),a=[vr,xr].indexOf(n)>=0?-1:1,i=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,o=i[0],c=i[1];return o=o||0,c=(c||0)*a,[vr,Qr].indexOf(n)>=0?{x:c,y:o}:{x:o,y:c}}function FT(e){var t=e.state,r=e.options,n=e.name,a=r.offset,i=a===void 0?[0,0]:a,o=Jg.reduce(function(u,h){return u[h]=$T(h,t.rects,i),u},{}),c=o[t.placement],l=c.x,d=c.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=d),t.modifiersData[n]=o}const BT={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:FT};function zT(e){var t=e.state,r=e.name;t.modifiersData[r]=L2({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const UT={name:"popperOffsets",enabled:!0,phase:"read",fn:zT,data:{}};function VT(e){return e==="x"?"y":"x"}function HT(e){var t=e.state,r=e.options,n=e.name,a=r.mainAxis,i=a===void 0?!0:a,o=r.altAxis,c=o===void 0?!1:o,l=r.boundary,d=r.rootBoundary,u=r.altBoundary,h=r.padding,f=r.tether,x=f===void 0?!0:f,v=r.tetherOffset,y=v===void 0?0:v,b=Dl(t,{boundary:l,rootBoundary:d,padding:h,altBoundary:u}),p=Os(t.placement),m=Di(t.placement),j=!m,w=tx(p),N=VT(w),C=t.modifiersData.popperOffsets,S=t.rects.reference,E=t.rects.popper,k=typeof y=="function"?y(Object.assign({},t.rects,{placement:t.placement})):y,T=typeof k=="number"?{mainAxis:k,altAxis:k}:Object.assign({mainAxis:0,altAxis:0},k),D=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,$={x:0,y:0};if(C){if(i){var _,A=w==="y"?xr:vr,B=w==="y"?Kr:Qr,P=w==="y"?"height":"width",M=C[w],R=M+b[A],W=M-b[B],V=x?-E[P]/2:0,z=m===Si?S[P]:E[P],H=m===Si?-E[P]:-S[P],G=t.elements.arrow,Z=x&&G?ex(G):{width:0,height:0},F=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:M2(),U=F[A],Y=F[B],Q=Vo(0,S[P],Z[P]),de=j?S[P]/2-V-Q-U-T.mainAxis:z-Q-U-T.mainAxis,q=j?-S[P]/2+V+Q+Y+T.mainAxis:H+Q+Y+T.mainAxis,ue=t.elements.arrow&&Jl(t.elements.arrow),oe=ue?w==="y"?ue.clientTop||0:ue.clientLeft||0:0,ye=(_=D==null?void 0:D[w])!=null?_:0,$e=M+de-ye-oe,st=M+q-ye,J=Vo(x?su(R,$e):R,M,x?ba(W,st):W);C[w]=J,$[w]=J-M}if(c){var me,_e=w==="x"?xr:vr,ze=w==="x"?Kr:Qr,Ce=C[N],Pe=N==="y"?"height":"width",He=Ce+b[_e],zt=Ce-b[ze],es=[xr,vr].indexOf(p)!==-1,js=(me=D==null?void 0:D[N])!=null?me:0,Hs=es?He:Ce-S[Pe]-E[Pe]-js+T.altAxis,Ke=es?Ce+S[Pe]+E[Pe]-js-T.altAxis:zt,Xt=x&&es?mT(Hs,Ce,Ke):Vo(x?Hs:He,Ce,x?Ke:zt);C[N]=Xt,$[N]=Xt-Ce}t.modifiersData[n]=$}}const WT={name:"preventOverflow",enabled:!0,phase:"main",fn:HT,requiresIfExists:["offset"]};function YT(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function qT(e){return e===Er(e)||!Rs(e)?rx(e):YT(e)}function GT(e){var t=e.getBoundingClientRect(),r=Ei(t.width)/e.offsetWidth||1,n=Ei(t.height)/e.offsetHeight||1;return r!==1||n!==1}function KT(e,t,r){r===void 0&&(r=!1);var n=Rs(t),a=Rs(t)&&GT(t),i=ta(t),o=ki(e,a,r),c={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(n||!n&&!r)&&((Yn(t)!=="body"||nx(i))&&(c=qT(t)),Rs(t)?(l=ki(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):i&&(l.x=sx(i))),{x:o.left+c.scrollLeft-l.x,y:o.top+c.scrollTop-l.y,width:o.width,height:o.height}}function QT(e){var t=new Map,r=new Set,n=[];e.forEach(function(i){t.set(i.name,i)});function a(i){r.add(i.name);var o=[].concat(i.requires||[],i.requiresIfExists||[]);o.forEach(function(c){if(!r.has(c)){var l=t.get(c);l&&a(l)}}),n.push(i)}return e.forEach(function(i){r.has(i.name)||a(i)}),n}function XT(e){var t=QT(e);return uT.reduce(function(r,n){return r.concat(t.filter(function(a){return a.phase===n}))},[])}function JT(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function ZT(e){var t=e.reduce(function(r,n){var a=r[n.name];return r[n.name]=a?Object.assign({},a,n,{options:Object.assign({},a.options,n.options),data:Object.assign({},a.data,n.data)}):n,r},{});return Object.keys(t).map(function(r){return t[r]})}var vy={placement:"bottom",modifiers:[],strategy:"absolute"};function yy(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function e_(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,n=r===void 0?[]:r,a=t.defaultOptions,i=a===void 0?vy:a;return function(c,l,d){d===void 0&&(d=i);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},vy,i),modifiersData:{},elements:{reference:c,popper:l},attributes:{},styles:{}},h=[],f=!1,x={state:u,setOptions:function(p){var m=typeof p=="function"?p(u.options):p;y(),u.options=Object.assign({},i,u.options,m),u.scrollParents={reference:Oa(c)?Ho(c):c.contextElement?Ho(c.contextElement):[],popper:Ho(l)};var j=XT(ZT([].concat(n,u.options.modifiers)));return u.orderedModifiers=j.filter(function(w){return w.enabled}),v(),x.update()},forceUpdate:function(){if(!f){var p=u.elements,m=p.reference,j=p.popper;if(yy(m,j)){u.rects={reference:KT(m,Jl(j),u.options.strategy==="fixed"),popper:ex(j)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(T){return u.modifiersData[T.name]=Object.assign({},T.data)});for(var w=0;w<u.orderedModifiers.length;w++){if(u.reset===!0){u.reset=!1,w=-1;continue}var N=u.orderedModifiers[w],C=N.fn,S=N.options,E=S===void 0?{}:S,k=N.name;typeof C=="function"&&(u=C({state:u,options:E,name:k,instance:x})||u)}}}},update:JT(function(){return new Promise(function(b){x.forceUpdate(),b(u)})}),destroy:function(){y(),f=!0}};if(!yy(c,l))return x;x.setOptions(d).then(function(b){!f&&d.onFirstUpdate&&d.onFirstUpdate(b)});function v(){u.orderedModifiers.forEach(function(b){var p=b.name,m=b.options,j=m===void 0?{}:m,w=b.effect;if(typeof w=="function"){var N=w({state:u,name:p,instance:x,options:j}),C=function(){};h.push(N||C)}})}function y(){h.forEach(function(b){return b()}),h=[]}return x}}var t_=e_({defaultModifiers:[IT,UT,wT,CT,BT,PT,WT,vT]}),by=function(t){return{position:t,top:"0",left:"0",opacity:"0",pointerEvents:"none"}},r_={name:"applyStyles",enabled:!1},s_={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:function(t){var r=t.state;return function(){var n=r.elements,a=n.reference,i=n.popper;if("removeAttribute"in a){var o=(a.getAttribute("aria-describedby")||"").split(",").filter(function(c){return c.trim()!==i.id});o.length?a.setAttribute("aria-describedby",o.join(",")):a.removeAttribute("aria-describedby")}}},fn:function(t){var r,n=t.state,a=n.elements,i=a.popper,o=a.reference,c=(r=i.getAttribute("role"))==null?void 0:r.toLowerCase();if(i.id&&c==="tooltip"&&"setAttribute"in o){var l=o.getAttribute("aria-describedby");if(l&&l.split(",").indexOf(i.id)!==-1)return;o.setAttribute("aria-describedby",l?l+","+i.id:i.id)}}},n_=[];function a_(e,t,r){var n=r===void 0?{}:r,a=n.enabled,i=a===void 0?!0:a,o=n.placement,c=o===void 0?"bottom":o,l=n.strategy,d=l===void 0?"absolute":l,u=n.modifiers,h=u===void 0?n_:u,f=qu(n,["enabled","placement","strategy","modifiers"]),x=g.useRef(),v=g.useCallback(function(){var w;(w=x.current)==null||w.update()},[]),y=g.useCallback(function(){var w;(w=x.current)==null||w.forceUpdate()},[]),b=Z5(g.useState({placement:c,update:v,forceUpdate:y,attributes:{},styles:{popper:by(d),arrow:{}}})),p=b[0],m=b[1],j=g.useMemo(function(){return{name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:function(N){var C=N.state,S={},E={};Object.keys(C.elements).forEach(function(k){S[k]=C.styles[k],E[k]=C.attributes[k]}),m({state:C,styles:S,attributes:E,update:v,forceUpdate:y,placement:C.placement})}}},[v,y,m]);return g.useEffect(function(){!x.current||!i||x.current.setOptions({placement:c,strategy:d,modifiers:[].concat(h,[j,r_])})},[d,c,j,i]),g.useEffect(function(){if(!(!i||e==null||t==null))return x.current=t_(e,t,mt({},f,{placement:c,strategy:d,modifiers:[].concat(h,[s_,j])})),function(){x.current!=null&&(x.current.destroy(),x.current=void 0,m(function(w){return mt({},w,{attributes:{},styles:{popper:by(d)}})}))}},[i,e,t]),p}function i_(e,t,r,n){var a=n&&typeof n!="boolean"?n.capture:n;e.removeEventListener(t,r,a),r.__once&&e.removeEventListener(t,r.__once,a)}function _o(e,t,r,n){return Q5(e,t,r,n),function(){i_(e,t,r,n)}}var o_=function(){},l_=o_;const c_=br(l_);function d_(e){return e&&"setState"in e?u1.findDOMNode(e):e??null}const u_=function(e){return Ql(d_(e))};var h_=27,jy=function(){};function f_(e){return e.button===0}function m_(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}var wy=function(t){return t&&("current"in t?t.current:t)};function p_(e,t,r){var n=r===void 0?{}:r,a=n.disabled,i=n.clickTrigger,o=i===void 0?"click":i,c=g.useRef(!1),l=t||jy,d=g.useCallback(function(f){var x,v=wy(e);c_(!!v,"RootClose captured a close event but does not have a ref to compare it to. useRootClose(), should be passed a ref that resolves to a DOM node"),c.current=!v||m_(f)||!f_(f)||!!El(v,(x=f.composedPath==null?void 0:f.composedPath()[0])!=null?x:f.target)},[e]),u=cy(function(f){c.current||l(f)}),h=cy(function(f){f.keyCode===h_&&l(f)});g.useEffect(function(){if(!(a||e==null)){var f=window.event,x=u_(wy(e)),v=_o(x,o,d,!0),y=_o(x,o,function(m){if(m===f){f=void 0;return}u(m)}),b=_o(x,"keyup",function(m){if(m===f){f=void 0;return}h(m)}),p=[];return"ontouchstart"in x.documentElement&&(p=[].slice.call(x.body.children).map(function(m){return _o(m,"mousemove",jy)})),function(){v(),y(),b(),p.forEach(function(m){return m()})}}},[e,a,o,d,u,h])}function g_(e){var t={};return Array.isArray(e)?(e==null||e.forEach(function(r){t[r.name]=r}),t):e||t}function x_(e){return e===void 0&&(e={}),Array.isArray(e)?e:Object.keys(e).map(function(t){return e[t].name=t,e[t]})}function v_(e){var t,r,n,a,i=e.enabled,o=e.enableEvents,c=e.placement,l=e.flip,d=e.offset,u=e.fixed,h=e.containerPadding,f=e.arrowElement,x=e.popperConfig,v=x===void 0?{}:x,y=g_(v.modifiers);return mt({},v,{placement:c,enabled:i,strategy:u?"fixed":v.strategy,modifiers:x_(mt({},y,{eventListeners:{enabled:o},preventOverflow:mt({},y.preventOverflow,{options:h?mt({padding:h},(t=y.preventOverflow)==null?void 0:t.options):(r=y.preventOverflow)==null?void 0:r.options}),offset:{options:mt({offset:d},(n=y.offset)==null?void 0:n.options)},arrow:mt({},y.arrow,{enabled:!!f,options:mt({},(a=y.arrow)==null?void 0:a.options,{element:f})}),flip:mt({enabled:!!l},y.flip)}))})}function y_(e,t){return e.classList?e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function b_(e,t){e.classList?e.classList.add(t):y_(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function Ny(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function j_(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=Ny(e.className,t):e.setAttribute("class",Ny(e.className&&e.className.baseVal||"",t))}var Rc;function ax(e){if((!Rc&&Rc!==0||e)&&Qg){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),Rc=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Rc}var Ef=function(t){var r;return typeof document>"u"?null:t==null?Ql().body:(typeof t=="function"&&(t=t()),t&&"current"in t&&(t=t.current),(r=t)!=null&&r.nodeType&&t||null)};function Cy(e,t){var r=g.useState(function(){return Ef(e)}),n=r[0],a=r[1];if(!n){var i=Ef(e);i&&a(i)}return g.useEffect(function(){},[t,n]),g.useEffect(function(){var o=Ef(e);o!==n&&a(o)},[e,n]),n}const Sy=e=>!e||typeof e=="function"?e:t=>{e.current=t};function w_(e,t){const r=Sy(e),n=Sy(t);return a=>{r&&r(a),n&&n(a)}}function N_(e,t){return g.useMemo(()=>w_(e,t),[e,t])}var ix=I.forwardRef(function(e,t){var r=e.flip,n=e.offset,a=e.placement,i=e.containerPadding,o=i===void 0?5:i,c=e.popperConfig,l=c===void 0?{}:c,d=e.transition,u=dy(),h=u[0],f=u[1],x=dy(),v=x[0],y=x[1],b=N_(f,t),p=Cy(e.container),m=Cy(e.target),j=g.useState(!e.show),w=j[0],N=j[1],C=a_(m,h,v_({placement:a,enableEvents:!!e.show,containerPadding:o||5,flip:r,offset:n,arrowElement:v,popperConfig:l})),S=C.styles,E=C.attributes,k=qu(C,["styles","attributes"]);e.show?w&&N(!1):!e.transition&&!w&&N(!0);var T=function(){N(!0),e.onExited&&e.onExited.apply(e,arguments)},D=e.show||d&&!w;if(p_(h,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!D)return null;var $=e.children(mt({},k,{show:!!e.show,props:mt({},E.popper,{style:S.popper,ref:b}),arrowProps:mt({},E.arrow,{style:S.arrow,ref:y})}));if(d){var _=e.onExit,A=e.onExiting,B=e.onEnter,P=e.onEntering,M=e.onEntered;$=I.createElement(d,{in:e.show,appear:!0,onExit:_,onExiting:A,onExited:T,onEnter:B,onEntering:P,onEntered:M},$)}return p?u1.createPortal($,p):null});ix.displayName="Overlay";ix.propTypes={show:se.bool,placement:se.oneOf(Jg),target:se.any,container:se.any,flip:se.bool,children:se.func.isRequired,containerPadding:se.number,popperConfig:se.object,rootClose:se.bool,rootCloseEvent:se.oneOf(["click","mousedown"]),rootCloseDisabled:se.bool,onHide:function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];if(t.rootClose){var i;return(i=se.func).isRequired.apply(i,[t].concat(n))}return se.func.apply(se,[t].concat(n))},transition:se.elementType,onEnter:se.func,onEntering:se.func,onEntered:se.func,onExit:se.func,onExiting:se.func,onExited:se.func};function C_(){this.__data__=[],this.size=0}var S_=C_,E_=ql;function k_(e,t){for(var r=e.length;r--;)if(E_(e[r][0],t))return r;return-1}var Xu=k_,D_=Xu,A_=Array.prototype,T_=A_.splice;function __(e){var t=this.__data__,r=D_(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():T_.call(t,r,1),--this.size,!0}var M_=__,O_=Xu;function R_(e){var t=this.__data__,r=O_(t,e);return r<0?void 0:t[r][1]}var P_=R_,L_=Xu;function I_(e){return L_(this.__data__,e)>-1}var $_=I_,F_=Xu;function B_(e,t){var r=this.__data__,n=F_(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var z_=B_,U_=S_,V_=M_,H_=P_,W_=$_,Y_=z_;function Wi(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Wi.prototype.clear=U_;Wi.prototype.delete=V_;Wi.prototype.get=H_;Wi.prototype.has=W_;Wi.prototype.set=Y_;var Ju=Wi,q_=Ju;function G_(){this.__data__=new q_,this.size=0}var K_=G_;function Q_(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var X_=Q_;function J_(e){return this.__data__.get(e)}var Z_=J_;function eM(e){return this.__data__.has(e)}var tM=eM,rM=Bs,sM=rM["__core-js_shared__"],nM=sM,kf=nM,Ey=function(){var e=/[^.]+$/.exec(kf&&kf.keys&&kf.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function aM(e){return!!Ey&&Ey in e}var iM=aM,oM=Function.prototype,lM=oM.toString;function cM(e){if(e!=null){try{return lM.call(e)}catch{}try{return e+""}catch{}}return""}var I2=cM,dM=Yg,uM=iM,hM=mn,fM=I2,mM=/[\\^$.*+?()[\]{}|]/g,pM=/^\[object .+?Constructor\]$/,gM=Function.prototype,xM=Object.prototype,vM=gM.toString,yM=xM.hasOwnProperty,bM=RegExp("^"+vM.call(yM).replace(mM,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function jM(e){if(!hM(e)||uM(e))return!1;var t=dM(e)?bM:pM;return t.test(fM(e))}var wM=jM;function NM(e,t){return e==null?void 0:e[t]}var CM=NM,SM=wM,EM=CM;function kM(e,t){var r=EM(e,t);return SM(r)?r:void 0}var $a=kM,DM=$a,AM=Bs,TM=DM(AM,"Map"),ox=TM,_M=$a,MM=_M(Object,"create"),Zu=MM,ky=Zu;function OM(){this.__data__=ky?ky(null):{},this.size=0}var RM=OM;function PM(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var LM=PM,IM=Zu,$M="__lodash_hash_undefined__",FM=Object.prototype,BM=FM.hasOwnProperty;function zM(e){var t=this.__data__;if(IM){var r=t[e];return r===$M?void 0:r}return BM.call(t,e)?t[e]:void 0}var UM=zM,VM=Zu,HM=Object.prototype,WM=HM.hasOwnProperty;function YM(e){var t=this.__data__;return VM?t[e]!==void 0:WM.call(t,e)}var qM=YM,GM=Zu,KM="__lodash_hash_undefined__";function QM(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=GM&&t===void 0?KM:t,this}var XM=QM,JM=RM,ZM=LM,eO=UM,tO=qM,rO=XM;function Yi(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Yi.prototype.clear=JM;Yi.prototype.delete=ZM;Yi.prototype.get=eO;Yi.prototype.has=tO;Yi.prototype.set=rO;var sO=Yi,Dy=sO,nO=Ju,aO=ox;function iO(){this.size=0,this.__data__={hash:new Dy,map:new(aO||nO),string:new Dy}}var oO=iO;function lO(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var cO=lO,dO=cO;function uO(e,t){var r=e.__data__;return dO(t)?r[typeof t=="string"?"string":"hash"]:r.map}var eh=uO,hO=eh;function fO(e){var t=hO(this,e).delete(e);return this.size-=t?1:0,t}var mO=fO,pO=eh;function gO(e){return pO(this,e).get(e)}var xO=gO,vO=eh;function yO(e){return vO(this,e).has(e)}var bO=yO,jO=eh;function wO(e,t){var r=jO(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var NO=wO,CO=oO,SO=mO,EO=xO,kO=bO,DO=NO;function qi(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}qi.prototype.clear=CO;qi.prototype.delete=SO;qi.prototype.get=EO;qi.prototype.has=kO;qi.prototype.set=DO;var lx=qi,AO=Ju,TO=ox,_O=lx,MO=200;function OO(e,t){var r=this.__data__;if(r instanceof AO){var n=r.__data__;if(!TO||n.length<MO-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new _O(n)}return r.set(e,t),this.size=r.size,this}var RO=OO,PO=Ju,LO=K_,IO=X_,$O=Z_,FO=tM,BO=RO;function Gi(e){var t=this.__data__=new PO(e);this.size=t.size}Gi.prototype.clear=LO;Gi.prototype.delete=IO;Gi.prototype.get=$O;Gi.prototype.has=FO;Gi.prototype.set=BO;var cx=Gi,zO="__lodash_hash_undefined__";function UO(e){return this.__data__.set(e,zO),this}var VO=UO;function HO(e){return this.__data__.has(e)}var WO=HO,YO=lx,qO=VO,GO=WO;function nu(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new YO;++t<r;)this.add(e[t])}nu.prototype.add=nu.prototype.push=qO;nu.prototype.has=GO;var KO=nu;function QO(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var XO=QO;function JO(e,t){return e.has(t)}var ZO=JO,eR=KO,tR=XO,rR=ZO,sR=1,nR=2;function aR(e,t,r,n,a,i){var o=r&sR,c=e.length,l=t.length;if(c!=l&&!(o&&l>c))return!1;var d=i.get(e),u=i.get(t);if(d&&u)return d==t&&u==e;var h=-1,f=!0,x=r&nR?new eR:void 0;for(i.set(e,t),i.set(t,e);++h<c;){var v=e[h],y=t[h];if(n)var b=o?n(y,v,h,t,e,i):n(v,y,h,e,t,i);if(b!==void 0){if(b)continue;f=!1;break}if(x){if(!tR(t,function(p,m){if(!rR(x,m)&&(v===p||a(v,p,r,n,i)))return x.push(m)})){f=!1;break}}else if(!(v===y||a(v,y,r,n,i))){f=!1;break}}return i.delete(e),i.delete(t),f}var $2=aR,iR=Bs,oR=iR.Uint8Array,F2=oR;function lR(e){var t=-1,r=Array(e.size);return e.forEach(function(n,a){r[++t]=[a,n]}),r}var cR=lR;function dR(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var uR=dR,Ay=Vi,Ty=F2,hR=ql,fR=$2,mR=cR,pR=uR,gR=1,xR=2,vR="[object Boolean]",yR="[object Date]",bR="[object Error]",jR="[object Map]",wR="[object Number]",NR="[object RegExp]",CR="[object Set]",SR="[object String]",ER="[object Symbol]",kR="[object ArrayBuffer]",DR="[object DataView]",_y=Ay?Ay.prototype:void 0,Df=_y?_y.valueOf:void 0;function AR(e,t,r,n,a,i,o){switch(r){case DR:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case kR:return!(e.byteLength!=t.byteLength||!i(new Ty(e),new Ty(t)));case vR:case yR:case wR:return hR(+e,+t);case bR:return e.name==t.name&&e.message==t.message;case NR:case SR:return e==t+"";case jR:var c=mR;case CR:var l=n&gR;if(c||(c=pR),e.size!=t.size&&!l)return!1;var d=o.get(e);if(d)return d==t;n|=xR,o.set(e,t);var u=fR(c(e),c(t),n,a,i,o);return o.delete(e),u;case ER:if(Df)return Df.call(e)==Df.call(t)}return!1}var TR=AR;function _R(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}var dx=_R,MR=Array.isArray,Xr=MR,OR=dx,RR=Xr;function PR(e,t,r){var n=t(e);return RR(e)?n:OR(n,r(e))}var B2=PR;function LR(e,t){for(var r=-1,n=e==null?0:e.length,a=0,i=[];++r<n;){var o=e[r];t(o,r,e)&&(i[a++]=o)}return i}var IR=LR;function $R(){return[]}var z2=$R,FR=IR,BR=z2,zR=Object.prototype,UR=zR.propertyIsEnumerable,My=Object.getOwnPropertySymbols,VR=My?function(e){return e==null?[]:(e=Object(e),FR(My(e),function(t){return UR.call(e,t)}))}:BR,ux=VR;function HR(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var WR=HR,YR=Hi,qR=ea,GR="[object Arguments]";function KR(e){return qR(e)&&YR(e)==GR}var QR=KR,Oy=QR,XR=ea,U2=Object.prototype,JR=U2.hasOwnProperty,ZR=U2.propertyIsEnumerable,eP=Oy(function(){return arguments}())?Oy:function(e){return XR(e)&&JR.call(e,"callee")&&!ZR.call(e,"callee")},hx=eP,au={exports:{}};function tP(){return!1}var rP=tP;au.exports;(function(e,t){var r=Bs,n=rP,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,c=o?r.Buffer:void 0,l=c?c.isBuffer:void 0,d=l||n;e.exports=d})(au,au.exports);var th=au.exports,sP=Hi,nP=qg,aP=ea,iP="[object Arguments]",oP="[object Array]",lP="[object Boolean]",cP="[object Date]",dP="[object Error]",uP="[object Function]",hP="[object Map]",fP="[object Number]",mP="[object Object]",pP="[object RegExp]",gP="[object Set]",xP="[object String]",vP="[object WeakMap]",yP="[object ArrayBuffer]",bP="[object DataView]",jP="[object Float32Array]",wP="[object Float64Array]",NP="[object Int8Array]",CP="[object Int16Array]",SP="[object Int32Array]",EP="[object Uint8Array]",kP="[object Uint8ClampedArray]",DP="[object Uint16Array]",AP="[object Uint32Array]",Je={};Je[jP]=Je[wP]=Je[NP]=Je[CP]=Je[SP]=Je[EP]=Je[kP]=Je[DP]=Je[AP]=!0;Je[iP]=Je[oP]=Je[yP]=Je[lP]=Je[bP]=Je[cP]=Je[dP]=Je[uP]=Je[hP]=Je[fP]=Je[mP]=Je[pP]=Je[gP]=Je[xP]=Je[vP]=!1;function TP(e){return aP(e)&&nP(e.length)&&!!Je[sP(e)]}var _P=TP;function MP(e){return function(t){return e(t)}}var rh=MP,iu={exports:{}};iu.exports;(function(e,t){var r=b2,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===n,o=i&&r.process,c=function(){try{var l=a&&a.require&&a.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();e.exports=c})(iu,iu.exports);var fx=iu.exports,OP=_P,RP=rh,Ry=fx,Py=Ry&&Ry.isTypedArray,PP=Py?RP(Py):OP,mx=PP,LP=WR,IP=hx,$P=Xr,FP=th,BP=Gg,zP=mx,UP=Object.prototype,VP=UP.hasOwnProperty;function HP(e,t){var r=$P(e),n=!r&&IP(e),a=!r&&!n&&FP(e),i=!r&&!n&&!a&&zP(e),o=r||n||a||i,c=o?LP(e.length,String):[],l=c.length;for(var d in e)(t||VP.call(e,d))&&!(o&&(d=="length"||a&&(d=="offset"||d=="parent")||i&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||BP(d,l)))&&c.push(d);return c}var V2=HP,WP=Object.prototype;function YP(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||WP;return e===r}var px=YP;function qP(e,t){return function(r){return e(t(r))}}var H2=qP,GP=H2,KP=GP(Object.keys,Object),QP=KP,XP=px,JP=QP,ZP=Object.prototype,eL=ZP.hasOwnProperty;function tL(e){if(!XP(e))return JP(e);var t=[];for(var r in Object(e))eL.call(e,r)&&r!="constructor"&&t.push(r);return t}var rL=tL,sL=V2,nL=rL,aL=Gl;function iL(e){return aL(e)?sL(e):nL(e)}var Zl=iL,oL=B2,lL=ux,cL=Zl;function dL(e){return oL(e,cL,lL)}var W2=dL,Ly=W2,uL=1,hL=Object.prototype,fL=hL.hasOwnProperty;function mL(e,t,r,n,a,i){var o=r&uL,c=Ly(e),l=c.length,d=Ly(t),u=d.length;if(l!=u&&!o)return!1;for(var h=l;h--;){var f=c[h];if(!(o?f in t:fL.call(t,f)))return!1}var x=i.get(e),v=i.get(t);if(x&&v)return x==t&&v==e;var y=!0;i.set(e,t),i.set(t,e);for(var b=o;++h<l;){f=c[h];var p=e[f],m=t[f];if(n)var j=o?n(m,p,f,t,e,i):n(p,m,f,e,t,i);if(!(j===void 0?p===m||a(p,m,r,n,i):j)){y=!1;break}b||(b=f=="constructor")}if(y&&!b){var w=e.constructor,N=t.constructor;w!=N&&"constructor"in e&&"constructor"in t&&!(typeof w=="function"&&w instanceof w&&typeof N=="function"&&N instanceof N)&&(y=!1)}return i.delete(e),i.delete(t),y}var pL=mL,gL=$a,xL=Bs,vL=gL(xL,"DataView"),yL=vL,bL=$a,jL=Bs,wL=bL(jL,"Promise"),NL=wL,CL=$a,SL=Bs,EL=CL(SL,"Set"),kL=EL,DL=$a,AL=Bs,TL=DL(AL,"WeakMap"),_L=TL,op=yL,lp=ox,cp=NL,dp=kL,up=_L,Y2=Hi,Ki=I2,Iy="[object Map]",ML="[object Object]",$y="[object Promise]",Fy="[object Set]",By="[object WeakMap]",zy="[object DataView]",OL=Ki(op),RL=Ki(lp),PL=Ki(cp),LL=Ki(dp),IL=Ki(up),la=Y2;(op&&la(new op(new ArrayBuffer(1)))!=zy||lp&&la(new lp)!=Iy||cp&&la(cp.resolve())!=$y||dp&&la(new dp)!=Fy||up&&la(new up)!=By)&&(la=function(e){var t=Y2(e),r=t==ML?e.constructor:void 0,n=r?Ki(r):"";if(n)switch(n){case OL:return zy;case RL:return Iy;case PL:return $y;case LL:return Fy;case IL:return By}return t});var sh=la,Af=cx,$L=$2,FL=TR,BL=pL,Uy=sh,Vy=Xr,Hy=th,zL=mx,UL=1,Wy="[object Arguments]",Yy="[object Array]",Pc="[object Object]",VL=Object.prototype,qy=VL.hasOwnProperty;function HL(e,t,r,n,a,i){var o=Vy(e),c=Vy(t),l=o?Yy:Uy(e),d=c?Yy:Uy(t);l=l==Wy?Pc:l,d=d==Wy?Pc:d;var u=l==Pc,h=d==Pc,f=l==d;if(f&&Hy(e)){if(!Hy(t))return!1;o=!0,u=!1}if(f&&!u)return i||(i=new Af),o||zL(e)?$L(e,t,r,n,a,i):FL(e,t,l,r,n,a,i);if(!(r&UL)){var x=u&&qy.call(e,"__wrapped__"),v=h&&qy.call(t,"__wrapped__");if(x||v){var y=x?e.value():e,b=v?t.value():t;return i||(i=new Af),a(y,b,r,n,i)}}return f?(i||(i=new Af),BL(e,t,r,n,a,i)):!1}var WL=HL,YL=WL,Gy=ea;function q2(e,t,r,n,a){return e===t?!0:e==null||t==null||!Gy(e)&&!Gy(t)?e!==e&&t!==t:YL(e,t,r,n,q2,a)}var gx=q2,qL=gx;function GL(e,t){return qL(e,t)}var KL=GL;const QL=br(KL);function Tf(e,t){var r=Kg(e);return r?r.innerHeight:ya(e).height}function G2(e,t,r){e.closest&&!r&&e.closest(t);var n=e;do{if(q5(n,t))return n;n=n.parentElement}while(n&&n!==r&&n.nodeType===document.ELEMENT_NODE);return null}function XL(e,t,r,n){for(var a=e.length,i=r+(n?1:-1);n?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var JL=XL,ZL=cx,eI=gx,tI=1,rI=2;function sI(e,t,r,n){var a=r.length,i=a,o=!n;if(e==null)return!i;for(e=Object(e);a--;){var c=r[a];if(o&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++a<i;){c=r[a];var l=c[0],d=e[l],u=c[1];if(o&&c[2]){if(d===void 0&&!(l in e))return!1}else{var h=new ZL;if(n)var f=n(d,u,l,e,t,h);if(!(f===void 0?eI(u,d,tI|rI,n,h):f))return!1}}return!0}var nI=sI,aI=mn;function iI(e){return e===e&&!aI(e)}var K2=iI,oI=K2,lI=Zl;function cI(e){for(var t=lI(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,oI(a)]}return t}var dI=cI;function uI(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var Q2=uI,hI=nI,fI=dI,mI=Q2;function pI(e){var t=fI(e);return t.length==1&&t[0][2]?mI(t[0][0],t[0][1]):function(r){return r===e||hI(r,e,t)}}var gI=pI,xI=Xr,vI=Kl,yI=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,bI=/^\w*$/;function jI(e,t){if(xI(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||vI(e)?!0:bI.test(e)||!yI.test(e)||t!=null&&e in Object(t)}var xx=jI,X2=lx,wI="Expected a function";function vx(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(wI);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var o=e.apply(this,n);return r.cache=i.set(a,o)||i,o};return r.cache=new(vx.Cache||X2),r}vx.Cache=X2;var NI=vx,CI=NI,SI=500;function EI(e){var t=CI(e,function(n){return r.size===SI&&r.clear(),n}),r=t.cache;return t}var kI=EI,DI=kI,AI=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,TI=/\\(\\)?/g,_I=DI(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(AI,function(r,n,a,i){t.push(a?i.replace(TI,"$1"):n||r)}),t}),MI=_I;function OI(e,t){for(var r=-1,n=e==null?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}var yx=OI,Ky=Vi,RI=yx,PI=Xr,LI=Kl,Qy=Ky?Ky.prototype:void 0,Xy=Qy?Qy.toString:void 0;function J2(e){if(typeof e=="string")return e;if(PI(e))return RI(e,J2)+"";if(LI(e))return Xy?Xy.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var II=J2,$I=II;function FI(e){return e==null?"":$I(e)}var BI=FI,zI=Xr,UI=xx,VI=MI,HI=BI;function WI(e,t){return zI(e)?e:UI(e,t)?[e]:VI(HI(e))}var nh=WI,YI=Kl;function qI(e){if(typeof e=="string"||YI(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var ec=qI,GI=nh,KI=ec;function QI(e,t){t=GI(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[KI(t[r++])];return r&&r==n?e:void 0}var ah=QI,XI=ah;function JI(e,t,r){var n=e==null?void 0:XI(e,t);return n===void 0?r:n}var ZI=JI;function e8(e,t){return e!=null&&t in Object(e)}var t8=e8,r8=nh,s8=hx,n8=Xr,a8=Gg,i8=qg,o8=ec;function l8(e,t,r){t=r8(t,e);for(var n=-1,a=t.length,i=!1;++n<a;){var o=o8(t[n]);if(!(i=e!=null&&r(e,o)))break;e=e[o]}return i||++n!=a?i:(a=e==null?0:e.length,!!a&&i8(a)&&a8(o,a)&&(n8(e)||s8(e)))}var c8=l8,d8=t8,u8=c8;function h8(e,t){return e!=null&&u8(e,t,d8)}var f8=h8,m8=gx,p8=ZI,g8=f8,x8=xx,v8=K2,y8=Q2,b8=ec,j8=1,w8=2;function N8(e,t){return x8(e)&&v8(t)?y8(b8(e),t):function(r){var n=p8(r,e);return n===void 0&&n===t?g8(r,e):m8(t,n,j8|w8)}}var C8=N8;function S8(e){return e}var ih=S8;function E8(e){return function(t){return t==null?void 0:t[e]}}var k8=E8,D8=ah;function A8(e){return function(t){return D8(t,e)}}var T8=A8,_8=k8,M8=T8,O8=xx,R8=ec;function P8(e){return O8(e)?_8(R8(e)):M8(e)}var L8=P8,I8=gI,$8=C8,F8=ih,B8=Xr,z8=L8;function U8(e){return typeof e=="function"?e:e==null?F8:typeof e=="object"?B8(e)?$8(e[0],e[1]):I8(e):z8(e)}var oh=U8,V8=JL,H8=oh,W8=N2,Y8=Math.max;function q8(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var a=r==null?0:W8(r);return a<0&&(a=Y8(n+a,0)),V8(e,H8(t),a)}var G8=q8;const K8=br(G8);var Q8=Math.ceil,X8=Math.max;function J8(e,t,r,n){for(var a=-1,i=X8(Q8((t-e)/(r||1)),0),o=Array(i);i--;)o[n?i:++a]=e,e+=r;return o}var Z8=J8,e$=Z8,t$=Ku,_f=w2;function r$(e){return function(t,r,n){return n&&typeof n!="number"&&t$(t,r,n)&&(r=n=void 0),t=_f(t),r===void 0?(r=t,t=0):r=_f(r),n=n===void 0?t<r?1:-1:_f(n),e$(t,r,n,e)}}var s$=r$,n$=s$,a$=n$(),i$=a$;const o$=br(i$);var Jy=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function l$(e,t){return!!(e===t||Jy(e)&&Jy(t))}function c$(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!l$(e[r],t[r]))return!1;return!0}function Z2(e,t){t===void 0&&(t=c$);var r=null;function n(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];if(r&&r.lastThis===this&&t(a,r.lastArgs))return r.lastResult;var o=e.apply(this,a);return r={lastResult:o,lastArgs:a,lastThis:this},o}return n.clear=function(){r=null},n}function hp(e,t){var r=Kg(e);return r?r.innerWidth:ya(e).width}var Zy=Vi,d$=hx,u$=Xr,eb=Zy?Zy.isConcatSpreadable:void 0;function h$(e){return u$(e)||d$(e)||!!(eb&&e&&e[eb])}var f$=h$,m$=dx,p$=f$;function eN(e,t,r,n,a){var i=-1,o=e.length;for(r||(r=p$),a||(a=[]);++i<o;){var c=e[i];t>0&&r(c)?t>1?eN(c,t-1,r,n,a):m$(a,c):n||(a[a.length]=c)}return a}var tN=eN;function g$(e){return function(t,r,n){for(var a=-1,i=Object(t),o=n(t),c=o.length;c--;){var l=o[e?c:++a];if(r(i[l],l,i)===!1)break}return t}}var x$=g$,v$=x$,y$=v$(),b$=y$,j$=b$,w$=Zl;function N$(e,t){return e&&j$(e,t,w$)}var bx=N$,C$=Gl;function S$(e,t){return function(r,n){if(r==null)return r;if(!C$(r))return e(r,n);for(var a=r.length,i=t?a:-1,o=Object(r);(t?i--:++i<a)&&n(o[i],i,o)!==!1;);return r}}var E$=S$,k$=bx,D$=E$,A$=D$(k$),T$=A$,_$=T$,M$=Gl;function O$(e,t){var r=-1,n=M$(e)?Array(e.length):[];return _$(e,function(a,i,o){n[++r]=t(a,i,o)}),n}var R$=O$;function P$(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var L$=P$,tb=Kl;function I$(e,t){if(e!==t){var r=e!==void 0,n=e===null,a=e===e,i=tb(e),o=t!==void 0,c=t===null,l=t===t,d=tb(t);if(!c&&!d&&!i&&e>t||i&&o&&l&&!c&&!d||n&&o&&l||!r&&l||!a)return 1;if(!n&&!i&&!d&&e<t||d&&r&&a&&!n&&!i||c&&r&&a||!o&&a||!l)return-1}return 0}var $$=I$,F$=$$;function B$(e,t,r){for(var n=-1,a=e.criteria,i=t.criteria,o=a.length,c=r.length;++n<o;){var l=F$(a[n],i[n]);if(l){if(n>=c)return l;var d=r[n];return l*(d=="desc"?-1:1)}}return e.index-t.index}var z$=B$,Mf=yx,U$=ah,V$=oh,H$=R$,W$=L$,Y$=rh,q$=z$,G$=ih,K$=Xr;function Q$(e,t,r){t.length?t=Mf(t,function(i){return K$(i)?function(o){return U$(o,i.length===1?i[0]:i)}:i}):t=[G$];var n=-1;t=Mf(t,Y$(V$));var a=H$(e,function(i,o,c){var l=Mf(t,function(d){return d(i)});return{criteria:l,index:++n,value:i}});return W$(a,function(i,o){return q$(i,o,r)})}var X$=Q$;function J$(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var Z$=J$,eF=Z$,rb=Math.max;function tF(e,t,r){return t=rb(t===void 0?e.length-1:t,0),function(){for(var n=arguments,a=-1,i=rb(n.length-t,0),o=Array(i);++a<i;)o[a]=n[t+a];a=-1;for(var c=Array(t+1);++a<t;)c[a]=n[a];return c[t]=r(o),eF(e,this,c)}}var rN=tF;function rF(e){return function(){return e}}var sF=rF,nF=$a,aF=function(){try{var e=nF(Object,"defineProperty");return e({},"",{}),e}catch{}}(),sN=aF,iF=sF,sb=sN,oF=ih,lF=sb?function(e,t){return sb(e,"toString",{configurable:!0,enumerable:!1,value:iF(t),writable:!0})}:oF,cF=lF,dF=800,uF=16,hF=Date.now;function fF(e){var t=0,r=0;return function(){var n=hF(),a=uF-(n-r);if(r=n,a>0){if(++t>=dF)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var mF=fF,pF=cF,gF=mF,xF=gF(pF),nN=xF,vF=ih,yF=rN,bF=nN;function jF(e,t){return bF(yF(e,t,vF),e+"")}var aN=jF,wF=tN,NF=X$,CF=aN,nb=Ku,SF=CF(function(e,t){if(e==null)return[];var r=t.length;return r>1&&nb(e,t[0],t[1])?t=[]:r>2&&nb(t[0],t[1],t[2])&&(t=[t[0]]),NF(e,wF(t,1),[])}),EF=SF;const kF=br(EF);function iN(e){return t2(e)||v2(e)||Ug(e)||r2()}function DF(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var AF=DF,TF=mn,_F=px,MF=AF,OF=Object.prototype,RF=OF.hasOwnProperty;function PF(e){if(!TF(e))return MF(e);var t=_F(e),r=[];for(var n in e)n=="constructor"&&(t||!RF.call(e,n))||r.push(n);return r}var LF=PF,IF=V2,$F=LF,FF=Gl;function BF(e){return FF(e)?IF(e,!0):$F(e)}var lh=BF,zF=aN,UF=ql,VF=Ku,HF=lh,oN=Object.prototype,WF=oN.hasOwnProperty,YF=zF(function(e,t){e=Object(e);var r=-1,n=t.length,a=n>2?t[2]:void 0;for(a&&VF(t[0],t[1],a)&&(n=1);++r<n;)for(var i=t[r],o=HF(i),c=-1,l=o.length;++c<l;){var d=o[c],u=e[d];(u===void 0||UF(u,oN[d])&&!WF.call(e,d))&&(e[d]=i[d])}return e}),qF=YF;const GF=br(qF);var ab=sN;function KF(e,t,r){t=="__proto__"&&ab?ab(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var jx=KF,QF=jx,XF=bx,JF=oh;function ZF(e,t){var r={};return t=JF(t),XF(e,function(n,a,i){QF(r,a,t(n,a,i))}),r}var e7=ZF;const t7=br(e7);function r7(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var lN=r7,s7=jx,n7=ql,a7=Object.prototype,i7=a7.hasOwnProperty;function o7(e,t,r){var n=e[t];(!(i7.call(e,t)&&n7(n,r))||r===void 0&&!(t in e))&&s7(e,t,r)}var cN=o7,l7=cN,c7=jx;function d7(e,t,r,n){var a=!r;r||(r={});for(var i=-1,o=t.length;++i<o;){var c=t[i],l=n?n(r[c],e[c],c,r,e):void 0;l===void 0&&(l=e[c]),a?c7(r,c,l):l7(r,c,l)}return r}var tc=d7,u7=tc,h7=Zl;function f7(e,t){return e&&u7(t,h7(t),e)}var m7=f7,p7=tc,g7=lh;function x7(e,t){return e&&p7(t,g7(t),e)}var v7=x7,ou={exports:{}};ou.exports;(function(e,t){var r=Bs,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===n,o=i?r.Buffer:void 0,c=o?o.allocUnsafe:void 0;function l(d,u){if(u)return d.slice();var h=d.length,f=c?c(h):new d.constructor(h);return d.copy(f),f}e.exports=l})(ou,ou.exports);var y7=ou.exports;function b7(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var j7=b7,w7=tc,N7=ux;function C7(e,t){return w7(e,N7(e),t)}var S7=C7,E7=H2,k7=E7(Object.getPrototypeOf,Object),ch=k7,D7=dx,A7=ch,T7=ux,_7=z2,M7=Object.getOwnPropertySymbols,O7=M7?function(e){for(var t=[];e;)D7(t,T7(e)),e=A7(e);return t}:_7,dN=O7,R7=tc,P7=dN;function L7(e,t){return R7(e,P7(e),t)}var I7=L7,$7=B2,F7=dN,B7=lh;function z7(e){return $7(e,B7,F7)}var uN=z7,U7=Object.prototype,V7=U7.hasOwnProperty;function H7(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&V7.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var W7=H7,ib=F2;function Y7(e){var t=new e.constructor(e.byteLength);return new ib(t).set(new ib(e)),t}var wx=Y7,q7=wx;function G7(e,t){var r=t?q7(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var K7=G7,Q7=/\w*$/;function X7(e){var t=new e.constructor(e.source,Q7.exec(e));return t.lastIndex=e.lastIndex,t}var J7=X7,ob=Vi,lb=ob?ob.prototype:void 0,cb=lb?lb.valueOf:void 0;function Z7(e){return cb?Object(cb.call(e)):{}}var e9=Z7,t9=wx;function r9(e,t){var r=t?t9(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var s9=r9,n9=wx,a9=K7,i9=J7,o9=e9,l9=s9,c9="[object Boolean]",d9="[object Date]",u9="[object Map]",h9="[object Number]",f9="[object RegExp]",m9="[object Set]",p9="[object String]",g9="[object Symbol]",x9="[object ArrayBuffer]",v9="[object DataView]",y9="[object Float32Array]",b9="[object Float64Array]",j9="[object Int8Array]",w9="[object Int16Array]",N9="[object Int32Array]",C9="[object Uint8Array]",S9="[object Uint8ClampedArray]",E9="[object Uint16Array]",k9="[object Uint32Array]";function D9(e,t,r){var n=e.constructor;switch(t){case x9:return n9(e);case c9:case d9:return new n(+e);case v9:return a9(e,r);case y9:case b9:case j9:case w9:case N9:case C9:case S9:case E9:case k9:return l9(e,r);case u9:return new n;case h9:case p9:return new n(e);case f9:return i9(e);case m9:return new n;case g9:return o9(e)}}var A9=D9,T9=mn,db=Object.create,_9=function(){function e(){}return function(t){if(!T9(t))return{};if(db)return db(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),hN=_9,M9=hN,O9=ch,R9=px;function P9(e){return typeof e.constructor=="function"&&!R9(e)?M9(O9(e)):{}}var L9=P9,I9=sh,$9=ea,F9="[object Map]";function B9(e){return $9(e)&&I9(e)==F9}var z9=B9,U9=z9,V9=rh,ub=fx,hb=ub&&ub.isMap,H9=hb?V9(hb):U9,W9=H9,Y9=sh,q9=ea,G9="[object Set]";function K9(e){return q9(e)&&Y9(e)==G9}var Q9=K9,X9=Q9,J9=rh,fb=fx,mb=fb&&fb.isSet,Z9=mb?J9(mb):X9,eB=Z9,tB=cx,rB=lN,sB=cN,nB=m7,aB=v7,iB=y7,oB=j7,lB=S7,cB=I7,dB=W2,uB=uN,hB=sh,fB=W7,mB=A9,pB=L9,gB=Xr,xB=th,vB=W9,yB=mn,bB=eB,jB=Zl,wB=lh,NB=1,CB=2,SB=4,fN="[object Arguments]",EB="[object Array]",kB="[object Boolean]",DB="[object Date]",AB="[object Error]",mN="[object Function]",TB="[object GeneratorFunction]",_B="[object Map]",MB="[object Number]",pN="[object Object]",OB="[object RegExp]",RB="[object Set]",PB="[object String]",LB="[object Symbol]",IB="[object WeakMap]",$B="[object ArrayBuffer]",FB="[object DataView]",BB="[object Float32Array]",zB="[object Float64Array]",UB="[object Int8Array]",VB="[object Int16Array]",HB="[object Int32Array]",WB="[object Uint8Array]",YB="[object Uint8ClampedArray]",qB="[object Uint16Array]",GB="[object Uint32Array]",qe={};qe[fN]=qe[EB]=qe[$B]=qe[FB]=qe[kB]=qe[DB]=qe[BB]=qe[zB]=qe[UB]=qe[VB]=qe[HB]=qe[_B]=qe[MB]=qe[pN]=qe[OB]=qe[RB]=qe[PB]=qe[LB]=qe[WB]=qe[YB]=qe[qB]=qe[GB]=!0;qe[AB]=qe[mN]=qe[IB]=!1;function fd(e,t,r,n,a,i){var o,c=t&NB,l=t&CB,d=t&SB;if(r&&(o=a?r(e,n,a,i):r(e)),o!==void 0)return o;if(!yB(e))return e;var u=gB(e);if(u){if(o=fB(e),!c)return oB(e,o)}else{var h=hB(e),f=h==mN||h==TB;if(xB(e))return iB(e,c);if(h==pN||h==fN||f&&!a){if(o=l||f?{}:pB(e),!c)return l?cB(e,aB(o,e)):lB(e,nB(o,e))}else{if(!qe[h])return a?e:{};o=mB(e,h,c)}}i||(i=new tB);var x=i.get(e);if(x)return x;i.set(e,o),bB(e)?e.forEach(function(b){o.add(fd(b,t,r,b,e,i))}):vB(e)&&e.forEach(function(b,p){o.set(p,fd(b,t,r,p,e,i))});var v=d?l?uB:dB:l?wB:jB,y=u?void 0:v(e);return rB(y||e,function(b,p){y&&(p=b,b=e[p]),sB(o,p,fd(b,t,r,p,e,i))}),o}var KB=fd;function QB(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var XB=QB,JB=ah,ZB=y2;function ez(e,t){return t.length<2?e:JB(e,ZB(t,0,-1))}var tz=ez,rz=nh,sz=XB,nz=tz,az=ec;function iz(e,t){return t=rz(t,e),e=nz(e,t),e==null||delete e[az(sz(t))]}var oz=iz,lz=Hi,cz=ch,dz=ea,uz="[object Object]",hz=Function.prototype,fz=Object.prototype,gN=hz.toString,mz=fz.hasOwnProperty,pz=gN.call(Object);function gz(e){if(!dz(e)||lz(e)!=uz)return!1;var t=cz(e);if(t===null)return!0;var r=mz.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&gN.call(r)==pz}var xz=gz,vz=xz;function yz(e){return vz(e)?void 0:e}var bz=yz,jz=tN;function wz(e){var t=e==null?0:e.length;return t?jz(e,1):[]}var Nz=wz,Cz=Nz,Sz=rN,Ez=nN;function kz(e){return Ez(Sz(e,void 0,Cz),e+"")}var Dz=kz,Az=yx,Tz=KB,_z=oz,Mz=nh,Oz=tc,Rz=bz,Pz=Dz,Lz=uN,Iz=1,$z=2,Fz=4,Bz=Pz(function(e,t){var r={};if(e==null)return r;var n=!1;t=Az(t,function(i){return i=Mz(i,e),n||(n=i.length>1),i}),Oz(e,Lz(e),r),n&&(r=Tz(r,Iz|$z|Fz,Rz));for(var a=t.length;a--;)_z(r,t[a]);return r}),zz=Bz;const Uz=br(zz);var Vz=lN,Hz=hN,Wz=bx,Yz=oh,qz=ch,Gz=Xr,Kz=th,Qz=Yg,Xz=mn,Jz=mx;function Zz(e,t,r){var n=Gz(e),a=n||Kz(e)||Jz(e);if(t=Yz(t),r==null){var i=e&&e.constructor;a?r=n?new i:[]:Xz(e)?r=Qz(i)?Hz(qz(e)):{}:r={}}return(a?Vz:Wz)(e,function(o,c,l){return t(r,o,c,l)}),r}var eU=Zz;const tU=br(eU);var rU={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(Hr,function(){return function(r,n,a){n.prototype.isBetween=function(i,o,c,l){var d=a(i),u=a(o),h=(l=l||"()")[0]==="(",f=l[1]===")";return(h?this.isAfter(d,c):!this.isBefore(d,c))&&(f?this.isBefore(u,c):!this.isAfter(u,c))||(h?this.isBefore(d,c):!this.isAfter(d,c))&&(f?this.isAfter(u,c):!this.isBefore(u,c))}}})})(rU);var sU={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(Hr,function(){return function(r,n){n.prototype.isSameOrAfter=function(a,i){return this.isSame(a,i)||this.isAfter(a,i)}}})})(sU);var nU={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(Hr,function(){return function(r,n){n.prototype.isSameOrBefore=function(a,i){return this.isSame(a,i)||this.isBefore(a,i)}}})})(nU);var aU={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(Hr,function(){return function(r,n,a){var i=n.prototype,o=function(h){return h&&(h.indexOf?h:h.s)},c=function(h,f,x,v,y){var b=h.name?h:h.$locale(),p=o(b[f]),m=o(b[x]),j=p||m.map(function(N){return N.slice(0,v)});if(!y)return j;var w=b.weekStart;return j.map(function(N,C){return j[(C+(w||0))%7]})},l=function(){return a.Ls[a.locale()]},d=function(h,f){return h.formats[f]||function(x){return x.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(v,y,b){return y||b.slice(1)})}(h.formats[f.toUpperCase()])},u=function(){var h=this;return{months:function(f){return f?f.format("MMMM"):c(h,"months")},monthsShort:function(f){return f?f.format("MMM"):c(h,"monthsShort","months",3)},firstDayOfWeek:function(){return h.$locale().weekStart||0},weekdays:function(f){return f?f.format("dddd"):c(h,"weekdays")},weekdaysMin:function(f){return f?f.format("dd"):c(h,"weekdaysMin","weekdays",2)},weekdaysShort:function(f){return f?f.format("ddd"):c(h,"weekdaysShort","weekdays",3)},longDateFormat:function(f){return d(h.$locale(),f)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};i.localeData=function(){return u.bind(this)()},a.localeData=function(){var h=l();return{firstDayOfWeek:function(){return h.weekStart||0},weekdays:function(){return a.weekdays()},weekdaysShort:function(){return a.weekdaysShort()},weekdaysMin:function(){return a.weekdaysMin()},months:function(){return a.months()},monthsShort:function(){return a.monthsShort()},longDateFormat:function(f){return d(h,f)},meridiem:h.meridiem,ordinal:h.ordinal}},a.months=function(){return c(l(),"months")},a.monthsShort=function(){return c(l(),"monthsShort","months",3)},a.weekdays=function(h){return c(l(),"weekdays",null,null,h)},a.weekdaysShort=function(h){return c(l(),"weekdaysShort","weekdays",3,h)},a.weekdaysMin=function(h){return c(l(),"weekdaysMin","weekdays",2,h)}}})})(aU);var iU={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(Hr,function(){var r={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(n,a,i){var o=a.prototype,c=o.format;i.en.formats=r,o.format=function(l){l===void 0&&(l="YYYY-MM-DDTHH:mm:ssZ");var d=this.$locale().formats,u=function(h,f){return h.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(x,v,y){var b=y&&y.toUpperCase();return v||f[y]||r[y]||f[b].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(p,m,j){return m||j.slice(1)})})}(l,d===void 0?{}:d);return c.call(this,u)}}})})(iU);var oU={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(Hr,function(){return function(r,n,a){var i=function(o,c){if(!c||!c.length||c.length===1&&!c[0]||c.length===1&&Array.isArray(c[0])&&!c[0].length)return null;var l;c.length===1&&c[0].length>0&&(c=c[0]),l=(c=c.filter(function(u){return u}))[0];for(var d=1;d<c.length;d+=1)c[d].isValid()&&!c[d][o](l)||(l=c[d]);return l};a.max=function(){var o=[].slice.call(arguments,0);return i("isAfter",o)},a.min=function(){var o=[].slice.call(arguments,0);return i("isBefore",o)}}})})(oU);var lU={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(Hr,function(){var r="minute",n=/[+-]\d\d(?::?\d\d)?/g,a=/([+-]|\d\d)/g;return function(i,o,c){var l=o.prototype;c.utc=function(y){var b={date:y,utc:!0,args:arguments};return new o(b)},l.utc=function(y){var b=c(this.toDate(),{locale:this.$L,utc:!0});return y?b.add(this.utcOffset(),r):b},l.local=function(){return c(this.toDate(),{locale:this.$L,utc:!1})};var d=l.parse;l.parse=function(y){y.utc&&(this.$u=!0),this.$utils().u(y.$offset)||(this.$offset=y.$offset),d.call(this,y)};var u=l.init;l.init=function(){if(this.$u){var y=this.$d;this.$y=y.getUTCFullYear(),this.$M=y.getUTCMonth(),this.$D=y.getUTCDate(),this.$W=y.getUTCDay(),this.$H=y.getUTCHours(),this.$m=y.getUTCMinutes(),this.$s=y.getUTCSeconds(),this.$ms=y.getUTCMilliseconds()}else u.call(this)};var h=l.utcOffset;l.utcOffset=function(y,b){var p=this.$utils().u;if(p(y))return this.$u?0:p(this.$offset)?h.call(this):this.$offset;if(typeof y=="string"&&(y=function(N){N===void 0&&(N="");var C=N.match(n);if(!C)return null;var S=(""+C[0]).match(a)||["-",0,0],E=S[0],k=60*+S[1]+ +S[2];return k===0?0:E==="+"?k:-k}(y),y===null))return this;var m=Math.abs(y)<=16?60*y:y,j=this;if(b)return j.$offset=m,j.$u=y===0,j;if(y!==0){var w=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(j=this.local().add(m+w,r)).$offset=m,j.$x.$localOffset=w}else j=this.utc();return j};var f=l.format;l.format=function(y){var b=y||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return f.call(this,b)},l.valueOf=function(){var y=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*y},l.isUTC=function(){return!!this.$u},l.toISOString=function(){return this.toDate().toISOString()},l.toString=function(){return this.toDate().toUTCString()};var x=l.toDate;l.toDate=function(y){return y==="s"&&this.$offset?c(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():x.call(this)};var v=l.diff;l.diff=function(y,b,p){if(y&&this.$u===y.$u)return v.call(this,y,b,p);var m=this.local(),j=c(y).local();return v.call(m,j,b,p)}}})})(lU);var cU={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(Hr,function(){return function(r,n){n.prototype.isLeapYear=function(){return this.$y%4==0&&this.$y%100!=0||this.$y%400==0}}})})(cU);function Es(e){return e.children}var yr={PREVIOUS:"PREV",NEXT:"NEXT",TODAY:"TODAY",DATE:"DATE"},rr={MONTH:"month",WEEK:"week",WORK_WEEK:"work_week",DAY:"day",AGENDA:"agenda"},pb=Object.keys(rr).map(function(e){return rr[e]});se.oneOfType([se.string,se.func]);se.any;se.func;se.oneOfType([se.arrayOf(se.oneOf(pb)),se.objectOf(function(e,t){var r=pb.indexOf(t)!==-1&&typeof e[t]=="boolean";if(r)return null;for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i];return se.elementType.apply(se,[e,t].concat(a))})]);se.oneOfType([se.oneOf(["overlap","no-overlap"]),se.func]);var gb={seconds:1e3,minutes:1e3*60,hours:1e3*60*60,day:1e3*60*60*24};function xN(e,t){var r=Bt(e,"month");return Bt(r,"week",t.startOfWeek())}function vN(e,t){var r=tu(e,"month");return tu(r,"week",t.startOfWeek())}function dU(e,t){for(var r=xN(e,t),n=vN(e,t),a=[];zi(r,n,"day");)a.push(r),r=ps(r,1,"day");return a}function uU(e,t){var r=Bt(e,t);return Wl(r,e)?r:ps(r,1,t)}function hU(e,t){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"day",n=e,a=[];zi(n,t,r);)a.push(n),n=ps(n,1,r);return a}function fU(e,t){return t==null&&e==null?null:(t==null&&(t=new Date),e==null&&(e=new Date),e=Bt(e,"day"),e=Sl(e,Sl(t)),e=Ci(e,Ci(t)),e=Cl(e,Cl(t)),Nl(e,Nl(t)))}function xb(e){return Sl(e)===0&&Ci(e)===0&&Cl(e)===0&&Nl(e)===0}function mU(e,t,r,n){return r==="day"&&(r="date"),Math.abs(Zv[r](e,void 0,n)-Zv[r](t,void 0,n))}function Nx(e,t,r){return!r||r==="milliseconds"?Math.abs(+e-+t):Math.round(Math.abs(+Bt(e,r)/gb[r]-+Bt(t,r)/gb[r]))}var pU=se.oneOfType([se.string,se.func]);function gU(e,t,r,n,a){var i=typeof n=="function"?n(r,a,e):t.call(e,r,n,a);return xl(i==null||typeof i=="string","`localizer format(..)` must return a string, null, or undefined"),i}function xU(e,t,r){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,t+r,0,0)}function Cx(e,t){return e.getTimezoneOffset()-t.getTimezoneOffset()}function vU(e,t){return Nx(e,t,"minutes")+Cx(e,t)}function yU(e){var t=Bt(e,"day");return Nx(t,e,"minutes")+Cx(t,e)}function bU(e,t){return Wg(e,t,"day")}function jU(e,t,r){var n=Wl(e,t,"minutes");return n?Yl(t,r,"minutes"):Gu(t,r,"minutes")}function fp(e,t){return mU(e,t,"day")}function wU(e){var t=e.evtA,r=t.start,n=t.end,a=t.allDay,i=e.evtB,o=i.start,c=i.end,l=i.allDay,d=+Bt(r,"day")-+Bt(o,"day"),u=fp(r,n),h=fp(o,c);return d||h-u||!!l-!!a||+r-+o||+n-+c}function NU(e){var t=e.event,r=t.start,n=t.end,a=e.range,i=a.start,o=a.end,c=Bt(r,"day"),l=zi(c,o,"day"),d=Hg(c,n,"minutes"),u=d?Gu(n,i,"minutes"):Yl(n,i,"minutes");return l&&u}function CU(e,t){return Wl(e,t,"day")}function SU(e,t){return xb(e)&&xb(t)}var EU=Tt(function e(t){var r=this;At(this,e),xl(typeof t.format=="function","date localizer `format(..)` must be a function"),xl(typeof t.firstOfWeek=="function","date localizer `firstOfWeek(..)` must be a function"),this.propType=t.propType||pU,this.formats=t.formats,this.format=function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return gU.apply(void 0,[r,t.format].concat(a))},this.startOfWeek=t.firstOfWeek,this.merge=t.merge||fU,this.inRange=t.inRange||m2,this.lt=t.lt||Wg,this.lte=t.lte||zi,this.gt=t.gt||Gu,this.gte=t.gte||Yl,this.eq=t.eq||Wl,this.neq=t.neq||Hg,this.startOf=t.startOf||Bt,this.endOf=t.endOf||tu,this.add=t.add||ps,this.range=t.range||hU,this.diff=t.diff||Nx,this.ceil=t.ceil||uU,this.min=t.min||h2,this.max=t.max||f2,this.minutes=t.minutes||Ci,this.daySpan=t.daySpan||fp,this.firstVisibleDay=t.firstVisibleDay||xN,this.lastVisibleDay=t.lastVisibleDay||vN,this.visibleDays=t.visibleDays||dU,this.getSlotDate=t.getSlotDate||xU,this.getTimezoneOffset=t.getTimezoneOffset||function(n){return n.getTimezoneOffset()},this.getDstOffset=t.getDstOffset||Cx,this.getTotalMin=t.getTotalMin||vU,this.getMinutesFromMidnight=t.getMinutesFromMidnight||yU,this.continuesPrior=t.continuesPrior||bU,this.continuesAfter=t.continuesAfter||jU,this.sortEvents=t.sortEvents||wU,this.inEventRange=t.inEventRange||NU,this.isSameDate=t.isSameDate||CU,this.startAndEndAreDateOnly=t.startAndEndAreDateOnly||SU,this.segmentOffset=t.browserTZOffset?t.browserTZOffset():0});function kU(e,t,r,n){var a=Ye(Ye({},e.formats),r);return Ye(Ye({},e),{},{messages:n,startOfWeek:function(){return e.startOfWeek(t)},format:function(o,c){return e.format(o,a[c]||c,t)}})}var DU=function(e){function t(){var r;At(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Kt(this,t,[].concat(a)),r.navigate=function(o){r.props.onNavigate(o)},r.view=function(o){r.props.onView(o)},r}return Qt(t,e),Tt(t,[{key:"render",value:function(){var n=this.props,a=n.localizer.messages,i=n.label;return I.createElement("div",{className:"rbc-toolbar"},I.createElement("span",{className:"rbc-btn-group"},I.createElement("button",{type:"button",onClick:this.navigate.bind(null,yr.TODAY)},a.today),I.createElement("button",{type:"button",onClick:this.navigate.bind(null,yr.PREVIOUS)},a.previous),I.createElement("button",{type:"button",onClick:this.navigate.bind(null,yr.NEXT)},a.next)),I.createElement("span",{className:"rbc-toolbar-label"},i),I.createElement("span",{className:"rbc-btn-group"},this.viewNamesGroup(a)))}},{key:"viewNamesGroup",value:function(n){var a=this,i=this.props.views,o=this.props.view;if(i.length>1)return i.map(function(c){return I.createElement("button",{type:"button",key:c,className:pt({"rbc-active":o===c}),onClick:a.view.bind(null,c)},n[c])})}}])}(I.Component);function Ze(e,t){e&&e.apply(null,[].concat(t))}var AU={date:"Date",time:"Time",event:"Event",allDay:"All Day",week:"Week",work_week:"Work Week",day:"Day",month:"Month",previous:"Back",next:"Next",yesterday:"Yesterday",tomorrow:"Tomorrow",today:"Today",agenda:"Agenda",noEventsInRange:"There are no events in this range.",showMore:function(t){return"+".concat(t," more")}};function TU(e){return Ye(Ye({},AU),e)}function _U(e){var t=e.ref,r=e.callback;g.useEffect(function(){var n=function(i){t.current&&!t.current.contains(i.target)&&r()};return document.addEventListener("mousedown",n),function(){document.removeEventListener("mousedown",n)}},[t,r])}var MU=["style","className","event","selected","isAllDay","onSelect","onDoubleClick","onKeyPress","localizer","continuesPrior","continuesAfter","accessors","getters","children","components","slotStart","slotEnd"],yN=function(e){function t(){return At(this,t),Kt(this,t,arguments)}return Qt(t,e),Tt(t,[{key:"render",value:function(){var n=this.props,a=n.style,i=n.className,o=n.event,c=n.selected,l=n.isAllDay,d=n.onSelect,u=n.onDoubleClick,h=n.onKeyPress,f=n.localizer,x=n.continuesPrior,v=n.continuesAfter,y=n.accessors,b=n.getters,p=n.children,m=n.components,j=m.event,w=m.eventWrapper,N=n.slotStart,C=n.slotEnd,S=Ps(n,MU);delete S.resizable;var E=y.title(o),k=y.tooltip(o),T=y.end(o),D=y.start(o),$=y.allDay(o),_=l||$||f.diff(D,f.ceil(T,"day"),"day")>1,A=b.eventProp(o,D,T,c),B=I.createElement("div",{className:"rbc-event-content",title:k||void 0},j?I.createElement(j,{event:o,continuesPrior:x,continuesAfter:v,title:E,isAllDay:$,localizer:f,slotStart:N,slotEnd:C}):E);return I.createElement(w,Object.assign({},this.props,{type:"date"}),I.createElement("div",Object.assign({},S,{style:Ye(Ye({},A.style),a),className:pt("rbc-event",i,A.className,{"rbc-selected":c,"rbc-event-allday":_,"rbc-event-continues-prior":x,"rbc-event-continues-after":v}),onClick:function(M){return d&&d(o,M)},onDoubleClick:function(M){return u&&u(o,M)},onKeyDown:function(M){return h&&h(o,M)}}),typeof p=="function"?p(B):B))}}])}(I.Component);function dh(e,t){return!e||t==null?!1:QL(e,t)}function bN(e,t){var r=e.right-e.left,n=r/t;return n}function jN(e,t,r,n){var a=bN(e,n);return r?n-1-Math.floor((t-e.left)/a):Math.floor((t-e.left)/a)}function OU(e,t){var r=t.x,n=t.y;return n>=e.top&&n<=e.bottom&&r>=e.left&&r<=e.right}function RU(e,t,r,n,a){var i=-1,o=-1,c=n-1,l=bN(t,n),d=jN(t,r.x,a,n),u=t.top<r.y&&t.bottom>r.y,h=t.top<e.y&&t.bottom>e.y,f=e.y>t.bottom,x=t.top>e.y,v=r.top<t.top&&r.bottom>t.bottom;return v&&(i=0,o=c),u&&(x?(i=0,o=d):f&&(i=d,o=c)),h&&(i=o=a?c-Math.floor((e.x-t.left)/l):Math.floor((e.x-t.left)/l),u?d<i?i=d:o=d:e.y<r.y?o=c:i=0),{startIdx:i,endIdx:o}}function PU(e){var t=e.target,r=e.offset,n=e.container,a=e.box,i=ya(t),o=i.top,c=i.left,l=i.width,d=i.height,u=ya(n),h=u.top,f=u.left,x=u.width,v=u.height,y=ya(a),b=y.width,p=y.height,m=h+v,j=f+x,w=o+p,N=c+b,C=r.x,S=r.y,E=w>m?o-p-S:o+S+d,k=N>j?c+C-b+l:c+C;return{topOffset:E,leftOffset:k}}function LU(e){var t=e.containerRef,r=e.accessors,n=e.getters,a=e.selected,i=e.components,o=e.localizer,c=e.position,l=e.show,d=e.events,u=e.slotStart,h=e.slotEnd,f=e.onSelect,x=e.onDoubleClick,v=e.onKeyPress,y=e.handleDragStart,b=e.popperRef,p=e.target,m=e.offset;_U({ref:b,callback:l}),g.useLayoutEffect(function(){var N=PU({target:p,offset:m,container:t.current,box:b.current}),C=N.topOffset,S=N.leftOffset;b.current.style.top="".concat(C,"px"),b.current.style.left="".concat(S,"px")},[m.x,m.y,p]);var j=c.width,w={minWidth:j+j/2};return I.createElement("div",{style:w,className:"rbc-overlay",ref:b},I.createElement("div",{className:"rbc-overlay-header"},o.format(u,"dayHeaderFormat")),d.map(function(N,C){return I.createElement(yN,{key:C,type:"popup",localizer:o,event:N,getters:n,onSelect:f,accessors:r,components:i,onDoubleClick:x,onKeyPress:v,continuesPrior:o.lt(r.end(N),u,"day"),continuesAfter:o.gte(r.start(N),h,"day"),slotStart:u,slotEnd:h,selected:dh(N,a),draggable:!0,onDragStart:function(){return y(N)},onDragEnd:function(){return l()}})}))}var wN=I.forwardRef(function(e,t){return I.createElement(LU,Object.assign({},e,{popperRef:t}))});wN.propTypes={accessors:se.object.isRequired,getters:se.object.isRequired,selected:se.object,components:se.object.isRequired,localizer:se.object.isRequired,position:se.object.isRequired,show:se.func.isRequired,events:se.array.isRequired,slotStart:se.instanceOf(Date).isRequired,slotEnd:se.instanceOf(Date),onSelect:se.func,onDoubleClick:se.func,onKeyPress:se.func,handleDragStart:se.func,style:se.object,offset:se.shape({x:se.number,y:se.number})};function IU(e){var t=e.containerRef,r=e.popupOffset,n=r===void 0?5:r,a=e.overlay,i=e.accessors,o=e.localizer,c=e.components,l=e.getters,d=e.selected,u=e.handleSelectEvent,h=e.handleDoubleClickEvent,f=e.handleKeyPressEvent,x=e.handleDragStart,v=e.onHide,y=e.overlayDisplay,b=g.useRef(null);if(!a.position)return null;var p=n;isNaN(n)||(p={x:n,y:n});var m=a.position,j=a.events,w=a.date,N=a.end;return I.createElement(ix,{rootClose:!0,flip:!0,show:!0,placement:"bottom",onHide:v,target:a.target},function(C){var S=C.props;return I.createElement(wN,Object.assign({},S,{containerRef:t,ref:b,target:a.target,offset:p,accessors:i,getters:l,selected:d,components:c,localizer:o,position:m,show:y,events:j,slotStart:w,slotEnd:N,onSelect:u,onDoubleClick:h,onKeyPress:f,handleDragStart:x}))})}var Sx=I.forwardRef(function(e,t){return I.createElement(IU,Object.assign({},e,{containerRef:t}))});Sx.propTypes={popupOffset:se.oneOfType([se.number,se.shape({x:se.number,y:se.number})]),overlay:se.shape({position:se.object,events:se.array,date:se.instanceOf(Date),end:se.instanceOf(Date)}),accessors:se.object.isRequired,localizer:se.object.isRequired,components:se.object.isRequired,getters:se.object.isRequired,selected:se.object,handleSelectEvent:se.func,handleDoubleClickEvent:se.func,handleKeyPressEvent:se.func,handleDragStart:se.func,onHide:se.func,overlayDisplay:se.func};function Ht(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;return _o(r,e,t,{passive:!1})}function $U(e,t,r){return!e||El(e,document.elementFromPoint(t,r))}function FU(e,t){var r=t.clientX,n=t.clientY,a=document.elementFromPoint(r,n);return G2(a,".rbc-event",e)}function BU(e,t){var r=t.clientX,n=t.clientY,a=document.elementFromPoint(r,n);return G2(a,".rbc-show-more",e)}function lu(e,t){return!!FU(e,t)}function zU(e,t){return!!BU(e,t)}function wo(e){var t=e;return e.touches&&e.touches.length&&(t=e.touches[0]),{clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY}}var vb=5,UU=250,NN=function(){function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.global,a=n===void 0?!1:n,i=r.longPressThreshold,o=i===void 0?250:i,c=r.validContainers,l=c===void 0?[]:c;At(this,e),this._initialEvent=null,this.selecting=!1,this.isDetached=!1,this.container=t,this.globalMouse=!t||a,this.longPressThreshold=o,this.validContainers=l,this._listeners=Object.create(null),this._handleInitialEvent=this._handleInitialEvent.bind(this),this._handleMoveEvent=this._handleMoveEvent.bind(this),this._handleTerminatingEvent=this._handleTerminatingEvent.bind(this),this._keyListener=this._keyListener.bind(this),this._dropFromOutsideListener=this._dropFromOutsideListener.bind(this),this._dragOverFromOutsideListener=this._dragOverFromOutsideListener.bind(this),this._removeTouchMoveWindowListener=Ht("touchmove",function(){},window),this._removeKeyDownListener=Ht("keydown",this._keyListener),this._removeKeyUpListener=Ht("keyup",this._keyListener),this._removeDropFromOutsideListener=Ht("drop",this._dropFromOutsideListener),this._removeDragOverFromOutsideListener=Ht("dragover",this._dragOverFromOutsideListener),this._addInitialEventListener()}return Tt(e,[{key:"on",value:function(r,n){var a=this._listeners[r]||(this._listeners[r]=[]);return a.push(n),{remove:function(){var o=a.indexOf(n);o!==-1&&a.splice(o,1)}}}},{key:"emit",value:function(r){for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];var o,c=this._listeners[r]||[];return c.forEach(function(l){o===void 0&&(o=l.apply(void 0,a))}),o}},{key:"teardown",value:function(){this._initialEvent=null,this._initialEventData=null,this._selectRect=null,this.selecting=!1,this._lastClickData=null,this.isDetached=!0,this._listeners=Object.create(null),this._removeTouchMoveWindowListener&&this._removeTouchMoveWindowListener(),this._removeInitialEventListener&&this._removeInitialEventListener(),this._removeEndListener&&this._removeEndListener(),this._onEscListener&&this._onEscListener(),this._removeMoveListener&&this._removeMoveListener(),this._removeKeyUpListener&&this._removeKeyUpListener(),this._removeKeyDownListener&&this._removeKeyDownListener(),this._removeDropFromOutsideListener&&this._removeDropFromOutsideListener(),this._removeDragOverFromOutsideListener&&this._removeDragOverFromOutsideListener()}},{key:"isSelected",value:function(r){var n=this._selectRect;return!n||!this.selecting?!1:yb(n,Ra(r))}},{key:"filter",value:function(r){var n=this._selectRect;return!n||!this.selecting?[]:r.filter(this.isSelected,this)}},{key:"_addLongPressListener",value:function(r,n){var a=this,i=null,o=null,c=null,l=function(f){i=setTimeout(function(){u(),r(f)},a.longPressThreshold),o=Ht("touchmove",function(){return u()}),c=Ht("touchend",function(){return u()})},d=Ht("touchstart",l),u=function(){i&&clearTimeout(i),o&&o(),c&&c(),i=null,o=null,c=null};return n&&l(n),function(){u(),d()}}},{key:"_addInitialEventListener",value:function(){var r=this,n=Ht("mousedown",function(i){r._removeInitialEventListener(),r._handleInitialEvent(i),r._removeInitialEventListener=Ht("mousedown",r._handleInitialEvent)}),a=Ht("touchstart",function(i){r._removeInitialEventListener(),r._removeInitialEventListener=r._addLongPressListener(r._handleInitialEvent,i)});this._removeInitialEventListener=function(){n(),a()}}},{key:"_dropFromOutsideListener",value:function(r){var n=wo(r),a=n.pageX,i=n.pageY,o=n.clientX,c=n.clientY;this.emit("dropFromOutside",{x:a,y:i,clientX:o,clientY:c}),r.preventDefault()}},{key:"_dragOverFromOutsideListener",value:function(r){var n=wo(r),a=n.pageX,i=n.pageY,o=n.clientX,c=n.clientY;this.emit("dragOverFromOutside",{x:a,y:i,clientX:o,clientY:c}),r.preventDefault()}},{key:"_handleInitialEvent",value:function(r){if(this._initialEvent=r,!this.isDetached){var n=wo(r),a=n.clientX,i=n.clientY,o=n.pageX,c=n.pageY,l=this.container(),d,u;if(!(r.which===3||r.button===2||!$U(l,a,i))){if(!this.globalMouse&&l&&!El(l,r.target)){var h=VU(0),f=h.top,x=h.left,v=h.bottom,y=h.right;if(u=Ra(l),d=yb({top:u.top-f,left:u.left-x,bottom:u.bottom+v,right:u.right+y},{top:c,left:o}),!d)return}var b=this.emit("beforeSelect",this._initialEventData={isTouch:/^touch/.test(r.type),x:o,y:c,clientX:a,clientY:i});if(b!==!1)switch(r.type){case"mousedown":this._removeEndListener=Ht("mouseup",this._handleTerminatingEvent),this._onEscListener=Ht("keydown",this._handleTerminatingEvent),this._removeMoveListener=Ht("mousemove",this._handleMoveEvent);break;case"touchstart":this._handleMoveEvent(r),this._removeEndListener=Ht("touchend",this._handleTerminatingEvent),this._removeMoveListener=Ht("touchmove",this._handleMoveEvent);break}}}}},{key:"_isWithinValidContainer",value:function(r){var n=r.target,a=this.validContainers;return!a||!a.length||!n?!0:a.some(function(i){return!!n.closest(i)})}},{key:"_handleTerminatingEvent",value:function(r){var n=this.selecting,a=this._selectRect;if(!n&&r.type.includes("key")&&(r=this._initialEvent),this.selecting=!1,this._removeEndListener&&this._removeEndListener(),this._removeMoveListener&&this._removeMoveListener(),this._selectRect=null,this._initialEvent=null,this._initialEventData=null,!!r){var i=!this.container||El(this.container(),r.target),o=this._isWithinValidContainer(r);return r.key==="Escape"||!o?this.emit("reset"):!n&&i?this._handleClickEvent(r):n?this.emit("select",a):this.emit("reset")}}},{key:"_handleClickEvent",value:function(r){var n=wo(r),a=n.pageX,i=n.pageY,o=n.clientX,c=n.clientY,l=new Date().getTime();return this._lastClickData&&l-this._lastClickData.timestamp<UU?(this._lastClickData=null,this.emit("doubleClick",{x:a,y:i,clientX:o,clientY:c})):(this._lastClickData={timestamp:l},this.emit("click",{x:a,y:i,clientX:o,clientY:c}))}},{key:"_handleMoveEvent",value:function(r){if(!(this._initialEventData===null||this.isDetached)){var n=this._initialEventData,a=n.x,i=n.y,o=wo(r),c=o.pageX,l=o.pageY,d=Math.abs(a-c),u=Math.abs(i-l),h=Math.min(c,a),f=Math.min(l,i),x=this.selecting,v=this.isClick(c,l);v&&!x&&!(d||u)||(!x&&!v&&this.emit("selectStart",this._initialEventData),v||(this.selecting=!0,this._selectRect={top:f,left:h,x:c,y:l,right:h+d,bottom:f+u},this.emit("selecting",this._selectRect)),r.preventDefault())}}},{key:"_keyListener",value:function(r){this.ctrl=r.metaKey||r.ctrlKey}},{key:"isClick",value:function(r,n){var a=this._initialEventData,i=a.x,o=a.y,c=a.isTouch;return!c&&Math.abs(r-i)<=vb&&Math.abs(n-o)<=vb}}])}();function VU(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return dn(e)!=="object"&&(e={top:e,left:e,right:e,bottom:e}),e}function yb(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=Ra(e),a=n.top,i=n.left,o=n.right,c=o===void 0?i:o,l=n.bottom,d=l===void 0?a:l,u=Ra(t),h=u.top,f=u.left,x=u.right,v=x===void 0?f:x,y=u.bottom,b=y===void 0?h:y;return!(d-r<h||a+r>b||c-r<f||i+r>v)}function Ra(e){if(!e.getBoundingClientRect)return e;var t=e.getBoundingClientRect(),r=t.left+bb("left"),n=t.top+bb("top");return{top:n,left:r,right:(e.offsetWidth||0)+r,bottom:(e.offsetHeight||0)+n}}function bb(e){if(e==="left")return window.pageXOffset||document.body.scrollLeft||0;if(e==="top")return window.pageYOffset||document.body.scrollTop||0}var HU=function(e){function t(r,n){var a;return At(this,t),a=Kt(this,t,[r,n]),a.state={selecting:!1},a.containerRef=g.createRef(),a}return Qt(t,e),Tt(t,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable()}},{key:"componentDidUpdate",value:function(n){!n.selectable&&this.props.selectable&&this._selectable(),n.selectable&&!this.props.selectable&&this._teardownSelectable()}},{key:"render",value:function(){var n=this.props,a=n.range,i=n.getNow,o=n.getters,c=n.date,l=n.components.dateCellWrapper,d=n.localizer,u=this.state,h=u.selecting,f=u.startIdx,x=u.endIdx,v=i();return I.createElement("div",{className:"rbc-row-bg",ref:this.containerRef},a.map(function(y,b){var p=h&&b>=f&&b<=x,m=o.dayProp(y),j=m.className,w=m.style;return I.createElement(l,{key:b,value:y,range:a},I.createElement("div",{style:w,className:pt("rbc-day-bg",j,p&&"rbc-selected-cell",d.isSameDate(y,v)&&"rbc-today",c&&d.neq(c,y,"month")&&"rbc-off-range-bg")}))}))}},{key:"_selectable",value:function(){var n=this,a=this.containerRef.current,i=this._selector=new NN(this.props.container,{longPressThreshold:this.props.longPressThreshold}),o=function(l,d){if(!lu(a,l)&&!zU(a,l)){var u=Ra(a),h=n.props,f=h.range,x=h.rtl;if(OU(u,l)){var v=jN(u,l.x,x,f.length);n._selectSlot({startIdx:v,endIdx:v,action:d,box:l})}}n._initial={},n.setState({selecting:!1})};i.on("selecting",function(c){var l=n.props,d=l.range,u=l.rtl,h=-1,f=-1;if(n.state.selecting||(Ze(n.props.onSelectStart,[c]),n._initial={x:c.x,y:c.y}),i.isSelected(a)){var x=Ra(a),v=RU(n._initial,x,c,d.length,u);h=v.startIdx,f=v.endIdx}n.setState({selecting:!0,startIdx:h,endIdx:f})}),i.on("beforeSelect",function(c){if(n.props.selectable==="ignoreEvents")return!lu(n.containerRef.current,c)}),i.on("click",function(c){return o(c,"click")}),i.on("doubleClick",function(c){return o(c,"doubleClick")}),i.on("select",function(c){n._selectSlot(Ye(Ye({},n.state),{},{action:"select",bounds:c})),n._initial={},n.setState({selecting:!1}),Ze(n.props.onSelectEnd,[n.state])})}},{key:"_teardownSelectable",value:function(){this._selector&&(this._selector.teardown(),this._selector=null)}},{key:"_selectSlot",value:function(n){var a=n.endIdx,i=n.startIdx,o=n.action,c=n.bounds,l=n.box;a!==-1&&i!==-1&&this.props.onSelectSlot&&this.props.onSelectSlot({start:i,end:a,action:o,bounds:c,box:l,resourceId:this.props.resourceId})}}])}(I.Component),Ir={propTypes:{slotMetrics:se.object.isRequired,selected:se.object,isAllDay:se.bool,accessors:se.object.isRequired,localizer:se.object.isRequired,components:se.object.isRequired,getters:se.object.isRequired,onSelect:se.func,onDoubleClick:se.func,onKeyPress:se.func},defaultProps:{segments:[],selected:{}},renderEvent:function(t,r){var n=t.selected;t.isAllDay;var a=t.accessors,i=t.getters,o=t.onSelect,c=t.onDoubleClick,l=t.onKeyPress,d=t.localizer,u=t.slotMetrics,h=t.components,f=t.resizable,x=u.continuesPrior(r),v=u.continuesAfter(r);return I.createElement(yN,{event:r,getters:i,localizer:d,accessors:a,components:h,onSelect:o,onDoubleClick:c,onKeyPress:l,continuesPrior:x,continuesAfter:v,slotStart:u.first,slotEnd:u.last,selected:dh(r,n),resizable:f})},renderSpan:function(t,r,n){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:" ",i=Math.abs(r)/t*100+"%";return I.createElement("div",{key:n,className:"rbc-row-segment",style:{WebkitFlexBasis:i,flexBasis:i,maxWidth:i}},a)}},CN=function(e){function t(){return At(this,t),Kt(this,t,arguments)}return Qt(t,e),Tt(t,[{key:"render",value:function(){var n=this,a=this.props,i=a.segments,o=a.slotMetrics.slots,c=a.className,l=1;return I.createElement("div",{className:pt(c,"rbc-row")},i.reduce(function(d,u,h){var f=u.event,x=u.left,v=u.right,y=u.span,b="_lvl_"+h,p=x-l,m=Ir.renderEvent(n.props,f);return p&&d.push(Ir.renderSpan(o,p,"".concat(b,"_gap"))),d.push(Ir.renderSpan(o,y,b,m)),l=v+1,d},[]))}}])}(I.Component);CN.defaultProps=Ye({},Ir.defaultProps);function SN(e){var t=e.dateRange,r=e.unit,n=r===void 0?"day":r,a=e.localizer;return{first:t[0],last:a.add(t[t.length-1],1,n)}}function WU(e,t,r,n){var a=SN({dateRange:t,localizer:n}),i=a.first,o=a.last,c=n.diff(i,o,"day"),l=n.max(n.startOf(r.start(e),"day"),i),d=n.min(n.ceil(r.end(e),"day"),o),u=K8(t,function(f){return n.isSameDate(f,l)}),h=n.diff(l,d,"day");return h=Math.min(h,c),h=Math.max(h-n.segmentOffset,1),{event:e,span:h,left:u+1,right:Math.max(u+h,1)}}function mp(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1/0,r,n,a,i=[],o=[];for(r=0;r<e.length;r++){for(a=e[r],n=0;n<i.length&&YU(a,i[n]);n++);n>=t?o.push(a):(i[n]||(i[n]=[])).push(a)}for(r=0;r<i.length;r++)i[r].sort(function(c,l){return c.left-l.left});return{levels:i,extra:o}}function Al(e,t,r,n,a){var i={start:n.start(e),end:n.end(e)},o={start:t,end:r};return a.inEventRange({event:i,range:o})}function YU(e,t){return t.some(function(r){return r.left<=e.right&&r.right>=e.left})}function qU(e,t,r){var n=ud(e),a=[],i=[];n.forEach(function(l){var d=t.start(l),u=t.end(l);r.daySpan(d,u)>1?a.push(l):i.push(l)});var o=a.sort(function(l,d){return pp(l,d,t,r)}),c=i.sort(function(l,d){return pp(l,d,t,r)});return[].concat(ud(o),ud(c))}function pp(e,t,r,n){var a={start:r.start(e),end:r.end(e),allDay:r.allDay(e)},i={start:r.start(t),end:r.end(t),allDay:r.allDay(t)};return n.sortEvents({evtA:a,evtB:i})}var gp=function(t,r){return t.left<=r&&t.right>=r},Of=function(t,r){return t.filter(function(n){return gp(n,r)}).map(function(n){return n.event})},EN=function(e){function t(){return At(this,t),Kt(this,t,arguments)}return Qt(t,e),Tt(t,[{key:"render",value:function(){for(var n=this.props,a=n.segments,i=n.slotMetrics.slots,o=mp(a).levels[0],c=1,l=1,d=[];c<=i;){var u="_lvl_"+c,h=o.filter(function(w){return gp(w,c)})[0]||{},f=h.event,x=h.left,v=h.right,y=h.span;if(!f){var b=this.getHiddenEventsForSlot(a,c);if(b.length>0){var p=c-l;p&&d.push(Ir.renderSpan(i,p,u+"_gap")),d.push(Ir.renderSpan(i,1,u,this.renderShowMore(a,c))),l=c=c+1;continue}c++;continue}var m=Math.max(0,x-l);if(this.canRenderSlotEvent(x,y)){var j=Ir.renderEvent(this.props,f);m&&d.push(Ir.renderSpan(i,m,u+"_gap")),d.push(Ir.renderSpan(i,y,u,j)),l=c=v+1}else m&&d.push(Ir.renderSpan(i,m,u+"_gap")),d.push(Ir.renderSpan(i,1,u,this.renderShowMore(a,c))),l=c=c+1}return I.createElement("div",{className:"rbc-row"},d)}},{key:"getHiddenEventsForSlot",value:function(n,a){var i=Of(n,a),o=mp(n).levels[0],c=o.filter(function(l){return gp(l,a)}).map(function(l){return l.event});return i.filter(function(l){return!c.some(function(d){return d===l})})}},{key:"canRenderSlotEvent",value:function(n,a){var i=this.props.segments;return o$(n,n+a).every(function(o){var c=Of(i,o).length;return c===1})}},{key:"renderShowMore",value:function(n,a){var i=this,o=this.props,c=o.localizer,l=o.slotMetrics,d=o.components,u=l.getEventsForSlot(a),h=Of(n,a),f=h.length;if(d!=null&&d.showMore){var x=d.showMore,v=l.getDateForSlot(a-1);return f?I.createElement(x,{localizer:c,slotDate:v,slot:a,count:f,events:u,remainingEvents:h}):!1}return f?I.createElement("button",{type:"button",key:"sm_"+a,className:pt("rbc-button-link","rbc-show-more"),onClick:function(b){return i.showMore(a,b)}},c.messages.showMore(f,h,u)):!1}},{key:"showMore",value:function(n,a){a.preventDefault(),a.stopPropagation(),this.props.onShowMore(n,a.target)}}])}(I.Component);EN.defaultProps=Ye({},Ir.defaultProps);var GU=function(t){var r=t.children;return I.createElement("div",{className:"rbc-row-content-scroll-container"},r)},KU=function(t,r){return t.left<=r&&t.right>=r},QU=function(t,r){return t[0].range===r[0].range&&t[0].events===r[0].events};function kN(){return Z2(function(e){for(var t=e.range,r=e.events,n=e.maxRows,a=e.minRows,i=e.accessors,o=e.localizer,c=SN({dateRange:t,localizer:o}),l=c.first,d=c.last,u=r.map(function(y){return WU(y,t,i,o)}),h=mp(u,Math.max(n-1,1)),f=h.levels,x=h.extra,v=x.length>0?a-1:a;f.length<v;)f.push([]);return{first:l,last:d,levels:f,extra:x,range:t,slots:t.length,clone:function(b){var p=kN();return p(Ye(Ye({},e),b))},getDateForSlot:function(b){return t[b]},getSlotForDate:function(b){return t.find(function(p){return o.isSameDate(p,b)})},getEventsForSlot:function(b){return u.filter(function(p){return KU(p,b)}).map(function(p){return p.event})},continuesPrior:function(b){return o.continuesPrior(i.start(b),l)},continuesAfter:function(b){var p=i.start(b),m=i.end(b);return o.continuesAfter(p,m,d)}}},QU)}var Tl=function(e){function t(){var r;At(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Kt(this,t,[].concat(a)),r.handleSelectSlot=function(o){var c=r.props,l=c.range,d=c.onSelectSlot;d(l.slice(o.start,o.end+1),o)},r.handleShowMore=function(o,c){var l=r.props,d=l.range,u=l.onShowMore,h=r.slotMetrics(r.props),f=K5(r.containerRef.current,".rbc-row-bg")[0],x;f&&(x=f.children[o-1]);var v=h.getEventsForSlot(o);u(v,d[o-1],x,o,c)},r.getContainer=function(){var o=r.props.container;return o?o():r.containerRef.current},r.renderHeadingCell=function(o,c){var l=r.props,d=l.renderHeader,u=l.getNow,h=l.localizer;return d({date:o,key:"header_".concat(c),className:pt("rbc-date-cell",h.isSameDate(o,u())&&"rbc-now")})},r.renderDummy=function(){var o=r.props,c=o.className,l=o.range,d=o.renderHeader,u=o.showAllEvents;return I.createElement("div",{className:c,ref:r.containerRef},I.createElement("div",{className:pt("rbc-row-content",u&&"rbc-row-content-scrollable")},d&&I.createElement("div",{className:"rbc-row",ref:r.headingRowRef},l.map(r.renderHeadingCell)),I.createElement("div",{className:"rbc-row",ref:r.eventRowRef},I.createElement("div",{className:"rbc-row-segment"},I.createElement("div",{className:"rbc-event"},I.createElement("div",{className:"rbc-event-content"}," "))))))},r.containerRef=g.createRef(),r.headingRowRef=g.createRef(),r.eventRowRef=g.createRef(),r.slotMetrics=kN(),r}return Qt(t,e),Tt(t,[{key:"getRowLimit",value:function(){var n,a=Tf(this.eventRowRef.current),i=(n=this.headingRowRef)!==null&&n!==void 0&&n.current?Tf(this.headingRowRef.current):0,o=Tf(this.containerRef.current)-i;return Math.max(Math.floor(o/a),1)}},{key:"render",value:function(){var n=this.props,a=n.date,i=n.rtl,o=n.range,c=n.className,l=n.selected,d=n.selectable,u=n.renderForMeasure,h=n.accessors,f=n.getters,x=n.components,v=n.getNow,y=n.renderHeader,b=n.onSelect,p=n.localizer,m=n.onSelectStart,j=n.onSelectEnd,w=n.onDoubleClick,N=n.onKeyPress,C=n.resourceId,S=n.longPressThreshold,E=n.isAllDay,k=n.resizable,T=n.showAllEvents;if(u)return this.renderDummy();var D=this.slotMetrics(this.props),$=D.levels,_=D.extra,A=T?GU:Es,B=x.weekWrapper,P={selected:l,accessors:h,getters:f,localizer:p,components:x,onSelect:b,onDoubleClick:w,onKeyPress:N,resourceId:C,slotMetrics:D,resizable:k};return I.createElement("div",{className:c,role:"rowgroup",ref:this.containerRef},I.createElement(HU,{localizer:p,date:a,getNow:v,rtl:i,range:o,selectable:d,container:this.getContainer,getters:f,onSelectStart:m,onSelectEnd:j,onSelectSlot:this.handleSelectSlot,components:x,longPressThreshold:S,resourceId:C}),I.createElement("div",{className:pt("rbc-row-content",T&&"rbc-row-content-scrollable"),role:"row"},y&&I.createElement("div",{className:"rbc-row ",ref:this.headingRowRef},o.map(this.renderHeadingCell)),I.createElement(A,null,I.createElement(B,Object.assign({isAllDay:E},P,{rtl:this.props.rtl}),$.map(function(M,R){return I.createElement(CN,Object.assign({key:R,segments:M},P))}),!!_.length&&I.createElement(EN,Object.assign({segments:_,onShowMore:this.handleShowMore},P))))))}}])}(I.Component);Tl.defaultProps={minRows:0,maxRows:1/0};var Ex=function(t){var r=t.label;return I.createElement("span",{role:"columnheader","aria-sort":"none"},r)},XU=function(t){var r=t.label,n=t.drilldownView,a=t.onDrillDown;return n?I.createElement("button",{type:"button",className:"rbc-button-link",onClick:a},r):I.createElement("span",null,r)},JU=["date","className"],ZU=function(t,r,n,a,i){return t.filter(function(o){return Al(o,r,n,a,i)})},uh=function(e){function t(){var r;At(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Kt(this,t,[].concat(a)),r.getContainer=function(){return r.containerRef.current},r.renderWeek=function(o,c){var l=r.props,d=l.events,u=l.components,h=l.selectable,f=l.getNow,x=l.selected,v=l.date,y=l.localizer,b=l.longPressThreshold,p=l.accessors,m=l.getters,j=l.showAllEvents,w=r.state,N=w.needLimitMeasure,C=w.rowLimit,S=ZU(ud(d),o[0],o[o.length-1],p,y),E=qU(S,p,y);return I.createElement(Tl,{key:c,ref:c===0?r.slotRowRef:void 0,container:r.getContainer,className:"rbc-month-row",getNow:f,date:v,range:o,events:E,maxRows:j?1/0:C,selected:x,selectable:h,components:u,accessors:p,getters:m,localizer:y,renderHeader:r.readerDateHeading,renderForMeasure:N,onShowMore:r.handleShowMore,onSelect:r.handleSelectEvent,onDoubleClick:r.handleDoubleClickEvent,onKeyPress:r.handleKeyPressEvent,onSelectSlot:r.handleSelectSlot,longPressThreshold:b,rtl:r.props.rtl,resizable:r.props.resizable,showAllEvents:j})},r.readerDateHeading=function(o){var c=o.date,l=o.className,d=Ps(o,JU),u=r.props,h=u.date,f=u.getDrilldownView,x=u.localizer,v=x.neq(h,c,"month"),y=x.isSameDate(c,h),b=f(c),p=x.format(c,"dateFormat"),m=r.props.components.dateHeader||XU;return I.createElement("div",Object.assign({},d,{className:pt(l,v&&"rbc-off-range",y&&"rbc-current"),role:"cell"}),I.createElement(m,{label:p,date:c,drilldownView:b,isOffRange:v,onDrillDown:function(w){return r.handleHeadingClick(c,b,w)}}))},r.handleSelectSlot=function(o,c){r._pendingSelection=r._pendingSelection.concat(o),clearTimeout(r._selectTimer),r._selectTimer=setTimeout(function(){return r.selectDates(c)})},r.handleHeadingClick=function(o,c,l){l.preventDefault(),r.clearSelection(),Ze(r.props.onDrillDown,[o,c])},r.handleSelectEvent=function(){r.clearSelection();for(var o=arguments.length,c=new Array(o),l=0;l<o;l++)c[l]=arguments[l];Ze(r.props.onSelectEvent,c)},r.handleDoubleClickEvent=function(){r.clearSelection();for(var o=arguments.length,c=new Array(o),l=0;l<o;l++)c[l]=arguments[l];Ze(r.props.onDoubleClickEvent,c)},r.handleKeyPressEvent=function(){r.clearSelection();for(var o=arguments.length,c=new Array(o),l=0;l<o;l++)c[l]=arguments[l];Ze(r.props.onKeyPressEvent,c)},r.handleShowMore=function(o,c,l,d,u){var h=r.props,f=h.popup,x=h.onDrillDown,v=h.onShowMore,y=h.getDrilldownView,b=h.doShowMoreDrillDown;if(r.clearSelection(),f){var p=k2(l,r.containerRef.current);r.setState({overlay:{date:c,events:o,position:p,target:u}})}else b&&Ze(x,[c,y(c)||rr.DAY]);Ze(v,[o,c,d])},r.overlayDisplay=function(){r.setState({overlay:null})},r.state={rowLimit:5,needLimitMeasure:!0,date:null},r.containerRef=g.createRef(),r.slotRowRef=g.createRef(),r._bgRows=[],r._pendingSelection=[],r}return Qt(t,e),Tt(t,[{key:"componentDidMount",value:function(){var n=this,a;this.state.needLimitMeasure&&this.measureRowLimit(this.props),window.addEventListener("resize",this._resizeListener=function(){a||D2(function(){a=!1,n.setState({needLimitMeasure:!0})})},!1)}},{key:"componentDidUpdate",value:function(){this.state.needLimitMeasure&&this.measureRowLimit(this.props)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._resizeListener,!1)}},{key:"render",value:function(){var n=this.props,a=n.date,i=n.localizer,o=n.className,c=i.visibleDays(a,i),l=O5(c,7);return this._weekCount=l.length,I.createElement("div",{className:pt("rbc-month-view",o),role:"table","aria-label":"Month View",ref:this.containerRef},I.createElement("div",{className:"rbc-row rbc-month-header",role:"row"},this.renderHeaders(l[0])),l.map(this.renderWeek),this.props.popup&&this.renderOverlay())}},{key:"renderHeaders",value:function(n){var a=this.props,i=a.localizer,o=a.components,c=n[0],l=n[n.length-1],d=o.header||Ex;return i.range(c,l,"day").map(function(u,h){return I.createElement("div",{key:"header_"+h,className:"rbc-header"},I.createElement(d,{date:u,localizer:i,label:i.format(u,"weekdayFormat")}))})}},{key:"renderOverlay",value:function(){var n,a,i=this,o=(n=(a=this.state)===null||a===void 0?void 0:a.overlay)!==null&&n!==void 0?n:{},c=this.props,l=c.accessors,d=c.localizer,u=c.components,h=c.getters,f=c.selected,x=c.popupOffset,v=c.handleDragStart,y=function(){return i.setState({overlay:null})};return I.createElement(Sx,{overlay:o,accessors:l,localizer:d,components:u,getters:h,selected:f,popupOffset:x,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:v,show:!!o.position,overlayDisplay:this.overlayDisplay,onHide:y})}},{key:"measureRowLimit",value:function(){this.setState({needLimitMeasure:!1,rowLimit:this.slotRowRef.current.getRowLimit()})}},{key:"selectDates",value:function(n){var a=this._pendingSelection.slice();this._pendingSelection=[],a.sort(function(c,l){return+c-+l});var i=new Date(a[0]),o=new Date(a[a.length-1]);o.setDate(a[a.length-1].getDate()+1),Ze(this.props.onSelectSlot,{slots:a,start:i,end:o,action:n.action,bounds:n.bounds,box:n.box})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}}],[{key:"getDerivedStateFromProps",value:function(n,a){var i=n.date,o=n.localizer;return{date:i,needLimitMeasure:o.neq(i,a.date,"month")}}}])}(I.Component);uh.range=function(e,t){var r=t.localizer,n=r.firstVisibleDay(e,r),a=r.lastVisibleDay(e,r);return{start:n,end:a}};uh.navigate=function(e,t,r){var n=r.localizer;switch(t){case yr.PREVIOUS:return n.add(e,-1,"month");case yr.NEXT:return n.add(e,1,"month");default:return e}};uh.title=function(e,t){var r=t.localizer;return r.format(e,"monthHeaderFormat")};var jb=function(t){var r=t.min,n=t.max,a=t.step,i=t.slots,o=t.localizer;return"".concat(+o.startOf(r,"minutes"))+"".concat(+o.startOf(n,"minutes"))+"".concat(a,"-").concat(i)};function kx(e){for(var t=e.min,r=e.max,n=e.step,a=e.timeslots,i=e.localizer,o=jb({step:n,localizer:i}),c=1+i.getTotalMin(t,r),l=i.getMinutesFromMidnight(t),d=Math.ceil((c-1)/(n*a)),u=d*a,h=new Array(d),f=new Array(u),x=0;x<d;x++){h[x]=new Array(a);for(var v=0;v<a;v++){var y=x*a+v,b=y*n;f[y]=h[x][v]=i.getSlotDate(t,l,b)}}var p=f.length*n;f.push(i.getSlotDate(t,l,p));function m(j){var w=i.diff(t,j,"minutes")+i.getDstOffset(t,j);return Math.min(w,c)}return{groups:h,update:function(w){return jb(w)!==o?kx(w):this},dateIsInGroup:function(w,N){var C=h[N+1];return i.inRange(w,h[N][0],C?C[0]:r,"minutes")},nextSlot:function(w){var N=f[Math.min(f.findIndex(function(C){return C===w||i.eq(C,w)})+1,f.length-1)];return i.eq(N,w)&&(N=i.add(w,n,"minutes")),N},closestSlotToPosition:function(w){var N=Math.min(f.length-1,Math.max(0,Math.floor(w*u)));return f[N]},closestSlotFromPoint:function(w,N){var C=Math.abs(N.top-N.bottom);return this.closestSlotToPosition((w.y-N.top)/C)},closestSlotFromDate:function(w){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(i.lt(w,t,"minutes"))return f[0];if(i.gt(w,r,"minutes"))return f[f.length-1];var C=i.diff(t,w,"minutes");return f[(C-C%n)/n+N]},startsBeforeDay:function(w){return i.lt(w,t,"day")},startsAfterDay:function(w){return i.gt(w,r,"day")},startsBefore:function(w){return i.lt(i.merge(t,w),t,"minutes")},startsAfter:function(w){return i.gt(i.merge(r,w),r,"minutes")},getRange:function(w,N,C,S){C||(w=i.min(r,i.max(t,w))),S||(N=i.min(r,i.max(t,N)));var E=m(w),k=m(N),T=k>n*u&&!i.eq(r,N)?(E-n)/(n*u)*100:E/(n*u)*100;return{top:T,height:k/(n*u)*100-T,start:m(w),startDate:w,end:m(N),endDate:N}},getCurrentTimePosition:function(w){var N=m(w),C=N/(n*u)*100;return C}}}var eV=function(){function e(t,r){var n=r.accessors,a=r.slotMetrics;At(this,e);var i=a.getRange(n.start(t),n.end(t)),o=i.start,c=i.startDate,l=i.end,d=i.endDate,u=i.top,h=i.height;this.start=o,this.end=l,this.startMs=+c,this.endMs=+d,this.top=u,this.height=h,this.data=t}return Tt(e,[{key:"_width",get:function(){if(this.rows){var r=this.rows.reduce(function(a,i){return Math.max(a,i.leaves.length+1)},0)+1;return 100/r}if(this.leaves){var n=100-this.container._width;return n/(this.leaves.length+1)}return this.row._width}},{key:"width",get:function(){var r=this._width,n=Math.min(100,this._width*1.7);if(this.rows)return n;if(this.leaves)return this.leaves.length>0?n:r;var a=this.row.leaves,i=a.indexOf(this);return i===a.length-1?r:n}},{key:"xOffset",get:function(){if(this.rows)return 0;if(this.leaves)return this.container._width;var r=this.row,n=r.leaves,a=r.xOffset,i=r._width,o=n.indexOf(this)+1;return a+o*i}}])}();function tV(e,t,r){return Math.abs(t.start-e.start)<r||t.start>e.start&&t.start<e.end}function rV(e){for(var t=kF(e,["startMs",function(c){return-c.endMs}]),r=[];t.length>0;){var n=t.shift();r.push(n);for(var a=0;a<t.length;a++){var i=t[a];if(!(n.endMs>i.startMs)){if(a>0){var o=t.splice(a,1)[0];r.push(o)}break}}}return r}function DN(e){for(var t=e.events,r=e.minimumStartDifference,n=e.slotMetrics,a=e.accessors,i=t.map(function(u){return new eV(u,{slotMetrics:n,accessors:a})}),o=rV(i),c=[],l=function(){var h=o[d],f=c.find(function(y){return y.end>h.start||Math.abs(h.start-y.start)<r});if(!f)return h.rows=[],c.push(h),1;h.container=f;for(var x=null,v=f.rows.length-1;!x&&v>=0;v--)tV(f.rows[v],h,r)&&(x=f.rows[v]);x?(x.leaves.push(h),h.row=x):(h.leaves=[],f.rows.push(h))},d=0;d<o.length;d++)l();return o.map(function(u){return{event:u.data,style:{top:u.top,height:u.height,width:u.width,xOffset:Math.max(0,u.xOffset)}}})}function AN(e,t,r){for(var n=0;n<e.friends.length;++n)if(!(r.indexOf(e.friends[n])>-1)){t=t>e.friends[n].idx?t:e.friends[n].idx,r.push(e.friends[n]);var a=AN(e.friends[n],t,r);t=t>a?t:a}return t}function sV(e){var t=e.events,r=e.minimumStartDifference,n=e.slotMetrics,a=e.accessors,i=DN({events:t,minimumStartDifference:r,slotMetrics:n,accessors:a});i.sort(function(B,P){return B=B.style,P=P.style,B.top!==P.top?B.top>P.top?1:-1:B.height!==P.height?B.top+B.height<P.top+P.height?1:-1:0});for(var o=0;o<i.length;++o)i[o].friends=[],delete i[o].style.left,delete i[o].style.left,delete i[o].idx,delete i[o].size;for(var c=0;c<i.length-1;++c)for(var l=i[c],d=l.style.top,u=l.style.top+l.style.height,h=c+1;h<i.length;++h){var f=i[h],x=f.style.top,v=f.style.top+f.style.height;(x>=d&&v<=u||v>d&&v<=u||x>=d&&x<u)&&(l.friends.push(f),f.friends.push(l))}for(var y=0;y<i.length;++y){for(var b=i[y],p=[],m=0;m<100;++m)p.push(1);for(var j=0;j<b.friends.length;++j)b.friends[j].idx!==void 0&&(p[b.friends[j].idx]=0);b.idx=p.indexOf(1)}for(var w=0;w<i.length;++w){var N=0;if(!i[w].size){var C=[],S=AN(i[w],0,C);N=100/(S+1),i[w].size=N;for(var E=0;E<C.length;++E)C[E].size=N}}for(var k=0;k<i.length;++k){var T=i[k];T.style.left=T.idx*T.size;for(var D=0,$=0;$<T.friends.length;++$){var _=T.friends[$].idx;D=D>_?D:_}D<=T.idx&&(T.size=100-T.idx*T.size);var A=T.idx===0?0:3;T.style.width="calc(".concat(T.size,"% - ").concat(A,"px)"),T.style.height="calc(".concat(T.style.height,"% - 2px)"),T.style.xOffset="calc(".concat(T.style.left,"% + ").concat(A,"px)")}return i}var wb={overlap:DN,"no-overlap":sV};function nV(e){return!!(e&&e.constructor&&e.call&&e.apply)}function aV(e){e.events,e.minimumStartDifference,e.slotMetrics,e.accessors;var t=e.dayLayoutAlgorithm,r=t;return t in wb&&(r=wb[t]),nV(r)?r.apply(this,arguments):[]}var TN=function(e){function t(){return At(this,t),Kt(this,t,arguments)}return Qt(t,e),Tt(t,[{key:"render",value:function(){var n=this.props,a=n.renderSlot,i=n.resource,o=n.group,c=n.getters,l=n.components,d=l===void 0?{}:l,u=d.timeSlotWrapper,h=u===void 0?Es:u,f=c?c.slotGroupProp(o):{};return I.createElement("div",Object.assign({className:"rbc-timeslot-group"},f),o.map(function(x,v){var y=c?c.slotProp(x,i):{};return I.createElement(h,{key:v,value:x,resource:i},I.createElement("div",Object.assign({},y,{className:pt("rbc-time-slot",y.className)}),a&&a(x,v)))}))}}])}(g.Component);function Lc(e){return typeof e=="string"?e:e+"%"}function iV(e){var t=e.style,r=e.className,n=e.event,a=e.accessors,i=e.rtl,o=e.selected,c=e.label,l=e.continuesPrior,d=e.continuesAfter,u=e.getters,h=e.onClick,f=e.onDoubleClick,x=e.isBackgroundEvent,v=e.onKeyPress,y=e.components,b=y.event,p=y.eventWrapper,m=a.title(n),j=a.tooltip(n),w=a.end(n),N=a.start(n),C=u.eventProp(n,N,w,o),S=[I.createElement("div",{key:"1",className:"rbc-event-label"},c),I.createElement("div",{key:"2",className:"rbc-event-content"},b?I.createElement(b,{event:n,title:m}):m)],E=t.height,k=t.top,T=t.width,D=t.xOffset,$=Ye(Ye({},C.style),{},ca({top:Lc(k),height:Lc(E),width:Lc(T)},i?"right":"left",Lc(D)));return I.createElement(p,Object.assign({type:"time"},e),I.createElement("div",{role:"button",tabIndex:0,onClick:h,onDoubleClick:f,style:$,onKeyDown:v,title:j?(typeof c=="string"?c+": ":"")+j:void 0,className:pt(x?"rbc-background-event":"rbc-event",r,C.className,{"rbc-selected":o,"rbc-event-continues-earlier":l,"rbc-event-continues-later":d})},S))}var oV=function(t){var r=t.children,n=t.className,a=t.style,i=t.innerRef;return I.createElement("div",{className:n,style:a,ref:i},r)},lV=I.forwardRef(function(e,t){return I.createElement(oV,Object.assign({},e,{innerRef:t}))}),cV=["dayProp"],dV=["eventContainerWrapper","timeIndicatorWrapper"],_N=function(e){function t(){var r;At(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Kt(this,t,[].concat(a)),r.state={selecting:!1,timeIndicatorPosition:null},r.intervalTriggered=!1,r.renderEvents=function(o){var c=o.events,l=o.isBackgroundEvent,d=r.props,u=d.rtl,h=d.selected,f=d.accessors,x=d.localizer,v=d.getters,y=d.components,b=d.step,p=d.timeslots,m=d.dayLayoutAlgorithm,j=d.resizable,w=r,N=w.slotMetrics,C=x.messages,S=aV({events:c,accessors:f,slotMetrics:N,minimumStartDifference:Math.ceil(b*p/2),dayLayoutAlgorithm:m});return S.map(function(E,k){var T,D=E.event,$=E.style,_=f.end(D),A=f.start(D),B=(T=f.eventId(D))!==null&&T!==void 0?T:"evt_"+k,P="eventTimeRangeFormat",M,R=N.startsBeforeDay(A),W=N.startsAfterDay(_);R?P="eventTimeRangeEndFormat":W&&(P="eventTimeRangeStartFormat"),R&&W?M=C.allDay:M=x.format({start:A,end:_},P);var V=R||N.startsBefore(A),z=W||N.startsAfter(_);return I.createElement(iV,{style:$,event:D,label:M,key:B,getters:v,rtl:u,components:y,continuesPrior:V,continuesAfter:z,accessors:f,resource:r.props.resource,selected:dh(D,h),onClick:function(G){return r._select(Ye(Ye(Ye({},D),r.props.resource&&{sourceResource:r.props.resource}),l&&{isBackgroundEvent:!0}),G)},onDoubleClick:function(G){return r._doubleClick(D,G)},isBackgroundEvent:l,onKeyPress:function(G){return r._keyPress(D,G)},resizable:j})})},r._selectable=function(){var o=r.containerRef.current,c=r.props,l=c.longPressThreshold,d=c.localizer,u=r._selector=new NN(function(){return o},{longPressThreshold:l}),h=function(y){var b=r.props.onSelecting,p=r.state||{},m=f(y),j=m.startDate,w=m.endDate;b&&(d.eq(p.startDate,j,"minutes")&&d.eq(p.endDate,w,"minutes")||b({start:j,end:w,resourceId:r.props.resource})===!1)||(r.state.start!==m.start||r.state.end!==m.end||r.state.selecting!==m.selecting)&&r.setState(m)},f=function(y){var b=r.slotMetrics.closestSlotFromPoint(y,Ra(o));r.state.selecting||(r._initialSlot=b);var p=r._initialSlot;d.lte(p,b)?b=r.slotMetrics.nextSlot(b):d.gt(p,b)&&(p=r.slotMetrics.nextSlot(p));var m=r.slotMetrics.getRange(d.min(p,b),d.max(p,b));return Ye(Ye({},m),{},{selecting:!0,top:"".concat(m.top,"%"),height:"".concat(m.height,"%")})},x=function(y,b){if(!lu(r.containerRef.current,y)){var p=f(y),m=p.startDate,j=p.endDate;r._selectSlot({startDate:m,endDate:j,action:b,box:y})}r.setState({selecting:!1})};u.on("selecting",h),u.on("selectStart",h),u.on("beforeSelect",function(v){if(r.props.selectable==="ignoreEvents")return!lu(r.containerRef.current,v)}),u.on("click",function(v){return x(v,"click")}),u.on("doubleClick",function(v){return x(v,"doubleClick")}),u.on("select",function(v){r.state.selecting&&(r._selectSlot(Ye(Ye({},r.state),{},{action:"select",bounds:v})),r.setState({selecting:!1}))}),u.on("reset",function(){r.state.selecting&&r.setState({selecting:!1})})},r._teardownSelectable=function(){r._selector&&(r._selector.teardown(),r._selector=null)},r._selectSlot=function(o){for(var c=o.startDate,l=o.endDate,d=o.action,u=o.bounds,h=o.box,f=c,x=[];r.props.localizer.lte(f,l);)x.push(f),f=new Date(+f+r.props.step*60*1e3);Ze(r.props.onSelectSlot,{slots:x,start:c,end:l,resourceId:r.props.resource,action:d,bounds:u,box:h})},r._select=function(){for(var o=arguments.length,c=new Array(o),l=0;l<o;l++)c[l]=arguments[l];Ze(r.props.onSelectEvent,c)},r._doubleClick=function(){for(var o=arguments.length,c=new Array(o),l=0;l<o;l++)c[l]=arguments[l];Ze(r.props.onDoubleClickEvent,c)},r._keyPress=function(){for(var o=arguments.length,c=new Array(o),l=0;l<o;l++)c[l]=arguments[l];Ze(r.props.onKeyPressEvent,c)},r.slotMetrics=kx(r.props),r.containerRef=g.createRef(),r}return Qt(t,e),Tt(t,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable(),this.props.isNow&&this.setTimeIndicatorPositionUpdateInterval()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable(),this.clearTimeIndicatorInterval()}},{key:"componentDidUpdate",value:function(n,a){this.props.selectable&&!n.selectable&&this._selectable(),!this.props.selectable&&n.selectable&&this._teardownSelectable();var i=this.props,o=i.getNow,c=i.isNow,l=i.localizer,d=i.date,u=i.min,h=i.max,f=l.neq(n.getNow(),o(),"minutes");if(n.isNow!==c||f){if(this.clearTimeIndicatorInterval(),c){var x=!f&&l.eq(n.date,d,"minutes")&&a.timeIndicatorPosition===this.state.timeIndicatorPosition;this.setTimeIndicatorPositionUpdateInterval(x)}}else c&&(l.neq(n.min,u,"minutes")||l.neq(n.max,h,"minutes"))&&this.positionTimeIndicator()}},{key:"setTimeIndicatorPositionUpdateInterval",value:function(){var n=this,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;!this.intervalTriggered&&!a&&this.positionTimeIndicator(),this._timeIndicatorTimeout=window.setTimeout(function(){n.intervalTriggered=!0,n.positionTimeIndicator(),n.setTimeIndicatorPositionUpdateInterval()},6e4)}},{key:"clearTimeIndicatorInterval",value:function(){this.intervalTriggered=!1,window.clearTimeout(this._timeIndicatorTimeout)}},{key:"positionTimeIndicator",value:function(){var n=this.props,a=n.min,i=n.max,o=n.getNow,c=o();if(c>=a&&c<=i){var l=this.slotMetrics.getCurrentTimePosition(c);this.intervalTriggered=!0,this.setState({timeIndicatorPosition:l})}else this.clearTimeIndicatorInterval()}},{key:"render",value:function(){var n=this.props,a=n.date,i=n.max,o=n.rtl,c=n.isNow,l=n.resource,d=n.accessors,u=n.localizer,h=n.getters,f=h.dayProp,x=Ps(h,cV),v=n.components,y=v.eventContainerWrapper,b=v.timeIndicatorWrapper,p=Ps(v,dV);this.slotMetrics=this.slotMetrics.update(this.props);var m=this.slotMetrics,j=this.state,w=j.selecting,N=j.top,C=j.height,S=j.startDate,E=j.endDate,k={start:S,end:E},T=f(i,l),D=T.className,$=T.style,_={className:"rbc-current-time-indicator",style:{top:"".concat(this.state.timeIndicatorPosition,"%")}},A=p.dayColumnWrapper||lV;return I.createElement(A,{ref:this.containerRef,date:a,style:$,className:pt(D,"rbc-day-slot","rbc-time-column",c&&"rbc-now",c&&"rbc-today",w&&"rbc-slot-selecting"),slotMetrics:m,resource:l},m.groups.map(function(B,P){return I.createElement(TN,{key:P,group:B,resource:l,getters:x,components:p})}),I.createElement(y,{localizer:u,resource:l,accessors:d,getters:x,components:p,slotMetrics:m},I.createElement("div",{className:pt("rbc-events-container",o&&"rtl")},this.renderEvents({events:this.props.backgroundEvents,isBackgroundEvent:!0}),this.renderEvents({events:this.props.events}))),w&&I.createElement("div",{className:"rbc-slot-selection",style:{top:N,height:C}},I.createElement("span",null,u.format(k,"selectRangeFormat"))),c&&this.intervalTriggered&&I.createElement(b,_,I.createElement("div",_)))}}])}(I.Component);_N.defaultProps={dragThroughEvents:!0,timeslots:2};var MN=function(t){var r=t.label;return I.createElement(I.Fragment,null,r)},uV=function(e){function t(){var r;At(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Kt(this,t,[].concat(a)),r.handleHeaderClick=function(o,c,l){l.preventDefault(),Ze(r.props.onDrillDown,[o,c])},r.renderRow=function(o){var c=r.props,l=c.events,d=c.rtl,u=c.selectable,h=c.getNow,f=c.range,x=c.getters,v=c.localizer,y=c.accessors,b=c.components,p=c.resizable,m=y.resourceId(o),j=o?l.filter(function(w){return y.resource(w)===m}):l;return I.createElement(Tl,{isAllDay:!0,rtl:d,getNow:h,minRows:2,maxRows:r.props.allDayMaxRows+1,range:f,events:j,resourceId:m,className:"rbc-allday-cell",selectable:u,selected:r.props.selected,components:b,accessors:y,getters:x,localizer:v,onSelect:r.props.onSelectEvent,onShowMore:r.props.onShowMore,onDoubleClick:r.props.onDoubleClickEvent,onKeyPress:r.props.onKeyPressEvent,onSelectSlot:r.props.onSelectSlot,longPressThreshold:r.props.longPressThreshold,resizable:p})},r}return Qt(t,e),Tt(t,[{key:"renderHeaderCells",value:function(n){var a=this,i=this.props,o=i.localizer,c=i.getDrilldownView,l=i.getNow,d=i.getters.dayProp,u=i.components.header,h=u===void 0?Ex:u,f=l();return n.map(function(x,v){var y=c(x),b=o.format(x,"dayFormat"),p=d(x),m=p.className,j=p.style,w=I.createElement(h,{date:x,label:b,localizer:o});return I.createElement("div",{key:v,style:j,className:pt("rbc-header",m,o.isSameDate(x,f)&&"rbc-today")},y?I.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(C){return a.handleHeaderClick(x,y,C)}},w):I.createElement("span",null,w))})}},{key:"render",value:function(){var n=this,a=this.props,i=a.width,o=a.rtl,c=a.resources,l=a.range,d=a.events,u=a.getNow,h=a.accessors,f=a.selectable,x=a.components,v=a.getters,y=a.scrollRef,b=a.localizer,p=a.isOverflowing,m=a.components,j=m.timeGutterHeader,w=m.resourceHeader,N=w===void 0?MN:w,C=a.resizable,S={};p&&(S[o?"marginLeft":"marginRight"]="".concat(ax()-1,"px"));var E=c.groupEvents(d);return I.createElement("div",{style:S,ref:y,className:pt("rbc-time-header",p&&"rbc-overflowing")},I.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:i,minWidth:i,maxWidth:i}},j&&I.createElement(j,null)),c.map(function(k,T){var D=Vr(k,2),$=D[0],_=D[1];return I.createElement("div",{className:"rbc-time-header-content",key:$||T},_&&I.createElement("div",{className:"rbc-row rbc-row-resource",key:"resource_".concat(T)},I.createElement("div",{className:"rbc-header"},I.createElement(N,{index:T,label:h.resourceTitle(_),resource:_}))),I.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(l.length<=1?" rbc-time-header-cell-single-day":"")},n.renderHeaderCells(l)),I.createElement(Tl,{isAllDay:!0,rtl:o,getNow:u,minRows:2,maxRows:n.props.allDayMaxRows+1,range:l,events:E.get($)||[],resourceId:_&&$,className:"rbc-allday-cell",selectable:f,selected:n.props.selected,components:x,accessors:h,getters:v,localizer:b,onSelect:n.props.onSelectEvent,onShowMore:n.props.onShowMore,onDoubleClick:n.props.onDoubleClickEvent,onKeyDown:n.props.onKeyPressEvent,onSelectSlot:n.props.onSelectSlot,longPressThreshold:n.props.longPressThreshold,resizable:C}))}))}}])}(I.Component),hV=function(e){function t(){var r;At(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Kt(this,t,[].concat(a)),r.handleHeaderClick=function(o,c,l){l.preventDefault(),Ze(r.props.onDrillDown,[o,c])},r}return Qt(t,e),Tt(t,[{key:"renderHeaderCells",value:function(n){var a=this,i=this.props,o=i.localizer,c=i.getDrilldownView,l=i.getNow,d=i.getters.dayProp,u=i.components,h=u.header,f=h===void 0?Ex:h,x=u.resourceHeader,v=x===void 0?MN:x,y=i.resources,b=i.accessors,p=i.events,m=i.rtl,j=i.selectable,w=i.components,N=i.getters,C=i.resizable,S=l(),E=y.groupEvents(p);return n.map(function(k,T){var D=c(k),$=o.format(k,"dayFormat"),_=d(k),A=_.className,B=_.style,P=I.createElement(f,{date:k,label:$,localizer:o});return I.createElement("div",{key:T,className:"rbc-time-header-content rbc-resource-grouping"},I.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(n.length<=1?" rbc-time-header-cell-single-day":"")},I.createElement("div",{style:B,className:pt("rbc-header",A,o.isSameDate(k,S)&&"rbc-today")},D?I.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(R){return a.handleHeaderClick(k,D,R)}},P):I.createElement("span",null,P))),I.createElement("div",{className:"rbc-row"},y.map(function(M,R){var W=Vr(M,2),V=W[0],z=W[1];return I.createElement("div",{key:"resource_".concat(V,"_").concat(R),className:pt("rbc-header",A,o.isSameDate(k,S)&&"rbc-today")},I.createElement(v,{index:R,label:b.resourceTitle(z),resource:z}))})),I.createElement("div",{className:"rbc-row rbc-m-b-negative-3 rbc-h-full"},y.map(function(M,R){var W=Vr(M,2),V=W[0],z=W[1],H=(E.get(V)||[]).filter(function(G){return o.isSameDate(G.start,k)||o.isSameDate(G.end,k)});return I.createElement(Tl,{key:"resource_".concat(V,"_").concat(R),isAllDay:!0,rtl:m,getNow:l,minRows:2,maxRows:a.props.allDayMaxRows+1,range:[k],events:H,resourceId:z&&V,className:"rbc-allday-cell",selectable:j,selected:a.props.selected,components:w,accessors:b,getters:N,localizer:o,onSelect:a.props.onSelectEvent,onShowMore:a.props.onShowMore,onDoubleClick:a.props.onDoubleClickEvent,onKeyDown:a.props.onKeyPressEvent,onSelectSlot:a.props.onSelectSlot,longPressThreshold:a.props.longPressThreshold,resizable:C})})))})}},{key:"render",value:function(){var n=this.props,a=n.width,i=n.rtl,o=n.range,c=n.scrollRef,l=n.isOverflowing,d=n.components.timeGutterHeader,u={};return l&&(u[i?"marginLeft":"marginRight"]="".concat(ax()-1,"px")),I.createElement("div",{style:u,ref:c,className:pt("rbc-time-header",l&&"rbc-overflowing")},I.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:a,minWidth:a,maxWidth:a}},d&&I.createElement(d,null)),this.renderHeaderCells(o))}}])}(I.Component);function fV(e){var t=e.min,r=e.max,n=e.localizer;return n.getTimezoneOffset(t)!==n.getTimezoneOffset(r)?{start:n.add(t,-1,"day"),end:n.add(r,-1,"day")}:{start:t,end:r}}var mV=function(t){var r=t.min,n=t.max,a=t.timeslots,i=t.step,o=t.localizer,c=t.getNow,l=t.resource,d=t.components,u=t.getters,h=t.gutterRef,f=d.timeGutterWrapper,x=g.useMemo(function(){return fV({min:r,max:n,localizer:o})},[r==null?void 0:r.toISOString(),n==null?void 0:n.toISOString(),o]),v=x.start,y=x.end,b=g.useState(kx({min:v,max:y,timeslots:a,step:i,localizer:o})),p=Vr(b,2),m=p[0],j=p[1];g.useEffect(function(){m&&j(m.update({min:v,max:y,timeslots:a,step:i,localizer:o}))},[v==null?void 0:v.toISOString(),y==null?void 0:y.toISOString(),a,i]);var w=g.useCallback(function(N,C){if(C)return null;var S=m.dateIsInGroup(c(),C);return I.createElement("span",{className:pt("rbc-label",S&&"rbc-now")},o.format(N,"timeGutterFormat"))},[m,o,c]);return I.createElement(f,{slotMetrics:m},I.createElement("div",{className:"rbc-time-gutter rbc-time-column",ref:h},m.groups.map(function(N,C){return I.createElement(TN,{key:C,group:N,resource:l,components:d,renderSlot:w,getters:u})})))},pV=I.forwardRef(function(e,t){return I.createElement(mV,Object.assign({gutterRef:t},e))}),Rf={};function gV(e,t){return{map:function(n){return e?e.map(function(a,i){return n([t.resourceId(a),a],i)}):[n([Rf,null],0)]},groupEvents:function(n){var a=new Map;return e?(n.forEach(function(i){var o=t.resource(i)||Rf;if(Array.isArray(o))o.forEach(function(l){var d=a.get(l)||[];d.push(i),a.set(l,d)});else{var c=a.get(o)||[];c.push(i),a.set(o,c)}}),a):(a.set(Rf,n),a)}}}var Qi=function(e){function t(r){var n;return At(this,t),n=Kt(this,t,[r]),n.handleScroll=function(a){n.scrollRef.current&&(n.scrollRef.current.scrollLeft=a.target.scrollLeft)},n.handleResize=function(){ly(n.rafHandle),n.rafHandle=D2(n.checkOverflow)},n.handleKeyPressEvent=function(){n.clearSelection();for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];Ze(n.props.onKeyPressEvent,i)},n.handleSelectEvent=function(){n.clearSelection();for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];Ze(n.props.onSelectEvent,i)},n.handleDoubleClickEvent=function(){n.clearSelection();for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];Ze(n.props.onDoubleClickEvent,i)},n.handleShowMore=function(a,i,o,c,l){var d=n.props,u=d.popup,h=d.onDrillDown,f=d.onShowMore,x=d.getDrilldownView,v=d.doShowMoreDrillDown;if(n.clearSelection(),u){var y=k2(o,n.containerRef.current);n.setState({overlay:{date:i,events:a,position:Ye(Ye({},y),{},{width:"200px"}),target:l}})}else v&&Ze(h,[i,x(i)||rr.DAY]);Ze(f,[a,i,c])},n.handleSelectAllDaySlot=function(a,i){var o=n.props.onSelectSlot,c=new Date(a[0]),l=new Date(a[a.length-1]);l.setDate(a[a.length-1].getDate()+1),Ze(o,{slots:a,start:c,end:l,action:i.action,resourceId:i.resourceId})},n.overlayDisplay=function(){n.setState({overlay:null})},n.checkOverflow=function(){if(!n._updatingOverflow){var a=n.contentRef.current;if(a!=null&&a.scrollHeight){var i=a.scrollHeight>a.clientHeight;n.state.isOverflowing!==i&&(n._updatingOverflow=!0,n.setState({isOverflowing:i},function(){n._updatingOverflow=!1}))}}},n.memoizedResources=Z2(function(a,i){return gV(a,i)}),n.state={gutterWidth:void 0,isOverflowing:null},n.scrollRef=I.createRef(),n.contentRef=I.createRef(),n.containerRef=I.createRef(),n._scrollRatio=null,n.gutterRef=g.createRef(),n}return Qt(t,e),Tt(t,[{key:"getSnapshotBeforeUpdate",value:function(){return this.checkOverflow(),null}},{key:"componentDidMount",value:function(){this.props.width==null&&this.measureGutter(),this.calculateScroll(),this.applyScroll(),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),ly(this.rafHandle),this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest)}},{key:"componentDidUpdate",value:function(){this.applyScroll()}},{key:"renderDayColumn",value:function(n,a,i,o,c,l,d,u,h,f){var x=this.props,v=x.min,y=x.max,b=(o.get(a)||[]).filter(function(m){return l.inRange(n,d.start(m),d.end(m),"day")}),p=(c.get(a)||[]).filter(function(m){return l.inRange(n,d.start(m),d.end(m),"day")});return I.createElement(_N,Object.assign({},this.props,{localizer:l,min:l.merge(n,v),max:l.merge(n,y),resource:i&&a,components:u,isNow:l.isSameDate(n,f),key:"".concat(a,"-").concat(n),date:n,events:b,backgroundEvents:p,dayLayoutAlgorithm:h}))}},{key:"renderResourcesFirst",value:function(n,a,i,o,c,l,d,u,h){var f=this;return a.map(function(x){var v=Vr(x,2),y=v[0],b=v[1];return n.map(function(p){return f.renderDayColumn(p,y,b,i,o,c,l,u,h,d)})})}},{key:"renderRangeFirst",value:function(n,a,i,o,c,l,d,u,h){var f=this;return n.map(function(x){return I.createElement("div",{style:{display:"flex",minHeight:"100%",flex:1},key:x},a.map(function(v){var y=Vr(v,2),b=y[0],p=y[1];return I.createElement("div",{style:{flex:1},key:l.resourceId(p)},f.renderDayColumn(x,b,p,i,o,c,l,u,h,d))}))})}},{key:"renderEvents",value:function(n,a,i,o){var c=this.props,l=c.accessors,d=c.localizer,u=c.resourceGroupingLayout,h=c.components,f=c.dayLayoutAlgorithm,x=this.memoizedResources(this.props.resources,l),v=x.groupEvents(a),y=x.groupEvents(i);return u?this.renderRangeFirst(n,x,v,y,d,l,o,h,f):this.renderResourcesFirst(n,x,v,y,d,l,o,h,f)}},{key:"render",value:function(){var n,a=this.props,i=a.events,o=a.backgroundEvents,c=a.range,l=a.width,d=a.rtl,u=a.selected,h=a.getNow,f=a.resources,x=a.components,v=a.accessors,y=a.getters,b=a.localizer,p=a.min,m=a.max,j=a.showMultiDayTimes,w=a.longPressThreshold,N=a.resizable,C=a.resourceGroupingLayout;l=l||this.state.gutterWidth;var S=c[0],E=c[c.length-1];this.slots=c.length;var k=[],T=[],D=[];i.forEach(function(_){if(Al(_,S,E,v,b)){var A=v.start(_),B=v.end(_);v.allDay(_)||b.startAndEndAreDateOnly(A,B)||!j&&!b.isSameDate(A,B)?k.push(_):T.push(_)}}),o.forEach(function(_){Al(_,S,E,v,b)&&D.push(_)}),k.sort(function(_,A){return pp(_,A,v,b)});var $={range:c,events:k,width:l,rtl:d,getNow:h,localizer:b,selected:u,allDayMaxRows:this.props.showAllEvents?1/0:(n=this.props.allDayMaxRows)!==null&&n!==void 0?n:1/0,resources:this.memoizedResources(f,v),selectable:this.props.selectable,accessors:v,getters:y,components:x,scrollRef:this.scrollRef,isOverflowing:this.state.isOverflowing,longPressThreshold:w,onSelectSlot:this.handleSelectAllDaySlot,onSelectEvent:this.handleSelectEvent,onShowMore:this.handleShowMore,onDoubleClickEvent:this.props.onDoubleClickEvent,onKeyPressEvent:this.props.onKeyPressEvent,onDrillDown:this.props.onDrillDown,getDrilldownView:this.props.getDrilldownView,resizable:N};return I.createElement("div",{className:pt("rbc-time-view",f&&"rbc-time-view-resources"),ref:this.containerRef},f&&f.length>1&&C?I.createElement(hV,$):I.createElement(uV,$),this.props.popup&&this.renderOverlay(),I.createElement("div",{ref:this.contentRef,className:"rbc-time-content",onScroll:this.handleScroll},I.createElement(pV,{date:S,ref:this.gutterRef,localizer:b,min:b.merge(S,p),max:b.merge(S,m),step:this.props.step,getNow:this.props.getNow,timeslots:this.props.timeslots,components:x,className:"rbc-time-gutter",getters:y}),this.renderEvents(c,T,D,h())))}},{key:"renderOverlay",value:function(){var n,a,i=this,o=(n=(a=this.state)===null||a===void 0?void 0:a.overlay)!==null&&n!==void 0?n:{},c=this.props,l=c.accessors,d=c.localizer,u=c.components,h=c.getters,f=c.selected,x=c.popupOffset,v=c.handleDragStart,y=function(){return i.setState({overlay:null})};return I.createElement(Sx,{overlay:o,accessors:l,localizer:d,components:u,getters:h,selected:f,popupOffset:x,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:v,show:!!o.position,overlayDisplay:this.overlayDisplay,onHide:y})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}},{key:"measureGutter",value:function(){var n=this;this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest),this.measureGutterAnimationFrameRequest=window.requestAnimationFrame(function(){var a,i=(a=n.gutterRef)!==null&&a!==void 0&&a.current?hp(n.gutterRef.current):void 0;i&&n.state.gutterWidth!==i&&n.setState({gutterWidth:i})})}},{key:"applyScroll",value:function(){if(this._scrollRatio!=null&&this.props.enableAutoScroll===!0){var n=this.contentRef.current;n.scrollTop=n.scrollHeight*this._scrollRatio,this._scrollRatio=null}}},{key:"calculateScroll",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,a=n.min,i=n.max,o=n.scrollToTime,c=n.localizer,l=c.diff(c.merge(o,a),o,"milliseconds"),d=c.diff(a,i,"milliseconds");this._scrollRatio=l/d}}])}(g.Component);Qi.defaultProps={step:30,timeslots:2,resourceGroupingLayout:!1};var xV=["date","localizer","min","max","scrollToTime","enableAutoScroll"],hh=function(e){function t(){return At(this,t),Kt(this,t,arguments)}return Qt(t,e),Tt(t,[{key:"render",value:function(){var n=this.props,a=n.date,i=n.localizer,o=n.min,c=o===void 0?i.startOf(new Date,"day"):o,l=n.max,d=l===void 0?i.endOf(new Date,"day"):l,u=n.scrollToTime,h=u===void 0?i.startOf(new Date,"day"):u,f=n.enableAutoScroll,x=f===void 0?!0:f,v=Ps(n,xV),y=t.range(a,{localizer:i});return I.createElement(Qi,Object.assign({},v,{range:y,eventOffset:10,localizer:i,min:c,max:d,scrollToTime:h,enableAutoScroll:x}))}}])}(I.Component);hh.range=function(e,t){var r=t.localizer;return[r.startOf(e,"day")]};hh.navigate=function(e,t,r){var n=r.localizer;switch(t){case yr.PREVIOUS:return n.add(e,-1,"day");case yr.NEXT:return n.add(e,1,"day");default:return e}};hh.title=function(e,t){var r=t.localizer;return r.format(e,"dayHeaderFormat")};var vV=["date","localizer","min","max","scrollToTime","enableAutoScroll"],qn=function(e){function t(){return At(this,t),Kt(this,t,arguments)}return Qt(t,e),Tt(t,[{key:"render",value:function(){var n=this.props,a=n.date,i=n.localizer,o=n.min,c=o===void 0?i.startOf(new Date,"day"):o,l=n.max,d=l===void 0?i.endOf(new Date,"day"):l,u=n.scrollToTime,h=u===void 0?i.startOf(new Date,"day"):u,f=n.enableAutoScroll,x=f===void 0?!0:f,v=Ps(n,vV),y=t.range(a,this.props);return I.createElement(Qi,Object.assign({},v,{range:y,eventOffset:15,localizer:i,min:c,max:d,scrollToTime:h,enableAutoScroll:x}))}}])}(I.Component);qn.defaultProps=Qi.defaultProps;qn.navigate=function(e,t,r){var n=r.localizer;switch(t){case yr.PREVIOUS:return n.add(e,-1,"week");case yr.NEXT:return n.add(e,1,"week");default:return e}};qn.range=function(e,t){var r=t.localizer,n=r.startOfWeek(),a=r.startOf(e,"week",n),i=r.endOf(e,"week",n);return r.range(a,i)};qn.title=function(e,t){var r=t.localizer,n=qn.range(e,{localizer:r}),a=iN(n),i=a[0],o=a.slice(1);return r.format({start:i,end:o.pop()},"dayRangeHeaderFormat")};var yV=["date","localizer","min","max","scrollToTime","enableAutoScroll"];function Dx(e,t){return qn.range(e,t).filter(function(r){return[6,0].indexOf(r.getDay())===-1})}var rc=function(e){function t(){return At(this,t),Kt(this,t,arguments)}return Qt(t,e),Tt(t,[{key:"render",value:function(){var n=this.props,a=n.date,i=n.localizer,o=n.min,c=o===void 0?i.startOf(new Date,"day"):o,l=n.max,d=l===void 0?i.endOf(new Date,"day"):l,u=n.scrollToTime,h=u===void 0?i.startOf(new Date,"day"):u,f=n.enableAutoScroll,x=f===void 0?!0:f,v=Ps(n,yV),y=Dx(a,this.props);return I.createElement(Qi,Object.assign({},v,{range:y,eventOffset:15,localizer:i,min:c,max:d,scrollToTime:h,enableAutoScroll:x}))}}])}(I.Component);rc.defaultProps=Qi.defaultProps;rc.range=Dx;rc.navigate=qn.navigate;rc.title=function(e,t){var r=t.localizer,n=Dx(e,{localizer:r}),a=iN(n),i=a[0],o=a.slice(1);return r.format({start:i,end:o.pop()},"dayRangeHeaderFormat")};var fh=30;function mh(e){var t=e.accessors,r=e.components,n=e.date,a=e.events,i=e.getters,o=e.length,c=o===void 0?fh:o,l=e.localizer,d=e.onDoubleClickEvent,u=e.onSelectEvent,h=e.selected,f=g.useRef(null),x=g.useRef(null),v=g.useRef(null),y=g.useRef(null),b=g.useRef(null);g.useEffect(function(){j()});var p=function(E,k,T){var D=r.event,$=r.date;return k=k.filter(function(_){return Al(_,l.startOf(E,"day"),l.endOf(E,"day"),t,l)}),k.map(function(_,A){var B=t.title(_),P=t.end(_),M=t.start(_),R=i.eventProp(_,M,P,dh(_,h)),W=A===0&&l.format(E,"agendaDateFormat"),V=A===0?I.createElement("td",{rowSpan:k.length,className:"rbc-agenda-date-cell"},$?I.createElement($,{day:E,label:W}):W):!1;return I.createElement("tr",{key:T+"_"+A,className:R.className,style:R.style},V,I.createElement("td",{className:"rbc-agenda-time-cell"},m(E,_)),I.createElement("td",{className:"rbc-agenda-event-cell",onClick:function(H){return u&&u(_,H)},onDoubleClick:function(H){return d&&d(_,H)}},D?I.createElement(D,{event:_,title:B}):B))},[])},m=function(E,k){var T="",D=r.time,$=l.messages.allDay,_=t.end(k),A=t.start(k);return t.allDay(k)||(l.eq(A,_)?$=l.format(A,"agendaTimeFormat"):l.isSameDate(A,_)?$=l.format({start:A,end:_},"agendaTimeRangeFormat"):l.isSameDate(E,A)?$=l.format(A,"agendaTimeFormat"):l.isSameDate(E,_)&&($=l.format(_,"agendaTimeFormat"))),l.gt(E,A,"day")&&(T="rbc-continues-prior"),l.lt(E,_,"day")&&(T+=" rbc-continues-after"),I.createElement("span",{className:T.trim()},D?I.createElement(D,{event:k,day:E,label:$}):$)},j=function(){if(b.current){var E=f.current,k=b.current.firstChild;if(k){var T=y.current.scrollHeight>y.current.clientHeight,D=[],$=D;D=[hp(k.children[0]),hp(k.children[1])],($[0]!==D[0]||$[1]!==D[1])&&(x.current.style.width=D[0]+"px",v.current.style.width=D[1]+"px"),T?(b_(E,"rbc-header-overflowing"),E.style.marginRight=ax()+"px"):j_(E,"rbc-header-overflowing")}}},w=l.messages,N=l.add(n,c,"day"),C=l.range(n,N,"day");return a=a.filter(function(S){return Al(S,l.startOf(n,"day"),l.endOf(N,"day"),t,l)}),a.sort(function(S,E){return+t.start(S)-+t.start(E)}),I.createElement("div",{className:"rbc-agenda-view"},a.length!==0?I.createElement(I.Fragment,null,I.createElement("table",{ref:f,className:"rbc-agenda-table"},I.createElement("thead",null,I.createElement("tr",null,I.createElement("th",{className:"rbc-header",ref:x},w.date),I.createElement("th",{className:"rbc-header",ref:v},w.time),I.createElement("th",{className:"rbc-header"},w.event)))),I.createElement("div",{className:"rbc-agenda-content",ref:y},I.createElement("table",{className:"rbc-agenda-table"},I.createElement("tbody",{ref:b},C.map(function(S,E){return p(S,a,E)}))))):I.createElement("span",{className:"rbc-agenda-empty"},w.noEventsInRange))}mh.range=function(e,t){var r=t.length,n=r===void 0?fh:r,a=t.localizer,i=a.add(e,n,"day");return{start:e,end:i}};mh.navigate=function(e,t,r){var n=r.length,a=n===void 0?fh:n,i=r.localizer;switch(t){case yr.PREVIOUS:return i.add(e,-a,"day");case yr.NEXT:return i.add(e,a,"day");default:return e}};mh.title=function(e,t){var r=t.length,n=r===void 0?fh:r,a=t.localizer,i=a.add(e,n,"day");return a.format({start:e,end:i},"agendaHeaderFormat")};var md=ca(ca(ca(ca(ca({},rr.MONTH,uh),rr.WEEK,qn),rr.WORK_WEEK,rc),rr.DAY,hh),rr.AGENDA,mh),bV=["action","date","today"];function jV(e,t){var r=t.action,n=t.date,a=t.today,i=Ps(t,bV);switch(e=typeof e=="string"?md[e]:e,r){case yr.TODAY:n=a||new Date;break;case yr.DATE:break;default:xl(e&&typeof e.navigate=="function","Calendar View components must implement a static `.navigate(date, action)` method.s"),n=e.navigate(n,r,i)}return n}function wV(e,t){var r=null;return typeof t=="function"?r=t(e):typeof t=="string"&&dn(e)==="object"&&e!=null&&t in e&&(r=e[t]),r}var Ys=function(t){return function(r){return wV(r,t)}},NV=["view","date","getNow","onNavigate"],CV=["view","toolbar","events","backgroundEvents","resourceGroupingLayout","style","className","elementProps","date","getNow","length","showMultiDayTimes","onShowMore","doShowMoreDrillDown","components","formats","messages","culture"];function ON(e){if(Array.isArray(e))return e;for(var t=[],r=0,n=Object.entries(e);r<n.length;r++){var a=Vr(n[r],2),i=a[0],o=a[1];o&&t.push(i)}return t}function SV(e,t){var r=t.views,n=ON(r);return n.indexOf(e)!==-1}var RN=function(e){function t(){var r;At(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Kt(this,t,[].concat(a)),r.getViews=function(){var o=r.props.views;return Array.isArray(o)?tU(o,function(c,l){return c[l]=md[l]},{}):dn(o)==="object"?t7(o,function(c,l){return c===!0?md[l]:c}):md},r.getView=function(){var o=r.getViews();return o[r.props.view]},r.getDrilldownView=function(o){var c=r.props,l=c.view,d=c.drilldownView,u=c.getDrilldownView;return u?u(o,l,Object.keys(r.getViews())):d},r.handleRangeChange=function(o,c,l){var d=r.props,u=d.onRangeChange,h=d.localizer;u&&c.range&&u(c.range(o,{localizer:h}),l)},r.handleNavigate=function(o,c){var l=r.props,d=l.view,u=l.date,h=l.getNow,f=l.onNavigate,x=Ps(l,NV),v=r.getView(),y=h();u=jV(v,Ye(Ye({},x),{},{action:o,date:c||u||y,today:y})),f(u,d,o),r.handleRangeChange(u,v)},r.handleViewChange=function(o){o!==r.props.view&&SV(o,r.props)&&r.props.onView(o);var c=r.getViews();r.handleRangeChange(r.props.date||r.props.getNow(),c[o],o)},r.handleSelectEvent=function(){for(var o=arguments.length,c=new Array(o),l=0;l<o;l++)c[l]=arguments[l];Ze(r.props.onSelectEvent,c)},r.handleDoubleClickEvent=function(){for(var o=arguments.length,c=new Array(o),l=0;l<o;l++)c[l]=arguments[l];Ze(r.props.onDoubleClickEvent,c)},r.handleKeyPressEvent=function(){for(var o=arguments.length,c=new Array(o),l=0;l<o;l++)c[l]=arguments[l];Ze(r.props.onKeyPressEvent,c)},r.handleSelectSlot=function(o){Ze(r.props.onSelectSlot,o)},r.handleDrillDown=function(o,c){var l=r.props.onDrillDown;if(l){l(o,c,r.drilldownView);return}c&&r.handleViewChange(c),r.handleNavigate(yr.DATE,o)},r.state={context:t.getContext(r.props)},r}return Qt(t,e),Tt(t,[{key:"render",value:function(){var n=this.props,a=n.view,i=n.toolbar,o=n.events,c=n.backgroundEvents,l=n.resourceGroupingLayout,d=n.style,u=n.className,h=n.elementProps,f=n.date,x=n.getNow,v=n.length,y=n.showMultiDayTimes,b=n.onShowMore,p=n.doShowMoreDrillDown;n.components,n.formats,n.messages,n.culture;var m=Ps(n,CV);f=f||x();var j=this.getView(),w=this.state.context,N=w.accessors,C=w.components,S=w.getters,E=w.localizer,k=w.viewNames,T=C.toolbar||DU,D=j.title(f,{localizer:E,length:v});return I.createElement("div",Object.assign({},h,{className:pt(u,"rbc-calendar",m.rtl&&"rbc-rtl"),style:d}),i&&I.createElement(T,{date:f,view:a,views:k,label:D,onView:this.handleViewChange,onNavigate:this.handleNavigate,localizer:E}),I.createElement(j,Object.assign({},m,{events:o,backgroundEvents:c,date:f,getNow:x,length:v,localizer:E,getters:S,components:C,accessors:N,showMultiDayTimes:y,getDrilldownView:this.getDrilldownView,onNavigate:this.handleNavigate,onDrillDown:this.handleDrillDown,onSelectEvent:this.handleSelectEvent,onDoubleClickEvent:this.handleDoubleClickEvent,onKeyPressEvent:this.handleKeyPressEvent,onSelectSlot:this.handleSelectSlot,onShowMore:b,doShowMoreDrillDown:p,resourceGroupingLayout:l})))}}],[{key:"getDerivedStateFromProps",value:function(n){return{context:t.getContext(n)}}},{key:"getContext",value:function(n){var a=n.startAccessor,i=n.endAccessor,o=n.allDayAccessor,c=n.tooltipAccessor,l=n.titleAccessor,d=n.resourceAccessor,u=n.resourceIdAccessor,h=n.resourceTitleAccessor,f=n.eventIdAccessor,x=n.eventPropGetter,v=n.backgroundEventPropGetter,y=n.slotPropGetter,b=n.slotGroupPropGetter,p=n.dayPropGetter,m=n.view,j=n.views,w=n.localizer,N=n.culture,C=n.messages,S=C===void 0?{}:C,E=n.components,k=E===void 0?{}:E,T=n.formats,D=T===void 0?{}:T,$=ON(j),_=TU(S);return{viewNames:$,localizer:kU(w,N,D,_),getters:{eventProp:function(){return x&&x.apply(void 0,arguments)||{}},backgroundEventProp:function(){return v&&v.apply(void 0,arguments)||{}},slotProp:function(){return y&&y.apply(void 0,arguments)||{}},slotGroupProp:function(){return b&&b.apply(void 0,arguments)||{}},dayProp:function(){return p&&p.apply(void 0,arguments)||{}}},components:GF(k[m]||{},Uz(k,$),{eventWrapper:Es,backgroundEventWrapper:Es,eventContainerWrapper:Es,dateCellWrapper:Es,weekWrapper:Es,timeSlotWrapper:Es,timeGutterWrapper:Es,timeIndicatorWrapper:Es}),accessors:{start:Ys(a),end:Ys(i),allDay:Ys(o),tooltip:Ys(c),title:Ys(l),resource:Ys(d),resourceId:Ys(u),resourceTitle:Ys(h),eventId:Ys(f)}}}}])}(I.Component);RN.defaultProps={events:[],backgroundEvents:[],elementProps:{},popup:!1,toolbar:!0,view:rr.MONTH,views:[rr.MONTH,rr.WEEK,rr.DAY,rr.AGENDA],step:30,length:30,allDayMaxRows:1/0,doShowMoreDrillDown:!0,drilldownView:rr.DAY,titleAccessor:"title",tooltipAccessor:"title",allDayAccessor:"allDay",startAccessor:"start",endAccessor:"end",resourceAccessor:"resourceId",resourceIdAccessor:"id",resourceTitleAccessor:"title",eventIdAccessor:"id",longPressThreshold:250,getNow:function(){return new Date},dayLayoutAlgorithm:"overlap"};var EV=o2(RN,{view:"onView",date:"onNavigate",selected:"onSelectEvent"}),kV=function(t,r,n){var a=t.start,i=t.end;return n.format(a,"MMMM DD",r)+" – "+n.format(i,n.eq(a,i,"month")?"DD":"MMMM DD",r)},DV=function(t,r,n){var a=t.start,i=t.end;return n.format(a,"L",r)+" – "+n.format(i,"L",r)},Pf=function(t,r,n){var a=t.start,i=t.end;return n.format(a,"LT",r)+" – "+n.format(i,"LT",r)},AV=function(t,r,n){var a=t.start;return n.format(a,"LT",r)+" – "},TV=function(t,r,n){var a=t.end;return" – "+n.format(a,"LT",r)},_V={dateFormat:"DD",dayFormat:"DD ddd",weekdayFormat:"ddd",selectRangeFormat:Pf,eventTimeRangeFormat:Pf,eventTimeRangeStartFormat:AV,eventTimeRangeEndFormat:TV,timeGutterFormat:"LT",monthHeaderFormat:"MMMM YYYY",dayHeaderFormat:"dddd MMM DD",dayRangeHeaderFormat:kV,agendaHeaderFormat:DV,agendaDateFormat:"ddd MMM DD",agendaTimeFormat:"LT",agendaTimeRangeFormat:Pf};function bn(e){var t=e&&e.toLowerCase();return t==="FullYear"?t="year":t||(t=void 0),t}function MV(e){var t=function(H,G){return G?H.locale(G):H};function r(z){return e(z).toDate().getTimezoneOffset()}function n(z,H){var G,Z,F=e(z).local(),U=e(H).local();if(!e.tz)return F.toDate().getTimezoneOffset()-U.toDate().getTimezoneOffset();var Y=(G=F==null||(Z=F._z)===null||Z===void 0?void 0:Z.name)!==null&&G!==void 0?G:e.tz.guess(),Q=e.tz.zone(Y).utcOffset(+F),de=e.tz.zone(Y).utcOffset(+U);return Q-de}function a(z){var H=e(z).startOf("day");return n(H,z)}function i(z,H,G){var Z=bn(G),F=Z?e(z).startOf(Z):e(z),U=Z?e(H).startOf(Z):e(H);return[F,U,Z]}function o(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,H=arguments.length>1?arguments[1]:void 0,G=bn(H);return G?e(z).startOf(G).toDate():e(z).toDate()}function c(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,H=arguments.length>1?arguments[1]:void 0,G=bn(H);return G?e(z).endOf(G).toDate():e(z).toDate()}function l(z,H,G){var Z=i(z,H,G),F=Vr(Z,3),U=F[0],Y=F[1],Q=F[2];return U.isSame(Y,Q)}function d(z,H,G){return!l(z,H,G)}function u(z,H,G){var Z=i(z,H,G),F=Vr(Z,3),U=F[0],Y=F[1],Q=F[2];return U.isAfter(Y,Q)}function h(z,H,G){var Z=i(z,H,G),F=Vr(Z,3),U=F[0],Y=F[1],Q=F[2];return U.isBefore(Y,Q)}function f(z,H,G){var Z=i(z,H,G),F=Vr(Z,3),U=F[0],Y=F[1],Q=F[2];return U.isSameOrBefore(Y,Q)}function x(z,H,G){var Z=i(z,H,G),F=Vr(Z,3),U=F[0],Y=F[1],Q=F[2];return U.isSameOrBefore(Y,Q)}function v(z,H,G){var Z=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"day",F=bn(Z),U=e(z),Y=e(H),Q=e(G);return U.isBetween(Y,Q,F,"[]")}function y(z,H){var G=e(z),Z=e(H),F=e.min(G,Z);return F.toDate()}function b(z,H){var G=e(z),Z=e(H),F=e.max(G,Z);return F.toDate()}function p(z,H){if(!z&&!H)return null;var G=e(H).format("HH:mm:ss"),Z=e(z).startOf("day").format("MM/DD/YYYY");return e("".concat(Z," ").concat(G),"MM/DD/YYYY HH:mm:ss").toDate()}function m(z,H,G){var Z=bn(G);return e(z).add(H,Z).toDate()}function j(z,H){for(var G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"day",Z=bn(G),F=e(z).toDate(),U=[];x(F,H);)U.push(F),F=m(F,1,Z);return U}function w(z,H){var G=bn(H),Z=o(z,G);return l(Z,z)?Z:m(Z,1,G)}function N(z,H){var G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"day",Z=bn(G),F=e(z),U=e(H);return U.diff(F,Z)}function C(z){var H=e(z);return H.minutes()}function S(z){var H=z?e.localeData(z):e.localeData();return H?H.firstDayOfWeek():0}function E(z){return e(z).startOf("month").startOf("week").toDate()}function k(z){return e(z).endOf("month").endOf("week").toDate()}function T(z){for(var H=E(z),G=k(z),Z=[];x(H,G);)Z.push(H),H=m(H,1,"d");return Z}function D(z,H,G){return e(z).startOf("day").minute(H+G).toDate()}function $(z,H){return N(z,H,"minutes")}function _(z){var H=e(z).startOf("day"),G=e(z);return G.diff(H,"minutes")+a(z)}function A(z,H){var G=e(z),Z=e(H);return G.isBefore(Z,"day")}function B(z,H,G){var Z=e(H),F=e(G);return Z.isSameOrAfter(F,"minutes")}function P(z,H){var G=e(z),Z=e(H),F=e.duration(Z.diff(G));return F.days()}function M(z){var H=z.evtA,G=H.start,Z=H.end,F=H.allDay,U=z.evtB,Y=U.start,Q=U.end,de=U.allDay,q=+o(G,"day")-+o(Y,"day"),ue=P(G,Z),oe=P(Y,Q);return q||oe-ue||!!de-!!F||+G-+Y||+Z-+Q}function R(z){var H=z.event,G=H.start,Z=H.end,F=z.range,U=F.start,Y=F.end,Q=e(G).startOf("day"),de=e(Z),q=e(U),ue=e(Y),oe=Q.isSameOrBefore(ue,"day"),ye=!Q.isSame(de,"minutes"),$e=ye?de.isAfter(q,"minutes"):de.isSameOrAfter(q,"minutes");return oe&&$e}function W(z,H){var G=e(z),Z=e(H);return G.isSame(Z,"day")}function V(){var z=new Date,H=/-/.test(z.toString())?"-":"",G=z.getTimezoneOffset(),Z=Number("".concat(H).concat(Math.abs(G))),F=e().utcOffset();return F>Z?1:0}return new EU({formats:_V,firstOfWeek:S,firstVisibleDay:E,lastVisibleDay:k,visibleDays:T,format:function(H,G,Z){return t(e(H),Z).format(G)},lt:h,lte:x,gt:u,gte:f,eq:l,neq:d,merge:p,inRange:v,startOf:o,endOf:c,range:j,add:m,diff:N,ceil:w,min:y,max:b,minutes:C,getSlotDate:D,getTimezoneOffset:r,getDstOffset:n,getTotalMin:$,getMinutesFromMidnight:_,continuesPrior:A,continuesAfter:B,sortEvents:M,inEventRange:R,isSameDate:W,daySpan:P,browserTZOffset:V})}//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var PN;function re(){return PN.apply(null,arguments)}function OV(e){PN=e}function gs(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function ja(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function Le(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ax(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var t;for(t in e)if(Le(e,t))return!1;return!0}function cr(e){return e===void 0}function hn(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function sc(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function LN(e,t){var r=[],n,a=e.length;for(n=0;n<a;++n)r.push(t(e[n],n));return r}function Tn(e,t){for(var r in t)Le(t,r)&&(e[r]=t[r]);return Le(t,"toString")&&(e.toString=t.toString),Le(t,"valueOf")&&(e.valueOf=t.valueOf),e}function zs(e,t,r,n){return aC(e,t,r,n,!0).utc()}function RV(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function we(e){return e._pf==null&&(e._pf=RV()),e._pf}var xp;Array.prototype.some?xp=Array.prototype.some:xp=function(e){var t=Object(this),r=t.length>>>0,n;for(n=0;n<r;n++)if(n in t&&e.call(this,t[n],n,t))return!0;return!1};function Tx(e){var t=null,r=!1,n=e._d&&!isNaN(e._d.getTime());if(n&&(t=we(e),r=xp.call(t.parsedDateParts,function(a){return a!=null}),n=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&r),e._strict&&(n=n&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=n;else return n;return e._isValid}function ph(e){var t=zs(NaN);return e!=null?Tn(we(t),e):we(t).userInvalidated=!0,t}var Nb=re.momentProperties=[],Lf=!1;function _x(e,t){var r,n,a,i=Nb.length;if(cr(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),cr(t._i)||(e._i=t._i),cr(t._f)||(e._f=t._f),cr(t._l)||(e._l=t._l),cr(t._strict)||(e._strict=t._strict),cr(t._tzm)||(e._tzm=t._tzm),cr(t._isUTC)||(e._isUTC=t._isUTC),cr(t._offset)||(e._offset=t._offset),cr(t._pf)||(e._pf=we(t)),cr(t._locale)||(e._locale=t._locale),i>0)for(r=0;r<i;r++)n=Nb[r],a=t[n],cr(a)||(e[n]=a);return e}function nc(e){_x(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Lf===!1&&(Lf=!0,re.updateOffset(this),Lf=!1)}function xs(e){return e instanceof nc||e!=null&&e._isAMomentObject!=null}function IN(e){re.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function Jr(e,t){var r=!0;return Tn(function(){if(re.deprecationHandler!=null&&re.deprecationHandler(null,e),r){var n=[],a,i,o,c=arguments.length;for(i=0;i<c;i++){if(a="",typeof arguments[i]=="object"){a+=`
[`+i+"] ";for(o in arguments[0])Le(arguments[0],o)&&(a+=o+": "+arguments[0][o]+", ");a=a.slice(0,-2)}else a=arguments[i];n.push(a)}IN(e+`
Arguments: `+Array.prototype.slice.call(n).join("")+`
`+new Error().stack),r=!1}return t.apply(this,arguments)},t)}var Cb={};function $N(e,t){re.deprecationHandler!=null&&re.deprecationHandler(e,t),Cb[e]||(IN(t),Cb[e]=!0)}re.suppressDeprecationWarnings=!1;re.deprecationHandler=null;function Us(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function PV(e){var t,r;for(r in e)Le(e,r)&&(t=e[r],Us(t)?this[r]=t:this["_"+r]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function vp(e,t){var r=Tn({},e),n;for(n in t)Le(t,n)&&(ja(e[n])&&ja(t[n])?(r[n]={},Tn(r[n],e[n]),Tn(r[n],t[n])):t[n]!=null?r[n]=t[n]:delete r[n]);for(n in e)Le(e,n)&&!Le(t,n)&&ja(e[n])&&(r[n]=Tn({},r[n]));return r}function Mx(e){e!=null&&this.set(e)}var yp;Object.keys?yp=Object.keys:yp=function(e){var t,r=[];for(t in e)Le(e,t)&&r.push(t);return r};var LV={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function IV(e,t,r){var n=this._calendar[e]||this._calendar.sameElse;return Us(n)?n.call(t,r):n}function Ls(e,t,r){var n=""+Math.abs(e),a=t-n.length,i=e>=0;return(i?r?"+":"":"-")+Math.pow(10,Math.max(0,a)).toString().substr(1)+n}var Ox=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Ic=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,If={},ui={};function ve(e,t,r,n){var a=n;typeof n=="string"&&(a=function(){return this[n]()}),e&&(ui[e]=a),t&&(ui[t[0]]=function(){return Ls(a.apply(this,arguments),t[1],t[2])}),r&&(ui[r]=function(){return this.localeData().ordinal(a.apply(this,arguments),e)})}function $V(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function FV(e){var t=e.match(Ox),r,n;for(r=0,n=t.length;r<n;r++)ui[t[r]]?t[r]=ui[t[r]]:t[r]=$V(t[r]);return function(a){var i="",o;for(o=0;o<n;o++)i+=Us(t[o])?t[o].call(a,e):t[o];return i}}function pd(e,t){return e.isValid()?(t=FN(t,e.localeData()),If[t]=If[t]||FV(t),If[t](e)):e.localeData().invalidDate()}function FN(e,t){var r=5;function n(a){return t.longDateFormat(a)||a}for(Ic.lastIndex=0;r>=0&&Ic.test(e);)e=e.replace(Ic,n),Ic.lastIndex=0,r-=1;return e}var BV={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function zV(e){var t=this._longDateFormat[e],r=this._longDateFormat[e.toUpperCase()];return t||!r?t:(this._longDateFormat[e]=r.match(Ox).map(function(n){return n==="MMMM"||n==="MM"||n==="DD"||n==="dddd"?n.slice(1):n}).join(""),this._longDateFormat[e])}var UV="Invalid date";function VV(){return this._invalidDate}var HV="%d",WV=/\d{1,2}/;function YV(e){return this._ordinal.replace("%d",e)}var qV={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function GV(e,t,r,n){var a=this._relativeTime[r];return Us(a)?a(e,t,r,n):a.replace(/%d/i,e)}function KV(e,t){var r=this._relativeTime[e>0?"future":"past"];return Us(r)?r(t):r.replace(/%s/i,t)}var Sb={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function Zr(e){return typeof e=="string"?Sb[e]||Sb[e.toLowerCase()]:void 0}function Rx(e){var t={},r,n;for(n in e)Le(e,n)&&(r=Zr(n),r&&(t[r]=e[n]));return t}var QV={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function XV(e){var t=[],r;for(r in e)Le(e,r)&&t.push({unit:r,priority:QV[r]});return t.sort(function(n,a){return n.priority-a.priority}),t}var BN=/\d/,Tr=/\d\d/,zN=/\d{3}/,Px=/\d{4}/,gh=/[+-]?\d{6}/,rt=/\d\d?/,UN=/\d\d\d\d?/,VN=/\d\d\d\d\d\d?/,xh=/\d{1,3}/,Lx=/\d{1,4}/,vh=/[+-]?\d{1,6}/,Xi=/\d+/,yh=/[+-]?\d+/,JV=/Z|[+-]\d\d:?\d\d/gi,bh=/Z|[+-]\d\d(?::?\d\d)?/gi,ZV=/[+-]?\d+(\.\d{1,3})?/,ac=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Ji=/^[1-9]\d?/,Ix=/^([1-9]\d|\d)/,cu;cu={};function le(e,t,r){cu[e]=Us(t)?t:function(n,a){return n&&r?r:t}}function eH(e,t){return Le(cu,e)?cu[e](t._strict,t._locale):new RegExp(tH(e))}function tH(e){return sn(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,r,n,a,i){return r||n||a||i}))}function sn(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function zr(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function Te(e){var t=+e,r=0;return t!==0&&isFinite(t)&&(r=zr(t)),r}var bp={};function We(e,t){var r,n=t,a;for(typeof e=="string"&&(e=[e]),hn(t)&&(n=function(i,o){o[t]=Te(i)}),a=e.length,r=0;r<a;r++)bp[e[r]]=n}function ic(e,t){We(e,function(r,n,a,i){a._w=a._w||{},t(r,a._w,a,i)})}function rH(e,t,r){t!=null&&Le(bp,e)&&bp[e](t,r._a,r,e)}function jh(e){return e%4===0&&e%100!==0||e%400===0}var qt=0,en=1,Ds=2,Dt=3,us=4,tn=5,pa=6,sH=7,nH=8;ve("Y",0,0,function(){var e=this.year();return e<=9999?Ls(e,4):"+"+e});ve(0,["YY",2],0,function(){return this.year()%100});ve(0,["YYYY",4],0,"year");ve(0,["YYYYY",5],0,"year");ve(0,["YYYYYY",6,!0],0,"year");le("Y",yh);le("YY",rt,Tr);le("YYYY",Lx,Px);le("YYYYY",vh,gh);le("YYYYYY",vh,gh);We(["YYYYY","YYYYYY"],qt);We("YYYY",function(e,t){t[qt]=e.length===2?re.parseTwoDigitYear(e):Te(e)});We("YY",function(e,t){t[qt]=re.parseTwoDigitYear(e)});We("Y",function(e,t){t[qt]=parseInt(e,10)});function Wo(e){return jh(e)?366:365}re.parseTwoDigitYear=function(e){return Te(e)+(Te(e)>68?1900:2e3)};var HN=Zi("FullYear",!0);function aH(){return jh(this.year())}function Zi(e,t){return function(r){return r!=null?(WN(this,e,r),re.updateOffset(this,t),this):_l(this,e)}}function _l(e,t){if(!e.isValid())return NaN;var r=e._d,n=e._isUTC;switch(t){case"Milliseconds":return n?r.getUTCMilliseconds():r.getMilliseconds();case"Seconds":return n?r.getUTCSeconds():r.getSeconds();case"Minutes":return n?r.getUTCMinutes():r.getMinutes();case"Hours":return n?r.getUTCHours():r.getHours();case"Date":return n?r.getUTCDate():r.getDate();case"Day":return n?r.getUTCDay():r.getDay();case"Month":return n?r.getUTCMonth():r.getMonth();case"FullYear":return n?r.getUTCFullYear():r.getFullYear();default:return NaN}}function WN(e,t,r){var n,a,i,o,c;if(!(!e.isValid()||isNaN(r))){switch(n=e._d,a=e._isUTC,t){case"Milliseconds":return void(a?n.setUTCMilliseconds(r):n.setMilliseconds(r));case"Seconds":return void(a?n.setUTCSeconds(r):n.setSeconds(r));case"Minutes":return void(a?n.setUTCMinutes(r):n.setMinutes(r));case"Hours":return void(a?n.setUTCHours(r):n.setHours(r));case"Date":return void(a?n.setUTCDate(r):n.setDate(r));case"FullYear":break;default:return}i=r,o=e.month(),c=e.date(),c=c===29&&o===1&&!jh(i)?28:c,a?n.setUTCFullYear(i,o,c):n.setFullYear(i,o,c)}}function iH(e){return e=Zr(e),Us(this[e])?this[e]():this}function oH(e,t){if(typeof e=="object"){e=Rx(e);var r=XV(e),n,a=r.length;for(n=0;n<a;n++)this[r[n].unit](e[r[n].unit])}else if(e=Zr(e),Us(this[e]))return this[e](t);return this}function lH(e,t){return(e%t+t)%t}var gt;Array.prototype.indexOf?gt=Array.prototype.indexOf:gt=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function $x(e,t){if(isNaN(e)||isNaN(t))return NaN;var r=lH(t,12);return e+=(t-r)/12,r===1?jh(e)?29:28:31-r%7%2}ve("M",["MM",2],"Mo",function(){return this.month()+1});ve("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});ve("MMMM",0,0,function(e){return this.localeData().months(this,e)});le("M",rt,Ji);le("MM",rt,Tr);le("MMM",function(e,t){return t.monthsShortRegex(e)});le("MMMM",function(e,t){return t.monthsRegex(e)});We(["M","MM"],function(e,t){t[en]=Te(e)-1});We(["MMM","MMMM"],function(e,t,r,n){var a=r._locale.monthsParse(e,n,r._strict);a!=null?t[en]=a:we(r).invalidMonth=e});var cH="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),YN="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),qN=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,dH=ac,uH=ac;function hH(e,t){return e?gs(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||qN).test(t)?"format":"standalone"][e.month()]:gs(this._months)?this._months:this._months.standalone}function fH(e,t){return e?gs(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[qN.test(t)?"format":"standalone"][e.month()]:gs(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function mH(e,t,r){var n,a,i,o=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)i=zs([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(i,"").toLocaleLowerCase();return r?t==="MMM"?(a=gt.call(this._shortMonthsParse,o),a!==-1?a:null):(a=gt.call(this._longMonthsParse,o),a!==-1?a:null):t==="MMM"?(a=gt.call(this._shortMonthsParse,o),a!==-1?a:(a=gt.call(this._longMonthsParse,o),a!==-1?a:null)):(a=gt.call(this._longMonthsParse,o),a!==-1?a:(a=gt.call(this._shortMonthsParse,o),a!==-1?a:null))}function pH(e,t,r){var n,a,i;if(this._monthsParseExact)return mH.call(this,e,t,r);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(a=zs([2e3,n]),r&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(a,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(a,"").replace(".","")+"$","i")),!r&&!this._monthsParse[n]&&(i="^"+this.months(a,"")+"|^"+this.monthsShort(a,""),this._monthsParse[n]=new RegExp(i.replace(".",""),"i")),r&&t==="MMMM"&&this._longMonthsParse[n].test(e))return n;if(r&&t==="MMM"&&this._shortMonthsParse[n].test(e))return n;if(!r&&this._monthsParse[n].test(e))return n}}function GN(e,t){if(!e.isValid())return e;if(typeof t=="string"){if(/^\d+$/.test(t))t=Te(t);else if(t=e.localeData().monthsParse(t),!hn(t))return e}var r=t,n=e.date();return n=n<29?n:Math.min(n,$x(e.year(),r)),e._isUTC?e._d.setUTCMonth(r,n):e._d.setMonth(r,n),e}function KN(e){return e!=null?(GN(this,e),re.updateOffset(this,!0),this):_l(this,"Month")}function gH(){return $x(this.year(),this.month())}function xH(e){return this._monthsParseExact?(Le(this,"_monthsRegex")||QN.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(Le(this,"_monthsShortRegex")||(this._monthsShortRegex=dH),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function vH(e){return this._monthsParseExact?(Le(this,"_monthsRegex")||QN.call(this),e?this._monthsStrictRegex:this._monthsRegex):(Le(this,"_monthsRegex")||(this._monthsRegex=uH),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function QN(){function e(l,d){return d.length-l.length}var t=[],r=[],n=[],a,i,o,c;for(a=0;a<12;a++)i=zs([2e3,a]),o=sn(this.monthsShort(i,"")),c=sn(this.months(i,"")),t.push(o),r.push(c),n.push(c),n.push(o);t.sort(e),r.sort(e),n.sort(e),this._monthsRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}function yH(e,t,r,n,a,i,o){var c;return e<100&&e>=0?(c=new Date(e+400,t,r,n,a,i,o),isFinite(c.getFullYear())&&c.setFullYear(e)):c=new Date(e,t,r,n,a,i,o),c}function Ml(e){var t,r;return e<100&&e>=0?(r=Array.prototype.slice.call(arguments),r[0]=e+400,t=new Date(Date.UTC.apply(null,r)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function du(e,t,r){var n=7+t-r,a=(7+Ml(e,0,n).getUTCDay()-t)%7;return-a+n-1}function XN(e,t,r,n,a){var i=(7+r-n)%7,o=du(e,n,a),c=1+7*(t-1)+i+o,l,d;return c<=0?(l=e-1,d=Wo(l)+c):c>Wo(e)?(l=e+1,d=c-Wo(e)):(l=e,d=c),{year:l,dayOfYear:d}}function Ol(e,t,r){var n=du(e.year(),t,r),a=Math.floor((e.dayOfYear()-n-1)/7)+1,i,o;return a<1?(o=e.year()-1,i=a+nn(o,t,r)):a>nn(e.year(),t,r)?(i=a-nn(e.year(),t,r),o=e.year()+1):(o=e.year(),i=a),{week:i,year:o}}function nn(e,t,r){var n=du(e,t,r),a=du(e+1,t,r);return(Wo(e)-n+a)/7}ve("w",["ww",2],"wo","week");ve("W",["WW",2],"Wo","isoWeek");le("w",rt,Ji);le("ww",rt,Tr);le("W",rt,Ji);le("WW",rt,Tr);ic(["w","ww","W","WW"],function(e,t,r,n){t[n.substr(0,1)]=Te(e)});function bH(e){return Ol(e,this._week.dow,this._week.doy).week}var jH={dow:0,doy:6};function wH(){return this._week.dow}function NH(){return this._week.doy}function CH(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function SH(e){var t=Ol(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}ve("d",0,"do","day");ve("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});ve("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});ve("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});ve("e",0,0,"weekday");ve("E",0,0,"isoWeekday");le("d",rt);le("e",rt);le("E",rt);le("dd",function(e,t){return t.weekdaysMinRegex(e)});le("ddd",function(e,t){return t.weekdaysShortRegex(e)});le("dddd",function(e,t){return t.weekdaysRegex(e)});ic(["dd","ddd","dddd"],function(e,t,r,n){var a=r._locale.weekdaysParse(e,n,r._strict);a!=null?t.d=a:we(r).invalidWeekday=e});ic(["d","e","E"],function(e,t,r,n){t[n]=Te(e)});function EH(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function kH(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function Fx(e,t){return e.slice(t,7).concat(e.slice(0,t))}var DH="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),JN="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),AH="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),TH=ac,_H=ac,MH=ac;function OH(e,t){var r=gs(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===!0?Fx(r,this._week.dow):e?r[e.day()]:r}function RH(e){return e===!0?Fx(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function PH(e){return e===!0?Fx(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function LH(e,t,r){var n,a,i,o=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)i=zs([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(i,"").toLocaleLowerCase();return r?t==="dddd"?(a=gt.call(this._weekdaysParse,o),a!==-1?a:null):t==="ddd"?(a=gt.call(this._shortWeekdaysParse,o),a!==-1?a:null):(a=gt.call(this._minWeekdaysParse,o),a!==-1?a:null):t==="dddd"?(a=gt.call(this._weekdaysParse,o),a!==-1||(a=gt.call(this._shortWeekdaysParse,o),a!==-1)?a:(a=gt.call(this._minWeekdaysParse,o),a!==-1?a:null)):t==="ddd"?(a=gt.call(this._shortWeekdaysParse,o),a!==-1||(a=gt.call(this._weekdaysParse,o),a!==-1)?a:(a=gt.call(this._minWeekdaysParse,o),a!==-1?a:null)):(a=gt.call(this._minWeekdaysParse,o),a!==-1||(a=gt.call(this._weekdaysParse,o),a!==-1)?a:(a=gt.call(this._shortWeekdaysParse,o),a!==-1?a:null))}function IH(e,t,r){var n,a,i;if(this._weekdaysParseExact)return LH.call(this,e,t,r);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(a=zs([2e3,1]).day(n),r&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(a,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(a,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(a,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[n]||(i="^"+this.weekdays(a,"")+"|^"+this.weekdaysShort(a,"")+"|^"+this.weekdaysMin(a,""),this._weekdaysParse[n]=new RegExp(i.replace(".",""),"i")),r&&t==="dddd"&&this._fullWeekdaysParse[n].test(e))return n;if(r&&t==="ddd"&&this._shortWeekdaysParse[n].test(e))return n;if(r&&t==="dd"&&this._minWeekdaysParse[n].test(e))return n;if(!r&&this._weekdaysParse[n].test(e))return n}}function $H(e){if(!this.isValid())return e!=null?this:NaN;var t=_l(this,"Day");return e!=null?(e=EH(e,this.localeData()),this.add(e-t,"d")):t}function FH(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function BH(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=kH(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function zH(e){return this._weekdaysParseExact?(Le(this,"_weekdaysRegex")||Bx.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(Le(this,"_weekdaysRegex")||(this._weekdaysRegex=TH),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function UH(e){return this._weekdaysParseExact?(Le(this,"_weekdaysRegex")||Bx.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(Le(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=_H),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function VH(e){return this._weekdaysParseExact?(Le(this,"_weekdaysRegex")||Bx.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(Le(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=MH),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Bx(){function e(u,h){return h.length-u.length}var t=[],r=[],n=[],a=[],i,o,c,l,d;for(i=0;i<7;i++)o=zs([2e3,1]).day(i),c=sn(this.weekdaysMin(o,"")),l=sn(this.weekdaysShort(o,"")),d=sn(this.weekdays(o,"")),t.push(c),r.push(l),n.push(d),a.push(c),a.push(l),a.push(d);t.sort(e),r.sort(e),n.sort(e),a.sort(e),this._weekdaysRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function zx(){return this.hours()%12||12}function HH(){return this.hours()||24}ve("H",["HH",2],0,"hour");ve("h",["hh",2],0,zx);ve("k",["kk",2],0,HH);ve("hmm",0,0,function(){return""+zx.apply(this)+Ls(this.minutes(),2)});ve("hmmss",0,0,function(){return""+zx.apply(this)+Ls(this.minutes(),2)+Ls(this.seconds(),2)});ve("Hmm",0,0,function(){return""+this.hours()+Ls(this.minutes(),2)});ve("Hmmss",0,0,function(){return""+this.hours()+Ls(this.minutes(),2)+Ls(this.seconds(),2)});function ZN(e,t){ve(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}ZN("a",!0);ZN("A",!1);function eC(e,t){return t._meridiemParse}le("a",eC);le("A",eC);le("H",rt,Ix);le("h",rt,Ji);le("k",rt,Ji);le("HH",rt,Tr);le("hh",rt,Tr);le("kk",rt,Tr);le("hmm",UN);le("hmmss",VN);le("Hmm",UN);le("Hmmss",VN);We(["H","HH"],Dt);We(["k","kk"],function(e,t,r){var n=Te(e);t[Dt]=n===24?0:n});We(["a","A"],function(e,t,r){r._isPm=r._locale.isPM(e),r._meridiem=e});We(["h","hh"],function(e,t,r){t[Dt]=Te(e),we(r).bigHour=!0});We("hmm",function(e,t,r){var n=e.length-2;t[Dt]=Te(e.substr(0,n)),t[us]=Te(e.substr(n)),we(r).bigHour=!0});We("hmmss",function(e,t,r){var n=e.length-4,a=e.length-2;t[Dt]=Te(e.substr(0,n)),t[us]=Te(e.substr(n,2)),t[tn]=Te(e.substr(a)),we(r).bigHour=!0});We("Hmm",function(e,t,r){var n=e.length-2;t[Dt]=Te(e.substr(0,n)),t[us]=Te(e.substr(n))});We("Hmmss",function(e,t,r){var n=e.length-4,a=e.length-2;t[Dt]=Te(e.substr(0,n)),t[us]=Te(e.substr(n,2)),t[tn]=Te(e.substr(a))});function WH(e){return(e+"").toLowerCase().charAt(0)==="p"}var YH=/[ap]\.?m?\.?/i,qH=Zi("Hours",!0);function GH(e,t,r){return e>11?r?"pm":"PM":r?"am":"AM"}var tC={calendar:LV,longDateFormat:BV,invalidDate:UV,ordinal:HV,dayOfMonthOrdinalParse:WV,relativeTime:qV,months:cH,monthsShort:YN,week:jH,weekdays:DH,weekdaysMin:AH,weekdaysShort:JN,meridiemParse:YH},at={},No={},Rl;function KH(e,t){var r,n=Math.min(e.length,t.length);for(r=0;r<n;r+=1)if(e[r]!==t[r])return r;return n}function Eb(e){return e&&e.toLowerCase().replace("_","-")}function QH(e){for(var t=0,r,n,a,i;t<e.length;){for(i=Eb(e[t]).split("-"),r=i.length,n=Eb(e[t+1]),n=n?n.split("-"):null;r>0;){if(a=wh(i.slice(0,r).join("-")),a)return a;if(n&&n.length>=r&&KH(i,n)>=r-1)break;r--}t++}return Rl}function XH(e){return!!(e&&e.match("^[^/\\\\]*$"))}function wh(e){var t=null,r;if(at[e]===void 0&&typeof Cd<"u"&&Cd&&Cd.exports&&XH(e))try{t=Rl._abbr,r=require,r("./locale/"+e),Un(t)}catch{at[e]=null}return at[e]}function Un(e,t){var r;return e&&(cr(t)?r=pn(e):r=Ux(e,t),r?Rl=r:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),Rl._abbr}function Ux(e,t){if(t!==null){var r,n=tC;if(t.abbr=e,at[e]!=null)$N("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=at[e]._config;else if(t.parentLocale!=null)if(at[t.parentLocale]!=null)n=at[t.parentLocale]._config;else if(r=wh(t.parentLocale),r!=null)n=r._config;else return No[t.parentLocale]||(No[t.parentLocale]=[]),No[t.parentLocale].push({name:e,config:t}),null;return at[e]=new Mx(vp(n,t)),No[e]&&No[e].forEach(function(a){Ux(a.name,a.config)}),Un(e),at[e]}else return delete at[e],null}function JH(e,t){if(t!=null){var r,n,a=tC;at[e]!=null&&at[e].parentLocale!=null?at[e].set(vp(at[e]._config,t)):(n=wh(e),n!=null&&(a=n._config),t=vp(a,t),n==null&&(t.abbr=e),r=new Mx(t),r.parentLocale=at[e],at[e]=r),Un(e)}else at[e]!=null&&(at[e].parentLocale!=null?(at[e]=at[e].parentLocale,e===Un()&&Un(e)):at[e]!=null&&delete at[e]);return at[e]}function pn(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Rl;if(!gs(e)){if(t=wh(e),t)return t;e=[e]}return QH(e)}function ZH(){return yp(at)}function Vx(e){var t,r=e._a;return r&&we(e).overflow===-2&&(t=r[en]<0||r[en]>11?en:r[Ds]<1||r[Ds]>$x(r[qt],r[en])?Ds:r[Dt]<0||r[Dt]>24||r[Dt]===24&&(r[us]!==0||r[tn]!==0||r[pa]!==0)?Dt:r[us]<0||r[us]>59?us:r[tn]<0||r[tn]>59?tn:r[pa]<0||r[pa]>999?pa:-1,we(e)._overflowDayOfYear&&(t<qt||t>Ds)&&(t=Ds),we(e)._overflowWeeks&&t===-1&&(t=sH),we(e)._overflowWeekday&&t===-1&&(t=nH),we(e).overflow=t),e}var eW=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,tW=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,rW=/Z|[+-]\d\d(?::?\d\d)?/,$c=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],$f=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],sW=/^\/?Date\((-?\d+)/i,nW=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,aW={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function rC(e){var t,r,n=e._i,a=eW.exec(n)||tW.exec(n),i,o,c,l,d=$c.length,u=$f.length;if(a){for(we(e).iso=!0,t=0,r=d;t<r;t++)if($c[t][1].exec(a[1])){o=$c[t][0],i=$c[t][2]!==!1;break}if(o==null){e._isValid=!1;return}if(a[3]){for(t=0,r=u;t<r;t++)if($f[t][1].exec(a[3])){c=(a[2]||" ")+$f[t][0];break}if(c==null){e._isValid=!1;return}}if(!i&&c!=null){e._isValid=!1;return}if(a[4])if(rW.exec(a[4]))l="Z";else{e._isValid=!1;return}e._f=o+(c||"")+(l||""),Wx(e)}else e._isValid=!1}function iW(e,t,r,n,a,i){var o=[oW(e),YN.indexOf(t),parseInt(r,10),parseInt(n,10),parseInt(a,10)];return i&&o.push(parseInt(i,10)),o}function oW(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function lW(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function cW(e,t,r){if(e){var n=JN.indexOf(e),a=new Date(t[0],t[1],t[2]).getDay();if(n!==a)return we(r).weekdayMismatch=!0,r._isValid=!1,!1}return!0}function dW(e,t,r){if(e)return aW[e];if(t)return 0;var n=parseInt(r,10),a=n%100,i=(n-a)/100;return i*60+a}function sC(e){var t=nW.exec(lW(e._i)),r;if(t){if(r=iW(t[4],t[3],t[2],t[5],t[6],t[7]),!cW(t[1],r,e))return;e._a=r,e._tzm=dW(t[8],t[9],t[10]),e._d=Ml.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),we(e).rfc2822=!0}else e._isValid=!1}function uW(e){var t=sW.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}if(rC(e),e._isValid===!1)delete e._isValid;else return;if(sC(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:re.createFromInputFallback(e)}re.createFromInputFallback=Jr("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function Ha(e,t,r){return e??t??r}function hW(e){var t=new Date(re.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Hx(e){var t,r,n=[],a,i,o;if(!e._d){for(a=hW(e),e._w&&e._a[Ds]==null&&e._a[en]==null&&fW(e),e._dayOfYear!=null&&(o=Ha(e._a[qt],a[qt]),(e._dayOfYear>Wo(o)||e._dayOfYear===0)&&(we(e)._overflowDayOfYear=!0),r=Ml(o,0,e._dayOfYear),e._a[en]=r.getUTCMonth(),e._a[Ds]=r.getUTCDate()),t=0;t<3&&e._a[t]==null;++t)e._a[t]=n[t]=a[t];for(;t<7;t++)e._a[t]=n[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[Dt]===24&&e._a[us]===0&&e._a[tn]===0&&e._a[pa]===0&&(e._nextDay=!0,e._a[Dt]=0),e._d=(e._useUTC?Ml:yH).apply(null,n),i=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Dt]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==i&&(we(e).weekdayMismatch=!0)}}function fW(e){var t,r,n,a,i,o,c,l,d;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(i=1,o=4,r=Ha(t.GG,e._a[qt],Ol(tt(),1,4).year),n=Ha(t.W,1),a=Ha(t.E,1),(a<1||a>7)&&(l=!0)):(i=e._locale._week.dow,o=e._locale._week.doy,d=Ol(tt(),i,o),r=Ha(t.gg,e._a[qt],d.year),n=Ha(t.w,d.week),t.d!=null?(a=t.d,(a<0||a>6)&&(l=!0)):t.e!=null?(a=t.e+i,(t.e<0||t.e>6)&&(l=!0)):a=i),n<1||n>nn(r,i,o)?we(e)._overflowWeeks=!0:l!=null?we(e)._overflowWeekday=!0:(c=XN(r,n,a,i,o),e._a[qt]=c.year,e._dayOfYear=c.dayOfYear)}re.ISO_8601=function(){};re.RFC_2822=function(){};function Wx(e){if(e._f===re.ISO_8601){rC(e);return}if(e._f===re.RFC_2822){sC(e);return}e._a=[],we(e).empty=!0;var t=""+e._i,r,n,a,i,o,c=t.length,l=0,d,u;for(a=FN(e._f,e._locale).match(Ox)||[],u=a.length,r=0;r<u;r++)i=a[r],n=(t.match(eH(i,e))||[])[0],n&&(o=t.substr(0,t.indexOf(n)),o.length>0&&we(e).unusedInput.push(o),t=t.slice(t.indexOf(n)+n.length),l+=n.length),ui[i]?(n?we(e).empty=!1:we(e).unusedTokens.push(i),rH(i,n,e)):e._strict&&!n&&we(e).unusedTokens.push(i);we(e).charsLeftOver=c-l,t.length>0&&we(e).unusedInput.push(t),e._a[Dt]<=12&&we(e).bigHour===!0&&e._a[Dt]>0&&(we(e).bigHour=void 0),we(e).parsedDateParts=e._a.slice(0),we(e).meridiem=e._meridiem,e._a[Dt]=mW(e._locale,e._a[Dt],e._meridiem),d=we(e).era,d!==null&&(e._a[qt]=e._locale.erasConvertYear(d,e._a[qt])),Hx(e),Vx(e)}function mW(e,t,r){var n;return r==null?t:e.meridiemHour!=null?e.meridiemHour(t,r):(e.isPM!=null&&(n=e.isPM(r),n&&t<12&&(t+=12),!n&&t===12&&(t=0)),t)}function pW(e){var t,r,n,a,i,o,c=!1,l=e._f.length;if(l===0){we(e).invalidFormat=!0,e._d=new Date(NaN);return}for(a=0;a<l;a++)i=0,o=!1,t=_x({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[a],Wx(t),Tx(t)&&(o=!0),i+=we(t).charsLeftOver,i+=we(t).unusedTokens.length*10,we(t).score=i,c?i<n&&(n=i,r=t):(n==null||i<n||o)&&(n=i,r=t,o&&(c=!0));Tn(e,r||t)}function gW(e){if(!e._d){var t=Rx(e._i),r=t.day===void 0?t.date:t.day;e._a=LN([t.year,t.month,r,t.hour,t.minute,t.second,t.millisecond],function(n){return n&&parseInt(n,10)}),Hx(e)}}function xW(e){var t=new nc(Vx(nC(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function nC(e){var t=e._i,r=e._f;return e._locale=e._locale||pn(e._l),t===null||r===void 0&&t===""?ph({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),xs(t)?new nc(Vx(t)):(sc(t)?e._d=t:gs(r)?pW(e):r?Wx(e):vW(e),Tx(e)||(e._d=null),e))}function vW(e){var t=e._i;cr(t)?e._d=new Date(re.now()):sc(t)?e._d=new Date(t.valueOf()):typeof t=="string"?uW(e):gs(t)?(e._a=LN(t.slice(0),function(r){return parseInt(r,10)}),Hx(e)):ja(t)?gW(e):hn(t)?e._d=new Date(t):re.createFromInputFallback(e)}function aC(e,t,r,n,a){var i={};return(t===!0||t===!1)&&(n=t,t=void 0),(r===!0||r===!1)&&(n=r,r=void 0),(ja(e)&&Ax(e)||gs(e)&&e.length===0)&&(e=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=a,i._l=r,i._i=e,i._f=t,i._strict=n,xW(i)}function tt(e,t,r,n){return aC(e,t,r,n,!1)}var yW=Jr("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=tt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:ph()}),bW=Jr("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=tt.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:ph()});function iC(e,t){var r,n;if(t.length===1&&gs(t[0])&&(t=t[0]),!t.length)return tt();for(r=t[0],n=1;n<t.length;++n)(!t[n].isValid()||t[n][e](r))&&(r=t[n]);return r}function jW(){var e=[].slice.call(arguments,0);return iC("isBefore",e)}function wW(){var e=[].slice.call(arguments,0);return iC("isAfter",e)}var NW=function(){return Date.now?Date.now():+new Date},Co=["year","quarter","month","week","day","hour","minute","second","millisecond"];function CW(e){var t,r=!1,n,a=Co.length;for(t in e)if(Le(e,t)&&!(gt.call(Co,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return!1;for(n=0;n<a;++n)if(e[Co[n]]){if(r)return!1;parseFloat(e[Co[n]])!==Te(e[Co[n]])&&(r=!0)}return!0}function SW(){return this._isValid}function EW(){return bs(NaN)}function Nh(e){var t=Rx(e),r=t.year||0,n=t.quarter||0,a=t.month||0,i=t.week||t.isoWeek||0,o=t.day||0,c=t.hour||0,l=t.minute||0,d=t.second||0,u=t.millisecond||0;this._isValid=CW(t),this._milliseconds=+u+d*1e3+l*6e4+c*1e3*60*60,this._days=+o+i*7,this._months=+a+n*3+r*12,this._data={},this._locale=pn(),this._bubble()}function gd(e){return e instanceof Nh}function jp(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function kW(e,t,r){var n=Math.min(e.length,t.length),a=Math.abs(e.length-t.length),i=0,o;for(o=0;o<n;o++)Te(e[o])!==Te(t[o])&&i++;return i+a}function oC(e,t){ve(e,0,0,function(){var r=this.utcOffset(),n="+";return r<0&&(r=-r,n="-"),n+Ls(~~(r/60),2)+t+Ls(~~r%60,2)})}oC("Z",":");oC("ZZ","");le("Z",bh);le("ZZ",bh);We(["Z","ZZ"],function(e,t,r){r._useUTC=!0,r._tzm=Yx(bh,e)});var DW=/([\+\-]|\d\d)/gi;function Yx(e,t){var r=(t||"").match(e),n,a,i;return r===null?null:(n=r[r.length-1]||[],a=(n+"").match(DW)||["-",0,0],i=+(a[1]*60)+Te(a[2]),i===0?0:a[0]==="+"?i:-i)}function qx(e,t){var r,n;return t._isUTC?(r=t.clone(),n=(xs(e)||sc(e)?e.valueOf():tt(e).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+n),re.updateOffset(r,!1),r):tt(e).local()}function wp(e){return-Math.round(e._d.getTimezoneOffset())}re.updateOffset=function(){};function AW(e,t,r){var n=this._offset||0,a;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=Yx(bh,e),e===null)return this}else Math.abs(e)<16&&!r&&(e=e*60);return!this._isUTC&&t&&(a=wp(this)),this._offset=e,this._isUTC=!0,a!=null&&this.add(a,"m"),n!==e&&(!t||this._changeInProgress?dC(this,bs(e-n,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,re.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?n:wp(this)}function TW(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function _W(e){return this.utcOffset(0,e)}function MW(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(wp(this),"m")),this}function OW(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=Yx(JV,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function RW(e){return this.isValid()?(e=e?tt(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function PW(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function LW(){if(!cr(this._isDSTShifted))return this._isDSTShifted;var e={},t;return _x(e,this),e=nC(e),e._a?(t=e._isUTC?zs(e._a):tt(e._a),this._isDSTShifted=this.isValid()&&kW(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function IW(){return this.isValid()?!this._isUTC:!1}function $W(){return this.isValid()?this._isUTC:!1}function lC(){return this.isValid()?this._isUTC&&this._offset===0:!1}var FW=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,BW=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function bs(e,t){var r=e,n=null,a,i,o;return gd(e)?r={ms:e._milliseconds,d:e._days,M:e._months}:hn(e)||!isNaN(+e)?(r={},t?r[t]=+e:r.milliseconds=+e):(n=FW.exec(e))?(a=n[1]==="-"?-1:1,r={y:0,d:Te(n[Ds])*a,h:Te(n[Dt])*a,m:Te(n[us])*a,s:Te(n[tn])*a,ms:Te(jp(n[pa]*1e3))*a}):(n=BW.exec(e))?(a=n[1]==="-"?-1:1,r={y:na(n[2],a),M:na(n[3],a),w:na(n[4],a),d:na(n[5],a),h:na(n[6],a),m:na(n[7],a),s:na(n[8],a)}):r==null?r={}:typeof r=="object"&&("from"in r||"to"in r)&&(o=zW(tt(r.from),tt(r.to)),r={},r.ms=o.milliseconds,r.M=o.months),i=new Nh(r),gd(e)&&Le(e,"_locale")&&(i._locale=e._locale),gd(e)&&Le(e,"_isValid")&&(i._isValid=e._isValid),i}bs.fn=Nh.prototype;bs.invalid=EW;function na(e,t){var r=e&&parseFloat(e.replace(",","."));return(isNaN(r)?0:r)*t}function kb(e,t){var r={};return r.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(r.months,"M").isAfter(t)&&--r.months,r.milliseconds=+t-+e.clone().add(r.months,"M"),r}function zW(e,t){var r;return e.isValid()&&t.isValid()?(t=qx(t,e),e.isBefore(t)?r=kb(e,t):(r=kb(t,e),r.milliseconds=-r.milliseconds,r.months=-r.months),r):{milliseconds:0,months:0}}function cC(e,t){return function(r,n){var a,i;return n!==null&&!isNaN(+n)&&($N(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=r,r=n,n=i),a=bs(r,n),dC(this,a,e),this}}function dC(e,t,r,n){var a=t._milliseconds,i=jp(t._days),o=jp(t._months);e.isValid()&&(n=n??!0,o&&GN(e,_l(e,"Month")+o*r),i&&WN(e,"Date",_l(e,"Date")+i*r),a&&e._d.setTime(e._d.valueOf()+a*r),n&&re.updateOffset(e,i||o))}var UW=cC(1,"add"),VW=cC(-1,"subtract");function uC(e){return typeof e=="string"||e instanceof String}function HW(e){return xs(e)||sc(e)||uC(e)||hn(e)||YW(e)||WW(e)||e===null||e===void 0}function WW(e){var t=ja(e)&&!Ax(e),r=!1,n=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],a,i,o=n.length;for(a=0;a<o;a+=1)i=n[a],r=r||Le(e,i);return t&&r}function YW(e){var t=gs(e),r=!1;return t&&(r=e.filter(function(n){return!hn(n)&&uC(e)}).length===0),t&&r}function qW(e){var t=ja(e)&&!Ax(e),r=!1,n=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],a,i;for(a=0;a<n.length;a+=1)i=n[a],r=r||Le(e,i);return t&&r}function GW(e,t){var r=e.diff(t,"days",!0);return r<-6?"sameElse":r<-1?"lastWeek":r<0?"lastDay":r<1?"sameDay":r<2?"nextDay":r<7?"nextWeek":"sameElse"}function KW(e,t){arguments.length===1&&(arguments[0]?HW(arguments[0])?(e=arguments[0],t=void 0):qW(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var r=e||tt(),n=qx(r,this).startOf("day"),a=re.calendarFormat(this,n)||"sameElse",i=t&&(Us(t[a])?t[a].call(this,r):t[a]);return this.format(i||this.localeData().calendar(a,this,tt(r)))}function QW(){return new nc(this)}function XW(e,t){var r=xs(e)?e:tt(e);return this.isValid()&&r.isValid()?(t=Zr(t)||"millisecond",t==="millisecond"?this.valueOf()>r.valueOf():r.valueOf()<this.clone().startOf(t).valueOf()):!1}function JW(e,t){var r=xs(e)?e:tt(e);return this.isValid()&&r.isValid()?(t=Zr(t)||"millisecond",t==="millisecond"?this.valueOf()<r.valueOf():this.clone().endOf(t).valueOf()<r.valueOf()):!1}function ZW(e,t,r,n){var a=xs(e)?e:tt(e),i=xs(t)?t:tt(t);return this.isValid()&&a.isValid()&&i.isValid()?(n=n||"()",(n[0]==="("?this.isAfter(a,r):!this.isBefore(a,r))&&(n[1]===")"?this.isBefore(i,r):!this.isAfter(i,r))):!1}function eY(e,t){var r=xs(e)?e:tt(e),n;return this.isValid()&&r.isValid()?(t=Zr(t)||"millisecond",t==="millisecond"?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf())):!1}function tY(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function rY(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function sY(e,t,r){var n,a,i;if(!this.isValid())return NaN;if(n=qx(e,this),!n.isValid())return NaN;switch(a=(n.utcOffset()-this.utcOffset())*6e4,t=Zr(t),t){case"year":i=xd(this,n)/12;break;case"month":i=xd(this,n);break;case"quarter":i=xd(this,n)/3;break;case"second":i=(this-n)/1e3;break;case"minute":i=(this-n)/6e4;break;case"hour":i=(this-n)/36e5;break;case"day":i=(this-n-a)/864e5;break;case"week":i=(this-n-a)/6048e5;break;default:i=this-n}return r?i:zr(i)}function xd(e,t){if(e.date()<t.date())return-xd(t,e);var r=(t.year()-e.year())*12+(t.month()-e.month()),n=e.clone().add(r,"months"),a,i;return t-n<0?(a=e.clone().add(r-1,"months"),i=(t-n)/(n-a)):(a=e.clone().add(r+1,"months"),i=(t-n)/(a-n)),-(r+i)||0}re.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";re.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function nY(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function aY(e){if(!this.isValid())return null;var t=e!==!0,r=t?this.clone().utc():this;return r.year()<0||r.year()>9999?pd(r,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):Us(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",pd(r,"Z")):pd(r,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function iY(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",r,n,a,i;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z"),r="["+e+'("]',n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",a="-MM-DD[T]HH:mm:ss.SSS",i=t+'[")]',this.format(r+n+a+i)}function oY(e){e||(e=this.isUtc()?re.defaultFormatUtc:re.defaultFormat);var t=pd(this,e);return this.localeData().postformat(t)}function lY(e,t){return this.isValid()&&(xs(e)&&e.isValid()||tt(e).isValid())?bs({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function cY(e){return this.from(tt(),e)}function dY(e,t){return this.isValid()&&(xs(e)&&e.isValid()||tt(e).isValid())?bs({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function uY(e){return this.to(tt(),e)}function hC(e){var t;return e===void 0?this._locale._abbr:(t=pn(e),t!=null&&(this._locale=t),this)}var fC=Jr("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function mC(){return this._locale}var uu=1e3,hi=60*uu,hu=60*hi,pC=(365*400+97)*24*hu;function fi(e,t){return(e%t+t)%t}function gC(e,t,r){return e<100&&e>=0?new Date(e+400,t,r)-pC:new Date(e,t,r).valueOf()}function xC(e,t,r){return e<100&&e>=0?Date.UTC(e+400,t,r)-pC:Date.UTC(e,t,r)}function hY(e){var t,r;if(e=Zr(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(r=this._isUTC?xC:gC,e){case"year":t=r(this.year(),0,1);break;case"quarter":t=r(this.year(),this.month()-this.month()%3,1);break;case"month":t=r(this.year(),this.month(),1);break;case"week":t=r(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=r(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=fi(t+(this._isUTC?0:this.utcOffset()*hi),hu);break;case"minute":t=this._d.valueOf(),t-=fi(t,hi);break;case"second":t=this._d.valueOf(),t-=fi(t,uu);break}return this._d.setTime(t),re.updateOffset(this,!0),this}function fY(e){var t,r;if(e=Zr(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(r=this._isUTC?xC:gC,e){case"year":t=r(this.year()+1,0,1)-1;break;case"quarter":t=r(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=r(this.year(),this.month()+1,1)-1;break;case"week":t=r(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=r(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=hu-fi(t+(this._isUTC?0:this.utcOffset()*hi),hu)-1;break;case"minute":t=this._d.valueOf(),t+=hi-fi(t,hi)-1;break;case"second":t=this._d.valueOf(),t+=uu-fi(t,uu)-1;break}return this._d.setTime(t),re.updateOffset(this,!0),this}function mY(){return this._d.valueOf()-(this._offset||0)*6e4}function pY(){return Math.floor(this.valueOf()/1e3)}function gY(){return new Date(this.valueOf())}function xY(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function vY(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function yY(){return this.isValid()?this.toISOString():null}function bY(){return Tx(this)}function jY(){return Tn({},we(this))}function wY(){return we(this).overflow}function NY(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}ve("N",0,0,"eraAbbr");ve("NN",0,0,"eraAbbr");ve("NNN",0,0,"eraAbbr");ve("NNNN",0,0,"eraName");ve("NNNNN",0,0,"eraNarrow");ve("y",["y",1],"yo","eraYear");ve("y",["yy",2],0,"eraYear");ve("y",["yyy",3],0,"eraYear");ve("y",["yyyy",4],0,"eraYear");le("N",Gx);le("NN",Gx);le("NNN",Gx);le("NNNN",RY);le("NNNNN",PY);We(["N","NN","NNN","NNNN","NNNNN"],function(e,t,r,n){var a=r._locale.erasParse(e,n,r._strict);a?we(r).era=a:we(r).invalidEra=e});le("y",Xi);le("yy",Xi);le("yyy",Xi);le("yyyy",Xi);le("yo",LY);We(["y","yy","yyy","yyyy"],qt);We(["yo"],function(e,t,r,n){var a;r._locale._eraYearOrdinalRegex&&(a=e.match(r._locale._eraYearOrdinalRegex)),r._locale.eraYearOrdinalParse?t[qt]=r._locale.eraYearOrdinalParse(e,a):t[qt]=parseInt(e,10)});function CY(e,t){var r,n,a,i=this._eras||pn("en")._eras;for(r=0,n=i.length;r<n;++r){switch(typeof i[r].since){case"string":a=re(i[r].since).startOf("day"),i[r].since=a.valueOf();break}switch(typeof i[r].until){case"undefined":i[r].until=1/0;break;case"string":a=re(i[r].until).startOf("day").valueOf(),i[r].until=a.valueOf();break}}return i}function SY(e,t,r){var n,a,i=this.eras(),o,c,l;for(e=e.toUpperCase(),n=0,a=i.length;n<a;++n)if(o=i[n].name.toUpperCase(),c=i[n].abbr.toUpperCase(),l=i[n].narrow.toUpperCase(),r)switch(t){case"N":case"NN":case"NNN":if(c===e)return i[n];break;case"NNNN":if(o===e)return i[n];break;case"NNNNN":if(l===e)return i[n];break}else if([o,c,l].indexOf(e)>=0)return i[n]}function EY(e,t){var r=e.since<=e.until?1:-1;return t===void 0?re(e.since).year():re(e.since).year()+(t-e.offset)*r}function kY(){var e,t,r,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e)if(r=this.clone().startOf("day").valueOf(),n[e].since<=r&&r<=n[e].until||n[e].until<=r&&r<=n[e].since)return n[e].name;return""}function DY(){var e,t,r,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e)if(r=this.clone().startOf("day").valueOf(),n[e].since<=r&&r<=n[e].until||n[e].until<=r&&r<=n[e].since)return n[e].narrow;return""}function AY(){var e,t,r,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e)if(r=this.clone().startOf("day").valueOf(),n[e].since<=r&&r<=n[e].until||n[e].until<=r&&r<=n[e].since)return n[e].abbr;return""}function TY(){var e,t,r,n,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e)if(r=a[e].since<=a[e].until?1:-1,n=this.clone().startOf("day").valueOf(),a[e].since<=n&&n<=a[e].until||a[e].until<=n&&n<=a[e].since)return(this.year()-re(a[e].since).year())*r+a[e].offset;return this.year()}function _Y(e){return Le(this,"_erasNameRegex")||Kx.call(this),e?this._erasNameRegex:this._erasRegex}function MY(e){return Le(this,"_erasAbbrRegex")||Kx.call(this),e?this._erasAbbrRegex:this._erasRegex}function OY(e){return Le(this,"_erasNarrowRegex")||Kx.call(this),e?this._erasNarrowRegex:this._erasRegex}function Gx(e,t){return t.erasAbbrRegex(e)}function RY(e,t){return t.erasNameRegex(e)}function PY(e,t){return t.erasNarrowRegex(e)}function LY(e,t){return t._eraYearOrdinalRegex||Xi}function Kx(){var e=[],t=[],r=[],n=[],a,i,o,c,l,d=this.eras();for(a=0,i=d.length;a<i;++a)o=sn(d[a].name),c=sn(d[a].abbr),l=sn(d[a].narrow),t.push(o),e.push(c),r.push(l),n.push(o),n.push(c),n.push(l);this._erasRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+r.join("|")+")","i")}ve(0,["gg",2],0,function(){return this.weekYear()%100});ve(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Ch(e,t){ve(0,[e,e.length],0,t)}Ch("gggg","weekYear");Ch("ggggg","weekYear");Ch("GGGG","isoWeekYear");Ch("GGGGG","isoWeekYear");le("G",yh);le("g",yh);le("GG",rt,Tr);le("gg",rt,Tr);le("GGGG",Lx,Px);le("gggg",Lx,Px);le("GGGGG",vh,gh);le("ggggg",vh,gh);ic(["gggg","ggggg","GGGG","GGGGG"],function(e,t,r,n){t[n.substr(0,2)]=Te(e)});ic(["gg","GG"],function(e,t,r,n){t[n]=re.parseTwoDigitYear(e)});function IY(e){return vC.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function $Y(e){return vC.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function FY(){return nn(this.year(),1,4)}function BY(){return nn(this.isoWeekYear(),1,4)}function zY(){var e=this.localeData()._week;return nn(this.year(),e.dow,e.doy)}function UY(){var e=this.localeData()._week;return nn(this.weekYear(),e.dow,e.doy)}function vC(e,t,r,n,a){var i;return e==null?Ol(this,n,a).year:(i=nn(e,n,a),t>i&&(t=i),VY.call(this,e,t,r,n,a))}function VY(e,t,r,n,a){var i=XN(e,t,r,n,a),o=Ml(i.year,0,i.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}ve("Q",0,"Qo","quarter");le("Q",BN);We("Q",function(e,t){t[en]=(Te(e)-1)*3});function HY(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}ve("D",["DD",2],"Do","date");le("D",rt,Ji);le("DD",rt,Tr);le("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});We(["D","DD"],Ds);We("Do",function(e,t){t[Ds]=Te(e.match(rt)[0])});var yC=Zi("Date",!0);ve("DDD",["DDDD",3],"DDDo","dayOfYear");le("DDD",xh);le("DDDD",zN);We(["DDD","DDDD"],function(e,t,r){r._dayOfYear=Te(e)});function WY(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}ve("m",["mm",2],0,"minute");le("m",rt,Ix);le("mm",rt,Tr);We(["m","mm"],us);var YY=Zi("Minutes",!1);ve("s",["ss",2],0,"second");le("s",rt,Ix);le("ss",rt,Tr);We(["s","ss"],tn);var qY=Zi("Seconds",!1);ve("S",0,0,function(){return~~(this.millisecond()/100)});ve(0,["SS",2],0,function(){return~~(this.millisecond()/10)});ve(0,["SSS",3],0,"millisecond");ve(0,["SSSS",4],0,function(){return this.millisecond()*10});ve(0,["SSSSS",5],0,function(){return this.millisecond()*100});ve(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});ve(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});ve(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});ve(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});le("S",xh,BN);le("SS",xh,Tr);le("SSS",xh,zN);var _n,bC;for(_n="SSSS";_n.length<=9;_n+="S")le(_n,Xi);function GY(e,t){t[pa]=Te(("0."+e)*1e3)}for(_n="S";_n.length<=9;_n+="S")We(_n,GY);bC=Zi("Milliseconds",!1);ve("z",0,0,"zoneAbbr");ve("zz",0,0,"zoneName");function KY(){return this._isUTC?"UTC":""}function QY(){return this._isUTC?"Coordinated Universal Time":""}var te=nc.prototype;te.add=UW;te.calendar=KW;te.clone=QW;te.diff=sY;te.endOf=fY;te.format=oY;te.from=lY;te.fromNow=cY;te.to=dY;te.toNow=uY;te.get=iH;te.invalidAt=wY;te.isAfter=XW;te.isBefore=JW;te.isBetween=ZW;te.isSame=eY;te.isSameOrAfter=tY;te.isSameOrBefore=rY;te.isValid=bY;te.lang=fC;te.locale=hC;te.localeData=mC;te.max=bW;te.min=yW;te.parsingFlags=jY;te.set=oH;te.startOf=hY;te.subtract=VW;te.toArray=xY;te.toObject=vY;te.toDate=gY;te.toISOString=aY;te.inspect=iY;typeof Symbol<"u"&&Symbol.for!=null&&(te[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});te.toJSON=yY;te.toString=nY;te.unix=pY;te.valueOf=mY;te.creationData=NY;te.eraName=kY;te.eraNarrow=DY;te.eraAbbr=AY;te.eraYear=TY;te.year=HN;te.isLeapYear=aH;te.weekYear=IY;te.isoWeekYear=$Y;te.quarter=te.quarters=HY;te.month=KN;te.daysInMonth=gH;te.week=te.weeks=CH;te.isoWeek=te.isoWeeks=SH;te.weeksInYear=zY;te.weeksInWeekYear=UY;te.isoWeeksInYear=FY;te.isoWeeksInISOWeekYear=BY;te.date=yC;te.day=te.days=$H;te.weekday=FH;te.isoWeekday=BH;te.dayOfYear=WY;te.hour=te.hours=qH;te.minute=te.minutes=YY;te.second=te.seconds=qY;te.millisecond=te.milliseconds=bC;te.utcOffset=AW;te.utc=_W;te.local=MW;te.parseZone=OW;te.hasAlignedHourOffset=RW;te.isDST=PW;te.isLocal=IW;te.isUtcOffset=$W;te.isUtc=lC;te.isUTC=lC;te.zoneAbbr=KY;te.zoneName=QY;te.dates=Jr("dates accessor is deprecated. Use date instead.",yC);te.months=Jr("months accessor is deprecated. Use month instead",KN);te.years=Jr("years accessor is deprecated. Use year instead",HN);te.zone=Jr("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",TW);te.isDSTShifted=Jr("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",LW);function XY(e){return tt(e*1e3)}function JY(){return tt.apply(null,arguments).parseZone()}function jC(e){return e}var Ie=Mx.prototype;Ie.calendar=IV;Ie.longDateFormat=zV;Ie.invalidDate=VV;Ie.ordinal=YV;Ie.preparse=jC;Ie.postformat=jC;Ie.relativeTime=GV;Ie.pastFuture=KV;Ie.set=PV;Ie.eras=CY;Ie.erasParse=SY;Ie.erasConvertYear=EY;Ie.erasAbbrRegex=MY;Ie.erasNameRegex=_Y;Ie.erasNarrowRegex=OY;Ie.months=hH;Ie.monthsShort=fH;Ie.monthsParse=pH;Ie.monthsRegex=vH;Ie.monthsShortRegex=xH;Ie.week=bH;Ie.firstDayOfYear=NH;Ie.firstDayOfWeek=wH;Ie.weekdays=OH;Ie.weekdaysMin=PH;Ie.weekdaysShort=RH;Ie.weekdaysParse=IH;Ie.weekdaysRegex=zH;Ie.weekdaysShortRegex=UH;Ie.weekdaysMinRegex=VH;Ie.isPM=WH;Ie.meridiem=GH;function fu(e,t,r,n){var a=pn(),i=zs().set(n,t);return a[r](i,e)}function wC(e,t,r){if(hn(e)&&(t=e,e=void 0),e=e||"",t!=null)return fu(e,t,r,"month");var n,a=[];for(n=0;n<12;n++)a[n]=fu(e,n,r,"month");return a}function Qx(e,t,r,n){typeof e=="boolean"?(hn(t)&&(r=t,t=void 0),t=t||""):(t=e,r=t,e=!1,hn(t)&&(r=t,t=void 0),t=t||"");var a=pn(),i=e?a._week.dow:0,o,c=[];if(r!=null)return fu(t,(r+i)%7,n,"day");for(o=0;o<7;o++)c[o]=fu(t,(o+i)%7,n,"day");return c}function ZY(e,t){return wC(e,t,"months")}function eq(e,t){return wC(e,t,"monthsShort")}function tq(e,t,r){return Qx(e,t,r,"weekdays")}function rq(e,t,r){return Qx(e,t,r,"weekdaysShort")}function sq(e,t,r){return Qx(e,t,r,"weekdaysMin")}Un("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,r=Te(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+r}});re.lang=Jr("moment.lang is deprecated. Use moment.locale instead.",Un);re.langData=Jr("moment.langData is deprecated. Use moment.localeData instead.",pn);var qs=Math.abs;function nq(){var e=this._data;return this._milliseconds=qs(this._milliseconds),this._days=qs(this._days),this._months=qs(this._months),e.milliseconds=qs(e.milliseconds),e.seconds=qs(e.seconds),e.minutes=qs(e.minutes),e.hours=qs(e.hours),e.months=qs(e.months),e.years=qs(e.years),this}function NC(e,t,r,n){var a=bs(t,r);return e._milliseconds+=n*a._milliseconds,e._days+=n*a._days,e._months+=n*a._months,e._bubble()}function aq(e,t){return NC(this,e,t,1)}function iq(e,t){return NC(this,e,t,-1)}function Db(e){return e<0?Math.floor(e):Math.ceil(e)}function oq(){var e=this._milliseconds,t=this._days,r=this._months,n=this._data,a,i,o,c,l;return e>=0&&t>=0&&r>=0||e<=0&&t<=0&&r<=0||(e+=Db(Np(r)+t)*864e5,t=0,r=0),n.milliseconds=e%1e3,a=zr(e/1e3),n.seconds=a%60,i=zr(a/60),n.minutes=i%60,o=zr(i/60),n.hours=o%24,t+=zr(o/24),l=zr(CC(t)),r+=l,t-=Db(Np(l)),c=zr(r/12),r%=12,n.days=t,n.months=r,n.years=c,this}function CC(e){return e*4800/146097}function Np(e){return e*146097/4800}function lq(e){if(!this.isValid())return NaN;var t,r,n=this._milliseconds;if(e=Zr(e),e==="month"||e==="quarter"||e==="year")switch(t=this._days+n/864e5,r=this._months+CC(t),e){case"month":return r;case"quarter":return r/3;case"year":return r/12}else switch(t=this._days+Math.round(Np(this._months)),e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return t*24+n/36e5;case"minute":return t*1440+n/6e4;case"second":return t*86400+n/1e3;case"millisecond":return Math.floor(t*864e5)+n;default:throw new Error("Unknown unit "+e)}}function gn(e){return function(){return this.as(e)}}var SC=gn("ms"),cq=gn("s"),dq=gn("m"),uq=gn("h"),hq=gn("d"),fq=gn("w"),mq=gn("M"),pq=gn("Q"),gq=gn("y"),xq=SC;function vq(){return bs(this)}function yq(e){return e=Zr(e),this.isValid()?this[e+"s"]():NaN}function Fa(e){return function(){return this.isValid()?this._data[e]:NaN}}var bq=Fa("milliseconds"),jq=Fa("seconds"),wq=Fa("minutes"),Nq=Fa("hours"),Cq=Fa("days"),Sq=Fa("months"),Eq=Fa("years");function kq(){return zr(this.days()/7)}var Qs=Math.round,si={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function Dq(e,t,r,n,a){return a.relativeTime(t||1,!!r,e,n)}function Aq(e,t,r,n){var a=bs(e).abs(),i=Qs(a.as("s")),o=Qs(a.as("m")),c=Qs(a.as("h")),l=Qs(a.as("d")),d=Qs(a.as("M")),u=Qs(a.as("w")),h=Qs(a.as("y")),f=i<=r.ss&&["s",i]||i<r.s&&["ss",i]||o<=1&&["m"]||o<r.m&&["mm",o]||c<=1&&["h"]||c<r.h&&["hh",c]||l<=1&&["d"]||l<r.d&&["dd",l];return r.w!=null&&(f=f||u<=1&&["w"]||u<r.w&&["ww",u]),f=f||d<=1&&["M"]||d<r.M&&["MM",d]||h<=1&&["y"]||["yy",h],f[2]=t,f[3]=+e>0,f[4]=n,Dq.apply(null,f)}function Tq(e){return e===void 0?Qs:typeof e=="function"?(Qs=e,!0):!1}function _q(e,t){return si[e]===void 0?!1:t===void 0?si[e]:(si[e]=t,e==="s"&&(si.ss=t-1),!0)}function Mq(e,t){if(!this.isValid())return this.localeData().invalidDate();var r=!1,n=si,a,i;return typeof e=="object"&&(t=e,e=!1),typeof e=="boolean"&&(r=e),typeof t=="object"&&(n=Object.assign({},si,t),t.s!=null&&t.ss==null&&(n.ss=t.s-1)),a=this.localeData(),i=Aq(this,!r,n,a),r&&(i=a.pastFuture(+this,i)),a.postformat(i)}var Ff=Math.abs;function Ua(e){return(e>0)-(e<0)||+e}function Sh(){if(!this.isValid())return this.localeData().invalidDate();var e=Ff(this._milliseconds)/1e3,t=Ff(this._days),r=Ff(this._months),n,a,i,o,c=this.asSeconds(),l,d,u,h;return c?(n=zr(e/60),a=zr(n/60),e%=60,n%=60,i=zr(r/12),r%=12,o=e?e.toFixed(3).replace(/\.?0+$/,""):"",l=c<0?"-":"",d=Ua(this._months)!==Ua(c)?"-":"",u=Ua(this._days)!==Ua(c)?"-":"",h=Ua(this._milliseconds)!==Ua(c)?"-":"",l+"P"+(i?d+i+"Y":"")+(r?d+r+"M":"")+(t?u+t+"D":"")+(a||n||e?"T":"")+(a?h+a+"H":"")+(n?h+n+"M":"")+(e?h+o+"S":"")):"P0D"}var Oe=Nh.prototype;Oe.isValid=SW;Oe.abs=nq;Oe.add=aq;Oe.subtract=iq;Oe.as=lq;Oe.asMilliseconds=SC;Oe.asSeconds=cq;Oe.asMinutes=dq;Oe.asHours=uq;Oe.asDays=hq;Oe.asWeeks=fq;Oe.asMonths=mq;Oe.asQuarters=pq;Oe.asYears=gq;Oe.valueOf=xq;Oe._bubble=oq;Oe.clone=vq;Oe.get=yq;Oe.milliseconds=bq;Oe.seconds=jq;Oe.minutes=wq;Oe.hours=Nq;Oe.days=Cq;Oe.weeks=kq;Oe.months=Sq;Oe.years=Eq;Oe.humanize=Mq;Oe.toISOString=Sh;Oe.toString=Sh;Oe.toJSON=Sh;Oe.locale=hC;Oe.localeData=mC;Oe.toIsoString=Jr("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Sh);Oe.lang=fC;ve("X",0,0,"unix");ve("x",0,0,"valueOf");le("x",yh);le("X",ZV);We("X",function(e,t,r){r._d=new Date(parseFloat(e)*1e3)});We("x",function(e,t,r){r._d=new Date(Te(e))});//! moment.js
re.version="2.30.1";OV(tt);re.fn=te;re.min=jW;re.max=wW;re.now=NW;re.utc=zs;re.unix=XY;re.months=ZY;re.isDate=sc;re.locale=Un;re.invalid=ph;re.duration=bs;re.isMoment=xs;re.weekdays=tq;re.parseZone=JY;re.localeData=pn;re.isDuration=gd;re.monthsShort=eq;re.weekdaysMin=sq;re.defineLocale=Ux;re.updateLocale=JH;re.locales=ZH;re.weekdaysShort=rq;re.normalizeUnits=Zr;re.relativeTimeRounding=Tq;re.relativeTimeThreshold=_q;re.calendarFormat=GW;re.prototype=te;re.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const Oq=e=>{const t=()=>{e.onNavigate("TODAY")},r=()=>{e.onNavigate("PREV")},n=()=>{e.onNavigate("NEXT")},a={month:"Mes",week:"Semana",day:"Día",agenda:"Agenda"};return s.jsxs("div",{className:"rbc-toolbar",role:"toolbar","aria-label":"Controles del calendario",children:[s.jsxs("div",{className:"rbc-btn-group",role:"group","aria-label":"Navegación del calendario",children:[s.jsx("button",{type:"button",onClick:r,className:"rbc-btn","aria-label":"Mes anterior",children:s.jsx("span",{"aria-hidden":"true",children:"‹"})}),s.jsx("button",{type:"button",onClick:t,className:"rbc-btn rbc-active","aria-label":"Ir a hoy",children:"Hoy"}),s.jsx("button",{type:"button",onClick:n,className:"rbc-btn","aria-label":"Mes siguiente",children:s.jsx("span",{"aria-hidden":"true",children:"›"})})]}),s.jsx("span",{className:"rbc-toolbar-label",role:"heading","aria-level":2,children:e.label}),s.jsx("div",{className:"rbc-btn-group",role:"group","aria-label":"Vistas del calendario",children:e.views.map(i=>s.jsx("button",{type:"button",onClick:()=>e.onView(i),className:`rbc-btn ${e.view===i?"rbc-active":""}`,"aria-pressed":e.view===i,"aria-label":`Ver ${a[i]}`,children:a[i]},i))})]})},Rq=MV(re),Pq=()=>{const[e,t]=g.useState([]),[r,n]=g.useState(!0),[a,i]=g.useState(null),[o,c]=g.useState(null),[l,d]=g.useState(null),[u,h]=g.useState(!1),[f,x]=g.useState({date:"",location:"",notes:""}),[v,y]=g.useState(!1),[b,p]=g.useState(!1),[m,j]=g.useState({clientName:"",dateFrom:"",dateTo:"",status:"",consultationType:""}),[w,N]=g.useState([]),[C,S]=g.useState("calendar");g.useEffect(()=>{(async()=>{try{n(!0);const M=localStorage.getItem("token"),R=await Ne.get("/api/appointments",{headers:{Authorization:`Bearer ${M}`},params:{_t:Date.now()}}),W=Array.isArray(R.data)?R.data:[];t(W),i(null)}catch{i("Error al cargar las citas"),t([])}finally{n(!1)}})()},[]),g.useEffect(()=>{const P=e.filter(M=>{const R=M.type==="VISITOR"?M.fullName:M.client.user.name;return!(m.clientName&&R&&!R.toLowerCase().includes(m.clientName.toLowerCase())||m.dateFrom&&re(M.date).isBefore(re(m.dateFrom))||m.dateTo&&re(M.date).isAfter(re(m.dateTo).endOf("day"))||m.status&&M.status!==m.status||m.consultationType&&M.consultationType!==m.consultationType)});N(P)},[e,m]);const E=g.useMemo(()=>{const P=Array.isArray(w)?w:[],M=P.length,R=P.filter(V=>re(V.date).isAfter(re())).length,W=P.filter(V=>re(V.date).isBefore(re())).length;return{total:M,upcoming:R,past:W}},[w]),k=(Array.isArray(w)?w:[]).map(P=>{const M=P.type==="VISITOR"?P.fullName:P.client.user.name;return{id:P.id,title:`${M} - ${re(P.date).format("HH:mm")}`,start:new Date(P.date),end:re(P.date).add(1,"hour").toDate(),resource:P}}),T=P=>{d(P),x({date:re(P.date).format("YYYY-MM-DDTHH:mm"),location:P.location||"",notes:""}),h(!0)},D=async P=>{var M,R;if(P.preventDefault(),!!l)try{y(!0);const W=localStorage.getItem("token"),V=await Ne.put(`/api/appointments/${l.id}/reschedule`,f,{headers:{Authorization:`Bearer ${W}`}});t(z=>z.map(H=>H.id===l.id?V.data:H)),c("Cita reprogramada exitosamente. Se ha enviado una notificación al cliente."),h(!1),d(null),setTimeout(()=>c(null),5e3)}catch(W){i(((R=(M=W.response)==null?void 0:M.data)==null?void 0:R.message)||"Error al reprogramar la cita")}finally{y(!1)}},$=P=>{x(M=>({...M,[P.target.name]:P.target.value}))},_=P=>{j(M=>({...M,[P.target.name]:P.target.value}))},A=()=>{j({clientName:"",dateFrom:"",dateTo:"",status:"",consultationType:""})},B=g.useMemo(()=>e.filter(M=>M.consultationType).map(M=>M.consultationType).filter((M,R,W)=>W.indexOf(M)===R),[e]);return s.jsx("div",{className:"py-6",children:s.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Calendario de Citas"}),o&&s.jsx("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-md",children:s.jsx("p",{className:"text-green-700 text-sm",children:o})}),a&&s.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-md",children:s.jsx("p",{className:"text-red-700 text-sm",children:a})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[s.jsxs("div",{className:"bg-white p-4 rounded shadow text-center",children:[s.jsx("div",{className:"text-gray-500 text-sm",children:"Total Citas"}),s.jsx("div",{className:"text-2xl font-bold",children:E.total})]}),s.jsxs("div",{className:"bg-white p-4 rounded shadow text-center",children:[s.jsx("div",{className:"text-gray-500 text-sm",children:"Próximas"}),s.jsx("div",{className:"text-2xl font-bold",children:E.upcoming})]}),s.jsxs("div",{className:"bg-white p-4 rounded shadow text-center",children:[s.jsx("div",{className:"text-gray-500 text-sm",children:"Pasadas"}),s.jsx("div",{className:"text-2xl font-bold",children:E.past})]})]}),s.jsxs("div",{className:"bg-white rounded shadow p-4 mb-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Filtros de Búsqueda"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>p(!b),className:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500","aria-expanded":b,"aria-controls":"filters-panel","aria-label":b?"Ocultar filtros de búsqueda":"Mostrar filtros de búsqueda",children:b?"Ocultar Filtros":"Mostrar Filtros"}),s.jsx("button",{onClick:A,className:"px-3 py-1 text-sm bg-gray-600 text-white rounded hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500","aria-label":"Limpiar todos los filtros aplicados",children:"Limpiar Filtros"})]})]}),b&&s.jsxs("div",{id:"filters-panel",role:"region","aria-label":"Panel de filtros avanzados",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"clientName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre del Cliente"}),s.jsx("input",{id:"clientName",type:"text",name:"clientName",value:m.clientName,onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Buscar por nombre...","aria-describedby":"clientName-help"}),s.jsx("div",{id:"clientName-help",className:"sr-only",children:"Escribe el nombre del cliente para filtrar las citas"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"dateFrom",className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha Desde"}),s.jsx("input",{id:"dateFrom",type:"date",name:"dateFrom",value:m.dateFrom,onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","aria-describedby":"dateFrom-help"}),s.jsx("div",{id:"dateFrom-help",className:"sr-only",children:"Selecciona la fecha desde la cual quieres ver citas"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"dateTo",className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha Hasta"}),s.jsx("input",{id:"dateTo",type:"date",name:"dateTo",value:m.dateTo,onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","aria-describedby":"dateTo-help"}),s.jsx("div",{id:"dateTo-help",className:"sr-only",children:"Selecciona la fecha hasta la cual quieres ver citas"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),s.jsxs("select",{id:"status",name:"status",value:m.status,onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","aria-describedby":"status-help",children:[s.jsx("option",{value:"",children:"Todos los estados"}),s.jsx("option",{value:"CONFIRMADA",children:"Confirmada"}),s.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),s.jsx("option",{value:"CANCELADA",children:"Cancelada"}),s.jsx("option",{value:"COMPLETADA",children:"Completada"})]}),s.jsx("div",{id:"status-help",className:"sr-only",children:"Selecciona el estado de las citas que quieres ver"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"consultationType",className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Consulta"}),s.jsxs("select",{id:"consultationType",name:"consultationType",value:m.consultationType,onChange:_,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","aria-describedby":"consultationType-help",children:[s.jsx("option",{value:"",children:"Todos los tipos"}),B.map(P=>s.jsx("option",{value:P,children:P},P))]}),s.jsx("div",{id:"consultationType-help",className:"sr-only",children:"Selecciona el tipo de consulta para filtrar las citas"})]}),s.jsx("div",{className:"md:col-span-2 lg:col-span-3",children:s.jsxs("div",{className:"text-sm text-gray-600",role:"status","aria-live":"polite","aria-label":"Estado de filtros aplicados",children:[s.jsx("strong",{children:"Filtros activos:"}),m.clientName&&s.jsxs("span",{className:"ml-2 px-2 py-1 bg-blue-100 text-blue-800 rounded",role:"status",children:["Cliente: ",m.clientName]}),m.dateFrom&&s.jsxs("span",{className:"ml-2 px-2 py-1 bg-blue-100 text-blue-800 rounded",role:"status",children:["Desde: ",m.dateFrom]}),m.dateTo&&s.jsxs("span",{className:"ml-2 px-2 py-1 bg-blue-100 text-blue-800 rounded",role:"status",children:["Hasta: ",m.dateTo]}),m.status&&s.jsxs("span",{className:"ml-2 px-2 py-1 bg-blue-100 text-blue-800 rounded",role:"status",children:["Estado: ",m.status]}),m.consultationType&&s.jsxs("span",{className:"ml-2 px-2 py-1 bg-blue-100 text-blue-800 rounded",role:"status",children:["Tipo: ",m.consultationType]}),!m.clientName&&!m.dateFrom&&!m.dateTo&&!m.status&&!m.consultationType&&s.jsx("span",{className:"text-gray-500",role:"status",children:"Ningún filtro activo"})]})})]})]}),s.jsx("div",{className:"bg-white rounded shadow p-4 mb-6",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Vista de Citas"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>S("calendar"),className:`px-4 py-2 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 ${C==="calendar"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700"}`,"aria-pressed":C==="calendar","aria-label":"Ver citas en formato calendario",children:"Calendario"}),s.jsx("button",{onClick:()=>S("list"),className:`px-4 py-2 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 ${C==="list"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700"}`,"aria-pressed":C==="list","aria-label":"Ver citas en formato lista",children:"Lista"})]})]})}),C==="calendar"&&s.jsx("div",{className:"bg-white rounded shadow p-4",role:"region","aria-label":"Calendario de citas",children:s.jsx(EV,{localizer:Rq,events:k,startAccessor:"start",endAccessor:"end",style:{height:500},onSelectEvent:P=>d(P.resource),messages:{next:"Siguiente",previous:"Anterior",today:"Hoy",month:"Mes",week:"Semana",day:"Día",agenda:"Agenda",noEventsInRange:"No hay citas en este período",showMore:P=>`+ ${P} citas más`},components:{toolbar:Oq}})}),C==="list"&&s.jsxs("div",{className:"bg-white rounded shadow p-4",role:"region","aria-label":"Lista de citas",children:[s.jsxs("h2",{className:"text-lg font-semibold mb-4",children:["Lista de Citas (",w.length,")"]}),w.length===0?s.jsx("div",{className:"text-center py-8 text-gray-500",role:"status","aria-live":"polite",children:"No hay citas que coincidan con los filtros aplicados"}):s.jsxs("div",{className:"space-y-4",role:"list","aria-label":"Citas",children:[s.jsx("h3",{className:"text-md font-semibold text-gray-700 mb-3",children:"Citas Programadas"}),w.map((P,M)=>{const R=P.type==="VISITOR"?P.fullName:P.client.user.name,W=re(P.date).isBefore(re()),V=re(P.date).isSame(re(),"day");return s.jsx("div",{className:`p-4 border rounded-lg cursor-pointer hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 ${W?"border-gray-300 bg-gray-50":V?"border-blue-300 bg-blue-50":"border-green-300 bg-green-50"}`,onClick:()=>d(P),onKeyDown:z=>{(z.key==="Enter"||z.key===" ")&&(z.preventDefault(),d(P))},tabIndex:0,role:"listitem","aria-label":`Cita ${M+1}: ${R} el ${re(P.date).format("DD/MM/YYYY a las HH:mm")} - ${W?"Pasada":V?"Hoy":"Próxima"}`,children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("h4",{className:"font-semibold text-lg",children:R}),s.jsx("span",{className:`px-2 py-1 text-xs rounded ${P.type==="VISITOR"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:P.type==="VISITOR"?"Visitante":"Cliente"}),P.status&&s.jsx("span",{className:`px-2 py-1 text-xs rounded ${P.status==="CONFIRMADA"?"bg-green-100 text-green-800":P.status==="PENDIENTE"?"bg-yellow-100 text-yellow-800":P.status==="CANCELADA"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:P.status})]}),s.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Fecha:"})," ",re(P.date).format("DD/MM/YYYY HH:mm")]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Ubicación:"})," ",P.location||"No especificada"]}),P.consultationType&&s.jsxs("div",{children:[s.jsx("strong",{children:"Tipo:"})," ",P.consultationType]}),P.consultationReason&&s.jsxs("div",{children:[s.jsx("strong",{children:"Motivo:"})," ",P.consultationReason]}),P.phone&&s.jsxs("div",{children:[s.jsx("strong",{children:"Teléfono:"})," ",P.phone]})]})]}),s.jsx("div",{className:"text-right text-sm text-gray-500",children:W?"Pasada":V?"Hoy":"Próxima"})]})},P.id)})]})]}),l&&!u&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",role:"dialog","aria-modal":"true","aria-labelledby":"appointment-detail-title","aria-describedby":"appointment-detail-content",onClick:P=>P.target===P.currentTarget&&d(null),children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md relative",children:[s.jsx("button",{className:"absolute top-2 right-2 text-gray-500 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded p-1",onClick:()=>d(null),"aria-label":"Cerrar detalle de cita",type:"button",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),s.jsx("h3",{id:"appointment-detail-title",className:"text-xl font-bold mb-4 pr-8",children:"Detalle de la Cita"}),s.jsxs("div",{id:"appointment-detail-content",className:"mb-4 space-y-3",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Información del Cliente"}),l.type==="VISITOR"?s.jsxs("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded-md",children:[s.jsx("h4",{className:"font-semibold text-purple-800 mb-2",children:"Cliente Visitante"}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Nombre:"})," ",l.fullName]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Email:"})," ",l.email]}),l.phone&&s.jsxs("div",{children:[s.jsx("strong",{children:"Teléfono:"})," ",l.phone]}),l.age&&s.jsxs("div",{children:[s.jsx("strong",{children:"Edad:"})," ",l.age," años"]}),l.consultationType&&s.jsxs("div",{children:[s.jsx("strong",{children:"Tipo de consulta:"})," ",l.consultationType]}),l.consultationReason&&s.jsxs("div",{children:[s.jsx("strong",{children:"Motivo:"})," ",l.consultationReason]})]})]}):s.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md",children:[s.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"Cliente Registrado"}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Nombre:"})," ",l.client.user.name]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Email:"})," ",l.client.user.email]})]})]}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Detalles de la Cita"}),s.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-md",children:[s.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Información de la Cita"}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Abogado:"})," ",l.lawyer.name," (",l.lawyer.email,")"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Fecha y hora:"})," ",re(l.date).format("DD/MM/YYYY HH:mm")]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Lugar:"})," ",l.location]}),l.status&&s.jsxs("div",{children:[s.jsx("strong",{children:"Estado:"}),s.jsx("span",{className:`ml-1 px-2 py-1 text-xs rounded ${l.status==="CONFIRMADA"?"bg-green-100 text-green-800":l.status==="PENDIENTE"?"bg-yellow-100 text-yellow-800":l.status==="CANCELADA"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:l.status})]}),l.notes&&s.jsxs("div",{children:[s.jsx("strong",{children:"Notas:"})," ",l.notes]})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx("button",{className:"px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2",onClick:()=>T(l),"aria-label":"Reprogramar esta cita",type:"button",children:"Reprogramar"}),s.jsx("button",{className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",onClick:()=>d(null),"aria-label":"Cerrar detalle de cita",type:"button",children:"Cerrar"})]})]})}),u&&l&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",role:"dialog","aria-modal":"true","aria-labelledby":"reschedule-title","aria-describedby":"reschedule-description",onClick:P=>P.target===P.currentTarget&&h(!1),children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md relative",children:[s.jsx("button",{className:"absolute top-2 right-2 text-gray-500 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded p-1",onClick:()=>{h(!1),d(null)},"aria-label":"Cerrar modal de reprogramación",type:"button",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),s.jsx("h3",{id:"reschedule-title",className:"text-xl font-bold mb-4 pr-8",children:"Reprogramar Cita"}),s.jsxs("p",{id:"reschedule-description",className:"text-sm text-gray-600 mb-4",children:["Cliente: ",s.jsx("strong",{children:l.type==="VISITOR"?l.fullName:l.client.user.name})]}),s.jsxs("form",{onSubmit:D,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"reschedule-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Nueva fecha y hora"}),s.jsx("input",{id:"reschedule-date",type:"datetime-local",name:"date",value:f.date,onChange:$,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,"aria-describedby":"date-help"}),s.jsx("div",{id:"date-help",className:"sr-only",children:"Selecciona la nueva fecha y hora para la cita"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"reschedule-location",className:"block text-sm font-medium text-gray-700 mb-2",children:"Ubicación"}),s.jsx("input",{id:"reschedule-location",type:"text",name:"location",value:f.location,onChange:$,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Oficina, online, etc.","aria-describedby":"location-help"}),s.jsx("div",{id:"location-help",className:"sr-only",children:"Especifica la ubicación de la cita reprogramada"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"reschedule-notes",className:"block text-sm font-medium text-gray-700 mb-2",children:"Notas adicionales (opcional)"}),s.jsx("textarea",{id:"reschedule-notes",name:"notes",value:f.notes,onChange:$,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Motivo del cambio, instrucciones especiales, etc.","aria-describedby":"notes-help"}),s.jsx("div",{id:"notes-help",className:"sr-only",children:"Agrega notas adicionales sobre la reprogramación"})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx("button",{type:"button",className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",onClick:()=>{h(!1),d(null)},disabled:v,children:"Cancelar"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",disabled:v,children:v?"Reprogramando...":"Reprogramar Cita"})]})]})]})}),r&&s.jsx("div",{className:"text-center py-8",children:"Cargando..."})]})})},Lq=()=>{var Z,F;const[e,t]=g.useState([]),[r,n]=g.useState([]),[a,i]=g.useState(!0),[o,c]=g.useState(null),[l,d]=g.useState(""),[u,h]=g.useState("todos"),[f,x]=g.useState(null),[v,y]=g.useState(null),[b,p]=g.useState(!1),[m,j]=g.useState(!1),[w,N]=g.useState(null),{user:C}=Ee(),[S,E]=g.useState("asc");g.useEffect(()=>{(async()=>{try{i(!0);const Y=localStorage.getItem("token"),[Q,de]=await Promise.all([X.get("/users/clients/my"),X.get("/users/clients/stats")]);t(Q.data),c(de.data),x(null)}catch(Y){console.error("Error fetching clients:",Y),x("Error al cargar los clientes")}finally{i(!1)}})()},[]),g.useEffect(()=>{let U=e;l&&(U=U.filter(Y=>{var Q;return Y.user.name.toLowerCase().includes(l.toLowerCase())||Y.user.email.toLowerCase().includes(l.toLowerCase())||Y.dni.toLowerCase().includes(l.toLowerCase())||((Q=Y.phone)==null?void 0:Q.toLowerCase().includes(l.toLowerCase()))})),u==="activos"?U=U.filter(Y=>{var Q;return((Q=Y._count)==null?void 0:Q.expedientes)&&Y._count.expedientes>0}):u==="inactivos"&&(U=U.filter(Y=>{var Q;return!((Q=Y._count)!=null&&Q.expedientes)||Y._count.expedientes===0})),n(U)},[e,l,u]),g.useEffect(()=>()=>{w&&clearTimeout(w)},[w]);function k(U){if(!U)return"";const Y=U.trim().split(" ");return Y.length>1?Y[1].toLowerCase():""}const T=g.useMemo(()=>[...r].sort((Y,Q)=>{const de=k(Y.user.name),q=k(Q.user.name);return de<q?S==="asc"?-1:1:de>q?S==="asc"?1:-1:0}),[r,S]),D=U=>{y(U),p(!0)},$=()=>{y(null),p(!1)},_=U=>{var Q;return((Q=U._count)==null?void 0:Q.expedientes)&&U._count.expedientes>0?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"},A=U=>{var Q;return((Q=U._count)==null?void 0:Q.expedientes)&&U._count.expedientes>0?"Activo":"Inactivo"},B=()=>{const U=r.map(ue=>{var oe,ye;return{Nombre:ue.user.name,Email:ue.user.email,DNI:ue.dni,Teléfono:ue.phone||"N/A",Dirección:ue.address||"N/A",Estado:A(ue),Expedientes:((oe=ue._count)==null?void 0:oe.expedientes)||0,Citas:((ye=ue._count)==null?void 0:ye.appointments)||0}}),Y=[Object.keys(U[0]).join(","),...U.map(ue=>Object.values(ue).map(oe=>`"${oe}"`).join(","))].join(`
`),Q=new Blob([Y],{type:"text/csv;charset=utf-8;"}),de=document.createElement("a"),q=URL.createObjectURL(Q);de.setAttribute("href",q),de.setAttribute("download",`clientes_${new Date().toISOString().split("T")[0]}.csv`),de.style.visibility="hidden",document.body.appendChild(de),de.click(),document.body.removeChild(de)},P=U=>{const Y=encodeURIComponent("Consulta Legal - Despacho"),Q=encodeURIComponent(`Estimado/a ${U.user.name},

Esperamos que se encuentre bien.

Saludos cordiales,
Su equipo legal`);window.open(`mailto:${U.user.email}?subject=${Y}&body=${Q}`)},M=U=>{U.phone&&window.open(`tel:${U.phone}`)},R=()=>{j(!0),setTimeout(()=>{j(!1)},500)},W=()=>{d(""),h("todos"),j(!1)},V=U=>{U.key==="Enter"&&R()},z=U=>{h(U.target.value),j(!0),setTimeout(()=>{j(!1)},300)},H=U=>{const Y=U.target.value;if(d(Y),w&&clearTimeout(w),Y.trim()){j(!0);const Q=setTimeout(()=>{j(!1)},500);N(Q)}else j(!1)},G=()=>{E(U=>U==="asc"?"desc":"asc")};return a?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):f?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 text-xl mb-4",children:"Error"}),s.jsx("div",{className:"text-gray-600",children:f}),s.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Reintentar"})]})}):s.jsxs("div",{className:"py-6",children:[s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mis Clientes"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Gestiona y da seguimiento a todos tus clientes"})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:B,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",children:"Exportar Datos"}),s.jsx(be,{to:"/lawyer/cases/new",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Nuevo Cliente"})]})]})}),o&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-6 mb-6",children:[s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Clientes"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:o.total})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-green-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Activos"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:o.active})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-gray-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L18.364 5.636M5.636 18.364l12.728-12.728"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Inactivos"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:o.inactive})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-yellow-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Expedientes"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:o.totalCases})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-purple-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Citas"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:o.totalAppointments})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-indigo-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Promedio Expedientes"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:o.averageCasesPerClient})]})]})})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar"}),s.jsx("input",{type:"text",placeholder:"Buscar por nombre, email, DNI o teléfono...",value:l,onChange:H,onKeyDown:V,className:`w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${m&&l?"bg-blue-50 border-blue-300":""}`}),m&&l&&s.jsxs("div",{className:"mt-1 text-xs text-blue-600 flex items-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-blue-600 mr-1"}),"Buscando..."]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado"}),s.jsxs("select",{value:u,onChange:z,"aria-label":"Filtrar por estado",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"todos",children:"Todos los estados"}),s.jsx("option",{value:"activos",children:"Solo activos"}),s.jsx("option",{value:"inactivos",children:"Solo inactivos"})]})]}),s.jsx("div",{className:"flex items-end",children:s.jsx("button",{onClick:R,disabled:m,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:m?s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Buscando..."]}):"🔍 Buscar"})}),s.jsx("div",{className:"flex items-end",children:s.jsx("button",{onClick:W,className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"🗑️ Limpiar Filtros"})})]}),(l||u!=="todos")&&s.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-blue-800",children:[s.jsx("span",{className:"font-medium",children:"Resultados de búsqueda:"}),l&&s.jsxs("span",{className:"ml-2",children:['"',l,'"',u!=="todos"&&` + ${u}`]}),!l&&u!=="todos"&&s.jsxs("span",{className:"ml-2",children:["Estado: ",u]})]}),s.jsxs("div",{className:"text-sm text-blue-600",children:[r.length," de ",e.length," clientes encontrados"]})]})})]}),s.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:G,children:["Cliente",s.jsx("span",{className:"ml-1",children:S==="asc"?"▲":"▼"})]}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contacto"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expedientes"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Citas"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:T.map(U=>{var Y,Q;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:U.user.name}),s.jsxs("div",{className:"text-sm text-gray-500",children:["DNI: ",U.dni]}),U.address&&s.jsx("div",{className:"text-sm text-gray-500",children:U.address})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-900",children:U.user.email}),U.phone&&s.jsx("div",{className:"text-sm text-gray-500",children:U.phone})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${_(U)}`,children:A(U)})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((Y=U._count)==null?void 0:Y.expedientes)||0}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((Q=U._count)==null?void 0:Q.appointments)||0}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex flex-col space-y-1",children:[s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>D(U),className:"text-blue-600 hover:text-blue-900 text-xs",children:"Ver Detalles"}),s.jsx(be,{to:`/lawyer/cases/new?clientId=${U.id}`,className:"text-green-600 hover:text-green-900 text-xs",children:"Nuevo Expediente"})]}),s.jsxs("div",{className:"flex space-x-2",children:[U.user.email&&s.jsx("button",{onClick:()=>P(U),className:"text-purple-600 hover:text-purple-900 text-xs",title:"Enviar email",children:"📧 Email"}),U.phone&&s.jsx("button",{onClick:()=>M(U),className:"text-orange-600 hover:text-orange-900 text-xs",title:"Llamar",children:"📞 Llamar"}),s.jsx(be,{to:`/lawyer/appointments?clientId=${U.id}`,className:"text-indigo-600 hover:text-indigo-900 text-xs",children:"📅 Cita"})]})]})})]},U.id)})})]})})}),r.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No se encontraron clientes"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Intenta ajustar los filtros o agregar nuevos clientes."})]})]}),b&&v&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:s.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:s.jsxs("div",{className:"mt-3",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Detalles del Cliente"}),s.jsx("button",{onClick:$,className:"text-gray-400 hover:text-gray-600",title:"Cerrar",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nombre"}),s.jsx("p",{className:"text-sm text-gray-900",children:v.user.name})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),s.jsx("p",{className:"text-sm text-gray-900",children:v.user.email})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"DNI"}),s.jsx("p",{className:"text-sm text-gray-900",children:v.dni})]}),v.phone&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Teléfono"}),s.jsx("p",{className:"text-sm text-gray-900",children:v.phone})]}),v.address&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Dirección"}),s.jsx("p",{className:"text-sm text-gray-900",children:v.address})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Estado"}),s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${_(v)}`,children:A(v)})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Expedientes"}),s.jsx("p",{className:"text-sm text-gray-900",children:((Z=v._count)==null?void 0:Z.expedientes)||0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Citas"}),s.jsx("p",{className:"text-sm text-gray-900",children:((F=v._count)==null?void 0:F.appointments)||0})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx("button",{onClick:$,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Cerrar"}),v.user.email&&s.jsx("button",{onClick:()=>P(v),className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2",children:"Enviar Email"}),v.phone&&s.jsx("button",{onClick:()=>M(v),className:"px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2",children:"Llamar"}),s.jsx(be,{to:`/lawyer/cases/new?clientId=${v.id}`,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Nuevo Expediente"})]})]})})})]})},Iq=()=>{var st;const[e,t]=g.useState([]),[r,n]=g.useState([]),[a,i]=g.useState(!0),[o,c]=g.useState(null),[l,d]=g.useState(""),[u,h]=g.useState("todos"),[f,x]=g.useState("todos"),[v,y]=g.useState(null),[b,p]=g.useState(null),[m,j]=g.useState(!1),[w,N]=g.useState(!1),[C,S]=g.useState(!1),[E,k]=g.useState(null),[T,D]=g.useState([]),[$,_]=g.useState([]),{user:A}=Ee(),[B,P]=g.useState({title:"",description:"",dueDate:"",priority:"MEDIA",expedienteId:"",clientId:"",assignedTo:""});g.useEffect(()=>{(async()=>{try{i(!0);const me=localStorage.getItem("token"),[_e,ze,Ce,Pe]=await Promise.all([Ne.get("/tasks",{headers:{Authorization:`Bearer ${me}`}}),Ne.get("/tasks/stats",{headers:{Authorization:`Bearer ${me}`}}),Ne.get("/cases",{headers:{Authorization:`Bearer ${me}`}}),Ne.get("/users/clients",{headers:{Authorization:`Bearer ${me}`}})]);t(_e.data),c(ze.data),D(Ce.data),_(Pe.data),y(null)}catch(me){console.error("Error fetching data:",me),y("Error al cargar los datos")}finally{i(!1)}})()},[]),g.useEffect(()=>{let J=e;l&&(J=J.filter(me=>{var _e,ze,Ce;return me.title.toLowerCase().includes(l.toLowerCase())||((_e=me.description)==null?void 0:_e.toLowerCase().includes(l.toLowerCase()))||((ze=me.expediente)==null?void 0:ze.title.toLowerCase().includes(l.toLowerCase()))||((Ce=me.client)==null?void 0:Ce.user.name.toLowerCase().includes(l.toLowerCase()))})),u!=="todos"&&(J=J.filter(me=>me.status===u)),f!=="todos"&&(J=J.filter(me=>me.priority===f)),n(J)},[e,l,u,f]),g.useEffect(()=>()=>{E&&clearTimeout(E)},[E]);const M=J=>{p(J),j(!0)},R=()=>{p(null),j(!1)},W=()=>{N(!0),y(null)},V=()=>{N(!1),P({title:"",description:"",dueDate:"",priority:"MEDIA",expedienteId:"",clientId:"",assignedTo:""}),y(null)},z=async()=>{var J,me;if(!B.title.trim()){y("El título es obligatorio");return}try{const _e=localStorage.getItem("token"),ze={title:B.title,description:B.description||void 0,dueDate:B.dueDate||void 0,priority:B.priority,expedienteId:B.expedienteId||void 0,clientId:B.clientId||void 0,assignedTo:B.assignedTo||void 0},Ce=await Ne.post("/tasks",ze,{headers:{Authorization:`Bearer ${_e}`}});t(Pe=>[Ce.data,...Pe]),V()}catch(_e){console.error("Error creating task:",_e),y(((me=(J=_e.response)==null?void 0:J.data)==null?void 0:me.message)||"Error al crear la tarea")}},H=async(J,me)=>{try{const _e=localStorage.getItem("token");await Ne.patch(`/tasks/${J}/status`,{status:me},{headers:{Authorization:`Bearer ${_e}`}}),t(ze=>ze.map(Ce=>Ce.id===J?{...Ce,status:me}:Ce))}catch(_e){console.error("Error updating task status:",_e),y("Error al actualizar el estado de la tarea")}},G=async J=>{if(confirm("¿Estás seguro de que quieres eliminar esta tarea?"))try{const me=localStorage.getItem("token");await Ne.delete(`/tasks/${J}`,{headers:{Authorization:`Bearer ${me}`}}),t(_e=>_e.filter(ze=>ze.id!==J))}catch(me){console.error("Error deleting task:",me),y("Error al eliminar la tarea")}},Z=J=>{switch(J){case"URGENTE":return"bg-red-100 text-red-800";case"ALTA":return"bg-orange-100 text-orange-800";case"MEDIA":return"bg-yellow-100 text-yellow-800";case"BAJA":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},F=J=>{switch(J){case"PENDIENTE":return"bg-yellow-100 text-yellow-800";case"EN_PROGRESO":return"bg-blue-100 text-blue-800";case"COMPLETADA":return"bg-green-100 text-green-800";case"CANCELADA":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},U=J=>{switch(J){case"URGENTE":return"Urgente";case"ALTA":return"Alta";case"MEDIA":return"Media";case"BAJA":return"Baja";default:return J}},Y=J=>{switch(J){case"PENDIENTE":return"Pendiente";case"EN_PROGRESO":return"En Progreso";case"COMPLETADA":return"Completada";case"CANCELADA":return"Cancelada";default:return J}},Q=J=>new Date(J)<new Date,de=()=>{S(!0),setTimeout(()=>{S(!1)},500)},q=()=>{d(""),h("todos"),x("todos"),S(!1)},ue=J=>{J.key==="Enter"&&de()},oe=J=>{h(J.target.value),S(!0),setTimeout(()=>{S(!1)},300)},ye=J=>{x(J.target.value),S(!0),setTimeout(()=>{S(!1)},300)},$e=J=>{const me=J.target.value;if(d(me),E&&clearTimeout(E),me.trim()){S(!0);const _e=setTimeout(()=>{S(!1)},500);k(_e)}else S(!1)};return a?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):v?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 text-xl mb-4",children:"Error"}),s.jsx("div",{className:"text-gray-600",children:v}),s.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Reintentar"})]})}):s.jsxs("div",{className:"py-6",children:[s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Tareas Pendientes"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Gestiona y da seguimiento a todas tus tareas y recordatorios"})]}),s.jsx("button",{onClick:W,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Nueva Tarea"})]})}),o&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-6 mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6 col-span-full",children:"Estadísticas de Tareas"}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Tareas"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:typeof o.total=="number"&&!isNaN(o.total)?o.total:0})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-yellow-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Pendientes"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:typeof o.pendientes=="number"&&!isNaN(o.pendientes)?o.pendientes:0})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"En Progreso"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:typeof o.enProgreso=="number"&&!isNaN(o.enProgreso)?o.enProgreso:0})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-green-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Completadas"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:typeof o.completadas=="number"&&!isNaN(o.completadas)?o.completadas:0})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-gray-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L18.364 5.636M5.636 18.364l12.728-12.728"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Canceladas"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:typeof o.canceladas=="number"&&!isNaN(o.canceladas)?o.canceladas:0})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-red-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Vencidas"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:typeof o.vencidas=="number"&&!isNaN(o.vencidas)?o.vencidas:0})]})]})})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Filtros de Búsqueda"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar"}),s.jsx("input",{type:"text",placeholder:"Buscar por título, descripción o expediente...",value:l,onChange:$e,onKeyDown:ue,className:`w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${C&&l?"bg-blue-50 border-blue-300":""}`}),C&&l&&s.jsxs("div",{className:"mt-1 text-xs text-blue-600 flex items-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-blue-600 mr-1"}),"Buscando..."]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado"}),s.jsxs("select",{value:u,onChange:oe,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Filtrar por estado",children:[s.jsx("option",{value:"todos",children:"Todos los estados"}),s.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),s.jsx("option",{value:"EN_PROGRESO",children:"En Progreso"}),s.jsx("option",{value:"COMPLETADA",children:"Completada"}),s.jsx("option",{value:"CANCELADA",children:"Cancelada"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prioridad"}),s.jsxs("select",{value:f,onChange:ye,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Filtrar por prioridad",children:[s.jsx("option",{value:"todos",children:"Todas las prioridades"}),s.jsx("option",{value:"URGENTE",children:"Urgente"}),s.jsx("option",{value:"ALTA",children:"Alta"}),s.jsx("option",{value:"MEDIA",children:"Media"}),s.jsx("option",{value:"BAJA",children:"Baja"})]})]}),s.jsx("div",{className:"flex items-end",children:s.jsx("button",{onClick:de,disabled:C,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:C?s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Buscando..."]}):"🔍 Buscar"})}),s.jsx("div",{className:"flex items-end",children:s.jsx("button",{onClick:q,className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"🗑️ Limpiar"})})]}),(l||u!=="todos"||f!=="todos")&&s.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-blue-800",children:[s.jsx("span",{className:"font-medium",children:"Resultados de búsqueda:"}),l&&s.jsxs("span",{className:"ml-2",children:['"',l,'"']}),u!=="todos"&&s.jsxs("span",{className:"ml-2",children:["+ Estado: ",u]}),f!=="todos"&&s.jsxs("span",{className:"ml-2",children:["+ Prioridad: ",f]})]}),s.jsxs("div",{className:"text-sm text-blue-600",children:[r.length," de ",e.length," tareas encontradas"]})]})})]}),s.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 p-6 border-b border-gray-200",children:"Lista de Tareas"}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tarea"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Prioridad"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha Límite"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Asignado"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(Array.isArray(r)?r:[]).map(J=>{var me;return s.jsxs("tr",{className:`hover:bg-gray-50 ${J.dueDate&&Q(J.dueDate)&&J.status!=="COMPLETADA"?"bg-red-50":""}`,children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:J.title}),s.jsx("div",{className:"text-sm text-gray-500",children:J.description||"Sin descripción"}),J.expediente&&s.jsxs("div",{className:"text-xs text-blue-600",children:["📋 ",J.expediente.title]}),J.client&&s.jsxs("div",{className:"text-xs text-green-600",children:["👤 ",J.client.user.name]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${Z(J.priority)}`,children:U(J.priority)})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("select",{value:J.status,onChange:_e=>H(J.id,_e.target.value),className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full border ${F(J.status)}`,"aria-label":`Cambiar estado de tarea: ${J.title}`,children:[s.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),s.jsx("option",{value:"EN_PROGRESO",children:"En Progreso"}),s.jsx("option",{value:"COMPLETADA",children:"Completada"}),s.jsx("option",{value:"CANCELADA",children:"Cancelada"})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:J.dueDate?s.jsxs("div",{children:[s.jsx("div",{className:J.dueDate&&Q(J.dueDate)&&J.status!=="COMPLETADA"?"text-red-600 font-medium":"",children:new Date(J.dueDate).toLocaleDateString()}),J.dueDate&&Q(J.dueDate)&&J.status!=="COMPLETADA"&&s.jsx("div",{className:"text-xs text-red-500",children:"⚠️ Vencida"})]}):"Sin fecha límite"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((me=J.assignedToUser)==null?void 0:me.name)||"Sin asignar"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>M(J),className:"text-blue-600 hover:text-blue-900",children:"Ver"}),s.jsx("button",{onClick:()=>G(J.id),className:"text-red-600 hover:text-red-900",children:"Eliminar"})]})})]},J.id)})})]})})]}),r.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No se encontraron tareas"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Intenta ajustar los filtros o crear una nueva tarea."})]})]}),m&&b&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:s.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:s.jsxs("div",{className:"mt-3",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Detalles de la Tarea"}),s.jsx("button",{onClick:R,className:"text-gray-400 hover:text-gray-600",title:"Cerrar modal",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Título"}),s.jsx("p",{className:"text-sm text-gray-900",children:b.title})]}),b.description&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Descripción"}),s.jsx("p",{className:"text-sm text-gray-900",children:b.description})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Prioridad"}),s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${Z(b.priority)}`,children:U(b.priority)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Estado"}),s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${F(b.status)}`,children:Y(b.status)})]}),b.dueDate&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Fecha Límite"}),s.jsxs("p",{className:`text-sm ${Q(b.dueDate)&&b.status!=="COMPLETADA"?"text-red-600 font-medium":"text-gray-900"}`,children:[new Date(b.dueDate).toLocaleDateString(),Q(b.dueDate)&&b.status!=="COMPLETADA"&&s.jsx("span",{className:"ml-2 text-red-500",children:"⚠️ Vencida"})]})]}),b.expediente&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Expediente"}),s.jsx("p",{className:"text-sm text-blue-600",children:b.expediente.title}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Cliente: ",b.expediente.client.user.name]})]}),b.client&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Cliente"}),s.jsx("p",{className:"text-sm text-gray-900",children:b.client.user.name}),s.jsx("p",{className:"text-xs text-gray-500",children:b.client.user.email})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Asignado a"}),s.jsx("p",{className:"text-sm text-gray-900",children:((st=b.assignedToUser)==null?void 0:st.name)||"Sin asignar"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Creado por"}),s.jsx("p",{className:"text-sm text-gray-900",children:b.createdByUser.name})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Fecha de creación"}),s.jsx("p",{className:"text-sm text-gray-900",children:new Date(b.createdAt).toLocaleDateString()})]})]}),s.jsx("div",{className:"flex justify-end mt-6",children:s.jsx("button",{onClick:R,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"Cerrar"})})]})})}),w&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:s.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:s.jsxs("div",{className:"mt-3",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Nueva Tarea"}),s.jsx("button",{onClick:V,className:"text-gray-400 hover:text-gray-600",title:"Cerrar modal",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),v&&s.jsx("div",{className:"mb-4 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md p-2",children:v}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Título *"}),s.jsx("input",{type:"text",value:B.title,onChange:J=>P(me=>({...me,title:J.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Título de la tarea"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripción"}),s.jsx("textarea",{value:B.description,onChange:J=>P(me=>({...me,description:J.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Descripción de la tarea"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha Límite"}),s.jsx("input",{type:"datetime-local",value:B.dueDate,onChange:J=>P(me=>({...me,dueDate:J.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Fecha límite de la tarea"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prioridad"}),s.jsxs("select",{value:B.priority,onChange:J=>P(me=>({...me,priority:J.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Prioridad de la tarea",children:[s.jsx("option",{value:"BAJA",children:"Baja"}),s.jsx("option",{value:"MEDIA",children:"Media"}),s.jsx("option",{value:"ALTA",children:"Alta"}),s.jsx("option",{value:"URGENTE",children:"Urgente"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expediente (opcional)"}),s.jsxs("select",{value:B.expedienteId,onChange:J=>P(me=>({...me,expedienteId:J.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Seleccionar expediente",children:[s.jsx("option",{value:"",children:"Seleccionar expediente"}),T.map(J=>s.jsxs("option",{value:J.id,children:[J.title," - ",J.client.user.name]},J.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cliente (opcional)"}),s.jsxs("select",{value:B.clientId,onChange:J=>P(me=>({...me,clientId:J.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Seleccionar cliente",children:[s.jsx("option",{value:"",children:"Seleccionar cliente"}),$.map(J=>s.jsxs("option",{value:J.id,children:[J.user.name," - ",J.user.email]},J.id))]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx("button",{onClick:V,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Cancelar"}),s.jsx("button",{onClick:z,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Crear Tarea"})]})]})})})]})},$q=()=>{var d,u,h,f,x,v,y,b;const[e,t]=g.useState(null),[r,n]=g.useState(!0),[a,i]=g.useState(null),{user:o}=Ee();g.useEffect(()=>{(async()=>{try{n(!0);const m=localStorage.getItem("token");console.log("Fetching lawyer reports...");const j=await Ne.get("/api/lawyer/reports",{headers:{Authorization:`Bearer ${m}`}});console.log("Reports data received:",j.data),t(j.data),i(null)}catch(m){console.error("Error fetching reports:",m),t({tasks:{total:0,byStatus:{PENDIENTE:0,EN_PROGRESO:0,COMPLETADA:0,CANCELADA:0},overdue:0},cases:{total:0,byStatus:{ABIERTO:0,EN_PROCESO:0,CERRADO:0}},appointments:{upcoming:0}}),i("No se pudieron cargar los datos dinámicos. Mostrando datos de ejemplo.")}finally{n(!1)}})()},[]);const c=p=>{switch(p){case"PENDIENTE":return"bg-yellow-100 text-yellow-800";case"EN_PROGRESO":return"bg-blue-100 text-blue-800";case"COMPLETADA":return"bg-green-100 text-green-800";case"CANCELADA":return"bg-gray-100 text-gray-800";case"ABIERTO":return"bg-green-100 text-green-800";case"EN_PROCESO":return"bg-blue-100 text-blue-800";case"CERRADO":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},l=p=>{switch(p){case"PENDIENTE":return"Pendiente";case"EN_PROGRESO":return"En Progreso";case"COMPLETADA":return"Completada";case"CANCELADA":return"Cancelada";case"ABIERTO":return"Abierto";case"EN_PROCESO":return"En Proceso";case"CERRADO":return"Cerrado";default:return p}};return r?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):a?s.jsx("div",{className:"py-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mis Reportes"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Estadísticas y reportes personales de tu actividad"})]}),s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-4 mb-6",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Información"}),s.jsx("div",{className:"mt-2 text-sm text-yellow-700",children:s.jsx("p",{children:a})}),s.jsx("div",{className:"mt-4",children:s.jsx("button",{onClick:()=>window.location.reload(),className:"bg-yellow-50 px-2 py-1.5 rounded-md text-sm font-medium text-yellow-800 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-yellow-50 focus:ring-yellow-600",children:"Reintentar"})})]})]})})]})}):e?s.jsx("div",{className:"py-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mis Reportes"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Estadísticas y reportes personales de tu actividad"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6 col-span-full",children:"Resumen General"}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Tareas"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:((d=e.tasks)==null?void 0:d.total)??0})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-green-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Casos"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:((u=e.cases)==null?void 0:u.total)??0})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-red-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Tareas Vencidas"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:((h=e.tasks)==null?void 0:h.overdue)??0})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-purple-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Próximas Citas"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:((f=e.appointments)==null?void 0:f.upcoming)??0})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6 col-span-full",children:"Estadísticas Detalladas"}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Estado de Tareas"}),s.jsx("div",{className:"space-y-3",children:Object.entries(((x=e.tasks)==null?void 0:x.byStatus)??{}).map(([p,m])=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${c(p)}`,children:l(p)})}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:m})]},p))}),s.jsx("div",{className:"mt-6",children:s.jsx("div",{className:"flex items-end space-x-2 h-32",children:Object.entries(((v=e.tasks)==null?void 0:v.byStatus)??{}).map(([p,m])=>{var N;const j=Math.max(...Object.values(((N=e.tasks)==null?void 0:N.byStatus)??{})),w=j>0?m/j*100:0;return s.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[s.jsx("div",{className:"w-full bg-blue-500 rounded-t",style:{height:`${w}%`}}),s.jsx("span",{className:"text-xs text-gray-500 mt-1",children:m})]},p)})})})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Estado de Casos"}),s.jsx("div",{className:"space-y-3",children:Object.entries(((y=e.cases)==null?void 0:y.byStatus)??{}).map(([p,m])=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${c(p)}`,children:l(p)})}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:m})]},p))}),s.jsxs("div",{className:"mt-6",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"relative w-32 h-32",children:(()=>{var w,N;const p=Object.values(((w=e.cases)==null?void 0:w.byStatus)??{}).reduce((C,S)=>C+S,0);let m=0;const j=["#10B981","#3B82F6","#6B7280"];return Object.entries(((N=e.cases)==null?void 0:N.byStatus)??{}).map(([C,S],E)=>{if(p===0)return null;const T=S/p*100/100*360,D=s.jsx("div",{className:"absolute inset-0 rounded-full",style:{background:`conic-gradient(from ${m}deg, ${j[E]} 0deg, ${j[E]} ${T}deg, transparent ${T}deg)`}},C);return m+=T,D})})()})}),s.jsx("div",{className:"mt-4 flex justify-center space-x-4",children:Object.entries(((b=e.cases)==null?void 0:b.byStatus)??{}).map(([p,m],j)=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:["#10B981","#3B82F6","#6B7280"][j]}}),s.jsx("span",{className:"text-xs text-gray-600",children:l(p)})]},p))})]})]})]})]})}):s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"text-center",children:s.jsx("div",{className:"text-gray-600",children:"No hay datos disponibles"})})})},Fq=()=>{var c,l,d;const[e,t]=g.useState(null),[r,n]=g.useState(!0),[a,i]=g.useState(null),{user:o}=Ee();return g.useEffect(()=>{(async()=>{var h,f;try{n(!0);const x=await X.get("/admin/dashboard");t(x.data),i(null)}catch(x){console.error("Error fetching dashboard stats:",x),i(((f=(h=x.response)==null?void 0:h.data)==null?void 0:f.message)||"Error al cargar las estadísticas")}finally{n(!1)}})()},[]),r?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):a?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 text-xl mb-4",children:"Error"}),s.jsx("div",{className:"text-gray-600",children:a}),s.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Reintentar"})]})}):s.jsx("div",{className:"py-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("div",{children:s.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Bienvenido, ",o==null?void 0:o.name,(o==null?void 0:o.email)&&` (${o.email})`]})}),s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("div",{className:"text-sm text-gray-500",children:["Última actualización: ",new Date().toLocaleString()]})})]})}),e&&s.jsxs(s.Fragment,{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Estadísticas Principales"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Usuarios"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.totalUsers||0})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-green-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Expedientes"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.totalCases||0})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-purple-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Citas"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.totalAppointments||0})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-orange-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Tareas"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.totalTasks||0})]})]})})]})]}),e&&s.jsxs(s.Fragment,{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Estadísticas Detalladas"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Usuarios por Rol"})}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Abogados"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.totalLawyers||0})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Clientes"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.totalClients||0})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Documentos"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.totalDocuments||0})]})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Tareas Vencidas"}),s.jsx("span",{className:"text-sm text-red-600 font-medium",children:((c=e.overdueTasks)==null?void 0:c.length)||0})]}),s.jsxs("div",{className:"space-y-2",children:[(l=e.overdueTasks)==null?void 0:l.slice(0,3).map(u=>{var h;return s.jsxs("div",{className:"text-sm",children:[s.jsx("div",{className:"font-medium text-gray-900",children:u.title}),s.jsxs("div",{className:"text-gray-500",children:["Asignado a: ",((h=u.assignedToUser)==null?void 0:h.name)||"Sin asignar"]})]},u.id)}),(!e.overdueTasks||e.overdueTasks.length===0)&&s.jsx("div",{className:"text-sm text-gray-500",children:"No hay tareas vencidas"})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Citas Recientes"})}),s.jsxs("div",{className:"space-y-2",children:[(d=e.recentAppointments)==null?void 0:d.slice(0,3).map(u=>{var h,f,x;return s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"font-medium text-gray-900",children:[u.fullName||((f=(h=u.client)==null?void 0:h.user)==null?void 0:f.name)||"Cliente"," - ",((x=u.lawyer)==null?void 0:x.name)||"Sin asignar"]}),s.jsxs("div",{className:"text-gray-500",children:[new Date(u.date).toLocaleDateString(),u.type==="VISITOR"&&s.jsx("span",{className:"ml-2 inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-purple-100 text-purple-800",children:"Visitante"})]})]},u.id)}),(!e.recentAppointments||e.recentAppointments.length===0)&&s.jsx("div",{className:"text-sm text-gray-500",children:"No hay citas recientes"})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Navegación Rápida"})}),s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs(be,{to:"/admin/users",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Gestionar Usuarios"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Ver y editar usuarios"})]})]}),s.jsxs(be,{to:"/admin/cases",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-green-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Gestionar Expedientes"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Ver y editar casos"})]})]}),s.jsxs(be,{to:"/admin/appointments",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-purple-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Gestionar Citas"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Ver y editar citas"})]})]}),s.jsxs(be,{to:"/admin/tasks",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-orange-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Gestionar Tareas"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Ver y editar tareas"})]})]}),s.jsxs(be,{to:"/admin/documents",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-indigo-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Gestionar Documentos"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Ver y gestionar archivos"})]})]}),s.jsxs(be,{to:"/admin/invoices",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-emerald-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Gestionar Facturas"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Ver y gestionar facturas"})]})]}),s.jsxs(be,{to:"/admin/reports",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-red-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Reportes"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Ver estadísticas del sistema"})]})]}),s.jsxs(be,{to:"/admin/parametros",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-gray-700 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6 1a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Configurar Parámetros"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Gestionar parámetros globales"})]})]}),s.jsxs(be,{to:"/admin/backup",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-pink-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Backup y Restauración"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Gestionar copias de seguridad"})]})]}),s.jsxs(be,{to:"/admin/menu-config",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-yellow-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Configurar Menús"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Gestionar navegación del sitio"})]})]}),s.jsxs(be,{to:"/admin/site-config",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-teal-600 rounded-md flex items-center justify-center",children:s.jsxs("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Configurar Sitio"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Personalizar apariencia y contenido"})]})]}),s.jsxs(be,{to:"/admin/home-builder",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-purple-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v12a4 4 0 004 4h4a2 2 0 002-2V5z"})})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Home Builder"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Diseñar página principal"})]})]}),s.jsxs(be,{to:"/admin/guided-config",className:"flex items-center p-4 border-2 border-blue-500 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-blue-900",children:"🎯 Configuración Guiada"}),s.jsx("p",{className:"text-xs text-blue-700",children:"Configurar sistema paso a paso"})]})]}),s.jsxs(be,{to:"/admin/teleassistance",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-green-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"🖥️ Teleasistencia"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Asistencia remota a usuarios"})]})]})]})})]})]})})},Bq=()=>{const[e,t]=g.useState([]),[r,n]=g.useState([]),[a,i]=g.useState(!0),[o,c]=g.useState(null),[l,d]=g.useState(""),[u,h]=g.useState("todos"),[f,x]=g.useState(null),[v,y]=g.useState(!1),[b,p]=g.useState({name:"",email:"",role:"CLIENTE",dni:"",phone:"",address:""}),[m,j]=g.useState("asc"),{user:w}=Ee();g.useEffect(()=>{N()},[]);const N=async()=>{var A,B,P,M;try{i(!0);const R=localStorage.getItem("token");if(console.log("Fetching users with token:",R?"Token exists":"No token"),console.log("Current user from context:",w),!R){console.error("No token found in localStorage"),c("No hay token de autenticación");return}const W=await X.get("/admin/users");console.log("Users response:",W.data),console.log("Response type:",typeof W.data),console.log("Is array:",Array.isArray(W.data)),Array.isArray(W.data)&&(console.log("Number of users:",W.data.length),W.data.forEach((V,z)=>{console.log(`User ${z}:`,{id:V.id,name:V.name,email:V.email,role:V.role,createdAt:V.createdAt,client:V.client,expedientesAsLawyer:V.expedientesAsLawyer,appointmentsAsLawyer:V.appointmentsAsLawyer,assignedTasks:V.assignedTasks})})),t(W.data),c(null)}catch(R){console.error("Error fetching users:",R),console.error("Error response:",R.response),console.error("Error status:",(A=R.response)==null?void 0:A.status),console.error("Error data:",(B=R.response)==null?void 0:B.data),c(((M=(P=R.response)==null?void 0:P.data)==null?void 0:M.message)||"Error al cargar usuarios")}finally{i(!1)}};g.useEffect(()=>{let A=e;l&&(A=A.filter(B=>{var P;return B.name.toLowerCase().includes(l.toLowerCase())||B.email.toLowerCase().includes(l.toLowerCase())||((P=B.client)==null?void 0:P.dni.toLowerCase().includes(l.toLowerCase()))})),u!=="todos"&&(A=A.filter(B=>B.role===u)),n(A)},[e,l,u]);function C(A){if(!A)return"";const B=A.trim().split(" ");return B.length>1?B[1].toLowerCase():""}const S=g.useMemo(()=>[...r].sort((B,P)=>{const M=C(B.name),R=C(P.name);return M<R?m==="asc"?-1:1:M>R?m==="asc"?1:-1:0}),[r,m]),E=()=>{j(A=>A==="asc"?"desc":"asc")},k=A=>{var B,P,M;x(A),p({name:A.name,email:A.email,role:A.role,dni:((B=A.client)==null?void 0:B.dni)||"",phone:((P=A.client)==null?void 0:P.phone)||"",address:((M=A.client)==null?void 0:M.address)||""}),y(!0)},T=async()=>{var A,B;if(f)try{const P=localStorage.getItem("token"),M={name:b.name,email:b.email,role:b.role,client:b.role==="CLIENTE"?{dni:b.dni,phone:b.phone,address:b.address}:void 0};await X.put(`/admin/users/${f.id}`,M),y(!1),N()}catch(P){console.error("Error updating user:",P),c(((B=(A=P.response)==null?void 0:A.data)==null?void 0:B.message)||"Error al actualizar usuario")}},D=async A=>{var B,P;if(confirm("¿Estás seguro de que quieres eliminar este usuario?"))try{const M=localStorage.getItem("token");await X.delete(`/admin/users/${A}`),N()}catch(M){console.error("Error deleting user:",M),c(((P=(B=M.response)==null?void 0:B.data)==null?void 0:P.message)||"Error al eliminar usuario")}},$=A=>{switch(A){case"ADMIN":return"bg-red-100 text-red-800";case"ABOGADO":return"bg-blue-100 text-blue-800";case"CLIENTE":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},_=A=>{switch(A){case"ADMIN":return"Administrador";case"ABOGADO":return"Abogado";case"CLIENTE":return"Cliente";default:return A}};return a?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):o?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 text-xl mb-4",children:"Error"}),s.jsx("div",{className:"text-gray-600",children:o}),s.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Reintentar"})]})}):s.jsxs("div",{className:"py-6",children:[s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gestión de Usuarios"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Administra todos los usuarios del sistema"})]})}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Filtros de Búsqueda"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar"}),s.jsx("input",{type:"text",placeholder:"Buscar por nombre, email o DNI...",value:l,onChange:A=>d(A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rol"}),s.jsxs("select",{value:u,onChange:A=>h(A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Filtrar por rol",children:[s.jsx("option",{value:"todos",children:"Todos los roles"}),s.jsx("option",{value:"ADMIN",children:"Administrador"}),s.jsx("option",{value:"ABOGADO",children:"Abogado"}),s.jsx("option",{value:"CLIENTE",children:"Cliente"})]})]}),s.jsx("div",{className:"flex items-end",children:s.jsx("button",{onClick:()=>{d(""),h("todos")},className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Limpiar Filtros"})})]})]}),s.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Lista de Usuarios"})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:E,children:["Usuario",s.jsx("span",{className:"ml-1",children:m==="asc"?"▲":"▼"})]}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rol"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Información Adicional"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actividad"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.map(A=>{var B,P,M;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:A.name}),s.jsx("div",{className:"text-sm text-gray-500",children:A.email}),s.jsxs("div",{className:"text-xs text-gray-400",children:["Registrado: ",A.createdAt?new Date(A.createdAt).toLocaleDateString():"Fecha no disponible"]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${$(A.role)}`,children:_(A.role)})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:A.client&&s.jsxs("div",{children:[s.jsxs("div",{children:["DNI: ",A.client.dni]}),A.client.phone&&s.jsxs("div",{children:["Tel: ",A.client.phone]},A.client.dni+"-phone"),A.client.address&&s.jsxs("div",{children:["Dir: ",A.client.address]},A.client.dni+"-address")]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.jsxs("div",{children:[s.jsxs("div",{children:["Casos: ",((B=A.expedientesAsLawyer)==null?void 0:B.length)||0]}),s.jsxs("div",{children:["Citas: ",((P=A.appointmentsAsLawyer)==null?void 0:P.length)||0]}),s.jsxs("div",{children:["Tareas: ",((M=A.assignedTasks)==null?void 0:M.length)||0]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>k(A),className:"text-blue-600 hover:text-blue-900",children:"Editar"},A.id+"-edit"),A.id!==(w==null?void 0:w.id)&&s.jsx("button",{onClick:()=>D(A.id),className:"text-red-600 hover:text-red-900",children:"Eliminar"},A.id+"-delete")]})})]},A.id)})})]})})]}),(!S||S.length===0)&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No se encontraron usuarios"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Intenta ajustar los filtros de búsqueda."})]})]}),v&&f&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:s.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:s.jsxs("div",{className:"mt-3",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Editar Usuario"}),s.jsx("button",{onClick:()=>y(!1),className:"text-gray-400 hover:text-gray-600","aria-label":"Cerrar modal de edición",title:"Cerrar modal de edición",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),o&&s.jsx("div",{className:"mb-4 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md p-2",children:o}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre"}),s.jsx("input",{type:"text",value:b.name,onChange:A=>p(B=>({...B,name:A.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ingrese el nombre","aria-label":"Nombre del usuario",title:"Nombre del usuario"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),s.jsx("input",{type:"email",value:b.email,onChange:A=>p(B=>({...B,email:A.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ingrese el email","aria-label":"Email del usuario",title:"Email del usuario"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rol"}),s.jsxs("select",{value:b.role,onChange:A=>p(B=>({...B,role:A.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Rol del usuario",title:"Rol del usuario",children:[s.jsx("option",{value:"CLIENTE",children:"Cliente"}),s.jsx("option",{value:"ABOGADO",children:"Abogado"}),s.jsx("option",{value:"ADMIN",children:"Administrador"})]})]}),b.role==="CLIENTE"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"DNI"}),s.jsx("input",{type:"text",value:b.dni,onChange:A=>p(B=>({...B,dni:A.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ingrese el DNI","aria-label":"DNI del cliente",title:"DNI del cliente"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Teléfono"}),s.jsx("input",{type:"text",value:b.phone,onChange:A=>p(B=>({...B,phone:A.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ingrese el teléfono","aria-label":"Teléfono del cliente",title:"Teléfono del cliente"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dirección"}),s.jsx("input",{type:"text",value:b.address,onChange:A=>p(B=>({...B,address:A.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ingrese la dirección","aria-label":"Dirección del cliente",title:"Dirección del cliente"})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx("button",{onClick:()=>y(!1),className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Cancelar"}),s.jsx("button",{onClick:T,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Actualizar"})]})]})})})]})},zq=()=>{const{user:e}=Ee(),t=i=>e?i.includes(e.role):!1,r=(e==null?void 0:e.role)==="ADMIN",n=(e==null?void 0:e.role)==="ABOGADO",a=(e==null?void 0:e.role)==="CLIENTE";return{hasPermission:t,isAdmin:r,isLawyer:n,isClient:a,userRole:(e==null?void 0:e.role)||null}},Uq=()=>{const[e,t]=g.useState([]),[r,n]=g.useState([]),[a,i]=g.useState(!0),[o,c]=g.useState(null),[l,d]=g.useState(""),[u,h]=g.useState("todos"),[f,x]=g.useState("asc"),{isAdmin:v,userRole:y}=zq();g.useEffect(()=>{b()},[]);const b=async()=>{var C,S;try{i(!0);const E=await X.get("/admin/cases");console.log("Cases response:",E.data),Array.isArray(E.data)&&E.data.forEach((k,T)=>{console.log(`Case ${T}:`,{id:k.id,title:k.title,description:k.description,status:k.status,createdAt:k.createdAt,client:k.client,lawyer:k.lawyer,documents:k.documents,tasks:k.tasks})}),t(E.data),c(null)}catch(E){console.error("Error fetching cases:",E),c(((S=(C=E.response)==null?void 0:C.data)==null?void 0:S.message)||"Error al cargar expedientes")}finally{i(!1)}};g.useEffect(()=>{let C=e;l&&(C=C.filter(S=>{var E;return S.title.toLowerCase().includes(l.toLowerCase())||((E=S.description)==null?void 0:E.toLowerCase().includes(l.toLowerCase()))||S.client.user.name.toLowerCase().includes(l.toLowerCase())||S.lawyer.name.toLowerCase().includes(l.toLowerCase())})),u!=="todos"&&(C=C.filter(S=>S.status===u)),n(C)},[e,l,u]);const p=g.useMemo(()=>[...r].sort((S,E)=>S.id<E.id?f==="asc"?-1:1:S.id>E.id?f==="asc"?1:-1:0),[r,f]),m=()=>{x(C=>C==="asc"?"desc":"asc")},j=async C=>{var S,E;if(confirm("¿Estás seguro de que quieres eliminar este expediente?"))try{await X.delete(`/admin/cases/${C}`),b()}catch(k){console.error("Error deleting case:",k),c(((E=(S=k.response)==null?void 0:S.data)==null?void 0:E.message)||"Error al eliminar expediente")}},w=C=>{switch(C){case"ABIERTO":return"bg-green-100 text-green-800";case"EN_PROCESO":return"bg-yellow-100 text-yellow-800";case"CERRADO":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},N=C=>{switch(C){case"ABIERTO":return"Abierto";case"EN_PROCESO":return"En Proceso";case"CERRADO":return"Cerrado";default:return C}};return v?a?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):o?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 text-xl mb-4",children:"Error"}),s.jsx("div",{className:"text-gray-600",children:o}),s.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Reintentar"})]})}):s.jsx("div",{className:"py-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"mb-8",children:s.jsx("div",{className:"flex justify-between items-center",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gestión de Expedientes"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Administra todos los expedientes del sistema"})]})})}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Filtros de Búsqueda"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar"}),s.jsx("input",{type:"text",placeholder:"Buscar por título, descripción, cliente o abogado...",value:l,onChange:C=>d(C.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado"}),s.jsxs("select",{value:u,onChange:C=>h(C.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Filtrar por estado",children:[s.jsx("option",{value:"todos",children:"Todos los estados"}),s.jsx("option",{value:"ABIERTO",children:"Abierto"}),s.jsx("option",{value:"EN_PROCESO",children:"En Proceso"}),s.jsx("option",{value:"CERRADO",children:"Cerrado"})]})]}),s.jsx("div",{className:"flex items-end",children:s.jsx("button",{onClick:()=>{d(""),h("todos")},className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Limpiar Filtros"})})]})]}),s.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Lista de Expedientes"})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:m,children:["Expediente",s.jsx("span",{className:"ml-1",children:f==="asc"?"▲":"▼"})]}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Abogado"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actividad"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map(C=>{var S,E,k,T,D,$,_,A,B;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:C.title||"Sin título"}),s.jsx("div",{className:"text-sm text-gray-500",children:C.description||"Sin descripción"}),s.jsxs("div",{className:"text-xs text-gray-400",children:["Creado: ",C.createdAt&&!isNaN(Date.parse(C.createdAt))?new Date(C.createdAt).toLocaleDateString():"Fecha no disponible"]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:((E=(S=C.client)==null?void 0:S.user)==null?void 0:E.name)||((T=(k=C.client)==null?void 0:k.user)==null?void 0:T.email)||"Cliente no disponible"}),s.jsx("div",{className:"text-sm text-gray-500",children:(($=(D=C.client)==null?void 0:D.user)==null?void 0:$.email)||"Email no disponible"})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:((_=C.lawyer)==null?void 0:_.name)||((A=C.lawyer)==null?void 0:A.email)||"Abogado no disponible"}),s.jsx("div",{className:"text-sm text-gray-500",children:((B=C.lawyer)==null?void 0:B.email)||"Email no disponible"})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${w(C.status)}`,children:N(C.status)})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.jsxs("div",{children:[s.jsxs("div",{children:["Documentos: ",Array.isArray(C.documents)?C.documents.length:0]}),s.jsxs("div",{children:["Tareas: ",Array.isArray(C.tasks)?C.tasks.length:0]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(be,{to:`/admin/cases/${C.id}`,className:"text-blue-600 hover:text-blue-900",children:"Ver"},C.id+"-ver"),s.jsx("button",{onClick:()=>j(C.id),className:"text-red-600 hover:text-red-900",children:"Eliminar"},C.id+"-eliminar")]})})]},C.id||Math.random())})})]})})]}),(!r||r.length===0)&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No se encontraron expedientes"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Intenta ajustar los filtros de búsqueda."})]})]})}):(console.warn(`Access denied: User role ${y} does not have admin permissions`),s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 text-xl mb-4",children:"Acceso Denegado"}),s.jsx("div",{className:"text-gray-600",children:"No tienes permisos para acceder a esta página."})]})}))},Vq=()=>{var Q,de;const[e,t]=g.useState([]),[r,n]=g.useState([]),[a,i]=g.useState([]),[o,c]=g.useState(!0),[l,d]=g.useState(null),[u,h]=g.useState(""),[f,x]=g.useState(""),[v,y]=g.useState("date"),[b,p]=g.useState("desc"),[m,j]=g.useState(1),[w]=g.useState(10),[N,C]=g.useState(null),[S,E]=g.useState(!1),[k,T]=g.useState(new Date),[D,$]=g.useState({date:"",time:"",location:"",notes:"",lawyerId:""});g.useEffect(()=>{_(),A();const q=setInterval(()=>{_()},3e4);return()=>clearInterval(q)},[]);const _=async()=>{var q,ue;try{c(!0);const oe=await X.get("/admin/appointments");t(oe.data),T(new Date),d(null)}catch(oe){console.error("Error fetching appointments:",oe),d(((ue=(q=oe.response)==null?void 0:q.data)==null?void 0:ue.message)||"Error al cargar citas")}finally{c(!1)}},A=async()=>{try{console.log("🔍 Fetching lawyers...");const q=await X.get("/admin/users");if(console.log("📊 Response from /admin/users:",q),console.log("📋 Response data type:",typeof q.data),console.log("📋 Response data:",q.data),Array.isArray(q.data)){const ue=q.data.filter(oe=>oe.role==="ABOGADO");console.log("👨‍💼 Found lawyers:",ue),i(ue)}else console.error("Error: response.data is not an array:",q.data),i([])}catch(q){console.error("Error fetching lawyers:",q)}};g.useEffect(()=>{let q=e;if(u){const ue=u.toLowerCase().split(";").filter(oe=>oe.trim().length>0);q=q.filter(oe=>ue.every(ye=>{var J,me,_e,ze,Ce,Pe;const $e=ye.trim(),st={clientName:oe.fullName||((me=(J=oe.client)==null?void 0:J.user)==null?void 0:me.name)||"",clientEmail:oe.email||((ze=(_e=oe.client)==null?void 0:_e.user)==null?void 0:ze.email)||"",lawyerName:((Ce=oe.lawyer)==null?void 0:Ce.name)||"",lawyerEmail:((Pe=oe.lawyer)==null?void 0:Pe.email)||"",location:oe.location||"No especificada",notes:oe.notes||"",type:oe.type==="VISITOR"?"visitante":"cliente",status:B(oe.date)?"próxima":"pasada"};return Object.values(st).some(He=>He.toLowerCase().includes($e))}))}if(f){const ue=new Date(f);q=q.filter(oe=>new Date(oe.date).toDateString()===ue.toDateString())}n(q),j(1)},[e,u,f]);const B=q=>new Date(q)>new Date,P=q=>new Date(q)<new Date,M=(q,ue)=>{var oe,ye,$e;switch(ue){case"date":return new Date(q.date).getTime();case"client":return(q.fullName||((ye=(oe=q.client)==null?void 0:oe.user)==null?void 0:ye.name)||"").toLowerCase();case"lawyer":return((($e=q.lawyer)==null?void 0:$e.name)||"").toLowerCase();case"location":return(q.location||"").toLowerCase();case"status":return B(q.date)?1:0;case"type":return q.type;default:return""}},R=g.useMemo(()=>[...r].sort((q,ue)=>{const oe=M(q,v),ye=M(ue,v);return typeof oe=="string"&&typeof ye=="string"?b==="asc"?oe.localeCompare(ye):ye.localeCompare(oe):b==="asc"?oe-ye:ye-oe}),[r,v,b]),W=Math.ceil(R.length/w),V=(m-1)*w,z=V+w,H=R.slice(V,z),G=q=>{v===q?p(ue=>ue==="asc"?"desc":"asc"):(y(q),p("asc"))},Z=q=>{j(q)},F=q=>{var oe;const ue=new Date(q.date);$({date:ue.toISOString().split("T")[0],time:ue.toTimeString().slice(0,5),location:q.location||"",notes:q.notes||"",lawyerId:((oe=q.lawyer)==null?void 0:oe.id)||""}),C(q),E(!0)},U=async()=>{var q,ue;if(N)try{const oe=localStorage.getItem("token"),ye={date:`${D.date}T${D.time}:00`,location:D.location,notes:D.notes,lawyerId:D.lawyerId};await X.put(`/admin/appointments/${N.id}`,ye),E(!1),C(null),_()}catch(oe){console.error("Error updating appointment:",oe),d(((ue=(q=oe.response)==null?void 0:q.data)==null?void 0:ue.message)||"Error al actualizar cita")}},Y=async q=>{var ue,oe;if(confirm("¿Estás seguro de que quieres eliminar esta cita?"))try{await X.delete(`/admin/appointments/${q}`),_()}catch(ye){console.error("Error deleting appointment:",ye),d(((oe=(ue=ye.response)==null?void 0:ue.data)==null?void 0:oe.message)||"Error al eliminar cita")}};return o?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):l?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 text-xl mb-4",children:"Error"}),s.jsx("div",{className:"text-gray-600",children:l}),s.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Reintentar"})]})}):s.jsxs("div",{className:"py-6",children:[s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gestión de Citas"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Administra todas las citas del sistema - Asigna abogados y reprograma citas"}),s.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["Última actualización: ",k.toLocaleString(),s.jsx("span",{className:"ml-2 text-blue-600",children:"(Actualización automática cada 30s)"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("button",{onClick:_,disabled:o,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),s.jsx("span",{children:"Refrescar"})]}),u&&s.jsxs("button",{onClick:()=>{console.log("🔍 DEBUG: Analizando búsqueda actual"),console.log("📝 Término de búsqueda:",u),console.log("📊 Total de citas:",e.length),console.log("🎯 Citas filtradas:",r.length),console.log("---"),e.forEach(q=>{var ye,$e,st,J,me,_e;const ue=u.toLowerCase().split(";").filter(ze=>ze.trim().length>0),oe={clientName:q.fullName||(($e=(ye=q.client)==null?void 0:ye.user)==null?void 0:$e.name)||"",clientEmail:q.email||((J=(st=q.client)==null?void 0:st.user)==null?void 0:J.email)||"",lawyerName:((me=q.lawyer)==null?void 0:me.name)||"",lawyerEmail:((_e=q.lawyer)==null?void 0:_e.email)||"",location:q.location||"No especificada",notes:q.notes||"",type:q.type==="VISITOR"?"visitante":"cliente",status:B(q.date)?"próxima":"pasada"};console.log(`🔍 Cita ${q.id}:`),console.log("📋 Campos:",oe),ue.forEach(ze=>{const Ce=ze.trim(),Pe=Object.entries(oe).filter(([He,zt])=>zt.toLowerCase().includes(Ce)).map(([He,zt])=>`${He}: "${zt}"`);Pe.length>0?console.log(`✅ "${Ce}" encontrado en:`,Pe):console.log(`❌ "${Ce}" NO encontrado`)}),console.log("---")})},className:"px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 flex items-center space-x-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("span",{children:"Debug"})]})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar"}),s.jsx("input",{type:"text",placeholder:"Buscar por cliente, abogado, ubicación, notas, tipo (cliente/visitante) o estado (próxima/pasada). Puedes combinar términos separados por punto y coma (;)...",value:u,onChange:q=>h(q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha"}),s.jsx("input",{type:"date",value:f,onChange:q=>x(q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Filtrar por fecha"})]}),s.jsx("div",{className:"flex items-end",children:s.jsx("button",{onClick:()=>{h(""),x("")},className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Limpiar Filtros"})})]})}),s.jsx("div",{className:"bg-white p-4 rounded-lg shadow mb-4",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"text-sm text-gray-600",children:[s.jsx("span",{className:"font-medium",children:R.length})," citas encontradas",u&&s.jsxs("span",{className:"ml-2",children:['para "',s.jsx("span",{className:"font-medium",children:u}),'"']}),f&&s.jsxs("span",{className:"ml-2",children:["en ",s.jsx("span",{className:"font-medium",children:new Date(f).toLocaleDateString()})]})]}),s.jsxs("div",{className:"text-sm text-gray-500",children:["Mostrando ",V+1,"-",Math.min(z,R.length)," de ",R.length," citas"]})]})}),s.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:()=>G("date"),children:["Fecha y Hora",s.jsx("span",{className:"ml-1",children:v==="date"?b==="asc"?"▲":"▼":""})]}),s.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:()=>G("client"),children:["Cliente",s.jsx("span",{className:"ml-1",children:v==="client"?b==="asc"?"▲":"▼":""})]}),s.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:()=>G("lawyer"),children:["Abogado",s.jsx("span",{className:"ml-1",children:v==="lawyer"?b==="asc"?"▲":"▼":""})]}),s.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:()=>G("location"),children:["Ubicación",s.jsx("span",{className:"ml-1",children:v==="location"?b==="asc"?"▲":"▼":""})]}),s.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:()=>G("status"),children:["Estado",s.jsx("span",{className:"ml-1",children:v==="status"?b==="asc"?"▲":"▼":""})]}),s.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:()=>G("type"),children:["Tipo",s.jsx("span",{className:"ml-1",children:v==="type"?b==="asc"?"▲":"▼":""})]}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:H.map(q=>{var ue,oe,ye,$e,st,J;return s.jsxs("tr",{className:`hover:bg-gray-50 ${P(q.date)?"bg-gray-50":""}`,children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:new Date(q.date).toLocaleDateString()}),s.jsx("div",{className:"text-sm text-gray-500",children:new Date(q.date).toLocaleTimeString()})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:q.fullName||((oe=(ue=q.client)==null?void 0:ue.user)==null?void 0:oe.name)||"—"}),s.jsx("div",{className:"text-sm text-gray-500",children:q.email||(($e=(ye=q.client)==null?void 0:ye.user)==null?void 0:$e.email)||"—"})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:((st=q.lawyer)==null?void 0:st.name)||"—"}),s.jsx("div",{className:"text-sm text-gray-500",children:((J=q.lawyer)==null?void 0:J.email)||"—"})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:q.location||"No especificada"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:B(q.date)?s.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:"Próxima"}):s.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800",children:"Pasada"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:q.type==="VISITOR"?s.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-purple-100 text-purple-800",children:"Visitante (Chatbot)"}):s.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:"Cliente"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>F(q),className:"text-blue-600 hover:text-blue-900",children:"Editar"}),s.jsx("button",{onClick:()=>Y(q.id),className:"text-red-600 hover:text-red-900",children:"Eliminar"})]})})]},q.id)})})]})})}),W>1&&s.jsxs("div",{className:"flex justify-center items-center space-x-2 mt-6",children:[s.jsx("button",{onClick:()=>Z(m-1),disabled:m===1,className:"px-3 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),s.jsxs("span",{className:"text-sm text-gray-700",children:["Página ",m," de ",W]}),s.jsx("button",{onClick:()=>Z(m+1),disabled:m===W,className:"px-3 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"Siguiente"})]}),r.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No se encontraron citas"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Intenta ajustar los filtros de búsqueda."})]})]}),S&&N&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:s.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:s.jsxs("div",{className:"mt-3",children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Editar Cita - ",((de=(Q=N.client)==null?void 0:Q.user)==null?void 0:de.name)||"Desconocido"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha"}),s.jsx("input",{type:"date",value:D.date,onChange:q=>$({...D,date:q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hora"}),s.jsx("input",{type:"time",value:D.time,onChange:q=>$({...D,time:q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Abogado"}),s.jsx("select",{value:D.lawyerId,onChange:q=>$({...D,lawyerId:q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:a.map(q=>s.jsxs("option",{value:q.id,children:[q.name," (",q.email,")"]},q.id))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ubicación"}),s.jsx("input",{type:"text",value:D.location,onChange:q=>$({...D,location:q.target.value}),placeholder:"Ubicación de la cita",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas"}),s.jsx("textarea",{value:D.notes,onChange:q=>$({...D,notes:q.target.value}),placeholder:"Notas adicionales",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx("button",{onClick:()=>{E(!1),C(null)},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Cancelar"}),s.jsx("button",{onClick:U,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Guardar Cambios"})]})]})})})]})},Hq=()=>{const[e,t]=g.useState([]),[r,n]=g.useState([]),[a,i]=g.useState(!0),[o,c]=g.useState(null),[l,d]=g.useState(""),[u,h]=g.useState("todos"),[f,x]=g.useState("todos"),[v,y]=g.useState("asc");g.useEffect(()=>{b()},[]);const b=async()=>{var k,T;try{i(!0);const D=await X.get("/admin/tasks");t(D.data),c(null)}catch(D){console.error("Error fetching tasks:",D),c(((T=(k=D.response)==null?void 0:k.data)==null?void 0:T.message)||"Error al cargar tareas")}finally{i(!1)}};g.useEffect(()=>{let k=e;l&&(k=k.filter(T=>{var D,$,_,A;return T.title.toLowerCase().includes(l.toLowerCase())||((D=T.description)==null?void 0:D.toLowerCase().includes(l.toLowerCase()))||(($=T.expediente)==null?void 0:$.title.toLowerCase().includes(l.toLowerCase()))||((_=T.client)==null?void 0:_.user.name.toLowerCase().includes(l.toLowerCase()))||((A=T.assignedToUser)==null?void 0:A.name.toLowerCase().includes(l.toLowerCase()))})),u!=="todos"&&(k=k.filter(T=>T.status===u)),f!=="todos"&&(k=k.filter(T=>T.priority===f)),n(k)},[e,l,u,f]);const p=g.useMemo(()=>[...r].sort((k,T)=>{if(!k.dueDate)return 1;if(!T.dueDate)return-1;const D=new Date(k.dueDate).getTime(),$=new Date(T.dueDate).getTime();return v==="asc"?D-$:$-D}),[r,v]),m=()=>{y(k=>k==="asc"?"desc":"asc")},j=async k=>{var T,D;if(confirm("¿Estás seguro de que quieres eliminar esta tarea?"))try{await X.delete(`/admin/tasks/${k}`),b()}catch($){console.error("Error deleting task:",$),c(((D=(T=$.response)==null?void 0:T.data)==null?void 0:D.message)||"Error al eliminar tarea")}},w=k=>{switch(k){case"URGENTE":return"bg-red-100 text-red-800";case"ALTA":return"bg-orange-100 text-orange-800";case"MEDIA":return"bg-yellow-100 text-yellow-800";case"BAJA":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},N=k=>{switch(k){case"PENDIENTE":return"bg-yellow-100 text-yellow-800";case"EN_PROGRESO":return"bg-blue-100 text-blue-800";case"COMPLETADA":return"bg-green-100 text-green-800";case"CANCELADA":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},C=k=>{switch(k){case"URGENTE":return"Urgente";case"ALTA":return"Alta";case"MEDIA":return"Media";case"BAJA":return"Baja";default:return k}},S=k=>{switch(k){case"PENDIENTE":return"Pendiente";case"EN_PROGRESO":return"En Progreso";case"COMPLETADA":return"Completada";case"CANCELADA":return"Cancelada";default:return k}},E=k=>new Date(k)<new Date;return a?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):o?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 text-xl mb-4",children:"Error"}),s.jsx("div",{className:"text-gray-600",children:o}),s.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Reintentar"})]})}):s.jsx("div",{className:"py-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"mb-8",children:s.jsx("div",{className:"flex justify-between items-center",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gestión de Tareas"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Administra todas las tareas del sistema"})]})})}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Filtros de Búsqueda"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar"}),s.jsx("input",{type:"text",placeholder:"Buscar por título, descripción, expediente, cliente o asignado...",value:l,onChange:k=>d(k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado"}),s.jsxs("select",{value:u,onChange:k=>h(k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Filtrar por estado",children:[s.jsx("option",{value:"todos",children:"Todos los estados"}),s.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),s.jsx("option",{value:"EN_PROGRESO",children:"En Progreso"}),s.jsx("option",{value:"COMPLETADA",children:"Completada"}),s.jsx("option",{value:"CANCELADA",children:"Cancelada"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prioridad"}),s.jsxs("select",{value:f,onChange:k=>x(k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Filtrar por prioridad",children:[s.jsx("option",{value:"todos",children:"Todas las prioridades"}),s.jsx("option",{value:"URGENTE",children:"Urgente"}),s.jsx("option",{value:"ALTA",children:"Alta"}),s.jsx("option",{value:"MEDIA",children:"Media"}),s.jsx("option",{value:"BAJA",children:"Baja"})]})]}),s.jsx("div",{className:"flex items-end",children:s.jsx("button",{onClick:()=>{d(""),h("todos"),x("todos")},className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Limpiar Filtros"})})]})]}),s.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Lista de Tareas"})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tarea"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Prioridad"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),s.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:m,children:["Vencimiento",s.jsx("span",{className:"ml-1",children:v==="asc"?"▲":"▼"})]}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Asignado"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map(k=>{var T;return s.jsxs("tr",{className:`hover:bg-gray-50 ${k.dueDate&&E(k.dueDate)&&k.status!=="COMPLETADA"?"bg-red-50":""}`,children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:k.title}),s.jsx("div",{className:"text-sm text-gray-500",children:k.description||"Sin descripción"}),k.expediente&&s.jsxs("div",{className:"text-xs text-blue-600",children:["📋 ",k.expediente.title]}),k.client&&s.jsxs("div",{className:"text-xs text-green-600",children:["👤 ",k.client.user.name]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${w(k.priority)}`,children:C(k.priority)})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${N(k.status)}`,children:S(k.status)})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:k.dueDate?s.jsxs("div",{children:[s.jsx("div",{className:k.dueDate&&E(k.dueDate)&&k.status!=="COMPLETADA"?"text-red-600 font-medium":"",children:new Date(k.dueDate).toLocaleDateString()}),k.dueDate&&E(k.dueDate)&&k.status!=="COMPLETADA"&&s.jsx("div",{className:"text-xs text-red-500",children:"⚠️ Vencida"})]}):"Sin fecha límite"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((T=k.assignedToUser)==null?void 0:T.name)||"Sin asignar"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsx("div",{className:"flex space-x-2",children:s.jsx("button",{onClick:()=>j(k.id),className:"text-red-600 hover:text-red-900",children:"Eliminar"})})})]},k.id)})})]})})]}),p.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No se encontraron tareas"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Intenta ajustar los filtros de búsqueda."})]})]})})},Wq=()=>{const[e,t]=g.useState([]),[r,n]=g.useState([]),[a,i]=g.useState(!0),[o,c]=g.useState(null),[l,d]=g.useState(""),[u,h]=g.useState("todos");g.useEffect(()=>{f()},[]);const f=async()=>{var b,p;try{i(!0);const m=localStorage.getItem("token"),j=await X.get("/admin/documents",{headers:{Authorization:`Bearer ${m}`}});t(j.data),c(null)}catch(m){console.error("Error fetching documents:",m),c(((p=(b=m.response)==null?void 0:b.data)==null?void 0:p.message)||"Error al cargar documentos")}finally{i(!1)}};g.useEffect(()=>{let b=e;l&&(b=b.filter(p=>{var m;return p.originalName.toLowerCase().includes(l.toLowerCase())||((m=p.description)==null?void 0:m.toLowerCase().includes(l.toLowerCase()))||p.expediente.title.toLowerCase().includes(l.toLowerCase())||p.expediente.client.user.name.toLowerCase().includes(l.toLowerCase())||p.uploadedByUser.name.toLowerCase().includes(l.toLowerCase())})),u!=="todos"&&(b=b.filter(p=>p.mimeType.includes(u))),n(b)},[e,l,u]);const x=async b=>{var p,m;if(confirm("¿Estás seguro de que quieres eliminar este documento?"))try{const j=localStorage.getItem("token");await X.delete(`/admin/documents/${b}`,{headers:{Authorization:`Bearer ${j}`}}),f()}catch(j){console.error("Error deleting document:",j),c(((m=(p=j.response)==null?void 0:p.data)==null?void 0:m.message)||"Error al eliminar documento")}},v=b=>{if(b===0)return"0 Bytes";const p=1024,m=["Bytes","KB","MB","GB"],j=Math.floor(Math.log(b)/Math.log(p));return parseFloat((b/Math.pow(p,j)).toFixed(2))+" "+m[j]},y=b=>b.includes("pdf")?"📄":b.includes("image")?"🖼️":b.includes("word")||b.includes("document")?"📝":b.includes("excel")||b.includes("spreadsheet")?"📊":b.includes("powerpoint")||b.includes("presentation")?"📈":"📎";return a?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):o?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 text-xl mb-4",children:"Error"}),s.jsx("div",{className:"text-gray-600",children:o}),s.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Reintentar"})]})}):s.jsx("div",{className:"py-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"mb-8",children:s.jsx("div",{className:"flex justify-between items-center",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gestión de Documentos"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Administra todos los documentos del sistema"})]})})}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Filtros de Búsqueda"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar"}),s.jsx("input",{type:"text",placeholder:"Buscar por nombre, descripción, expediente, cliente o subido por...",value:l,onChange:b=>d(b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Archivo"}),s.jsxs("select",{value:u,onChange:b=>h(b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Filtrar por tipo de archivo",children:[s.jsx("option",{value:"todos",children:"Todos los tipos"}),s.jsx("option",{value:"pdf",children:"PDF"}),s.jsx("option",{value:"image",children:"Imágenes"}),s.jsx("option",{value:"word",children:"Documentos Word"}),s.jsx("option",{value:"excel",children:"Hojas de cálculo"}),s.jsx("option",{value:"powerpoint",children:"Presentaciones"})]})]}),s.jsx("div",{className:"flex items-end",children:s.jsx("button",{onClick:()=>{d(""),h("todos")},className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Limpiar Filtros"})})]})]}),s.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Lista de Documentos"})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Documento"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expediente"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subido por"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tamaño"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(b=>{var p,m,j,w,N,C,S,E,k;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("span",{className:"text-2xl",children:y(b.mimeType)})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:b.originalName}),s.jsx("div",{className:"text-sm text-gray-500",children:b.description||"Sin descripción"}),s.jsxs("div",{className:"text-xs text-gray-400",children:["Subido: ",new Date(b.uploadedAt).toLocaleDateString()]})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm text-gray-900",children:((p=b.expediente)==null?void 0:p.title)||"Sin expediente"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:((w=(j=(m=b.expediente)==null?void 0:m.client)==null?void 0:j.user)==null?void 0:w.name)||"Sin cliente"}),s.jsx("div",{className:"text-sm text-gray-500",children:((S=(C=(N=b.expediente)==null?void 0:N.client)==null?void 0:C.user)==null?void 0:S.email)||"Sin email"})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:((E=b.uploadedByUser)==null?void 0:E.name)||"Sin usuario"}),s.jsx("div",{className:"text-sm text-gray-500",children:((k=b.uploadedByUser)==null?void 0:k.email)||"Sin email"})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:v(b.fileSize)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("a",{href:b.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-900",children:"Ver"}),s.jsx("button",{onClick:()=>x(b.id),className:"text-red-600 hover:text-red-900",children:"Eliminar"})]})})]},b.id)})})]})})]}),r.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No se encontraron documentos"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Intenta ajustar los filtros de búsqueda."})]})]})})};var Eh={},EC={L:1,M:0,Q:3,H:2},kC={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},Yq=kC;function DC(e){this.mode=Yq.MODE_8BIT_BYTE,this.data=e}DC.prototype={getLength:function(e){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}};var qq=DC,Fc=EC;function As(e,t){this.totalCount=e,this.dataCount=t}As.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];As.getRSBlocks=function(e,t){var r=As.getRsBlockTable(e,t);if(r==null)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var n=r.length/3,a=new Array,i=0;i<n;i++)for(var o=r[i*3+0],c=r[i*3+1],l=r[i*3+2],d=0;d<o;d++)a.push(new As(c,l));return a};As.getRsBlockTable=function(e,t){switch(t){case Fc.L:return As.RS_BLOCK_TABLE[(e-1)*4+0];case Fc.M:return As.RS_BLOCK_TABLE[(e-1)*4+1];case Fc.Q:return As.RS_BLOCK_TABLE[(e-1)*4+2];case Fc.H:return As.RS_BLOCK_TABLE[(e-1)*4+3];default:return}};var Gq=As;function AC(){this.buffer=new Array,this.length=0}AC.prototype={get:function(e){var t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1},put:function(e,t){for(var r=0;r<t;r++)this.putBit((e>>>t-r-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var Kq=AC,ds={glog:function(e){if(e<1)throw new Error("glog("+e+")");return ds.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return ds.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var It=0;It<8;It++)ds.EXP_TABLE[It]=1<<It;for(var It=8;It<256;It++)ds.EXP_TABLE[It]=ds.EXP_TABLE[It-4]^ds.EXP_TABLE[It-5]^ds.EXP_TABLE[It-6]^ds.EXP_TABLE[It-8];for(var It=0;It<255;It++)ds.LOG_TABLE[ds.EXP_TABLE[It]]=It;var TC=ds,aa=TC;function vd(e,t){if(e.length==null)throw new Error(e.length+"/"+t);for(var r=0;r<e.length&&e[r]==0;)r++;this.num=new Array(e.length-r+t);for(var n=0;n<e.length-r;n++)this.num[n]=e[n+r]}vd.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),r=0;r<this.getLength();r++)for(var n=0;n<e.getLength();n++)t[r+n]^=aa.gexp(aa.glog(this.get(r))+aa.glog(e.get(n)));return new vd(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=aa.glog(this.get(0))-aa.glog(e.get(0)),r=new Array(this.getLength()),n=0;n<this.getLength();n++)r[n]=this.get(n);for(var n=0;n<e.getLength();n++)r[n]^=aa.gexp(aa.glog(e.get(n))+t);return new vd(r,0).mod(e)}};var _C=vd,Pr=kC,Ab=_C,Qq=TC,jn={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},Pt={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;Pt.getBCHDigit(t)-Pt.getBCHDigit(Pt.G15)>=0;)t^=Pt.G15<<Pt.getBCHDigit(t)-Pt.getBCHDigit(Pt.G15);return(e<<10|t)^Pt.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;Pt.getBCHDigit(t)-Pt.getBCHDigit(Pt.G18)>=0;)t^=Pt.G18<<Pt.getBCHDigit(t)-Pt.getBCHDigit(Pt.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;e!=0;)t++,e>>>=1;return t},getPatternPosition:function(e){return Pt.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,r){switch(e){case jn.PATTERN000:return(t+r)%2==0;case jn.PATTERN001:return t%2==0;case jn.PATTERN010:return r%3==0;case jn.PATTERN011:return(t+r)%3==0;case jn.PATTERN100:return(Math.floor(t/2)+Math.floor(r/3))%2==0;case jn.PATTERN101:return t*r%2+t*r%3==0;case jn.PATTERN110:return(t*r%2+t*r%3)%2==0;case jn.PATTERN111:return(t*r%3+(t+r)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new Ab([1],0),r=0;r<e;r++)t=t.multiply(new Ab([1,Qq.gexp(r)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case Pr.MODE_NUMBER:return 10;case Pr.MODE_ALPHA_NUM:return 9;case Pr.MODE_8BIT_BYTE:return 8;case Pr.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case Pr.MODE_NUMBER:return 12;case Pr.MODE_ALPHA_NUM:return 11;case Pr.MODE_8BIT_BYTE:return 16;case Pr.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else if(t<41)switch(e){case Pr.MODE_NUMBER:return 14;case Pr.MODE_ALPHA_NUM:return 13;case Pr.MODE_8BIT_BYTE:return 16;case Pr.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}else throw new Error("type:"+t)},getLostPoint:function(e){for(var t=e.getModuleCount(),r=0,n=0;n<t;n++)for(var a=0;a<t;a++){for(var i=0,o=e.isDark(n,a),c=-1;c<=1;c++)if(!(n+c<0||t<=n+c))for(var l=-1;l<=1;l++)a+l<0||t<=a+l||c==0&&l==0||o==e.isDark(n+c,a+l)&&i++;i>5&&(r+=3+i-5)}for(var n=0;n<t-1;n++)for(var a=0;a<t-1;a++){var d=0;e.isDark(n,a)&&d++,e.isDark(n+1,a)&&d++,e.isDark(n,a+1)&&d++,e.isDark(n+1,a+1)&&d++,(d==0||d==4)&&(r+=3)}for(var n=0;n<t;n++)for(var a=0;a<t-6;a++)e.isDark(n,a)&&!e.isDark(n,a+1)&&e.isDark(n,a+2)&&e.isDark(n,a+3)&&e.isDark(n,a+4)&&!e.isDark(n,a+5)&&e.isDark(n,a+6)&&(r+=40);for(var a=0;a<t;a++)for(var n=0;n<t-6;n++)e.isDark(n,a)&&!e.isDark(n+1,a)&&e.isDark(n+2,a)&&e.isDark(n+3,a)&&e.isDark(n+4,a)&&!e.isDark(n+5,a)&&e.isDark(n+6,a)&&(r+=40);for(var u=0,a=0;a<t;a++)for(var n=0;n<t;n++)e.isDark(n,a)&&u++;var h=Math.abs(100*u/t/t-50)/5;return r+=h*10,r}},Xq=Pt,Jq=qq,MC=Gq,OC=Kq,ra=Xq,Zq=_C;function Ts(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var _r=Ts.prototype;_r.addData=function(e){var t=new Jq(e);this.dataList.push(t),this.dataCache=null};_r.isDark=function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]};_r.getModuleCount=function(){return this.moduleCount};_r.make=function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){for(var t=MC.getRSBlocks(e,this.errorCorrectLevel),r=new OC,n=0,a=0;a<t.length;a++)n+=t[a].dataCount;for(var a=0;a<this.dataList.length;a++){var i=this.dataList[a];r.put(i.mode,4),r.put(i.getLength(),ra.getLengthInBits(i.mode,e)),i.write(r)}if(r.getLengthInBits()<=n*8)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())};_r.makeImpl=function(e,t){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++)this.modules[r][n]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),this.dataCache==null&&(this.dataCache=Ts.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)};_r.setupPositionProbePattern=function(e,t){for(var r=-1;r<=7;r++)if(!(e+r<=-1||this.moduleCount<=e+r))for(var n=-1;n<=7;n++)t+n<=-1||this.moduleCount<=t+n||(0<=r&&r<=6&&(n==0||n==6)||0<=n&&n<=6&&(r==0||r==6)||2<=r&&r<=4&&2<=n&&n<=4?this.modules[e+r][t+n]=!0:this.modules[e+r][t+n]=!1)};_r.getBestMaskPattern=function(){for(var e=0,t=0,r=0;r<8;r++){this.makeImpl(!0,r);var n=ra.getLostPoint(this);(r==0||e>n)&&(e=n,t=r)}return t};_r.createMovieClip=function(e,t,r){var n=e.createEmptyMovieClip(t,r),a=1;this.make();for(var i=0;i<this.modules.length;i++)for(var o=i*a,c=0;c<this.modules[i].length;c++){var l=c*a,d=this.modules[i][c];d&&(n.beginFill(0,100),n.moveTo(l,o),n.lineTo(l+a,o),n.lineTo(l+a,o+a),n.lineTo(l,o+a),n.endFill())}return n};_r.setupTimingPattern=function(){for(var e=8;e<this.moduleCount-8;e++)this.modules[e][6]==null&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)this.modules[6][t]==null&&(this.modules[6][t]=t%2==0)};_r.setupPositionAdjustPattern=function(){for(var e=ra.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var r=0;r<e.length;r++){var n=e[t],a=e[r];if(this.modules[n][a]==null)for(var i=-2;i<=2;i++)for(var o=-2;o<=2;o++)i==-2||i==2||o==-2||o==2||i==0&&o==0?this.modules[n+i][a+o]=!0:this.modules[n+i][a+o]=!1}};_r.setupTypeNumber=function(e){for(var t=ra.getBCHTypeNumber(this.typeNumber),r=0;r<18;r++){var n=!e&&(t>>r&1)==1;this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=n}for(var r=0;r<18;r++){var n=!e&&(t>>r&1)==1;this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=n}};_r.setupTypeInfo=function(e,t){for(var r=this.errorCorrectLevel<<3|t,n=ra.getBCHTypeInfo(r),a=0;a<15;a++){var i=!e&&(n>>a&1)==1;a<6?this.modules[a][8]=i:a<8?this.modules[a+1][8]=i:this.modules[this.moduleCount-15+a][8]=i}for(var a=0;a<15;a++){var i=!e&&(n>>a&1)==1;a<8?this.modules[8][this.moduleCount-a-1]=i:a<9?this.modules[8][15-a-1+1]=i:this.modules[8][15-a-1]=i}this.modules[this.moduleCount-8][8]=!e};_r.mapData=function(e,t){for(var r=-1,n=this.moduleCount-1,a=7,i=0,o=this.moduleCount-1;o>0;o-=2)for(o==6&&o--;;){for(var c=0;c<2;c++)if(this.modules[n][o-c]==null){var l=!1;i<e.length&&(l=(e[i]>>>a&1)==1);var d=ra.getMask(t,n,o-c);d&&(l=!l),this.modules[n][o-c]=l,a--,a==-1&&(i++,a=7)}if(n+=r,n<0||this.moduleCount<=n){n-=r,r=-r;break}}};Ts.PAD0=236;Ts.PAD1=17;Ts.createData=function(e,t,r){for(var n=MC.getRSBlocks(e,t),a=new OC,i=0;i<r.length;i++){var o=r[i];a.put(o.mode,4),a.put(o.getLength(),ra.getLengthInBits(o.mode,e)),o.write(a)}for(var c=0,i=0;i<n.length;i++)c+=n[i].dataCount;if(a.getLengthInBits()>c*8)throw new Error("code length overflow. ("+a.getLengthInBits()+">"+c*8+")");for(a.getLengthInBits()+4<=c*8&&a.put(0,4);a.getLengthInBits()%8!=0;)a.putBit(!1);for(;!(a.getLengthInBits()>=c*8||(a.put(Ts.PAD0,8),a.getLengthInBits()>=c*8));)a.put(Ts.PAD1,8);return Ts.createBytes(a,n)};Ts.createBytes=function(e,t){for(var r=0,n=0,a=0,i=new Array(t.length),o=new Array(t.length),c=0;c<t.length;c++){var l=t[c].dataCount,d=t[c].totalCount-l;n=Math.max(n,l),a=Math.max(a,d),i[c]=new Array(l);for(var u=0;u<i[c].length;u++)i[c][u]=255&e.buffer[u+r];r+=l;var h=ra.getErrorCorrectPolynomial(d),f=new Zq(i[c],h.getLength()-1),x=f.mod(h);o[c]=new Array(h.getLength()-1);for(var u=0;u<o[c].length;u++){var v=u+x.getLength()-o[c].length;o[c][u]=v>=0?x.get(v):0}}for(var y=0,u=0;u<t.length;u++)y+=t[u].totalCount;for(var b=new Array(y),p=0,u=0;u<n;u++)for(var c=0;c<t.length;c++)u<i[c].length&&(b[p++]=i[c][u]);for(var u=0;u<a;u++)for(var c=0;c<t.length;c++)u<o[c].length&&(b[p++]=o[c][u]);return b};var eG=Ts,Xx={};Object.defineProperty(Xx,"__esModule",{value:!0});var tG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rG=Vg,Lr=PC(rG),RC=g,Bc=PC(RC);function PC(e){return e&&e.__esModule?e:{default:e}}function sG(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}var nG={bgColor:Lr.default.oneOfType([Lr.default.object,Lr.default.string]).isRequired,bgD:Lr.default.string.isRequired,fgColor:Lr.default.oneOfType([Lr.default.object,Lr.default.string]).isRequired,fgD:Lr.default.string.isRequired,size:Lr.default.number.isRequired,title:Lr.default.string,viewBoxSize:Lr.default.number.isRequired,xmlns:Lr.default.string},Jx=(0,RC.forwardRef)(function(e,t){var r=e.bgColor,n=e.bgD,a=e.fgD,i=e.fgColor,o=e.size,c=e.title,l=e.viewBoxSize,d=e.xmlns,u=d===void 0?"http://www.w3.org/2000/svg":d,h=sG(e,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return Bc.default.createElement("svg",tG({},h,{height:o,ref:t,viewBox:"0 0 "+l+" "+l,width:o,xmlns:u}),c?Bc.default.createElement("title",null,c):null,Bc.default.createElement("path",{d:n,fill:r}),Bc.default.createElement("path",{d:a,fill:i}))});Jx.displayName="QRCodeSvg";Jx.propTypes=nG;Xx.default=Jx;Object.defineProperty(Eh,"__esModule",{value:!0});Eh.QRCode=void 0;var aG=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},iG=Vg,Gs=oc(iG),oG=EC,lG=oc(oG),cG=eG,dG=oc(cG),LC=g,uG=oc(LC),hG=Xx,fG=oc(hG);function oc(e){return e&&e.__esModule?e:{default:e}}function mG(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}var pG={bgColor:Gs.default.oneOfType([Gs.default.object,Gs.default.string]),fgColor:Gs.default.oneOfType([Gs.default.object,Gs.default.string]),level:Gs.default.string,size:Gs.default.number,value:Gs.default.string.isRequired},kh=(0,LC.forwardRef)(function(e,t){var r=e.bgColor,n=r===void 0?"#FFFFFF":r,a=e.fgColor,i=a===void 0?"#000000":a,o=e.level,c=o===void 0?"L":o,l=e.size,d=l===void 0?256:l,u=e.value,h=mG(e,["bgColor","fgColor","level","size","value"]),f=new dG.default(-1,lG.default[c]);f.addData(u),f.make();var x=f.modules;return uG.default.createElement(fG.default,aG({},h,{bgColor:n,bgD:x.map(function(v,y){return v.map(function(b,p){return b?"":"M "+p+" "+y+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:i,fgD:x.map(function(v,y){return v.map(function(b,p){return b?"M "+p+" "+y+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:t,size:d,viewBoxSize:x.length}))});Eh.QRCode=kh;kh.displayName="QRCode";kh.propTypes=pG;var gG=Eh.default=kh;const xG=()=>{var xn;const{user:e}=Ee(),[t,r]=g.useState([]),[n,a]=g.useState([]),[i,o]=g.useState([]),[c,l]=g.useState(""),[d,u]=g.useState(""),[h,f]=g.useState(""),[x,v]=g.useState(!0),[y,b]=g.useState(null),[p,m]=g.useState(null),[j,w]=g.useState(!1),[N,C]=g.useState(null),[S,E]=g.useState(null),[k,T]=g.useState(null),[D,$]=g.useState([]),[_,A]=g.useState(null),[B,P]=g.useState(null),[M,R]=g.useState(!1),[W,V]=g.useState(null),[z,H]=g.useState(!1),[G,Z]=g.useState(null),[F,U]=g.useState(!1),[Y,Q]=g.useState(null),[de,q]=g.useState(!1);g.useEffect(()=>{ue(),oe()},[]),g.useEffect(()=>{oe()},[c,d,h]);const ue=async()=>{try{const[L,fe]=await Promise.all([X.get("/admin/users?role=ABOGADO"),X.get("/admin/users?role=CLIENTE")]);a(L.data),o(fe.data)}catch(L){console.error("Error fetching users:",L)}},oe=async()=>{try{v(!0);const L={};c&&(L.lawyerId=c),d&&(L.clientId=d),h&&(L.paymentDate=h);const fe=await X.get("/invoices",{params:L});console.log("📊 Admin invoices response:",fe.data),r(fe.data),b(null)}catch(L){console.error("Error fetching invoices:",L),b("Error al cargar las facturas"),r([])}finally{v(!1)}},ye=async L=>{V(L),H(!0)},$e=async L=>{E(L.id);try{const fe=await X.get(`/invoices/${L.id}/pdf-qr`,{responseType:"blob"}),ke=new Blob([fe.data],{type:"application/pdf"}),xe=window.URL.createObjectURL(ke),Fe=document.createElement("a");Fe.href=xe,Fe.target="_blank",Fe.download=`factura_${L.numeroFactura||L.id}.pdf`,document.body.appendChild(Fe),Fe.click(),document.body.removeChild(Fe),window.URL.revokeObjectURL(xe),T(`✅ PDF de factura ${L.numeroFactura} descargado`),setTimeout(()=>T(null),3e3)}catch(fe){console.error("Error downloading PDF:",fe),b("Error al descargar el PDF de la factura"),setTimeout(()=>b(null),3e3)}finally{E(null)}},st=L=>{m(L),w(!0)},J=async L=>{if(confirm("¿Estás seguro de que quieres eliminar esta factura? Esta acción no se puede deshacer.")){C(L);try{await X.delete(`/invoices/${L}`),T("✅ Factura eliminada correctamente"),oe(),setTimeout(()=>T(null),5e3)}catch(fe){console.error("Error deleting invoice:",fe),b("Error al eliminar la factura"),setTimeout(()=>b(null),5e3)}finally{C(null)}}},me=L=>{P(L),R(!0)},_e=async L=>{Z(L),U(!0),q(!0);try{const fe=await X.get(`/invoices/${L.id}/audit-history`);Q(fe.data)}catch(fe){console.error("Error fetching audit history:",fe),b("Error al cargar el historial de auditoría"),setTimeout(()=>b(null),5e3)}finally{q(!1)}},ze=L=>{var ke,xe;const fe={ID:L.id,"Número de Factura":L.numeroFactura,"Fecha de Factura":L.fechaFactura,"Fecha de Creación":L.createdAt,"Última Actualización":L.updatedAt,Estado:L.estado,"XML Generado":L.xml?"Sí":"No","XML Firmado":L.xmlFirmado?"Sí":"No","Sello de Tiempo":L.selloTiempo||"No aplicado",Emisor:L.emisor?`${L.emisor.name} (${L.emisor.email})`:"No especificado",Receptor:L.receptor?`${L.receptor.name} (${L.receptor.email})`:"No especificado",Expediente:L.expediente?`${L.expediente.title} (ID: ${L.expediente.id})`:"No asociado",Items:((ke=L.items)==null?void 0:ke.length)||0,Provisiones:((xe=L.provisionFondos)==null?void 0:xe.length)||0};return Object.entries(fe).map(([Fe,Ue])=>`${Fe}: ${Ue}`).join(`
`)},Ce=async L=>{var fe;if(L.preventDefault(),!!p)try{const ke={fechaFactura:p.fechaFactura,estado:p.estado,paymentDate:p.paymentDate,tipoIVA:p.tipoIVA,descuento:p.descuento,retencion:p.retencion,items:(fe=p.items)==null?void 0:fe.map(xe=>({description:xe.description,quantity:xe.quantity,unitPrice:xe.unitPrice}))};await X.put(`/invoices/${p.id}`,ke),T("✅ Factura actualizada correctamente"),w(!1),oe(),setTimeout(()=>T(null),5e3)}catch(ke){console.error("Error updating invoice:",ke),b("Error al actualizar la factura"),setTimeout(()=>b(null),5e3)}},Pe=L=>new Date(L).toLocaleDateString("es-ES"),He=L=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(L||0),zt=async(L,fe)=>{A(fe);try{await navigator.clipboard.writeText(L),T(`✅ ${fe} copiado al portapapeles`),setTimeout(()=>T(null),3e3)}catch{b("Error al copiar al portapapeles"),setTimeout(()=>b(null),3e3)}finally{A(null)}},es=L=>{$(fe=>fe.includes(L)?fe.filter(ke=>ke!==L):[...fe,L])},js=()=>{D.length===t.length?$([]):$(t.map(L=>L.id))},Hs=()=>{if(t.length===0){b("No hay facturas para exportar"),setTimeout(()=>b(null),3e3);return}const fe=[["ID","Número Factura","Fecha Factura","Importe Total","Estado","Abogado","Cliente","Fecha de Pago","Base Imponible","IVA","Fecha de Creación"].join(","),...t.map(Ue=>{var ot,nt;return[Ue.id,Ue.numeroFactura||"",Ue.fechaFactura||"",Ue.importeTotal||0,Ue.estado||"",((ot=Ue.emisor)==null?void 0:ot.name)||"",((nt=Ue.receptor)==null?void 0:nt.name)||"",Ue.paymentDate||"",Ue.baseImponible||0,Ue.cuotaIVA||0,Ue.createdAt||""].join(",")})].join(`
`),ke=new Blob([fe],{type:"text/csv;charset=utf-8;"}),xe=document.createElement("a"),Fe=URL.createObjectURL(ke);xe.setAttribute("href",Fe),xe.setAttribute("download",`facturas_${new Date().toISOString().split("T")[0]}.csv`),xe.style.visibility="hidden",document.body.appendChild(xe),xe.click(),document.body.removeChild(xe),T("✅ CSV exportado correctamente"),setTimeout(()=>T(null),3e3)},Ke=L=>{var xe,Fe,Ue,ot;const fe={"Número de Factura":L.numeroFactura||"N/A","Fecha de Factura":L.fechaFactura?Pe(L.fechaFactura):"N/A","Importe Total":He(L.importeTotal||0),Estado:L.estado||"N/A",Abogado:((xe=L.emisor)==null?void 0:xe.name)||"N/A",Cliente:((Fe=L.receptor)==null?void 0:Fe.name)||"N/A","Fecha de Pago":L.paymentDate?Pe(L.paymentDate):"N/A","Base Imponible":He(L.baseImponible||0),IVA:He(L.cuotaIVA||0),Items:((Ue=L.items)==null?void 0:Ue.length)||0,Provisiones:((ot=L.provisionFondos)==null?void 0:ot.length)||0},ke=Object.entries(fe).map(([nt,no])=>`${nt}: ${no}`).join(`
`);zt(ke,`Datos de factura ${L.numeroFactura}`)},Xt=()=>{if(D.length===0){b("No hay facturas seleccionadas"),setTimeout(()=>b(null),3e3);return}const ke=t.filter(xe=>D.includes(xe.id)).map(xe=>{var Fe,Ue;return{"Número de Factura":xe.numeroFactura||"N/A","Fecha de Factura":xe.fechaFactura?Pe(xe.fechaFactura):"N/A","Importe Total":He(xe.importeTotal||0),Estado:xe.estado||"N/A",Abogado:((Fe=xe.emisor)==null?void 0:Fe.name)||"N/A",Cliente:((Ue=xe.receptor)==null?void 0:Ue.name)||"N/A"}}).map((xe,Fe)=>`Factura ${Fe+1}:
${Object.entries(xe).map(([Ue,ot])=>`${Ue}: ${ot}`).join(`
`)}`).join(`

`);zt(ke,`Datos de ${D.length} facturas seleccionadas`)},or=({invoice:L})=>{var fe,ke,xe,Fe,Ue;return s.jsxs("div",{className:"bg-white p-8 max-w-4xl mx-auto",children:[s.jsx("div",{className:"border-b-2 border-gray-300 pb-6 mb-6",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"FACTURA"}),s.jsx("div",{className:"my-4 flex flex-col items-center",children:L.qrData?s.jsxs(s.Fragment,{children:[s.jsx("h4",{className:"text-xs text-gray-600 mb-1",children:"Código QR de la factura"}),s.jsx(gG,{value:L.qrData,size:120}),s.jsx("pre",{className:"text-xs mt-1 bg-gray-100 p-1 rounded",children:L.qrData})]}):s.jsx("span",{className:"text-xs text-gray-400",children:"QR no disponible"})}),s.jsxs("div",{className:"text-lg text-gray-600",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Número:"})," ",L.numeroFactura||"N/A"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Fecha:"})," ",L.fechaFactura?Pe(L.fechaFactura):"N/A"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Estado:"})," ",s.jsx("span",{className:`px-2 py-1 rounded text-xs ${L.estado==="emitida"?"bg-green-100 text-green-800":L.estado==="pagada"?"bg-blue-100 text-blue-800":L.estado==="anulada"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:(L.estado||"N/A").toUpperCase()})]})]})]}),s.jsxs("div",{className:"text-right text-gray-600",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Fecha de Operación:"})," ",L.fechaOperacion?Pe(L.fechaOperacion):"N/A"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Método de Pago:"})," ",L.metodoPago||"N/A"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Clave de Operación:"})," ",L.claveOperacion||"N/A"]})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-3",children:"DATOS DEL EMISOR"}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded border",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Nombre:"})," ",((fe=L.emisor)==null?void 0:fe.name)||"N/A"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Email:"})," ",((ke=L.emisor)==null?void 0:ke.email)||"N/A"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Régimen IVA:"})," ",L.regimenIvaEmisor||"N/A"]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-3",children:"DATOS DEL RECEPTOR"}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded border",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Nombre:"})," ",((xe=L.receptor)==null?void 0:xe.name)||"N/A"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Email:"})," ",((Fe=L.receptor)==null?void 0:Fe.email)||"N/A"]}),L.expediente&&s.jsxs("div",{children:[s.jsx("strong",{children:"Expediente:"})," ",L.expediente.title]})]})]})]}),L.items&&L.items.length>0&&s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-3",children:"CONCEPTOS"}),s.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-gray-100",children:[s.jsx("th",{className:"border border-gray-300 px-3 py-2 text-left",children:"Descripción"}),s.jsx("th",{className:"border border-gray-300 px-3 py-2 text-center",children:"Cantidad"}),s.jsx("th",{className:"border border-gray-300 px-3 py-2 text-right",children:"Precio Unitario"}),s.jsx("th",{className:"border border-gray-300 px-3 py-2 text-right",children:"Total"})]})}),s.jsx("tbody",{children:L.items.map((ot,nt)=>s.jsxs("tr",{className:nt%2===0?"bg-white":"bg-gray-50",children:[s.jsx("td",{className:"border border-gray-300 px-3 py-2",children:ot.description}),s.jsx("td",{className:"border border-gray-300 px-3 py-2 text-center",children:ot.quantity}),s.jsx("td",{className:"border border-gray-300 px-3 py-2 text-right",children:He(ot.unitPrice)}),s.jsx("td",{className:"border border-gray-300 px-3 py-2 text-right font-semibold",children:He(ot.total)})]},nt))})]})]}),L.descuento&&L.descuento>0&&s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-3",children:"DESCUENTOS"}),s.jsx("div",{className:"bg-yellow-50 p-4 rounded border border-yellow-200",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"font-semibold text-yellow-800",children:["Descuento (",L.descuento,"%)"]}),s.jsxs("span",{className:"font-bold text-yellow-800 text-lg",children:["-",He((((Ue=L.items)==null?void 0:Ue.reduce((ot,nt)=>ot+nt.quantity*nt.unitPrice,0))||0)*(L.descuento/100))]})]})})]}),L.provisionFondos&&L.provisionFondos.length>0&&s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-3",children:"PROVISIONES DE FONDOS ASOCIADAS"}),s.jsx("div",{className:"bg-blue-50 p-4 rounded border",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-blue-200",children:[s.jsx("th",{className:"text-left py-2",children:"Descripción"}),s.jsx("th",{className:"text-right py-2",children:"Fecha"}),s.jsx("th",{className:"text-right py-2",children:"Importe"})]})}),s.jsx("tbody",{children:L.provisionFondos.map(ot=>s.jsxs("tr",{className:"border-b border-blue-100",children:[s.jsx("td",{className:"py-2",children:ot.description||"Sin descripción"}),s.jsx("td",{className:"text-right py-2",children:Pe(ot.date)}),s.jsx("td",{className:"text-right py-2 font-semibold",children:He(ot.amount)})]},ot.id))})]})})]}),s.jsx("div",{className:"mb-8",children:s.jsx("div",{className:"flex justify-end",children:s.jsxs("div",{className:"w-64 space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Base Imponible:"}),s.jsx("span",{className:"font-semibold",children:He(L.baseImponible??0)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{children:["IVA (",L.tipoIVA??21,"%):"]}),s.jsx("span",{className:"font-semibold",children:He(L.cuotaIVA??0)})]}),s.jsxs("div",{className:"flex justify-between text-lg font-bold border-t border-gray-300 pt-2",children:[s.jsx("span",{children:"TOTAL:"}),s.jsx("span",{children:He(L.importeTotal??0)})]})]})})}),s.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:s.jsxs("div",{className:"grid grid-cols-2 gap-8 text-sm text-gray-600",children:[s.jsxs("div",{children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Método de pago:"})," ",L.metodoPago||"N/A"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Clave de operación:"})," ",L.claveOperacion||"N/A"]})]}),s.jsxs("div",{children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Fecha de creación:"})," ",Pe(L.createdAt)]}),L.motivoAnulacion&&s.jsxs("div",{children:[s.jsx("strong",{children:"Motivo de anulación:"})," ",L.motivoAnulacion]})]})]})}),s.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200 flex justify-end space-x-4",children:[s.jsxs("button",{onClick:()=>$e(L),disabled:S===L.id,className:`px-4 py-2 rounded flex items-center space-x-2 ${S===L.id?"bg-gray-400 text-white cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsx("span",{children:S===L.id?"Descargando...":"📄 Descargar PDF"})]}),s.jsxs("button",{onClick:()=>Ke(L),disabled:_!==null,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50 flex items-center space-x-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),s.jsx("span",{children:_===`Datos de factura ${L.numeroFactura}`?"Copiando...":"📋 Copiar Datos"})]})]})]})};return x?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):s.jsxs("div",{className:"py-6",children:[s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold mb-2",children:"Gestión de Facturas"}),s.jsx("p",{className:"text-gray-600",children:"Administra todas las facturas del sistema"})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("button",{onClick:Hs,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 flex items-center space-x-2",title:"Exportar todas las facturas a CSV",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsx("span",{children:"Exportar CSV"})]}),s.jsxs("button",{onClick:oe,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center space-x-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),s.jsx("span",{children:"Refrescar"})]})]})]}),k&&s.jsx("div",{className:"mb-4 p-3 bg-green-100 text-green-700 rounded",children:k}),y&&s.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded",children:y}),s.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Abogado"}),s.jsxs("select",{value:c,onChange:L=>l(L.target.value),className:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Todos"}),n.map(L=>s.jsx("option",{value:L.id,children:L.name},L.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cliente"}),s.jsxs("select",{value:d,onChange:L=>u(L.target.value),className:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Todos"}),i.map(L=>s.jsx("option",{value:L.id,children:L.name},L.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de pago"}),s.jsx("input",{type:"date",value:h,onChange:L=>f(L.target.value),className:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsx("div",{className:"flex items-end",children:s.jsx("button",{onClick:()=>{l(""),u(""),f("")},className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"Limpiar Filtros"})})]}),t.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No se encontraron facturas"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:c||d||h?"Intenta ajustar los filtros de búsqueda.":"No hay facturas registradas en el sistema."})]}):s.jsxs(s.Fragment,{children:[D.length>0&&s.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-sm text-blue-800",children:[D.length," factura",D.length!==1?"s":""," seleccionada",D.length!==1?"s":""]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:Xt,disabled:_!==null,className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 disabled:opacity-50",title:"Copiar datos de facturas seleccionadas",children:_?"📋 Copiando...":"📋 Copiar Seleccionadas"}),s.jsx("button",{onClick:()=>$([]),className:"px-3 py-1 bg-gray-600 text-white text-sm rounded hover:bg-gray-700",children:"Deseleccionar Todo"})]})]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s.jsx("input",{type:"checkbox",checked:D.length===t.length&&t.length>0,onChange:js,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",title:"Seleccionar todas las facturas"})}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nº Factura"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Importe"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Abogado"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha de pago"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(L=>{var fe,ke;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("input",{type:"checkbox",checked:D.includes(L.id),onChange:()=>es(L.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",title:`Seleccionar factura ${L.numeroFactura}`})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:L.numeroFactura||"N/A"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:L.fechaFactura?Pe(L.fechaFactura):"N/A"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:He(L.importeTotal||0)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${L.estado==="emitida"?"bg-green-100 text-green-800":L.estado==="pagada"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:L.estado||"N/A"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((fe=L.emisor)==null?void 0:fe.name)||"-"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((ke=L.receptor)==null?void 0:ke.name)||"-"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:L.paymentDate?Pe(L.paymentDate):"-"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>ye(L),className:"text-blue-600 hover:text-blue-900 hover:bg-blue-50 px-2 py-1 rounded",title:"Ver factura completa con todos los detalles",children:"👁️ Ver"}),s.jsx("button",{onClick:()=>Ke(L),disabled:_!==null,className:"text-green-600 hover:text-green-900 px-2 py-1 rounded hover:bg-green-50",title:"Copiar datos de la factura",children:_===`Datos de factura ${L.numeroFactura}`?"📋 Copiando...":"📋 Copiar"}),s.jsx("button",{onClick:()=>st(L),className:"text-yellow-600 hover:text-yellow-900 px-2 py-1 rounded hover:bg-yellow-50",title:"Editar factura",children:"✏️ Editar"}),s.jsx("button",{onClick:()=>J(L.id),disabled:N===L.id,className:`px-2 py-1 rounded ${N===L.id?"text-gray-400 cursor-not-allowed":"text-red-600 hover:text-red-900 hover:bg-red-50"}`,title:"Eliminar factura",children:N===L.id?"🗑️ Borrando...":"🗑️ Borrar"}),s.jsx("button",{onClick:()=>me(L),className:"text-gray-600 hover:text-gray-900 px-2 py-1 rounded hover:bg-gray-50",title:"Ver metadatos técnicos",children:"🔍 Metadatos"}),s.jsx("button",{onClick:()=>_e(L),className:"text-purple-600 hover:text-purple-900 px-2 py-1 rounded hover:bg-purple-50",title:"Ver historial de cambios",children:"📋 Auditoría"})]})})]},L.id)})})]})}),s.jsxs("div",{className:"mt-4 text-sm text-gray-500",children:["Mostrando ",t.length," factura",t.length!==1?"s":""]})]})]})}),j&&p&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",role:"dialog","aria-modal":"true","aria-labelledby":"edit-invoice-title","aria-describedby":"edit-invoice-description",onClick:L=>L.target===L.currentTarget&&w(!1),children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h2",{id:"edit-invoice-title",className:"text-xl font-bold",children:["Editar Factura ",p.numeroFactura]}),s.jsx("button",{onClick:()=>w(!1),className:"text-gray-500 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded p-1","aria-label":"Cerrar modal de edición",type:"button",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("p",{id:"edit-invoice-description",className:"sr-only",children:["Formulario para editar los detalles de la factura ",p.numeroFactura||""]}),s.jsxs("form",{onSubmit:Ce,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Número de Factura"}),s.jsx("input",{type:"text",value:p.numeroFactura||"",readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"No editable"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de Factura"}),s.jsx("input",{type:"date",value:p.fechaFactura?p.fechaFactura.split("T")[0]:"",onChange:L=>m({...p,fechaFactura:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),s.jsxs("select",{value:p.estado||"emitida",onChange:L=>m({...p,estado:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"emitida",children:"Emitida"}),s.jsx("option",{value:"pagada",children:"Pagada"}),s.jsx("option",{value:"anulada",children:"Anulada"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de Pago"}),s.jsx("input",{type:"date",value:p.paymentDate?p.paymentDate.split("T")[0]:"",onChange:L=>m({...p,paymentDate:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]})]}),s.jsxs("div",{className:"border-t pt-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Configuración Fiscal"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo IVA (%)"}),s.jsx("input",{type:"number",step:"0.01",value:p.tipoIVA||21,onChange:L=>m({...p,tipoIVA:parseFloat(L.target.value)||21}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descuento (%)"}),s.jsx("input",{type:"number",step:"0.01",value:p.descuento||0,onChange:L=>m({...p,descuento:parseFloat(L.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Retención (%)"}),s.jsx("input",{type:"number",step:"0.01",value:p.retencion||0,onChange:L=>m({...p,retencion:parseFloat(L.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]})]})]}),s.jsxs("div",{className:"border-t pt-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Conceptos"}),s.jsx("div",{className:"space-y-3",children:(xn=p.items)==null?void 0:xn.map((L,fe)=>s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 p-3 border border-gray-200 rounded-md",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripción"}),s.jsx("input",{type:"text",value:L.description,onChange:ke=>{const xe=[...p.items||[]];xe[fe]={...xe[fe],description:ke.target.value},m({...p,items:xe})},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cantidad"}),s.jsx("input",{type:"number",value:L.quantity,onChange:ke=>{const xe=[...p.items||[]];xe[fe]={...xe[fe],quantity:parseInt(ke.target.value)||0,total:(parseInt(ke.target.value)||0)*xe[fe].unitPrice},m({...p,items:xe})},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Precio Unitario"}),s.jsx("input",{type:"number",step:"0.01",value:L.unitPrice,onChange:ke=>{const xe=[...p.items||[]];xe[fe]={...xe[fe],unitPrice:parseFloat(ke.target.value)||0,total:xe[fe].quantity*(parseFloat(ke.target.value)||0)},m({...p,items:xe})},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total"}),s.jsx("input",{type:"number",step:"0.01",value:L.total,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500"})]})]},fe))}),s.jsx("button",{type:"button",onClick:()=>{const L=[...p.items||[],{id:`temp-${Date.now()}`,description:"",quantity:1,unitPrice:0,total:0}];m({...p,items:L})},className:"mt-3 px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"+ Agregar Concepto"})]}),s.jsxs("div",{className:"border-t pt-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Totales"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Base Imponible"}),s.jsx("input",{type:"number",step:"0.01",value:p.baseImponible||0,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cuota IVA"}),s.jsx("input",{type:"number",step:"0.01",value:p.cuotaIVA||0,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Importe Total"}),s.jsx("input",{type:"number",step:"0.01",value:p.importeTotal||0,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500"})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[s.jsx("button",{type:"button",onClick:()=>w(!1),className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"Cancelar"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Guardar Cambios"})]})]})]})}),M&&B&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h2",{className:"text-xl font-bold",children:["Metadatos - Factura ",B.numeroFactura]}),s.jsx("button",{onClick:()=>R(!1),className:"text-gray-500 hover:text-gray-700 text-2xl",children:"×"})]}),s.jsx("div",{className:"mb-4",children:s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Información técnica de la factura. Puedes copiar estos datos al portapapeles."})}),s.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border",children:s.jsx("pre",{className:"text-sm text-gray-800 whitespace-pre-wrap font-mono",children:ze(B)})}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsxs("button",{onClick:()=>{const L=ze(B);zt(L,`Metadatos de factura ${B.numeroFactura}`)},disabled:_!==null,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 flex items-center space-x-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),s.jsx("span",{children:_===`Metadatos de factura ${B.numeroFactura}`?"Copiando...":"Copiar Metadatos"})]}),s.jsx("button",{onClick:()=>R(!1),className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"Cerrar"})]})]})}),z&&W&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[95vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[s.jsxs("h2",{className:"text-xl font-bold",children:["Factura ",W.numeroFactura]}),s.jsx("button",{onClick:()=>H(!1),className:"text-gray-500 hover:text-gray-700 text-2xl",children:"×"})]}),s.jsx("div",{className:"p-6",children:s.jsx(or,{invoice:W})})]})}),F&&G&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[95vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[s.jsxs("h2",{className:"text-xl font-bold",children:["Historial de Auditoría - Factura ",G.numeroFactura]}),s.jsx("button",{onClick:()=>U(!1),className:"text-gray-500 hover:text-gray-700 text-2xl",children:"×"})]}),s.jsx("div",{className:"p-6",children:de?s.jsxs("div",{className:"flex items-center justify-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"}),s.jsx("span",{className:"ml-2",children:"Cargando historial..."})]}):Y?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"text-lg font-medium text-blue-900 mb-2",children:"Resumen de Cambios"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Total de cambios:"})," ",Y.summary.totalChanges]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Última modificación:"})," ",Y.summary.lastModified?new Date(Y.summary.lastModified).toLocaleString():"N/A"]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Último modificador:"})," ",Y.summary.lastModifiedBy||"N/A"]})]})]}),Object.keys(Y.summary.changesByField).length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Cambios por Campo"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(Y.summary.changesByField).map(([L,fe])=>s.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[s.jsxs("span",{className:"font-medium",children:[L,":"]})," ",String(fe)," cambio",fe!==1?"s":""]},L))})]}),Object.keys(Y.summary.changesByUser).length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Cambios por Usuario"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(Y.summary.changesByUser).map(([L,fe])=>s.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[s.jsxs("span",{className:"font-medium",children:[L,":"]})," ",String(fe)," cambio",fe!==1?"s":""]},L))})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Historial Detallado"}),s.jsx("div",{className:"space-y-3",children:Y.auditHistory.map(L=>{var fe,ke;return s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${L.action==="created"?"bg-green-100 text-green-800":L.action==="updated"?"bg-blue-100 text-blue-800":L.action==="deleted"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:L.action==="created"?"Creado":L.action==="updated"?"Actualizado":L.action==="deleted"?"Eliminado":L.action==="status_changed"?"Estado Cambiado":L.action}),L.fieldName&&s.jsxs("span",{className:"text-sm text-gray-600",children:["Campo: ",L.fieldName]})]}),s.jsx("span",{className:"text-sm text-gray-500",children:new Date(L.createdAt).toLocaleString()})]}),s.jsx("div",{className:"text-sm text-gray-700 mb-2",children:L.description}),L.fieldName&&L.oldValue!==L.newValue&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-red-600",children:"Valor anterior:"}),s.jsx("div",{className:"bg-red-50 p-2 rounded mt-1 break-all",children:L.oldValue||"Vacío"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-green-600",children:"Nuevo valor:"}),s.jsx("div",{className:"bg-green-50 p-2 rounded mt-1 break-all",children:L.newValue||"Vacío"})]})]}),s.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[s.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-500",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Usuario:"})," ",(fe=L.user)==null?void 0:fe.name," (",(ke=L.user)==null?void 0:ke.email,")"]}),L.ipAddress&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"IP:"})," ",L.ipAddress]})]}),L.userAgent&&s.jsxs("div",{className:"text-xs text-gray-500 mt-1 break-all",children:[s.jsx("span",{className:"font-medium",children:"User Agent:"})," ",L.userAgent]})]})]},L.id)})})]})]}):s.jsx("div",{className:"text-center py-8 text-gray-500",children:"No se encontró historial de auditoría para esta factura."})})]})})]})},vG=()=>{const[e,t]=g.useState(null),[r,n]=g.useState(!0),[a,i]=g.useState(null);g.useEffect(()=>{o()},[]);const o=async()=>{var u,h;try{n(!0);const f=localStorage.getItem("token"),x=await X.get("/admin/reports",{headers:{Authorization:`Bearer ${f}`}});t(x.data),i(null)}catch(f){console.error("Error fetching reports:",f),i(((h=(u=f.response)==null?void 0:u.data)==null?void 0:h.message)||"Error al cargar reportes")}finally{n(!1)}},c=u=>{if(!u||u===0)return"0 Bytes";const h=1024,f=["Bytes","KB","MB","GB"],x=Math.floor(Math.log(u)/Math.log(h));return parseFloat((u/Math.pow(h,x)).toFixed(2))+" "+f[x]},l=u=>{switch(u){case"ABIERTO":return"Abierto";case"EN_PROCESO":return"En Proceso";case"CERRADO":return"Cerrado";case"PENDIENTE":return"Pendiente";case"EN_PROGRESO":return"En Progreso";case"COMPLETADA":return"Completada";case"CANCELADA":return"Cancelada";default:return u}},d=u=>{switch(u){case"ADMIN":return"Administrador";case"ABOGADO":return"Abogado";case"CLIENTE":return"Cliente";default:return u}};return r?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):a?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 text-xl mb-4",children:"Error"}),s.jsx("div",{className:"text-gray-600",children:a}),s.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Reintentar"})]})}):s.jsx("div",{className:"py-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Reportes del Sistema"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Análisis y estadísticas del sistema"})]}),s.jsx("button",{onClick:o,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Actualizar"})]})}),e&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Estadísticas Generales"}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Estadísticas de Expedientes"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:e.casesByStatus.map(u=>s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-sm font-medium text-gray-500",children:l(u.status)}),s.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:u._count.status})]},u.status))})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Estadísticas de Tareas"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:e.tasksByStatus.map(u=>s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-sm font-medium text-gray-500",children:l(u.status)}),s.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:u._count.status})]},u.status))})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Actividad de Usuarios"}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Usuario"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rol"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expedientes"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Citas"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tareas"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Registro"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.userActivity.map(u=>{var h,f,x;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm font-medium text-gray-900",children:u.name})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:d(u.role)})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((h=u.expedientesAsLawyer)==null?void 0:h.length)||0}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((f=u.appointmentsAsLawyer)==null?void 0:f.length)||0}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((x=u.assignedTasks)==null?void 0:x.length)||0}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(u.createdAt).toLocaleDateString()})]},u.id)})})]})})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Estadísticas de Documentos"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.documentStats.map(u=>s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-sm font-medium text-gray-500",children:u.mimeType}),s.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:u._count.mimeType}),s.jsx("div",{className:"text-sm text-gray-500",children:c(u._sum.fileSize)})]},u.mimeType))})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Citas por Mes"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.appointmentsByMonth.map(u=>s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-sm font-medium text-gray-500",children:new Date(u.date).toLocaleDateString("es-ES",{month:"long",year:"numeric"})}),s.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:u._count.date})]},u.date))})]})]})]})})};async function yG(e){return(await X.get("/parametros",{headers:{Authorization:`Bearer ${e}`}})).data}async function bG(e,t){return(await X.post("/parametros",e,{headers:{Authorization:`Bearer ${t}`}})).data}async function jG(e,t,r){return(await X.put(`/parametros/${e}`,t,{headers:{Authorization:`Bearer ${r}`}})).data}async function wG(e,t){await X.delete(`/parametros/${e}`,{headers:{Authorization:`Bearer ${t}`}})}const NG=()=>{const e=localStorage.getItem("token"),[t,r]=g.useState([]),[n,a]=g.useState(!0),[i,o]=g.useState(null),[c,l]=g.useState(!1),[d,u]=g.useState(null),[h,f]=g.useState({}),[x,v]=g.useState(!1),y=async()=>{var N,C;a(!0),o(null);try{if(!e)throw new Error("No autenticado");const S=await yG(e);r(S)}catch(S){o(((C=(N=S.response)==null?void 0:N.data)==null?void 0:C.message)||S.message||"Error al cargar parámetros")}finally{a(!1)}};g.useEffect(()=>{y()},[e]);const b=N=>{u(N||null),f(N||{}),l(!0)},p=()=>{l(!1),u(null),f({})},m=N=>{f({...h,[N.target.name]:N.target.value})},j=async()=>{var N,C;v(!0),o(null);try{if(!e)throw new Error("No autenticado");d?await jG(d.id,{valor:h.valor,etiqueta:h.etiqueta,tipo:h.tipo},e):await bG({clave:h.clave,valor:h.valor,etiqueta:h.etiqueta,tipo:h.tipo},e),await y(),p()}catch(S){o(((C=(N=S.response)==null?void 0:N.data)==null?void 0:C.message)||S.message||"Error al guardar parámetro")}finally{v(!1)}},w=async N=>{var C,S;if(window.confirm("¿Seguro que deseas eliminar este parámetro?")){o(null),v(!0);try{if(!e)throw new Error("No autenticado");await wG(N,e),await y()}catch(E){o(((S=(C=E.response)==null?void 0:C.data)==null?void 0:S.message)||E.message||"Error al eliminar parámetro")}finally{v(!1)}}};return s.jsxs("div",{className:"max-w-3xl mx-auto py-8",children:[s.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Configuración de Parámetros Globales"}),s.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[s.jsx("button",{className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",onClick:async()=>{var N,C;if(window.confirm("¿Desea inicializar los parámetros por defecto? Esto creará o actualizará los parámetros básicos del sistema."))try{if(!e)throw new Error("No autenticado");await fetch("/api/parametros/initialize",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}}),await y(),alert("Parámetros inicializados correctamente")}catch(S){o(((C=(N=S.response)==null?void 0:N.data)==null?void 0:C.message)||S.message||"Error al inicializar parámetros")}},children:"🔧 Inicializar Parámetros"}),s.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",onClick:()=>b(),children:"Nuevo Parámetro"})]}),n?s.jsx("div",{className:"text-center py-8",children:"Cargando..."}):i?s.jsx("div",{className:"text-center text-red-600",children:i}):s.jsxs("table",{className:"min-w-full bg-white border rounded shadow",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 border",children:"Clave"}),s.jsx("th",{className:"px-4 py-2 border",children:"Valor"}),s.jsx("th",{className:"px-4 py-2 border",children:"Etiqueta"}),s.jsx("th",{className:"px-4 py-2 border",children:"Tipo"}),s.jsx("th",{className:"px-4 py-2 border",children:"Acciones"})]})}),s.jsx("tbody",{children:t.map(N=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-2 border font-mono text-sm",children:N.clave}),s.jsx("td",{className:"px-4 py-2 border",children:N.tipo==="html"?s.jsxs("div",{className:"max-w-xs",children:[s.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"HTML Content"}),s.jsxs("div",{className:"text-xs bg-gray-100 p-2 rounded max-h-20 overflow-y-auto",children:[N.valor.substring(0,100),"..."]})]}):N.valor.length>50?s.jsx("div",{className:"max-w-xs",children:s.jsxs("div",{className:"text-sm truncate",title:N.valor,children:[N.valor.substring(0,50),"..."]})}):s.jsx("span",{className:"text-sm",children:N.valor})}),s.jsx("td",{className:"px-4 py-2 border text-sm",children:N.etiqueta}),s.jsx("td",{className:"px-4 py-2 border",children:s.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${N.tipo==="html"?"bg-purple-100 text-purple-800":N.tipo==="email"?"bg-blue-100 text-blue-800":N.tipo==="url"?"bg-green-100 text-green-800":N.tipo==="text"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:N.tipo})}),s.jsxs("td",{className:"px-4 py-2 border",children:[s.jsx("button",{className:"text-blue-600 hover:underline mr-2 text-sm",onClick:()=>b(N),children:"Editar"}),s.jsx("button",{className:"text-red-600 hover:underline text-sm",onClick:()=>w(N.id),disabled:x,children:"Eliminar"})]})]},N.id))})]}),c&&s.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-30 z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 w-full max-w-md",children:[s.jsxs("h2",{className:"text-xl font-bold mb-4",children:[d?"Editar":"Nuevo"," Parámetro"]}),i&&s.jsx("div",{className:"text-red-600 mb-2",children:i}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block mb-1 font-medium",children:"Clave"}),s.jsx("input",{type:"text",name:"clave",value:h.clave||"",onChange:m,className:"w-full border px-3 py-2 rounded",disabled:!!d})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block mb-1 font-medium",children:"Valor"}),h.tipo==="html"||h.tipo==="text"?s.jsx("textarea",{name:"valor",value:h.valor||"",onChange:N=>f({...h,valor:N.target.value}),className:"w-full border px-3 py-2 rounded",rows:h.tipo==="html"?10:5,placeholder:h.tipo==="html"?"Contenido HTML...":"Texto largo..."}):s.jsx("input",{type:h.tipo==="email"?"email":h.tipo==="number"?"number":"text",name:"valor",value:h.valor||"",onChange:m,className:"w-full border px-3 py-2 rounded"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block mb-1 font-medium",children:"Etiqueta"}),s.jsx("input",{type:"text",name:"etiqueta",value:h.etiqueta||"",onChange:m,className:"w-full border px-3 py-2 rounded"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block mb-1 font-medium",children:"Tipo"}),s.jsxs("select",{name:"tipo",value:h.tipo||"",onChange:m,className:"w-full border px-3 py-2 rounded",children:[s.jsx("option",{value:"",children:"Selecciona tipo"}),s.jsx("option",{value:"string",children:"Texto"}),s.jsx("option",{value:"number",children:"Número"}),s.jsx("option",{value:"email",children:"Email"}),s.jsx("option",{value:"url",children:"URL"}),s.jsx("option",{value:"text",children:"Texto largo"}),s.jsx("option",{value:"html",children:"HTML"}),s.jsx("option",{value:"image",children:"Imagen/Base64"}),s.jsx("option",{value:"boolean",children:"Booleano"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx("button",{className:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",onClick:p,disabled:x,children:"Cancelar"}),s.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:j,disabled:x,children:x?"Guardando...":"Guardar"})]})]})})]})},CG=()=>{const{user:e}=Ee(),[t,r]=g.useState([]),[n,a]=g.useState(!0),[i,o]=g.useState(null),[c,l]=g.useState(null),[d,u]=g.useState(!1),[h,f]=g.useState({title:"",description:"",icon:"⚖️",orden:0});g.useEffect(()=>{x()},[]);const x=async()=>{try{a(!0);const m=await fetch("/api/parametros/services");if(m.ok){const j=await m.json();r(j)}else throw new Error("Error al cargar los servicios")}catch(m){console.error("Error fetching services:",m),o("Error al cargar los servicios")}finally{a(!1)}},v=async m=>{m.preventDefault();try{const j=c?`/api/parametros/services/${c.id}`:"/api/parametros/services";if((await fetch(j,{method:c?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(h)})).ok)await x(),l(null),u(!1),f({title:"",description:"",icon:"⚖️",orden:0});else throw new Error("Error al guardar el servicio")}catch(j){console.error("Error saving service:",j),o("Error al guardar el servicio")}},y=m=>{l(m),f({title:m.title,description:m.description,icon:m.icon,orden:m.orden}),u(!0)},b=async m=>{if(confirm("¿Estás seguro de que quieres eliminar este servicio?"))try{if((await fetch(`/api/parametros/services/${m}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)await x();else throw new Error("Error al eliminar el servicio")}catch(j){console.error("Error deleting service:",j),o("Error al eliminar el servicio")}},p=()=>{l(null),u(!1),f({title:"",description:"",icon:"⚖️",orden:0})};return!e||e.role!=="ADMIN"?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Acceso Denegado"}),s.jsx("p",{className:"text-gray-600",children:"No tienes permisos para acceder a esta página."})]})}):s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Gestión de Servicios"}),s.jsx("p",{className:"text-gray-600",children:"Administra los servicios que se muestran en el frontend"})]}),i&&s.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:s.jsx("p",{className:"text-red-800",children:i})}),s.jsx("div",{className:"mb-6",children:s.jsx("button",{onClick:()=>u(!0),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"+ Agregar Nuevo Servicio"})}),d&&s.jsxs("div",{className:"mb-8 p-6 bg-gray-50 rounded-lg",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:c?"Editar Servicio":"Agregar Nuevo Servicio"}),s.jsxs("form",{onSubmit:v,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Título *"}),s.jsx("input",{type:"text",value:h.title,onChange:m=>f({...h,title:m.target.value}),required:!0,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Icono *"}),s.jsx("input",{type:"text",value:h.icon,onChange:m=>f({...h,icon:m.target.value}),required:!0,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"⚖️"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripción *"}),s.jsx("textarea",{value:h.description,onChange:m=>f({...h,description:m.target.value}),required:!0,rows:4,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Orden"}),s.jsx("input",{type:"number",value:h.orden,onChange:m=>f({...h,orden:parseInt(m.target.value)||0}),className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:c?"Actualizar":"Guardar"}),s.jsx("button",{type:"button",onClick:p,className:"bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition-colors",children:"Cancelar"})]})]})]}),n?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Cargando servicios..."})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(m=>s.jsxs("div",{className:"bg-white p-6 rounded-lg border shadow-sm",children:[s.jsxs("div",{className:"flex items-start space-x-4 mb-4",children:[s.jsx("div",{className:"text-3xl",children:m.icon}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-1",children:m.title}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Orden: ",m.orden]})]})]}),s.jsx("p",{className:"text-gray-600 mb-4 text-sm",children:m.description}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>y(m),className:"bg-blue-600 text-white px-4 py-2 rounded text-sm hover:bg-blue-700 transition-colors",children:"Editar"}),s.jsx("button",{onClick:()=>b(m.id),className:"bg-red-600 text-white px-4 py-2 rounded text-sm hover:bg-red-700 transition-colors",children:"Eliminar"})]})]},m.id))}),!n&&t.length===0&&s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-600",children:"No hay servicios configurados."})})]})};function SG(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return g.useMemo(()=>n=>{t.forEach(a=>a(n))},t)}const Dh=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function eo(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Zx(e){return"nodeType"in e}function ir(e){var t,r;return e?eo(e)?e:Zx(e)&&(t=(r=e.ownerDocument)==null?void 0:r.defaultView)!=null?t:window:window}function e0(e){const{Document:t}=ir(e);return e instanceof t}function lc(e){return eo(e)?!1:e instanceof ir(e).HTMLElement}function IC(e){return e instanceof ir(e).SVGElement}function to(e){return e?eo(e)?e.document:Zx(e)?e0(e)?e:lc(e)||IC(e)?e.ownerDocument:document:document:document}const Is=Dh?g.useLayoutEffect:g.useEffect;function Ah(e){const t=g.useRef(e);return Is(()=>{t.current=e}),g.useCallback(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return t.current==null?void 0:t.current(...n)},[])}function EG(){const e=g.useRef(null),t=g.useCallback((n,a)=>{e.current=setInterval(n,a)},[]),r=g.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,r]}function Pl(e,t){t===void 0&&(t=[e]);const r=g.useRef(e);return Is(()=>{r.current!==e&&(r.current=e)},t),r}function cc(e,t){const r=g.useRef();return g.useMemo(()=>{const n=e(r.current);return r.current=n,n},[...t])}function mu(e){const t=Ah(e),r=g.useRef(null),n=g.useCallback(a=>{a!==r.current&&(t==null||t(a,r.current)),r.current=a},[]);return[r,n]}function pu(e){const t=g.useRef();return g.useEffect(()=>{t.current=e},[e]),t.current}let Bf={};function Th(e,t){return g.useMemo(()=>{if(t)return t;const r=Bf[e]==null?0:Bf[e]+1;return Bf[e]=r,e+"-"+r},[e,t])}function $C(e){return function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return n.reduce((i,o)=>{const c=Object.entries(o);for(const[l,d]of c){const u=i[l];u!=null&&(i[l]=u+e*d)}return i},{...t})}}const mi=$C(1),gu=$C(-1);function kG(e){return"clientX"in e&&"clientY"in e}function _h(e){if(!e)return!1;const{KeyboardEvent:t}=ir(e.target);return t&&e instanceof t}function DG(e){if(!e)return!1;const{TouchEvent:t}=ir(e.target);return t&&e instanceof t}function xu(e){if(DG(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return kG(e)?{x:e.clientX,y:e.clientY}:null}const Gn=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[Gn.Translate.toString(e),Gn.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:n}=e;return t+" "+r+"ms "+n}}}),Tb="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function AG(e){return e.matches(Tb)?e:e.querySelector(Tb)}const TG={display:"none"};function _G(e){let{id:t,value:r}=e;return I.createElement("div",{id:t,style:TG},r)}function MG(e){let{id:t,announcement:r,ariaLiveType:n="assertive"}=e;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return I.createElement("div",{id:t,style:a,role:"status","aria-live":n,"aria-atomic":!0},r)}function OG(){const[e,t]=g.useState("");return{announce:g.useCallback(n=>{n!=null&&t(n)},[]),announcement:e}}const FC=g.createContext(null);function RG(e){const t=g.useContext(FC);g.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function PG(){const[e]=g.useState(()=>new Set),t=g.useCallback(n=>(e.add(n),()=>e.delete(n)),[e]);return[g.useCallback(n=>{let{type:a,event:i}=n;e.forEach(o=>{var c;return(c=o[a])==null?void 0:c.call(o,i)})},[e]),t]}const LG={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},IG={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function $G(e){let{announcements:t=IG,container:r,hiddenTextDescribedById:n,screenReaderInstructions:a=LG}=e;const{announce:i,announcement:o}=OG(),c=Th("DndLiveRegion"),[l,d]=g.useState(!1);if(g.useEffect(()=>{d(!0)},[]),RG(g.useMemo(()=>({onDragStart(h){let{active:f}=h;i(t.onDragStart({active:f}))},onDragMove(h){let{active:f,over:x}=h;t.onDragMove&&i(t.onDragMove({active:f,over:x}))},onDragOver(h){let{active:f,over:x}=h;i(t.onDragOver({active:f,over:x}))},onDragEnd(h){let{active:f,over:x}=h;i(t.onDragEnd({active:f,over:x}))},onDragCancel(h){let{active:f,over:x}=h;i(t.onDragCancel({active:f,over:x}))}}),[i,t])),!l)return null;const u=I.createElement(I.Fragment,null,I.createElement(_G,{id:n,value:a.draggable}),I.createElement(MG,{id:c,announcement:o}));return r?fa.createPortal(u,r):u}var Et;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Et||(Et={}));function vu(){}function FG(e,t){return g.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function BG(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return g.useMemo(()=>[...t].filter(n=>n!=null),[...t])}const vs=Object.freeze({x:0,y:0});function zG(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function UG(e,t){const r=xu(e);if(!r)return"0 0";const n={x:(r.x-t.left)/t.width*100,y:(r.y-t.top)/t.height*100};return n.x+"% "+n.y+"%"}function VG(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return r-n}function HG(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return n-r}function WG(e,t){if(!e||e.length===0)return null;const[r]=e;return r[t]}function _b(e,t,r){return t===void 0&&(t=e.left),r===void 0&&(r=e.top),{x:t+e.width*.5,y:r+e.height*.5}}const YG=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const a=_b(t,t.left,t.top),i=[];for(const o of n){const{id:c}=o,l=r.get(c);if(l){const d=zG(_b(l),a);i.push({id:c,data:{droppableContainer:o,value:d}})}}return i.sort(VG)};function qG(e,t){const r=Math.max(t.top,e.top),n=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),o=a-n,c=i-r;if(n<a&&r<i){const l=t.width*t.height,d=e.width*e.height,u=o*c,h=u/(l+d-u);return Number(h.toFixed(4))}return 0}const GG=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const a=[];for(const i of n){const{id:o}=i,c=r.get(o);if(c){const l=qG(c,t);l>0&&a.push({id:o,data:{droppableContainer:i,value:l}})}}return a.sort(HG)};function KG(e,t,r){return{...e,scaleX:t&&r?t.width/r.width:1,scaleY:t&&r?t.height/r.height:1}}function BC(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:vs}function QG(e){return function(r){for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return a.reduce((o,c)=>({...o,top:o.top+e*c.y,bottom:o.bottom+e*c.y,left:o.left+e*c.x,right:o.right+e*c.x}),{...r})}}const XG=QG(1);function zC(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function JG(e,t,r){const n=zC(t);if(!n)return e;const{scaleX:a,scaleY:i,x:o,y:c}=n,l=e.left-o-(1-a)*parseFloat(r),d=e.top-c-(1-i)*parseFloat(r.slice(r.indexOf(" ")+1)),u=a?e.width/a:e.width,h=i?e.height/i:e.height;return{width:u,height:h,top:d,right:l+u,bottom:d+h,left:l}}const ZG={ignoreTransform:!1};function ro(e,t){t===void 0&&(t=ZG);let r=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:d,transformOrigin:u}=ir(e).getComputedStyle(e);d&&(r=JG(r,d,u))}const{top:n,left:a,width:i,height:o,bottom:c,right:l}=r;return{top:n,left:a,width:i,height:o,bottom:c,right:l}}function Mb(e){return ro(e,{ignoreTransform:!0})}function eK(e){const t=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:t,bottom:r,width:t,height:r}}function tK(e,t){return t===void 0&&(t=ir(e).getComputedStyle(e)),t.position==="fixed"}function rK(e,t){t===void 0&&(t=ir(e).getComputedStyle(e));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const i=t[a];return typeof i=="string"?r.test(i):!1})}function t0(e,t){const r=[];function n(a){if(t!=null&&r.length>=t||!a)return r;if(e0(a)&&a.scrollingElement!=null&&!r.includes(a.scrollingElement))return r.push(a.scrollingElement),r;if(!lc(a)||IC(a)||r.includes(a))return r;const i=ir(e).getComputedStyle(a);return a!==e&&rK(a,i)&&r.push(a),tK(a,i)?r:n(a.parentNode)}return e?n(e):r}function UC(e){const[t]=t0(e,1);return t??null}function zf(e){return!Dh||!e?null:eo(e)?e:Zx(e)?e0(e)||e===to(e).scrollingElement?window:lc(e)?e:null:null}function VC(e){return eo(e)?e.scrollX:e.scrollLeft}function HC(e){return eo(e)?e.scrollY:e.scrollTop}function Cp(e){return{x:VC(e),y:HC(e)}}var Ot;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Ot||(Ot={}));function WC(e){return!Dh||!e?!1:e===document.scrollingElement}function YC(e){const t={x:0,y:0},r=WC(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},n={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},a=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,o=e.scrollTop>=n.y,c=e.scrollLeft>=n.x;return{isTop:a,isLeft:i,isBottom:o,isRight:c,maxScroll:n,minScroll:t}}const sK={x:.2,y:.2};function nK(e,t,r,n,a){let{top:i,left:o,right:c,bottom:l}=r;n===void 0&&(n=10),a===void 0&&(a=sK);const{isTop:d,isBottom:u,isLeft:h,isRight:f}=YC(e),x={x:0,y:0},v={x:0,y:0},y={height:t.height*a.y,width:t.width*a.x};return!d&&i<=t.top+y.height?(x.y=Ot.Backward,v.y=n*Math.abs((t.top+y.height-i)/y.height)):!u&&l>=t.bottom-y.height&&(x.y=Ot.Forward,v.y=n*Math.abs((t.bottom-y.height-l)/y.height)),!f&&c>=t.right-y.width?(x.x=Ot.Forward,v.x=n*Math.abs((t.right-y.width-c)/y.width)):!h&&o<=t.left+y.width&&(x.x=Ot.Backward,v.x=n*Math.abs((t.left+y.width-o)/y.width)),{direction:x,speed:v}}function aK(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:t,left:r,right:n,bottom:a}=e.getBoundingClientRect();return{top:t,left:r,right:n,bottom:a,width:e.clientWidth,height:e.clientHeight}}function qC(e){return e.reduce((t,r)=>mi(t,Cp(r)),vs)}function iK(e){return e.reduce((t,r)=>t+VC(r),0)}function oK(e){return e.reduce((t,r)=>t+HC(r),0)}function GC(e,t){if(t===void 0&&(t=ro),!e)return;const{top:r,left:n,bottom:a,right:i}=t(e);UC(e)&&(a<=0||i<=0||r>=window.innerHeight||n>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const lK=[["x",["left","right"],iK],["y",["top","bottom"],oK]];class r0{constructor(t,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=t0(r),a=qC(n);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,o,c]of lK)for(const l of o)Object.defineProperty(this,l,{get:()=>{const d=c(n),u=a[i]-d;return this.rect[l]+u},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Yo{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...r)})},this.target=t}add(t,r,n){var a;(a=this.target)==null||a.addEventListener(t,r,n),this.listeners.push([t,r,n])}}function cK(e){const{EventTarget:t}=ir(e);return e instanceof t?e:to(e)}function Uf(e,t){const r=Math.abs(e.x),n=Math.abs(e.y);return typeof t=="number"?Math.sqrt(r**2+n**2)>t:"x"in t&&"y"in t?r>t.x&&n>t.y:"x"in t?r>t.x:"y"in t?n>t.y:!1}var $r;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})($r||($r={}));function Ob(e){e.preventDefault()}function dK(e){e.stopPropagation()}var Be;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Be||(Be={}));const KC={start:[Be.Space,Be.Enter],cancel:[Be.Esc],end:[Be.Space,Be.Enter,Be.Tab]},uK=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case Be.Right:return{...r,x:r.x+25};case Be.Left:return{...r,x:r.x-25};case Be.Down:return{...r,y:r.y+25};case Be.Up:return{...r,y:r.y-25}}};class QC{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:r}}=t;this.props=t,this.listeners=new Yo(to(r)),this.windowListeners=new Yo(ir(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add($r.Resize,this.handleCancel),this.windowListeners.add($r.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add($r.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:r}=this.props,n=t.node.current;n&&GC(n),r(vs)}handleKeyDown(t){if(_h(t)){const{active:r,context:n,options:a}=this.props,{keyboardCodes:i=KC,coordinateGetter:o=uK,scrollBehavior:c="smooth"}=a,{code:l}=t;if(i.end.includes(l)){this.handleEnd(t);return}if(i.cancel.includes(l)){this.handleCancel(t);return}const{collisionRect:d}=n.current,u=d?{x:d.left,y:d.top}:vs;this.referenceCoordinates||(this.referenceCoordinates=u);const h=o(t,{active:r,context:n.current,currentCoordinates:u});if(h){const f=gu(h,u),x={x:0,y:0},{scrollableAncestors:v}=n.current;for(const y of v){const b=t.code,{isTop:p,isRight:m,isLeft:j,isBottom:w,maxScroll:N,minScroll:C}=YC(y),S=aK(y),E={x:Math.min(b===Be.Right?S.right-S.width/2:S.right,Math.max(b===Be.Right?S.left:S.left+S.width/2,h.x)),y:Math.min(b===Be.Down?S.bottom-S.height/2:S.bottom,Math.max(b===Be.Down?S.top:S.top+S.height/2,h.y))},k=b===Be.Right&&!m||b===Be.Left&&!j,T=b===Be.Down&&!w||b===Be.Up&&!p;if(k&&E.x!==h.x){const D=y.scrollLeft+f.x,$=b===Be.Right&&D<=N.x||b===Be.Left&&D>=C.x;if($&&!f.y){y.scrollTo({left:D,behavior:c});return}$?x.x=y.scrollLeft-D:x.x=b===Be.Right?y.scrollLeft-N.x:y.scrollLeft-C.x,x.x&&y.scrollBy({left:-x.x,behavior:c});break}else if(T&&E.y!==h.y){const D=y.scrollTop+f.y,$=b===Be.Down&&D<=N.y||b===Be.Up&&D>=C.y;if($&&!f.x){y.scrollTo({top:D,behavior:c});return}$?x.y=y.scrollTop-D:x.y=b===Be.Down?y.scrollTop-N.y:y.scrollTop-C.y,x.y&&y.scrollBy({top:-x.y,behavior:c});break}}this.handleMove(t,mi(gu(h,this.referenceCoordinates),x))}}}handleMove(t,r){const{onMove:n}=this.props;t.preventDefault(),n(r)}handleEnd(t){const{onEnd:r}=this.props;t.preventDefault(),this.detach(),r()}handleCancel(t){const{onCancel:r}=this.props;t.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}QC.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:n=KC,onActivation:a}=t,{active:i}=r;const{code:o}=e.nativeEvent;if(n.start.includes(o)){const c=i.activatorNode.current;return c&&e.target!==c?!1:(e.preventDefault(),a==null||a({event:e.nativeEvent}),!0)}return!1}}];function Rb(e){return!!(e&&"distance"in e)}function Pb(e){return!!(e&&"delay"in e)}class s0{constructor(t,r,n){var a;n===void 0&&(n=cK(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=r;const{event:i}=t,{target:o}=i;this.props=t,this.events=r,this.document=to(o),this.documentListeners=new Yo(this.document),this.listeners=new Yo(n),this.windowListeners=new Yo(ir(o)),this.initialCoordinates=(a=xu(i))!=null?a:vs,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:r,bypassActivationConstraint:n}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add($r.Resize,this.handleCancel),this.windowListeners.add($r.DragStart,Ob),this.windowListeners.add($r.VisibilityChange,this.handleCancel),this.windowListeners.add($r.ContextMenu,Ob),this.documentListeners.add($r.Keydown,this.handleKeydown),r){if(n!=null&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Pb(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(Rb(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,r){const{active:n,onPending:a}=this.props;a(n,t,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:t}=this,{onStart:r}=this.props;t&&(this.activated=!0,this.documentListeners.add($r.Click,dK,{capture:!0}),this.removeTextSelection(),this.documentListeners.add($r.SelectionChange,this.removeTextSelection),r(t))}handleMove(t){var r;const{activated:n,initialCoordinates:a,props:i}=this,{onMove:o,options:{activationConstraint:c}}=i;if(!a)return;const l=(r=xu(t))!=null?r:vs,d=gu(a,l);if(!n&&c){if(Rb(c)){if(c.tolerance!=null&&Uf(d,c.tolerance))return this.handleCancel();if(Uf(d,c.distance))return this.handleStart()}if(Pb(c)&&Uf(d,c.tolerance))return this.handleCancel();this.handlePending(c,d);return}t.cancelable&&t.preventDefault(),o(l)}handleEnd(){const{onAbort:t,onEnd:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleCancel(){const{onAbort:t,onCancel:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleKeydown(t){t.code===Be.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const hK={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class n0 extends s0{constructor(t){const{event:r}=t,n=to(r.target);super(t,hK,n)}}n0.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return!r.isPrimary||r.button!==0?!1:(n==null||n({event:r}),!0)}}];const fK={move:{name:"mousemove"},end:{name:"mouseup"}};var Sp;(function(e){e[e.RightClick=2]="RightClick"})(Sp||(Sp={}));class mK extends s0{constructor(t){super(t,fK,to(t.event.target))}}mK.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return r.button===Sp.RightClick?!1:(n==null||n({event:r}),!0)}}];const Vf={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class pK extends s0{constructor(t){super(t,Vf)}static setup(){return window.addEventListener(Vf.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Vf.move.name,t)};function t(){}}}pK.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;const{touches:a}=r;return a.length>1?!1:(n==null||n({event:r}),!0)}}];var qo;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(qo||(qo={}));var yu;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(yu||(yu={}));function gK(e){let{acceleration:t,activator:r=qo.Pointer,canScroll:n,draggingRect:a,enabled:i,interval:o=5,order:c=yu.TreeOrder,pointerCoordinates:l,scrollableAncestors:d,scrollableAncestorRects:u,delta:h,threshold:f}=e;const x=vK({delta:h,disabled:!i}),[v,y]=EG(),b=g.useRef({x:0,y:0}),p=g.useRef({x:0,y:0}),m=g.useMemo(()=>{switch(r){case qo.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case qo.DraggableRect:return a}},[r,a,l]),j=g.useRef(null),w=g.useCallback(()=>{const C=j.current;if(!C)return;const S=b.current.x*p.current.x,E=b.current.y*p.current.y;C.scrollBy(S,E)},[]),N=g.useMemo(()=>c===yu.TreeOrder?[...d].reverse():d,[c,d]);g.useEffect(()=>{if(!i||!d.length||!m){y();return}for(const C of N){if((n==null?void 0:n(C))===!1)continue;const S=d.indexOf(C),E=u[S];if(!E)continue;const{direction:k,speed:T}=nK(C,E,m,t,f);for(const D of["x","y"])x[D][k[D]]||(T[D]=0,k[D]=0);if(T.x>0||T.y>0){y(),j.current=C,v(w,o),b.current=T,p.current=k;return}}b.current={x:0,y:0},p.current={x:0,y:0},y()},[t,w,n,y,i,o,JSON.stringify(m),JSON.stringify(x),v,d,N,u,JSON.stringify(f)])}const xK={x:{[Ot.Backward]:!1,[Ot.Forward]:!1},y:{[Ot.Backward]:!1,[Ot.Forward]:!1}};function vK(e){let{delta:t,disabled:r}=e;const n=pu(t);return cc(a=>{if(r||!n||!a)return xK;const i={x:Math.sign(t.x-n.x),y:Math.sign(t.y-n.y)};return{x:{[Ot.Backward]:a.x[Ot.Backward]||i.x===-1,[Ot.Forward]:a.x[Ot.Forward]||i.x===1},y:{[Ot.Backward]:a.y[Ot.Backward]||i.y===-1,[Ot.Forward]:a.y[Ot.Forward]||i.y===1}}},[r,t,n])}function yK(e,t){const r=t!=null?e.get(t):void 0,n=r?r.node.current:null;return cc(a=>{var i;return t==null?null:(i=n??a)!=null?i:null},[n,t])}function bK(e,t){return g.useMemo(()=>e.reduce((r,n)=>{const{sensor:a}=n,i=a.activators.map(o=>({eventName:o.eventName,handler:t(o.handler,n)}));return[...r,...i]},[]),[e,t])}var Ll;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Ll||(Ll={}));var Ep;(function(e){e.Optimized="optimized"})(Ep||(Ep={}));const Lb=new Map;function jK(e,t){let{dragging:r,dependencies:n,config:a}=t;const[i,o]=g.useState(null),{frequency:c,measure:l,strategy:d}=a,u=g.useRef(e),h=b(),f=Pl(h),x=g.useCallback(function(p){p===void 0&&(p=[]),!f.current&&o(m=>m===null?p:m.concat(p.filter(j=>!m.includes(j))))},[f]),v=g.useRef(null),y=cc(p=>{if(h&&!r)return Lb;if(!p||p===Lb||u.current!==e||i!=null){const m=new Map;for(let j of e){if(!j)continue;if(i&&i.length>0&&!i.includes(j.id)&&j.rect.current){m.set(j.id,j.rect.current);continue}const w=j.node.current,N=w?new r0(l(w),w):null;j.rect.current=N,N&&m.set(j.id,N)}return m}return p},[e,i,r,h,l]);return g.useEffect(()=>{u.current=e},[e]),g.useEffect(()=>{h||x()},[r,h]),g.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),g.useEffect(()=>{h||typeof c!="number"||v.current!==null||(v.current=setTimeout(()=>{x(),v.current=null},c))},[c,h,x,...n]),{droppableRects:y,measureDroppableContainers:x,measuringScheduled:i!=null};function b(){switch(d){case Ll.Always:return!1;case Ll.BeforeDragging:return r;default:return!r}}}function a0(e,t){return cc(r=>e?r||(typeof t=="function"?t(e):e):null,[t,e])}function wK(e,t){return a0(e,t)}function NK(e){let{callback:t,disabled:r}=e;const n=Ah(t),a=g.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(n)},[n,r]);return g.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function Mh(e){let{callback:t,disabled:r}=e;const n=Ah(t),a=g.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(n)},[r]);return g.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function CK(e){return new r0(ro(e),e)}function Ib(e,t,r){t===void 0&&(t=CK);const[n,a]=g.useState(null);function i(){a(l=>{if(!e)return null;if(e.isConnected===!1){var d;return(d=l??r)!=null?d:null}const u=t(e);return JSON.stringify(l)===JSON.stringify(u)?l:u})}const o=NK({callback(l){if(e)for(const d of l){const{type:u,target:h}=d;if(u==="childList"&&h instanceof HTMLElement&&h.contains(e)){i();break}}}}),c=Mh({callback:i});return Is(()=>{i(),e?(c==null||c.observe(e),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(c==null||c.disconnect(),o==null||o.disconnect())},[e]),n}function SK(e){const t=a0(e);return BC(e,t)}const $b=[];function EK(e){const t=g.useRef(e),r=cc(n=>e?n&&n!==$b&&e&&t.current&&e.parentNode===t.current.parentNode?n:t0(e):$b,[e]);return g.useEffect(()=>{t.current=e},[e]),r}function kK(e){const[t,r]=g.useState(null),n=g.useRef(e),a=g.useCallback(i=>{const o=zf(i.target);o&&r(c=>c?(c.set(o,Cp(o)),new Map(c)):null)},[]);return g.useEffect(()=>{const i=n.current;if(e!==i){o(i);const c=e.map(l=>{const d=zf(l);return d?(d.addEventListener("scroll",a,{passive:!0}),[d,Cp(d)]):null}).filter(l=>l!=null);r(c.length?new Map(c):null),n.current=e}return()=>{o(e),o(i)};function o(c){c.forEach(l=>{const d=zf(l);d==null||d.removeEventListener("scroll",a)})}},[a,e]),g.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,o)=>mi(i,o),vs):qC(e):vs,[e,t])}function Fb(e,t){t===void 0&&(t=[]);const r=g.useRef(null);return g.useEffect(()=>{r.current=null},t),g.useEffect(()=>{const n=e!==vs;n&&!r.current&&(r.current=e),!n&&r.current&&(r.current=null)},[e]),r.current?gu(e,r.current):vs}function DK(e){g.useEffect(()=>{if(!Dh)return;const t=e.map(r=>{let{sensor:n}=r;return n.setup==null?void 0:n.setup()});return()=>{for(const r of t)r==null||r()}},e.map(t=>{let{sensor:r}=t;return r}))}function AK(e,t){return g.useMemo(()=>e.reduce((r,n)=>{let{eventName:a,handler:i}=n;return r[a]=o=>{i(o,t)},r},{}),[e,t])}function XC(e){return g.useMemo(()=>e?eK(e):null,[e])}const Bb=[];function TK(e,t){t===void 0&&(t=ro);const[r]=e,n=XC(r?ir(r):null),[a,i]=g.useState(Bb);function o(){i(()=>e.length?e.map(l=>WC(l)?n:new r0(t(l),l)):Bb)}const c=Mh({callback:o});return Is(()=>{c==null||c.disconnect(),o(),e.forEach(l=>c==null?void 0:c.observe(l))},[e]),a}function JC(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return lc(t)?t:e}function _K(e){let{measure:t}=e;const[r,n]=g.useState(null),a=g.useCallback(d=>{for(const{target:u}of d)if(lc(u)){n(h=>{const f=t(u);return h?{...h,width:f.width,height:f.height}:f});break}},[t]),i=Mh({callback:a}),o=g.useCallback(d=>{const u=JC(d);i==null||i.disconnect(),u&&(i==null||i.observe(u)),n(u?t(u):null)},[t,i]),[c,l]=mu(o);return g.useMemo(()=>({nodeRef:c,rect:r,setRef:l}),[r,c,l])}const MK=[{sensor:n0,options:{}},{sensor:QC,options:{}}],OK={current:{}},yd={draggable:{measure:Mb},droppable:{measure:Mb,strategy:Ll.WhileDragging,frequency:Ep.Optimized},dragOverlay:{measure:ro}};class Go extends Map{get(t){var r;return t!=null&&(r=super.get(t))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:r}=t;return!r})}getNodeFor(t){var r,n;return(r=(n=this.get(t))==null?void 0:n.node.current)!=null?r:void 0}}const RK={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Go,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:vu},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:yd,measureDroppableContainers:vu,windowRect:null,measuringScheduled:!1},ZC={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:vu,draggableNodes:new Map,over:null,measureDroppableContainers:vu},dc=g.createContext(ZC),eS=g.createContext(RK);function PK(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Go}}}function LK(e,t){switch(t.type){case Et.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Et.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Et.DragEnd:case Et.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Et.RegisterDroppable:{const{element:r}=t,{id:n}=r,a=new Go(e.droppable.containers);return a.set(n,r),{...e,droppable:{...e.droppable,containers:a}}}case Et.SetDroppableDisabled:{const{id:r,key:n,disabled:a}=t,i=e.droppable.containers.get(r);if(!i||n!==i.key)return e;const o=new Go(e.droppable.containers);return o.set(r,{...i,disabled:a}),{...e,droppable:{...e.droppable,containers:o}}}case Et.UnregisterDroppable:{const{id:r,key:n}=t,a=e.droppable.containers.get(r);if(!a||n!==a.key)return e;const i=new Go(e.droppable.containers);return i.delete(r),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function IK(e){let{disabled:t}=e;const{active:r,activatorEvent:n,draggableNodes:a}=g.useContext(dc),i=pu(n),o=pu(r==null?void 0:r.id);return g.useEffect(()=>{if(!t&&!n&&i&&o!=null){if(!_h(i)||document.activeElement===i.target)return;const c=a.get(o);if(!c)return;const{activatorNode:l,node:d}=c;if(!l.current&&!d.current)return;requestAnimationFrame(()=>{for(const u of[l.current,d.current]){if(!u)continue;const h=AG(u);if(h){h.focus();break}}})}},[n,t,a,o,i]),null}function tS(e,t){let{transform:r,...n}=t;return e!=null&&e.length?e.reduce((a,i)=>i({transform:a,...n}),r):r}function $K(e){return g.useMemo(()=>({draggable:{...yd.draggable,...e==null?void 0:e.draggable},droppable:{...yd.droppable,...e==null?void 0:e.droppable},dragOverlay:{...yd.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function FK(e){let{activeNode:t,measure:r,initialRect:n,config:a=!0}=e;const i=g.useRef(!1),{x:o,y:c}=typeof a=="boolean"?{x:a,y:a}:a;Is(()=>{if(!o&&!c||!t){i.current=!1;return}if(i.current||!n)return;const d=t==null?void 0:t.node.current;if(!d||d.isConnected===!1)return;const u=r(d),h=BC(u,n);if(o||(h.x=0),c||(h.y=0),i.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const f=UC(d);f&&f.scrollBy({top:h.y,left:h.x})}},[t,o,c,n,r])}const Oh=g.createContext({...vs,scaleX:1,scaleY:1});var Cn;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Cn||(Cn={}));const BK=g.memo(function(t){var r,n,a,i;let{id:o,accessibility:c,autoScroll:l=!0,children:d,sensors:u=MK,collisionDetection:h=GG,measuring:f,modifiers:x,...v}=t;const y=g.useReducer(LK,void 0,PK),[b,p]=y,[m,j]=PG(),[w,N]=g.useState(Cn.Uninitialized),C=w===Cn.Initialized,{draggable:{active:S,nodes:E,translate:k},droppable:{containers:T}}=b,D=S!=null?E.get(S):null,$=g.useRef({initial:null,translated:null}),_=g.useMemo(()=>{var _t;return S!=null?{id:S,data:(_t=D==null?void 0:D.data)!=null?_t:OK,rect:$}:null},[S,D]),A=g.useRef(null),[B,P]=g.useState(null),[M,R]=g.useState(null),W=Pl(v,Object.values(v)),V=Th("DndDescribedBy",o),z=g.useMemo(()=>T.getEnabled(),[T]),H=$K(f),{droppableRects:G,measureDroppableContainers:Z,measuringScheduled:F}=jK(z,{dragging:C,dependencies:[k.x,k.y],config:H.droppable}),U=yK(E,S),Y=g.useMemo(()=>M?xu(M):null,[M]),Q=Bh(),de=wK(U,H.draggable.measure);FK({activeNode:S!=null?E.get(S):null,config:Q.layoutShiftCompensation,initialRect:de,measure:H.draggable.measure});const q=Ib(U,H.draggable.measure,de),ue=Ib(U?U.parentElement:null),oe=g.useRef({activatorEvent:null,active:null,activeNode:U,collisionRect:null,collisions:null,droppableRects:G,draggableNodes:E,draggingNode:null,draggingNodeRect:null,droppableContainers:T,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ye=T.getNodeFor((r=oe.current.over)==null?void 0:r.id),$e=_K({measure:H.dragOverlay.measure}),st=(n=$e.nodeRef.current)!=null?n:U,J=C?(a=$e.rect)!=null?a:q:null,me=!!($e.nodeRef.current&&$e.rect),_e=SK(me?null:q),ze=XC(st?ir(st):null),Ce=EK(C?ye??U:null),Pe=TK(Ce),He=tS(x,{transform:{x:k.x-_e.x,y:k.y-_e.y,scaleX:1,scaleY:1},activatorEvent:M,active:_,activeNodeRect:q,containerNodeRect:ue,draggingNodeRect:J,over:oe.current.over,overlayNodeRect:$e.rect,scrollableAncestors:Ce,scrollableAncestorRects:Pe,windowRect:ze}),zt=Y?mi(Y,k):null,es=kK(Ce),js=Fb(es),Hs=Fb(es,[q]),Ke=mi(He,js),Xt=J?XG(J,He):null,or=_&&Xt?h({active:_,collisionRect:Xt,droppableRects:G,droppableContainers:z,pointerCoordinates:zt}):null,xn=WG(or,"id"),[L,fe]=g.useState(null),ke=me?He:mi(He,Hs),xe=KG(ke,(i=L==null?void 0:L.rect)!=null?i:null,q),Fe=g.useRef(null),Ue=g.useCallback((_t,Jt)=>{let{sensor:Zt,options:ts}=Jt;if(A.current==null)return;const lr=E.get(A.current);if(!lr)return;const er=_t.nativeEvent,Or=new Zt({active:A.current,activeNode:lr,event:er,options:ts,context:oe,onAbort(wt){if(!E.get(wt))return;const{onDragAbort:Rr}=W.current,O={id:wt};Rr==null||Rr(O),m({type:"onDragAbort",event:O})},onPending(wt,ws,Rr,O){if(!E.get(wt))return;const{onDragPending:ne}=W.current,pe={id:wt,constraint:ws,initialCoordinates:Rr,offset:O};ne==null||ne(pe),m({type:"onDragPending",event:pe})},onStart(wt){const ws=A.current;if(ws==null)return;const Rr=E.get(ws);if(!Rr)return;const{onDragStart:O}=W.current,ae={activatorEvent:er,active:{id:ws,data:Rr.data,rect:$}};fa.unstable_batchedUpdates(()=>{O==null||O(ae),N(Cn.Initializing),p({type:Et.DragStart,initialCoordinates:wt,active:ws}),m({type:"onDragStart",event:ae}),P(Fe.current),R(er)})},onMove(wt){p({type:Et.DragMove,coordinates:wt})},onEnd:vn(Et.DragEnd),onCancel:vn(Et.DragCancel)});Fe.current=Or;function vn(wt){return async function(){const{active:Rr,collisions:O,over:ae,scrollAdjustedTranslate:ne}=oe.current;let pe=null;if(Rr&&ne){const{cancelDrop:ie}=W.current;pe={activatorEvent:er,active:Rr,collisions:O,delta:ne,over:ae},wt===Et.DragEnd&&typeof ie=="function"&&await Promise.resolve(ie(pe))&&(wt=Et.DragCancel)}A.current=null,fa.unstable_batchedUpdates(()=>{p({type:wt}),N(Cn.Uninitialized),fe(null),P(null),R(null),Fe.current=null;const ie=wt===Et.DragEnd?"onDragEnd":"onDragCancel";if(pe){const ge=W.current[ie];ge==null||ge(pe),m({type:ie,event:pe})}})}}},[E]),ot=g.useCallback((_t,Jt)=>(Zt,ts)=>{const lr=Zt.nativeEvent,er=E.get(ts);if(A.current!==null||!er||lr.dndKit||lr.defaultPrevented)return;const Or={active:er};_t(Zt,Jt.options,Or)===!0&&(lr.dndKit={capturedBy:Jt.sensor},A.current=ts,Ue(Zt,Jt))},[E,Ue]),nt=bK(u,ot);DK(u),Is(()=>{q&&w===Cn.Initializing&&N(Cn.Initialized)},[q,w]),g.useEffect(()=>{const{onDragMove:_t}=W.current,{active:Jt,activatorEvent:Zt,collisions:ts,over:lr}=oe.current;if(!Jt||!Zt)return;const er={active:Jt,activatorEvent:Zt,collisions:ts,delta:{x:Ke.x,y:Ke.y},over:lr};fa.unstable_batchedUpdates(()=>{_t==null||_t(er),m({type:"onDragMove",event:er})})},[Ke.x,Ke.y]),g.useEffect(()=>{const{active:_t,activatorEvent:Jt,collisions:Zt,droppableContainers:ts,scrollAdjustedTranslate:lr}=oe.current;if(!_t||A.current==null||!Jt||!lr)return;const{onDragOver:er}=W.current,Or=ts.get(xn),vn=Or&&Or.rect.current?{id:Or.id,rect:Or.rect.current,data:Or.data,disabled:Or.disabled}:null,wt={active:_t,activatorEvent:Jt,collisions:Zt,delta:{x:lr.x,y:lr.y},over:vn};fa.unstable_batchedUpdates(()=>{fe(vn),er==null||er(wt),m({type:"onDragOver",event:wt})})},[xn]),Is(()=>{oe.current={activatorEvent:M,active:_,activeNode:U,collisionRect:Xt,collisions:or,droppableRects:G,draggableNodes:E,draggingNode:st,draggingNodeRect:J,droppableContainers:T,over:L,scrollableAncestors:Ce,scrollAdjustedTranslate:Ke},$.current={initial:J,translated:Xt}},[_,U,or,Xt,E,st,J,G,T,L,Ce,Ke]),gK({...Q,delta:k,draggingRect:Xt,pointerCoordinates:zt,scrollableAncestors:Ce,scrollableAncestorRects:Pe});const no=g.useMemo(()=>({active:_,activeNode:U,activeNodeRect:q,activatorEvent:M,collisions:or,containerNodeRect:ue,dragOverlay:$e,draggableNodes:E,droppableContainers:T,droppableRects:G,over:L,measureDroppableContainers:Z,scrollableAncestors:Ce,scrollableAncestorRects:Pe,measuringConfiguration:H,measuringScheduled:F,windowRect:ze}),[_,U,q,M,or,ue,$e,E,T,G,L,Z,Ce,Pe,H,F,ze]),ao=g.useMemo(()=>({activatorEvent:M,activators:nt,active:_,activeNodeRect:q,ariaDescribedById:{draggable:V},dispatch:p,draggableNodes:E,over:L,measureDroppableContainers:Z}),[M,nt,_,q,p,V,E,L,Z]);return I.createElement(FC.Provider,{value:j},I.createElement(dc.Provider,{value:ao},I.createElement(eS.Provider,{value:no},I.createElement(Oh.Provider,{value:xe},d)),I.createElement(IK,{disabled:(c==null?void 0:c.restoreFocus)===!1})),I.createElement($G,{...c,hiddenTextDescribedById:V}));function Bh(){const _t=(B==null?void 0:B.autoScrollEnabled)===!1,Jt=typeof l=="object"?l.enabled===!1:l===!1,Zt=C&&!_t&&!Jt;return typeof l=="object"?{...l,enabled:Zt}:{enabled:Zt}}}),zK=g.createContext(null),zb="button",UK="Draggable";function rS(e){let{id:t,data:r,disabled:n=!1,attributes:a}=e;const i=Th(UK),{activators:o,activatorEvent:c,active:l,activeNodeRect:d,ariaDescribedById:u,draggableNodes:h,over:f}=g.useContext(dc),{role:x=zb,roleDescription:v="draggable",tabIndex:y=0}=a??{},b=(l==null?void 0:l.id)===t,p=g.useContext(b?Oh:zK),[m,j]=mu(),[w,N]=mu(),C=AK(o,t),S=Pl(r);Is(()=>(h.set(t,{id:t,key:i,node:m,activatorNode:w,data:S}),()=>{const k=h.get(t);k&&k.key===i&&h.delete(t)}),[h,t]);const E=g.useMemo(()=>({role:x,tabIndex:y,"aria-disabled":n,"aria-pressed":b&&x===zb?!0:void 0,"aria-roledescription":v,"aria-describedby":u.draggable}),[n,x,y,b,v,u.draggable]);return{active:l,activatorEvent:c,activeNodeRect:d,attributes:E,isDragging:b,listeners:n?void 0:C,node:m,over:f,setNodeRef:j,setActivatorNodeRef:N,transform:p}}function VK(){return g.useContext(eS)}const HK="Droppable",WK={timeout:25};function sS(e){let{data:t,disabled:r=!1,id:n,resizeObserverConfig:a}=e;const i=Th(HK),{active:o,dispatch:c,over:l,measureDroppableContainers:d}=g.useContext(dc),u=g.useRef({disabled:r}),h=g.useRef(!1),f=g.useRef(null),x=g.useRef(null),{disabled:v,updateMeasurementsFor:y,timeout:b}={...WK,...a},p=Pl(y??n),m=g.useCallback(()=>{if(!h.current){h.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{d(Array.isArray(p.current)?p.current:[p.current]),x.current=null},b)},[b]),j=Mh({callback:m,disabled:v||!o}),w=g.useCallback((E,k)=>{j&&(k&&(j.unobserve(k),h.current=!1),E&&j.observe(E))},[j]),[N,C]=mu(w),S=Pl(t);return g.useEffect(()=>{!j||!N.current||(j.disconnect(),h.current=!1,j.observe(N.current))},[N,j]),g.useEffect(()=>(c({type:Et.RegisterDroppable,element:{id:n,key:i,disabled:r,node:N,rect:f,data:S}}),()=>c({type:Et.UnregisterDroppable,key:i,id:n})),[n]),g.useEffect(()=>{r!==u.current.disabled&&(c({type:Et.SetDroppableDisabled,id:n,key:i,disabled:r}),u.current.disabled=r)},[n,i,r,c]),{active:o,rect:f,isOver:(l==null?void 0:l.id)===n,node:N,over:l,setNodeRef:C}}function YK(e){let{animation:t,children:r}=e;const[n,a]=g.useState(null),[i,o]=g.useState(null),c=pu(r);return!r&&!n&&c&&a(c),Is(()=>{if(!i)return;const l=n==null?void 0:n.key,d=n==null?void 0:n.props.id;if(l==null||d==null){a(null);return}Promise.resolve(t(d,i)).then(()=>{a(null)})},[t,n,i]),I.createElement(I.Fragment,null,r,n?g.cloneElement(n,{ref:o}):null)}const qK={x:0,y:0,scaleX:1,scaleY:1};function GK(e){let{children:t}=e;return I.createElement(dc.Provider,{value:ZC},I.createElement(Oh.Provider,{value:qK},t))}const KK={position:"fixed",touchAction:"none"},QK=e=>_h(e)?"transform 250ms ease":void 0,XK=g.forwardRef((e,t)=>{let{as:r,activatorEvent:n,adjustScale:a,children:i,className:o,rect:c,style:l,transform:d,transition:u=QK}=e;if(!c)return null;const h=a?d:{...d,scaleX:1,scaleY:1},f={...KK,width:c.width,height:c.height,top:c.top,left:c.left,transform:Gn.Transform.toString(h),transformOrigin:a&&n?UG(n,c):void 0,transition:typeof u=="function"?u(n):u,...l};return I.createElement(r,{className:o,style:f,ref:t},i)}),JK=e=>t=>{let{active:r,dragOverlay:n}=t;const a={},{styles:i,className:o}=e;if(i!=null&&i.active)for(const[c,l]of Object.entries(i.active))l!==void 0&&(a[c]=r.node.style.getPropertyValue(c),r.node.style.setProperty(c,l));if(i!=null&&i.dragOverlay)for(const[c,l]of Object.entries(i.dragOverlay))l!==void 0&&n.node.style.setProperty(c,l);return o!=null&&o.active&&r.node.classList.add(o.active),o!=null&&o.dragOverlay&&n.node.classList.add(o.dragOverlay),function(){for(const[l,d]of Object.entries(a))r.node.style.setProperty(l,d);o!=null&&o.active&&r.node.classList.remove(o.active)}},ZK=e=>{let{transform:{initial:t,final:r}}=e;return[{transform:Gn.Transform.toString(t)},{transform:Gn.Transform.toString(r)}]},eQ={duration:250,easing:"ease",keyframes:ZK,sideEffects:JK({styles:{active:{opacity:"0"}}})};function tQ(e){let{config:t,draggableNodes:r,droppableContainers:n,measuringConfiguration:a}=e;return Ah((i,o)=>{if(t===null)return;const c=r.get(i);if(!c)return;const l=c.node.current;if(!l)return;const d=JC(o);if(!d)return;const{transform:u}=ir(o).getComputedStyle(o),h=zC(u);if(!h)return;const f=typeof t=="function"?t:rQ(t);return GC(l,a.draggable.measure),f({active:{id:i,data:c.data,node:l,rect:a.draggable.measure(l)},draggableNodes:r,dragOverlay:{node:o,rect:a.dragOverlay.measure(d)},droppableContainers:n,measuringConfiguration:a,transform:h})})}function rQ(e){const{duration:t,easing:r,sideEffects:n,keyframes:a}={...eQ,...e};return i=>{let{active:o,dragOverlay:c,transform:l,...d}=i;if(!t)return;const u={x:c.rect.left-o.rect.left,y:c.rect.top-o.rect.top},h={scaleX:l.scaleX!==1?o.rect.width*l.scaleX/c.rect.width:1,scaleY:l.scaleY!==1?o.rect.height*l.scaleY/c.rect.height:1},f={x:l.x-u.x,y:l.y-u.y,...h},x=a({...d,active:o,dragOverlay:c,transform:{initial:l,final:f}}),[v]=x,y=x[x.length-1];if(JSON.stringify(v)===JSON.stringify(y))return;const b=n==null?void 0:n({active:o,dragOverlay:c,...d}),p=c.node.animate(x,{duration:t,easing:r,fill:"forwards"});return new Promise(m=>{p.onfinish=()=>{b==null||b(),m()}})}}let Ub=0;function sQ(e){return g.useMemo(()=>{if(e!=null)return Ub++,Ub},[e])}const nQ=I.memo(e=>{let{adjustScale:t=!1,children:r,dropAnimation:n,style:a,transition:i,modifiers:o,wrapperElement:c="div",className:l,zIndex:d=999}=e;const{activatorEvent:u,active:h,activeNodeRect:f,containerNodeRect:x,draggableNodes:v,droppableContainers:y,dragOverlay:b,over:p,measuringConfiguration:m,scrollableAncestors:j,scrollableAncestorRects:w,windowRect:N}=VK(),C=g.useContext(Oh),S=sQ(h==null?void 0:h.id),E=tS(o,{activatorEvent:u,active:h,activeNodeRect:f,containerNodeRect:x,draggingNodeRect:b.rect,over:p,overlayNodeRect:b.rect,scrollableAncestors:j,scrollableAncestorRects:w,transform:C,windowRect:N}),k=a0(f),T=tQ({config:n,draggableNodes:v,droppableContainers:y,measuringConfiguration:m}),D=k?b.setRef:void 0;return I.createElement(GK,null,I.createElement(YK,{animation:T},h&&S?I.createElement(XK,{key:S,id:h.id,ref:D,as:c,activatorEvent:u,adjustScale:t,className:l,transition:i,rect:k,style:{zIndex:d,...a},transform:E},r):null))});function i0(e,t,r){const n=e.slice();return n.splice(r<0?n.length+r:r,0,n.splice(t,1)[0]),n}function zc(e){return e!==null&&e>=0}const aQ=e=>{let{rects:t,activeIndex:r,overIndex:n,index:a}=e;const i=i0(t,n,r),o=t[a],c=i[a];return!c||!o?null:{x:c.left-o.left,y:c.top-o.top,scaleX:c.width/o.width,scaleY:c.height/o.height}},iQ="Sortable",oQ=I.createContext({activeIndex:-1,containerId:iQ,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:aQ,disabled:{draggable:!1,droppable:!1}}),lQ=e=>{let{id:t,items:r,activeIndex:n,overIndex:a}=e;return i0(r,n,a).indexOf(t)},cQ=e=>{let{containerId:t,isSorting:r,wasDragging:n,index:a,items:i,newIndex:o,previousItems:c,previousContainerId:l,transition:d}=e;return!d||!n||c!==i&&a===o?!1:r?!0:o!==a&&t===l},dQ={duration:200,easing:"ease"},nS="transform",uQ=Gn.Transition.toString({property:nS,duration:0,easing:"linear"}),hQ={roleDescription:"sortable"};function fQ(e){let{disabled:t,index:r,node:n,rect:a}=e;const[i,o]=g.useState(null),c=g.useRef(r);return Is(()=>{if(!t&&r!==c.current&&n.current){const l=a.current;if(l){const d=ro(n.current,{ignoreTransform:!0}),u={x:l.left-d.left,y:l.top-d.top,scaleX:l.width/d.width,scaleY:l.height/d.height};(u.x||u.y)&&o(u)}}r!==c.current&&(c.current=r)},[t,r,n,a]),g.useEffect(()=>{i&&o(null)},[i]),i}function mQ(e){let{animateLayoutChanges:t=cQ,attributes:r,disabled:n,data:a,getNewIndex:i=lQ,id:o,strategy:c,resizeObserverConfig:l,transition:d=dQ}=e;const{items:u,containerId:h,activeIndex:f,disabled:x,disableTransforms:v,sortedRects:y,overIndex:b,useDragOverlay:p,strategy:m}=g.useContext(oQ),j=pQ(n,x),w=u.indexOf(o),N=g.useMemo(()=>({sortable:{containerId:h,index:w,items:u},...a}),[h,a,w,u]),C=g.useMemo(()=>u.slice(u.indexOf(o)),[u,o]),{rect:S,node:E,isOver:k,setNodeRef:T}=sS({id:o,data:N,disabled:j.droppable,resizeObserverConfig:{updateMeasurementsFor:C,...l}}),{active:D,activatorEvent:$,activeNodeRect:_,attributes:A,setNodeRef:B,listeners:P,isDragging:M,over:R,setActivatorNodeRef:W,transform:V}=rS({id:o,data:N,attributes:{...hQ,...r},disabled:j.draggable}),z=SG(T,B),H=!!D,G=H&&!v&&zc(f)&&zc(b),Z=!p&&M,F=Z&&G?V:null,Y=G?F??(c??m)({rects:y,activeNodeRect:_,activeIndex:f,overIndex:b,index:w}):null,Q=zc(f)&&zc(b)?i({id:o,items:u,activeIndex:f,overIndex:b}):w,de=D==null?void 0:D.id,q=g.useRef({activeId:de,items:u,newIndex:Q,containerId:h}),ue=u!==q.current.items,oe=t({active:D,containerId:h,isDragging:M,isSorting:H,id:o,index:w,items:u,newIndex:q.current.newIndex,previousItems:q.current.items,previousContainerId:q.current.containerId,transition:d,wasDragging:q.current.activeId!=null}),ye=fQ({disabled:!oe,index:w,node:E,rect:S});return g.useEffect(()=>{H&&q.current.newIndex!==Q&&(q.current.newIndex=Q),h!==q.current.containerId&&(q.current.containerId=h),u!==q.current.items&&(q.current.items=u)},[H,Q,h,u]),g.useEffect(()=>{if(de===q.current.activeId)return;if(de!=null&&q.current.activeId==null){q.current.activeId=de;return}const st=setTimeout(()=>{q.current.activeId=de},50);return()=>clearTimeout(st)},[de]),{active:D,activeIndex:f,attributes:A,data:N,rect:S,index:w,newIndex:Q,items:u,isOver:k,isSorting:H,isDragging:M,listeners:P,node:E,overIndex:b,over:R,setNodeRef:z,setActivatorNodeRef:W,setDroppableNodeRef:T,setDraggableNodeRef:B,transform:ye??Y,transition:$e()};function $e(){if(ye||ue&&q.current.newIndex===w)return uQ;if(!(Z&&!_h($)||!d)&&(H||oe))return Gn.Transition.toString({...d,property:nS})}}function pQ(e,t){var r,n;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(r=e==null?void 0:e.draggable)!=null?r:t.draggable,droppable:(n=e==null?void 0:e.droppable)!=null?n:t.droppable}}Be.Down,Be.Right,Be.Up,Be.Left;const gQ=()=>{console.log("ComponentLibrary - Rendering");const e=[{type:"hero-banner",name:"Banner Principal",description:"Banner destacado con título, subtítulo y botón CTA",icon:"🎯",category:"Contenido Principal",color:"bg-gradient-to-r from-blue-500 to-purple-600"},{type:"service-cards",name:"Tarjetas de Servicios",description:"Grid de servicios con iconos y descripciones",icon:"⚖️",category:"Servicios",color:"bg-gradient-to-r from-green-500 to-teal-600"},{type:"contact-form",name:"Formulario de Contacto",description:"Formulario para que los clientes se pongan en contacto",icon:"📧",category:"Contacto",color:"bg-gradient-to-r from-orange-500 to-red-600"},{type:"testimonials",name:"Testimonios",description:"Opiniones y comentarios de clientes satisfechos",icon:"💬",category:"Social Proof",color:"bg-gradient-to-r from-purple-500 to-pink-600"},{type:"stats",name:"Estadísticas",description:"Números y métricas importantes del despacho",icon:"📊",category:"Social Proof",color:"bg-gradient-to-r from-indigo-500 to-blue-600"},{type:"text-block",name:"Bloque de Texto",description:"Texto con título y contenido personalizable",icon:"📝",category:"Contenido",color:"bg-gradient-to-r from-gray-500 to-gray-700"},{type:"image-gallery",name:"Galería de Imágenes",description:"Grid de imágenes con títulos opcionales",icon:"🖼️",category:"Contenido",color:"bg-gradient-to-r from-yellow-500 to-orange-600"},{type:"map",name:"Mapa de Ubicación",description:"Mapa interactivo con la ubicación del despacho",icon:"🗺️",category:"Contacto",color:"bg-gradient-to-r from-teal-500 to-green-600"},{type:"divider",name:"Separador",description:"Línea divisoria para separar secciones",icon:"➖",category:"Layout",color:"bg-gradient-to-r from-gray-400 to-gray-600"},{type:"spacer",name:"Espaciador",description:"Espacio vertical para separar elementos",icon:"⬜",category:"Layout",color:"bg-gradient-to-r from-gray-300 to-gray-500"}],t=[...new Set(e.map(r=>r.category))];return s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[s.jsxs("div",{className:"p-4 border-b bg-gradient-to-r from-blue-50 to-indigo-50",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"📚 Biblioteca de Componentes"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Arrastra componentes al canvas"})]}),s.jsx("div",{className:"p-4 max-h-[800px] overflow-y-auto",children:t.map(r=>s.jsxs("div",{className:"mb-6",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3 px-2 py-1 bg-gray-100 rounded",children:r}),s.jsx("div",{className:"space-y-2",children:e.filter(n=>n.category===r).map(n=>s.jsx(xQ,{component:n},n.type))})]},r))})]})},xQ=({component:e})=>{const{attributes:t,listeners:r,setNodeRef:n,transform:a,isDragging:i}=rS({id:e.type,data:{type:"component-library",component:e}}),o=a?{transform:`translate3d(${a.x}px, ${a.y}px, 0)`}:void 0;return console.log(`DraggableComponent - ${e.type} - isDragging:`,i),s.jsxs("div",{ref:n,...r,...t,style:o,className:`
        p-4 border rounded-lg cursor-move transition-all hover:shadow-md
        ${i?"bg-blue-50 border-blue-300 shadow-lg opacity-50 scale-105":"bg-white border-gray-200 hover:border-blue-300 hover:bg-blue-50"}
      `,children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center text-2xl ${e.color}`,children:e.icon}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h5",{className:"text-sm font-semibold text-gray-900 truncate",children:e.name}),s.jsx("p",{className:"text-xs text-gray-500 mt-1 leading-relaxed",children:e.description})]})]}),s.jsx("div",{className:"mt-2 text-xs text-gray-400 text-center",children:"← Arrastra al canvas"})]})},vQ=({layout:e,onComponentSelect:t,onComponentDelete:r,selectedComponent:n,isPreviewMode:a})=>{const{setNodeRef:i,isOver:o}=sS({id:"canvas-drop-zone"});return console.log("Canvas - Rendering, components:",e.components.length),console.log("Canvas - isPreviewMode:",a),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[s.jsxs("div",{className:"p-4 border-b bg-gradient-to-r from-green-50 to-emerald-50",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:a?"👁️ Vista Previa":"🎨 Canvas de Diseño"}),s.jsx("p",{className:"text-sm text-gray-600",children:a?"Vista previa de la página principal":"Arrastra componentes aquí para diseñar la página"})]}),s.jsxs("div",{ref:i,className:`
          min-h-[600px] p-6 transition-all
          ${o?"bg-blue-50 border-2 border-dashed border-blue-400":"bg-gray-50 border-2 border-dashed border-gray-300"}
          ${a?"bg-white":""}
        `,children:[e.components.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center h-96 text-center",children:[s.jsx("div",{className:"text-6xl mb-4",children:"🎨"}),s.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Canvas Vacío"}),s.jsx("p",{className:"text-gray-500 mb-4 max-w-md",children:a?"No hay componentes para mostrar en la vista previa":"Arrastra componentes desde la biblioteca para comenzar a diseñar"}),!a&&s.jsx("div",{className:"text-sm text-gray-400",children:"💡 Tip: Comienza con un Banner Principal"})]}):s.jsx("div",{className:"space-y-4",children:e.components.map((c,l)=>s.jsx(yQ,{component:c,index:l,onSelect:t,onDelete:r,isSelected:(n==null?void 0:n.id)===c.id,isPreviewMode:a},c.id))}),o&&!a&&s.jsx("div",{className:"text-center py-8 text-blue-600 font-medium",children:"✨ Suelta aquí para agregar el componente"})]})]})},yQ=({component:e,index:t,onSelect:r,onDelete:n,isSelected:a,isPreviewMode:i})=>{const{attributes:o,listeners:c,setNodeRef:l,transform:d,transition:u,isDragging:h}=mQ({id:e.id,data:{type:"canvas-component",component:e}}),f={transform:Gn.Transform.toString(d),transition:u};return console.log(`CanvasComponent - ${e.type} - isSelected:`,a),s.jsxs("div",{ref:l,style:f,...o,...c,className:`
        relative group transition-all
        ${h?"opacity-50 scale-95":""}
        ${a&&!i?"ring-2 ring-blue-500 ring-offset-2":"hover:ring-1 hover:ring-gray-300"}
      `,children:[!i&&s.jsxs("div",{className:"absolute -top-2 -left-2 z-10 flex space-x-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx("button",{onClick:x=>{x.stopPropagation(),r(e)},className:"bg-blue-500 text-white p-1 rounded-full text-xs hover:bg-blue-600 transition-colors",title:"Editar componente",children:"✏️"}),s.jsx("button",{onClick:x=>{x.stopPropagation(),n(e.id)},className:"bg-red-500 text-white p-1 rounded-full text-xs hover:bg-red-600 transition-colors",title:"Eliminar componente",children:"🗑️"})]}),!i&&s.jsx("div",{className:"absolute -top-2 -right-2 bg-gray-500 text-white text-xs px-2 py-1 rounded-full",children:t+1}),s.jsx("div",{className:`
          ${i?"":"cursor-move"}
          ${a&&!i?"bg-blue-50":""}
        `,onClick:()=>!i&&r(e),children:s.jsx(Q1,{component:e})}),a&&!i&&s.jsx("div",{className:"absolute inset-0 border-2 border-blue-500 pointer-events-none rounded-lg"})]})},bQ=({component:e,onUpdate:t})=>{const[r,n]=g.useState(e.props);g.useEffect(()=>{n(e.props)},[e]),console.log("PropertiesPanel - Rendering for component:",e.type);const a=(d,u)=>{const h={...r,[d]:u};n(h),t(e.id,h)},i=(d,u,h,f)=>{const x=[...r[d]||[]];x[u]={...x[u],[h]:f},a(d,x)},o=(d,u)=>{const h=[...r[d]||[],u];a(d,h)},c=(d,u)=>{const h=[...r[d]||[]];h.splice(u,1),a(d,h)},l=()=>{switch(e.type){case"hero-banner":return s.jsxs("div",{className:"space-y-4",children:[s.jsx(Qe,{label:"Título Principal",value:r.title||"",onChange:d=>a("title",d),type:"text",placeholder:"Ej: Despacho de Abogados García & Asociados"}),s.jsx(Qe,{label:"Subtítulo",value:r.subtitle||"",onChange:d=>a("subtitle",d),type:"textarea",placeholder:"Ej: Más de 15 años de experiencia en servicios legales profesionales"}),s.jsx(Qe,{label:"Texto del Botón",value:r.ctaText||"",onChange:d=>a("ctaText",d),type:"text",placeholder:"Ej: Consulta Gratuita"}),s.jsx(Qe,{label:"Enlace del Botón",value:r.ctaLink||"",onChange:d=>a("ctaLink",d),type:"text",placeholder:"Ej: /contacto o https://wa.me/34612345678"})]});case"service-cards":return s.jsxs("div",{className:"space-y-4",children:[s.jsx(Qe,{label:"Título de la Sección",value:r.title||"",onChange:d=>a("title",d),type:"text",placeholder:"Ej: Nuestros Servicios Legales"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Servicios"}),s.jsx("button",{onClick:()=>o("services",{icon:"⚖️",title:"Nuevo Servicio",description:"Descripción del servicio"}),className:"text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600",children:"+ Agregar"})]}),(r.services||[]).map((d,u)=>s.jsxs("div",{className:"p-3 border rounded-lg bg-gray-50 space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"text-xs font-medium text-gray-600",children:["Servicio ",u+1]}),s.jsx("button",{onClick:()=>c("services",u),className:"text-xs bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600",children:"Eliminar"})]}),s.jsx(Qe,{label:"Icono (emoji)",value:d.icon||"",onChange:h=>i("services",u,"icon",h),type:"text",placeholder:"Ej: ⚖️ 👥 🏢"}),s.jsx(Qe,{label:"Título del Servicio",value:d.title||"",onChange:h=>i("services",u,"title",h),type:"text",placeholder:"Ej: Derecho Civil"}),s.jsx(Qe,{label:"Descripción",value:d.description||"",onChange:h=>i("services",u,"description",h),type:"textarea",placeholder:"Ej: Asesoría especializada en casos civiles"})]},u))]})]});case"contact-form":return s.jsxs("div",{className:"space-y-4",children:[s.jsx(Qe,{label:"Título del Formulario",value:r.title||"",onChange:d=>a("title",d),type:"text",placeholder:"Ej: Solicita tu Consulta Gratuita"}),s.jsx(Qe,{label:"Subtítulo",value:r.subtitle||"",onChange:d=>a("subtitle",d),type:"textarea",placeholder:"Ej: Nuestros abogados especialistas están listos para ayudarte"}),s.jsx(Qe,{label:"Texto del Botón",value:r.submitText||"",onChange:d=>a("submitText",d),type:"text",placeholder:"Ej: Enviar Consulta"})]});case"testimonials":return s.jsxs("div",{className:"space-y-4",children:[s.jsx(Qe,{label:"Título de la Sección",value:r.title||"",onChange:d=>a("title",d),type:"text",placeholder:"Ej: Lo que dicen nuestros clientes"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Testimonios"}),s.jsx("button",{onClick:()=>o("testimonials",{name:"Cliente",text:"Excelente servicio",rating:5}),className:"text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600",children:"+ Agregar"})]}),(r.testimonials||[]).map((d,u)=>s.jsxs("div",{className:"p-3 border rounded-lg bg-gray-50 space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"text-xs font-medium text-gray-600",children:["Testimonio ",u+1]}),s.jsx("button",{onClick:()=>c("testimonials",u),className:"text-xs bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600",children:"Eliminar"})]}),s.jsx(Qe,{label:"Nombre del Cliente",value:d.name||"",onChange:h=>i("testimonials",u,"name",h),type:"text",placeholder:"Ej: María García"}),s.jsx(Qe,{label:"Testimonio",value:d.text||"",onChange:h=>i("testimonials",u,"text",h),type:"textarea",placeholder:"Ej: Excelente servicio profesional..."})]},u))]})]});case"stats":return s.jsxs("div",{className:"space-y-4",children:[s.jsx(Qe,{label:"Título de la Sección",value:r.title||"",onChange:d=>a("title",d),type:"text",placeholder:"Ej: Nuestros Números"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Estadísticas"}),s.jsx("button",{onClick:()=>o("stats",{value:"0",label:"Nueva Estadística"}),className:"text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600",children:"+ Agregar"})]}),(r.stats||[]).map((d,u)=>s.jsxs("div",{className:"p-3 border rounded-lg bg-gray-50 space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"text-xs font-medium text-gray-600",children:["Estadística ",u+1]}),s.jsx("button",{onClick:()=>c("stats",u),className:"text-xs bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600",children:"Eliminar"})]}),s.jsx(Qe,{label:"Valor",value:d.value||"",onChange:h=>i("stats",u,"value",h),type:"text",placeholder:"Ej: 500+"}),s.jsx(Qe,{label:"Etiqueta",value:d.label||"",onChange:h=>i("stats",u,"label",h),type:"text",placeholder:"Ej: Casos Exitosos"})]},u))]})]});case"text-block":return s.jsxs("div",{className:"space-y-4",children:[s.jsx(Qe,{label:"Título",value:r.title||"",onChange:d=>a("title",d),type:"text",placeholder:"Ej: Sobre Nosotros"}),s.jsx(Qe,{label:"Contenido",value:r.content||"",onChange:d=>a("content",d),type:"textarea",placeholder:"Ej: Somos un despacho de abogados comprometido..."}),s.jsx(Uc,{label:"Alineación del Texto",value:r.alignment||"left",onChange:d=>a("alignment",d),options:[{value:"left",label:"Izquierda"},{value:"center",label:"Centro"},{value:"right",label:"Derecha"}]}),s.jsx(Uc,{label:"Tamaño de Fuente",value:r.fontSize||"medium",onChange:d=>a("fontSize",d),options:[{value:"small",label:"Pequeño"},{value:"medium",label:"Mediano"},{value:"large",label:"Grande"}]})]});case"image-gallery":return s.jsxs("div",{className:"space-y-4",children:[s.jsx(Qe,{label:"Título de la Galería",value:r.title||"",onChange:d=>a("title",d),type:"text",placeholder:"Ej: Nuestras Instalaciones"}),s.jsx(Uc,{label:"Número de Columnas",value:r.columns||3,onChange:d=>a("columns",parseInt(d)),options:[{value:2,label:"2 columnas"},{value:3,label:"3 columnas"},{value:4,label:"4 columnas"}]})]});case"map":return s.jsxs("div",{className:"space-y-4",children:[s.jsx(Qe,{label:"Título",value:r.title||"",onChange:d=>a("title",d),type:"text",placeholder:"Ej: Nuestra Ubicación"}),s.jsx(Qe,{label:"Dirección",value:r.address||"",onChange:d=>a("address",d),type:"text",placeholder:"Ej: Calle Principal 123, Madrid"})]});case"divider":return s.jsxs("div",{className:"space-y-4",children:[s.jsx(Uc,{label:"Tipo de Línea",value:r.type||"solid",onChange:d=>a("type",d),options:[{value:"solid",label:"Sólida"},{value:"dashed",label:"Punteada"},{value:"dotted",label:"Puntos"}]}),s.jsx(Qe,{label:"Color",value:r.color||"#e5e7eb",onChange:d=>a("color",d),type:"color"}),s.jsx(Qe,{label:"Grosor (px)",value:r.thickness||1,onChange:d=>a("thickness",parseInt(d)),type:"number"})]});case"spacer":return s.jsx("div",{className:"space-y-4",children:s.jsx(Qe,{label:"Altura (px)",value:r.height||40,onChange:d=>a("height",parseInt(d)),type:"number"})});default:return s.jsx("div",{className:"text-gray-500 text-center py-4",children:"No hay propiedades editables para este componente"})}};return s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[s.jsxs("div",{className:"p-4 border-b bg-gradient-to-r from-purple-50 to-pink-50",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"⚙️ Propiedades"}),s.jsx("p",{className:"text-sm text-gray-600",children:jQ(e.type)})]}),s.jsx("div",{className:"p-4 max-h-[600px] overflow-y-auto",children:l()})]})},Qe=({label:e,value:t,onChange:r,type:n,placeholder:a})=>s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),n==="textarea"?s.jsx("textarea",{value:t,onChange:i=>r(i.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",rows:3,placeholder:a}):s.jsx("input",{type:n,value:t,onChange:i=>r(i.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",placeholder:a})]}),Uc=({label:e,value:t,onChange:r,options:n})=>s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),s.jsx("select",{value:t,onChange:a=>r(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",children:n.map(a=>s.jsx("option",{value:a.value,children:a.label},a.value))})]}),jQ=e=>({"hero-banner":"Banner Principal","service-cards":"Tarjetas de Servicios","contact-form":"Formulario de Contacto",testimonials:"Testimonios",stats:"Estadísticas","text-block":"Bloque de Texto","image-gallery":"Galería de Imágenes",map:"Mapa de Ubicación",divider:"Separador",spacer:"Espaciador"})[e]||e,wQ=()=>{const[e,t]=g.useState({id:"home-layout",name:"Home Page",components:[],version:1,lastModified:new Date().toISOString()}),[r,n]=g.useState(null),[a,i]=g.useState(!1),[o,c]=g.useState(null),l=BG(FG(n0,{activationConstraint:{distance:8}}));console.log("HomeBuilder - Rendering, components:",e.components.length);const d=b=>{console.log("Drag start:",b),c(b.active.id)},u=g.useCallback(b=>{var j;console.log("Drag end:",b);const{active:p,over:m}=b;if(c(null),!!m)if(((j=p.data.current)==null?void 0:j.type)==="component-library"){const w=p.id,N={id:`component-${Date.now()}`,type:w,props:NQ(w),order:e.components.length};console.log("Adding new component:",N),t(C=>({...C,components:[...C.components,N]}))}else p.id!==m.id&&t(w=>({...w,components:i0(w.components,w.components.findIndex(N=>N.id===p.id),w.components.findIndex(N=>N.id===m.id)).map((N,C)=>({...N,order:C}))}))},[e.components]),h=g.useCallback(b=>{console.log("Component selected:",b),n(b)},[]),f=g.useCallback((b,p)=>{t(m=>({...m,components:m.components.map(j=>j.id===b?{...j,props:{...j.props,...p}}:j)}))},[]),x=g.useCallback(b=>{t(p=>({...p,components:p.components.filter(m=>m.id!==b)})),n(null)},[]),v=async()=>{try{console.log("Saving layout:",e),alert("Layout guardado exitosamente! (Modo demo)")}catch(b){console.error("Error saving layout:",b),alert("Error al guardar el layout")}},y=async()=>{try{console.log("Loading layout..."),alert("Layout cargado exitosamente! (Modo demo)")}catch(b){console.error("Error loading layout:",b)}};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white shadow-sm border-b",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex justify-between items-center py-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"🎨 Home Builder"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Diseña la página principal arrastrando componentes"})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>i(!a),className:`px-4 py-2 rounded-md text-sm font-medium ${a?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:a?"Editar":"Vista Previa"}),s.jsx("button",{onClick:y,className:"px-4 py-2 bg-gray-600 text-white rounded-md text-sm font-medium hover:bg-gray-700",children:"Cargar"}),s.jsx("button",{onClick:v,className:"px-4 py-2 bg-green-600 text-white rounded-md text-sm font-medium hover:bg-green-700",children:"Guardar"})]})]})})}),s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:s.jsxs(BK,{sensors:l,collisionDetection:YG,onDragStart:d,onDragEnd:u,children:[s.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[!a&&s.jsx("div",{className:"col-span-3",children:s.jsx(gQ,{})}),s.jsx("div",{className:a?"col-span-12":"col-span-6",children:s.jsx(vQ,{layout:e,onComponentSelect:h,onComponentDelete:x,selectedComponent:r,isPreviewMode:a})}),!a&&r&&s.jsx("div",{className:"col-span-3",children:s.jsx(bQ,{component:r,onUpdate:f})})]}),s.jsx(nQ,{children:o?s.jsx("div",{className:"bg-white border-2 border-blue-500 rounded-lg p-4 shadow-lg opacity-80",children:s.jsx("div",{className:"text-sm font-medium text-gray-900",children:o.startsWith("component-")?"Nuevo componente":"Componente"})}):null})]})})]})},NQ=e=>({"hero-banner":{title:"Bienvenido a Nuestro Despacho",subtitle:"Servicios legales profesionales y confiables",backgroundImage:"/images/hero-bg.jpg",ctaText:"Consultar Ahora",ctaLink:"/contact"},"service-cards":{title:"Nuestros Servicios",services:[{title:"Derecho Civil",description:"Asesoría en casos civiles",icon:"⚖️"},{title:"Derecho Laboral",description:"Protección de derechos laborales",icon:"👥"},{title:"Derecho Familiar",description:"Divorcios y custodia",icon:"👨‍👩‍👧‍👦"}]},"contact-form":{title:"Contáctanos",subtitle:"Estamos aquí para ayudarte",fields:["nombre","email","telefono","mensaje"]},testimonials:{title:"Lo que dicen nuestros clientes",testimonials:[{name:"María García",text:"Excelente servicio profesional",rating:5},{name:"Juan Pérez",text:"Muy satisfecho con el resultado",rating:5}]},stats:{title:"Nuestros Números",stats:[{label:"Casos Exitosos",value:"500+"},{label:"Años de Experiencia",value:"15"},{label:"Clientes Satisfechos",value:"1000+"}]},"text-block":{title:"Sobre Nosotros",content:"Somos un despacho de abogados comprometido con la excelencia y la justicia.",alignment:"left",fontSize:"medium"},"image-gallery":{title:"Nuestras Instalaciones",columns:3,showCaptions:!0,images:["/images/office-1.jpg","/images/office-2.jpg","/images/office-3.jpg"]},map:{title:"Nuestra Ubicación",address:"Calle Principal 123, Ciudad",latitude:40.4168,longitude:-3.7038,zoom:15},divider:{type:"solid",color:"#e5e7eb",thickness:1},spacer:{height:40}})[e]||{},CQ=()=>s.jsx(wQ,{}),SQ=()=>{const{user:e}=Ee(),[t,r]=g.useState([]),[n,a]=g.useState(!0),[i,o]=g.useState(null),[c,l]=g.useState(null),[d,u]=g.useState(!1),[h,f]=g.useState({name:"",role:"ADMIN",orientation:"horizontal",isActive:!0,items:[]});g.useEffect(()=>{x()},[]);const x=async()=>{try{a(!0);const N=await X.get("/menu-config");r(N.data)}catch(N){console.error("Error fetching menu configs:",N)}finally{a(!1)}},v=async()=>{try{await X.post("/menu-config",h),u(!1),f({name:"",role:"ADMIN",orientation:"horizontal",isActive:!0,items:[]}),x()}catch(N){console.error("Error creating menu:",N)}},y=async()=>{if(c)try{await X.patch(`/menu-config/${c.id}`,c),l(null),x()}catch(N){console.error("Error updating menu:",N)}},b=async N=>{if(confirm("¿Estás seguro de que quieres eliminar este menú?"))try{await X.delete(`/menu-config/${N}`),x()}catch(C){console.error("Error deleting menu:",C)}},p=N=>{const C={label:"Nuevo elemento",url:"/",icon:"📄",order:N.items.length,isVisible:!0,isExternal:!1},S={...N,items:[...N.items,C]};(c==null?void 0:c.id)===N.id&&l(S)},m=(N,C,S,E)=>{const k=[...N.items];k[C]={...k[C],[S]:E};const T={...N,items:k};(c==null?void 0:c.id)===N.id&&l(T)},j=(N,C)=>{const S=N.items.filter((k,T)=>T!==C),E={...N,items:S};(c==null?void 0:c.id)===N.id&&l(E)},w=N=>({ADMIN:"Administrador",ABOGADO:"Abogado",CLIENTE:"Cliente"})[N]||N;return n?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Cargando configuraciones de menús..."})]})}):s.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"🍽️ Configuración de Menús"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Gestiona los menús de navegación para cada rol de usuario"})]}),s.jsx("div",{className:"mb-6",children:s.jsx("button",{onClick:()=>u(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"➕ Crear Nuevo Menú"})}),d&&s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Crear Nuevo Menú"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre del Menú"}),s.jsx("input",{type:"text",value:h.name,onChange:N=>f({...h,name:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ej: Menú Principal"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rol"}),s.jsxs("select",{value:h.role,onChange:N=>f({...h,role:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"ADMIN",children:"Administrador"}),s.jsx("option",{value:"ABOGADO",children:"Abogado"}),s.jsx("option",{value:"CLIENTE",children:"Cliente"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Orientación"}),s.jsxs("select",{value:h.orientation,onChange:N=>f({...h,orientation:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"horizontal",children:"Horizontal"}),s.jsx("option",{value:"vertical",children:"Vertical"})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:h.isActive,onChange:N=>f({...h,isActive:N.target.checked}),className:"mr-2"}),s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Menú Activo"})]})]}),s.jsxs("div",{className:"mt-4 flex space-x-3",children:[s.jsx("button",{onClick:v,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors",children:"✅ Crear Menú"}),s.jsx("button",{onClick:()=>u(!1),className:"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition-colors",children:"❌ Cancelar"})]})]}),s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:t.map(N=>s.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-4",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold",children:N.name}),s.jsxs("p",{className:"text-blue-100 text-sm",children:[w(N.role)," • ",N.orientation==="horizontal"?"Horizontal":"Vertical"]})]}),s.jsxs("div",{className:"flex space-x-2",children:[N.isActive&&s.jsx("span",{className:"bg-green-500 text-white px-2 py-1 rounded-full text-xs",children:"Activo"}),s.jsx("button",{onClick:()=>l((c==null?void 0:c.id)===N.id?null:N),className:"bg-white bg-opacity-20 hover:bg-opacity-30 px-3 py-1 rounded text-sm transition-colors",children:(c==null?void 0:c.id)===N.id?"❌ Cancelar":"✏️ Editar"}),s.jsx("button",{onClick:()=>b(N.id),className:"bg-red-500 hover:bg-red-600 px-3 py-1 rounded text-sm transition-colors",children:"🗑️ Eliminar"})]})]})}),s.jsx("div",{className:"p-4",children:(c==null?void 0:c.id)===N.id?s.jsxs("div",{children:[s.jsx("div",{className:"mb-4",children:s.jsx("button",{onClick:()=>p(c),className:"bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600 transition-colors",children:"➕ Agregar Elemento"})}),c.items.map((C,S)=>s.jsx("div",{className:"border border-gray-200 rounded p-3 mb-3",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsx("input",{type:"text",value:C.label,onChange:E=>m(c,S,"label",E.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"Etiqueta"}),s.jsx("input",{type:"text",value:C.url,onChange:E=>m(c,S,"url",E.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"URL"}),s.jsx("input",{type:"text",value:C.icon,onChange:E=>m(c,S,"icon",E.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"Icono (emoji)"}),s.jsx("input",{type:"number",value:C.order,onChange:E=>m(c,S,"order",parseInt(E.target.value)),className:"px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"Orden"}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("label",{className:"flex items-center text-sm",children:[s.jsx("input",{type:"checkbox",checked:C.isVisible,onChange:E=>m(c,S,"isVisible",E.target.checked),className:"mr-2"}),"Visible"]}),s.jsxs("label",{className:"flex items-center text-sm",children:[s.jsx("input",{type:"checkbox",checked:C.isExternal,onChange:E=>m(c,S,"isExternal",E.target.checked),className:"mr-2"}),"Externo"]})]}),s.jsx("button",{onClick:()=>j(c,S),className:"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600 transition-colors",children:"🗑️ Eliminar"})]})},S)),s.jsxs("div",{className:"mt-4 flex space-x-3",children:[s.jsx("button",{onClick:y,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors",children:"💾 Guardar Cambios"}),s.jsx("button",{onClick:()=>l(null),className:"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition-colors",children:"❌ Cancelar"})]})]}):s.jsx("div",{children:N.items.length===0?s.jsx("p",{className:"text-gray-500 text-center py-4",children:"No hay elementos en este menú"}):s.jsx("div",{className:"space-y-2",children:N.items.sort((C,S)=>C.order-S.order).map((C,S)=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:"text-lg",children:C.icon}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:C.label}),s.jsx("p",{className:"text-sm text-gray-500",children:C.url})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[!C.isVisible&&s.jsx("span",{className:"text-xs bg-gray-300 text-gray-600 px-2 py-1 rounded",children:"Oculto"}),C.isExternal&&s.jsx("span",{className:"text-xs bg-blue-300 text-blue-600 px-2 py-1 rounded",children:"Externo"}),s.jsx("span",{className:"text-xs bg-gray-200 text-gray-600 px-2 py-1 rounded",children:C.order})]})]},S))})})})]},N.id))}),t.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("p",{className:"text-gray-500 text-lg",children:"No hay configuraciones de menús creadas"}),s.jsx("button",{onClick:()=>u(!0),className:"mt-4 bg-blue-600 text-white px-6 py-3 rounded-md hover:bg-blue-700 transition-colors",children:"➕ Crear Primer Menú"})]})]})})},EQ=()=>{const{user:e}=Ee(),[t,r]=g.useState([]),[n,a]=g.useState(!0),[i,o]=g.useState(null),[c,l]=g.useState(!1),[d,u]=g.useState({key:"",value:"",type:"string",category:"general",description:"",isPublic:!1});g.useEffect(()=>{h()},[]);const h=async()=>{try{a(!0);const j=await X.get("/site-config/categories");r(j.data)}catch(j){console.error("Error fetching site configs:",j)}finally{a(!1)}},f=async()=>{try{await X.post("/site-config",d),l(!1),u({key:"",value:"",type:"string",category:"general",description:"",isPublic:!1}),h()}catch(j){console.error("Error creating config:",j)}},x=async()=>{if(i)try{await X.patch(`/site-config/${i.id}`,i),o(null),h()}catch(j){console.error("Error updating config:",j)}},v=async j=>{if(confirm("¿Estás seguro de que quieres eliminar esta configuración?"))try{await X.delete(`/site-config/${j}`),h()}catch(w){console.error("Error deleting config:",w)}},y=async(j,w)=>{try{await X.patch(`/site-config/key/${j}`,{value:w}),h()}catch(N){console.error("Error updating config:",N)}},b=j=>({branding:"🎨 Marca",layout:"📐 Diseño",contact:"📞 Contacto",social:"🌐 Social",general:"⚙️ General"})[j]||j,p=j=>({string:"Texto",image:"Imagen",color:"Color",boolean:"Booleano",json:"JSON"})[j]||j,m=j=>{switch(j.type){case"boolean":return s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:j.value==="true",onChange:w=>y(j.key,w.target.checked.toString()),className:"mr-2"}),s.jsx("span",{className:"text-sm text-gray-600",children:j.value==="true"?"Activado":"Desactivado"})]});case"color":return s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"color",value:j.value,onChange:w=>y(j.key,w.target.value),className:"w-8 h-8 border border-gray-300 rounded"}),s.jsx("span",{className:"text-sm font-mono",children:j.value})]});case"image":return s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("img",{src:j.value,alt:"Preview",className:"w-8 h-8 object-cover border border-gray-300 rounded",onError:w=>{w.currentTarget.style.display="none"}}),s.jsx("input",{type:"text",value:j.value,onChange:w=>y(j.key,w.target.value),className:"flex-1 px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"URL de la imagen"})]});default:return s.jsx("input",{type:"text",value:j.value,onChange:w=>y(j.key,w.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"Valor"})}};return n?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Cargando configuraciones del sitio..."})]})}):s.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"⚙️ Configuración del Sitio"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Gestiona la configuración general del sitio web"})]}),s.jsxs("div",{className:"mb-6 flex space-x-4",children:[s.jsx("button",{onClick:()=>l(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"➕ Nueva Configuración"}),s.jsx("button",{onClick:async()=>{try{await X.post("/site-config/initialize"),h(),alert("Configuraciones por defecto inicializadas")}catch(j){console.error("Error initializing configs:",j)}},className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors",children:"🔄 Inicializar Configuraciones"})]}),c&&s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Crear Nueva Configuración"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Clave"}),s.jsx("input",{type:"text",value:d.key,onChange:j=>u({...d,key:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ej: site_name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Valor"}),s.jsx("input",{type:"text",value:d.value,onChange:j=>u({...d,value:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Valor de la configuración"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo"}),s.jsxs("select",{value:d.type,onChange:j=>u({...d,type:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"string",children:"Texto"}),s.jsx("option",{value:"image",children:"Imagen"}),s.jsx("option",{value:"color",children:"Color"}),s.jsx("option",{value:"boolean",children:"Booleano"}),s.jsx("option",{value:"json",children:"JSON"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Categoría"}),s.jsxs("select",{value:d.category,onChange:j=>u({...d,category:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"branding",children:"Marca"}),s.jsx("option",{value:"layout",children:"Diseño"}),s.jsx("option",{value:"contact",children:"Contacto"}),s.jsx("option",{value:"social",children:"Social"}),s.jsx("option",{value:"general",children:"General"})]})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripción"}),s.jsx("input",{type:"text",value:d.description,onChange:j=>u({...d,description:j.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Descripción de la configuración"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:d.isPublic,onChange:j=>u({...d,isPublic:j.target.checked}),className:"mr-2"}),s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Configuración Pública"})]})]}),s.jsxs("div",{className:"mt-4 flex space-x-3",children:[s.jsx("button",{onClick:f,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors",children:"✅ Crear Configuración"}),s.jsx("button",{onClick:()=>l(!1),className:"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition-colors",children:"❌ Cancelar"})]})]}),s.jsx("div",{className:"space-y-6",children:t.map(j=>s.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[s.jsxs("div",{className:"bg-gradient-to-r from-gray-600 to-gray-700 text-white p-4",children:[s.jsx("h2",{className:"text-lg font-semibold",children:b(j.category)}),s.jsxs("p",{className:"text-gray-200 text-sm",children:[j.configs.length," configuración",j.configs.length!==1?"es":""]})]}),s.jsx("div",{className:"p-4",children:s.jsx("div",{className:"space-y-4",children:j.configs.map(w=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:w.key}),s.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:p(w.type)}),w.isPublic&&s.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded",children:"Público"})]}),w.description&&s.jsx("p",{className:"text-sm text-gray-600",children:w.description})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>o((i==null?void 0:i.id)===w.id?null:w),className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm transition-colors",children:(i==null?void 0:i.id)===w.id?"❌ Cancelar":"✏️ Editar"}),s.jsx("button",{onClick:()=>v(w.id),className:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm transition-colors",children:"🗑️ Eliminar"})]})]}),(i==null?void 0:i.id)===w.id?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valor"}),w.type==="boolean"?s.jsxs("select",{value:w.value,onChange:N=>o({...w,value:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[s.jsx("option",{value:"true",children:"Activado"}),s.jsx("option",{value:"false",children:"Desactivado"})]}):w.type==="color"?s.jsx("input",{type:"color",value:w.value,onChange:N=>o({...w,value:N.target.value}),className:"w-full h-10 border border-gray-300 rounded-md"}):s.jsx("input",{type:"text",value:w.value,onChange:N=>o({...w,value:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripción"}),s.jsx("input",{type:"text",value:w.description||"",onChange:N=>o({...w,description:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:w.isPublic,onChange:N=>o({...w,isPublic:N.target.checked}),className:"mr-2"}),s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Configuración Pública"})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:x,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors",children:"💾 Guardar Cambios"}),s.jsx("button",{onClick:()=>o(null),className:"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition-colors",children:"❌ Cancelar"})]})]}):s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Valor Actual"}),m(w)]})]},w.id))})})]},j.category))}),t.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("p",{className:"text-gray-500 text-lg",children:"No hay configuraciones del sitio"}),s.jsx("button",{onClick:()=>l(!0),className:"mt-4 bg-blue-600 text-white px-6 py-3 rounded-md hover:bg-blue-700 transition-colors",children:"➕ Crear Primera Configuración"})]})]})})},kQ=()=>{var E,k,T;const{user:e}=Ee(),t=Ar(),[r,n]=g.useState(0),[a,i]=g.useState(null),[o,c]=g.useState({}),[l,d]=g.useState(!1),[u,h]=g.useState(!1),f=[{id:"legal-office",name:"Despacho Legal",description:"Gestión completa de casos legales, clientes y documentación",icon:"⚖️",category:"Legal",features:["Gestión de expedientes y casos","Sistema de citas y calendario","Documentación legal","Facturación y pagos","Comunicación con clientes"],configSteps:[{id:"basic-info",title:"Información Básica del Despacho",description:"Configura los datos fundamentales de tu despacho",type:"site",questions:[{id:"office_name",question:"¿Cuál es el nombre de tu despacho legal?",type:"text",defaultValue:"Despacho Legal"},{id:"specialties",question:"¿En qué especialidades legales te enfocas?",type:"multiselect",options:["Derecho Civil","Derecho Penal","Derecho Laboral","Derecho Mercantil","Derecho Administrativo","Derecho de Familia","Derecho Inmobiliario","Derecho Fiscal"]},{id:"office_hours",question:"¿Cuáles son tus horarios de atención?",type:"text",defaultValue:"Lunes a Viernes: 9:00 - 18:00"}]},{id:"menu-setup",title:"Configuración de Menús",description:"Personaliza la navegación para abogados y clientes",type:"menu",questions:[{id:"enable_consultations",question:"¿Quieres ofrecer consultas online?",type:"boolean",defaultValue:!0},{id:"enable_document_templates",question:"¿Quieres vender plantillas de documentos legales?",type:"boolean",defaultValue:!0},{id:"enable_payment_plans",question:"¿Quieres ofrecer planes de pago a plazos?",type:"boolean",defaultValue:!1}]},{id:"ecommerce-setup",title:"Configuración de Tienda Online",description:"Configura la venta de servicios y productos legales",type:"ecommerce",questions:[{id:"enable_online_payments",question:"¿Quieres habilitar pagos online?",type:"boolean",defaultValue:!0},{id:"payment_methods",question:"¿Qué métodos de pago quieres aceptar?",type:"multiselect",options:["PayPal","Tarjeta de Crédito","Transferencia Bancaria"],dependsOn:"enable_online_payments",dependsValue:!0},{id:"consultation_price",question:"¿Cuál será el precio de la consulta inicial?",type:"text",defaultValue:"50",dependsOn:"enable_consultations",dependsValue:!0}]}]},{id:"consulting-firm",name:"Empresa de Consultoría",description:"Servicios de consultoría empresarial y estratégica",icon:"💼",category:"Business",features:["Consultoría estratégica","Análisis de procesos","Gestión de proyectos","Formación empresarial","Auditorías y reportes"],configSteps:[{id:"basic-info",title:"Información de la Consultora",description:"Configura los datos de tu empresa de consultoría",type:"site",questions:[{id:"company_name",question:"¿Cuál es el nombre de tu consultora?",type:"text",defaultValue:"Consultora Empresarial"},{id:"consulting_areas",question:"¿En qué áreas de consultoría te especializas?",type:"multiselect",options:["Estrategia Empresarial","Optimización de Procesos","Recursos Humanos","Finanzas Corporativas","Marketing Digital","Transformación Digital","Gestión de Calidad","Compliance y Legal"]}]},{id:"service-catalog",title:"Catálogo de Servicios",description:"Configura los servicios que ofreces",type:"ecommerce",questions:[{id:"service_types",question:"¿Qué tipos de servicios quieres ofrecer?",type:"multiselect",options:["Consultoría por Horas","Proyectos Completos","Auditorías","Formación","Mentoring","Análisis de Datos"]},{id:"enable_packages",question:"¿Quieres ofrecer paquetes de servicios?",type:"boolean",defaultValue:!0}]}]},{id:"online-academy",name:"Academia Online",description:"Plataforma de formación y cursos online",icon:"🎓",category:"Education",features:["Cursos online","Sistema de evaluación","Certificaciones","Comunidad de estudiantes","Contenido multimedia"],configSteps:[{id:"academy-info",title:"Información de la Academia",description:"Configura los datos de tu academia online",type:"site",questions:[{id:"academy_name",question:"¿Cuál es el nombre de tu academia?",type:"text",defaultValue:"Academia Online"},{id:"academic_areas",question:"¿En qué áreas académicas te especializas?",type:"multiselect",options:["Tecnología y Programación","Negocios y Emprendimiento","Idiomas","Arte y Diseño","Salud y Bienestar","Ciencias y Matemáticas","Humanidades","Formación Profesional"]}]},{id:"course-structure",title:"Estructura de Cursos",description:"Configura cómo organizarás tus cursos",type:"custom",questions:[{id:"course_types",question:"¿Qué tipos de cursos quieres ofrecer?",type:"multiselect",options:["Cursos Autodidactas","Cursos con Tutor","Bootcamps Intensivos","Webinars","Talleres Prácticos","Certificaciones"]},{id:"enable_subscriptions",question:"¿Quieres ofrecer suscripciones mensuales?",type:"boolean",defaultValue:!0}]}]},{id:"digital-agency",name:"Agencia Digital",description:"Servicios de marketing digital y desarrollo web",icon:"🚀",category:"Digital",features:["Desarrollo web","Marketing digital","SEO y SEM","Redes sociales","Analytics y reportes"],configSteps:[{id:"agency-info",title:"Información de la Agencia",description:"Configura los datos de tu agencia digital",type:"site",questions:[{id:"agency_name",question:"¿Cuál es el nombre de tu agencia?",type:"text",defaultValue:"Agencia Digital"},{id:"digital_services",question:"¿Qué servicios digitales ofreces?",type:"multiselect",options:["Desarrollo Web","Diseño Gráfico","Marketing Digital","SEO y SEM","Gestión de Redes Sociales","Email Marketing","Analytics y Reportes","Consultoría Digital"]}]},{id:"project-management",title:"Gestión de Proyectos",description:"Configura el sistema de gestión de proyectos",type:"custom",questions:[{id:"project_tracking",question:"¿Quieres que los clientes puedan seguir sus proyectos?",type:"boolean",defaultValue:!0},{id:"client_portal",question:"¿Quieres crear un portal para clientes?",type:"boolean",defaultValue:!0}]}]},{id:"health-clinic",name:"Clínica de Salud",description:"Gestión de citas médicas y pacientes",icon:"🏥",category:"Health",features:["Gestión de citas","Historiales médicos","Facturación médica","Comunicación con pacientes","Reportes médicos"],configSteps:[{id:"clinic-info",title:"Información de la Clínica",description:"Configura los datos de tu clínica",type:"site",questions:[{id:"clinic_name",question:"¿Cuál es el nombre de tu clínica?",type:"text",defaultValue:"Clínica de Salud"},{id:"medical_specialties",question:"¿Qué especialidades médicas ofreces?",type:"multiselect",options:["Medicina General","Cardiología","Dermatología","Ginecología","Pediatría","Psicología","Fisioterapia","Odontología"]}]},{id:"appointment-system",title:"Sistema de Citas",description:"Configura el sistema de citas médicas",type:"custom",questions:[{id:"online_booking",question:"¿Quieres que los pacientes puedan reservar citas online?",type:"boolean",defaultValue:!0},{id:"appointment_reminders",question:"¿Quieres enviar recordatorios de citas?",type:"boolean",defaultValue:!0}]}]}],x=D=>{i(D),n(0),c({})},v=(D,$)=>{c(_=>({..._,[D]:$}))},y=D=>D.dependsOn?o[D.dependsOn]===D.dependsValue:!0,b=()=>a?a.configSteps[r]:null,p=()=>{r<a.configSteps.length-1?n(r+1):j()},m=()=>{r>0&&n(r-1)},j=async()=>{h(!0);try{await w(),t("/admin/menu-config")}catch(D){console.error("Error applying configuration:",D)}finally{h(!1)}},w=async()=>{const D=N();for(const _ of D)await X.post("/api/site-config",_);const $=C();for(const _ of $)await X.post("/api/menu-config",_)},N=()=>{const D=[];return(a==null?void 0:a.id)==="legal-office"?D.push({key:"site_name",value:o.office_name||"Despacho Legal",type:"string",category:"branding",isPublic:!0},{key:"site_description",value:"Servicios legales profesionales",type:"string",category:"branding",isPublic:!0},{key:"office_hours",value:o.office_hours||"Lunes a Viernes: 9:00 - 18:00",type:"string",category:"contact",isPublic:!0}):(a==null?void 0:a.id)==="consulting-firm"&&D.push({key:"site_name",value:o.company_name||"Consultora Empresarial",type:"string",category:"branding",isPublic:!0},{key:"site_description",value:"Consultoría empresarial y estratégica",type:"string",category:"branding",isPublic:!0}),D},C=()=>{const D=[];if((a==null?void 0:a.id)==="legal-office"){const $={name:"Menú Abogado",role:"ABOGADO",orientation:"horizontal",isActive:!0,items:[{label:"Dashboard",url:"/dashboard",icon:"🏠",order:1,isVisible:!0,isExternal:!1},{label:"Expedientes",url:"/lawyer/cases",icon:"📋",order:2,isVisible:!0,isExternal:!1},{label:"Citas",url:"/lawyer/appointments",icon:"📅",order:3,isVisible:!0,isExternal:!1}]};o.enable_consultations&&$.items.push({label:"Consultas",url:"/lawyer/consultations",icon:"💬",order:4,isVisible:!0,isExternal:!1}),D.push($)}return D},S=D=>{var $,_;if(!y(D))return null;switch(D.type){case"boolean":return s.jsx("div",{className:"mb-6",children:s.jsxs("label",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"checkbox",checked:o[D.id]??D.defaultValue,onChange:A=>v(D.id,A.target.checked),className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),s.jsx("span",{className:"text-lg font-medium text-gray-900",children:D.question})]})},D.id);case"text":return s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-lg font-medium text-gray-900 mb-2",children:D.question}),s.jsx("input",{type:"text",value:o[D.id]??D.defaultValue??"",onChange:A=>v(D.id,A.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Escribe tu respuesta..."})]},D.id);case"select":return s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-lg font-medium text-gray-900 mb-2",children:D.question}),s.jsxs("select",{value:o[D.id]??"",onChange:A=>v(D.id,A.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Selecciona una opción"}),($=D.options)==null?void 0:$.map(A=>s.jsx("option",{value:A,children:A},A))]})]},D.id);case"multiselect":return s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-lg font-medium text-gray-900 mb-2",children:D.question}),s.jsx("div",{className:"space-y-2",children:(_=D.options)==null?void 0:_.map(A=>s.jsxs("label",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"checkbox",checked:(o[D.id]||[]).includes(A),onChange:B=>{const P=o[D.id]||[],M=B.target.checked?[...P,A]:P.filter(R=>R!==A);v(D.id,M)},className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),s.jsx("span",{className:"text-gray-700",children:A})]},A))})]},D.id);default:return null}};return l?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"🎯 Configuración Guiada del Sistema"}),s.jsx("p",{className:"text-lg text-gray-600",children:"Te ayudaremos a configurar tu sistema paso a paso según tu tipo de negocio"})]}),a?s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Paso ",r+1," de ",a.configSteps.length]}),s.jsxs("span",{className:"text-sm text-gray-500",children:[Math.round((r+1)/a.configSteps.length*100),"% completado"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${(r+1)/a.configSteps.length*100}%`}})})]}),s.jsx("div",{className:"mb-8 p-4 bg-blue-50 rounded-lg",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-2xl mr-3",children:a.icon}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-bold text-gray-900",children:["Configurando: ",a.name]}),s.jsx("p",{className:"text-gray-600",children:a.description})]})]})}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:(E=b())==null?void 0:E.title}),s.jsx("p",{className:"text-gray-600 mb-6",children:(k=b())==null?void 0:k.description}),s.jsx("div",{className:"space-y-6",children:(T=b())==null?void 0:T.questions.map(S)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("button",{onClick:()=>i(null),className:"px-6 py-3 text-gray-600 hover:text-gray-800 transition-colors",children:"← Cambiar tipo de negocio"}),s.jsxs("div",{className:"flex space-x-4",children:[r>0&&s.jsx("button",{onClick:m,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"← Anterior"}),s.jsx("button",{onClick:p,disabled:u,className:"px-6 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50",children:u?s.jsxs("span",{className:"flex items-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Configurando..."]}):r===a.configSteps.length-1?"Finalizar Configuración":"Siguiente →"})]})]})]}):s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6 text-center",children:"¿Qué tipo de negocio quieres configurar?"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:f.map(D=>s.jsx("div",{onClick:()=>x(D),className:"border-2 border-gray-200 rounded-lg p-6 hover:border-blue-500 hover:shadow-lg transition-all cursor-pointer",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-4xl mb-4",children:D.icon}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:D.name}),s.jsx("p",{className:"text-gray-600 mb-4",children:D.description}),s.jsxs("div",{className:"text-sm text-gray-500",children:[s.jsx("strong",{children:"Características principales:"}),s.jsx("ul",{className:"mt-2 space-y-1",children:D.features.slice(0,3).map(($,_)=>s.jsxs("li",{children:["• ",$]},_))})]})]})},D.id))})]}),s.jsxs("div",{className:"mt-8 bg-blue-50 rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"💡 ¿Necesitas ayuda?"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Para Despachos Legales:"}),s.jsxs("ul",{className:"mt-1 space-y-1",children:[s.jsx("li",{children:"• Configura especialidades legales"}),s.jsx("li",{children:"• Habilita consultas online"}),s.jsx("li",{children:"• Establece precios de servicios"})]})]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Para Consultorías:"}),s.jsxs("ul",{className:"mt-1 space-y-1",children:[s.jsx("li",{children:"• Define áreas de consultoría"}),s.jsx("li",{children:"• Configura tipos de servicios"}),s.jsx("li",{children:"• Establece paquetes de servicios"})]})]})]})]})]})})},Vb=()=>{var D,$,_;const{user:e}=Ee(),[t,r]=g.useState([]),[n,a]=g.useState([]),[i,o]=g.useState(null),[c,l]=g.useState(!0),[d,u]=g.useState("pending"),[h,f]=g.useState([]),[x,v]=g.useState(""),[y,b]=g.useState({}),[p,m]=g.useState(!1);g.useEffect(()=>{j(),m(!0),X.get("/teleassistance/remote-tools").then(A=>f(A.data)).catch(()=>f([])).finally(()=>m(!1))},[e]);const j=async()=>{try{l(!0);const A=await X.get("/teleassistance/sessions/pending");if(a(A.data),e){const B=await X.get("/teleassistance/sessions/assistant/"+e.id);r(B.data)}if((e==null?void 0:e.role)==="ADMIN"){const B=await X.get("/teleassistance/stats");o(B.data)}}catch(A){console.error("Error loading teleassistance data:",A)}finally{l(!1)}},w=async A=>{try{await X.post(`/teleassistance/sessions/${A}/start`),j()}catch(B){console.error("Error starting session:",B)}},N=async(A,B)=>{try{await X.post(`/teleassistance/sessions/${A}/end`,{resolution:B}),j()}catch(P){console.error("Error ending session:",P)}},C=A=>{const B={PENDING:{color:"bg-yellow-100 text-yellow-800",text:"Pendiente"},ACTIVE:{color:"bg-green-100 text-green-800",text:"Activa"},COMPLETED:{color:"bg-blue-100 text-blue-800",text:"Completada"},CANCELLED:{color:"bg-red-100 text-red-800",text:"Cancelada"}},P=B[A]||B.PENDING;return s.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${P.color}`,children:P.text})},S=A=>({AUTOFIRMA:"🔐",CERTIFICADO_DIGITAL:"🆔",SEDES:"🏛️",CLAVE_PIN:"📱",NAVEGADOR:"🌐",SISTEMA_OPERATIVO:"💻",OTRO:"❓"})[A]||"❓",E=A=>{if(!A)return"N/A";const B=Math.floor(A/60),P=A%60;return B>0?`${B}h ${P}m`:`${P}m`},k=A=>new Date(A).toLocaleString("es-ES"),T=()=>{if(!x)return null;switch(x){case"teamviewer-quicksupport":return s.jsxs(s.Fragment,{children:[s.jsxs("label",{children:["ID de TeamViewer",s.jsx("input",{type:"text",required:!0,value:y.teamviewerId||"",onChange:A=>b({...y,teamviewerId:A.target.value})})]}),s.jsxs("label",{children:["Contraseña",s.jsx("input",{type:"text",required:!0,value:y.teamviewerPassword||"",onChange:A=>b({...y,teamviewerPassword:A.target.value})})]})]});case"remotely-anywhere":return s.jsx(s.Fragment,{children:s.jsxs("label",{children:["Código de acceso",s.jsx("input",{type:"text",required:!0,value:y.remotelyCode||"",onChange:A=>b({...y,remotelyCode:A.target.value})})]})});case"anydesk":return s.jsx(s.Fragment,{children:s.jsxs("label",{children:["Código de AnyDesk",s.jsx("input",{type:"text",required:!0,value:y.anydeskCode||"",onChange:A=>b({...y,anydeskCode:A.target.value})})]})});case"chrome-remote-desktop":return s.jsx(s.Fragment,{children:s.jsxs("label",{children:["Código de acceso",s.jsx("input",{type:"text",required:!0,value:y.chromeCode||"",onChange:A=>b({...y,chromeCode:A.target.value})})]})});default:return null}};return c?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"🖥️ Sistema de Teleasistencia"}),s.jsx("p",{className:"text-lg text-gray-600",children:"Gestiona sesiones de asistencia remota para problemas de administración electrónica"})]}),i&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6 mb-8",children:[s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Sesiones"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.totalSessions})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:s.jsx("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Pendientes"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.pendingSessions})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:s.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Activas"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.activeSessions})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Completadas"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.completedSessions})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:s.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Duración Promedio"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:E(i.averageDuration)})]})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow mb-8",children:[s.jsx("div",{className:"border-b border-gray-200",children:s.jsxs("nav",{className:"-mb-px flex space-x-8 px-6",children:[s.jsxs("button",{onClick:()=>u("pending"),className:`py-4 px-1 border-b-2 font-medium text-sm ${d==="pending"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Sesiones Pendientes (",n.length,")"]}),s.jsxs("button",{onClick:()=>u("all"),className:`py-4 px-1 border-b-2 font-medium text-sm ${d==="all"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Mis Sesiones (",t.length,")"]}),(e==null?void 0:e.role)==="ADMIN"&&s.jsx("button",{onClick:()=>u("stats"),className:`py-4 px-1 border-b-2 font-medium text-sm ${d==="stats"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Estadísticas"})]})}),s.jsxs("div",{className:"p-6",children:[d==="pending"&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Sesiones Pendientes de Asistencia"}),n.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No hay sesiones pendientes"})]}):s.jsx("div",{className:"space-y-4",children:n.map(A=>s.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"text-2xl",children:S(A.issueType)}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-medium text-gray-900",children:A.user.name}),s.jsxs("p",{className:"text-sm text-gray-500",children:[A.issueType.replace("_"," ")," - ",A.description]}),s.jsxs("p",{className:"text-xs text-gray-400",children:["Creada: ",k(A.createdAt)]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[C(A.status),s.jsx("button",{onClick:()=>w(A.id),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Iniciar Sesión"})]})]})},A.id))})]}),d==="all"&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Mis Sesiones de Teleasistencia"}),t.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No tienes sesiones de teleasistencia"})]}):s.jsx("div",{className:"space-y-4",children:t.map(A=>s.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"text-2xl",children:S(A.issueType)}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-medium text-gray-900",children:A.user.name}),s.jsxs("p",{className:"text-sm text-gray-500",children:[A.issueType.replace("_"," ")," - ",A.description]}),s.jsxs("p",{className:"text-xs text-gray-400",children:[A.startedAt&&`Iniciada: ${k(A.startedAt)}`,A.duration&&` | Duración: ${E(A.duration)}`]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[C(A.status),A.status==="ACTIVE"&&s.jsx("button",{onClick:()=>N(A.id),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:"Finalizar"})]})]})},A.id))})]}),d==="stats"&&i&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Estadísticas Detalladas"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Resumen General"}),s.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[s.jsxs("li",{children:["Total de sesiones: ",i.totalSessions]}),s.jsxs("li",{children:["Sesiones pendientes: ",i.pendingSessions]}),s.jsxs("li",{children:["Sesiones activas: ",i.activeSessions]}),s.jsxs("li",{children:["Sesiones completadas: ",i.completedSessions]})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Métricas de Tiempo"}),s.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[s.jsxs("li",{children:["Duración promedio: ",E(i.averageDuration)]}),s.jsxs("li",{children:["Tasa de resolución: ",i.totalSessions>0?Math.round(i.completedSessions/i.totalSessions*100):0,"%"]})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"Conectar con el cliente autenticado"}),s.jsxs("label",{children:["Herramienta de escritorio remoto",s.jsxs("select",{required:!0,value:x,onChange:A=>v(A.target.value),children:[s.jsx("option",{value:"",children:"Selecciona una herramienta"}),h.map(A=>s.jsx("option",{value:A.id,children:A.name},A.id))]})]}),T(),x&&s.jsxs("div",{style:{marginTop:24,background:"#f8f8f8",borderRadius:6,padding:16},children:[s.jsxs("h4",{children:["Instrucciones para ",(D=h.find(A=>A.id===x))==null?void 0:D.name]}),s.jsx("ul",{children:($=h.find(A=>A.id===x))==null?void 0:$.instructions.map((A,B)=>s.jsx("li",{children:A},B))}),s.jsx("a",{href:(_=h.find(A=>A.id===x))==null?void 0:_.downloadUrl,target:"_blank",rel:"noopener noreferrer",children:"Descargar / Abrir herramienta"})]})]})]})]})]})})},$s=Object.create(null);$s.open="0";$s.close="1";$s.ping="2";$s.pong="3";$s.message="4";$s.upgrade="5";$s.noop="6";const bd=Object.create(null);Object.keys($s).forEach(e=>{bd[$s[e]]=e});const kp={type:"error",data:"parser error"},aS=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",iS=typeof ArrayBuffer=="function",oS=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,o0=({type:e,data:t},r,n)=>aS&&t instanceof Blob?r?n(t):Hb(t,n):iS&&(t instanceof ArrayBuffer||oS(t))?r?n(t):Hb(new Blob([t]),n):n($s[e]+(t||"")),Hb=(e,t)=>{const r=new FileReader;return r.onload=function(){const n=r.result.split(",")[1];t("b"+(n||""))},r.readAsDataURL(e)};function Wb(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Hf;function DQ(e,t){if(aS&&e.data instanceof Blob)return e.data.arrayBuffer().then(Wb).then(t);if(iS&&(e.data instanceof ArrayBuffer||oS(e.data)))return t(Wb(e.data));o0(e,!1,r=>{Hf||(Hf=new TextEncoder),t(Hf.encode(r))})}const Yb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Mo=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<Yb.length;e++)Mo[Yb.charCodeAt(e)]=e;const AQ=e=>{let t=e.length*.75,r=e.length,n,a=0,i,o,c,l;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const d=new ArrayBuffer(t),u=new Uint8Array(d);for(n=0;n<r;n+=4)i=Mo[e.charCodeAt(n)],o=Mo[e.charCodeAt(n+1)],c=Mo[e.charCodeAt(n+2)],l=Mo[e.charCodeAt(n+3)],u[a++]=i<<2|o>>4,u[a++]=(o&15)<<4|c>>2,u[a++]=(c&3)<<6|l&63;return d},TQ=typeof ArrayBuffer=="function",l0=(e,t)=>{if(typeof e!="string")return{type:"message",data:lS(e,t)};const r=e.charAt(0);return r==="b"?{type:"message",data:_Q(e.substring(1),t)}:bd[r]?e.length>1?{type:bd[r],data:e.substring(1)}:{type:bd[r]}:kp},_Q=(e,t)=>{if(TQ){const r=AQ(e);return lS(r,t)}else return{base64:!0,data:e}},lS=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},cS="",MQ=(e,t)=>{const r=e.length,n=new Array(r);let a=0;e.forEach((i,o)=>{o0(i,!1,c=>{n[o]=c,++a===r&&t(n.join(cS))})})},OQ=(e,t)=>{const r=e.split(cS),n=[];for(let a=0;a<r.length;a++){const i=l0(r[a],t);if(n.push(i),i.type==="error")break}return n};function RQ(){return new TransformStream({transform(e,t){DQ(e,r=>{const n=r.length;let a;if(n<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,n);else if(n<65536){a=new Uint8Array(3);const i=new DataView(a.buffer);i.setUint8(0,126),i.setUint16(1,n)}else{a=new Uint8Array(9);const i=new DataView(a.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(n))}e.data&&typeof e.data!="string"&&(a[0]|=128),t.enqueue(a),t.enqueue(r)})}})}let Wf;function Vc(e){return e.reduce((t,r)=>t+r.length,0)}function Hc(e,t){if(e[0].length===t)return e.shift();const r=new Uint8Array(t);let n=0;for(let a=0;a<t;a++)r[a]=e[0][n++],n===e[0].length&&(e.shift(),n=0);return e.length&&n<e[0].length&&(e[0]=e[0].slice(n)),r}function PQ(e,t){Wf||(Wf=new TextDecoder);const r=[];let n=0,a=-1,i=!1;return new TransformStream({transform(o,c){for(r.push(o);;){if(n===0){if(Vc(r)<1)break;const l=Hc(r,1);i=(l[0]&128)===128,a=l[0]&127,a<126?n=3:a===126?n=1:n=2}else if(n===1){if(Vc(r)<2)break;const l=Hc(r,2);a=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),n=3}else if(n===2){if(Vc(r)<8)break;const l=Hc(r,8),d=new DataView(l.buffer,l.byteOffset,l.length),u=d.getUint32(0);if(u>Math.pow(2,21)-1){c.enqueue(kp);break}a=u*Math.pow(2,32)+d.getUint32(4),n=3}else{if(Vc(r)<a)break;const l=Hc(r,a);c.enqueue(l0(i?l:Wf.decode(l),t)),n=0}if(a===0||a>e){c.enqueue(kp);break}}}})}const dS=4;function jt(e){if(e)return LQ(e)}function LQ(e){for(var t in jt.prototype)e[t]=jt.prototype[t];return e}jt.prototype.on=jt.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};jt.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this};jt.prototype.off=jt.prototype.removeListener=jt.prototype.removeAllListeners=jt.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var n,a=0;a<r.length;a++)if(n=r[a],n===t||n.fn===t){r.splice(a,1);break}return r.length===0&&delete this._callbacks["$"+e],this};jt.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,a=r.length;n<a;++n)r[n].apply(this,t)}return this};jt.prototype.emitReserved=jt.prototype.emit;jt.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};jt.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Rh=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,r)=>r(t,0),Ur=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),IQ="arraybuffer";function uS(e,...t){return t.reduce((r,n)=>(e.hasOwnProperty(n)&&(r[n]=e[n]),r),{})}const $Q=Ur.setTimeout,FQ=Ur.clearTimeout;function Ph(e,t){t.useNativeTimers?(e.setTimeoutFn=$Q.bind(Ur),e.clearTimeoutFn=FQ.bind(Ur)):(e.setTimeoutFn=Ur.setTimeout.bind(Ur),e.clearTimeoutFn=Ur.clearTimeout.bind(Ur))}const BQ=1.33;function zQ(e){return typeof e=="string"?UQ(e):Math.ceil((e.byteLength||e.size)*BQ)}function UQ(e){let t=0,r=0;for(let n=0,a=e.length;n<a;n++)t=e.charCodeAt(n),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(n++,r+=4);return r}function hS(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function VQ(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}function HQ(e){let t={},r=e.split("&");for(let n=0,a=r.length;n<a;n++){let i=r[n].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}class WQ extends Error{constructor(t,r,n){super(t),this.description=r,this.context=n,this.type="TransportError"}}class c0 extends jt{constructor(t){super(),this.writable=!1,Ph(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,r,n){return super.emitReserved("error",new WQ(t,r,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=l0(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,r={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const r=VQ(t);return r.length?"?"+r:""}}class YQ extends c0{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||r()})),this.writable||(n++,this.once("drain",function(){--n||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};OQ(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,MQ(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=hS()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(t,r)}}let fS=!1;try{fS=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const qQ=fS;function GQ(){}class KQ extends YQ{constructor(t){if(super(t),typeof location<"u"){const r=location.protocol==="https:";let n=location.port;n||(n=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||n!==t.port}}doWrite(t,r){const n=this.request({method:"POST",data:t});n.on("success",r),n.on("error",(a,i)=>{this.onError("xhr post error",a,i)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,n)=>{this.onError("xhr poll error",r,n)}),this.pollXhr=t}}let pi=class jd extends jt{constructor(t,r,n){super(),this.createRequest=t,Ph(this,n),this._opts=n,this._method=n.method||"GET",this._uri=r,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var t;const r=uS(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(r);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let a in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(a)&&n.setRequestHeader(a,this._opts.extraHeaders[a])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var a;n.readyState===3&&((a=this._opts.cookieJar)===null||a===void 0||a.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(a){this.setTimeoutFn(()=>{this._onError(a)},0);return}typeof document<"u"&&(this._index=jd.requestsCount++,jd.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=GQ,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete jd.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};pi.requestsCount=0;pi.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",qb);else if(typeof addEventListener=="function"){const e="onpagehide"in Ur?"pagehide":"unload";addEventListener(e,qb,!1)}}function qb(){for(let e in pi.requests)pi.requests.hasOwnProperty(e)&&pi.requests[e].abort()}const QQ=function(){const e=mS({xdomain:!1});return e&&e.responseType!==null}();class XQ extends KQ{constructor(t){super(t);const r=t&&t.forceBase64;this.supportsBinary=QQ&&!r}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new pi(mS,this.uri(),t)}}function mS(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||qQ))return new XMLHttpRequest}catch{}if(!t)try{return new Ur[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const pS=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class JQ extends c0{get name(){return"websocket"}doOpen(){const t=this.uri(),r=this.opts.protocols,n=pS?{}:uS(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,r,n)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],a=r===t.length-1;o0(n,this.supportsBinary,i=>{try{this.doWrite(n,i)}catch{}a&&Rh(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=hS()),this.supportsBinary||(r.b64=1),this.createUri(t,r)}}const Yf=Ur.WebSocket||Ur.MozWebSocket;class ZQ extends JQ{createSocket(t,r,n){return pS?new Yf(t,r,n):r?new Yf(t,r):new Yf(t)}doWrite(t,r){this.ws.send(r)}}class eX extends c0{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const r=PQ(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=t.readable.pipeThrough(r).getReader(),a=RQ();a.readable.pipeTo(t.writable),this._writer=a.writable.getWriter();const i=()=>{n.read().then(({done:c,value:l})=>{c||(this.onPacket(l),i())}).catch(c=>{})};i();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],a=r===t.length-1;this._writer.write(n).then(()=>{a&&Rh(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const tX={websocket:ZQ,webtransport:eX,polling:XQ},rX=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,sX=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Dp(e){if(e.length>8e3)throw"URI too long";const t=e,r=e.indexOf("["),n=e.indexOf("]");r!=-1&&n!=-1&&(e=e.substring(0,r)+e.substring(r,n).replace(/:/g,";")+e.substring(n,e.length));let a=rX.exec(e||""),i={},o=14;for(;o--;)i[sX[o]]=a[o]||"";return r!=-1&&n!=-1&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=nX(i,i.path),i.queryKey=aX(i,i.query),i}function nX(e,t){const r=/\/{2,9}/g,n=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&n.splice(0,1),t.slice(-1)=="/"&&n.splice(n.length-1,1),n}function aX(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,a,i){a&&(r[a]=i)}),r}const Ap=typeof addEventListener=="function"&&typeof removeEventListener=="function",wd=[];Ap&&addEventListener("offline",()=>{wd.forEach(e=>e())},!1);class Vn extends jt{constructor(t,r){if(super(),this.binaryType=IQ,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(r=t,t=null),t){const n=Dp(t);r.hostname=n.host,r.secure=n.protocol==="https"||n.protocol==="wss",r.port=n.port,n.query&&(r.query=n.query)}else r.host&&(r.hostname=Dp(r.host).host);Ph(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(n=>{const a=n.prototype.name;this.transports.push(a),this._transportsByName[a]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=HQ(this.opts.query)),Ap&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},wd.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=dS,r.transport=t,this.id&&(r.sid=this.id);const n=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&Vn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(t);r.open(),this.setTransport(r)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",Vn.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=t.data,this._onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let n=0;n<this.writeBuffer.length;n++){const a=this.writeBuffer[n].data;if(a&&(r+=zQ(a)),n>0&&r>this._maxPayload)return this.writeBuffer.slice(0,n);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,Rh(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,r,n){return this._sendPacket("message",t,r,n),this}send(t,r,n){return this._sendPacket("message",t,r,n),this}_sendPacket(t,r,n,a){if(typeof r=="function"&&(a=r,r=void 0),typeof n=="function"&&(a=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const i={type:t,data:r,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),a&&this.once("flush",a),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},n=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():t()}):this.upgrading?n():t()),this}_onError(t){if(Vn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Ap&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=wd.indexOf(this._offlineEventListener);n!==-1&&wd.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this._prevBufferLen=0}}}Vn.protocol=dS;class iX extends Vn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let r=this.createTransport(t),n=!1;Vn.priorWebsocketSuccess=!1;const a=()=>{n||(r.send([{type:"ping",data:"probe"}]),r.once("packet",h=>{if(!n)if(h.type==="pong"&&h.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;Vn.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(u(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=r.name,this.emitReserved("upgradeError",f)}}))};function i(){n||(n=!0,u(),r.close(),r=null)}const o=h=>{const f=new Error("probe error: "+h);f.transport=r.name,i(),this.emitReserved("upgradeError",f)};function c(){o("transport closed")}function l(){o("socket closed")}function d(h){r&&h.name!==r.name&&i()}const u=()=>{r.removeListener("open",a),r.removeListener("error",o),r.removeListener("close",c),this.off("close",l),this.off("upgrading",d)};r.once("open",a),r.once("error",o),r.once("close",c),this.once("close",l),this.once("upgrading",d),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{n||r.open()},200):r.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const r=[];for(let n=0;n<t.length;n++)~this.transports.indexOf(t[n])&&r.push(t[n]);return r}}let oX=class extends iX{constructor(t,r={}){const n=typeof t=="object"?t:r;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(a=>tX[a]).filter(a=>!!a)),super(t,n)}};function lX(e,t="",r){let n=e;r=r||typeof location<"u"&&location,e==null&&(e=r.protocol+"//"+r.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=r.protocol+e:e=r.host+e),/^(https?|wss?):\/\//.test(e)||(typeof r<"u"?e=r.protocol+"//"+e:e="https://"+e),n=Dp(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const i=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+i+":"+n.port+t,n.href=n.protocol+"://"+i+(r&&r.port===n.port?"":":"+n.port),n}const cX=typeof ArrayBuffer=="function",dX=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,gS=Object.prototype.toString,uX=typeof Blob=="function"||typeof Blob<"u"&&gS.call(Blob)==="[object BlobConstructor]",hX=typeof File=="function"||typeof File<"u"&&gS.call(File)==="[object FileConstructor]";function d0(e){return cX&&(e instanceof ArrayBuffer||dX(e))||uX&&e instanceof Blob||hX&&e instanceof File}function Nd(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let r=0,n=e.length;r<n;r++)if(Nd(e[r]))return!0;return!1}if(d0(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return Nd(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&Nd(e[r]))return!0;return!1}function fX(e){const t=[],r=e.data,n=e;return n.data=Tp(r,t),n.attachments=t.length,{packet:n,buffers:t}}function Tp(e,t){if(!e)return e;if(d0(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}else if(Array.isArray(e)){const r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=Tp(e[n],t);return r}else if(typeof e=="object"&&!(e instanceof Date)){const r={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=Tp(e[n],t));return r}return e}function mX(e,t){return e.data=_p(e.data,t),delete e.attachments,e}function _p(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=_p(e[r],t);else if(typeof e=="object")for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=_p(e[r],t));return e}const pX=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],gX=5;var Me;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(Me||(Me={}));class xX{constructor(t){this.replacer=t}encode(t){return(t.type===Me.EVENT||t.type===Me.ACK)&&Nd(t)?this.encodeAsBinary({type:t.type===Me.EVENT?Me.BINARY_EVENT:Me.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===Me.BINARY_EVENT||t.type===Me.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=fX(t),n=this.encodeAsString(r.packet),a=r.buffers;return a.unshift(n),a}}function Gb(e){return Object.prototype.toString.call(e)==="[object Object]"}class u0 extends jt{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t);const n=r.type===Me.BINARY_EVENT;n||r.type===Me.BINARY_ACK?(r.type=n?Me.EVENT:Me.ACK,this.reconstructor=new vX(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(d0(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const n={type:Number(t.charAt(0))};if(Me[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===Me.BINARY_EVENT||n.type===Me.BINARY_ACK){const i=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const o=t.substring(i,r);if(o!=Number(o)||t.charAt(r)!=="-")throw new Error("Illegal attachments");n.attachments=Number(o)}if(t.charAt(r+1)==="/"){const i=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););n.nsp=t.substring(i,r)}else n.nsp="/";const a=t.charAt(r+1);if(a!==""&&Number(a)==a){const i=r+1;for(;++r;){const o=t.charAt(r);if(o==null||Number(o)!=o){--r;break}if(r===t.length)break}n.id=Number(t.substring(i,r+1))}if(t.charAt(++r)){const i=this.tryParse(t.substr(r));if(u0.isPayloadValid(n.type,i))n.data=i;else throw new Error("invalid payload")}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case Me.CONNECT:return Gb(r);case Me.DISCONNECT:return r===void 0;case Me.CONNECT_ERROR:return typeof r=="string"||Gb(r);case Me.EVENT:case Me.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&pX.indexOf(r[0])===-1);case Me.ACK:case Me.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class vX{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=mX(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const yX=Object.freeze(Object.defineProperty({__proto__:null,Decoder:u0,Encoder:xX,get PacketType(){return Me},protocol:gX},Symbol.toStringTag,{value:"Module"}));function ls(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const bX=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class xS extends jt{constructor(t,r,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[ls(t,"open",this.onopen.bind(this)),ls(t,"packet",this.onpacket.bind(this)),ls(t,"error",this.onerror.bind(this)),ls(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){var n,a,i;if(bX.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(r.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const o={type:Me.EVENT,data:r};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const u=this.ids++,h=r.pop();this._registerAckCallback(u,h),o.id=u}const c=(a=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||a===void 0?void 0:a.writable,l=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!c||(l?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,r){var n;const a=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(a===void 0){this.acks[t]=r;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let c=0;c<this.sendBuffer.length;c++)this.sendBuffer[c].id===t&&this.sendBuffer.splice(c,1);r.call(this,new Error("operation has timed out"))},a),o=(...c)=>{this.io.clearTimeoutFn(i),r.apply(this,c)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...r){return new Promise((n,a)=>{const i=(o,c)=>o?a(o):n(c);i.withError=!0,r.push(i),this.emit(t,...r)})}_addToQueue(t){let r;typeof t[t.length-1]=="function"&&(r=t.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((a,...i)=>n!==this._queue[0]?void 0:(a!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(a)):(this._queue.shift(),r&&r(null,...i)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!t||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Me.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(n=>String(n.id)===t)){const n=this.acks[t];delete this.acks[t],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Me.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Me.EVENT:case Me.BINARY_EVENT:this.onevent(t);break;case Me.ACK:case Me.BINARY_ACK:this.onack(t);break;case Me.DISCONNECT:this.ondisconnect();break;case Me.CONNECT_ERROR:this.destroy();const n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const n of r)n.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const r=this;let n=!1;return function(...a){n||(n=!0,r.packet({type:Me.ACK,id:t,data:a}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(delete this.acks[t.id],r.withError&&t.data.unshift(null),r.apply(this,t.data))}onconnect(t,r){this.id=t,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Me.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const n of r)n.apply(this,t.data)}}}function so(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}so.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+r:e-r}return Math.min(e,this.max)|0};so.prototype.reset=function(){this.attempts=0};so.prototype.setMin=function(e){this.ms=e};so.prototype.setMax=function(e){this.max=e};so.prototype.setJitter=function(e){this.jitter=e};class Mp extends jt{constructor(t,r){var n;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,Ph(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((n=r.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new so({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const a=r.parser||yX;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new oX(this.uri,this.opts);const r=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const a=ls(r,"open",function(){n.onopen(),t&&t()}),i=c=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",c),t?t(c):this.maybeReconnectOnOpen()},o=ls(r,"error",i);if(this._timeout!==!1){const c=this._timeout,l=this.setTimeoutFn(()=>{a(),i(new Error("timeout")),r.close()},c);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(a),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(ls(t,"ping",this.onping.bind(this)),ls(t,"data",this.ondata.bind(this)),ls(t,"error",this.onerror.bind(this)),ls(t,"close",this.onclose.bind(this)),ls(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){Rh(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new xS(this,t,r),this.nsps[t]=n),n}_destroy(t){const r=Object.keys(this.nsps);for(const n of r)if(this.nsps[n].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let n=0;n<r.length;n++)this.engine.write(r[n],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,r){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(a=>{a?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",a)):t.onreconnect()}))},r);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const So={};function Ko(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const r=lX(e,t.path||"/socket.io"),n=r.source,a=r.id,i=r.path,o=So[a]&&i in So[a].nsps,c=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let l;return c?l=new Mp(n,t):(So[a]||(So[a]=new Mp(n,t)),l=So[a]),r.query&&!t.query&&(t.query=r.queryKey),l.socket(r.path,t)}Object.assign(Ko,{Manager:Mp,Socket:xS,io:Ko,connect:Ko});const jX=()=>{var G,Z;const[e,t]=g.useState([]),[r,n]=g.useState([]),[a,i]=g.useState([]),[o,c]=g.useState(""),[l,d]=g.useState(""),[u,h]=g.useState(""),[f,x]=g.useState(!0),[v,y]=g.useState(null),[b,p]=g.useState(!1),[m,j]=g.useState(null),[w,N]=g.useState([]),[C,S]=g.useState(new Set),[E,k]=g.useState(!1),T=g.useRef(null),D=g.useRef(null),{user:$}=Ee();g.useEffect(()=>{if(!$)return;const F=localStorage.getItem("token"),U=Ko("http://localhost:3000",{auth:{token:F,user:{id:$.id,name:$.name,role:$.role}}});return U.on("connect",()=>{console.log("Conectado al servidor de chat")}),U.on("disconnect",()=>{console.log("Desconectado del servidor de chat")}),U.on("new_message",Y=>{t(Q=>[...Q,Y]),n(Q=>Q.map(de=>de.userId===Y.senderId?{...de,lastMessage:Y.content,lastMessageTime:Y.createdAt}:de)),l!==Y.senderId&&W(Y.senderName,Y.content)}),U.on("message_sent",Y=>{t(Q=>[...Q,Y])}),U.on("user_typing",Y=>{Y.isTyping?S(Q=>new Set(Q).add(Y.userId)):S(Q=>{const de=new Set(Q);return de.delete(Y.userId),de})}),U.on("user_connected",Y=>{N(Q=>[...Q,Y])}),U.on("user_disconnected",Y=>{N(Q=>Q.filter(de=>de.userId!==Y.userId))}),U.on("message_error",Y=>{y(Y.error)}),j(U),()=>{U.close()}},[$]),g.useEffect(()=>{(async()=>{try{x(!0);const U=localStorage.getItem("token");if(console.log("Token from localStorage:",U?"Token exists":"No token found"),console.log("User from context:",$),!U||!$){console.error("No token or user found"),y("Usuario no autenticado"),n([]),i([]);return}const[Y,Q]=await Promise.all([X.get("/users/lawyers"),X.get("/chat/conversations")]);console.log("Lawyers response:",Y.data),console.log("Lawyers response type:",typeof Y.data),console.log("Lawyers response isArray:",Array.isArray(Y.data)),console.log("Lawyers response status:",Y.status),console.log("Conversations response:",Q.data),console.log("Conversations response type:",typeof Q.data),console.log("Conversations response isArray:",Array.isArray(Q.data)),console.log("Conversations response status:",Q.status),console.log("Conversations response headers:",Q.headers),i(Array.isArray(Y.data)?Y.data:[]),n(Array.isArray(Q.data)?Q.data:[]),y(null)}catch(U){console.error("Error fetching data:",U),y("Error al cargar los datos"),n([]),i([])}finally{x(!1)}})()},[]),g.useEffect(()=>{l&&_(l)},[l]),g.useEffect(()=>{A()},[e]);const _=async F=>{try{const U=localStorage.getItem("token"),Y=await X.get(`/chat/messages/${F}`);t(Y.data)}catch(U){console.error("Error fetching messages:",U),y("Error al cargar los mensajes")}},A=()=>{var F;(F=T.current)==null||F.scrollIntoView({behavior:"smooth"})},B=async F=>{if(F.preventDefault(),!(!u.trim()||!l||!m))try{p(!0),m.emit("send_message",{receiverId:l,content:u}),h(""),m.emit("typing_stop",{receiverId:l}),k(!1)}catch(U){console.error("Error sending message:",U),y("Error al enviar el mensaje")}finally{p(!1)}},P=F=>{c(F),d(F),t([])},M=F=>{d(F)},R=F=>{h(F.target.value),!(!m||!l)&&(E||(k(!0),m.emit("typing_start",{receiverId:l})),D.current&&clearTimeout(D.current),D.current=setTimeout(()=>{k(!1),m.emit("typing_stop",{receiverId:l})},1e3))},W=(F,U)=>{"Notification"in window&&Notification.permission==="granted"&&new Notification(`Nuevo mensaje de ${F}`,{body:U,icon:"/favicon.ico"})},V=F=>{const U=new Date(F),Q=(new Date().getTime()-U.getTime())/(1e3*60*60);return Q<24?U.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):Q<48?"Ayer":U.toLocaleDateString()},z=F=>w.some(U=>U.userId===F),H=F=>F.charAt(0).toUpperCase();return f?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):s.jsx("div",{className:"py-6",children:s.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[s.jsxs("div",{className:"p-4 border-b",children:[s.jsx("h1",{className:"text-xl font-semibold",children:"Chat con Abogado"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Comunicación directa con tu abogado"})]}),s.jsxs("div",{className:"flex h-96",children:[s.jsxs("div",{className:"w-1/3 border-r bg-gray-50",children:[s.jsxs("div",{className:"p-4 border-b",children:[s.jsx("h2",{className:"font-medium text-gray-900 mb-3",children:"Conversaciones"}),!Array.isArray(r)||r.length===0?s.jsx("p",{className:"text-sm text-gray-500",children:"No hay conversaciones activas"}):s.jsx("div",{className:"space-y-2",children:r.map(F=>s.jsx("div",{onClick:()=>M(F.userId),className:`p-3 rounded-lg cursor-pointer transition-colors ${l===F.userId?"bg-blue-100 border-blue-300":"bg-white hover:bg-gray-100"}`,children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white text-sm font-medium",children:H(F.userName)})}),z(F.userId)&&s.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:F.userName}),s.jsx("div",{className:"text-xs text-gray-400",children:V(F.lastMessageTime)})]}),s.jsx("p",{className:"text-xs text-gray-500 truncate",children:F.lastMessage}),F.unreadCount>0&&s.jsx("div",{className:"mt-1",children:s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:F.unreadCount})})]})]})},F.userId))})]}),s.jsxs("div",{className:"p-4 border-t",children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Nueva conversación"}),s.jsxs("select",{value:o,onChange:F=>P(F.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Seleccionar abogado para nueva conversación",children:[s.jsx("option",{value:"",children:"Selecciona un abogado"}),a.map(F=>s.jsxs("option",{value:F.id,children:[F.name," (",F.email,")"]},F.id))]})]})]}),s.jsx("div",{className:"flex-1 flex flex-col",children:l?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"p-4 border-b bg-gray-50",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white text-sm font-medium",children:H(Array.isArray(r)&&((G=r.find(F=>F.userId===l))==null?void 0:G.userName)||"A")})}),z(l)&&s.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})]}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"font-medium text-gray-900",children:Array.isArray(r)&&((Z=r.find(F=>F.userId===l))==null?void 0:Z.userName)||"Abogado"}),s.jsx("p",{className:"text-sm text-gray-500",children:z(l)?"En línea":"Desconectado"})]})]})})}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e.length===0?s.jsx("div",{className:"text-center text-gray-500 mt-8",children:s.jsx("p",{children:"No hay mensajes aún. ¡Inicia la conversación!"})}):e.map(F=>s.jsx("div",{className:`flex ${F.isOwnMessage?"justify-end":"justify-start"}`,children:s.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${F.isOwnMessage?"bg-blue-600 text-white":"bg-gray-200 text-gray-900"}`,children:[s.jsx("div",{className:"text-sm",children:F.content}),s.jsx("div",{className:`text-xs mt-1 ${F.isOwnMessage?"text-blue-100":"text-gray-500"}`,children:V(F.createdAt)})]})},F.id)),C.has(l)&&s.jsx("div",{className:"flex justify-start",children:s.jsx("div",{className:"bg-gray-200 text-gray-900 px-4 py-2 rounded-lg",children:s.jsx("div",{className:"text-sm",children:"Escribiendo..."})})}),s.jsx("div",{ref:T})]}),s.jsx("form",{onSubmit:B,className:"p-4 border-t",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("input",{type:"text",value:u,onChange:R,placeholder:"Escribe tu mensaje...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:b}),s.jsx("button",{type:"submit",disabled:!u.trim()||b,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:b?"Enviando...":"Enviar"})]})})]}):s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsxs("div",{className:"text-center text-gray-500",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),s.jsx("p",{className:"text-lg font-medium",children:"Selecciona una conversación"}),s.jsx("p",{className:"text-sm",children:"O inicia una nueva conversación con un abogado"})]})})})]}),v&&s.jsx("div",{className:"p-4 bg-red-50 border-t border-red-200",children:s.jsx("div",{className:"text-red-600 text-sm",children:v})})]})})})},wX=()=>{var G,Z;const[e,t]=g.useState([]),[r,n]=g.useState([]),[a,i]=g.useState([]),[o,c]=g.useState(""),[l,d]=g.useState(""),[u,h]=g.useState(""),[f,x]=g.useState(!0),[v,y]=g.useState(null),[b,p]=g.useState(!1),[m,j]=g.useState(null),[w,N]=g.useState([]),[C,S]=g.useState(new Set),[E,k]=g.useState(!1),T=g.useRef(null),D=g.useRef(null),{user:$}=Ee();g.useEffect(()=>{if(!$)return;const F=localStorage.getItem("token"),U=Ko("http://localhost:3000",{auth:{token:F,user:{id:$.id,name:$.name,role:$.role}}});return U.on("connect",()=>{console.log("Conectado al servidor de chat")}),U.on("disconnect",()=>{console.log("Desconectado del servidor de chat")}),U.on("new_message",Y=>{t(Q=>[...Q,Y]),n(Q=>Q.map(de=>de.userId===Y.senderId?{...de,lastMessage:Y.content,lastMessageTime:Y.createdAt}:de)),l!==Y.senderId&&W(Y.senderName,Y.content)}),U.on("message_sent",Y=>{t(Q=>[...Q,Y])}),U.on("user_typing",Y=>{Y.isTyping?S(Q=>new Set(Q).add(Y.userId)):S(Q=>{const de=new Set(Q);return de.delete(Y.userId),de})}),U.on("user_connected",Y=>{N(Q=>[...Q,Y])}),U.on("user_disconnected",Y=>{N(Q=>Q.filter(de=>de.userId!==Y.userId))}),U.on("message_error",Y=>{y(Y.error)}),j(U),()=>{U.close()}},[$]),g.useEffect(()=>{(async()=>{try{x(!0);const U=localStorage.getItem("token"),[Y,Q]=await Promise.all([X.get("/users/clients",{headers:{Authorization:`Bearer ${U}`}}),X.get("/chat/conversations",{headers:{Authorization:`Bearer ${U}`}})]);i(Y.data),n(Q.data),y(null)}catch(U){console.error("Error fetching data:",U),y("Error al cargar los datos")}finally{x(!1)}})()},[]),g.useEffect(()=>{l&&_(l)},[l]),g.useEffect(()=>{A()},[e]);const _=async F=>{try{const U=localStorage.getItem("token"),Y=await X.get(`/chat/messages/${F}`,{headers:{Authorization:`Bearer ${U}`}});t(Y.data)}catch(U){console.error("Error fetching messages:",U),y("Error al cargar los mensajes")}},A=()=>{var F;(F=T.current)==null||F.scrollIntoView({behavior:"smooth"})},B=async F=>{if(F.preventDefault(),!(!u.trim()||!l||!m))try{p(!0),m.emit("send_message",{receiverId:l,content:u}),h(""),m.emit("typing_stop",{receiverId:l}),k(!1)}catch(U){console.error("Error sending message:",U),y("Error al enviar el mensaje")}finally{p(!1)}},P=F=>{c(F),d(F),t([])},M=F=>{d(F)},R=F=>{h(F.target.value),!(!m||!l)&&(E||(k(!0),m.emit("typing_start",{receiverId:l})),D.current&&clearTimeout(D.current),D.current=setTimeout(()=>{k(!1),m.emit("typing_stop",{receiverId:l})},1e3))},W=(F,U)=>{"Notification"in window&&Notification.permission==="granted"&&new Notification(`Nuevo mensaje de ${F}`,{body:U,icon:"/favicon.ico"})},V=F=>{const U=new Date(F),Q=(new Date().getTime()-U.getTime())/(1e3*60*60);return Q<24?U.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):Q<48?"Ayer":U.toLocaleDateString()},z=F=>w.some(U=>U.userId===F),H=F=>F.charAt(0).toUpperCase();return f?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):s.jsx("div",{className:"py-6",children:s.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[s.jsxs("div",{className:"p-4 border-b",children:[s.jsx("h1",{className:"text-xl font-semibold",children:"Chat con Clientes"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Comunicación directa con tus clientes"})]}),s.jsxs("div",{className:"flex h-96",children:[s.jsxs("div",{className:"w-1/3 border-r bg-gray-50",children:[s.jsxs("div",{className:"p-4 border-b",children:[s.jsx("h2",{className:"font-medium text-gray-900 mb-3",children:"Conversaciones"}),r.length===0?s.jsx("p",{className:"text-sm text-gray-500",children:"No hay conversaciones activas"}):s.jsx("div",{className:"space-y-2",children:r.map(F=>s.jsx("div",{onClick:()=>M(F.userId),className:`p-3 rounded-lg cursor-pointer transition-colors ${l===F.userId?"bg-blue-100 border-blue-300":"bg-white hover:bg-gray-100"}`,children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-10 h-10 bg-green-600 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white text-sm font-medium",children:H(F.userName)})}),z(F.userId)&&s.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:F.userName}),s.jsx("div",{className:"text-xs text-gray-400",children:V(F.lastMessageTime)})]}),s.jsx("p",{className:"text-xs text-gray-500 truncate",children:F.lastMessage}),F.unreadCount>0&&s.jsx("div",{className:"mt-1",children:s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:F.unreadCount})})]})]})},F.userId))})]}),s.jsxs("div",{className:"p-4 border-t",children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Nueva conversación"}),s.jsxs("select",{value:o,onChange:F=>P(F.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Seleccionar cliente para nueva conversación",children:[s.jsx("option",{value:"",children:"Selecciona un cliente"}),a.map(F=>s.jsxs("option",{value:F.user.id,children:[F.user.name," (",F.user.email,")"]},F.id))]})]})]}),s.jsx("div",{className:"flex-1 flex flex-col",children:l?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"p-4 border-b bg-gray-50",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-10 h-10 bg-green-600 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white text-sm font-medium",children:H(((G=r.find(F=>F.userId===l))==null?void 0:G.userName)||"C")})}),z(l)&&s.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})]}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"font-medium text-gray-900",children:((Z=r.find(F=>F.userId===l))==null?void 0:Z.userName)||"Cliente"}),s.jsx("p",{className:"text-sm text-gray-500",children:z(l)?"En línea":"Desconectado"})]})]})})}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e.length===0?s.jsx("div",{className:"text-center text-gray-500 mt-8",children:s.jsx("p",{children:"No hay mensajes aún. ¡Inicia la conversación!"})}):e.map(F=>s.jsx("div",{className:`flex ${F.isOwnMessage?"justify-end":"justify-start"}`,children:s.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${F.isOwnMessage?"bg-blue-600 text-white":"bg-gray-200 text-gray-900"}`,children:[s.jsx("div",{className:"text-sm",children:F.content}),s.jsx("div",{className:`text-xs mt-1 ${F.isOwnMessage?"text-blue-100":"text-gray-500"}`,children:V(F.createdAt)})]})},F.id)),C.has(l)&&s.jsx("div",{className:"flex justify-start",children:s.jsx("div",{className:"bg-gray-200 text-gray-900 px-4 py-2 rounded-lg",children:s.jsx("div",{className:"text-sm",children:"Escribiendo..."})})}),s.jsx("div",{ref:T})]}),s.jsx("form",{onSubmit:B,className:"p-4 border-t",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("input",{type:"text",value:u,onChange:R,placeholder:"Escribe tu mensaje...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:b}),s.jsx("button",{type:"submit",disabled:!u.trim()||b,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:b?"Enviando...":"Enviar"})]})})]}):s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsxs("div",{className:"text-center text-gray-500",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),s.jsx("p",{className:"text-lg font-medium",children:"Selecciona una conversación"}),s.jsx("p",{className:"text-sm",children:"O inicia una nueva conversación con un cliente"})]})})})]}),v&&s.jsx("div",{className:"p-4 bg-red-50 border-t border-red-200",children:s.jsx("div",{className:"text-red-600 text-sm",children:v})})]})})})};async function NX(e){return(await X.get("/invoices",{headers:{Authorization:`Bearer ${e}`}})).data}async function CX(e,t){return(await X.post("/invoices",e,{headers:{Authorization:`Bearer ${t}`}})).data}async function SX(e,t,r){return(await X.put(`/invoices/${e}`,t,{headers:{Authorization:`Bearer ${r}`}})).data}async function EX(e,t){return(await X.delete(`/invoices/${e}`,{headers:{Authorization:`Bearer ${t}`}})).data}async function kX(e){return(await X.get("/users/clients",{headers:{Authorization:`Bearer ${e}`}})).data}const DX=async(e,t)=>(await X.post("/provision-fondos",e,{headers:{Authorization:`Bearer ${t}`}})).data,AX=async(e,t,r)=>(await X.patch("/provision-fondos/link-to-invoice",{provisionId:e,invoiceId:t},{headers:{Authorization:`Bearer ${r}`}})).data,TX=async e=>(await X.get("/provision-fondos",{params:{soloPendientes:!0},headers:{Authorization:`Bearer ${e}`}})).data,_X=async(e,t,r)=>(await X.get("/provision-fondos",{params:{clientId:e,expedienteId:t,soloPendientes:!0},headers:{Authorization:`Bearer ${r}`}})).data,MX=async(e,t)=>(await X.get("/provision-fondos",{params:{clientId:e},headers:{Authorization:`Bearer ${t}`}})).data;var OX=Object.defineProperty,bu=Object.getOwnPropertySymbols,vS=Object.prototype.hasOwnProperty,yS=Object.prototype.propertyIsEnumerable,Kb=(e,t,r)=>t in e?OX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Op=(e,t)=>{for(var r in t||(t={}))vS.call(t,r)&&Kb(e,r,t[r]);if(bu)for(var r of bu(t))yS.call(t,r)&&Kb(e,r,t[r]);return e},Rp=(e,t)=>{var r={};for(var n in e)vS.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&bu)for(var n of bu(e))t.indexOf(n)<0&&yS.call(e,n)&&(r[n]=e[n]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Pa;(e=>{const t=class De{constructor(l,d,u,h){if(this.version=l,this.errorCorrectionLevel=d,this.modules=[],this.isFunction=[],l<De.MIN_VERSION||l>De.MAX_VERSION)throw new RangeError("Version value out of range");if(h<-1||h>7)throw new RangeError("Mask value out of range");this.size=l*4+17;let f=[];for(let v=0;v<this.size;v++)f.push(!1);for(let v=0;v<this.size;v++)this.modules.push(f.slice()),this.isFunction.push(f.slice());this.drawFunctionPatterns();const x=this.addEccAndInterleave(u);if(this.drawCodewords(x),h==-1){let v=1e9;for(let y=0;y<8;y++){this.applyMask(y),this.drawFormatBits(y);const b=this.getPenaltyScore();b<v&&(h=y,v=b),this.applyMask(y)}}a(0<=h&&h<=7),this.mask=h,this.applyMask(h),this.drawFormatBits(h),this.isFunction=[]}static encodeText(l,d){const u=e.QrSegment.makeSegments(l);return De.encodeSegments(u,d)}static encodeBinary(l,d){const u=e.QrSegment.makeBytes(l);return De.encodeSegments([u],d)}static encodeSegments(l,d,u=1,h=40,f=-1,x=!0){if(!(De.MIN_VERSION<=u&&u<=h&&h<=De.MAX_VERSION)||f<-1||f>7)throw new RangeError("Invalid value");let v,y;for(v=u;;v++){const j=De.getNumDataCodewords(v,d)*8,w=o.getTotalBits(l,v);if(w<=j){y=w;break}if(v>=h)throw new RangeError("Data too long")}for(const j of[De.Ecc.MEDIUM,De.Ecc.QUARTILE,De.Ecc.HIGH])x&&y<=De.getNumDataCodewords(v,j)*8&&(d=j);let b=[];for(const j of l){r(j.mode.modeBits,4,b),r(j.numChars,j.mode.numCharCountBits(v),b);for(const w of j.getData())b.push(w)}a(b.length==y);const p=De.getNumDataCodewords(v,d)*8;a(b.length<=p),r(0,Math.min(4,p-b.length),b),r(0,(8-b.length%8)%8,b),a(b.length%8==0);for(let j=236;b.length<p;j^=253)r(j,8,b);let m=[];for(;m.length*8<b.length;)m.push(0);return b.forEach((j,w)=>m[w>>>3]|=j<<7-(w&7)),new De(v,d,m,f)}getModule(l,d){return 0<=l&&l<this.size&&0<=d&&d<this.size&&this.modules[d][l]}getModules(){return this.modules}drawFunctionPatterns(){for(let u=0;u<this.size;u++)this.setFunctionModule(6,u,u%2==0),this.setFunctionModule(u,6,u%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const l=this.getAlignmentPatternPositions(),d=l.length;for(let u=0;u<d;u++)for(let h=0;h<d;h++)u==0&&h==0||u==0&&h==d-1||u==d-1&&h==0||this.drawAlignmentPattern(l[u],l[h]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(l){const d=this.errorCorrectionLevel.formatBits<<3|l;let u=d;for(let f=0;f<10;f++)u=u<<1^(u>>>9)*1335;const h=(d<<10|u)^21522;a(h>>>15==0);for(let f=0;f<=5;f++)this.setFunctionModule(8,f,n(h,f));this.setFunctionModule(8,7,n(h,6)),this.setFunctionModule(8,8,n(h,7)),this.setFunctionModule(7,8,n(h,8));for(let f=9;f<15;f++)this.setFunctionModule(14-f,8,n(h,f));for(let f=0;f<8;f++)this.setFunctionModule(this.size-1-f,8,n(h,f));for(let f=8;f<15;f++)this.setFunctionModule(8,this.size-15+f,n(h,f));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let l=this.version;for(let u=0;u<12;u++)l=l<<1^(l>>>11)*7973;const d=this.version<<12|l;a(d>>>18==0);for(let u=0;u<18;u++){const h=n(d,u),f=this.size-11+u%3,x=Math.floor(u/3);this.setFunctionModule(f,x,h),this.setFunctionModule(x,f,h)}}drawFinderPattern(l,d){for(let u=-4;u<=4;u++)for(let h=-4;h<=4;h++){const f=Math.max(Math.abs(h),Math.abs(u)),x=l+h,v=d+u;0<=x&&x<this.size&&0<=v&&v<this.size&&this.setFunctionModule(x,v,f!=2&&f!=4)}}drawAlignmentPattern(l,d){for(let u=-2;u<=2;u++)for(let h=-2;h<=2;h++)this.setFunctionModule(l+h,d+u,Math.max(Math.abs(h),Math.abs(u))!=1)}setFunctionModule(l,d,u){this.modules[d][l]=u,this.isFunction[d][l]=!0}addEccAndInterleave(l){const d=this.version,u=this.errorCorrectionLevel;if(l.length!=De.getNumDataCodewords(d,u))throw new RangeError("Invalid argument");const h=De.NUM_ERROR_CORRECTION_BLOCKS[u.ordinal][d],f=De.ECC_CODEWORDS_PER_BLOCK[u.ordinal][d],x=Math.floor(De.getNumRawDataModules(d)/8),v=h-x%h,y=Math.floor(x/h);let b=[];const p=De.reedSolomonComputeDivisor(f);for(let j=0,w=0;j<h;j++){let N=l.slice(w,w+y-f+(j<v?0:1));w+=N.length;const C=De.reedSolomonComputeRemainder(N,p);j<v&&N.push(0),b.push(N.concat(C))}let m=[];for(let j=0;j<b[0].length;j++)b.forEach((w,N)=>{(j!=y-f||N>=v)&&m.push(w[j])});return a(m.length==x),m}drawCodewords(l){if(l.length!=Math.floor(De.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let d=0;for(let u=this.size-1;u>=1;u-=2){u==6&&(u=5);for(let h=0;h<this.size;h++)for(let f=0;f<2;f++){const x=u-f,y=(u+1&2)==0?this.size-1-h:h;!this.isFunction[y][x]&&d<l.length*8&&(this.modules[y][x]=n(l[d>>>3],7-(d&7)),d++)}}a(d==l.length*8)}applyMask(l){if(l<0||l>7)throw new RangeError("Mask value out of range");for(let d=0;d<this.size;d++)for(let u=0;u<this.size;u++){let h;switch(l){case 0:h=(u+d)%2==0;break;case 1:h=d%2==0;break;case 2:h=u%3==0;break;case 3:h=(u+d)%3==0;break;case 4:h=(Math.floor(u/3)+Math.floor(d/2))%2==0;break;case 5:h=u*d%2+u*d%3==0;break;case 6:h=(u*d%2+u*d%3)%2==0;break;case 7:h=((u+d)%2+u*d%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[d][u]&&h&&(this.modules[d][u]=!this.modules[d][u])}}getPenaltyScore(){let l=0;for(let f=0;f<this.size;f++){let x=!1,v=0,y=[0,0,0,0,0,0,0];for(let b=0;b<this.size;b++)this.modules[f][b]==x?(v++,v==5?l+=De.PENALTY_N1:v>5&&l++):(this.finderPenaltyAddHistory(v,y),x||(l+=this.finderPenaltyCountPatterns(y)*De.PENALTY_N3),x=this.modules[f][b],v=1);l+=this.finderPenaltyTerminateAndCount(x,v,y)*De.PENALTY_N3}for(let f=0;f<this.size;f++){let x=!1,v=0,y=[0,0,0,0,0,0,0];for(let b=0;b<this.size;b++)this.modules[b][f]==x?(v++,v==5?l+=De.PENALTY_N1:v>5&&l++):(this.finderPenaltyAddHistory(v,y),x||(l+=this.finderPenaltyCountPatterns(y)*De.PENALTY_N3),x=this.modules[b][f],v=1);l+=this.finderPenaltyTerminateAndCount(x,v,y)*De.PENALTY_N3}for(let f=0;f<this.size-1;f++)for(let x=0;x<this.size-1;x++){const v=this.modules[f][x];v==this.modules[f][x+1]&&v==this.modules[f+1][x]&&v==this.modules[f+1][x+1]&&(l+=De.PENALTY_N2)}let d=0;for(const f of this.modules)d=f.reduce((x,v)=>x+(v?1:0),d);const u=this.size*this.size,h=Math.ceil(Math.abs(d*20-u*10)/u)-1;return a(0<=h&&h<=9),l+=h*De.PENALTY_N4,a(0<=l&&l<=2568888),l}getAlignmentPatternPositions(){if(this.version==1)return[];{const l=Math.floor(this.version/7)+2,d=this.version==32?26:Math.ceil((this.version*4+4)/(l*2-2))*2;let u=[6];for(let h=this.size-7;u.length<l;h-=d)u.splice(1,0,h);return u}}static getNumRawDataModules(l){if(l<De.MIN_VERSION||l>De.MAX_VERSION)throw new RangeError("Version number out of range");let d=(16*l+128)*l+64;if(l>=2){const u=Math.floor(l/7)+2;d-=(25*u-10)*u-55,l>=7&&(d-=36)}return a(208<=d&&d<=29648),d}static getNumDataCodewords(l,d){return Math.floor(De.getNumRawDataModules(l)/8)-De.ECC_CODEWORDS_PER_BLOCK[d.ordinal][l]*De.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][l]}static reedSolomonComputeDivisor(l){if(l<1||l>255)throw new RangeError("Degree out of range");let d=[];for(let h=0;h<l-1;h++)d.push(0);d.push(1);let u=1;for(let h=0;h<l;h++){for(let f=0;f<d.length;f++)d[f]=De.reedSolomonMultiply(d[f],u),f+1<d.length&&(d[f]^=d[f+1]);u=De.reedSolomonMultiply(u,2)}return d}static reedSolomonComputeRemainder(l,d){let u=d.map(h=>0);for(const h of l){const f=h^u.shift();u.push(0),d.forEach((x,v)=>u[v]^=De.reedSolomonMultiply(x,f))}return u}static reedSolomonMultiply(l,d){if(l>>>8||d>>>8)throw new RangeError("Byte out of range");let u=0;for(let h=7;h>=0;h--)u=u<<1^(u>>>7)*285,u^=(d>>>h&1)*l;return a(u>>>8==0),u}finderPenaltyCountPatterns(l){const d=l[1];a(d<=this.size*3);const u=d>0&&l[2]==d&&l[3]==d*3&&l[4]==d&&l[5]==d;return(u&&l[0]>=d*4&&l[6]>=d?1:0)+(u&&l[6]>=d*4&&l[0]>=d?1:0)}finderPenaltyTerminateAndCount(l,d,u){return l&&(this.finderPenaltyAddHistory(d,u),d=0),d+=this.size,this.finderPenaltyAddHistory(d,u),this.finderPenaltyCountPatterns(u)}finderPenaltyAddHistory(l,d){d[0]==0&&(l+=this.size),d.pop(),d.unshift(l)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;function r(c,l,d){if(l<0||l>31||c>>>l)throw new RangeError("Value out of range");for(let u=l-1;u>=0;u--)d.push(c>>>u&1)}function n(c,l){return(c>>>l&1)!=0}function a(c){if(!c)throw new Error("Assertion error")}const i=class ht{constructor(l,d,u){if(this.mode=l,this.numChars=d,this.bitData=u,d<0)throw new RangeError("Invalid argument");this.bitData=u.slice()}static makeBytes(l){let d=[];for(const u of l)r(u,8,d);return new ht(ht.Mode.BYTE,l.length,d)}static makeNumeric(l){if(!ht.isNumeric(l))throw new RangeError("String contains non-numeric characters");let d=[];for(let u=0;u<l.length;){const h=Math.min(l.length-u,3);r(parseInt(l.substring(u,u+h),10),h*3+1,d),u+=h}return new ht(ht.Mode.NUMERIC,l.length,d)}static makeAlphanumeric(l){if(!ht.isAlphanumeric(l))throw new RangeError("String contains unencodable characters in alphanumeric mode");let d=[],u;for(u=0;u+2<=l.length;u+=2){let h=ht.ALPHANUMERIC_CHARSET.indexOf(l.charAt(u))*45;h+=ht.ALPHANUMERIC_CHARSET.indexOf(l.charAt(u+1)),r(h,11,d)}return u<l.length&&r(ht.ALPHANUMERIC_CHARSET.indexOf(l.charAt(u)),6,d),new ht(ht.Mode.ALPHANUMERIC,l.length,d)}static makeSegments(l){return l==""?[]:ht.isNumeric(l)?[ht.makeNumeric(l)]:ht.isAlphanumeric(l)?[ht.makeAlphanumeric(l)]:[ht.makeBytes(ht.toUtf8ByteArray(l))]}static makeEci(l){let d=[];if(l<0)throw new RangeError("ECI assignment value out of range");if(l<128)r(l,8,d);else if(l<16384)r(2,2,d),r(l,14,d);else if(l<1e6)r(6,3,d),r(l,21,d);else throw new RangeError("ECI assignment value out of range");return new ht(ht.Mode.ECI,0,d)}static isNumeric(l){return ht.NUMERIC_REGEX.test(l)}static isAlphanumeric(l){return ht.ALPHANUMERIC_REGEX.test(l)}getData(){return this.bitData.slice()}static getTotalBits(l,d){let u=0;for(const h of l){const f=h.mode.numCharCountBits(d);if(h.numChars>=1<<f)return 1/0;u+=4+f+h.bitData.length}return u}static toUtf8ByteArray(l){l=encodeURI(l);let d=[];for(let u=0;u<l.length;u++)l.charAt(u)!="%"?d.push(l.charCodeAt(u)):(d.push(parseInt(l.substring(u+1,u+3),16)),u+=2);return d}};i.NUMERIC_REGEX=/^[0-9]*$/,i.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,i.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let o=i;e.QrSegment=i})(Pa||(Pa={}));(e=>{(t=>{const r=class{constructor(a,i){this.ordinal=a,this.formatBits=i}};r.LOW=new r(0,1),r.MEDIUM=new r(1,0),r.QUARTILE=new r(2,3),r.HIGH=new r(3,2),t.Ecc=r})(e.QrCode||(e.QrCode={}))})(Pa||(Pa={}));(e=>{(t=>{const r=class{constructor(a,i){this.modeBits=a,this.numBitsCharCount=i}numCharCountBits(a){return this.numBitsCharCount[Math.floor((a+7)/17)]}};r.NUMERIC=new r(1,[10,12,14]),r.ALPHANUMERIC=new r(2,[9,11,13]),r.BYTE=new r(4,[8,16,16]),r.KANJI=new r(8,[8,10,12]),r.ECI=new r(7,[0,0,0]),t.Mode=r})(e.QrSegment||(e.QrSegment={}))})(Pa||(Pa={}));var ni=Pa;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var RX={L:ni.QrCode.Ecc.LOW,M:ni.QrCode.Ecc.MEDIUM,Q:ni.QrCode.Ecc.QUARTILE,H:ni.QrCode.Ecc.HIGH},bS=128,jS="L",wS="#FFFFFF",NS="#000000",CS=!1,SS=1,PX=4,LX=0,IX=.1;function ES(e,t=0){const r=[];return e.forEach(function(n,a){let i=null;n.forEach(function(o,c){if(!o&&i!==null){r.push(`M${i+t} ${a+t}h${c-i}v1H${i+t}z`),i=null;return}if(c===n.length-1){if(!o)return;i===null?r.push(`M${c+t},${a+t} h1v1H${c+t}z`):r.push(`M${i+t},${a+t} h${c+1-i}v1H${i+t}z`);return}o&&i===null&&(i=c)})}),r.join("")}function kS(e,t){return e.slice().map((r,n)=>n<t.y||n>=t.y+t.h?r:r.map((a,i)=>i<t.x||i>=t.x+t.w?a:!1))}function $X(e,t,r,n){if(n==null)return null;const a=e.length+r*2,i=Math.floor(t*IX),o=a/t,c=(n.width||i)*o,l=(n.height||i)*o,d=n.x==null?e.length/2-c/2:n.x*o,u=n.y==null?e.length/2-l/2:n.y*o,h=n.opacity==null?1:n.opacity;let f=null;if(n.excavate){let v=Math.floor(d),y=Math.floor(u),b=Math.ceil(c+d-v),p=Math.ceil(l+u-y);f={x:v,y,w:b,h:p}}const x=n.crossOrigin;return{x:d,y:u,h:l,w:c,excavation:f,opacity:h,crossOrigin:x}}function FX(e,t){return t!=null?Math.max(Math.floor(t),0):e?PX:LX}function DS({value:e,level:t,minVersion:r,includeMargin:n,marginSize:a,imageSettings:i,size:o,boostLevel:c}){let l=I.useMemo(()=>{const v=(Array.isArray(e)?e:[e]).reduce((y,b)=>(y.push(...ni.QrSegment.makeSegments(b)),y),[]);return ni.QrCode.encodeSegments(v,RX[t],r,void 0,void 0,c)},[e,t,r,c]);const{cells:d,margin:u,numCells:h,calculatedImageSettings:f}=I.useMemo(()=>{let x=l.getModules();const v=FX(n,a),y=x.length+v*2,b=$X(x,o,v,i);return{cells:x,margin:v,numCells:y,calculatedImageSettings:b}},[l,o,i,n,a]);return{qrcode:l,margin:u,cells:d,numCells:h,calculatedImageSettings:f}}var BX=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),zX=I.forwardRef(function(t,r){const n=t,{value:a,size:i=bS,level:o=jS,bgColor:c=wS,fgColor:l=NS,includeMargin:d=CS,minVersion:u=SS,boostLevel:h,marginSize:f,imageSettings:x}=n,y=Rp(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:b}=y,p=Rp(y,["style"]),m=x==null?void 0:x.src,j=I.useRef(null),w=I.useRef(null),N=I.useCallback(A=>{j.current=A,typeof r=="function"?r(A):r&&(r.current=A)},[r]),[C,S]=I.useState(!1),{margin:E,cells:k,numCells:T,calculatedImageSettings:D}=DS({value:a,level:o,minVersion:u,boostLevel:h,includeMargin:d,marginSize:f,imageSettings:x,size:i});I.useEffect(()=>{if(j.current!=null){const A=j.current,B=A.getContext("2d");if(!B)return;let P=k;const M=w.current,R=D!=null&&M!==null&&M.complete&&M.naturalHeight!==0&&M.naturalWidth!==0;R&&D.excavation!=null&&(P=kS(k,D.excavation));const W=window.devicePixelRatio||1;A.height=A.width=i*W;const V=i/T*W;B.scale(V,V),B.fillStyle=c,B.fillRect(0,0,T,T),B.fillStyle=l,BX?B.fill(new Path2D(ES(P,E))):k.forEach(function(z,H){z.forEach(function(G,Z){G&&B.fillRect(Z+E,H+E,1,1)})}),D&&(B.globalAlpha=D.opacity),R&&B.drawImage(M,D.x+E,D.y+E,D.w,D.h)}}),I.useEffect(()=>{S(!1)},[m]);const $=Op({height:i,width:i},b);let _=null;return m!=null&&(_=I.createElement("img",{src:m,key:m,style:{display:"none"},onLoad:()=>{S(!0)},ref:w,crossOrigin:D==null?void 0:D.crossOrigin})),I.createElement(I.Fragment,null,I.createElement("canvas",Op({style:$,height:i,width:i,ref:N,role:"img"},p)),_)});zX.displayName="QRCodeCanvas";var AS=I.forwardRef(function(t,r){const n=t,{value:a,size:i=bS,level:o=jS,bgColor:c=wS,fgColor:l=NS,includeMargin:d=CS,minVersion:u=SS,boostLevel:h,title:f,marginSize:x,imageSettings:v}=n,y=Rp(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:b,cells:p,numCells:m,calculatedImageSettings:j}=DS({value:a,level:o,minVersion:u,boostLevel:h,includeMargin:d,marginSize:x,imageSettings:v,size:i});let w=p,N=null;v!=null&&j!=null&&(j.excavation!=null&&(w=kS(p,j.excavation)),N=I.createElement("image",{href:v.src,height:j.h,width:j.w,x:j.x+b,y:j.y+b,preserveAspectRatio:"none",opacity:j.opacity,crossOrigin:j.crossOrigin}));const C=ES(w,b);return I.createElement("svg",Op({height:i,width:i,viewBox:`0 0 ${m} ${m}`,ref:r,role:"img"},y),!!f&&I.createElement("title",null,f),I.createElement("path",{fill:c,d:`M0,0 h${m}v${m}H0z`,shapeRendering:"crispEdges"}),I.createElement("path",{fill:l,d:C,shapeRendering:"crispEdges"}),N)});AS.displayName="QRCodeSVG";var uc={},UX=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},TS={},Mr={};let h0;const VX=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Mr.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};Mr.getSymbolTotalCodewords=function(t){return VX[t]};Mr.getBCHDigit=function(e){let t=0;for(;e!==0;)t++,e>>>=1;return t};Mr.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');h0=t};Mr.isKanjiModeEnabled=function(){return typeof h0<"u"};Mr.toSJIS=function(t){return h0(t)};var Lh={};(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function t(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+r)}}e.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},e.from=function(n,a){if(e.isValid(n))return n;try{return t(n)}catch{return a}}})(Lh);function _S(){this.buffer=[],this.length=0}_S.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let r=0;r<t;r++)this.putBit((e>>>t-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var HX=_S;function hc(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}hc.prototype.set=function(e,t,r,n){const a=e*this.size+t;this.data[a]=r,n&&(this.reservedBit[a]=!0)};hc.prototype.get=function(e,t){return this.data[e*this.size+t]};hc.prototype.xor=function(e,t,r){this.data[e*this.size+t]^=r};hc.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]};var WX=hc,MS={};(function(e){const t=Mr.getSymbolSize;e.getRowColCoords=function(n){if(n===1)return[];const a=Math.floor(n/7)+2,i=t(n),o=i===145?26:Math.ceil((i-13)/(2*a-2))*2,c=[i-7];for(let l=1;l<a-1;l++)c[l]=c[l-1]-o;return c.push(6),c.reverse()},e.getPositions=function(n){const a=[],i=e.getRowColCoords(n),o=i.length;for(let c=0;c<o;c++)for(let l=0;l<o;l++)c===0&&l===0||c===0&&l===o-1||c===o-1&&l===0||a.push([i[c],i[l]]);return a}})(MS);var OS={};const YX=Mr.getSymbolSize,Qb=7;OS.getPositions=function(t){const r=YX(t);return[[0,0],[r-Qb,0],[0,r-Qb]]};var RS={};(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};e.isValid=function(a){return a!=null&&a!==""&&!isNaN(a)&&a>=0&&a<=7},e.from=function(a){return e.isValid(a)?parseInt(a,10):void 0},e.getPenaltyN1=function(a){const i=a.size;let o=0,c=0,l=0,d=null,u=null;for(let h=0;h<i;h++){c=l=0,d=u=null;for(let f=0;f<i;f++){let x=a.get(h,f);x===d?c++:(c>=5&&(o+=t.N1+(c-5)),d=x,c=1),x=a.get(f,h),x===u?l++:(l>=5&&(o+=t.N1+(l-5)),u=x,l=1)}c>=5&&(o+=t.N1+(c-5)),l>=5&&(o+=t.N1+(l-5))}return o},e.getPenaltyN2=function(a){const i=a.size;let o=0;for(let c=0;c<i-1;c++)for(let l=0;l<i-1;l++){const d=a.get(c,l)+a.get(c,l+1)+a.get(c+1,l)+a.get(c+1,l+1);(d===4||d===0)&&o++}return o*t.N2},e.getPenaltyN3=function(a){const i=a.size;let o=0,c=0,l=0;for(let d=0;d<i;d++){c=l=0;for(let u=0;u<i;u++)c=c<<1&2047|a.get(d,u),u>=10&&(c===1488||c===93)&&o++,l=l<<1&2047|a.get(u,d),u>=10&&(l===1488||l===93)&&o++}return o*t.N3},e.getPenaltyN4=function(a){let i=0;const o=a.data.length;for(let l=0;l<o;l++)i+=a.data[l];return Math.abs(Math.ceil(i*100/o/5)-10)*t.N4};function r(n,a,i){switch(n){case e.Patterns.PATTERN000:return(a+i)%2===0;case e.Patterns.PATTERN001:return a%2===0;case e.Patterns.PATTERN010:return i%3===0;case e.Patterns.PATTERN011:return(a+i)%3===0;case e.Patterns.PATTERN100:return(Math.floor(a/2)+Math.floor(i/3))%2===0;case e.Patterns.PATTERN101:return a*i%2+a*i%3===0;case e.Patterns.PATTERN110:return(a*i%2+a*i%3)%2===0;case e.Patterns.PATTERN111:return(a*i%3+(a+i)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}e.applyMask=function(a,i){const o=i.size;for(let c=0;c<o;c++)for(let l=0;l<o;l++)i.isReserved(l,c)||i.xor(l,c,r(a,l,c))},e.getBestMask=function(a,i){const o=Object.keys(e.Patterns).length;let c=0,l=1/0;for(let d=0;d<o;d++){i(d),e.applyMask(d,a);const u=e.getPenaltyN1(a)+e.getPenaltyN2(a)+e.getPenaltyN3(a)+e.getPenaltyN4(a);e.applyMask(d,a),u<l&&(l=u,c=d)}return c}})(RS);var Ih={};const Mn=Lh,Wc=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Yc=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Ih.getBlocksCount=function(t,r){switch(r){case Mn.L:return Wc[(t-1)*4+0];case Mn.M:return Wc[(t-1)*4+1];case Mn.Q:return Wc[(t-1)*4+2];case Mn.H:return Wc[(t-1)*4+3];default:return}};Ih.getTotalCodewordsCount=function(t,r){switch(r){case Mn.L:return Yc[(t-1)*4+0];case Mn.M:return Yc[(t-1)*4+1];case Mn.Q:return Yc[(t-1)*4+2];case Mn.H:return Yc[(t-1)*4+3];default:return}};var PS={},$h={};const Qo=new Uint8Array(512),ju=new Uint8Array(256);(function(){let t=1;for(let r=0;r<255;r++)Qo[r]=t,ju[t]=r,t<<=1,t&256&&(t^=285);for(let r=255;r<512;r++)Qo[r]=Qo[r-255]})();$h.log=function(t){if(t<1)throw new Error("log("+t+")");return ju[t]};$h.exp=function(t){return Qo[t]};$h.mul=function(t,r){return t===0||r===0?0:Qo[ju[t]+ju[r]]};(function(e){const t=$h;e.mul=function(n,a){const i=new Uint8Array(n.length+a.length-1);for(let o=0;o<n.length;o++)for(let c=0;c<a.length;c++)i[o+c]^=t.mul(n[o],a[c]);return i},e.mod=function(n,a){let i=new Uint8Array(n);for(;i.length-a.length>=0;){const o=i[0];for(let l=0;l<a.length;l++)i[l]^=t.mul(a[l],o);let c=0;for(;c<i.length&&i[c]===0;)c++;i=i.slice(c)}return i},e.generateECPolynomial=function(n){let a=new Uint8Array([1]);for(let i=0;i<n;i++)a=e.mul(a,new Uint8Array([1,t.exp(i)]));return a}})(PS);const LS=PS;function f0(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}f0.prototype.initialize=function(t){this.degree=t,this.genPoly=LS.generateECPolynomial(this.degree)};f0.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(t.length+this.degree);r.set(t);const n=LS.mod(r,this.genPoly),a=this.degree-n.length;if(a>0){const i=new Uint8Array(this.degree);return i.set(n,a),i}return n};var qX=f0,IS={},sa={},m0={};m0.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40};var Vs={};const $S="[0-9]+",GX="[A-Z $%*+\\-./:]+";let Il="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Il=Il.replace(/u/g,"\\u");const KX="(?:(?![A-Z0-9 $%*+\\-./:]|"+Il+`)(?:.|[\r
]))+`;Vs.KANJI=new RegExp(Il,"g");Vs.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Vs.BYTE=new RegExp(KX,"g");Vs.NUMERIC=new RegExp($S,"g");Vs.ALPHANUMERIC=new RegExp(GX,"g");const QX=new RegExp("^"+Il+"$"),XX=new RegExp("^"+$S+"$"),JX=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Vs.testKanji=function(t){return QX.test(t)};Vs.testNumeric=function(t){return XX.test(t)};Vs.testAlphanumeric=function(t){return JX.test(t)};(function(e){const t=m0,r=Vs;e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(i,o){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!t.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?i.ccBits[0]:o<27?i.ccBits[1]:i.ccBits[2]},e.getBestModeForData=function(i){return r.testNumeric(i)?e.NUMERIC:r.testAlphanumeric(i)?e.ALPHANUMERIC:r.testKanji(i)?e.KANJI:e.BYTE},e.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},e.isValid=function(i){return i&&i.bit&&i.ccBits};function n(a){if(typeof a!="string")throw new Error("Param is not a string");switch(a.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+a)}}e.from=function(i,o){if(e.isValid(i))return i;try{return n(i)}catch{return o}}})(sa);(function(e){const t=Mr,r=Ih,n=Lh,a=sa,i=m0,o=7973,c=t.getBCHDigit(o);function l(f,x,v){for(let y=1;y<=40;y++)if(x<=e.getCapacity(y,v,f))return y}function d(f,x){return a.getCharCountIndicator(f,x)+4}function u(f,x){let v=0;return f.forEach(function(y){const b=d(y.mode,x);v+=b+y.getBitsLength()}),v}function h(f,x){for(let v=1;v<=40;v++)if(u(f,v)<=e.getCapacity(v,x,a.MIXED))return v}e.from=function(x,v){return i.isValid(x)?parseInt(x,10):v},e.getCapacity=function(x,v,y){if(!i.isValid(x))throw new Error("Invalid QR Code version");typeof y>"u"&&(y=a.BYTE);const b=t.getSymbolTotalCodewords(x),p=r.getTotalCodewordsCount(x,v),m=(b-p)*8;if(y===a.MIXED)return m;const j=m-d(y,x);switch(y){case a.NUMERIC:return Math.floor(j/10*3);case a.ALPHANUMERIC:return Math.floor(j/11*2);case a.KANJI:return Math.floor(j/13);case a.BYTE:default:return Math.floor(j/8)}},e.getBestVersionForData=function(x,v){let y;const b=n.from(v,n.M);if(Array.isArray(x)){if(x.length>1)return h(x,b);if(x.length===0)return 1;y=x[0]}else y=x;return l(y.mode,y.getLength(),b)},e.getEncodedBits=function(x){if(!i.isValid(x)||x<7)throw new Error("Invalid QR Code version");let v=x<<12;for(;t.getBCHDigit(v)-c>=0;)v^=o<<t.getBCHDigit(v)-c;return x<<12|v}})(IS);var FS={};const Pp=Mr,BS=1335,ZX=21522,Xb=Pp.getBCHDigit(BS);FS.getEncodedBits=function(t,r){const n=t.bit<<3|r;let a=n<<10;for(;Pp.getBCHDigit(a)-Xb>=0;)a^=BS<<Pp.getBCHDigit(a)-Xb;return(n<<10|a)^ZX};var zS={};const eJ=sa;function Ai(e){this.mode=eJ.NUMERIC,this.data=e.toString()}Ai.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};Ai.prototype.getLength=function(){return this.data.length};Ai.prototype.getBitsLength=function(){return Ai.getBitsLength(this.data.length)};Ai.prototype.write=function(t){let r,n,a;for(r=0;r+3<=this.data.length;r+=3)n=this.data.substr(r,3),a=parseInt(n,10),t.put(a,10);const i=this.data.length-r;i>0&&(n=this.data.substr(r),a=parseInt(n,10),t.put(a,i*3+1))};var tJ=Ai;const rJ=sa,qf=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Ti(e){this.mode=rJ.ALPHANUMERIC,this.data=e}Ti.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};Ti.prototype.getLength=function(){return this.data.length};Ti.prototype.getBitsLength=function(){return Ti.getBitsLength(this.data.length)};Ti.prototype.write=function(t){let r;for(r=0;r+2<=this.data.length;r+=2){let n=qf.indexOf(this.data[r])*45;n+=qf.indexOf(this.data[r+1]),t.put(n,11)}this.data.length%2&&t.put(qf.indexOf(this.data[r]),6)};var sJ=Ti;const nJ=sa;function _i(e){this.mode=nJ.BYTE,typeof e=="string"?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}_i.getBitsLength=function(t){return t*8};_i.prototype.getLength=function(){return this.data.length};_i.prototype.getBitsLength=function(){return _i.getBitsLength(this.data.length)};_i.prototype.write=function(e){for(let t=0,r=this.data.length;t<r;t++)e.put(this.data[t],8)};var aJ=_i;const iJ=sa,oJ=Mr;function Mi(e){this.mode=iJ.KANJI,this.data=e}Mi.getBitsLength=function(t){return t*13};Mi.prototype.getLength=function(){return this.data.length};Mi.prototype.getBitsLength=function(){return Mi.getBitsLength(this.data.length)};Mi.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let r=oJ.toSJIS(this.data[t]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),e.put(r,13)}};var lJ=Mi,US={exports:{}};(function(e){var t={single_source_shortest_paths:function(r,n,a){var i={},o={};o[n]=0;var c=t.PriorityQueue.make();c.push(n,0);for(var l,d,u,h,f,x,v,y,b;!c.empty();){l=c.pop(),d=l.value,h=l.cost,f=r[d]||{};for(u in f)f.hasOwnProperty(u)&&(x=f[u],v=h+x,y=o[u],b=typeof o[u]>"u",(b||y>v)&&(o[u]=v,c.push(u,v),i[u]=d))}if(typeof a<"u"&&typeof o[a]>"u"){var p=["Could not find a path from ",n," to ",a,"."].join("");throw new Error(p)}return i},extract_shortest_path_from_predecessor_list:function(r,n){for(var a=[],i=n;i;)a.push(i),r[i],i=r[i];return a.reverse(),a},find_path:function(r,n,a){var i=t.single_source_shortest_paths(r,n,a);return t.extract_shortest_path_from_predecessor_list(i,a)},PriorityQueue:{make:function(r){var n=t.PriorityQueue,a={},i;r=r||{};for(i in n)n.hasOwnProperty(i)&&(a[i]=n[i]);return a.queue=[],a.sorter=r.sorter||n.default_sorter,a},default_sorter:function(r,n){return r.cost-n.cost},push:function(r,n){var a={value:r,cost:n};this.queue.push(a),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=t})(US);var cJ=US.exports;(function(e){const t=sa,r=tJ,n=sJ,a=aJ,i=lJ,o=Vs,c=Mr,l=cJ;function d(p){return unescape(encodeURIComponent(p)).length}function u(p,m,j){const w=[];let N;for(;(N=p.exec(j))!==null;)w.push({data:N[0],index:N.index,mode:m,length:N[0].length});return w}function h(p){const m=u(o.NUMERIC,t.NUMERIC,p),j=u(o.ALPHANUMERIC,t.ALPHANUMERIC,p);let w,N;return c.isKanjiModeEnabled()?(w=u(o.BYTE,t.BYTE,p),N=u(o.KANJI,t.KANJI,p)):(w=u(o.BYTE_KANJI,t.BYTE,p),N=[]),m.concat(j,w,N).sort(function(S,E){return S.index-E.index}).map(function(S){return{data:S.data,mode:S.mode,length:S.length}})}function f(p,m){switch(m){case t.NUMERIC:return r.getBitsLength(p);case t.ALPHANUMERIC:return n.getBitsLength(p);case t.KANJI:return i.getBitsLength(p);case t.BYTE:return a.getBitsLength(p)}}function x(p){return p.reduce(function(m,j){const w=m.length-1>=0?m[m.length-1]:null;return w&&w.mode===j.mode?(m[m.length-1].data+=j.data,m):(m.push(j),m)},[])}function v(p){const m=[];for(let j=0;j<p.length;j++){const w=p[j];switch(w.mode){case t.NUMERIC:m.push([w,{data:w.data,mode:t.ALPHANUMERIC,length:w.length},{data:w.data,mode:t.BYTE,length:w.length}]);break;case t.ALPHANUMERIC:m.push([w,{data:w.data,mode:t.BYTE,length:w.length}]);break;case t.KANJI:m.push([w,{data:w.data,mode:t.BYTE,length:d(w.data)}]);break;case t.BYTE:m.push([{data:w.data,mode:t.BYTE,length:d(w.data)}])}}return m}function y(p,m){const j={},w={start:{}};let N=["start"];for(let C=0;C<p.length;C++){const S=p[C],E=[];for(let k=0;k<S.length;k++){const T=S[k],D=""+C+k;E.push(D),j[D]={node:T,lastCount:0},w[D]={};for(let $=0;$<N.length;$++){const _=N[$];j[_]&&j[_].node.mode===T.mode?(w[_][D]=f(j[_].lastCount+T.length,T.mode)-f(j[_].lastCount,T.mode),j[_].lastCount+=T.length):(j[_]&&(j[_].lastCount=T.length),w[_][D]=f(T.length,T.mode)+4+t.getCharCountIndicator(T.mode,m))}}N=E}for(let C=0;C<N.length;C++)w[N[C]].end=0;return{map:w,table:j}}function b(p,m){let j;const w=t.getBestModeForData(p);if(j=t.from(m,w),j!==t.BYTE&&j.bit<w.bit)throw new Error('"'+p+'" cannot be encoded with mode '+t.toString(j)+`.
 Suggested mode is: `+t.toString(w));switch(j===t.KANJI&&!c.isKanjiModeEnabled()&&(j=t.BYTE),j){case t.NUMERIC:return new r(p);case t.ALPHANUMERIC:return new n(p);case t.KANJI:return new i(p);case t.BYTE:return new a(p)}}e.fromArray=function(m){return m.reduce(function(j,w){return typeof w=="string"?j.push(b(w,null)):w.data&&j.push(b(w.data,w.mode)),j},[])},e.fromString=function(m,j){const w=h(m,c.isKanjiModeEnabled()),N=v(w),C=y(N,j),S=l.find_path(C.map,"start","end"),E=[];for(let k=1;k<S.length-1;k++)E.push(C.table[S[k]].node);return e.fromArray(x(E))},e.rawSplit=function(m){return e.fromArray(h(m,c.isKanjiModeEnabled()))}})(zS);const Fh=Mr,Gf=Lh,dJ=HX,uJ=WX,hJ=MS,fJ=OS,Lp=RS,Ip=Ih,mJ=qX,wu=IS,pJ=FS,gJ=sa,Kf=zS;function xJ(e,t){const r=e.size,n=fJ.getPositions(t);for(let a=0;a<n.length;a++){const i=n[a][0],o=n[a][1];for(let c=-1;c<=7;c++)if(!(i+c<=-1||r<=i+c))for(let l=-1;l<=7;l++)o+l<=-1||r<=o+l||(c>=0&&c<=6&&(l===0||l===6)||l>=0&&l<=6&&(c===0||c===6)||c>=2&&c<=4&&l>=2&&l<=4?e.set(i+c,o+l,!0,!0):e.set(i+c,o+l,!1,!0))}}function vJ(e){const t=e.size;for(let r=8;r<t-8;r++){const n=r%2===0;e.set(r,6,n,!0),e.set(6,r,n,!0)}}function yJ(e,t){const r=hJ.getPositions(t);for(let n=0;n<r.length;n++){const a=r[n][0],i=r[n][1];for(let o=-2;o<=2;o++)for(let c=-2;c<=2;c++)o===-2||o===2||c===-2||c===2||o===0&&c===0?e.set(a+o,i+c,!0,!0):e.set(a+o,i+c,!1,!0)}}function bJ(e,t){const r=e.size,n=wu.getEncodedBits(t);let a,i,o;for(let c=0;c<18;c++)a=Math.floor(c/3),i=c%3+r-8-3,o=(n>>c&1)===1,e.set(a,i,o,!0),e.set(i,a,o,!0)}function Qf(e,t,r){const n=e.size,a=pJ.getEncodedBits(t,r);let i,o;for(i=0;i<15;i++)o=(a>>i&1)===1,i<6?e.set(i,8,o,!0):i<8?e.set(i+1,8,o,!0):e.set(n-15+i,8,o,!0),i<8?e.set(8,n-i-1,o,!0):i<9?e.set(8,15-i-1+1,o,!0):e.set(8,15-i-1,o,!0);e.set(n-8,8,1,!0)}function jJ(e,t){const r=e.size;let n=-1,a=r-1,i=7,o=0;for(let c=r-1;c>0;c-=2)for(c===6&&c--;;){for(let l=0;l<2;l++)if(!e.isReserved(a,c-l)){let d=!1;o<t.length&&(d=(t[o]>>>i&1)===1),e.set(a,c-l,d),i--,i===-1&&(o++,i=7)}if(a+=n,a<0||r<=a){a-=n,n=-n;break}}}function wJ(e,t,r){const n=new dJ;r.forEach(function(l){n.put(l.mode.bit,4),n.put(l.getLength(),gJ.getCharCountIndicator(l.mode,e)),l.write(n)});const a=Fh.getSymbolTotalCodewords(e),i=Ip.getTotalCodewordsCount(e,t),o=(a-i)*8;for(n.getLengthInBits()+4<=o&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);const c=(o-n.getLengthInBits())/8;for(let l=0;l<c;l++)n.put(l%2?17:236,8);return NJ(n,e,t)}function NJ(e,t,r){const n=Fh.getSymbolTotalCodewords(t),a=Ip.getTotalCodewordsCount(t,r),i=n-a,o=Ip.getBlocksCount(t,r),c=n%o,l=o-c,d=Math.floor(n/o),u=Math.floor(i/o),h=u+1,f=d-u,x=new mJ(f);let v=0;const y=new Array(o),b=new Array(o);let p=0;const m=new Uint8Array(e.buffer);for(let S=0;S<o;S++){const E=S<l?u:h;y[S]=m.slice(v,v+E),b[S]=x.encode(y[S]),v+=E,p=Math.max(p,E)}const j=new Uint8Array(n);let w=0,N,C;for(N=0;N<p;N++)for(C=0;C<o;C++)N<y[C].length&&(j[w++]=y[C][N]);for(N=0;N<f;N++)for(C=0;C<o;C++)j[w++]=b[C][N];return j}function CJ(e,t,r,n){let a;if(Array.isArray(e))a=Kf.fromArray(e);else if(typeof e=="string"){let d=t;if(!d){const u=Kf.rawSplit(e);d=wu.getBestVersionForData(u,r)}a=Kf.fromString(e,d||40)}else throw new Error("Invalid data");const i=wu.getBestVersionForData(a,r);if(!i)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=i;else if(t<i)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+i+`.
`);const o=wJ(t,r,a),c=Fh.getSymbolSize(t),l=new uJ(c);return xJ(l,t),vJ(l),yJ(l,t),Qf(l,r,0),t>=7&&bJ(l,t),jJ(l,o),isNaN(n)&&(n=Lp.getBestMask(l,Qf.bind(null,l,r))),Lp.applyMask(n,l),Qf(l,r,n),{modules:l,version:t,errorCorrectionLevel:r,maskPattern:n,segments:a}}TS.create=function(t,r){if(typeof t>"u"||t==="")throw new Error("No input text");let n=Gf.M,a,i;return typeof r<"u"&&(n=Gf.from(r.errorCorrectionLevel,Gf.M),a=wu.from(r.version),i=Lp.from(r.maskPattern),r.toSJISFunc&&Fh.setToSJISFunction(r.toSJISFunc)),CJ(t,a,n,i)};var VS={},p0={};(function(e){function t(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let n=r.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+r);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(i){return[i,i]}))),n.length===6&&n.push("F","F");const a=parseInt(n.join(""),16);return{r:a>>24&255,g:a>>16&255,b:a>>8&255,a:a&255,hex:"#"+n.slice(0,6).join("")}}e.getOptions=function(n){n||(n={}),n.color||(n.color={});const a=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,i=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:i,scale:i?4:o,margin:a,color:{dark:t(n.color.dark||"#000000ff"),light:t(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},e.getScale=function(n,a){return a.width&&a.width>=n+a.margin*2?a.width/(n+a.margin*2):a.scale},e.getImageWidth=function(n,a){const i=e.getScale(n,a);return Math.floor((n+a.margin*2)*i)},e.qrToImageData=function(n,a,i){const o=a.modules.size,c=a.modules.data,l=e.getScale(o,i),d=Math.floor((o+i.margin*2)*l),u=i.margin*l,h=[i.color.light,i.color.dark];for(let f=0;f<d;f++)for(let x=0;x<d;x++){let v=(f*d+x)*4,y=i.color.light;if(f>=u&&x>=u&&f<d-u&&x<d-u){const b=Math.floor((f-u)/l),p=Math.floor((x-u)/l);y=h[c[b*o+p]?1:0]}n[v++]=y.r,n[v++]=y.g,n[v++]=y.b,n[v]=y.a}}})(p0);(function(e){const t=p0;function r(a,i,o){a.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=o,i.width=o,i.style.height=o+"px",i.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(i,o,c){let l=c,d=o;typeof l>"u"&&(!o||!o.getContext)&&(l=o,o=void 0),o||(d=n()),l=t.getOptions(l);const u=t.getImageWidth(i.modules.size,l),h=d.getContext("2d"),f=h.createImageData(u,u);return t.qrToImageData(f.data,i,l),r(h,d,u),h.putImageData(f,0,0),d},e.renderToDataURL=function(i,o,c){let l=c;typeof l>"u"&&(!o||!o.getContext)&&(l=o,o=void 0),l||(l={});const d=e.render(i,o,l),u=l.type||"image/png",h=l.rendererOpts||{};return d.toDataURL(u,h.quality)}})(VS);var HS={};const SJ=p0;function Jb(e,t){const r=e.a/255,n=t+'="'+e.hex+'"';return r<1?n+" "+t+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function Xf(e,t,r){let n=e+t;return typeof r<"u"&&(n+=" "+r),n}function EJ(e,t,r){let n="",a=0,i=!1,o=0;for(let c=0;c<e.length;c++){const l=Math.floor(c%t),d=Math.floor(c/t);!l&&!i&&(i=!0),e[c]?(o++,c>0&&l>0&&e[c-1]||(n+=i?Xf("M",l+r,.5+d+r):Xf("m",a,0),a=0,i=!1),l+1<t&&e[c+1]||(n+=Xf("h",o),o=0)):a++}return n}HS.render=function(t,r,n){const a=SJ.getOptions(r),i=t.modules.size,o=t.modules.data,c=i+a.margin*2,l=a.color.light.a?"<path "+Jb(a.color.light,"fill")+' d="M0 0h'+c+"v"+c+'H0z"/>':"",d="<path "+Jb(a.color.dark,"stroke")+' d="'+EJ(o,i,a.margin)+'"/>',u='viewBox="0 0 '+c+" "+c+'"',f='<svg xmlns="http://www.w3.org/2000/svg" '+(a.width?'width="'+a.width+'" height="'+a.width+'" ':"")+u+' shape-rendering="crispEdges">'+l+d+`</svg>
`;return typeof n=="function"&&n(null,f),f};const kJ=UX,$p=TS,WS=VS,DJ=HS;function g0(e,t,r,n,a){const i=[].slice.call(arguments,1),o=i.length,c=typeof i[o-1]=="function";if(!c&&!kJ())throw new Error("Callback required as last argument");if(c){if(o<2)throw new Error("Too few arguments provided");o===2?(a=r,r=t,t=n=void 0):o===3&&(t.getContext&&typeof a>"u"?(a=n,n=void 0):(a=n,n=r,r=t,t=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(r=t,t=n=void 0):o===2&&!t.getContext&&(n=r,r=t,t=void 0),new Promise(function(l,d){try{const u=$p.create(r,n);l(e(u,t,n))}catch(u){d(u)}})}try{const l=$p.create(r,n);a(null,e(l,t,n))}catch(l){a(l)}}uc.create=$p.create;uc.toCanvas=g0.bind(null,WS.render);uc.toDataURL=g0.bind(null,WS.renderToDataURL);uc.toString=g0.bind(null,function(e,t,r){return DJ.render(e,r)});const AJ=({isOpen:e,onClose:t,invoiceId:r,invoiceNumber:n,onSuccess:a})=>{const[i,o]=g.useState("FNMT"),[c,l]=g.useState(!1),[d,u]=g.useState(null),[h,f]=g.useState(null),[x,v]=g.useState(null),[y,b]=g.useState(null);g.useEffect(()=>{e&&p()},[e]);const p=async()=>{try{const w=await X.get("/invoices/autofirma/status");u(w.data)}catch(w){console.error("Error checking AutoFirma status:",w),u({available:!1,status:"error",message:"Error verificando estado de AutoFirma"})}},m=async()=>{var w,N;l(!0),f(null),v(null),b(null);try{console.log("Iniciando firma digital de factura:",n);const C=await X.post(`/invoices/${r}/sign-pdf`,{certificateType:i});C.data.success?(v("✅ Factura firmada digitalmente con éxito"),b(C.data.signatureInfo),a&&C.data.downloadUrl&&a(C.data.downloadUrl),setTimeout(()=>{t()},3e3)):f("Error en la firma digital")}catch(C){console.error("Error signing PDF:",C),f(((N=(w=C.response)==null?void 0:w.data)==null?void 0:N.message)||C.message||"Error en firma digital")}finally{l(!1)}},j=async()=>{try{const w=await X.get(`/invoices/${r}/signed-pdf`,{responseType:"blob"}),N=new Blob([w.data],{type:"application/pdf"}),C=window.URL.createObjectURL(N),S=document.createElement("a");S.href=C,S.download=`factura_firmada_${n}.pdf`,document.body.appendChild(S),S.click(),document.body.removeChild(S),window.URL.revokeObjectURL(C)}catch(w){console.error("Error downloading signed PDF:",w),f("Error al descargar el PDF firmado")}};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"🔐 Firma Digital de Factura"}),s.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"📄 Factura a firmar"}),s.jsxs("p",{className:"text-blue-700",children:["Número: ",n]}),s.jsxs("p",{className:"text-blue-700",children:["ID: ",r]})]}),d&&s.jsxs("div",{className:`p-4 rounded-lg ${d.available?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[s.jsxs("h3",{className:"font-semibold mb-2 flex items-center",children:[d.available?"✅":"❌"," Estado de AutoFirma"]}),s.jsx("p",{className:`text-sm ${d.available?"text-green-700":"text-red-700"}`,children:d.message}),d.autofirma&&s.jsxs("div",{className:"mt-3 space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-xs text-gray-600",children:"📦 Instalación:"}),s.jsx("span",{className:`text-xs font-medium ${d.autofirma.installed?"text-green-600":"text-red-600"}`,children:d.autofirma.installed?"✅ Instalado":"❌ No instalado"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-xs text-gray-600",children:"🔄 Ejecución:"}),s.jsx("span",{className:`text-xs font-medium ${d.autofirma.running?"text-green-600":"text-red-600"}`,children:d.autofirma.running?"✅ Ejecutándose":"❌ No ejecutándose"})]}),d.autofirma.installation&&!d.autofirma.installed&&s.jsxs("div",{className:"text-xs text-red-600 bg-red-100 p-2 rounded",children:[s.jsx("strong",{children:"Instalación:"})," ",d.autofirma.installation.message]}),d.autofirma.runningInfo&&!d.autofirma.running&&s.jsxs("div",{className:"text-xs text-red-600 bg-red-100 p-2 rounded",children:[s.jsx("strong",{children:"Ejecución:"})," ",d.autofirma.runningInfo.message]}),d.autofirma.error&&s.jsxs("div",{className:"text-xs text-red-600 bg-red-100 p-2 rounded",children:[s.jsx("strong",{children:"Error:"})," ",d.autofirma.error]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"🏛️ Tipo de Certificado"}),s.jsxs("select",{value:i,onChange:w=>o(w.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:!(d!=null&&d.available)||c,children:[s.jsx("option",{value:"FNMT",children:"Certificado FNMT"}),s.jsx("option",{value:"DNIe",children:"DNI Electrónico"}),s.jsx("option",{value:"Other",children:"Otro certificado"})]})]}),h&&s.jsx("div",{className:"bg-red-50 border border-red-200 p-4 rounded-lg",children:s.jsx("p",{className:"text-red-700 text-sm",children:h})}),x&&s.jsx("div",{className:"bg-green-50 border border-green-200 p-4 rounded-lg",children:s.jsx("p",{className:"text-green-700 text-sm",children:x})}),y&&s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"📋 Información de la Firma"}),s.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Firmante:"})," ",y.signer]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Certificado:"})," ",y.certificate]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Algoritmo:"})," ",y.signatureAlgorithm]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Fecha:"})," ",new Date(y.timestamp).toLocaleString("es-ES")]})]})]}),s.jsxs("div",{className:"flex space-x-3 pt-4",children:[s.jsx("button",{onClick:t,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",disabled:c,children:"Cancelar"}),y?s.jsx("button",{onClick:j,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"📥 Descargar PDF Firmado"}):s.jsx("button",{onClick:m,disabled:!(d!=null&&d.available)||c,className:`flex-1 px-4 py-2 rounded-lg transition-colors ${!(d!=null&&d.available)||c?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:c?s.jsxs("span",{className:"flex items-center justify-center",children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Firmando..."]}):"🔐 Firmar Digitalmente"})]}),!(d!=null&&d.available)&&s.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 p-4 rounded-lg",children:[s.jsx("h3",{className:"font-semibold text-yellow-800 mb-2",children:"⚠️ AutoFirma no disponible"}),(d==null?void 0:d.autofirma)&&s.jsxs("div",{className:"mb-3",children:[!d.autofirma.installed&&s.jsxs("div",{className:"text-yellow-700 text-sm mb-2",children:[s.jsx("strong",{children:"📦 AutoFirma no está instalado:"}),s.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[s.jsxs("li",{children:["Descarga AutoFirma desde: ",s.jsx("a",{href:"https://firmaelectronica.gob.es/Home/Descargas.html",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"https://firmaelectronica.gob.es/Home/Descargas.html"})]}),s.jsx("li",{children:"Instala AutoFirma en tu sistema"}),s.jsx("li",{children:"Reinicia tu navegador después de la instalación"})]})]}),d.autofirma.installed&&!d.autofirma.running&&s.jsxs("div",{className:"text-yellow-700 text-sm mb-2",children:[s.jsx("strong",{children:"🔄 AutoFirma no está ejecutándose:"}),s.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[s.jsx("li",{children:"Abre AutoFirma manualmente desde el menú de inicio"}),s.jsx("li",{children:"Asegúrate de que esté ejecutándose en segundo plano"}),s.jsx("li",{children:"Verifica que no haya errores en AutoFirma"})]})]}),d.autofirma.error&&s.jsxs("div",{className:"text-red-700 text-sm mb-2",children:[s.jsx("strong",{children:"❌ Error detectado:"})," ",d.autofirma.error]})]}),s.jsxs("div",{className:"border-t border-yellow-200 pt-3",children:[s.jsx("p",{className:"text-yellow-700 text-sm mb-2",children:s.jsx("strong",{children:"Pasos adicionales:"})}),s.jsxs("ul",{className:"text-yellow-700 text-sm list-disc list-inside space-y-1",children:[s.jsxs("li",{children:["Ejecutar el servidor AutoFirma HTTP: ",s.jsx("code",{className:"bg-yellow-100 px-1 rounded",children:"node autofirma-http-server.js"})]}),s.jsx("li",{children:"Tener un certificado digital válido (FNMT, DNIe, etc.)"}),s.jsx("li",{children:"Verificar que el certificado esté instalado correctamente"})]})]}),s.jsxs("div",{className:"mt-3 flex gap-2",children:[s.jsx("button",{onClick:p,className:"text-yellow-800 underline text-sm hover:text-yellow-900",children:"🔄 Verificar de nuevo"}),s.jsx("button",{onClick:()=>window.open("https://firmaelectronica.gob.es/Home/Descargas.html","_blank"),className:"text-blue-800 underline text-sm hover:text-blue-900",children:"📥 Descargar AutoFirma"})]})]})]})]})}):null},qc={numeroFactura:"",fechaFactura:"",tipoFactura:"F",receptorId:"",importeTotal:0,baseImponible:0,cuotaIVA:0,tipoIVA:21,regimenIvaEmisor:"General",claveOperacion:"01",metodoPago:"TRANSFERENCIA",fechaOperacion:"",items:[{description:"",quantity:1,unitPrice:0,total:0}],aplicarIVA:!0,retencion:"",descuento:0},TJ=()=>{const{user:e}=Ee(),t=localStorage.getItem("token"),[r,n]=g.useState([]),[a,i]=g.useState(!0),[o,c]=g.useState(null),[l,d]=g.useState(!1),[u,h]=g.useState(null),[f,x]=g.useState(qc),[v,y]=g.useState(null),[b,p]=g.useState(""),[m,j]=g.useState(""),[w,N]=g.useState([]),[C,S]=g.useState([]),[E,k]=g.useState(null),[T,D]=g.useState(null),[$,_]=g.useState(!1),[A,B]=g.useState(null),[P,M]=g.useState(null),[R,W]=g.useState([]),[V,z]=g.useState(""),[H,G]=g.useState(null),[Z,F]=g.useState([]),[U,Y]=g.useState([]),[Q,de]=g.useState([]),[q,ue]=g.useState([]),[oe,ye]=g.useState(null),[$e,st]=g.useState(null),[J,me]=g.useState(!1),[_e,ze]=g.useState(!1),[Ce,Pe]=g.useState(null),He=g.useRef(null),zt=g.useRef(null),es=g.useRef(null),js=g.useRef([]),[Hs,Ke]=g.useState({}),Xt=w.find(O=>{var ae;return((ae=O.user)==null?void 0:ae.id)===f.receptorId}),or=Xt==null?void 0:Xt.id,[xn,L]=g.useState(""),[fe,ke]=g.useState(""),xe=O=>O?new Date(O).toISOString().split("T")[0]:void 0;g.useEffect(()=>{Fe(),Ue()},[]),g.useEffect(()=>{(async()=>{if(f.receptorId&&f.expedienteId)try{const ae=localStorage.getItem("token");if(!ae)throw new Error("No token found");const ne=await TX(ae);console.log("Provisiones recibidas:",ne),console.log("Buscando clientProfileId:",or,"expedienteId:",f.expedienteId);const pe=ne.filter(ie=>ie.clientId===or&&ie.expedienteId===f.expedienteId&&(!ie.invoiceId||ie.invoiceId===f.id));console.log("Provisiones filtradas:",pe),pe.length>0?(G(pe[0]),Y(pe)):(G(null),Y([]))}catch{G(null),Y([])}else G(null),Y([])})()},[f.receptorId,f.expedienteId,or,f.id]),g.useEffect(()=>{(async()=>{if(f.receptorId&&f.expedienteId&&or)try{const ae=localStorage.getItem("token"),ne=await _X(or??"",f.expedienteId??"",ae??"");if(f.id){const pe=f.provisionFondos||[],ge=[...ne,...pe].filter((Se,Nt,rs)=>Nt===rs.findIndex(jr=>jr.id===Se.id));de(ge)}else de(ne)}catch{de([])}else de([])})()},[f.receptorId,f.expedienteId,or,f.id]);const Fe=async()=>{i(!0);try{if(!t)throw new Error("No token available");const O={};xn&&(O.clientId=xn),fe&&(O.paymentDate=fe);const ae=await X.get("/invoices",{headers:{Authorization:`Bearer ${t}`},params:O});n(ae.data)}catch{c("Error al cargar las facturas")}finally{i(!1)}},Ue=async()=>{try{if(!t)throw new Error("No token available");const O=await kX(t);N(O)}catch{N([])}},ot=()=>{x(qc),ue([]),Y([]),G(null),d(!0)},nt=O=>{const{name:ae,value:ne}=O.target;x(pe=>({...pe,[ae]:ne})),Hs[ae]&&Ke(pe=>({...pe,[ae]:!1}))},no=async O=>{nt(O);const ae=O.target.value;if(x(ne=>({...ne,expedienteId:""})),ae)try{const ne=localStorage.getItem("token"),ie=(await X.get("/cases",{headers:{Authorization:`Bearer ${ne}`}})).data.filter(ge=>{var Se,Nt;return((Nt=(Se=ge.client)==null?void 0:Se.user)==null?void 0:Nt.id)===ae||ge.clientId===ae});F(ie)}catch{F([])}else F([])},ao=(O,ae,ne)=>{var pe,ie;x(ge=>{const Se=[...ge.items];return Se[O][ae]=ne,Se[O].total=Se[O].quantity*Se[O].unitPrice,{...ge,items:Se}}),(ie=(pe=Hs.items)==null?void 0:pe[O])!=null&&ie[ae]&&Ke(ge=>{var Se;return{...ge,items:{...ge.items,[O]:{...(Se=ge.items)==null?void 0:Se[O],[ae]:!1}}}})},Bh=()=>{x(O=>({...O,items:[...O.items,{description:"",quantity:1,unitPrice:0,total:0}]}))},_t=async O=>{if(O.preventDefault(),k(null),D(null),_(!0),!f.receptorId||!f.fechaOperacion||!f.items.length){k("Completa todos los campos obligatorios."),_(!1);return}if(f.items.some(ae=>!ae.description||ae.quantity<=0||ae.unitPrice===void 0)){k("Todos los conceptos deben tener descripción, cantidad y precio válidos."),_(!1);return}try{const{emisorId:ae,fechaFactura:ne,importeTotal:pe,baseImponible:ie,cuotaIVA:ge,...Se}=f,Nt={...Se,descuento:f.descuento===""||f.descuento==null?0:Number(f.descuento),retencion:f.retencion===""||f.retencion==null?0:Number(f.retencion),tipoIVA:f.tipoIVA===""||f.tipoIVA==null?21:Number(f.tipoIVA),estado:f.estado||"emitida",provisionIds:q,fechaOperacion:xe(f.fechaOperacion),paymentDate:f.paymentDate?xe(f.paymentDate):void 0};console.log("FRONTEND - provisionesSeleccionadas:",q),console.log("FRONTEND - facturaData a enviar:",Nt),await CX(Nt,t??""),D("✅ Factura creada correctamente."),d(!1),Fe(),setTimeout(()=>D(null),5e3)}catch(ae){console.error("Error al crear factura:",ae),k("❌ Error al crear la factura. Verifica los datos e intenta de nuevo.")}finally{_(!1)}},Jt=async O=>{var ae;if(O.preventDefault(),k(null),D(null),Ke({}),_(!0),!f.receptorId){k("Debes seleccionar un cliente."),Ke({cliente:!0}),_(!1),setTimeout(()=>{var ne;return(ne=He.current)==null?void 0:ne.focus()},100);return}if(!f.expedienteId){k("Debes seleccionar un expediente."),Ke({expediente:!0}),_(!1),setTimeout(()=>{var ne;return(ne=zt.current)==null?void 0:ne.focus()},100);return}if(!f.fechaOperacion){k("Debes indicar la fecha de operación."),Ke({fechaOperacion:!0}),_(!1),setTimeout(()=>{var ne;return(ne=es.current)==null?void 0:ne.focus()},100);return}if(!f.items.length){k("Debes añadir al menos un concepto."),_(!1);return}for(let ne=0;ne<f.items.length;ne++){const pe=f.items[ne];if(!pe.description){k("Todos los conceptos deben tener descripción."),Ke({items:{[ne]:{description:!0}}}),_(!1),setTimeout(()=>{var ie,ge;return(ge=(ie=js.current[ne])==null?void 0:ie.description)==null?void 0:ge.focus()},100);return}if(!pe.quantity||pe.quantity<=0){k("Todos los conceptos deben tener cantidad válida."),Ke({items:{[ne]:{quantity:!0}}}),_(!1),setTimeout(()=>{var ie,ge;return(ge=(ie=js.current[ne])==null?void 0:ie.quantity)==null?void 0:ge.focus()},100);return}if(pe.unitPrice===void 0||pe.unitPrice===null){k("Todos los conceptos deben tener precio unitario."),Ke({items:{[ne]:{unitPrice:!0}}}),_(!1),setTimeout(()=>{var ie,ge;return(ge=(ie=js.current[ne])==null?void 0:ie.unitPrice)==null?void 0:ge.focus()},100);return}}try{const{id:ne,emisorId:pe,fechaFactura:ie,importeTotal:ge,baseImponible:Se,cuotaIVA:Nt,xml:rs,xmlFirmado:jr,selloTiempo:io,createdAt:oo,updatedAt:zh,emisor:ut,receptor:ss,expediente:Ba,provisionFondos:Ws,numeroFactura:Uh,tipoFactura:fc,qrData:lo,...yt}=f,co=yt.items.map(YS=>{const{id:UJ,invoiceId:VJ,total:HJ,...qS}=YS;return qS}),x0={receptorId:yt.receptorId,expedienteId:yt.expedienteId,fechaOperacion:xe(f.fechaOperacion),metodoPago:((ae=yt.metodoPago)==null?void 0:ae.toLowerCase())||"transferencia",regimenIvaEmisor:yt.regimenIvaEmisor,claveOperacion:yt.claveOperacion,tipoIVA:f.tipoIVA===""||f.tipoIVA==null?21:Number(f.tipoIVA),aplicarIVA:yt.aplicarIVA!==!1,descuento:f.descuento===""||f.descuento==null?0:Number(f.descuento),retencion:f.retencion===""||f.retencion==null?0:Number(f.retencion),items:co,provisionIds:q,estado:f.estado||"emitida",motivoAnulacion:yt.motivoAnulacion||null,paymentDate:f.paymentDate?xe(f.paymentDate):void 0};console.log("Datos a enviar al backend:",x0),console.log("Datos originales del form:",f),console.log("Items limpios:",co),await SX(f.id,x0,t??""),D("✅ Factura actualizada correctamente."),k(null),Fe(),setTimeout(()=>{D(null),d(!1)},3e3)}catch(ne){if(console.error("Error al actualizar factura:",ne),D(null),ne.response&&ne.response.data&&ne.response.data.message){const pe=Array.isArray(ne.response.data.message)?ne.response.data.message:[ne.response.data.message];let ie=`❌ Error al actualizar la factura:

`,ge=[];pe.forEach(Se=>{Se.includes("numeroFactura should not exist")?(ie+=`• No puedes editar el número de factura
`,ge.push("El número de factura se asigna automáticamente")):Se.includes("tipoFactura should not exist")?(ie+=`• No puedes editar el tipo de factura
`,ge.push("El tipo de factura no se puede modificar después de la creación")):Se.includes("qrData should not exist")?(ie+=`• El código QR se genera automáticamente
`,ge.push("El código QR se calcula automáticamente")):Se.includes("total should not exist")?(ie+=`• Los totales de los conceptos se calculan automáticamente
`,ge.push("No edites manualmente los totales de los conceptos")):ie+=`• ${Se}
`}),ge.length>0&&(ie+=`
💡 Sugerencias:
`,ge.forEach(Se=>{ie+=`• ${Se}
`})),k(ie)}else k("❌ Error al actualizar la factura. Verifica los datos e intenta de nuevo.");if(ne.response&&ne.response.data&&ne.response.data.message){const pe=Array.isArray(ne.response.data.message)?ne.response.data.message:[ne.response.data.message];pe.some(ie=>ie.includes("fechaOperacion"))?(Ke({fechaOperacion:!0}),setTimeout(()=>{var ie;return(ie=es.current)==null?void 0:ie.focus()},100)):pe.some(ie=>ie.includes("receptorId"))?(Ke({cliente:!0}),setTimeout(()=>{var ie;return(ie=He.current)==null?void 0:ie.focus()},100)):pe.some(ie=>ie.includes("expedienteId"))&&(Ke({expediente:!0}),setTimeout(()=>{var ie;return(ie=zt.current)==null?void 0:ie.focus()},100))}}finally{_(!1)}},Zt=()=>s.jsxs("div",{className:"mb-6 p-4 bg-blue-50 border-l-4 border-blue-400 rounded",children:[s.jsx("h3",{className:"font-bold mb-2 text-blue-800",id:"firma-electronica-heading",children:"¿Cómo funciona la firma electrónica de facturas?"}),s.jsxs("ol",{className:"list-decimal pl-6 mb-2 text-sm text-blue-900",children:[s.jsx("li",{children:"Selecciona una o varias facturas pendientes de firma en la tabla."}),s.jsxs("li",{children:["Pulsa ",s.jsx("b",{children:'"Firmar electrónicamente"'})," para iniciar el proceso."]}),s.jsxs("li",{children:["El sistema generará el XML Facturae y lo enviará a ",s.jsx("b",{children:"Autofirma"})," (debes tenerlo instalado y abierto)."]}),s.jsx("li",{children:"Autofirma te pedirá seleccionar tu certificado y firmará el XML localmente, sin exponer tu clave privada."}),s.jsx("li",{children:"El XML firmado se subirá automáticamente y la factura quedará firmada digitalmente."})]}),s.jsxs("div",{className:"text-xs text-blue-700",children:[s.jsx("b",{children:"Seguridad:"})," Tu clave privada ",s.jsx("b",{children:"nunca se almacena"})," en el sistema. Si subes archivos PEM, solo se usan en memoria para la firma y se descartan después.",s.jsx("br",{}),s.jsx("b",{children:"¿Qué es Autofirma?"})," Es una aplicación oficial del Gobierno de España para firmar documentos electrónicos con tu certificado digital.",s.jsx("br",{}),s.jsx("b",{children:"¿Problemas?"})," Si no tienes Autofirma, puedes descargarlo en ",s.jsx("a",{href:"https://firmaelectronica.gob.es/Home/Descargas.html",target:"_blank",rel:"noopener noreferrer",className:"underline text-blue-600",children:"firmaelectronica.gob.es"}),"."]}),s.jsxs("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded",children:[s.jsx("h4",{className:"font-semibold text-yellow-800 mb-2",children:"⚠️ Requisitos para AutoFirma:"}),s.jsxs("ul",{className:"text-xs text-yellow-700 space-y-1",children:[s.jsxs("li",{children:["• ",s.jsx("b",{children:"Java 8 o superior"})," instalado en tu ordenador"]}),s.jsxs("li",{children:["• ",s.jsx("b",{children:"AutoFirma"})," descargado e instalado desde ",s.jsx("a",{href:"https://firmaelectronica.gob.es/Home/Descargas.html",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"firmaelectronica.gob.es"})]}),s.jsxs("li",{children:["• ",s.jsx("b",{children:"Certificado digital"})," válido (DNIe, certificado de la FNMT, etc.)"]}),s.jsxs("li",{children:["• ",s.jsx("b",{children:"AutoFirma abierto"})," antes de intentar la firma"]})]}),s.jsxs("div",{className:"mt-2 text-xs text-yellow-600",children:[s.jsx("b",{children:"Si tienes problemas:"}),s.jsxs("ol",{className:"list-decimal pl-4 mt-1",children:[s.jsxs("li",{children:["Verifica que Java esté instalado: ",s.jsx("code",{children:"java -version"})," en la terminal"]}),s.jsx("li",{children:"Abre AutoFirma manualmente antes de intentar la firma"}),s.jsx("li",{children:"Comprueba que tu certificado digital esté válido"}),s.jsx("li",{children:"Si persiste el error, contacta con soporte técnico"})]})]})]})]}),ts=()=>{try{const O=document.createElement("a");O.href="afirma://service?op=launch",O.style.display="none",document.body.appendChild(O),O.click(),document.body.removeChild(O),z("Intentando abrir AutoFirma... Si no se abre automáticamente, por favor ábrelo manualmente."),setTimeout(()=>{z(`Si AutoFirma no se abrió, por favor:
1. Descárgalo desde https://firmaelectronica.gob.es
2. Instálalo y ábrelo manualmente
3. Intenta la firma nuevamente`)},3e3)}catch(O){console.error("Error abriendo AutoFirma:",O),z("Error abriendo AutoFirma. Por favor ábrelo manualmente.")}},lr=async()=>{if(R.length===0){c("❌ No hay facturas seleccionadas para firmar."),setTimeout(()=>c(null),5e3);return}ts(),z("Generando XML de las facturas seleccionadas...");try{const O=await fetch("/api/invoices/generate-xml",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({ids:R})});if(!O.ok){const ne=await O.json().catch(()=>({}));throw new Error(ne.message||"Error generando XML")}const ae=await O.json();for(const{id:ne,xml:pe}of ae){z(`Firmando factura ${ne} con Autofirma...`);try{const ie=new AbortController,ge=setTimeout(()=>ie.abort(),3e4),Se=await fetch("http://127.0.0.1:8080/afirma-signature-http",{method:"POST",body:new Blob([pe],{type:"text/xml"}),headers:{"Content-Type":"application/xml"},signal:ie.signal});if(clearTimeout(ge),!Se.ok){const jr=await Se.text();throw new Error(`Error en Autofirma: ${Se.status} - ${jr}`)}const Nt=await Se.text();z(`Subiendo XML firmado de la factura ${ne}...`);const rs=await fetch("/api/invoices/upload-signed",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({id:ne,signedXml:Nt})});if(!rs.ok){const jr=await rs.json().catch(()=>({}));throw new Error(jr.message||"Error subiendo XML firmado")}}catch(ie){throw ie.name==="AbortError"?new Error("Timeout: AutoFirma no respondió en 30 segundos. Verifica que esté instalado y ejecutándose."):ie.message.includes("ERR_CONNECTION_REFUSED")?new Error(`AutoFirma no está ejecutándose. Por favor:
1. Instala AutoFirma desde https://firmaelectronica.gob.es
2. Abre AutoFirma manualmente
3. Intenta la firma nuevamente`):ie}}z("¡Facturas firmadas correctamente!"),W([]),Fe(),D("🔐 Facturas firmadas electrónicamente correctamente."),setTimeout(()=>D(null),5e3)}catch(O){console.error("Error en el proceso de firma:",O),z("Error en el proceso de firma: "+(O.message||O)),c("❌ Error en el proceso de firma: "+(O.message||O)),setTimeout(()=>c(null),1e4)}},er=O=>{st(O),me(!0)},Or=O=>{Pe(O),ze(!0)},vn=async O=>{console.log("EDITANDO FACTURA:",O),console.log("PROVISIONES DE LA FACTURA:",O.provisionFondos);const ae={...O,items:O.items||[],aplicarIVA:O.aplicarIVA!==!1,retencion:O.retencion??"",descuento:O.descuento??"",fechaOperacion:O.fechaOperacion?O.fechaOperacion.slice(0,10):""};if(x(ae),d(!0),O.receptorId)try{const ne=localStorage.getItem("token"),ie=(await X.get("/cases",{headers:{Authorization:`Bearer ${ne}`}})).data.filter(ge=>{var Se,Nt;return((Nt=(Se=ge.client)==null?void 0:Se.user)==null?void 0:Nt.id)===O.receptorId||ge.clientId===O.receptorId});F(ie)}catch{F([])}if(O.provisionFondos&&O.provisionFondos.length>0){console.log("PROVISIONES ENCONTRADAS:",O.provisionFondos);const ne=O.provisionFondos.map(pe=>pe.id);console.log("PROVISION IDs:",ne),ue(ne),Y(O.provisionFondos),G(O.provisionFondos[0])}else console.log("NO HAY PROVISIONES EN LA FACTURA"),ue([]),Y([]),G(null)},wt=async O=>{var ae,ne;if(window.confirm("¿Estás seguro de que quieres eliminar esta factura? Esta acción no se puede deshacer.")){ye(O);try{await EX(O,t??""),await Fe(),D("🗑️ Factura eliminada correctamente."),setTimeout(()=>D(null),5e3)}catch(pe){console.error("Error al eliminar factura:",pe);const ie=((ne=(ae=pe==null?void 0:pe.response)==null?void 0:ae.data)==null?void 0:ne.message)||(pe==null?void 0:pe.message)||"Error al eliminar la factura.";c(`❌ Error al eliminar la factura: ${ie}`),setTimeout(()=>c(null),5e3)}finally{ye(null)}}},ws=O=>{var pe,ie,ge,Se,Nt;const ae={"Información General":{ID:O.id,"Número de Factura":O.numeroFactura,Tipo:O.tipoFactura,Estado:O.estado,"Fecha de Creación":new Date(O.createdAt).toLocaleString("es-ES"),"Última Actualización":new Date(O.updatedAt).toLocaleString("es-ES")},Fechas:{"Fecha de Factura":new Date(O.fechaFactura).toLocaleDateString("es-ES"),"Fecha de Operación":new Date(O.fechaOperacion).toLocaleDateString("es-ES"),"Sello de Tiempo":O.selloTiempo?new Date(O.selloTiempo).toLocaleString("es-ES"):"No aplicado"},"Datos Fiscales":{"Base Imponible":`${(pe=O.baseImponible)==null?void 0:pe.toFixed(2)} €`,"Cuota IVA":`${(ie=O.cuotaIVA)==null?void 0:ie.toFixed(2)} €`,"Tipo IVA":`${O.tipoIVA}%`,"Importe Total":`${(ge=O.importeTotal)==null?void 0:ge.toFixed(2)} €`,"Régimen IVA Emisor":O.regimenIvaEmisor,"Clave de Operación":O.claveOperacion,"Método de Pago":O.metodoPago},Relaciones:{"Emisor ID":O.emisorId,"Receptor ID":O.receptorId,"Expediente ID":O.expedienteId||"No asociado","Número de Items":((Se=O.items)==null?void 0:Se.length)||0,"Provisiones Asociadas":((Nt=O.provisionFondos)==null?void 0:Nt.length)||0},XML:{"XML Generado":O.xml?"Sí":"No","XML Firmado":O.xmlFirmado?"Sí":"No","Tamaño XML":O.xml?`${Math.round(O.xml.length/1024)} KB`:"N/A","Tamaño XML Firmado":O.xmlFirmado?`${Math.round(O.xmlFirmado.length/1024)} KB`:"N/A"},Anulación:O.motivoAnulacion?{"Motivo de Anulación":O.motivoAnulacion}:"No anulada"},ne=Object.entries(ae).map(([rs,jr])=>typeof jr=="string"?`${rs}: ${jr}`:`${rs}:
${Object.entries(jr).map(([io,oo])=>`  ${io}: ${oo}`).join(`
`)}`).join(`

`);alert(`METADATOS DE LA FACTURA

${ne}`)},Rr=({invoice:O})=>{var Se,Nt,rs,jr,io,oo,zh;console.log("Invoice data for view:",{descuento:O.descuento,baseImponible:O.baseImponible,cuotaIVA:O.cuotaIVA,importeTotal:O.importeTotal});const ae=[`NIF:${((Se=O.emisor)==null?void 0:Se.email)||""}`,`NUM:${O.numeroFactura||""}`,`FEC:${O.fechaFactura?new Date(O.fechaFactura).toISOString().slice(0,10):""}`,`IMP:${O.importeTotal||""}`].join("|");console.log("QR Data generated:",ae);const ne=async()=>{var ut,ss,Ba,Ws,Uh;try{const fc=await uc.toString(ae,{type:"svg",width:120,margin:2,color:{dark:"#000000",light:"#FFFFFF"}}),lo=window.open("","_blank");lo&&(lo.document.write(`
            <!DOCTYPE html>
            <html>
              <head>
                <title>Factura ${O.numeroFactura}</title>
                <style>
                  * {
                    margin: 0;
                    padding: 0;
                    box-sizing: border-box;
                  }

                  body {
                    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                    line-height: 1.6;
                    color: #333;
                    background: #fff;
                  }

                  .invoice-container {
                    max-width: 800px;
                    margin: 0 auto;
                    padding: 15px;
                    background: white;
                  }

                  /* Header */
                  .header {
                    display: flex;
                    justify-content: space-between;
                    align-items: flex-start;
                    margin-bottom: 15px;
                    padding-bottom: 12px;
                    border-bottom: 3px solid #2563eb;
                  }

                  .company-info {
                    flex: 1;
                  }

                  .company-logo {
                    font-size: 24px;
                    font-weight: bold;
                    color: #2563eb;
                    margin-bottom: 8px;
                  }

                  .company-details {
                    color: #666;
                    font-size: 12px;
                  }

                  .invoice-info {
                    text-align: right;
                    flex: 1;
                  }

                  .invoice-title {
                    font-size: 28px;
                    font-weight: bold;
                    color: #2563eb;
                    margin-bottom: 8px;
                  }

                  .invoice-number {
                    font-size: 16px;
                    font-weight: bold;
                    margin-bottom: 4px;
                  }

                  .invoice-date {
                    color: #666;
                    margin-bottom: 4px;
                    font-size: 12px;
                  }

                  .invoice-status {
                    display: inline-block;
                    padding: 4px 12px;
                    border-radius: 20px;
                    font-size: 12px;
                    font-weight: bold;
                    text-transform: uppercase;
                  }

                  .status-emitida { background: #dcfce7; color: #166534; }
                  .status-pagada { background: #dbeafe; color: #1e40af; }
                  .status-anulada { background: #fee2e2; color: #991b1b; }

                  /* QR Code */
                  .qr-section {
                    text-align: center;
                    margin: 10px 0;
                    padding: 8px;
                    background: #f8fafc;
                    border-radius: 8px;
                  }

                  .qr-code {
                    margin: 0 auto;
                    width: 120px;
                    height: 120px;
                    background: #e5e7eb;
                    text-align: center;
                    border-radius: 8px;
                    margin-bottom: 8px;
                    display: block;
                  }

                  .qr-code svg {
                    max-width: 100%;
                    height: auto;
                    display: block;
                    margin: 0 auto;
                  }

                  .qr-text {
                    font-size: 8px;
                    color: #666;
                    background: #f3f4f6;
                    padding: 3px;
                    border-radius: 4px;
                    font-family: monospace;
                    word-break: break-all;
                  }

                  /* Parties Section */
                  .parties {
                    display: flex;
                    justify-content: space-between;
                    margin-bottom: 15px;
                    gap: 20px;
                  }
                  
                  .party {
                    flex: 1;
                    min-width: 0;
                    padding: 12px;
                    background: #f8fafc;
                    border-radius: 8px;
                    border-left: 4px solid #2563eb;
                  }

                  .party-title {
                    font-size: 14px;
                    font-weight: bold;
                    color: #2563eb;
                    margin-bottom: 10px;
                  }

                  .party-info {
                    margin-bottom: 6px;
                    font-size: 12px;
                  }

                  .party-label {
                    font-weight: bold;
                    color: #555;
                  }

                  /* Items Table */
                  .items-section {
                    margin-bottom: 15px;
                  }

                  .section-title {
                    font-size: 16px;
                    font-weight: bold;
                    color: #2563eb;
                    margin-bottom: 10px;
                    padding-bottom: 3px;
                    border-bottom: 2px solid #e5e7eb;
                  }

                  .items-table {
                    width: 100%;
                    border-collapse: collapse;
                    background: white;
                    border-radius: 8px;
                    overflow: hidden;
                    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
                    margin-bottom: 15px;
                    page-break-inside: avoid;
                  }

                  .items-table th {
                    background: #2563eb;
                    color: white;
                    padding: 8px 6px;
                    text-align: left;
                    font-weight: 600;
                    font-size: 12px;
                    border: none;
                  }

                  .items-table td {
                    padding: 8px 6px;
                    border-bottom: 1px solid #e5e7eb;
                    font-size: 12px;
                    vertical-align: top;
                  }

                  .items-table tr:last-child td {
                    border-bottom: none;
                  }

                  .items-table tr:nth-child(even) {
                    background-color: #f8fafc;
                  }

                  .text-center {
                    text-align: center;
                  }

                  .text-right {
                    text-align: right;
                  }

                  /* Totals Table */
                  .totals-section {
                    margin-bottom: 15px;
                  }

                  .totals-table {
                    width: 100%;
                    border-collapse: collapse;
                    background: white;
                    border-radius: 8px;
                    overflow: hidden;
                    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
                    page-break-inside: avoid;
                  }

                  .totals-table td {
                    padding: 8px 12px;
                    border-bottom: 1px solid #e5e7eb;
                    font-size: 12px;
                  }

                  .totals-table tr:last-child td {
                    border-bottom: none;
                  }

                  .total-row {
                    background: #2563eb;
                    color: white;
                    font-weight: bold;
                    font-size: 14px;
                  }

                  .total-row td {
                    border-bottom: none;
                  }

                  /* Discounts */
                  .discounts-section {
                    margin-bottom: 15px;
                  }

                  .discount-box {
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    padding: 10px 12px;
                    background: #fef3c7;
                    border: 1px solid #f59e0b;
                    border-radius: 6px;
                    font-size: 12px;
                  }

                  .discount-label {
                    font-weight: bold;
                    color: #92400e;
                  }

                  .discount-amount {
                    font-weight: bold;
                    color: #dc2626;
                  }

                  /* Provisions */
                  .provisions-section {
                    margin-bottom: 15px;
                  }

                  .provisions-table {
                    width: 100%;
                    border-collapse: collapse;
                    background: white;
                    border-radius: 8px;
                    overflow: hidden;
                    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
                    page-break-inside: avoid;
                  }

                  .provisions-table th {
                    background: #059669;
                    color: white;
                    padding: 8px 6px;
                    text-align: left;
                    font-weight: 600;
                    font-size: 12px;
                    border: none;
                  }

                  .provisions-table td {
                    padding: 8px 6px;
                    border-bottom: 1px solid #e5e7eb;
                    font-size: 12px;
                    vertical-align: top;
                  }

                  .provisions-table tr:last-child td {
                    border-bottom: none;
                  }

                  .provisions-table tr:nth-child(even) {
                    background-color: #f0fdf4;
                  }

                  /* Additional Info */
                  .additional-info {
                    background: #f8fafc;
                    padding: 12px;
                    border-radius: 8px;
                    margin-bottom: 15px;
                  }

                  .additional-info h3 {
                    color: #2563eb;
                    margin-bottom: 10px;
                    font-size: 14px;
                  }

                  .info-grid {
                    display: grid;
                    grid-template-columns: 1fr 1fr;
                    gap: 10px;
                  }

                  .info-item {
                    margin-bottom: 6px;
                    font-size: 11px;
                  }

                  .info-label {
                    font-weight: bold;
                    color: #555;
                  }

                  /* Footer */
                  .footer {
                    text-align: center;
                    padding: 15px;
                    border-top: 2px solid #e5e7eb;
                    margin-top: 20px;
                    color: #666;
                    font-size: 11px;
                  }

                  .footer p {
                    margin-bottom: 5px;
                  }
                </style>
              </head>
              <body>
                <div class="invoice-container">
                  <!-- Header -->
                  <div class="header">
                    <div class="company-info">
                      <div class="company-logo">🏛️ Despacho Legal</div>
                      <div class="company-details">
                        <div>Servicios Jurídicos Profesionales</div>
                        <div>Especialistas en Derecho Civil y Mercantil</div>
                        <div>Tel: +34 900 123 456 | Email: info@despacholegal.es</div>
                      </div>
                    </div>
                    <div class="invoice-info">
                      <div class="invoice-title">FACTURA</div>
                      <div class="invoice-number">${O.numeroFactura}</div>
                      <div class="invoice-date">${ie(O.fechaFactura)}</div>
                      <div class="invoice-status status-${O.estado}">${O.estado.toUpperCase()}</div>
                    </div>
                  </div>

                  <!-- QR Code -->
                  <div class="qr-section">
                    <div class="qr-code">
                      ${fc}
                    </div>
                    <div class="qr-text">${ae}</div>
                  </div>

                  <!-- Parties -->
                  <div class="parties">
                    <div class="party">
                      <div class="party-title">DATOS DEL EMISOR</div>
                      <div class="party-info">
                        <span class="party-label">Nombre:</span> ${((ut=O.emisor)==null?void 0:ut.name)||"N/A"}
                      </div>
                      <div class="party-info">
                        <span class="party-label">Email:</span> ${((ss=O.emisor)==null?void 0:ss.email)||"N/A"}
                      </div>
                      <div class="party-info">
                        <span class="party-label">Régimen IVA:</span> ${O.regimenIvaEmisor||"General"}
                      </div>
                    </div>
                    <div class="party">
                      <div class="party-title">DATOS DEL RECEPTOR</div>
                      <div class="party-info">
                        <span class="party-label">Nombre:</span> ${((Ba=O.receptor)==null?void 0:Ba.name)||"N/A"}
                      </div>
                      <div class="party-info">
                        <span class="party-label">Email:</span> ${((Ws=O.receptor)==null?void 0:Ws.email)||"N/A"}
                      </div>
                      ${O.expediente?`
                      <div class="party-info">
                        <span class="party-label">Expediente:</span> ${O.expediente.title}
                      </div>
                      `:""}
                    </div>
                  </div>

                  <!-- Items -->
                  ${O.items&&O.items.length>0?`
                  <div class="items-section">
                    <div class="section-title">CONCEPTOS</div>
                    <table class="items-table">
                      <thead>
                        <tr>
                          <th>Descripción</th>
                          <th class="text-center">Cantidad</th>
                          <th class="text-right">Precio Unitario</th>
                          <th class="text-right">Total</th>
                        </tr>
                      </thead>
                      <tbody>
                        ${O.items.map(yt=>`
                          <tr>
                            <td>${yt.description||""}</td>
                            <td class="text-center">${yt.quantity||0}</td>
                            <td class="text-right">${ge(yt.unitPrice||0)} €</td>
                            <td class="text-right">${ge((yt.quantity||0)*(yt.unitPrice||0))} €</td>
                          </tr>
                        `).join("")}
                      </tbody>
                    </table>
                  </div>
                  `:""}

                  <!-- Discounts -->
                  ${O.descuento&&O.descuento>0?`
                  <div class="discounts-section">
                    <div class="section-title">DESCUENTOS</div>
                    <div class="discount-box">
                      <span class="discount-label">Descuento (${O.descuento}%)</span>
                      <span class="discount-amount">-${ge((((Uh=O.items)==null?void 0:Uh.reduce((yt,co)=>yt+co.quantity*co.unitPrice,0))||0)*(O.descuento/100))} €</span>
                    </div>
                  </div>
                  `:""}

                  <!-- Provisions -->
                  ${O.provisionFondos&&O.provisionFondos.length>0?`
                  <div class="provisions-section">
                    <div class="section-title">PROVISIONES DE FONDOS ASOCIADAS</div>
                    <table class="provisions-table">
                      <thead>
                        <tr>
                          <th>Descripción</th>
                          <th class="text-center">Fecha</th>
                          <th class="text-right">Importe</th>
                        </tr>
                      </thead>
                      <tbody>
                        ${O.provisionFondos.map(yt=>`
                          <tr>
                            <td>${yt.description||"Sin descripción"}</td>
                            <td class="text-center">${ie(yt.date)}</td>
                            <td class="text-right">${ge(yt.amount)} €</td>
                          </tr>
                        `).join("")}
                      </tbody>
                    </table>
                  </div>
                  `:""}

                  <!-- Totals -->
                  <div class="totals-section">
                    <div class="section-title">TOTALES</div>
                    <table class="totals-table">
                      <tr>
                        <td>Base Imponible:</td>
                        <td class="text-right">${ge(O.baseImponible||0)} €</td>
                      </tr>
                      <tr>
                        <td>IVA (${O.tipoIVA||21}%):</td>
                        <td class="text-right">${ge(O.cuotaIVA||0)} €</td>
                      </tr>
                      <tr class="total-row">
                        <td>TOTAL:</td>
                        <td class="text-right">${ge(O.importeTotal||0)} €</td>
                      </tr>
                    </table>
                  </div>

                  <!-- Additional Info -->
                  <div class="additional-info">
                    <h3>INFORMACIÓN ADICIONAL</h3>
                    <div class="info-grid">
                      <div>
                        <div class="info-item">
                          <span class="info-label">Método de pago:</span> ${O.metodoPago||"N/A"}
                        </div>
                        <div class="info-item">
                          <span class="info-label">Clave de operación:</span> ${O.claveOperacion||"N/A"}
                        </div>
                        <div class="info-item">
                          <span class="info-label">Fecha de operación:</span> ${ie(O.fechaOperacion)}
                        </div>
                      </div>
                      <div>
                        <div class="info-item">
                          <span class="info-label">Fecha de creación:</span> ${ie(O.createdAt)}
                        </div>
                        ${O.motivoAnulacion?`
                        <div class="info-item">
                          <span class="info-label">Motivo de anulación:</span> ${O.motivoAnulacion}
                        </div>
                        `:""}
                      </div>
                    </div>
                  </div>

                  <!-- Footer -->
                  <div class="footer">
                    <p>Esta factura cumple con la normativa española de facturación electrónica</p>
                    <p>Factura generada automáticamente por el sistema de gestión legal</p>
                  </div>
                </div>
              </body>
            </html>
          `),lo.document.close(),lo.print())}catch(fc){console.error("Error printing invoice:",fc),alert("Error al imprimir la factura")}},pe=async()=>{try{const ss=(await X.get(`/invoices/${O.id}/pdf-qr`,{responseType:"blob"})).data,Ba=window.URL.createObjectURL(ss),Ws=document.createElement("a");Ws.href=Ba,Ws.download=`factura_${O.numeroFactura||O.id}.pdf`,document.body.appendChild(Ws),Ws.click(),document.body.removeChild(Ws),window.URL.revokeObjectURL(Ba)}catch(ut){console.error("Error downloading PDF:",ut),alert("Error al descargar el PDF de la factura")}},ie=ut=>new Date(ut).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}),ge=ut=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(ut);return s.jsxs("div",{className:"bg-white p-8 max-w-4xl mx-auto",children:[s.jsx("div",{className:"border-b-2 border-gray-300 pb-6 mb-6",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"FACTURA"}),s.jsxs("div",{className:"my-4 flex flex-col items-center",children:[s.jsx("h4",{className:"text-xs text-gray-600 mb-1",children:"Código QR de la factura"}),s.jsx(AS,{value:ae,size:120,level:"M",fgColor:"#000000",bgColor:"#FFFFFF",className:"border rounded"}),s.jsx("pre",{className:"text-xs mt-1 bg-gray-100 p-1 rounded max-w-xs overflow-x-auto",children:ae}),s.jsx("div",{className:"text-[10px] text-gray-500 mt-1",children:"QR generado correctamente"})]}),s.jsxs("div",{className:"text-lg text-gray-600",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Número:"})," ",O.numeroFactura||"N/A"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Fecha:"})," ",O.fechaFactura?ie(O.fechaFactura):"N/A"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Tipo:"})," ",O.tipoFactura==="F"?"Completa":O.tipoFactura==="R"?"Rectificativa":"N/A"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Estado:"})," ",s.jsx("span",{className:`px-2 py-1 rounded text-xs ${O.estado==="emitida"?"bg-green-100 text-green-800":O.estado==="anulada"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:(O.estado||"N/A").toUpperCase()})]})]})]}),s.jsx("div",{className:"text-right",children:s.jsxs("div",{className:"text-sm text-gray-600",children:[s.jsx("div",{children:s.jsx("strong",{children:"Fecha de operación:"})}),s.jsx("div",{children:ie(O.fechaOperacion)})]})})]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-8 mb-8",children:[s.jsxs("div",{className:"border-r border-gray-200 pr-4",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-3",children:"DATOS DEL EMISOR"}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Nombre:"})," ",((Nt=O.emisor)==null?void 0:Nt.name)||"N/A"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Email:"})," ",((rs=O.emisor)==null?void 0:rs.email)||"N/A"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Régimen IVA:"})," ",O.regimenIvaEmisor]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-3",children:"DATOS DEL RECEPTOR"}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Nombre:"})," ",((jr=O.receptor)==null?void 0:jr.name)||"N/A"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Email:"})," ",((io=O.receptor)==null?void 0:io.email)||"N/A"]}),O.expediente&&s.jsxs("div",{children:[s.jsx("strong",{children:"Expediente:"})," ",O.expediente.title]})]})]})]}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-3",children:"CONCEPTOS"}),s.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-gray-100",children:[s.jsx("th",{className:"border border-gray-300 px-3 py-2 text-left",children:"Descripción"}),s.jsx("th",{className:"border border-gray-300 px-3 py-2 text-center",children:"Cantidad"}),s.jsx("th",{className:"border border-gray-300 px-3 py-2 text-right",children:"Precio Unitario"}),s.jsx("th",{className:"border border-gray-300 px-3 py-2 text-right",children:"Total"})]})}),s.jsx("tbody",{children:(oo=O.items)==null?void 0:oo.map((ut,ss)=>s.jsxs("tr",{className:ss%2===0?"bg-white":"bg-gray-50",children:[s.jsx("td",{className:"border border-gray-300 px-3 py-2",children:ut.description}),s.jsx("td",{className:"border border-gray-300 px-3 py-2 text-center",children:ut.quantity}),s.jsx("td",{className:"border border-gray-300 px-3 py-2 text-right",children:ge(ut.unitPrice)}),s.jsx("td",{className:"border border-gray-300 px-3 py-2 text-right font-semibold",children:ge(ut.total)})]},ss))})]})]}),O.descuento&&O.descuento>0&&s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-3",children:"DESCUENTOS"}),s.jsx("div",{className:"bg-yellow-50 p-4 rounded border border-yellow-200",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"font-semibold text-yellow-800",children:["Descuento (",O.descuento??0,"%)"]}),s.jsxs("span",{className:"font-bold text-yellow-800 text-lg",children:["-",ge((((zh=O.items)==null?void 0:zh.reduce((ut,ss)=>ut+ss.quantity*ss.unitPrice,0))||0)*((O.descuento??0)/100))]})]})})]}),O.provisionFondos&&O.provisionFondos.length>0&&s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-3",children:"PROVISIONES DE FONDOS ASOCIADAS"}),s.jsx("div",{className:"bg-blue-50 p-4 rounded border",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-blue-200",children:[s.jsx("th",{className:"text-left py-2",children:"Descripción"}),s.jsx("th",{className:"text-right py-2",children:"Fecha"}),s.jsx("th",{className:"text-right py-2",children:"Importe"})]})}),s.jsx("tbody",{children:O.provisionFondos.map(ut=>s.jsxs("tr",{className:"border-b border-blue-100",children:[s.jsx("td",{className:"py-2",children:ut.description||"Sin descripción"}),s.jsx("td",{className:"text-right py-2",children:ie(ut.date)}),s.jsx("td",{className:"text-right py-2 font-semibold",children:ge(ut.amount)})]},ut.id))})]})})]}),s.jsx("div",{className:"border-t-2 border-gray-300 pt-6",children:s.jsx("div",{className:"flex justify-end",children:s.jsxs("div",{className:"w-64 space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Base Imponible:"}),s.jsx("span",{className:"font-semibold",children:ge(O.baseImponible??0)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{children:["IVA (",O.tipoIVA??21,"%):"]}),s.jsx("span",{className:"font-semibold",children:ge(O.cuotaIVA??0)})]}),s.jsxs("div",{className:"flex justify-between text-lg font-bold border-t border-gray-300 pt-2",children:[s.jsx("span",{children:"TOTAL:"}),s.jsx("span",{children:ge(O.importeTotal??0)})]})]})})}),s.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:s.jsxs("div",{className:"grid grid-cols-2 gap-8 text-sm text-gray-600",children:[s.jsxs("div",{children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Método de pago:"})," ",O.metodoPago]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Clave de operación:"})," ",O.claveOperacion]})]}),s.jsxs("div",{children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Fecha de creación:"})," ",ie(O.createdAt)]}),O.motivoAnulacion&&s.jsxs("div",{children:[s.jsx("strong",{children:"Motivo de anulación:"})," ",O.motivoAnulacion]})]})]})}),s.jsxs("div",{className:"mt-8 flex justify-center gap-4 print:hidden",children:[s.jsxs("button",{onClick:ne,className:"px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"Imprimir"]}),s.jsxs("button",{onClick:pe,className:"px-6 py-2 bg-green-600 text-white rounded hover:bg-green-700 flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Descargar PDF"]})]})]})};return s.jsxs("main",{className:"p-6",children:[s.jsxs("header",{className:"mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Gestión de Facturas"}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:ot,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Nueva Factura"}),s.jsx("button",{onClick:ts,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Abrir AutoFirma"})]}),s.jsx("div",{className:"flex gap-2",children:s.jsxs("button",{onClick:lr,disabled:R.length===0,className:"px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700 disabled:bg-gray-400",children:["Firmar Seleccionadas (",R.length,")"]})})]})]}),s.jsxs("section",{"aria-labelledby":"info-panel-heading",children:[s.jsx("h2",{id:"info-panel-heading",className:"sr-only",children:"Información sobre Firma Electrónica"}),s.jsx(Zt,{})]}),s.jsxs("section",{"aria-labelledby":"invoices-table-heading",children:[s.jsx("h2",{id:"invoices-table-heading",className:"text-xl font-semibold text-gray-800 mb-4",children:"Lista de Facturas"}),s.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:[s.jsx("label",{htmlFor:"select-all-invoices",className:"sr-only",children:"Seleccionar todas las facturas"}),s.jsx("input",{id:"select-all-invoices",type:"checkbox",checked:R.length===r.length&&r.length>0,onChange:O=>{O.target.checked?W(r.map(ae=>ae.id)):W([])},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500","aria-describedby":"select-all-help"}),s.jsx("span",{id:"select-all-help",className:"sr-only",children:"Marca esta casilla para seleccionar todas las facturas de la lista"})]}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Número"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Importe"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(O=>{var ae,ne;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsxs("label",{htmlFor:`select-invoice-${O.id}`,className:"sr-only",children:["Seleccionar factura ",O.numeroFactura]}),s.jsx("input",{id:`select-invoice-${O.id}`,type:"checkbox",checked:R.includes(O.id),onChange:pe=>{pe.target.checked?W([...R,O.id]):W(R.filter(ie=>ie!==O.id))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500","aria-describedby":`select-invoice-help-${O.id}`}),s.jsxs("span",{id:`select-invoice-help-${O.id}`,className:"sr-only",children:["Marca esta casilla para seleccionar la factura ",O.numeroFactura]})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:O.numeroFactura}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:O.fechaFactura?new Date(O.fechaFactura).toLocaleDateString():"N/A"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((ae=O.receptor)==null?void 0:ae.name)||"N/A"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:O.importeTotal?`${O.importeTotal.toFixed(2)} €`:"N/A"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${O.estado==="emitida"?"bg-green-100 text-green-800":O.estado==="anulada"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:((ne=O.estado)==null?void 0:ne.toUpperCase())||"N/A"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>er(O),className:"text-blue-600 hover:text-blue-900 hover:bg-blue-50 px-2 py-1 rounded",title:"Ver factura completa con todos los detalles",children:"👁️ Ver"}),s.jsx("button",{onClick:()=>vn(O),className:"text-yellow-600 hover:text-yellow-900 px-2 py-1 rounded hover:bg-yellow-50",title:"Editar factura",children:"✏️ Editar"}),s.jsx("button",{onClick:()=>Or(O),className:"text-orange-600 hover:text-orange-900 px-2 py-1 rounded hover:bg-orange-50",title:"Firmar digitalmente",children:"🔐 Firmar"}),s.jsx("button",{onClick:()=>wt(O.id),className:"text-red-600 hover:text-red-900 px-2 py-1 rounded hover:bg-red-50",title:"Eliminar factura",children:"🗑️ Eliminar"}),s.jsx("button",{onClick:()=>ws(O),className:"text-gray-600 hover:text-gray-900 px-2 py-1 rounded hover:bg-gray-50",title:"Ver metadatos técnicos",children:"🔍 Metadatos"})]})})]},O.id)})})]})})})]}),$e&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center",children:[s.jsx("h2",{className:"text-xl font-bold",children:"Vista de Factura"}),s.jsx("button",{onClick:()=>st(null),className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),s.jsx(Rr,{invoice:$e})]})}),l&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center",children:[s.jsx("h2",{className:"text-xl font-bold",children:u?"Editar Factura":"Nueva Factura"}),s.jsx("button",{onClick:()=>{d(!1),h(null),x(qc),ue([]),Y([]),G(null)},className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),s.jsx("div",{className:"p-6",children:s.jsxs("form",{onSubmit:u?Jt:_t,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Número de Factura"}),s.jsx("input",{type:"text",name:"numeroFactura",value:f.numeroFactura,onChange:nt,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de Factura"}),s.jsx("input",{type:"date",name:"fechaFactura",value:f.fechaFactura,onChange:nt,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Factura"}),s.jsxs("select",{name:"tipoFactura",value:f.tipoFactura,onChange:nt,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"F",children:"Completa"}),s.jsx("option",{value:"R",children:"Rectificativa"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),s.jsxs("select",{name:"estado",value:f.estado,onChange:nt,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"emitida",children:"Emitida"}),s.jsx("option",{value:"pagada",children:"Pagada"}),s.jsx("option",{value:"anulada",children:"Anulada"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Método de Pago"}),s.jsxs("select",{name:"metodoPago",value:f.metodoPago,onChange:nt,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"transferencia",children:"Transferencia"}),s.jsx("option",{value:"efectivo",children:"Efectivo"}),s.jsx("option",{value:"tarjeta",children:"Tarjeta"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cliente"}),s.jsxs("select",{name:"receptorId",value:f.receptorId,onChange:no,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[s.jsx("option",{value:"",children:"Seleccionar cliente"}),w.map(O=>s.jsx("option",{value:O.id,children:O.name},O.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expediente"}),s.jsxs("select",{name:"expedienteId",value:f.expedienteId,onChange:nt,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Sin expediente"}),Z.map(O=>s.jsx("option",{value:O.id,children:O.title},O.id))]})]})]}),s.jsxs("fieldset",{children:[s.jsx("legend",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Conceptos de la Factura"}),s.jsxs("div",{className:"space-y-2",children:[f.items.map((O,ae)=>s.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[s.jsxs("div",{children:[s.jsxs("label",{htmlFor:`description-${ae}`,className:"sr-only",children:["Descripción del concepto ",ae+1]}),s.jsx("input",{id:`description-${ae}`,type:"text",placeholder:"Descripción",value:O.description,onChange:ne=>ao(ae,"description",ne.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","aria-describedby":`description-help-${ae}`}),s.jsxs("p",{id:`description-help-${ae}`,className:"sr-only",children:["Introduce la descripción del concepto ",ae+1]})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:`quantity-${ae}`,className:"sr-only",children:["Cantidad del concepto ",ae+1]}),s.jsx("input",{id:`quantity-${ae}`,type:"number",min:"0",step:"1",placeholder:"Cantidad",value:O.quantity,onChange:ne=>ao(ae,"quantity",parseFloat(ne.target.value)||0),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","aria-describedby":`quantity-help-${ae}`}),s.jsxs("p",{id:`quantity-help-${ae}`,className:"sr-only",children:["Introduce la cantidad del concepto ",ae+1]})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:`unitPrice-${ae}`,className:"sr-only",children:["Precio unitario del concepto ",ae+1]}),s.jsx("input",{id:`unitPrice-${ae}`,type:"number",step:"0.01",min:"0",placeholder:"Precio unitario",value:O.unitPrice,onChange:ne=>ao(ae,"unitPrice",parseFloat(ne.target.value)||0),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","aria-describedby":`unitPrice-help-${ae}`}),s.jsxs("p",{id:`unitPrice-help-${ae}`,className:"sr-only",children:["Introduce el precio unitario del concepto ",ae+1," en euros"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:[(O.quantity*O.unitPrice).toFixed(2)," €"]}),f.items.length>1&&s.jsx("button",{type:"button",onClick:()=>{const ne=f.items.filter((pe,ie)=>ie!==ae);x({...f,items:ne})},className:"text-red-600 hover:text-red-800",children:"✕"})]})]},ae)),s.jsx("button",{type:"button",onClick:Bh,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300","aria-describedby":"add-item-help",children:"+ Añadir concepto"}),s.jsx("p",{id:"add-item-help",className:"sr-only",children:"Haz clic para añadir un nuevo concepto a la factura"})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Régimen IVA Emisor"}),s.jsxs("select",{name:"regimenIvaEmisor",value:f.regimenIvaEmisor,onChange:nt,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"General",children:"General"}),s.jsx("option",{value:"Simplificado",children:"Simplificado"}),s.jsx("option",{value:"Exento",children:"Exento"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo IVA (%)"}),s.jsx("input",{type:"number",name:"tipoIVA",value:f.tipoIVA,onChange:nt,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descuento (%)"}),s.jsx("input",{type:"number",name:"descuento",value:f.descuento,onChange:nt,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),s.jsxs("div",{className:"flex justify-end gap-4",children:[s.jsx("button",{type:"button",onClick:()=>{d(!1),x(qc),ue([]),Y([]),G(null)},className:"px-4 py-2 text-gray-700 bg-gray-200 rounded hover:bg-gray-300",children:"Cancelar"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:u?"Actualizar Factura":"Crear Factura"})]})]})})]})}),_e&&Ce&&s.jsx(AJ,{isOpen:_e,onClose:()=>{ze(!1),Pe(null)},invoiceId:Ce.id,invoiceNumber:Ce.numeroFactura,onSuccess:O=>{console.log("PDF firmado disponible en:",O)}})]})},_J=()=>{console.log("ProvisionFondosPage component loaded");const e=localStorage.getItem("token")||"",[t,r]=g.useState({expedienteId:"",amount:"",date:"",description:""}),[n,a]=g.useState(null),[i,o]=g.useState([]),[c,l]=g.useState(""),[d,u]=g.useState(""),[h,f]=g.useState(""),[x,v]=g.useState(!1),[y,b]=g.useState([]);g.useEffect(()=>{(async()=>{try{const S=await X.get("/cases",{headers:{Authorization:`Bearer ${e}`}});b(S.data)}catch{b([])}})()},[e]);const p=C=>{r({...t,[C.target.name]:C.target.value})},m=C=>{r({...t,expedienteId:C.target.value})},j=C=>{r({...t,expedienteId:C.target.value})},w=async C=>{var S;C.preventDefault(),f(""),u(""),v(!0);try{const E=y.find(_=>_.id===t.expedienteId),k=((S=E==null?void 0:E.client)==null?void 0:S.id)||"";if(!k){f("No se pudo determinar el cliente del expediente seleccionado"),v(!1);return}const T={clientId:k,expedienteId:t.expedienteId,amount:Number(t.amount),...t.date?{date:t.date}:{},description:t.description},D=await DX(T,e);a(D.id),u("Provisión creada. Ahora puedes vincularla a una factura.");const $=await NX(e);o($)}catch{f("Error al crear la provisión")}finally{v(!1)}},N=async()=>{if(!(!n||!c)){f(""),u(""),v(!0);try{await AX(n,c,e),u("Provisión vinculada correctamente a la factura."),a(null),l("")}catch{f("Error al vincular la provisión")}finally{v(!1)}}};return s.jsxs("main",{className:"max-w-md mx-auto py-8 px-4",children:[s.jsx("header",{children:s.jsx("h1",{className:"text-2xl font-bold mb-6 text-gray-900",children:"Gestión de Provisiones de Fondos"})}),s.jsxs("section",{"aria-labelledby":"provision-form-heading",children:[s.jsx("h2",{id:"provision-form-heading",className:"text-xl font-semibold mb-4 text-gray-800",children:"Crear Provisión de Fondos"}),d&&s.jsx("div",{className:"mb-4 p-3 bg-green-100 border border-green-400 text-green-700 rounded",role:"alert",children:d}),h&&s.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-600 rounded",role:"alert",children:h}),n?s.jsxs("section",{"aria-labelledby":"link-invoice-heading",children:[s.jsx("h3",{id:"link-invoice-heading",className:"text-lg font-semibold mb-4 text-gray-800",children:"Vincular Provisión a Factura"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"invoice-select",className:"block text-sm font-medium text-gray-700 mb-2",children:"Selecciona Factura para Vincular"}),s.jsxs("select",{id:"invoice-select",name:"selectedInvoice",value:c,onChange:C=>l(C.target.value),className:"border border-gray-300 px-3 py-2 rounded-md w-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500","aria-describedby":"invoice-help",children:[s.jsx("option",{value:"",children:"Selecciona una factura"}),i.map(C=>{var S;return s.jsxs("option",{value:C.id,children:[C.numeroFactura," - ",(S=C.receptor)==null?void 0:S.name]},C.id)})]}),s.jsx("p",{id:"invoice-help",className:"text-xs text-gray-500 mt-1",children:"Elige la factura a la que quieres vincular la provisión creada"})]}),s.jsx("button",{onClick:N,className:"w-full px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",disabled:x||!c,"aria-describedby":"link-help",children:x?"Vinculando...":"Vincular Provisión"}),s.jsx("p",{id:"link-help",className:"text-xs text-gray-500 text-center",children:x?"Procesando la vinculación...":c?"Haz clic para vincular la provisión a la factura seleccionada":"Selecciona una factura para continuar"})]})]}):s.jsxs("form",{onSubmit:w,className:"space-y-4","aria-label":"Formulario de creación de provisión",children:[s.jsxs("fieldset",{children:[s.jsx("legend",{className:"sr-only",children:"Información del expediente"}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{htmlFor:"expediente-select",className:"block text-sm font-medium text-gray-700 mb-2",children:"Expediente"}),s.jsxs("select",{id:"expediente-select",name:"expedienteId",className:"border border-gray-300 px-3 py-2 rounded-md w-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:t.expedienteId,onChange:m,"aria-describedby":"expediente-help",children:[s.jsx("option",{value:"",children:"Selecciona un expediente"}),y.map(C=>{var S,E;return s.jsxs("option",{value:C.id,children:[C.title," - ",((E=(S=C.client)==null?void 0:S.user)==null?void 0:E.name)||"Sin cliente"," (ID: ",C.id,")"]},C.id)})]}),s.jsx("p",{id:"expediente-help",className:"text-xs text-gray-500 mt-1",children:"O puedes pegar directamente el ID del expediente en el campo de abajo"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{htmlFor:"expediente-id-input",className:"block text-sm font-medium text-gray-700 mb-2",children:"ID del Expediente (alternativo)"}),s.jsx("input",{id:"expediente-id-input",name:"expedienteId",type:"text",className:"border border-gray-300 px-3 py-2 rounded-md w-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Pega el ID del expediente",value:t.expedienteId,onChange:j,"aria-describedby":"expediente-id-help"}),s.jsx("p",{id:"expediente-id-help",className:"text-xs text-gray-500 mt-1",children:"Campo alternativo para introducir el ID del expediente manualmente"})]})]}),s.jsxs("fieldset",{children:[s.jsx("legend",{className:"sr-only",children:"Información de la provisión"}),!t.date&&s.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-md",children:s.jsx("p",{className:"text-sm text-blue-700",children:"La fecha de la provisión se asignará automáticamente al crearla."})}),t.date&&s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{htmlFor:"provision-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha de Provisión"}),s.jsx("input",{id:"provision-date",name:"date",type:"date",value:t.date.slice(0,10),readOnly:!0,className:"border border-gray-300 px-3 py-2 rounded-md w-full bg-gray-100","aria-describedby":"date-help"}),s.jsx("p",{id:"date-help",className:"text-xs text-gray-500 mt-1",children:"Fecha automática de la provisión"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{htmlFor:"amount",className:"block text-sm font-medium text-gray-700 mb-2",children:"Importe (€)"}),s.jsx("input",{id:"amount",name:"amount",type:"number",step:"0.01",min:"0",value:t.amount,onChange:p,className:"border border-gray-300 px-3 py-2 rounded-md w-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,"aria-describedby":"amount-help"}),s.jsx("p",{id:"amount-help",className:"text-xs text-gray-500 mt-1",children:"Introduce el importe en euros"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripción"}),s.jsx("input",{id:"description",name:"description",type:"text",value:t.description,onChange:p,className:"border border-gray-300 px-3 py-2 rounded-md w-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500","aria-describedby":"description-help"}),s.jsx("p",{id:"description-help",className:"text-xs text-gray-500 mt-1",children:"Descripción opcional de la provisión"})]})]}),s.jsx("button",{type:"submit",className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",disabled:x,"aria-describedby":"submit-help",children:x?"Creando Provisión...":"Crear Provisión"}),s.jsx("p",{id:"submit-help",className:"text-xs text-gray-500 text-center",children:x?"Procesando la solicitud...":"Haz clic para crear la provisión de fondos"})]})]})]})},MJ=()=>{const{user:e}=Ee(),t=localStorage.getItem("token"),[r,n]=g.useState([]),[a,i]=g.useState(!0),[o,c]=g.useState(null),[l,d]=g.useState(null);g.useEffect(()=>{(async()=>{try{if(!t)throw new Error("No token available");const j=await X.get("/users/clients/profile",{headers:{Authorization:`Bearer ${t}`}});j.data?(d(j.data),await u(j.data.id)):c("No se encontró el perfil de cliente")}catch(j){console.error("Error fetching client profile:",j),c("Error al cargar el perfil de cliente")}finally{i(!1)}})()},[t,e]);const u=async m=>{try{const j=await MX(m,t);n(j)}catch{c("Error al cargar las provisiones")}},h=m=>new Date(m).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}),f=m=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(m),x=m=>m.invoiceId?s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Facturada"}):s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Pendiente"});if(a)return s.jsx("div",{className:"max-w-6xl mx-auto py-8 px-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando provisiones..."})]})});if(o)return s.jsx("div",{className:"max-w-6xl mx-auto py-8 px-4",children:s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),s.jsx("div",{className:"mt-2 text-sm text-red-700",children:o})]})]})})});const v=r.filter(m=>!m.invoiceId),y=r.filter(m=>m.invoiceId),b=v.reduce((m,j)=>m+j.amount,0),p=y.reduce((m,j)=>m+j.amount,0);return s.jsxs("div",{className:"max-w-6xl mx-auto py-8 px-4",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Mis Provisiones de Fondos"}),s.jsx("p",{className:"text-gray-600",children:"Aquí puedes ver todas las provisiones de fondos asociadas a tus expedientes"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Provisiones"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:r.length})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Pendientes"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:f(b)})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Facturadas"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:f(p)})]})]})})]}),v.length>0&&s.jsxs("div",{className:"bg-white rounded-lg shadow mb-8",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[s.jsxs("h2",{className:"text-lg font-medium text-gray-900",children:["Provisiones Pendientes (",v.length,")"]}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Provisiones que aún no han sido facturadas"})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Importe"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Descripción"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expediente"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Abogado"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:v.map(m=>{var j,w,N;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:h(m.date)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:f(m.amount)}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:m.description||"Sin descripción"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((j=m.expediente)==null?void 0:j.title)||"Sin expediente"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((N=(w=m.expediente)==null?void 0:w.lawyer)==null?void 0:N.name)||"No asignado"})]},m.id)})})]})})]}),y.length>0&&s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[s.jsxs("h2",{className:"text-lg font-medium text-gray-900",children:["Provisiones Facturadas (",y.length,")"]}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Provisiones que ya han sido incluidas en facturas"})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha Provisión"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Importe"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Descripción"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expediente"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Factura"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:y.map(m=>{var j,w,N,C;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:h(m.date)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:f(m.amount)}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:m.description||"Sin descripción"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((j=m.expediente)==null?void 0:j.title)||"Sin expediente"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:(w=m.invoice)==null?void 0:w.numeroFactura}),s.jsx("div",{className:"text-gray-500",children:h(((N=m.invoice)==null?void 0:N.fechaFactura)||"")}),s.jsx("div",{className:"text-gray-500",children:f(((C=m.invoice)==null?void 0:C.importeTotal)||0)})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:x(m)})]},m.id)})})]})})]}),r.length===0&&s.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[s.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-gray-100 mb-4",children:s.jsx("svg",{className:"h-6 w-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay provisiones de fondos"}),s.jsx("p",{className:"text-gray-500",children:"Aún no se han creado provisiones de fondos para tus expedientes."})]})]})},OJ=()=>{const[e,t]=g.useState([]),[r,n]=g.useState([]),[a,i]=g.useState({lawyerId:"",date:"",location:"",notes:""}),[o,c]=g.useState(!0),[l,d]=g.useState(null),[u,h]=g.useState(null),[f,x]=g.useState(!1),[v,y]=g.useState("all"),[b,p]=g.useState("list"),{user:m}=Ee();g.useEffect(()=>{(async()=>{try{c(!0);const A=localStorage.getItem("token"),[B,P]=await Promise.all([X.get("/users/lawyers"),X.get("/appointments")]);t(B.data),n(P.data),d(null)}catch{d("Error al cargar los datos")}finally{c(!1)}})()},[]);const j=_=>{i({...a,[_.target.name]:_.target.value})},w=async _=>{var A,B;if(_.preventDefault(),d(null),h(null),!a.lawyerId||!a.date){d("Selecciona abogado y fecha/hora");return}try{const P=localStorage.getItem("token"),M=await X.post("/appointments",{lawyerId:a.lawyerId,date:a.date,location:a.location||void 0,notes:a.notes||void 0},{headers:{Authorization:`Bearer ${P}`}});n(R=>[M.data,...R]),i({lawyerId:"",date:"",location:"",notes:""}),x(!1),h("Cita agendada correctamente"),setTimeout(()=>h(null),3e3)}catch(P){d(((B=(A=P.response)==null?void 0:A.data)==null?void 0:B.message)||"Error al agendar la cita")}},N=async _=>{if(confirm("¿Estás seguro de que quieres cancelar esta cita?"))try{const A=localStorage.getItem("token");await X.delete(`/appointments/${_}`,{headers:{Authorization:`Bearer ${A}`}}),n(B=>B.filter(P=>P.id!==_)),h("Cita cancelada correctamente"),setTimeout(()=>h(null),3e3)}catch{d("Error al cancelar la cita")}},C=g.useMemo(()=>v==="all"?r:r.filter(_=>_.lawyer.id===v),[r,v]),S=g.useMemo(()=>{const _=new Date,A=new Date(_.getFullYear(),_.getMonth(),_.getDate()),B=new Date(A);return B.setDate(B.getDate()+1),{past:C.filter(P=>new Date(P.date)<A),today:C.filter(P=>{const M=new Date(P.date);return M>=A&&M<B}),upcoming:C.filter(P=>new Date(P.date)>=B)}},[C]),E=_=>new Date(_).toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),k=_=>new Date(_).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}),T=_=>{const A=new Date,B=new Date(_),P=new Date(A.getFullYear(),A.getMonth(),A.getDate()),M=new Date(P);return M.setDate(M.getDate()+1),B<P?s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"Pasada"}):B>=P&&B<M?s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Hoy"}):s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Próxima"})},D=_=>s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 border-l-4 border-blue-500",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:_.lawyer.name}),s.jsx("p",{className:"text-sm text-gray-600",children:_.lawyer.email})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[T(_.date),s.jsx("button",{onClick:()=>N(_.id),className:"text-red-600 hover:text-red-800 text-sm font-medium",title:"Cancelar cita",children:"✕"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),E(_.date)," a las ",k(_.date)]}),_.location&&s.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[s.jsxs("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),_.location]}),_.notes&&s.jsxs("div",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded-md",children:[s.jsx("strong",{children:"Notas:"})," ",_.notes]})]})]},_.id),$=()=>{const _=new Date,A=Array.from({length:7},(B,P)=>{const M=new Date(_);return M.setDate(M.getDate()+P),M});return s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-4",children:A.map((B,P)=>{const M=C.filter(R=>new Date(R.date).toDateString()===B.toDateString());return s.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[s.jsxs("div",{className:"text-center mb-3",children:[s.jsx("div",{className:"text-sm font-medium text-gray-500",children:B.toLocaleDateString("es-ES",{weekday:"short"})}),s.jsx("div",{className:`text-lg font-bold ${B.toDateString()===_.toDateString()?"text-blue-600":"text-gray-900"}`,children:B.getDate()})]}),s.jsx("div",{className:"space-y-2",children:M.map(R=>s.jsxs("div",{className:"text-xs bg-blue-50 p-2 rounded border-l-2 border-blue-500",children:[s.jsx("div",{className:"font-medium",children:R.lawyer.name}),s.jsx("div",{className:"text-gray-600",children:k(R.date)})]},R.id))})]},P)})})};return o?s.jsx("div",{className:"max-w-6xl mx-auto py-8 px-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando citas..."})]})}):s.jsxs("div",{className:"max-w-6xl mx-auto py-8 px-4",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Mis Citas"}),s.jsx("p",{className:"text-gray-600",children:"Gestiona tus citas con los abogados"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4",children:[s.jsx("button",{onClick:()=>x(!f),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:f?"Cancelar":"Nueva Cita"}),s.jsxs("select",{value:v,onChange:_=>y(_.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"all",children:"Todos los abogados"}),e.map(_=>s.jsx("option",{value:_.id,children:_.name},_.id))]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>p("list"),className:`px-3 py-2 rounded-md text-sm font-medium ${b==="list"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Lista"}),s.jsx("button",{onClick:()=>p("calendar"),className:`px-3 py-2 rounded-md text-sm font-medium ${b==="calendar"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Calendario"})]})]}),l&&s.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-md",children:s.jsx("p",{className:"text-red-700 text-sm",children:l})}),u&&s.jsx("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-md",children:s.jsx("p",{className:"text-green-700 text-sm",children:u})})]}),f&&s.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Agendar Nueva Cita"}),s.jsxs("form",{onSubmit:w,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Abogado"}),s.jsxs("select",{name:"lawyerId",value:a.lawyerId,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[s.jsx("option",{value:"",children:"Selecciona un abogado"}),e.map(_=>s.jsxs("option",{value:_.id,children:[_.name," (",_.email,")"]},_.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha y hora"}),s.jsx("input",{type:"datetime-local",name:"date",value:a.date,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ubicación (opcional)"}),s.jsx("input",{type:"text",name:"location",value:a.location,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Oficina, online, etc."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Motivo / Notas (opcional)"}),s.jsx("textarea",{name:"notes",value:a.notes,onChange:j,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Motivo de la cita, detalles, etc."})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{type:"button",onClick:()=>x(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancelar"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Agendar Cita"})]})]})]}),b==="calendar"?s.jsxs("div",{className:"mb-8",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Vista de Calendario"}),$()]}):s.jsxs("div",{className:"space-y-8",children:[S.today.length>0&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold mb-4 text-green-700",children:"Citas de Hoy"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:S.today.map(D)})]}),S.upcoming.length>0&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold mb-4 text-blue-700",children:"Próximas Citas"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:S.upcoming.map(D)})]}),S.past.length>0&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-700",children:"Citas Pasadas"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:S.past.map(D)})]}),C.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No hay citas"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:v==="all"?"No tienes citas agendadas. Agenda una nueva cita para comenzar.":"No tienes citas con este abogado."}),s.jsx("div",{className:"mt-6",children:s.jsx("button",{onClick:()=>x(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Agendar Nueva Cita"})})]})]})]})},RJ=()=>{const{user:e}=Ee(),[t,r]=g.useState([]),[n,a]=g.useState(!0),[i,o]=g.useState(null),[c,l]=g.useState([]),[d,u]=g.useState(""),[h,f]=g.useState("");return g.useEffect(()=>{(async()=>{try{const v=localStorage.getItem("token"),y=await X.get("/users/lawyers");l(y.data)}catch{}})()},[]),g.useEffect(()=>{(async()=>{try{a(!0);const v=localStorage.getItem("token"),y={};d&&(y.lawyerId=d),h&&(y.paymentDate=h);const b=await X.get("/invoices/my",{params:y});r(b.data),o(null)}catch{o("Error al cargar las facturas"),r([])}finally{a(!1)}})()},[d,h]),s.jsx("div",{className:"py-6",children:s.jsx("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsx("h1",{className:"text-2xl font-semibold mb-2",children:"Gestionar pagos y facturas"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Aquí puedes consultar tus facturas, descargar el PDF y acceder al QR para pago o verificación."}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Filtros de Búsqueda"}),s.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Abogado"}),s.jsxs("select",{value:d,onChange:x=>u(x.target.value),className:"border rounded px-2 py-1",children:[s.jsx("option",{value:"",children:"Todos"}),c.map(x=>s.jsx("option",{value:x.id,children:x.name},x.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de pago"}),s.jsx("input",{type:"date",value:h,onChange:x=>f(x.target.value),className:"border rounded px-2 py-1"})]})]}),n?s.jsx("div",{className:"flex items-center justify-center h-40",children:s.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-blue-500"})}):i?s.jsx("div",{className:"bg-red-100 text-red-700 p-3 rounded mb-4",children:i}):t.length===0?s.jsx("div",{className:"text-gray-500",children:"No tienes facturas registradas."}):s.jsxs("div",{className:"overflow-x-auto",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Lista de Facturas"}),s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Nº Factura"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Fecha"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Importe"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Estado"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Abogado"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Fecha de pago"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"QR"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"PDF"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(x=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-2",children:x.number}),s.jsx("td",{className:"px-4 py-2",children:new Date(x.date).toLocaleDateString()}),s.jsxs("td",{className:"px-4 py-2",children:[x.amount.toFixed(2)," €"]}),s.jsx("td",{className:"px-4 py-2",children:s.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${x.status==="PAGADA"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:x.status})}),s.jsx("td",{className:"px-4 py-2",children:x.lawyerName||"-"}),s.jsx("td",{className:"px-4 py-2",children:x.paymentDate?new Date(x.paymentDate).toLocaleDateString():"-"}),s.jsx("td",{className:"px-4 py-2",children:x.qrUrl?s.jsx("img",{src:x.qrUrl,alt:"QR Factura",className:"h-12 w-12 object-contain"}):s.jsx("span",{className:"text-gray-400",children:"No disponible"})}),s.jsx("td",{className:"px-4 py-2",children:x.pdfUrl?s.jsx("a",{href:x.pdfUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Descargar"}):s.jsx("span",{className:"text-gray-400",children:"No disponible"})})]},x.id))})]})]}),s.jsx("div",{className:"mt-8 flex justify-between items-center",children:s.jsx(be,{to:"/dashboard",className:"text-blue-600 hover:underline",children:"Volver al Dashboard"})})]})})})},PJ=()=>{const[e,t]=g.useState(""),[r,n]=g.useState(!0),[a,i]=g.useState(""),{user:o}=Ee();return g.useEffect(()=>{(async()=>{try{n(!0);const l=await X.get("/parametros/legal/PRIVACY_POLICY");t(l.data.valor)}catch(l){console.error("Error fetching privacy content:",l),i("No se pudo cargar la política de privacidad"),t(`
          <h1>Política de Privacidad</h1>
          <p>Esta política de privacidad describe cómo recopilamos, usamos y protegemos su información personal.</p>
          <h2>Información que recopilamos</h2>
          <p>Recopilamos información que usted nos proporciona directamente, como cuando se registra en nuestro sitio web, nos contacta o utiliza nuestros servicios.</p>
          <h2>Cómo usamos su información</h2>
          <p>Utilizamos la información recopilada para proporcionar, mantener y mejorar nuestros servicios, comunicarnos con usted y cumplir con nuestras obligaciones legales.</p>
          <h2>Protección de la información</h2>
          <p>Implementamos medidas de seguridad técnicas y organizativas apropiadas para proteger su información personal contra acceso no autorizado, alteración, divulgación o destrucción.</p>
          <h2>Sus derechos</h2>
          <p>Usted tiene derecho a acceder, corregir, eliminar y oponerse al procesamiento de su información personal. Para ejercer estos derechos, contáctenos.</p>
          <h2>Contacto</h2>
          <p>Si tiene preguntas sobre esta política de privacidad, contáctenos en info@despacholegal.com</p>
        `)}finally{n(!1)}})()},[]),r?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando política de privacidad..."})]})}):a?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 text-6xl mb-4",children:"⚠️"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Error"}),s.jsx("p",{className:"text-gray-600",children:a})]})}):s.jsx("div",{className:"min-h-screen bg-gray-50",children:s.jsx("div",{className:"max-w-4xl mx-auto py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden",children:[s.jsx("div",{className:"px-6 py-8",children:s.jsx("div",{className:"prose prose-lg max-w-none",dangerouslySetInnerHTML:{__html:e}})}),(o==null?void 0:o.role)==="ADMIN"&&s.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t",children:s.jsx("button",{onClick:()=>window.location.href="/admin/parametros",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"✏️ Editar Contenido"})})]})})})},LJ=()=>{const[e,t]=g.useState(""),[r,n]=g.useState(!0),[a,i]=g.useState(""),{user:o}=Ee();return g.useEffect(()=>{(async()=>{try{n(!0);const l=await X.get("/parametros/legal/TERMS_OF_SERVICE");t(l.data.valor)}catch(l){console.error("Error fetching terms content:",l),i("No se pudo cargar los términos de servicio"),t(`
          <h1>Términos de Servicio</h1>
          <p>Al utilizar nuestros servicios, usted acepta estos términos de servicio.</p>
          <h2>Servicios proporcionados</h2>
          <p>Proporcionamos servicios de asesoramiento jurídico y gestión legal a través de nuestra plataforma digital.</p>
          <h2>Uso aceptable</h2>
          <p>Usted se compromete a utilizar nuestros servicios únicamente para fines legales y de acuerdo con estos términos.</p>
          <h2>Propiedad intelectual</h2>
          <p>Todos los derechos de propiedad intelectual relacionados con nuestros servicios son propiedad de Despacho Legal.</p>
          <h2>Limitación de responsabilidad</h2>
          <p>En la máxima medida permitida por la ley, Despacho Legal no será responsable de daños indirectos, incidentales o consecuentes.</p>
          <h2>Modificaciones</h2>
          <p>Nos reservamos el derecho de modificar estos términos en cualquier momento. Los cambios serán efectivos inmediatamente después de su publicación.</p>
          <h2>Contacto</h2>
          <p>Si tiene preguntas sobre estos términos, contáctenos en info@despacholegal.com</p>
        `)}finally{n(!1)}})()},[]),r?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando términos de servicio..."})]})}):a?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 text-6xl mb-4",children:"⚠️"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Error"}),s.jsx("p",{className:"text-gray-600",children:a})]})}):s.jsx("div",{className:"min-h-screen bg-gray-50",children:s.jsx("div",{className:"max-w-4xl mx-auto py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden",children:[s.jsx("div",{className:"px-6 py-8",children:s.jsx("div",{className:"prose prose-lg max-w-none",dangerouslySetInnerHTML:{__html:e}})}),(o==null?void 0:o.role)==="ADMIN"&&s.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t",children:s.jsx("button",{onClick:()=>window.location.href="/admin/parametros",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"✏️ Editar Contenido"})})]})})})},IJ=()=>{const[e,t]=g.useState(""),[r,n]=g.useState(!0),[a,i]=g.useState(""),{user:o}=Ee();return g.useEffect(()=>{(async()=>{try{n(!0);const l=await X.get("/parametros/legal/COOKIE_POLICY");t(l.data.valor)}catch(l){console.error("Error fetching cookies content:",l),i("No se pudo cargar la política de cookies"),t(`
          <h1>Política de Cookies</h1>
          <p>Esta política de cookies explica qué son las cookies, cómo las utilizamos y cómo puede gestionarlas.</p>
          
          <h2>¿Qué son las cookies?</h2>
          <p>Las cookies son pequeños archivos de texto que se almacenan en su dispositivo cuando visita nuestro sitio web. Nos ayudan a mejorar su experiencia y a analizar el tráfico del sitio.</p>
          
          <h2>Tipos de cookies que utilizamos</h2>
          
          <h2>Cookies por Categoría</h2>
          <h3>Cookies técnicas (necesarias)</h3>
          <p>Estas cookies son esenciales para el funcionamiento del sitio web y no se pueden desactivar. Incluyen:</p>
          <ul>
            <li>Cookies de sesión para mantener su sesión activa</li>
            <li>Cookies de seguridad para proteger contra ataques</li>
            <li>Cookies de preferencias para recordar su configuración</li>
          </ul>
          
          <h3>Cookies analíticas</h3>
          <p>Nos ayudan a entender cómo interactúan los visitantes con nuestro sitio web:</p>
          <ul>
            <li>Análisis de tráfico y uso del sitio</li>
            <li>Identificación de páginas más populares</li>
            <li>Mejora de la experiencia del usuario</li>
          </ul>
          
          <h3>Cookies de funcionalidad</h3>
          <p>Mejoran la funcionalidad del sitio web:</p>
          <ul>
            <li>Recordar sus preferencias de idioma</li>
            <li>Personalizar el contenido mostrado</li>
            <li>Mejorar la navegación</li>
          </ul>
          
          <h2>Gestión de cookies</h2>
          <p>Puede gestionar las cookies a través de la configuración de su navegador:</p>
          <ul>
            <li><strong>Chrome:</strong> Configuración > Privacidad y seguridad > Cookies</li>
            <li><strong>Firefox:</strong> Opciones > Privacidad y seguridad > Cookies</li>
            <li><strong>Safari:</strong> Preferencias > Privacidad > Cookies</li>
            <li><strong>Edge:</strong> Configuración > Cookies y permisos del sitio</li>
          </ul>
          
          <h2>Cookies de terceros</h2>
          <p>Algunos servicios de terceros pueden instalar cookies en su dispositivo:</p>
          <ul>
            <li>Google Analytics para análisis web</li>
            <li>Servicios de chat en vivo</li>
            <li>Herramientas de redes sociales</li>
          </ul>
          
          <h2>Actualizaciones de esta política</h2>
          <p>Podemos actualizar esta política de cookies ocasionalmente. Le notificaremos cualquier cambio significativo.</p>
          
          <h2>Contacto</h2>
          <p>Si tiene preguntas sobre nuestra política de cookies, contáctenos en info@despacholegal.com</p>
          
          <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mt-6">
            <p class="text-sm text-blue-700">
              <strong>Nota:</strong> Esta política cumple con las directrices de la Agencia Española de Protección de Datos (AEPD) y el Reglamento General de Protección de Datos (RGPD).
            </p>
          </div>
        `)}finally{n(!1)}})()},[]),r?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando política de cookies..."})]})}):a?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 text-6xl mb-4",children:"⚠️"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Error"}),s.jsx("p",{className:"text-gray-600",children:a})]})}):s.jsx("div",{className:"min-h-screen bg-gray-50",children:s.jsx("div",{className:"max-w-4xl mx-auto py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden",children:[s.jsx("div",{className:"px-6 py-8",children:s.jsx("div",{className:"prose prose-lg max-w-none",dangerouslySetInnerHTML:{__html:e}})}),(o==null?void 0:o.role)==="ADMIN"&&s.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t",children:s.jsx("button",{onClick:()=>window.location.href="/admin/parametros",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"✏️ Editar Contenido"})})]})})})},$J=()=>{const{user:e}=Ee(),[t,r]=g.useState([]),[n,a]=g.useState(!0),[i,o]=g.useState(null),[c,l]=g.useState(""),[d,u]=g.useState(!1);g.useEffect(()=>{h()},[]);const h=async()=>{try{a(!0);const m=await X.get("/teleassistance/sessions/user/"+(e==null?void 0:e.id));r(m.data)}catch(m){console.error("Error loading sessions:",m)}finally{a(!1)}},f=async m=>{try{const j=await X.get(`/api/teleassistance/sessions/${m}`);o(j.data)}catch(j){console.error("Error loading session details:",j)}},x=async m=>{if(c.trim())try{u(!0),await X.post(`/api/teleassistance/sessions/${m}/messages`,{content:c,messageType:"TEXT"}),l(""),await f(m)}catch(j){console.error("Error sending message:",j)}finally{u(!1)}},v=m=>{const j={PENDING:{color:"bg-yellow-100 text-yellow-800",text:"Pendiente"},ACTIVE:{color:"bg-green-100 text-green-800",text:"Activa"},COMPLETED:{color:"bg-blue-100 text-blue-800",text:"Completada"},CANCELLED:{color:"bg-red-100 text-red-800",text:"Cancelada"}},w=j[m]||j.PENDING;return s.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${w.color}`,children:w.text})},y=m=>({AUTOFIRMA:"🔐",CERTIFICADO_DIGITAL:"🆔",SEDES:"🏛️",CLAVE_PIN:"📱",NAVEGADOR:"🌐",SISTEMA_OPERATIVO:"💻",OTRO:"❓"})[m]||"❓",b=m=>new Date(m).toLocaleString("es-ES"),p=m=>{if(!m)return"N/A";const j=Math.floor(m/60),w=m%60;return j>0?`${j}h ${w}m`:`${w}m`};return n?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"🖥️ Mis Sesiones de Teleasistencia"}),s.jsx("p",{className:"text-lg text-gray-600",children:"Gestiona tus solicitudes de asistencia remota"})]}),s.jsx(be,{to:"/client/teleassistance/request",className:"bg-blue-600 text-white px-6 py-3 rounded-md hover:bg-blue-700 transition-colors",children:"Nueva Solicitud"})]})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:["Mis Sesiones (",t.length,")"]}),t.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No tienes sesiones de teleasistencia"}),s.jsx(be,{to:"/client/teleassistance/request",className:"mt-4 inline-block bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Solicitar Asistencia"})]}):s.jsx("div",{className:"space-y-3",children:t.map(m=>s.jsxs("div",{onClick:()=>f(m.id),className:`border rounded-lg p-3 cursor-pointer transition-colors ${(i==null?void 0:i.id)===m.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-lg",children:y(m.issueType)}),s.jsx("span",{className:"font-medium text-gray-900",children:m.issueType.replace("_"," ")})]}),v(m.status)]}),s.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:m.description}),s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[s.jsxs("span",{children:["Asistente: ",m.assistant.name]}),s.jsx("span",{children:b(m.createdAt)})]})]},m.id))})]})}),s.jsx("div",{className:"lg:col-span-2",children:i?s.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[s.jsxs("div",{className:"border-b border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:"text-2xl",children:y(i.issueType)}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:i.issueType.replace("_"," ")}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Asistente: ",i.assistant.name]})]})]}),v(i.status)]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Descripción:"}),s.jsx("p",{className:"text-gray-600",children:i.description})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Código de Sesión:"}),s.jsx("p",{className:"text-gray-600 font-mono",children:i.sessionCode})]}),i.startedAt&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Iniciada:"}),s.jsx("p",{className:"text-gray-600",children:b(i.startedAt)})]}),i.duration&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Duración:"}),s.jsx("p",{className:"text-gray-600",children:p(i.duration)})]})]}),i.resolution&&s.jsxs("div",{className:"mt-4 p-4 bg-green-50 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-green-900 mb-2",children:"Resolución:"}),s.jsx("p",{className:"text-green-800",children:i.resolution})]})]}),s.jsxs("div",{className:"p-6",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Mensajes"}),s.jsx("div",{className:"space-y-4 mb-4 max-h-96 overflow-y-auto",children:i.messages.length===0?s.jsx("p",{className:"text-gray-500 text-center py-4",children:"No hay mensajes en esta sesión"}):i.messages.map(m=>s.jsx("div",{className:`flex ${m.sender.id===(e==null?void 0:e.id)?"justify-end":"justify-start"}`,children:s.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${m.sender.id===(e==null?void 0:e.id)?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"}`,children:[s.jsxs("div",{className:"text-xs opacity-75 mb-1",children:[m.sender.name," - ",b(m.createdAt)]}),s.jsx("p",{children:m.content})]})},m.id))}),i.status==="ACTIVE"&&s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("input",{type:"text",value:c,onChange:m=>l(m.target.value),onKeyPress:m=>m.key==="Enter"&&x(i.id),placeholder:"Escribe un mensaje...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsx("button",{onClick:()=>x(i.id),disabled:d||!c.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50",children:d?"Enviando...":"Enviar"})]})]})]}):s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:s.jsxs("div",{className:"text-center py-8",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),s.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Selecciona una sesión para ver los detalles"})]})})})]})]})})},FJ=()=>{const{user:e}=Ee(),t=Ar(),[r,n]=g.useState([]),[a,i]=g.useState([]),[o,c]=g.useState([]),[l,d]=g.useState(!0),[u,h]=g.useState(!1),[f,x]=g.useState(""),[v,y]=g.useState(""),[b,p]=g.useState(""),[m,j]=g.useState(""),[w,N]=g.useState(!1),[C,S]=g.useState(null);g.useEffect(()=>{E()},[]);const E=async()=>{try{d(!0);const[$,_,A]=await Promise.all([X.get("/teleassistance/available-assistants"),X.get("/teleassistance/remote-tools"),X.get("/teleassistance/common-issues")]);n($.data),i(_.data),c(A.data)}catch($){console.error("Error loading teleassistance data:",$)}finally{d(!1)}},k=async $=>{if($.preventDefault(),!f||!v||!m){alert("Por favor completa todos los campos obligatorios");return}try{h(!0);const _={userId:e==null?void 0:e.id,assistantId:f,issueType:v,description:m,remoteTool:b||void 0},A=await X.post("/api/teleassistance/sessions",_);alert("Solicitud de teleasistencia enviada exitosamente. Te contactaremos pronto."),t("/client/teleassistance")}catch(_){console.error("Error creating teleassistance session:",_),alert("Error al enviar la solicitud. Por favor intenta de nuevo.")}finally{h(!1)}},T=$=>{S($),N(!0)},D=$=>({AUTOFIRMA:"🔐",CERTIFICADO_DIGITAL:"🆔",SEDES:"🏛️",CLAVE_PIN:"📱",NAVEGADOR:"🌐",SISTEMA_OPERATIVO:"💻",OTRO:"❓"})[$]||"❓";return l?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"🖥️ Solicitar Teleasistencia"}),s.jsx("p",{className:"text-lg text-gray-600",children:"¿Necesitas ayuda con problemas de administración electrónica? Solicita asistencia remota"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Nueva Solicitud de Teleasistencia"}),s.jsxs("form",{onSubmit:k,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Seleccionar Asistente *"}),s.jsxs("select",{value:f,onChange:$=>x($.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[s.jsx("option",{value:"",children:"Selecciona un asistente"}),r.map($=>s.jsxs("option",{value:$.id,children:[$.name," (",$.role,")"]},$.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Problema *"}),s.jsxs("select",{value:v,onChange:$=>y($.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[s.jsx("option",{value:"",children:"Selecciona el tipo de problema"}),o.map($=>s.jsxs("option",{value:$.id,children:[D($.id)," ",$.name]},$.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripción del Problema *"}),s.jsx("textarea",{value:m,onChange:$=>j($.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Describe detalladamente el problema que estás experimentando...",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Herramienta de Control Remoto (Opcional)"}),s.jsxs("select",{value:b,onChange:$=>p($.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Sin preferencia"}),a.map($=>s.jsx("option",{value:$.id,children:$.name},$.id))]})]}),s.jsx("div",{className:"pt-4",children:s.jsx("button",{type:"submit",disabled:u,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50",children:u?"Enviando...":"Enviar Solicitud de Teleasistencia"})})]})]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"🛠️ Herramientas de Control Remoto"}),s.jsx("div",{className:"space-y-3",children:a.map($=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-3",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:$.name}),s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:$.description}),s.jsx("button",{onClick:()=>T($),className:"text-blue-600 text-sm hover:text-blue-800",children:"Ver instrucciones"})]},$.id))})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"❓ Problemas Comunes"}),s.jsx("div",{className:"space-y-3",children:o.slice(0,5).map($=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx("span",{className:"text-lg mr-2",children:D($.id)}),s.jsx("h4",{className:"font-medium text-gray-900",children:$.name})]}),s.jsx("p",{className:"text-sm text-gray-600",children:$.description})]},$.id))})]}),s.jsxs("div",{className:"bg-blue-50 rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-bold text-blue-900 mb-2",children:"📞 Información de Contacto"}),s.jsx("p",{className:"text-sm text-blue-800 mb-3",children:"Una vez enviada tu solicitud, el asistente te contactará para coordinar la sesión de teleasistencia."}),s.jsxs("div",{className:"text-sm text-blue-700",children:[s.jsx("p",{children:"• Tiempo de respuesta: 15-30 minutos"}),s.jsx("p",{children:"• Horario de atención: Lunes a Viernes 9:00-18:00"}),s.jsx("p",{children:"• Sesiones gratuitas incluidas en tu plan"})]})]})]})]}),w&&C&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl mx-4 max-h-[80vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-xl font-bold text-gray-900",children:["Instrucciones: ",C.name]}),s.jsx("button",{onClick:()=>N(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Características:"}),s.jsx("ul",{className:"list-disc list-inside text-sm text-gray-600 space-y-1",children:C.features.map(($,_)=>s.jsx("li",{children:$},_))})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Instrucciones de Instalación:"}),s.jsx("ol",{className:"list-decimal list-inside text-sm text-gray-600 space-y-1",children:C.instructions.map(($,_)=>s.jsx("li",{children:$},_))})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("a",{href:C.downloadUrl,target:"_blank",rel:"noopener noreferrer",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:["Descargar ",C.name]}),s.jsx("button",{onClick:()=>N(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"Cerrar"})]})]})})]})})};function BJ(){return s.jsx(t6,{children:s.jsx(jD,{children:s.jsx(mD,{children:s.jsxs(he,{path:"/",element:s.jsx(K1,{}),children:[s.jsx(he,{index:!0,element:s.jsx(N6,{})}),s.jsx(he,{path:"contact",element:s.jsx(C6,{})}),s.jsx(he,{path:"login",element:s.jsx(D6,{})}),s.jsx(he,{path:"register",element:s.jsx(A6,{})}),s.jsx(he,{path:"privacidad",element:s.jsx(PJ,{})}),s.jsx(he,{path:"terminos",element:s.jsx(LJ,{})}),s.jsx(he,{path:"cookies",element:s.jsx(IJ,{})}),s.jsx(he,{path:"dashboard",element:s.jsx(jf,{})}),s.jsxs(he,{element:s.jsx(_6,{}),children:[s.jsx(he,{element:s.jsx(Nf,{allowedRoles:["ADMIN"]}),children:s.jsxs(he,{path:"admin",children:[s.jsx(he,{path:"dashboard",element:s.jsx(Fq,{})}),s.jsx(he,{path:"users",element:s.jsx(Bq,{})}),s.jsx(he,{path:"cases",element:s.jsx(Uq,{})}),s.jsx(he,{path:"cases/:id",element:s.jsx(Kv,{})}),s.jsx(he,{path:"appointments",element:s.jsx(Vq,{})}),s.jsx(he,{path:"tasks",element:s.jsx(Hq,{})}),s.jsx(he,{path:"documents",element:s.jsx(Wq,{})}),s.jsx(he,{path:"invoices",element:s.jsx(xG,{})}),s.jsx(he,{path:"reports",element:s.jsx(vG,{})}),s.jsx(he,{path:"home-builder",element:s.jsx(CQ,{})}),s.jsx(he,{path:"menu-config",element:s.jsx(SQ,{})}),s.jsx(he,{path:"site-config",element:s.jsx(EQ,{})}),s.jsx(he,{path:"guided-config",element:s.jsx(kQ,{})}),s.jsx(he,{path:"teleassistance",element:s.jsx(Vb,{})}),s.jsx(he,{path:"services",element:s.jsx(CG,{})}),s.jsx(he,{path:"settings",element:s.jsx(_c,{title:"Configuración del Sistema",description:"Configurar parámetros generales",icon:"⚙️"})}),s.jsx(he,{path:"audit",element:s.jsx(_c,{title:"Auditoría",description:"Registros de actividad del sistema",icon:"🔍"})}),s.jsx(he,{path:"backup",element:s.jsx(_c,{title:"Backup y Restauración",description:"Gestionar copias de seguridad",icon:"💾"})}),s.jsx(he,{path:"/admin/parametros",element:s.jsx(NG,{})})]})}),s.jsx(he,{element:s.jsx(Nf,{allowedRoles:["ABOGADO"]}),children:s.jsxs(he,{path:"lawyer",children:[s.jsx(he,{path:"dashboard",element:s.jsx(jf,{})}),s.jsx(he,{path:"facturacion",element:s.jsx(TJ,{})}),s.jsx(he,{path:"provisiones",element:s.jsx(_J,{})}),s.jsxs(he,{path:"cases",children:[s.jsx(he,{index:!0,element:s.jsx(M6,{})}),s.jsx(he,{path:"new",element:s.jsx(O6,{})}),s.jsx(he,{path:":id",element:s.jsx(Kv,{})}),s.jsx(he,{path:":id/edit",element:s.jsx(F6,{})})]}),s.jsx(he,{path:"clients",element:s.jsx(Lq,{})}),s.jsx(he,{path:"appointments",element:s.jsx(Pq,{})}),s.jsx(he,{path:"documents",element:s.jsx(I6,{})}),s.jsx(he,{path:"tasks",element:s.jsx(Iq,{})}),s.jsx(he,{path:"reports",element:s.jsx($q,{})}),s.jsx(he,{path:"chat",element:s.jsx(wX,{})}),s.jsx(he,{path:"teleassistance",element:s.jsx(Vb,{})})]})}),s.jsx(he,{element:s.jsx(Nf,{allowedRoles:["CLIENTE"]}),children:s.jsxs(he,{path:"client",children:[s.jsx(he,{path:"dashboard",element:s.jsx(jf,{})}),s.jsx(he,{path:"cases",element:s.jsx(R6,{})}),s.jsx(he,{path:"cases/:id",element:s.jsx(P6,{})}),s.jsx(he,{path:"documents",element:s.jsx($6,{})}),s.jsx(he,{path:"provisiones",element:s.jsx(MJ,{})}),s.jsx(he,{path:"appointments",element:s.jsx(OJ,{})}),s.jsx(he,{path:"chat",element:s.jsx(jX,{})}),s.jsx(he,{path:"teleassistance",element:s.jsx($J,{})}),s.jsx(he,{path:"teleassistance/request",element:s.jsx(FJ,{})}),s.jsx(he,{path:"payments",element:s.jsx(RJ,{})}),s.jsx(he,{path:"profile",element:s.jsx(_c,{title:"Perfil",description:"Actualizar información personal",icon:"👤"})})]})})]}),s.jsx(he,{path:"*",element:s.jsx(T6,{})})]})})})})}Jf.createRoot(document.getElementById("root")).render(s.jsx(I.StrictMode,{children:s.jsx(BJ,{})}))});export default zJ();
