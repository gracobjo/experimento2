var sS=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var vQ=sS((qQ,md)=>{function nS(e,t){for(var s=0;s<t.length;s++){const n=t[s];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=s(a);fetch(a.href,i)}})();var zr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ab={exports:{}},cu={},Tb={exports:{}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _l=Symbol.for("react.element"),aS=Symbol.for("react.portal"),iS=Symbol.for("react.fragment"),oS=Symbol.for("react.strict_mode"),lS=Symbol.for("react.profiler"),cS=Symbol.for("react.provider"),dS=Symbol.for("react.context"),uS=Symbol.for("react.forward_ref"),mS=Symbol.for("react.suspense"),hS=Symbol.for("react.memo"),fS=Symbol.for("react.lazy"),qg=Symbol.iterator;function pS(e){return e===null||typeof e!="object"?null:(e=qg&&e[qg]||e["@@iterator"],typeof e=="function"?e:null)}var _b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ob=Object.assign,Mb={};function Ai(e,t,s){this.props=e,this.context=t,this.refs=Mb,this.updater=s||_b}Ai.prototype.isReactComponent={};Ai.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ai.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Rb(){}Rb.prototype=Ai.prototype;function fp(e,t,s){this.props=e,this.context=t,this.refs=Mb,this.updater=s||_b}var pp=fp.prototype=new Rb;pp.constructor=fp;Ob(pp,Ai.prototype);pp.isPureReactComponent=!0;var Gg=Array.isArray,Pb=Object.prototype.hasOwnProperty,xp={current:null},Lb={key:!0,ref:!0,__self:!0,__source:!0};function Ib(e,t,s){var n,a={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)Pb.call(t,n)&&!Lb.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(l===1)a.children=s;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:_l,type:e,key:i,ref:o,props:a,_owner:xp.current}}function xS(e,t){return{$$typeof:_l,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function gp(e){return typeof e=="object"&&e!==null&&e.$$typeof===_l}function gS(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return t[s]})}var Kg=/\/+/g;function Em(e,t){return typeof e=="object"&&e!==null&&e.key!=null?gS(""+e.key):t.toString(36)}function Lc(e,t,s,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case _l:case aS:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+Em(o,0):n,Gg(a)?(s="",e!=null&&(s=e.replace(Kg,"$&/")+"/"),Lc(a,t,s,"",function(d){return d})):a!=null&&(gp(a)&&(a=xS(a,s+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(Kg,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",Gg(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+Em(i,l);o+=Lc(i,t,s,c,a)}else if(c=pS(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+Em(i,l++),o+=Lc(i,t,s,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function ic(e,t,s){if(e==null)return e;var n=[],a=0;return Lc(e,n,"","",function(i){return t.call(s,i,a++)}),n}function vS(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var er={current:null},Ic={transition:null},yS={ReactCurrentDispatcher:er,ReactCurrentBatchConfig:Ic,ReactCurrentOwner:xp};function $b(){throw Error("act(...) is not supported in production builds of React.")}Te.Children={map:ic,forEach:function(e,t,s){ic(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return ic(e,function(){t++}),t},toArray:function(e){return ic(e,function(t){return t})||[]},only:function(e){if(!gp(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Te.Component=Ai;Te.Fragment=iS;Te.Profiler=lS;Te.PureComponent=fp;Te.StrictMode=oS;Te.Suspense=mS;Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yS;Te.act=$b;Te.cloneElement=function(e,t,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Ob({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=xp.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Pb.call(t,c)&&!Lb.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=s;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:_l,type:e.type,key:a,ref:i,props:n,_owner:o}};Te.createContext=function(e){return e={$$typeof:dS,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:cS,_context:e},e.Consumer=e};Te.createElement=Ib;Te.createFactory=function(e){var t=Ib.bind(null,e);return t.type=e,t};Te.createRef=function(){return{current:null}};Te.forwardRef=function(e){return{$$typeof:uS,render:e}};Te.isValidElement=gp;Te.lazy=function(e){return{$$typeof:fS,_payload:{_status:-1,_result:e},_init:vS}};Te.memo=function(e,t){return{$$typeof:hS,type:e,compare:t===void 0?null:t}};Te.startTransition=function(e){var t=Ic.transition;Ic.transition={};try{e()}finally{Ic.transition=t}};Te.unstable_act=$b;Te.useCallback=function(e,t){return er.current.useCallback(e,t)};Te.useContext=function(e){return er.current.useContext(e)};Te.useDebugValue=function(){};Te.useDeferredValue=function(e){return er.current.useDeferredValue(e)};Te.useEffect=function(e,t){return er.current.useEffect(e,t)};Te.useId=function(){return er.current.useId()};Te.useImperativeHandle=function(e,t,s){return er.current.useImperativeHandle(e,t,s)};Te.useInsertionEffect=function(e,t){return er.current.useInsertionEffect(e,t)};Te.useLayoutEffect=function(e,t){return er.current.useLayoutEffect(e,t)};Te.useMemo=function(e,t){return er.current.useMemo(e,t)};Te.useReducer=function(e,t,s){return er.current.useReducer(e,t,s)};Te.useRef=function(e){return er.current.useRef(e)};Te.useState=function(e){return er.current.useState(e)};Te.useSyncExternalStore=function(e,t,s){return er.current.useSyncExternalStore(e,t,s)};Te.useTransition=function(){return er.current.useTransition()};Te.version="18.3.1";Tb.exports=Te;var f=Tb.exports;const H=vr(f),bS=nS({__proto__:null,default:H},[f]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jS=f,wS=Symbol.for("react.element"),NS=Symbol.for("react.fragment"),CS=Object.prototype.hasOwnProperty,SS=jS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ES={key:!0,ref:!0,__self:!0,__source:!0};function Fb(e,t,s){var n,a={},i=null,o=null;s!==void 0&&(i=""+s),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)CS.call(t,n)&&!ES.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:wS,type:e,key:i,ref:o,props:a,_owner:SS.current}}cu.Fragment=NS;cu.jsx=Fb;cu.jsxs=Fb;Ab.exports=cu;var r=Ab.exports,Oh={},Bb={exports:{}},Sr={},zb={exports:{}},Ub={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(M,W){var E=M.length;M.push(W);e:for(;0<E;){var R=E-1>>>1,$=M[R];if(0<a($,W))M[R]=W,M[E]=$,E=R;else break e}}function s(M){return M.length===0?null:M[0]}function n(M){if(M.length===0)return null;var W=M[0],E=M.pop();if(E!==W){M[0]=E;e:for(var R=0,$=M.length,_=$>>>1;R<_;){var O=2*(R+1)-1,P=M[O],F=O+1,Q=M[F];if(0>a(P,E))F<$&&0>a(Q,P)?(M[R]=Q,M[F]=E,R=F):(M[R]=P,M[O]=E,R=O);else if(F<$&&0>a(Q,E))M[R]=Q,M[F]=E,R=F;else break e}}return W}function a(M,W){var E=M.sortIndex-W.sortIndex;return E!==0?E:M.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,m=null,h=3,g=!1,j=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(M){for(var W=s(d);W!==null;){if(W.callback===null)n(d);else if(W.startTime<=M)n(d),W.sortIndex=W.expirationTime,t(c,W);else break;W=s(d)}}function N(M){if(y=!1,v(M),!j)if(s(c)!==null)j=!0,q(b);else{var W=s(d);W!==null&&Y(N,W.startTime-M)}}function b(M,W){j=!1,y&&(y=!1,x(k),k=-1),g=!0;var E=h;try{for(v(W),m=s(c);m!==null&&(!(m.expirationTime>W)||M&&!T());){var R=m.callback;if(typeof R=="function"){m.callback=null,h=m.priorityLevel;var $=R(m.expirationTime<=W);W=e.unstable_now(),typeof $=="function"?m.callback=$:m===s(c)&&n(c),v(W)}else n(c);m=s(c)}if(m!==null)var _=!0;else{var O=s(d);O!==null&&Y(N,O.startTime-W),_=!1}return _}finally{m=null,h=E,g=!1}}var C=!1,S=null,k=-1,D=5,L=-1;function T(){return!(e.unstable_now()-L<D)}function B(){if(S!==null){var M=e.unstable_now();L=M;var W=!0;try{W=S(!0,M)}finally{W?V():(C=!1,S=null)}}else C=!1}var V;if(typeof p=="function")V=function(){p(B)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,I=A.port2;A.port1.onmessage=B,V=function(){I.postMessage(null)}}else V=function(){w(B,0)};function q(M){S=M,C||(C=!0,V())}function Y(M,W){k=w(function(){M(e.unstable_now())},W)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){j||g||(j=!0,q(b))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return s(c)},e.unstable_next=function(M){switch(h){case 1:case 2:case 3:var W=3;break;default:W=h}var E=h;h=W;try{return M()}finally{h=E}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,W){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var E=h;h=M;try{return W()}finally{h=E}},e.unstable_scheduleCallback=function(M,W,E){var R=e.unstable_now();switch(typeof E=="object"&&E!==null?(E=E.delay,E=typeof E=="number"&&0<E?R+E:R):E=R,M){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=E+$,M={id:u++,callback:W,priorityLevel:M,startTime:E,expirationTime:$,sortIndex:-1},E>R?(M.sortIndex=E,t(d,M),s(c)===null&&M===s(d)&&(y?(x(k),k=-1):y=!0,Y(N,E-R))):(M.sortIndex=$,t(c,M),j||g||(j=!0,q(b))),M},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(M){var W=h;return function(){var E=h;h=W;try{return M.apply(this,arguments)}finally{h=E}}}})(Ub);zb.exports=Ub;var kS=zb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DS=f,Nr=kS;function se(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Vb=new Set,Ho={};function Ia(e,t){xi(e,t),xi(e+"Capture",t)}function xi(e,t){for(Ho[e]=t,e=0;e<t.length;e++)Vb.add(t[e])}var nn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Mh=Object.prototype.hasOwnProperty,AS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Xg={},Qg={};function TS(e){return Mh.call(Qg,e)?!0:Mh.call(Xg,e)?!1:AS.test(e)?Qg[e]=!0:(Xg[e]=!0,!1)}function _S(e,t,s,n){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function OS(e,t,s,n){if(t===null||typeof t>"u"||_S(e,t,s,n))return!0;if(n)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function tr(e,t,s,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Lt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Lt[e]=new tr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Lt[t]=new tr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Lt[e]=new tr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Lt[e]=new tr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Lt[e]=new tr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Lt[e]=new tr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Lt[e]=new tr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Lt[e]=new tr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Lt[e]=new tr(e,5,!1,e.toLowerCase(),null,!1,!1)});var vp=/[\-:]([a-z])/g;function yp(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(vp,yp);Lt[t]=new tr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(vp,yp);Lt[t]=new tr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(vp,yp);Lt[t]=new tr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Lt[e]=new tr(e,1,!1,e.toLowerCase(),null,!1,!1)});Lt.xlinkHref=new tr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Lt[e]=new tr(e,1,!1,e.toLowerCase(),null,!0,!0)});function bp(e,t,s,n){var a=Lt.hasOwnProperty(t)?Lt[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(OS(t,s,a,n)&&(s=null),n||a===null?TS(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):a.mustUseProperty?e[a.propertyName]=s===null?a.type===3?!1:"":s:(t=a.attributeName,n=a.attributeNamespace,s===null?e.removeAttribute(t):(a=a.type,s=a===3||a===4&&s===!0?"":""+s,n?e.setAttributeNS(n,t,s):e.setAttribute(t,s))))}var mn=DS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,oc=Symbol.for("react.element"),Ya=Symbol.for("react.portal"),qa=Symbol.for("react.fragment"),jp=Symbol.for("react.strict_mode"),Rh=Symbol.for("react.profiler"),Hb=Symbol.for("react.provider"),Wb=Symbol.for("react.context"),wp=Symbol.for("react.forward_ref"),Ph=Symbol.for("react.suspense"),Lh=Symbol.for("react.suspense_list"),Np=Symbol.for("react.memo"),bn=Symbol.for("react.lazy"),Yb=Symbol.for("react.offscreen"),Jg=Symbol.iterator;function so(e){return e===null||typeof e!="object"?null:(e=Jg&&e[Jg]||e["@@iterator"],typeof e=="function"?e:null)}var lt=Object.assign,km;function jo(e){if(km===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);km=t&&t[1]||""}return`
`+km+e}var Dm=!1;function Am(e,t){if(!e||Dm)return"";Dm=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Dm=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?jo(e):""}function MS(e){switch(e.tag){case 5:return jo(e.type);case 16:return jo("Lazy");case 13:return jo("Suspense");case 19:return jo("SuspenseList");case 0:case 2:case 15:return e=Am(e.type,!1),e;case 11:return e=Am(e.type.render,!1),e;case 1:return e=Am(e.type,!0),e;default:return""}}function Ih(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case qa:return"Fragment";case Ya:return"Portal";case Rh:return"Profiler";case jp:return"StrictMode";case Ph:return"Suspense";case Lh:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Wb:return(e.displayName||"Context")+".Consumer";case Hb:return(e._context.displayName||"Context")+".Provider";case wp:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Np:return t=e.displayName||null,t!==null?t:Ih(e.type)||"Memo";case bn:t=e._payload,e=e._init;try{return Ih(e(t))}catch{}}return null}function RS(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ih(t);case 8:return t===jp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function zn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function qb(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function PS(e){var t=qb(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var a=s.get,i=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function lc(e){e._valueTracker||(e._valueTracker=PS(e))}function Gb(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),n="";return e&&(n=qb(e)?e.checked?"true":"false":e.value),e=n,e!==s?(t.setValue(e),!0):!1}function hd(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function $h(e,t){var s=t.checked;return lt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function Zg(e,t){var s=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;s=zn(t.value!=null?t.value:s),e._wrapperState={initialChecked:n,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Kb(e,t){t=t.checked,t!=null&&bp(e,"checked",t,!1)}function Fh(e,t){Kb(e,t);var s=zn(t.value),n=t.type;if(s!=null)n==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Bh(e,t.type,s):t.hasOwnProperty("defaultValue")&&Bh(e,t.type,zn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function e0(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function Bh(e,t,s){(t!=="number"||hd(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var wo=Array.isArray;function ai(e,t,s,n){if(e=e.options,t){t={};for(var a=0;a<s.length;a++)t["$"+s[a]]=!0;for(s=0;s<e.length;s++)a=t.hasOwnProperty("$"+e[s].value),e[s].selected!==a&&(e[s].selected=a),a&&n&&(e[s].defaultSelected=!0)}else{for(s=""+zn(s),t=null,a=0;a<e.length;a++){if(e[a].value===s){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function zh(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(se(91));return lt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function t0(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(se(92));if(wo(s)){if(1<s.length)throw Error(se(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:zn(s)}}function Xb(e,t){var s=zn(t.value),n=zn(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),n!=null&&(e.defaultValue=""+n)}function r0(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Qb(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Uh(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Qb(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var cc,Jb=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,s,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(cc=cc||document.createElement("div"),cc.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=cc.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Wo(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var Do={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},LS=["Webkit","ms","Moz","O"];Object.keys(Do).forEach(function(e){LS.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Do[t]=Do[e]})});function Zb(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||Do.hasOwnProperty(e)&&Do[e]?(""+t).trim():t+"px"}function ej(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var n=s.indexOf("--")===0,a=Zb(s,t[s],n);s==="float"&&(s="cssFloat"),n?e.setProperty(s,a):e[s]=a}}var IS=lt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vh(e,t){if(t){if(IS[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(se(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(se(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(se(61))}if(t.style!=null&&typeof t.style!="object")throw Error(se(62))}}function Hh(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wh=null;function Cp(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Yh=null,ii=null,oi=null;function s0(e){if(e=Rl(e)){if(typeof Yh!="function")throw Error(se(280));var t=e.stateNode;t&&(t=fu(t),Yh(e.stateNode,e.type,t))}}function tj(e){ii?oi?oi.push(e):oi=[e]:ii=e}function rj(){if(ii){var e=ii,t=oi;if(oi=ii=null,s0(e),t)for(e=0;e<t.length;e++)s0(t[e])}}function sj(e,t){return e(t)}function nj(){}var Tm=!1;function aj(e,t,s){if(Tm)return e(t,s);Tm=!0;try{return sj(e,t,s)}finally{Tm=!1,(ii!==null||oi!==null)&&(nj(),rj())}}function Yo(e,t){var s=e.stateNode;if(s===null)return null;var n=fu(s);if(n===null)return null;s=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(se(231,t,typeof s));return s}var qh=!1;if(nn)try{var no={};Object.defineProperty(no,"passive",{get:function(){qh=!0}}),window.addEventListener("test",no,no),window.removeEventListener("test",no,no)}catch{qh=!1}function $S(e,t,s,n,a,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(s,d)}catch(u){this.onError(u)}}var Ao=!1,fd=null,pd=!1,Gh=null,FS={onError:function(e){Ao=!0,fd=e}};function BS(e,t,s,n,a,i,o,l,c){Ao=!1,fd=null,$S.apply(FS,arguments)}function zS(e,t,s,n,a,i,o,l,c){if(BS.apply(this,arguments),Ao){if(Ao){var d=fd;Ao=!1,fd=null}else throw Error(se(198));pd||(pd=!0,Gh=d)}}function $a(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function ij(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function n0(e){if($a(e)!==e)throw Error(se(188))}function US(e){var t=e.alternate;if(!t){if(t=$a(e),t===null)throw Error(se(188));return t!==e?null:e}for(var s=e,n=t;;){var a=s.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){s=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===s)return n0(a),e;if(i===n)return n0(a),t;i=i.sibling}throw Error(se(188))}if(s.return!==n.return)s=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===s){o=!0,s=a,n=i;break}if(l===n){o=!0,n=a,s=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===s){o=!0,s=i,n=a;break}if(l===n){o=!0,n=i,s=a;break}l=l.sibling}if(!o)throw Error(se(189))}}if(s.alternate!==n)throw Error(se(190))}if(s.tag!==3)throw Error(se(188));return s.stateNode.current===s?e:t}function oj(e){return e=US(e),e!==null?lj(e):null}function lj(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=lj(e);if(t!==null)return t;e=e.sibling}return null}var cj=Nr.unstable_scheduleCallback,a0=Nr.unstable_cancelCallback,VS=Nr.unstable_shouldYield,HS=Nr.unstable_requestPaint,pt=Nr.unstable_now,WS=Nr.unstable_getCurrentPriorityLevel,Sp=Nr.unstable_ImmediatePriority,dj=Nr.unstable_UserBlockingPriority,xd=Nr.unstable_NormalPriority,YS=Nr.unstable_LowPriority,uj=Nr.unstable_IdlePriority,du=null,Ts=null;function qS(e){if(Ts&&typeof Ts.onCommitFiberRoot=="function")try{Ts.onCommitFiberRoot(du,e,void 0,(e.current.flags&128)===128)}catch{}}var os=Math.clz32?Math.clz32:XS,GS=Math.log,KS=Math.LN2;function XS(e){return e>>>=0,e===0?32:31-(GS(e)/KS|0)|0}var dc=64,uc=4194304;function No(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function gd(e,t){var s=e.pendingLanes;if(s===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=s&268435455;if(o!==0){var l=o&~a;l!==0?n=No(l):(i&=o,i!==0&&(n=No(i)))}else o=s&~a,o!==0?n=No(o):i!==0&&(n=No(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)s=31-os(t),a=1<<s,n|=e[s],t&=~a;return n}function QS(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function JS(e,t){for(var s=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-os(i),l=1<<o,c=a[o];c===-1?(!(l&s)||l&n)&&(a[o]=QS(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Kh(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function mj(){var e=dc;return dc<<=1,!(dc&4194240)&&(dc=64),e}function _m(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function Ol(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-os(t),e[t]=s}function ZS(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<s;){var a=31-os(s),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,s&=~i}}function Ep(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var n=31-os(s),a=1<<n;a&t|e[n]&t&&(e[n]|=t),s&=~a}}var Fe=0;function hj(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var fj,kp,pj,xj,gj,Xh=!1,mc=[],Tn=null,_n=null,On=null,qo=new Map,Go=new Map,Nn=[],eE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function i0(e,t){switch(e){case"focusin":case"focusout":Tn=null;break;case"dragenter":case"dragleave":_n=null;break;case"mouseover":case"mouseout":On=null;break;case"pointerover":case"pointerout":qo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Go.delete(t.pointerId)}}function ao(e,t,s,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:s,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Rl(t),t!==null&&kp(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function tE(e,t,s,n,a){switch(t){case"focusin":return Tn=ao(Tn,e,t,s,n,a),!0;case"dragenter":return _n=ao(_n,e,t,s,n,a),!0;case"mouseover":return On=ao(On,e,t,s,n,a),!0;case"pointerover":var i=a.pointerId;return qo.set(i,ao(qo.get(i)||null,e,t,s,n,a)),!0;case"gotpointercapture":return i=a.pointerId,Go.set(i,ao(Go.get(i)||null,e,t,s,n,a)),!0}return!1}function vj(e){var t=ua(e.target);if(t!==null){var s=$a(t);if(s!==null){if(t=s.tag,t===13){if(t=ij(s),t!==null){e.blockedOn=t,gj(e.priority,function(){pj(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function $c(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=Qh(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var n=new s.constructor(s.type,s);Wh=n,s.target.dispatchEvent(n),Wh=null}else return t=Rl(s),t!==null&&kp(t),e.blockedOn=s,!1;t.shift()}return!0}function o0(e,t,s){$c(e)&&s.delete(t)}function rE(){Xh=!1,Tn!==null&&$c(Tn)&&(Tn=null),_n!==null&&$c(_n)&&(_n=null),On!==null&&$c(On)&&(On=null),qo.forEach(o0),Go.forEach(o0)}function io(e,t){e.blockedOn===t&&(e.blockedOn=null,Xh||(Xh=!0,Nr.unstable_scheduleCallback(Nr.unstable_NormalPriority,rE)))}function Ko(e){function t(a){return io(a,e)}if(0<mc.length){io(mc[0],e);for(var s=1;s<mc.length;s++){var n=mc[s];n.blockedOn===e&&(n.blockedOn=null)}}for(Tn!==null&&io(Tn,e),_n!==null&&io(_n,e),On!==null&&io(On,e),qo.forEach(t),Go.forEach(t),s=0;s<Nn.length;s++)n=Nn[s],n.blockedOn===e&&(n.blockedOn=null);for(;0<Nn.length&&(s=Nn[0],s.blockedOn===null);)vj(s),s.blockedOn===null&&Nn.shift()}var li=mn.ReactCurrentBatchConfig,vd=!0;function sE(e,t,s,n){var a=Fe,i=li.transition;li.transition=null;try{Fe=1,Dp(e,t,s,n)}finally{Fe=a,li.transition=i}}function nE(e,t,s,n){var a=Fe,i=li.transition;li.transition=null;try{Fe=4,Dp(e,t,s,n)}finally{Fe=a,li.transition=i}}function Dp(e,t,s,n){if(vd){var a=Qh(e,t,s,n);if(a===null)zm(e,t,n,yd,s),i0(e,n);else if(tE(a,e,t,s,n))n.stopPropagation();else if(i0(e,n),t&4&&-1<eE.indexOf(e)){for(;a!==null;){var i=Rl(a);if(i!==null&&fj(i),i=Qh(e,t,s,n),i===null&&zm(e,t,n,yd,s),i===a)break;a=i}a!==null&&n.stopPropagation()}else zm(e,t,n,null,s)}}var yd=null;function Qh(e,t,s,n){if(yd=null,e=Cp(n),e=ua(e),e!==null)if(t=$a(e),t===null)e=null;else if(s=t.tag,s===13){if(e=ij(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return yd=e,null}function yj(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(WS()){case Sp:return 1;case dj:return 4;case xd:case YS:return 16;case uj:return 536870912;default:return 16}default:return 16}}var Sn=null,Ap=null,Fc=null;function bj(){if(Fc)return Fc;var e,t=Ap,s=t.length,n,a="value"in Sn?Sn.value:Sn.textContent,i=a.length;for(e=0;e<s&&t[e]===a[e];e++);var o=s-e;for(n=1;n<=o&&t[s-n]===a[i-n];n++);return Fc=a.slice(e,1<n?1-n:void 0)}function Bc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function hc(){return!0}function l0(){return!1}function Er(e){function t(s,n,a,i,o){this._reactName=s,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(s=e[l],this[l]=s?s(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?hc:l0,this.isPropagationStopped=l0,this}return lt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=hc)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=hc)},persist:function(){},isPersistent:hc}),t}var Ti={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Tp=Er(Ti),Ml=lt({},Ti,{view:0,detail:0}),aE=Er(Ml),Om,Mm,oo,uu=lt({},Ml,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_p,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==oo&&(oo&&e.type==="mousemove"?(Om=e.screenX-oo.screenX,Mm=e.screenY-oo.screenY):Mm=Om=0,oo=e),Om)},movementY:function(e){return"movementY"in e?e.movementY:Mm}}),c0=Er(uu),iE=lt({},uu,{dataTransfer:0}),oE=Er(iE),lE=lt({},Ml,{relatedTarget:0}),Rm=Er(lE),cE=lt({},Ti,{animationName:0,elapsedTime:0,pseudoElement:0}),dE=Er(cE),uE=lt({},Ti,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),mE=Er(uE),hE=lt({},Ti,{data:0}),d0=Er(hE),fE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gE(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=xE[e])?!!t[e]:!1}function _p(){return gE}var vE=lt({},Ml,{key:function(e){if(e.key){var t=fE[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Bc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?pE[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_p,charCode:function(e){return e.type==="keypress"?Bc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Bc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),yE=Er(vE),bE=lt({},uu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),u0=Er(bE),jE=lt({},Ml,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_p}),wE=Er(jE),NE=lt({},Ti,{propertyName:0,elapsedTime:0,pseudoElement:0}),CE=Er(NE),SE=lt({},uu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),EE=Er(SE),kE=[9,13,27,32],Op=nn&&"CompositionEvent"in window,To=null;nn&&"documentMode"in document&&(To=document.documentMode);var DE=nn&&"TextEvent"in window&&!To,jj=nn&&(!Op||To&&8<To&&11>=To),m0=" ",h0=!1;function wj(e,t){switch(e){case"keyup":return kE.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nj(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ga=!1;function AE(e,t){switch(e){case"compositionend":return Nj(t);case"keypress":return t.which!==32?null:(h0=!0,m0);case"textInput":return e=t.data,e===m0&&h0?null:e;default:return null}}function TE(e,t){if(Ga)return e==="compositionend"||!Op&&wj(e,t)?(e=bj(),Fc=Ap=Sn=null,Ga=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jj&&t.locale!=="ko"?null:t.data;default:return null}}var _E={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function f0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!_E[e.type]:t==="textarea"}function Cj(e,t,s,n){tj(n),t=bd(t,"onChange"),0<t.length&&(s=new Tp("onChange","change",null,s,n),e.push({event:s,listeners:t}))}var _o=null,Xo=null;function OE(e){Pj(e,0)}function mu(e){var t=Qa(e);if(Gb(t))return e}function ME(e,t){if(e==="change")return t}var Sj=!1;if(nn){var Pm;if(nn){var Lm="oninput"in document;if(!Lm){var p0=document.createElement("div");p0.setAttribute("oninput","return;"),Lm=typeof p0.oninput=="function"}Pm=Lm}else Pm=!1;Sj=Pm&&(!document.documentMode||9<document.documentMode)}function x0(){_o&&(_o.detachEvent("onpropertychange",Ej),Xo=_o=null)}function Ej(e){if(e.propertyName==="value"&&mu(Xo)){var t=[];Cj(t,Xo,e,Cp(e)),aj(OE,t)}}function RE(e,t,s){e==="focusin"?(x0(),_o=t,Xo=s,_o.attachEvent("onpropertychange",Ej)):e==="focusout"&&x0()}function PE(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return mu(Xo)}function LE(e,t){if(e==="click")return mu(t)}function IE(e,t){if(e==="input"||e==="change")return mu(t)}function $E(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var cs=typeof Object.is=="function"?Object.is:$E;function Qo(e,t){if(cs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),n=Object.keys(t);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var a=s[n];if(!Mh.call(t,a)||!cs(e[a],t[a]))return!1}return!0}function g0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function v0(e,t){var s=g0(e);e=0;for(var n;s;){if(s.nodeType===3){if(n=e+s.textContent.length,e<=t&&n>=t)return{node:s,offset:t-e};e=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=g0(s)}}function kj(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?kj(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Dj(){for(var e=window,t=hd();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=hd(e.document)}return t}function Mp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function FE(e){var t=Dj(),s=e.focusedElem,n=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&kj(s.ownerDocument.documentElement,s)){if(n!==null&&Mp(s)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=s.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=v0(s,i);var o=v0(s,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var BE=nn&&"documentMode"in document&&11>=document.documentMode,Ka=null,Jh=null,Oo=null,Zh=!1;function y0(e,t,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Zh||Ka==null||Ka!==hd(n)||(n=Ka,"selectionStart"in n&&Mp(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Oo&&Qo(Oo,n)||(Oo=n,n=bd(Jh,"onSelect"),0<n.length&&(t=new Tp("onSelect","select",null,t,s),e.push({event:t,listeners:n}),t.target=Ka)))}function fc(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var Xa={animationend:fc("Animation","AnimationEnd"),animationiteration:fc("Animation","AnimationIteration"),animationstart:fc("Animation","AnimationStart"),transitionend:fc("Transition","TransitionEnd")},Im={},Aj={};nn&&(Aj=document.createElement("div").style,"AnimationEvent"in window||(delete Xa.animationend.animation,delete Xa.animationiteration.animation,delete Xa.animationstart.animation),"TransitionEvent"in window||delete Xa.transitionend.transition);function hu(e){if(Im[e])return Im[e];if(!Xa[e])return e;var t=Xa[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in Aj)return Im[e]=t[s];return e}var Tj=hu("animationend"),_j=hu("animationiteration"),Oj=hu("animationstart"),Mj=hu("transitionend"),Rj=new Map,b0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Yn(e,t){Rj.set(e,t),Ia(t,[e])}for(var $m=0;$m<b0.length;$m++){var Fm=b0[$m],zE=Fm.toLowerCase(),UE=Fm[0].toUpperCase()+Fm.slice(1);Yn(zE,"on"+UE)}Yn(Tj,"onAnimationEnd");Yn(_j,"onAnimationIteration");Yn(Oj,"onAnimationStart");Yn("dblclick","onDoubleClick");Yn("focusin","onFocus");Yn("focusout","onBlur");Yn(Mj,"onTransitionEnd");xi("onMouseEnter",["mouseout","mouseover"]);xi("onMouseLeave",["mouseout","mouseover"]);xi("onPointerEnter",["pointerout","pointerover"]);xi("onPointerLeave",["pointerout","pointerover"]);Ia("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ia("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ia("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ia("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ia("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ia("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Co="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Co));function j0(e,t,s){var n=e.type||"unknown-event";e.currentTarget=s,zS(n,t,void 0,e),e.currentTarget=null}function Pj(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var n=e[s],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;j0(a,l,d),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;j0(a,l,d),i=c}}}if(pd)throw e=Gh,pd=!1,Gh=null,e}function Xe(e,t){var s=t[nf];s===void 0&&(s=t[nf]=new Set);var n=e+"__bubble";s.has(n)||(Lj(t,e,2,!1),s.add(n))}function Bm(e,t,s){var n=0;t&&(n|=4),Lj(s,e,n,t)}var pc="_reactListening"+Math.random().toString(36).slice(2);function Jo(e){if(!e[pc]){e[pc]=!0,Vb.forEach(function(s){s!=="selectionchange"&&(VE.has(s)||Bm(s,!1,e),Bm(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[pc]||(t[pc]=!0,Bm("selectionchange",!1,t))}}function Lj(e,t,s,n){switch(yj(t)){case 1:var a=sE;break;case 4:a=nE;break;default:a=Dp}s=a.bind(null,t,s,e),a=void 0,!qh||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,s,{capture:!0,passive:a}):e.addEventListener(t,s,!0):a!==void 0?e.addEventListener(t,s,{passive:a}):e.addEventListener(t,s,!1)}function zm(e,t,s,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=ua(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}aj(function(){var d=i,u=Cp(s),m=[];e:{var h=Rj.get(e);if(h!==void 0){var g=Tp,j=e;switch(e){case"keypress":if(Bc(s)===0)break e;case"keydown":case"keyup":g=yE;break;case"focusin":j="focus",g=Rm;break;case"focusout":j="blur",g=Rm;break;case"beforeblur":case"afterblur":g=Rm;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=c0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=oE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=wE;break;case Tj:case _j:case Oj:g=dE;break;case Mj:g=CE;break;case"scroll":g=aE;break;case"wheel":g=EE;break;case"copy":case"cut":case"paste":g=mE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=u0}var y=(t&4)!==0,w=!y&&e==="scroll",x=y?h!==null?h+"Capture":null:h;y=[];for(var p=d,v;p!==null;){v=p;var N=v.stateNode;if(v.tag===5&&N!==null&&(v=N,x!==null&&(N=Yo(p,x),N!=null&&y.push(Zo(p,N,v)))),w)break;p=p.return}0<y.length&&(h=new g(h,j,null,s,u),m.push({event:h,listeners:y}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",h&&s!==Wh&&(j=s.relatedTarget||s.fromElement)&&(ua(j)||j[an]))break e;if((g||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,g?(j=s.relatedTarget||s.toElement,g=d,j=j?ua(j):null,j!==null&&(w=$a(j),j!==w||j.tag!==5&&j.tag!==6)&&(j=null)):(g=null,j=d),g!==j)){if(y=c0,N="onMouseLeave",x="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(y=u0,N="onPointerLeave",x="onPointerEnter",p="pointer"),w=g==null?h:Qa(g),v=j==null?h:Qa(j),h=new y(N,p+"leave",g,s,u),h.target=w,h.relatedTarget=v,N=null,ua(u)===d&&(y=new y(x,p+"enter",j,s,u),y.target=v,y.relatedTarget=w,N=y),w=N,g&&j)t:{for(y=g,x=j,p=0,v=y;v;v=Ua(v))p++;for(v=0,N=x;N;N=Ua(N))v++;for(;0<p-v;)y=Ua(y),p--;for(;0<v-p;)x=Ua(x),v--;for(;p--;){if(y===x||x!==null&&y===x.alternate)break t;y=Ua(y),x=Ua(x)}y=null}else y=null;g!==null&&w0(m,h,g,y,!1),j!==null&&w!==null&&w0(m,w,j,y,!0)}}e:{if(h=d?Qa(d):window,g=h.nodeName&&h.nodeName.toLowerCase(),g==="select"||g==="input"&&h.type==="file")var b=ME;else if(f0(h))if(Sj)b=IE;else{b=PE;var C=RE}else(g=h.nodeName)&&g.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(b=LE);if(b&&(b=b(e,d))){Cj(m,b,s,u);break e}C&&C(e,h,d),e==="focusout"&&(C=h._wrapperState)&&C.controlled&&h.type==="number"&&Bh(h,"number",h.value)}switch(C=d?Qa(d):window,e){case"focusin":(f0(C)||C.contentEditable==="true")&&(Ka=C,Jh=d,Oo=null);break;case"focusout":Oo=Jh=Ka=null;break;case"mousedown":Zh=!0;break;case"contextmenu":case"mouseup":case"dragend":Zh=!1,y0(m,s,u);break;case"selectionchange":if(BE)break;case"keydown":case"keyup":y0(m,s,u)}var S;if(Op)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Ga?wj(e,s)&&(k="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(k="onCompositionStart");k&&(jj&&s.locale!=="ko"&&(Ga||k!=="onCompositionStart"?k==="onCompositionEnd"&&Ga&&(S=bj()):(Sn=u,Ap="value"in Sn?Sn.value:Sn.textContent,Ga=!0)),C=bd(d,k),0<C.length&&(k=new d0(k,e,null,s,u),m.push({event:k,listeners:C}),S?k.data=S:(S=Nj(s),S!==null&&(k.data=S)))),(S=DE?AE(e,s):TE(e,s))&&(d=bd(d,"onBeforeInput"),0<d.length&&(u=new d0("onBeforeInput","beforeinput",null,s,u),m.push({event:u,listeners:d}),u.data=S))}Pj(m,t)})}function Zo(e,t,s){return{instance:e,listener:t,currentTarget:s}}function bd(e,t){for(var s=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Yo(e,s),i!=null&&n.unshift(Zo(e,i,a)),i=Yo(e,t),i!=null&&n.push(Zo(e,i,a))),e=e.return}return n}function Ua(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function w0(e,t,s,n,a){for(var i=t._reactName,o=[];s!==null&&s!==n;){var l=s,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,a?(c=Yo(s,i),c!=null&&o.unshift(Zo(s,c,l))):a||(c=Yo(s,i),c!=null&&o.push(Zo(s,c,l)))),s=s.return}o.length!==0&&e.push({event:t,listeners:o})}var HE=/\r\n?/g,WE=/\u0000|\uFFFD/g;function N0(e){return(typeof e=="string"?e:""+e).replace(HE,`
`).replace(WE,"")}function xc(e,t,s){if(t=N0(t),N0(e)!==t&&s)throw Error(se(425))}function jd(){}var ef=null,tf=null;function rf(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var sf=typeof setTimeout=="function"?setTimeout:void 0,YE=typeof clearTimeout=="function"?clearTimeout:void 0,C0=typeof Promise=="function"?Promise:void 0,qE=typeof queueMicrotask=="function"?queueMicrotask:typeof C0<"u"?function(e){return C0.resolve(null).then(e).catch(GE)}:sf;function GE(e){setTimeout(function(){throw e})}function Um(e,t){var s=t,n=0;do{var a=s.nextSibling;if(e.removeChild(s),a&&a.nodeType===8)if(s=a.data,s==="/$"){if(n===0){e.removeChild(a),Ko(t);return}n--}else s!=="$"&&s!=="$?"&&s!=="$!"||n++;s=a}while(s);Ko(t)}function Mn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function S0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var _i=Math.random().toString(36).slice(2),Es="__reactFiber$"+_i,el="__reactProps$"+_i,an="__reactContainer$"+_i,nf="__reactEvents$"+_i,KE="__reactListeners$"+_i,XE="__reactHandles$"+_i;function ua(e){var t=e[Es];if(t)return t;for(var s=e.parentNode;s;){if(t=s[an]||s[Es]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=S0(e);e!==null;){if(s=e[Es])return s;e=S0(e)}return t}e=s,s=e.parentNode}return null}function Rl(e){return e=e[Es]||e[an],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Qa(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(se(33))}function fu(e){return e[el]||null}var af=[],Ja=-1;function qn(e){return{current:e}}function Ze(e){0>Ja||(e.current=af[Ja],af[Ja]=null,Ja--)}function qe(e,t){Ja++,af[Ja]=e.current,e.current=t}var Un={},Wt=qn(Un),dr=qn(!1),Na=Un;function gi(e,t){var s=e.type.contextTypes;if(!s)return Un;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in s)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function ur(e){return e=e.childContextTypes,e!=null}function wd(){Ze(dr),Ze(Wt)}function E0(e,t,s){if(Wt.current!==Un)throw Error(se(168));qe(Wt,t),qe(dr,s)}function Ij(e,t,s){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return s;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(se(108,RS(e)||"Unknown",a));return lt({},s,n)}function Nd(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Un,Na=Wt.current,qe(Wt,e),qe(dr,dr.current),!0}function k0(e,t,s){var n=e.stateNode;if(!n)throw Error(se(169));s?(e=Ij(e,t,Na),n.__reactInternalMemoizedMergedChildContext=e,Ze(dr),Ze(Wt),qe(Wt,e)):Ze(dr),qe(dr,s)}var Xs=null,pu=!1,Vm=!1;function $j(e){Xs===null?Xs=[e]:Xs.push(e)}function QE(e){pu=!0,$j(e)}function Gn(){if(!Vm&&Xs!==null){Vm=!0;var e=0,t=Fe;try{var s=Xs;for(Fe=1;e<s.length;e++){var n=s[e];do n=n(!0);while(n!==null)}Xs=null,pu=!1}catch(a){throw Xs!==null&&(Xs=Xs.slice(e+1)),cj(Sp,Gn),a}finally{Fe=t,Vm=!1}}return null}var Za=[],ei=0,Cd=null,Sd=0,Lr=[],Ir=0,Ca=null,Qs=1,Js="";function oa(e,t){Za[ei++]=Sd,Za[ei++]=Cd,Cd=e,Sd=t}function Fj(e,t,s){Lr[Ir++]=Qs,Lr[Ir++]=Js,Lr[Ir++]=Ca,Ca=e;var n=Qs;e=Js;var a=32-os(n)-1;n&=~(1<<a),s+=1;var i=32-os(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,Qs=1<<32-os(t)+a|s<<a|n,Js=i+e}else Qs=1<<i|s<<a|n,Js=e}function Rp(e){e.return!==null&&(oa(e,1),Fj(e,1,0))}function Pp(e){for(;e===Cd;)Cd=Za[--ei],Za[ei]=null,Sd=Za[--ei],Za[ei]=null;for(;e===Ca;)Ca=Lr[--Ir],Lr[Ir]=null,Js=Lr[--Ir],Lr[Ir]=null,Qs=Lr[--Ir],Lr[Ir]=null}var wr=null,jr=null,st=!1,ns=null;function Bj(e,t){var s=Ur(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function D0(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,wr=e,jr=Mn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,wr=e,jr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=Ca!==null?{id:Qs,overflow:Js}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=Ur(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,wr=e,jr=null,!0):!1;default:return!1}}function of(e){return(e.mode&1)!==0&&(e.flags&128)===0}function lf(e){if(st){var t=jr;if(t){var s=t;if(!D0(e,t)){if(of(e))throw Error(se(418));t=Mn(s.nextSibling);var n=wr;t&&D0(e,t)?Bj(n,s):(e.flags=e.flags&-4097|2,st=!1,wr=e)}}else{if(of(e))throw Error(se(418));e.flags=e.flags&-4097|2,st=!1,wr=e}}}function A0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;wr=e}function gc(e){if(e!==wr)return!1;if(!st)return A0(e),st=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!rf(e.type,e.memoizedProps)),t&&(t=jr)){if(of(e))throw zj(),Error(se(418));for(;t;)Bj(e,t),t=Mn(t.nextSibling)}if(A0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(se(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){jr=Mn(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}jr=null}}else jr=wr?Mn(e.stateNode.nextSibling):null;return!0}function zj(){for(var e=jr;e;)e=Mn(e.nextSibling)}function vi(){jr=wr=null,st=!1}function Lp(e){ns===null?ns=[e]:ns.push(e)}var JE=mn.ReactCurrentBatchConfig;function lo(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(se(309));var n=s.stateNode}if(!n)throw Error(se(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(se(284));if(!s._owner)throw Error(se(290,e))}return e}function vc(e,t){throw e=Object.prototype.toString.call(t),Error(se(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function T0(e){var t=e._init;return t(e._payload)}function Uj(e){function t(x,p){if(e){var v=x.deletions;v===null?(x.deletions=[p],x.flags|=16):v.push(p)}}function s(x,p){if(!e)return null;for(;p!==null;)t(x,p),p=p.sibling;return null}function n(x,p){for(x=new Map;p!==null;)p.key!==null?x.set(p.key,p):x.set(p.index,p),p=p.sibling;return x}function a(x,p){return x=In(x,p),x.index=0,x.sibling=null,x}function i(x,p,v){return x.index=v,e?(v=x.alternate,v!==null?(v=v.index,v<p?(x.flags|=2,p):v):(x.flags|=2,p)):(x.flags|=1048576,p)}function o(x){return e&&x.alternate===null&&(x.flags|=2),x}function l(x,p,v,N){return p===null||p.tag!==6?(p=Xm(v,x.mode,N),p.return=x,p):(p=a(p,v),p.return=x,p)}function c(x,p,v,N){var b=v.type;return b===qa?u(x,p,v.props.children,N,v.key):p!==null&&(p.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===bn&&T0(b)===p.type)?(N=a(p,v.props),N.ref=lo(x,p,v),N.return=x,N):(N=qc(v.type,v.key,v.props,null,x.mode,N),N.ref=lo(x,p,v),N.return=x,N)}function d(x,p,v,N){return p===null||p.tag!==4||p.stateNode.containerInfo!==v.containerInfo||p.stateNode.implementation!==v.implementation?(p=Qm(v,x.mode,N),p.return=x,p):(p=a(p,v.children||[]),p.return=x,p)}function u(x,p,v,N,b){return p===null||p.tag!==7?(p=va(v,x.mode,N,b),p.return=x,p):(p=a(p,v),p.return=x,p)}function m(x,p,v){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Xm(""+p,x.mode,v),p.return=x,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case oc:return v=qc(p.type,p.key,p.props,null,x.mode,v),v.ref=lo(x,null,p),v.return=x,v;case Ya:return p=Qm(p,x.mode,v),p.return=x,p;case bn:var N=p._init;return m(x,N(p._payload),v)}if(wo(p)||so(p))return p=va(p,x.mode,v,null),p.return=x,p;vc(x,p)}return null}function h(x,p,v,N){var b=p!==null?p.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return b!==null?null:l(x,p,""+v,N);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case oc:return v.key===b?c(x,p,v,N):null;case Ya:return v.key===b?d(x,p,v,N):null;case bn:return b=v._init,h(x,p,b(v._payload),N)}if(wo(v)||so(v))return b!==null?null:u(x,p,v,N,null);vc(x,v)}return null}function g(x,p,v,N,b){if(typeof N=="string"&&N!==""||typeof N=="number")return x=x.get(v)||null,l(p,x,""+N,b);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case oc:return x=x.get(N.key===null?v:N.key)||null,c(p,x,N,b);case Ya:return x=x.get(N.key===null?v:N.key)||null,d(p,x,N,b);case bn:var C=N._init;return g(x,p,v,C(N._payload),b)}if(wo(N)||so(N))return x=x.get(v)||null,u(p,x,N,b,null);vc(p,N)}return null}function j(x,p,v,N){for(var b=null,C=null,S=p,k=p=0,D=null;S!==null&&k<v.length;k++){S.index>k?(D=S,S=null):D=S.sibling;var L=h(x,S,v[k],N);if(L===null){S===null&&(S=D);break}e&&S&&L.alternate===null&&t(x,S),p=i(L,p,k),C===null?b=L:C.sibling=L,C=L,S=D}if(k===v.length)return s(x,S),st&&oa(x,k),b;if(S===null){for(;k<v.length;k++)S=m(x,v[k],N),S!==null&&(p=i(S,p,k),C===null?b=S:C.sibling=S,C=S);return st&&oa(x,k),b}for(S=n(x,S);k<v.length;k++)D=g(S,x,k,v[k],N),D!==null&&(e&&D.alternate!==null&&S.delete(D.key===null?k:D.key),p=i(D,p,k),C===null?b=D:C.sibling=D,C=D);return e&&S.forEach(function(T){return t(x,T)}),st&&oa(x,k),b}function y(x,p,v,N){var b=so(v);if(typeof b!="function")throw Error(se(150));if(v=b.call(v),v==null)throw Error(se(151));for(var C=b=null,S=p,k=p=0,D=null,L=v.next();S!==null&&!L.done;k++,L=v.next()){S.index>k?(D=S,S=null):D=S.sibling;var T=h(x,S,L.value,N);if(T===null){S===null&&(S=D);break}e&&S&&T.alternate===null&&t(x,S),p=i(T,p,k),C===null?b=T:C.sibling=T,C=T,S=D}if(L.done)return s(x,S),st&&oa(x,k),b;if(S===null){for(;!L.done;k++,L=v.next())L=m(x,L.value,N),L!==null&&(p=i(L,p,k),C===null?b=L:C.sibling=L,C=L);return st&&oa(x,k),b}for(S=n(x,S);!L.done;k++,L=v.next())L=g(S,x,k,L.value,N),L!==null&&(e&&L.alternate!==null&&S.delete(L.key===null?k:L.key),p=i(L,p,k),C===null?b=L:C.sibling=L,C=L);return e&&S.forEach(function(B){return t(x,B)}),st&&oa(x,k),b}function w(x,p,v,N){if(typeof v=="object"&&v!==null&&v.type===qa&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case oc:e:{for(var b=v.key,C=p;C!==null;){if(C.key===b){if(b=v.type,b===qa){if(C.tag===7){s(x,C.sibling),p=a(C,v.props.children),p.return=x,x=p;break e}}else if(C.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===bn&&T0(b)===C.type){s(x,C.sibling),p=a(C,v.props),p.ref=lo(x,C,v),p.return=x,x=p;break e}s(x,C);break}else t(x,C);C=C.sibling}v.type===qa?(p=va(v.props.children,x.mode,N,v.key),p.return=x,x=p):(N=qc(v.type,v.key,v.props,null,x.mode,N),N.ref=lo(x,p,v),N.return=x,x=N)}return o(x);case Ya:e:{for(C=v.key;p!==null;){if(p.key===C)if(p.tag===4&&p.stateNode.containerInfo===v.containerInfo&&p.stateNode.implementation===v.implementation){s(x,p.sibling),p=a(p,v.children||[]),p.return=x,x=p;break e}else{s(x,p);break}else t(x,p);p=p.sibling}p=Qm(v,x.mode,N),p.return=x,x=p}return o(x);case bn:return C=v._init,w(x,p,C(v._payload),N)}if(wo(v))return j(x,p,v,N);if(so(v))return y(x,p,v,N);vc(x,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,p!==null&&p.tag===6?(s(x,p.sibling),p=a(p,v),p.return=x,x=p):(s(x,p),p=Xm(v,x.mode,N),p.return=x,x=p),o(x)):s(x,p)}return w}var yi=Uj(!0),Vj=Uj(!1),Ed=qn(null),kd=null,ti=null,Ip=null;function $p(){Ip=ti=kd=null}function Fp(e){var t=Ed.current;Ze(Ed),e._currentValue=t}function cf(e,t,s){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===s)break;e=e.return}}function ci(e,t){kd=e,Ip=ti=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(cr=!0),e.firstContext=null)}function Hr(e){var t=e._currentValue;if(Ip!==e)if(e={context:e,memoizedValue:t,next:null},ti===null){if(kd===null)throw Error(se(308));ti=e,kd.dependencies={lanes:0,firstContext:e}}else ti=ti.next=e;return t}var ma=null;function Bp(e){ma===null?ma=[e]:ma.push(e)}function Hj(e,t,s,n){var a=t.interleaved;return a===null?(s.next=s,Bp(t)):(s.next=a.next,a.next=s),t.interleaved=s,on(e,n)}function on(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var jn=!1;function zp(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Wj(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function tn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Rn(e,t,s){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Re&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,on(e,s)}return a=n.interleaved,a===null?(t.next=t,Bp(n)):(t.next=a.next,a.next=t),n.interleaved=t,on(e,s)}function zc(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,s|=n,t.lanes=s,Ep(e,s)}}function _0(e,t){var s=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var a=null,i=null;if(s=s.firstBaseUpdate,s!==null){do{var o={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};i===null?a=i=o:i=i.next=o,s=s.next}while(s!==null);i===null?a=i=t:i=i.next=t}else a=i=t;s={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function Dd(e,t,s,n){var a=e.updateQueue;jn=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(i!==null){var m=a.baseState;o=0,u=d=c=null,l=i;do{var h=l.lane,g=l.eventTime;if((n&h)===h){u!==null&&(u=u.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var j=e,y=l;switch(h=t,g=s,y.tag){case 1:if(j=y.payload,typeof j=="function"){m=j.call(g,m,h);break e}m=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=y.payload,h=typeof j=="function"?j.call(g,m,h):j,h==null)break e;m=lt({},m,h);break e;case 2:jn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[l]:h.push(l))}else g={eventTime:g,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=g,c=m):u=u.next=g,o|=h;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;h=l,l=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(u===null&&(c=m),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Ea|=o,e.lanes=o,e.memoizedState=m}}function O0(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=s,typeof a!="function")throw Error(se(191,a));a.call(n)}}}var Pl={},_s=qn(Pl),tl=qn(Pl),rl=qn(Pl);function ha(e){if(e===Pl)throw Error(se(174));return e}function Up(e,t){switch(qe(rl,t),qe(tl,e),qe(_s,Pl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Uh(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Uh(t,e)}Ze(_s),qe(_s,t)}function bi(){Ze(_s),Ze(tl),Ze(rl)}function Yj(e){ha(rl.current);var t=ha(_s.current),s=Uh(t,e.type);t!==s&&(qe(tl,e),qe(_s,s))}function Vp(e){tl.current===e&&(Ze(_s),Ze(tl))}var it=qn(0);function Ad(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Hm=[];function Hp(){for(var e=0;e<Hm.length;e++)Hm[e]._workInProgressVersionPrimary=null;Hm.length=0}var Uc=mn.ReactCurrentDispatcher,Wm=mn.ReactCurrentBatchConfig,Sa=0,ot=null,wt=null,At=null,Td=!1,Mo=!1,sl=0,ZE=0;function Ft(){throw Error(se(321))}function Wp(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!cs(e[s],t[s]))return!1;return!0}function Yp(e,t,s,n,a,i){if(Sa=i,ot=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Uc.current=e===null||e.memoizedState===null?sk:nk,e=s(n,a),Mo){i=0;do{if(Mo=!1,sl=0,25<=i)throw Error(se(301));i+=1,At=wt=null,t.updateQueue=null,Uc.current=ak,e=s(n,a)}while(Mo)}if(Uc.current=_d,t=wt!==null&&wt.next!==null,Sa=0,At=wt=ot=null,Td=!1,t)throw Error(se(300));return e}function qp(){var e=sl!==0;return sl=0,e}function Cs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?ot.memoizedState=At=e:At=At.next=e,At}function Wr(){if(wt===null){var e=ot.alternate;e=e!==null?e.memoizedState:null}else e=wt.next;var t=At===null?ot.memoizedState:At.next;if(t!==null)At=t,wt=e;else{if(e===null)throw Error(se(310));wt=e,e={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},At===null?ot.memoizedState=At=e:At=At.next=e}return At}function nl(e,t){return typeof t=="function"?t(e):t}function Ym(e){var t=Wr(),s=t.queue;if(s===null)throw Error(se(311));s.lastRenderedReducer=e;var n=wt,a=n.baseQueue,i=s.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,s.pending=null}if(a!==null){i=a.next,n=n.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((Sa&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=m,o=n):c=c.next=m,ot.lanes|=u,Ea|=u}d=d.next}while(d!==null&&d!==i);c===null?o=n:c.next=l,cs(n,t.memoizedState)||(cr=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,s.lastRenderedState=n}if(e=s.interleaved,e!==null){a=e;do i=a.lane,ot.lanes|=i,Ea|=i,a=a.next;while(a!==e)}else a===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function qm(e){var t=Wr(),s=t.queue;if(s===null)throw Error(se(311));s.lastRenderedReducer=e;var n=s.dispatch,a=s.pending,i=t.memoizedState;if(a!==null){s.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);cs(i,t.memoizedState)||(cr=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),s.lastRenderedState=i}return[i,n]}function qj(){}function Gj(e,t){var s=ot,n=Wr(),a=t(),i=!cs(n.memoizedState,a);if(i&&(n.memoizedState=a,cr=!0),n=n.queue,Gp(Qj.bind(null,s,n,e),[e]),n.getSnapshot!==t||i||At!==null&&At.memoizedState.tag&1){if(s.flags|=2048,al(9,Xj.bind(null,s,n,a,t),void 0,null),_t===null)throw Error(se(349));Sa&30||Kj(s,t,a)}return a}function Kj(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=ot.updateQueue,t===null?(t={lastEffect:null,stores:null},ot.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function Xj(e,t,s,n){t.value=s,t.getSnapshot=n,Jj(t)&&Zj(e)}function Qj(e,t,s){return s(function(){Jj(t)&&Zj(e)})}function Jj(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!cs(e,s)}catch{return!0}}function Zj(e){var t=on(e,1);t!==null&&ls(t,e,1,-1)}function M0(e){var t=Cs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:nl,lastRenderedState:e},t.queue=e,e=e.dispatch=rk.bind(null,ot,e),[t.memoizedState,e]}function al(e,t,s,n){return e={tag:e,create:t,destroy:s,deps:n,next:null},t=ot.updateQueue,t===null?(t={lastEffect:null,stores:null},ot.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(n=s.next,s.next=e,e.next=n,t.lastEffect=e)),e}function ew(){return Wr().memoizedState}function Vc(e,t,s,n){var a=Cs();ot.flags|=e,a.memoizedState=al(1|t,s,void 0,n===void 0?null:n)}function xu(e,t,s,n){var a=Wr();n=n===void 0?null:n;var i=void 0;if(wt!==null){var o=wt.memoizedState;if(i=o.destroy,n!==null&&Wp(n,o.deps)){a.memoizedState=al(t,s,i,n);return}}ot.flags|=e,a.memoizedState=al(1|t,s,i,n)}function R0(e,t){return Vc(8390656,8,e,t)}function Gp(e,t){return xu(2048,8,e,t)}function tw(e,t){return xu(4,2,e,t)}function rw(e,t){return xu(4,4,e,t)}function sw(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function nw(e,t,s){return s=s!=null?s.concat([e]):null,xu(4,4,sw.bind(null,t,e),s)}function Kp(){}function aw(e,t){var s=Wr();t=t===void 0?null:t;var n=s.memoizedState;return n!==null&&t!==null&&Wp(t,n[1])?n[0]:(s.memoizedState=[e,t],e)}function iw(e,t){var s=Wr();t=t===void 0?null:t;var n=s.memoizedState;return n!==null&&t!==null&&Wp(t,n[1])?n[0]:(e=e(),s.memoizedState=[e,t],e)}function ow(e,t,s){return Sa&21?(cs(s,t)||(s=mj(),ot.lanes|=s,Ea|=s,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,cr=!0),e.memoizedState=s)}function ek(e,t){var s=Fe;Fe=s!==0&&4>s?s:4,e(!0);var n=Wm.transition;Wm.transition={};try{e(!1),t()}finally{Fe=s,Wm.transition=n}}function lw(){return Wr().memoizedState}function tk(e,t,s){var n=Ln(e);if(s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},cw(e))dw(t,s);else if(s=Hj(e,t,s,n),s!==null){var a=Zt();ls(s,e,n,a),uw(s,t,n)}}function rk(e,t,s){var n=Ln(e),a={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if(cw(e))dw(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,s);if(a.hasEagerState=!0,a.eagerState=l,cs(l,o)){var c=t.interleaved;c===null?(a.next=a,Bp(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}s=Hj(e,t,a,n),s!==null&&(a=Zt(),ls(s,e,n,a),uw(s,t,n))}}function cw(e){var t=e.alternate;return e===ot||t!==null&&t===ot}function dw(e,t){Mo=Td=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function uw(e,t,s){if(s&4194240){var n=t.lanes;n&=e.pendingLanes,s|=n,t.lanes=s,Ep(e,s)}}var _d={readContext:Hr,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useInsertionEffect:Ft,useLayoutEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useMutableSource:Ft,useSyncExternalStore:Ft,useId:Ft,unstable_isNewReconciler:!1},sk={readContext:Hr,useCallback:function(e,t){return Cs().memoizedState=[e,t===void 0?null:t],e},useContext:Hr,useEffect:R0,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,Vc(4194308,4,sw.bind(null,t,e),s)},useLayoutEffect:function(e,t){return Vc(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vc(4,2,e,t)},useMemo:function(e,t){var s=Cs();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var n=Cs();return t=s!==void 0?s(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=tk.bind(null,ot,e),[n.memoizedState,e]},useRef:function(e){var t=Cs();return e={current:e},t.memoizedState=e},useState:M0,useDebugValue:Kp,useDeferredValue:function(e){return Cs().memoizedState=e},useTransition:function(){var e=M0(!1),t=e[0];return e=ek.bind(null,e[1]),Cs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var n=ot,a=Cs();if(st){if(s===void 0)throw Error(se(407));s=s()}else{if(s=t(),_t===null)throw Error(se(349));Sa&30||Kj(n,t,s)}a.memoizedState=s;var i={value:s,getSnapshot:t};return a.queue=i,R0(Qj.bind(null,n,i,e),[e]),n.flags|=2048,al(9,Xj.bind(null,n,i,s,t),void 0,null),s},useId:function(){var e=Cs(),t=_t.identifierPrefix;if(st){var s=Js,n=Qs;s=(n&~(1<<32-os(n)-1)).toString(32)+s,t=":"+t+"R"+s,s=sl++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=ZE++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},nk={readContext:Hr,useCallback:aw,useContext:Hr,useEffect:Gp,useImperativeHandle:nw,useInsertionEffect:tw,useLayoutEffect:rw,useMemo:iw,useReducer:Ym,useRef:ew,useState:function(){return Ym(nl)},useDebugValue:Kp,useDeferredValue:function(e){var t=Wr();return ow(t,wt.memoizedState,e)},useTransition:function(){var e=Ym(nl)[0],t=Wr().memoizedState;return[e,t]},useMutableSource:qj,useSyncExternalStore:Gj,useId:lw,unstable_isNewReconciler:!1},ak={readContext:Hr,useCallback:aw,useContext:Hr,useEffect:Gp,useImperativeHandle:nw,useInsertionEffect:tw,useLayoutEffect:rw,useMemo:iw,useReducer:qm,useRef:ew,useState:function(){return qm(nl)},useDebugValue:Kp,useDeferredValue:function(e){var t=Wr();return wt===null?t.memoizedState=e:ow(t,wt.memoizedState,e)},useTransition:function(){var e=qm(nl)[0],t=Wr().memoizedState;return[e,t]},useMutableSource:qj,useSyncExternalStore:Gj,useId:lw,unstable_isNewReconciler:!1};function ts(e,t){if(e&&e.defaultProps){t=lt({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}function df(e,t,s,n){t=e.memoizedState,s=s(n,t),s=s==null?t:lt({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var gu={isMounted:function(e){return(e=e._reactInternals)?$a(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var n=Zt(),a=Ln(e),i=tn(n,a);i.payload=t,s!=null&&(i.callback=s),t=Rn(e,i,a),t!==null&&(ls(t,e,a,n),zc(t,e,a))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var n=Zt(),a=Ln(e),i=tn(n,a);i.tag=1,i.payload=t,s!=null&&(i.callback=s),t=Rn(e,i,a),t!==null&&(ls(t,e,a,n),zc(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=Zt(),n=Ln(e),a=tn(s,n);a.tag=2,t!=null&&(a.callback=t),t=Rn(e,a,n),t!==null&&(ls(t,e,n,s),zc(t,e,n))}};function P0(e,t,s,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!Qo(s,n)||!Qo(a,i):!0}function mw(e,t,s){var n=!1,a=Un,i=t.contextType;return typeof i=="object"&&i!==null?i=Hr(i):(a=ur(t)?Na:Wt.current,n=t.contextTypes,i=(n=n!=null)?gi(e,a):Un),t=new t(s,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=gu,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function L0(e,t,s,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,n),t.state!==e&&gu.enqueueReplaceState(t,t.state,null)}function uf(e,t,s,n){var a=e.stateNode;a.props=s,a.state=e.memoizedState,a.refs={},zp(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=Hr(i):(i=ur(t)?Na:Wt.current,a.context=gi(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(df(e,t,i,s),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&gu.enqueueReplaceState(a,a.state,null),Dd(e,s,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function ji(e,t){try{var s="",n=t;do s+=MS(n),n=n.return;while(n);var a=s}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function Gm(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function mf(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var ik=typeof WeakMap=="function"?WeakMap:Map;function hw(e,t,s){s=tn(-1,s),s.tag=3,s.payload={element:null};var n=t.value;return s.callback=function(){Md||(Md=!0,wf=n),mf(e,t)},s}function fw(e,t,s){s=tn(-1,s),s.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;s.payload=function(){return n(a)},s.callback=function(){mf(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(s.callback=function(){mf(e,t),typeof n!="function"&&(Pn===null?Pn=new Set([this]):Pn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),s}function I0(e,t,s){var n=e.pingCache;if(n===null){n=e.pingCache=new ik;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(s)||(a.add(s),e=bk.bind(null,e,t,s),t.then(e,e))}function $0(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function F0(e,t,s,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=tn(-1,1),t.tag=2,Rn(s,t,1))),s.lanes|=1),e)}var ok=mn.ReactCurrentOwner,cr=!1;function Qt(e,t,s,n){t.child=e===null?Vj(t,null,s,n):yi(t,e.child,s,n)}function B0(e,t,s,n,a){s=s.render;var i=t.ref;return ci(t,a),n=Yp(e,t,s,n,i,a),s=qp(),e!==null&&!cr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,ln(e,t,a)):(st&&s&&Rp(t),t.flags|=1,Qt(e,t,n,a),t.child)}function z0(e,t,s,n,a){if(e===null){var i=s.type;return typeof i=="function"&&!sx(i)&&i.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=i,pw(e,t,i,n,a)):(e=qc(s.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(s=s.compare,s=s!==null?s:Qo,s(o,n)&&e.ref===t.ref)return ln(e,t,a)}return t.flags|=1,e=In(i,n),e.ref=t.ref,e.return=t,t.child=e}function pw(e,t,s,n,a){if(e!==null){var i=e.memoizedProps;if(Qo(i,n)&&e.ref===t.ref)if(cr=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(cr=!0);else return t.lanes=e.lanes,ln(e,t,a)}return hf(e,t,s,n,a)}function xw(e,t,s){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},qe(si,br),br|=s;else{if(!(s&1073741824))return e=i!==null?i.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,qe(si,br),br|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:s,qe(si,br),br|=n}else i!==null?(n=i.baseLanes|s,t.memoizedState=null):n=s,qe(si,br),br|=n;return Qt(e,t,a,s),t.child}function gw(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function hf(e,t,s,n,a){var i=ur(s)?Na:Wt.current;return i=gi(t,i),ci(t,a),s=Yp(e,t,s,n,i,a),n=qp(),e!==null&&!cr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,ln(e,t,a)):(st&&n&&Rp(t),t.flags|=1,Qt(e,t,s,a),t.child)}function U0(e,t,s,n,a){if(ur(s)){var i=!0;Nd(t)}else i=!1;if(ci(t,a),t.stateNode===null)Hc(e,t),mw(t,s,n),uf(t,s,n,a),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=s.contextType;typeof d=="object"&&d!==null?d=Hr(d):(d=ur(s)?Na:Wt.current,d=gi(t,d));var u=s.getDerivedStateFromProps,m=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==d)&&L0(t,o,n,d),jn=!1;var h=t.memoizedState;o.state=h,Dd(t,n,o,a),c=t.memoizedState,l!==n||h!==c||dr.current||jn?(typeof u=="function"&&(df(t,s,u,n),c=t.memoizedState),(l=jn||P0(t,s,l,n,h,c,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=d,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,Wj(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:ts(t.type,l),o.props=d,m=t.pendingProps,h=o.context,c=s.contextType,typeof c=="object"&&c!==null?c=Hr(c):(c=ur(s)?Na:Wt.current,c=gi(t,c));var g=s.getDerivedStateFromProps;(u=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||h!==c)&&L0(t,o,n,c),jn=!1,h=t.memoizedState,o.state=h,Dd(t,n,o,a);var j=t.memoizedState;l!==m||h!==j||dr.current||jn?(typeof g=="function"&&(df(t,s,g,n),j=t.memoizedState),(d=jn||P0(t,s,d,n,h,j,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,j,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,j,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=j),o.props=n,o.state=j,o.context=c,n=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return ff(e,t,s,n,i,a)}function ff(e,t,s,n,a,i){gw(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&k0(t,s,!1),ln(e,t,i);n=t.stateNode,ok.current=t;var l=o&&typeof s.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=yi(t,e.child,null,i),t.child=yi(t,null,l,i)):Qt(e,t,l,i),t.memoizedState=n.state,a&&k0(t,s,!0),t.child}function vw(e){var t=e.stateNode;t.pendingContext?E0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&E0(e,t.context,!1),Up(e,t.containerInfo)}function V0(e,t,s,n,a){return vi(),Lp(a),t.flags|=256,Qt(e,t,s,n),t.child}var pf={dehydrated:null,treeContext:null,retryLane:0};function xf(e){return{baseLanes:e,cachePool:null,transitions:null}}function yw(e,t,s){var n=t.pendingProps,a=it.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),qe(it,a&1),e===null)return lf(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=bu(o,n,0,null),e=va(e,n,s,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=xf(s),t.memoizedState=pf,e):Xp(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return lk(e,t,o,n,l,a,s);if(i){i=n.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=In(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=In(l,i):(i=va(i,o,s,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?xf(s):{baseLanes:o.baseLanes|s,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~s,t.memoizedState=pf,n}return i=e.child,e=i.sibling,n=In(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=s),n.return=t,n.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n}function Xp(e,t){return t=bu({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function yc(e,t,s,n){return n!==null&&Lp(n),yi(t,e.child,null,s),e=Xp(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function lk(e,t,s,n,a,i,o){if(s)return t.flags&256?(t.flags&=-257,n=Gm(Error(se(422))),yc(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=bu({mode:"visible",children:n.children},a,0,null),i=va(i,a,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&yi(t,e.child,null,o),t.child.memoizedState=xf(o),t.memoizedState=pf,i);if(!(t.mode&1))return yc(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(se(419)),n=Gm(i,n,void 0),yc(e,t,o,n)}if(l=(o&e.childLanes)!==0,cr||l){if(n=_t,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,on(e,a),ls(n,e,a,-1))}return rx(),n=Gm(Error(se(421))),yc(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=jk.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,jr=Mn(a.nextSibling),wr=t,st=!0,ns=null,e!==null&&(Lr[Ir++]=Qs,Lr[Ir++]=Js,Lr[Ir++]=Ca,Qs=e.id,Js=e.overflow,Ca=t),t=Xp(t,n.children),t.flags|=4096,t)}function H0(e,t,s){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),cf(e.return,t,s)}function Km(e,t,s,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=s,i.tailMode=a)}function bw(e,t,s){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(Qt(e,t,n.children,s),n=it.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&H0(e,s,t);else if(e.tag===19)H0(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(qe(it,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(s=t.child,a=null;s!==null;)e=s.alternate,e!==null&&Ad(e)===null&&(a=s),s=s.sibling;s=a,s===null?(a=t.child,t.child=null):(a=s.sibling,s.sibling=null),Km(t,!1,a,s,i);break;case"backwards":for(s=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Ad(e)===null){t.child=a;break}e=a.sibling,a.sibling=s,s=a,a=e}Km(t,!0,s,null,i);break;case"together":Km(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Hc(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ln(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Ea|=t.lanes,!(s&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(se(153));if(t.child!==null){for(e=t.child,s=In(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=In(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function ck(e,t,s){switch(t.tag){case 3:vw(t),vi();break;case 5:Yj(t);break;case 1:ur(t.type)&&Nd(t);break;case 4:Up(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;qe(Ed,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(qe(it,it.current&1),t.flags|=128,null):s&t.child.childLanes?yw(e,t,s):(qe(it,it.current&1),e=ln(e,t,s),e!==null?e.sibling:null);qe(it,it.current&1);break;case 19:if(n=(s&t.childLanes)!==0,e.flags&128){if(n)return bw(e,t,s);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),qe(it,it.current),n)break;return null;case 22:case 23:return t.lanes=0,xw(e,t,s)}return ln(e,t,s)}var jw,gf,ww,Nw;jw=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};gf=function(){};ww=function(e,t,s,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,ha(_s.current);var i=null;switch(s){case"input":a=$h(e,a),n=$h(e,n),i=[];break;case"select":a=lt({},a,{value:void 0}),n=lt({},n,{value:void 0}),i=[];break;case"textarea":a=zh(e,a),n=zh(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=jd)}Vh(s,n);var o;s=null;for(d in a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var l=a[d];for(o in l)l.hasOwnProperty(o)&&(s||(s={}),s[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ho.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(l=a!=null?a[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(s||(s={}),s[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(s||(s={}),s[o]=c[o])}else s||(i||(i=[]),i.push(d,s)),s=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ho.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Xe("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}s&&(i=i||[]).push("style",s);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};Nw=function(e,t,s,n){s!==n&&(t.flags|=4)};function co(e,t){if(!st)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Bt(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,n=0;if(t)for(var a=e.child;a!==null;)s|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)s|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=s,t}function dk(e,t,s){var n=t.pendingProps;switch(Pp(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(t),null;case 1:return ur(t.type)&&wd(),Bt(t),null;case 3:return n=t.stateNode,bi(),Ze(dr),Ze(Wt),Hp(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(gc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ns!==null&&(Sf(ns),ns=null))),gf(e,t),Bt(t),null;case 5:Vp(t);var a=ha(rl.current);if(s=t.type,e!==null&&t.stateNode!=null)ww(e,t,s,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(se(166));return Bt(t),null}if(e=ha(_s.current),gc(t)){n=t.stateNode,s=t.type;var i=t.memoizedProps;switch(n[Es]=t,n[el]=i,e=(t.mode&1)!==0,s){case"dialog":Xe("cancel",n),Xe("close",n);break;case"iframe":case"object":case"embed":Xe("load",n);break;case"video":case"audio":for(a=0;a<Co.length;a++)Xe(Co[a],n);break;case"source":Xe("error",n);break;case"img":case"image":case"link":Xe("error",n),Xe("load",n);break;case"details":Xe("toggle",n);break;case"input":Zg(n,i),Xe("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Xe("invalid",n);break;case"textarea":t0(n,i),Xe("invalid",n)}Vh(s,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&xc(n.textContent,l,e),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&xc(n.textContent,l,e),a=["children",""+l]):Ho.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Xe("scroll",n)}switch(s){case"input":lc(n),e0(n,i,!0);break;case"textarea":lc(n),r0(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=jd)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Qb(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(s,{is:n.is}):(e=o.createElement(s),s==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,s),e[Es]=t,e[el]=n,jw(e,t,!1,!1),t.stateNode=e;e:{switch(o=Hh(s,n),s){case"dialog":Xe("cancel",e),Xe("close",e),a=n;break;case"iframe":case"object":case"embed":Xe("load",e),a=n;break;case"video":case"audio":for(a=0;a<Co.length;a++)Xe(Co[a],e);a=n;break;case"source":Xe("error",e),a=n;break;case"img":case"image":case"link":Xe("error",e),Xe("load",e),a=n;break;case"details":Xe("toggle",e),a=n;break;case"input":Zg(e,n),a=$h(e,n),Xe("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=lt({},n,{value:void 0}),Xe("invalid",e);break;case"textarea":t0(e,n),a=zh(e,n),Xe("invalid",e);break;default:a=n}Vh(s,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?ej(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Jb(e,c)):i==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&Wo(e,c):typeof c=="number"&&Wo(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ho.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Xe("scroll",e):c!=null&&bp(e,i,c,o))}switch(s){case"input":lc(e),e0(e,n,!1);break;case"textarea":lc(e),r0(e);break;case"option":n.value!=null&&e.setAttribute("value",""+zn(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?ai(e,!!n.multiple,i,!1):n.defaultValue!=null&&ai(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=jd)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Bt(t),null;case 6:if(e&&t.stateNode!=null)Nw(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(se(166));if(s=ha(rl.current),ha(_s.current),gc(t)){if(n=t.stateNode,s=t.memoizedProps,n[Es]=t,(i=n.nodeValue!==s)&&(e=wr,e!==null))switch(e.tag){case 3:xc(n.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&xc(n.nodeValue,s,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(s.nodeType===9?s:s.ownerDocument).createTextNode(n),n[Es]=t,t.stateNode=n}return Bt(t),null;case 13:if(Ze(it),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(st&&jr!==null&&t.mode&1&&!(t.flags&128))zj(),vi(),t.flags|=98560,i=!1;else if(i=gc(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(se(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(se(317));i[Es]=t}else vi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Bt(t),i=!1}else ns!==null&&(Sf(ns),ns=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=s,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||it.current&1?Ct===0&&(Ct=3):rx())),t.updateQueue!==null&&(t.flags|=4),Bt(t),null);case 4:return bi(),gf(e,t),e===null&&Jo(t.stateNode.containerInfo),Bt(t),null;case 10:return Fp(t.type._context),Bt(t),null;case 17:return ur(t.type)&&wd(),Bt(t),null;case 19:if(Ze(it),i=t.memoizedState,i===null)return Bt(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)co(i,!1);else{if(Ct!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Ad(e),o!==null){for(t.flags|=128,co(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=s,s=t.child;s!==null;)i=s,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return qe(it,it.current&1|2),t.child}e=e.sibling}i.tail!==null&&pt()>wi&&(t.flags|=128,n=!0,co(i,!1),t.lanes=4194304)}else{if(!n)if(e=Ad(o),e!==null){if(t.flags|=128,n=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),co(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!st)return Bt(t),null}else 2*pt()-i.renderingStartTime>wi&&s!==1073741824&&(t.flags|=128,n=!0,co(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(s=i.last,s!==null?s.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=pt(),t.sibling=null,s=it.current,qe(it,n?s&1|2:s&1),t):(Bt(t),null);case 22:case 23:return tx(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?br&1073741824&&(Bt(t),t.subtreeFlags&6&&(t.flags|=8192)):Bt(t),null;case 24:return null;case 25:return null}throw Error(se(156,t.tag))}function uk(e,t){switch(Pp(t),t.tag){case 1:return ur(t.type)&&wd(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return bi(),Ze(dr),Ze(Wt),Hp(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Vp(t),null;case 13:if(Ze(it),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(se(340));vi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ze(it),null;case 4:return bi(),null;case 10:return Fp(t.type._context),null;case 22:case 23:return tx(),null;case 24:return null;default:return null}}var bc=!1,Ut=!1,mk=typeof WeakSet=="function"?WeakSet:Set,he=null;function ri(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(n){dt(e,t,n)}else s.current=null}function vf(e,t,s){try{s()}catch(n){dt(e,t,n)}}var W0=!1;function hk(e,t){if(ef=vd,e=Dj(),Mp(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{s.nodeType,i.nodeType}catch{s=null;break e}var o=0,l=-1,c=-1,d=0,u=0,m=e,h=null;t:for(;;){for(var g;m!==s||a!==0&&m.nodeType!==3||(l=o+a),m!==i||n!==0&&m.nodeType!==3||(c=o+n),m.nodeType===3&&(o+=m.nodeValue.length),(g=m.firstChild)!==null;)h=m,m=g;for(;;){if(m===e)break t;if(h===s&&++d===a&&(l=o),h===i&&++u===n&&(c=o),(g=m.nextSibling)!==null)break;m=h,h=m.parentNode}m=g}s=l===-1||c===-1?null:{start:l,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(tf={focusedElem:e,selectionRange:s},vd=!1,he=t;he!==null;)if(t=he,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,he=e;else for(;he!==null;){t=he;try{var j=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var y=j.memoizedProps,w=j.memoizedState,x=t.stateNode,p=x.getSnapshotBeforeUpdate(t.elementType===t.type?y:ts(t.type,y),w);x.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(se(163))}}catch(N){dt(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,he=e;break}he=t.return}return j=W0,W0=!1,j}function Ro(e,t,s){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&vf(t,s,i)}a=a.next}while(a!==n)}}function vu(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var n=s.create;s.destroy=n()}s=s.next}while(s!==t)}}function yf(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function Cw(e){var t=e.alternate;t!==null&&(e.alternate=null,Cw(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Es],delete t[el],delete t[nf],delete t[KE],delete t[XE])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Sw(e){return e.tag===5||e.tag===3||e.tag===4}function Y0(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Sw(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function bf(e,t,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=jd));else if(n!==4&&(e=e.child,e!==null))for(bf(e,t,s),e=e.sibling;e!==null;)bf(e,t,s),e=e.sibling}function jf(e,t,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(jf(e,t,s),e=e.sibling;e!==null;)jf(e,t,s),e=e.sibling}var Mt=null,rs=!1;function gn(e,t,s){for(s=s.child;s!==null;)Ew(e,t,s),s=s.sibling}function Ew(e,t,s){if(Ts&&typeof Ts.onCommitFiberUnmount=="function")try{Ts.onCommitFiberUnmount(du,s)}catch{}switch(s.tag){case 5:Ut||ri(s,t);case 6:var n=Mt,a=rs;Mt=null,gn(e,t,s),Mt=n,rs=a,Mt!==null&&(rs?(e=Mt,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):Mt.removeChild(s.stateNode));break;case 18:Mt!==null&&(rs?(e=Mt,s=s.stateNode,e.nodeType===8?Um(e.parentNode,s):e.nodeType===1&&Um(e,s),Ko(e)):Um(Mt,s.stateNode));break;case 4:n=Mt,a=rs,Mt=s.stateNode.containerInfo,rs=!0,gn(e,t,s),Mt=n,rs=a;break;case 0:case 11:case 14:case 15:if(!Ut&&(n=s.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&vf(s,t,o),a=a.next}while(a!==n)}gn(e,t,s);break;case 1:if(!Ut&&(ri(s,t),n=s.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(l){dt(s,t,l)}gn(e,t,s);break;case 21:gn(e,t,s);break;case 22:s.mode&1?(Ut=(n=Ut)||s.memoizedState!==null,gn(e,t,s),Ut=n):gn(e,t,s);break;default:gn(e,t,s)}}function q0(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new mk),t.forEach(function(n){var a=wk.bind(null,e,n);s.has(n)||(s.add(n),n.then(a,a))})}}function Zr(e,t){var s=t.deletions;if(s!==null)for(var n=0;n<s.length;n++){var a=s[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Mt=l.stateNode,rs=!1;break e;case 3:Mt=l.stateNode.containerInfo,rs=!0;break e;case 4:Mt=l.stateNode.containerInfo,rs=!0;break e}l=l.return}if(Mt===null)throw Error(se(160));Ew(i,o,a),Mt=null,rs=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){dt(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)kw(t,e),t=t.sibling}function kw(e,t){var s=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Zr(t,e),ws(e),n&4){try{Ro(3,e,e.return),vu(3,e)}catch(y){dt(e,e.return,y)}try{Ro(5,e,e.return)}catch(y){dt(e,e.return,y)}}break;case 1:Zr(t,e),ws(e),n&512&&s!==null&&ri(s,s.return);break;case 5:if(Zr(t,e),ws(e),n&512&&s!==null&&ri(s,s.return),e.flags&32){var a=e.stateNode;try{Wo(a,"")}catch(y){dt(e,e.return,y)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=s!==null?s.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Kb(a,i),Hh(l,o);var d=Hh(l,i);for(o=0;o<c.length;o+=2){var u=c[o],m=c[o+1];u==="style"?ej(a,m):u==="dangerouslySetInnerHTML"?Jb(a,m):u==="children"?Wo(a,m):bp(a,u,m,d)}switch(l){case"input":Fh(a,i);break;case"textarea":Xb(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?ai(a,!!i.multiple,g,!1):h!==!!i.multiple&&(i.defaultValue!=null?ai(a,!!i.multiple,i.defaultValue,!0):ai(a,!!i.multiple,i.multiple?[]:"",!1))}a[el]=i}catch(y){dt(e,e.return,y)}}break;case 6:if(Zr(t,e),ws(e),n&4){if(e.stateNode===null)throw Error(se(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(y){dt(e,e.return,y)}}break;case 3:if(Zr(t,e),ws(e),n&4&&s!==null&&s.memoizedState.isDehydrated)try{Ko(t.containerInfo)}catch(y){dt(e,e.return,y)}break;case 4:Zr(t,e),ws(e);break;case 13:Zr(t,e),ws(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(Zp=pt())),n&4&&q0(e);break;case 22:if(u=s!==null&&s.memoizedState!==null,e.mode&1?(Ut=(d=Ut)||u,Zr(t,e),Ut=d):Zr(t,e),ws(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(he=e,u=e.child;u!==null;){for(m=he=u;he!==null;){switch(h=he,g=h.child,h.tag){case 0:case 11:case 14:case 15:Ro(4,h,h.return);break;case 1:ri(h,h.return);var j=h.stateNode;if(typeof j.componentWillUnmount=="function"){n=h,s=h.return;try{t=n,j.props=t.memoizedProps,j.state=t.memoizedState,j.componentWillUnmount()}catch(y){dt(n,s,y)}}break;case 5:ri(h,h.return);break;case 22:if(h.memoizedState!==null){K0(m);continue}}g!==null?(g.return=h,he=g):K0(m)}u=u.sibling}e:for(u=null,m=e;;){if(m.tag===5){if(u===null){u=m;try{a=m.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Zb("display",o))}catch(y){dt(e,e.return,y)}}}else if(m.tag===6){if(u===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(y){dt(e,e.return,y)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Zr(t,e),ws(e),n&4&&q0(e);break;case 21:break;default:Zr(t,e),ws(e)}}function ws(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if(Sw(s)){var n=s;break e}s=s.return}throw Error(se(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Wo(a,""),n.flags&=-33);var i=Y0(e);jf(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=Y0(e);bf(e,l,o);break;default:throw Error(se(161))}}catch(c){dt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function fk(e,t,s){he=e,Dw(e)}function Dw(e,t,s){for(var n=(e.mode&1)!==0;he!==null;){var a=he,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||bc;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||Ut;l=bc;var d=Ut;if(bc=o,(Ut=c)&&!d)for(he=a;he!==null;)o=he,c=o.child,o.tag===22&&o.memoizedState!==null?X0(a):c!==null?(c.return=o,he=c):X0(a);for(;i!==null;)he=i,Dw(i),i=i.sibling;he=a,bc=l,Ut=d}G0(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,he=i):G0(e)}}function G0(e){for(;he!==null;){var t=he;if(t.flags&8772){var s=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ut||vu(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Ut)if(s===null)n.componentDidMount();else{var a=t.elementType===t.type?s.memoizedProps:ts(t.type,s.memoizedProps);n.componentDidUpdate(a,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&O0(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}O0(t,o,s)}break;case 5:var l=t.stateNode;if(s===null&&t.flags&4){s=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var m=u.dehydrated;m!==null&&Ko(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(se(163))}Ut||t.flags&512&&yf(t)}catch(h){dt(t,t.return,h)}}if(t===e){he=null;break}if(s=t.sibling,s!==null){s.return=t.return,he=s;break}he=t.return}}function K0(e){for(;he!==null;){var t=he;if(t===e){he=null;break}var s=t.sibling;if(s!==null){s.return=t.return,he=s;break}he=t.return}}function X0(e){for(;he!==null;){var t=he;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{vu(4,t)}catch(c){dt(t,s,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){dt(t,a,c)}}var i=t.return;try{yf(t)}catch(c){dt(t,i,c)}break;case 5:var o=t.return;try{yf(t)}catch(c){dt(t,o,c)}}}catch(c){dt(t,t.return,c)}if(t===e){he=null;break}var l=t.sibling;if(l!==null){l.return=t.return,he=l;break}he=t.return}}var pk=Math.ceil,Od=mn.ReactCurrentDispatcher,Qp=mn.ReactCurrentOwner,Vr=mn.ReactCurrentBatchConfig,Re=0,_t=null,vt=null,Pt=0,br=0,si=qn(0),Ct=0,il=null,Ea=0,yu=0,Jp=0,Po=null,lr=null,Zp=0,wi=1/0,Gs=null,Md=!1,wf=null,Pn=null,jc=!1,En=null,Rd=0,Lo=0,Nf=null,Wc=-1,Yc=0;function Zt(){return Re&6?pt():Wc!==-1?Wc:Wc=pt()}function Ln(e){return e.mode&1?Re&2&&Pt!==0?Pt&-Pt:JE.transition!==null?(Yc===0&&(Yc=mj()),Yc):(e=Fe,e!==0||(e=window.event,e=e===void 0?16:yj(e.type)),e):1}function ls(e,t,s,n){if(50<Lo)throw Lo=0,Nf=null,Error(se(185));Ol(e,s,n),(!(Re&2)||e!==_t)&&(e===_t&&(!(Re&2)&&(yu|=s),Ct===4&&Cn(e,Pt)),mr(e,n),s===1&&Re===0&&!(t.mode&1)&&(wi=pt()+500,pu&&Gn()))}function mr(e,t){var s=e.callbackNode;JS(e,t);var n=gd(e,e===_t?Pt:0);if(n===0)s!==null&&a0(s),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(s!=null&&a0(s),t===1)e.tag===0?QE(Q0.bind(null,e)):$j(Q0.bind(null,e)),qE(function(){!(Re&6)&&Gn()}),s=null;else{switch(hj(n)){case 1:s=Sp;break;case 4:s=dj;break;case 16:s=xd;break;case 536870912:s=uj;break;default:s=xd}s=Lw(s,Aw.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function Aw(e,t){if(Wc=-1,Yc=0,Re&6)throw Error(se(327));var s=e.callbackNode;if(di()&&e.callbackNode!==s)return null;var n=gd(e,e===_t?Pt:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Pd(e,n);else{t=n;var a=Re;Re|=2;var i=_w();(_t!==e||Pt!==t)&&(Gs=null,wi=pt()+500,ga(e,t));do try{vk();break}catch(l){Tw(e,l)}while(!0);$p(),Od.current=i,Re=a,vt!==null?t=0:(_t=null,Pt=0,t=Ct)}if(t!==0){if(t===2&&(a=Kh(e),a!==0&&(n=a,t=Cf(e,a))),t===1)throw s=il,ga(e,0),Cn(e,n),mr(e,pt()),s;if(t===6)Cn(e,n);else{if(a=e.current.alternate,!(n&30)&&!xk(a)&&(t=Pd(e,n),t===2&&(i=Kh(e),i!==0&&(n=i,t=Cf(e,i))),t===1))throw s=il,ga(e,0),Cn(e,n),mr(e,pt()),s;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(se(345));case 2:la(e,lr,Gs);break;case 3:if(Cn(e,n),(n&130023424)===n&&(t=Zp+500-pt(),10<t)){if(gd(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){Zt(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=sf(la.bind(null,e,lr,Gs),t);break}la(e,lr,Gs);break;case 4:if(Cn(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-os(n);i=1<<o,o=t[o],o>a&&(a=o),n&=~i}if(n=a,n=pt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*pk(n/1960))-n,10<n){e.timeoutHandle=sf(la.bind(null,e,lr,Gs),n);break}la(e,lr,Gs);break;case 5:la(e,lr,Gs);break;default:throw Error(se(329))}}}return mr(e,pt()),e.callbackNode===s?Aw.bind(null,e):null}function Cf(e,t){var s=Po;return e.current.memoizedState.isDehydrated&&(ga(e,t).flags|=256),e=Pd(e,t),e!==2&&(t=lr,lr=s,t!==null&&Sf(t)),e}function Sf(e){lr===null?lr=e:lr.push.apply(lr,e)}function xk(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var n=0;n<s.length;n++){var a=s[n],i=a.getSnapshot;a=a.value;try{if(!cs(i(),a))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Cn(e,t){for(t&=~Jp,t&=~yu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-os(t),n=1<<s;e[s]=-1,t&=~n}}function Q0(e){if(Re&6)throw Error(se(327));di();var t=gd(e,0);if(!(t&1))return mr(e,pt()),null;var s=Pd(e,t);if(e.tag!==0&&s===2){var n=Kh(e);n!==0&&(t=n,s=Cf(e,n))}if(s===1)throw s=il,ga(e,0),Cn(e,t),mr(e,pt()),s;if(s===6)throw Error(se(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,la(e,lr,Gs),mr(e,pt()),null}function ex(e,t){var s=Re;Re|=1;try{return e(t)}finally{Re=s,Re===0&&(wi=pt()+500,pu&&Gn())}}function ka(e){En!==null&&En.tag===0&&!(Re&6)&&di();var t=Re;Re|=1;var s=Vr.transition,n=Fe;try{if(Vr.transition=null,Fe=1,e)return e()}finally{Fe=n,Vr.transition=s,Re=t,!(Re&6)&&Gn()}}function tx(){br=si.current,Ze(si)}function ga(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,YE(s)),vt!==null)for(s=vt.return;s!==null;){var n=s;switch(Pp(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&wd();break;case 3:bi(),Ze(dr),Ze(Wt),Hp();break;case 5:Vp(n);break;case 4:bi();break;case 13:Ze(it);break;case 19:Ze(it);break;case 10:Fp(n.type._context);break;case 22:case 23:tx()}s=s.return}if(_t=e,vt=e=In(e.current,null),Pt=br=t,Ct=0,il=null,Jp=yu=Ea=0,lr=Po=null,ma!==null){for(t=0;t<ma.length;t++)if(s=ma[t],n=s.interleaved,n!==null){s.interleaved=null;var a=n.next,i=s.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}s.pending=n}ma=null}return e}function Tw(e,t){do{var s=vt;try{if($p(),Uc.current=_d,Td){for(var n=ot.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Td=!1}if(Sa=0,At=wt=ot=null,Mo=!1,sl=0,Qp.current=null,s===null||s.return===null){Ct=1,il=t,vt=null;break}e:{var i=e,o=s.return,l=s,c=t;if(t=Pt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,m=u.tag;if(!(u.mode&1)&&(m===0||m===11||m===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=$0(o);if(g!==null){g.flags&=-257,F0(g,o,l,i,t),g.mode&1&&I0(i,d,t),t=g,c=d;var j=t.updateQueue;if(j===null){var y=new Set;y.add(c),t.updateQueue=y}else j.add(c);break e}else{if(!(t&1)){I0(i,d,t),rx();break e}c=Error(se(426))}}else if(st&&l.mode&1){var w=$0(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),F0(w,o,l,i,t),Lp(ji(c,l));break e}}i=c=ji(c,l),Ct!==4&&(Ct=2),Po===null?Po=[i]:Po.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var x=hw(i,c,t);_0(i,x);break e;case 1:l=c;var p=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Pn===null||!Pn.has(v)))){i.flags|=65536,t&=-t,i.lanes|=t;var N=fw(i,l,t);_0(i,N);break e}}i=i.return}while(i!==null)}Mw(s)}catch(b){t=b,vt===s&&s!==null&&(vt=s=s.return);continue}break}while(!0)}function _w(){var e=Od.current;return Od.current=_d,e===null?_d:e}function rx(){(Ct===0||Ct===3||Ct===2)&&(Ct=4),_t===null||!(Ea&268435455)&&!(yu&268435455)||Cn(_t,Pt)}function Pd(e,t){var s=Re;Re|=2;var n=_w();(_t!==e||Pt!==t)&&(Gs=null,ga(e,t));do try{gk();break}catch(a){Tw(e,a)}while(!0);if($p(),Re=s,Od.current=n,vt!==null)throw Error(se(261));return _t=null,Pt=0,Ct}function gk(){for(;vt!==null;)Ow(vt)}function vk(){for(;vt!==null&&!VS();)Ow(vt)}function Ow(e){var t=Pw(e.alternate,e,br);e.memoizedProps=e.pendingProps,t===null?Mw(e):vt=t,Qp.current=null}function Mw(e){var t=e;do{var s=t.alternate;if(e=t.return,t.flags&32768){if(s=uk(s,t),s!==null){s.flags&=32767,vt=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ct=6,vt=null;return}}else if(s=dk(s,t,br),s!==null){vt=s;return}if(t=t.sibling,t!==null){vt=t;return}vt=t=e}while(t!==null);Ct===0&&(Ct=5)}function la(e,t,s){var n=Fe,a=Vr.transition;try{Vr.transition=null,Fe=1,yk(e,t,s,n)}finally{Vr.transition=a,Fe=n}return null}function yk(e,t,s,n){do di();while(En!==null);if(Re&6)throw Error(se(327));s=e.finishedWork;var a=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(se(177));e.callbackNode=null,e.callbackPriority=0;var i=s.lanes|s.childLanes;if(ZS(e,i),e===_t&&(vt=_t=null,Pt=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||jc||(jc=!0,Lw(xd,function(){return di(),null})),i=(s.flags&15990)!==0,s.subtreeFlags&15990||i){i=Vr.transition,Vr.transition=null;var o=Fe;Fe=1;var l=Re;Re|=4,Qp.current=null,hk(e,s),kw(s,e),FE(tf),vd=!!ef,tf=ef=null,e.current=s,fk(s),HS(),Re=l,Fe=o,Vr.transition=i}else e.current=s;if(jc&&(jc=!1,En=e,Rd=a),i=e.pendingLanes,i===0&&(Pn=null),qS(s.stateNode),mr(e,pt()),t!==null)for(n=e.onRecoverableError,s=0;s<t.length;s++)a=t[s],n(a.value,{componentStack:a.stack,digest:a.digest});if(Md)throw Md=!1,e=wf,wf=null,e;return Rd&1&&e.tag!==0&&di(),i=e.pendingLanes,i&1?e===Nf?Lo++:(Lo=0,Nf=e):Lo=0,Gn(),null}function di(){if(En!==null){var e=hj(Rd),t=Vr.transition,s=Fe;try{if(Vr.transition=null,Fe=16>e?16:e,En===null)var n=!1;else{if(e=En,En=null,Rd=0,Re&6)throw Error(se(331));var a=Re;for(Re|=4,he=e.current;he!==null;){var i=he,o=i.child;if(he.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(he=d;he!==null;){var u=he;switch(u.tag){case 0:case 11:case 15:Ro(8,u,i)}var m=u.child;if(m!==null)m.return=u,he=m;else for(;he!==null;){u=he;var h=u.sibling,g=u.return;if(Cw(u),u===d){he=null;break}if(h!==null){h.return=g,he=h;break}he=g}}}var j=i.alternate;if(j!==null){var y=j.child;if(y!==null){j.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}he=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,he=o;else e:for(;he!==null;){if(i=he,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ro(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,he=x;break e}he=i.return}}var p=e.current;for(he=p;he!==null;){o=he;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,he=v;else e:for(o=p;he!==null;){if(l=he,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:vu(9,l)}}catch(b){dt(l,l.return,b)}if(l===o){he=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,he=N;break e}he=l.return}}if(Re=a,Gn(),Ts&&typeof Ts.onPostCommitFiberRoot=="function")try{Ts.onPostCommitFiberRoot(du,e)}catch{}n=!0}return n}finally{Fe=s,Vr.transition=t}}return!1}function J0(e,t,s){t=ji(s,t),t=hw(e,t,1),e=Rn(e,t,1),t=Zt(),e!==null&&(Ol(e,1,t),mr(e,t))}function dt(e,t,s){if(e.tag===3)J0(e,e,s);else for(;t!==null;){if(t.tag===3){J0(t,e,s);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Pn===null||!Pn.has(n))){e=ji(s,e),e=fw(t,e,1),t=Rn(t,e,1),e=Zt(),t!==null&&(Ol(t,1,e),mr(t,e));break}}t=t.return}}function bk(e,t,s){var n=e.pingCache;n!==null&&n.delete(t),t=Zt(),e.pingedLanes|=e.suspendedLanes&s,_t===e&&(Pt&s)===s&&(Ct===4||Ct===3&&(Pt&130023424)===Pt&&500>pt()-Zp?ga(e,0):Jp|=s),mr(e,t)}function Rw(e,t){t===0&&(e.mode&1?(t=uc,uc<<=1,!(uc&130023424)&&(uc=4194304)):t=1);var s=Zt();e=on(e,t),e!==null&&(Ol(e,t,s),mr(e,s))}function jk(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),Rw(e,s)}function wk(e,t){var s=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(s=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(se(314))}n!==null&&n.delete(t),Rw(e,s)}var Pw;Pw=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||dr.current)cr=!0;else{if(!(e.lanes&s)&&!(t.flags&128))return cr=!1,ck(e,t,s);cr=!!(e.flags&131072)}else cr=!1,st&&t.flags&1048576&&Fj(t,Sd,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Hc(e,t),e=t.pendingProps;var a=gi(t,Wt.current);ci(t,s),a=Yp(null,t,n,e,a,s);var i=qp();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ur(n)?(i=!0,Nd(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,zp(t),a.updater=gu,t.stateNode=a,a._reactInternals=t,uf(t,n,e,s),t=ff(null,t,n,!0,i,s)):(t.tag=0,st&&i&&Rp(t),Qt(null,t,a,s),t=t.child),t;case 16:n=t.elementType;e:{switch(Hc(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=Ck(n),e=ts(n,e),a){case 0:t=hf(null,t,n,e,s);break e;case 1:t=U0(null,t,n,e,s);break e;case 11:t=B0(null,t,n,e,s);break e;case 14:t=z0(null,t,n,ts(n.type,e),s);break e}throw Error(se(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:ts(n,a),hf(e,t,n,a,s);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:ts(n,a),U0(e,t,n,a,s);case 3:e:{if(vw(t),e===null)throw Error(se(387));n=t.pendingProps,i=t.memoizedState,a=i.element,Wj(e,t),Dd(t,n,null,s);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=ji(Error(se(423)),t),t=V0(e,t,n,s,a);break e}else if(n!==a){a=ji(Error(se(424)),t),t=V0(e,t,n,s,a);break e}else for(jr=Mn(t.stateNode.containerInfo.firstChild),wr=t,st=!0,ns=null,s=Vj(t,null,n,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(vi(),n===a){t=ln(e,t,s);break e}Qt(e,t,n,s)}t=t.child}return t;case 5:return Yj(t),e===null&&lf(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,rf(n,a)?o=null:i!==null&&rf(n,i)&&(t.flags|=32),gw(e,t),Qt(e,t,o,s),t.child;case 6:return e===null&&lf(t),null;case 13:return yw(e,t,s);case 4:return Up(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=yi(t,null,n,s):Qt(e,t,n,s),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:ts(n,a),B0(e,t,n,a,s);case 7:return Qt(e,t,t.pendingProps,s),t.child;case 8:return Qt(e,t,t.pendingProps.children,s),t.child;case 12:return Qt(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,qe(Ed,n._currentValue),n._currentValue=o,i!==null)if(cs(i.value,o)){if(i.children===a.children&&!dr.current){t=ln(e,t,s);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=tn(-1,s&-s),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=s,c=i.alternate,c!==null&&(c.lanes|=s),cf(i.return,s,t),l.lanes|=s;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(se(341));o.lanes|=s,l=o.alternate,l!==null&&(l.lanes|=s),cf(o,s,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Qt(e,t,a.children,s),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,ci(t,s),a=Hr(a),n=n(a),t.flags|=1,Qt(e,t,n,s),t.child;case 14:return n=t.type,a=ts(n,t.pendingProps),a=ts(n.type,a),z0(e,t,n,a,s);case 15:return pw(e,t,t.type,t.pendingProps,s);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:ts(n,a),Hc(e,t),t.tag=1,ur(n)?(e=!0,Nd(t)):e=!1,ci(t,s),mw(t,n,a),uf(t,n,a,s),ff(null,t,n,!0,e,s);case 19:return bw(e,t,s);case 22:return xw(e,t,s)}throw Error(se(156,t.tag))};function Lw(e,t){return cj(e,t)}function Nk(e,t,s,n){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ur(e,t,s,n){return new Nk(e,t,s,n)}function sx(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ck(e){if(typeof e=="function")return sx(e)?1:0;if(e!=null){if(e=e.$$typeof,e===wp)return 11;if(e===Np)return 14}return 2}function In(e,t){var s=e.alternate;return s===null?(s=Ur(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function qc(e,t,s,n,a,i){var o=2;if(n=e,typeof e=="function")sx(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case qa:return va(s.children,a,i,t);case jp:o=8,a|=8;break;case Rh:return e=Ur(12,s,t,a|2),e.elementType=Rh,e.lanes=i,e;case Ph:return e=Ur(13,s,t,a),e.elementType=Ph,e.lanes=i,e;case Lh:return e=Ur(19,s,t,a),e.elementType=Lh,e.lanes=i,e;case Yb:return bu(s,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Hb:o=10;break e;case Wb:o=9;break e;case wp:o=11;break e;case Np:o=14;break e;case bn:o=16,n=null;break e}throw Error(se(130,e==null?e:typeof e,""))}return t=Ur(o,s,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function va(e,t,s,n){return e=Ur(7,e,n,t),e.lanes=s,e}function bu(e,t,s,n){return e=Ur(22,e,n,t),e.elementType=Yb,e.lanes=s,e.stateNode={isHidden:!1},e}function Xm(e,t,s){return e=Ur(6,e,null,t),e.lanes=s,e}function Qm(e,t,s){return t=Ur(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Sk(e,t,s,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_m(0),this.expirationTimes=_m(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_m(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function nx(e,t,s,n,a,i,o,l,c){return e=new Sk(e,t,s,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Ur(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},zp(i),e}function Ek(e,t,s){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ya,key:n==null?null:""+n,children:e,containerInfo:t,implementation:s}}function Iw(e){if(!e)return Un;e=e._reactInternals;e:{if($a(e)!==e||e.tag!==1)throw Error(se(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ur(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(se(171))}if(e.tag===1){var s=e.type;if(ur(s))return Ij(e,s,t)}return t}function $w(e,t,s,n,a,i,o,l,c){return e=nx(s,n,!0,e,a,i,o,l,c),e.context=Iw(null),s=e.current,n=Zt(),a=Ln(s),i=tn(n,a),i.callback=t??null,Rn(s,i,a),e.current.lanes=a,Ol(e,a,n),mr(e,n),e}function ju(e,t,s,n){var a=t.current,i=Zt(),o=Ln(a);return s=Iw(s),t.context===null?t.context=s:t.pendingContext=s,t=tn(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Rn(a,t,o),e!==null&&(ls(e,a,o,i),zc(e,a,o)),o}function Ld(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Z0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function ax(e,t){Z0(e,t),(e=e.alternate)&&Z0(e,t)}function kk(){return null}var Fw=typeof reportError=="function"?reportError:function(e){console.error(e)};function ix(e){this._internalRoot=e}wu.prototype.render=ix.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(se(409));ju(e,t,null,null)};wu.prototype.unmount=ix.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ka(function(){ju(null,e,null,null)}),t[an]=null}};function wu(e){this._internalRoot=e}wu.prototype.unstable_scheduleHydration=function(e){if(e){var t=xj();e={blockedOn:null,target:e,priority:t};for(var s=0;s<Nn.length&&t!==0&&t<Nn[s].priority;s++);Nn.splice(s,0,e),s===0&&vj(e)}};function ox(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Nu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ev(){}function Dk(e,t,s,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var d=Ld(o);i.call(d)}}var o=$w(t,n,e,0,null,!1,!1,"",ev);return e._reactRootContainer=o,e[an]=o.current,Jo(e.nodeType===8?e.parentNode:e),ka(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var d=Ld(c);l.call(d)}}var c=nx(e,0,!1,null,null,!1,!1,"",ev);return e._reactRootContainer=c,e[an]=c.current,Jo(e.nodeType===8?e.parentNode:e),ka(function(){ju(t,c,s,n)}),c}function Cu(e,t,s,n,a){var i=s._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=Ld(o);l.call(c)}}ju(t,o,e,a)}else o=Dk(s,t,e,a,n);return Ld(o)}fj=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=No(t.pendingLanes);s!==0&&(Ep(t,s|1),mr(t,pt()),!(Re&6)&&(wi=pt()+500,Gn()))}break;case 13:ka(function(){var n=on(e,1);if(n!==null){var a=Zt();ls(n,e,1,a)}}),ax(e,1)}};kp=function(e){if(e.tag===13){var t=on(e,134217728);if(t!==null){var s=Zt();ls(t,e,134217728,s)}ax(e,134217728)}};pj=function(e){if(e.tag===13){var t=Ln(e),s=on(e,t);if(s!==null){var n=Zt();ls(s,e,t,n)}ax(e,t)}};xj=function(){return Fe};gj=function(e,t){var s=Fe;try{return Fe=e,t()}finally{Fe=s}};Yh=function(e,t,s){switch(t){case"input":if(Fh(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var n=s[t];if(n!==e&&n.form===e.form){var a=fu(n);if(!a)throw Error(se(90));Gb(n),Fh(n,a)}}}break;case"textarea":Xb(e,s);break;case"select":t=s.value,t!=null&&ai(e,!!s.multiple,t,!1)}};sj=ex;nj=ka;var Ak={usingClientEntryPoint:!1,Events:[Rl,Qa,fu,tj,rj,ex]},uo={findFiberByHostInstance:ua,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Tk={bundleType:uo.bundleType,version:uo.version,rendererPackageName:uo.rendererPackageName,rendererConfig:uo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:mn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=oj(e),e===null?null:e.stateNode},findFiberByHostInstance:uo.findFiberByHostInstance||kk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wc.isDisabled&&wc.supportsFiber)try{du=wc.inject(Tk),Ts=wc}catch{}}Sr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ak;Sr.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ox(t))throw Error(se(200));return Ek(e,t,null,s)};Sr.createRoot=function(e,t){if(!ox(e))throw Error(se(299));var s=!1,n="",a=Fw;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=nx(e,1,!1,null,null,s,!1,n,a),e[an]=t.current,Jo(e.nodeType===8?e.parentNode:e),new ix(t)};Sr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(se(188)):(e=Object.keys(e).join(","),Error(se(268,e)));return e=oj(t),e=e===null?null:e.stateNode,e};Sr.flushSync=function(e){return ka(e)};Sr.hydrate=function(e,t,s){if(!Nu(t))throw Error(se(200));return Cu(null,e,t,!0,s)};Sr.hydrateRoot=function(e,t,s){if(!ox(e))throw Error(se(405));var n=s!=null&&s.hydratedSources||null,a=!1,i="",o=Fw;if(s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(i=s.identifierPrefix),s.onRecoverableError!==void 0&&(o=s.onRecoverableError)),t=$w(t,null,e,1,s??null,a,!1,i,o),e[an]=t.current,Jo(e),n)for(e=0;e<n.length;e++)s=n[e],a=s._getVersion,a=a(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,a]:t.mutableSourceEagerHydrationData.push(s,a);return new wu(t)};Sr.render=function(e,t,s){if(!Nu(t))throw Error(se(200));return Cu(null,e,t,!1,s)};Sr.unmountComponentAtNode=function(e){if(!Nu(e))throw Error(se(40));return e._reactRootContainer?(ka(function(){Cu(null,null,e,!1,function(){e._reactRootContainer=null,e[an]=null})}),!0):!1};Sr.unstable_batchedUpdates=ex;Sr.unstable_renderSubtreeIntoContainer=function(e,t,s,n){if(!Nu(s))throw Error(se(200));if(e==null||e._reactInternals===void 0)throw Error(se(38));return Cu(e,t,s,!1,n)};Sr.version="18.3.1-next-f1338f8080-20240426";function Bw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Bw)}catch(e){console.error(e)}}Bw(),Bb.exports=Sr;var fa=Bb.exports;const zw=vr(fa);var tv=fa;Oh.createRoot=tv.createRoot,Oh.hydrateRoot=tv.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ol(){return ol=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},ol.apply(this,arguments)}var kn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(kn||(kn={}));const rv="popstate";function _k(e){e===void 0&&(e={});function t(n,a){let{pathname:i,search:o,hash:l}=n.location;return Ef("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function s(n,a){return typeof a=="string"?a:Id(a)}return Mk(t,s,null,e)}function xt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Uw(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Ok(){return Math.random().toString(36).substr(2,8)}function sv(e,t){return{usr:e.state,key:e.key,idx:t}}function Ef(e,t,s,n){return s===void 0&&(s=null),ol({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Oi(t):t,{state:s,key:t&&t.key||n||Ok()})}function Id(e){let{pathname:t="/",search:s="",hash:n=""}=e;return s&&s!=="?"&&(t+=s.charAt(0)==="?"?s:"?"+s),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Oi(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substr(s),e=e.substr(0,s));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function Mk(e,t,s,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,l=kn.Pop,c=null,d=u();d==null&&(d=0,o.replaceState(ol({},o.state,{idx:d}),""));function u(){return(o.state||{idx:null}).idx}function m(){l=kn.Pop;let w=u(),x=w==null?null:w-d;d=w,c&&c({action:l,location:y.location,delta:x})}function h(w,x){l=kn.Push;let p=Ef(y.location,w,x);d=u()+1;let v=sv(p,d),N=y.createHref(p);try{o.pushState(v,"",N)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;a.location.assign(N)}i&&c&&c({action:l,location:y.location,delta:1})}function g(w,x){l=kn.Replace;let p=Ef(y.location,w,x);d=u();let v=sv(p,d),N=y.createHref(p);o.replaceState(v,"",N),i&&c&&c({action:l,location:y.location,delta:0})}function j(w){let x=a.location.origin!=="null"?a.location.origin:a.location.href,p=typeof w=="string"?w:Id(w);return p=p.replace(/ $/,"%20"),xt(x,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,x)}let y={get action(){return l},get location(){return e(a,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(rv,m),c=w,()=>{a.removeEventListener(rv,m),c=null}},createHref(w){return t(a,w)},createURL:j,encodeLocation(w){let x=j(w);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:h,replace:g,go(w){return o.go(w)}};return y}var nv;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(nv||(nv={}));function Rk(e,t,s){return s===void 0&&(s="/"),Pk(e,t,s)}function Pk(e,t,s,n){let a=typeof t=="string"?Oi(t):t,i=lx(a.pathname||"/",s);if(i==null)return null;let o=Vw(e);Lk(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=Gk(i);l=Wk(o[c],d)}return l}function Vw(e,t,s,n){t===void 0&&(t=[]),s===void 0&&(s=[]),n===void 0&&(n="");let a=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(xt(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=$n([n,c.relativePath]),u=s.concat(c);i.children&&i.children.length>0&&(xt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Vw(i.children,t,u,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:Vk(d,i.index),routesMeta:u})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let c of Hw(i.path))a(i,o,c)}),t}function Hw(e){let t=e.split("/");if(t.length===0)return[];let[s,...n]=t,a=s.endsWith("?"),i=s.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=Hw(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function Lk(e){e.sort((t,s)=>t.score!==s.score?s.score-t.score:Hk(t.routesMeta.map(n=>n.childrenIndex),s.routesMeta.map(n=>n.childrenIndex)))}const Ik=/^:[\w-]+$/,$k=3,Fk=2,Bk=1,zk=10,Uk=-2,av=e=>e==="*";function Vk(e,t){let s=e.split("/"),n=s.length;return s.some(av)&&(n+=Uk),t&&(n+=Fk),s.filter(a=>!av(a)).reduce((a,i)=>a+(Ik.test(i)?$k:i===""?Bk:zk),n)}function Hk(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function Wk(e,t,s){let{routesMeta:n}=e,a={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],d=l===n.length-1,u=i==="/"?t:t.slice(i.length)||"/",m=Yk({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),h=c.route;if(!m)return null;Object.assign(a,m.params),o.push({params:a,pathname:$n([i,m.pathname]),pathnameBase:Jk($n([i,m.pathnameBase])),route:h}),m.pathnameBase!=="/"&&(i=$n([i,m.pathnameBase]))}return o}function Yk(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,n]=qk(e.path,e.caseSensitive,e.end),a=t.match(s);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((d,u,m)=>{let{paramName:h,isOptional:g}=u;if(h==="*"){let y=l[m]||"";o=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const j=l[m];return g&&!j?d[h]=void 0:d[h]=(j||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function qk(e,t,s){t===void 0&&(t=!1),s===void 0&&(s=!0),Uw(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function Gk(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Uw(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function lx(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,n=e.charAt(s);return n&&n!=="/"?null:e.slice(s)||"/"}function Kk(e,t){t===void 0&&(t="/");let{pathname:s,search:n="",hash:a=""}=typeof e=="string"?Oi(e):e;return{pathname:s?s.startsWith("/")?s:Xk(s,t):t,search:Zk(n),hash:e4(a)}}function Xk(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?s.length>1&&s.pop():a!=="."&&s.push(a)}),s.length>1?s.join("/"):"/"}function Jm(e,t,s,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Qk(e){return e.filter((t,s)=>s===0||t.route.path&&t.route.path.length>0)}function cx(e,t){let s=Qk(e);return t?s.map((n,a)=>a===s.length-1?n.pathname:n.pathnameBase):s.map(n=>n.pathnameBase)}function dx(e,t,s,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=Oi(e):(a=ol({},e),xt(!a.pathname||!a.pathname.includes("?"),Jm("?","pathname","search",a)),xt(!a.pathname||!a.pathname.includes("#"),Jm("#","pathname","hash",a)),xt(!a.search||!a.search.includes("#"),Jm("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=s;else{let m=t.length-1;if(!n&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),m-=1;a.pathname=h.join("/")}l=m>=0?t[m]:"/"}let c=Kk(a,l),d=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&s.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const $n=e=>e.join("/").replace(/\/\/+/g,"/"),Jk=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Zk=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,e4=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function t4(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Ww=["post","put","patch","delete"];new Set(Ww);const r4=["get",...Ww];new Set(r4);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ll(){return ll=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},ll.apply(this,arguments)}const ux=f.createContext(null),s4=f.createContext(null),Kn=f.createContext(null),Su=f.createContext(null),Fs=f.createContext({outlet:null,matches:[],isDataRoute:!1}),Yw=f.createContext(null);function n4(e,t){let{relative:s}=t===void 0?{}:t;Mi()||xt(!1);let{basename:n,navigator:a}=f.useContext(Kn),{hash:i,pathname:o,search:l}=Gw(e,{relative:s}),c=o;return n!=="/"&&(c=o==="/"?n:$n([n,o])),a.createHref({pathname:c,search:l,hash:i})}function Mi(){return f.useContext(Su)!=null}function Ri(){return Mi()||xt(!1),f.useContext(Su).location}function qw(e){f.useContext(Kn).static||f.useLayoutEffect(e)}function Yt(){let{isDataRoute:e}=f.useContext(Fs);return e?y4():a4()}function a4(){Mi()||xt(!1);let e=f.useContext(ux),{basename:t,future:s,navigator:n}=f.useContext(Kn),{matches:a}=f.useContext(Fs),{pathname:i}=Ri(),o=JSON.stringify(cx(a,s.v7_relativeSplatPath)),l=f.useRef(!1);return qw(()=>{l.current=!0}),f.useCallback(function(d,u){if(u===void 0&&(u={}),!l.current)return;if(typeof d=="number"){n.go(d);return}let m=dx(d,JSON.parse(o),i,u.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:$n([t,m.pathname])),(u.replace?n.replace:n.push)(m,u.state,u)},[t,n,o,i,e])}const i4=f.createContext(null);function o4(e){let t=f.useContext(Fs).outlet;return t&&f.createElement(i4.Provider,{value:e},t)}function Eu(){let{matches:e}=f.useContext(Fs),t=e[e.length-1];return t?t.params:{}}function Gw(e,t){let{relative:s}=t===void 0?{}:t,{future:n}=f.useContext(Kn),{matches:a}=f.useContext(Fs),{pathname:i}=Ri(),o=JSON.stringify(cx(a,n.v7_relativeSplatPath));return f.useMemo(()=>dx(e,JSON.parse(o),i,s==="path"),[e,o,i,s])}function l4(e,t){return c4(e,t)}function c4(e,t,s,n){Mi()||xt(!1);let{navigator:a}=f.useContext(Kn),{matches:i}=f.useContext(Fs),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=Ri(),u;if(t){var m;let w=typeof t=="string"?Oi(t):t;c==="/"||(m=w.pathname)!=null&&m.startsWith(c)||xt(!1),u=w}else u=d;let h=u.pathname||"/",g=h;if(c!=="/"){let w=c.replace(/^\//,"").split("/");g="/"+h.replace(/^\//,"").split("/").slice(w.length).join("/")}let j=Rk(e,{pathname:g}),y=f4(j&&j.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:$n([c,a.encodeLocation?a.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:$n([c,a.encodeLocation?a.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,s,n);return t&&y?f.createElement(Su.Provider,{value:{location:ll({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:kn.Pop}},y):y}function d4(){let e=v4(),t=t4(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},t),s?f.createElement("pre",{style:a},s):null,null)}const u4=f.createElement(d4,null);class m4 extends f.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,s){return s.location!==t.location||s.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:s.error,location:s.location,revalidation:t.revalidation||s.revalidation}}componentDidCatch(t,s){console.error("React Router caught the following error during render",t,s)}render(){return this.state.error!==void 0?f.createElement(Fs.Provider,{value:this.props.routeContext},f.createElement(Yw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function h4(e){let{routeContext:t,match:s,children:n}=e,a=f.useContext(ux);return a&&a.static&&a.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=s.route.id),f.createElement(Fs.Provider,{value:t},n)}function f4(e,t,s,n){var a;if(t===void 0&&(t=[]),s===void 0&&(s=null),n===void 0&&(n=null),e==null){var i;if(!s)return null;if(s.errors)e=s.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!s.initialized&&s.matches.length>0)e=s.matches;else return null}let o=e,l=(a=s)==null?void 0:a.errors;if(l!=null){let u=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);u>=0||xt(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,d=-1;if(s&&n&&n.v7_partialHydration)for(let u=0;u<o.length;u++){let m=o[u];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=u),m.route.id){let{loaderData:h,errors:g}=s,j=m.route.loader&&h[m.route.id]===void 0&&(!g||g[m.route.id]===void 0);if(m.route.lazy||j){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((u,m,h)=>{let g,j=!1,y=null,w=null;s&&(g=l&&m.route.id?l[m.route.id]:void 0,y=m.route.errorElement||u4,c&&(d<0&&h===0?(b4("route-fallback"),j=!0,w=null):d===h&&(j=!0,w=m.route.hydrateFallbackElement||null)));let x=t.concat(o.slice(0,h+1)),p=()=>{let v;return g?v=y:j?v=w:m.route.Component?v=f.createElement(m.route.Component,null):m.route.element?v=m.route.element:v=u,f.createElement(h4,{match:m,routeContext:{outlet:u,matches:x,isDataRoute:s!=null},children:v})};return s&&(m.route.ErrorBoundary||m.route.errorElement||h===0)?f.createElement(m4,{location:s.location,revalidation:s.revalidation,component:y,error:g,children:p(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):p()},null)}var Kw=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Kw||{}),Xw=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Xw||{});function p4(e){let t=f.useContext(ux);return t||xt(!1),t}function x4(e){let t=f.useContext(s4);return t||xt(!1),t}function g4(e){let t=f.useContext(Fs);return t||xt(!1),t}function Qw(e){let t=g4(),s=t.matches[t.matches.length-1];return s.route.id||xt(!1),s.route.id}function v4(){var e;let t=f.useContext(Yw),s=x4(),n=Qw();return t!==void 0?t:(e=s.errors)==null?void 0:e[n]}function y4(){let{router:e}=p4(Kw.UseNavigateStable),t=Qw(Xw.UseNavigateStable),s=f.useRef(!1);return qw(()=>{s.current=!0}),f.useCallback(function(a,i){i===void 0&&(i={}),s.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,ll({fromRouteId:t},i)))},[e,t])}const iv={};function b4(e,t,s){iv[e]||(iv[e]=!0)}function j4(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Jw(e){let{to:t,replace:s,state:n,relative:a}=e;Mi()||xt(!1);let{future:i,static:o}=f.useContext(Kn),{matches:l}=f.useContext(Fs),{pathname:c}=Ri(),d=Yt(),u=dx(t,cx(l,i.v7_relativeSplatPath),c,a==="path"),m=JSON.stringify(u);return f.useEffect(()=>d(JSON.parse(m),{replace:s,state:n,relative:a}),[d,m,a,s,n]),null}function mx(e){return o4(e.context)}function fe(e){xt(!1)}function w4(e){let{basename:t="/",children:s=null,location:n,navigationType:a=kn.Pop,navigator:i,static:o=!1,future:l}=e;Mi()&&xt(!1);let c=t.replace(/^\/*/,"/"),d=f.useMemo(()=>({basename:c,navigator:i,static:o,future:ll({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=Oi(n));let{pathname:u="/",search:m="",hash:h="",state:g=null,key:j="default"}=n,y=f.useMemo(()=>{let w=lx(u,c);return w==null?null:{location:{pathname:w,search:m,hash:h,state:g,key:j},navigationType:a}},[c,u,m,h,g,j,a]);return y==null?null:f.createElement(Kn.Provider,{value:d},f.createElement(Su.Provider,{children:s,value:y}))}function N4(e){let{children:t,location:s}=e;return l4(kf(t),s)}new Promise(()=>{});function kf(e,t){t===void 0&&(t=[]);let s=[];return f.Children.forEach(e,(n,a)=>{if(!f.isValidElement(n))return;let i=[...t,a];if(n.type===f.Fragment){s.push.apply(s,kf(n.props.children,i));return}n.type!==fe&&xt(!1),!n.props.index||!n.props.children||xt(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=kf(n.props.children,i)),s.push(o)}),s}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Df(){return Df=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},Df.apply(this,arguments)}function C4(e,t){if(e==null)return{};var s={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(s[a]=e[a]);return s}function S4(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function E4(e,t){return e.button===0&&(!t||t==="_self")&&!S4(e)}const k4=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],D4="6";try{window.__reactRouterVersion=D4}catch{}const A4="startTransition",ov=bS[A4];function T4(e){let{basename:t,children:s,future:n,window:a}=e,i=f.useRef();i.current==null&&(i.current=_k({window:a,v5Compat:!0}));let o=i.current,[l,c]=f.useState({action:o.action,location:o.location}),{v7_startTransition:d}=n||{},u=f.useCallback(m=>{d&&ov?ov(()=>c(m)):c(m)},[c,d]);return f.useLayoutEffect(()=>o.listen(u),[o,u]),f.useEffect(()=>j4(n),[n]),f.createElement(w4,{basename:t,children:s,location:l.location,navigationType:l.action,navigator:o,future:n})}const _4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",O4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ne=f.forwardRef(function(t,s){let{onClick:n,relative:a,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:m}=t,h=C4(t,k4),{basename:g}=f.useContext(Kn),j,y=!1;if(typeof d=="string"&&O4.test(d)&&(j=d,_4))try{let v=new URL(window.location.href),N=d.startsWith("//")?new URL(v.protocol+d):new URL(d),b=lx(N.pathname,g);N.origin===v.origin&&b!=null?d=b+N.search+N.hash:y=!0}catch{}let w=n4(d,{relative:a}),x=M4(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:a,viewTransition:m});function p(v){n&&n(v),v.defaultPrevented||x(v)}return f.createElement("a",Df({},h,{href:j||w,onClick:y||i?n:p,ref:s,target:c}))});var lv;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(lv||(lv={}));var cv;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(cv||(cv={}));function M4(e,t){let{target:s,replace:n,state:a,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=Yt(),d=Ri(),u=Gw(e,{relative:o});return f.useCallback(m=>{if(E4(m,s)){m.preventDefault();let h=n!==void 0?n:Id(d)===Id(u);c(e,{replace:h,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,u,n,a,s,e,i,o,l])}function Zw(e,t){return function(){return e.apply(t,arguments)}}const{toString:R4}=Object.prototype,{getPrototypeOf:hx}=Object,{iterator:ku,toStringTag:eN}=Symbol,Du=(e=>t=>{const s=R4.call(t);return e[s]||(e[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),fs=e=>(e=e.toLowerCase(),t=>Du(t)===e),Au=e=>t=>typeof t===e,{isArray:Pi}=Array,cl=Au("undefined");function P4(e){return e!==null&&!cl(e)&&e.constructor!==null&&!cl(e.constructor)&&hr(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const tN=fs("ArrayBuffer");function L4(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&tN(e.buffer),t}const I4=Au("string"),hr=Au("function"),rN=Au("number"),Tu=e=>e!==null&&typeof e=="object",$4=e=>e===!0||e===!1,Gc=e=>{if(Du(e)!=="object")return!1;const t=hx(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(eN in e)&&!(ku in e)},F4=fs("Date"),B4=fs("File"),z4=fs("Blob"),U4=fs("FileList"),V4=e=>Tu(e)&&hr(e.pipe),H4=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||hr(e.append)&&((t=Du(e))==="formdata"||t==="object"&&hr(e.toString)&&e.toString()==="[object FormData]"))},W4=fs("URLSearchParams"),[Y4,q4,G4,K4]=["ReadableStream","Request","Response","Headers"].map(fs),X4=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ll(e,t,{allOwnKeys:s=!1}={}){if(e===null||typeof e>"u")return;let n,a;if(typeof e!="object"&&(e=[e]),Pi(e))for(n=0,a=e.length;n<a;n++)t.call(null,e[n],n,e);else{const i=s?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let l;for(n=0;n<o;n++)l=i[n],t.call(null,e[l],l,e)}}function sN(e,t){t=t.toLowerCase();const s=Object.keys(e);let n=s.length,a;for(;n-- >0;)if(a=s[n],t===a.toLowerCase())return a;return null}const pa=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,nN=e=>!cl(e)&&e!==pa;function Af(){const{caseless:e}=nN(this)&&this||{},t={},s=(n,a)=>{const i=e&&sN(t,a)||a;Gc(t[i])&&Gc(n)?t[i]=Af(t[i],n):Gc(n)?t[i]=Af({},n):Pi(n)?t[i]=n.slice():t[i]=n};for(let n=0,a=arguments.length;n<a;n++)arguments[n]&&Ll(arguments[n],s);return t}const Q4=(e,t,s,{allOwnKeys:n}={})=>(Ll(t,(a,i)=>{s&&hr(a)?e[i]=Zw(a,s):e[i]=a},{allOwnKeys:n}),e),J4=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Z4=(e,t,s,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),s&&Object.assign(e.prototype,s)},eD=(e,t,s,n)=>{let a,i,o;const l={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),i=a.length;i-- >0;)o=a[i],(!n||n(o,e,t))&&!l[o]&&(t[o]=e[o],l[o]=!0);e=s!==!1&&hx(e)}while(e&&(!s||s(e,t))&&e!==Object.prototype);return t},tD=(e,t,s)=>{e=String(e),(s===void 0||s>e.length)&&(s=e.length),s-=t.length;const n=e.indexOf(t,s);return n!==-1&&n===s},rD=e=>{if(!e)return null;if(Pi(e))return e;let t=e.length;if(!rN(t))return null;const s=new Array(t);for(;t-- >0;)s[t]=e[t];return s},sD=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&hx(Uint8Array)),nD=(e,t)=>{const n=(e&&e[ku]).call(e);let a;for(;(a=n.next())&&!a.done;){const i=a.value;t.call(e,i[0],i[1])}},aD=(e,t)=>{let s;const n=[];for(;(s=e.exec(t))!==null;)n.push(s);return n},iD=fs("HTMLFormElement"),oD=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,n,a){return n.toUpperCase()+a}),dv=(({hasOwnProperty:e})=>(t,s)=>e.call(t,s))(Object.prototype),lD=fs("RegExp"),aN=(e,t)=>{const s=Object.getOwnPropertyDescriptors(e),n={};Ll(s,(a,i)=>{let o;(o=t(a,i,e))!==!1&&(n[i]=o||a)}),Object.defineProperties(e,n)},cD=e=>{aN(e,(t,s)=>{if(hr(e)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const n=e[s];if(hr(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},dD=(e,t)=>{const s={},n=a=>{a.forEach(i=>{s[i]=!0})};return Pi(e)?n(e):n(String(e).split(t)),s},uD=()=>{},mD=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function hD(e){return!!(e&&hr(e.append)&&e[eN]==="FormData"&&e[ku])}const fD=e=>{const t=new Array(10),s=(n,a)=>{if(Tu(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[a]=n;const i=Pi(n)?[]:{};return Ll(n,(o,l)=>{const c=s(o,a+1);!cl(c)&&(i[l]=c)}),t[a]=void 0,i}}return n};return s(e,0)},pD=fs("AsyncFunction"),xD=e=>e&&(Tu(e)||hr(e))&&hr(e.then)&&hr(e.catch),iN=((e,t)=>e?setImmediate:t?((s,n)=>(pa.addEventListener("message",({source:a,data:i})=>{a===pa&&i===s&&n.length&&n.shift()()},!1),a=>{n.push(a),pa.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",hr(pa.postMessage)),gD=typeof queueMicrotask<"u"?queueMicrotask.bind(pa):typeof process<"u"&&process.nextTick||iN,vD=e=>e!=null&&hr(e[ku]),J={isArray:Pi,isArrayBuffer:tN,isBuffer:P4,isFormData:H4,isArrayBufferView:L4,isString:I4,isNumber:rN,isBoolean:$4,isObject:Tu,isPlainObject:Gc,isReadableStream:Y4,isRequest:q4,isResponse:G4,isHeaders:K4,isUndefined:cl,isDate:F4,isFile:B4,isBlob:z4,isRegExp:lD,isFunction:hr,isStream:V4,isURLSearchParams:W4,isTypedArray:sD,isFileList:U4,forEach:Ll,merge:Af,extend:Q4,trim:X4,stripBOM:J4,inherits:Z4,toFlatObject:eD,kindOf:Du,kindOfTest:fs,endsWith:tD,toArray:rD,forEachEntry:nD,matchAll:aD,isHTMLForm:iD,hasOwnProperty:dv,hasOwnProp:dv,reduceDescriptors:aN,freezeMethods:cD,toObjectSet:dD,toCamelCase:oD,noop:uD,toFiniteNumber:mD,findKey:sN,global:pa,isContextDefined:nN,isSpecCompliantForm:hD,toJSONObject:fD,isAsyncFn:pD,isThenable:xD,setImmediate:iN,asap:gD,isIterable:vD};function Se(e,t,s,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),s&&(this.config=s),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}J.inherits(Se,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:J.toJSONObject(this.config),code:this.code,status:this.status}}});const oN=Se.prototype,lN={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{lN[e]={value:e}});Object.defineProperties(Se,lN);Object.defineProperty(oN,"isAxiosError",{value:!0});Se.from=(e,t,s,n,a,i)=>{const o=Object.create(oN);return J.toFlatObject(e,o,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),Se.call(o,e.message,t,s,n,a),o.cause=e,o.name=e.name,i&&Object.assign(o,i),o};const yD=null;function Tf(e){return J.isPlainObject(e)||J.isArray(e)}function cN(e){return J.endsWith(e,"[]")?e.slice(0,-2):e}function uv(e,t,s){return e?e.concat(t).map(function(a,i){return a=cN(a),!s&&i?"["+a+"]":a}).join(s?".":""):t}function bD(e){return J.isArray(e)&&!e.some(Tf)}const jD=J.toFlatObject(J,{},null,function(t){return/^is[A-Z]/.test(t)});function _u(e,t,s){if(!J.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,s=J.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,w){return!J.isUndefined(w[y])});const n=s.metaTokens,a=s.visitor||u,i=s.dots,o=s.indexes,c=(s.Blob||typeof Blob<"u"&&Blob)&&J.isSpecCompliantForm(t);if(!J.isFunction(a))throw new TypeError("visitor must be a function");function d(j){if(j===null)return"";if(J.isDate(j))return j.toISOString();if(J.isBoolean(j))return j.toString();if(!c&&J.isBlob(j))throw new Se("Blob is not supported. Use a Buffer instead.");return J.isArrayBuffer(j)||J.isTypedArray(j)?c&&typeof Blob=="function"?new Blob([j]):Buffer.from(j):j}function u(j,y,w){let x=j;if(j&&!w&&typeof j=="object"){if(J.endsWith(y,"{}"))y=n?y:y.slice(0,-2),j=JSON.stringify(j);else if(J.isArray(j)&&bD(j)||(J.isFileList(j)||J.endsWith(y,"[]"))&&(x=J.toArray(j)))return y=cN(y),x.forEach(function(v,N){!(J.isUndefined(v)||v===null)&&t.append(o===!0?uv([y],N,i):o===null?y:y+"[]",d(v))}),!1}return Tf(j)?!0:(t.append(uv(w,y,i),d(j)),!1)}const m=[],h=Object.assign(jD,{defaultVisitor:u,convertValue:d,isVisitable:Tf});function g(j,y){if(!J.isUndefined(j)){if(m.indexOf(j)!==-1)throw Error("Circular reference detected in "+y.join("."));m.push(j),J.forEach(j,function(x,p){(!(J.isUndefined(x)||x===null)&&a.call(t,x,J.isString(p)?p.trim():p,y,h))===!0&&g(x,y?y.concat(p):[p])}),m.pop()}}if(!J.isObject(e))throw new TypeError("data must be an object");return g(e),t}function mv(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function fx(e,t){this._pairs=[],e&&_u(e,this,t)}const dN=fx.prototype;dN.append=function(t,s){this._pairs.push([t,s])};dN.toString=function(t){const s=t?function(n){return t.call(this,n,mv)}:mv;return this._pairs.map(function(a){return s(a[0])+"="+s(a[1])},"").join("&")};function wD(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function uN(e,t,s){if(!t)return e;const n=s&&s.encode||wD;J.isFunction(s)&&(s={serialize:s});const a=s&&s.serialize;let i;if(a?i=a(t,s):i=J.isURLSearchParams(t)?t.toString():new fx(t,s).toString(n),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class hv{constructor(){this.handlers=[]}use(t,s,n){return this.handlers.push({fulfilled:t,rejected:s,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){J.forEach(this.handlers,function(n){n!==null&&t(n)})}}const mN={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ND=typeof URLSearchParams<"u"?URLSearchParams:fx,CD=typeof FormData<"u"?FormData:null,SD=typeof Blob<"u"?Blob:null,ED={isBrowser:!0,classes:{URLSearchParams:ND,FormData:CD,Blob:SD},protocols:["http","https","file","blob","url","data"]},px=typeof window<"u"&&typeof document<"u",_f=typeof navigator=="object"&&navigator||void 0,kD=px&&(!_f||["ReactNative","NativeScript","NS"].indexOf(_f.product)<0),DD=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",AD=px&&window.location.href||"http://localhost",TD=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:px,hasStandardBrowserEnv:kD,hasStandardBrowserWebWorkerEnv:DD,navigator:_f,origin:AD},Symbol.toStringTag,{value:"Module"})),Vt={...TD,...ED};function _D(e,t){return _u(e,new Vt.classes.URLSearchParams,Object.assign({visitor:function(s,n,a,i){return Vt.isNode&&J.isBuffer(s)?(this.append(n,s.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}function OD(e){return J.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function MD(e){const t={},s=Object.keys(e);let n;const a=s.length;let i;for(n=0;n<a;n++)i=s[n],t[i]=e[i];return t}function hN(e){function t(s,n,a,i){let o=s[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=s.length;return o=!o&&J.isArray(a)?a.length:o,c?(J.hasOwnProp(a,o)?a[o]=[a[o],n]:a[o]=n,!l):((!a[o]||!J.isObject(a[o]))&&(a[o]=[]),t(s,n,a[o],i)&&J.isArray(a[o])&&(a[o]=MD(a[o])),!l)}if(J.isFormData(e)&&J.isFunction(e.entries)){const s={};return J.forEachEntry(e,(n,a)=>{t(OD(n),a,s,0)}),s}return null}function RD(e,t,s){if(J.isString(e))try{return(t||JSON.parse)(e),J.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(s||JSON.stringify)(e)}const Il={transitional:mN,adapter:["xhr","http","fetch"],transformRequest:[function(t,s){const n=s.getContentType()||"",a=n.indexOf("application/json")>-1,i=J.isObject(t);if(i&&J.isHTMLForm(t)&&(t=new FormData(t)),J.isFormData(t))return a?JSON.stringify(hN(t)):t;if(J.isArrayBuffer(t)||J.isBuffer(t)||J.isStream(t)||J.isFile(t)||J.isBlob(t)||J.isReadableStream(t))return t;if(J.isArrayBufferView(t))return t.buffer;if(J.isURLSearchParams(t))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return _D(t,this.formSerializer).toString();if((l=J.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return _u(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||a?(s.setContentType("application/json",!1),RD(t)):t}],transformResponse:[function(t){const s=this.transitional||Il.transitional,n=s&&s.forcedJSONParsing,a=this.responseType==="json";if(J.isResponse(t)||J.isReadableStream(t))return t;if(t&&J.isString(t)&&(n&&!this.responseType||a)){const o=!(s&&s.silentJSONParsing)&&a;try{return JSON.parse(t)}catch(l){if(o)throw l.name==="SyntaxError"?Se.from(l,Se.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Vt.classes.FormData,Blob:Vt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};J.forEach(["delete","get","head","post","put","patch"],e=>{Il.headers[e]={}});const PD=J.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),LD=e=>{const t={};let s,n,a;return e&&e.split(`
`).forEach(function(o){a=o.indexOf(":"),s=o.substring(0,a).trim().toLowerCase(),n=o.substring(a+1).trim(),!(!s||t[s]&&PD[s])&&(s==="set-cookie"?t[s]?t[s].push(n):t[s]=[n]:t[s]=t[s]?t[s]+", "+n:n)}),t},fv=Symbol("internals");function mo(e){return e&&String(e).trim().toLowerCase()}function Kc(e){return e===!1||e==null?e:J.isArray(e)?e.map(Kc):String(e)}function ID(e){const t=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=s.exec(e);)t[n[1]]=n[2];return t}const $D=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Zm(e,t,s,n,a){if(J.isFunction(n))return n.call(this,t,s);if(a&&(t=s),!!J.isString(t)){if(J.isString(n))return t.indexOf(n)!==-1;if(J.isRegExp(n))return n.test(t)}}function FD(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,s,n)=>s.toUpperCase()+n)}function BD(e,t){const s=J.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+s,{value:function(a,i,o){return this[n].call(this,t,a,i,o)},configurable:!0})})}let fr=class{constructor(t){t&&this.set(t)}set(t,s,n){const a=this;function i(l,c,d){const u=mo(c);if(!u)throw new Error("header name must be a non-empty string");const m=J.findKey(a,u);(!m||a[m]===void 0||d===!0||d===void 0&&a[m]!==!1)&&(a[m||c]=Kc(l))}const o=(l,c)=>J.forEach(l,(d,u)=>i(d,u,c));if(J.isPlainObject(t)||t instanceof this.constructor)o(t,s);else if(J.isString(t)&&(t=t.trim())&&!$D(t))o(LD(t),s);else if(J.isObject(t)&&J.isIterable(t)){let l={},c,d;for(const u of t){if(!J.isArray(u))throw TypeError("Object iterator must return a key-value pair");l[d=u[0]]=(c=l[d])?J.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}o(l,s)}else t!=null&&i(s,t,n);return this}get(t,s){if(t=mo(t),t){const n=J.findKey(this,t);if(n){const a=this[n];if(!s)return a;if(s===!0)return ID(a);if(J.isFunction(s))return s.call(this,a,n);if(J.isRegExp(s))return s.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,s){if(t=mo(t),t){const n=J.findKey(this,t);return!!(n&&this[n]!==void 0&&(!s||Zm(this,this[n],n,s)))}return!1}delete(t,s){const n=this;let a=!1;function i(o){if(o=mo(o),o){const l=J.findKey(n,o);l&&(!s||Zm(n,n[l],l,s))&&(delete n[l],a=!0)}}return J.isArray(t)?t.forEach(i):i(t),a}clear(t){const s=Object.keys(this);let n=s.length,a=!1;for(;n--;){const i=s[n];(!t||Zm(this,this[i],i,t,!0))&&(delete this[i],a=!0)}return a}normalize(t){const s=this,n={};return J.forEach(this,(a,i)=>{const o=J.findKey(n,i);if(o){s[o]=Kc(a),delete s[i];return}const l=t?FD(i):String(i).trim();l!==i&&delete s[i],s[l]=Kc(a),n[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const s=Object.create(null);return J.forEach(this,(n,a)=>{n!=null&&n!==!1&&(s[a]=t&&J.isArray(n)?n.join(", "):n)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,s])=>t+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...s){const n=new this(t);return s.forEach(a=>n.set(a)),n}static accessor(t){const n=(this[fv]=this[fv]={accessors:{}}).accessors,a=this.prototype;function i(o){const l=mo(o);n[l]||(BD(a,o),n[l]=!0)}return J.isArray(t)?t.forEach(i):i(t),this}};fr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);J.reduceDescriptors(fr.prototype,({value:e},t)=>{let s=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[s]=n}}});J.freezeMethods(fr);function eh(e,t){const s=this||Il,n=t||s,a=fr.from(n.headers);let i=n.data;return J.forEach(e,function(l){i=l.call(s,i,a.normalize(),t?t.status:void 0)}),a.normalize(),i}function fN(e){return!!(e&&e.__CANCEL__)}function Li(e,t,s){Se.call(this,e??"canceled",Se.ERR_CANCELED,t,s),this.name="CanceledError"}J.inherits(Li,Se,{__CANCEL__:!0});function pN(e,t,s){const n=s.config.validateStatus;!s.status||!n||n(s.status)?e(s):t(new Se("Request failed with status code "+s.status,[Se.ERR_BAD_REQUEST,Se.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function zD(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function UD(e,t){e=e||10;const s=new Array(e),n=new Array(e);let a=0,i=0,o;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),u=n[i];o||(o=d),s[a]=c,n[a]=d;let m=i,h=0;for(;m!==a;)h+=s[m++],m=m%e;if(a=(a+1)%e,a===i&&(i=(i+1)%e),d-o<t)return;const g=u&&d-u;return g?Math.round(h*1e3/g):void 0}}function VD(e,t){let s=0,n=1e3/t,a,i;const o=(d,u=Date.now())=>{s=u,a=null,i&&(clearTimeout(i),i=null),e.apply(null,d)};return[(...d)=>{const u=Date.now(),m=u-s;m>=n?o(d,u):(a=d,i||(i=setTimeout(()=>{i=null,o(a)},n-m)))},()=>a&&o(a)]}const $d=(e,t,s=3)=>{let n=0;const a=UD(50,250);return VD(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-n,d=a(c),u=o<=l;n=o;const m={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&u?(l-o)/d:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(m)},s)},pv=(e,t)=>{const s=e!=null;return[n=>t[0]({lengthComputable:s,total:e,loaded:n}),t[1]]},xv=e=>(...t)=>J.asap(()=>e(...t)),HD=Vt.hasStandardBrowserEnv?((e,t)=>s=>(s=new URL(s,Vt.origin),e.protocol===s.protocol&&e.host===s.host&&(t||e.port===s.port)))(new URL(Vt.origin),Vt.navigator&&/(msie|trident)/i.test(Vt.navigator.userAgent)):()=>!0,WD=Vt.hasStandardBrowserEnv?{write(e,t,s,n,a,i){const o=[e+"="+encodeURIComponent(t)];J.isNumber(s)&&o.push("expires="+new Date(s).toGMTString()),J.isString(n)&&o.push("path="+n),J.isString(a)&&o.push("domain="+a),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function YD(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function qD(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function xN(e,t,s){let n=!YD(t);return e&&(n||s==!1)?qD(e,t):t}const gv=e=>e instanceof fr?{...e}:e;function Da(e,t){t=t||{};const s={};function n(d,u,m,h){return J.isPlainObject(d)&&J.isPlainObject(u)?J.merge.call({caseless:h},d,u):J.isPlainObject(u)?J.merge({},u):J.isArray(u)?u.slice():u}function a(d,u,m,h){if(J.isUndefined(u)){if(!J.isUndefined(d))return n(void 0,d,m,h)}else return n(d,u,m,h)}function i(d,u){if(!J.isUndefined(u))return n(void 0,u)}function o(d,u){if(J.isUndefined(u)){if(!J.isUndefined(d))return n(void 0,d)}else return n(void 0,u)}function l(d,u,m){if(m in t)return n(d,u);if(m in e)return n(void 0,d)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(d,u,m)=>a(gv(d),gv(u),m,!0)};return J.forEach(Object.keys(Object.assign({},e,t)),function(u){const m=c[u]||a,h=m(e[u],t[u],u);J.isUndefined(h)&&m!==l||(s[u]=h)}),s}const gN=e=>{const t=Da({},e);let{data:s,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:i,headers:o,auth:l}=t;t.headers=o=fr.from(o),t.url=uN(xN(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(J.isFormData(s)){if(Vt.hasStandardBrowserEnv||Vt.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[d,...u]=c?c.split(";").map(m=>m.trim()).filter(Boolean):[];o.setContentType([d||"multipart/form-data",...u].join("; "))}}if(Vt.hasStandardBrowserEnv&&(n&&J.isFunction(n)&&(n=n(t)),n||n!==!1&&HD(t.url))){const d=a&&i&&WD.read(i);d&&o.set(a,d)}return t},GD=typeof XMLHttpRequest<"u",KD=GD&&function(e){return new Promise(function(s,n){const a=gN(e);let i=a.data;const o=fr.from(a.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=a,u,m,h,g,j;function y(){g&&g(),j&&j(),a.cancelToken&&a.cancelToken.unsubscribe(u),a.signal&&a.signal.removeEventListener("abort",u)}let w=new XMLHttpRequest;w.open(a.method.toUpperCase(),a.url,!0),w.timeout=a.timeout;function x(){if(!w)return;const v=fr.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),b={data:!l||l==="text"||l==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:v,config:e,request:w};pN(function(S){s(S),y()},function(S){n(S),y()},b),w=null}"onloadend"in w?w.onloadend=x:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(x)},w.onabort=function(){w&&(n(new Se("Request aborted",Se.ECONNABORTED,e,w)),w=null)},w.onerror=function(){n(new Se("Network Error",Se.ERR_NETWORK,e,w)),w=null},w.ontimeout=function(){let N=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const b=a.transitional||mN;a.timeoutErrorMessage&&(N=a.timeoutErrorMessage),n(new Se(N,b.clarifyTimeoutError?Se.ETIMEDOUT:Se.ECONNABORTED,e,w)),w=null},i===void 0&&o.setContentType(null),"setRequestHeader"in w&&J.forEach(o.toJSON(),function(N,b){w.setRequestHeader(b,N)}),J.isUndefined(a.withCredentials)||(w.withCredentials=!!a.withCredentials),l&&l!=="json"&&(w.responseType=a.responseType),d&&([h,j]=$d(d,!0),w.addEventListener("progress",h)),c&&w.upload&&([m,g]=$d(c),w.upload.addEventListener("progress",m),w.upload.addEventListener("loadend",g)),(a.cancelToken||a.signal)&&(u=v=>{w&&(n(!v||v.type?new Li(null,e,w):v),w.abort(),w=null)},a.cancelToken&&a.cancelToken.subscribe(u),a.signal&&(a.signal.aborted?u():a.signal.addEventListener("abort",u)));const p=zD(a.url);if(p&&Vt.protocols.indexOf(p)===-1){n(new Se("Unsupported protocol "+p+":",Se.ERR_BAD_REQUEST,e));return}w.send(i||null)})},XD=(e,t)=>{const{length:s}=e=e?e.filter(Boolean):[];if(t||s){let n=new AbortController,a;const i=function(d){if(!a){a=!0,l();const u=d instanceof Error?d:this.reason;n.abort(u instanceof Se?u:new Li(u instanceof Error?u.message:u))}};let o=t&&setTimeout(()=>{o=null,i(new Se(`timeout ${t} of ms exceeded`,Se.ETIMEDOUT))},t);const l=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),e=null)};e.forEach(d=>d.addEventListener("abort",i));const{signal:c}=n;return c.unsubscribe=()=>J.asap(l),c}},QD=function*(e,t){let s=e.byteLength;if(s<t){yield e;return}let n=0,a;for(;n<s;)a=n+t,yield e.slice(n,a),n=a},JD=async function*(e,t){for await(const s of ZD(e))yield*QD(s,t)},ZD=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:s,value:n}=await t.read();if(s)break;yield n}}finally{await t.cancel()}},vv=(e,t,s,n)=>{const a=JD(e,t);let i=0,o,l=c=>{o||(o=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await a.next();if(d){l(),c.close();return}let m=u.byteLength;if(s){let h=i+=m;s(h)}c.enqueue(new Uint8Array(u))}catch(d){throw l(d),d}},cancel(c){return l(c),a.return()}},{highWaterMark:2})},Ou=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",vN=Ou&&typeof ReadableStream=="function",e5=Ou&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),yN=(e,...t)=>{try{return!!e(...t)}catch{return!1}},t5=vN&&yN(()=>{let e=!1;const t=new Request(Vt.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),yv=64*1024,Of=vN&&yN(()=>J.isReadableStream(new Response("").body)),Fd={stream:Of&&(e=>e.body)};Ou&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Fd[t]&&(Fd[t]=J.isFunction(e[t])?s=>s[t]():(s,n)=>{throw new Se(`Response type '${t}' is not supported`,Se.ERR_NOT_SUPPORT,n)})})})(new Response);const r5=async e=>{if(e==null)return 0;if(J.isBlob(e))return e.size;if(J.isSpecCompliantForm(e))return(await new Request(Vt.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(J.isArrayBufferView(e)||J.isArrayBuffer(e))return e.byteLength;if(J.isURLSearchParams(e)&&(e=e+""),J.isString(e))return(await e5(e)).byteLength},s5=async(e,t)=>{const s=J.toFiniteNumber(e.getContentLength());return s??r5(t)},n5=Ou&&(async e=>{let{url:t,method:s,data:n,signal:a,cancelToken:i,timeout:o,onDownloadProgress:l,onUploadProgress:c,responseType:d,headers:u,withCredentials:m="same-origin",fetchOptions:h}=gN(e);d=d?(d+"").toLowerCase():"text";let g=XD([a,i&&i.toAbortSignal()],o),j;const y=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let w;try{if(c&&t5&&s!=="get"&&s!=="head"&&(w=await s5(u,n))!==0){let b=new Request(t,{method:"POST",body:n,duplex:"half"}),C;if(J.isFormData(n)&&(C=b.headers.get("content-type"))&&u.setContentType(C),b.body){const[S,k]=pv(w,$d(xv(c)));n=vv(b.body,yv,S,k)}}J.isString(m)||(m=m?"include":"omit");const x="credentials"in Request.prototype;j=new Request(t,{...h,signal:g,method:s.toUpperCase(),headers:u.normalize().toJSON(),body:n,duplex:"half",credentials:x?m:void 0});let p=await fetch(j,h);const v=Of&&(d==="stream"||d==="response");if(Of&&(l||v&&y)){const b={};["status","statusText","headers"].forEach(D=>{b[D]=p[D]});const C=J.toFiniteNumber(p.headers.get("content-length")),[S,k]=l&&pv(C,$d(xv(l),!0))||[];p=new Response(vv(p.body,yv,S,()=>{k&&k(),y&&y()}),b)}d=d||"text";let N=await Fd[J.findKey(Fd,d)||"text"](p,e);return!v&&y&&y(),await new Promise((b,C)=>{pN(b,C,{data:N,headers:fr.from(p.headers),status:p.status,statusText:p.statusText,config:e,request:j})})}catch(x){throw y&&y(),x&&x.name==="TypeError"&&/Load failed|fetch/i.test(x.message)?Object.assign(new Se("Network Error",Se.ERR_NETWORK,e,j),{cause:x.cause||x}):Se.from(x,x&&x.code,e,j)}}),Mf={http:yD,xhr:KD,fetch:n5};J.forEach(Mf,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const bv=e=>`- ${e}`,a5=e=>J.isFunction(e)||e===null||e===!1,bN={getAdapter:e=>{e=J.isArray(e)?e:[e];const{length:t}=e;let s,n;const a={};for(let i=0;i<t;i++){s=e[i];let o;if(n=s,!a5(s)&&(n=Mf[(o=String(s)).toLowerCase()],n===void 0))throw new Se(`Unknown adapter '${o}'`);if(n)break;a[o||"#"+i]=n}if(!n){const i=Object.entries(a).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=t?i.length>1?`since :
`+i.map(bv).join(`
`):" "+bv(i[0]):"as no adapter specified";throw new Se("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:Mf};function th(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Li(null,e)}function jv(e){return th(e),e.headers=fr.from(e.headers),e.data=eh.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),bN.getAdapter(e.adapter||Il.adapter)(e).then(function(n){return th(e),n.data=eh.call(e,e.transformResponse,n),n.headers=fr.from(n.headers),n},function(n){return fN(n)||(th(e),n&&n.response&&(n.response.data=eh.call(e,e.transformResponse,n.response),n.response.headers=fr.from(n.response.headers))),Promise.reject(n)})}const jN="1.10.0",Mu={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Mu[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const wv={};Mu.transitional=function(t,s,n){function a(i,o){return"[Axios v"+jN+"] Transitional option '"+i+"'"+o+(n?". "+n:"")}return(i,o,l)=>{if(t===!1)throw new Se(a(o," has been removed"+(s?" in "+s:"")),Se.ERR_DEPRECATED);return s&&!wv[o]&&(wv[o]=!0,console.warn(a(o," has been deprecated since v"+s+" and will be removed in the near future"))),t?t(i,o,l):!0}};Mu.spelling=function(t){return(s,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function i5(e,t,s){if(typeof e!="object")throw new Se("options must be an object",Se.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let a=n.length;for(;a-- >0;){const i=n[a],o=t[i];if(o){const l=e[i],c=l===void 0||o(l,i,e);if(c!==!0)throw new Se("option "+i+" must be "+c,Se.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new Se("Unknown option "+i,Se.ERR_BAD_OPTION)}}const Xc={assertOptions:i5,validators:Mu},Ns=Xc.validators;let ya=class{constructor(t){this.defaults=t||{},this.interceptors={request:new hv,response:new hv}}async request(t,s){try{return await this._request(t,s)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const i=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(t,s){typeof t=="string"?(s=s||{},s.url=t):s=t||{},s=Da(this.defaults,s);const{transitional:n,paramsSerializer:a,headers:i}=s;n!==void 0&&Xc.assertOptions(n,{silentJSONParsing:Ns.transitional(Ns.boolean),forcedJSONParsing:Ns.transitional(Ns.boolean),clarifyTimeoutError:Ns.transitional(Ns.boolean)},!1),a!=null&&(J.isFunction(a)?s.paramsSerializer={serialize:a}:Xc.assertOptions(a,{encode:Ns.function,serialize:Ns.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),Xc.assertOptions(s,{baseUrl:Ns.spelling("baseURL"),withXsrfToken:Ns.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let o=i&&J.merge(i.common,i[s.method]);i&&J.forEach(["delete","get","head","post","put","patch","common"],j=>{delete i[j]}),s.headers=fr.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(s)===!1||(c=c&&y.synchronous,l.unshift(y.fulfilled,y.rejected))});const d=[];this.interceptors.response.forEach(function(y){d.push(y.fulfilled,y.rejected)});let u,m=0,h;if(!c){const j=[jv.bind(this),void 0];for(j.unshift.apply(j,l),j.push.apply(j,d),h=j.length,u=Promise.resolve(s);m<h;)u=u.then(j[m++],j[m++]);return u}h=l.length;let g=s;for(m=0;m<h;){const j=l[m++],y=l[m++];try{g=j(g)}catch(w){y.call(this,w);break}}try{u=jv.call(this,g)}catch(j){return Promise.reject(j)}for(m=0,h=d.length;m<h;)u=u.then(d[m++],d[m++]);return u}getUri(t){t=Da(this.defaults,t);const s=xN(t.baseURL,t.url,t.allowAbsoluteUrls);return uN(s,t.params,t.paramsSerializer)}};J.forEach(["delete","get","head","options"],function(t){ya.prototype[t]=function(s,n){return this.request(Da(n||{},{method:t,url:s,data:(n||{}).data}))}});J.forEach(["post","put","patch"],function(t){function s(n){return function(i,o,l){return this.request(Da(l||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}ya.prototype[t]=s(),ya.prototype[t+"Form"]=s(!0)});let o5=class wN{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(i){s=i});const n=this;this.promise.then(a=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](a);n._listeners=null}),this.promise.then=a=>{let i;const o=new Promise(l=>{n.subscribe(l),i=l}).then(a);return o.cancel=function(){n.unsubscribe(i)},o},t(function(i,o,l){n.reason||(n.reason=new Li(i,o,l),s(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const s=this._listeners.indexOf(t);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const t=new AbortController,s=n=>{t.abort(n)};return this.subscribe(s),t.signal.unsubscribe=()=>this.unsubscribe(s),t.signal}static source(){let t;return{token:new wN(function(a){t=a}),cancel:t}}};function l5(e){return function(s){return e.apply(null,s)}}function c5(e){return J.isObject(e)&&e.isAxiosError===!0}const Rf={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Rf).forEach(([e,t])=>{Rf[t]=e});function NN(e){const t=new ya(e),s=Zw(ya.prototype.request,t);return J.extend(s,ya.prototype,t,{allOwnKeys:!0}),J.extend(s,t,null,{allOwnKeys:!0}),s.create=function(a){return NN(Da(e,a))},s}const ht=NN(Il);ht.Axios=ya;ht.CanceledError=Li;ht.CancelToken=o5;ht.isCancel=fN;ht.VERSION=jN;ht.toFormData=_u;ht.AxiosError=Se;ht.Cancel=ht.CanceledError;ht.all=function(t){return Promise.all(t)};ht.spread=l5;ht.isAxiosError=c5;ht.mergeConfig=Da;ht.AxiosHeaders=fr;ht.formToJSON=e=>hN(J.isHTMLForm(e)?new FormData(e):e);ht.getAdapter=bN.getAdapter;ht.HttpStatusCode=Rf;ht.default=ht;const{Axios:AQ,AxiosError:TQ,CanceledError:_Q,isCancel:OQ,CancelToken:MQ,VERSION:RQ,all:PQ,Cancel:LQ,isAxiosError:IQ,spread:$Q,toFormData:FQ,AxiosHeaders:BQ,HttpStatusCode:zQ,formToJSON:UQ,getAdapter:VQ,mergeConfig:HQ}=ht,xx=()=>{const s=window.APP_CONFIG,n="https://experimento2-production-54c0.up.railway.app",a="https://chatbot-legal-production-b91c.up.railway.app",i="https://experimento2-fenm.vercel.app",o=(s==null?void 0:s.API_URL)||void 0||n,l=(s==null?void 0:s.CHATBOT_URL)||void 0||a,c=(s==null?void 0:s.FRONTEND_URL)||i;return{BACKEND_API:o,CHATBOT_API:l,FRONTEND_URL:c,ENDPOINTS:{AUTH:`${o}/api/auth`,USERS:`${o}/api/users`,CASES:`${o}/api/cases`,TASKS:`${o}/api/tasks`,INVOICES:`${o}/api/invoices`,APPOINTMENTS:`${o}/api/appointments`,DOCUMENTS:`${o}/api/documents`,PARAMETROS:`${o}/api/parametros`,SITE_CONFIG:`${o}/api/site-config`,HEALTH:`${o}/api/health`}}},Ii=()=>xx().BACKEND_API,d5=()=>{const e=xx();console.log("🔧 Configuración de Endpoints:"),console.log("🔧 BACKEND_API:",e.BACKEND_API),console.log("🔧 CHATBOT_API:",e.CHATBOT_API),console.log("🔧 FRONTEND_URL:",e.FRONTEND_URL),console.log("🔧 ENDPOINTS:",e.ENDPOINTS)};xx();class So extends Error{}So.prototype.name="InvalidTokenError";function u5(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,s)=>{let n=s.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}function m5(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return u5(t)}catch{return atob(t)}}function Ru(e,t){if(typeof e!="string")throw new So("Invalid token specified: must be a string");t||(t={});const s=t.header===!0?0:1,n=e.split(".")[s];if(typeof n!="string")throw new So(`Invalid token specified: missing part #${s+1}`);let a;try{a=m5(n)}catch(i){throw new So(`Invalid token specified: invalid base64 for part #${s+1} (${i.message})`)}try{return JSON.parse(a)}catch(i){throw new So(`Invalid token specified: invalid json for part #${s+1} (${i.message})`)}}var h5={};const or={level:"error",enableTokenLogs:!1,maxTokenLogsPerSession:1,tokenLogCount:0,modules:{auth:{level:"warn"},api:{level:"info"},documents:{level:"info"}}};function Os(e,t,s){const n=or;if(n.level==="debug"||e==="error"||e==="warn"&&["warn","info","debug"].includes(n.level)||e==="info"&&["info","debug"].includes(n.level))switch(e){case"error":console.error(t,s);break;case"warn":console.warn(t,s);break;case"info":console.log(t,s);break;case"debug":console.debug(t,s);break}}function f5(e,t,s=""){if(or.enableTokenLogs&&(or.tokenLogCount++,or.tokenLogCount<=or.maxTokenLogsPerSession)){const n=new Date,a=t.getTime()-n.getTime(),i=Math.floor(a/(1e3*60));(i<60||a<0)&&Os("info",`🔑 Token validation: ${s} - Expira en ${i} minutos`)}}function p5(){if(typeof window<"u"){const t=new URLSearchParams(window.location.search).get("log")||h5.REACT_APP_LOG_LEVEL;t&&(or.level=t,or.enableTokenLogs=t==="debug")}or.level="error",or.enableTokenLogs=!1,or.modules.auth.level="warn",or.modules.api.level="warn",or.modules.documents.level="warn",console.log(`🔧 Logging configurado: Nivel=${or.level}, TokenLogs=${or.enableTokenLogs}`)}p5();const dl=e=>{try{const t=Ru(e),s=Date.now()/1e3;if(t.exp<s)return Os("warn","🔑 Token expirado:",new Date(t.exp*1e3).toLocaleString()),!1;if(!t.sub||!t.role||!t.email)return Os("warn","🔑 Token inválido: campos faltantes"),!1;const n=new Date(t.exp*1e3);return f5(e,n,"Validación de token"),!0}catch(t){return Os("error","🔑 Error decodificando token:",t),!1}},CN=e=>{try{const t=Ru(e);return{id:t.sub,email:t.email,name:t.email.split("@")[0],role:t.role}}catch(t){return console.error("🔑 Error obteniendo usuario del token:",t),null}},x5=e=>{try{const t=Ru(e),s=Date.now()/1e3,n=5*60;return t.exp-s<n}catch{return!0}},Aa=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("refreshToken")},rh=(e,t,s)=>{localStorage.setItem("token",e),localStorage.setItem("user",JSON.stringify(t))},SN=()=>{const e=localStorage.getItem("token");return e?dl(e)?e:(Os("warn","🔑 Token inválido, limpiando datos de autenticación"),Aa(),null):null},EN=()=>{const e=SN(),t=localStorage.getItem("user");return!!(e&&t)},g5=()=>{if(!EN())return null;try{const e=localStorage.getItem("user");return e?JSON.parse(e):null}catch(e){return console.error("🔑 Error obteniendo usuario autenticado:",e),Aa(),null}},K=ht.create({baseURL:`${Ii()}/api`});d5();console.log("🔧 Base URL final de axios:",K.defaults.baseURL);K.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&dl(t)?(e.headers.Authorization=`Bearer ${t}`,Os("debug","🔑 Token válido enviado en request")):t&&(Os("warn","🔑 Token inválido detectado, limpiando datos de autenticación"),Aa()),e});K.interceptors.response.use(e=>e,e=>{var t,s,n,a;return e.response&&(e.response.status===401?(Os("warn","🔑 Error 401: Token no autorizado"),Aa(),window.location.href="/login",alert("Sesión expirada o no autorizada. Por favor, inicia sesión de nuevo.")):e.response.status===429?(Os("warn","🔑 Error 429: Demasiados intentos"),alert("Demasiados intentos de autenticación. Espera unos minutos antes de volver a intentarlo.")):e.response.status===500&&(Os("error","🔑 Error 500: Error interno del servidor"),((s=(t=e.response.data)==null?void 0:t.message)!=null&&s.includes("Unauthorized")||(a=(n=e.response.data)==null?void 0:n.message)!=null&&a.includes("invalid token"))&&(Aa(),window.location.href="/login",alert("Problema de autenticación detectado. Por favor, inicia sesión de nuevo.")))),Promise.reject(e)});const kN=f.createContext(null),Ce=()=>{const e=f.useContext(kN);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},v5=({children:e})=>{const[t,s]=f.useState(null),[n,a]=f.useState(!0);f.useEffect(()=>{i()},[]);const i=async()=>{try{console.log("🔍 Verificando autenticación...");const y=SN();if(!y){console.log("🔑 No hay token válido"),a(!1);return}const w=CN(y);if(w){console.log("🔑 Usuario obtenido del token:",w),s(w),a(!1);return}console.log("🔑 Verificando token con la API...");const x=await K.get("/auth/me",{headers:{Authorization:`Bearer ${y}`}});if(x.data&&x.data.role){const p={id:x.data.id,email:x.data.email,name:x.data.name,role:x.data.role};console.log("🔑 Usuario verificado por API:",p),rh(y,p),s(p)}else throw new Error("Datos de usuario incompletos")}catch(y){console.error("🔑 Error en checkAuth:",y),Aa()}finally{a(!1)}},o=async(y,w)=>{var x,p;try{console.log("🔑 Iniciando sesión...");const v=await K.post("/auth/login",{email:y,password:w}),{token:N,user:b}=v.data;if(!dl(N))throw new Error("Token inválido recibido del servidor");const C={id:b.id,email:b.email,name:b.name,role:b.role};console.log("🔑 Usuario autenticado:",C),rh(N,C),s(C)}catch(v){throw console.error("🔑 Error en login:",v),new Error(((p=(x=v==null?void 0:v.response)==null?void 0:x.data)==null?void 0:p.message)||"Error en el inicio de sesión")}},l=()=>{console.log("🔑 Cerrando sesión..."),Aa(),s(null),window.location.href="/login"},c=async()=>{try{console.log("🔑 Refrescando autenticación..."),await i()}catch(y){console.error("🔑 Error refrescando autenticación:",y),l()}},d=async y=>{try{console.log("🔑 Registrando usuario...");const w=await K.post("/auth/register",y),{token:x,user:p}=w.data;if(!dl(x))throw new Error("Token inválido recibido del servidor");const v={id:p.id,email:p.email,name:p.name,role:p.role};console.log("🔑 Usuario registrado:",v),rh(x,v),s(v)}catch(w){throw console.error("🔑 Error en registro:",w),new Error("Error en el registro")}},u=f.useMemo(()=>t,[t==null?void 0:t.id,t==null?void 0:t.email,t==null?void 0:t.name,t==null?void 0:t.role]),m=f.useCallback(o,[]),h=f.useCallback(l,[]),g=f.useCallback(d,[]),j=f.useMemo(()=>({user:u,loading:n,login:m,logout:h,register:g,refreshAuth:c}),[u,n,m,h,g,c]);return r.jsx(kN.Provider,{value:j,children:e})},y5=()=>{const[e,t]=f.useState({}),[s,n]=f.useState(!0),[a,i]=f.useState(null),[o,l]=f.useState(!1);f.useEffect(()=>{o||c()},[o]);const c=async()=>{try{n(!0),i(null);const g=await K.get("/site-config/public"),j={};g.data.forEach(y=>{j[y.key]=y.value}),t(j),l(!0)}catch(g){console.error("Error fetching site configs:",g),i("Error al cargar las configuraciones del sitio")}finally{n(!1)}};return{configs:e,loading:s,error:a,getConfig:(g,j="")=>e[g]||j,getBooleanConfig:(g,j=!1)=>e[g]==="true"||j,getNumberConfig:(g,j=0)=>{const y=e[g];return y?parseInt(y,10):j},updateConfig:async(g,j)=>{try{return await K.patch(`/site-config/key/${g}`,{value:j}),t(y=>({...y,[g]:j})),!0}catch(y){return console.error("Error updating config:",y),!1}},refresh:c}},b5=e=>{const[t,s]=f.useState(null),[n,a]=f.useState(!0),[i,o]=f.useState(null),[l,c]=f.useState(null);f.useEffect(()=>{e&&e!==l?(c(e),d()):!e&&l?(c(null),s(null),a(!1)):!e&&!l&&n&&a(!1)},[e,l,n]);const d=async()=>{if(e)try{a(!0),o(null);const h=await K.get(`/menu-config/role/${e}`);s(h.data)}catch(h){console.error("Error fetching menu config:",h),o("Error al cargar la configuración del menú"),s(null)}finally{a(!1)}},u=()=>!t||!t.items?[]:t.items.filter(h=>h.isVisible).sort((h,g)=>h.order-g.order),m=()=>(t==null?void 0:t.orientation)||"horizontal";return{menuConfig:t,menuItems:u(),orientation:m(),loading:n,error:i,refresh:d}},j5=e=>{const t=y5(),s=b5(e);return{siteName:t.getConfig("site_name","Despacho Legal"),siteDescription:t.getConfig("site_description","Servicios legales profesionales"),logoUrl:t.getConfig("logo_url","/images/logo.png"),faviconUrl:t.getConfig("favicon_url","/images/favicon.ico"),primaryColor:t.getConfig("primary_color","#1e40af"),secondaryColor:t.getConfig("secondary_color","#3b82f6"),sidebarPosition:t.getConfig("sidebar_position","left"),sidebarWidth:t.getConfig("sidebar_width","250px"),headerFixed:t.getBooleanConfig("header_fixed",!0),footerVisible:t.getBooleanConfig("footer_visible",!0),contactEmail:t.getConfig("contact_email","info@despacholegal.com"),contactPhone:t.getConfig("contact_phone","+34 123 456 789"),contactAddress:t.getConfig("contact_address","Calle Principal 123, Madrid"),officeHours:t.getConfig("office_hours","Lunes a Viernes: 9:00 - 18:00"),socialFacebook:t.getConfig("social_facebook",""),socialTwitter:t.getConfig("social_twitter",""),socialLinkedin:t.getConfig("social_linkedin",""),socialInstagram:t.getConfig("social_instagram",""),maintenanceMode:t.getBooleanConfig("maintenance_mode",!1),defaultLanguage:t.getConfig("default_language","es"),timezone:t.getConfig("timezone","Europe/Madrid"),dateFormat:t.getConfig("date_format","DD/MM/YYYY"),menuItems:e?s.menuItems:[],menuOrientation:e?s.orientation:"horizontal",loading:t.loading||(e?s.loading:!1),error:t.error||(e?s.error:null),updateSiteConfig:t.updateConfig,refreshSiteConfig:t.refresh,refreshMenuConfig:s.refresh}},w5=()=>{const[e,t]=f.useState([]),[s,n]=f.useState(!0),[a,i]=f.useState(new Set),{user:o}=Ce(),l=Ri();f.useEffect(()=>{if(!o)return;const u=async()=>{try{n(!0);const h=localStorage.getItem("token"),g=await K.get("/appointments",{headers:{Authorization:`Bearer ${h}`}});let j=0;try{j=(await K.get("/chat/unread-count",{headers:{Authorization:`Bearer ${h}`}})).data.count||0}catch{}const y=[],w=new Date,x=new Date(w.getFullYear(),w.getMonth(),w.getDate()),p=new Date(x);if(p.setDate(p.getDate()+1),o.role!=="ADMIN"){const v=g.data.filter(N=>new Date(N.date)>=x);if(v.length>0){const N=v.filter(b=>{const C=new Date(b.date);return C>=x&&C<p});N.length>0?y.push({id:"appointments-today",type:"appointment",count:N.length,title:"Citas de Hoy",description:`Tienes ${N.length} cita${N.length>1?"s":""} programada${N.length>1?"s":""} para hoy`,link:o.role==="CLIENTE"?"/client/appointments":"/lawyer/appointments"}):y.push({id:"appointments-upcoming",type:"appointment",count:v.length,title:"Próximas Citas",description:`Tienes ${v.length} cita${v.length>1?"s":""} programada${v.length>1?"s":""}`,link:o.role==="CLIENTE"?"/client/appointments":"/lawyer/appointments"})}}j>0&&y.push({id:"unread-messages",type:"message",count:j,title:"Mensajes Nuevos",description:`Tienes ${j} mensaje${j>1?"s":""} sin leer`,link:o.role==="CLIENTE"?"/client/chat":"/lawyer/chat"}),t(y)}catch(h){console.error("Error fetching notifications:",h)}finally{n(!1)}};u();const m=setInterval(u,3e4);return()=>clearInterval(m)},[o]),f.useEffect(()=>{const u=new Set(a);e.forEach(m=>{l.pathname===m.link&&u.add(m.id)}),u.size!==a.size&&i(u)},[l.pathname,e,a]);const c=u=>{i(m=>new Set([...m,u]))},d=e.filter(u=>!a.has(u.id));return s||d.length===0?null:r.jsx("div",{className:"fixed top-20 left-4 z-50 space-y-2 max-w-sm",children:d.map(u=>r.jsx("div",{className:`bg-white rounded-lg shadow-lg border-l-4 p-4 transform transition-all duration-300 ${u.type==="appointment"?"border-blue-500":"border-green-500"}`,children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[r.jsx("span",{className:"text-sm font-semibold text-gray-900",children:u.title}),r.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${u.type==="appointment"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:u.count})]}),r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:u.description}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs("a",{href:u.link,className:`text-sm font-medium px-3 py-1 rounded-md transition-colors ${u.type==="appointment"?"bg-blue-100 text-blue-700 hover:bg-blue-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:["Ver ",u.type==="appointment"?"Citas":"Mensajes"]}),r.jsx("button",{onClick:()=>c(u.id),className:"text-sm text-gray-500 hover:text-gray-700 px-2 py-1 rounded-md hover:bg-gray-100",children:"Ocultar"})]})]}),r.jsx("button",{onClick:()=>c(u.id),className:"text-gray-400 hover:text-gray-600 ml-2",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},u.id))})},sh={};console.log("VITE_CHATBOT_URL:",sh==null?void 0:sh.VITE_CHATBOT_URL);const DN="https://chatbot-legal-production-b91c.up.railway.app";console.log("Chatbot URL configurada:",DN);const Bd=ht.create({baseURL:DN,timeout:1e4,headers:{"Content-Type":"application/json"}});Bd.interceptors.request.use(e=>{console.log("Request URL:",(e.baseURL||"")+(e.url||""));const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e});Bd.interceptors.response.use(e=>e,e=>{var t,s;return console.error("Chatbot API Error:",e),console.error("Request URL:",(((t=e.config)==null?void 0:t.baseURL)||"")+(((s=e.config)==null?void 0:s.url)||"")),Promise.reject(e)});const N5=({onDateSelect:e,onClose:t,isVisible:s})=>{const[n,a]=f.useState(""),[i,o]=f.useState(""),[l,c]=f.useState([]),[d,u]=f.useState(!1),[m,h]=f.useState(new Date),g=()=>{const b=[],C=new Date;for(let S=1;S<=14;S++){const k=new Date(C);k.setDate(C.getDate()+S),k.getDay()>=1&&k.getDay()<=5&&[9,10,11,12,16,17].forEach(L=>{const T=new Date(k);T.setHours(L,0,0,0),b.push({id:`${k.toISOString().split("T")[0]}-${L}`,date:k.toISOString().split("T")[0],time:`${L}:00`,available:!0,formatted:j(T)})})}return b},j=b=>{const C=["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],S=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];return`${C[b.getDay()]} ${b.getDate()} de ${S[b.getMonth()]} a las ${b.getHours()}:00`};f.useEffect(()=>{s&&c(g())},[s]);const y=b=>{console.log("handleDateSelect called with:",b),a(b),o("")},w=b=>{console.log("handleTimeSelect called with:",b),o(b)},x=()=>{if(console.log("handleConfirm called with:",{selectedDate:n,selectedTime:i}),!n||!i){console.error("Missing date or time:",{selectedDate:n,selectedTime:i}),alert("Por favor, selecciona una fecha y hora antes de confirmar.");return}if(!/^\d{4}-\d{2}-\d{2}$/.test(n)){console.error("Invalid date format:",n),alert("Formato de fecha inválido. Por favor, selecciona de nuevo.");return}if(!/^\d{1,2}:\d{2}$/.test(i)){console.error("Invalid time format:",i),alert("Formato de hora inválido. Por favor, selecciona de nuevo.");return}console.log("Calling onDateSelect with:",n,i),e(n,i),t()},p=b=>l.filter(C=>C.date===b),v=()=>[...new Set(l.map(b=>b.date))].sort(),N=b=>{const C=new Date(b),S=["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"],k=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"];return{day:S[C.getDay()],date:C.getDate(),month:k[C.getMonth()],full:`${S[C.getDay()]} ${C.getDate()} de ${k[C.getMonth()]}`}};return s?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[85vh] flex flex-col",children:[r.jsxs("div",{className:"bg-blue-600 text-white p-4 rounded-t-lg flex-shrink-0",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h2",{className:"text-lg font-semibold",children:"📅 Selecciona tu cita"}),r.jsx("button",{onClick:t,className:"text-white hover:text-gray-200 text-xl font-bold",children:"×"})]}),r.jsx("p",{className:"text-blue-100 mt-1 text-sm",children:"Elige la fecha y hora que mejor te convenga"})]}),r.jsxs("div",{className:"flex flex-col lg:flex-row flex-1 overflow-hidden",children:[r.jsxs("div",{className:"lg:w-1/2 p-4 border-r border-gray-200 overflow-y-auto",children:[r.jsx("h3",{className:"text-md font-semibold mb-3 text-gray-800",children:"📆 Fechas disponibles"}),r.jsx("div",{className:"space-y-2",children:v().map(b=>{const C=N(b),S=n===b,k=p(b);return r.jsx("div",{className:`border rounded-lg p-2 cursor-pointer transition-all ${S?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300 hover:bg-gray-50"}`,onClick:()=>y(b),children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("div",{className:`text-center min-w-[50px] ${S?"text-blue-600":"text-gray-600"}`,children:[r.jsx("div",{className:"text-xs font-medium",children:C.day}),r.jsx("div",{className:"text-md font-bold",children:C.date}),r.jsx("div",{className:"text-xs",children:C.month})]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:`font-medium text-sm ${S?"text-blue-800":"text-gray-800"}`,children:C.full}),r.jsxs("div",{className:"text-xs text-gray-500",children:[k.length," horarios disponibles"]})]})]}),S&&r.jsx("div",{className:"text-blue-600",children:r.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]})},b)})})]}),r.jsx("div",{className:"lg:w-1/2 p-4 overflow-y-auto",children:n?r.jsxs(r.Fragment,{children:[r.jsx("h3",{className:"text-md font-semibold mb-3 text-gray-800",children:"🕐 Horarios disponibles"}),r.jsx("div",{className:"mb-3 p-2 bg-blue-50 rounded-lg",children:r.jsxs("p",{className:"text-blue-800 font-medium text-sm",children:["Fecha seleccionada: ",N(n).full]})}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:p(n).map(b=>r.jsxs("button",{onClick:()=>w(b.time),className:`p-3 border rounded-lg text-center transition-all ${i===b.time?"border-blue-500 bg-blue-500 text-white":"border-gray-200 hover:border-blue-300 hover:bg-blue-50"}`,children:[r.jsx("div",{className:"text-md font-semibold",children:b.time}),r.jsx("div",{className:"text-xs opacity-75",children:"Disponible"})]},b.id))}),i&&r.jsxs("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:[r.jsx("h4",{className:"font-semibold text-green-800 mb-1 text-sm",children:"✅ Cita seleccionada"}),r.jsxs("p",{className:"text-green-700 text-sm",children:[N(n).full," a las ",i]})]})]}):r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsxs("div",{className:"text-center text-gray-500",children:[r.jsx("svg",{className:"w-12 h-12 mx-auto mb-3 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("p",{className:"text-sm",children:"Selecciona una fecha para ver los horarios disponibles"})]})})})]}),r.jsx("div",{className:"bg-gray-50 p-3 border-t border-gray-200 flex-shrink-0",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors text-sm",children:"Cancelar"}),r.jsx("button",{onClick:x,disabled:!n||!i,className:`px-4 py-2 rounded-lg font-medium transition-colors text-sm ${n&&i?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"Confirmar Cita"})]})})]})}):null},C5=({isOpen:e,onClose:t})=>{const[s,n]=f.useState(!1),a=e!==void 0?e:s,i=e!==void 0?A=>{!A&&t&&t()}:n;console.log("🔍 [CHATBOT] Props:",{externalIsOpen:e,onClose:!!t}),console.log("🔍 [CHATBOT] Estado interno:",{internalIsOpen:s}),console.log("🔍 [CHATBOT] Estado final:",{isOpen:a});const[o,l]=f.useState([]),[c,d]=f.useState(""),[u,m]=f.useState(!1),[h,g]=f.useState(null),[j,y]=f.useState(!1),[w,x]=f.useState(null),p=f.useRef(null),v=f.useRef(null),N=f.useRef("user_"+Math.random().toString(36).substring(2,12)),b=f.useRef(null),C=f.useRef(null);f.useEffect(()=>{a&&o.length===0&&l([{text:"¡Hola! Soy el asistente virtual del despacho legal. ¿En qué puedo ayudarte hoy?",isUser:!1,timestamp:new Date().toISOString()}])},[a,o.length]),f.useEffect(()=>{k()},[o]),f.useEffect(()=>{a&&v.current&&!j&&(console.log("🔍 [FOCUS] Chat abierto, estableciendo foco inicial..."),setTimeout(()=>{var A;console.log("🔍 [FOCUS] Foco inicial 1 (100ms)"),(A=v.current)==null||A.focus()},100),setTimeout(()=>{var A;console.log("🔍 [FOCUS] Foco inicial 2 (300ms)"),(A=v.current)==null||A.focus()},300))},[a,j]),f.useEffect(()=>{a&&o.length>0&&!j&&!o[o.length-1].isUser&&v.current&&(console.log("🔍 [FOCUS] Bot respondió, restaurando foco..."),setTimeout(()=>{var I;console.log("🔍 [FOCUS] Intento 1 (100ms)"),(I=v.current)==null||I.focus()},100),setTimeout(()=>{var I;console.log("🔍 [FOCUS] Intento 2 (300ms)"),(I=v.current)==null||I.focus()},300),setTimeout(()=>{var I;console.log("🔍 [FOCUS] Intento 3 (500ms)"),(I=v.current)==null||I.focus()},500),setTimeout(()=>{var I;console.log("🔍 [FOCUS] Intento 4 (800ms)"),(I=v.current)==null||I.focus()},800),setTimeout(()=>{var I;console.log("🔍 [FOCUS] Intento 5 (1000ms)"),(I=v.current)==null||I.focus()},1e3))},[o,a,j]),f.useEffect(()=>{if(a&&!j&&v.current){console.log("🔍 [FOCUS] Iniciando intervalo de verificación de foco...");const A=setInterval(()=>{var I;document.activeElement!==v.current&&(console.log("🔍 [FOCUS] Foco perdido, restaurando..."),(I=v.current)==null||I.focus())},2e3);return()=>clearInterval(A)}},[a,j]);const S=()=>{b.current&&clearTimeout(b.current),C.current&&clearTimeout(C.current)};f.useEffect(()=>(a&&o.length>0&&!j&&S(),()=>{b.current&&clearTimeout(b.current),C.current&&clearTimeout(C.current)}),[o,a,j]);const k=()=>{var A;(A=p.current)==null||A.scrollIntoView({behavior:"smooth"})},D=async()=>{b.current&&clearTimeout(b.current),C.current&&clearTimeout(C.current);try{await Bd.post("/end_chat",{user_id:N.current})}catch{}l([]),d(""),g(null),i(!1),y(!1),x(null),setTimeout(()=>{alert("El chat ha finalizado.")},100)},L=async(A,I)=>{if(console.log("🔍 [CITA] handleDateSelect called with:",{date:A,time:I}),!A||!I||A.trim()===""||I.trim()===""){console.error("🔍 [CITA] Invalid date or time:",{date:A,time:I});const q={text:"Error: Fecha o hora no válida. Por favor, selecciona de nuevo.",isUser:!1,timestamp:new Date().toISOString()};l(Y=>[...Y,q]);return}y(!1);try{if(!/^\d{4}-\d{2}-\d{2}$/.test(A))throw new Error(`Invalid date format: ${A}. Expected YYYY-MM-DD`);if(!/^\d{1,2}:\d{2}$/.test(I))throw new Error(`Invalid time format: ${I}. Expected HH:MM`);const[M,W]=I.split(":"),E=`${M.padStart(2,"0")}:${W.padStart(2,"0")}`,R=new Date(`${A}T${E}:00`),$=R.toISOString();if(console.log("🔍 [CITA] Hora local seleccionada:",`${A}T${E}:00`),console.log("🔍 [CITA] Hora convertida a UTC:",$),console.log("🔍 [CITA] Diferencia de zona horaria:",R.getTimezoneOffset()/60,"horas"),isNaN(R.getTime()))throw new Error(`Invalid date: ${A}T${E}:00`);const _={fullName:"Usuario del Chat",age:25,phone:"+34 600000000",email:"usuario@chat.com",consultationReason:"Consulta legal general",consultationType:"Derecho Civil",preferredDate:$};console.log("🔍 [CITA] Datos de la cita:",_),m(!0);const P=await fetch("https://experimento2-production-54c0.up.railway.app/api/appointments/visitor",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)});if(console.log("🔍 [CITA] Respuesta del backend:",P.status,P.statusText),P.ok){const F=await P.json();console.log("🔍 [CITA] Cita creada exitosamente:",F);const Q={text:`¡Perfecto! Tu cita ha sido agendada exitosamente.

📅 **Detalles de tu cita:**
• Fecha y hora: ${A} a las ${I}
• Motivo: Consulta legal general

Te hemos enviado un email de confirmación.

Un abogado se pondrá en contacto contigo pronto para confirmar los detalles. ¡Gracias por confiar en nosotros!`,isUser:!1,timestamp:new Date().toISOString()};l(X=>[...X,Q])}else{const F=await P.text();throw console.error("🔍 [CITA] Error del backend:",P.status,F),new Error(`Error del servidor: ${P.status} - ${F}`)}}catch(q){console.error("🔍 [CITA] Error in handleDateSelect:",q);const M={text:`Lo siento, hubo un problema al agendar tu cita: ${q.message||"Error desconocido"}. Por favor, contacta directamente al despacho por teléfono o email.`,isUser:!1,timestamp:new Date().toISOString()};l(W=>[...W,M])}finally{m(!1)}},T=async A=>{if(A.preventDefault(),!c.trim()||u)return;const I=c.trim();d(""),m(!0),g(null);const q={text:I,isUser:!0,timestamp:new Date().toISOString()};l(Y=>[...Y,q]);try{const M=(await Bd.post("/chat",{text:I,language:"es",user_id:N.current})).data.response,W=["si","sí","vale","ok","claro","jj","a","x","123","abc","xyz"],E=M.includes("Para ayudarte mejor")&&M.includes("¿En qué puedo ayudarte?")&&(I.length<10||W.includes(I.toLowerCase()));let R=M;E&&(R=`**Has indicado:** "${I}"

${M}`);const $={text:R,isUser:!1,timestamp:new Date().toISOString()};l(_=>[..._,$]),M.includes("¿Qué fecha prefieres para tu consulta?")&&M.includes("Opciones disponibles:")&&M.includes("Responde con el número de la opción que prefieras")&&y(!0)}catch(Y){console.error("Error sending message:",Y),g("Error al enviar el mensaje. Por favor, intenta de nuevo.");const M={text:"Lo siento, estoy teniendo problemas para procesar tu mensaje. Por favor, intenta de nuevo o contacta directamente al despacho.",isUser:!1,timestamp:new Date().toISOString()};l(W=>[...W,M])}finally{m(!1),j||(setTimeout(()=>{var Y;(Y=v.current)==null||Y.focus()},100),setTimeout(()=>{var Y;(Y=v.current)==null||Y.focus()},300),setTimeout(()=>{var Y;(Y=v.current)==null||Y.focus()},500))}},B=()=>{const A=!a;i(A),A||(g(null),y(!1),x(null),b.current&&clearTimeout(b.current),C.current&&clearTimeout(C.current))},V=A=>new Date(A).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"});return r.jsxs("div",{className:"fixed bottom-4 right-4 z-50",children:[e===void 0&&r.jsx("button",{onClick:B,className:"bg-blue-600 hover:bg-blue-700 text-white rounded-full p-4 shadow-lg transition-all duration-200",title:"Chat del despacho",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),r.jsx(N5,{isVisible:j,onDateSelect:L,onClose:()=>{y(!1),setTimeout(()=>{var A;(A=v.current)==null||A.focus()},100)}}),a&&r.jsxs("div",{className:"absolute bottom-16 right-0 w-96 h-96 bg-white rounded-lg shadow-xl border border-gray-200 flex flex-col",children:[r.jsxs("div",{className:"bg-blue-600 text-white p-4 rounded-t-lg",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h3",{className:"font-semibold",children:"Asistente Virtual"}),r.jsx("button",{onClick:B,className:"text-white hover:text-gray-200",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsx("p",{className:"text-sm opacity-90",children:"Despacho Legal"})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 chatbot-messages-area",children:[o.map((A,I)=>r.jsx("div",{className:`flex ${A.isUser?"justify-end":"justify-start"}`,children:r.jsxs("div",{className:`max-w-xs px-3 py-2 rounded-lg chatbot-message ${A.isUser?"chatbot-user-message":"chatbot-bot-message"}`,children:[r.jsx("p",{className:"text-sm",children:A.text}),r.jsx("p",{className:`text-xs mt-1 ${A.isUser?"text-blue-100":"text-gray-500"}`,children:V(A.timestamp)})]})},I)),u&&r.jsx("div",{className:"flex justify-start",children:r.jsx("div",{className:"bg-gray-100 text-gray-800 max-w-xs px-3 py-2 rounded-lg",children:r.jsxs("div",{className:"flex space-x-1",children:[r.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),r.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),r.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),h&&r.jsx("div",{className:"flex justify-start",children:r.jsx("div",{className:"bg-red-100 text-red-800 max-w-xs px-3 py-2 rounded-lg",children:r.jsx("p",{className:"text-sm",children:h})})}),r.jsx("div",{ref:p})]}),r.jsx("form",{onSubmit:T,className:"p-4 border-t border-gray-200",children:r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("input",{ref:v,type:"text",value:c,onChange:A=>d(A.target.value),onKeyDown:A=>{A.key==="Enter"&&!A.shiftKey&&(A.preventDefault(),c.trim()&&!u&&!j&&(T(A),setTimeout(()=>{var I;(I=v.current)==null||I.focus()},100),setTimeout(()=>{var I;(I=v.current)==null||I.focus()},300)))},onBlur:()=>{console.log("🔍 [FOCUS] Input perdió el foco"),a&&!j&&(console.log("🔍 [FOCUS] Restaurando foco desde onBlur..."),setTimeout(()=>{var A;(A=v.current)==null||A.focus()},100))},onFocus:()=>{var A;console.log("🔍 [FOCUS] Input recibió el foco"),(A=v.current)==null||A.scrollIntoView({behavior:"smooth",block:"nearest"})},placeholder:"Escribe tu mensaje...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:u||j,autoFocus:a&&!j}),r.jsx("button",{type:"submit",disabled:u||!c.trim()||j,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})}),r.jsx("div",{className:"p-2 border-t border-gray-200 flex justify-end",children:r.jsx("button",{onClick:D,className:"px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700 text-sm",children:"Finalizar chat"})})]})]})},S5=({onOpen:e})=>r.jsx("button",{onClick:e,className:"fixed bottom-4 right-20 w-16 h-16 bg-blue-600 text-white rounded-full shadow-lg hover:bg-blue-700 transition-colors flex items-center justify-center z-50","aria-label":"Abrir chat con asistente virtual",children:r.jsx("span",{className:"text-2xl",children:"🤖"})});let E5=class{constructor(){this.results=[]}runAllTests(){return this.results=[],this.testKeyboardNavigation(),this.testScreenReaderSupport(),this.testColorContrast(),this.testSemanticStructure(),this.testFormLabels(),this.testModalAccessibility(),this.testFocusManagement(),this.results}testKeyboardNavigation(){const t=document.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');let s=t.length>0,n=!0;t.forEach(a=>{const i=a,o=window.getComputedStyle(i);!o.outline&&!o.boxShadow&&(n=!1)}),this.results.push({test:"Navegación por teclado",passed:s&&n,message:s?n?"Todos los elementos enfocables tienen estilos de focus visibles":"Algunos elementos enfocables no tienen estilos de focus visibles":"No se encontraron elementos enfocables"})}testScreenReaderSupport(){const t=document.querySelectorAll("img"),s=document.querySelectorAll("button"),n=document.querySelectorAll("input");let a=!0,i=!0,o=!0;t.forEach(l=>{l.getAttribute("alt")||(a=!1)}),s.forEach(l=>{var u;const c=l.getAttribute("aria-label"),d=(u=l.textContent)==null?void 0:u.trim();!c&&!d&&(i=!1)}),n.forEach(l=>{const c=l.getAttribute("id");c&&(document.querySelector(`label[for="${c}"]`)||(o=!1))}),this.results.push({test:"Soporte para lectores de pantalla",passed:a&&i&&o,message:`Imágenes con alt: ${a}, Botones con aria-label: ${i}, Inputs con labels: ${o}`})}testColorContrast(){const t=document.querySelectorAll("p, h1, h2, h3, h4, h5, h6, span, div");let s=!0;t.forEach(n=>{const a=n,i=window.getComputedStyle(a);i.color,i.backgroundColor}),this.results.push({test:"Contraste de colores",passed:s,message:"Verificación básica de contraste completada (recomendado usar herramienta especializada)"})}testSemanticStructure(){const t=document.querySelectorAll("h1, h2, h3, h4, h5, h6"),s=document.querySelectorAll("ul, ol"),n=document.querySelectorAll("nav, main, header, footer, aside");let a=!0,i=!0,o=n.length>0,l="",c=0;t.forEach(m=>{const h=parseInt(m.tagName.charAt(1));h>c+1&&(a=!1,l=`Salto de nivel detectado: h${c} -> h${h}`),c=h});const d=document.querySelectorAll("h1").length;d===0?(a=!1,l="No se encontró ningún encabezado h1"):d>1&&(a=!1,l=`Múltiples h1 encontrados: ${d}`),s.forEach(m=>{m.querySelectorAll("li").length===0&&(i=!1)});const u=a?`Estructura de encabezados: ✅, Listas semánticas: ${i?"✅":"❌"}, Landmarks: ${o?"✅":"❌"}`:`Estructura de encabezados: ❌ (${l}), Listas semánticas: ${i?"✅":"❌"}, Landmarks: ${o?"✅":"❌"}`;this.results.push({test:"Estructura semántica",passed:a&&i&&o,message:u})}testFormLabels(){const t=document.querySelectorAll("input, select, textarea");let s=!0;t.forEach(n=>{const a=n.getAttribute("id"),i=n.getAttribute("aria-label"),o=n.getAttribute("aria-labelledby"),l=n.getAttribute("placeholder");!a&&!i&&!o&&!l&&(s=!1),a&&!document.querySelector(`label[for="${a}"]`)&&!i&&!o&&(s=!1)}),this.results.push({test:"Etiquetas de formularios",passed:s,message:s?"Todos los campos de formulario tienen etiquetas apropiadas":"Algunos campos de formulario no tienen etiquetas"})}testModalAccessibility(){const t=document.querySelectorAll('[role="dialog"], .modal, [class*="fixed inset-0"]');let s=!0,n=[];if(t.length===0){this.results.push({test:"Accesibilidad de modales",passed:!0,message:"No se encontraron modales en esta página"});return}t.forEach((i,o)=>{const l=i,c=[],d=l.getAttribute("role")==="dialog",u=l.getAttribute("aria-modal")==="true",m=l.getAttribute("aria-labelledby"),h=l.getAttribute("aria-describedby");d||c.push('Falta role="dialog"'),u||c.push('Falta aria-modal="true"'),m||c.push("Falta aria-labelledby");const g=l.querySelectorAll("button");Array.from(g).some(w=>{const x=w.getAttribute("aria-label")||"",p=w.textContent||"";return x.toLowerCase().includes("cerrar")||x.toLowerCase().includes("close")||p.includes("×")||p.includes("X")})||c.push("Falta botón de cerrar accesible"),m&&(document.getElementById(m)||c.push("Elemento de título no encontrado")),h&&(document.getElementById(h)||c.push("Elemento de descripción no encontrado")),l.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])').length===0&&c.push("No hay elementos enfocables dentro del modal"),c.length>0&&(s=!1,n.push(`Modal ${o+1}: ${c.join(", ")}`))});const a=s?`✅ Todos los modales (${t.length}) son accesibles`:`❌ Problemas encontrados en modales: ${n.join("; ")}`;this.results.push({test:"Accesibilidad de modales",passed:s,message:a})}testFocusManagement(){const t=document.querySelectorAll('[role="dialog"]');let s=!0;t.forEach(n=>{n.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])').length===0&&(s=!1)}),this.results.push({test:"Manejo del focus",passed:s,message:s?"El manejo del focus está implementado correctamente":"Hay problemas con el manejo del focus en modales"})}generateReport(){const t=this.results.filter(i=>i.passed).length,s=this.results.length,n=Math.round(t/s*100);let a=`# Reporte de Accesibilidad

`;return a+=`**Resumen**: ${t}/${s} pruebas pasaron (${n}%)

`,a+=`## Detalles de las Pruebas

`,this.results.forEach(i=>{const o=i.passed?"✅":"❌";a+=`### ${o} ${i.test}
`,a+=`${i.message}

`}),a}runSpecificTest(t){const s={keyboard:()=>this.testKeyboardNavigation(),"screen-reader":()=>this.testScreenReaderSupport(),contrast:()=>this.testColorContrast(),semantic:()=>this.testSemanticStructure(),forms:()=>this.testFormLabels(),modals:()=>this.testModalAccessibility(),focus:()=>this.testFocusManagement()};return s[t]?(this.results=[],s[t](),this.results[0]||null):null}};const nh=new E5,k5=({isVisible:e=!1,onClose:t})=>{const[s,n]=f.useState([]),[a,i]=f.useState(!1),[o,l]=f.useState(!1),c=async()=>{i(!0),await new Promise(y=>setTimeout(y,500));const j=nh.runAllTests();n(j),i(!1)},d=async j=>{i(!0),await new Promise(w=>setTimeout(w,200));const y=nh.runSpecificTest(j);y&&n([y]),i(!1)},u=()=>{const j=nh.generateReport(),y=new Blob([j],{type:"text/markdown"}),w=URL.createObjectURL(y),x=document.createElement("a");x.href=w,x.download=`accessibility-report-${new Date().toISOString().split("T")[0]}.md`,document.body.appendChild(x),x.click(),document.body.removeChild(x),URL.revokeObjectURL(w)};if(f.useEffect(()=>{e&&c()},[e]),!e)return null;const m=s.filter(j=>j.passed).length,h=s.length,g=h>0?Math.round(m/h*100):0;return r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",role:"dialog","aria-modal":"true","aria-labelledby":"accessibility-tester-title",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h2",{id:"accessibility-tester-title",className:"text-2xl font-bold text-gray-900",children:"Tester de Accesibilidad"}),r.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded","aria-label":"Cerrar tester de accesibilidad",children:"×"})]}),r.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Resumen"}),r.jsxs("p",{className:"text-gray-600",children:[m," de ",h," pruebas pasaron (",g,"%)"]})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:c,disabled:a,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Ejecutar todas las pruebas de accesibilidad",children:a?"Ejecutando...":"Ejecutar Todas"}),r.jsx("button",{onClick:u,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500","aria-label":"Descargar reporte de accesibilidad",children:"Descargar Reporte"})]})]})}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Pruebas Específicas"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[{key:"keyboard",label:"Teclado"},{key:"screen-reader",label:"Lector Pantalla"},{key:"contrast",label:"Contraste"},{key:"semantic",label:"Estructura"},{key:"forms",label:"Formularios"},{key:"modals",label:"Modales"},{key:"focus",label:"Focus"}].map(j=>r.jsx("button",{onClick:()=>d(j.key),disabled:a,className:"px-3 py-2 text-sm bg-gray-200 text-gray-700 rounded hover:bg-gray-300 disabled:opacity-50 focus:outline-none focus:ring-2 focus:ring-gray-500","aria-label":`Ejecutar prueba de ${j.label}`,children:j.label},j.key))})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Resultados"}),a?r.jsxs("div",{className:"flex items-center justify-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"}),r.jsx("span",{className:"ml-2 text-gray-600",children:"Ejecutando pruebas..."})]}):s.length>0?r.jsx("div",{className:"space-y-3",children:s.map((j,y)=>r.jsx("div",{className:`p-4 rounded-lg border ${j.passed?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center",children:[j.passed?"✅":"❌"," ",j.test]}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:j.message})]}),r.jsx("span",{className:`px-2 py-1 text-xs rounded ${j.passed?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:j.passed?"PASÓ":"FALLÓ"})]})},y))}):r.jsx("div",{className:"text-center py-8 text-gray-500",children:"No hay resultados disponibles. Ejecuta las pruebas para ver los resultados."})]}),r.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[r.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Información"}),r.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[r.jsx("li",{children:"• Las pruebas verifican el cumplimiento de WCAG 2.1 AA"}),r.jsx("li",{children:"• Se recomienda usar herramientas especializadas para contraste de colores"}),r.jsx("li",{children:"• Los resultados son una guía, no reemplazan pruebas manuales"}),r.jsx("li",{children:"• Para pruebas completas, usar lectores de pantalla reales"})]})]})]})})},Io=({isOpen:e,onClose:t,title:s,children:n,description:a,size:i="md",closeOnOverlayClick:o=!0,closeOnEscape:l=!0})=>{const c=f.useRef(null),d=f.useRef(null),u={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-2xl"};f.useEffect(()=>{const g=j=>{j.key==="Escape"&&l&&t()};return e&&(document.addEventListener("keydown",g),d.current=document.activeElement),()=>{document.removeEventListener("keydown",g)}},[e,t,l]),f.useEffect(()=>(e?(document.body.style.overflow="hidden",setTimeout(()=>{if(c.current){const j=c.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')[0];j&&j.focus()}},100)):(document.body.style.overflow="unset",d.current&&d.current.focus()),()=>{document.body.style.overflow="unset"}),[e]);const m=g=>{g.target===g.currentTarget&&o&&t()},h=()=>{t()};return e?r.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black bg-opacity-50 p-4 modal-overlay modal-backdrop",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title","aria-describedby":a?"modal-description":void 0,onClick:m,children:r.jsxs("div",{ref:c,className:`bg-white rounded-lg shadow-xl w-full ${u[i]} max-h-[85vh] overflow-y-auto relative modal-container modal-content`,role:"document",children:[r.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[r.jsxs("div",{children:[r.jsx("h2",{id:"modal-title",className:"text-xl font-bold text-gray-900",children:s}),a&&r.jsx("p",{id:"modal-description",className:"text-sm text-gray-600 mt-1",children:a})]}),r.jsx("button",{onClick:h,className:"text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded-md p-1","aria-label":"Cerrar modal",type:"button",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsx("div",{className:"p-6",children:n})]})}):null},D5=({isOpen:e,onClose:t})=>{const[s,n]=f.useState({nombre:"",email:"",telefono:"",asunto:"",mensaje:""}),[a,i]=f.useState(!1),[o,l]=f.useState("idle"),c=u=>{const{name:m,value:h}=u.target;n(g=>({...g,[m]:h}))},d=async u=>{u.preventDefault(),i(!0),l("idle");try{const m=await K.post("/contact",{...s,ip:"unknown",userAgent:navigator.userAgent});if(m.status===200||m.status===201)l("success"),n({nombre:"",email:"",telefono:"",asunto:"",mensaje:""}),setTimeout(()=>{t(),l("idle")},2e3);else throw new Error("Error en el servidor")}catch(m){console.error("Error al enviar formulario:",m),l("error")}finally{i(!1)}};return r.jsx(Io,{isOpen:e,onClose:t,title:"Contáctanos",description:"Complete el formulario para solicitar una consulta gratuita",size:"xl",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Información de Contacto"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:r.jsxs("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})})}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Dirección"}),r.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Calle Principal 123",r.jsx("br",{}),"Madrid, 28001",r.jsx("br",{}),"España"]})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:r.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})})}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Teléfono"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:r.jsx("a",{href:"tel:+34612345678",className:"hover:text-blue-600",children:"+34 612 345 678"})})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:r.jsx("svg",{className:"w-4 h-4 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})})}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Email"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:r.jsx("a",{href:"mailto:info@despachoabogados.com",className:"hover:text-blue-600",children:"info@despachoabogados.com"})})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center",children:r.jsx("svg",{className:"w-4 h-4 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Horario de Atención"}),r.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Lunes - Viernes: 9:00 - 18:00",r.jsx("br",{}),"Sábados: 9:00 - 14:00",r.jsx("br",{}),"Domingos: Cerrado"]})]})]})]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Servicios Destacados"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-blue-600 text-xs",children:"⚖️"})}),r.jsx("span",{className:"text-sm text-gray-700",children:"Derecho Civil"})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-green-600 text-xs",children:"👥"})}),r.jsx("span",{className:"text-sm text-gray-700",children:"Derecho Laboral"})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-6 h-6 bg-purple-100 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-purple-600 text-xs",children:"👨‍👩‍👧‍👦"})}),r.jsx("span",{className:"text-sm text-gray-700",children:"Derecho Familiar"})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-6 h-6 bg-orange-100 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-orange-600 text-xs",children:"🏢"})}),r.jsx("span",{className:"text-sm text-gray-700",children:"Derecho Empresarial"})]})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Solicita tu Consulta Gratuita"}),r.jsxs("form",{onSubmit:d,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"nombre",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre completo *"}),r.jsx("input",{type:"text",id:"nombre",name:"nombre",value:s.nombre,onChange:c,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Tu nombre completo"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),r.jsx("input",{type:"email",id:"email",name:"email",value:s.email,onChange:c,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"tu@email.com"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"telefono",className:"block text-sm font-medium text-gray-700 mb-1",children:"Teléfono"}),r.jsx("input",{type:"tel",id:"telefono",name:"telefono",value:s.telefono,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"+34 612 345 678"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"asunto",className:"block text-sm font-medium text-gray-700 mb-1",children:"Asunto *"}),r.jsxs("select",{id:"asunto",name:"asunto",value:s.asunto,onChange:c,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"",children:"Selecciona un asunto"}),r.jsx("option",{value:"Consulta General",children:"Consulta General"}),r.jsx("option",{value:"Derecho Civil",children:"Derecho Civil"}),r.jsx("option",{value:"Derecho Laboral",children:"Derecho Laboral"}),r.jsx("option",{value:"Derecho Familiar",children:"Derecho Familiar"}),r.jsx("option",{value:"Derecho Empresarial",children:"Derecho Empresarial"}),r.jsx("option",{value:"Otro",children:"Otro"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"mensaje",className:"block text-sm font-medium text-gray-700 mb-1",children:"Mensaje *"}),r.jsx("textarea",{id:"mensaje",name:"mensaje",value:s.mensaje,onChange:c,required:!0,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Describe tu consulta o situación legal..."})]}),o==="success"&&r.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md",role:"alert","aria-live":"polite",children:r.jsx("p",{className:"text-green-600 text-sm",children:"¡Gracias por tu mensaje! Nos pondremos en contacto contigo en las próximas 24 horas."})}),o==="error"&&r.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",role:"alert","aria-live":"polite",children:r.jsx("p",{className:"text-red-600 text-sm",children:"Ha ocurrido un error al enviar tu mensaje. Por favor, inténtalo de nuevo."})}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Cancelar"}),r.jsx("button",{type:"submit",disabled:a,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Enviando...":"Enviar Consulta"})]})]})]})]})})},AN=()=>{const{user:e,loading:t,logout:s}=Ce(),[n,a]=f.useState(!1),[i,o]=f.useState([]),[l,c]=f.useState("© 2024 Despacho Legal. Todos los derechos reservados."),[d,u]=f.useState(0),[m,h]=f.useState(!1),[g,j]=f.useState(!1),[y,w]=f.useState(!1),x=(e==null?void 0:e.role)==="ADMIN",p=(e==null?void 0:e.role)==="ABOGADO",v=(e==null?void 0:e.role)==="CLIENTE",{siteName:N,logoUrl:b,primaryColor:C,menuItems:S,menuOrientation:k,headerFixed:D,footerVisible:L,loading:T}=j5(t||e==null?void 0:e.role),B={backgroundColor:C},V=D?"fixed top-0 w-full z-50":"",A=M=>{if(M.children&&M.children.length>0)return r.jsxs("div",{className:"relative",children:[r.jsxs("button",{className:"hover:text-blue-200 px-2 py-1 rounded focus:outline-none flex items-center",onClick:()=>a(E=>!E),onBlur:()=>setTimeout(()=>a(!1),200),children:[M.icon&&r.jsx("span",{className:"mr-1",children:M.icon}),M.label,r.jsx("svg",{className:"inline w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),n&&r.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white text-gray-900 rounded shadow-lg z-50",onMouseEnter:()=>a(!0),onMouseLeave:()=>setTimeout(()=>a(!1),100),children:M.children.map((E,R)=>r.jsxs(Ne,{to:E.url,className:"block px-4 py-2 hover:bg-blue-100 transition-colors",onClick:$=>{$.stopPropagation(),a(!1)},children:[E.icon&&r.jsx("span",{className:"mr-2",children:E.icon}),E.label]},E.id||E.label||`child-${R}`))})]});const W=M.url&&M.url.includes("/chat");return r.jsxs(Ne,{to:M.url,className:"hover:text-blue-200 flex items-center relative",target:M.isExternal?"_blank":void 0,rel:M.isExternal?"noopener noreferrer":void 0,children:[M.icon&&r.jsx("span",{className:"mr-1",children:M.icon}),M.label,W&&d>0&&r.jsx("span",{className:"ml-1 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-600 text-white absolute -top-2 -right-4",children:d})]})},I=()=>x?[{label:"Admin Dashboard",url:"/admin/dashboard",icon:"🏠"},{label:"Usuarios",url:"/admin/users",icon:"👥"},{label:"Expedientes",url:"/admin/cases",icon:"📋"},{label:"Citas",url:"/admin/appointments",icon:"📅"},{label:"Tareas",url:"/admin/tasks",icon:"✅"},{label:"Documentos",url:"/admin/documents",icon:"📄"},{label:"Reportes",url:"/admin/reports",icon:"📊"},{label:"Servicios",url:"/admin/services",icon:"⚖️"},{label:"Home Builder",url:"/admin/home-builder",icon:"🎨"}]:p?[{label:"Dashboard",url:"/dashboard",icon:"🏠"},{label:"Mis Expedientes",url:"/lawyer/cases",icon:"📋"},{label:"Citas",url:"/lawyer/appointments",icon:"📅"},{label:"Tareas",url:"/lawyer/tasks",icon:"✅"},{label:"Chat",url:"/lawyer/chat",icon:"💬"},{label:"Reportes",url:"/lawyer/reports",icon:"📊"},{label:"Facturación",url:"/lawyer/facturacion",icon:"🧾",children:[{label:"Provisión de Fondos",url:"/lawyer/provisiones",icon:"💰"},{label:"Facturación Electrónica",url:"/lawyer/facturacion",icon:"📄"}]}]:v?[{label:"Dashboard",url:"/dashboard",icon:"🏠"},{label:"Mis Expedientes",url:"/client/cases",icon:"📋"},{label:"Provisiones",url:"/client/provisiones",icon:"💰"},{label:"Mis Citas",url:"/client/appointments",icon:"📅"},{label:"Chat",url:"/client/chat",icon:"💬"}]:[],q=T?I():S&&S.length>0?S:I();f.useEffect(()=>{(async()=>{try{console.log("[LAYOUT] Obteniendo parámetros de contacto...");const[W,E]=await Promise.all([K.get("/parametros/contact"),K.get("/parametros/legal")]);console.log("[LAYOUT] Respuesta de contact:",W.data),console.log("[LAYOUT] Respuesta de legal:",E.data);const R=Array.isArray(W.data)?W.data:[];o(R),console.log("[LAYOUT] Parámetros de contacto cargados:",R.length),console.log("[LAYOUT] Parámetros encontrados:",R.map(O=>({clave:O.clave,valor:O.valor})));const _=(Array.isArray(E.data)?E.data:[]).find(O=>O.clave==="COPYRIGHT_TEXT");_&&c(_.valor)}catch(W){console.error("[LAYOUT] Error obteniendo parámetros:",W),o([])}})()},[]),f.useEffect(()=>{e&&(async()=>{try{if(!e)return;const W=await K.get("/chat/unread-count");u(W.data.count||0)}catch{u(0)}})()},[e]);const Y=M=>{if(!Array.isArray(i))return console.log("[LAYOUT] getParamValue - contactParams no es array:",i),"";const W=i.find(E=>E.clave===M);return console.log(`[LAYOUT] getParamValue(${M}):`,W?W.valor:"NO ENCONTRADO"),W?W.valor:""};return r.jsxs("div",{className:"min-h-screen flex flex-col",children:[r.jsx("nav",{className:`text-white ${V}`,style:B,children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex items-center justify-between h-16",children:[r.jsx("div",{className:"flex items-center",children:r.jsxs(Ne,{to:"/",className:"text-xl font-bold flex items-center",children:[b&&r.jsx("img",{src:b,alt:N,className:"h-8 w-auto mr-2",onError:M=>{M.currentTarget.style.display="none"}}),N]})}),r.jsx("div",{className:"flex items-center space-x-4 relative",children:e?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:`flex items-center space-x-4 ${k==="vertical"?"flex-col":""}`,children:q.map((M,W)=>r.jsx(H.Fragment,{children:A(M)},M.id||M.label||`menu-item-${W}`))}),r.jsxs("span",{className:"text-sm font-medium text-white bg-blue-900 rounded px-3 py-1",children:[e.name," ",e.email&&r.jsxs("span",{className:"text-gray-300",children:["(",e.email,")"]})]}),r.jsx("button",{onClick:()=>h(!0),className:"hover:text-blue-200 px-2 py-1 rounded focus:outline-none focus:ring-2 focus:ring-blue-300","aria-label":"Abrir tester de accesibilidad",title:"Probar accesibilidad",children:"♿"}),r.jsx("button",{onClick:s,className:"hover:text-blue-200",children:"Cerrar Sesión"})]}):r.jsxs(r.Fragment,{children:[r.jsx(Ne,{to:"/login",className:"hover:text-blue-200",children:"Iniciar Sesión"}),r.jsx(Ne,{to:"/register",className:"hover:text-blue-200",children:"Registro"})]})})]})})}),D&&r.jsx("div",{className:"h-16"}),e&&r.jsx(w5,{}),r.jsx("main",{className:"flex-grow",children:r.jsx("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:r.jsx(mx,{})})}),L&&r.jsx("footer",{className:"bg-gray-800 text-white",children:r.jsxs("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:[r.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Información de Contacto"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Contacto"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[Y("CONTACT_INFO")&&r.jsx("p",{className:"text-gray-300 mb-2",children:Y("CONTACT_INFO")}),Y("CONTACT_EMAIL")&&r.jsxs("button",{onClick:()=>j(!0),className:"text-left hover:text-blue-300 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1 py-1 transition-colors","aria-label":`Abrir formulario de contacto. Email: ${Y("CONTACT_EMAIL")}`,children:["📧 ",Y("CONTACT_EMAIL")]}),Y("CONTACT_PHONE_PREFIX")&&Y("CONTACT_PHONE")&&r.jsxs("p",{children:["📞 ",Y("CONTACT_PHONE_PREFIX")," ",Y("CONTACT_PHONE")]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Enlaces"}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsx(Ne,{to:"/privacidad",className:"hover:text-gray-300 block",children:"Política de Privacidad"}),r.jsx(Ne,{to:"/terminos",className:"hover:text-gray-300 block",children:"Términos de Servicio"}),r.jsx(Ne,{to:"/cookies",className:"hover:text-gray-300 block",children:"Política de Cookies"})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Síguenos"}),r.jsxs("div",{className:"flex space-x-4",children:[Y("SOCIAL_FACEBOOK")&&r.jsx("a",{href:Y("SOCIAL_FACEBOOK"),target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-white",children:"📘 Facebook"}),Y("SOCIAL_TWITTER")&&r.jsx("a",{href:Y("SOCIAL_TWITTER"),target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-white",children:"🐦 Twitter"}),Y("SOCIAL_LINKEDIN")&&r.jsx("a",{href:Y("SOCIAL_LINKEDIN"),target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-white",children:"💼 LinkedIn"}),Y("SOCIAL_INSTAGRAM")&&r.jsx("a",{href:Y("SOCIAL_INSTAGRAM"),target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-white",children:"📷 Instagram"})]})]})]}),r.jsx("div",{className:"mt-8 pt-8 border-t border-gray-700 text-center",children:r.jsx("p",{children:l})})]})}),console.log("🔍 [LAYOUT] Renderizando ChatbotButton y ChatbotWidget..."),console.log("🔍 [LAYOUT] Estado del chat:",{isChatbotOpen:y}),r.jsx(S5,{onOpen:()=>w(!0)}),r.jsx(C5,{isOpen:y,onClose:()=>w(!1)}),r.jsx(k5,{isVisible:m,onClose:()=>h(!1)}),r.jsx(D5,{isOpen:g,onClose:()=>j(!1)})]})},TN=e=>{const t={gavel:"⚖️",work:"💼",balance:"⚖️",law:"📜",justice:"⚖️",court:"🏛️",contract:"📄",document:"📋",family:"👨‍👩‍👧‍👦",divorce:"💔",inheritance:"🏠",estate:"🏠",business:"🏢",corporate:"🏢",employment:"💼",labor:"👷",tax:"💰",finance:"💳","real-estate":"🏠",property:"🏠",criminal:"🚔",civil:"⚖️",commercial:"🏢",intellectual:"💡",patent:"📋",trademark:"™️",copyright:"©️",immigration:"🛂",visa:"📋",citizenship:"🛂",international:"🌍",arbitration:"🤝",mediation:"🤝",negotiation:"🤝",litigation:"⚖️",appeal:"📤",settlement:"🤝",consultation:"💬",advice:"💡",representation:"👨‍💼",defense:"🛡️",prosecution:"⚖️",investigation:"🔍",evidence:"📋",testimony:"🗣️",expert:"👨‍🔬",witness:"👁️",jury:"👥",judge:"👨‍⚖️",lawyer:"👨‍💼",attorney:"👨‍💼",counsel:"👨‍💼",solicitor:"👨‍💼",barrister:"👨‍💼",notary:"📋",paralegal:"📋","legal-assistant":"📋",clerk:"📋",secretary:"📋",receptionist:"📞",office:"🏢",firm:"🏢",practice:"🏢",partnership:"🤝",corporation:"🏢",llc:"🏢",trust:"🔒",foundation:"🏛️",charity:"❤️",nonprofit:"🏛️",government:"🏛️",public:"🏛️",private:"🔒",confidential:"🔒",privileged:"🔒",secret:"🔒",classified:"🔒",sensitive:"🔒",personal:"👤","family-law":"👨‍👩‍👧‍👦","criminal-law":"🚔","civil-law":"⚖️","commercial-law":"🏢","corporate-law":"🏢","employment-law":"💼","labor-law":"👷","tax-law":"💰","finance-law":"💳","real-estate-law":"🏠","property-law":"🏠","intellectual-property":"💡","patent-law":"📋","trademark-law":"™️","copyright-law":"©️","immigration-law":"🛂","international-law":"🌍","arbitration-law":"🤝","mediation-law":"🤝","litigation-law":"⚖️","appeals-law":"📤","settlement-law":"🤝","consultation-law":"💬","advice-law":"💡","representation-law":"👨‍💼","defense-law":"🛡️","prosecution-law":"⚖️","investigation-law":"🔍","evidence-law":"📋","testimony-law":"🗣️","expert-law":"👨‍🔬","witness-law":"👁️","jury-law":"👥","judge-law":"👨‍⚖️","lawyer-law":"👨‍💼","attorney-law":"👨‍💼","counsel-law":"👨‍💼","solicitor-law":"👨‍💼","barrister-law":"👨‍💼","notary-law":"📋","paralegal-law":"📋","legal-assistant-law":"📋","clerk-law":"📋","secretary-law":"📋","receptionist-law":"📞","office-law":"🏢","firm-law":"🏢","practice-law":"🏢","partnership-law":"🤝","corporation-law":"🏢","llc-law":"🏢","trust-law":"🔒","foundation-law":"🏛️","charity-law":"❤️","nonprofit-law":"🏛️","government-law":"🏛️","public-law":"🏛️","private-law":"🔒","confidential-law":"🔒","privileged-law":"🔒","secret-law":"🔒","classified-law":"🔒","sensitive-law":"🔒","personal-law":"👤"};if(/[\u{1F600}-\u{1F64F}]|[\u{1F300}-\u{1F5FF}]|[\u{1F680}-\u{1F6FF}]|[\u{1F1E0}-\u{1F1FF}]|[\u{2600}-\u{26FF}]|[\u{2700}-\u{27BF}]/u.test(e))return e;const s=e.toLowerCase().trim();return t[s]||"⚖️"},_N=({component:e})=>{const t=()=>{switch(e.type){case"hero-banner":return r.jsx(A5,{props:e.props});case"service-cards":return r.jsx(T5,{props:e.props});case"contact-form":return r.jsx(_5,{props:e.props});case"testimonials":return r.jsx(M5,{props:e.props});case"stats":return r.jsx(R5,{props:e.props});case"text-block":return r.jsx(P5,{props:e.props});case"image-gallery":return r.jsx(L5,{props:e.props});case"map":return r.jsx(I5,{props:e.props});case"divider":return r.jsx($5,{props:e.props});case"spacer":return r.jsx(F5,{props:e.props});default:return r.jsx("div",{className:"p-4 bg-red-100 border border-red-300 rounded",children:r.jsxs("p",{className:"text-red-700",children:["Componente no reconocido: ",e.type]})})}};return r.jsx("div",{className:"component-renderer",children:t()})},A5=({props:e})=>{const[t,s]=f.useState(!1),[n,a]=f.useState(!1);return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"relative bg-gradient-to-r from-blue-600 to-purple-700 text-white p-8 rounded-lg",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-4xl font-bold mb-4",children:e.title||"Banner Principal"}),r.jsx("p",{className:"text-xl mb-6 opacity-90",children:e.subtitle||"Subtítulo del banner"}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[r.jsx("button",{onClick:()=>s(!0),className:"inline-block bg-white text-blue-600 px-6 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors",children:e.ctaText||"Consultar Ahora"}),r.jsx("button",{onClick:()=>a(!0),className:"inline-block border-2 border-white text-white px-6 py-3 rounded-lg font-semibold hover:bg-white hover:text-blue-600 transition-colors",children:e.secondaryText||"Conocer Servicios"})]})]})}),t&&r.jsx(ON,{onClose:()=>s(!1),props:{title:"Solicitar Consulta Gratuita",submitText:"Enviar Consulta"}}),n&&r.jsx(O5,{onClose:()=>a(!1)})]})},T5=({props:e})=>{const[t,s]=f.useState([]),[n,a]=f.useState(!0),[i,o]=f.useState(null);return f.useEffect(()=>{(async()=>{try{a(!0),console.log("[ServiceCards] Iniciando fetch de servicios...");const c=await fetch("undefined/api/parametros/services");if(c.ok){const d=await c.json();console.log("[ServiceCards] Datos recibidos:",d),s(d)}else throw new Error("Error al cargar los servicios")}catch(c){console.error("[ServiceCards] Error fetching services:",c),o("Error al cargar los servicios"),s(e.services||[])}finally{a(!1)}})()},[]),console.log("[ServiceCards] Estado actual:",{loading:n,error:i,servicesCount:t.length}),r.jsxs("div",{className:"bg-white p-6 rounded-lg border",children:[r.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:e.title||"Nuestros Servicios"}),n&&r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Cargando servicios..."})]}),i&&r.jsxs("div",{className:"text-center py-8",children:[r.jsx("p",{className:"text-red-600 mb-4",children:"Error al cargar servicios"}),r.jsx("p",{className:"text-gray-600 text-sm",children:i})]}),!n&&!i&&r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:t.map((l,c)=>r.jsxs("div",{className:"text-center p-4 border rounded-lg hover:shadow-md transition-shadow",children:[r.jsx("div",{className:"text-4xl mb-3",children:TN(l.ICON||l.icon||"gavel")}),r.jsx("h3",{className:"text-lg font-semibold mb-2",children:l.TITLE||l.title||"Servicio"}),r.jsx("p",{className:"text-gray-600",children:l.DESCRIPTION||l.description||"Descripción del servicio"})]},l.id||c))}),!n&&!i&&t.length===0&&r.jsx("div",{className:"text-center py-8",children:r.jsx("p",{className:"text-gray-600",children:"No hay servicios configurados"})})]})},_5=({props:e})=>{const[t,s]=f.useState(!1);return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"bg-white p-6 rounded-lg border text-center",children:[r.jsx("h2",{className:"text-2xl font-bold mb-4",children:e.title||"Contáctanos"}),r.jsx("p",{className:"text-gray-600 mb-6",children:e.subtitle||"Estamos aquí para ayudarte"}),r.jsx("button",{onClick:()=>s(!0),className:"bg-blue-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:e.buttonText||"Solicitar Consulta"})]}),t&&r.jsx(ON,{onClose:()=>s(!1),props:e})]})},ON=({onClose:e,props:t})=>{const[s,n]=f.useState({nombre:"",email:"",telefono:"",asunto:"Consulta desde formulario de contacto",mensaje:""}),[a,i]=f.useState(!1),[o,l]=f.useState("idle"),c=u=>{const{name:m,value:h}=u.target;n(g=>({...g,[m]:h}))},d=async u=>{u.preventDefault(),i(!0),l("idle");try{const m=await fetch("undefined/api/contact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...s,ip:"unknown",userAgent:navigator.userAgent})});if(m.ok)l("success"),n({nombre:"",email:"",telefono:"",asunto:"Consulta desde formulario de contacto",mensaje:""}),setTimeout(()=>{e()},2e3);else{const h=await m.text();throw console.error("Error del servidor:",m.status,h),new Error(`Error ${m.status}: ${h}`)}}catch(m){console.error("Error al enviar formulario:",m),l("error")}finally{i(!1)}};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsx("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-2xl font-bold",children:t.title||"Contáctanos"}),r.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),o==="success"&&r.jsx("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:r.jsxs("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),r.jsx("div",{className:"ml-3",children:r.jsx("p",{className:"text-sm text-green-800",children:"¡Gracias por tu mensaje! Nos pondremos en contacto contigo en las próximas 24 horas."})})]})}),o==="error"&&r.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:r.jsxs("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),r.jsx("div",{className:"ml-3",children:r.jsx("p",{className:"text-sm text-red-800",children:"Ha ocurrido un error al enviar tu mensaje. Por favor, inténtalo de nuevo."})})]})}),r.jsxs("form",{onSubmit:d,className:"space-y-4",children:[r.jsx("input",{type:"text",name:"nombre",placeholder:"Nombre *",value:s.nombre,onChange:c,required:!0,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),r.jsx("input",{type:"email",name:"email",placeholder:"Email *",value:s.email,onChange:c,required:!0,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),r.jsx("input",{type:"tel",name:"telefono",placeholder:"Teléfono",value:s.telefono,onChange:c,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),r.jsx("input",{type:"text",name:"asunto",placeholder:"Asunto *",value:s.asunto,onChange:c,required:!0,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),r.jsx("textarea",{name:"mensaje",placeholder:"Mensaje *",rows:4,value:s.mensaje,onChange:c,required:!0,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),r.jsx("button",{type:"submit",disabled:a,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Enviando...":t.submitText||"Enviar Mensaje"})]})]})})})},O5=({onClose:e})=>{const[t,s]=f.useState([]),[n,a]=f.useState(!0),[i,o]=f.useState(null);return f.useEffect(()=>{(async()=>{try{a(!0),console.log("[ServicesModal] Iniciando fetch de servicios...");const c="undefined/api/parametros/services";console.log("[ServicesModal] URL de la API:",c);const d=await fetch(c);if(console.log("[ServicesModal] Response status:",d.status),d.ok){const u=await d.json();console.log("[ServicesModal] Datos recibidos:",u),s(u)}else{const u=await d.text();throw console.error("[ServicesModal] Error response:",u),new Error(`Error ${d.status}: ${u}`)}}catch(c){console.error("[ServicesModal] Error fetching services:",c),o("Error al cargar los servicios")}finally{a(!1)}})()},[]),console.log("[ServicesModal] Estado actual:",{loading:n,error:i,servicesCount:t.length}),r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsx("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Nuestros Servicios Legales"}),r.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n&&r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Cargando servicios..."})]}),i&&r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"text-red-500 mb-4",children:r.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),r.jsx("p",{className:"text-gray-600",children:i}),r.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Revisa la consola para más detalles"})]}),!n&&!i&&t.length===0&&r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"text-yellow-500 mb-4",children:r.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),r.jsx("p",{className:"text-gray-600",children:"No se encontraron servicios"}),r.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Verifica que hay servicios configurados en el panel de administración"})]}),!n&&!i&&t.length>0&&r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.map(l=>r.jsx("div",{className:"bg-gray-50 p-6 rounded-lg hover:shadow-md transition-shadow",children:r.jsxs("div",{className:"flex items-start space-x-4",children:[r.jsx("div",{className:"text-4xl flex-shrink-0",children:TN(l.ICON||l.icon||"gavel")}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:l.TITLE||l.title}),r.jsx("p",{className:"text-gray-600 leading-relaxed",children:l.DESCRIPTION||l.description})]})]})},l.id))}),r.jsx("div",{className:"mt-8 text-center",children:r.jsx("button",{onClick:()=>{e(),setTimeout(()=>{const l=document.querySelector('[onclick*="setShowContactModal"]');l&&l.click()},100)},className:"bg-blue-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:"Solicitar Consulta Gratuita"})})]})})})},M5=({props:e})=>r.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[r.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:e.title||"Lo que dicen nuestros clientes"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:(e.testimonials||[]).map((t,s)=>r.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[r.jsx("div",{className:"flex items-center mb-3",children:r.jsx("div",{className:"text-yellow-400 text-lg",children:"★★★★★"})}),r.jsxs("p",{className:"text-gray-700 mb-3",children:['"',t.text||"Excelente servicio",'"']}),r.jsx("p",{className:"font-semibold text-gray-900",children:t.name||"Cliente"})]},s))})]}),R5=({props:e})=>r.jsxs("div",{className:"bg-white p-6 rounded-lg border",children:[r.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:e.title||"Nuestros Números"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:(e.stats||[]).map((t,s)=>r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:t.value||"0"}),r.jsx("div",{className:"text-gray-600",children:t.label||"Estadística"})]},s))})]}),P5=({props:e})=>r.jsxs("div",{className:`bg-white p-6 rounded-lg border text-${e.alignment||"left"}`,children:[r.jsx("h2",{className:"text-2xl font-bold mb-4",children:e.title||"Título del bloque"}),r.jsx("p",{className:`text-gray-700 ${e.fontSize==="large"?"text-lg":e.fontSize==="small"?"text-sm":"text-base"}`,children:e.content||"Contenido del bloque de texto. Aquí puedes escribir cualquier información relevante."})]}),L5=({props:e})=>r.jsxs("div",{className:"bg-white p-6 rounded-lg border",children:[r.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:e.title||"Galería de Imágenes"}),r.jsx("div",{className:`grid grid-cols-${e.columns||3} gap-4`,children:(e.images||[]).map((t,s)=>r.jsx("div",{className:"aspect-square bg-gray-200 rounded-lg flex items-center justify-center",children:r.jsxs("span",{className:"text-gray-500",children:["🖼️ Imagen ",s+1]})},s))})]}),I5=({props:e})=>r.jsxs("div",{className:"bg-white p-6 rounded-lg border",children:[r.jsx("h2",{className:"text-2xl font-bold text-center mb-4",children:e.title||"Nuestra Ubicación"}),r.jsx("div",{className:"bg-gray-200 h-64 rounded-lg flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-4xl mb-2",children:"🗺️"}),r.jsx("p",{className:"text-gray-600",children:e.address||"Dirección del despacho"})]})})]}),$5=({props:e})=>r.jsx("div",{className:"flex items-center justify-center py-4",children:r.jsx("div",{className:`w-full h-${e.thickness||1} bg-${e.color||"gray-300"}`,style:{backgroundColor:e.color||"#e5e7eb"}})}),F5=({props:e})=>r.jsx("div",{style:{height:`${e.height||40}px`}}),B5=()=>{const[e,t]=f.useState(null),[s,n]=f.useState(!0),[a,i]=f.useState(null),{user:o}=Ce();return f.useEffect(()=>{(async()=>{try{n(!0);const c=await K.get("/layouts/home");if(c.status===200)t(c.data);else if(c.status===404)t(Nv());else throw new Error("Error al cargar el layout")}catch(c){console.error("Error fetching layout:",c),t(Nv())}finally{n(!1)}})()},[]),s?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Cargando..."})]})}):a&&!e?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Error"}),r.jsx("p",{className:"text-gray-600",children:a})]})}):e?r.jsxs("div",{className:"min-h-screen",children:[r.jsx("h1",{className:"sr-only",children:"Página Principal - Despacho Legal"}),e.components.map(l=>r.jsx("div",{children:r.jsx(_N,{component:l})},l.id))]}):r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-600 mb-4",children:"Página no encontrada"}),r.jsx("p",{className:"text-gray-500",children:"No hay contenido configurado para esta página."})]})})},Nv=()=>({id:"default-home",name:"Home Page",components:[{id:"default-hero",type:"hero-banner",props:{title:"Bienvenido a Nuestro Despacho Legal",subtitle:"Servicios legales profesionales y confiables para proteger sus derechos",backgroundImage:"/images/hero-bg.jpg",ctaText:"Solicitar Consulta Gratuita",secondaryText:"Conocer Servicios",secondaryLink:"/contact"},order:0},{id:"default-services",type:"service-cards",props:{title:"Nuestros Servicios",services:[{title:"Derecho Civil",description:"Asesoría especializada en casos civiles y comerciales",icon:"⚖️"},{title:"Derecho Laboral",description:"Protección de sus derechos laborales y reclamaciones",icon:"👥"},{title:"Derecho Familiar",description:"Divorcios, custodia y asuntos familiares",icon:"👨‍👩‍👧‍👦"}]},order:1},{id:"default-stats",type:"stats",props:{title:"Nuestros Números",stats:[{label:"Casos Exitosos",value:"500+",icon:"✅"},{label:"Años de Experiencia",value:"15",icon:"📅"},{label:"Clientes Satisfechos",value:"1000+",icon:"👥"}]},order:2},{id:"default-contact",type:"contact-form",props:{title:"¿Necesitas Asesoría Legal?",subtitle:"Nuestros abogados especialistas están listos para ayudarte",buttonText:"Solicitar Consulta Gratuita",submitText:"Enviar Consulta"},order:3}],version:1,lastModified:new Date().toISOString()}),z5=()=>r.jsx(B5,{}),U5=()=>{const[e,t]=f.useState({nombre:"",email:"",telefono:"",asunto:"",mensaje:""}),[s,n]=f.useState(!1),[a,i]=f.useState("idle"),o=c=>{const{name:d,value:u}=c.target;t(m=>({...m,[d]:u}))},l=async c=>{c.preventDefault(),n(!0),i("idle");try{if((await fetch("undefined/api/contact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,ip:"unknown",userAgent:navigator.userAgent})})).ok)i("success"),t({nombre:"",email:"",telefono:"",asunto:"",mensaje:""});else throw new Error("Error en el servidor")}catch(d){console.error("Error al enviar formulario:",d),i("error")}finally{n(!1)}};return r.jsx(AN,{children:r.jsx("div",{className:"min-h-screen bg-gray-50 py-12",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"text-center mb-12",children:[r.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Contáctanos"}),r.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Estamos aquí para ayudarte. Nuestros abogados especialistas están listos para atender tu consulta y brindarte la asesoría legal que necesitas."})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-8",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-6",children:"Información de Contacto"}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-start space-x-4",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:r.jsxs("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Dirección"}),r.jsxs("p",{className:"text-gray-600 mt-1",children:["Calle Principal 123",r.jsx("br",{}),"Madrid, 28001",r.jsx("br",{}),"España"]})]})]}),r.jsxs("div",{className:"flex items-start space-x-4",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:r.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Teléfono"}),r.jsx("p",{className:"text-gray-600 mt-1",children:r.jsx("a",{href:"tel:+34612345678",className:"hover:text-blue-600",children:"+34 612 345 678"})})]})]}),r.jsxs("div",{className:"flex items-start space-x-4",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:r.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Email"}),r.jsx("p",{className:"text-gray-600 mt-1",children:r.jsx("a",{href:"mailto:info@despachoabogados.com",className:"hover:text-blue-600",children:"info@despachoabogados.com"})})]})]}),r.jsxs("div",{className:"flex items-start space-x-4",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:r.jsx("svg",{className:"w-6 h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Horario de Atención"}),r.jsxs("p",{className:"text-gray-600 mt-1",children:["Lunes - Viernes: 9:00 - 18:00",r.jsx("br",{}),"Sábados: 9:00 - 14:00",r.jsx("br",{}),"Domingos: Cerrado"]})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-8",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-6",children:"Servicios Destacados"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-blue-600 text-sm font-semibold",children:"⚖️"})}),r.jsx("span",{className:"text-gray-700",children:"Derecho Civil"})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-green-600 text-sm font-semibold",children:"👥"})}),r.jsx("span",{className:"text-gray-700",children:"Derecho Laboral"})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-purple-600 text-sm font-semibold",children:"👨‍👩‍👧‍👦"})}),r.jsx("span",{className:"text-gray-700",children:"Derecho Familiar"})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-orange-600 text-sm font-semibold",children:"🏢"})}),r.jsx("span",{className:"text-gray-700",children:"Derecho Empresarial"})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-8",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-6",children:"Solicita tu Consulta Gratuita"}),a==="success"&&r.jsx("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:r.jsxs("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),r.jsx("div",{className:"ml-3",children:r.jsx("p",{className:"text-sm text-green-800",children:"¡Gracias por tu mensaje! Nos pondremos en contacto contigo en las próximas 24 horas."})})]})}),a==="error"&&r.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:r.jsxs("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),r.jsx("div",{className:"ml-3",children:r.jsx("p",{className:"text-sm text-red-800",children:"Ha ocurrido un error al enviar tu mensaje. Por favor, inténtalo de nuevo."})})]})}),r.jsxs("form",{onSubmit:l,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"nombre",className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre Completo *"}),r.jsx("input",{type:"text",id:"nombre",name:"nombre",value:e.nombre,onChange:o,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Tu nombre completo"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),r.jsx("input",{type:"email",id:"email",name:"email",value:e.email,onChange:o,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"tu@email.com"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"telefono",className:"block text-sm font-medium text-gray-700 mb-2",children:"Teléfono"}),r.jsx("input",{type:"tel",id:"telefono",name:"telefono",value:e.telefono,onChange:o,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"+34 612 345 678"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"asunto",className:"block text-sm font-medium text-gray-700 mb-2",children:"Asunto *"}),r.jsxs("select",{id:"asunto",name:"asunto",value:e.asunto,onChange:o,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"",children:"Selecciona un asunto"}),r.jsx("option",{value:"consulta-civil",children:"Consulta - Derecho Civil"}),r.jsx("option",{value:"consulta-laboral",children:"Consulta - Derecho Laboral"}),r.jsx("option",{value:"consulta-familiar",children:"Consulta - Derecho Familiar"}),r.jsx("option",{value:"consulta-empresarial",children:"Consulta - Derecho Empresarial"}),r.jsx("option",{value:"contratos",children:"Elaboración de Contratos"}),r.jsx("option",{value:"herencias",children:"Gestión de Herencias"}),r.jsx("option",{value:"otro",children:"Otro"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"mensaje",className:"block text-sm font-medium text-gray-700 mb-2",children:"Mensaje *"}),r.jsx("textarea",{id:"mensaje",name:"mensaje",value:e.mensaje,onChange:o,required:!0,rows:6,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Describe tu consulta o situación legal..."})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("input",{type:"checkbox",id:"privacidad",required:!0,className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),r.jsxs("label",{htmlFor:"privacidad",className:"text-sm text-gray-600",children:["Acepto la"," ",r.jsx("a",{href:"/privacidad",className:"text-blue-600 hover:text-blue-500",children:"política de privacidad"})," ","y el"," ",r.jsx("a",{href:"/terminos",className:"text-blue-600 hover:text-blue-500",children:"tratamiento de datos personales"})]})]}),r.jsx("button",{type:"submit",disabled:s,className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:s?r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Enviando..."]}):"Enviar Consulta"})]})]})]}),r.jsx("div",{className:"mt-16",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-8",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-6 text-center",children:"Nuestra Ubicación"}),r.jsx("div",{className:"bg-gray-200 h-96 rounded-lg flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-6xl mb-4",children:"🗺️"}),r.jsx("p",{className:"text-gray-600 text-lg",children:"Calle Principal 123, Madrid, 28001"}),r.jsx("p",{className:"text-gray-500 mt-2",children:"Mapa interactivo (integrado con Google Maps)"})]})})]})})]})})})},ah=()=>{const{user:e}=Ce(),t=Yt(),[s,n]=f.useState({totalCases:0,activeCases:0,pendingAppointments:0,recentDocuments:0,totalUsers:0}),[a,i]=f.useState(!1),[o,l]=f.useState(null),[c,d]=f.useState([]),u=f.useRef(null),m=f.useRef(!1),h=f.useRef(!1),g=f.useRef(0),j=async()=>{if(!e)return;g.current+=1,console.log(`Dashboard loadDashboardData: user (execution #${g.current})`,e);const b=e.id;if(console.log(`Dashboard loadDashboardData: Current user ID: ${b}, Last user ID: ${u.current}, Initialized: ${m.current}`),u.current===b&&m.current){console.log("Dashboard loadDashboardData: Already initialized for this user, skipping");return}if(h.current){console.log("Dashboard loadDashboardData: Already processing, skipping duplicate execution");return}h.current=!0,u.current=b,console.log("Dashboard loadDashboardData: Starting data fetch for user:",b);try{i(!0),l(null);const C=[K.get("/cases/stats"),K.get("/appointments"),K.get("/documents/stats")];e.role==="ADMIN"&&C.push(K.get("/users")),C.push(K.get("/cases/recent")),e.role==="ABOGADO"&&C.push(K.get("/cases/recent-activities"));const S=await Promise.allSettled(C),k=S[0].status==="fulfilled"?S[0].value.data:{},D=S[1].status==="fulfilled"?S[1].value.data:[],L=S[2].status==="fulfilled"?S[2].value.data:{},T=e.role==="ADMIN"&&S[3]&&S[3].status==="fulfilled"?S[3].value.data:[],B=S[e.role==="ADMIN"?4:3]&&S[e.role==="ADMIN"?4:3].status==="fulfilled"?S[e.role==="ADMIN"?4:3].value.data:[],V=e.role==="ABOGADO"&&S[4]&&S[4].status==="fulfilled"?S[4].value.data:null;let A=0,I=0,q=0,Y=0,M=0;if((e.role==="ADMIN"||e.role==="ABOGADO"||e.role==="CLIENTE")&&(A=k.total||0,I=(k.abiertos||0)+(k.enProceso||0)),Array.isArray(D)){const E=new Date;e.role==="ADMIN"?q=D.filter(R=>new Date(R.date)>E).length:(e.role==="ABOGADO"||e.role==="CLIENTE")&&(q=D.filter(R=>{const $=new Date(R.date);return $.getDate()===E.getDate()&&$.getMonth()===E.getMonth()&&$.getFullYear()===E.getFullYear()}).length)}L&&typeof L.total=="number"&&(Y=L.total),e.role==="ADMIN"&&Array.isArray(T)&&(M=T.length),n({totalCases:A,activeCases:I,pendingAppointments:q,recentDocuments:Y,totalUsers:M});const W=[];e.role==="ABOGADO"&&V?(V.cases&&V.cases.length>0&&V.cases.forEach(E=>{W.push({action:`Expediente: ${E.title}`,time:E.createdAt,type:"case",id:E.id,link:`/lawyer/cases/${E.id}`,entityType:"Expediente"})}),V.tasks&&V.tasks.length>0&&V.tasks.forEach(E=>{var _,O,P;const R=((O=(_=E.client)==null?void 0:_.user)==null?void 0:O.name)||"Cliente",$=(P=E.expediente)!=null&&P.title?` - ${E.expediente.title}`:"";W.push({action:`Tarea: ${E.title} (${R}${$})`,time:new Date(E.createdAt).toLocaleDateString(),type:"task",id:E.id,link:`/lawyer/tasks/${E.id}`,entityType:"Tarea"})}),V.appointments&&V.appointments.length>0&&V.appointments.forEach(E=>{var $,_;const R=((_=($=E.client)==null?void 0:$.user)==null?void 0:_.name)||"Cliente";W.push({action:`Cita: ${E.title} (${R})`,time:new Date(E.date).toLocaleDateString(),type:"appointment",id:E.id,link:`/lawyer/appointments/${E.id}`,entityType:"Cita"})}),V.provisions&&V.provisions.length>0&&V.provisions.forEach(E=>{var $,_;const R=((_=($=E.client)==null?void 0:$.user)==null?void 0:_.name)||"Cliente";W.push({action:`Provisión: ${E.concept} (${R})`,time:new Date(E.createdAt).toLocaleDateString(),type:"provision",id:E.id,link:`/lawyer/provisiones/${E.id}`,entityType:"Provisión"})})):e.role==="CLIENTE"?(Array.isArray(B)&&B.forEach(E=>{W.push({action:`Expediente: ${E.title}`,time:E.createdAt,type:"case",id:E.id,link:`/client/cases/${E.id}`,entityType:"Expediente"})}),Array.isArray(D)&&D.slice(0,3).forEach(E=>{W.push({action:`Cita: ${E.title}`,time:new Date(E.date).toLocaleDateString(),type:"appointment",id:E.id,link:`/client/appointments/${E.id}`,entityType:"Cita"})})):(Array.isArray(B)&&B.forEach(E=>{W.push({action:`Expediente: ${E.title}`,time:E.createdAt,type:"case",id:E.id,link:`/admin/cases/${E.id}`,entityType:"Expediente"})}),e.role==="ADMIN"&&M>0&&W.push({action:`${M} usuarios registrados`,time:"Total",type:"user",link:"/admin/users",entityType:"user"})),d(W.slice(0,4)),m.current=!0,console.log("Dashboard loadDashboardData: Data fetch completed successfully for user:",b)}catch(C){console.error("Error fetching dashboard data:",C),l("Error al cargar las estadísticas del dashboard")}finally{h.current=!1,i(!1)}};f.useEffect(()=>{e&&window.location.pathname==="/dashboard"&&(e.role==="ADMIN"?t("/admin/dashboard",{replace:!0}):e.role==="ABOGADO"?t("/lawyer/dashboard",{replace:!0}):e.role==="CLIENTE"&&t("/client/dashboard",{replace:!0}))},[e,t]),f.useEffect(()=>{e?j():(u.current=null,m.current=!1,h.current=!1)},[e==null?void 0:e.id]);const y=(b,C)=>{if(b===0)return{value:"0%",positive:!1,neutral:!0};const S=Math.random()*20+5;return Math.random()>.3?{value:`+${S.toFixed(1)}%`,positive:!0,neutral:!1}:{value:`-${(S*.5).toFixed(1)}%`,positive:!1,neutral:!1}},w=()=>{const b=y(s.totalCases),C=y(s.activeCases),S=y(s.pendingAppointments),k=y(s.recentDocuments);return{cases:b,activeCases:C,appointments:S,documents:k}},x=()=>{const b=w();return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx(es,{title:"Total Usuarios",value:s.totalUsers,change:y(s.totalUsers).value,positive:y(s.totalUsers).positive,neutral:y(s.totalUsers).neutral}),r.jsx(es,{title:"Expedientes Activos",value:s.activeCases,change:b.activeCases.value,positive:b.activeCases.positive,neutral:b.activeCases.neutral}),r.jsx(es,{title:"Citas Pendientes",value:s.pendingAppointments,change:b.appointments.value,positive:b.appointments.positive,neutral:b.appointments.neutral}),r.jsx(es,{title:"Documentos",value:s.recentDocuments,change:b.documents.value,positive:b.documents.positive,neutral:b.documents.neutral})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[r.jsx(jt,{title:"Gestión de Usuarios",description:"Administrar usuarios, roles y permisos",icon:"👥",link:"/admin/users",color:"blue"}),r.jsx(jt,{title:"Todos los Expedientes",description:"Ver y gestionar todos los casos",icon:"📋",link:"/admin/cases",color:"green"}),r.jsx(jt,{title:"Reportes y Estadísticas",description:"Análisis y reportes del sistema",icon:"📊",link:"/admin/reports",color:"purple"}),r.jsx(jt,{title:"Configuración del Sistema",description:"Configurar parámetros generales",icon:"⚙️",link:"/admin/settings",color:"gray"}),r.jsx(jt,{title:"Auditoría",description:"Registros de actividad del sistema",icon:"🔍",link:"/admin/audit",color:"yellow"}),r.jsx(jt,{title:"Backup y Restauración",description:"Gestionar copias de seguridad",icon:"💾",link:"/admin/backup",color:"red"})]}),r.jsx(ih,{role:"ADMIN",activities:c})]})},p=()=>{const b=w();return r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Estadísticas Principales"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx(es,{title:"Mis Casos",value:s.totalCases,change:b.cases.value,positive:b.cases.positive,neutral:b.cases.neutral}),r.jsx(es,{title:"Casos Activos",value:s.activeCases,change:b.activeCases.value,positive:b.activeCases.positive,neutral:b.activeCases.neutral}),r.jsx(es,{title:"Citas Hoy",value:s.pendingAppointments,change:b.appointments.value,positive:b.appointments.positive,neutral:b.appointments.neutral}),r.jsx(es,{title:"Documentos",value:s.recentDocuments,change:b.documents.value,positive:b.documents.positive,neutral:b.documents.neutral})]}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Acciones Rápidas"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[r.jsx(jt,{title:"Mis Casos",description:"Gestionar casos asignados",icon:"📁",link:"/lawyer/cases",color:"blue"}),r.jsx(jt,{title:"Mis Clientes",description:"Ver información de clientes",icon:"👤",link:"/lawyer/clients",color:"green"}),r.jsx(jt,{title:"Provisión de Fondos",description:"Gestiona provisiones de fondos",icon:"💰",link:"/lawyer/provisiones",color:"blue"}),r.jsx(jt,{title:"Facturación Electrónica",description:"Gestiona y firma tus facturas",icon:"🧾",link:"/lawyer/facturacion",color:"green"}),r.jsx(jt,{title:"Calendario de Citas",description:"Programar y gestionar citas",icon:"📅",link:"/lawyer/appointments",color:"purple"}),r.jsx(jt,{title:"Documentos",description:"Gestionar documentos legales",icon:"📄",link:"/lawyer/documents",color:"yellow"}),r.jsx(jt,{title:"Tareas Pendientes",description:"Ver tareas y recordatorios",icon:"✅",link:"/lawyer/tasks",color:"red"})]}),r.jsx(ih,{role:"ABOGADO",activities:c})]})},v=()=>{const b=w();return r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Mis Expedientes"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[r.jsx(es,{title:"Mis Casos",value:s.totalCases,change:b.cases.value,positive:b.cases.positive,neutral:b.cases.neutral}),r.jsx(es,{title:"Casos Activos",value:s.activeCases,change:b.activeCases.value,positive:b.activeCases.positive,neutral:b.activeCases.neutral}),r.jsx(es,{title:"Citas Hoy",value:s.pendingAppointments,change:b.appointments.value,positive:b.appointments.positive,neutral:b.appointments.neutral})]}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Acciones Rápidas"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[r.jsx(jt,{title:"Mis Expedientes",description:"Ver el estado de mis casos",icon:"📁",link:"/client/cases",color:"blue"}),r.jsx(jt,{title:"Mis Citas",description:"Ver y programar citas",icon:"📅",link:"/client/appointments",color:"green"}),r.jsx(jt,{title:"Documentos",description:"Acceder a mis documentos",icon:"📄",link:"/client/documents",color:"purple"}),r.jsx(jt,{title:"Contactar Abogado",description:"Enviar mensaje a mi abogado",icon:"💬",link:"/client/chat",color:"yellow"}),r.jsx(jt,{title:"Facturas",description:"Ver mis facturas",icon:"🧾",link:"/client/invoices",color:"red"}),r.jsx(jt,{title:"Perfil",description:"Actualizar mi información",icon:"👤",link:"/client/profile",color:"gray"})]}),r.jsx(ih,{role:"CLIENTE",activities:c})]})},N=()=>{if(!e)return r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando dashboard..."})]})});switch(e.role){case"ADMIN":return x();case"ABOGADO":return p();case"CLIENTE":return v();default:return r.jsxs("div",{className:"text-center py-12",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Rol no reconocido"}),r.jsx("p",{className:"text-gray-600",children:"Contacta al administrador del sistema."})]})}};return a?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando estadísticas..."})]})}):o?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Error"}),r.jsx("p",{className:"text-gray-600 mb-4",children:o}),r.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Reintentar"})]}):r.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),r.jsxs("p",{className:"mt-2 text-gray-600",children:["Bienvenido, ",(e==null?void 0:e.name)||"Usuario"]})]}),N()]})})},es=({title:e,value:t,change:s,positive:n,negative:a,neutral:i})=>r.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:r.jsx("div",{className:"p-5",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-md flex items-center justify-center",children:r.jsx("span",{className:"text-white text-sm font-medium",children:"📊"})})}),r.jsx("div",{className:"ml-5 w-0 flex-1",children:r.jsxs("dl",{children:[r.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:e}),r.jsxs("dd",{className:"flex items-baseline",children:[r.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:t}),r.jsx("div",{className:`ml-2 flex items-baseline text-sm font-semibold ${n?"text-green-600":a?"text-red-600":"text-gray-500"}`,children:s})]})]})})]})})}),jt=({title:e,description:t,icon:s,link:n,color:a})=>{const i=Yt(),o=l=>{switch(l){case"blue":return"bg-blue-50 border-blue-200 hover:bg-blue-100";case"green":return"bg-green-50 border-green-200 hover:bg-green-100";case"purple":return"bg-purple-50 border-purple-200 hover:bg-purple-100";case"yellow":return"bg-yellow-50 border-yellow-200 hover:bg-yellow-100";case"red":return"bg-red-50 border-red-200 hover:bg-red-100";case"gray":return"bg-gray-50 border-gray-200 hover:bg-gray-100";default:return"bg-blue-50 border-blue-200 hover:bg-blue-100"}};return r.jsx("div",{className:`p-6 border rounded-lg cursor-pointer transition-colors duration-200 ${o(a)}`,onClick:()=>i(n),children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("span",{className:"text-2xl",children:s})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:e}),r.jsx("p",{className:"text-sm text-gray-600",children:t})]})]})})},ih=({role:e,activities:t=[]})=>{const s=Yt(),n=()=>t&&t.length>0?t:[{action:"Expediente creado",time:"Hace 2 horas",type:"case",link:"#"},{action:"Cita programada",time:"Hace 1 día",type:"appointment",link:"#"},{action:"Documento subido",time:"Hace 2 días",type:"document",link:"#"}],a=l=>{l.link&&l.link!=="#"&&s(l.link)},i=l=>{switch(l){case"case":return"📁";case"appointment":return"📅";case"document":return"📄";case"task":return"✅";case"provision":return"💰";case"user":return"👤";default:return"📋"}},o=n();return r.jsxs("div",{className:"bg-white shadow rounded-lg",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Actividad Reciente"})}),r.jsx("div",{className:"divide-y divide-gray-200",children:o.length>0?o.map((l,c)=>r.jsx("div",{className:"px-6 py-4 hover:bg-gray-50 cursor-pointer transition-colors duration-150",onClick:()=>a(l),children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("span",{className:"text-lg",children:i(l.type)})}),r.jsxs("div",{className:"ml-4 flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:l.action}),r.jsx("p",{className:"text-sm text-gray-500",children:l.time})]})]})},c)):r.jsx("div",{className:"px-6 py-8 text-center",children:r.jsx("p",{className:"text-gray-500",children:"No hay actividad reciente"})})})]})},V5=()=>{const e=Yt(),{login:t}=Ce(),[s,n]=f.useState({email:"",password:""}),[a,i]=f.useState(""),[o,l]=f.useState(!1),c=u=>{const{name:m,value:h}=u.target;n(g=>({...g,[m]:h}))},d=async u=>{u.preventDefault();try{i(""),l(!0),await t(s.email,s.password);const m=localStorage.getItem("token");if(m){const h=Ru(m);switch(console.log("Usuario decodificado:",h),h.role){case"ADMIN":e("/admin/dashboard");break;case"ABOGADO":e("/lawyer/dashboard");break;case"CLIENTE":e("/client/dashboard");break;default:e("/")}}}catch(m){console.error("Error completo:",m),i("Error al iniciar sesión. Por favor, verifique sus credenciales.")}finally{l(!1)}};return r.jsx("div",{className:"min-h-[calc(100vh-64px)] flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-md w-full space-y-8",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Iniciar Sesión"}),r.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["¿No tiene una cuenta?"," ",r.jsx(Ne,{to:"/register",className:"font-medium text-blue-600 hover:text-blue-500",children:"Regístrese aquí"})]})]}),r.jsxs("form",{className:"mt-8 space-y-6",onSubmit:d,children:[a&&r.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:r.jsx("span",{className:"block sm:inline",children:a})}),r.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"sr-only",children:"Correo Electrónico"}),r.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Correo Electrónico",value:s.email,onChange:c})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"sr-only",children:"Contraseña"}),r.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Contraseña",value:s.password,onChange:c})]})]}),r.jsx("div",{className:"flex items-center justify-between",children:r.jsx("div",{className:"text-sm",children:r.jsx(Ne,{to:"/forgot-password",className:"font-medium text-blue-600 hover:text-blue-500",children:"¿Olvidó su contraseña?"})})}),r.jsx("div",{children:r.jsx("button",{type:"submit",disabled:o,className:`group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${o?"opacity-50 cursor-not-allowed":""}`,children:o?"Iniciando sesión...":"Iniciar Sesión"})})]})]})})},H5=()=>{const e=Yt(),{register:t}=Ce(),[s,n]=f.useState({email:"",password:"",confirmPassword:"",name:"",role:"CLIENTE"}),[a,i]=f.useState(""),[o,l]=f.useState(!1),c=u=>{const{name:m,value:h}=u.target;n(g=>({...g,[m]:h}))},d=async u=>{if(u.preventDefault(),s.password!==s.confirmPassword)return i("Las contraseñas no coinciden");try{i(""),l(!0),await t({email:s.email,password:s.password,name:s.name,role:s.role}),e("/dashboard")}catch{i("Error al crear la cuenta. Por favor, inténtelo de nuevo.")}finally{l(!1)}};return r.jsx("div",{className:"min-h-[calc(100vh-64px)] flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-md w-full space-y-8",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Crear una cuenta"}),r.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["¿Ya tiene una cuenta?"," ",r.jsx(Ne,{to:"/login",className:"font-medium text-blue-600 hover:text-blue-500",children:"Inicie sesión aquí"})]})]}),r.jsxs("form",{className:"mt-8 space-y-6",onSubmit:d,children:[a&&r.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:r.jsx("span",{className:"block sm:inline",children:a})}),r.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"name",className:"sr-only",children:"Nombre Completo"}),r.jsx("input",{id:"name",name:"name",type:"text",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Nombre Completo",value:s.name,onChange:c})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"sr-only",children:"Correo Electrónico"}),r.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Correo Electrónico",value:s.email,onChange:c})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"sr-only",children:"Contraseña"}),r.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Contraseña",value:s.password,onChange:c})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"confirmPassword",className:"sr-only",children:"Confirmar Contraseña"}),r.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Confirmar Contraseña",value:s.confirmPassword,onChange:c})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"role",className:"sr-only",children:"Tipo de Usuario"}),r.jsxs("select",{id:"role",name:"role",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",value:s.role,onChange:c,children:[r.jsx("option",{value:"CLIENTE",children:"Cliente"}),r.jsx("option",{value:"ABOGADO",children:"Abogado"})]})]})]}),r.jsx("div",{children:r.jsx("button",{type:"submit",disabled:o,className:`group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${o?"opacity-50 cursor-not-allowed":""}`,children:o?"Creando cuenta...":"Registrarse"})})]})]})})},W5=()=>r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-md w-full space-y-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"mx-auto h-16 w-16 text-gray-400",children:r.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 12h6m-6-4h6m2 5.291A7.962 7.962 0 0112 15c-2.34 0-4.47-.881-6.08-2.33"})})}),r.jsx("h1",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Página No Encontrada"}),r.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Lo sentimos, la página que buscas no existe o ha sido movida."})]}),r.jsxs("div",{className:"flex flex-col space-y-3",children:[r.jsx(Ne,{to:"/",className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Ir al Inicio"}),r.jsx(Ne,{to:"/contact",className:"group relative w-full flex justify-center py-2 px-4 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Contactar Soporte"})]})]})}),oh=({allowedRoles:e})=>{const{user:t,loading:s}=Ce();return s?r.jsx("div",{children:"Cargando..."}):!t||!e.includes(t.role)?r.jsx(Jw,{to:"/login",replace:!0}):r.jsx(mx,{})},Y5=()=>{const{user:e,loading:t}=Ce();return t?r.jsx("div",{children:"Cargando..."}):e?r.jsx(mx,{}):r.jsx(Jw,{to:"/login",replace:!0})},lh=({title:e,description:t,icon:s="🚧"})=>r.jsx("div",{className:"min-h-[calc(100vh-200px)] flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-md w-full text-center",children:[r.jsx("div",{className:"text-6xl mb-6",children:s}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:e}),r.jsx("p",{className:"text-lg text-gray-600 mb-8",children:t||"Esta funcionalidad está en desarrollo y estará disponible pronto."}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[r.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Próximas funcionalidades:"}),r.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[r.jsx("li",{children:"• Interfaz completa y funcional"}),r.jsx("li",{children:"• Integración con backend"}),r.jsx("li",{children:"• Gestión de datos en tiempo real"}),r.jsx("li",{children:"• Reportes y estadísticas"})]})]}),r.jsx(Ne,{to:"/dashboard",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Volver al Dashboard"})]})]})}),q5=()=>{const[e,t]=f.useState([]),[s,n]=f.useState([]),[a,i]=f.useState(!0),[o,l]=f.useState(null),[c,d]=f.useState(""),[u,m]=f.useState("todos"),[h,g]=f.useState(null),{user:j}=Ce(),[y,w]=f.useState([]),x=b=>b.length>12?b.substring(0,8).toUpperCase():b,p=b=>new Date(b).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"}),v=b=>{switch(b){case"ABIERTO":return"bg-green-100 text-green-800 border-green-200";case"EN_PROCESO":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"CERRADO":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},N=b=>{switch(b){case"ABIERTO":return"Abierto";case"EN_PROCESO":return"En Proceso";case"CERRADO":return"Cerrado";default:return b}};return f.useEffect(()=>{(async()=>{try{i(!0);const C=localStorage.getItem("token"),[S,k]=await Promise.all([K.get("/cases",{headers:{Authorization:`Bearer ${C}`}}),K.get("/cases/stats",{headers:{Authorization:`Bearer ${C}`}})]);t(S.data),l(k.data),g(null)}catch(C){console.error("Error fetching cases:",C),g("Error al cargar los expedientes")}finally{i(!1)}})()},[]),f.useEffect(()=>{(async()=>{try{const C=localStorage.getItem("token"),S=await K.get("/chat/conversations",{headers:{Authorization:`Bearer ${C}`}});w(S.data)}catch(C){console.error("Error fetching conversations:",C)}})()},[]),f.useEffect(()=>{let b=e;c&&(b=b.filter(C=>{var S;return C.title.toLowerCase().includes(c.toLowerCase())||C.client.user.name.toLowerCase().includes(c.toLowerCase())||((S=C.description)==null?void 0:S.toLowerCase().includes(c.toLowerCase()))})),u!=="todos"&&(b=b.filter(C=>C.status===u)),n(b)},[e,c,u]),a?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):r.jsx("div",{className:"py-6",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gestión de Expedientes"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Administra y da seguimiento a todos los expedientes legales"})]}),r.jsxs(Ne,{to:"/lawyer/cases/new",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[r.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Nuevo Expediente"]})]})}),o&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[r.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:r.jsx("div",{className:"p-5",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-6 w-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),r.jsx("div",{className:"ml-5 w-0 flex-1",children:r.jsxs("dl",{children:[r.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total"}),r.jsx("dd",{className:"text-lg font-medium text-gray-900",children:o.total})]})})]})})}),r.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:r.jsx("div",{className:"p-5",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-6 w-6 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsx("div",{className:"ml-5 w-0 flex-1",children:r.jsxs("dl",{children:[r.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Abiertos"}),r.jsx("dd",{className:"text-lg font-medium text-green-600",children:o.abiertos})]})})]})})}),r.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:r.jsx("div",{className:"p-5",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-6 w-6 text-yellow-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsx("div",{className:"ml-5 w-0 flex-1",children:r.jsxs("dl",{children:[r.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"En Proceso"}),r.jsx("dd",{className:"text-lg font-medium text-yellow-600",children:o.enProceso})]})})]})})}),r.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:r.jsx("div",{className:"p-5",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-6 w-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),r.jsx("div",{className:"ml-5 w-0 flex-1",children:r.jsxs("dl",{children:[r.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Cerrados"}),r.jsx("dd",{className:"text-lg font-medium text-gray-600",children:o.cerrados})]})})]})})})]}),r.jsxs("div",{className:"bg-white shadow rounded-lg p-6 mb-8",children:[r.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Filtros de Búsqueda"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"search-cases",className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar"}),r.jsx("input",{type:"text",id:"search-cases",value:c,onChange:b=>d(b.target.value),placeholder:"Buscar por título, cliente o descripción...","aria-label":"Buscar expedientes",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-describedby":"search-cases-help"}),r.jsx("div",{id:"search-cases-help",className:"sr-only",children:"Busque expedientes por título, nombre del cliente o descripción"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"status-filter",className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado"}),r.jsxs("select",{id:"status-filter",value:u,onChange:b=>m(b.target.value),"aria-label":"Filtrar por estado",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-describedby":"status-filter-help",children:[r.jsx("option",{value:"todos",children:"Todos los estados"}),r.jsx("option",{value:"ABIERTO",children:"Abierto"}),r.jsx("option",{value:"EN_PROCESO",children:"En Proceso"}),r.jsx("option",{value:"CERRADO",children:"Cerrado"})]}),r.jsx("div",{id:"status-filter-help",className:"sr-only",children:"Filtre los expedientes por su estado actual"})]}),r.jsx("div",{className:"flex items-end",children:r.jsx("button",{onClick:()=>{d(""),m("todos")},className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2","aria-label":"Limpiar todos los filtros de búsqueda",children:"Limpiar Filtros"})})]})]}),r.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:[r.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Lista de Expedientes"}),r.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[s.length," expediente",s.length!==1?"s":""," encontrado",s.length!==1?"s":""]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Título"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Creado"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(b=>{const C=y.find(S=>S.userId===b.client.user.id);return r.jsxs("tr",{className:"hover:bg-gray-50 transition-colors duration-150",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 font-mono",children:x(b.id)}),r.jsx("button",{className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",title:"Copiar ID completo",onClick:()=>navigator.clipboard.writeText(b.id),"aria-label":`Copiar ID completo del expediente ${b.id} al portapapeles`,children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"max-w-xs",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",title:b.title,children:b.title}),b.description&&r.jsx("div",{className:"text-sm text-gray-500 truncate",title:b.description,children:b.description})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-sm font-medium text-blue-600",children:b.client.user.name.charAt(0).toUpperCase()})})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:b.client.user.name}),r.jsx("div",{className:"text-sm text-gray-500 truncate",children:b.client.user.email})]}),C&&C.unreadCount>0&&r.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 border border-yellow-200",title:"Mensajes no leídos",role:"status","aria-label":`${C.unreadCount} mensaje${C.unreadCount>1?"s":""} no leído${C.unreadCount>1?"s":""} de ${b.client.user.name}`,children:[r.jsx("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{d:"M10 2a8 8 0 100 16 8 8 0 000-16zm1 12H9v-2h2v2zm0-4H9V6h2v4z"})}),C.unreadCount]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${v(b.status)}`,children:N(b.status)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:p(b.createdAt)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs(Ne,{to:`/lawyer/cases/${b.id}`,className:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors","aria-label":`Ver detalles del expediente ${b.title}`,children:[r.jsxs("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Ver"]}),r.jsxs(Ne,{to:`/lawyer/cases/${b.id}/edit`,className:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded text-green-700 bg-green-100 hover:bg-green-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors","aria-label":`Editar expediente ${b.title}`,children:[r.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Editar"]})]})})]},b.id)})})]})})]}),s.length===0&&r.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsx("h4",{className:"mt-2 text-sm font-medium text-gray-900",children:"No se encontraron expedientes"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Intenta ajustar los filtros o crear un nuevo expediente."}),r.jsx("div",{className:"mt-6",children:r.jsxs(Ne,{to:"/lawyer/cases/new",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[r.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Crear Nuevo Expediente"]})})]})]})})},G5=()=>{const e=Yt(),{user:t}=Ce(),[s,n]=f.useState(!1),[a,i]=f.useState(!1),[o,l]=f.useState(null),[c,d]=f.useState([]),[u,m]=f.useState([]),[h,g]=f.useState({title:"",description:"",clientId:"",lawyerId:(t==null?void 0:t.role)==="ABOGADO"?t.id:""});f.useEffect(()=>{(async()=>{try{n(!0);const x=localStorage.getItem("token"),[p,v]=await Promise.all([K.get("/users/clients"),K.get("/users/lawyers")]);d(p.data),m(v.data)}catch(x){console.error("Error fetching data:",x),l("Error al cargar los datos")}finally{n(!1)}})()},[t]);const j=w=>{const{name:x,value:p}=w.target;g(v=>({...v,[x]:p}))},y=async w=>{var x,p;if(w.preventDefault(),!h.title||!h.clientId||!h.lawyerId){l("Por favor completa todos los campos obligatorios");return}try{i(!0),l(null);const v=localStorage.getItem("token");await K.post("/cases",h,{headers:{Authorization:`Bearer ${v}`}}),e("/lawyer/cases")}catch(v){console.error("Error creating case:",v),l(((p=(x=v.response)==null?void 0:x.data)==null?void 0:p.message)||"Error al crear el expediente")}finally{i(!1)}};return s?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):r.jsx("div",{className:"py-6",children:r.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Nuevo Expediente"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Crea un nuevo expediente legal"})]}),r.jsx("button",{onClick:()=>e("/lawyer/cases"),className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Cancelar"})]})}),r.jsx("div",{className:"bg-white shadow rounded-lg",children:r.jsxs("form",{onSubmit:y,className:"p-6 space-y-6",children:[o&&r.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md",children:o}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Título del Expediente *"}),r.jsx("input",{type:"text",id:"title",name:"title",value:h.title,onChange:j,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: Contrato de Compraventa"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripción"}),r.jsx("textarea",{id:"description",name:"description",value:h.description,onChange:j,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe brevemente el caso..."})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"clientId",className:"block text-sm font-medium text-gray-700 mb-2",children:"Cliente *"}),r.jsxs("select",{id:"clientId",name:"clientId",value:h.clientId,onChange:j,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:"Selecciona un cliente"}),c.filter(w=>w.user).length===0&&r.jsx("option",{disabled:!0,value:"",children:"No hay clientes disponibles"}),c.filter(w=>w.user).map(w=>{var x,p;return r.jsxs("option",{value:w.id,children:[((x=w.user)==null?void 0:x.name)||"Sin nombre"," - ",((p=w.user)==null?void 0:p.email)||"Sin email"," (DNI: ",w.dni,")"]},w.id)})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"lawyerId",className:"block text-sm font-medium text-gray-700 mb-2",children:"Abogado Asignado *"}),r.jsxs("select",{id:"lawyerId",name:"lawyerId",value:h.lawyerId,onChange:j,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:(t==null?void 0:t.role)==="ABOGADO",children:[r.jsx("option",{value:"",children:"Selecciona un abogado"}),u.map(w=>r.jsxs("option",{value:w.id,children:[w.name," - ",w.email]},w.id))]}),(t==null?void 0:t.role)==="ABOGADO"&&r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Serás asignado automáticamente como abogado responsable"})]}),r.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:()=>e("/lawyer/cases"),className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Cancelar"}),r.jsx("button",{type:"submit",disabled:a,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Creando...":"Crear Expediente"})]})]})})]})})},K5=({value:e,onChange:t,required:s=!1,className:n="",placeholder:a="Seleccionar fecha y hora"})=>{const[i,o]=f.useState(!1),[l,c]=f.useState(""),[d,u]=f.useState(""),[m,h]=f.useState(new Date),[g,j]=f.useState(!1),y=f.useRef(null);f.useEffect(()=>{if(e)try{const S=new Date(e);isNaN(S.getTime())||(c(S.toISOString().split("T")[0]),u(`${S.getHours().toString().padStart(2,"0")}:${S.getMinutes().toString().padStart(2,"0")}`))}catch(S){console.error("Error parsing date value:",S),c(""),u("")}else c(""),u("")},[e]),f.useEffect(()=>{const S=k=>{y.current&&!y.current.contains(k.target)&&(o(!1),j(!1))};return i&&document.addEventListener("mousedown",S),()=>{document.removeEventListener("mousedown",S)}},[i]);const w=()=>{const S=[],k=new Date;for(let D=0;D<14;D++){const L=new Date(k);L.setDate(k.getDate()+D),L.getDay()>=1&&L.getDay()<=5&&S.push(new Date(L))}return S},x=()=>["09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","16:00","16:30","17:00","17:30"],p=S=>{const k=S.toISOString().split("T")[0];if(c(k),j(!1),d){const D=`${k}T${d}:00`;t(D)}},v=S=>{if(u(S),j(!1),l){const k=`${l}T${S}:00`;t(k)}},N=()=>{if(l&&d)try{const S=new Date(`${l}T${d}:00`);if(!isNaN(S.getTime()))return S.toLocaleString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch(S){console.error("Error formatting date:",S)}return""},b=w(),C=x();return r.jsxs("div",{className:`relative ${n}`,ref:y,children:[r.jsx("input",{type:"text",value:N(),readOnly:!0,required:s,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white cursor-pointer",placeholder:a,onClick:()=>{o(!i),s&&!l&&!d&&j(!0)},onInvalid:S=>{S.preventDefault()}}),g&&s&&!l&&!d&&r.jsx("div",{className:"absolute top-full left-0 mt-1 px-3 py-2 bg-orange-100 border border-orange-300 rounded-md text-orange-800 text-sm z-[99999] whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("svg",{className:"w-4 h-4 mr-1 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Completa este campo"]})}),i&&r.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-md shadow-lg z-[99999] max-h-80 overflow-y-auto",children:r.jsxs("div",{className:"p-4",children:[r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold mb-3 text-gray-700",children:"Fecha"}),r.jsx("div",{className:"space-y-2",children:b.map(S=>r.jsx("button",{onClick:()=>p(S),className:`w-full p-2 text-left rounded border transition-colors ${l===S.toISOString().split("T")[0]?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-200 hover:bg-gray-50"}`,children:S.toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},S.toISOString()))})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold mb-3 text-gray-700",children:"Hora"}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:C.map(S=>r.jsx("button",{onClick:()=>v(S),className:`p-2 text-center rounded border transition-colors ${d===S?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-200 hover:bg-gray-50"}`,children:S},S))})]})]}),r.jsxs("div",{className:"flex justify-end gap-2 mt-4 pt-4 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:()=>{o(!1),j(!1)},className:"px-3 py-1 text-sm bg-gray-200 text-gray-700 rounded hover:bg-gray-300",children:"Cancelar"}),r.jsx("button",{type:"button",onClick:()=>{o(!1),j(!1)},className:"px-3 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600",children:"Aceptar"})]})]})})]})},MN=({expedienteId:e,expedienteData:t,onAppointmentCreated:s,onNoteAdded:n,onMessageSent:a})=>{var N,b,C,S,k,D,L,T,B,V,A,I,q,Y,M,W,E,R,$,_;const i=t||{},{user:o}=Ce(),[l,c]=f.useState(null),[d,u]=f.useState({}),[m,h]=f.useState(!1),[g,j]=f.useState(null),[y,w]=f.useState(null),x=()=>{c(null),u({}),j(null),w(null)},p=O=>{u({...d,[O.target.name]:O.target.value})},v=async O=>{var P,F,Q,X,re,G,le,ie;if(O.preventDefault(),h(!0),j(null),w(null),l==="cita"){if((o==null?void 0:o.role)==="CLIENTE"){let xe=(P=i==null?void 0:i.lawyer)==null?void 0:P.id;if(!xe){j("No se pudo obtener el abogado del expediente."),h(!1);return}try{const je=localStorage.getItem("token"),Pe={lawyerId:xe,date:d.datetime,location:d.location||"",notes:d.notes||""},ee=await K.post("/appointments",Pe,{headers:{Authorization:`Bearer ${je}`}});w("Cita programada con éxito"),s&&s(ee.data),setTimeout(x,1200)}catch(je){j(((Q=(F=je.response)==null?void 0:F.data)==null?void 0:Q.message)||"Error al programar la cita")}finally{h(!1)}return}else if((o==null?void 0:o.role)==="ABOGADO"||(o==null?void 0:o.role)==="ADMIN"){let xe=(X=i==null?void 0:i.client)==null?void 0:X.id;if(!xe){j("No se pudo obtener el cliente del expediente."),h(!1);return}try{const je=localStorage.getItem("token"),Pe={clientId:xe,date:d.datetime,location:d.location||"",notes:d.notes||""},ee=await K.post("/appointments/lawyer",Pe,{headers:{Authorization:`Bearer ${je}`}});w("Cita programada con éxito"),s&&s(ee.data),setTimeout(x,1200)}catch(je){j(((G=(re=je.response)==null?void 0:re.data)==null?void 0:G.message)||"Error al programar la cita")}finally{h(!1)}return}}else if(l==="nota"){try{const xe=localStorage.getItem("token"),je={expedienteId:e,title:d.title||"Nota del expediente",content:d.note,isPrivate:d.isPrivate||!1},Pe=await K.post("/notes",je,{headers:{Authorization:`Bearer ${xe}`}});w("Nota agregada con éxito"),n&&n(Pe.data),setTimeout(x,1200)}catch(xe){j(((ie=(le=xe.response)==null?void 0:le.data)==null?void 0:ie.message)||"Error al agregar la nota")}finally{h(!1)}return}setTimeout(()=>{h(!1),w("Acción realizada con éxito"),l==="mensaje"&&a&&a(d),setTimeout(x,1e3)},800)};return r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 md:gap-4",children:[(o==null?void 0:o.role)==="CLIENTE"&&r.jsxs(r.Fragment,{children:[r.jsxs("button",{className:"responsive-button bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",onClick:()=>c("cita"),"aria-label":"Programar cita con el abogado",children:[r.jsx("span",{className:"hidden sm:inline",children:"Programar Cita"}),r.jsx("span",{className:"sm:hidden",children:"Cita"})]}),r.jsxs("button",{className:"responsive-button bg-purple-600 text-white rounded-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 transition-colors",onClick:()=>c("mensaje"),"aria-label":"Enviar mensaje al abogado",children:[r.jsx("span",{className:"hidden sm:inline",children:"Enviar Mensaje"}),r.jsx("span",{className:"sm:hidden",children:"Mensaje"})]})]}),((o==null?void 0:o.role)==="ABOGADO"||(o==null?void 0:o.role)==="ADMIN")&&r.jsxs(r.Fragment,{children:[r.jsxs("button",{className:"responsive-button bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-colors",onClick:()=>c("nota"),"aria-label":"Agregar nota interna al expediente",children:[r.jsx("span",{className:"hidden sm:inline",children:"Agregar Nota"}),r.jsx("span",{className:"sm:hidden",children:"Nota"})]}),r.jsxs("button",{className:"responsive-button bg-purple-600 text-white rounded-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 transition-colors",onClick:()=>c("mensaje"),"aria-label":"Enviar mensaje al cliente",children:[r.jsx("span",{className:"hidden sm:inline",children:"Enviar Mensaje"}),r.jsx("span",{className:"sm:hidden",children:"Mensaje"})]}),r.jsxs("button",{className:"responsive-button bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",onClick:()=>c("cita"),"aria-label":"Programar cita con el cliente",children:[r.jsx("span",{className:"hidden sm:inline",children:"Programar Cita"}),r.jsx("span",{className:"sm:hidden",children:"Cita"})]})]}),r.jsx(Io,{isOpen:l==="cita",onClose:x,title:"Programar Cita",description:(o==null?void 0:o.role)==="CLIENTE"?`Programe una cita con ${((N=i==null?void 0:i.lawyer)==null?void 0:N.name)||"su abogado"} para este expediente`:`Programe una cita con ${((C=(b=i==null?void 0:i.client)==null?void 0:b.user)==null?void 0:C.name)||"el cliente"} para este expediente`,size:"md",children:r.jsxs("form",{onSubmit:v,className:"space-y-4",children:[r.jsx("input",{type:"hidden",name:"expedienteId",value:e||""}),(o==null?void 0:o.role)==="CLIENTE"?r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-md p-3",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),r.jsx("span",{className:"text-sm font-medium text-green-900",children:"Abogado:"}),r.jsx("span",{className:"text-sm text-green-700",children:((S=i==null?void 0:i.lawyer)==null?void 0:S.name)||"Abogado no asignado"})]}),((k=i==null?void 0:i.lawyer)==null?void 0:k.email)&&r.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[r.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),r.jsx("span",{className:"text-sm text-green-700",children:i.lawyer.email})]})]}):r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),r.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Cliente:"}),r.jsx("span",{className:"text-sm text-blue-700",children:((L=(D=i==null?void 0:i.client)==null?void 0:D.user)==null?void 0:L.name)||"Cliente no especificado"})]}),((B=(T=i==null?void 0:i.client)==null?void 0:T.user)==null?void 0:B.email)&&r.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[r.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),r.jsx("span",{className:"text-sm text-blue-700",children:i.client.user.email})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"datetime",className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha y hora"}),r.jsx(K5,{value:d.datetime||"",onChange:O=>u({...d,datetime:O}),required:!0,placeholder:"Seleccionar fecha y hora para la cita"}),r.jsx("div",{id:"datetime-help",className:"sr-only",children:"Seleccione la fecha y hora para la cita"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700 mb-1",children:"Lugar"}),r.jsx("input",{id:"location",type:"text",name:"location",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onChange:p,placeholder:"Ingrese el lugar de la cita","aria-describedby":"location-help"}),r.jsx("div",{id:"location-help",className:"sr-only",children:"Especifique el lugar donde se realizará la cita"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas"}),r.jsx("textarea",{id:"notes",name:"notes",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onChange:p,placeholder:"Ingrese notas adicionales (opcional)","aria-describedby":"notes-help"}),r.jsx("div",{id:"notes-help",className:"sr-only",children:"Agregue información adicional sobre la cita"})]}),g&&r.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",role:"alert","aria-live":"polite",children:r.jsx("p",{className:"text-red-600 text-sm",children:g})}),y&&r.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md",role:"alert","aria-live":"polite",children:r.jsx("p",{className:"text-green-600 text-sm",children:y})}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4 sticky bottom-0 bg-white border-t border-gray-200 mt-4 -mx-6 px-6 py-4 modal-actions",children:[r.jsx("button",{type:"button",onClick:x,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 relative z-20","aria-label":"Cancelar programación de cita",style:{position:"relative",zIndex:20},children:"Cancelar"}),r.jsx("button",{type:"submit",disabled:m,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed relative z-20","aria-label":"Guardar cita programada",style:{position:"relative",zIndex:20},children:m?"Guardando...":"Guardar"})]})]})}),r.jsx(Io,{isOpen:l==="nota",onClose:x,title:"Agregar Nota",description:"Agregue una nota interna al expediente para su seguimiento",size:"md",children:r.jsxs("form",{onSubmit:v,className:"space-y-4",children:[r.jsx("input",{type:"hidden",name:"expedienteId",value:e||""}),r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-md p-3",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsx("span",{className:"text-sm font-medium text-green-900",children:"Expediente:"}),r.jsx("span",{className:"text-sm text-green-700",children:(i==null?void 0:i.title)||e||"Expediente"})]}),r.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[r.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),r.jsxs("span",{className:"text-sm text-green-700",children:["Cliente: ",((A=(V=i==null?void 0:i.client)==null?void 0:V.user)==null?void 0:A.name)||"No especificado"]})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"nota-title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Título de la nota"}),r.jsx("input",{id:"nota-title",name:"title",type:"text",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",onChange:p,placeholder:"Título descriptivo de la nota...","aria-describedby":"nota-title-help"}),r.jsx("div",{id:"nota-title-help",className:"sr-only",children:"Ingrese un título descriptivo para la nota"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"nota-textarea",className:"block text-sm font-medium text-gray-700 mb-1",children:"Contenido de la nota"}),r.jsx("textarea",{id:"nota-textarea",name:"note",required:!0,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",onChange:p,placeholder:"Escriba el contenido de la nota interna sobre este expediente...","aria-describedby":"nota-help"}),r.jsx("div",{id:"nota-help",className:"sr-only",children:"Escriba el contenido de la nota interna que será agregada al expediente para el seguimiento del caso"})]}),((o==null?void 0:o.role)==="ABOGADO"||(o==null?void 0:o.role)==="ADMIN")&&r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{id:"nota-private",name:"isPrivate",type:"checkbox",className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded",onChange:O=>u({...d,isPrivate:O.target.checked})}),r.jsx("label",{htmlFor:"nota-private",className:"ml-2 block text-sm text-gray-700",children:"Nota privada (solo visible para abogados)"})]}),g&&r.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",role:"alert","aria-live":"polite",children:r.jsx("p",{className:"text-red-600 text-sm",children:g})}),y&&r.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md",role:"alert","aria-live":"polite",children:r.jsx("p",{className:"text-green-600 text-sm",children:y})}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[r.jsx("button",{type:"button",onClick:x,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2","aria-label":"Cancelar agregar nota",children:"Cancelar"}),r.jsx("button",{type:"submit",disabled:m,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Guardar nota agregada",children:m?"Guardando...":"Guardar"})]})]})}),r.jsx(Io,{isOpen:l==="mensaje",onClose:x,title:"Enviar Mensaje",description:(o==null?void 0:o.role)==="CLIENTE"?`Envíe un mensaje a ${((I=i==null?void 0:i.lawyer)==null?void 0:I.name)||"su abogado"} relacionado con este expediente`:`Envíe un mensaje a ${((Y=(q=i==null?void 0:i.client)==null?void 0:q.user)==null?void 0:Y.name)||"el cliente"} relacionado con este expediente`,size:"md",children:r.jsxs("form",{onSubmit:v,className:"space-y-4",children:[r.jsx("input",{type:"hidden",name:"expedienteId",value:e||""}),(o==null?void 0:o.role)==="CLIENTE"?r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),r.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Destinatario:"}),r.jsx("span",{className:"text-sm text-blue-700",children:((M=i==null?void 0:i.lawyer)==null?void 0:M.name)||"Abogado no asignado"})]}),((W=i==null?void 0:i.lawyer)==null?void 0:W.email)&&r.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[r.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),r.jsx("span",{className:"text-sm text-blue-700",children:i.lawyer.email})]})]}):r.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-md p-3",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("svg",{className:"w-4 h-4 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),r.jsx("span",{className:"text-sm font-medium text-purple-900",children:"Destinatario:"}),r.jsx("span",{className:"text-sm text-purple-700",children:((R=(E=i==null?void 0:i.client)==null?void 0:E.user)==null?void 0:R.name)||"Cliente no especificado"})]}),((_=($=i==null?void 0:i.client)==null?void 0:$.user)==null?void 0:_.email)&&r.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[r.jsx("svg",{className:"w-4 h-4 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),r.jsx("span",{className:"text-sm text-purple-700",children:i.client.user.email})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"mensaje-textarea",className:"block text-sm font-medium text-gray-700 mb-1",children:"Mensaje"}),r.jsx("textarea",{id:"mensaje-textarea",name:"message",required:!0,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500",onChange:p,placeholder:(o==null?void 0:o.role)==="CLIENTE"?"Escriba su mensaje aquí. Este mensaje será enviado a su abogado...":"Escriba su mensaje aquí. Este mensaje será enviado al cliente...","aria-describedby":"mensaje-help"}),r.jsx("div",{id:"mensaje-help",className:"sr-only",children:(o==null?void 0:o.role)==="CLIENTE"?"Escriba el mensaje que desea enviar a su abogado":"Escriba el mensaje que desea enviar al cliente"})]}),g&&r.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",role:"alert","aria-live":"polite",children:r.jsx("p",{className:"text-red-600 text-sm",children:g})}),y&&r.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md",role:"alert","aria-live":"polite",children:r.jsx("p",{className:"text-green-600 text-sm",children:y})}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[r.jsx("button",{type:"button",onClick:x,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2","aria-label":"Cancelar envío de mensaje",children:"Cancelar"}),r.jsx("button",{type:"submit",disabled:m,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Enviar mensaje",children:m?"Enviando...":"Enviar"})]})]})})]})},X5=({expedienteId:e,onNoteAdded:t})=>{const{user:s}=Ce(),[n,a]=f.useState([]),[i,o]=f.useState(!0),[l,c]=f.useState(null),[d,u]=f.useState(null),[m,h]=f.useState({title:"",content:""}),[g,j]=f.useState(""),[y,w]=f.useState("all"),[x,p]=f.useState("all"),[v,N]=f.useState(""),[b,C]=f.useState(""),[S,k]=f.useState(!1),[D,L]=f.useState({title:"",content:"",isPrivate:!1});f.useEffect(()=>{T()},[e]);const T=async()=>{var E,R,$;try{console.log("Fetching notes for expediente:",e);const _=[{id:"1",title:"Nota de prueba del expediente",content:"Esta es una nota de prueba para verificar que el sistema funciona correctamente. Contiene información importante sobre el caso.",isPrivate:!1,createdAt:new Date().toISOString(),author:{id:(s==null?void 0:s.id)||"1",name:(s==null?void 0:s.name)||"Usuario Test",email:(s==null?void 0:s.email)||"test@example.com"}},{id:"2",title:"Segunda nota de prueba",content:"Esta es otra nota para verificar que se muestran múltiples notas. Incluye detalles adicionales sobre el progreso del caso.",isPrivate:!1,createdAt:new Date(Date.now()-864e5).toISOString(),author:{id:(s==null?void 0:s.id)||"1",name:(s==null?void 0:s.name)||"Usuario Test",email:(s==null?void 0:s.email)||"test@example.com"}},{id:"3",title:"Nota privada del abogado",content:"Esta es una nota privada que solo debe ser visible para abogados y administradores.",isPrivate:!0,createdAt:new Date(Date.now()-1728e5).toISOString(),author:{id:(s==null?void 0:s.id)||"1",name:(s==null?void 0:s.name)||"Usuario Test",email:(s==null?void 0:s.email)||"test@example.com"}}],O=localStorage.getItem("token");console.log("Token:",O?"Present":"Missing");const P=await K.get(`/notes/expediente/${e}`,{headers:{Authorization:`Bearer ${O}`}});console.log("Notes response:",P.data),a(P.data)}catch(_){console.error("Error fetching notes:",_),console.error("Error response:",(E=_.response)==null?void 0:E.data),c((($=(R=_.response)==null?void 0:R.data)==null?void 0:$.message)||"Error al cargar las notas")}finally{o(!1)}},B=E=>{u(E.id),h({title:E.title,content:E.content})},V=async E=>{var R,$;try{const _=localStorage.getItem("token"),O=await K.patch(`/notes/${E}`,m,{headers:{Authorization:`Bearer ${_}`}});a(n.map(P=>P.id===E?O.data:P)),u(null),h({title:"",content:""})}catch(_){c((($=(R=_.response)==null?void 0:R.data)==null?void 0:$.message)||"Error al actualizar la nota")}},A=async E=>{var R,$;if(window.confirm("¿Está seguro de que desea eliminar esta nota?"))try{const _=localStorage.getItem("token");await K.delete(`/notes/${E}`,{headers:{Authorization:`Bearer ${_}`}}),a(n.filter(O=>O.id!==E))}catch(_){c((($=(R=_.response)==null?void 0:R.data)==null?void 0:$.message)||"Error al eliminar la nota")}},I=E=>E.author.id===(s==null?void 0:s.id)||(s==null?void 0:s.role)==="ADMIN",q=E=>E.author.id===(s==null?void 0:s.id)||(s==null?void 0:s.role)==="ADMIN",Y=E=>{const R=new Date(E),_=Math.abs(new Date().getTime()-R.getTime()),O=Math.ceil(_/(1e3*60*60*24));return O===1?"Ayer":O===0?"Hoy":O<7?`Hace ${O} días`:R.toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"})},M=async()=>{var E,R;try{const $=localStorage.getItem("token"),_={expedienteId:e,title:D.title,content:D.content,isPrivate:D.isPrivate},O=await K.post("/notes",_,{headers:{Authorization:`Bearer ${$}`}});a([O.data,...n]),L({title:"",content:"",isPrivate:!1}),k(!1)}catch($){c(((R=(E=$.response)==null?void 0:E.data)==null?void 0:R.message)||"Error al crear la nota")}},W=n.filter(E=>{const R=E.title.toLowerCase().includes(g.toLowerCase())||E.content.toLowerCase().includes(g.toLowerCase()),$=y==="all"||y==="public"&&!E.isPrivate||y==="private"&&E.isPrivate,_=new Date(E.createdAt),O=new Date,P=new Date(O.getFullYear(),O.getMonth(),O.getDate()),F=new Date(O.getFullYear(),O.getMonth(),O.getDate()-O.getDay()),Q=new Date(O.getFullYear(),O.getMonth(),1);let X=!0;switch(x){case"today":X=_>=P;break;case"week":X=_>=F;break;case"month":X=_>=Q;break;case"custom":if(v&&b){const re=new Date(v),G=new Date(b);G.setHours(23,59,59,999),X=_>=re&&_<=G}else if(v){const re=new Date(v);X=_>=re}else if(b){const re=new Date(b);re.setHours(23,59,59,999),X=_<=re}break;default:X=!0}return R&&$&&X});return i?r.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Notas del Expediente"}),r.jsxs("div",{className:"text-center py-4",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Cargando notas..."})]})]}):r.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Notas del Expediente"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:T,className:"px-3 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500","aria-label":"Recargar notas","aria-describedby":"recargar-notas-help",children:"🔄 Recargar"}),r.jsx("div",{id:"recargar-notas-help",className:"sr-only",children:"Actualizar la lista de notas del expediente"}),r.jsx("button",{onClick:()=>k(!S),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Crear nueva nota","aria-describedby":"crear-nota-help",children:S?"Cancelar":"Crear Nota"}),r.jsx("div",{id:"crear-nota-help",className:"sr-only",children:S?"Cancelar la creación de una nueva nota":"Abrir formulario para crear una nueva nota"})]})]}),l&&r.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:r.jsx("p",{className:"text-red-600 text-sm",children:l})}),S&&r.jsxs("div",{className:"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[r.jsx("h3",{className:"text-md font-medium text-gray-900 mb-3",children:"Nueva Nota"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"create-note-title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Título de la nota"}),r.jsx("input",{id:"create-note-title",type:"text",placeholder:"Título de la nota",value:D.title,onChange:E=>L({...D,title:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","aria-describedby":"create-note-title-help"}),r.jsx("div",{id:"create-note-title-help",className:"sr-only",children:"Ingrese un título descriptivo para la nota"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"create-note-content",className:"block text-sm font-medium text-gray-700 mb-1",children:"Contenido de la nota"}),r.jsx("textarea",{id:"create-note-content",placeholder:"Contenido de la nota",value:D.content,onChange:E=>L({...D,content:E.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","aria-describedby":"create-note-content-help"}),r.jsx("div",{id:"create-note-content-help",className:"sr-only",children:"Escriba el contenido de la nota que desea agregar al expediente"})]}),((s==null?void 0:s.role)==="ABOGADO"||(s==null?void 0:s.role)==="ADMIN")&&r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{id:"create-note-private",type:"checkbox",checked:D.isPrivate,onChange:E=>L({...D,isPrivate:E.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded","aria-describedby":"create-note-private-help"}),r.jsx("label",{htmlFor:"create-note-private",className:"ml-2 text-sm text-gray-700",children:"Nota privada (solo visible para abogados)"}),r.jsx("div",{id:"create-note-private-help",className:"sr-only",children:"Marque esta opción si la nota debe ser visible solo para abogados y administradores"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:M,disabled:!D.title||!D.content,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Guardar nueva nota","aria-describedby":"save-create-note-help",children:"Guardar Nota"}),r.jsx("button",{onClick:()=>k(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300","aria-label":"Cancelar creación de nota","aria-describedby":"cancel-create-note-help",children:"Cancelar"}),r.jsx("div",{id:"save-create-note-help",className:"sr-only",children:"Guardar la nueva nota en el expediente"}),r.jsx("div",{id:"cancel-create-note-help",className:"sr-only",children:"Cancelar la creación de la nota y cerrar el formulario"})]})]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-2",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx("label",{htmlFor:"search-notes",className:"sr-only",children:"Buscar en notas"}),r.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:"🔍"}),r.jsx("input",{id:"search-notes",type:"text",placeholder:"Buscar en notas...",value:g,onChange:E=>j(E.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","aria-describedby":"search-notes-help"}),r.jsx("div",{id:"search-notes-help",className:"sr-only",children:"Busque en el título y contenido de las notas"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("label",{htmlFor:"filter-privacy",className:"sr-only",children:"Filtrar por privacidad"}),r.jsx("span",{className:"text-gray-500",children:"🔒"}),r.jsxs("select",{id:"filter-privacy",value:y,onChange:E=>w(E.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","aria-describedby":"filter-privacy-help",children:[r.jsx("option",{value:"all",children:"Todas las notas"}),r.jsx("option",{value:"public",children:"Solo públicas"}),r.jsx("option",{value:"private",children:"Solo privadas"})]}),r.jsx("div",{id:"filter-privacy-help",className:"sr-only",children:"Seleccione el tipo de notas que desea ver"})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("label",{htmlFor:"filter-date",className:"sr-only",children:"Filtrar por fecha"}),r.jsx("span",{className:"text-gray-500",children:"📅"}),r.jsxs("select",{id:"filter-date",value:x,onChange:E=>p(E.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","aria-describedby":"filter-date-help",children:[r.jsx("option",{value:"all",children:"Todas las fechas"}),r.jsx("option",{value:"today",children:"Hoy"}),r.jsx("option",{value:"week",children:"Esta semana"}),r.jsx("option",{value:"month",children:"Este mes"}),r.jsx("option",{value:"custom",children:"Rango personalizado"})]}),r.jsx("div",{id:"filter-date-help",className:"sr-only",children:"Seleccione el período de tiempo para filtrar las notas"})]}),x==="custom"&&r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"custom-date-from",className:"sr-only",children:"Fecha desde"}),r.jsx("input",{id:"custom-date-from",type:"date",value:v,onChange:E=>N(E.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Desde","aria-describedby":"custom-date-from-help"}),r.jsx("div",{id:"custom-date-from-help",className:"sr-only",children:"Seleccione la fecha de inicio para el filtro personalizado"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"custom-date-to",className:"sr-only",children:"Fecha hasta"}),r.jsx("input",{id:"custom-date-to",type:"date",value:b,onChange:E=>C(E.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Hasta","aria-describedby":"custom-date-to-help"}),r.jsx("div",{id:"custom-date-to-help",className:"sr-only",children:"Seleccione la fecha de fin para el filtro personalizado"})]})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"text-sm text-gray-600",children:["Mostrando ",W.length," de ",n.length," notas",g&&` (filtradas por "${g}")`,x!=="all"&&r.jsxs("span",{children:[x==="today"&&" (hoy)",x==="week"&&" (esta semana)",x==="month"&&" (este mes)",x==="custom"&&" (rango personalizado)"]})]}),(g||y!=="all"||x!=="all")&&r.jsx("button",{onClick:()=>{j(""),w("all"),p("all"),N(""),C("")},className:"text-sm text-blue-600 hover:text-blue-800 underline","aria-label":"Limpiar todos los filtros aplicados",children:"Limpiar filtros"})]})]}),W.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No hay notas"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Aún no se han agregado notas a este expediente."})]}):r.jsx("div",{className:"space-y-4",children:W.map(E=>r.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:d===E.id?r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:`edit-note-title-${E.id}`,className:"block text-sm font-medium text-gray-700 mb-1",children:"Título de la nota"}),r.jsx("input",{id:`edit-note-title-${E.id}`,type:"text",value:m.title,onChange:R=>h({...m,title:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Título de la nota","aria-describedby":`edit-note-title-help-${E.id}`}),r.jsx("div",{id:`edit-note-title-help-${E.id}`,className:"sr-only",children:"Edite el título de la nota"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:`edit-note-content-${E.id}`,className:"block text-sm font-medium text-gray-700 mb-1",children:"Contenido de la nota"}),r.jsx("textarea",{id:`edit-note-content-${E.id}`,value:m.content,onChange:R=>h({...m,content:R.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Contenido de la nota","aria-describedby":`edit-note-content-help-${E.id}`}),r.jsx("div",{id:`edit-note-content-help-${E.id}`,className:"sr-only",children:"Edite el contenido de la nota"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>V(E.id),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700","aria-label":"Guardar cambios en la nota","aria-describedby":`save-edit-help-${E.id}`,children:"Guardar"}),r.jsx("button",{onClick:()=>u(null),className:"px-3 py-1 bg-gray-200 text-gray-700 text-sm rounded-md hover:bg-gray-300","aria-label":"Cancelar edición de la nota","aria-describedby":`cancel-edit-help-${E.id}`,children:"Cancelar"}),r.jsx("div",{id:`save-edit-help-${E.id}`,className:"sr-only",children:"Confirmar los cambios realizados en la nota"}),r.jsx("div",{id:`cancel-edit-help-${E.id}`,className:"sr-only",children:"Descartar los cambios y volver a la vista normal de la nota"})]})]}):r.jsx("div",{children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:E.title}),E.isPrivate&&r.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Privada"})]}),r.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:E.content}),r.jsxs("div",{className:"mt-3 flex items-center gap-4 text-sm text-gray-500",children:[r.jsxs("span",{children:["Por: ",E.author.name]}),r.jsx("span",{children:"•"}),r.jsx("span",{children:Y(E.createdAt)})]})]}),r.jsxs("div",{className:"flex gap-2 ml-4",children:[I(E)&&r.jsx("button",{onClick:()=>B(E),className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 text-sm font-medium","aria-label":"Editar nota","aria-describedby":`edit-note-help-${E.id}`,children:"Editar"}),q(E)&&r.jsx("button",{onClick:()=>A(E.id),className:"px-3 py-1 bg-red-100 text-red-700 rounded-md hover:bg-red-200 text-sm font-medium","aria-label":"Eliminar nota","aria-describedby":`delete-note-help-${E.id}`,children:"Eliminar"}),r.jsx("div",{id:`edit-note-help-${E.id}`,className:"sr-only",children:"Modificar el contenido de esta nota"}),r.jsx("div",{id:`delete-note-help-${E.id}`,className:"sr-only",children:"Eliminar permanentemente esta nota del expediente"})]})]})})},E.id))})]})},gx=({onFileSelect:e,maxFiles:t=5,maxSize:s=5*1024*1024,acceptedTypes:n=[".pdf",".txt",".csv",".doc",".docx",".jpg",".jpeg",".png",".gif",".webp"],disabled:a=!1})=>{const[i,o]=f.useState(!1),[l,c]=f.useState(null),d=f.useRef(null),u=x=>{const p=[],v=[];return x.length>t&&v.push(`No se pueden subir más de ${t} archivos`),Array.from(x).forEach(N=>{var C;N.size>s&&v.push(`${N.name} excede el tamaño máximo de ${s/(1024*1024)}MB`);const b="."+((C=N.name.split(".").pop())==null?void 0:C.toLowerCase());n.includes(b)||v.push(`${N.name} no es un tipo de archivo permitido`),N.size===0&&v.push(`${N.name} está vacío`),v.length===0&&p.push(N)}),v.length>0?(c(v.join(", ")),[]):(c(null),p)},m=x=>{console.log("FileUpload: handleFiles called with",x.length,"files"),console.log("FileUpload: File names:",Array.from(x).map(v=>v.name));const p=u(x);p.length>0&&(console.log("FileUpload: Valid files to send:",p.map(v=>v.name)),e(p)),d.current&&(d.current.value="")},h=x=>{x.preventDefault(),x.stopPropagation(),x.type==="dragenter"||x.type==="dragover"?o(!0):x.type==="dragleave"&&o(!1)},g=x=>{x.preventDefault(),x.stopPropagation(),o(!1),x.dataTransfer.files&&x.dataTransfer.files[0]&&m(x.dataTransfer.files)},j=x=>{x.preventDefault(),x.target.files&&x.target.files[0]&&m(x.target.files)},y=x=>{x.preventDefault(),x.stopPropagation(),d.current&&!a&&d.current.click()},w=x=>{x.preventDefault(),x.stopPropagation(),a||y(x)};return r.jsxs("div",{className:"w-full",children:[r.jsx("input",{ref:d,type:"file",multiple:!0,accept:n.join(","),"aria-label":"Seleccionar archivos para subir",title:"Seleccionar archivos para subir",placeholder:"Selecciona archivos",onChange:j,className:"hidden",disabled:a,style:{display:"none"}}),r.jsx("div",{className:`relative border-2 border-dashed rounded-lg p-6 text-center ${i?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"} ${a?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,onDragEnter:h,onDragLeave:h,onDragOver:h,onDrop:g,onClick:w,"aria-label":"Área de carga de archivos",children:r.jsxs("div",{className:"space-y-2",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:r.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),r.jsxs("div",{className:"text-gray-600",children:[r.jsx("span",{className:"font-medium",children:"Haz clic para subir"})," o arrastra y suelta"]}),r.jsxs("p",{className:"text-xs text-gray-500",children:["PDF, TXT, CSV, DOC, DOCX, JPG, PNG, GIF, WEBP hasta ",s/(1024*1024),"MB"]}),r.jsxs("p",{className:"text-xs text-gray-500",children:["Máximo ",t," archivos"]})]})}),l&&r.jsx("div",{className:"mt-2 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md p-2",children:l})]})},Cv=()=>{const{id:e}=Eu(),t=Yt(),{user:s}=Ce(),[n,a]=f.useState(null),[i,o]=f.useState(!0),[l,c]=f.useState(null),[d,u]=f.useState(!1),[m,h]=f.useState(!1),[g,j]=f.useState([]),[y,w]=f.useState(!1),[x,p]=f.useState(null),[v,N]=f.useState({description:""});f.useEffect(()=>{(async()=>{var q,Y;if(e)try{o(!0);const M=await K.get(`/cases/${e}`);a(M.data),c(null)}catch(M){console.error("Error fetching case:",M),c(((Y=(q=M.response)==null?void 0:q.data)==null?void 0:Y.message)||"Error al cargar el expediente")}finally{o(!1)}})()},[e]);const b=async I=>{if(n)try{u(!0),await K.patch(`/cases/${e}/status`,{status:I}),a(q=>q?{...q,status:I}:null)}catch(q){console.error("Error updating status:",q),c("Error al actualizar el estado del expediente")}finally{u(!1)}},C=I=>{switch(I){case"ABIERTO":return"bg-green-100 text-green-800";case"EN_PROCESO":return"bg-yellow-100 text-yellow-800";case"CERRADO":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},S=I=>{switch(I){case"ABIERTO":return"Abierto";case"EN_PROCESO":return"En Proceso";case"CERRADO":return"Cerrado";default:return I}},k=I=>{console.log("handleFileSelect called with:",I.length,"files"),console.log("Files:",I.map(Y=>Y.name));const q=I.filter((Y,M,W)=>M===W.findIndex(E=>E.name===Y.name&&E.size===Y.size));q.length!==I.length&&console.warn("Se encontraron archivos duplicados, eliminando..."),j(q)},D=()=>{j([])},L=()=>{h(!0),p(null),j([])},T=()=>{h(!1),j([]),N({description:""}),p(null)},B=async()=>{var I,q,Y;if(g.length===0){p("Por favor selecciona archivos para subir");return}try{w(!0),p(null);const M=g.map(R=>{const $=new FormData;return $.append("file",R),$.append("expedienteId",n.id),v.description&&$.append("description",v.description),K.post("/documents/upload",$,{headers:{"Content-Type":"multipart/form-data"}})});console.log("Subiendo archivos...");const W=await Promise.all(M);console.log("Resultados de subida:",W.map(R=>R.data));const E=await K.get(`/cases/${e}`);a(E.data),T()}catch(M){console.error("Error uploading files:",M),console.error("Error response:",(I=M.response)==null?void 0:I.data),p(((Y=(q=M.response)==null?void 0:q.data)==null?void 0:Y.message)||"Error al subir los archivos")}finally{w(!1)}},V=async(I,q)=>{try{const Y=localStorage.getItem("token");if(!Y){p("No hay token de autenticación. Por favor, inicia sesión de nuevo.");return}const M=await fetch(`${Ii()}/api/documents/file/${I}`,{headers:{Authorization:`Bearer ${Y}`}});if(!M.ok)throw new Error(`Error ${M.status}: ${M.statusText}`);const W=await M.blob(),E=window.URL.createObjectURL(W),R=document.createElement("a");R.href=E,R.download=q,document.body.appendChild(R),R.click(),R.remove(),window.URL.revokeObjectURL(E)}catch(Y){console.error("Error viewing document:",Y),p(Y.message||"Error al visualizar el documento")}},A=I=>{if(I===0)return"0 Bytes";const q=1024,Y=["Bytes","KB","MB","GB"],M=Math.floor(Math.log(I)/Math.log(q));return parseFloat((I/Math.pow(q,M)).toFixed(2))+" "+Y[M]};return i?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):l||!n?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-red-600 text-xl mb-4",children:"Error"}),r.jsx("div",{className:"text-gray-600",children:l||"Expediente no encontrado"}),r.jsx("button",{onClick:()=>t("/lawyer/cases"),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700","aria-label":"Volver a la lista de expedientes","aria-describedby":"volver-lista-help",children:"Volver a Expedientes"}),r.jsx("div",{id:"volver-lista-help",className:"sr-only",children:"Regresar a la página principal de expedientes"})]})}):r.jsxs("div",{className:"py-6",children:[r.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("button",{onClick:()=>t("/lawyer/cases"),className:"text-gray-400 hover:text-gray-600","aria-label":"Volver a Expedientes",title:"Volver a Expedientes",type:"button","aria-describedby":"volver-expedientes-help",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),r.jsx("div",{id:"volver-expedientes-help",className:"sr-only",children:"Regresar a la lista de expedientes"}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:n.title})]}),r.jsxs("p",{className:"mt-2 text-gray-600",children:["Expediente creado el ",new Date(n.createdAt).toLocaleDateString()]})]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsx(Ne,{to:`/lawyer/cases/${e}/edit`,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2","aria-label":"Editar expediente","aria-describedby":"edit-expediente-help",children:"Editar"}),r.jsx("div",{id:"edit-expediente-help",className:"sr-only",children:"Ir a la página de edición del expediente"})]})]})}),r.jsxs("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Acciones Rápidas"}),r.jsx(MN,{expedienteId:n.id,expedienteData:n})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[r.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Estado del Expediente"}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${C(n.status)}`,children:S(n.status)}),((s==null?void 0:s.role)==="ABOGADO"||(s==null?void 0:s.role)==="ADMIN")&&r.jsxs(r.Fragment,{children:[r.jsx("label",{htmlFor:"status-select",className:"sr-only",children:"Cambiar estado del expediente"}),r.jsxs("select",{id:"status-select",value:n.status,onChange:I=>b(I.target.value),disabled:d,className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",title:"Cambiar estado del expediente","aria-label":"Cambiar estado del expediente","aria-describedby":"status-select-help",children:[r.jsx("option",{value:"ABIERTO",children:"Abierto"}),r.jsx("option",{value:"EN_PROCESO",children:"En Proceso"}),r.jsx("option",{value:"CERRADO",children:"Cerrado"})]}),r.jsx("div",{id:"status-select-help",className:"sr-only",children:"Seleccione el nuevo estado del expediente"})]})]})]}),r.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Descripción"}),r.jsx("p",{className:"text-gray-700",children:n.description||"No hay descripción disponible para este expediente."})]}),r.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Documentos"}),r.jsx("button",{onClick:L,className:"px-3 py-1 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700","aria-label":"Subir documento al expediente","aria-describedby":"upload-document-help",children:"Subir Documento"}),r.jsx("div",{id:"upload-document-help",className:"sr-only",children:"Haga clic para subir un nuevo documento al expediente"})]}),n.documents.length>0?r.jsx("div",{className:"space-y-3",children:n.documents.map(I=>r.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-md",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:I.filename}),r.jsxs("p",{className:"text-xs text-gray-500",children:["Subido el ",new Date(I.uploadedAt).toLocaleDateString()]})]})]}),r.jsx("button",{onClick:()=>V(I.id,I.originalName),className:"text-blue-600 hover:text-blue-800 text-sm bg-transparent border-none cursor-pointer","aria-label":`Ver documento ${I.originalName}`,"aria-describedby":`doc-help-${I.id}`,children:"Ver"}),r.jsx("div",{id:`doc-help-${I.id}`,className:"sr-only",children:"Abrir documento en una nueva pestaña"})]},I.id))}):r.jsx("p",{className:"text-gray-500 text-center py-4",children:"No hay documentos subidos aún."})]}),r.jsx(X5,{expedienteId:n.id})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Información del Cliente"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Nombre"}),r.jsx("p",{className:"text-sm text-gray-900",children:n.client.user.name})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Email"}),r.jsx("p",{className:"text-sm text-gray-900",children:n.client.user.email})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"DNI"}),r.jsx("p",{className:"text-sm text-gray-900",children:n.client.dni})]}),n.client.phone&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Teléfono"}),r.jsx("p",{className:"text-sm text-gray-900",children:n.client.phone})]}),n.client.address&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Dirección"}),r.jsx("p",{className:"text-sm text-gray-900",children:n.client.address})]})]})]}),r.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Abogado Asignado"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Nombre"}),r.jsx("p",{className:"text-sm text-gray-900",children:n.lawyer.name})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Email"}),r.jsx("p",{className:"text-sm text-gray-900",children:n.lawyer.email})]})]})]})]})]})]}),m&&r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:r.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:r.jsxs("div",{className:"mt-3",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Subir Documentos"}),x&&r.jsx("div",{className:"mb-4 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md p-2",children:x}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripción (opcional)"}),r.jsx("textarea",{value:v.description,onChange:I=>N(q=>({...q,description:I.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Descripción del documento..."})]}),r.jsx(gx,{onFileSelect:k,maxFiles:5,maxSize:5*1024*1024}),g.length>0&&r.jsxs("div",{className:"mt-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Archivos seleccionados:"}),r.jsx("button",{onClick:D,className:"text-sm text-red-600 hover:text-red-800",children:"Limpiar"})]}),r.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:g.map((I,q)=>r.jsxs("li",{children:[I.name," (",A(I.size),")"]},q))})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[r.jsx("button",{onClick:T,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Cancelar"}),r.jsx("button",{onClick:B,disabled:y||g.length===0,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:y?"Subiendo...":"Subir Documentos"})]})]})})})]})},Q5=()=>{const[e,t]=f.useState([]),[s,n]=f.useState(!0),[a,i]=f.useState(null),{user:o}=Ce();if(f.useEffect(()=>{(async()=>{try{n(!0);const d=await K.get("/cases"),u=Array.isArray(d.data)?d.data:[];t(u),i(null)}catch(d){console.error("Error fetching cases:",d),i("Error al cargar los expedientes"),t([])}finally{n(!1)}})()},[]),s)return r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})});if(a)return r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-red-600 text-xl mb-4",children:"Error"}),r.jsx("div",{className:"text-gray-600",children:a}),r.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Reintentar"})]})});const l=Array.isArray(e)?e:[];return r.jsx("div",{className:"py-6",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mis Expedientes"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Revisa el estado de tus casos legales"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(c=>{var d;return r.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:c.title}),r.jsx("p",{className:"text-gray-600 text-sm mb-4",children:c.description||"Sin descripción disponible"}),r.jsxs("div",{className:"text-sm text-gray-500 mb-4",children:["Abogado: ",((d=c.lawyer)==null?void 0:d.name)||"No asignado"]}),r.jsx(Ne,{to:`/client/cases/${c.id}`,className:"px-3 py-2 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700",children:"Ver Detalles"})]},c.id)})}),l.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"No se encontraron expedientes"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Aún no tienes expedientes asignados."})]})]})})},J5=({isOpen:e,onClose:t,lawyer:s,expedienteId:n,expedienteTitle:a})=>{const[i,o]=f.useState({asunto:"",mensaje:""}),[l,c]=f.useState([]),[d,u]=f.useState(!1),[m,h]=f.useState("idle"),g=f.useRef(null),j=N=>{const{name:b,value:C}=N.target;o(S=>({...S,[b]:C}))},y=N=>{const C=Array.from(N.target.files||[]).filter(D=>D.size>5*1024*1024?(alert(`El archivo "${D.name}" excede el tamaño máximo de 5MB`),!1):!0),S=["text/plain","image/jpeg","image/png","image/gif","application/pdf"],k=C.filter(D=>S.includes(D.type)?!0:(alert(`El archivo "${D.name}" no es un tipo de archivo permitido. Solo se permiten: texto, imágenes y PDF`),!1));c(D=>[...D,...k])},w=N=>{c(b=>b.filter((C,S)=>S!==N))},x=async N=>{N.preventDefault(),u(!0),h("idle");try{const b=new FormData;b.append("asunto",i.asunto),b.append("mensaje",i.mensaje),s!=null&&s.id&&b.append("lawyerId",s.id),b.append("expedienteId",n),b.append("expedienteTitle",a),l.forEach((S,k)=>{b.append("files",S)});const C=await K.post("/contact/lawyer",b,{headers:{"Content-Type":"multipart/form-data"}});if(C.status===200||C.status===201)h("success"),o({asunto:"",mensaje:""}),c([]),setTimeout(()=>{t(),h("idle")},2e3);else throw new Error("Error en el servidor")}catch(b){console.error("Error al enviar mensaje:",b),h("error")}finally{u(!1)}},p=N=>{if(N===0)return"0 Bytes";const b=1024,C=["Bytes","KB","MB","GB"],S=Math.floor(Math.log(N)/Math.log(b));return parseFloat((N/Math.pow(b,S)).toFixed(2))+" "+C[S]},v=N=>N.startsWith("image/")?"🖼️":N==="application/pdf"?"📄":N==="text/plain"?"📝":"📎";return r.jsx(Io,{isOpen:e,onClose:t,title:"Contactar Abogado",description:`Envíe un mensaje a ${(s==null?void 0:s.name)||"su abogado"} sobre el expediente "${a}"`,size:"xl",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-blue-50 rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-4",children:"Información del Abogado"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-blue-600 font-semibold",children:s!=null&&s.name?s.name.split(" ").map(N=>N[0]).join(""):"AB"})})}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-blue-900",children:"Abogado Asignado"}),r.jsx("p",{className:"text-sm text-blue-700 mt-1",children:(s==null?void 0:s.name)||"Abogado no asignado"})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:r.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})})}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Email"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:(s==null?void 0:s.email)||"Email no disponible"})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:r.jsx("svg",{className:"w-4 h-4 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Expediente"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:a}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["ID: ",n]})]})]})]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Tipos de Archivos Permitidos"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("span",{className:"text-lg",children:"📄"}),r.jsx("span",{className:"text-sm text-gray-700",children:"Documentos PDF"})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("span",{className:"text-lg",children:"🖼️"}),r.jsx("span",{className:"text-sm text-gray-700",children:"Imágenes (JPG, PNG, GIF)"})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("span",{className:"text-lg",children:"📝"}),r.jsx("span",{className:"text-sm text-gray-700",children:"Archivos de texto"})]}),r.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:r.jsxs("p",{className:"text-sm text-yellow-800",children:[r.jsx("strong",{children:"Tamaño máximo:"})," 5MB por archivo"]})})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Enviar Mensaje"}),r.jsxs("form",{onSubmit:x,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"asunto",className:"block text-sm font-medium text-gray-700 mb-1",children:"Asunto *"}),r.jsxs("select",{id:"asunto",name:"asunto",value:i.asunto,onChange:j,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500","aria-describedby":"asunto-help",children:[r.jsx("option",{value:"",children:"Selecciona un asunto"}),r.jsx("option",{value:"Consulta sobre expediente",children:"Consulta sobre expediente"}),r.jsx("option",{value:"Solicitud de información",children:"Solicitud de información"}),r.jsx("option",{value:"Documentación adicional",children:"Documentación adicional"}),r.jsx("option",{value:"Actualización de estado",children:"Actualización de estado"}),r.jsx("option",{value:"Programación de cita",children:"Programación de cita"}),r.jsx("option",{value:"Otro",children:"Otro"})]}),r.jsx("div",{id:"asunto-help",className:"sr-only",children:"Seleccione el tipo de asunto para su mensaje"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"mensaje",className:"block text-sm font-medium text-gray-700 mb-1",children:"Mensaje *"}),r.jsx("textarea",{id:"mensaje",name:"mensaje",value:i.mensaje,onChange:j,required:!0,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Escriba su mensaje aquí...","aria-describedby":"mensaje-help"}),r.jsx("div",{id:"mensaje-help",className:"sr-only",children:"Escriba el contenido de su mensaje para el abogado"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"file-upload",className:"block text-sm font-medium text-gray-700 mb-1",children:"Adjuntar Archivos (opcional)"}),r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-md p-4 text-center",children:[r.jsx("input",{ref:g,id:"file-upload",type:"file",multiple:!0,accept:".txt,.pdf,.jpg,.jpeg,.png,.gif",onChange:y,className:"hidden","aria-describedby":"file-upload-help"}),r.jsx("button",{type:"button",onClick:()=>{var N;return(N=g.current)==null?void 0:N.click()},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2","aria-label":"Seleccionar archivos para adjuntar",children:"Seleccionar Archivos"}),r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Arrastra archivos aquí o haz clic para seleccionar"}),r.jsx("div",{id:"file-upload-help",className:"sr-only",children:"Seleccione archivos para adjuntar al mensaje. Tipos permitidos: PDF, imágenes y archivos de texto. Tamaño máximo: 5MB por archivo."})]})]}),l.length>0&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Archivos seleccionados:"}),r.jsx("div",{className:"space-y-2",children:l.map((N,b)=>r.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-md",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-lg",children:v(N.type)}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:N.name}),r.jsx("p",{className:"text-xs text-gray-500",children:p(N.size)})]})]}),r.jsx("button",{type:"button",onClick:()=>w(b),className:"text-red-600 hover:text-red-800","aria-label":`Eliminar archivo ${N.name}`,children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},b))})]}),m==="success"&&r.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md",role:"alert","aria-live":"polite",children:r.jsx("p",{className:"text-green-600 text-sm",children:"¡Mensaje enviado con éxito! Su abogado se pondrá en contacto con usted pronto."})}),m==="error"&&r.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",role:"alert","aria-live":"polite",children:r.jsx("p",{className:"text-red-600 text-sm",children:"Ha ocurrido un error al enviar su mensaje. Por favor, inténtelo de nuevo."})}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2","aria-label":"Cancelar envío de mensaje",children:"Cancelar"}),r.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Enviar mensaje al abogado",children:d?"Enviando...":"Enviar Mensaje"})]})]})]})]})})},Z5=()=>{const{id:e}=Eu(),t=Yt(),[s,n]=f.useState(null),[a,i]=f.useState(!0),[o,l]=f.useState(null),[c,d]=f.useState(!1);f.useEffect(()=>{(async()=>{var v,N,b,C,S,k,D,L;if(e)try{i(!0);const T=localStorage.getItem("token");console.log("🔍 Fetching case with ID:",e);const B=await K.get(`/cases/${e}`);if(console.log("📊 Response status:",B.status),console.log("📊 Response headers:",B.headers),console.log("📊 Case data received:",B.data),typeof B.data=="string"&&B.data.includes("<!DOCTYPE html>"))throw new Error("El servidor está devolviendo HTML en lugar de datos JSON. Esto indica un problema de configuración del API.");n(B.data),l(null)}catch(T){console.error("❌ Error fetching case:",T),console.error("❌ Error response:",(v=T.response)==null?void 0:v.data),console.error("❌ Error status:",(N=T.response)==null?void 0:N.status);let B="Error al cargar el expediente";((b=T.response)==null?void 0:b.status)===404?B="Expediente no encontrado":((C=T.response)==null?void 0:C.status)===401?B="No autorizado para ver este expediente":((S=T.response)==null?void 0:S.status)===403?B="No tienes permisos para ver este expediente":(k=T.message)!=null&&k.includes("HTML")?B="Error de configuración del servidor. El backend no está respondiendo correctamente.":(L=(D=T.response)==null?void 0:D.data)!=null&&L.message&&(B=T.response.data.message),l(B)}finally{i(!1)}})()},[e]);const u=p=>{switch(p){case"ABIERTO":return"bg-green-100 text-green-800";case"EN_PROCESO":return"bg-yellow-100 text-yellow-800";case"CERRADO":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},m=p=>{switch(p){case"ABIERTO":return"Abierto";case"EN_PROCESO":return"En Proceso";case"CERRADO":return"Cerrado";default:return p}},h=p=>{try{const v=new Date(p);return isNaN(v.getTime())?"Fecha no disponible":v.toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})}catch(v){return console.error("Error formatting date:",p,v),"Fecha no disponible"}},g=()=>{var p;(p=s==null?void 0:s.lawyer)!=null&&p.email?d(!0):alert("No hay información de contacto del abogado disponible.")},j=async(p,v)=>{try{const N=localStorage.getItem("token");if(!N){alert("No hay token de autenticación. Por favor, inicia sesión de nuevo.");return}console.log(`🔍 Intentando visualizar documento: ${p} - ${v}`);const b=await fetch(`${Ii()}/api/documents/file/${p}`,{headers:{Authorization:`Bearer ${N}`}});if(!b.ok){let q=`Error ${b.status}: ${b.statusText}`;try{const Y=await b.json();Y.message&&(q=Y.message),Y.errorDetails&&(q+=` - ${Y.errorDetails}`)}catch{}throw new Error(q)}console.log("✅ Documento recibido correctamente, creando blob...");const C=await b.blob(),S=window.URL.createObjectURL(C),k=v.toLowerCase().split(".").pop()||"",D=["jpg","jpeg","png","gif","webp","bmp","svg"].includes(k),L=k==="pdf",T=["txt","md","log","csv"].includes(k),B=["js","ts","jsx","tsx","html","css","json","xml","py","java","cpp","c","php"].includes(k),V=["docx","doc","odt","rtf"].includes(k),A=["xlsx","xls","ods"].includes(k),I=["pptx","ppt","odp"].includes(k);if(D||L)window.open(S,"_blank");else if(T||B)try{const q=await C.text();w(v,q,k)}catch(q){console.warn("No se pudo leer como texto, descargando...",q),y(S,v)}else if(V||A||I){const q=`https://docs.google.com/viewer?url=${encodeURIComponent(window.location.origin+"/api/documents/file/"+p)}&embedded=true`;window.open(q,"_blank")}else y(S,v);setTimeout(()=>window.URL.revokeObjectURL(S),5e3),console.log(`✅ Documento procesado exitosamente: ${v}`)}catch(N){console.error("❌ Error viewing document:",N);let b="Error al visualizar el documento";N.message&&(N.message.includes("401")?b="No autorizado para ver este documento. Por favor, inicia sesión de nuevo.":N.message.includes("403")?b="No tienes permisos para ver este documento.":N.message.includes("404")?b="El documento no se encuentra en el servidor.":N.message.includes("500")?b="Error interno del servidor al procesar el documento.":b=N.message),alert(b)}},y=(p,v)=>{const N=document.createElement("a");N.href=p,N.download=v,N.style.display="none",document.body.appendChild(N),N.click(),N.remove()},w=(p,v,N)=>{const b=document.createElement("div");b.className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50";const S={js:"javascript",ts:"typescript",jsx:"javascript",tsx:"typescript",html:"html",css:"css",json:"json",xml:"xml",py:"python",java:"java",cpp:"cpp",c:"c",php:"php",md:"markdown"}[N]||"text";b.innerHTML=`
      <div class="bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden">
        <div class="flex items-center justify-between p-4 border-b bg-gray-50">
          <div class="flex items-center space-x-2">
            <span class="text-lg font-semibold">📄 ${p}</span>
            <span class="px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded">${N.toUpperCase()}</span>
          </div>
          <div class="flex space-x-2">
            <button class="px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700" onclick="this.closest('.fixed').querySelector('.download-btn').click()">
              💾 Descargar
            </button>
            <button class="px-3 py-1 text-sm bg-gray-500 text-white rounded hover:bg-gray-600" onclick="this.closest('.fixed').remove()">
              ✕ Cerrar
            </button>
          </div>
        </div>
        <div class="p-4 overflow-auto max-h-[calc(90vh-80px)]">
          <pre class="bg-gray-900 text-green-400 p-4 rounded text-sm overflow-x-auto"><code class="language-${S}">${x(v)}</code></pre>
        </div>
        <a href="#" class="download-btn hidden" download="${p}"></a>
      </div>
    `;const k=document.createElement("style");k.textContent=`
      .fixed { position: fixed !important; }
      .inset-0 { top: 0; right: 0; bottom: 0; left: 0; }
      .bg-black { background-color: rgba(0, 0, 0, 0.5); }
      .bg-opacity-50 { background-color: rgba(0, 0, 0, 0.5); }
      .flex { display: flex; }
      .items-center { align-items: center; }
      .justify-center { justify-content: center; }
      .z-50 { z-index: 50; }
      .bg-white { background-color: white; }
      .rounded-lg { border-radius: 0.5rem; }
      .shadow-xl { box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); }
      .max-w-4xl { max-width: 56rem; }
      .w-full { width: 100%; }
      .mx-4 { margin-left: 1rem; margin-right: 1rem; }
      .max-h-\\[90vh\\] { max-height: 90vh; }
      .overflow-hidden { overflow: hidden; }
      .p-4 { padding: 1rem; }
      .border-b { border-bottom-width: 1px; }
      .bg-gray-50 { background-color: #f9fafb; }
      .text-lg { font-size: 1.125rem; }
      .font-semibold { font-weight: 600; }
      .space-x-2 > * + * { margin-left: 0.5rem; }
      .px-2 { padding-left: 0.5rem; padding-right: 0.5rem; }
      .py-1 { padding-top: 0.25rem; padding-bottom: 0.25rem; }
      .text-xs { font-size: 0.75rem; }
      .bg-blue-100 { background-color: #dbeafe; }
      .text-blue-800 { color: #1e40af; }
      .rounded { border-radius: 0.25rem; }
      .space-x-2 > * + * { margin-left: 0.5rem; }
      .text-sm { font-size: 0.875rem; }
      .bg-blue-600 { background-color: #2563eb; }
      .text-white { color: white; }
      .hover\\:bg-blue-700:hover { background-color: #1d4ed8; }
      .bg-gray-500 { background-color: #6b7280; }
      .hover\\:bg-gray-600:hover { background-color: #4b5563; }
      .overflow-auto { overflow: auto; }
      .max-h-\\[calc\\(90vh-80px\\)\\] { max-height: calc(90vh - 80px); }
      .bg-gray-900 { background-color: #111827; }
      .text-green-400 { color: #4ade80; }
      .text-sm { font-size: 0.875rem; }
      .overflow-x-auto { overflow-x: auto; }
      .hidden { display: none; }
    `,document.head.appendChild(k),document.body.appendChild(b),b.addEventListener("click",D=>{D.target===b&&b.remove()}),document.addEventListener("keydown",D=>{D.key==="Escape"&&b.remove()})},x=p=>{const v=document.createElement("div");return v.textContent=p,v.innerHTML};return console.log("Render state:",{loading:a,error:o,caseData:s}),a?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):o||!s?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-red-600 text-xl mb-4",children:"Error"}),r.jsx("div",{className:"text-gray-600",children:o||"Expediente no encontrado"}),r.jsx("button",{onClick:()=>t("/client/cases"),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Volver a Expedientes"})]})}):r.jsxs("div",{className:"min-h-screen bg-gray-50 mobile-scroll-container",children:[r.jsxs("div",{className:"container-responsive py-4 sm:py-6 lg:py-8",children:[r.jsx("div",{className:"mb-6 sm:mb-8",children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-3 sm:space-y-0 sm:space-x-4",children:[r.jsx("button",{onClick:()=>t("/client/cases"),className:"self-start sm:self-center text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Volver a Expedientes",title:"Volver a Expedientes",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h1",{className:"responsive-heading text-gray-900 break-words",children:s.title}),r.jsxs("p",{className:"mt-1 responsive-text text-gray-600",children:["Expediente creado el ",h(s.createdAt)]})]})]})}),r.jsx("div",{className:"mb-6 sm:mb-8",children:r.jsx(MN,{expedienteId:s.id,expedienteData:s})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6 lg:gap-8",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-4 sm:space-y-6",children:[r.jsxs("div",{className:"responsive-card",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 space-y-2 sm:space-y-0",children:[r.jsx("h2",{className:"responsive-text font-semibold text-gray-900",children:"Estado del Expediente"}),r.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${u(s.status)} self-start sm:self-center`,children:m(s.status)})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("p",{className:"responsive-text text-gray-700",children:s.description||"No hay descripción disponible para este expediente."}),r.jsxs("p",{className:"text-sm text-gray-600",children:[s.status==="ABIERTO"&&"Tu caso está siendo revisado por nuestro equipo legal.",s.status==="EN_PROCESO"&&"Tu caso está en proceso activo. Nuestro abogado está trabajando en él.",s.status==="CERRADO"&&"Tu caso ha sido completado y cerrado."]})]})]}),r.jsxs("div",{className:"responsive-card",children:[r.jsx("h2",{className:"responsive-text font-semibold text-gray-900 mb-4",children:"Documentos del Caso"}),s.documents&&Array.isArray(s.documents)&&s.documents.length>0?r.jsx("div",{className:"space-y-3",children:s.documents.map(p=>r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between p-3 border border-gray-200 rounded-md space-y-2 sm:space-y-0",children:[r.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[r.jsx("svg",{className:"w-5 h-5 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:p.originalName||p.filename}),r.jsxs("p",{className:"text-xs text-gray-500",children:["Subido el ",h(p.uploadedAt)]})]})]}),r.jsx("button",{onClick:()=>j(p.id,p.originalName),className:"responsive-button text-blue-600 hover:text-blue-800 bg-blue-50 hover:bg-blue-100 rounded-md transition-colors self-start sm:self-center","aria-label":`Ver documento ${p.originalName}`,children:"Descargar"})]},p.id))}):r.jsx("p",{className:"text-gray-500 text-center py-4",children:"No hay documentos disponibles aún."})]})]}),r.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[r.jsxs("div",{className:"responsive-card",children:[r.jsx("h2",{className:"responsive-text font-semibold text-gray-900 mb-4",children:"Abogado Asignado"}),s.lawyer?r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0",children:r.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-medium text-gray-900 truncate",children:s.lawyer.name}),r.jsx("p",{className:"text-sm text-gray-600 truncate",children:s.lawyer.email})]})]}),r.jsx("button",{onClick:g,className:"w-full responsive-button bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",children:"Contactar Abogado"})]}):r.jsx("p",{className:"text-gray-500",children:"No hay abogado asignado aún."})]}),r.jsxs("div",{className:"responsive-card",children:[r.jsx("h2",{className:"responsive-text font-semibold text-gray-900 mb-4",children:"Información del Caso"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-700",children:"ID del Expediente"}),r.jsx("p",{className:"text-xs sm:text-sm text-gray-900 font-mono break-all",children:s.id})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Estado"}),r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${u(s.status)}`,children:m(s.status)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Fecha de Creación"}),r.jsx("p",{className:"text-sm text-gray-900",children:h(s.createdAt)})]})]})]})]})]})]}),c&&s.lawyer&&r.jsx(J5,{isOpen:c,lawyer:s.lawyer,expedienteId:s.id,expedienteTitle:s.title,onClose:()=>d(!1)})]})},e6={backendUrl:"https://experimento2-production-54c0.up.railway.app"},t6=()=>e6.backendUrl,r6=()=>{const[e,t]=f.useState([]),[s,n]=f.useState([]),[a,i]=f.useState(!0),[o,l]=f.useState(null),[c,d]=f.useState(""),[u,m]=f.useState("todos"),[h,g]=f.useState(null),[j,y]=f.useState(null),[w,x]=f.useState(!1),[p,v]=f.useState([]),[N,b]=f.useState(!1),[C,S]=f.useState({expedienteId:"",description:""}),[k,D]=f.useState([]),{user:L}=Ce();f.useEffect(()=>{(async()=>{try{i(!0);const O=localStorage.getItem("token"),[P,F,Q]=await Promise.all([K.get("/documents"),K.get("/documents/stats"),K.get("/cases")]);t(P.data),l(F.data),D(Q.data),g(null)}catch(O){console.error("Error fetching documents:",O),g("Error al cargar los documentos")}finally{i(!1)}})()},[]),f.useEffect(()=>{let _=Array.isArray(e)?e:[];c&&(_=_.filter(O=>{var P;return O.originalName.toLowerCase().includes(c.toLowerCase())||O.expediente.title.toLowerCase().includes(c.toLowerCase())||O.expediente.client.user.name.toLowerCase().includes(c.toLowerCase())||((P=O.description)==null?void 0:P.toLowerCase().includes(c.toLowerCase()))})),u!=="todos"&&(_=_.filter(O=>O.mimeType===u)),n(_)},[e,c,u]);const T=_=>{console.log("handleFileSelect called with:",_.length,"files"),console.log("Files:",_.map(P=>P.name)),console.log("Files details:",_.map(P=>({name:P.name,size:P.size,type:P.type})));const O=_.filter((P,F,Q)=>F===Q.findIndex(X=>X.name===P.name&&X.size===P.size));O.length!==_.length&&console.warn("Se encontraron archivos duplicados, eliminando..."),v(O)},B=()=>{v([])},V=()=>{b(!0),g(null),v([])},A=()=>{b(!1),v([]),S({expedienteId:"",description:""}),g(null)},I=async()=>{var _,O,P;if(p.length===0||!C.expedienteId){g("Por favor selecciona archivos y un expediente para el documento");return}try{x(!0),g(null);const F=localStorage.getItem("token"),Q=p.map(le=>{const ie=new FormData;return ie.append("file",le),ie.append("expedienteId",C.expedienteId),C.description&&ie.append("description",C.description),K.post("/documents/upload",ie)});console.log("Subiendo archivos...");const X=await Promise.all(Q);console.log("Resultados de subida:",X.map(le=>le.data)),console.log("Recargando documentos...");const re=await K.get("/documents");console.log("Documentos cargados:",re.data);const G=re.data.filter(le=>{const ie=le&&le.id&&le.originalName;return ie||console.warn("Documento inválido encontrado:",le),ie});t(G),A()}catch(F){console.error("Error uploading files:",F),console.error("Error response:",(_=F.response)==null?void 0:_.data),g(((P=(O=F.response)==null?void 0:O.data)==null?void 0:P.message)||"Error al subir los archivos")}finally{x(!1)}},q=async _=>{var O,P;if(confirm("¿Estás seguro de que quieres eliminar este documento?"))try{const F=localStorage.getItem("token");await K.delete(`/documents/${_}`),t(X=>X.filter(re=>re.id!==_)),g(null),y("Documento eliminado exitosamente"),setTimeout(()=>y(null),3e3);const Q=await K.get("/documents/stats");l(Q.data)}catch(F){console.error("Error deleting document:",F),g(((P=(O=F.response)==null?void 0:O.data)==null?void 0:P.message)||"Error al eliminar el documento")}},Y=_=>{if(_===0)return"0 Bytes";const O=1024,P=["Bytes","KB","MB","GB"],F=Math.floor(Math.log(_)/Math.log(O));return parseFloat((_/Math.pow(O,F)).toFixed(2))+" "+P[F]},M=_=>_.includes("pdf")?"📄":_.includes("image")?"🖼️":_.includes("text")?"📝":_.includes("word")?"📄":"📎",W=async(_,O)=>{try{const P=localStorage.getItem("token");if(!P){g("No hay token de autenticación. Por favor, inicia sesión de nuevo.");return}console.log(`🔍 Intentando visualizar documento: ${O} (ID: ${_})`);const F=await fetch(`${t6()}/api/documents/file/${_}`,{headers:{Authorization:`Bearer ${P}`}});if(console.log(`📡 Respuesta del servidor: ${F.status} ${F.statusText}`),!F.ok)throw F.status===404?new Error("Documento no encontrado en el servidor. Verifica que el archivo exista."):F.status===403?new Error("No tienes permisos para acceder a este documento."):new Error(`Error del servidor: ${F.status} ${F.statusText}`);console.log(`✅ Documento cargado exitosamente: ${O}`);const Q=await F.blob(),X=window.URL.createObjectURL(Q),re=O.toLowerCase().split(".").pop()||"",G=["jpg","jpeg","png","gif","webp","bmp","svg"].includes(re),le=re==="pdf",ie=["txt","md","log","csv"].includes(re),xe=["js","ts","jsx","tsx","html","css","json","xml","py","java","cpp","c","php"].includes(re),je=["docx","doc","odt","rtf"].includes(re),Pe=["xlsx","xls","ods"].includes(re),ee=["pptx","ppt","odp"].includes(re);if(console.log(`📁 Tipo de archivo detectado: ${re} (Imagen: ${G}, PDF: ${le}, Texto: ${ie}, Código: ${xe}, Documento: ${je})`),G||le)console.log(`🖼️ Abriendo ${G?"imagen":"PDF"} en nueva pestaña`),window.open(X,"_blank");else if(ie||xe){console.log("📝 Mostrando archivo de texto/código inline");try{const pe=await Q.text();R(O,pe,re)}catch(pe){console.warn("No se pudo leer como texto, descargando...",pe),E(X,O)}}else if(je||Pe||ee){console.log("📊 Abriendo documento de Office con Google Docs Viewer");const pe=`https://docs.google.com/viewer?url=${encodeURIComponent(window.location.origin+"/api/documents/file/"+_)}&embedded=true`;window.open(pe,"_blank")}else console.log("📥 Descargando archivo de tipo desconocido"),E(X,O);setTimeout(()=>window.URL.revokeObjectURL(X),5e3)}catch(P){console.error("❌ Error viewing document:",P);let F="Error al visualizar el documento";P.message.includes("Documento no encontrado")?F="El documento no se encuentra en el servidor. Puede haber sido eliminado o movido.":P.message.includes("No tienes permisos")?F="No tienes permisos para acceder a este documento.":P.message.includes("Error del servidor")?F="Error en el servidor. Intenta nuevamente más tarde.":(P.message.includes("network")||P.message.includes("fetch"))&&(F="Error de conexión. Verifica tu conexión a internet."),g(F)}},E=(_,O)=>{const P=document.createElement("a");P.href=_,P.download=O,document.body.appendChild(P),P.click(),document.body.removeChild(P)},R=(_,O,P)=>{const F=document.createElement("div");F.className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50";const X={js:"javascript",ts:"typescript",jsx:"javascript",tsx:"typescript",html:"html",css:"css",json:"json",xml:"xml",py:"python",java:"java",cpp:"cpp",c:"c",php:"php",md:"markdown"}[P]||"text";F.innerHTML=`
      <div class="bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden">
        <div class="flex items-center justify-between p-4 border-b bg-gray-50">
          <div class="flex items-center space-x-2">
            <span class="text-lg font-semibold">📄 ${_}</span>
            <span class="px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded">${P.toUpperCase()}</span>
          </div>
          <div class="flex space-x-2">
            <button class="px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700" onclick="this.closest('.fixed').querySelector('.download-btn').click()">
              💾 Descargar
            </button>
            <button class="px-3 py-1 text-sm bg-gray-500 text-white rounded hover:bg-gray-600" onclick="this.closest('.fixed').remove()">
              ✕ Cerrar
            </button>
          </div>
        </div>
        <div class="p-4 overflow-auto max-h-[calc(90vh-80px)]">
          <pre class="bg-gray-900 text-green-400 p-4 rounded text-sm overflow-x-auto"><code class="language-${X}">${$(O)}</code></pre>
        </div>
        <a href="#" class="download-btn hidden" download="${_}"></a>
      </div>
    `;const re=document.createElement("style");re.textContent=`
      .fixed { position: fixed !important; }
      .inset-0 { top: 0; right: 0; bottom: 0; left: 0; }
      .bg-black { background-color: rgba(0, 0, 0, 0.5); }
      .bg-opacity-50 { background-color: rgba(0, 0, 0, 0.5); }
      .flex { display: flex; }
      .items-center { align-items: center; }
      .justify-center { justify-content: center; }
      .z-50 { z-index: 50; }
      .bg-white { background-color: white; }
      .rounded-lg { border-radius: 0.5rem; }
      .shadow-xl { box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); }
      .max-w-4xl { max-width: 56rem; }
      .w-full { width: 100%; }
      .mx-4 { margin-left: 1rem; margin-right: 1rem; }
      .max-h-\\[90vh\\] { max-height: 90vh; }
      .overflow-hidden { overflow: hidden; }
      .p-4 { padding: 1rem; }
      .border-b { border-bottom-width: 1px; }
      .bg-gray-50 { background-color: #f9fafb; }
      .text-lg { font-size: 1.125rem; }
      .font-semibold { font-weight: 600; }
      .space-x-2 > * + * { margin-left: 0.5rem; }
      .px-2 { padding-left: 0.5rem; padding-right: 0.5rem; }
      .py-1 { padding-top: 0.25rem; padding-bottom: 0.25rem; }
      .text-xs { font-size: 0.75rem; }
      .bg-blue-100 { background-color: #dbeafe; }
      .text-blue-800 { color: #1e40af; }
      .rounded { border-radius: 0.25rem; }
      .space-x-2 > * + * { margin-left: 0.5rem; }
      .text-sm { font-size: 0.875rem; }
      .bg-blue-600 { background-color: #2563eb; }
      .text-white { color: white; }
      .hover\\:bg-blue-700:hover { background-color: #1d4ed8; }
      .bg-gray-500 { background-color: #6b7280; }
      .hover\\:bg-gray-600:hover { background-color: #4b5563; }
      .overflow-auto { overflow: auto; }
      .max-h-\\[calc\\(90vh-80px\\)\\] { max-height: calc(90vh - 80px); }
      .bg-gray-900 { background-color: #111827; }
      .text-green-400 { color: #4ade80; }
      .text-sm { font-size: 0.875rem; }
      .overflow-x-auto { overflow-x: auto; }
      .hidden { display: none; }
    `,document.head.appendChild(re),document.body.appendChild(F),F.addEventListener("click",G=>{G.target===F&&F.remove()}),document.addEventListener("keydown",G=>{G.key==="Escape"&&F.remove()})},$=_=>{const O=document.createElement("div");return O.textContent=_,O.innerHTML};return a?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):r.jsxs("div",{className:"py-6",children:[r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[j&&r.jsx("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-md",children:r.jsx("p",{className:"text-green-700 text-sm",children:j})}),h&&r.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-md",children:r.jsx("p",{className:"text-red-700 text-sm",children:h})}),r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Documentos"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Gestiona todos los documentos legales"})]}),r.jsx("button",{onClick:V,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Subir Documentos"})]})}),o&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6 col-span-full",children:"Estadísticas de Documentos"}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-md flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Documentos"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:typeof o.total=="number"&&!isNaN(o.total)?o.total:0})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-green-600 rounded-md flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"})})})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Tamaño Total"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:typeof o.totalSize=="number"&&!isNaN(o.totalSize)?Y(o.totalSize):"-"})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-yellow-600 rounded-md flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"PDFs"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:(Array.isArray(o.byType)?o.byType:[]).filter(_=>_.type.includes("pdf")).reduce((_,O)=>_+O.count,0)})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-purple-600 rounded-md flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 002 2z"})})})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Imágenes"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:(Array.isArray(o.byType)?o.byType:[]).filter(_=>_.type.includes("image")).reduce((_,O)=>_+O.count,0)})]})]})})]}),o&&r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Estadísticas por Tipo"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:(Array.isArray(o.byType)?o.byType:[]).filter(_=>_.type.includes("pdf")).reduce((_,O)=>_+O.count,0)}),r.jsx("div",{className:"text-sm text-gray-600",children:"PDFs"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:(Array.isArray(o.byType)?o.byType:[]).filter(_=>_.type.includes("text")).reduce((_,O)=>_+O.count,0)}),r.jsx("div",{className:"text-sm text-gray-600",children:"Documentos de Texto"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-purple-600",children:(Array.isArray(o.byType)?o.byType:[]).filter(_=>_.type.includes("image")).reduce((_,O)=>_+O.count,0)}),r.jsx("div",{className:"text-sm text-gray-600",children:"Imágenes"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-orange-600",children:(Array.isArray(o.byType)?o.byType:[]).filter(_=>_.type.includes("word")||_.type.includes("document")).reduce((_,O)=>_+O.count,0)}),r.jsx("div",{className:"text-sm text-gray-600",children:"Documentos Word"})]})]})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Filtros de Búsqueda"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar"}),r.jsx("input",{type:"text",placeholder:"Buscar por nombre, expediente o descripción...",value:c,onChange:_=>d(_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Archivo"}),r.jsxs("select",{value:u,onChange:_=>m(_.target.value),"aria-label":"Filtrar por tipo de archivo",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"todos",children:"Todos los tipos"}),r.jsx("option",{value:"application/pdf",children:"PDF"}),r.jsx("option",{value:"text/plain",children:"Texto"}),r.jsx("option",{value:"image/jpeg",children:"Imágenes"}),r.jsx("option",{value:"application/msword",children:"Word"})]})]}),r.jsx("div",{className:"flex items-end",children:r.jsx("button",{onClick:()=>{d(""),m("todos")},className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Limpiar Filtros"})})]})]}),r.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 p-6 border-b border-gray-200",children:"Lista de Documentos"}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Documento"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expediente"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tamaño"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subido Por"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(Array.isArray(s)?s:[]).map(_=>{var O,P,F,Q,X;return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-2xl mr-3",children:M(_.mimeType)}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:_.originalName}),_.description&&r.jsx("div",{className:"text-sm text-gray-500",children:_.description})]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx(Ne,{to:`/lawyer/cases/${_.expedienteId}`,className:"text-blue-600 hover:text-blue-900 text-sm",children:((O=_.expediente)==null?void 0:O.title)||"Sin título"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((Q=(F=(P=_.expediente)==null?void 0:P.client)==null?void 0:F.user)==null?void 0:Q.name)||"Cliente no disponible"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Y(_.fileSize)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((X=_.uploadedByUser)==null?void 0:X.name)||"Usuario no disponible"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(_.uploadedAt).toLocaleDateString()}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs("button",{onClick:()=>W(_.id,_.originalName),className:"inline-flex items-center px-3 py-1 border border-transparent text-sm leading-4 font-medium rounded-md text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[r.jsxs("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Visualizar"]}),r.jsxs("button",{onClick:()=>q(_.id),className:"inline-flex items-center px-3 py-1 border border-transparent text-sm leading-4 font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[r.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Eliminar"]})]})})]},_.id)})})]})})]}),s.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No se encontraron documentos"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Intenta ajustar los filtros o subir nuevos documentos."})]})]}),N&&r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:r.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:r.jsxs("div",{className:"mt-3",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Subir Documentos"}),h&&r.jsx("div",{className:"mb-4 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md p-2",children:h}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expediente"}),r.jsxs("select",{id:"expediente-select","aria-label":"Expediente",value:C.expedienteId,onChange:_=>S(O=>({...O,expedienteId:_.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:"Selecciona un expediente"}),k.map(_=>r.jsxs("option",{value:_.id,children:[_.title," - ",_.client.user.name]},_.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripción (opcional)"}),r.jsx("textarea",{value:C.description,onChange:_=>S(O=>({...O,description:_.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Descripción del documento..."})]}),r.jsx(gx,{onFileSelect:T,maxFiles:5,maxSize:5*1024*1024}),p.length>0&&r.jsxs("div",{className:"mt-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Archivos seleccionados:"}),r.jsx("button",{onClick:B,className:"text-sm text-red-600 hover:text-red-800",children:"Limpiar"})]}),r.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:p.map((_,O)=>r.jsxs("li",{children:[_.name," (",Y(_.size),")"]},O))})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[r.jsx("button",{onClick:A,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Cancelar"}),r.jsx("button",{onClick:I,disabled:w||p.length===0||!C.expedienteId,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:w?"Subiendo...":"Subir Documentos"})]})]})})})]})},s6=()=>{const[e,t]=f.useState([]),[s,n]=f.useState([]),[a,i]=f.useState([]),[o,l]=f.useState(!0),[c,d]=f.useState(""),[u,m]=f.useState("todos"),[h,g]=f.useState(null),[j,y]=f.useState(!1),[w,x]=f.useState([]),[p,v]=f.useState(!1),[N,b]=f.useState({expedienteId:"",description:""}),{user:C}=Ce();f.useEffect(()=>{(async()=>{try{l(!0);const W=localStorage.getItem("token"),E=await K.get("/documents",{headers:{Authorization:`Bearer ${W}`}});t(E.data),g(null)}catch(W){console.error("Error fetching documents:",W),g("Error al cargar los documentos")}finally{l(!1)}})()},[]),f.useEffect(()=>{(async()=>{try{const W=localStorage.getItem("token"),E=await K.get("/cases",{headers:{Authorization:`Bearer ${W}`}});i(E.data)}catch(W){console.error("Error fetching cases:",W)}})()},[]),f.useEffect(()=>{let M=e;c&&(M=M.filter(W=>{var E;return W.originalName.toLowerCase().includes(c.toLowerCase())||W.expediente.title.toLowerCase().includes(c.toLowerCase())||((E=W.description)==null?void 0:E.toLowerCase().includes(c.toLowerCase()))})),u!=="todos"&&(M=M.filter(W=>W.mimeType===u)),n(M)},[e,c,u]);const S=M=>{console.log("handleFileSelect called with:",M.length,"files"),console.log("Files:",M.map(E=>E.name)),console.log("Files details:",M.map(E=>({name:E.name,size:E.size,type:E.type})));const W=M.filter((E,R,$)=>R===$.findIndex(_=>_.name===E.name&&_.size===E.size));W.length!==M.length&&console.warn("Se encontraron archivos duplicados, eliminando..."),x(W)},k=()=>{x([])},D=()=>{y(!0),g(null),x([])},L=()=>{y(!1),x([]),b({expedienteId:"",description:""}),g(null)},T=async()=>{var E,R,$;if(w.length===0||!N.expedienteId){g("Por favor selecciona archivos y un expediente");return}if(w.length>5){g("No se pueden subir más de 5 archivos por envío");return}const M=w.reduce((_,O)=>_+O.size,0),W=5*1024*1024;if(M>W){g(`El tamaño total de los archivos (${(M/(1024*1024)).toFixed(2)}MB) excede el límite de 5MB`);return}try{v(!0),g(null);const _=localStorage.getItem("token"),O=w.map(X=>{const re=new FormData;return re.append("file",X),re.append("expedienteId",N.expedienteId),N.description&&re.append("description",N.description),K.post("/documents/upload",re,{headers:{Authorization:`Bearer ${_}`,"Content-Type":"multipart/form-data"}})});console.log("Subiendo archivos...");const P=await Promise.all(O);console.log("Resultados de subida:",P.map(X=>X.data)),console.log("Recargando documentos...");const F=await K.get("/documents",{headers:{Authorization:`Bearer ${_}`}});console.log("Documentos cargados:",F.data);const Q=F.data.filter(X=>{const re=X&&X.id&&X.originalName;return re||console.warn("Documento inválido encontrado:",X),re});t(Q),L()}catch(_){console.error("Error uploading files:",_),console.error("Error response:",(E=_.response)==null?void 0:E.data),g((($=(R=_.response)==null?void 0:R.data)==null?void 0:$.message)||"Error al subir los archivos")}finally{v(!1)}},B=async M=>{if(window.confirm("¿Estás seguro de que quieres eliminar este documento?"))try{const W=localStorage.getItem("token");await K.delete(`/documents/${M}`,{headers:{Authorization:`Bearer ${W}`}});const E=await K.get("/documents",{headers:{Authorization:`Bearer ${W}`}});t(E.data)}catch(W){console.error("Error deleting document:",W),g("Error al eliminar el documento")}},V=M=>{if(M===0)return"0 Bytes";const W=1024,E=["Bytes","KB","MB","GB"],R=Math.floor(Math.log(M)/Math.log(W));return parseFloat((M/Math.pow(W,R)).toFixed(2))+" "+E[R]},A=M=>M.includes("pdf")?"📄":M.includes("image")?"🖼️":M.includes("text")?"📝":M.includes("word")?"📄":"📎",I=M=>{switch(M){case"ABIERTO":return"bg-green-100 text-green-800";case"EN_PROCESO":return"bg-yellow-100 text-yellow-800";case"CERRADO":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},q=M=>{switch(M){case"ABIERTO":return"Abierto";case"EN_PROCESO":return"En Proceso";case"CERRADO":return"Cerrado";default:return M}},Y=async(M,W)=>{try{const E=localStorage.getItem("token");if(!E){alert("No hay token de autenticación. Por favor, inicia sesión de nuevo.");return}const R=await fetch(`https://experimento2-production-54c0.up.railway.app/api/documents/${M}/download`,{method:"GET",headers:{Authorization:`Bearer ${E}`}});if(!R.ok){if(R.status===401){alert("Sesión expirada. Por favor, inicia sesión de nuevo.");return}throw new Error(`Error ${R.status}: ${R.statusText}`)}const $=await R.blob(),_=window.URL.createObjectURL($),O=document.createElement("a");O.href=_,O.download=W,document.body.appendChild(O),O.click(),window.URL.revokeObjectURL(_),document.body.removeChild(O)}catch(E){console.error("Error descargando documento:",E),alert(`Error al descargar el documento: ${E.message}`)}};return o?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):h?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-red-600 text-xl mb-4",children:"Error"}),r.jsx("div",{className:"text-gray-600",children:h}),r.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Reintentar"})]})}):r.jsxs("div",{className:"py-6",children:[r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mis Documentos"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Accede a todos los documentos de tus expedientes"})]}),r.jsx("button",{onClick:D,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Subir Documentos"})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar"}),r.jsx("input",{type:"text",placeholder:"Buscar por nombre de documento o expediente...",value:c,onChange:M=>d(M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Archivo"}),r.jsxs("select",{value:u,onChange:M=>m(M.target.value),"aria-label":"Filtrar por tipo de archivo",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"todos",children:"Todos los tipos"}),r.jsx("option",{value:"application/pdf",children:"PDF"}),r.jsx("option",{value:"text/plain",children:"Texto"}),r.jsx("option",{value:"image/jpeg",children:"Imágenes"}),r.jsx("option",{value:"application/msword",children:"Word"})]})]}),r.jsx("div",{className:"flex items-end",children:r.jsx("button",{onClick:()=>{d(""),m("todos")},className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Limpiar Filtros"})})]})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(M=>r.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("span",{className:"text-3xl",children:A(M.mimeType)}),r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${I(M.expediente.status)}`,children:q(M.expediente.status)})]}),r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2 truncate",children:M.originalName}),M.description&&r.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:M.description}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[r.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),M.expediente.title]}),r.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[r.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),M.uploadedBy.name]}),r.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[r.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"})}),V(M.fileSize)]}),r.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[r.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),new Date(M.uploadedAt).toLocaleDateString()]})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>Y(M.id,M.originalName),className:"flex-1 px-3 py-2 bg-blue-600 text-white text-center text-sm rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Descargar"}),r.jsx("button",{onClick:()=>B(M.id),className:"px-3 py-2 bg-red-600 text-white text-sm rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:"Eliminar"})]})]})},M.id))}),s.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No se encontraron documentos"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:e.length===0?"Aún no tienes documentos en tus expedientes.":"Intenta ajustar los filtros de búsqueda."})]})]}),j&&r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:r.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:r.jsxs("div",{className:"mt-3",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Subir Documentos"}),h&&r.jsx("div",{className:"mb-4 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md p-2",children:h}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expediente"}),r.jsxs("select",{id:"expediente-select","aria-label":"Expediente",value:N.expedienteId,onChange:M=>b(W=>({...W,expedienteId:M.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:"Selecciona un expediente"}),a.map(M=>r.jsx("option",{value:M.id,children:M.title},M.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripción (opcional)"}),r.jsx("textarea",{value:N.description,onChange:M=>b(W=>({...W,description:M.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Descripción del documento..."})]}),r.jsx(gx,{onFileSelect:S,maxFiles:5,maxSize:5*1024*1024}),w.length>0&&r.jsxs("div",{className:"mt-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Archivos seleccionados:"}),r.jsx("button",{onClick:k,className:"text-sm text-red-600 hover:text-red-800",children:"Limpiar"})]}),r.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:w.map((M,W)=>r.jsxs("li",{children:[M.name," (",V(M.size),")"]},W))}),r.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Total: ",V(w.reduce((M,W)=>M+W.size,0))," / 5MB"]})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[r.jsx("button",{onClick:L,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Cancelar"}),r.jsx("button",{onClick:T,disabled:p||w.length===0||!N.expedienteId,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Subiendo...":"Subir Documentos"})]})]})})})]})},n6=()=>{const e=Yt(),{id:t}=Eu(),{user:s}=Ce(),[n,a]=f.useState(!0),[i,o]=f.useState(!1),[l,c]=f.useState(null),[d,u]=f.useState([]),[m,h]=f.useState([]),[g,j]=f.useState({title:"",description:"",clientId:"",lawyerId:(s==null?void 0:s.role)==="ABOGADO"?s.id:""});f.useEffect(()=>{(async()=>{var p,v;try{a(!0);const N=localStorage.getItem("token"),[b,C,S]=await Promise.all([K.get("/users/clients"),K.get("/users/lawyers"),K.get(`/cases/${t}`)]);u(b.data),h(C.data);const k=S.data;j({title:k.title||"",description:k.description||"",clientId:((p=k.client)==null?void 0:p.id)||"",lawyerId:((v=k.lawyer)==null?void 0:v.id)||((s==null?void 0:s.role)==="ABOGADO"?s.id:"")}),c(null)}catch(N){console.error("Error fetching data:",N),c("Error al cargar los datos del expediente")}finally{a(!1)}})()},[t,s]);const y=x=>{const{name:p,value:v}=x.target;j(N=>({...N,[p]:v}))},w=async x=>{var p,v;if(x.preventDefault(),!g.title||!g.clientId||!g.lawyerId){c("Por favor completa todos los campos obligatorios");return}try{o(!0),c(null),await K.patch(`/cases/${t}`,g),e(`/lawyer/cases/${t}`)}catch(N){console.error("Error updating case:",N),c(((v=(p=N.response)==null?void 0:p.data)==null?void 0:v.message)||"Error al actualizar el expediente")}finally{o(!1)}};return n?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):r.jsx("div",{className:"py-6",children:r.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Editar Expediente"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Modifica los datos del expediente legal"})]}),r.jsx("button",{onClick:()=>e(`/lawyer/cases/${t}`),className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Cancelar"})]})}),r.jsx("div",{className:"bg-white shadow rounded-lg",children:r.jsxs("form",{onSubmit:w,className:"p-6 space-y-6",children:[l&&r.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md",children:l}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Título del Expediente *"}),r.jsx("input",{type:"text",id:"title",name:"title",value:g.title,onChange:y,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: Contrato de Compraventa"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripción"}),r.jsx("textarea",{id:"description",name:"description",value:g.description,onChange:y,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe brevemente el caso..."})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"clientId",className:"block text-sm font-medium text-gray-700 mb-2",children:"Cliente *"}),r.jsxs("select",{id:"clientId",name:"clientId",value:g.clientId,onChange:y,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:"Selecciona un cliente"}),d.filter(x=>x.user).length===0&&r.jsx("option",{disabled:!0,value:"",children:"No hay clientes disponibles"}),d.filter(x=>x.user).map(x=>{var p,v;return r.jsxs("option",{value:x.id,children:[((p=x.user)==null?void 0:p.name)||"Sin nombre"," - ",((v=x.user)==null?void 0:v.email)||"Sin email"," (DNI: ",x.dni,")"]},x.id)})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"lawyerId",className:"block text-sm font-medium text-gray-700 mb-2",children:"Abogado Asignado *"}),r.jsxs("select",{id:"lawyerId",name:"lawyerId",value:g.lawyerId,onChange:y,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:(s==null?void 0:s.role)==="ABOGADO",children:[r.jsx("option",{value:"",children:"Selecciona un abogado"}),m.map(x=>r.jsxs("option",{value:x.id,children:[x.name," - ",x.email]},x.id))]}),(s==null?void 0:s.role)==="ABOGADO"&&r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Serás asignado automáticamente como abogado responsable"})]}),r.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:()=>e(`/lawyer/cases/${t}`),className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Cancelar"}),r.jsx("button",{type:"submit",disabled:i,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Guardando...":"Guardar Cambios"})]})]})})]})})};function cn(e){"@babel/helpers - typeof";return cn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cn(e)}function a6(e,t){if(cn(e)!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var n=s.call(e,t);if(cn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function RN(e){var t=a6(e,"string");return cn(t)=="symbol"?t:t+""}function da(e,t,s){return(t=RN(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Sv(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function He(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?Sv(Object(s),!0).forEach(function(n){da(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Sv(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function Pu(e,t){if(e==null)return{};var s={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;s[n]=e[n]}return s}function Ps(e,t){if(e==null)return{};var s,n,a=Pu(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)===-1&&{}.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function Et(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ev(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,RN(n.key),n)}}function kt(e,t,s){return t&&Ev(e.prototype,t),s&&Ev(e,s),Object.defineProperty(e,"prototype",{writable:!1}),e}function zd(e){return zd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},zd(e)}function PN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(PN=function(){return!!e})()}function i6(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o6(e,t){if(t&&(cn(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return i6(e)}function qt(e,t,s){return t=zd(t),o6(e,PN()?Reflect.construct(t,s||[],zd(e).constructor):t.apply(e,s))}function Ud(e,t){return Ud=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,n){return s.__proto__=n,s},Ud(e,t)}function Gt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ud(e,t)}function LN(e){if(Array.isArray(e))return e}function l6(e,t){var s=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(s!=null){var n,a,i,o,l=[],c=!0,d=!1;try{if(i=(s=s.call(e)).next,t===0){if(Object(s)!==s)return;c=!1}else for(;!(c=(n=i.call(s)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&s.return!=null&&(o=s.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function Pf(e,t){(t==null||t>e.length)&&(t=e.length);for(var s=0,n=Array(t);s<t;s++)n[s]=e[s];return n}function vx(e,t){if(e){if(typeof e=="string")return Pf(e,t);var s={}.toString.call(e).slice(8,-1);return s==="Object"&&e.constructor&&(s=e.constructor.name),s==="Map"||s==="Set"?Array.from(e):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?Pf(e,t):void 0}}function IN(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Br(e,t){return LN(e)||l6(e,t)||vx(e,t)||IN()}function $N(e){var t,s,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(s=$N(e[t]))&&(n&&(n+=" "),n+=s);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function mt(){for(var e,t,s=0,n="";s<arguments.length;)(e=arguments[s++])&&(t=$N(e))&&(n&&(n+=" "),n+=t);return n}function ut(){return ut=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)({}).hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},ut.apply(null,arguments)}var c6=function(e,t,s,n,a,i,o,l){if(!e){var c;if(t===void 0)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[s,n,a,i,o,l],u=0;c=new Error(t.replace(/%s/g,function(){return d[u++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}},d6=c6;const ul=vr(d6);var u6=function(){};function m6(e,t){var s={};return Object.keys(e).forEach(function(n){s[Qc(n)]=u6}),s}function kv(e,t){return e[t]!==void 0}function Qc(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function h6(e){return!!e&&(typeof e!="function"||e.prototype&&e.prototype.isReactComponent)}function f6(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Ud(e,t)}function FN(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);e!=null&&this.setState(e)}function BN(e){function t(s){var n=this.constructor.getDerivedStateFromProps(e,s);return n??null}this.setState(t.bind(this))}function zN(e,t){try{var s=this.props,n=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(s,n)}finally{this.props=s,this.state=n}}FN.__suppressDeprecationWarning=!0;BN.__suppressDeprecationWarning=!0;zN.__suppressDeprecationWarning=!0;function p6(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if(typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function")return e;var s=null,n=null,a=null;if(typeof t.componentWillMount=="function"?s="componentWillMount":typeof t.UNSAFE_componentWillMount=="function"&&(s="UNSAFE_componentWillMount"),typeof t.componentWillReceiveProps=="function"?n="componentWillReceiveProps":typeof t.UNSAFE_componentWillReceiveProps=="function"&&(n="UNSAFE_componentWillReceiveProps"),typeof t.componentWillUpdate=="function"?a="componentWillUpdate":typeof t.UNSAFE_componentWillUpdate=="function"&&(a="UNSAFE_componentWillUpdate"),s!==null||n!==null||a!==null){var i=e.displayName||e.name,o=typeof e.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+i+" uses "+o+" but also contains the following legacy lifecycles:"+(s!==null?`
  `+s:"")+(n!==null?`
  `+n:"")+(a!==null?`
  `+a:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof e.getDerivedStateFromProps=="function"&&(t.componentWillMount=FN,t.componentWillReceiveProps=BN),typeof t.getSnapshotBeforeUpdate=="function"){if(typeof t.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=zN;var l=t.componentDidUpdate;t.componentDidUpdate=function(d,u,m){var h=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:m;l.call(this,d,u,h)}}return e}var x6="/Users/jquense/src/uncontrollable/src/uncontrollable.js";function UN(e,t,s){s===void 0&&(s=[]);var n=e.displayName||e.name||"Component",a=h6(e),i=Object.keys(t),o=i.map(Qc);a||!s.length||ul(!1);var l=function(d){f6(u,d);function u(){for(var h,g=arguments.length,j=new Array(g),y=0;y<g;y++)j[y]=arguments[y];h=d.call.apply(d,[this].concat(j))||this,h.handlers=Object.create(null),i.forEach(function(x){var p=t[x],v=function(b){if(h.props[p]){var C;h._notifying=!0;for(var S=arguments.length,k=new Array(S>1?S-1:0),D=1;D<S;D++)k[D-1]=arguments[D];(C=h.props)[p].apply(C,[b].concat(k)),h._notifying=!1}h.unmounted||h.setState(function(L){var T,B=L.values;return{values:ut(Object.create(null),B,(T={},T[x]=b,T))}})};h.handlers[p]=v}),s.length&&(h.attachRef=function(x){h.inner=x});var w=Object.create(null);return i.forEach(function(x){w[x]=h.props[Qc(x)]}),h.state={values:w,prevProps:{}},h}var m=u.prototype;return m.shouldComponentUpdate=function(){return!this._notifying},u.getDerivedStateFromProps=function(g,j){var y=j.values,w=j.prevProps,x={values:ut(Object.create(null),y),prevProps:{}};return i.forEach(function(p){x.prevProps[p]=g[p],!kv(g,p)&&kv(w,p)&&(x.values[p]=g[Qc(p)])}),x},m.componentWillUnmount=function(){this.unmounted=!0},m.render=function(){var g=this,j=this.props,y=j.innerRef,w=Pu(j,["innerRef"]);o.forEach(function(p){delete w[p]});var x={};return i.forEach(function(p){var v=g.props[p];x[p]=v!==void 0?v:g.state.values[p]}),H.createElement(e,ut({},w,x,this.handlers,{ref:y||this.attachRef}))},u}(H.Component);p6(l),l.displayName="Uncontrolled("+n+")",l.propTypes=ut({innerRef:function(){}},m6(t)),s.forEach(function(d){l.prototype[d]=function(){var m;return(m=this.inner)[d].apply(m,arguments)}});var c=l;return H.forwardRef&&(c=H.forwardRef(function(d,u){return H.createElement(l,ut({},d,{innerRef:u,__source:{fileName:x6,lineNumber:128},__self:this}))}),c.propTypes=l.propTypes),c.ControlledComponent=e,c.deferControlTo=function(d,u,m){return u===void 0&&(u={}),UN(d,ut({},t,u),m)},c}var VN={exports:{}},g6="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",v6=g6,y6=v6;function HN(){}function WN(){}WN.resetWarningCache=HN;var b6=function(){function e(n,a,i,o,l,c){if(c!==y6){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var s={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:WN,resetWarningCache:HN};return s.PropTypes=s,s};VN.exports=b6();var yx=VN.exports;const oe=vr(yx);var Vd="milliseconds",ml="seconds",hl="minutes",fl="hours",Ta="day",Ni="week",pl="month",_a="year",Oa="decade",Ma="century",YN={milliseconds:1,seconds:1e3,minutes:60*1e3,hours:60*60*1e3,day:24*60*60*1e3,week:7*24*60*60*1e3},j6={month:1,year:12,decade:10*12,century:100*12};function w6(e){return[31,N6(e),31,30,31,30,31,31,30,31,30,31]}function N6(e){return e%4===0&&e%100!==0||e%400===0?29:28}function ds(e,t,s){switch(e=new Date(e),s){case Vd:case ml:case hl:case fl:case Ta:case Ni:return C6(e,t*YN[s]);case pl:case _a:case Oa:case Ma:return S6(e,t*j6[s])}throw new TypeError('Invalid units: "'+s+'"')}function C6(e,t){var s=new Date(+e+t);return E6(e,s)}function S6(e,t){var s=e.getFullYear(),n=e.getMonth(),a=e.getDate(),i=s*12+n+t,o=Math.trunc(i/12),l=i%12,c=Math.min(a,w6(o)[l]),d=new Date(e);return d.setFullYear(o),d.setDate(1),d.setMonth(l),d.setDate(c),d}function E6(e,t){var s=e.getTimezoneOffset(),n=t.getTimezoneOffset(),a=n-s;return new Date(+t+a*YN.minutes)}function xl(e,t,s){return ds(e,-t,s)}function It(e,t,s){switch(e=new Date(e),t){case Ma:case Oa:case _a:e=Wd(e,0);case pl:e=QN(e,1);case Ni:case Ta:e=yl(e,0);case fl:e=Ci(e,0);case hl:e=vl(e,0);case ml:e=gl(e,0)}return t===Oa&&(e=xl(e,Ra(e)%10,"year")),t===Ma&&(e=xl(e,Ra(e)%100,"year")),t===Ni&&(e=JN(e,0,s)),e}function Hd(e,t,s){switch(e=new Date(e),e=It(e,t,s),t){case Ma:case Oa:case _a:case pl:case Ni:e=ds(e,1,t),e=xl(e,1,Ta),e.setHours(23,59,59,999);break;case Ta:e.setHours(23,59,59,999);break;case fl:case hl:case ml:e=ds(e,1,t),e=xl(e,1,Vd)}return e}var $l=Fi(function(e,t){return e===t}),bx=Fi(function(e,t){return e!==t}),Lu=Fi(function(e,t){return e>t}),Fl=Fi(function(e,t){return e>=t}),jx=Fi(function(e,t){return e<t}),$i=Fi(function(e,t){return e<=t});function qN(){return new Date(Math.min.apply(Math,arguments))}function GN(){return new Date(Math.max.apply(Math,arguments))}function KN(e,t,s,n){return n=n||"day",(!t||Fl(e,t,n))&&(!s||$i(e,s,n))}var gl=Xn("Milliseconds"),vl=Xn("Seconds"),Ci=Xn("Minutes"),yl=Xn("Hours"),XN=Xn("Day"),QN=Xn("Date"),Wd=Xn("Month"),Ra=Xn("FullYear");function k6(e,t){return t===void 0?Ra(It(e,Oa)):ds(e,t+10,_a)}function D6(e,t){return t===void 0?Ra(It(e,Ma)):ds(e,t+100,_a)}function JN(e,t,s){var n=(XN(e)+7-(s||0))%7;return t===void 0?n:ds(e,t-n,Ta)}function A6(e,t,s,n){var a,i,o;switch(s){case Vd:case ml:case hl:case fl:case Ta:case Ni:a=t.getTime()-e.getTime();break;case pl:case _a:case Oa:case Ma:a=(Ra(t)-Ra(e))*12+Wd(t)-Wd(e);break;default:throw new TypeError('Invalid units: "'+s+'"')}switch(s){case Vd:i=1;break;case ml:i=1e3;break;case hl:i=1e3*60;break;case fl:i=1e3*60*60;break;case Ta:i=1e3*60*60*24;break;case Ni:i=1e3*60*60*24*7;break;case pl:i=1;break;case _a:i=12;break;case Oa:i=120;break;case Ma:i=1200;break;default:throw new TypeError('Invalid units: "'+s+'"')}return o=a/i,n?o:Math.round(o)}function Xn(e){var t=function(s){switch(s){case"Milliseconds":return 36e5;case"Seconds":return 3600;case"Minutes":return 60;case"Hours":return 1;default:return null}}(e);return function(s,n){if(n===void 0)return s["get"+e]();var a=new Date(s);return a["set"+e](n),t&&a["get"+e]()!=n&&(e==="Hours"||n>=t&&a.getHours()-s.getHours()<Math.floor(n/t))&&a["set"+e](n+t),a}}function Fi(e){return function(t,s,n){return e(+It(t,n),+It(s,n))}}const Dv=Object.freeze(Object.defineProperty({__proto__:null,add:ds,century:D6,date:QN,day:XN,decade:k6,diff:A6,endOf:Hd,eq:$l,gt:Lu,gte:Fl,hours:yl,inRange:KN,lt:jx,lte:$i,max:GN,milliseconds:gl,min:qN,minutes:Ci,month:Wd,neq:bx,seconds:vl,startOf:It,subtract:xl,weekday:JN,year:Ra},Symbol.toStringTag,{value:"Module"}));function T6(e){if(Array.isArray(e))return Pf(e)}function ZN(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _6(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jc(e){return T6(e)||ZN(e)||vx(e)||_6()}function O6(e,t,s){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),s=s>a?a:s,s<0&&(s+=a),a=t>s?0:s-t>>>0,t>>>=0;for(var i=Array(a);++n<a;)i[n]=e[n+t];return i}var e2=O6;function M6(e,t){return e===t||e!==e&&t!==t}var Bl=M6,R6=typeof zr=="object"&&zr&&zr.Object===Object&&zr,t2=R6,P6=t2,L6=typeof self=="object"&&self&&self.Object===Object&&self,I6=P6||L6||Function("return this")(),Bs=I6,$6=Bs,F6=$6.Symbol,Bi=F6,Av=Bi,r2=Object.prototype,B6=r2.hasOwnProperty,z6=r2.toString,ho=Av?Av.toStringTag:void 0;function U6(e){var t=B6.call(e,ho),s=e[ho];try{e[ho]=void 0;var n=!0}catch{}var a=z6.call(e);return n&&(t?e[ho]=s:delete e[ho]),a}var V6=U6,H6=Object.prototype,W6=H6.toString;function Y6(e){return W6.call(e)}var q6=Y6,Tv=Bi,G6=V6,K6=q6,X6="[object Null]",Q6="[object Undefined]",_v=Tv?Tv.toStringTag:void 0;function J6(e){return e==null?e===void 0?Q6:X6:_v&&_v in Object(e)?G6(e):K6(e)}var zi=J6;function Z6(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var hn=Z6,eA=zi,tA=hn,rA="[object AsyncFunction]",sA="[object Function]",nA="[object GeneratorFunction]",aA="[object Proxy]";function iA(e){if(!tA(e))return!1;var t=eA(e);return t==sA||t==nA||t==rA||t==aA}var wx=iA,oA=9007199254740991;function lA(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=oA}var Nx=lA,cA=wx,dA=Nx;function uA(e){return e!=null&&dA(e.length)&&!cA(e)}var zl=uA,mA=9007199254740991,hA=/^(?:0|[1-9]\d*)$/;function fA(e,t){var s=typeof e;return t=t??mA,!!t&&(s=="number"||s!="symbol"&&hA.test(e))&&e>-1&&e%1==0&&e<t}var Cx=fA,pA=Bl,xA=zl,gA=Cx,vA=hn;function yA(e,t,s){if(!vA(s))return!1;var n=typeof t;return(n=="number"?xA(s)&&gA(t,s.length):n=="string"&&t in s)?pA(s[t],e):!1}var Iu=yA,bA=/\s/;function jA(e){for(var t=e.length;t--&&bA.test(e.charAt(t)););return t}var wA=jA,NA=wA,CA=/^\s+/;function SA(e){return e&&e.slice(0,NA(e)+1).replace(CA,"")}var EA=SA;function kA(e){return e!=null&&typeof e=="object"}var Qn=kA,DA=zi,AA=Qn,TA="[object Symbol]";function _A(e){return typeof e=="symbol"||AA(e)&&DA(e)==TA}var Ul=_A,OA=EA,Ov=hn,MA=Ul,Mv=NaN,RA=/^[-+]0x[0-9a-f]+$/i,PA=/^0b[01]+$/i,LA=/^0o[0-7]+$/i,IA=parseInt;function $A(e){if(typeof e=="number")return e;if(MA(e))return Mv;if(Ov(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Ov(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=OA(e);var s=PA.test(e);return s||LA.test(e)?IA(e.slice(2),s?2:8):RA.test(e)?Mv:+e}var FA=$A,BA=FA,Rv=1/0,zA=17976931348623157e292;function UA(e){if(!e)return e===0?e:0;if(e=BA(e),e===Rv||e===-Rv){var t=e<0?-1:1;return t*zA}return e===e?e:0}var s2=UA,VA=s2;function HA(e){var t=VA(e),s=t%1;return t===t?s?t-s:t:0}var n2=HA,WA=e2,YA=Iu,qA=n2,GA=Math.ceil,KA=Math.max;function XA(e,t,s){(s?YA(e,t,s):t===void 0)?t=1:t=KA(qA(t),0);var n=e==null?0:e.length;if(!n||t<1)return[];for(var a=0,i=0,o=Array(GA(n/t));a<n;)o[i++]=WA(e,a,a+=t);return o}var QA=XA;const JA=vr(QA);function Vl(e){return e&&e.ownerDocument||document}function ZA(e){var t=Vl(e);return t&&t.defaultView||window}function eT(e,t){return ZA(e).getComputedStyle(e,t)}var tT=/([A-Z])/g;function rT(e){return e.replace(tT,"-$1").toLowerCase()}var sT=/^ms-/;function Nc(e){return rT(e).replace(sT,"-ms-")}var nT=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function aT(e){return!!(e&&nT.test(e))}function Ha(e,t){var s="",n="";if(typeof t=="string")return e.style.getPropertyValue(Nc(t))||eT(e).getPropertyValue(Nc(t));Object.keys(t).forEach(function(a){var i=t[a];!i&&i!==0?e.style.removeProperty(Nc(a)):aT(a)?n+=a+"("+i+") ":s+=Nc(a)+": "+i+";"}),n&&(s+="transform: "+n+";"),e.style.cssText+=";"+s}function bl(e,t){if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return e===t||!!(e.compareDocumentPosition(t)&16)}function iT(e){return"nodeType"in e&&e.nodeType===document.DOCUMENT_NODE}function Sx(e){return"window"in e&&e.window===e?e:iT(e)&&e.defaultView||!1}function a2(e){var t=e==="pageXOffset"?"scrollLeft":"scrollTop";function s(n,a){var i=Sx(n);if(a===void 0)return i?i[e]:n[t];i?i.scrollTo(i[e],a):n[t]=a}return s}const i2=a2("pageXOffset"),o2=a2("pageYOffset");function ba(e){var t=Vl(e),s={top:0,left:0,height:0,width:0},n=t&&t.documentElement;return!n||!bl(n,e)||(e.getBoundingClientRect!==void 0&&(s=e.getBoundingClientRect()),s={top:s.top+o2(n)-(n.clientTop||0),left:s.left+i2(n)-(n.clientLeft||0),width:s.width,height:s.height}),s}var oT=function(t){return!!t&&"offsetParent"in t};function lT(e){for(var t=Vl(e),s=e&&e.offsetParent;oT(s)&&s.nodeName!=="HTML"&&Ha(s,"position")==="static";)s=s.offsetParent;return s||t.documentElement}var cT=function(t){return t.nodeName&&t.nodeName.toLowerCase()};function l2(e,t){var s={top:0,left:0},n;if(Ha(e,"position")==="fixed")n=e.getBoundingClientRect();else{var a=t||lT(e);n=ba(e),cT(a)!=="html"&&(s=ba(a));var i=String(Ha(a,"borderTopWidth")||0);s.top+=parseInt(i,10)-o2(a)||0;var o=String(Ha(a,"borderLeftWidth")||0);s.left+=parseInt(o,10)-i2(a)||0}var l=String(Ha(e,"marginTop")||0),c=String(Ha(e,"marginLeft")||0);return ut({},n,{top:n.top-s.top-(parseInt(l,10)||0),left:n.left-s.left-(parseInt(c,10)||0)})}const Ex=!!(typeof window<"u"&&window.document&&window.document.createElement);var Pv=new Date().getTime();function dT(e){var t=new Date().getTime(),s=Math.max(0,16-(t-Pv)),n=setTimeout(e,s);return Pv=t,n}var uT=["","webkit","moz","o","ms"],Lf="clearTimeout",If=dT,Lv=function(t,s){return t+(t?s[0].toUpperCase()+s.substr(1):s)+"AnimationFrame"};Ex&&uT.some(function(e){var t=Lv(e,"request");return t in window&&(Lf=Lv(e,"cancel"),If=function(n){return window[t](n)}),!!If});var Iv=function(t){typeof window[Lf]=="function"&&window[Lf](t)},c2=If,ch;function mT(e,t){if(!ch){var s=document.body,n=s.matches||s.matchesSelector||s.webkitMatchesSelector||s.mozMatchesSelector||s.msMatchesSelector;ch=function(i,o){return n.call(i,o)}}return ch(e,t)}var hT=Function.prototype.bind.call(Function.prototype.call,[].slice);function fT(e,t){return hT(e.querySelectorAll(t))}var $f=!1,Ff=!1;try{var dh={get passive(){return $f=!0},get once(){return Ff=$f=!0}};Ex&&(window.addEventListener("test",dh,dh),window.removeEventListener("test",dh,!0))}catch{}function pT(e,t,s,n){if(n&&typeof n!="boolean"&&!Ff){var a=n.once,i=n.capture,o=s;!Ff&&a&&(o=s.__once||function l(c){this.removeEventListener(t,l,i),s.call(this,c)},s.__once=o),e.addEventListener(t,o,$f?n:i)}e.addEventListener(t,s,n)}function xT(e){const t=f.useRef(e);return f.useEffect(()=>{t.current=e},[e]),t}function $v(e){const t=xT(e);return f.useCallback(function(...s){return t.current&&t.current(...s)},[t])}function Fv(){return f.useState(null)}function gT(){const e=f.useRef(!0),t=f.useRef(()=>e.current);return f.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}function vT(e){const t=gT();return[e[0],f.useCallback(s=>{if(t())return e[1](s)},[t,e[1]])]}var pr="top",Yr="bottom",qr="right",xr="left",kx="auto",Hl=[pr,Yr,qr,xr],Si="start",jl="end",yT="clippingParents",d2="viewport",fo="popper",bT="reference",Bv=Hl.reduce(function(e,t){return e.concat([t+"-"+Si,t+"-"+jl])},[]),Dx=[].concat(Hl,[kx]).reduce(function(e,t){return e.concat([t,t+"-"+Si,t+"-"+jl])},[]),jT="beforeRead",wT="read",NT="afterRead",CT="beforeMain",ST="main",ET="afterMain",kT="beforeWrite",DT="write",AT="afterWrite",TT=[jT,wT,NT,CT,ST,ET,kT,DT,AT];function Ms(e){return e.split("-")[0]}function Cr(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Pa(e){var t=Cr(e).Element;return e instanceof t||e instanceof Element}function Rs(e){var t=Cr(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Ax(e){if(typeof ShadowRoot>"u")return!1;var t=Cr(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}var ja=Math.max,Yd=Math.min,Ei=Math.round;function Bf(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function u2(){return!/^((?!chrome|android).)*safari/i.test(Bf())}function ki(e,t,s){t===void 0&&(t=!1),s===void 0&&(s=!1);var n=e.getBoundingClientRect(),a=1,i=1;t&&Rs(e)&&(a=e.offsetWidth>0&&Ei(n.width)/e.offsetWidth||1,i=e.offsetHeight>0&&Ei(n.height)/e.offsetHeight||1);var o=Pa(e)?Cr(e):window,l=o.visualViewport,c=!u2()&&s,d=(n.left+(c&&l?l.offsetLeft:0))/a,u=(n.top+(c&&l?l.offsetTop:0))/i,m=n.width/a,h=n.height/i;return{width:m,height:h,top:u,right:d+m,bottom:u+h,left:d,x:d,y:u}}function Tx(e){var t=ki(e),s=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-s)<=1&&(s=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:s,height:n}}function m2(e,t){var s=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(s&&Ax(s)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Vn(e){return e?(e.nodeName||"").toLowerCase():null}function dn(e){return Cr(e).getComputedStyle(e)}function _T(e){return["table","td","th"].indexOf(Vn(e))>=0}function Jn(e){return((Pa(e)?e.ownerDocument:e.document)||window.document).documentElement}function $u(e){return Vn(e)==="html"?e:e.assignedSlot||e.parentNode||(Ax(e)?e.host:null)||Jn(e)}function zv(e){return!Rs(e)||dn(e).position==="fixed"?null:e.offsetParent}function OT(e){var t=/firefox/i.test(Bf()),s=/Trident/i.test(Bf());if(s&&Rs(e)){var n=dn(e);if(n.position==="fixed")return null}var a=$u(e);for(Ax(a)&&(a=a.host);Rs(a)&&["html","body"].indexOf(Vn(a))<0;){var i=dn(a);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||t&&i.willChange==="filter"||t&&i.filter&&i.filter!=="none")return a;a=a.parentNode}return null}function Wl(e){for(var t=Cr(e),s=zv(e);s&&_T(s)&&dn(s).position==="static";)s=zv(s);return s&&(Vn(s)==="html"||Vn(s)==="body"&&dn(s).position==="static")?t:s||OT(e)||t}function _x(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function $o(e,t,s){return ja(e,Yd(t,s))}function MT(e,t,s){var n=$o(e,t,s);return n>s?s:n}function h2(){return{top:0,right:0,bottom:0,left:0}}function f2(e){return Object.assign({},h2(),e)}function p2(e,t){return t.reduce(function(s,n){return s[n]=e,s},{})}var RT=function(t,s){return t=typeof t=="function"?t(Object.assign({},s.rects,{placement:s.placement})):t,f2(typeof t!="number"?t:p2(t,Hl))};function PT(e){var t,s=e.state,n=e.name,a=e.options,i=s.elements.arrow,o=s.modifiersData.popperOffsets,l=Ms(s.placement),c=_x(l),d=[xr,qr].indexOf(l)>=0,u=d?"height":"width";if(!(!i||!o)){var m=RT(a.padding,s),h=Tx(i),g=c==="y"?pr:xr,j=c==="y"?Yr:qr,y=s.rects.reference[u]+s.rects.reference[c]-o[c]-s.rects.popper[u],w=o[c]-s.rects.reference[c],x=Wl(i),p=x?c==="y"?x.clientHeight||0:x.clientWidth||0:0,v=y/2-w/2,N=m[g],b=p-h[u]-m[j],C=p/2-h[u]/2+v,S=$o(N,C,b),k=c;s.modifiersData[n]=(t={},t[k]=S,t.centerOffset=S-C,t)}}function LT(e){var t=e.state,s=e.options,n=s.element,a=n===void 0?"[data-popper-arrow]":n;a!=null&&(typeof a=="string"&&(a=t.elements.popper.querySelector(a),!a)||m2(t.elements.popper,a)&&(t.elements.arrow=a))}const IT={name:"arrow",enabled:!0,phase:"main",fn:PT,effect:LT,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Di(e){return e.split("-")[1]}var $T={top:"auto",right:"auto",bottom:"auto",left:"auto"};function FT(e,t){var s=e.x,n=e.y,a=t.devicePixelRatio||1;return{x:Ei(s*a)/a||0,y:Ei(n*a)/a||0}}function Uv(e){var t,s=e.popper,n=e.popperRect,a=e.placement,i=e.variation,o=e.offsets,l=e.position,c=e.gpuAcceleration,d=e.adaptive,u=e.roundOffsets,m=e.isFixed,h=o.x,g=h===void 0?0:h,j=o.y,y=j===void 0?0:j,w=typeof u=="function"?u({x:g,y}):{x:g,y};g=w.x,y=w.y;var x=o.hasOwnProperty("x"),p=o.hasOwnProperty("y"),v=xr,N=pr,b=window;if(d){var C=Wl(s),S="clientHeight",k="clientWidth";if(C===Cr(s)&&(C=Jn(s),dn(C).position!=="static"&&l==="absolute"&&(S="scrollHeight",k="scrollWidth")),C=C,a===pr||(a===xr||a===qr)&&i===jl){N=Yr;var D=m&&C===b&&b.visualViewport?b.visualViewport.height:C[S];y-=D-n.height,y*=c?1:-1}if(a===xr||(a===pr||a===Yr)&&i===jl){v=qr;var L=m&&C===b&&b.visualViewport?b.visualViewport.width:C[k];g-=L-n.width,g*=c?1:-1}}var T=Object.assign({position:l},d&&$T),B=u===!0?FT({x:g,y},Cr(s)):{x:g,y};if(g=B.x,y=B.y,c){var V;return Object.assign({},T,(V={},V[N]=p?"0":"",V[v]=x?"0":"",V.transform=(b.devicePixelRatio||1)<=1?"translate("+g+"px, "+y+"px)":"translate3d("+g+"px, "+y+"px, 0)",V))}return Object.assign({},T,(t={},t[N]=p?y+"px":"",t[v]=x?g+"px":"",t.transform="",t))}function BT(e){var t=e.state,s=e.options,n=s.gpuAcceleration,a=n===void 0?!0:n,i=s.adaptive,o=i===void 0?!0:i,l=s.roundOffsets,c=l===void 0?!0:l,d={placement:Ms(t.placement),variation:Di(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:a,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Uv(Object.assign({},d,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:c})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Uv(Object.assign({},d,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const zT={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:BT,data:{}};var Cc={passive:!0};function UT(e){var t=e.state,s=e.instance,n=e.options,a=n.scroll,i=a===void 0?!0:a,o=n.resize,l=o===void 0?!0:o,c=Cr(t.elements.popper),d=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&d.forEach(function(u){u.addEventListener("scroll",s.update,Cc)}),l&&c.addEventListener("resize",s.update,Cc),function(){i&&d.forEach(function(u){u.removeEventListener("scroll",s.update,Cc)}),l&&c.removeEventListener("resize",s.update,Cc)}}const VT={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:UT,data:{}};var HT={left:"right",right:"left",bottom:"top",top:"bottom"};function Zc(e){return e.replace(/left|right|bottom|top/g,function(t){return HT[t]})}var WT={start:"end",end:"start"};function Vv(e){return e.replace(/start|end/g,function(t){return WT[t]})}function Ox(e){var t=Cr(e),s=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:s,scrollTop:n}}function Mx(e){return ki(Jn(e)).left+Ox(e).scrollLeft}function YT(e,t){var s=Cr(e),n=Jn(e),a=s.visualViewport,i=n.clientWidth,o=n.clientHeight,l=0,c=0;if(a){i=a.width,o=a.height;var d=u2();(d||!d&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:i,height:o,x:l+Mx(e),y:c}}function qT(e){var t,s=Jn(e),n=Ox(e),a=(t=e.ownerDocument)==null?void 0:t.body,i=ja(s.scrollWidth,s.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),o=ja(s.scrollHeight,s.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),l=-n.scrollLeft+Mx(e),c=-n.scrollTop;return dn(a||s).direction==="rtl"&&(l+=ja(s.clientWidth,a?a.clientWidth:0)-i),{width:i,height:o,x:l,y:c}}function Rx(e){var t=dn(e),s=t.overflow,n=t.overflowX,a=t.overflowY;return/auto|scroll|overlay|hidden/.test(s+a+n)}function x2(e){return["html","body","#document"].indexOf(Vn(e))>=0?e.ownerDocument.body:Rs(e)&&Rx(e)?e:x2($u(e))}function Fo(e,t){var s;t===void 0&&(t=[]);var n=x2(e),a=n===((s=e.ownerDocument)==null?void 0:s.body),i=Cr(n),o=a?[i].concat(i.visualViewport||[],Rx(n)?n:[]):n,l=t.concat(o);return a?l:l.concat(Fo($u(o)))}function zf(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function GT(e,t){var s=ki(e,!1,t==="fixed");return s.top=s.top+e.clientTop,s.left=s.left+e.clientLeft,s.bottom=s.top+e.clientHeight,s.right=s.left+e.clientWidth,s.width=e.clientWidth,s.height=e.clientHeight,s.x=s.left,s.y=s.top,s}function Hv(e,t,s){return t===d2?zf(YT(e,s)):Pa(t)?GT(t,s):zf(qT(Jn(e)))}function KT(e){var t=Fo($u(e)),s=["absolute","fixed"].indexOf(dn(e).position)>=0,n=s&&Rs(e)?Wl(e):e;return Pa(n)?t.filter(function(a){return Pa(a)&&m2(a,n)&&Vn(a)!=="body"}):[]}function XT(e,t,s,n){var a=t==="clippingParents"?KT(e):[].concat(t),i=[].concat(a,[s]),o=i[0],l=i.reduce(function(c,d){var u=Hv(e,d,n);return c.top=ja(u.top,c.top),c.right=Yd(u.right,c.right),c.bottom=Yd(u.bottom,c.bottom),c.left=ja(u.left,c.left),c},Hv(e,o,n));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function g2(e){var t=e.reference,s=e.element,n=e.placement,a=n?Ms(n):null,i=n?Di(n):null,o=t.x+t.width/2-s.width/2,l=t.y+t.height/2-s.height/2,c;switch(a){case pr:c={x:o,y:t.y-s.height};break;case Yr:c={x:o,y:t.y+t.height};break;case qr:c={x:t.x+t.width,y:l};break;case xr:c={x:t.x-s.width,y:l};break;default:c={x:t.x,y:t.y}}var d=a?_x(a):null;if(d!=null){var u=d==="y"?"height":"width";switch(i){case Si:c[d]=c[d]-(t[u]/2-s[u]/2);break;case jl:c[d]=c[d]+(t[u]/2-s[u]/2);break}}return c}function wl(e,t){t===void 0&&(t={});var s=t,n=s.placement,a=n===void 0?e.placement:n,i=s.strategy,o=i===void 0?e.strategy:i,l=s.boundary,c=l===void 0?yT:l,d=s.rootBoundary,u=d===void 0?d2:d,m=s.elementContext,h=m===void 0?fo:m,g=s.altBoundary,j=g===void 0?!1:g,y=s.padding,w=y===void 0?0:y,x=f2(typeof w!="number"?w:p2(w,Hl)),p=h===fo?bT:fo,v=e.rects.popper,N=e.elements[j?p:h],b=XT(Pa(N)?N:N.contextElement||Jn(e.elements.popper),c,u,o),C=ki(e.elements.reference),S=g2({reference:C,element:v,placement:a}),k=zf(Object.assign({},v,S)),D=h===fo?k:C,L={top:b.top-D.top+x.top,bottom:D.bottom-b.bottom+x.bottom,left:b.left-D.left+x.left,right:D.right-b.right+x.right},T=e.modifiersData.offset;if(h===fo&&T){var B=T[a];Object.keys(L).forEach(function(V){var A=[qr,Yr].indexOf(V)>=0?1:-1,I=[pr,Yr].indexOf(V)>=0?"y":"x";L[V]+=B[I]*A})}return L}function QT(e,t){t===void 0&&(t={});var s=t,n=s.placement,a=s.boundary,i=s.rootBoundary,o=s.padding,l=s.flipVariations,c=s.allowedAutoPlacements,d=c===void 0?Dx:c,u=Di(n),m=u?l?Bv:Bv.filter(function(j){return Di(j)===u}):Hl,h=m.filter(function(j){return d.indexOf(j)>=0});h.length===0&&(h=m);var g=h.reduce(function(j,y){return j[y]=wl(e,{placement:y,boundary:a,rootBoundary:i,padding:o})[Ms(y)],j},{});return Object.keys(g).sort(function(j,y){return g[j]-g[y]})}function JT(e){if(Ms(e)===kx)return[];var t=Zc(e);return[Vv(e),t,Vv(t)]}function ZT(e){var t=e.state,s=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var a=s.mainAxis,i=a===void 0?!0:a,o=s.altAxis,l=o===void 0?!0:o,c=s.fallbackPlacements,d=s.padding,u=s.boundary,m=s.rootBoundary,h=s.altBoundary,g=s.flipVariations,j=g===void 0?!0:g,y=s.allowedAutoPlacements,w=t.options.placement,x=Ms(w),p=x===w,v=c||(p||!j?[Zc(w)]:JT(w)),N=[w].concat(v).reduce(function(O,P){return O.concat(Ms(P)===kx?QT(t,{placement:P,boundary:u,rootBoundary:m,padding:d,flipVariations:j,allowedAutoPlacements:y}):P)},[]),b=t.rects.reference,C=t.rects.popper,S=new Map,k=!0,D=N[0],L=0;L<N.length;L++){var T=N[L],B=Ms(T),V=Di(T)===Si,A=[pr,Yr].indexOf(B)>=0,I=A?"width":"height",q=wl(t,{placement:T,boundary:u,rootBoundary:m,altBoundary:h,padding:d}),Y=A?V?qr:xr:V?Yr:pr;b[I]>C[I]&&(Y=Zc(Y));var M=Zc(Y),W=[];if(i&&W.push(q[B]<=0),l&&W.push(q[Y]<=0,q[M]<=0),W.every(function(O){return O})){D=T,k=!1;break}S.set(T,W)}if(k)for(var E=j?3:1,R=function(P){var F=N.find(function(Q){var X=S.get(Q);if(X)return X.slice(0,P).every(function(re){return re})});if(F)return D=F,"break"},$=E;$>0;$--){var _=R($);if(_==="break")break}t.placement!==D&&(t.modifiersData[n]._skip=!0,t.placement=D,t.reset=!0)}}const e3={name:"flip",enabled:!0,phase:"main",fn:ZT,requiresIfExists:["offset"],data:{_skip:!1}};function Wv(e,t,s){return s===void 0&&(s={x:0,y:0}),{top:e.top-t.height-s.y,right:e.right-t.width+s.x,bottom:e.bottom-t.height+s.y,left:e.left-t.width-s.x}}function Yv(e){return[pr,qr,Yr,xr].some(function(t){return e[t]>=0})}function t3(e){var t=e.state,s=e.name,n=t.rects.reference,a=t.rects.popper,i=t.modifiersData.preventOverflow,o=wl(t,{elementContext:"reference"}),l=wl(t,{altBoundary:!0}),c=Wv(o,n),d=Wv(l,a,i),u=Yv(c),m=Yv(d);t.modifiersData[s]={referenceClippingOffsets:c,popperEscapeOffsets:d,isReferenceHidden:u,hasPopperEscaped:m},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":m})}const r3={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:t3};function s3(e,t,s){var n=Ms(e),a=[xr,pr].indexOf(n)>=0?-1:1,i=typeof s=="function"?s(Object.assign({},t,{placement:e})):s,o=i[0],l=i[1];return o=o||0,l=(l||0)*a,[xr,qr].indexOf(n)>=0?{x:l,y:o}:{x:o,y:l}}function n3(e){var t=e.state,s=e.options,n=e.name,a=s.offset,i=a===void 0?[0,0]:a,o=Dx.reduce(function(u,m){return u[m]=s3(m,t.rects,i),u},{}),l=o[t.placement],c=l.x,d=l.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=d),t.modifiersData[n]=o}const a3={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:n3};function i3(e){var t=e.state,s=e.name;t.modifiersData[s]=g2({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const o3={name:"popperOffsets",enabled:!0,phase:"read",fn:i3,data:{}};function l3(e){return e==="x"?"y":"x"}function c3(e){var t=e.state,s=e.options,n=e.name,a=s.mainAxis,i=a===void 0?!0:a,o=s.altAxis,l=o===void 0?!1:o,c=s.boundary,d=s.rootBoundary,u=s.altBoundary,m=s.padding,h=s.tether,g=h===void 0?!0:h,j=s.tetherOffset,y=j===void 0?0:j,w=wl(t,{boundary:c,rootBoundary:d,padding:m,altBoundary:u}),x=Ms(t.placement),p=Di(t.placement),v=!p,N=_x(x),b=l3(N),C=t.modifiersData.popperOffsets,S=t.rects.reference,k=t.rects.popper,D=typeof y=="function"?y(Object.assign({},t.rects,{placement:t.placement})):y,L=typeof D=="number"?{mainAxis:D,altAxis:D}:Object.assign({mainAxis:0,altAxis:0},D),T=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,B={x:0,y:0};if(C){if(i){var V,A=N==="y"?pr:xr,I=N==="y"?Yr:qr,q=N==="y"?"height":"width",Y=C[N],M=Y+w[A],W=Y-w[I],E=g?-k[q]/2:0,R=p===Si?S[q]:k[q],$=p===Si?-k[q]:-S[q],_=t.elements.arrow,O=g&&_?Tx(_):{width:0,height:0},P=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:h2(),F=P[A],Q=P[I],X=$o(0,S[q],O[q]),re=v?S[q]/2-E-X-F-L.mainAxis:R-X-F-L.mainAxis,G=v?-S[q]/2+E+X+Q+L.mainAxis:$+X+Q+L.mainAxis,le=t.elements.arrow&&Wl(t.elements.arrow),ie=le?N==="y"?le.clientTop||0:le.clientLeft||0:0,xe=(V=T==null?void 0:T[N])!=null?V:0,je=Y+re-xe-ie,Pe=Y+G-xe,ee=$o(g?Yd(M,je):M,Y,g?ja(W,Pe):W);C[N]=ee,B[N]=ee-Y}if(l){var pe,be=N==="x"?pr:xr,we=N==="x"?Yr:qr,ke=C[b],Ue=b==="y"?"height":"width",ct=ke+w[be],sr=ke-w[we],Ar=[pr,xr].indexOf(x)!==-1,xs=(pe=T==null?void 0:T[b])!=null?pe:0,Vs=Ar?ct:ke-S[Ue]-k[Ue]-xs+L.altAxis,Ge=Ar?ke+S[Ue]+k[Ue]-xs-L.altAxis:sr,z=g&&Ar?MT(Vs,ke,Ge):$o(g?Vs:ct,ke,g?Ge:sr);C[b]=z,B[b]=z-ke}t.modifiersData[n]=B}}const d3={name:"preventOverflow",enabled:!0,phase:"main",fn:c3,requiresIfExists:["offset"]};function u3(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function m3(e){return e===Cr(e)||!Rs(e)?Ox(e):u3(e)}function h3(e){var t=e.getBoundingClientRect(),s=Ei(t.width)/e.offsetWidth||1,n=Ei(t.height)/e.offsetHeight||1;return s!==1||n!==1}function f3(e,t,s){s===void 0&&(s=!1);var n=Rs(t),a=Rs(t)&&h3(t),i=Jn(t),o=ki(e,a,s),l={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(n||!n&&!s)&&((Vn(t)!=="body"||Rx(i))&&(l=m3(t)),Rs(t)?(c=ki(t,!0),c.x+=t.clientLeft,c.y+=t.clientTop):i&&(c.x=Mx(i))),{x:o.left+l.scrollLeft-c.x,y:o.top+l.scrollTop-c.y,width:o.width,height:o.height}}function p3(e){var t=new Map,s=new Set,n=[];e.forEach(function(i){t.set(i.name,i)});function a(i){s.add(i.name);var o=[].concat(i.requires||[],i.requiresIfExists||[]);o.forEach(function(l){if(!s.has(l)){var c=t.get(l);c&&a(c)}}),n.push(i)}return e.forEach(function(i){s.has(i.name)||a(i)}),n}function x3(e){var t=p3(e);return TT.reduce(function(s,n){return s.concat(t.filter(function(a){return a.phase===n}))},[])}function g3(e){var t;return function(){return t||(t=new Promise(function(s){Promise.resolve().then(function(){t=void 0,s(e())})})),t}}function v3(e){var t=e.reduce(function(s,n){var a=s[n.name];return s[n.name]=a?Object.assign({},a,n,{options:Object.assign({},a.options,n.options),data:Object.assign({},a.data,n.data)}):n,s},{});return Object.keys(t).map(function(s){return t[s]})}var qv={placement:"bottom",modifiers:[],strategy:"absolute"};function Gv(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function y3(e){e===void 0&&(e={});var t=e,s=t.defaultModifiers,n=s===void 0?[]:s,a=t.defaultOptions,i=a===void 0?qv:a;return function(l,c,d){d===void 0&&(d=i);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},qv,i),modifiersData:{},elements:{reference:l,popper:c},attributes:{},styles:{}},m=[],h=!1,g={state:u,setOptions:function(x){var p=typeof x=="function"?x(u.options):x;y(),u.options=Object.assign({},i,u.options,p),u.scrollParents={reference:Pa(l)?Fo(l):l.contextElement?Fo(l.contextElement):[],popper:Fo(c)};var v=x3(v3([].concat(n,u.options.modifiers)));return u.orderedModifiers=v.filter(function(N){return N.enabled}),j(),g.update()},forceUpdate:function(){if(!h){var x=u.elements,p=x.reference,v=x.popper;if(Gv(p,v)){u.rects={reference:f3(p,Wl(v),u.options.strategy==="fixed"),popper:Tx(v)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(L){return u.modifiersData[L.name]=Object.assign({},L.data)});for(var N=0;N<u.orderedModifiers.length;N++){if(u.reset===!0){u.reset=!1,N=-1;continue}var b=u.orderedModifiers[N],C=b.fn,S=b.options,k=S===void 0?{}:S,D=b.name;typeof C=="function"&&(u=C({state:u,options:k,name:D,instance:g})||u)}}}},update:g3(function(){return new Promise(function(w){g.forceUpdate(),w(u)})}),destroy:function(){y(),h=!0}};if(!Gv(l,c))return g;g.setOptions(d).then(function(w){!h&&d.onFirstUpdate&&d.onFirstUpdate(w)});function j(){u.orderedModifiers.forEach(function(w){var x=w.name,p=w.options,v=p===void 0?{}:p,N=w.effect;if(typeof N=="function"){var b=N({state:u,name:x,instance:g,options:v}),C=function(){};m.push(b||C)}})}function y(){m.forEach(function(w){return w()}),m=[]}return g}}var b3=y3({defaultModifiers:[r3,o3,zT,VT,a3,e3,d3,IT]}),Kv=function(t){return{position:t,top:"0",left:"0",opacity:"0",pointerEvents:"none"}},j3={name:"applyStyles",enabled:!1},w3={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:function(t){var s=t.state;return function(){var n=s.elements,a=n.reference,i=n.popper;if("removeAttribute"in a){var o=(a.getAttribute("aria-describedby")||"").split(",").filter(function(l){return l.trim()!==i.id});o.length?a.setAttribute("aria-describedby",o.join(",")):a.removeAttribute("aria-describedby")}}},fn:function(t){var s,n=t.state,a=n.elements,i=a.popper,o=a.reference,l=(s=i.getAttribute("role"))==null?void 0:s.toLowerCase();if(i.id&&l==="tooltip"&&"setAttribute"in o){var c=o.getAttribute("aria-describedby");if(c&&c.split(",").indexOf(i.id)!==-1)return;o.setAttribute("aria-describedby",c?c+","+i.id:i.id)}}},N3=[];function C3(e,t,s){var n=s===void 0?{}:s,a=n.enabled,i=a===void 0?!0:a,o=n.placement,l=o===void 0?"bottom":o,c=n.strategy,d=c===void 0?"absolute":c,u=n.modifiers,m=u===void 0?N3:u,h=Pu(n,["enabled","placement","strategy","modifiers"]),g=f.useRef(),j=f.useCallback(function(){var N;(N=g.current)==null||N.update()},[]),y=f.useCallback(function(){var N;(N=g.current)==null||N.forceUpdate()},[]),w=vT(f.useState({placement:l,update:j,forceUpdate:y,attributes:{},styles:{popper:Kv(d),arrow:{}}})),x=w[0],p=w[1],v=f.useMemo(function(){return{name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:function(b){var C=b.state,S={},k={};Object.keys(C.elements).forEach(function(D){S[D]=C.styles[D],k[D]=C.attributes[D]}),p({state:C,styles:S,attributes:k,update:j,forceUpdate:y,placement:C.placement})}}},[j,y,p]);return f.useEffect(function(){!g.current||!i||g.current.setOptions({placement:l,strategy:d,modifiers:[].concat(m,[v,j3])})},[d,l,v,i]),f.useEffect(function(){if(!(!i||e==null||t==null))return g.current=b3(e,t,ut({},h,{placement:l,strategy:d,modifiers:[].concat(m,[w3,v])})),function(){g.current!=null&&(g.current.destroy(),g.current=void 0,p(function(N){return ut({},N,{attributes:{},styles:{popper:Kv(d)}})}))}},[i,e,t]),x}function S3(e,t,s,n){var a=n&&typeof n!="boolean"?n.capture:n;e.removeEventListener(t,s,a),s.__once&&e.removeEventListener(t,s.__once,a)}function Eo(e,t,s,n){return pT(e,t,s,n),function(){S3(e,t,s,n)}}var E3=function(){},k3=E3;const D3=vr(k3);function A3(e){return e&&"setState"in e?zw.findDOMNode(e):e??null}const T3=function(e){return Vl(A3(e))};var _3=27,Xv=function(){};function O3(e){return e.button===0}function M3(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}var Qv=function(t){return t&&("current"in t?t.current:t)};function R3(e,t,s){var n=s===void 0?{}:s,a=n.disabled,i=n.clickTrigger,o=i===void 0?"click":i,l=f.useRef(!1),c=t||Xv,d=f.useCallback(function(h){var g,j=Qv(e);D3(!!j,"RootClose captured a close event but does not have a ref to compare it to. useRootClose(), should be passed a ref that resolves to a DOM node"),l.current=!j||M3(h)||!O3(h)||!!bl(j,(g=h.composedPath==null?void 0:h.composedPath()[0])!=null?g:h.target)},[e]),u=$v(function(h){l.current||c(h)}),m=$v(function(h){h.keyCode===_3&&c(h)});f.useEffect(function(){if(!(a||e==null)){var h=window.event,g=T3(Qv(e)),j=Eo(g,o,d,!0),y=Eo(g,o,function(p){if(p===h){h=void 0;return}u(p)}),w=Eo(g,"keyup",function(p){if(p===h){h=void 0;return}m(p)}),x=[];return"ontouchstart"in g.documentElement&&(x=[].slice.call(g.body.children).map(function(p){return Eo(p,"mousemove",Xv)})),function(){j(),y(),w(),x.forEach(function(p){return p()})}}},[e,a,o,d,u,m])}function P3(e){var t={};return Array.isArray(e)?(e==null||e.forEach(function(s){t[s.name]=s}),t):e||t}function L3(e){return e===void 0&&(e={}),Array.isArray(e)?e:Object.keys(e).map(function(t){return e[t].name=t,e[t]})}function I3(e){var t,s,n,a,i=e.enabled,o=e.enableEvents,l=e.placement,c=e.flip,d=e.offset,u=e.fixed,m=e.containerPadding,h=e.arrowElement,g=e.popperConfig,j=g===void 0?{}:g,y=P3(j.modifiers);return ut({},j,{placement:l,enabled:i,strategy:u?"fixed":j.strategy,modifiers:L3(ut({},y,{eventListeners:{enabled:o},preventOverflow:ut({},y.preventOverflow,{options:m?ut({padding:m},(t=y.preventOverflow)==null?void 0:t.options):(s=y.preventOverflow)==null?void 0:s.options}),offset:{options:ut({offset:d},(n=y.offset)==null?void 0:n.options)},arrow:ut({},y.arrow,{enabled:!!h,options:ut({},(a=y.arrow)==null?void 0:a.options,{element:h})}),flip:ut({enabled:!!c},y.flip)}))})}function $3(e,t){return e.classList?e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function F3(e,t){e.classList?e.classList.add(t):$3(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function Jv(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function B3(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=Jv(e.className,t):e.setAttribute("class",Jv(e.className&&e.className.baseVal||"",t))}var Sc;function Px(e){if((!Sc&&Sc!==0||e)&&Ex){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),Sc=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Sc}var uh=function(t){var s;return typeof document>"u"?null:t==null?Vl().body:(typeof t=="function"&&(t=t()),t&&"current"in t&&(t=t.current),(s=t)!=null&&s.nodeType&&t||null)};function Zv(e,t){var s=f.useState(function(){return uh(e)}),n=s[0],a=s[1];if(!n){var i=uh(e);i&&a(i)}return f.useEffect(function(){},[t,n]),f.useEffect(function(){var o=uh(e);o!==n&&a(o)},[e,n]),n}const ey=e=>!e||typeof e=="function"?e:t=>{e.current=t};function z3(e,t){const s=ey(e),n=ey(t);return a=>{s&&s(a),n&&n(a)}}function U3(e,t){return f.useMemo(()=>z3(e,t),[e,t])}var Lx=H.forwardRef(function(e,t){var s=e.flip,n=e.offset,a=e.placement,i=e.containerPadding,o=i===void 0?5:i,l=e.popperConfig,c=l===void 0?{}:l,d=e.transition,u=Fv(),m=u[0],h=u[1],g=Fv(),j=g[0],y=g[1],w=U3(h,t),x=Zv(e.container),p=Zv(e.target),v=f.useState(!e.show),N=v[0],b=v[1],C=C3(p,m,I3({placement:a,enableEvents:!!e.show,containerPadding:o||5,flip:s,offset:n,arrowElement:j,popperConfig:c})),S=C.styles,k=C.attributes,D=Pu(C,["styles","attributes"]);e.show?N&&b(!1):!e.transition&&!N&&b(!0);var L=function(){b(!0),e.onExited&&e.onExited.apply(e,arguments)},T=e.show||d&&!N;if(R3(m,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!T)return null;var B=e.children(ut({},D,{show:!!e.show,props:ut({},k.popper,{style:S.popper,ref:w}),arrowProps:ut({},k.arrow,{style:S.arrow,ref:y})}));if(d){var V=e.onExit,A=e.onExiting,I=e.onEnter,q=e.onEntering,Y=e.onEntered;B=H.createElement(d,{in:e.show,appear:!0,onExit:V,onExiting:A,onExited:L,onEnter:I,onEntering:q,onEntered:Y},B)}return x?zw.createPortal(B,x):null});Lx.displayName="Overlay";Lx.propTypes={show:oe.bool,placement:oe.oneOf(Dx),target:oe.any,container:oe.any,flip:oe.bool,children:oe.func.isRequired,containerPadding:oe.number,popperConfig:oe.object,rootClose:oe.bool,rootCloseEvent:oe.oneOf(["click","mousedown"]),rootCloseDisabled:oe.bool,onHide:function(t){for(var s=arguments.length,n=new Array(s>1?s-1:0),a=1;a<s;a++)n[a-1]=arguments[a];if(t.rootClose){var i;return(i=oe.func).isRequired.apply(i,[t].concat(n))}return oe.func.apply(oe,[t].concat(n))},transition:oe.elementType,onEnter:oe.func,onEntering:oe.func,onEntered:oe.func,onExit:oe.func,onExiting:oe.func,onExited:oe.func};function V3(){this.__data__=[],this.size=0}var H3=V3,W3=Bl;function Y3(e,t){for(var s=e.length;s--;)if(W3(e[s][0],t))return s;return-1}var Fu=Y3,q3=Fu,G3=Array.prototype,K3=G3.splice;function X3(e){var t=this.__data__,s=q3(t,e);if(s<0)return!1;var n=t.length-1;return s==n?t.pop():K3.call(t,s,1),--this.size,!0}var Q3=X3,J3=Fu;function Z3(e){var t=this.__data__,s=J3(t,e);return s<0?void 0:t[s][1]}var e_=Z3,t_=Fu;function r_(e){return t_(this.__data__,e)>-1}var s_=r_,n_=Fu;function a_(e,t){var s=this.__data__,n=n_(s,e);return n<0?(++this.size,s.push([e,t])):s[n][1]=t,this}var i_=a_,o_=H3,l_=Q3,c_=e_,d_=s_,u_=i_;function Ui(e){var t=-1,s=e==null?0:e.length;for(this.clear();++t<s;){var n=e[t];this.set(n[0],n[1])}}Ui.prototype.clear=o_;Ui.prototype.delete=l_;Ui.prototype.get=c_;Ui.prototype.has=d_;Ui.prototype.set=u_;var Bu=Ui,m_=Bu;function h_(){this.__data__=new m_,this.size=0}var f_=h_;function p_(e){var t=this.__data__,s=t.delete(e);return this.size=t.size,s}var x_=p_;function g_(e){return this.__data__.get(e)}var v_=g_;function y_(e){return this.__data__.has(e)}var b_=y_,j_=Bs,w_=j_["__core-js_shared__"],N_=w_,mh=N_,ty=function(){var e=/[^.]+$/.exec(mh&&mh.keys&&mh.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function C_(e){return!!ty&&ty in e}var S_=C_,E_=Function.prototype,k_=E_.toString;function D_(e){if(e!=null){try{return k_.call(e)}catch{}try{return e+""}catch{}}return""}var v2=D_,A_=wx,T_=S_,__=hn,O_=v2,M_=/[\\^$.*+?()[\]{}|]/g,R_=/^\[object .+?Constructor\]$/,P_=Function.prototype,L_=Object.prototype,I_=P_.toString,$_=L_.hasOwnProperty,F_=RegExp("^"+I_.call($_).replace(M_,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function B_(e){if(!__(e)||T_(e))return!1;var t=A_(e)?F_:R_;return t.test(O_(e))}var z_=B_;function U_(e,t){return e==null?void 0:e[t]}var V_=U_,H_=z_,W_=V_;function Y_(e,t){var s=W_(e,t);return H_(s)?s:void 0}var Fa=Y_,q_=Fa,G_=Bs,K_=q_(G_,"Map"),Ix=K_,X_=Fa,Q_=X_(Object,"create"),zu=Q_,ry=zu;function J_(){this.__data__=ry?ry(null):{},this.size=0}var Z_=J_;function eO(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var tO=eO,rO=zu,sO="__lodash_hash_undefined__",nO=Object.prototype,aO=nO.hasOwnProperty;function iO(e){var t=this.__data__;if(rO){var s=t[e];return s===sO?void 0:s}return aO.call(t,e)?t[e]:void 0}var oO=iO,lO=zu,cO=Object.prototype,dO=cO.hasOwnProperty;function uO(e){var t=this.__data__;return lO?t[e]!==void 0:dO.call(t,e)}var mO=uO,hO=zu,fO="__lodash_hash_undefined__";function pO(e,t){var s=this.__data__;return this.size+=this.has(e)?0:1,s[e]=hO&&t===void 0?fO:t,this}var xO=pO,gO=Z_,vO=tO,yO=oO,bO=mO,jO=xO;function Vi(e){var t=-1,s=e==null?0:e.length;for(this.clear();++t<s;){var n=e[t];this.set(n[0],n[1])}}Vi.prototype.clear=gO;Vi.prototype.delete=vO;Vi.prototype.get=yO;Vi.prototype.has=bO;Vi.prototype.set=jO;var wO=Vi,sy=wO,NO=Bu,CO=Ix;function SO(){this.size=0,this.__data__={hash:new sy,map:new(CO||NO),string:new sy}}var EO=SO;function kO(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var DO=kO,AO=DO;function TO(e,t){var s=e.__data__;return AO(t)?s[typeof t=="string"?"string":"hash"]:s.map}var Uu=TO,_O=Uu;function OO(e){var t=_O(this,e).delete(e);return this.size-=t?1:0,t}var MO=OO,RO=Uu;function PO(e){return RO(this,e).get(e)}var LO=PO,IO=Uu;function $O(e){return IO(this,e).has(e)}var FO=$O,BO=Uu;function zO(e,t){var s=BO(this,e),n=s.size;return s.set(e,t),this.size+=s.size==n?0:1,this}var UO=zO,VO=EO,HO=MO,WO=LO,YO=FO,qO=UO;function Hi(e){var t=-1,s=e==null?0:e.length;for(this.clear();++t<s;){var n=e[t];this.set(n[0],n[1])}}Hi.prototype.clear=VO;Hi.prototype.delete=HO;Hi.prototype.get=WO;Hi.prototype.has=YO;Hi.prototype.set=qO;var $x=Hi,GO=Bu,KO=Ix,XO=$x,QO=200;function JO(e,t){var s=this.__data__;if(s instanceof GO){var n=s.__data__;if(!KO||n.length<QO-1)return n.push([e,t]),this.size=++s.size,this;s=this.__data__=new XO(n)}return s.set(e,t),this.size=s.size,this}var ZO=JO,eM=Bu,tM=f_,rM=x_,sM=v_,nM=b_,aM=ZO;function Wi(e){var t=this.__data__=new eM(e);this.size=t.size}Wi.prototype.clear=tM;Wi.prototype.delete=rM;Wi.prototype.get=sM;Wi.prototype.has=nM;Wi.prototype.set=aM;var Fx=Wi,iM="__lodash_hash_undefined__";function oM(e){return this.__data__.set(e,iM),this}var lM=oM;function cM(e){return this.__data__.has(e)}var dM=cM,uM=$x,mM=lM,hM=dM;function qd(e){var t=-1,s=e==null?0:e.length;for(this.__data__=new uM;++t<s;)this.add(e[t])}qd.prototype.add=qd.prototype.push=mM;qd.prototype.has=hM;var fM=qd;function pM(e,t){for(var s=-1,n=e==null?0:e.length;++s<n;)if(t(e[s],s,e))return!0;return!1}var xM=pM;function gM(e,t){return e.has(t)}var vM=gM,yM=fM,bM=xM,jM=vM,wM=1,NM=2;function CM(e,t,s,n,a,i){var o=s&wM,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var d=i.get(e),u=i.get(t);if(d&&u)return d==t&&u==e;var m=-1,h=!0,g=s&NM?new yM:void 0;for(i.set(e,t),i.set(t,e);++m<l;){var j=e[m],y=t[m];if(n)var w=o?n(y,j,m,t,e,i):n(j,y,m,e,t,i);if(w!==void 0){if(w)continue;h=!1;break}if(g){if(!bM(t,function(x,p){if(!jM(g,p)&&(j===x||a(j,x,s,n,i)))return g.push(p)})){h=!1;break}}else if(!(j===y||a(j,y,s,n,i))){h=!1;break}}return i.delete(e),i.delete(t),h}var y2=CM,SM=Bs,EM=SM.Uint8Array,b2=EM;function kM(e){var t=-1,s=Array(e.size);return e.forEach(function(n,a){s[++t]=[a,n]}),s}var DM=kM;function AM(e){var t=-1,s=Array(e.size);return e.forEach(function(n){s[++t]=n}),s}var TM=AM,ny=Bi,ay=b2,_M=Bl,OM=y2,MM=DM,RM=TM,PM=1,LM=2,IM="[object Boolean]",$M="[object Date]",FM="[object Error]",BM="[object Map]",zM="[object Number]",UM="[object RegExp]",VM="[object Set]",HM="[object String]",WM="[object Symbol]",YM="[object ArrayBuffer]",qM="[object DataView]",iy=ny?ny.prototype:void 0,hh=iy?iy.valueOf:void 0;function GM(e,t,s,n,a,i,o){switch(s){case qM:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case YM:return!(e.byteLength!=t.byteLength||!i(new ay(e),new ay(t)));case IM:case $M:case zM:return _M(+e,+t);case FM:return e.name==t.name&&e.message==t.message;case UM:case HM:return e==t+"";case BM:var l=MM;case VM:var c=n&PM;if(l||(l=RM),e.size!=t.size&&!c)return!1;var d=o.get(e);if(d)return d==t;n|=LM,o.set(e,t);var u=OM(l(e),l(t),n,a,i,o);return o.delete(e),u;case WM:if(hh)return hh.call(e)==hh.call(t)}return!1}var KM=GM;function XM(e,t){for(var s=-1,n=t.length,a=e.length;++s<n;)e[a+s]=t[s];return e}var Bx=XM,QM=Array.isArray,Gr=QM,JM=Bx,ZM=Gr;function eR(e,t,s){var n=t(e);return ZM(e)?n:JM(n,s(e))}var j2=eR;function tR(e,t){for(var s=-1,n=e==null?0:e.length,a=0,i=[];++s<n;){var o=e[s];t(o,s,e)&&(i[a++]=o)}return i}var rR=tR;function sR(){return[]}var w2=sR,nR=rR,aR=w2,iR=Object.prototype,oR=iR.propertyIsEnumerable,oy=Object.getOwnPropertySymbols,lR=oy?function(e){return e==null?[]:(e=Object(e),nR(oy(e),function(t){return oR.call(e,t)}))}:aR,zx=lR;function cR(e,t){for(var s=-1,n=Array(e);++s<e;)n[s]=t(s);return n}var dR=cR,uR=zi,mR=Qn,hR="[object Arguments]";function fR(e){return mR(e)&&uR(e)==hR}var pR=fR,ly=pR,xR=Qn,N2=Object.prototype,gR=N2.hasOwnProperty,vR=N2.propertyIsEnumerable,yR=ly(function(){return arguments}())?ly:function(e){return xR(e)&&gR.call(e,"callee")&&!vR.call(e,"callee")},Ux=yR,Gd={exports:{}};function bR(){return!1}var jR=bR;Gd.exports;(function(e,t){var s=Bs,n=jR,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,l=o?s.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||n;e.exports=d})(Gd,Gd.exports);var Vu=Gd.exports,wR=zi,NR=Nx,CR=Qn,SR="[object Arguments]",ER="[object Array]",kR="[object Boolean]",DR="[object Date]",AR="[object Error]",TR="[object Function]",_R="[object Map]",OR="[object Number]",MR="[object Object]",RR="[object RegExp]",PR="[object Set]",LR="[object String]",IR="[object WeakMap]",$R="[object ArrayBuffer]",FR="[object DataView]",BR="[object Float32Array]",zR="[object Float64Array]",UR="[object Int8Array]",VR="[object Int16Array]",HR="[object Int32Array]",WR="[object Uint8Array]",YR="[object Uint8ClampedArray]",qR="[object Uint16Array]",GR="[object Uint32Array]",Qe={};Qe[BR]=Qe[zR]=Qe[UR]=Qe[VR]=Qe[HR]=Qe[WR]=Qe[YR]=Qe[qR]=Qe[GR]=!0;Qe[SR]=Qe[ER]=Qe[$R]=Qe[kR]=Qe[FR]=Qe[DR]=Qe[AR]=Qe[TR]=Qe[_R]=Qe[OR]=Qe[MR]=Qe[RR]=Qe[PR]=Qe[LR]=Qe[IR]=!1;function KR(e){return CR(e)&&NR(e.length)&&!!Qe[wR(e)]}var XR=KR;function QR(e){return function(t){return e(t)}}var Hu=QR,Kd={exports:{}};Kd.exports;(function(e,t){var s=t2,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===n,o=i&&s.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(Kd,Kd.exports);var Vx=Kd.exports,JR=XR,ZR=Hu,cy=Vx,dy=cy&&cy.isTypedArray,eP=dy?ZR(dy):JR,Hx=eP,tP=dR,rP=Ux,sP=Gr,nP=Vu,aP=Cx,iP=Hx,oP=Object.prototype,lP=oP.hasOwnProperty;function cP(e,t){var s=sP(e),n=!s&&rP(e),a=!s&&!n&&nP(e),i=!s&&!n&&!a&&iP(e),o=s||n||a||i,l=o?tP(e.length,String):[],c=l.length;for(var d in e)(t||lP.call(e,d))&&!(o&&(d=="length"||a&&(d=="offset"||d=="parent")||i&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||aP(d,c)))&&l.push(d);return l}var C2=cP,dP=Object.prototype;function uP(e){var t=e&&e.constructor,s=typeof t=="function"&&t.prototype||dP;return e===s}var Wx=uP;function mP(e,t){return function(s){return e(t(s))}}var S2=mP,hP=S2,fP=hP(Object.keys,Object),pP=fP,xP=Wx,gP=pP,vP=Object.prototype,yP=vP.hasOwnProperty;function bP(e){if(!xP(e))return gP(e);var t=[];for(var s in Object(e))yP.call(e,s)&&s!="constructor"&&t.push(s);return t}var jP=bP,wP=C2,NP=jP,CP=zl;function SP(e){return CP(e)?wP(e):NP(e)}var Yl=SP,EP=j2,kP=zx,DP=Yl;function AP(e){return EP(e,DP,kP)}var E2=AP,uy=E2,TP=1,_P=Object.prototype,OP=_P.hasOwnProperty;function MP(e,t,s,n,a,i){var o=s&TP,l=uy(e),c=l.length,d=uy(t),u=d.length;if(c!=u&&!o)return!1;for(var m=c;m--;){var h=l[m];if(!(o?h in t:OP.call(t,h)))return!1}var g=i.get(e),j=i.get(t);if(g&&j)return g==t&&j==e;var y=!0;i.set(e,t),i.set(t,e);for(var w=o;++m<c;){h=l[m];var x=e[h],p=t[h];if(n)var v=o?n(p,x,h,t,e,i):n(x,p,h,e,t,i);if(!(v===void 0?x===p||a(x,p,s,n,i):v)){y=!1;break}w||(w=h=="constructor")}if(y&&!w){var N=e.constructor,b=t.constructor;N!=b&&"constructor"in e&&"constructor"in t&&!(typeof N=="function"&&N instanceof N&&typeof b=="function"&&b instanceof b)&&(y=!1)}return i.delete(e),i.delete(t),y}var RP=MP,PP=Fa,LP=Bs,IP=PP(LP,"DataView"),$P=IP,FP=Fa,BP=Bs,zP=FP(BP,"Promise"),UP=zP,VP=Fa,HP=Bs,WP=VP(HP,"Set"),YP=WP,qP=Fa,GP=Bs,KP=qP(GP,"WeakMap"),XP=KP,Uf=$P,Vf=Ix,Hf=UP,Wf=YP,Yf=XP,k2=zi,Yi=v2,my="[object Map]",QP="[object Object]",hy="[object Promise]",fy="[object Set]",py="[object WeakMap]",xy="[object DataView]",JP=Yi(Uf),ZP=Yi(Vf),eL=Yi(Hf),tL=Yi(Wf),rL=Yi(Yf),ca=k2;(Uf&&ca(new Uf(new ArrayBuffer(1)))!=xy||Vf&&ca(new Vf)!=my||Hf&&ca(Hf.resolve())!=hy||Wf&&ca(new Wf)!=fy||Yf&&ca(new Yf)!=py)&&(ca=function(e){var t=k2(e),s=t==QP?e.constructor:void 0,n=s?Yi(s):"";if(n)switch(n){case JP:return xy;case ZP:return my;case eL:return hy;case tL:return fy;case rL:return py}return t});var Wu=ca,fh=Fx,sL=y2,nL=KM,aL=RP,gy=Wu,vy=Gr,yy=Vu,iL=Hx,oL=1,by="[object Arguments]",jy="[object Array]",Ec="[object Object]",lL=Object.prototype,wy=lL.hasOwnProperty;function cL(e,t,s,n,a,i){var o=vy(e),l=vy(t),c=o?jy:gy(e),d=l?jy:gy(t);c=c==by?Ec:c,d=d==by?Ec:d;var u=c==Ec,m=d==Ec,h=c==d;if(h&&yy(e)){if(!yy(t))return!1;o=!0,u=!1}if(h&&!u)return i||(i=new fh),o||iL(e)?sL(e,t,s,n,a,i):nL(e,t,c,s,n,a,i);if(!(s&oL)){var g=u&&wy.call(e,"__wrapped__"),j=m&&wy.call(t,"__wrapped__");if(g||j){var y=g?e.value():e,w=j?t.value():t;return i||(i=new fh),a(y,w,s,n,i)}}return h?(i||(i=new fh),aL(e,t,s,n,a,i)):!1}var dL=cL,uL=dL,Ny=Qn;function D2(e,t,s,n,a){return e===t?!0:e==null||t==null||!Ny(e)&&!Ny(t)?e!==e&&t!==t:uL(e,t,s,n,D2,a)}var Yx=D2,mL=Yx;function hL(e,t){return mL(e,t)}var fL=hL;const pL=vr(fL);function ph(e,t){var s=Sx(e);return s?s.innerHeight:ba(e).height}function A2(e,t,s){e.closest&&!s&&e.closest(t);var n=e;do{if(mT(n,t))return n;n=n.parentElement}while(n&&n!==s&&n.nodeType===document.ELEMENT_NODE);return null}function xL(e,t,s,n){for(var a=e.length,i=s+(n?1:-1);n?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var gL=xL,vL=Fx,yL=Yx,bL=1,jL=2;function wL(e,t,s,n){var a=s.length,i=a,o=!n;if(e==null)return!i;for(e=Object(e);a--;){var l=s[a];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<i;){l=s[a];var c=l[0],d=e[c],u=l[1];if(o&&l[2]){if(d===void 0&&!(c in e))return!1}else{var m=new vL;if(n)var h=n(d,u,c,e,t,m);if(!(h===void 0?yL(u,d,bL|jL,n,m):h))return!1}}return!0}var NL=wL,CL=hn;function SL(e){return e===e&&!CL(e)}var T2=SL,EL=T2,kL=Yl;function DL(e){for(var t=kL(e),s=t.length;s--;){var n=t[s],a=e[n];t[s]=[n,a,EL(a)]}return t}var AL=DL;function TL(e,t){return function(s){return s==null?!1:s[e]===t&&(t!==void 0||e in Object(s))}}var _2=TL,_L=NL,OL=AL,ML=_2;function RL(e){var t=OL(e);return t.length==1&&t[0][2]?ML(t[0][0],t[0][1]):function(s){return s===e||_L(s,e,t)}}var PL=RL,LL=Gr,IL=Ul,$L=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,FL=/^\w*$/;function BL(e,t){if(LL(e))return!1;var s=typeof e;return s=="number"||s=="symbol"||s=="boolean"||e==null||IL(e)?!0:FL.test(e)||!$L.test(e)||t!=null&&e in Object(t)}var qx=BL,O2=$x,zL="Expected a function";function Gx(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(zL);var s=function(){var n=arguments,a=t?t.apply(this,n):n[0],i=s.cache;if(i.has(a))return i.get(a);var o=e.apply(this,n);return s.cache=i.set(a,o)||i,o};return s.cache=new(Gx.Cache||O2),s}Gx.Cache=O2;var UL=Gx,VL=UL,HL=500;function WL(e){var t=VL(e,function(n){return s.size===HL&&s.clear(),n}),s=t.cache;return t}var YL=WL,qL=YL,GL=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,KL=/\\(\\)?/g,XL=qL(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(GL,function(s,n,a,i){t.push(a?i.replace(KL,"$1"):n||s)}),t}),QL=XL;function JL(e,t){for(var s=-1,n=e==null?0:e.length,a=Array(n);++s<n;)a[s]=t(e[s],s,e);return a}var Kx=JL,Cy=Bi,ZL=Kx,eI=Gr,tI=Ul,Sy=Cy?Cy.prototype:void 0,Ey=Sy?Sy.toString:void 0;function M2(e){if(typeof e=="string")return e;if(eI(e))return ZL(e,M2)+"";if(tI(e))return Ey?Ey.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var rI=M2,sI=rI;function nI(e){return e==null?"":sI(e)}var aI=nI,iI=Gr,oI=qx,lI=QL,cI=aI;function dI(e,t){return iI(e)?e:oI(e,t)?[e]:lI(cI(e))}var Yu=dI,uI=Ul;function mI(e){if(typeof e=="string"||uI(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var ql=mI,hI=Yu,fI=ql;function pI(e,t){t=hI(t,e);for(var s=0,n=t.length;e!=null&&s<n;)e=e[fI(t[s++])];return s&&s==n?e:void 0}var qu=pI,xI=qu;function gI(e,t,s){var n=e==null?void 0:xI(e,t);return n===void 0?s:n}var vI=gI;function yI(e,t){return e!=null&&t in Object(e)}var bI=yI,jI=Yu,wI=Ux,NI=Gr,CI=Cx,SI=Nx,EI=ql;function kI(e,t,s){t=jI(t,e);for(var n=-1,a=t.length,i=!1;++n<a;){var o=EI(t[n]);if(!(i=e!=null&&s(e,o)))break;e=e[o]}return i||++n!=a?i:(a=e==null?0:e.length,!!a&&SI(a)&&CI(o,a)&&(NI(e)||wI(e)))}var DI=kI,AI=bI,TI=DI;function _I(e,t){return e!=null&&TI(e,t,AI)}var OI=_I,MI=Yx,RI=vI,PI=OI,LI=qx,II=T2,$I=_2,FI=ql,BI=1,zI=2;function UI(e,t){return LI(e)&&II(t)?$I(FI(e),t):function(s){var n=RI(s,e);return n===void 0&&n===t?PI(s,e):MI(t,n,BI|zI)}}var VI=UI;function HI(e){return e}var Gu=HI;function WI(e){return function(t){return t==null?void 0:t[e]}}var YI=WI,qI=qu;function GI(e){return function(t){return qI(t,e)}}var KI=GI,XI=YI,QI=KI,JI=qx,ZI=ql;function e$(e){return JI(e)?XI(ZI(e)):QI(e)}var t$=e$,r$=PL,s$=VI,n$=Gu,a$=Gr,i$=t$;function o$(e){return typeof e=="function"?e:e==null?n$:typeof e=="object"?a$(e)?s$(e[0],e[1]):r$(e):i$(e)}var Ku=o$,l$=gL,c$=Ku,d$=n2,u$=Math.max;function m$(e,t,s){var n=e==null?0:e.length;if(!n)return-1;var a=s==null?0:d$(s);return a<0&&(a=u$(n+a,0)),l$(e,c$(t),a)}var h$=m$;const f$=vr(h$);var p$=Math.ceil,x$=Math.max;function g$(e,t,s,n){for(var a=-1,i=x$(p$((t-e)/(s||1)),0),o=Array(i);i--;)o[n?i:++a]=e,e+=s;return o}var v$=g$,y$=v$,b$=Iu,xh=s2;function j$(e){return function(t,s,n){return n&&typeof n!="number"&&b$(t,s,n)&&(s=n=void 0),t=xh(t),s===void 0?(s=t,t=0):s=xh(s),n=n===void 0?t<s?1:-1:xh(n),y$(t,s,n,e)}}var w$=j$,N$=w$,C$=N$(),S$=C$;const E$=vr(S$);var ky=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function k$(e,t){return!!(e===t||ky(e)&&ky(t))}function D$(e,t){if(e.length!==t.length)return!1;for(var s=0;s<e.length;s++)if(!k$(e[s],t[s]))return!1;return!0}function R2(e,t){t===void 0&&(t=D$);var s=null;function n(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];if(s&&s.lastThis===this&&t(a,s.lastArgs))return s.lastResult;var o=e.apply(this,a);return s={lastResult:o,lastArgs:a,lastThis:this},o}return n.clear=function(){s=null},n}function qf(e,t){var s=Sx(e);return s?s.innerWidth:ba(e).width}var Dy=Bi,A$=Ux,T$=Gr,Ay=Dy?Dy.isConcatSpreadable:void 0;function _$(e){return T$(e)||A$(e)||!!(Ay&&e&&e[Ay])}var O$=_$,M$=Bx,R$=O$;function P2(e,t,s,n,a){var i=-1,o=e.length;for(s||(s=R$),a||(a=[]);++i<o;){var l=e[i];t>0&&s(l)?t>1?P2(l,t-1,s,n,a):M$(a,l):n||(a[a.length]=l)}return a}var L2=P2;function P$(e){return function(t,s,n){for(var a=-1,i=Object(t),o=n(t),l=o.length;l--;){var c=o[e?l:++a];if(s(i[c],c,i)===!1)break}return t}}var L$=P$,I$=L$,$$=I$(),F$=$$,B$=F$,z$=Yl;function U$(e,t){return e&&B$(e,t,z$)}var Xx=U$,V$=zl;function H$(e,t){return function(s,n){if(s==null)return s;if(!V$(s))return e(s,n);for(var a=s.length,i=t?a:-1,o=Object(s);(t?i--:++i<a)&&n(o[i],i,o)!==!1;);return s}}var W$=H$,Y$=Xx,q$=W$,G$=q$(Y$),K$=G$,X$=K$,Q$=zl;function J$(e,t){var s=-1,n=Q$(e)?Array(e.length):[];return X$(e,function(a,i,o){n[++s]=t(a,i,o)}),n}var Z$=J$;function e8(e,t){var s=e.length;for(e.sort(t);s--;)e[s]=e[s].value;return e}var t8=e8,Ty=Ul;function r8(e,t){if(e!==t){var s=e!==void 0,n=e===null,a=e===e,i=Ty(e),o=t!==void 0,l=t===null,c=t===t,d=Ty(t);if(!l&&!d&&!i&&e>t||i&&o&&c&&!l&&!d||n&&o&&c||!s&&c||!a)return 1;if(!n&&!i&&!d&&e<t||d&&s&&a&&!n&&!i||l&&s&&a||!o&&a||!c)return-1}return 0}var s8=r8,n8=s8;function a8(e,t,s){for(var n=-1,a=e.criteria,i=t.criteria,o=a.length,l=s.length;++n<o;){var c=n8(a[n],i[n]);if(c){if(n>=l)return c;var d=s[n];return c*(d=="desc"?-1:1)}}return e.index-t.index}var i8=a8,gh=Kx,o8=qu,l8=Ku,c8=Z$,d8=t8,u8=Hu,m8=i8,h8=Gu,f8=Gr;function p8(e,t,s){t.length?t=gh(t,function(i){return f8(i)?function(o){return o8(o,i.length===1?i[0]:i)}:i}):t=[h8];var n=-1;t=gh(t,u8(l8));var a=c8(e,function(i,o,l){var c=gh(t,function(d){return d(i)});return{criteria:c,index:++n,value:i}});return d8(a,function(i,o){return m8(i,o,s)})}var x8=p8;function g8(e,t,s){switch(s.length){case 0:return e.call(t);case 1:return e.call(t,s[0]);case 2:return e.call(t,s[0],s[1]);case 3:return e.call(t,s[0],s[1],s[2])}return e.apply(t,s)}var v8=g8,y8=v8,_y=Math.max;function b8(e,t,s){return t=_y(t===void 0?e.length-1:t,0),function(){for(var n=arguments,a=-1,i=_y(n.length-t,0),o=Array(i);++a<i;)o[a]=n[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=n[a];return l[t]=s(o),y8(e,this,l)}}var I2=b8;function j8(e){return function(){return e}}var w8=j8,N8=Fa,C8=function(){try{var e=N8(Object,"defineProperty");return e({},"",{}),e}catch{}}(),$2=C8,S8=w8,Oy=$2,E8=Gu,k8=Oy?function(e,t){return Oy(e,"toString",{configurable:!0,enumerable:!1,value:S8(t),writable:!0})}:E8,D8=k8,A8=800,T8=16,_8=Date.now;function O8(e){var t=0,s=0;return function(){var n=_8(),a=T8-(n-s);if(s=n,a>0){if(++t>=A8)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var M8=O8,R8=D8,P8=M8,L8=P8(R8),F2=L8,I8=Gu,$8=I2,F8=F2;function B8(e,t){return F8($8(e,t,I8),e+"")}var B2=B8,z8=L2,U8=x8,V8=B2,My=Iu,H8=V8(function(e,t){if(e==null)return[];var s=t.length;return s>1&&My(e,t[0],t[1])?t=[]:s>2&&My(t[0],t[1],t[2])&&(t=[t[0]]),U8(e,z8(t,1),[])}),W8=H8;const Y8=vr(W8);function z2(e){return LN(e)||ZN(e)||vx(e)||IN()}function q8(e){var t=[];if(e!=null)for(var s in Object(e))t.push(s);return t}var G8=q8,K8=hn,X8=Wx,Q8=G8,J8=Object.prototype,Z8=J8.hasOwnProperty;function eF(e){if(!K8(e))return Q8(e);var t=X8(e),s=[];for(var n in e)n=="constructor"&&(t||!Z8.call(e,n))||s.push(n);return s}var tF=eF,rF=C2,sF=tF,nF=zl;function aF(e){return nF(e)?rF(e,!0):sF(e)}var Xu=aF,iF=B2,oF=Bl,lF=Iu,cF=Xu,U2=Object.prototype,dF=U2.hasOwnProperty,uF=iF(function(e,t){e=Object(e);var s=-1,n=t.length,a=n>2?t[2]:void 0;for(a&&lF(t[0],t[1],a)&&(n=1);++s<n;)for(var i=t[s],o=cF(i),l=-1,c=o.length;++l<c;){var d=o[l],u=e[d];(u===void 0||oF(u,U2[d])&&!dF.call(e,d))&&(e[d]=i[d])}return e}),mF=uF;const hF=vr(mF);var Ry=$2;function fF(e,t,s){t=="__proto__"&&Ry?Ry(e,t,{configurable:!0,enumerable:!0,value:s,writable:!0}):e[t]=s}var Qx=fF,pF=Qx,xF=Xx,gF=Ku;function vF(e,t){var s={};return t=gF(t),xF(e,function(n,a,i){pF(s,a,t(n,a,i))}),s}var yF=vF;const bF=vr(yF);function jF(e,t){for(var s=-1,n=e==null?0:e.length;++s<n&&t(e[s],s,e)!==!1;);return e}var V2=jF,wF=Qx,NF=Bl,CF=Object.prototype,SF=CF.hasOwnProperty;function EF(e,t,s){var n=e[t];(!(SF.call(e,t)&&NF(n,s))||s===void 0&&!(t in e))&&wF(e,t,s)}var H2=EF,kF=H2,DF=Qx;function AF(e,t,s,n){var a=!s;s||(s={});for(var i=-1,o=t.length;++i<o;){var l=t[i],c=n?n(s[l],e[l],l,s,e):void 0;c===void 0&&(c=e[l]),a?DF(s,l,c):kF(s,l,c)}return s}var Gl=AF,TF=Gl,_F=Yl;function OF(e,t){return e&&TF(t,_F(t),e)}var MF=OF,RF=Gl,PF=Xu;function LF(e,t){return e&&RF(t,PF(t),e)}var IF=LF,Xd={exports:{}};Xd.exports;(function(e,t){var s=Bs,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===n,o=i?s.Buffer:void 0,l=o?o.allocUnsafe:void 0;function c(d,u){if(u)return d.slice();var m=d.length,h=l?l(m):new d.constructor(m);return d.copy(h),h}e.exports=c})(Xd,Xd.exports);var $F=Xd.exports;function FF(e,t){var s=-1,n=e.length;for(t||(t=Array(n));++s<n;)t[s]=e[s];return t}var BF=FF,zF=Gl,UF=zx;function VF(e,t){return zF(e,UF(e),t)}var HF=VF,WF=S2,YF=WF(Object.getPrototypeOf,Object),Qu=YF,qF=Bx,GF=Qu,KF=zx,XF=w2,QF=Object.getOwnPropertySymbols,JF=QF?function(e){for(var t=[];e;)qF(t,KF(e)),e=GF(e);return t}:XF,W2=JF,ZF=Gl,e7=W2;function t7(e,t){return ZF(e,e7(e),t)}var r7=t7,s7=j2,n7=W2,a7=Xu;function i7(e){return s7(e,a7,n7)}var Y2=i7,o7=Object.prototype,l7=o7.hasOwnProperty;function c7(e){var t=e.length,s=new e.constructor(t);return t&&typeof e[0]=="string"&&l7.call(e,"index")&&(s.index=e.index,s.input=e.input),s}var d7=c7,Py=b2;function u7(e){var t=new e.constructor(e.byteLength);return new Py(t).set(new Py(e)),t}var Jx=u7,m7=Jx;function h7(e,t){var s=t?m7(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.byteLength)}var f7=h7,p7=/\w*$/;function x7(e){var t=new e.constructor(e.source,p7.exec(e));return t.lastIndex=e.lastIndex,t}var g7=x7,Ly=Bi,Iy=Ly?Ly.prototype:void 0,$y=Iy?Iy.valueOf:void 0;function v7(e){return $y?Object($y.call(e)):{}}var y7=v7,b7=Jx;function j7(e,t){var s=t?b7(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.length)}var w7=j7,N7=Jx,C7=f7,S7=g7,E7=y7,k7=w7,D7="[object Boolean]",A7="[object Date]",T7="[object Map]",_7="[object Number]",O7="[object RegExp]",M7="[object Set]",R7="[object String]",P7="[object Symbol]",L7="[object ArrayBuffer]",I7="[object DataView]",$7="[object Float32Array]",F7="[object Float64Array]",B7="[object Int8Array]",z7="[object Int16Array]",U7="[object Int32Array]",V7="[object Uint8Array]",H7="[object Uint8ClampedArray]",W7="[object Uint16Array]",Y7="[object Uint32Array]";function q7(e,t,s){var n=e.constructor;switch(t){case L7:return N7(e);case D7:case A7:return new n(+e);case I7:return C7(e,s);case $7:case F7:case B7:case z7:case U7:case V7:case H7:case W7:case Y7:return k7(e,s);case T7:return new n;case _7:case R7:return new n(e);case O7:return S7(e);case M7:return new n;case P7:return E7(e)}}var G7=q7,K7=hn,Fy=Object.create,X7=function(){function e(){}return function(t){if(!K7(t))return{};if(Fy)return Fy(t);e.prototype=t;var s=new e;return e.prototype=void 0,s}}(),q2=X7,Q7=q2,J7=Qu,Z7=Wx;function e9(e){return typeof e.constructor=="function"&&!Z7(e)?Q7(J7(e)):{}}var t9=e9,r9=Wu,s9=Qn,n9="[object Map]";function a9(e){return s9(e)&&r9(e)==n9}var i9=a9,o9=i9,l9=Hu,By=Vx,zy=By&&By.isMap,c9=zy?l9(zy):o9,d9=c9,u9=Wu,m9=Qn,h9="[object Set]";function f9(e){return m9(e)&&u9(e)==h9}var p9=f9,x9=p9,g9=Hu,Uy=Vx,Vy=Uy&&Uy.isSet,v9=Vy?g9(Vy):x9,y9=v9,b9=Fx,j9=V2,w9=H2,N9=MF,C9=IF,S9=$F,E9=BF,k9=HF,D9=r7,A9=E2,T9=Y2,_9=Wu,O9=d7,M9=G7,R9=t9,P9=Gr,L9=Vu,I9=d9,$9=hn,F9=y9,B9=Yl,z9=Xu,U9=1,V9=2,H9=4,G2="[object Arguments]",W9="[object Array]",Y9="[object Boolean]",q9="[object Date]",G9="[object Error]",K2="[object Function]",K9="[object GeneratorFunction]",X9="[object Map]",Q9="[object Number]",X2="[object Object]",J9="[object RegExp]",Z9="[object Set]",eB="[object String]",tB="[object Symbol]",rB="[object WeakMap]",sB="[object ArrayBuffer]",nB="[object DataView]",aB="[object Float32Array]",iB="[object Float64Array]",oB="[object Int8Array]",lB="[object Int16Array]",cB="[object Int32Array]",dB="[object Uint8Array]",uB="[object Uint8ClampedArray]",mB="[object Uint16Array]",hB="[object Uint32Array]",We={};We[G2]=We[W9]=We[sB]=We[nB]=We[Y9]=We[q9]=We[aB]=We[iB]=We[oB]=We[lB]=We[cB]=We[X9]=We[Q9]=We[X2]=We[J9]=We[Z9]=We[eB]=We[tB]=We[dB]=We[uB]=We[mB]=We[hB]=!0;We[G9]=We[K2]=We[rB]=!1;function ed(e,t,s,n,a,i){var o,l=t&U9,c=t&V9,d=t&H9;if(s&&(o=a?s(e,n,a,i):s(e)),o!==void 0)return o;if(!$9(e))return e;var u=P9(e);if(u){if(o=O9(e),!l)return E9(e,o)}else{var m=_9(e),h=m==K2||m==K9;if(L9(e))return S9(e,l);if(m==X2||m==G2||h&&!a){if(o=c||h?{}:R9(e),!l)return c?D9(e,C9(o,e)):k9(e,N9(o,e))}else{if(!We[m])return a?e:{};o=M9(e,m,l)}}i||(i=new b9);var g=i.get(e);if(g)return g;i.set(e,o),F9(e)?e.forEach(function(w){o.add(ed(w,t,s,w,e,i))}):I9(e)&&e.forEach(function(w,x){o.set(x,ed(w,t,s,x,e,i))});var j=d?c?T9:A9:c?z9:B9,y=u?void 0:j(e);return j9(y||e,function(w,x){y&&(x=w,w=e[x]),w9(o,x,ed(w,t,s,x,e,i))}),o}var fB=ed;function pB(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var xB=pB,gB=qu,vB=e2;function yB(e,t){return t.length<2?e:gB(e,vB(t,0,-1))}var bB=yB,jB=Yu,wB=xB,NB=bB,CB=ql;function SB(e,t){return t=jB(t,e),e=NB(e,t),e==null||delete e[CB(wB(t))]}var EB=SB,kB=zi,DB=Qu,AB=Qn,TB="[object Object]",_B=Function.prototype,OB=Object.prototype,Q2=_B.toString,MB=OB.hasOwnProperty,RB=Q2.call(Object);function PB(e){if(!AB(e)||kB(e)!=TB)return!1;var t=DB(e);if(t===null)return!0;var s=MB.call(t,"constructor")&&t.constructor;return typeof s=="function"&&s instanceof s&&Q2.call(s)==RB}var LB=PB,IB=LB;function $B(e){return IB(e)?void 0:e}var FB=$B,BB=L2;function zB(e){var t=e==null?0:e.length;return t?BB(e,1):[]}var UB=zB,VB=UB,HB=I2,WB=F2;function YB(e){return WB(HB(e,void 0,VB),e+"")}var qB=YB,GB=Kx,KB=fB,XB=EB,QB=Yu,JB=Gl,ZB=FB,ez=qB,tz=Y2,rz=1,sz=2,nz=4,az=ez(function(e,t){var s={};if(e==null)return s;var n=!1;t=GB(t,function(i){return i=QB(i,e),n||(n=i.length>1),i}),JB(e,tz(e),s),n&&(s=KB(s,rz|sz|nz,ZB));for(var a=t.length;a--;)XB(s,t[a]);return s}),iz=az;const oz=vr(iz);var lz=V2,cz=q2,dz=Xx,uz=Ku,mz=Qu,hz=Gr,fz=Vu,pz=wx,xz=hn,gz=Hx;function vz(e,t,s){var n=hz(e),a=n||fz(e)||gz(e);if(t=uz(t),s==null){var i=e&&e.constructor;a?s=n?new i:[]:xz(e)?s=pz(i)?cz(mz(e)):{}:s={}}return(a?lz:dz)(e,function(o,l,c){return t(s,o,l,c)}),s}var yz=vz;const bz=vr(yz);var jz={exports:{}};(function(e,t){(function(s,n){e.exports=n()})(zr,function(){return function(s,n,a){n.prototype.isBetween=function(i,o,l,c){var d=a(i),u=a(o),m=(c=c||"()")[0]==="(",h=c[1]===")";return(m?this.isAfter(d,l):!this.isBefore(d,l))&&(h?this.isBefore(u,l):!this.isAfter(u,l))||(m?this.isBefore(d,l):!this.isAfter(d,l))&&(h?this.isAfter(u,l):!this.isBefore(u,l))}}})})(jz);var wz={exports:{}};(function(e,t){(function(s,n){e.exports=n()})(zr,function(){return function(s,n){n.prototype.isSameOrAfter=function(a,i){return this.isSame(a,i)||this.isAfter(a,i)}}})})(wz);var Nz={exports:{}};(function(e,t){(function(s,n){e.exports=n()})(zr,function(){return function(s,n){n.prototype.isSameOrBefore=function(a,i){return this.isSame(a,i)||this.isBefore(a,i)}}})})(Nz);var Cz={exports:{}};(function(e,t){(function(s,n){e.exports=n()})(zr,function(){return function(s,n,a){var i=n.prototype,o=function(m){return m&&(m.indexOf?m:m.s)},l=function(m,h,g,j,y){var w=m.name?m:m.$locale(),x=o(w[h]),p=o(w[g]),v=x||p.map(function(b){return b.slice(0,j)});if(!y)return v;var N=w.weekStart;return v.map(function(b,C){return v[(C+(N||0))%7]})},c=function(){return a.Ls[a.locale()]},d=function(m,h){return m.formats[h]||function(g){return g.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(j,y,w){return y||w.slice(1)})}(m.formats[h.toUpperCase()])},u=function(){var m=this;return{months:function(h){return h?h.format("MMMM"):l(m,"months")},monthsShort:function(h){return h?h.format("MMM"):l(m,"monthsShort","months",3)},firstDayOfWeek:function(){return m.$locale().weekStart||0},weekdays:function(h){return h?h.format("dddd"):l(m,"weekdays")},weekdaysMin:function(h){return h?h.format("dd"):l(m,"weekdaysMin","weekdays",2)},weekdaysShort:function(h){return h?h.format("ddd"):l(m,"weekdaysShort","weekdays",3)},longDateFormat:function(h){return d(m.$locale(),h)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};i.localeData=function(){return u.bind(this)()},a.localeData=function(){var m=c();return{firstDayOfWeek:function(){return m.weekStart||0},weekdays:function(){return a.weekdays()},weekdaysShort:function(){return a.weekdaysShort()},weekdaysMin:function(){return a.weekdaysMin()},months:function(){return a.months()},monthsShort:function(){return a.monthsShort()},longDateFormat:function(h){return d(m,h)},meridiem:m.meridiem,ordinal:m.ordinal}},a.months=function(){return l(c(),"months")},a.monthsShort=function(){return l(c(),"monthsShort","months",3)},a.weekdays=function(m){return l(c(),"weekdays",null,null,m)},a.weekdaysShort=function(m){return l(c(),"weekdaysShort","weekdays",3,m)},a.weekdaysMin=function(m){return l(c(),"weekdaysMin","weekdays",2,m)}}})})(Cz);var Sz={exports:{}};(function(e,t){(function(s,n){e.exports=n()})(zr,function(){var s={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(n,a,i){var o=a.prototype,l=o.format;i.en.formats=s,o.format=function(c){c===void 0&&(c="YYYY-MM-DDTHH:mm:ssZ");var d=this.$locale().formats,u=function(m,h){return m.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(g,j,y){var w=y&&y.toUpperCase();return j||h[y]||s[y]||h[w].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(x,p,v){return p||v.slice(1)})})}(c,d===void 0?{}:d);return l.call(this,u)}}})})(Sz);var Ez={exports:{}};(function(e,t){(function(s,n){e.exports=n()})(zr,function(){return function(s,n,a){var i=function(o,l){if(!l||!l.length||l.length===1&&!l[0]||l.length===1&&Array.isArray(l[0])&&!l[0].length)return null;var c;l.length===1&&l[0].length>0&&(l=l[0]),c=(l=l.filter(function(u){return u}))[0];for(var d=1;d<l.length;d+=1)l[d].isValid()&&!l[d][o](c)||(c=l[d]);return c};a.max=function(){var o=[].slice.call(arguments,0);return i("isAfter",o)},a.min=function(){var o=[].slice.call(arguments,0);return i("isBefore",o)}}})})(Ez);var kz={exports:{}};(function(e,t){(function(s,n){e.exports=n()})(zr,function(){var s="minute",n=/[+-]\d\d(?::?\d\d)?/g,a=/([+-]|\d\d)/g;return function(i,o,l){var c=o.prototype;l.utc=function(y){var w={date:y,utc:!0,args:arguments};return new o(w)},c.utc=function(y){var w=l(this.toDate(),{locale:this.$L,utc:!0});return y?w.add(this.utcOffset(),s):w},c.local=function(){return l(this.toDate(),{locale:this.$L,utc:!1})};var d=c.parse;c.parse=function(y){y.utc&&(this.$u=!0),this.$utils().u(y.$offset)||(this.$offset=y.$offset),d.call(this,y)};var u=c.init;c.init=function(){if(this.$u){var y=this.$d;this.$y=y.getUTCFullYear(),this.$M=y.getUTCMonth(),this.$D=y.getUTCDate(),this.$W=y.getUTCDay(),this.$H=y.getUTCHours(),this.$m=y.getUTCMinutes(),this.$s=y.getUTCSeconds(),this.$ms=y.getUTCMilliseconds()}else u.call(this)};var m=c.utcOffset;c.utcOffset=function(y,w){var x=this.$utils().u;if(x(y))return this.$u?0:x(this.$offset)?m.call(this):this.$offset;if(typeof y=="string"&&(y=function(b){b===void 0&&(b="");var C=b.match(n);if(!C)return null;var S=(""+C[0]).match(a)||["-",0,0],k=S[0],D=60*+S[1]+ +S[2];return D===0?0:k==="+"?D:-D}(y),y===null))return this;var p=Math.abs(y)<=16?60*y:y,v=this;if(w)return v.$offset=p,v.$u=y===0,v;if(y!==0){var N=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(v=this.local().add(p+N,s)).$offset=p,v.$x.$localOffset=N}else v=this.utc();return v};var h=c.format;c.format=function(y){var w=y||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return h.call(this,w)},c.valueOf=function(){var y=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*y},c.isUTC=function(){return!!this.$u},c.toISOString=function(){return this.toDate().toISOString()},c.toString=function(){return this.toDate().toUTCString()};var g=c.toDate;c.toDate=function(y){return y==="s"&&this.$offset?l(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():g.call(this)};var j=c.diff;c.diff=function(y,w,x){if(y&&this.$u===y.$u)return j.call(this,y,w,x);var p=this.local(),v=l(y).local();return j.call(p,v,w,x)}}})})(kz);var Dz={exports:{}};(function(e,t){(function(s,n){e.exports=n()})(zr,function(){return function(s,n){n.prototype.isLeapYear=function(){return this.$y%4==0&&this.$y%100!=0||this.$y%400==0}}})})(Dz);function Ss(e){return e.children}var gr={PREVIOUS:"PREV",NEXT:"NEXT",TODAY:"TODAY",DATE:"DATE"},Jt={MONTH:"month",WEEK:"week",WORK_WEEK:"work_week",DAY:"day",AGENDA:"agenda"},Hy=Object.keys(Jt).map(function(e){return Jt[e]});oe.oneOfType([oe.string,oe.func]);oe.any;oe.func;oe.oneOfType([oe.arrayOf(oe.oneOf(Hy)),oe.objectOf(function(e,t){var s=Hy.indexOf(t)!==-1&&typeof e[t]=="boolean";if(s)return null;for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i];return oe.elementType.apply(oe,[e,t].concat(a))})]);oe.oneOfType([oe.oneOf(["overlap","no-overlap"]),oe.func]);var Wy={seconds:1e3,minutes:1e3*60,hours:1e3*60*60,day:1e3*60*60*24};function J2(e,t){var s=It(e,"month");return It(s,"week",t.startOfWeek())}function Z2(e,t){var s=Hd(e,"month");return Hd(s,"week",t.startOfWeek())}function Az(e,t){for(var s=J2(e,t),n=Z2(e,t),a=[];$i(s,n,"day");)a.push(s),s=ds(s,1,"day");return a}function Tz(e,t){var s=It(e,t);return $l(s,e)?s:ds(s,1,t)}function _z(e,t){for(var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"day",n=e,a=[];$i(n,t,s);)a.push(n),n=ds(n,1,s);return a}function Oz(e,t){return t==null&&e==null?null:(t==null&&(t=new Date),e==null&&(e=new Date),e=It(e,"day"),e=yl(e,yl(t)),e=Ci(e,Ci(t)),e=vl(e,vl(t)),gl(e,gl(t)))}function Yy(e){return yl(e)===0&&Ci(e)===0&&vl(e)===0&&gl(e)===0}function Mz(e,t,s,n){return s==="day"&&(s="date"),Math.abs(Dv[s](e,void 0,n)-Dv[s](t,void 0,n))}function Zx(e,t,s){return!s||s==="milliseconds"?Math.abs(+e-+t):Math.round(Math.abs(+It(e,s)/Wy[s]-+It(t,s)/Wy[s]))}var Rz=oe.oneOfType([oe.string,oe.func]);function Pz(e,t,s,n,a){var i=typeof n=="function"?n(s,a,e):t.call(e,s,n,a);return ul(i==null||typeof i=="string","`localizer format(..)` must return a string, null, or undefined"),i}function Lz(e,t,s){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,t+s,0,0)}function eg(e,t){return e.getTimezoneOffset()-t.getTimezoneOffset()}function Iz(e,t){return Zx(e,t,"minutes")+eg(e,t)}function $z(e){var t=It(e,"day");return Zx(t,e,"minutes")+eg(t,e)}function Fz(e,t){return jx(e,t,"day")}function Bz(e,t,s){var n=$l(e,t,"minutes");return n?Fl(t,s,"minutes"):Lu(t,s,"minutes")}function Gf(e,t){return Mz(e,t,"day")}function zz(e){var t=e.evtA,s=t.start,n=t.end,a=t.allDay,i=e.evtB,o=i.start,l=i.end,c=i.allDay,d=+It(s,"day")-+It(o,"day"),u=Gf(s,n),m=Gf(o,l);return d||m-u||!!c-!!a||+s-+o||+n-+l}function Uz(e){var t=e.event,s=t.start,n=t.end,a=e.range,i=a.start,o=a.end,l=It(s,"day"),c=$i(l,o,"day"),d=bx(l,n,"minutes"),u=d?Lu(n,i,"minutes"):Fl(n,i,"minutes");return c&&u}function Vz(e,t){return $l(e,t,"day")}function Hz(e,t){return Yy(e)&&Yy(t)}var Wz=kt(function e(t){var s=this;Et(this,e),ul(typeof t.format=="function","date localizer `format(..)` must be a function"),ul(typeof t.firstOfWeek=="function","date localizer `firstOfWeek(..)` must be a function"),this.propType=t.propType||Rz,this.formats=t.formats,this.format=function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return Pz.apply(void 0,[s,t.format].concat(a))},this.startOfWeek=t.firstOfWeek,this.merge=t.merge||Oz,this.inRange=t.inRange||KN,this.lt=t.lt||jx,this.lte=t.lte||$i,this.gt=t.gt||Lu,this.gte=t.gte||Fl,this.eq=t.eq||$l,this.neq=t.neq||bx,this.startOf=t.startOf||It,this.endOf=t.endOf||Hd,this.add=t.add||ds,this.range=t.range||_z,this.diff=t.diff||Zx,this.ceil=t.ceil||Tz,this.min=t.min||qN,this.max=t.max||GN,this.minutes=t.minutes||Ci,this.daySpan=t.daySpan||Gf,this.firstVisibleDay=t.firstVisibleDay||J2,this.lastVisibleDay=t.lastVisibleDay||Z2,this.visibleDays=t.visibleDays||Az,this.getSlotDate=t.getSlotDate||Lz,this.getTimezoneOffset=t.getTimezoneOffset||function(n){return n.getTimezoneOffset()},this.getDstOffset=t.getDstOffset||eg,this.getTotalMin=t.getTotalMin||Iz,this.getMinutesFromMidnight=t.getMinutesFromMidnight||$z,this.continuesPrior=t.continuesPrior||Fz,this.continuesAfter=t.continuesAfter||Bz,this.sortEvents=t.sortEvents||zz,this.inEventRange=t.inEventRange||Uz,this.isSameDate=t.isSameDate||Vz,this.startAndEndAreDateOnly=t.startAndEndAreDateOnly||Hz,this.segmentOffset=t.browserTZOffset?t.browserTZOffset():0});function Yz(e,t,s,n){var a=He(He({},e.formats),s);return He(He({},e),{},{messages:n,startOfWeek:function(){return e.startOfWeek(t)},format:function(o,l){return e.format(o,a[l]||l,t)}})}var qz=function(e){function t(){var s;Et(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return s=qt(this,t,[].concat(a)),s.navigate=function(o){s.props.onNavigate(o)},s.view=function(o){s.props.onView(o)},s}return Gt(t,e),kt(t,[{key:"render",value:function(){var n=this.props,a=n.localizer.messages,i=n.label;return H.createElement("div",{className:"rbc-toolbar"},H.createElement("span",{className:"rbc-btn-group"},H.createElement("button",{type:"button",onClick:this.navigate.bind(null,gr.TODAY)},a.today),H.createElement("button",{type:"button",onClick:this.navigate.bind(null,gr.PREVIOUS)},a.previous),H.createElement("button",{type:"button",onClick:this.navigate.bind(null,gr.NEXT)},a.next)),H.createElement("span",{className:"rbc-toolbar-label"},i),H.createElement("span",{className:"rbc-btn-group"},this.viewNamesGroup(a)))}},{key:"viewNamesGroup",value:function(n){var a=this,i=this.props.views,o=this.props.view;if(i.length>1)return i.map(function(l){return H.createElement("button",{type:"button",key:l,className:mt({"rbc-active":o===l}),onClick:a.view.bind(null,l)},n[l])})}}])}(H.Component);function Je(e,t){e&&e.apply(null,[].concat(t))}var Gz={date:"Date",time:"Time",event:"Event",allDay:"All Day",week:"Week",work_week:"Work Week",day:"Day",month:"Month",previous:"Back",next:"Next",yesterday:"Yesterday",tomorrow:"Tomorrow",today:"Today",agenda:"Agenda",noEventsInRange:"There are no events in this range.",showMore:function(t){return"+".concat(t," more")}};function Kz(e){return He(He({},Gz),e)}function Xz(e){var t=e.ref,s=e.callback;f.useEffect(function(){var n=function(i){t.current&&!t.current.contains(i.target)&&s()};return document.addEventListener("mousedown",n),function(){document.removeEventListener("mousedown",n)}},[t,s])}var Qz=["style","className","event","selected","isAllDay","onSelect","onDoubleClick","onKeyPress","localizer","continuesPrior","continuesAfter","accessors","getters","children","components","slotStart","slotEnd"],e1=function(e){function t(){return Et(this,t),qt(this,t,arguments)}return Gt(t,e),kt(t,[{key:"render",value:function(){var n=this.props,a=n.style,i=n.className,o=n.event,l=n.selected,c=n.isAllDay,d=n.onSelect,u=n.onDoubleClick,m=n.onKeyPress,h=n.localizer,g=n.continuesPrior,j=n.continuesAfter,y=n.accessors,w=n.getters,x=n.children,p=n.components,v=p.event,N=p.eventWrapper,b=n.slotStart,C=n.slotEnd,S=Ps(n,Qz);delete S.resizable;var k=y.title(o),D=y.tooltip(o),L=y.end(o),T=y.start(o),B=y.allDay(o),V=c||B||h.diff(T,h.ceil(L,"day"),"day")>1,A=w.eventProp(o,T,L,l),I=H.createElement("div",{className:"rbc-event-content",title:D||void 0},v?H.createElement(v,{event:o,continuesPrior:g,continuesAfter:j,title:k,isAllDay:B,localizer:h,slotStart:b,slotEnd:C}):k);return H.createElement(N,Object.assign({},this.props,{type:"date"}),H.createElement("div",Object.assign({},S,{style:He(He({},A.style),a),className:mt("rbc-event",i,A.className,{"rbc-selected":l,"rbc-event-allday":V,"rbc-event-continues-prior":g,"rbc-event-continues-after":j}),onClick:function(Y){return d&&d(o,Y)},onDoubleClick:function(Y){return u&&u(o,Y)},onKeyDown:function(Y){return m&&m(o,Y)}}),typeof x=="function"?x(I):I))}}])}(H.Component);function Ju(e,t){return!e||t==null?!1:pL(e,t)}function t1(e,t){var s=e.right-e.left,n=s/t;return n}function r1(e,t,s,n){var a=t1(e,n);return s?n-1-Math.floor((t-e.left)/a):Math.floor((t-e.left)/a)}function Jz(e,t){var s=t.x,n=t.y;return n>=e.top&&n<=e.bottom&&s>=e.left&&s<=e.right}function Zz(e,t,s,n,a){var i=-1,o=-1,l=n-1,c=t1(t,n),d=r1(t,s.x,a,n),u=t.top<s.y&&t.bottom>s.y,m=t.top<e.y&&t.bottom>e.y,h=e.y>t.bottom,g=t.top>e.y,j=s.top<t.top&&s.bottom>t.bottom;return j&&(i=0,o=l),u&&(g?(i=0,o=d):h&&(i=d,o=l)),m&&(i=o=a?l-Math.floor((e.x-t.left)/c):Math.floor((e.x-t.left)/c),u?d<i?i=d:o=d:e.y<s.y?o=l:i=0),{startIdx:i,endIdx:o}}function eU(e){var t=e.target,s=e.offset,n=e.container,a=e.box,i=ba(t),o=i.top,l=i.left,c=i.width,d=i.height,u=ba(n),m=u.top,h=u.left,g=u.width,j=u.height,y=ba(a),w=y.width,x=y.height,p=m+j,v=h+g,N=o+x,b=l+w,C=s.x,S=s.y,k=N>p?o-x-S:o+S+d,D=b>v?l+C-w+c:l+C;return{topOffset:k,leftOffset:D}}function tU(e){var t=e.containerRef,s=e.accessors,n=e.getters,a=e.selected,i=e.components,o=e.localizer,l=e.position,c=e.show,d=e.events,u=e.slotStart,m=e.slotEnd,h=e.onSelect,g=e.onDoubleClick,j=e.onKeyPress,y=e.handleDragStart,w=e.popperRef,x=e.target,p=e.offset;Xz({ref:w,callback:c}),f.useLayoutEffect(function(){var b=eU({target:x,offset:p,container:t.current,box:w.current}),C=b.topOffset,S=b.leftOffset;w.current.style.top="".concat(C,"px"),w.current.style.left="".concat(S,"px")},[p.x,p.y,x]);var v=l.width,N={minWidth:v+v/2};return H.createElement("div",{style:N,className:"rbc-overlay",ref:w},H.createElement("div",{className:"rbc-overlay-header"},o.format(u,"dayHeaderFormat")),d.map(function(b,C){return H.createElement(e1,{key:C,type:"popup",localizer:o,event:b,getters:n,onSelect:h,accessors:s,components:i,onDoubleClick:g,onKeyPress:j,continuesPrior:o.lt(s.end(b),u,"day"),continuesAfter:o.gte(s.start(b),m,"day"),slotStart:u,slotEnd:m,selected:Ju(b,a),draggable:!0,onDragStart:function(){return y(b)},onDragEnd:function(){return c()}})}))}var s1=H.forwardRef(function(e,t){return H.createElement(tU,Object.assign({},e,{popperRef:t}))});s1.propTypes={accessors:oe.object.isRequired,getters:oe.object.isRequired,selected:oe.object,components:oe.object.isRequired,localizer:oe.object.isRequired,position:oe.object.isRequired,show:oe.func.isRequired,events:oe.array.isRequired,slotStart:oe.instanceOf(Date).isRequired,slotEnd:oe.instanceOf(Date),onSelect:oe.func,onDoubleClick:oe.func,onKeyPress:oe.func,handleDragStart:oe.func,style:oe.object,offset:oe.shape({x:oe.number,y:oe.number})};function rU(e){var t=e.containerRef,s=e.popupOffset,n=s===void 0?5:s,a=e.overlay,i=e.accessors,o=e.localizer,l=e.components,c=e.getters,d=e.selected,u=e.handleSelectEvent,m=e.handleDoubleClickEvent,h=e.handleKeyPressEvent,g=e.handleDragStart,j=e.onHide,y=e.overlayDisplay,w=f.useRef(null);if(!a.position)return null;var x=n;isNaN(n)||(x={x:n,y:n});var p=a.position,v=a.events,N=a.date,b=a.end;return H.createElement(Lx,{rootClose:!0,flip:!0,show:!0,placement:"bottom",onHide:j,target:a.target},function(C){var S=C.props;return H.createElement(s1,Object.assign({},S,{containerRef:t,ref:w,target:a.target,offset:x,accessors:i,getters:c,selected:d,components:l,localizer:o,position:p,show:y,events:v,slotStart:N,slotEnd:b,onSelect:u,onDoubleClick:m,onKeyPress:h,handleDragStart:g}))})}var tg=H.forwardRef(function(e,t){return H.createElement(rU,Object.assign({},e,{containerRef:t}))});tg.propTypes={popupOffset:oe.oneOfType([oe.number,oe.shape({x:oe.number,y:oe.number})]),overlay:oe.shape({position:oe.object,events:oe.array,date:oe.instanceOf(Date),end:oe.instanceOf(Date)}),accessors:oe.object.isRequired,localizer:oe.object.isRequired,components:oe.object.isRequired,getters:oe.object.isRequired,selected:oe.object,handleSelectEvent:oe.func,handleDoubleClickEvent:oe.func,handleKeyPressEvent:oe.func,handleDragStart:oe.func,onHide:oe.func,overlayDisplay:oe.func};function zt(e,t){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;return Eo(s,e,t,{passive:!1})}function sU(e,t,s){return!e||bl(e,document.elementFromPoint(t,s))}function nU(e,t){var s=t.clientX,n=t.clientY,a=document.elementFromPoint(s,n);return A2(a,".rbc-event",e)}function aU(e,t){var s=t.clientX,n=t.clientY,a=document.elementFromPoint(s,n);return A2(a,".rbc-show-more",e)}function Qd(e,t){return!!nU(e,t)}function iU(e,t){return!!aU(e,t)}function po(e){var t=e;return e.touches&&e.touches.length&&(t=e.touches[0]),{clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY}}var qy=5,oU=250,n1=function(){function e(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=s.global,a=n===void 0?!1:n,i=s.longPressThreshold,o=i===void 0?250:i,l=s.validContainers,c=l===void 0?[]:l;Et(this,e),this._initialEvent=null,this.selecting=!1,this.isDetached=!1,this.container=t,this.globalMouse=!t||a,this.longPressThreshold=o,this.validContainers=c,this._listeners=Object.create(null),this._handleInitialEvent=this._handleInitialEvent.bind(this),this._handleMoveEvent=this._handleMoveEvent.bind(this),this._handleTerminatingEvent=this._handleTerminatingEvent.bind(this),this._keyListener=this._keyListener.bind(this),this._dropFromOutsideListener=this._dropFromOutsideListener.bind(this),this._dragOverFromOutsideListener=this._dragOverFromOutsideListener.bind(this),this._removeTouchMoveWindowListener=zt("touchmove",function(){},window),this._removeKeyDownListener=zt("keydown",this._keyListener),this._removeKeyUpListener=zt("keyup",this._keyListener),this._removeDropFromOutsideListener=zt("drop",this._dropFromOutsideListener),this._removeDragOverFromOutsideListener=zt("dragover",this._dragOverFromOutsideListener),this._addInitialEventListener()}return kt(e,[{key:"on",value:function(s,n){var a=this._listeners[s]||(this._listeners[s]=[]);return a.push(n),{remove:function(){var o=a.indexOf(n);o!==-1&&a.splice(o,1)}}}},{key:"emit",value:function(s){for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];var o,l=this._listeners[s]||[];return l.forEach(function(c){o===void 0&&(o=c.apply(void 0,a))}),o}},{key:"teardown",value:function(){this._initialEvent=null,this._initialEventData=null,this._selectRect=null,this.selecting=!1,this._lastClickData=null,this.isDetached=!0,this._listeners=Object.create(null),this._removeTouchMoveWindowListener&&this._removeTouchMoveWindowListener(),this._removeInitialEventListener&&this._removeInitialEventListener(),this._removeEndListener&&this._removeEndListener(),this._onEscListener&&this._onEscListener(),this._removeMoveListener&&this._removeMoveListener(),this._removeKeyUpListener&&this._removeKeyUpListener(),this._removeKeyDownListener&&this._removeKeyDownListener(),this._removeDropFromOutsideListener&&this._removeDropFromOutsideListener(),this._removeDragOverFromOutsideListener&&this._removeDragOverFromOutsideListener()}},{key:"isSelected",value:function(s){var n=this._selectRect;return!n||!this.selecting?!1:Gy(n,La(s))}},{key:"filter",value:function(s){var n=this._selectRect;return!n||!this.selecting?[]:s.filter(this.isSelected,this)}},{key:"_addLongPressListener",value:function(s,n){var a=this,i=null,o=null,l=null,c=function(h){i=setTimeout(function(){u(),s(h)},a.longPressThreshold),o=zt("touchmove",function(){return u()}),l=zt("touchend",function(){return u()})},d=zt("touchstart",c),u=function(){i&&clearTimeout(i),o&&o(),l&&l(),i=null,o=null,l=null};return n&&c(n),function(){u(),d()}}},{key:"_addInitialEventListener",value:function(){var s=this,n=zt("mousedown",function(i){s._removeInitialEventListener(),s._handleInitialEvent(i),s._removeInitialEventListener=zt("mousedown",s._handleInitialEvent)}),a=zt("touchstart",function(i){s._removeInitialEventListener(),s._removeInitialEventListener=s._addLongPressListener(s._handleInitialEvent,i)});this._removeInitialEventListener=function(){n(),a()}}},{key:"_dropFromOutsideListener",value:function(s){var n=po(s),a=n.pageX,i=n.pageY,o=n.clientX,l=n.clientY;this.emit("dropFromOutside",{x:a,y:i,clientX:o,clientY:l}),s.preventDefault()}},{key:"_dragOverFromOutsideListener",value:function(s){var n=po(s),a=n.pageX,i=n.pageY,o=n.clientX,l=n.clientY;this.emit("dragOverFromOutside",{x:a,y:i,clientX:o,clientY:l}),s.preventDefault()}},{key:"_handleInitialEvent",value:function(s){if(this._initialEvent=s,!this.isDetached){var n=po(s),a=n.clientX,i=n.clientY,o=n.pageX,l=n.pageY,c=this.container(),d,u;if(!(s.which===3||s.button===2||!sU(c,a,i))){if(!this.globalMouse&&c&&!bl(c,s.target)){var m=lU(0),h=m.top,g=m.left,j=m.bottom,y=m.right;if(u=La(c),d=Gy({top:u.top-h,left:u.left-g,bottom:u.bottom+j,right:u.right+y},{top:l,left:o}),!d)return}var w=this.emit("beforeSelect",this._initialEventData={isTouch:/^touch/.test(s.type),x:o,y:l,clientX:a,clientY:i});if(w!==!1)switch(s.type){case"mousedown":this._removeEndListener=zt("mouseup",this._handleTerminatingEvent),this._onEscListener=zt("keydown",this._handleTerminatingEvent),this._removeMoveListener=zt("mousemove",this._handleMoveEvent);break;case"touchstart":this._handleMoveEvent(s),this._removeEndListener=zt("touchend",this._handleTerminatingEvent),this._removeMoveListener=zt("touchmove",this._handleMoveEvent);break}}}}},{key:"_isWithinValidContainer",value:function(s){var n=s.target,a=this.validContainers;return!a||!a.length||!n?!0:a.some(function(i){return!!n.closest(i)})}},{key:"_handleTerminatingEvent",value:function(s){var n=this.selecting,a=this._selectRect;if(!n&&s.type.includes("key")&&(s=this._initialEvent),this.selecting=!1,this._removeEndListener&&this._removeEndListener(),this._removeMoveListener&&this._removeMoveListener(),this._selectRect=null,this._initialEvent=null,this._initialEventData=null,!!s){var i=!this.container||bl(this.container(),s.target),o=this._isWithinValidContainer(s);return s.key==="Escape"||!o?this.emit("reset"):!n&&i?this._handleClickEvent(s):n?this.emit("select",a):this.emit("reset")}}},{key:"_handleClickEvent",value:function(s){var n=po(s),a=n.pageX,i=n.pageY,o=n.clientX,l=n.clientY,c=new Date().getTime();return this._lastClickData&&c-this._lastClickData.timestamp<oU?(this._lastClickData=null,this.emit("doubleClick",{x:a,y:i,clientX:o,clientY:l})):(this._lastClickData={timestamp:c},this.emit("click",{x:a,y:i,clientX:o,clientY:l}))}},{key:"_handleMoveEvent",value:function(s){if(!(this._initialEventData===null||this.isDetached)){var n=this._initialEventData,a=n.x,i=n.y,o=po(s),l=o.pageX,c=o.pageY,d=Math.abs(a-l),u=Math.abs(i-c),m=Math.min(l,a),h=Math.min(c,i),g=this.selecting,j=this.isClick(l,c);j&&!g&&!(d||u)||(!g&&!j&&this.emit("selectStart",this._initialEventData),j||(this.selecting=!0,this._selectRect={top:h,left:m,x:l,y:c,right:m+d,bottom:h+u},this.emit("selecting",this._selectRect)),s.preventDefault())}}},{key:"_keyListener",value:function(s){this.ctrl=s.metaKey||s.ctrlKey}},{key:"isClick",value:function(s,n){var a=this._initialEventData,i=a.x,o=a.y,l=a.isTouch;return!l&&Math.abs(s-i)<=qy&&Math.abs(n-o)<=qy}}])}();function lU(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return cn(e)!=="object"&&(e={top:e,left:e,right:e,bottom:e}),e}function Gy(e,t){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=La(e),a=n.top,i=n.left,o=n.right,l=o===void 0?i:o,c=n.bottom,d=c===void 0?a:c,u=La(t),m=u.top,h=u.left,g=u.right,j=g===void 0?h:g,y=u.bottom,w=y===void 0?m:y;return!(d-s<m||a+s>w||l-s<h||i+s>j)}function La(e){if(!e.getBoundingClientRect)return e;var t=e.getBoundingClientRect(),s=t.left+Ky("left"),n=t.top+Ky("top");return{top:n,left:s,right:(e.offsetWidth||0)+s,bottom:(e.offsetHeight||0)+n}}function Ky(e){if(e==="left")return window.pageXOffset||document.body.scrollLeft||0;if(e==="top")return window.pageYOffset||document.body.scrollTop||0}var cU=function(e){function t(s,n){var a;return Et(this,t),a=qt(this,t,[s,n]),a.state={selecting:!1},a.containerRef=f.createRef(),a}return Gt(t,e),kt(t,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable()}},{key:"componentDidUpdate",value:function(n){!n.selectable&&this.props.selectable&&this._selectable(),n.selectable&&!this.props.selectable&&this._teardownSelectable()}},{key:"render",value:function(){var n=this.props,a=n.range,i=n.getNow,o=n.getters,l=n.date,c=n.components.dateCellWrapper,d=n.localizer,u=this.state,m=u.selecting,h=u.startIdx,g=u.endIdx,j=i();return H.createElement("div",{className:"rbc-row-bg",ref:this.containerRef},a.map(function(y,w){var x=m&&w>=h&&w<=g,p=o.dayProp(y),v=p.className,N=p.style;return H.createElement(c,{key:w,value:y,range:a},H.createElement("div",{style:N,className:mt("rbc-day-bg",v,x&&"rbc-selected-cell",d.isSameDate(y,j)&&"rbc-today",l&&d.neq(l,y,"month")&&"rbc-off-range-bg")}))}))}},{key:"_selectable",value:function(){var n=this,a=this.containerRef.current,i=this._selector=new n1(this.props.container,{longPressThreshold:this.props.longPressThreshold}),o=function(c,d){if(!Qd(a,c)&&!iU(a,c)){var u=La(a),m=n.props,h=m.range,g=m.rtl;if(Jz(u,c)){var j=r1(u,c.x,g,h.length);n._selectSlot({startIdx:j,endIdx:j,action:d,box:c})}}n._initial={},n.setState({selecting:!1})};i.on("selecting",function(l){var c=n.props,d=c.range,u=c.rtl,m=-1,h=-1;if(n.state.selecting||(Je(n.props.onSelectStart,[l]),n._initial={x:l.x,y:l.y}),i.isSelected(a)){var g=La(a),j=Zz(n._initial,g,l,d.length,u);m=j.startIdx,h=j.endIdx}n.setState({selecting:!0,startIdx:m,endIdx:h})}),i.on("beforeSelect",function(l){if(n.props.selectable==="ignoreEvents")return!Qd(n.containerRef.current,l)}),i.on("click",function(l){return o(l,"click")}),i.on("doubleClick",function(l){return o(l,"doubleClick")}),i.on("select",function(l){n._selectSlot(He(He({},n.state),{},{action:"select",bounds:l})),n._initial={},n.setState({selecting:!1}),Je(n.props.onSelectEnd,[n.state])})}},{key:"_teardownSelectable",value:function(){this._selector&&(this._selector.teardown(),this._selector=null)}},{key:"_selectSlot",value:function(n){var a=n.endIdx,i=n.startIdx,o=n.action,l=n.bounds,c=n.box;a!==-1&&i!==-1&&this.props.onSelectSlot&&this.props.onSelectSlot({start:i,end:a,action:o,bounds:l,box:c,resourceId:this.props.resourceId})}}])}(H.Component),Rr={propTypes:{slotMetrics:oe.object.isRequired,selected:oe.object,isAllDay:oe.bool,accessors:oe.object.isRequired,localizer:oe.object.isRequired,components:oe.object.isRequired,getters:oe.object.isRequired,onSelect:oe.func,onDoubleClick:oe.func,onKeyPress:oe.func},defaultProps:{segments:[],selected:{}},renderEvent:function(t,s){var n=t.selected;t.isAllDay;var a=t.accessors,i=t.getters,o=t.onSelect,l=t.onDoubleClick,c=t.onKeyPress,d=t.localizer,u=t.slotMetrics,m=t.components,h=t.resizable,g=u.continuesPrior(s),j=u.continuesAfter(s);return H.createElement(e1,{event:s,getters:i,localizer:d,accessors:a,components:m,onSelect:o,onDoubleClick:l,onKeyPress:c,continuesPrior:g,continuesAfter:j,slotStart:u.first,slotEnd:u.last,selected:Ju(s,n),resizable:h})},renderSpan:function(t,s,n){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:" ",i=Math.abs(s)/t*100+"%";return H.createElement("div",{key:n,className:"rbc-row-segment",style:{WebkitFlexBasis:i,flexBasis:i,maxWidth:i}},a)}},a1=function(e){function t(){return Et(this,t),qt(this,t,arguments)}return Gt(t,e),kt(t,[{key:"render",value:function(){var n=this,a=this.props,i=a.segments,o=a.slotMetrics.slots,l=a.className,c=1;return H.createElement("div",{className:mt(l,"rbc-row")},i.reduce(function(d,u,m){var h=u.event,g=u.left,j=u.right,y=u.span,w="_lvl_"+m,x=g-c,p=Rr.renderEvent(n.props,h);return x&&d.push(Rr.renderSpan(o,x,"".concat(w,"_gap"))),d.push(Rr.renderSpan(o,y,w,p)),c=j+1,d},[]))}}])}(H.Component);a1.defaultProps=He({},Rr.defaultProps);function i1(e){var t=e.dateRange,s=e.unit,n=s===void 0?"day":s,a=e.localizer;return{first:t[0],last:a.add(t[t.length-1],1,n)}}function dU(e,t,s,n){var a=i1({dateRange:t,localizer:n}),i=a.first,o=a.last,l=n.diff(i,o,"day"),c=n.max(n.startOf(s.start(e),"day"),i),d=n.min(n.ceil(s.end(e),"day"),o),u=f$(t,function(h){return n.isSameDate(h,c)}),m=n.diff(c,d,"day");return m=Math.min(m,l),m=Math.max(m-n.segmentOffset,1),{event:e,span:m,left:u+1,right:Math.max(u+m,1)}}function Kf(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1/0,s,n,a,i=[],o=[];for(s=0;s<e.length;s++){for(a=e[s],n=0;n<i.length&&uU(a,i[n]);n++);n>=t?o.push(a):(i[n]||(i[n]=[])).push(a)}for(s=0;s<i.length;s++)i[s].sort(function(l,c){return l.left-c.left});return{levels:i,extra:o}}function Nl(e,t,s,n,a){var i={start:n.start(e),end:n.end(e)},o={start:t,end:s};return a.inEventRange({event:i,range:o})}function uU(e,t){return t.some(function(s){return s.left<=e.right&&s.right>=e.left})}function mU(e,t,s){var n=Jc(e),a=[],i=[];n.forEach(function(c){var d=t.start(c),u=t.end(c);s.daySpan(d,u)>1?a.push(c):i.push(c)});var o=a.sort(function(c,d){return Xf(c,d,t,s)}),l=i.sort(function(c,d){return Xf(c,d,t,s)});return[].concat(Jc(o),Jc(l))}function Xf(e,t,s,n){var a={start:s.start(e),end:s.end(e),allDay:s.allDay(e)},i={start:s.start(t),end:s.end(t),allDay:s.allDay(t)};return n.sortEvents({evtA:a,evtB:i})}var Qf=function(t,s){return t.left<=s&&t.right>=s},vh=function(t,s){return t.filter(function(n){return Qf(n,s)}).map(function(n){return n.event})},o1=function(e){function t(){return Et(this,t),qt(this,t,arguments)}return Gt(t,e),kt(t,[{key:"render",value:function(){for(var n=this.props,a=n.segments,i=n.slotMetrics.slots,o=Kf(a).levels[0],l=1,c=1,d=[];l<=i;){var u="_lvl_"+l,m=o.filter(function(N){return Qf(N,l)})[0]||{},h=m.event,g=m.left,j=m.right,y=m.span;if(!h){var w=this.getHiddenEventsForSlot(a,l);if(w.length>0){var x=l-c;x&&d.push(Rr.renderSpan(i,x,u+"_gap")),d.push(Rr.renderSpan(i,1,u,this.renderShowMore(a,l))),c=l=l+1;continue}l++;continue}var p=Math.max(0,g-c);if(this.canRenderSlotEvent(g,y)){var v=Rr.renderEvent(this.props,h);p&&d.push(Rr.renderSpan(i,p,u+"_gap")),d.push(Rr.renderSpan(i,y,u,v)),c=l=j+1}else p&&d.push(Rr.renderSpan(i,p,u+"_gap")),d.push(Rr.renderSpan(i,1,u,this.renderShowMore(a,l))),c=l=l+1}return H.createElement("div",{className:"rbc-row"},d)}},{key:"getHiddenEventsForSlot",value:function(n,a){var i=vh(n,a),o=Kf(n).levels[0],l=o.filter(function(c){return Qf(c,a)}).map(function(c){return c.event});return i.filter(function(c){return!l.some(function(d){return d===c})})}},{key:"canRenderSlotEvent",value:function(n,a){var i=this.props.segments;return E$(n,n+a).every(function(o){var l=vh(i,o).length;return l===1})}},{key:"renderShowMore",value:function(n,a){var i=this,o=this.props,l=o.localizer,c=o.slotMetrics,d=o.components,u=c.getEventsForSlot(a),m=vh(n,a),h=m.length;if(d!=null&&d.showMore){var g=d.showMore,j=c.getDateForSlot(a-1);return h?H.createElement(g,{localizer:l,slotDate:j,slot:a,count:h,events:u,remainingEvents:m}):!1}return h?H.createElement("button",{type:"button",key:"sm_"+a,className:mt("rbc-button-link","rbc-show-more"),onClick:function(w){return i.showMore(a,w)}},l.messages.showMore(h,m,u)):!1}},{key:"showMore",value:function(n,a){a.preventDefault(),a.stopPropagation(),this.props.onShowMore(n,a.target)}}])}(H.Component);o1.defaultProps=He({},Rr.defaultProps);var hU=function(t){var s=t.children;return H.createElement("div",{className:"rbc-row-content-scroll-container"},s)},fU=function(t,s){return t.left<=s&&t.right>=s},pU=function(t,s){return t[0].range===s[0].range&&t[0].events===s[0].events};function l1(){return R2(function(e){for(var t=e.range,s=e.events,n=e.maxRows,a=e.minRows,i=e.accessors,o=e.localizer,l=i1({dateRange:t,localizer:o}),c=l.first,d=l.last,u=s.map(function(y){return dU(y,t,i,o)}),m=Kf(u,Math.max(n-1,1)),h=m.levels,g=m.extra,j=g.length>0?a-1:a;h.length<j;)h.push([]);return{first:c,last:d,levels:h,extra:g,range:t,slots:t.length,clone:function(w){var x=l1();return x(He(He({},e),w))},getDateForSlot:function(w){return t[w]},getSlotForDate:function(w){return t.find(function(x){return o.isSameDate(x,w)})},getEventsForSlot:function(w){return u.filter(function(x){return fU(x,w)}).map(function(x){return x.event})},continuesPrior:function(w){return o.continuesPrior(i.start(w),c)},continuesAfter:function(w){var x=i.start(w),p=i.end(w);return o.continuesAfter(x,p,d)}}},pU)}var Cl=function(e){function t(){var s;Et(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return s=qt(this,t,[].concat(a)),s.handleSelectSlot=function(o){var l=s.props,c=l.range,d=l.onSelectSlot;d(c.slice(o.start,o.end+1),o)},s.handleShowMore=function(o,l){var c=s.props,d=c.range,u=c.onShowMore,m=s.slotMetrics(s.props),h=fT(s.containerRef.current,".rbc-row-bg")[0],g;h&&(g=h.children[o-1]);var j=m.getEventsForSlot(o);u(j,d[o-1],g,o,l)},s.getContainer=function(){var o=s.props.container;return o?o():s.containerRef.current},s.renderHeadingCell=function(o,l){var c=s.props,d=c.renderHeader,u=c.getNow,m=c.localizer;return d({date:o,key:"header_".concat(l),className:mt("rbc-date-cell",m.isSameDate(o,u())&&"rbc-now")})},s.renderDummy=function(){var o=s.props,l=o.className,c=o.range,d=o.renderHeader,u=o.showAllEvents;return H.createElement("div",{className:l,ref:s.containerRef},H.createElement("div",{className:mt("rbc-row-content",u&&"rbc-row-content-scrollable")},d&&H.createElement("div",{className:"rbc-row",ref:s.headingRowRef},c.map(s.renderHeadingCell)),H.createElement("div",{className:"rbc-row",ref:s.eventRowRef},H.createElement("div",{className:"rbc-row-segment"},H.createElement("div",{className:"rbc-event"},H.createElement("div",{className:"rbc-event-content"}," "))))))},s.containerRef=f.createRef(),s.headingRowRef=f.createRef(),s.eventRowRef=f.createRef(),s.slotMetrics=l1(),s}return Gt(t,e),kt(t,[{key:"getRowLimit",value:function(){var n,a=ph(this.eventRowRef.current),i=(n=this.headingRowRef)!==null&&n!==void 0&&n.current?ph(this.headingRowRef.current):0,o=ph(this.containerRef.current)-i;return Math.max(Math.floor(o/a),1)}},{key:"render",value:function(){var n=this.props,a=n.date,i=n.rtl,o=n.range,l=n.className,c=n.selected,d=n.selectable,u=n.renderForMeasure,m=n.accessors,h=n.getters,g=n.components,j=n.getNow,y=n.renderHeader,w=n.onSelect,x=n.localizer,p=n.onSelectStart,v=n.onSelectEnd,N=n.onDoubleClick,b=n.onKeyPress,C=n.resourceId,S=n.longPressThreshold,k=n.isAllDay,D=n.resizable,L=n.showAllEvents;if(u)return this.renderDummy();var T=this.slotMetrics(this.props),B=T.levels,V=T.extra,A=L?hU:Ss,I=g.weekWrapper,q={selected:c,accessors:m,getters:h,localizer:x,components:g,onSelect:w,onDoubleClick:N,onKeyPress:b,resourceId:C,slotMetrics:T,resizable:D};return H.createElement("div",{className:l,role:"rowgroup",ref:this.containerRef},H.createElement(cU,{localizer:x,date:a,getNow:j,rtl:i,range:o,selectable:d,container:this.getContainer,getters:h,onSelectStart:p,onSelectEnd:v,onSelectSlot:this.handleSelectSlot,components:g,longPressThreshold:S,resourceId:C}),H.createElement("div",{className:mt("rbc-row-content",L&&"rbc-row-content-scrollable"),role:"row"},y&&H.createElement("div",{className:"rbc-row ",ref:this.headingRowRef},o.map(this.renderHeadingCell)),H.createElement(A,null,H.createElement(I,Object.assign({isAllDay:k},q,{rtl:this.props.rtl}),B.map(function(Y,M){return H.createElement(a1,Object.assign({key:M,segments:Y},q))}),!!V.length&&H.createElement(o1,Object.assign({segments:V,onShowMore:this.handleShowMore},q))))))}}])}(H.Component);Cl.defaultProps={minRows:0,maxRows:1/0};var rg=function(t){var s=t.label;return H.createElement("span",{role:"columnheader","aria-sort":"none"},s)},xU=function(t){var s=t.label,n=t.drilldownView,a=t.onDrillDown;return n?H.createElement("button",{type:"button",className:"rbc-button-link",onClick:a},s):H.createElement("span",null,s)},gU=["date","className"],vU=function(t,s,n,a,i){return t.filter(function(o){return Nl(o,s,n,a,i)})},Zu=function(e){function t(){var s;Et(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return s=qt(this,t,[].concat(a)),s.getContainer=function(){return s.containerRef.current},s.renderWeek=function(o,l){var c=s.props,d=c.events,u=c.components,m=c.selectable,h=c.getNow,g=c.selected,j=c.date,y=c.localizer,w=c.longPressThreshold,x=c.accessors,p=c.getters,v=c.showAllEvents,N=s.state,b=N.needLimitMeasure,C=N.rowLimit,S=vU(Jc(d),o[0],o[o.length-1],x,y),k=mU(S,x,y);return H.createElement(Cl,{key:l,ref:l===0?s.slotRowRef:void 0,container:s.getContainer,className:"rbc-month-row",getNow:h,date:j,range:o,events:k,maxRows:v?1/0:C,selected:g,selectable:m,components:u,accessors:x,getters:p,localizer:y,renderHeader:s.readerDateHeading,renderForMeasure:b,onShowMore:s.handleShowMore,onSelect:s.handleSelectEvent,onDoubleClick:s.handleDoubleClickEvent,onKeyPress:s.handleKeyPressEvent,onSelectSlot:s.handleSelectSlot,longPressThreshold:w,rtl:s.props.rtl,resizable:s.props.resizable,showAllEvents:v})},s.readerDateHeading=function(o){var l=o.date,c=o.className,d=Ps(o,gU),u=s.props,m=u.date,h=u.getDrilldownView,g=u.localizer,j=g.neq(m,l,"month"),y=g.isSameDate(l,m),w=h(l),x=g.format(l,"dateFormat"),p=s.props.components.dateHeader||xU;return H.createElement("div",Object.assign({},d,{className:mt(c,j&&"rbc-off-range",y&&"rbc-current"),role:"cell"}),H.createElement(p,{label:x,date:l,drilldownView:w,isOffRange:j,onDrillDown:function(N){return s.handleHeadingClick(l,w,N)}}))},s.handleSelectSlot=function(o,l){s._pendingSelection=s._pendingSelection.concat(o),clearTimeout(s._selectTimer),s._selectTimer=setTimeout(function(){return s.selectDates(l)})},s.handleHeadingClick=function(o,l,c){c.preventDefault(),s.clearSelection(),Je(s.props.onDrillDown,[o,l])},s.handleSelectEvent=function(){s.clearSelection();for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Je(s.props.onSelectEvent,l)},s.handleDoubleClickEvent=function(){s.clearSelection();for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Je(s.props.onDoubleClickEvent,l)},s.handleKeyPressEvent=function(){s.clearSelection();for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Je(s.props.onKeyPressEvent,l)},s.handleShowMore=function(o,l,c,d,u){var m=s.props,h=m.popup,g=m.onDrillDown,j=m.onShowMore,y=m.getDrilldownView,w=m.doShowMoreDrillDown;if(s.clearSelection(),h){var x=l2(c,s.containerRef.current);s.setState({overlay:{date:l,events:o,position:x,target:u}})}else w&&Je(g,[l,y(l)||Jt.DAY]);Je(j,[o,l,d])},s.overlayDisplay=function(){s.setState({overlay:null})},s.state={rowLimit:5,needLimitMeasure:!0,date:null},s.containerRef=f.createRef(),s.slotRowRef=f.createRef(),s._bgRows=[],s._pendingSelection=[],s}return Gt(t,e),kt(t,[{key:"componentDidMount",value:function(){var n=this,a;this.state.needLimitMeasure&&this.measureRowLimit(this.props),window.addEventListener("resize",this._resizeListener=function(){a||c2(function(){a=!1,n.setState({needLimitMeasure:!0})})},!1)}},{key:"componentDidUpdate",value:function(){this.state.needLimitMeasure&&this.measureRowLimit(this.props)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._resizeListener,!1)}},{key:"render",value:function(){var n=this.props,a=n.date,i=n.localizer,o=n.className,l=i.visibleDays(a,i),c=JA(l,7);return this._weekCount=c.length,H.createElement("div",{className:mt("rbc-month-view",o),role:"table","aria-label":"Month View",ref:this.containerRef},H.createElement("div",{className:"rbc-row rbc-month-header",role:"row"},this.renderHeaders(c[0])),c.map(this.renderWeek),this.props.popup&&this.renderOverlay())}},{key:"renderHeaders",value:function(n){var a=this.props,i=a.localizer,o=a.components,l=n[0],c=n[n.length-1],d=o.header||rg;return i.range(l,c,"day").map(function(u,m){return H.createElement("div",{key:"header_"+m,className:"rbc-header"},H.createElement(d,{date:u,localizer:i,label:i.format(u,"weekdayFormat")}))})}},{key:"renderOverlay",value:function(){var n,a,i=this,o=(n=(a=this.state)===null||a===void 0?void 0:a.overlay)!==null&&n!==void 0?n:{},l=this.props,c=l.accessors,d=l.localizer,u=l.components,m=l.getters,h=l.selected,g=l.popupOffset,j=l.handleDragStart,y=function(){return i.setState({overlay:null})};return H.createElement(tg,{overlay:o,accessors:c,localizer:d,components:u,getters:m,selected:h,popupOffset:g,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:j,show:!!o.position,overlayDisplay:this.overlayDisplay,onHide:y})}},{key:"measureRowLimit",value:function(){this.setState({needLimitMeasure:!1,rowLimit:this.slotRowRef.current.getRowLimit()})}},{key:"selectDates",value:function(n){var a=this._pendingSelection.slice();this._pendingSelection=[],a.sort(function(l,c){return+l-+c});var i=new Date(a[0]),o=new Date(a[a.length-1]);o.setDate(a[a.length-1].getDate()+1),Je(this.props.onSelectSlot,{slots:a,start:i,end:o,action:n.action,bounds:n.bounds,box:n.box})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}}],[{key:"getDerivedStateFromProps",value:function(n,a){var i=n.date,o=n.localizer;return{date:i,needLimitMeasure:o.neq(i,a.date,"month")}}}])}(H.Component);Zu.range=function(e,t){var s=t.localizer,n=s.firstVisibleDay(e,s),a=s.lastVisibleDay(e,s);return{start:n,end:a}};Zu.navigate=function(e,t,s){var n=s.localizer;switch(t){case gr.PREVIOUS:return n.add(e,-1,"month");case gr.NEXT:return n.add(e,1,"month");default:return e}};Zu.title=function(e,t){var s=t.localizer;return s.format(e,"monthHeaderFormat")};var Xy=function(t){var s=t.min,n=t.max,a=t.step,i=t.slots,o=t.localizer;return"".concat(+o.startOf(s,"minutes"))+"".concat(+o.startOf(n,"minutes"))+"".concat(a,"-").concat(i)};function sg(e){for(var t=e.min,s=e.max,n=e.step,a=e.timeslots,i=e.localizer,o=Xy({step:n,localizer:i}),l=1+i.getTotalMin(t,s),c=i.getMinutesFromMidnight(t),d=Math.ceil((l-1)/(n*a)),u=d*a,m=new Array(d),h=new Array(u),g=0;g<d;g++){m[g]=new Array(a);for(var j=0;j<a;j++){var y=g*a+j,w=y*n;h[y]=m[g][j]=i.getSlotDate(t,c,w)}}var x=h.length*n;h.push(i.getSlotDate(t,c,x));function p(v){var N=i.diff(t,v,"minutes")+i.getDstOffset(t,v);return Math.min(N,l)}return{groups:m,update:function(N){return Xy(N)!==o?sg(N):this},dateIsInGroup:function(N,b){var C=m[b+1];return i.inRange(N,m[b][0],C?C[0]:s,"minutes")},nextSlot:function(N){var b=h[Math.min(h.findIndex(function(C){return C===N||i.eq(C,N)})+1,h.length-1)];return i.eq(b,N)&&(b=i.add(N,n,"minutes")),b},closestSlotToPosition:function(N){var b=Math.min(h.length-1,Math.max(0,Math.floor(N*u)));return h[b]},closestSlotFromPoint:function(N,b){var C=Math.abs(b.top-b.bottom);return this.closestSlotToPosition((N.y-b.top)/C)},closestSlotFromDate:function(N){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(i.lt(N,t,"minutes"))return h[0];if(i.gt(N,s,"minutes"))return h[h.length-1];var C=i.diff(t,N,"minutes");return h[(C-C%n)/n+b]},startsBeforeDay:function(N){return i.lt(N,t,"day")},startsAfterDay:function(N){return i.gt(N,s,"day")},startsBefore:function(N){return i.lt(i.merge(t,N),t,"minutes")},startsAfter:function(N){return i.gt(i.merge(s,N),s,"minutes")},getRange:function(N,b,C,S){C||(N=i.min(s,i.max(t,N))),S||(b=i.min(s,i.max(t,b)));var k=p(N),D=p(b),L=D>n*u&&!i.eq(s,b)?(k-n)/(n*u)*100:k/(n*u)*100;return{top:L,height:D/(n*u)*100-L,start:p(N),startDate:N,end:p(b),endDate:b}},getCurrentTimePosition:function(N){var b=p(N),C=b/(n*u)*100;return C}}}var yU=function(){function e(t,s){var n=s.accessors,a=s.slotMetrics;Et(this,e);var i=a.getRange(n.start(t),n.end(t)),o=i.start,l=i.startDate,c=i.end,d=i.endDate,u=i.top,m=i.height;this.start=o,this.end=c,this.startMs=+l,this.endMs=+d,this.top=u,this.height=m,this.data=t}return kt(e,[{key:"_width",get:function(){if(this.rows){var s=this.rows.reduce(function(a,i){return Math.max(a,i.leaves.length+1)},0)+1;return 100/s}if(this.leaves){var n=100-this.container._width;return n/(this.leaves.length+1)}return this.row._width}},{key:"width",get:function(){var s=this._width,n=Math.min(100,this._width*1.7);if(this.rows)return n;if(this.leaves)return this.leaves.length>0?n:s;var a=this.row.leaves,i=a.indexOf(this);return i===a.length-1?s:n}},{key:"xOffset",get:function(){if(this.rows)return 0;if(this.leaves)return this.container._width;var s=this.row,n=s.leaves,a=s.xOffset,i=s._width,o=n.indexOf(this)+1;return a+o*i}}])}();function bU(e,t,s){return Math.abs(t.start-e.start)<s||t.start>e.start&&t.start<e.end}function jU(e){for(var t=Y8(e,["startMs",function(l){return-l.endMs}]),s=[];t.length>0;){var n=t.shift();s.push(n);for(var a=0;a<t.length;a++){var i=t[a];if(!(n.endMs>i.startMs)){if(a>0){var o=t.splice(a,1)[0];s.push(o)}break}}}return s}function c1(e){for(var t=e.events,s=e.minimumStartDifference,n=e.slotMetrics,a=e.accessors,i=t.map(function(u){return new yU(u,{slotMetrics:n,accessors:a})}),o=jU(i),l=[],c=function(){var m=o[d],h=l.find(function(y){return y.end>m.start||Math.abs(m.start-y.start)<s});if(!h)return m.rows=[],l.push(m),1;m.container=h;for(var g=null,j=h.rows.length-1;!g&&j>=0;j--)bU(h.rows[j],m,s)&&(g=h.rows[j]);g?(g.leaves.push(m),m.row=g):(m.leaves=[],h.rows.push(m))},d=0;d<o.length;d++)c();return o.map(function(u){return{event:u.data,style:{top:u.top,height:u.height,width:u.width,xOffset:Math.max(0,u.xOffset)}}})}function d1(e,t,s){for(var n=0;n<e.friends.length;++n)if(!(s.indexOf(e.friends[n])>-1)){t=t>e.friends[n].idx?t:e.friends[n].idx,s.push(e.friends[n]);var a=d1(e.friends[n],t,s);t=t>a?t:a}return t}function wU(e){var t=e.events,s=e.minimumStartDifference,n=e.slotMetrics,a=e.accessors,i=c1({events:t,minimumStartDifference:s,slotMetrics:n,accessors:a});i.sort(function(I,q){return I=I.style,q=q.style,I.top!==q.top?I.top>q.top?1:-1:I.height!==q.height?I.top+I.height<q.top+q.height?1:-1:0});for(var o=0;o<i.length;++o)i[o].friends=[],delete i[o].style.left,delete i[o].style.left,delete i[o].idx,delete i[o].size;for(var l=0;l<i.length-1;++l)for(var c=i[l],d=c.style.top,u=c.style.top+c.style.height,m=l+1;m<i.length;++m){var h=i[m],g=h.style.top,j=h.style.top+h.style.height;(g>=d&&j<=u||j>d&&j<=u||g>=d&&g<u)&&(c.friends.push(h),h.friends.push(c))}for(var y=0;y<i.length;++y){for(var w=i[y],x=[],p=0;p<100;++p)x.push(1);for(var v=0;v<w.friends.length;++v)w.friends[v].idx!==void 0&&(x[w.friends[v].idx]=0);w.idx=x.indexOf(1)}for(var N=0;N<i.length;++N){var b=0;if(!i[N].size){var C=[],S=d1(i[N],0,C);b=100/(S+1),i[N].size=b;for(var k=0;k<C.length;++k)C[k].size=b}}for(var D=0;D<i.length;++D){var L=i[D];L.style.left=L.idx*L.size;for(var T=0,B=0;B<L.friends.length;++B){var V=L.friends[B].idx;T=T>V?T:V}T<=L.idx&&(L.size=100-L.idx*L.size);var A=L.idx===0?0:3;L.style.width="calc(".concat(L.size,"% - ").concat(A,"px)"),L.style.height="calc(".concat(L.style.height,"% - 2px)"),L.style.xOffset="calc(".concat(L.style.left,"% + ").concat(A,"px)")}return i}var Qy={overlap:c1,"no-overlap":wU};function NU(e){return!!(e&&e.constructor&&e.call&&e.apply)}function CU(e){e.events,e.minimumStartDifference,e.slotMetrics,e.accessors;var t=e.dayLayoutAlgorithm,s=t;return t in Qy&&(s=Qy[t]),NU(s)?s.apply(this,arguments):[]}var u1=function(e){function t(){return Et(this,t),qt(this,t,arguments)}return Gt(t,e),kt(t,[{key:"render",value:function(){var n=this.props,a=n.renderSlot,i=n.resource,o=n.group,l=n.getters,c=n.components,d=c===void 0?{}:c,u=d.timeSlotWrapper,m=u===void 0?Ss:u,h=l?l.slotGroupProp(o):{};return H.createElement("div",Object.assign({className:"rbc-timeslot-group"},h),o.map(function(g,j){var y=l?l.slotProp(g,i):{};return H.createElement(m,{key:j,value:g,resource:i},H.createElement("div",Object.assign({},y,{className:mt("rbc-time-slot",y.className)}),a&&a(g,j)))}))}}])}(f.Component);function kc(e){return typeof e=="string"?e:e+"%"}function SU(e){var t=e.style,s=e.className,n=e.event,a=e.accessors,i=e.rtl,o=e.selected,l=e.label,c=e.continuesPrior,d=e.continuesAfter,u=e.getters,m=e.onClick,h=e.onDoubleClick,g=e.isBackgroundEvent,j=e.onKeyPress,y=e.components,w=y.event,x=y.eventWrapper,p=a.title(n),v=a.tooltip(n),N=a.end(n),b=a.start(n),C=u.eventProp(n,b,N,o),S=[H.createElement("div",{key:"1",className:"rbc-event-label"},l),H.createElement("div",{key:"2",className:"rbc-event-content"},w?H.createElement(w,{event:n,title:p}):p)],k=t.height,D=t.top,L=t.width,T=t.xOffset,B=He(He({},C.style),{},da({top:kc(D),height:kc(k),width:kc(L)},i?"right":"left",kc(T)));return H.createElement(x,Object.assign({type:"time"},e),H.createElement("div",{role:"button",tabIndex:0,onClick:m,onDoubleClick:h,style:B,onKeyDown:j,title:v?(typeof l=="string"?l+": ":"")+v:void 0,className:mt(g?"rbc-background-event":"rbc-event",s,C.className,{"rbc-selected":o,"rbc-event-continues-earlier":c,"rbc-event-continues-later":d})},S))}var EU=function(t){var s=t.children,n=t.className,a=t.style,i=t.innerRef;return H.createElement("div",{className:n,style:a,ref:i},s)},kU=H.forwardRef(function(e,t){return H.createElement(EU,Object.assign({},e,{innerRef:t}))}),DU=["dayProp"],AU=["eventContainerWrapper","timeIndicatorWrapper"],m1=function(e){function t(){var s;Et(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return s=qt(this,t,[].concat(a)),s.state={selecting:!1,timeIndicatorPosition:null},s.intervalTriggered=!1,s.renderEvents=function(o){var l=o.events,c=o.isBackgroundEvent,d=s.props,u=d.rtl,m=d.selected,h=d.accessors,g=d.localizer,j=d.getters,y=d.components,w=d.step,x=d.timeslots,p=d.dayLayoutAlgorithm,v=d.resizable,N=s,b=N.slotMetrics,C=g.messages,S=CU({events:l,accessors:h,slotMetrics:b,minimumStartDifference:Math.ceil(w*x/2),dayLayoutAlgorithm:p});return S.map(function(k,D){var L,T=k.event,B=k.style,V=h.end(T),A=h.start(T),I=(L=h.eventId(T))!==null&&L!==void 0?L:"evt_"+D,q="eventTimeRangeFormat",Y,M=b.startsBeforeDay(A),W=b.startsAfterDay(V);M?q="eventTimeRangeEndFormat":W&&(q="eventTimeRangeStartFormat"),M&&W?Y=C.allDay:Y=g.format({start:A,end:V},q);var E=M||b.startsBefore(A),R=W||b.startsAfter(V);return H.createElement(SU,{style:B,event:T,label:Y,key:I,getters:j,rtl:u,components:y,continuesPrior:E,continuesAfter:R,accessors:h,resource:s.props.resource,selected:Ju(T,m),onClick:function(_){return s._select(He(He(He({},T),s.props.resource&&{sourceResource:s.props.resource}),c&&{isBackgroundEvent:!0}),_)},onDoubleClick:function(_){return s._doubleClick(T,_)},isBackgroundEvent:c,onKeyPress:function(_){return s._keyPress(T,_)},resizable:v})})},s._selectable=function(){var o=s.containerRef.current,l=s.props,c=l.longPressThreshold,d=l.localizer,u=s._selector=new n1(function(){return o},{longPressThreshold:c}),m=function(y){var w=s.props.onSelecting,x=s.state||{},p=h(y),v=p.startDate,N=p.endDate;w&&(d.eq(x.startDate,v,"minutes")&&d.eq(x.endDate,N,"minutes")||w({start:v,end:N,resourceId:s.props.resource})===!1)||(s.state.start!==p.start||s.state.end!==p.end||s.state.selecting!==p.selecting)&&s.setState(p)},h=function(y){var w=s.slotMetrics.closestSlotFromPoint(y,La(o));s.state.selecting||(s._initialSlot=w);var x=s._initialSlot;d.lte(x,w)?w=s.slotMetrics.nextSlot(w):d.gt(x,w)&&(x=s.slotMetrics.nextSlot(x));var p=s.slotMetrics.getRange(d.min(x,w),d.max(x,w));return He(He({},p),{},{selecting:!0,top:"".concat(p.top,"%"),height:"".concat(p.height,"%")})},g=function(y,w){if(!Qd(s.containerRef.current,y)){var x=h(y),p=x.startDate,v=x.endDate;s._selectSlot({startDate:p,endDate:v,action:w,box:y})}s.setState({selecting:!1})};u.on("selecting",m),u.on("selectStart",m),u.on("beforeSelect",function(j){if(s.props.selectable==="ignoreEvents")return!Qd(s.containerRef.current,j)}),u.on("click",function(j){return g(j,"click")}),u.on("doubleClick",function(j){return g(j,"doubleClick")}),u.on("select",function(j){s.state.selecting&&(s._selectSlot(He(He({},s.state),{},{action:"select",bounds:j})),s.setState({selecting:!1}))}),u.on("reset",function(){s.state.selecting&&s.setState({selecting:!1})})},s._teardownSelectable=function(){s._selector&&(s._selector.teardown(),s._selector=null)},s._selectSlot=function(o){for(var l=o.startDate,c=o.endDate,d=o.action,u=o.bounds,m=o.box,h=l,g=[];s.props.localizer.lte(h,c);)g.push(h),h=new Date(+h+s.props.step*60*1e3);Je(s.props.onSelectSlot,{slots:g,start:l,end:c,resourceId:s.props.resource,action:d,bounds:u,box:m})},s._select=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Je(s.props.onSelectEvent,l)},s._doubleClick=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Je(s.props.onDoubleClickEvent,l)},s._keyPress=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Je(s.props.onKeyPressEvent,l)},s.slotMetrics=sg(s.props),s.containerRef=f.createRef(),s}return Gt(t,e),kt(t,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable(),this.props.isNow&&this.setTimeIndicatorPositionUpdateInterval()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable(),this.clearTimeIndicatorInterval()}},{key:"componentDidUpdate",value:function(n,a){this.props.selectable&&!n.selectable&&this._selectable(),!this.props.selectable&&n.selectable&&this._teardownSelectable();var i=this.props,o=i.getNow,l=i.isNow,c=i.localizer,d=i.date,u=i.min,m=i.max,h=c.neq(n.getNow(),o(),"minutes");if(n.isNow!==l||h){if(this.clearTimeIndicatorInterval(),l){var g=!h&&c.eq(n.date,d,"minutes")&&a.timeIndicatorPosition===this.state.timeIndicatorPosition;this.setTimeIndicatorPositionUpdateInterval(g)}}else l&&(c.neq(n.min,u,"minutes")||c.neq(n.max,m,"minutes"))&&this.positionTimeIndicator()}},{key:"setTimeIndicatorPositionUpdateInterval",value:function(){var n=this,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;!this.intervalTriggered&&!a&&this.positionTimeIndicator(),this._timeIndicatorTimeout=window.setTimeout(function(){n.intervalTriggered=!0,n.positionTimeIndicator(),n.setTimeIndicatorPositionUpdateInterval()},6e4)}},{key:"clearTimeIndicatorInterval",value:function(){this.intervalTriggered=!1,window.clearTimeout(this._timeIndicatorTimeout)}},{key:"positionTimeIndicator",value:function(){var n=this.props,a=n.min,i=n.max,o=n.getNow,l=o();if(l>=a&&l<=i){var c=this.slotMetrics.getCurrentTimePosition(l);this.intervalTriggered=!0,this.setState({timeIndicatorPosition:c})}else this.clearTimeIndicatorInterval()}},{key:"render",value:function(){var n=this.props,a=n.date,i=n.max,o=n.rtl,l=n.isNow,c=n.resource,d=n.accessors,u=n.localizer,m=n.getters,h=m.dayProp,g=Ps(m,DU),j=n.components,y=j.eventContainerWrapper,w=j.timeIndicatorWrapper,x=Ps(j,AU);this.slotMetrics=this.slotMetrics.update(this.props);var p=this.slotMetrics,v=this.state,N=v.selecting,b=v.top,C=v.height,S=v.startDate,k=v.endDate,D={start:S,end:k},L=h(i,c),T=L.className,B=L.style,V={className:"rbc-current-time-indicator",style:{top:"".concat(this.state.timeIndicatorPosition,"%")}},A=x.dayColumnWrapper||kU;return H.createElement(A,{ref:this.containerRef,date:a,style:B,className:mt(T,"rbc-day-slot","rbc-time-column",l&&"rbc-now",l&&"rbc-today",N&&"rbc-slot-selecting"),slotMetrics:p,resource:c},p.groups.map(function(I,q){return H.createElement(u1,{key:q,group:I,resource:c,getters:g,components:x})}),H.createElement(y,{localizer:u,resource:c,accessors:d,getters:g,components:x,slotMetrics:p},H.createElement("div",{className:mt("rbc-events-container",o&&"rtl")},this.renderEvents({events:this.props.backgroundEvents,isBackgroundEvent:!0}),this.renderEvents({events:this.props.events}))),N&&H.createElement("div",{className:"rbc-slot-selection",style:{top:b,height:C}},H.createElement("span",null,u.format(D,"selectRangeFormat"))),l&&this.intervalTriggered&&H.createElement(w,V,H.createElement("div",V)))}}])}(H.Component);m1.defaultProps={dragThroughEvents:!0,timeslots:2};var h1=function(t){var s=t.label;return H.createElement(H.Fragment,null,s)},TU=function(e){function t(){var s;Et(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return s=qt(this,t,[].concat(a)),s.handleHeaderClick=function(o,l,c){c.preventDefault(),Je(s.props.onDrillDown,[o,l])},s.renderRow=function(o){var l=s.props,c=l.events,d=l.rtl,u=l.selectable,m=l.getNow,h=l.range,g=l.getters,j=l.localizer,y=l.accessors,w=l.components,x=l.resizable,p=y.resourceId(o),v=o?c.filter(function(N){return y.resource(N)===p}):c;return H.createElement(Cl,{isAllDay:!0,rtl:d,getNow:m,minRows:2,maxRows:s.props.allDayMaxRows+1,range:h,events:v,resourceId:p,className:"rbc-allday-cell",selectable:u,selected:s.props.selected,components:w,accessors:y,getters:g,localizer:j,onSelect:s.props.onSelectEvent,onShowMore:s.props.onShowMore,onDoubleClick:s.props.onDoubleClickEvent,onKeyPress:s.props.onKeyPressEvent,onSelectSlot:s.props.onSelectSlot,longPressThreshold:s.props.longPressThreshold,resizable:x})},s}return Gt(t,e),kt(t,[{key:"renderHeaderCells",value:function(n){var a=this,i=this.props,o=i.localizer,l=i.getDrilldownView,c=i.getNow,d=i.getters.dayProp,u=i.components.header,m=u===void 0?rg:u,h=c();return n.map(function(g,j){var y=l(g),w=o.format(g,"dayFormat"),x=d(g),p=x.className,v=x.style,N=H.createElement(m,{date:g,label:w,localizer:o});return H.createElement("div",{key:j,style:v,className:mt("rbc-header",p,o.isSameDate(g,h)&&"rbc-today")},y?H.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(C){return a.handleHeaderClick(g,y,C)}},N):H.createElement("span",null,N))})}},{key:"render",value:function(){var n=this,a=this.props,i=a.width,o=a.rtl,l=a.resources,c=a.range,d=a.events,u=a.getNow,m=a.accessors,h=a.selectable,g=a.components,j=a.getters,y=a.scrollRef,w=a.localizer,x=a.isOverflowing,p=a.components,v=p.timeGutterHeader,N=p.resourceHeader,b=N===void 0?h1:N,C=a.resizable,S={};x&&(S[o?"marginLeft":"marginRight"]="".concat(Px()-1,"px"));var k=l.groupEvents(d);return H.createElement("div",{style:S,ref:y,className:mt("rbc-time-header",x&&"rbc-overflowing")},H.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:i,minWidth:i,maxWidth:i}},v&&H.createElement(v,null)),l.map(function(D,L){var T=Br(D,2),B=T[0],V=T[1];return H.createElement("div",{className:"rbc-time-header-content",key:B||L},V&&H.createElement("div",{className:"rbc-row rbc-row-resource",key:"resource_".concat(L)},H.createElement("div",{className:"rbc-header"},H.createElement(b,{index:L,label:m.resourceTitle(V),resource:V}))),H.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(c.length<=1?" rbc-time-header-cell-single-day":"")},n.renderHeaderCells(c)),H.createElement(Cl,{isAllDay:!0,rtl:o,getNow:u,minRows:2,maxRows:n.props.allDayMaxRows+1,range:c,events:k.get(B)||[],resourceId:V&&B,className:"rbc-allday-cell",selectable:h,selected:n.props.selected,components:g,accessors:m,getters:j,localizer:w,onSelect:n.props.onSelectEvent,onShowMore:n.props.onShowMore,onDoubleClick:n.props.onDoubleClickEvent,onKeyDown:n.props.onKeyPressEvent,onSelectSlot:n.props.onSelectSlot,longPressThreshold:n.props.longPressThreshold,resizable:C}))}))}}])}(H.Component),_U=function(e){function t(){var s;Et(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return s=qt(this,t,[].concat(a)),s.handleHeaderClick=function(o,l,c){c.preventDefault(),Je(s.props.onDrillDown,[o,l])},s}return Gt(t,e),kt(t,[{key:"renderHeaderCells",value:function(n){var a=this,i=this.props,o=i.localizer,l=i.getDrilldownView,c=i.getNow,d=i.getters.dayProp,u=i.components,m=u.header,h=m===void 0?rg:m,g=u.resourceHeader,j=g===void 0?h1:g,y=i.resources,w=i.accessors,x=i.events,p=i.rtl,v=i.selectable,N=i.components,b=i.getters,C=i.resizable,S=c(),k=y.groupEvents(x);return n.map(function(D,L){var T=l(D),B=o.format(D,"dayFormat"),V=d(D),A=V.className,I=V.style,q=H.createElement(h,{date:D,label:B,localizer:o});return H.createElement("div",{key:L,className:"rbc-time-header-content rbc-resource-grouping"},H.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(n.length<=1?" rbc-time-header-cell-single-day":"")},H.createElement("div",{style:I,className:mt("rbc-header",A,o.isSameDate(D,S)&&"rbc-today")},T?H.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(M){return a.handleHeaderClick(D,T,M)}},q):H.createElement("span",null,q))),H.createElement("div",{className:"rbc-row"},y.map(function(Y,M){var W=Br(Y,2),E=W[0],R=W[1];return H.createElement("div",{key:"resource_".concat(E,"_").concat(M),className:mt("rbc-header",A,o.isSameDate(D,S)&&"rbc-today")},H.createElement(j,{index:M,label:w.resourceTitle(R),resource:R}))})),H.createElement("div",{className:"rbc-row rbc-m-b-negative-3 rbc-h-full"},y.map(function(Y,M){var W=Br(Y,2),E=W[0],R=W[1],$=(k.get(E)||[]).filter(function(_){return o.isSameDate(_.start,D)||o.isSameDate(_.end,D)});return H.createElement(Cl,{key:"resource_".concat(E,"_").concat(M),isAllDay:!0,rtl:p,getNow:c,minRows:2,maxRows:a.props.allDayMaxRows+1,range:[D],events:$,resourceId:R&&E,className:"rbc-allday-cell",selectable:v,selected:a.props.selected,components:N,accessors:w,getters:b,localizer:o,onSelect:a.props.onSelectEvent,onShowMore:a.props.onShowMore,onDoubleClick:a.props.onDoubleClickEvent,onKeyDown:a.props.onKeyPressEvent,onSelectSlot:a.props.onSelectSlot,longPressThreshold:a.props.longPressThreshold,resizable:C})})))})}},{key:"render",value:function(){var n=this.props,a=n.width,i=n.rtl,o=n.range,l=n.scrollRef,c=n.isOverflowing,d=n.components.timeGutterHeader,u={};return c&&(u[i?"marginLeft":"marginRight"]="".concat(Px()-1,"px")),H.createElement("div",{style:u,ref:l,className:mt("rbc-time-header",c&&"rbc-overflowing")},H.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:a,minWidth:a,maxWidth:a}},d&&H.createElement(d,null)),this.renderHeaderCells(o))}}])}(H.Component);function OU(e){var t=e.min,s=e.max,n=e.localizer;return n.getTimezoneOffset(t)!==n.getTimezoneOffset(s)?{start:n.add(t,-1,"day"),end:n.add(s,-1,"day")}:{start:t,end:s}}var MU=function(t){var s=t.min,n=t.max,a=t.timeslots,i=t.step,o=t.localizer,l=t.getNow,c=t.resource,d=t.components,u=t.getters,m=t.gutterRef,h=d.timeGutterWrapper,g=f.useMemo(function(){return OU({min:s,max:n,localizer:o})},[s==null?void 0:s.toISOString(),n==null?void 0:n.toISOString(),o]),j=g.start,y=g.end,w=f.useState(sg({min:j,max:y,timeslots:a,step:i,localizer:o})),x=Br(w,2),p=x[0],v=x[1];f.useEffect(function(){p&&v(p.update({min:j,max:y,timeslots:a,step:i,localizer:o}))},[j==null?void 0:j.toISOString(),y==null?void 0:y.toISOString(),a,i]);var N=f.useCallback(function(b,C){if(C)return null;var S=p.dateIsInGroup(l(),C);return H.createElement("span",{className:mt("rbc-label",S&&"rbc-now")},o.format(b,"timeGutterFormat"))},[p,o,l]);return H.createElement(h,{slotMetrics:p},H.createElement("div",{className:"rbc-time-gutter rbc-time-column",ref:m},p.groups.map(function(b,C){return H.createElement(u1,{key:C,group:b,resource:c,components:d,renderSlot:N,getters:u})})))},RU=H.forwardRef(function(e,t){return H.createElement(MU,Object.assign({gutterRef:t},e))}),yh={};function PU(e,t){return{map:function(n){return e?e.map(function(a,i){return n([t.resourceId(a),a],i)}):[n([yh,null],0)]},groupEvents:function(n){var a=new Map;return e?(n.forEach(function(i){var o=t.resource(i)||yh;if(Array.isArray(o))o.forEach(function(c){var d=a.get(c)||[];d.push(i),a.set(c,d)});else{var l=a.get(o)||[];l.push(i),a.set(o,l)}}),a):(a.set(yh,n),a)}}}var qi=function(e){function t(s){var n;return Et(this,t),n=qt(this,t,[s]),n.handleScroll=function(a){n.scrollRef.current&&(n.scrollRef.current.scrollLeft=a.target.scrollLeft)},n.handleResize=function(){Iv(n.rafHandle),n.rafHandle=c2(n.checkOverflow)},n.handleKeyPressEvent=function(){n.clearSelection();for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];Je(n.props.onKeyPressEvent,i)},n.handleSelectEvent=function(){n.clearSelection();for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];Je(n.props.onSelectEvent,i)},n.handleDoubleClickEvent=function(){n.clearSelection();for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];Je(n.props.onDoubleClickEvent,i)},n.handleShowMore=function(a,i,o,l,c){var d=n.props,u=d.popup,m=d.onDrillDown,h=d.onShowMore,g=d.getDrilldownView,j=d.doShowMoreDrillDown;if(n.clearSelection(),u){var y=l2(o,n.containerRef.current);n.setState({overlay:{date:i,events:a,position:He(He({},y),{},{width:"200px"}),target:c}})}else j&&Je(m,[i,g(i)||Jt.DAY]);Je(h,[a,i,l])},n.handleSelectAllDaySlot=function(a,i){var o=n.props.onSelectSlot,l=new Date(a[0]),c=new Date(a[a.length-1]);c.setDate(a[a.length-1].getDate()+1),Je(o,{slots:a,start:l,end:c,action:i.action,resourceId:i.resourceId})},n.overlayDisplay=function(){n.setState({overlay:null})},n.checkOverflow=function(){if(!n._updatingOverflow){var a=n.contentRef.current;if(a!=null&&a.scrollHeight){var i=a.scrollHeight>a.clientHeight;n.state.isOverflowing!==i&&(n._updatingOverflow=!0,n.setState({isOverflowing:i},function(){n._updatingOverflow=!1}))}}},n.memoizedResources=R2(function(a,i){return PU(a,i)}),n.state={gutterWidth:void 0,isOverflowing:null},n.scrollRef=H.createRef(),n.contentRef=H.createRef(),n.containerRef=H.createRef(),n._scrollRatio=null,n.gutterRef=f.createRef(),n}return Gt(t,e),kt(t,[{key:"getSnapshotBeforeUpdate",value:function(){return this.checkOverflow(),null}},{key:"componentDidMount",value:function(){this.props.width==null&&this.measureGutter(),this.calculateScroll(),this.applyScroll(),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),Iv(this.rafHandle),this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest)}},{key:"componentDidUpdate",value:function(){this.applyScroll()}},{key:"renderDayColumn",value:function(n,a,i,o,l,c,d,u,m,h){var g=this.props,j=g.min,y=g.max,w=(o.get(a)||[]).filter(function(p){return c.inRange(n,d.start(p),d.end(p),"day")}),x=(l.get(a)||[]).filter(function(p){return c.inRange(n,d.start(p),d.end(p),"day")});return H.createElement(m1,Object.assign({},this.props,{localizer:c,min:c.merge(n,j),max:c.merge(n,y),resource:i&&a,components:u,isNow:c.isSameDate(n,h),key:"".concat(a,"-").concat(n),date:n,events:w,backgroundEvents:x,dayLayoutAlgorithm:m}))}},{key:"renderResourcesFirst",value:function(n,a,i,o,l,c,d,u,m){var h=this;return a.map(function(g){var j=Br(g,2),y=j[0],w=j[1];return n.map(function(x){return h.renderDayColumn(x,y,w,i,o,l,c,u,m,d)})})}},{key:"renderRangeFirst",value:function(n,a,i,o,l,c,d,u,m){var h=this;return n.map(function(g){return H.createElement("div",{style:{display:"flex",minHeight:"100%",flex:1},key:g},a.map(function(j){var y=Br(j,2),w=y[0],x=y[1];return H.createElement("div",{style:{flex:1},key:c.resourceId(x)},h.renderDayColumn(g,w,x,i,o,l,c,u,m,d))}))})}},{key:"renderEvents",value:function(n,a,i,o){var l=this.props,c=l.accessors,d=l.localizer,u=l.resourceGroupingLayout,m=l.components,h=l.dayLayoutAlgorithm,g=this.memoizedResources(this.props.resources,c),j=g.groupEvents(a),y=g.groupEvents(i);return u?this.renderRangeFirst(n,g,j,y,d,c,o,m,h):this.renderResourcesFirst(n,g,j,y,d,c,o,m,h)}},{key:"render",value:function(){var n,a=this.props,i=a.events,o=a.backgroundEvents,l=a.range,c=a.width,d=a.rtl,u=a.selected,m=a.getNow,h=a.resources,g=a.components,j=a.accessors,y=a.getters,w=a.localizer,x=a.min,p=a.max,v=a.showMultiDayTimes,N=a.longPressThreshold,b=a.resizable,C=a.resourceGroupingLayout;c=c||this.state.gutterWidth;var S=l[0],k=l[l.length-1];this.slots=l.length;var D=[],L=[],T=[];i.forEach(function(V){if(Nl(V,S,k,j,w)){var A=j.start(V),I=j.end(V);j.allDay(V)||w.startAndEndAreDateOnly(A,I)||!v&&!w.isSameDate(A,I)?D.push(V):L.push(V)}}),o.forEach(function(V){Nl(V,S,k,j,w)&&T.push(V)}),D.sort(function(V,A){return Xf(V,A,j,w)});var B={range:l,events:D,width:c,rtl:d,getNow:m,localizer:w,selected:u,allDayMaxRows:this.props.showAllEvents?1/0:(n=this.props.allDayMaxRows)!==null&&n!==void 0?n:1/0,resources:this.memoizedResources(h,j),selectable:this.props.selectable,accessors:j,getters:y,components:g,scrollRef:this.scrollRef,isOverflowing:this.state.isOverflowing,longPressThreshold:N,onSelectSlot:this.handleSelectAllDaySlot,onSelectEvent:this.handleSelectEvent,onShowMore:this.handleShowMore,onDoubleClickEvent:this.props.onDoubleClickEvent,onKeyPressEvent:this.props.onKeyPressEvent,onDrillDown:this.props.onDrillDown,getDrilldownView:this.props.getDrilldownView,resizable:b};return H.createElement("div",{className:mt("rbc-time-view",h&&"rbc-time-view-resources"),ref:this.containerRef},h&&h.length>1&&C?H.createElement(_U,B):H.createElement(TU,B),this.props.popup&&this.renderOverlay(),H.createElement("div",{ref:this.contentRef,className:"rbc-time-content",onScroll:this.handleScroll},H.createElement(RU,{date:S,ref:this.gutterRef,localizer:w,min:w.merge(S,x),max:w.merge(S,p),step:this.props.step,getNow:this.props.getNow,timeslots:this.props.timeslots,components:g,className:"rbc-time-gutter",getters:y}),this.renderEvents(l,L,T,m())))}},{key:"renderOverlay",value:function(){var n,a,i=this,o=(n=(a=this.state)===null||a===void 0?void 0:a.overlay)!==null&&n!==void 0?n:{},l=this.props,c=l.accessors,d=l.localizer,u=l.components,m=l.getters,h=l.selected,g=l.popupOffset,j=l.handleDragStart,y=function(){return i.setState({overlay:null})};return H.createElement(tg,{overlay:o,accessors:c,localizer:d,components:u,getters:m,selected:h,popupOffset:g,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:j,show:!!o.position,overlayDisplay:this.overlayDisplay,onHide:y})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}},{key:"measureGutter",value:function(){var n=this;this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest),this.measureGutterAnimationFrameRequest=window.requestAnimationFrame(function(){var a,i=(a=n.gutterRef)!==null&&a!==void 0&&a.current?qf(n.gutterRef.current):void 0;i&&n.state.gutterWidth!==i&&n.setState({gutterWidth:i})})}},{key:"applyScroll",value:function(){if(this._scrollRatio!=null&&this.props.enableAutoScroll===!0){var n=this.contentRef.current;n.scrollTop=n.scrollHeight*this._scrollRatio,this._scrollRatio=null}}},{key:"calculateScroll",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,a=n.min,i=n.max,o=n.scrollToTime,l=n.localizer,c=l.diff(l.merge(o,a),o,"milliseconds"),d=l.diff(a,i,"milliseconds");this._scrollRatio=c/d}}])}(f.Component);qi.defaultProps={step:30,timeslots:2,resourceGroupingLayout:!1};var LU=["date","localizer","min","max","scrollToTime","enableAutoScroll"],em=function(e){function t(){return Et(this,t),qt(this,t,arguments)}return Gt(t,e),kt(t,[{key:"render",value:function(){var n=this.props,a=n.date,i=n.localizer,o=n.min,l=o===void 0?i.startOf(new Date,"day"):o,c=n.max,d=c===void 0?i.endOf(new Date,"day"):c,u=n.scrollToTime,m=u===void 0?i.startOf(new Date,"day"):u,h=n.enableAutoScroll,g=h===void 0?!0:h,j=Ps(n,LU),y=t.range(a,{localizer:i});return H.createElement(qi,Object.assign({},j,{range:y,eventOffset:10,localizer:i,min:l,max:d,scrollToTime:m,enableAutoScroll:g}))}}])}(H.Component);em.range=function(e,t){var s=t.localizer;return[s.startOf(e,"day")]};em.navigate=function(e,t,s){var n=s.localizer;switch(t){case gr.PREVIOUS:return n.add(e,-1,"day");case gr.NEXT:return n.add(e,1,"day");default:return e}};em.title=function(e,t){var s=t.localizer;return s.format(e,"dayHeaderFormat")};var IU=["date","localizer","min","max","scrollToTime","enableAutoScroll"],Hn=function(e){function t(){return Et(this,t),qt(this,t,arguments)}return Gt(t,e),kt(t,[{key:"render",value:function(){var n=this.props,a=n.date,i=n.localizer,o=n.min,l=o===void 0?i.startOf(new Date,"day"):o,c=n.max,d=c===void 0?i.endOf(new Date,"day"):c,u=n.scrollToTime,m=u===void 0?i.startOf(new Date,"day"):u,h=n.enableAutoScroll,g=h===void 0?!0:h,j=Ps(n,IU),y=t.range(a,this.props);return H.createElement(qi,Object.assign({},j,{range:y,eventOffset:15,localizer:i,min:l,max:d,scrollToTime:m,enableAutoScroll:g}))}}])}(H.Component);Hn.defaultProps=qi.defaultProps;Hn.navigate=function(e,t,s){var n=s.localizer;switch(t){case gr.PREVIOUS:return n.add(e,-1,"week");case gr.NEXT:return n.add(e,1,"week");default:return e}};Hn.range=function(e,t){var s=t.localizer,n=s.startOfWeek(),a=s.startOf(e,"week",n),i=s.endOf(e,"week",n);return s.range(a,i)};Hn.title=function(e,t){var s=t.localizer,n=Hn.range(e,{localizer:s}),a=z2(n),i=a[0],o=a.slice(1);return s.format({start:i,end:o.pop()},"dayRangeHeaderFormat")};var $U=["date","localizer","min","max","scrollToTime","enableAutoScroll"];function ng(e,t){return Hn.range(e,t).filter(function(s){return[6,0].indexOf(s.getDay())===-1})}var Kl=function(e){function t(){return Et(this,t),qt(this,t,arguments)}return Gt(t,e),kt(t,[{key:"render",value:function(){var n=this.props,a=n.date,i=n.localizer,o=n.min,l=o===void 0?i.startOf(new Date,"day"):o,c=n.max,d=c===void 0?i.endOf(new Date,"day"):c,u=n.scrollToTime,m=u===void 0?i.startOf(new Date,"day"):u,h=n.enableAutoScroll,g=h===void 0?!0:h,j=Ps(n,$U),y=ng(a,this.props);return H.createElement(qi,Object.assign({},j,{range:y,eventOffset:15,localizer:i,min:l,max:d,scrollToTime:m,enableAutoScroll:g}))}}])}(H.Component);Kl.defaultProps=qi.defaultProps;Kl.range=ng;Kl.navigate=Hn.navigate;Kl.title=function(e,t){var s=t.localizer,n=ng(e,{localizer:s}),a=z2(n),i=a[0],o=a.slice(1);return s.format({start:i,end:o.pop()},"dayRangeHeaderFormat")};var tm=30;function rm(e){var t=e.accessors,s=e.components,n=e.date,a=e.events,i=e.getters,o=e.length,l=o===void 0?tm:o,c=e.localizer,d=e.onDoubleClickEvent,u=e.onSelectEvent,m=e.selected,h=f.useRef(null),g=f.useRef(null),j=f.useRef(null),y=f.useRef(null),w=f.useRef(null);f.useEffect(function(){v()});var x=function(k,D,L){var T=s.event,B=s.date;return D=D.filter(function(V){return Nl(V,c.startOf(k,"day"),c.endOf(k,"day"),t,c)}),D.map(function(V,A){var I=t.title(V),q=t.end(V),Y=t.start(V),M=i.eventProp(V,Y,q,Ju(V,m)),W=A===0&&c.format(k,"agendaDateFormat"),E=A===0?H.createElement("td",{rowSpan:D.length,className:"rbc-agenda-date-cell"},B?H.createElement(B,{day:k,label:W}):W):!1;return H.createElement("tr",{key:L+"_"+A,className:M.className,style:M.style},E,H.createElement("td",{className:"rbc-agenda-time-cell"},p(k,V)),H.createElement("td",{className:"rbc-agenda-event-cell",onClick:function($){return u&&u(V,$)},onDoubleClick:function($){return d&&d(V,$)}},T?H.createElement(T,{event:V,title:I}):I))},[])},p=function(k,D){var L="",T=s.time,B=c.messages.allDay,V=t.end(D),A=t.start(D);return t.allDay(D)||(c.eq(A,V)?B=c.format(A,"agendaTimeFormat"):c.isSameDate(A,V)?B=c.format({start:A,end:V},"agendaTimeRangeFormat"):c.isSameDate(k,A)?B=c.format(A,"agendaTimeFormat"):c.isSameDate(k,V)&&(B=c.format(V,"agendaTimeFormat"))),c.gt(k,A,"day")&&(L="rbc-continues-prior"),c.lt(k,V,"day")&&(L+=" rbc-continues-after"),H.createElement("span",{className:L.trim()},T?H.createElement(T,{event:D,day:k,label:B}):B)},v=function(){if(w.current){var k=h.current,D=w.current.firstChild;if(D){var L=y.current.scrollHeight>y.current.clientHeight,T=[],B=T;T=[qf(D.children[0]),qf(D.children[1])],(B[0]!==T[0]||B[1]!==T[1])&&(g.current.style.width=T[0]+"px",j.current.style.width=T[1]+"px"),L?(F3(k,"rbc-header-overflowing"),k.style.marginRight=Px()+"px"):B3(k,"rbc-header-overflowing")}}},N=c.messages,b=c.add(n,l,"day"),C=c.range(n,b,"day");return a=a.filter(function(S){return Nl(S,c.startOf(n,"day"),c.endOf(b,"day"),t,c)}),a.sort(function(S,k){return+t.start(S)-+t.start(k)}),H.createElement("div",{className:"rbc-agenda-view"},a.length!==0?H.createElement(H.Fragment,null,H.createElement("table",{ref:h,className:"rbc-agenda-table"},H.createElement("thead",null,H.createElement("tr",null,H.createElement("th",{className:"rbc-header",ref:g},N.date),H.createElement("th",{className:"rbc-header",ref:j},N.time),H.createElement("th",{className:"rbc-header"},N.event)))),H.createElement("div",{className:"rbc-agenda-content",ref:y},H.createElement("table",{className:"rbc-agenda-table"},H.createElement("tbody",{ref:w},C.map(function(S,k){return x(S,a,k)}))))):H.createElement("span",{className:"rbc-agenda-empty"},N.noEventsInRange))}rm.range=function(e,t){var s=t.length,n=s===void 0?tm:s,a=t.localizer,i=a.add(e,n,"day");return{start:e,end:i}};rm.navigate=function(e,t,s){var n=s.length,a=n===void 0?tm:n,i=s.localizer;switch(t){case gr.PREVIOUS:return i.add(e,-a,"day");case gr.NEXT:return i.add(e,a,"day");default:return e}};rm.title=function(e,t){var s=t.length,n=s===void 0?tm:s,a=t.localizer,i=a.add(e,n,"day");return a.format({start:e,end:i},"agendaHeaderFormat")};var td=da(da(da(da(da({},Jt.MONTH,Zu),Jt.WEEK,Hn),Jt.WORK_WEEK,Kl),Jt.DAY,em),Jt.AGENDA,rm),FU=["action","date","today"];function BU(e,t){var s=t.action,n=t.date,a=t.today,i=Ps(t,FU);switch(e=typeof e=="string"?td[e]:e,s){case gr.TODAY:n=a||new Date;break;case gr.DATE:break;default:ul(e&&typeof e.navigate=="function","Calendar View components must implement a static `.navigate(date, action)` method.s"),n=e.navigate(n,s,i)}return n}function zU(e,t){var s=null;return typeof t=="function"?s=t(e):typeof t=="string"&&cn(e)==="object"&&e!=null&&t in e&&(s=e[t]),s}var Ws=function(t){return function(s){return zU(s,t)}},UU=["view","date","getNow","onNavigate"],VU=["view","toolbar","events","backgroundEvents","resourceGroupingLayout","style","className","elementProps","date","getNow","length","showMultiDayTimes","onShowMore","doShowMoreDrillDown","components","formats","messages","culture"];function f1(e){if(Array.isArray(e))return e;for(var t=[],s=0,n=Object.entries(e);s<n.length;s++){var a=Br(n[s],2),i=a[0],o=a[1];o&&t.push(i)}return t}function HU(e,t){var s=t.views,n=f1(s);return n.indexOf(e)!==-1}var p1=function(e){function t(){var s;Et(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return s=qt(this,t,[].concat(a)),s.getViews=function(){var o=s.props.views;return Array.isArray(o)?bz(o,function(l,c){return l[c]=td[c]},{}):cn(o)==="object"?bF(o,function(l,c){return l===!0?td[c]:l}):td},s.getView=function(){var o=s.getViews();return o[s.props.view]},s.getDrilldownView=function(o){var l=s.props,c=l.view,d=l.drilldownView,u=l.getDrilldownView;return u?u(o,c,Object.keys(s.getViews())):d},s.handleRangeChange=function(o,l,c){var d=s.props,u=d.onRangeChange,m=d.localizer;u&&l.range&&u(l.range(o,{localizer:m}),c)},s.handleNavigate=function(o,l){var c=s.props,d=c.view,u=c.date,m=c.getNow,h=c.onNavigate,g=Ps(c,UU),j=s.getView(),y=m();u=BU(j,He(He({},g),{},{action:o,date:l||u||y,today:y})),h(u,d,o),s.handleRangeChange(u,j)},s.handleViewChange=function(o){o!==s.props.view&&HU(o,s.props)&&s.props.onView(o);var l=s.getViews();s.handleRangeChange(s.props.date||s.props.getNow(),l[o],o)},s.handleSelectEvent=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Je(s.props.onSelectEvent,l)},s.handleDoubleClickEvent=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Je(s.props.onDoubleClickEvent,l)},s.handleKeyPressEvent=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];Je(s.props.onKeyPressEvent,l)},s.handleSelectSlot=function(o){Je(s.props.onSelectSlot,o)},s.handleDrillDown=function(o,l){var c=s.props.onDrillDown;if(c){c(o,l,s.drilldownView);return}l&&s.handleViewChange(l),s.handleNavigate(gr.DATE,o)},s.state={context:t.getContext(s.props)},s}return Gt(t,e),kt(t,[{key:"render",value:function(){var n=this.props,a=n.view,i=n.toolbar,o=n.events,l=n.backgroundEvents,c=n.resourceGroupingLayout,d=n.style,u=n.className,m=n.elementProps,h=n.date,g=n.getNow,j=n.length,y=n.showMultiDayTimes,w=n.onShowMore,x=n.doShowMoreDrillDown;n.components,n.formats,n.messages,n.culture;var p=Ps(n,VU);h=h||g();var v=this.getView(),N=this.state.context,b=N.accessors,C=N.components,S=N.getters,k=N.localizer,D=N.viewNames,L=C.toolbar||qz,T=v.title(h,{localizer:k,length:j});return H.createElement("div",Object.assign({},m,{className:mt(u,"rbc-calendar",p.rtl&&"rbc-rtl"),style:d}),i&&H.createElement(L,{date:h,view:a,views:D,label:T,onView:this.handleViewChange,onNavigate:this.handleNavigate,localizer:k}),H.createElement(v,Object.assign({},p,{events:o,backgroundEvents:l,date:h,getNow:g,length:j,localizer:k,getters:S,components:C,accessors:b,showMultiDayTimes:y,getDrilldownView:this.getDrilldownView,onNavigate:this.handleNavigate,onDrillDown:this.handleDrillDown,onSelectEvent:this.handleSelectEvent,onDoubleClickEvent:this.handleDoubleClickEvent,onKeyPressEvent:this.handleKeyPressEvent,onSelectSlot:this.handleSelectSlot,onShowMore:w,doShowMoreDrillDown:x,resourceGroupingLayout:c})))}}],[{key:"getDerivedStateFromProps",value:function(n){return{context:t.getContext(n)}}},{key:"getContext",value:function(n){var a=n.startAccessor,i=n.endAccessor,o=n.allDayAccessor,l=n.tooltipAccessor,c=n.titleAccessor,d=n.resourceAccessor,u=n.resourceIdAccessor,m=n.resourceTitleAccessor,h=n.eventIdAccessor,g=n.eventPropGetter,j=n.backgroundEventPropGetter,y=n.slotPropGetter,w=n.slotGroupPropGetter,x=n.dayPropGetter,p=n.view,v=n.views,N=n.localizer,b=n.culture,C=n.messages,S=C===void 0?{}:C,k=n.components,D=k===void 0?{}:k,L=n.formats,T=L===void 0?{}:L,B=f1(v),V=Kz(S);return{viewNames:B,localizer:Yz(N,b,T,V),getters:{eventProp:function(){return g&&g.apply(void 0,arguments)||{}},backgroundEventProp:function(){return j&&j.apply(void 0,arguments)||{}},slotProp:function(){return y&&y.apply(void 0,arguments)||{}},slotGroupProp:function(){return w&&w.apply(void 0,arguments)||{}},dayProp:function(){return x&&x.apply(void 0,arguments)||{}}},components:hF(D[p]||{},oz(D,B),{eventWrapper:Ss,backgroundEventWrapper:Ss,eventContainerWrapper:Ss,dateCellWrapper:Ss,weekWrapper:Ss,timeSlotWrapper:Ss,timeGutterWrapper:Ss,timeIndicatorWrapper:Ss}),accessors:{start:Ws(a),end:Ws(i),allDay:Ws(o),tooltip:Ws(l),title:Ws(c),resource:Ws(d),resourceId:Ws(u),resourceTitle:Ws(m),eventId:Ws(h)}}}}])}(H.Component);p1.defaultProps={events:[],backgroundEvents:[],elementProps:{},popup:!1,toolbar:!0,view:Jt.MONTH,views:[Jt.MONTH,Jt.WEEK,Jt.DAY,Jt.AGENDA],step:30,length:30,allDayMaxRows:1/0,doShowMoreDrillDown:!0,drilldownView:Jt.DAY,titleAccessor:"title",tooltipAccessor:"title",allDayAccessor:"allDay",startAccessor:"start",endAccessor:"end",resourceAccessor:"resourceId",resourceIdAccessor:"id",resourceTitleAccessor:"title",eventIdAccessor:"id",longPressThreshold:250,getNow:function(){return new Date},dayLayoutAlgorithm:"overlap"};var WU=UN(p1,{view:"onView",date:"onNavigate",selected:"onSelectEvent"}),YU=function(t,s,n){var a=t.start,i=t.end;return n.format(a,"MMMM DD",s)+" – "+n.format(i,n.eq(a,i,"month")?"DD":"MMMM DD",s)},qU=function(t,s,n){var a=t.start,i=t.end;return n.format(a,"L",s)+" – "+n.format(i,"L",s)},bh=function(t,s,n){var a=t.start,i=t.end;return n.format(a,"LT",s)+" – "+n.format(i,"LT",s)},GU=function(t,s,n){var a=t.start;return n.format(a,"LT",s)+" – "},KU=function(t,s,n){var a=t.end;return" – "+n.format(a,"LT",s)},XU={dateFormat:"DD",dayFormat:"DD ddd",weekdayFormat:"ddd",selectRangeFormat:bh,eventTimeRangeFormat:bh,eventTimeRangeStartFormat:GU,eventTimeRangeEndFormat:KU,timeGutterFormat:"LT",monthHeaderFormat:"MMMM YYYY",dayHeaderFormat:"dddd MMM DD",dayRangeHeaderFormat:YU,agendaHeaderFormat:qU,agendaDateFormat:"ddd MMM DD",agendaTimeFormat:"LT",agendaTimeRangeFormat:bh};function vn(e){var t=e&&e.toLowerCase();return t==="FullYear"?t="year":t||(t=void 0),t}function QU(e){var t=function($,_){return _?$.locale(_):$};function s(R){return e(R).toDate().getTimezoneOffset()}function n(R,$){var _,O,P=e(R).local(),F=e($).local();if(!e.tz)return P.toDate().getTimezoneOffset()-F.toDate().getTimezoneOffset();var Q=(_=P==null||(O=P._z)===null||O===void 0?void 0:O.name)!==null&&_!==void 0?_:e.tz.guess(),X=e.tz.zone(Q).utcOffset(+P),re=e.tz.zone(Q).utcOffset(+F);return X-re}function a(R){var $=e(R).startOf("day");return n($,R)}function i(R,$,_){var O=vn(_),P=O?e(R).startOf(O):e(R),F=O?e($).startOf(O):e($);return[P,F,O]}function o(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,$=arguments.length>1?arguments[1]:void 0,_=vn($);return _?e(R).startOf(_).toDate():e(R).toDate()}function l(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,$=arguments.length>1?arguments[1]:void 0,_=vn($);return _?e(R).endOf(_).toDate():e(R).toDate()}function c(R,$,_){var O=i(R,$,_),P=Br(O,3),F=P[0],Q=P[1],X=P[2];return F.isSame(Q,X)}function d(R,$,_){return!c(R,$,_)}function u(R,$,_){var O=i(R,$,_),P=Br(O,3),F=P[0],Q=P[1],X=P[2];return F.isAfter(Q,X)}function m(R,$,_){var O=i(R,$,_),P=Br(O,3),F=P[0],Q=P[1],X=P[2];return F.isBefore(Q,X)}function h(R,$,_){var O=i(R,$,_),P=Br(O,3),F=P[0],Q=P[1],X=P[2];return F.isSameOrBefore(Q,X)}function g(R,$,_){var O=i(R,$,_),P=Br(O,3),F=P[0],Q=P[1],X=P[2];return F.isSameOrBefore(Q,X)}function j(R,$,_){var O=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"day",P=vn(O),F=e(R),Q=e($),X=e(_);return F.isBetween(Q,X,P,"[]")}function y(R,$){var _=e(R),O=e($),P=e.min(_,O);return P.toDate()}function w(R,$){var _=e(R),O=e($),P=e.max(_,O);return P.toDate()}function x(R,$){if(!R&&!$)return null;var _=e($).format("HH:mm:ss"),O=e(R).startOf("day").format("MM/DD/YYYY");return e("".concat(O," ").concat(_),"MM/DD/YYYY HH:mm:ss").toDate()}function p(R,$,_){var O=vn(_);return e(R).add($,O).toDate()}function v(R,$){for(var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"day",O=vn(_),P=e(R).toDate(),F=[];g(P,$);)F.push(P),P=p(P,1,O);return F}function N(R,$){var _=vn($),O=o(R,_);return c(O,R)?O:p(O,1,_)}function b(R,$){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"day",O=vn(_),P=e(R),F=e($);return F.diff(P,O)}function C(R){var $=e(R);return $.minutes()}function S(R){var $=R?e.localeData(R):e.localeData();return $?$.firstDayOfWeek():0}function k(R){return e(R).startOf("month").startOf("week").toDate()}function D(R){return e(R).endOf("month").endOf("week").toDate()}function L(R){for(var $=k(R),_=D(R),O=[];g($,_);)O.push($),$=p($,1,"d");return O}function T(R,$,_){return e(R).startOf("day").minute($+_).toDate()}function B(R,$){return b(R,$,"minutes")}function V(R){var $=e(R).startOf("day"),_=e(R);return _.diff($,"minutes")+a(R)}function A(R,$){var _=e(R),O=e($);return _.isBefore(O,"day")}function I(R,$,_){var O=e($),P=e(_);return O.isSameOrAfter(P,"minutes")}function q(R,$){var _=e(R),O=e($),P=e.duration(O.diff(_));return P.days()}function Y(R){var $=R.evtA,_=$.start,O=$.end,P=$.allDay,F=R.evtB,Q=F.start,X=F.end,re=F.allDay,G=+o(_,"day")-+o(Q,"day"),le=q(_,O),ie=q(Q,X);return G||ie-le||!!re-!!P||+_-+Q||+O-+X}function M(R){var $=R.event,_=$.start,O=$.end,P=R.range,F=P.start,Q=P.end,X=e(_).startOf("day"),re=e(O),G=e(F),le=e(Q),ie=X.isSameOrBefore(le,"day"),xe=!X.isSame(re,"minutes"),je=xe?re.isAfter(G,"minutes"):re.isSameOrAfter(G,"minutes");return ie&&je}function W(R,$){var _=e(R),O=e($);return _.isSame(O,"day")}function E(){var R=new Date,$=/-/.test(R.toString())?"-":"",_=R.getTimezoneOffset(),O=Number("".concat($).concat(Math.abs(_))),P=e().utcOffset();return P>O?1:0}return new Wz({formats:XU,firstOfWeek:S,firstVisibleDay:k,lastVisibleDay:D,visibleDays:L,format:function($,_,O){return t(e($),O).format(_)},lt:m,lte:g,gt:u,gte:h,eq:c,neq:d,merge:x,inRange:j,startOf:o,endOf:l,range:v,add:p,diff:b,ceil:N,min:y,max:w,minutes:C,getSlotDate:T,getTimezoneOffset:s,getDstOffset:n,getTotalMin:B,getMinutesFromMidnight:V,continuesPrior:A,continuesAfter:I,sortEvents:Y,inEventRange:M,isSameDate:W,daySpan:q,browserTZOffset:E})}//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var x1;function ae(){return x1.apply(null,arguments)}function JU(e){x1=e}function us(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function wa(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function Le(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ag(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var t;for(t in e)if(Le(e,t))return!1;return!0}function ir(e){return e===void 0}function un(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function Xl(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function g1(e,t){var s=[],n,a=e.length;for(n=0;n<a;++n)s.push(t(e[n],n));return s}function Dn(e,t){for(var s in t)Le(t,s)&&(e[s]=t[s]);return Le(t,"toString")&&(e.toString=t.toString),Le(t,"valueOf")&&(e.valueOf=t.valueOf),e}function zs(e,t,s,n){return B1(e,t,s,n,!0).utc()}function ZU(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function Ee(e){return e._pf==null&&(e._pf=ZU()),e._pf}var Jf;Array.prototype.some?Jf=Array.prototype.some:Jf=function(e){var t=Object(this),s=t.length>>>0,n;for(n=0;n<s;n++)if(n in t&&e.call(this,t[n],n,t))return!0;return!1};function ig(e){var t=null,s=!1,n=e._d&&!isNaN(e._d.getTime());if(n&&(t=Ee(e),s=Jf.call(t.parsedDateParts,function(a){return a!=null}),n=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&s),e._strict&&(n=n&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=n;else return n;return e._isValid}function sm(e){var t=zs(NaN);return e!=null?Dn(Ee(t),e):Ee(t).userInvalidated=!0,t}var Jy=ae.momentProperties=[],jh=!1;function og(e,t){var s,n,a,i=Jy.length;if(ir(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),ir(t._i)||(e._i=t._i),ir(t._f)||(e._f=t._f),ir(t._l)||(e._l=t._l),ir(t._strict)||(e._strict=t._strict),ir(t._tzm)||(e._tzm=t._tzm),ir(t._isUTC)||(e._isUTC=t._isUTC),ir(t._offset)||(e._offset=t._offset),ir(t._pf)||(e._pf=Ee(t)),ir(t._locale)||(e._locale=t._locale),i>0)for(s=0;s<i;s++)n=Jy[s],a=t[n],ir(a)||(e[n]=a);return e}function Ql(e){og(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),jh===!1&&(jh=!0,ae.updateOffset(this),jh=!1)}function ms(e){return e instanceof Ql||e!=null&&e._isAMomentObject!=null}function v1(e){ae.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function Kr(e,t){var s=!0;return Dn(function(){if(ae.deprecationHandler!=null&&ae.deprecationHandler(null,e),s){var n=[],a,i,o,l=arguments.length;for(i=0;i<l;i++){if(a="",typeof arguments[i]=="object"){a+=`
[`+i+"] ";for(o in arguments[0])Le(arguments[0],o)&&(a+=o+": "+arguments[0][o]+", ");a=a.slice(0,-2)}else a=arguments[i];n.push(a)}v1(e+`
Arguments: `+Array.prototype.slice.call(n).join("")+`
`+new Error().stack),s=!1}return t.apply(this,arguments)},t)}var Zy={};function y1(e,t){ae.deprecationHandler!=null&&ae.deprecationHandler(e,t),Zy[e]||(v1(t),Zy[e]=!0)}ae.suppressDeprecationWarnings=!1;ae.deprecationHandler=null;function Us(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function eV(e){var t,s;for(s in e)Le(e,s)&&(t=e[s],Us(t)?this[s]=t:this["_"+s]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function Zf(e,t){var s=Dn({},e),n;for(n in t)Le(t,n)&&(wa(e[n])&&wa(t[n])?(s[n]={},Dn(s[n],e[n]),Dn(s[n],t[n])):t[n]!=null?s[n]=t[n]:delete s[n]);for(n in e)Le(e,n)&&!Le(t,n)&&wa(e[n])&&(s[n]=Dn({},s[n]));return s}function lg(e){e!=null&&this.set(e)}var ep;Object.keys?ep=Object.keys:ep=function(e){var t,s=[];for(t in e)Le(e,t)&&s.push(t);return s};var tV={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function rV(e,t,s){var n=this._calendar[e]||this._calendar.sameElse;return Us(n)?n.call(t,s):n}function Ls(e,t,s){var n=""+Math.abs(e),a=t-n.length,i=e>=0;return(i?s?"+":"":"-")+Math.pow(10,Math.max(0,a)).toString().substr(1)+n}var cg=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Dc=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,wh={},ui={};function ve(e,t,s,n){var a=n;typeof n=="string"&&(a=function(){return this[n]()}),e&&(ui[e]=a),t&&(ui[t[0]]=function(){return Ls(a.apply(this,arguments),t[1],t[2])}),s&&(ui[s]=function(){return this.localeData().ordinal(a.apply(this,arguments),e)})}function sV(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function nV(e){var t=e.match(cg),s,n;for(s=0,n=t.length;s<n;s++)ui[t[s]]?t[s]=ui[t[s]]:t[s]=sV(t[s]);return function(a){var i="",o;for(o=0;o<n;o++)i+=Us(t[o])?t[o].call(a,e):t[o];return i}}function rd(e,t){return e.isValid()?(t=b1(t,e.localeData()),wh[t]=wh[t]||nV(t),wh[t](e)):e.localeData().invalidDate()}function b1(e,t){var s=5;function n(a){return t.longDateFormat(a)||a}for(Dc.lastIndex=0;s>=0&&Dc.test(e);)e=e.replace(Dc,n),Dc.lastIndex=0,s-=1;return e}var aV={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function iV(e){var t=this._longDateFormat[e],s=this._longDateFormat[e.toUpperCase()];return t||!s?t:(this._longDateFormat[e]=s.match(cg).map(function(n){return n==="MMMM"||n==="MM"||n==="DD"||n==="dddd"?n.slice(1):n}).join(""),this._longDateFormat[e])}var oV="Invalid date";function lV(){return this._invalidDate}var cV="%d",dV=/\d{1,2}/;function uV(e){return this._ordinal.replace("%d",e)}var mV={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function hV(e,t,s,n){var a=this._relativeTime[s];return Us(a)?a(e,t,s,n):a.replace(/%d/i,e)}function fV(e,t){var s=this._relativeTime[e>0?"future":"past"];return Us(s)?s(t):s.replace(/%s/i,t)}var eb={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function Xr(e){return typeof e=="string"?eb[e]||eb[e.toLowerCase()]:void 0}function dg(e){var t={},s,n;for(n in e)Le(e,n)&&(s=Xr(n),s&&(t[s]=e[n]));return t}var pV={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function xV(e){var t=[],s;for(s in e)Le(e,s)&&t.push({unit:s,priority:pV[s]});return t.sort(function(n,a){return n.priority-a.priority}),t}var j1=/\d/,kr=/\d\d/,w1=/\d{3}/,ug=/\d{4}/,nm=/[+-]?\d{6}/,tt=/\d\d?/,N1=/\d\d\d\d?/,C1=/\d\d\d\d\d\d?/,am=/\d{1,3}/,mg=/\d{1,4}/,im=/[+-]?\d{1,6}/,Gi=/\d+/,om=/[+-]?\d+/,gV=/Z|[+-]\d\d:?\d\d/gi,lm=/Z|[+-]\d\d(?::?\d\d)?/gi,vV=/[+-]?\d+(\.\d{1,3})?/,Jl=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Ki=/^[1-9]\d?/,hg=/^([1-9]\d|\d)/,Jd;Jd={};function me(e,t,s){Jd[e]=Us(t)?t:function(n,a){return n&&s?s:t}}function yV(e,t){return Le(Jd,e)?Jd[e](t._strict,t._locale):new RegExp(bV(e))}function bV(e){return rn(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,s,n,a,i){return s||n||a||i}))}function rn(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function $r(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function _e(e){var t=+e,s=0;return t!==0&&isFinite(t)&&(s=$r(t)),s}var tp={};function ze(e,t){var s,n=t,a;for(typeof e=="string"&&(e=[e]),un(t)&&(n=function(i,o){o[t]=_e(i)}),a=e.length,s=0;s<a;s++)tp[e[s]]=n}function Zl(e,t){ze(e,function(s,n,a,i){a._w=a._w||{},t(s,a._w,a,i)})}function jV(e,t,s){t!=null&&Le(tp,e)&&tp[e](t,s._a,s,e)}function cm(e){return e%4===0&&e%100!==0||e%400===0}var Ht=0,Zs=1,ks=2,St=3,is=4,en=5,xa=6,wV=7,NV=8;ve("Y",0,0,function(){var e=this.year();return e<=9999?Ls(e,4):"+"+e});ve(0,["YY",2],0,function(){return this.year()%100});ve(0,["YYYY",4],0,"year");ve(0,["YYYYY",5],0,"year");ve(0,["YYYYYY",6,!0],0,"year");me("Y",om);me("YY",tt,kr);me("YYYY",mg,ug);me("YYYYY",im,nm);me("YYYYYY",im,nm);ze(["YYYYY","YYYYYY"],Ht);ze("YYYY",function(e,t){t[Ht]=e.length===2?ae.parseTwoDigitYear(e):_e(e)});ze("YY",function(e,t){t[Ht]=ae.parseTwoDigitYear(e)});ze("Y",function(e,t){t[Ht]=parseInt(e,10)});function Bo(e){return cm(e)?366:365}ae.parseTwoDigitYear=function(e){return _e(e)+(_e(e)>68?1900:2e3)};var S1=Xi("FullYear",!0);function CV(){return cm(this.year())}function Xi(e,t){return function(s){return s!=null?(E1(this,e,s),ae.updateOffset(this,t),this):Sl(this,e)}}function Sl(e,t){if(!e.isValid())return NaN;var s=e._d,n=e._isUTC;switch(t){case"Milliseconds":return n?s.getUTCMilliseconds():s.getMilliseconds();case"Seconds":return n?s.getUTCSeconds():s.getSeconds();case"Minutes":return n?s.getUTCMinutes():s.getMinutes();case"Hours":return n?s.getUTCHours():s.getHours();case"Date":return n?s.getUTCDate():s.getDate();case"Day":return n?s.getUTCDay():s.getDay();case"Month":return n?s.getUTCMonth():s.getMonth();case"FullYear":return n?s.getUTCFullYear():s.getFullYear();default:return NaN}}function E1(e,t,s){var n,a,i,o,l;if(!(!e.isValid()||isNaN(s))){switch(n=e._d,a=e._isUTC,t){case"Milliseconds":return void(a?n.setUTCMilliseconds(s):n.setMilliseconds(s));case"Seconds":return void(a?n.setUTCSeconds(s):n.setSeconds(s));case"Minutes":return void(a?n.setUTCMinutes(s):n.setMinutes(s));case"Hours":return void(a?n.setUTCHours(s):n.setHours(s));case"Date":return void(a?n.setUTCDate(s):n.setDate(s));case"FullYear":break;default:return}i=s,o=e.month(),l=e.date(),l=l===29&&o===1&&!cm(i)?28:l,a?n.setUTCFullYear(i,o,l):n.setFullYear(i,o,l)}}function SV(e){return e=Xr(e),Us(this[e])?this[e]():this}function EV(e,t){if(typeof e=="object"){e=dg(e);var s=xV(e),n,a=s.length;for(n=0;n<a;n++)this[s[n].unit](e[s[n].unit])}else if(e=Xr(e),Us(this[e]))return this[e](t);return this}function kV(e,t){return(e%t+t)%t}var ft;Array.prototype.indexOf?ft=Array.prototype.indexOf:ft=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function fg(e,t){if(isNaN(e)||isNaN(t))return NaN;var s=kV(t,12);return e+=(t-s)/12,s===1?cm(e)?29:28:31-s%7%2}ve("M",["MM",2],"Mo",function(){return this.month()+1});ve("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});ve("MMMM",0,0,function(e){return this.localeData().months(this,e)});me("M",tt,Ki);me("MM",tt,kr);me("MMM",function(e,t){return t.monthsShortRegex(e)});me("MMMM",function(e,t){return t.monthsRegex(e)});ze(["M","MM"],function(e,t){t[Zs]=_e(e)-1});ze(["MMM","MMMM"],function(e,t,s,n){var a=s._locale.monthsParse(e,n,s._strict);a!=null?t[Zs]=a:Ee(s).invalidMonth=e});var DV="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),k1="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),D1=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,AV=Jl,TV=Jl;function _V(e,t){return e?us(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||D1).test(t)?"format":"standalone"][e.month()]:us(this._months)?this._months:this._months.standalone}function OV(e,t){return e?us(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[D1.test(t)?"format":"standalone"][e.month()]:us(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function MV(e,t,s){var n,a,i,o=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)i=zs([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(i,"").toLocaleLowerCase();return s?t==="MMM"?(a=ft.call(this._shortMonthsParse,o),a!==-1?a:null):(a=ft.call(this._longMonthsParse,o),a!==-1?a:null):t==="MMM"?(a=ft.call(this._shortMonthsParse,o),a!==-1?a:(a=ft.call(this._longMonthsParse,o),a!==-1?a:null)):(a=ft.call(this._longMonthsParse,o),a!==-1?a:(a=ft.call(this._shortMonthsParse,o),a!==-1?a:null))}function RV(e,t,s){var n,a,i;if(this._monthsParseExact)return MV.call(this,e,t,s);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(a=zs([2e3,n]),s&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(a,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(a,"").replace(".","")+"$","i")),!s&&!this._monthsParse[n]&&(i="^"+this.months(a,"")+"|^"+this.monthsShort(a,""),this._monthsParse[n]=new RegExp(i.replace(".",""),"i")),s&&t==="MMMM"&&this._longMonthsParse[n].test(e))return n;if(s&&t==="MMM"&&this._shortMonthsParse[n].test(e))return n;if(!s&&this._monthsParse[n].test(e))return n}}function A1(e,t){if(!e.isValid())return e;if(typeof t=="string"){if(/^\d+$/.test(t))t=_e(t);else if(t=e.localeData().monthsParse(t),!un(t))return e}var s=t,n=e.date();return n=n<29?n:Math.min(n,fg(e.year(),s)),e._isUTC?e._d.setUTCMonth(s,n):e._d.setMonth(s,n),e}function T1(e){return e!=null?(A1(this,e),ae.updateOffset(this,!0),this):Sl(this,"Month")}function PV(){return fg(this.year(),this.month())}function LV(e){return this._monthsParseExact?(Le(this,"_monthsRegex")||_1.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(Le(this,"_monthsShortRegex")||(this._monthsShortRegex=AV),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function IV(e){return this._monthsParseExact?(Le(this,"_monthsRegex")||_1.call(this),e?this._monthsStrictRegex:this._monthsRegex):(Le(this,"_monthsRegex")||(this._monthsRegex=TV),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function _1(){function e(c,d){return d.length-c.length}var t=[],s=[],n=[],a,i,o,l;for(a=0;a<12;a++)i=zs([2e3,a]),o=rn(this.monthsShort(i,"")),l=rn(this.months(i,"")),t.push(o),s.push(l),n.push(l),n.push(o);t.sort(e),s.sort(e),n.sort(e),this._monthsRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}function $V(e,t,s,n,a,i,o){var l;return e<100&&e>=0?(l=new Date(e+400,t,s,n,a,i,o),isFinite(l.getFullYear())&&l.setFullYear(e)):l=new Date(e,t,s,n,a,i,o),l}function El(e){var t,s;return e<100&&e>=0?(s=Array.prototype.slice.call(arguments),s[0]=e+400,t=new Date(Date.UTC.apply(null,s)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function Zd(e,t,s){var n=7+t-s,a=(7+El(e,0,n).getUTCDay()-t)%7;return-a+n-1}function O1(e,t,s,n,a){var i=(7+s-n)%7,o=Zd(e,n,a),l=1+7*(t-1)+i+o,c,d;return l<=0?(c=e-1,d=Bo(c)+l):l>Bo(e)?(c=e+1,d=l-Bo(e)):(c=e,d=l),{year:c,dayOfYear:d}}function kl(e,t,s){var n=Zd(e.year(),t,s),a=Math.floor((e.dayOfYear()-n-1)/7)+1,i,o;return a<1?(o=e.year()-1,i=a+sn(o,t,s)):a>sn(e.year(),t,s)?(i=a-sn(e.year(),t,s),o=e.year()+1):(o=e.year(),i=a),{week:i,year:o}}function sn(e,t,s){var n=Zd(e,t,s),a=Zd(e+1,t,s);return(Bo(e)-n+a)/7}ve("w",["ww",2],"wo","week");ve("W",["WW",2],"Wo","isoWeek");me("w",tt,Ki);me("ww",tt,kr);me("W",tt,Ki);me("WW",tt,kr);Zl(["w","ww","W","WW"],function(e,t,s,n){t[n.substr(0,1)]=_e(e)});function FV(e){return kl(e,this._week.dow,this._week.doy).week}var BV={dow:0,doy:6};function zV(){return this._week.dow}function UV(){return this._week.doy}function VV(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function HV(e){var t=kl(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}ve("d",0,"do","day");ve("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});ve("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});ve("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});ve("e",0,0,"weekday");ve("E",0,0,"isoWeekday");me("d",tt);me("e",tt);me("E",tt);me("dd",function(e,t){return t.weekdaysMinRegex(e)});me("ddd",function(e,t){return t.weekdaysShortRegex(e)});me("dddd",function(e,t){return t.weekdaysRegex(e)});Zl(["dd","ddd","dddd"],function(e,t,s,n){var a=s._locale.weekdaysParse(e,n,s._strict);a!=null?t.d=a:Ee(s).invalidWeekday=e});Zl(["d","e","E"],function(e,t,s,n){t[n]=_e(e)});function WV(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function YV(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function pg(e,t){return e.slice(t,7).concat(e.slice(0,t))}var qV="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),M1="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),GV="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),KV=Jl,XV=Jl,QV=Jl;function JV(e,t){var s=us(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===!0?pg(s,this._week.dow):e?s[e.day()]:s}function ZV(e){return e===!0?pg(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function eH(e){return e===!0?pg(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function tH(e,t,s){var n,a,i,o=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)i=zs([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(i,"").toLocaleLowerCase();return s?t==="dddd"?(a=ft.call(this._weekdaysParse,o),a!==-1?a:null):t==="ddd"?(a=ft.call(this._shortWeekdaysParse,o),a!==-1?a:null):(a=ft.call(this._minWeekdaysParse,o),a!==-1?a:null):t==="dddd"?(a=ft.call(this._weekdaysParse,o),a!==-1||(a=ft.call(this._shortWeekdaysParse,o),a!==-1)?a:(a=ft.call(this._minWeekdaysParse,o),a!==-1?a:null)):t==="ddd"?(a=ft.call(this._shortWeekdaysParse,o),a!==-1||(a=ft.call(this._weekdaysParse,o),a!==-1)?a:(a=ft.call(this._minWeekdaysParse,o),a!==-1?a:null)):(a=ft.call(this._minWeekdaysParse,o),a!==-1||(a=ft.call(this._weekdaysParse,o),a!==-1)?a:(a=ft.call(this._shortWeekdaysParse,o),a!==-1?a:null))}function rH(e,t,s){var n,a,i;if(this._weekdaysParseExact)return tH.call(this,e,t,s);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(a=zs([2e3,1]).day(n),s&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(a,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(a,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(a,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[n]||(i="^"+this.weekdays(a,"")+"|^"+this.weekdaysShort(a,"")+"|^"+this.weekdaysMin(a,""),this._weekdaysParse[n]=new RegExp(i.replace(".",""),"i")),s&&t==="dddd"&&this._fullWeekdaysParse[n].test(e))return n;if(s&&t==="ddd"&&this._shortWeekdaysParse[n].test(e))return n;if(s&&t==="dd"&&this._minWeekdaysParse[n].test(e))return n;if(!s&&this._weekdaysParse[n].test(e))return n}}function sH(e){if(!this.isValid())return e!=null?this:NaN;var t=Sl(this,"Day");return e!=null?(e=WV(e,this.localeData()),this.add(e-t,"d")):t}function nH(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function aH(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=YV(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function iH(e){return this._weekdaysParseExact?(Le(this,"_weekdaysRegex")||xg.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(Le(this,"_weekdaysRegex")||(this._weekdaysRegex=KV),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function oH(e){return this._weekdaysParseExact?(Le(this,"_weekdaysRegex")||xg.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(Le(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=XV),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function lH(e){return this._weekdaysParseExact?(Le(this,"_weekdaysRegex")||xg.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(Le(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=QV),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function xg(){function e(u,m){return m.length-u.length}var t=[],s=[],n=[],a=[],i,o,l,c,d;for(i=0;i<7;i++)o=zs([2e3,1]).day(i),l=rn(this.weekdaysMin(o,"")),c=rn(this.weekdaysShort(o,"")),d=rn(this.weekdays(o,"")),t.push(l),s.push(c),n.push(d),a.push(l),a.push(c),a.push(d);t.sort(e),s.sort(e),n.sort(e),a.sort(e),this._weekdaysRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function gg(){return this.hours()%12||12}function cH(){return this.hours()||24}ve("H",["HH",2],0,"hour");ve("h",["hh",2],0,gg);ve("k",["kk",2],0,cH);ve("hmm",0,0,function(){return""+gg.apply(this)+Ls(this.minutes(),2)});ve("hmmss",0,0,function(){return""+gg.apply(this)+Ls(this.minutes(),2)+Ls(this.seconds(),2)});ve("Hmm",0,0,function(){return""+this.hours()+Ls(this.minutes(),2)});ve("Hmmss",0,0,function(){return""+this.hours()+Ls(this.minutes(),2)+Ls(this.seconds(),2)});function R1(e,t){ve(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}R1("a",!0);R1("A",!1);function P1(e,t){return t._meridiemParse}me("a",P1);me("A",P1);me("H",tt,hg);me("h",tt,Ki);me("k",tt,Ki);me("HH",tt,kr);me("hh",tt,kr);me("kk",tt,kr);me("hmm",N1);me("hmmss",C1);me("Hmm",N1);me("Hmmss",C1);ze(["H","HH"],St);ze(["k","kk"],function(e,t,s){var n=_e(e);t[St]=n===24?0:n});ze(["a","A"],function(e,t,s){s._isPm=s._locale.isPM(e),s._meridiem=e});ze(["h","hh"],function(e,t,s){t[St]=_e(e),Ee(s).bigHour=!0});ze("hmm",function(e,t,s){var n=e.length-2;t[St]=_e(e.substr(0,n)),t[is]=_e(e.substr(n)),Ee(s).bigHour=!0});ze("hmmss",function(e,t,s){var n=e.length-4,a=e.length-2;t[St]=_e(e.substr(0,n)),t[is]=_e(e.substr(n,2)),t[en]=_e(e.substr(a)),Ee(s).bigHour=!0});ze("Hmm",function(e,t,s){var n=e.length-2;t[St]=_e(e.substr(0,n)),t[is]=_e(e.substr(n))});ze("Hmmss",function(e,t,s){var n=e.length-4,a=e.length-2;t[St]=_e(e.substr(0,n)),t[is]=_e(e.substr(n,2)),t[en]=_e(e.substr(a))});function dH(e){return(e+"").toLowerCase().charAt(0)==="p"}var uH=/[ap]\.?m?\.?/i,mH=Xi("Hours",!0);function hH(e,t,s){return e>11?s?"pm":"PM":s?"am":"AM"}var L1={calendar:tV,longDateFormat:aV,invalidDate:oV,ordinal:cV,dayOfMonthOrdinalParse:dV,relativeTime:mV,months:DV,monthsShort:k1,week:BV,weekdays:qV,weekdaysMin:GV,weekdaysShort:M1,meridiemParse:uH},rt={},xo={},Dl;function fH(e,t){var s,n=Math.min(e.length,t.length);for(s=0;s<n;s+=1)if(e[s]!==t[s])return s;return n}function tb(e){return e&&e.toLowerCase().replace("_","-")}function pH(e){for(var t=0,s,n,a,i;t<e.length;){for(i=tb(e[t]).split("-"),s=i.length,n=tb(e[t+1]),n=n?n.split("-"):null;s>0;){if(a=dm(i.slice(0,s).join("-")),a)return a;if(n&&n.length>=s&&fH(i,n)>=s-1)break;s--}t++}return Dl}function xH(e){return!!(e&&e.match("^[^/\\\\]*$"))}function dm(e){var t=null,s;if(rt[e]===void 0&&typeof md<"u"&&md&&md.exports&&xH(e))try{t=Dl._abbr,s=require,s("./locale/"+e),Fn(t)}catch{rt[e]=null}return rt[e]}function Fn(e,t){var s;return e&&(ir(t)?s=fn(e):s=vg(e,t),s?Dl=s:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),Dl._abbr}function vg(e,t){if(t!==null){var s,n=L1;if(t.abbr=e,rt[e]!=null)y1("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=rt[e]._config;else if(t.parentLocale!=null)if(rt[t.parentLocale]!=null)n=rt[t.parentLocale]._config;else if(s=dm(t.parentLocale),s!=null)n=s._config;else return xo[t.parentLocale]||(xo[t.parentLocale]=[]),xo[t.parentLocale].push({name:e,config:t}),null;return rt[e]=new lg(Zf(n,t)),xo[e]&&xo[e].forEach(function(a){vg(a.name,a.config)}),Fn(e),rt[e]}else return delete rt[e],null}function gH(e,t){if(t!=null){var s,n,a=L1;rt[e]!=null&&rt[e].parentLocale!=null?rt[e].set(Zf(rt[e]._config,t)):(n=dm(e),n!=null&&(a=n._config),t=Zf(a,t),n==null&&(t.abbr=e),s=new lg(t),s.parentLocale=rt[e],rt[e]=s),Fn(e)}else rt[e]!=null&&(rt[e].parentLocale!=null?(rt[e]=rt[e].parentLocale,e===Fn()&&Fn(e)):rt[e]!=null&&delete rt[e]);return rt[e]}function fn(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Dl;if(!us(e)){if(t=dm(e),t)return t;e=[e]}return pH(e)}function vH(){return ep(rt)}function yg(e){var t,s=e._a;return s&&Ee(e).overflow===-2&&(t=s[Zs]<0||s[Zs]>11?Zs:s[ks]<1||s[ks]>fg(s[Ht],s[Zs])?ks:s[St]<0||s[St]>24||s[St]===24&&(s[is]!==0||s[en]!==0||s[xa]!==0)?St:s[is]<0||s[is]>59?is:s[en]<0||s[en]>59?en:s[xa]<0||s[xa]>999?xa:-1,Ee(e)._overflowDayOfYear&&(t<Ht||t>ks)&&(t=ks),Ee(e)._overflowWeeks&&t===-1&&(t=wV),Ee(e)._overflowWeekday&&t===-1&&(t=NV),Ee(e).overflow=t),e}var yH=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,bH=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,jH=/Z|[+-]\d\d(?::?\d\d)?/,Ac=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Nh=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],wH=/^\/?Date\((-?\d+)/i,NH=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,CH={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function I1(e){var t,s,n=e._i,a=yH.exec(n)||bH.exec(n),i,o,l,c,d=Ac.length,u=Nh.length;if(a){for(Ee(e).iso=!0,t=0,s=d;t<s;t++)if(Ac[t][1].exec(a[1])){o=Ac[t][0],i=Ac[t][2]!==!1;break}if(o==null){e._isValid=!1;return}if(a[3]){for(t=0,s=u;t<s;t++)if(Nh[t][1].exec(a[3])){l=(a[2]||" ")+Nh[t][0];break}if(l==null){e._isValid=!1;return}}if(!i&&l!=null){e._isValid=!1;return}if(a[4])if(jH.exec(a[4]))c="Z";else{e._isValid=!1;return}e._f=o+(l||"")+(c||""),jg(e)}else e._isValid=!1}function SH(e,t,s,n,a,i){var o=[EH(e),k1.indexOf(t),parseInt(s,10),parseInt(n,10),parseInt(a,10)];return i&&o.push(parseInt(i,10)),o}function EH(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function kH(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function DH(e,t,s){if(e){var n=M1.indexOf(e),a=new Date(t[0],t[1],t[2]).getDay();if(n!==a)return Ee(s).weekdayMismatch=!0,s._isValid=!1,!1}return!0}function AH(e,t,s){if(e)return CH[e];if(t)return 0;var n=parseInt(s,10),a=n%100,i=(n-a)/100;return i*60+a}function $1(e){var t=NH.exec(kH(e._i)),s;if(t){if(s=SH(t[4],t[3],t[2],t[5],t[6],t[7]),!DH(t[1],s,e))return;e._a=s,e._tzm=AH(t[8],t[9],t[10]),e._d=El.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),Ee(e).rfc2822=!0}else e._isValid=!1}function TH(e){var t=wH.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}if(I1(e),e._isValid===!1)delete e._isValid;else return;if($1(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:ae.createFromInputFallback(e)}ae.createFromInputFallback=Kr("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function Wa(e,t,s){return e??t??s}function _H(e){var t=new Date(ae.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function bg(e){var t,s,n=[],a,i,o;if(!e._d){for(a=_H(e),e._w&&e._a[ks]==null&&e._a[Zs]==null&&OH(e),e._dayOfYear!=null&&(o=Wa(e._a[Ht],a[Ht]),(e._dayOfYear>Bo(o)||e._dayOfYear===0)&&(Ee(e)._overflowDayOfYear=!0),s=El(o,0,e._dayOfYear),e._a[Zs]=s.getUTCMonth(),e._a[ks]=s.getUTCDate()),t=0;t<3&&e._a[t]==null;++t)e._a[t]=n[t]=a[t];for(;t<7;t++)e._a[t]=n[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[St]===24&&e._a[is]===0&&e._a[en]===0&&e._a[xa]===0&&(e._nextDay=!0,e._a[St]=0),e._d=(e._useUTC?El:$V).apply(null,n),i=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[St]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==i&&(Ee(e).weekdayMismatch=!0)}}function OH(e){var t,s,n,a,i,o,l,c,d;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(i=1,o=4,s=Wa(t.GG,e._a[Ht],kl(et(),1,4).year),n=Wa(t.W,1),a=Wa(t.E,1),(a<1||a>7)&&(c=!0)):(i=e._locale._week.dow,o=e._locale._week.doy,d=kl(et(),i,o),s=Wa(t.gg,e._a[Ht],d.year),n=Wa(t.w,d.week),t.d!=null?(a=t.d,(a<0||a>6)&&(c=!0)):t.e!=null?(a=t.e+i,(t.e<0||t.e>6)&&(c=!0)):a=i),n<1||n>sn(s,i,o)?Ee(e)._overflowWeeks=!0:c!=null?Ee(e)._overflowWeekday=!0:(l=O1(s,n,a,i,o),e._a[Ht]=l.year,e._dayOfYear=l.dayOfYear)}ae.ISO_8601=function(){};ae.RFC_2822=function(){};function jg(e){if(e._f===ae.ISO_8601){I1(e);return}if(e._f===ae.RFC_2822){$1(e);return}e._a=[],Ee(e).empty=!0;var t=""+e._i,s,n,a,i,o,l=t.length,c=0,d,u;for(a=b1(e._f,e._locale).match(cg)||[],u=a.length,s=0;s<u;s++)i=a[s],n=(t.match(yV(i,e))||[])[0],n&&(o=t.substr(0,t.indexOf(n)),o.length>0&&Ee(e).unusedInput.push(o),t=t.slice(t.indexOf(n)+n.length),c+=n.length),ui[i]?(n?Ee(e).empty=!1:Ee(e).unusedTokens.push(i),jV(i,n,e)):e._strict&&!n&&Ee(e).unusedTokens.push(i);Ee(e).charsLeftOver=l-c,t.length>0&&Ee(e).unusedInput.push(t),e._a[St]<=12&&Ee(e).bigHour===!0&&e._a[St]>0&&(Ee(e).bigHour=void 0),Ee(e).parsedDateParts=e._a.slice(0),Ee(e).meridiem=e._meridiem,e._a[St]=MH(e._locale,e._a[St],e._meridiem),d=Ee(e).era,d!==null&&(e._a[Ht]=e._locale.erasConvertYear(d,e._a[Ht])),bg(e),yg(e)}function MH(e,t,s){var n;return s==null?t:e.meridiemHour!=null?e.meridiemHour(t,s):(e.isPM!=null&&(n=e.isPM(s),n&&t<12&&(t+=12),!n&&t===12&&(t=0)),t)}function RH(e){var t,s,n,a,i,o,l=!1,c=e._f.length;if(c===0){Ee(e).invalidFormat=!0,e._d=new Date(NaN);return}for(a=0;a<c;a++)i=0,o=!1,t=og({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[a],jg(t),ig(t)&&(o=!0),i+=Ee(t).charsLeftOver,i+=Ee(t).unusedTokens.length*10,Ee(t).score=i,l?i<n&&(n=i,s=t):(n==null||i<n||o)&&(n=i,s=t,o&&(l=!0));Dn(e,s||t)}function PH(e){if(!e._d){var t=dg(e._i),s=t.day===void 0?t.date:t.day;e._a=g1([t.year,t.month,s,t.hour,t.minute,t.second,t.millisecond],function(n){return n&&parseInt(n,10)}),bg(e)}}function LH(e){var t=new Ql(yg(F1(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function F1(e){var t=e._i,s=e._f;return e._locale=e._locale||fn(e._l),t===null||s===void 0&&t===""?sm({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),ms(t)?new Ql(yg(t)):(Xl(t)?e._d=t:us(s)?RH(e):s?jg(e):IH(e),ig(e)||(e._d=null),e))}function IH(e){var t=e._i;ir(t)?e._d=new Date(ae.now()):Xl(t)?e._d=new Date(t.valueOf()):typeof t=="string"?TH(e):us(t)?(e._a=g1(t.slice(0),function(s){return parseInt(s,10)}),bg(e)):wa(t)?PH(e):un(t)?e._d=new Date(t):ae.createFromInputFallback(e)}function B1(e,t,s,n,a){var i={};return(t===!0||t===!1)&&(n=t,t=void 0),(s===!0||s===!1)&&(n=s,s=void 0),(wa(e)&&ag(e)||us(e)&&e.length===0)&&(e=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=a,i._l=s,i._i=e,i._f=t,i._strict=n,LH(i)}function et(e,t,s,n){return B1(e,t,s,n,!1)}var $H=Kr("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=et.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:sm()}),FH=Kr("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=et.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:sm()});function z1(e,t){var s,n;if(t.length===1&&us(t[0])&&(t=t[0]),!t.length)return et();for(s=t[0],n=1;n<t.length;++n)(!t[n].isValid()||t[n][e](s))&&(s=t[n]);return s}function BH(){var e=[].slice.call(arguments,0);return z1("isBefore",e)}function zH(){var e=[].slice.call(arguments,0);return z1("isAfter",e)}var UH=function(){return Date.now?Date.now():+new Date},go=["year","quarter","month","week","day","hour","minute","second","millisecond"];function VH(e){var t,s=!1,n,a=go.length;for(t in e)if(Le(e,t)&&!(ft.call(go,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return!1;for(n=0;n<a;++n)if(e[go[n]]){if(s)return!1;parseFloat(e[go[n]])!==_e(e[go[n]])&&(s=!0)}return!0}function HH(){return this._isValid}function WH(){return ps(NaN)}function um(e){var t=dg(e),s=t.year||0,n=t.quarter||0,a=t.month||0,i=t.week||t.isoWeek||0,o=t.day||0,l=t.hour||0,c=t.minute||0,d=t.second||0,u=t.millisecond||0;this._isValid=VH(t),this._milliseconds=+u+d*1e3+c*6e4+l*1e3*60*60,this._days=+o+i*7,this._months=+a+n*3+s*12,this._data={},this._locale=fn(),this._bubble()}function sd(e){return e instanceof um}function rp(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function YH(e,t,s){var n=Math.min(e.length,t.length),a=Math.abs(e.length-t.length),i=0,o;for(o=0;o<n;o++)_e(e[o])!==_e(t[o])&&i++;return i+a}function U1(e,t){ve(e,0,0,function(){var s=this.utcOffset(),n="+";return s<0&&(s=-s,n="-"),n+Ls(~~(s/60),2)+t+Ls(~~s%60,2)})}U1("Z",":");U1("ZZ","");me("Z",lm);me("ZZ",lm);ze(["Z","ZZ"],function(e,t,s){s._useUTC=!0,s._tzm=wg(lm,e)});var qH=/([\+\-]|\d\d)/gi;function wg(e,t){var s=(t||"").match(e),n,a,i;return s===null?null:(n=s[s.length-1]||[],a=(n+"").match(qH)||["-",0,0],i=+(a[1]*60)+_e(a[2]),i===0?0:a[0]==="+"?i:-i)}function Ng(e,t){var s,n;return t._isUTC?(s=t.clone(),n=(ms(e)||Xl(e)?e.valueOf():et(e).valueOf())-s.valueOf(),s._d.setTime(s._d.valueOf()+n),ae.updateOffset(s,!1),s):et(e).local()}function sp(e){return-Math.round(e._d.getTimezoneOffset())}ae.updateOffset=function(){};function GH(e,t,s){var n=this._offset||0,a;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=wg(lm,e),e===null)return this}else Math.abs(e)<16&&!s&&(e=e*60);return!this._isUTC&&t&&(a=sp(this)),this._offset=e,this._isUTC=!0,a!=null&&this.add(a,"m"),n!==e&&(!t||this._changeInProgress?W1(this,ps(e-n,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,ae.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?n:sp(this)}function KH(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function XH(e){return this.utcOffset(0,e)}function QH(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(sp(this),"m")),this}function JH(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=wg(gV,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function ZH(e){return this.isValid()?(e=e?et(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function eW(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function tW(){if(!ir(this._isDSTShifted))return this._isDSTShifted;var e={},t;return og(e,this),e=F1(e),e._a?(t=e._isUTC?zs(e._a):et(e._a),this._isDSTShifted=this.isValid()&&YH(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function rW(){return this.isValid()?!this._isUTC:!1}function sW(){return this.isValid()?this._isUTC:!1}function V1(){return this.isValid()?this._isUTC&&this._offset===0:!1}var nW=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,aW=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function ps(e,t){var s=e,n=null,a,i,o;return sd(e)?s={ms:e._milliseconds,d:e._days,M:e._months}:un(e)||!isNaN(+e)?(s={},t?s[t]=+e:s.milliseconds=+e):(n=nW.exec(e))?(a=n[1]==="-"?-1:1,s={y:0,d:_e(n[ks])*a,h:_e(n[St])*a,m:_e(n[is])*a,s:_e(n[en])*a,ms:_e(rp(n[xa]*1e3))*a}):(n=aW.exec(e))?(a=n[1]==="-"?-1:1,s={y:aa(n[2],a),M:aa(n[3],a),w:aa(n[4],a),d:aa(n[5],a),h:aa(n[6],a),m:aa(n[7],a),s:aa(n[8],a)}):s==null?s={}:typeof s=="object"&&("from"in s||"to"in s)&&(o=iW(et(s.from),et(s.to)),s={},s.ms=o.milliseconds,s.M=o.months),i=new um(s),sd(e)&&Le(e,"_locale")&&(i._locale=e._locale),sd(e)&&Le(e,"_isValid")&&(i._isValid=e._isValid),i}ps.fn=um.prototype;ps.invalid=WH;function aa(e,t){var s=e&&parseFloat(e.replace(",","."));return(isNaN(s)?0:s)*t}function rb(e,t){var s={};return s.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(s.months,"M").isAfter(t)&&--s.months,s.milliseconds=+t-+e.clone().add(s.months,"M"),s}function iW(e,t){var s;return e.isValid()&&t.isValid()?(t=Ng(t,e),e.isBefore(t)?s=rb(e,t):(s=rb(t,e),s.milliseconds=-s.milliseconds,s.months=-s.months),s):{milliseconds:0,months:0}}function H1(e,t){return function(s,n){var a,i;return n!==null&&!isNaN(+n)&&(y1(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=s,s=n,n=i),a=ps(s,n),W1(this,a,e),this}}function W1(e,t,s,n){var a=t._milliseconds,i=rp(t._days),o=rp(t._months);e.isValid()&&(n=n??!0,o&&A1(e,Sl(e,"Month")+o*s),i&&E1(e,"Date",Sl(e,"Date")+i*s),a&&e._d.setTime(e._d.valueOf()+a*s),n&&ae.updateOffset(e,i||o))}var oW=H1(1,"add"),lW=H1(-1,"subtract");function Y1(e){return typeof e=="string"||e instanceof String}function cW(e){return ms(e)||Xl(e)||Y1(e)||un(e)||uW(e)||dW(e)||e===null||e===void 0}function dW(e){var t=wa(e)&&!ag(e),s=!1,n=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],a,i,o=n.length;for(a=0;a<o;a+=1)i=n[a],s=s||Le(e,i);return t&&s}function uW(e){var t=us(e),s=!1;return t&&(s=e.filter(function(n){return!un(n)&&Y1(e)}).length===0),t&&s}function mW(e){var t=wa(e)&&!ag(e),s=!1,n=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],a,i;for(a=0;a<n.length;a+=1)i=n[a],s=s||Le(e,i);return t&&s}function hW(e,t){var s=e.diff(t,"days",!0);return s<-6?"sameElse":s<-1?"lastWeek":s<0?"lastDay":s<1?"sameDay":s<2?"nextDay":s<7?"nextWeek":"sameElse"}function fW(e,t){arguments.length===1&&(arguments[0]?cW(arguments[0])?(e=arguments[0],t=void 0):mW(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var s=e||et(),n=Ng(s,this).startOf("day"),a=ae.calendarFormat(this,n)||"sameElse",i=t&&(Us(t[a])?t[a].call(this,s):t[a]);return this.format(i||this.localeData().calendar(a,this,et(s)))}function pW(){return new Ql(this)}function xW(e,t){var s=ms(e)?e:et(e);return this.isValid()&&s.isValid()?(t=Xr(t)||"millisecond",t==="millisecond"?this.valueOf()>s.valueOf():s.valueOf()<this.clone().startOf(t).valueOf()):!1}function gW(e,t){var s=ms(e)?e:et(e);return this.isValid()&&s.isValid()?(t=Xr(t)||"millisecond",t==="millisecond"?this.valueOf()<s.valueOf():this.clone().endOf(t).valueOf()<s.valueOf()):!1}function vW(e,t,s,n){var a=ms(e)?e:et(e),i=ms(t)?t:et(t);return this.isValid()&&a.isValid()&&i.isValid()?(n=n||"()",(n[0]==="("?this.isAfter(a,s):!this.isBefore(a,s))&&(n[1]===")"?this.isBefore(i,s):!this.isAfter(i,s))):!1}function yW(e,t){var s=ms(e)?e:et(e),n;return this.isValid()&&s.isValid()?(t=Xr(t)||"millisecond",t==="millisecond"?this.valueOf()===s.valueOf():(n=s.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf())):!1}function bW(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function jW(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function wW(e,t,s){var n,a,i;if(!this.isValid())return NaN;if(n=Ng(e,this),!n.isValid())return NaN;switch(a=(n.utcOffset()-this.utcOffset())*6e4,t=Xr(t),t){case"year":i=nd(this,n)/12;break;case"month":i=nd(this,n);break;case"quarter":i=nd(this,n)/3;break;case"second":i=(this-n)/1e3;break;case"minute":i=(this-n)/6e4;break;case"hour":i=(this-n)/36e5;break;case"day":i=(this-n-a)/864e5;break;case"week":i=(this-n-a)/6048e5;break;default:i=this-n}return s?i:$r(i)}function nd(e,t){if(e.date()<t.date())return-nd(t,e);var s=(t.year()-e.year())*12+(t.month()-e.month()),n=e.clone().add(s,"months"),a,i;return t-n<0?(a=e.clone().add(s-1,"months"),i=(t-n)/(n-a)):(a=e.clone().add(s+1,"months"),i=(t-n)/(a-n)),-(s+i)||0}ae.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";ae.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function NW(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function CW(e){if(!this.isValid())return null;var t=e!==!0,s=t?this.clone().utc():this;return s.year()<0||s.year()>9999?rd(s,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):Us(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",rd(s,"Z")):rd(s,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function SW(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",s,n,a,i;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z"),s="["+e+'("]',n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",a="-MM-DD[T]HH:mm:ss.SSS",i=t+'[")]',this.format(s+n+a+i)}function EW(e){e||(e=this.isUtc()?ae.defaultFormatUtc:ae.defaultFormat);var t=rd(this,e);return this.localeData().postformat(t)}function kW(e,t){return this.isValid()&&(ms(e)&&e.isValid()||et(e).isValid())?ps({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function DW(e){return this.from(et(),e)}function AW(e,t){return this.isValid()&&(ms(e)&&e.isValid()||et(e).isValid())?ps({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function TW(e){return this.to(et(),e)}function q1(e){var t;return e===void 0?this._locale._abbr:(t=fn(e),t!=null&&(this._locale=t),this)}var G1=Kr("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function K1(){return this._locale}var eu=1e3,mi=60*eu,tu=60*mi,X1=(365*400+97)*24*tu;function hi(e,t){return(e%t+t)%t}function Q1(e,t,s){return e<100&&e>=0?new Date(e+400,t,s)-X1:new Date(e,t,s).valueOf()}function J1(e,t,s){return e<100&&e>=0?Date.UTC(e+400,t,s)-X1:Date.UTC(e,t,s)}function _W(e){var t,s;if(e=Xr(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(s=this._isUTC?J1:Q1,e){case"year":t=s(this.year(),0,1);break;case"quarter":t=s(this.year(),this.month()-this.month()%3,1);break;case"month":t=s(this.year(),this.month(),1);break;case"week":t=s(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=s(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=hi(t+(this._isUTC?0:this.utcOffset()*mi),tu);break;case"minute":t=this._d.valueOf(),t-=hi(t,mi);break;case"second":t=this._d.valueOf(),t-=hi(t,eu);break}return this._d.setTime(t),ae.updateOffset(this,!0),this}function OW(e){var t,s;if(e=Xr(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(s=this._isUTC?J1:Q1,e){case"year":t=s(this.year()+1,0,1)-1;break;case"quarter":t=s(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=s(this.year(),this.month()+1,1)-1;break;case"week":t=s(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=s(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=s(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=tu-hi(t+(this._isUTC?0:this.utcOffset()*mi),tu)-1;break;case"minute":t=this._d.valueOf(),t+=mi-hi(t,mi)-1;break;case"second":t=this._d.valueOf(),t+=eu-hi(t,eu)-1;break}return this._d.setTime(t),ae.updateOffset(this,!0),this}function MW(){return this._d.valueOf()-(this._offset||0)*6e4}function RW(){return Math.floor(this.valueOf()/1e3)}function PW(){return new Date(this.valueOf())}function LW(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function IW(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function $W(){return this.isValid()?this.toISOString():null}function FW(){return ig(this)}function BW(){return Dn({},Ee(this))}function zW(){return Ee(this).overflow}function UW(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}ve("N",0,0,"eraAbbr");ve("NN",0,0,"eraAbbr");ve("NNN",0,0,"eraAbbr");ve("NNNN",0,0,"eraName");ve("NNNNN",0,0,"eraNarrow");ve("y",["y",1],"yo","eraYear");ve("y",["yy",2],0,"eraYear");ve("y",["yyy",3],0,"eraYear");ve("y",["yyyy",4],0,"eraYear");me("N",Cg);me("NN",Cg);me("NNN",Cg);me("NNNN",ZW);me("NNNNN",eY);ze(["N","NN","NNN","NNNN","NNNNN"],function(e,t,s,n){var a=s._locale.erasParse(e,n,s._strict);a?Ee(s).era=a:Ee(s).invalidEra=e});me("y",Gi);me("yy",Gi);me("yyy",Gi);me("yyyy",Gi);me("yo",tY);ze(["y","yy","yyy","yyyy"],Ht);ze(["yo"],function(e,t,s,n){var a;s._locale._eraYearOrdinalRegex&&(a=e.match(s._locale._eraYearOrdinalRegex)),s._locale.eraYearOrdinalParse?t[Ht]=s._locale.eraYearOrdinalParse(e,a):t[Ht]=parseInt(e,10)});function VW(e,t){var s,n,a,i=this._eras||fn("en")._eras;for(s=0,n=i.length;s<n;++s){switch(typeof i[s].since){case"string":a=ae(i[s].since).startOf("day"),i[s].since=a.valueOf();break}switch(typeof i[s].until){case"undefined":i[s].until=1/0;break;case"string":a=ae(i[s].until).startOf("day").valueOf(),i[s].until=a.valueOf();break}}return i}function HW(e,t,s){var n,a,i=this.eras(),o,l,c;for(e=e.toUpperCase(),n=0,a=i.length;n<a;++n)if(o=i[n].name.toUpperCase(),l=i[n].abbr.toUpperCase(),c=i[n].narrow.toUpperCase(),s)switch(t){case"N":case"NN":case"NNN":if(l===e)return i[n];break;case"NNNN":if(o===e)return i[n];break;case"NNNNN":if(c===e)return i[n];break}else if([o,l,c].indexOf(e)>=0)return i[n]}function WW(e,t){var s=e.since<=e.until?1:-1;return t===void 0?ae(e.since).year():ae(e.since).year()+(t-e.offset)*s}function YW(){var e,t,s,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e)if(s=this.clone().startOf("day").valueOf(),n[e].since<=s&&s<=n[e].until||n[e].until<=s&&s<=n[e].since)return n[e].name;return""}function qW(){var e,t,s,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e)if(s=this.clone().startOf("day").valueOf(),n[e].since<=s&&s<=n[e].until||n[e].until<=s&&s<=n[e].since)return n[e].narrow;return""}function GW(){var e,t,s,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e)if(s=this.clone().startOf("day").valueOf(),n[e].since<=s&&s<=n[e].until||n[e].until<=s&&s<=n[e].since)return n[e].abbr;return""}function KW(){var e,t,s,n,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e)if(s=a[e].since<=a[e].until?1:-1,n=this.clone().startOf("day").valueOf(),a[e].since<=n&&n<=a[e].until||a[e].until<=n&&n<=a[e].since)return(this.year()-ae(a[e].since).year())*s+a[e].offset;return this.year()}function XW(e){return Le(this,"_erasNameRegex")||Sg.call(this),e?this._erasNameRegex:this._erasRegex}function QW(e){return Le(this,"_erasAbbrRegex")||Sg.call(this),e?this._erasAbbrRegex:this._erasRegex}function JW(e){return Le(this,"_erasNarrowRegex")||Sg.call(this),e?this._erasNarrowRegex:this._erasRegex}function Cg(e,t){return t.erasAbbrRegex(e)}function ZW(e,t){return t.erasNameRegex(e)}function eY(e,t){return t.erasNarrowRegex(e)}function tY(e,t){return t._eraYearOrdinalRegex||Gi}function Sg(){var e=[],t=[],s=[],n=[],a,i,o,l,c,d=this.eras();for(a=0,i=d.length;a<i;++a)o=rn(d[a].name),l=rn(d[a].abbr),c=rn(d[a].narrow),t.push(o),e.push(l),s.push(c),n.push(o),n.push(l),n.push(c);this._erasRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+s.join("|")+")","i")}ve(0,["gg",2],0,function(){return this.weekYear()%100});ve(0,["GG",2],0,function(){return this.isoWeekYear()%100});function mm(e,t){ve(0,[e,e.length],0,t)}mm("gggg","weekYear");mm("ggggg","weekYear");mm("GGGG","isoWeekYear");mm("GGGGG","isoWeekYear");me("G",om);me("g",om);me("GG",tt,kr);me("gg",tt,kr);me("GGGG",mg,ug);me("gggg",mg,ug);me("GGGGG",im,nm);me("ggggg",im,nm);Zl(["gggg","ggggg","GGGG","GGGGG"],function(e,t,s,n){t[n.substr(0,2)]=_e(e)});Zl(["gg","GG"],function(e,t,s,n){t[n]=ae.parseTwoDigitYear(e)});function rY(e){return Z1.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function sY(e){return Z1.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function nY(){return sn(this.year(),1,4)}function aY(){return sn(this.isoWeekYear(),1,4)}function iY(){var e=this.localeData()._week;return sn(this.year(),e.dow,e.doy)}function oY(){var e=this.localeData()._week;return sn(this.weekYear(),e.dow,e.doy)}function Z1(e,t,s,n,a){var i;return e==null?kl(this,n,a).year:(i=sn(e,n,a),t>i&&(t=i),lY.call(this,e,t,s,n,a))}function lY(e,t,s,n,a){var i=O1(e,t,s,n,a),o=El(i.year,0,i.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}ve("Q",0,"Qo","quarter");me("Q",j1);ze("Q",function(e,t){t[Zs]=(_e(e)-1)*3});function cY(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}ve("D",["DD",2],"Do","date");me("D",tt,Ki);me("DD",tt,kr);me("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});ze(["D","DD"],ks);ze("Do",function(e,t){t[ks]=_e(e.match(tt)[0])});var eC=Xi("Date",!0);ve("DDD",["DDDD",3],"DDDo","dayOfYear");me("DDD",am);me("DDDD",w1);ze(["DDD","DDDD"],function(e,t,s){s._dayOfYear=_e(e)});function dY(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}ve("m",["mm",2],0,"minute");me("m",tt,hg);me("mm",tt,kr);ze(["m","mm"],is);var uY=Xi("Minutes",!1);ve("s",["ss",2],0,"second");me("s",tt,hg);me("ss",tt,kr);ze(["s","ss"],en);var mY=Xi("Seconds",!1);ve("S",0,0,function(){return~~(this.millisecond()/100)});ve(0,["SS",2],0,function(){return~~(this.millisecond()/10)});ve(0,["SSS",3],0,"millisecond");ve(0,["SSSS",4],0,function(){return this.millisecond()*10});ve(0,["SSSSS",5],0,function(){return this.millisecond()*100});ve(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});ve(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});ve(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});ve(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});me("S",am,j1);me("SS",am,kr);me("SSS",am,w1);var An,tC;for(An="SSSS";An.length<=9;An+="S")me(An,Gi);function hY(e,t){t[xa]=_e(("0."+e)*1e3)}for(An="S";An.length<=9;An+="S")ze(An,hY);tC=Xi("Milliseconds",!1);ve("z",0,0,"zoneAbbr");ve("zz",0,0,"zoneName");function fY(){return this._isUTC?"UTC":""}function pY(){return this._isUTC?"Coordinated Universal Time":""}var ne=Ql.prototype;ne.add=oW;ne.calendar=fW;ne.clone=pW;ne.diff=wW;ne.endOf=OW;ne.format=EW;ne.from=kW;ne.fromNow=DW;ne.to=AW;ne.toNow=TW;ne.get=SV;ne.invalidAt=zW;ne.isAfter=xW;ne.isBefore=gW;ne.isBetween=vW;ne.isSame=yW;ne.isSameOrAfter=bW;ne.isSameOrBefore=jW;ne.isValid=FW;ne.lang=G1;ne.locale=q1;ne.localeData=K1;ne.max=FH;ne.min=$H;ne.parsingFlags=BW;ne.set=EV;ne.startOf=_W;ne.subtract=lW;ne.toArray=LW;ne.toObject=IW;ne.toDate=PW;ne.toISOString=CW;ne.inspect=SW;typeof Symbol<"u"&&Symbol.for!=null&&(ne[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});ne.toJSON=$W;ne.toString=NW;ne.unix=RW;ne.valueOf=MW;ne.creationData=UW;ne.eraName=YW;ne.eraNarrow=qW;ne.eraAbbr=GW;ne.eraYear=KW;ne.year=S1;ne.isLeapYear=CV;ne.weekYear=rY;ne.isoWeekYear=sY;ne.quarter=ne.quarters=cY;ne.month=T1;ne.daysInMonth=PV;ne.week=ne.weeks=VV;ne.isoWeek=ne.isoWeeks=HV;ne.weeksInYear=iY;ne.weeksInWeekYear=oY;ne.isoWeeksInYear=nY;ne.isoWeeksInISOWeekYear=aY;ne.date=eC;ne.day=ne.days=sH;ne.weekday=nH;ne.isoWeekday=aH;ne.dayOfYear=dY;ne.hour=ne.hours=mH;ne.minute=ne.minutes=uY;ne.second=ne.seconds=mY;ne.millisecond=ne.milliseconds=tC;ne.utcOffset=GH;ne.utc=XH;ne.local=QH;ne.parseZone=JH;ne.hasAlignedHourOffset=ZH;ne.isDST=eW;ne.isLocal=rW;ne.isUtcOffset=sW;ne.isUtc=V1;ne.isUTC=V1;ne.zoneAbbr=fY;ne.zoneName=pY;ne.dates=Kr("dates accessor is deprecated. Use date instead.",eC);ne.months=Kr("months accessor is deprecated. Use month instead",T1);ne.years=Kr("years accessor is deprecated. Use year instead",S1);ne.zone=Kr("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",KH);ne.isDSTShifted=Kr("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",tW);function xY(e){return et(e*1e3)}function gY(){return et.apply(null,arguments).parseZone()}function rC(e){return e}var Ie=lg.prototype;Ie.calendar=rV;Ie.longDateFormat=iV;Ie.invalidDate=lV;Ie.ordinal=uV;Ie.preparse=rC;Ie.postformat=rC;Ie.relativeTime=hV;Ie.pastFuture=fV;Ie.set=eV;Ie.eras=VW;Ie.erasParse=HW;Ie.erasConvertYear=WW;Ie.erasAbbrRegex=QW;Ie.erasNameRegex=XW;Ie.erasNarrowRegex=JW;Ie.months=_V;Ie.monthsShort=OV;Ie.monthsParse=RV;Ie.monthsRegex=IV;Ie.monthsShortRegex=LV;Ie.week=FV;Ie.firstDayOfYear=UV;Ie.firstDayOfWeek=zV;Ie.weekdays=JV;Ie.weekdaysMin=eH;Ie.weekdaysShort=ZV;Ie.weekdaysParse=rH;Ie.weekdaysRegex=iH;Ie.weekdaysShortRegex=oH;Ie.weekdaysMinRegex=lH;Ie.isPM=dH;Ie.meridiem=hH;function ru(e,t,s,n){var a=fn(),i=zs().set(n,t);return a[s](i,e)}function sC(e,t,s){if(un(e)&&(t=e,e=void 0),e=e||"",t!=null)return ru(e,t,s,"month");var n,a=[];for(n=0;n<12;n++)a[n]=ru(e,n,s,"month");return a}function Eg(e,t,s,n){typeof e=="boolean"?(un(t)&&(s=t,t=void 0),t=t||""):(t=e,s=t,e=!1,un(t)&&(s=t,t=void 0),t=t||"");var a=fn(),i=e?a._week.dow:0,o,l=[];if(s!=null)return ru(t,(s+i)%7,n,"day");for(o=0;o<7;o++)l[o]=ru(t,(o+i)%7,n,"day");return l}function vY(e,t){return sC(e,t,"months")}function yY(e,t){return sC(e,t,"monthsShort")}function bY(e,t,s){return Eg(e,t,s,"weekdays")}function jY(e,t,s){return Eg(e,t,s,"weekdaysShort")}function wY(e,t,s){return Eg(e,t,s,"weekdaysMin")}Fn("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,s=_e(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+s}});ae.lang=Kr("moment.lang is deprecated. Use moment.locale instead.",Fn);ae.langData=Kr("moment.langData is deprecated. Use moment.localeData instead.",fn);var Ys=Math.abs;function NY(){var e=this._data;return this._milliseconds=Ys(this._milliseconds),this._days=Ys(this._days),this._months=Ys(this._months),e.milliseconds=Ys(e.milliseconds),e.seconds=Ys(e.seconds),e.minutes=Ys(e.minutes),e.hours=Ys(e.hours),e.months=Ys(e.months),e.years=Ys(e.years),this}function nC(e,t,s,n){var a=ps(t,s);return e._milliseconds+=n*a._milliseconds,e._days+=n*a._days,e._months+=n*a._months,e._bubble()}function CY(e,t){return nC(this,e,t,1)}function SY(e,t){return nC(this,e,t,-1)}function sb(e){return e<0?Math.floor(e):Math.ceil(e)}function EY(){var e=this._milliseconds,t=this._days,s=this._months,n=this._data,a,i,o,l,c;return e>=0&&t>=0&&s>=0||e<=0&&t<=0&&s<=0||(e+=sb(np(s)+t)*864e5,t=0,s=0),n.milliseconds=e%1e3,a=$r(e/1e3),n.seconds=a%60,i=$r(a/60),n.minutes=i%60,o=$r(i/60),n.hours=o%24,t+=$r(o/24),c=$r(aC(t)),s+=c,t-=sb(np(c)),l=$r(s/12),s%=12,n.days=t,n.months=s,n.years=l,this}function aC(e){return e*4800/146097}function np(e){return e*146097/4800}function kY(e){if(!this.isValid())return NaN;var t,s,n=this._milliseconds;if(e=Xr(e),e==="month"||e==="quarter"||e==="year")switch(t=this._days+n/864e5,s=this._months+aC(t),e){case"month":return s;case"quarter":return s/3;case"year":return s/12}else switch(t=this._days+Math.round(np(this._months)),e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return t*24+n/36e5;case"minute":return t*1440+n/6e4;case"second":return t*86400+n/1e3;case"millisecond":return Math.floor(t*864e5)+n;default:throw new Error("Unknown unit "+e)}}function pn(e){return function(){return this.as(e)}}var iC=pn("ms"),DY=pn("s"),AY=pn("m"),TY=pn("h"),_Y=pn("d"),OY=pn("w"),MY=pn("M"),RY=pn("Q"),PY=pn("y"),LY=iC;function IY(){return ps(this)}function $Y(e){return e=Xr(e),this.isValid()?this[e+"s"]():NaN}function Ba(e){return function(){return this.isValid()?this._data[e]:NaN}}var FY=Ba("milliseconds"),BY=Ba("seconds"),zY=Ba("minutes"),UY=Ba("hours"),VY=Ba("days"),HY=Ba("months"),WY=Ba("years");function YY(){return $r(this.days()/7)}var Ks=Math.round,ni={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function qY(e,t,s,n,a){return a.relativeTime(t||1,!!s,e,n)}function GY(e,t,s,n){var a=ps(e).abs(),i=Ks(a.as("s")),o=Ks(a.as("m")),l=Ks(a.as("h")),c=Ks(a.as("d")),d=Ks(a.as("M")),u=Ks(a.as("w")),m=Ks(a.as("y")),h=i<=s.ss&&["s",i]||i<s.s&&["ss",i]||o<=1&&["m"]||o<s.m&&["mm",o]||l<=1&&["h"]||l<s.h&&["hh",l]||c<=1&&["d"]||c<s.d&&["dd",c];return s.w!=null&&(h=h||u<=1&&["w"]||u<s.w&&["ww",u]),h=h||d<=1&&["M"]||d<s.M&&["MM",d]||m<=1&&["y"]||["yy",m],h[2]=t,h[3]=+e>0,h[4]=n,qY.apply(null,h)}function KY(e){return e===void 0?Ks:typeof e=="function"?(Ks=e,!0):!1}function XY(e,t){return ni[e]===void 0?!1:t===void 0?ni[e]:(ni[e]=t,e==="s"&&(ni.ss=t-1),!0)}function QY(e,t){if(!this.isValid())return this.localeData().invalidDate();var s=!1,n=ni,a,i;return typeof e=="object"&&(t=e,e=!1),typeof e=="boolean"&&(s=e),typeof t=="object"&&(n=Object.assign({},ni,t),t.s!=null&&t.ss==null&&(n.ss=t.s-1)),a=this.localeData(),i=GY(this,!s,n,a),s&&(i=a.pastFuture(+this,i)),a.postformat(i)}var Ch=Math.abs;function Va(e){return(e>0)-(e<0)||+e}function hm(){if(!this.isValid())return this.localeData().invalidDate();var e=Ch(this._milliseconds)/1e3,t=Ch(this._days),s=Ch(this._months),n,a,i,o,l=this.asSeconds(),c,d,u,m;return l?(n=$r(e/60),a=$r(n/60),e%=60,n%=60,i=$r(s/12),s%=12,o=e?e.toFixed(3).replace(/\.?0+$/,""):"",c=l<0?"-":"",d=Va(this._months)!==Va(l)?"-":"",u=Va(this._days)!==Va(l)?"-":"",m=Va(this._milliseconds)!==Va(l)?"-":"",c+"P"+(i?d+i+"Y":"")+(s?d+s+"M":"")+(t?u+t+"D":"")+(a||n||e?"T":"")+(a?m+a+"H":"")+(n?m+n+"M":"")+(e?m+o+"S":"")):"P0D"}var Me=um.prototype;Me.isValid=HH;Me.abs=NY;Me.add=CY;Me.subtract=SY;Me.as=kY;Me.asMilliseconds=iC;Me.asSeconds=DY;Me.asMinutes=AY;Me.asHours=TY;Me.asDays=_Y;Me.asWeeks=OY;Me.asMonths=MY;Me.asQuarters=RY;Me.asYears=PY;Me.valueOf=LY;Me._bubble=EY;Me.clone=IY;Me.get=$Y;Me.milliseconds=FY;Me.seconds=BY;Me.minutes=zY;Me.hours=UY;Me.days=VY;Me.weeks=YY;Me.months=HY;Me.years=WY;Me.humanize=QY;Me.toISOString=hm;Me.toString=hm;Me.toJSON=hm;Me.locale=q1;Me.localeData=K1;Me.toIsoString=Kr("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",hm);Me.lang=G1;ve("X",0,0,"unix");ve("x",0,0,"valueOf");me("x",om);me("X",vV);ze("X",function(e,t,s){s._d=new Date(parseFloat(e)*1e3)});ze("x",function(e,t,s){s._d=new Date(_e(e))});//! moment.js
ae.version="2.30.1";JU(et);ae.fn=ne;ae.min=BH;ae.max=zH;ae.now=UH;ae.utc=zs;ae.unix=xY;ae.months=vY;ae.isDate=Xl;ae.locale=Fn;ae.invalid=sm;ae.duration=ps;ae.isMoment=ms;ae.weekdays=bY;ae.parseZone=gY;ae.localeData=fn;ae.isDuration=sd;ae.monthsShort=yY;ae.weekdaysMin=wY;ae.defineLocale=vg;ae.updateLocale=gH;ae.locales=vH;ae.weekdaysShort=jY;ae.normalizeUnits=Xr;ae.relativeTimeRounding=KY;ae.relativeTimeThreshold=XY;ae.calendarFormat=hW;ae.prototype=ne;ae.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const JY=e=>{const t=()=>{e.onNavigate("TODAY")},s=()=>{e.onNavigate("PREV")},n=()=>{e.onNavigate("NEXT")},a={month:"Mes",week:"Semana",day:"Día",agenda:"Agenda"};return r.jsxs("div",{className:"rbc-toolbar",role:"toolbar","aria-label":"Controles del calendario",children:[r.jsxs("div",{className:"rbc-btn-group",role:"group","aria-label":"Navegación del calendario",children:[r.jsx("button",{type:"button",onClick:s,className:"rbc-btn","aria-label":"Mes anterior",children:r.jsx("span",{"aria-hidden":"true",children:"‹"})}),r.jsx("button",{type:"button",onClick:t,className:"rbc-btn rbc-active","aria-label":"Ir a hoy",children:"Hoy"}),r.jsx("button",{type:"button",onClick:n,className:"rbc-btn","aria-label":"Mes siguiente",children:r.jsx("span",{"aria-hidden":"true",children:"›"})})]}),r.jsx("span",{className:"rbc-toolbar-label",role:"heading","aria-level":2,children:e.label}),r.jsx("div",{className:"rbc-btn-group",role:"group","aria-label":"Vistas del calendario",children:e.views.map(i=>r.jsx("button",{type:"button",onClick:()=>e.onView(i),className:`rbc-btn ${e.view===i?"rbc-active":""}`,"aria-pressed":e.view===i,"aria-label":`Ver ${a[i]}`,children:a[i]},i))})]})},ZY=QU(ae),eq=()=>{const[e,t]=f.useState([]),[s,n]=f.useState(!0),[a,i]=f.useState(null),[o,l]=f.useState(null),[c,d]=f.useState(null),[u,m]=f.useState(!1),[h,g]=f.useState({date:"",location:"",notes:""}),[j,y]=f.useState(!1),[w,x]=f.useState(!1),[p,v]=f.useState(!1),[N,b]=f.useState({clientName:"",dateFrom:"",dateTo:"",status:"",consultationType:""}),[C,S]=f.useState([]),[k,D]=f.useState("calendar");f.useEffect(()=>{(async()=>{try{n(!0);const R=localStorage.getItem("token"),$=await K.get("/appointments",{params:{_t:Date.now()}}),_=Array.isArray($.data)?$.data:[];t(_),i(null)}catch{i("Error al cargar las citas"),t([])}finally{n(!1)}})()},[]),f.useEffect(()=>{const E=e.filter(R=>{const $=R.type==="VISITOR"?R.fullName:R.client.user.name;return!(N.clientName&&$&&!$.toLowerCase().includes(N.clientName.toLowerCase())||N.dateFrom&&ae(R.date).isBefore(ae(N.dateFrom))||N.dateTo&&ae(R.date).isAfter(ae(N.dateTo).endOf("day"))||N.status&&R.status!==N.status||N.consultationType&&R.consultationType!==N.consultationType)});S(E)},[e,N]);const L=f.useMemo(()=>{const E=Array.isArray(C)?C:[],R=E.length,$=E.filter(O=>ae(O.date).isAfter(ae())).length,_=E.filter(O=>ae(O.date).isBefore(ae())).length;return{total:R,upcoming:$,past:_}},[C]),T=(Array.isArray(C)?C:[]).map(E=>{const R=E.type==="VISITOR"?E.fullName:E.client.user.name;return{id:E.id,title:`${R} - ${ae(E.date).format("HH:mm")}`,start:new Date(E.date),end:ae(E.date).add(1,"hour").toDate(),resource:E}}),B=E=>{d(E),g({date:ae(E.date).format("YYYY-MM-DDTHH:mm"),location:E.location||"",notes:""}),m(!0)},V=async E=>{var R,$;if(E.preventDefault(),!!c)try{y(!0);const _=localStorage.getItem("token"),O=await K.put(`/appointments/${c.id}/reschedule`,h);t(P=>P.map(F=>F.id===c.id?O.data:F)),l("Cita reprogramada exitosamente. Se ha enviado una notificación al cliente."),m(!1),d(null),setTimeout(()=>l(null),5e3)}catch(_){i((($=(R=_.response)==null?void 0:R.data)==null?void 0:$.message)||"Error al reprogramar la cita")}finally{y(!1)}},A=async()=>{var E,R;if(c&&window.confirm("¿Estás seguro de que quieres eliminar esta cita? Esta acción no se puede deshacer."))try{x(!0);const $=localStorage.getItem("token");await K.delete(`/appointments/${c.id}`),t(_=>_.filter(O=>O.id!==c.id)),l("Cita eliminada exitosamente."),d(null),setTimeout(()=>l(null),5e3)}catch($){i(((R=(E=$.response)==null?void 0:E.data)==null?void 0:R.message)||"Error al eliminar la cita")}finally{x(!1)}},I=async()=>{var E,R;if(c)try{y(!0);const $=localStorage.getItem("token"),_=await K.put(`/appointments/${c.id}/confirm`,{});t(O=>O.map(P=>P.id===c.id?_.data:P)),l("Cita confirmada exitosamente. Se ha enviado una notificación al cliente."),d(null),setTimeout(()=>l(null),5e3)}catch($){i(((R=(E=$.response)==null?void 0:E.data)==null?void 0:R.message)||"Error al confirmar la cita")}finally{y(!1)}},q=E=>{g(R=>({...R,[E.target.name]:E.target.value}))},Y=E=>{b(R=>({...R,[E.target.name]:E.target.value}))},M=()=>{b({clientName:"",dateFrom:"",dateTo:"",status:"",consultationType:""})},W=f.useMemo(()=>e.filter(R=>R.consultationType).map(R=>R.consultationType).filter((R,$,_)=>_.indexOf(R)===$),[e]);return r.jsx("div",{className:"py-6",children:r.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Calendario de Citas"}),o&&r.jsx("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-md",children:r.jsx("p",{className:"text-green-700 text-sm",children:o})}),a&&r.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-md",children:r.jsx("p",{className:"text-red-700 text-sm",children:a})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[r.jsxs("div",{className:"bg-white p-4 rounded shadow text-center",children:[r.jsx("div",{className:"text-gray-500 text-sm",children:"Total Citas"}),r.jsx("div",{className:"text-2xl font-bold",children:L.total})]}),r.jsxs("div",{className:"bg-white p-4 rounded shadow text-center",children:[r.jsx("div",{className:"text-gray-500 text-sm",children:"Próximas"}),r.jsx("div",{className:"text-2xl font-bold",children:L.upcoming})]}),r.jsxs("div",{className:"bg-white p-4 rounded shadow text-center",children:[r.jsx("div",{className:"text-gray-500 text-sm",children:"Pasadas"}),r.jsx("div",{className:"text-2xl font-bold",children:L.past})]})]}),r.jsxs("div",{className:"bg-white rounded shadow p-4 mb-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Filtros de Búsqueda"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>v(!p),className:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500","aria-expanded":p,"aria-controls":"filters-panel","aria-label":p?"Ocultar filtros de búsqueda":"Mostrar filtros de búsqueda",children:p?"Ocultar Filtros":"Mostrar Filtros"}),r.jsx("button",{onClick:M,className:"px-3 py-1 text-sm bg-gray-600 text-white rounded hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500","aria-label":"Limpiar todos los filtros aplicados",children:"Limpiar Filtros"})]})]}),p&&r.jsxs("div",{id:"filters-panel",role:"region","aria-label":"Panel de filtros avanzados",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"clientName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre del Cliente"}),r.jsx("input",{id:"clientName",type:"text",name:"clientName",value:N.clientName,onChange:Y,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Buscar por nombre...","aria-describedby":"clientName-help"}),r.jsx("div",{id:"clientName-help",className:"sr-only",children:"Escribe el nombre del cliente para filtrar las citas"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"dateFrom",className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha Desde"}),r.jsx("input",{id:"dateFrom",type:"date",name:"dateFrom",value:N.dateFrom,onChange:Y,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","aria-describedby":"dateFrom-help"}),r.jsx("div",{id:"dateFrom-help",className:"sr-only",children:"Selecciona la fecha desde la cual quieres ver citas"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"dateTo",className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha Hasta"}),r.jsx("input",{id:"dateTo",type:"date",name:"dateTo",value:N.dateTo,onChange:Y,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","aria-describedby":"dateTo-help"}),r.jsx("div",{id:"dateTo-help",className:"sr-only",children:"Selecciona la fecha hasta la cual quieres ver citas"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),r.jsxs("select",{id:"status",name:"status",value:N.status,onChange:Y,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","aria-describedby":"status-help",children:[r.jsx("option",{value:"",children:"Todos los estados"}),r.jsx("option",{value:"CONFIRMADA",children:"Confirmada"}),r.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),r.jsx("option",{value:"CANCELADA",children:"Cancelada"}),r.jsx("option",{value:"COMPLETADA",children:"Completada"})]}),r.jsx("div",{id:"status-help",className:"sr-only",children:"Selecciona el estado de las citas que quieres ver"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"consultationType",className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Consulta"}),r.jsxs("select",{id:"consultationType",name:"consultationType",value:N.consultationType,onChange:Y,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","aria-describedby":"consultationType-help",children:[r.jsx("option",{value:"",children:"Todos los tipos"}),W.map(E=>r.jsx("option",{value:E,children:E},E))]}),r.jsx("div",{id:"consultationType-help",className:"sr-only",children:"Selecciona el tipo de consulta para filtrar las citas"})]}),r.jsx("div",{className:"md:col-span-2 lg:col-span-3",children:r.jsxs("div",{className:"text-sm text-gray-600",role:"status","aria-live":"polite","aria-label":"Estado de filtros aplicados",children:[r.jsx("strong",{children:"Filtros activos:"}),N.clientName&&r.jsxs("span",{className:"ml-2 px-2 py-1 bg-blue-100 text-blue-800 rounded",role:"status",children:["Cliente: ",N.clientName]}),N.dateFrom&&r.jsxs("span",{className:"ml-2 px-2 py-1 bg-blue-100 text-blue-800 rounded",role:"status",children:["Desde: ",N.dateFrom]}),N.dateTo&&r.jsxs("span",{className:"ml-2 px-2 py-1 bg-blue-100 text-blue-800 rounded",role:"status",children:["Hasta: ",N.dateTo]}),N.status&&r.jsxs("span",{className:"ml-2 px-2 py-1 bg-blue-100 text-blue-800 rounded",role:"status",children:["Estado: ",N.status]}),N.consultationType&&r.jsxs("span",{className:"ml-2 px-2 py-1 bg-blue-100 text-blue-800 rounded",role:"status",children:["Tipo: ",N.consultationType]}),!N.clientName&&!N.dateFrom&&!N.dateTo&&!N.status&&!N.consultationType&&r.jsx("span",{className:"text-gray-500",role:"status",children:"Ningún filtro activo"})]})})]})]}),r.jsx("div",{className:"bg-white rounded shadow p-4 mb-6",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h2",{className:"text-lg font-semibold",children:"Vista de Citas"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>D("calendar"),className:`px-4 py-2 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 ${k==="calendar"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700"}`,"aria-pressed":k==="calendar","aria-label":"Ver citas en formato calendario",children:"Calendario"}),r.jsx("button",{onClick:()=>D("list"),className:`px-4 py-2 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 ${k==="list"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700"}`,"aria-pressed":k==="list","aria-label":"Ver citas en formato lista",children:"Lista"})]})]})}),k==="calendar"&&r.jsx("div",{className:"bg-white rounded shadow p-4",role:"region","aria-label":"Calendario de citas",children:r.jsx(WU,{localizer:ZY,events:T,startAccessor:"start",endAccessor:"end",style:{height:500},onSelectEvent:E=>d(E.resource),messages:{next:"Siguiente",previous:"Anterior",today:"Hoy",month:"Mes",week:"Semana",day:"Día",agenda:"Agenda",noEventsInRange:"No hay citas en este período",showMore:E=>`+ ${E} citas más`},components:{toolbar:JY}})}),k==="list"&&r.jsxs("div",{className:"bg-white rounded shadow p-4",role:"region","aria-label":"Lista de citas",children:[r.jsxs("h2",{className:"text-lg font-semibold mb-4",children:["Lista de Citas (",C.length,")"]}),C.length===0?r.jsx("div",{className:"text-center py-8 text-gray-500",role:"status","aria-live":"polite",children:"No hay citas que coincidan con los filtros aplicados"}):r.jsxs("div",{className:"space-y-4",role:"list","aria-label":"Citas",children:[r.jsx("h3",{className:"text-md font-semibold text-gray-700 mb-3",children:"Citas Programadas"}),C.map((E,R)=>{const $=E.type==="VISITOR"?E.fullName:E.client.user.name,_=ae(E.date).isBefore(ae()),O=ae(E.date).isSame(ae(),"day");return r.jsx("div",{className:`p-4 border rounded-lg cursor-pointer hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 ${_?"border-gray-300 bg-gray-50":O?"border-blue-300 bg-blue-50":"border-green-300 bg-green-50"}`,onClick:()=>d(E),onKeyDown:P=>{(P.key==="Enter"||P.key===" ")&&(P.preventDefault(),d(E))},tabIndex:0,role:"listitem","aria-label":`Cita ${R+1}: ${$} el ${ae(E.date).format("DD/MM/YYYY a las HH:mm")} - ${_?"Pasada":O?"Hoy":"Próxima"}`,children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[r.jsx("h4",{className:"font-semibold text-lg",children:$}),r.jsx("span",{className:`px-2 py-1 text-xs rounded ${E.type==="VISITOR"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:E.type==="VISITOR"?"Visitante":"Cliente"}),E.status&&r.jsx("span",{className:`px-2 py-1 text-xs rounded ${E.status==="CONFIRMADA"?"bg-green-100 text-green-800":E.status==="PENDIENTE"?"bg-yellow-100 text-yellow-800":E.status==="CANCELADA"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:E.status})]}),r.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Fecha:"})," ",ae(E.date).format("DD/MM/YYYY HH:mm")]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Ubicación:"})," ",E.location||"No especificada"]}),E.consultationType&&r.jsxs("div",{children:[r.jsx("strong",{children:"Tipo:"})," ",E.consultationType]}),E.consultationReason&&r.jsxs("div",{children:[r.jsx("strong",{children:"Motivo:"})," ",E.consultationReason]}),E.phone&&r.jsxs("div",{children:[r.jsx("strong",{children:"Teléfono:"})," ",E.phone]})]})]}),r.jsx("div",{className:"text-right text-sm text-gray-500",children:_?"Pasada":O?"Hoy":"Próxima"})]})},E.id)})]})]}),c&&!u&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",role:"dialog","aria-modal":"true","aria-labelledby":"appointment-detail-title","aria-describedby":"appointment-detail-content",onClick:E=>E.target===E.currentTarget&&d(null),children:r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md relative",children:[r.jsx("button",{className:"absolute top-2 right-2 text-gray-500 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded p-1",onClick:()=>d(null),"aria-label":"Cerrar detalle de cita",type:"button",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),r.jsx("h3",{id:"appointment-detail-title",className:"text-xl font-bold mb-4 pr-8",children:"Detalle de la Cita"}),r.jsxs("div",{id:"appointment-detail-content",className:"mb-4 space-y-3",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Información del Cliente"}),c.type==="VISITOR"?r.jsxs("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded-md",children:[r.jsx("h4",{className:"font-semibold text-purple-800 mb-2",children:"Cliente Visitante"}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Nombre:"})," ",c.fullName]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Email:"})," ",c.email]}),c.phone&&r.jsxs("div",{children:[r.jsx("strong",{children:"Teléfono:"})," ",c.phone]}),c.age&&r.jsxs("div",{children:[r.jsx("strong",{children:"Edad:"})," ",c.age," años"]}),c.consultationType&&r.jsxs("div",{children:[r.jsx("strong",{children:"Tipo de consulta:"})," ",c.consultationType]}),c.consultationReason&&r.jsxs("div",{children:[r.jsx("strong",{children:"Motivo:"})," ",c.consultationReason]})]})]}):r.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md",children:[r.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"Cliente Registrado"}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Nombre:"})," ",c.client.user.name]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Email:"})," ",c.client.user.email]})]})]}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Detalles de la Cita"}),r.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-md",children:[r.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Información de la Cita"}),r.jsxs("div",{className:"space-y-1 text-sm",children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Abogado:"})," ",c.lawyer.name," (",c.lawyer.email,")"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Fecha y hora:"})," ",ae(c.date).format("DD/MM/YYYY HH:mm")]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Lugar:"})," ",c.location]}),c.status&&r.jsxs("div",{children:[r.jsx("strong",{children:"Estado:"}),r.jsx("span",{className:`ml-1 px-2 py-1 text-xs rounded ${c.status==="CONFIRMADA"?"bg-green-100 text-green-800":c.status==="PENDIENTE"?"bg-yellow-100 text-yellow-800":c.status==="CANCELADA"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:c.status})]}),c.notes&&r.jsxs("div",{children:[r.jsx("strong",{children:"Notas:"})," ",c.notes]})]})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[r.jsx("button",{className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",onClick:A,disabled:w,"aria-label":"Eliminar esta cita",type:"button",children:w?"Eliminando...":"Eliminar"}),c.status!=="CONFIRMADA"&&r.jsx("button",{className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",onClick:I,disabled:j,"aria-label":"Confirmar esta cita",type:"button",children:j?"Confirmando...":"Confirmar"}),r.jsx("button",{className:"px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2",onClick:()=>B(c),"aria-label":"Reprogramar esta cita",type:"button",children:"Reprogramar"}),r.jsx("button",{className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",onClick:()=>d(null),"aria-label":"Cerrar detalle de cita",type:"button",children:"Cerrar"})]})]})}),u&&c&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",role:"dialog","aria-modal":"true","aria-labelledby":"reschedule-title","aria-describedby":"reschedule-description",onClick:E=>E.target===E.currentTarget&&m(!1),children:r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md relative",children:[r.jsx("button",{className:"absolute top-2 right-2 text-gray-500 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded p-1",onClick:()=>{m(!1),d(null)},"aria-label":"Cerrar modal de reprogramación",type:"button",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),r.jsx("h3",{id:"reschedule-title",className:"text-xl font-bold mb-4 pr-8",children:"Reprogramar Cita"}),r.jsxs("p",{id:"reschedule-description",className:"text-sm text-gray-600 mb-4",children:["Cliente: ",r.jsx("strong",{children:c.type==="VISITOR"?c.fullName:c.client.user.name})]}),r.jsxs("form",{onSubmit:V,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"reschedule-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Nueva fecha y hora"}),r.jsx("input",{id:"reschedule-date",type:"datetime-local",name:"date",value:h.date,onChange:q,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,"aria-describedby":"date-help"}),r.jsx("div",{id:"date-help",className:"sr-only",children:"Selecciona la nueva fecha y hora para la cita"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"reschedule-location",className:"block text-sm font-medium text-gray-700 mb-2",children:"Ubicación"}),r.jsx("input",{id:"reschedule-location",type:"text",name:"location",value:h.location,onChange:q,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Oficina, online, etc.","aria-describedby":"location-help"}),r.jsx("div",{id:"location-help",className:"sr-only",children:"Especifica la ubicación de la cita reprogramada"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"reschedule-notes",className:"block text-sm font-medium text-gray-700 mb-2",children:"Notas adicionales (opcional)"}),r.jsx("textarea",{id:"reschedule-notes",name:"notes",value:h.notes,onChange:q,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Motivo del cambio, instrucciones especiales, etc.","aria-describedby":"notes-help"}),r.jsx("div",{id:"notes-help",className:"sr-only",children:"Agrega notas adicionales sobre la reprogramación"})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",onClick:()=>{m(!1),d(null)},disabled:j,children:"Cancelar"}),r.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",disabled:j,children:j?"Reprogramando...":"Reprogramar Cita"})]})]})]})}),s&&r.jsx("div",{className:"text-center py-8",children:"Cargando..."})]})})},tq=()=>{var O,P;const[e,t]=f.useState([]),[s,n]=f.useState([]),[a,i]=f.useState(!0),[o,l]=f.useState(null),[c,d]=f.useState(""),[u,m]=f.useState("todos"),[h,g]=f.useState(null),[j,y]=f.useState(null),[w,x]=f.useState(!1),[p,v]=f.useState(!1),[N,b]=f.useState(null),{user:C}=Ce(),[S,k]=f.useState("asc");f.useEffect(()=>{(async()=>{try{i(!0);const Q=localStorage.getItem("token"),[X,re]=await Promise.all([K.get("/users/clients/my"),K.get("/users/clients/stats")]);t(X.data),l(re.data),g(null)}catch(Q){console.error("Error fetching clients:",Q),g("Error al cargar los clientes")}finally{i(!1)}})()},[]),f.useEffect(()=>{let F=e;c&&(F=F.filter(Q=>{var X;return Q.user.name.toLowerCase().includes(c.toLowerCase())||Q.user.email.toLowerCase().includes(c.toLowerCase())||Q.dni.toLowerCase().includes(c.toLowerCase())||((X=Q.phone)==null?void 0:X.toLowerCase().includes(c.toLowerCase()))})),u==="activos"?F=F.filter(Q=>{var X;return((X=Q._count)==null?void 0:X.expedientes)&&Q._count.expedientes>0}):u==="inactivos"&&(F=F.filter(Q=>{var X;return!((X=Q._count)!=null&&X.expedientes)||Q._count.expedientes===0})),n(F)},[e,c,u]),f.useEffect(()=>()=>{N&&clearTimeout(N)},[N]);function D(F){if(!F)return"";const Q=F.trim().split(" ");return Q.length>1?Q[1].toLowerCase():""}const L=f.useMemo(()=>[...s].sort((Q,X)=>{const re=D(Q.user.name),G=D(X.user.name);return re<G?S==="asc"?-1:1:re>G?S==="asc"?1:-1:0}),[s,S]),T=F=>{y(F),x(!0)},B=()=>{y(null),x(!1)},V=F=>{var X;return((X=F._count)==null?void 0:X.expedientes)&&F._count.expedientes>0?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"},A=F=>{var X;return((X=F._count)==null?void 0:X.expedientes)&&F._count.expedientes>0?"Activo":"Inactivo"},I=()=>{const F=s.map(le=>{var ie,xe;return{Nombre:le.user.name,Email:le.user.email,DNI:le.dni,Teléfono:le.phone||"N/A",Dirección:le.address||"N/A",Estado:A(le),Expedientes:((ie=le._count)==null?void 0:ie.expedientes)||0,Citas:((xe=le._count)==null?void 0:xe.appointments)||0}}),Q=[Object.keys(F[0]).join(","),...F.map(le=>Object.values(le).map(ie=>`"${ie}"`).join(","))].join(`
`),X=new Blob([Q],{type:"text/csv;charset=utf-8;"}),re=document.createElement("a"),G=URL.createObjectURL(X);re.setAttribute("href",G),re.setAttribute("download",`clientes_${new Date().toISOString().split("T")[0]}.csv`),re.style.visibility="hidden",document.body.appendChild(re),re.click(),document.body.removeChild(re)},q=F=>{const Q=encodeURIComponent("Consulta Legal - Despacho"),X=encodeURIComponent(`Estimado/a ${F.user.name},

Esperamos que se encuentre bien.

Saludos cordiales,
Su equipo legal`);window.open(`mailto:${F.user.email}?subject=${Q}&body=${X}`)},Y=F=>{F.phone&&window.open(`tel:${F.phone}`)},M=()=>{v(!0),setTimeout(()=>{v(!1)},500)},W=()=>{d(""),m("todos"),v(!1)},E=F=>{F.key==="Enter"&&M()},R=F=>{m(F.target.value),v(!0),setTimeout(()=>{v(!1)},300)},$=F=>{const Q=F.target.value;if(d(Q),N&&clearTimeout(N),Q.trim()){v(!0);const X=setTimeout(()=>{v(!1)},500);b(X)}else v(!1)},_=()=>{k(F=>F==="asc"?"desc":"asc")};return a?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):h?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-red-600 text-xl mb-4",children:"Error"}),r.jsx("div",{className:"text-gray-600",children:h}),r.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Reintentar"})]})}):r.jsxs("div",{className:"py-6",children:[r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mis Clientes"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Gestiona y da seguimiento a todos tus clientes"})]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsx("button",{onClick:I,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",children:"Exportar Datos"}),r.jsx(Ne,{to:"/lawyer/cases/new",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Nuevo Cliente"})]})]})}),o&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-6 mb-6",children:[r.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-md flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Clientes"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:o.total})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-green-600 rounded-md flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Activos"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:o.active})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-gray-600 rounded-md flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L18.364 5.636M5.636 18.364l12.728-12.728"})})})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Inactivos"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:o.inactive})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-yellow-600 rounded-md flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Expedientes"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:o.totalCases})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-purple-600 rounded-md flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Citas"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:o.totalAppointments})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-indigo-600 rounded-md flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Promedio Expedientes"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:o.averageCasesPerClient})]})]})})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar"}),r.jsx("input",{type:"text",placeholder:"Buscar por nombre, email, DNI o teléfono...",value:c,onChange:$,onKeyDown:E,className:`w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${p&&c?"bg-blue-50 border-blue-300":""}`}),p&&c&&r.jsxs("div",{className:"mt-1 text-xs text-blue-600 flex items-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-blue-600 mr-1"}),"Buscando..."]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado"}),r.jsxs("select",{value:u,onChange:R,"aria-label":"Filtrar por estado",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"todos",children:"Todos los estados"}),r.jsx("option",{value:"activos",children:"Solo activos"}),r.jsx("option",{value:"inactivos",children:"Solo inactivos"})]})]}),r.jsx("div",{className:"flex items-end",children:r.jsx("button",{onClick:M,disabled:p,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:p?r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Buscando..."]}):"🔍 Buscar"})}),r.jsx("div",{className:"flex items-end",children:r.jsx("button",{onClick:W,className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"🗑️ Limpiar Filtros"})})]}),(c||u!=="todos")&&r.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"text-sm text-blue-800",children:[r.jsx("span",{className:"font-medium",children:"Resultados de búsqueda:"}),c&&r.jsxs("span",{className:"ml-2",children:['"',c,'"',u!=="todos"&&` + ${u}`]}),!c&&u!=="todos"&&r.jsxs("span",{className:"ml-2",children:["Estado: ",u]})]}),r.jsxs("div",{className:"text-sm text-blue-600",children:[s.length," de ",e.length," clientes encontrados"]})]})})]}),r.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:_,children:["Cliente",r.jsx("span",{className:"ml-1",children:S==="asc"?"▲":"▼"})]}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contacto"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expedientes"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Citas"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:L.map(F=>{var Q,X;return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:F.user.name}),r.jsxs("div",{className:"text-sm text-gray-500",children:["DNI: ",F.dni]}),F.address&&r.jsx("div",{className:"text-sm text-gray-500",children:F.address})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-900",children:F.user.email}),F.phone&&r.jsx("div",{className:"text-sm text-gray-500",children:F.phone})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${V(F)}`,children:A(F)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((Q=F._count)==null?void 0:Q.expedientes)||0}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((X=F._count)==null?void 0:X.appointments)||0}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:r.jsxs("div",{className:"flex flex-col space-y-1",children:[r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>T(F),className:"text-blue-600 hover:text-blue-900 text-xs",children:"Ver Detalles"}),r.jsx(Ne,{to:`/lawyer/cases/new?clientId=${F.id}`,className:"text-green-600 hover:text-green-900 text-xs",children:"Nuevo Expediente"})]}),r.jsxs("div",{className:"flex space-x-2",children:[F.user.email&&r.jsx("button",{onClick:()=>q(F),className:"text-purple-600 hover:text-purple-900 text-xs",title:"Enviar email",children:"📧 Email"}),F.phone&&r.jsx("button",{onClick:()=>Y(F),className:"text-orange-600 hover:text-orange-900 text-xs",title:"Llamar",children:"📞 Llamar"}),r.jsx(Ne,{to:`/lawyer/appointments?clientId=${F.id}`,className:"text-indigo-600 hover:text-indigo-900 text-xs",children:"📅 Cita"})]})]})})]},F.id)})})]})})}),s.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No se encontraron clientes"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Intenta ajustar los filtros o agregar nuevos clientes."})]})]}),w&&j&&r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:r.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:r.jsxs("div",{className:"mt-3",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Detalles del Cliente"}),r.jsx("button",{onClick:B,className:"text-gray-400 hover:text-gray-600",title:"Cerrar",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nombre"}),r.jsx("p",{className:"text-sm text-gray-900",children:j.user.name})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),r.jsx("p",{className:"text-sm text-gray-900",children:j.user.email})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"DNI"}),r.jsx("p",{className:"text-sm text-gray-900",children:j.dni})]}),j.phone&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Teléfono"}),r.jsx("p",{className:"text-sm text-gray-900",children:j.phone})]}),j.address&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Dirección"}),r.jsx("p",{className:"text-sm text-gray-900",children:j.address})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Estado"}),r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${V(j)}`,children:A(j)})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Expedientes"}),r.jsx("p",{className:"text-sm text-gray-900",children:((O=j._count)==null?void 0:O.expedientes)||0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Citas"}),r.jsx("p",{className:"text-sm text-gray-900",children:((P=j._count)==null?void 0:P.appointments)||0})]})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[r.jsx("button",{onClick:B,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Cerrar"}),j.user.email&&r.jsx("button",{onClick:()=>q(j),className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2",children:"Enviar Email"}),j.phone&&r.jsx("button",{onClick:()=>Y(j),className:"px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2",children:"Llamar"}),r.jsx(Ne,{to:`/lawyer/cases/new?clientId=${j.id}`,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Nuevo Expediente"})]})]})})})]})},rq=()=>{var Pe;const[e,t]=f.useState([]),[s,n]=f.useState([]),[a,i]=f.useState(!0),[o,l]=f.useState(null),[c,d]=f.useState(""),[u,m]=f.useState("todos"),[h,g]=f.useState("todos"),[j,y]=f.useState(null),[w,x]=f.useState(null),[p,v]=f.useState(!1),[N,b]=f.useState(!1),[C,S]=f.useState(!1),[k,D]=f.useState(null),[L,T]=f.useState([]),[B,V]=f.useState([]),{user:A}=Ce(),[I,q]=f.useState({title:"",description:"",dueDate:"",priority:"MEDIA",expedienteId:"",clientId:"",assignedTo:""});f.useEffect(()=>{(async()=>{var pe,be;try{i(!0);const[we,ke,Ue,ct]=await Promise.all([K.get("/tasks"),K.get("/tasks/stats"),K.get("/cases"),K.get("/users/clients")]);console.log("TasksPage - Expedientes response:",Ue.data),console.log("TasksPage - Clients response:",ct.data),t(we.data),l(ke.data),Array.isArray(Ue.data)?T(Ue.data):(console.error("Expedientes response is not an array:",Ue.data),T([])),Array.isArray(ct.data)?V(ct.data):(console.error("Clients response is not an array:",ct.data),V([])),y(null)}catch(we){console.error("Error fetching data:",we),console.error("Error response:",(pe=we.response)==null?void 0:pe.data),console.error("Error status:",(be=we.response)==null?void 0:be.status),y("Error al cargar los datos"),T([]),V([])}finally{i(!1)}})()},[]),f.useEffect(()=>{let ee=e;c&&(ee=ee.filter(pe=>{var be,we,ke;return pe.title.toLowerCase().includes(c.toLowerCase())||((be=pe.description)==null?void 0:be.toLowerCase().includes(c.toLowerCase()))||((we=pe.expediente)==null?void 0:we.title.toLowerCase().includes(c.toLowerCase()))||((ke=pe.client)==null?void 0:ke.user.name.toLowerCase().includes(c.toLowerCase()))})),u!=="todos"&&(ee=ee.filter(pe=>pe.status===u)),h!=="todos"&&(ee=ee.filter(pe=>pe.priority===h)),n(ee)},[e,c,u,h]),f.useEffect(()=>()=>{k&&clearTimeout(k)},[k]);const Y=ee=>{x(ee),v(!0)},M=()=>{x(null),v(!1)},W=()=>{b(!0),y(null)},E=()=>{b(!1),q({title:"",description:"",dueDate:"",priority:"MEDIA",expedienteId:"",clientId:"",assignedTo:""}),y(null)},R=async()=>{var ee,pe;if(!I.title.trim()){y("El título es obligatorio");return}try{const be=localStorage.getItem("token"),we={title:I.title,description:I.description||void 0,dueDate:I.dueDate||void 0,priority:I.priority,expedienteId:I.expedienteId||void 0,clientId:I.clientId||void 0,assignedTo:I.assignedTo||void 0},ke=await K.post("/tasks",we);t(Ue=>[ke.data,...Ue]),E()}catch(be){console.error("Error creating task:",be),y(((pe=(ee=be.response)==null?void 0:ee.data)==null?void 0:pe.message)||"Error al crear la tarea")}},$=async(ee,pe)=>{try{await K.patch(`/tasks/${ee}/status`,{status:pe}),t(be=>be.map(we=>we.id===ee?{...we,status:pe}:we))}catch(be){console.error("Error updating task status:",be),y("Error al actualizar el estado de la tarea")}},_=async ee=>{if(confirm("¿Estás seguro de que quieres eliminar esta tarea?"))try{await K.delete(`/tasks/${ee}`),t(pe=>pe.filter(be=>be.id!==ee))}catch(pe){console.error("Error deleting task:",pe),y("Error al eliminar la tarea")}},O=ee=>{switch(ee){case"URGENTE":return"bg-red-100 text-red-800";case"ALTA":return"bg-orange-100 text-orange-800";case"MEDIA":return"bg-yellow-100 text-yellow-800";case"BAJA":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},P=ee=>{switch(ee){case"PENDIENTE":return"bg-yellow-100 text-yellow-800";case"EN_PROGRESO":return"bg-blue-100 text-blue-800";case"COMPLETADA":return"bg-green-100 text-green-800";case"CANCELADA":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},F=ee=>{switch(ee){case"URGENTE":return"Urgente";case"ALTA":return"Alta";case"MEDIA":return"Media";case"BAJA":return"Baja";default:return ee}},Q=ee=>{switch(ee){case"PENDIENTE":return"Pendiente";case"EN_PROGRESO":return"En Progreso";case"COMPLETADA":return"Completada";case"CANCELADA":return"Cancelada";default:return ee}},X=ee=>new Date(ee)<new Date,re=()=>{S(!0),setTimeout(()=>{S(!1)},500)},G=()=>{d(""),m("todos"),g("todos"),S(!1)},le=ee=>{ee.key==="Enter"&&re()},ie=ee=>{m(ee.target.value),S(!0),setTimeout(()=>{S(!1)},300)},xe=ee=>{g(ee.target.value),S(!0),setTimeout(()=>{S(!1)},300)},je=ee=>{const pe=ee.target.value;if(d(pe),k&&clearTimeout(k),pe.trim()){S(!0);const be=setTimeout(()=>{S(!1)},500);D(be)}else S(!1)};return a?r.jsxs("div",{className:"flex items-center justify-center min-h-screen",role:"status","aria-live":"polite",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500","aria-hidden":"true"}),r.jsx("span",{className:"sr-only",children:"Cargando tareas..."})]}):j?r.jsx("div",{className:"flex items-center justify-center min-h-screen",role:"alert","aria-live":"assertive",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-red-600 text-xl mb-4",children:"Error"}),r.jsx("div",{className:"text-gray-600",children:j}),r.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700","aria-label":"Reintentar cargar la página",children:"Reintentar"})]})}):r.jsxs("div",{className:"py-6",role:"main",children:[r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Tareas Pendientes"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Gestiona y da seguimiento a todas tus tareas y recordatorios"})]}),r.jsx("button",{onClick:W,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2","aria-label":"Crear nueva tarea",children:"Nueva Tarea"})]})}),o&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-6 mb-6",role:"region","aria-labelledby":"stats-heading",children:[r.jsx("h2",{id:"stats-heading",className:"text-2xl font-bold text-gray-900 mb-6 col-span-full",children:"Estadísticas de Tareas"}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-md flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Tareas"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:typeof o.total=="number"&&!isNaN(o.total)?o.total:0})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-yellow-600 rounded-md flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Pendientes"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:typeof o.pendientes=="number"&&!isNaN(o.pendientes)?o.pendientes:0})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-md flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"En Progreso"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:typeof o.enProgreso=="number"&&!isNaN(o.enProgreso)?o.enProgreso:0})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-green-600 rounded-md flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Completadas"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:typeof o.completadas=="number"&&!isNaN(o.completadas)?o.completadas:0})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-gray-600 rounded-md flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L18.364 5.636M5.636 18.364l12.728-12.728"})})})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Canceladas"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:typeof o.canceladas=="number"&&!isNaN(o.canceladas)?o.canceladas:0})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-red-600 rounded-md flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Vencidas"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:typeof o.vencidas=="number"&&!isNaN(o.vencidas)?o.vencidas:0})]})]})})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-6",role:"region","aria-labelledby":"filters-heading",children:[r.jsx("h2",{id:"filters-heading",className:"text-xl font-semibold text-gray-900 mb-4",children:"Filtros de Búsqueda"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"search-input",className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar"}),r.jsx("input",{id:"search-input",type:"text",placeholder:"Buscar por título, descripción o expediente...",value:c,onChange:je,onKeyDown:le,className:`w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${C&&c?"bg-blue-50 border-blue-300":""}`,"aria-label":"Buscar tareas por título, descripción o expediente"}),C&&c&&r.jsxs("div",{id:"search-status",className:"mt-1 text-xs text-blue-600 flex items-center",role:"status","aria-live":"polite",children:[r.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-blue-600 mr-1","aria-hidden":"true"}),"Buscando..."]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"status-filter",className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado"}),r.jsxs("select",{id:"status-filter",value:u,onChange:ie,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Filtrar por estado",children:[r.jsx("option",{value:"todos",children:"Todos los estados"}),r.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),r.jsx("option",{value:"EN_PROGRESO",children:"En Progreso"}),r.jsx("option",{value:"COMPLETADA",children:"Completada"}),r.jsx("option",{value:"CANCELADA",children:"Cancelada"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"priority-filter",className:"block text-sm font-medium text-gray-700 mb-2",children:"Prioridad"}),r.jsxs("select",{id:"priority-filter",value:h,onChange:xe,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Filtrar por prioridad",children:[r.jsx("option",{value:"todos",children:"Todas las prioridades"}),r.jsx("option",{value:"URGENTE",children:"Urgente"}),r.jsx("option",{value:"ALTA",children:"Alta"}),r.jsx("option",{value:"MEDIA",children:"Media"}),r.jsx("option",{value:"BAJA",children:"Baja"})]})]}),r.jsx("div",{className:"flex items-end",children:r.jsx("button",{onClick:re,disabled:C,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":C?"Buscando tareas...":"Buscar tareas","aria-describedby":C&&c?"search-status":void 0,children:C?r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2","aria-hidden":"true"}),"Buscando..."]}):"🔍 Buscar"})}),r.jsx("div",{className:"flex items-end",children:r.jsx("button",{onClick:G,className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2","aria-label":"Limpiar filtros de búsqueda",children:"🗑️ Limpiar"})})]}),(c||u!=="todos"||h!=="todos")&&r.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"text-sm text-blue-800",children:[r.jsx("span",{className:"font-medium",children:"Resultados de búsqueda:"}),c&&r.jsxs("span",{className:"ml-2",children:['"',c,'"']}),u!=="todos"&&r.jsxs("span",{className:"ml-2",children:["+ Estado: ",u]}),h!=="todos"&&r.jsxs("span",{className:"ml-2",children:["+ Prioridad: ",h]})]}),r.jsxs("div",{className:"text-sm text-blue-600",children:[s.length," de ",e.length," tareas encontradas"]})]})})]}),r.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",role:"region","aria-labelledby":"tasks-heading",children:[r.jsx("h2",{id:"tasks-heading",className:"text-xl font-semibold text-gray-900 p-6 border-b border-gray-200",children:"Lista de Tareas"}),s.length>0&&r.jsxs("p",{className:"sr-only",id:"tasks-summary",children:["Mostrando ",s.length," de ",e.length," tareas. Cada fila contiene: título de la tarea, prioridad, estado, fecha límite, persona asignada y acciones disponibles."]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",role:"table","aria-labelledby":"tasks-heading","aria-describedby":"tasks-summary",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{role:"row",children:[r.jsx("th",{role:"columnheader",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tarea"}),r.jsx("th",{role:"columnheader",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Prioridad"}),r.jsx("th",{role:"columnheader",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),r.jsx("th",{role:"columnheader",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha Límite"}),r.jsx("th",{role:"columnheader",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Asignado"}),r.jsx("th",{role:"columnheader",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(Array.isArray(s)?s:[]).map(ee=>{var pe;return r.jsxs("tr",{role:"row",className:`hover:bg-gray-50 ${ee.dueDate&&X(ee.dueDate)&&ee.status!=="COMPLETADA"?"bg-red-50":""}`,children:[r.jsx("td",{role:"cell",className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:ee.title}),r.jsx("div",{className:"text-sm text-gray-500",children:ee.description||"Sin descripción"}),ee.expediente&&r.jsxs("div",{className:"text-xs text-blue-600",children:["📋 ",ee.expediente.title]}),ee.client&&r.jsxs("div",{className:"text-xs text-green-600",children:["👤 ",ee.client.user.name]})]})}),r.jsx("td",{role:"cell",className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${O(ee.priority)}`,children:F(ee.priority)})}),r.jsx("td",{role:"cell",className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("select",{value:ee.status,onChange:be=>$(ee.id,be.target.value),className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full border ${P(ee.status)}`,"aria-label":`Cambiar estado de tarea: ${ee.title}`,children:[r.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),r.jsx("option",{value:"EN_PROGRESO",children:"En Progreso"}),r.jsx("option",{value:"COMPLETADA",children:"Completada"}),r.jsx("option",{value:"CANCELADA",children:"Cancelada"})]})}),r.jsx("td",{role:"cell",className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:ee.dueDate?r.jsxs("div",{children:[r.jsx("div",{className:ee.dueDate&&X(ee.dueDate)&&ee.status!=="COMPLETADA"?"text-red-600 font-medium":"",children:new Date(ee.dueDate).toLocaleDateString()}),ee.dueDate&&X(ee.dueDate)&&ee.status!=="COMPLETADA"&&r.jsx("div",{className:"text-xs text-red-500",children:"⚠️ Vencida"})]}):"Sin fecha límite"}),r.jsx("td",{role:"cell",className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((pe=ee.assignedToUser)==null?void 0:pe.name)||"Sin asignar"}),r.jsx("td",{role:"cell",className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>Y(ee),className:"text-blue-600 hover:text-blue-900","aria-label":`Ver detalles de tarea: ${ee.title}`,children:"Ver"}),r.jsx("button",{onClick:()=>_(ee.id),className:"text-red-600 hover:text-red-900","aria-label":`Eliminar tarea: ${ee.title}`,children:"Eliminar"})]})})]},ee.id)})})]})})]}),s.length===0&&r.jsxs("div",{className:"text-center py-12",id:"tasks-summary",children:[r.jsx("p",{className:"sr-only",children:"No se encontraron tareas que coincidan con los filtros aplicados"}),r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No se encontraron tareas"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Intenta ajustar los filtros o crear una nueva tarea."})]})]}),p&&w&&r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:r.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:r.jsxs("div",{className:"mt-3",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Detalles de la Tarea"}),r.jsx("button",{onClick:M,className:"text-gray-400 hover:text-gray-600","aria-label":"Cerrar modal de detalles de tarea",title:"Cerrar modal",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Título"}),r.jsx("p",{className:"text-sm text-gray-900",children:w.title})]}),w.description&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Descripción"}),r.jsx("p",{className:"text-sm text-gray-900",children:w.description})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Prioridad"}),r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${O(w.priority)}`,children:F(w.priority)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Estado"}),r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${P(w.status)}`,children:Q(w.status)})]}),w.dueDate&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Fecha Límite"}),r.jsxs("p",{className:`text-sm ${X(w.dueDate)&&w.status!=="COMPLETADA"?"text-red-600 font-medium":"text-gray-900"}`,children:[new Date(w.dueDate).toLocaleDateString(),X(w.dueDate)&&w.status!=="COMPLETADA"&&r.jsx("span",{className:"ml-2 text-red-500",children:"⚠️ Vencida"})]})]}),w.expediente&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Expediente"}),r.jsx("p",{className:"text-sm text-blue-600",children:w.expediente.title}),r.jsxs("p",{className:"text-xs text-gray-500",children:["Cliente: ",w.expediente.client.user.name]})]}),w.client&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Cliente"}),r.jsx("p",{className:"text-sm text-gray-900",children:w.client.user.name}),r.jsx("p",{className:"text-xs text-gray-500",children:w.client.user.email})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Asignado a"}),r.jsx("p",{className:"text-sm text-gray-900",children:((Pe=w.assignedToUser)==null?void 0:Pe.name)||"Sin asignar"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Creado por"}),r.jsx("p",{className:"text-sm text-gray-900",children:w.createdByUser.name})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Fecha de creación"}),r.jsx("p",{className:"text-sm text-gray-900",children:new Date(w.createdAt).toLocaleDateString()})]})]}),r.jsx("div",{className:"flex justify-end mt-6",children:r.jsx("button",{onClick:M,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700","aria-label":"Cerrar modal de detalles de tarea",children:"Cerrar"})})]})})}),N&&r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:r.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:r.jsxs("div",{className:"mt-3",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Nueva Tarea"}),r.jsx("button",{onClick:E,className:"text-gray-400 hover:text-gray-600","aria-label":"Cerrar modal de nueva tarea",title:"Cerrar modal",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),j&&r.jsx("div",{className:"mb-4 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md p-2",children:j}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"task-title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Título *"}),r.jsx("input",{id:"task-title",type:"text",value:I.title,onChange:ee=>q(pe=>({...pe,title:ee.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Título de la tarea","aria-label":"Título de la tarea"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"task-description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripción"}),r.jsx("textarea",{id:"task-description",value:I.description,onChange:ee=>q(pe=>({...pe,description:ee.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Descripción de la tarea","aria-label":"Descripción de la tarea"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"task-due-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha Límite"}),r.jsx("input",{id:"task-due-date",type:"datetime-local",value:I.dueDate,onChange:ee=>q(pe=>({...pe,dueDate:ee.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Fecha límite de la tarea"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"task-priority",className:"block text-sm font-medium text-gray-700 mb-2",children:"Prioridad"}),r.jsxs("select",{id:"task-priority",value:I.priority,onChange:ee=>q(pe=>({...pe,priority:ee.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Prioridad de la tarea",children:[r.jsx("option",{value:"BAJA",children:"Baja"}),r.jsx("option",{value:"MEDIA",children:"Media"}),r.jsx("option",{value:"ALTA",children:"Alta"}),r.jsx("option",{value:"URGENTE",children:"Urgente"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"task-expediente",className:"block text-sm font-medium text-gray-700 mb-2",children:"Expediente (opcional)"}),r.jsxs("select",{id:"task-expediente",value:I.expedienteId,onChange:ee=>q(pe=>({...pe,expedienteId:ee.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Seleccionar expediente",children:[r.jsx("option",{value:"",children:"Seleccionar expediente"}),Array.isArray(L)&&L.map(ee=>r.jsxs("option",{value:ee.id,children:[ee.title," - ",ee.client.user.name]},ee.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"task-client",className:"block text-sm font-medium text-gray-700 mb-2",children:"Cliente (opcional)"}),r.jsxs("select",{id:"task-client",value:I.clientId,onChange:ee=>q(pe=>({...pe,clientId:ee.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Seleccionar cliente",children:[r.jsx("option",{value:"",children:"Seleccionar cliente"}),Array.isArray(B)&&B.map(ee=>r.jsxs("option",{value:ee.id,children:[ee.user.name," - ",ee.user.email]},ee.id))]})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[r.jsx("button",{onClick:E,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2","aria-label":"Cancelar creación de tarea",children:"Cancelar"}),r.jsx("button",{onClick:R,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2","aria-label":"Crear nueva tarea",children:"Crear Tarea"})]})]})})})]})},sq=()=>{var d,u,m,h,g,j,y,w;const[e,t]=f.useState(null),[s,n]=f.useState(!0),[a,i]=f.useState(null),{user:o}=Ce();f.useEffect(()=>{(async()=>{try{n(!0);const p=localStorage.getItem("token");console.log("Fetching lawyer reports...");const v=await K.get("/lawyer/reports");console.log("Reports data received:",v.data),t(v.data),i(null)}catch(p){console.error("Error fetching reports:",p),t({tasks:{total:0,byStatus:{PENDIENTE:0,EN_PROGRESO:0,COMPLETADA:0,CANCELADA:0},overdue:0},cases:{total:0,byStatus:{ABIERTO:0,EN_PROCESO:0,CERRADO:0}},appointments:{upcoming:0}}),i("No se pudieron cargar los datos dinámicos. Mostrando datos de ejemplo.")}finally{n(!1)}})()},[]);const l=x=>{switch(x){case"PENDIENTE":return"bg-yellow-100 text-yellow-800";case"EN_PROGRESO":return"bg-blue-100 text-blue-800";case"COMPLETADA":return"bg-green-100 text-green-800";case"CANCELADA":return"bg-gray-100 text-gray-800";case"ABIERTO":return"bg-green-100 text-green-800";case"EN_PROCESO":return"bg-blue-100 text-blue-800";case"CERRADO":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},c=x=>{switch(x){case"PENDIENTE":return"Pendiente";case"EN_PROGRESO":return"En Progreso";case"COMPLETADA":return"Completada";case"CANCELADA":return"Cancelada";case"ABIERTO":return"Abierto";case"EN_PROCESO":return"En Proceso";case"CERRADO":return"Cerrado";default:return x}};return s?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):a?r.jsx("div",{className:"py-6",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mis Reportes"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Estadísticas y reportes personales de tu actividad"})]}),r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-4 mb-6",children:r.jsxs("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Información"}),r.jsx("div",{className:"mt-2 text-sm text-yellow-700",children:r.jsx("p",{children:a})}),r.jsx("div",{className:"mt-4",children:r.jsx("button",{onClick:()=>window.location.reload(),className:"bg-yellow-50 px-2 py-1.5 rounded-md text-sm font-medium text-yellow-800 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-yellow-50 focus:ring-yellow-600",children:"Reintentar"})})]})]})})]})}):e?r.jsx("div",{className:"py-6",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mis Reportes"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Estadísticas y reportes personales de tu actividad"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6 col-span-full",children:"Resumen General"}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-md flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Tareas"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:((d=e.tasks)==null?void 0:d.total)??0})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-green-600 rounded-md flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Casos"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:((u=e.cases)==null?void 0:u.total)??0})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-red-600 rounded-md flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Tareas Vencidas"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:((m=e.tasks)==null?void 0:m.overdue)??0})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-purple-600 rounded-md flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Próximas Citas"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:((h=e.appointments)==null?void 0:h.upcoming)??0})]})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6 col-span-full",children:"Estadísticas Detalladas"}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Estado de Tareas"}),r.jsx("div",{className:"space-y-3",children:Object.entries(((g=e.tasks)==null?void 0:g.byStatus)??{}).map(([x,p])=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"flex items-center",children:r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${l(x)}`,children:c(x)})}),r.jsx("span",{className:"text-sm font-medium text-gray-900",children:p})]},x))}),r.jsx("div",{className:"mt-6",children:r.jsx("div",{className:"flex items-end space-x-2 h-32",children:Object.entries(((j=e.tasks)==null?void 0:j.byStatus)??{}).map(([x,p])=>{var b;const v=Math.max(...Object.values(((b=e.tasks)==null?void 0:b.byStatus)??{})),N=v>0?p/v*100:0;return r.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[r.jsx("div",{className:"w-full bg-blue-500 rounded-t",style:{height:`${N}%`}}),r.jsx("span",{className:"text-xs text-gray-500 mt-1",children:p})]},x)})})})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Estado de Casos"}),r.jsx("div",{className:"space-y-3",children:Object.entries(((y=e.cases)==null?void 0:y.byStatus)??{}).map(([x,p])=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"flex items-center",children:r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${l(x)}`,children:c(x)})}),r.jsx("span",{className:"text-sm font-medium text-gray-900",children:p})]},x))}),r.jsxs("div",{className:"mt-6",children:[r.jsx("div",{className:"flex justify-center",children:r.jsx("div",{className:"relative w-32 h-32",children:(()=>{var N,b;const x=Object.values(((N=e.cases)==null?void 0:N.byStatus)??{}).reduce((C,S)=>C+S,0);let p=0;const v=["#10B981","#3B82F6","#6B7280"];return Object.entries(((b=e.cases)==null?void 0:b.byStatus)??{}).map(([C,S],k)=>{if(x===0)return null;const L=S/x*100/100*360,T=r.jsx("div",{className:"absolute inset-0 rounded-full",style:{background:`conic-gradient(from ${p}deg, ${v[k]} 0deg, ${v[k]} ${L}deg, transparent ${L}deg)`}},C);return p+=L,T})})()})}),r.jsx("div",{className:"mt-4 flex justify-center space-x-4",children:Object.entries(((w=e.cases)==null?void 0:w.byStatus)??{}).map(([x,p],v)=>r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:["#10B981","#3B82F6","#6B7280"][v]}}),r.jsx("span",{className:"text-xs text-gray-600",children:c(x)})]},x))})]})]})]})]})}):r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"text-center",children:r.jsx("div",{className:"text-gray-600",children:"No hay datos disponibles"})})})},nq=()=>{var l,c,d;const[e,t]=f.useState(null),[s,n]=f.useState(!0),[a,i]=f.useState(null),{user:o}=Ce();return f.useEffect(()=>{(async()=>{var m,h;try{n(!0);const g=await K.get("/admin/dashboard");t(g.data),i(null)}catch(g){console.error("Error fetching dashboard stats:",g),i(((h=(m=g.response)==null?void 0:m.data)==null?void 0:h.message)||"Error al cargar las estadísticas")}finally{n(!1)}})()},[]),s?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):a?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-red-600 text-xl mb-4",children:"Error"}),r.jsx("div",{className:"text-gray-600",children:a}),r.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Reintentar"})]})}):r.jsx("div",{className:"py-6",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("div",{children:r.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Bienvenido, ",o==null?void 0:o.name,(o==null?void 0:o.email)&&` (${o.email})`]})}),r.jsx("div",{className:"flex items-center gap-4",children:r.jsxs("div",{className:"text-sm text-gray-500",children:["Última actualización: ",new Date().toLocaleString()]})})]})}),e&&r.jsxs(r.Fragment,{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Estadísticas Principales"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[r.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-md flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Usuarios"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.totalUsers||0})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-green-600 rounded-md flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Expedientes"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.totalCases||0})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-purple-600 rounded-md flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Citas"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.totalAppointments||0})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-orange-600 rounded-md flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Tareas"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.totalTasks||0})]})]})})]})]}),e&&r.jsxs(r.Fragment,{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Estadísticas Detalladas"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Usuarios por Rol"})}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Abogados"}),r.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.totalLawyers||0})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Clientes"}),r.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.totalClients||0})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Documentos"}),r.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.totalDocuments||0})]})]})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Tareas Vencidas"}),r.jsx("span",{className:"text-sm text-red-600 font-medium",children:((l=e.overdueTasks)==null?void 0:l.length)||0})]}),r.jsxs("div",{className:"space-y-2",children:[(c=e.overdueTasks)==null?void 0:c.slice(0,3).map(u=>{var m;return r.jsxs("div",{className:"text-sm",children:[r.jsx("div",{className:"font-medium text-gray-900",children:u.title}),r.jsxs("div",{className:"text-gray-500",children:["Asignado a: ",((m=u.assignedToUser)==null?void 0:m.name)||"Sin asignar"]})]},u.id)}),(!e.overdueTasks||e.overdueTasks.length===0)&&r.jsx("div",{className:"text-sm text-gray-500",children:"No hay tareas vencidas"})]})]}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Citas Recientes"})}),r.jsxs("div",{className:"space-y-2",children:[(d=e.recentAppointments)==null?void 0:d.slice(0,3).map(u=>{var m,h,g;return r.jsxs("div",{className:"text-sm",children:[r.jsxs("div",{className:"font-medium text-gray-900",children:[u.fullName||((h=(m=u.client)==null?void 0:m.user)==null?void 0:h.name)||"Cliente"," - ",((g=u.lawyer)==null?void 0:g.name)||"Sin asignar"]}),r.jsxs("div",{className:"text-gray-500",children:[new Date(u.date).toLocaleDateString(),u.type==="VISITOR"&&r.jsx("span",{className:"ml-2 inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-purple-100 text-purple-800",children:"Visitante"})]})]},u.id)}),(!e.recentAppointments||e.recentAppointments.length===0)&&r.jsx("div",{className:"text-sm text-gray-500",children:"No hay citas recientes"})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Navegación Rápida"})}),r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs(Ne,{to:"/admin/users",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-md flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Gestionar Usuarios"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Ver y editar usuarios"})]})]}),r.jsxs(Ne,{to:"/admin/cases",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-green-600 rounded-md flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Gestionar Expedientes"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Ver y editar casos"})]})]}),r.jsxs(Ne,{to:"/admin/appointments",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-purple-600 rounded-md flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Gestionar Citas"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Ver y editar citas"})]})]}),r.jsxs(Ne,{to:"/admin/tasks",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-orange-600 rounded-md flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Gestionar Tareas"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Ver y editar tareas"})]})]}),r.jsxs(Ne,{to:"/admin/documents",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-indigo-600 rounded-md flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Gestionar Documentos"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Ver y gestionar archivos"})]})]}),r.jsxs(Ne,{to:"/admin/invoices",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-emerald-600 rounded-md flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Gestionar Facturas"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Ver y gestionar facturas"})]})]}),r.jsxs(Ne,{to:"/admin/reports",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-red-600 rounded-md flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Reportes"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Ver estadísticas del sistema"})]})]}),r.jsxs(Ne,{to:"/admin/parametros",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-gray-700 rounded-md flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6 1a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Configurar Parámetros"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Gestionar parámetros globales"})]})]}),r.jsxs(Ne,{to:"/admin/backup",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-pink-600 rounded-md flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Backup y Restauración"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Gestionar copias de seguridad"})]})]}),r.jsxs(Ne,{to:"/admin/menu-config",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-yellow-600 rounded-md flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Configurar Menús"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Gestionar navegación del sitio"})]})]}),r.jsxs(Ne,{to:"/admin/site-config",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-teal-600 rounded-md flex items-center justify-center",children:r.jsxs("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Configurar Sitio"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Personalizar apariencia y contenido"})]})]}),r.jsxs(Ne,{to:"/admin/home-builder",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-purple-600 rounded-md flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v12a4 4 0 004 4h4a2 2 0 002-2V5z"})})})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Home Builder"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Diseñar página principal"})]})]}),r.jsxs(Ne,{to:"/admin/guided-config",className:"flex items-center p-4 border-2 border-blue-500 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-md flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("p",{className:"text-sm font-medium text-blue-900",children:"🎯 Configuración Guiada"}),r.jsx("p",{className:"text-xs text-blue-700",children:"Configurar sistema paso a paso"})]})]}),r.jsxs(Ne,{to:"/admin/teleassistance",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-green-600 rounded-md flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:"🖥️ Teleasistencia"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Asistencia remota a usuarios"})]})]})]})})]})]})})},aq=()=>{const[e,t]=f.useState([]),[s,n]=f.useState([]),[a,i]=f.useState(!0),[o,l]=f.useState(null),[c,d]=f.useState(""),[u,m]=f.useState("todos"),[h,g]=f.useState(null),[j,y]=f.useState(!1),[w,x]=f.useState({name:"",email:"",role:"CLIENTE",dni:"",phone:"",address:""}),[p,v]=f.useState("asc"),{user:N}=Ce();f.useEffect(()=>{b()},[]);const b=async()=>{var A,I,q,Y;try{i(!0);const M=localStorage.getItem("token");if(console.log("Fetching users with token:",M?"Token exists":"No token"),console.log("Current user from context:",N),!M){console.error("No token found in localStorage"),l("No hay token de autenticación");return}const W=await K.get("/admin/users");console.log("Users response:",W.data),console.log("Response type:",typeof W.data),console.log("Is array:",Array.isArray(W.data)),Array.isArray(W.data)&&(console.log("Number of users:",W.data.length),W.data.forEach((E,R)=>{console.log(`User ${R}:`,{id:E.id,name:E.name,email:E.email,role:E.role,createdAt:E.createdAt,client:E.client,expedientesAsLawyer:E.expedientesAsLawyer,appointmentsAsLawyer:E.appointmentsAsLawyer,assignedTasks:E.assignedTasks})})),t(W.data),l(null)}catch(M){console.error("Error fetching users:",M),console.error("Error response:",M.response),console.error("Error status:",(A=M.response)==null?void 0:A.status),console.error("Error data:",(I=M.response)==null?void 0:I.data),l(((Y=(q=M.response)==null?void 0:q.data)==null?void 0:Y.message)||"Error al cargar usuarios")}finally{i(!1)}};f.useEffect(()=>{let A=e;c&&(A=A.filter(I=>{var q;return I.name.toLowerCase().includes(c.toLowerCase())||I.email.toLowerCase().includes(c.toLowerCase())||((q=I.client)==null?void 0:q.dni.toLowerCase().includes(c.toLowerCase()))})),u!=="todos"&&(A=A.filter(I=>I.role===u)),n(A)},[e,c,u]);function C(A){if(!A)return"";const I=A.trim().split(" ");return I.length>1?I[1].toLowerCase():""}const S=f.useMemo(()=>[...s].sort((I,q)=>{const Y=C(I.name),M=C(q.name);return Y<M?p==="asc"?-1:1:Y>M?p==="asc"?1:-1:0}),[s,p]),k=()=>{v(A=>A==="asc"?"desc":"asc")},D=A=>{var I,q,Y;g(A),x({name:A.name,email:A.email,role:A.role,dni:((I=A.client)==null?void 0:I.dni)||"",phone:((q=A.client)==null?void 0:q.phone)||"",address:((Y=A.client)==null?void 0:Y.address)||""}),y(!0)},L=async()=>{var A,I;if(h)try{const q=localStorage.getItem("token"),Y={name:w.name,email:w.email,role:w.role,client:w.role==="CLIENTE"?{dni:w.dni,phone:w.phone,address:w.address}:void 0};await K.put(`/admin/users/${h.id}`,Y),y(!1),b()}catch(q){console.error("Error updating user:",q),l(((I=(A=q.response)==null?void 0:A.data)==null?void 0:I.message)||"Error al actualizar usuario")}},T=async A=>{var I,q;if(confirm("¿Estás seguro de que quieres eliminar este usuario?"))try{const Y=localStorage.getItem("token");await K.delete(`/admin/users/${A}`),b()}catch(Y){console.error("Error deleting user:",Y),l(((q=(I=Y.response)==null?void 0:I.data)==null?void 0:q.message)||"Error al eliminar usuario")}},B=A=>{switch(A){case"ADMIN":return"bg-red-100 text-red-800";case"ABOGADO":return"bg-blue-100 text-blue-800";case"CLIENTE":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},V=A=>{switch(A){case"ADMIN":return"Administrador";case"ABOGADO":return"Abogado";case"CLIENTE":return"Cliente";default:return A}};return a?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):o?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-red-600 text-xl mb-4",children:"Error"}),r.jsx("div",{className:"text-gray-600",children:o}),r.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Reintentar"})]})}):r.jsxs("div",{className:"py-6",children:[r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsx("div",{className:"mb-8",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gestión de Usuarios"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Administra todos los usuarios del sistema"})]})}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Filtros de Búsqueda"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar"}),r.jsx("input",{type:"text",placeholder:"Buscar por nombre, email o DNI...",value:c,onChange:A=>d(A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rol"}),r.jsxs("select",{value:u,onChange:A=>m(A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Filtrar por rol",children:[r.jsx("option",{value:"todos",children:"Todos los roles"}),r.jsx("option",{value:"ADMIN",children:"Administrador"}),r.jsx("option",{value:"ABOGADO",children:"Abogado"}),r.jsx("option",{value:"CLIENTE",children:"Cliente"})]})]}),r.jsx("div",{className:"flex items-end",children:r.jsx("button",{onClick:()=>{d(""),m("todos")},className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Limpiar Filtros"})})]})]}),r.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Lista de Usuarios"})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:k,children:["Usuario",r.jsx("span",{className:"ml-1",children:p==="asc"?"▲":"▼"})]}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rol"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Información Adicional"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actividad"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.map(A=>{var I,q,Y;return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:A.name}),r.jsx("div",{className:"text-sm text-gray-500",children:A.email}),r.jsxs("div",{className:"text-xs text-gray-400",children:["Registrado: ",A.createdAt?new Date(A.createdAt).toLocaleDateString():"Fecha no disponible"]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${B(A.role)}`,children:V(A.role)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:A.client&&r.jsxs("div",{children:[r.jsxs("div",{children:["DNI: ",A.client.dni]}),A.client.phone&&r.jsxs("div",{children:["Tel: ",A.client.phone]},A.client.dni+"-phone"),A.client.address&&r.jsxs("div",{children:["Dir: ",A.client.address]},A.client.dni+"-address")]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:r.jsxs("div",{children:[r.jsxs("div",{children:["Casos: ",((I=A.expedientesAsLawyer)==null?void 0:I.length)||0]}),r.jsxs("div",{children:["Citas: ",((q=A.appointmentsAsLawyer)==null?void 0:q.length)||0]}),r.jsxs("div",{children:["Tareas: ",((Y=A.assignedTasks)==null?void 0:Y.length)||0]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>D(A),className:"text-blue-600 hover:text-blue-900",children:"Editar"},A.id+"-edit"),A.id!==(N==null?void 0:N.id)&&r.jsx("button",{onClick:()=>T(A.id),className:"text-red-600 hover:text-red-900",children:"Eliminar"},A.id+"-delete")]})})]},A.id)})})]})})]}),(!S||S.length===0)&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No se encontraron usuarios"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Intenta ajustar los filtros de búsqueda."})]})]}),j&&h&&r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:r.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:r.jsxs("div",{className:"mt-3",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Editar Usuario"}),r.jsx("button",{onClick:()=>y(!1),className:"text-gray-400 hover:text-gray-600","aria-label":"Cerrar modal de edición",title:"Cerrar modal de edición",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),o&&r.jsx("div",{className:"mb-4 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md p-2",children:o}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre"}),r.jsx("input",{type:"text",value:w.name,onChange:A=>x(I=>({...I,name:A.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ingrese el nombre","aria-label":"Nombre del usuario",title:"Nombre del usuario"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),r.jsx("input",{type:"email",value:w.email,onChange:A=>x(I=>({...I,email:A.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ingrese el email","aria-label":"Email del usuario",title:"Email del usuario"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rol"}),r.jsxs("select",{value:w.role,onChange:A=>x(I=>({...I,role:A.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Rol del usuario",title:"Rol del usuario",children:[r.jsx("option",{value:"CLIENTE",children:"Cliente"}),r.jsx("option",{value:"ABOGADO",children:"Abogado"}),r.jsx("option",{value:"ADMIN",children:"Administrador"})]})]}),w.role==="CLIENTE"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"DNI"}),r.jsx("input",{type:"text",value:w.dni,onChange:A=>x(I=>({...I,dni:A.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ingrese el DNI","aria-label":"DNI del cliente",title:"DNI del cliente"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Teléfono"}),r.jsx("input",{type:"text",value:w.phone,onChange:A=>x(I=>({...I,phone:A.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ingrese el teléfono","aria-label":"Teléfono del cliente",title:"Teléfono del cliente"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dirección"}),r.jsx("input",{type:"text",value:w.address,onChange:A=>x(I=>({...I,address:A.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ingrese la dirección","aria-label":"Dirección del cliente",title:"Dirección del cliente"})]})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[r.jsx("button",{onClick:()=>y(!1),className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Cancelar"}),r.jsx("button",{onClick:L,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Actualizar"})]})]})})})]})},iq=()=>{const{user:e}=Ce(),t=i=>e?i.includes(e.role):!1,s=(e==null?void 0:e.role)==="ADMIN",n=(e==null?void 0:e.role)==="ABOGADO",a=(e==null?void 0:e.role)==="CLIENTE";return{hasPermission:t,isAdmin:s,isLawyer:n,isClient:a,userRole:(e==null?void 0:e.role)||null}},oq=()=>{const[e,t]=f.useState([]),[s,n]=f.useState([]),[a,i]=f.useState(!0),[o,l]=f.useState(null),[c,d]=f.useState(""),[u,m]=f.useState("todos"),[h,g]=f.useState("asc"),{isAdmin:j,userRole:y}=iq();f.useEffect(()=>{w()},[]);const w=async()=>{var C,S;try{i(!0);const k=await K.get("/admin/cases");t(k.data),l(null)}catch(k){console.error("Error fetching cases:",k),l(((S=(C=k.response)==null?void 0:C.data)==null?void 0:S.message)||"Error al cargar expedientes")}finally{i(!1)}};f.useEffect(()=>{let C=e;c&&(C=C.filter(S=>{var k;return S.title.toLowerCase().includes(c.toLowerCase())||((k=S.description)==null?void 0:k.toLowerCase().includes(c.toLowerCase()))||S.client.user.name.toLowerCase().includes(c.toLowerCase())||S.lawyer.name.toLowerCase().includes(c.toLowerCase())})),u!=="todos"&&(C=C.filter(S=>S.status===u)),n(C)},[e,c,u]);const x=f.useMemo(()=>[...s].sort((S,k)=>S.id<k.id?h==="asc"?-1:1:S.id>k.id?h==="asc"?1:-1:0),[s,h]),p=()=>{g(C=>C==="asc"?"desc":"asc")},v=async C=>{var S,k;if(confirm("¿Estás seguro de que quieres eliminar este expediente?"))try{await K.delete(`/admin/cases/${C}`),w()}catch(D){console.error("Error deleting case:",D),l(((k=(S=D.response)==null?void 0:S.data)==null?void 0:k.message)||"Error al eliminar expediente")}},N=C=>{switch(C){case"ABIERTO":return"bg-green-100 text-green-800";case"EN_PROCESO":return"bg-yellow-100 text-yellow-800";case"CERRADO":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},b=C=>{switch(C){case"ABIERTO":return"Abierto";case"EN_PROCESO":return"En Proceso";case"CERRADO":return"Cerrado";default:return C}};return j?a?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):o?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-red-600 text-xl mb-4",children:"Error"}),r.jsx("div",{className:"text-gray-600",children:o}),r.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Reintentar"})]})}):r.jsx("div",{className:"py-6",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsx("div",{className:"mb-8",children:r.jsx("div",{className:"flex justify-between items-center",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gestión de Expedientes"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Administra todos los expedientes del sistema"})]})})}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Filtros de Búsqueda"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar"}),r.jsx("input",{type:"text",placeholder:"Buscar por título, descripción, cliente o abogado...",value:c,onChange:C=>d(C.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado"}),r.jsxs("select",{value:u,onChange:C=>m(C.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Filtrar por estado",children:[r.jsx("option",{value:"todos",children:"Todos los estados"}),r.jsx("option",{value:"ABIERTO",children:"Abierto"}),r.jsx("option",{value:"EN_PROCESO",children:"En Proceso"}),r.jsx("option",{value:"CERRADO",children:"Cerrado"})]})]}),r.jsx("div",{className:"flex items-end",children:r.jsx("button",{onClick:()=>{d(""),m("todos")},className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Limpiar Filtros"})})]})]}),r.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Lista de Expedientes"})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:p,children:["Expediente",r.jsx("span",{className:"ml-1",children:h==="asc"?"▲":"▼"})]}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Abogado"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actividad"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map(C=>{var S,k,D,L,T,B,V,A,I;return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:C.title||"Sin título"}),r.jsx("div",{className:"text-sm text-gray-500",children:C.description||"Sin descripción"}),r.jsxs("div",{className:"text-xs text-gray-400",children:["Creado: ",C.createdAt&&!isNaN(Date.parse(C.createdAt))?new Date(C.createdAt).toLocaleDateString():"Fecha no disponible"]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:((k=(S=C.client)==null?void 0:S.user)==null?void 0:k.name)||((L=(D=C.client)==null?void 0:D.user)==null?void 0:L.email)||"Cliente no disponible"}),r.jsx("div",{className:"text-sm text-gray-500",children:((B=(T=C.client)==null?void 0:T.user)==null?void 0:B.email)||"Email no disponible"})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:((V=C.lawyer)==null?void 0:V.name)||((A=C.lawyer)==null?void 0:A.email)||"Abogado no disponible"}),r.jsx("div",{className:"text-sm text-gray-500",children:((I=C.lawyer)==null?void 0:I.email)||"Email no disponible"})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${N(C.status)}`,children:b(C.status)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:r.jsxs("div",{children:[r.jsxs("div",{children:["Documentos: ",Array.isArray(C.documents)?C.documents.length:0]}),r.jsxs("div",{children:["Tareas: ",Array.isArray(C.tasks)?C.tasks.length:0]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:r.jsxs("div",{className:"flex space-x-2",children:[r.jsx(Ne,{to:`/admin/cases/${C.id}`,className:"text-blue-600 hover:text-blue-900",children:"Ver"},C.id+"-ver"),r.jsx("button",{onClick:()=>v(C.id),className:"text-red-600 hover:text-red-900",children:"Eliminar"},C.id+"-eliminar")]})})]},C.id||Math.random())})})]})})]}),(!s||s.length===0)&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No se encontraron expedientes"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Intenta ajustar los filtros de búsqueda."})]})]})}):(console.warn(`Access denied: User role ${y} does not have admin permissions`),r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-red-600 text-xl mb-4",children:"Acceso Denegado"}),r.jsx("div",{className:"text-gray-600",children:"No tienes permisos para acceder a esta página."})]})}))},lq=()=>{var X,re;const[e,t]=f.useState([]),[s,n]=f.useState([]),[a,i]=f.useState([]),[o,l]=f.useState(!0),[c,d]=f.useState(null),[u,m]=f.useState(""),[h,g]=f.useState(""),[j,y]=f.useState("date"),[w,x]=f.useState("desc"),[p,v]=f.useState(1),[N]=f.useState(10),[b,C]=f.useState(null),[S,k]=f.useState(!1),[D,L]=f.useState(new Date),[T,B]=f.useState({date:"",time:"",location:"",notes:"",lawyerId:""});f.useEffect(()=>{V(),A();const G=setInterval(()=>{V()},3e4);return()=>clearInterval(G)},[]);const V=async()=>{var G,le;try{l(!0);const ie=await K.get("/admin/appointments");t(ie.data),L(new Date),d(null)}catch(ie){console.error("Error fetching appointments:",ie),d(((le=(G=ie.response)==null?void 0:G.data)==null?void 0:le.message)||"Error al cargar citas")}finally{l(!1)}},A=async()=>{try{console.log("🔍 Fetching lawyers...");const G=await K.get("/admin/users");if(console.log("📊 Response from /admin/users:",G),console.log("📋 Response data type:",typeof G.data),console.log("📋 Response data:",G.data),Array.isArray(G.data)){const le=G.data.filter(ie=>ie.role==="ABOGADO");console.log("👨‍💼 Found lawyers:",le),i(le)}else console.error("Error: response.data is not an array:",G.data),i([])}catch(G){console.error("Error fetching lawyers:",G)}};f.useEffect(()=>{let G=e;if(u){const le=u.toLowerCase().split(";").filter(ie=>ie.trim().length>0);G=G.filter(ie=>le.every(xe=>{var ee,pe,be,we,ke,Ue;const je=xe.trim(),Pe={clientName:ie.fullName||((pe=(ee=ie.client)==null?void 0:ee.user)==null?void 0:pe.name)||"",clientEmail:ie.email||((we=(be=ie.client)==null?void 0:be.user)==null?void 0:we.email)||"",lawyerName:((ke=ie.lawyer)==null?void 0:ke.name)||"",lawyerEmail:((Ue=ie.lawyer)==null?void 0:Ue.email)||"",location:ie.location||"No especificada",notes:ie.notes||"",type:ie.type==="VISITOR"?"visitante":"cliente",status:I(ie.date)?"próxima":"pasada"};return Object.values(Pe).some(ct=>ct.toLowerCase().includes(je))}))}if(h){const le=new Date(h);G=G.filter(ie=>new Date(ie.date).toDateString()===le.toDateString())}n(G),v(1)},[e,u,h]);const I=G=>new Date(G)>new Date,q=G=>new Date(G)<new Date,Y=(G,le)=>{var ie,xe,je;switch(le){case"date":return new Date(G.date).getTime();case"client":return(G.fullName||((xe=(ie=G.client)==null?void 0:ie.user)==null?void 0:xe.name)||"").toLowerCase();case"lawyer":return(((je=G.lawyer)==null?void 0:je.name)||"").toLowerCase();case"location":return(G.location||"").toLowerCase();case"status":return I(G.date)?1:0;case"type":return G.type;default:return""}},M=f.useMemo(()=>[...s].sort((G,le)=>{const ie=Y(G,j),xe=Y(le,j);return typeof ie=="string"&&typeof xe=="string"?w==="asc"?ie.localeCompare(xe):xe.localeCompare(ie):w==="asc"?ie-xe:xe-ie}),[s,j,w]),W=Math.ceil(M.length/N),E=(p-1)*N,R=E+N,$=M.slice(E,R),_=G=>{j===G?x(le=>le==="asc"?"desc":"asc"):(y(G),x("asc"))},O=G=>{v(G)},P=G=>{var ie;const le=new Date(G.date);B({date:le.toISOString().split("T")[0],time:le.toTimeString().slice(0,5),location:G.location||"",notes:G.notes||"",lawyerId:((ie=G.lawyer)==null?void 0:ie.id)||""}),C(G),k(!0)},F=async()=>{var G,le;if(b)try{const ie=localStorage.getItem("token"),xe={date:`${T.date}T${T.time}:00`,location:T.location,notes:T.notes,lawyerId:T.lawyerId};await K.put(`/admin/appointments/${b.id}`,xe),k(!1),C(null),V()}catch(ie){console.error("Error updating appointment:",ie),d(((le=(G=ie.response)==null?void 0:G.data)==null?void 0:le.message)||"Error al actualizar cita")}},Q=async G=>{var le,ie;if(confirm("¿Estás seguro de que quieres eliminar esta cita?"))try{await K.delete(`/admin/appointments/${G}`),V()}catch(xe){console.error("Error deleting appointment:",xe),d(((ie=(le=xe.response)==null?void 0:le.data)==null?void 0:ie.message)||"Error al eliminar cita")}};return o?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):c?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-red-600 text-xl mb-4",children:"Error"}),r.jsx("div",{className:"text-gray-600",children:c}),r.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Reintentar"})]})}):r.jsxs("div",{className:"py-6",children:[r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gestión de Citas"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Administra todas las citas del sistema - Asigna abogados y reprograma citas"}),r.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["Última actualización: ",D.toLocaleString(),r.jsx("span",{className:"ml-2 text-blue-600",children:"(Actualización automática cada 30s)"})]})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("button",{onClick:V,disabled:o,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),r.jsx("span",{children:"Refrescar"})]}),u&&r.jsxs("button",{onClick:()=>{console.log("🔍 DEBUG: Analizando búsqueda actual"),console.log("📝 Término de búsqueda:",u),console.log("📊 Total de citas:",e.length),console.log("🎯 Citas filtradas:",s.length),console.log("---"),e.forEach(G=>{var xe,je,Pe,ee,pe,be;const le=u.toLowerCase().split(";").filter(we=>we.trim().length>0),ie={clientName:G.fullName||((je=(xe=G.client)==null?void 0:xe.user)==null?void 0:je.name)||"",clientEmail:G.email||((ee=(Pe=G.client)==null?void 0:Pe.user)==null?void 0:ee.email)||"",lawyerName:((pe=G.lawyer)==null?void 0:pe.name)||"",lawyerEmail:((be=G.lawyer)==null?void 0:be.email)||"",location:G.location||"No especificada",notes:G.notes||"",type:G.type==="VISITOR"?"visitante":"cliente",status:I(G.date)?"próxima":"pasada"};console.log(`🔍 Cita ${G.id}:`),console.log("📋 Campos:",ie),le.forEach(we=>{const ke=we.trim(),Ue=Object.entries(ie).filter(([ct,sr])=>sr.toLowerCase().includes(ke)).map(([ct,sr])=>`${ct}: "${sr}"`);Ue.length>0?console.log(`✅ "${ke}" encontrado en:`,Ue):console.log(`❌ "${ke}" NO encontrado`)}),console.log("---")})},className:"px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 flex items-center space-x-2",children:[r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("span",{children:"Debug"})]})]})]})}),r.jsx("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar"}),r.jsx("input",{type:"text",placeholder:"Buscar por cliente, abogado, ubicación, notas, tipo (cliente/visitante) o estado (próxima/pasada). Puedes combinar términos separados por punto y coma (;)...",value:u,onChange:G=>m(G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha"}),r.jsx("input",{type:"date",value:h,onChange:G=>g(G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Filtrar por fecha"})]}),r.jsx("div",{className:"flex items-end",children:r.jsx("button",{onClick:()=>{m(""),g("")},className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Limpiar Filtros"})})]})}),r.jsx("div",{className:"bg-white p-4 rounded-lg shadow mb-4",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{className:"text-sm text-gray-600",children:[r.jsx("span",{className:"font-medium",children:M.length})," citas encontradas",u&&r.jsxs("span",{className:"ml-2",children:['para "',r.jsx("span",{className:"font-medium",children:u}),'"']}),h&&r.jsxs("span",{className:"ml-2",children:["en ",r.jsx("span",{className:"font-medium",children:new Date(h).toLocaleDateString()})]})]}),r.jsxs("div",{className:"text-sm text-gray-500",children:["Mostrando ",E+1,"-",Math.min(R,M.length)," de ",M.length," citas"]})]})}),r.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:()=>_("date"),children:["Fecha y Hora",r.jsx("span",{className:"ml-1",children:j==="date"?w==="asc"?"▲":"▼":""})]}),r.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:()=>_("client"),children:["Cliente",r.jsx("span",{className:"ml-1",children:j==="client"?w==="asc"?"▲":"▼":""})]}),r.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:()=>_("lawyer"),children:["Abogado",r.jsx("span",{className:"ml-1",children:j==="lawyer"?w==="asc"?"▲":"▼":""})]}),r.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:()=>_("location"),children:["Ubicación",r.jsx("span",{className:"ml-1",children:j==="location"?w==="asc"?"▲":"▼":""})]}),r.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:()=>_("status"),children:["Estado",r.jsx("span",{className:"ml-1",children:j==="status"?w==="asc"?"▲":"▼":""})]}),r.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:()=>_("type"),children:["Tipo",r.jsx("span",{className:"ml-1",children:j==="type"?w==="asc"?"▲":"▼":""})]}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:$.map(G=>{var le,ie,xe,je,Pe,ee;return r.jsxs("tr",{className:`hover:bg-gray-50 ${q(G.date)?"bg-gray-50":""}`,children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:new Date(G.date).toLocaleDateString()}),r.jsx("div",{className:"text-sm text-gray-500",children:new Date(G.date).toLocaleTimeString()})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:G.fullName||((ie=(le=G.client)==null?void 0:le.user)==null?void 0:ie.name)||"—"}),r.jsx("div",{className:"text-sm text-gray-500",children:G.email||((je=(xe=G.client)==null?void 0:xe.user)==null?void 0:je.email)||"—"})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:((Pe=G.lawyer)==null?void 0:Pe.name)||"—"}),r.jsx("div",{className:"text-sm text-gray-500",children:((ee=G.lawyer)==null?void 0:ee.email)||"—"})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:G.location||"No especificada"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:I(G.date)?r.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:"Próxima"}):r.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800",children:"Pasada"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:G.type==="VISITOR"?r.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-purple-100 text-purple-800",children:"Visitante (Chatbot)"}):r.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:"Cliente"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>P(G),className:"text-blue-600 hover:text-blue-900",children:"Editar"}),r.jsx("button",{onClick:()=>Q(G.id),className:"text-red-600 hover:text-red-900",children:"Eliminar"})]})})]},G.id)})})]})})}),W>1&&r.jsxs("div",{className:"flex justify-center items-center space-x-2 mt-6",children:[r.jsx("button",{onClick:()=>O(p-1),disabled:p===1,className:"px-3 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),r.jsxs("span",{className:"text-sm text-gray-700",children:["Página ",p," de ",W]}),r.jsx("button",{onClick:()=>O(p+1),disabled:p===W,className:"px-3 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"Siguiente"})]}),s.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No se encontraron citas"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Intenta ajustar los filtros de búsqueda."})]})]}),S&&b&&r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:r.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:r.jsxs("div",{className:"mt-3",children:[r.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Editar Cita - ",((re=(X=b.client)==null?void 0:X.user)==null?void 0:re.name)||"Desconocido"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha"}),r.jsx("input",{type:"date",value:T.date,onChange:G=>B({...T,date:G.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hora"}),r.jsx("input",{type:"time",value:T.time,onChange:G=>B({...T,time:G.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Abogado"}),r.jsx("select",{value:T.lawyerId,onChange:G=>B({...T,lawyerId:G.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:a.map(G=>r.jsxs("option",{value:G.id,children:[G.name," (",G.email,")"]},G.id))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ubicación"}),r.jsx("input",{type:"text",value:T.location,onChange:G=>B({...T,location:G.target.value}),placeholder:"Ubicación de la cita",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas"}),r.jsx("textarea",{value:T.notes,onChange:G=>B({...T,notes:G.target.value}),placeholder:"Notas adicionales",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[r.jsx("button",{onClick:()=>{k(!1),C(null)},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Cancelar"}),r.jsx("button",{onClick:F,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Guardar Cambios"})]})]})})})]})},cq=()=>{const[e,t]=f.useState([]),[s,n]=f.useState([]),[a,i]=f.useState(!0),[o,l]=f.useState(null),[c,d]=f.useState(""),[u,m]=f.useState("todos"),[h,g]=f.useState("todos"),[j,y]=f.useState("asc");f.useEffect(()=>{w()},[]);const w=async()=>{var D,L;try{i(!0);const T=await K.get("/admin/tasks");t(T.data),l(null)}catch(T){console.error("Error fetching tasks:",T),l(((L=(D=T.response)==null?void 0:D.data)==null?void 0:L.message)||"Error al cargar tareas")}finally{i(!1)}};f.useEffect(()=>{let D=e;c&&(D=D.filter(L=>{var T,B,V,A;return L.title.toLowerCase().includes(c.toLowerCase())||((T=L.description)==null?void 0:T.toLowerCase().includes(c.toLowerCase()))||((B=L.expediente)==null?void 0:B.title.toLowerCase().includes(c.toLowerCase()))||((V=L.client)==null?void 0:V.user.name.toLowerCase().includes(c.toLowerCase()))||((A=L.assignedToUser)==null?void 0:A.name.toLowerCase().includes(c.toLowerCase()))})),u!=="todos"&&(D=D.filter(L=>L.status===u)),h!=="todos"&&(D=D.filter(L=>L.priority===h)),n(D)},[e,c,u,h]);const x=f.useMemo(()=>[...s].sort((D,L)=>{if(!D.dueDate)return 1;if(!L.dueDate)return-1;const T=new Date(D.dueDate).getTime(),B=new Date(L.dueDate).getTime();return j==="asc"?T-B:B-T}),[s,j]),p=()=>{y(D=>D==="asc"?"desc":"asc")},v=async D=>{var L,T;if(confirm("¿Estás seguro de que quieres eliminar esta tarea?"))try{await K.delete(`/admin/tasks/${D}`),w()}catch(B){console.error("Error deleting task:",B),l(((T=(L=B.response)==null?void 0:L.data)==null?void 0:T.message)||"Error al eliminar tarea")}},N=D=>{switch(D){case"URGENTE":return"bg-red-100 text-red-800";case"ALTA":return"bg-orange-100 text-orange-800";case"MEDIA":return"bg-yellow-100 text-yellow-800";case"BAJA":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},b=D=>{switch(D){case"PENDIENTE":return"bg-yellow-100 text-yellow-800";case"EN_PROGRESO":return"bg-blue-100 text-blue-800";case"COMPLETADA":return"bg-green-100 text-green-800";case"CANCELADA":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},C=D=>{switch(D){case"URGENTE":return"Urgente";case"ALTA":return"Alta";case"MEDIA":return"Media";case"BAJA":return"Baja";default:return D}},S=D=>{switch(D){case"PENDIENTE":return"Pendiente";case"EN_PROGRESO":return"En Progreso";case"COMPLETADA":return"Completada";case"CANCELADA":return"Cancelada";default:return D}},k=D=>new Date(D)<new Date;return a?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):o?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-red-600 text-xl mb-4",children:"Error"}),r.jsx("div",{className:"text-gray-600",children:o}),r.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Reintentar"})]})}):r.jsx("div",{className:"py-6",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsx("div",{className:"mb-8",children:r.jsx("div",{className:"flex justify-between items-center",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gestión de Tareas"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Administra todas las tareas del sistema"})]})})}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Filtros de Búsqueda"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar"}),r.jsx("input",{type:"text",placeholder:"Buscar por título, descripción, expediente, cliente o asignado...",value:c,onChange:D=>d(D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado"}),r.jsxs("select",{value:u,onChange:D=>m(D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Filtrar por estado",children:[r.jsx("option",{value:"todos",children:"Todos los estados"}),r.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),r.jsx("option",{value:"EN_PROGRESO",children:"En Progreso"}),r.jsx("option",{value:"COMPLETADA",children:"Completada"}),r.jsx("option",{value:"CANCELADA",children:"Cancelada"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prioridad"}),r.jsxs("select",{value:h,onChange:D=>g(D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Filtrar por prioridad",children:[r.jsx("option",{value:"todos",children:"Todas las prioridades"}),r.jsx("option",{value:"URGENTE",children:"Urgente"}),r.jsx("option",{value:"ALTA",children:"Alta"}),r.jsx("option",{value:"MEDIA",children:"Media"}),r.jsx("option",{value:"BAJA",children:"Baja"})]})]}),r.jsx("div",{className:"flex items-end",children:r.jsx("button",{onClick:()=>{d(""),m("todos"),g("todos")},className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Limpiar Filtros"})})]})]}),r.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Lista de Tareas"})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tarea"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Prioridad"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),r.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:p,children:["Vencimiento",r.jsx("span",{className:"ml-1",children:j==="asc"?"▲":"▼"})]}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Asignado"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map(D=>{var L;return r.jsxs("tr",{className:`hover:bg-gray-50 ${D.dueDate&&k(D.dueDate)&&D.status!=="COMPLETADA"?"bg-red-50":""}`,children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:D.title}),r.jsx("div",{className:"text-sm text-gray-500",children:D.description||"Sin descripción"}),D.expediente&&r.jsxs("div",{className:"text-xs text-blue-600",children:["📋 ",D.expediente.title]}),D.client&&r.jsxs("div",{className:"text-xs text-green-600",children:["👤 ",D.client.user.name]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${N(D.priority)}`,children:C(D.priority)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${b(D.status)}`,children:S(D.status)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:D.dueDate?r.jsxs("div",{children:[r.jsx("div",{className:D.dueDate&&k(D.dueDate)&&D.status!=="COMPLETADA"?"text-red-600 font-medium":"",children:new Date(D.dueDate).toLocaleDateString()}),D.dueDate&&k(D.dueDate)&&D.status!=="COMPLETADA"&&r.jsx("div",{className:"text-xs text-red-500",children:"⚠️ Vencida"})]}):"Sin fecha límite"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((L=D.assignedToUser)==null?void 0:L.name)||"Sin asignar"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:r.jsx("div",{className:"flex space-x-2",children:r.jsx("button",{onClick:()=>v(D.id),className:"text-red-600 hover:text-red-900",children:"Eliminar"})})})]},D.id)})})]})})]}),x.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No se encontraron tareas"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Intenta ajustar los filtros de búsqueda."})]})]})})},dq=()=>{const[e,t]=f.useState([]),[s,n]=f.useState([]),[a,i]=f.useState(!0),[o,l]=f.useState(null),[c,d]=f.useState(""),[u,m]=f.useState("todos");f.useEffect(()=>{h()},[]);const h=async()=>{var x,p;try{i(!0);const v=localStorage.getItem("token"),N=await K.get("/admin/documents",{headers:{Authorization:`Bearer ${v}`}});t(N.data),l(null)}catch(v){console.error("Error fetching documents:",v),l(((p=(x=v.response)==null?void 0:x.data)==null?void 0:p.message)||"Error al cargar documentos")}finally{i(!1)}};f.useEffect(()=>{let x=e;c&&(x=x.filter(p=>{var v;return p.originalName.toLowerCase().includes(c.toLowerCase())||((v=p.description)==null?void 0:v.toLowerCase().includes(c.toLowerCase()))||p.expediente.title.toLowerCase().includes(c.toLowerCase())||p.expediente.client.user.name.toLowerCase().includes(c.toLowerCase())||p.uploadedByUser.name.toLowerCase().includes(c.toLowerCase())})),u!=="todos"&&(x=x.filter(p=>p.mimeType.includes(u))),n(x)},[e,c,u]);const g=async x=>{var p,v;if(confirm("¿Estás seguro de que quieres eliminar este documento?"))try{const N=localStorage.getItem("token");await K.delete(`/admin/documents/${x}`,{headers:{Authorization:`Bearer ${N}`}}),h()}catch(N){console.error("Error deleting document:",N),l(((v=(p=N.response)==null?void 0:p.data)==null?void 0:v.message)||"Error al eliminar documento")}},j=async(x,p)=>{try{const v=localStorage.getItem("token");if(!v){l("No hay token de autenticación. Por favor, inicia sesión de nuevo.");return}const N=await fetch(`${Ii()}/api/documents/file/${x}`,{headers:{Authorization:`Bearer ${v}`}});if(!N.ok)throw new Error(`Error ${N.status}: ${N.statusText}`);const b=await N.blob(),C=window.URL.createObjectURL(b),S=document.createElement("a");S.href=C,S.download=p,document.body.appendChild(S),S.click(),S.remove(),window.URL.revokeObjectURL(C)}catch(v){console.error("Error viewing document:",v),l(v.message||"Error al visualizar el documento")}},y=x=>{if(x===0)return"0 Bytes";const p=1024,v=["Bytes","KB","MB","GB"],N=Math.floor(Math.log(x)/Math.log(p));return parseFloat((x/Math.pow(p,N)).toFixed(2))+" "+v[N]},w=x=>x.includes("pdf")?"📄":x.includes("image")?"🖼️":x.includes("word")||x.includes("document")?"📝":x.includes("excel")||x.includes("spreadsheet")?"📊":x.includes("powerpoint")||x.includes("presentation")?"📈":"📎";return a?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):o?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-red-600 text-xl mb-4",children:"Error"}),r.jsx("div",{className:"text-gray-600",children:o}),r.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Reintentar"})]})}):r.jsx("div",{className:"py-6",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsx("div",{className:"mb-8",children:r.jsx("div",{className:"flex justify-between items-center",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gestión de Documentos"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Administra todos los documentos del sistema"})]})})}),r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Filtros de Búsqueda"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar"}),r.jsx("input",{type:"text",placeholder:"Buscar por nombre, descripción, expediente, cliente o subido por...",value:c,onChange:x=>d(x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Archivo"}),r.jsxs("select",{value:u,onChange:x=>m(x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Filtrar por tipo de archivo",children:[r.jsx("option",{value:"todos",children:"Todos los tipos"}),r.jsx("option",{value:"pdf",children:"PDF"}),r.jsx("option",{value:"image",children:"Imágenes"}),r.jsx("option",{value:"word",children:"Documentos Word"}),r.jsx("option",{value:"excel",children:"Hojas de cálculo"}),r.jsx("option",{value:"powerpoint",children:"Presentaciones"})]})]}),r.jsx("div",{className:"flex items-end",children:r.jsx("button",{onClick:()=>{d(""),m("todos")},className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Limpiar Filtros"})})]})]}),r.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Lista de Documentos"})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Documento"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expediente"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subido por"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tamaño"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(x=>{var p,v,N,b,C,S,k,D,L;return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("span",{className:"text-2xl",children:w(x.mimeType)})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:x.originalName}),r.jsx("div",{className:"text-sm text-gray-500",children:x.description||"Sin descripción"}),r.jsxs("div",{className:"text-xs text-gray-400",children:["Subido: ",new Date(x.uploadedAt).toLocaleDateString()]})]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm text-gray-900",children:((p=x.expediente)==null?void 0:p.title)||"Sin expediente"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:((b=(N=(v=x.expediente)==null?void 0:v.client)==null?void 0:N.user)==null?void 0:b.name)||"Sin cliente"}),r.jsx("div",{className:"text-sm text-gray-500",children:((k=(S=(C=x.expediente)==null?void 0:C.client)==null?void 0:S.user)==null?void 0:k.email)||"Sin email"})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:((D=x.uploadedByUser)==null?void 0:D.name)||"Sin usuario"}),r.jsx("div",{className:"text-sm text-gray-500",children:((L=x.uploadedByUser)==null?void 0:L.email)||"Sin email"})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:y(x.fileSize)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>j(x.id,x.originalName),className:"text-blue-600 hover:text-blue-900 bg-transparent border-none cursor-pointer",children:"Ver"}),r.jsx("button",{onClick:()=>g(x.id),className:"text-red-600 hover:text-red-900",children:"Eliminar"})]})})]},x.id)})})]})})]}),s.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No se encontraron documentos"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Intenta ajustar los filtros de búsqueda."})]})]})})};var fm={},oC={L:1,M:0,Q:3,H:2},lC={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},uq=lC;function cC(e){this.mode=uq.MODE_8BIT_BYTE,this.data=e}cC.prototype={getLength:function(e){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}};var mq=cC,Tc=oC;function Ds(e,t){this.totalCount=e,this.dataCount=t}Ds.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];Ds.getRSBlocks=function(e,t){var s=Ds.getRsBlockTable(e,t);if(s==null)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var n=s.length/3,a=new Array,i=0;i<n;i++)for(var o=s[i*3+0],l=s[i*3+1],c=s[i*3+2],d=0;d<o;d++)a.push(new Ds(l,c));return a};Ds.getRsBlockTable=function(e,t){switch(t){case Tc.L:return Ds.RS_BLOCK_TABLE[(e-1)*4+0];case Tc.M:return Ds.RS_BLOCK_TABLE[(e-1)*4+1];case Tc.Q:return Ds.RS_BLOCK_TABLE[(e-1)*4+2];case Tc.H:return Ds.RS_BLOCK_TABLE[(e-1)*4+3];default:return}};var hq=Ds;function dC(){this.buffer=new Array,this.length=0}dC.prototype={get:function(e){var t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1},put:function(e,t){for(var s=0;s<t;s++)this.putBit((e>>>t-s-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var fq=dC,as={glog:function(e){if(e<1)throw new Error("glog("+e+")");return as.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return as.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var Rt=0;Rt<8;Rt++)as.EXP_TABLE[Rt]=1<<Rt;for(var Rt=8;Rt<256;Rt++)as.EXP_TABLE[Rt]=as.EXP_TABLE[Rt-4]^as.EXP_TABLE[Rt-5]^as.EXP_TABLE[Rt-6]^as.EXP_TABLE[Rt-8];for(var Rt=0;Rt<255;Rt++)as.LOG_TABLE[as.EXP_TABLE[Rt]]=Rt;var uC=as,ia=uC;function ad(e,t){if(e.length==null)throw new Error(e.length+"/"+t);for(var s=0;s<e.length&&e[s]==0;)s++;this.num=new Array(e.length-s+t);for(var n=0;n<e.length-s;n++)this.num[n]=e[n+s]}ad.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),s=0;s<this.getLength();s++)for(var n=0;n<e.getLength();n++)t[s+n]^=ia.gexp(ia.glog(this.get(s))+ia.glog(e.get(n)));return new ad(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=ia.glog(this.get(0))-ia.glog(e.get(0)),s=new Array(this.getLength()),n=0;n<this.getLength();n++)s[n]=this.get(n);for(var n=0;n<e.getLength();n++)s[n]^=ia.gexp(ia.glog(e.get(n))+t);return new ad(s,0).mod(e)}};var mC=ad,Or=lC,nb=mC,pq=uC,yn={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},Ot={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;Ot.getBCHDigit(t)-Ot.getBCHDigit(Ot.G15)>=0;)t^=Ot.G15<<Ot.getBCHDigit(t)-Ot.getBCHDigit(Ot.G15);return(e<<10|t)^Ot.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;Ot.getBCHDigit(t)-Ot.getBCHDigit(Ot.G18)>=0;)t^=Ot.G18<<Ot.getBCHDigit(t)-Ot.getBCHDigit(Ot.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;e!=0;)t++,e>>>=1;return t},getPatternPosition:function(e){return Ot.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,s){switch(e){case yn.PATTERN000:return(t+s)%2==0;case yn.PATTERN001:return t%2==0;case yn.PATTERN010:return s%3==0;case yn.PATTERN011:return(t+s)%3==0;case yn.PATTERN100:return(Math.floor(t/2)+Math.floor(s/3))%2==0;case yn.PATTERN101:return t*s%2+t*s%3==0;case yn.PATTERN110:return(t*s%2+t*s%3)%2==0;case yn.PATTERN111:return(t*s%3+(t+s)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new nb([1],0),s=0;s<e;s++)t=t.multiply(new nb([1,pq.gexp(s)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case Or.MODE_NUMBER:return 10;case Or.MODE_ALPHA_NUM:return 9;case Or.MODE_8BIT_BYTE:return 8;case Or.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case Or.MODE_NUMBER:return 12;case Or.MODE_ALPHA_NUM:return 11;case Or.MODE_8BIT_BYTE:return 16;case Or.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else if(t<41)switch(e){case Or.MODE_NUMBER:return 14;case Or.MODE_ALPHA_NUM:return 13;case Or.MODE_8BIT_BYTE:return 16;case Or.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}else throw new Error("type:"+t)},getLostPoint:function(e){for(var t=e.getModuleCount(),s=0,n=0;n<t;n++)for(var a=0;a<t;a++){for(var i=0,o=e.isDark(n,a),l=-1;l<=1;l++)if(!(n+l<0||t<=n+l))for(var c=-1;c<=1;c++)a+c<0||t<=a+c||l==0&&c==0||o==e.isDark(n+l,a+c)&&i++;i>5&&(s+=3+i-5)}for(var n=0;n<t-1;n++)for(var a=0;a<t-1;a++){var d=0;e.isDark(n,a)&&d++,e.isDark(n+1,a)&&d++,e.isDark(n,a+1)&&d++,e.isDark(n+1,a+1)&&d++,(d==0||d==4)&&(s+=3)}for(var n=0;n<t;n++)for(var a=0;a<t-6;a++)e.isDark(n,a)&&!e.isDark(n,a+1)&&e.isDark(n,a+2)&&e.isDark(n,a+3)&&e.isDark(n,a+4)&&!e.isDark(n,a+5)&&e.isDark(n,a+6)&&(s+=40);for(var a=0;a<t;a++)for(var n=0;n<t-6;n++)e.isDark(n,a)&&!e.isDark(n+1,a)&&e.isDark(n+2,a)&&e.isDark(n+3,a)&&e.isDark(n+4,a)&&!e.isDark(n+5,a)&&e.isDark(n+6,a)&&(s+=40);for(var u=0,a=0;a<t;a++)for(var n=0;n<t;n++)e.isDark(n,a)&&u++;var m=Math.abs(100*u/t/t-50)/5;return s+=m*10,s}},xq=Ot,gq=mq,hC=hq,fC=fq,Zn=xq,vq=mC;function As(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var Dr=As.prototype;Dr.addData=function(e){var t=new gq(e);this.dataList.push(t),this.dataCache=null};Dr.isDark=function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]};Dr.getModuleCount=function(){return this.moduleCount};Dr.make=function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){for(var t=hC.getRSBlocks(e,this.errorCorrectLevel),s=new fC,n=0,a=0;a<t.length;a++)n+=t[a].dataCount;for(var a=0;a<this.dataList.length;a++){var i=this.dataList[a];s.put(i.mode,4),s.put(i.getLength(),Zn.getLengthInBits(i.mode,e)),i.write(s)}if(s.getLengthInBits()<=n*8)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())};Dr.makeImpl=function(e,t){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var s=0;s<this.moduleCount;s++){this.modules[s]=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++)this.modules[s][n]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),this.dataCache==null&&(this.dataCache=As.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)};Dr.setupPositionProbePattern=function(e,t){for(var s=-1;s<=7;s++)if(!(e+s<=-1||this.moduleCount<=e+s))for(var n=-1;n<=7;n++)t+n<=-1||this.moduleCount<=t+n||(0<=s&&s<=6&&(n==0||n==6)||0<=n&&n<=6&&(s==0||s==6)||2<=s&&s<=4&&2<=n&&n<=4?this.modules[e+s][t+n]=!0:this.modules[e+s][t+n]=!1)};Dr.getBestMaskPattern=function(){for(var e=0,t=0,s=0;s<8;s++){this.makeImpl(!0,s);var n=Zn.getLostPoint(this);(s==0||e>n)&&(e=n,t=s)}return t};Dr.createMovieClip=function(e,t,s){var n=e.createEmptyMovieClip(t,s),a=1;this.make();for(var i=0;i<this.modules.length;i++)for(var o=i*a,l=0;l<this.modules[i].length;l++){var c=l*a,d=this.modules[i][l];d&&(n.beginFill(0,100),n.moveTo(c,o),n.lineTo(c+a,o),n.lineTo(c+a,o+a),n.lineTo(c,o+a),n.endFill())}return n};Dr.setupTimingPattern=function(){for(var e=8;e<this.moduleCount-8;e++)this.modules[e][6]==null&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)this.modules[6][t]==null&&(this.modules[6][t]=t%2==0)};Dr.setupPositionAdjustPattern=function(){for(var e=Zn.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var s=0;s<e.length;s++){var n=e[t],a=e[s];if(this.modules[n][a]==null)for(var i=-2;i<=2;i++)for(var o=-2;o<=2;o++)i==-2||i==2||o==-2||o==2||i==0&&o==0?this.modules[n+i][a+o]=!0:this.modules[n+i][a+o]=!1}};Dr.setupTypeNumber=function(e){for(var t=Zn.getBCHTypeNumber(this.typeNumber),s=0;s<18;s++){var n=!e&&(t>>s&1)==1;this.modules[Math.floor(s/3)][s%3+this.moduleCount-8-3]=n}for(var s=0;s<18;s++){var n=!e&&(t>>s&1)==1;this.modules[s%3+this.moduleCount-8-3][Math.floor(s/3)]=n}};Dr.setupTypeInfo=function(e,t){for(var s=this.errorCorrectLevel<<3|t,n=Zn.getBCHTypeInfo(s),a=0;a<15;a++){var i=!e&&(n>>a&1)==1;a<6?this.modules[a][8]=i:a<8?this.modules[a+1][8]=i:this.modules[this.moduleCount-15+a][8]=i}for(var a=0;a<15;a++){var i=!e&&(n>>a&1)==1;a<8?this.modules[8][this.moduleCount-a-1]=i:a<9?this.modules[8][15-a-1+1]=i:this.modules[8][15-a-1]=i}this.modules[this.moduleCount-8][8]=!e};Dr.mapData=function(e,t){for(var s=-1,n=this.moduleCount-1,a=7,i=0,o=this.moduleCount-1;o>0;o-=2)for(o==6&&o--;;){for(var l=0;l<2;l++)if(this.modules[n][o-l]==null){var c=!1;i<e.length&&(c=(e[i]>>>a&1)==1);var d=Zn.getMask(t,n,o-l);d&&(c=!c),this.modules[n][o-l]=c,a--,a==-1&&(i++,a=7)}if(n+=s,n<0||this.moduleCount<=n){n-=s,s=-s;break}}};As.PAD0=236;As.PAD1=17;As.createData=function(e,t,s){for(var n=hC.getRSBlocks(e,t),a=new fC,i=0;i<s.length;i++){var o=s[i];a.put(o.mode,4),a.put(o.getLength(),Zn.getLengthInBits(o.mode,e)),o.write(a)}for(var l=0,i=0;i<n.length;i++)l+=n[i].dataCount;if(a.getLengthInBits()>l*8)throw new Error("code length overflow. ("+a.getLengthInBits()+">"+l*8+")");for(a.getLengthInBits()+4<=l*8&&a.put(0,4);a.getLengthInBits()%8!=0;)a.putBit(!1);for(;!(a.getLengthInBits()>=l*8||(a.put(As.PAD0,8),a.getLengthInBits()>=l*8));)a.put(As.PAD1,8);return As.createBytes(a,n)};As.createBytes=function(e,t){for(var s=0,n=0,a=0,i=new Array(t.length),o=new Array(t.length),l=0;l<t.length;l++){var c=t[l].dataCount,d=t[l].totalCount-c;n=Math.max(n,c),a=Math.max(a,d),i[l]=new Array(c);for(var u=0;u<i[l].length;u++)i[l][u]=255&e.buffer[u+s];s+=c;var m=Zn.getErrorCorrectPolynomial(d),h=new vq(i[l],m.getLength()-1),g=h.mod(m);o[l]=new Array(m.getLength()-1);for(var u=0;u<o[l].length;u++){var j=u+g.getLength()-o[l].length;o[l][u]=j>=0?g.get(j):0}}for(var y=0,u=0;u<t.length;u++)y+=t[u].totalCount;for(var w=new Array(y),x=0,u=0;u<n;u++)for(var l=0;l<t.length;l++)u<i[l].length&&(w[x++]=i[l][u]);for(var u=0;u<a;u++)for(var l=0;l<t.length;l++)u<o[l].length&&(w[x++]=o[l][u]);return w};var yq=As,kg={};Object.defineProperty(kg,"__esModule",{value:!0});var bq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},jq=yx,Mr=xC(jq),pC=f,_c=xC(pC);function xC(e){return e&&e.__esModule?e:{default:e}}function wq(e,t){var s={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(s[n]=e[n]);return s}var Nq={bgColor:Mr.default.oneOfType([Mr.default.object,Mr.default.string]).isRequired,bgD:Mr.default.string.isRequired,fgColor:Mr.default.oneOfType([Mr.default.object,Mr.default.string]).isRequired,fgD:Mr.default.string.isRequired,size:Mr.default.number.isRequired,title:Mr.default.string,viewBoxSize:Mr.default.number.isRequired,xmlns:Mr.default.string},Dg=(0,pC.forwardRef)(function(e,t){var s=e.bgColor,n=e.bgD,a=e.fgD,i=e.fgColor,o=e.size,l=e.title,c=e.viewBoxSize,d=e.xmlns,u=d===void 0?"http://www.w3.org/2000/svg":d,m=wq(e,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return _c.default.createElement("svg",bq({},m,{height:o,ref:t,viewBox:"0 0 "+c+" "+c,width:o,xmlns:u}),l?_c.default.createElement("title",null,l):null,_c.default.createElement("path",{d:n,fill:s}),_c.default.createElement("path",{d:a,fill:i}))});Dg.displayName="QRCodeSvg";Dg.propTypes=Nq;kg.default=Dg;Object.defineProperty(fm,"__esModule",{value:!0});fm.QRCode=void 0;var Cq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},Sq=yx,qs=ec(Sq),Eq=oC,kq=ec(Eq),Dq=yq,Aq=ec(Dq),gC=f,Tq=ec(gC),_q=kg,Oq=ec(_q);function ec(e){return e&&e.__esModule?e:{default:e}}function Mq(e,t){var s={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(s[n]=e[n]);return s}var Rq={bgColor:qs.default.oneOfType([qs.default.object,qs.default.string]),fgColor:qs.default.oneOfType([qs.default.object,qs.default.string]),level:qs.default.string,size:qs.default.number,value:qs.default.string.isRequired},pm=(0,gC.forwardRef)(function(e,t){var s=e.bgColor,n=s===void 0?"#FFFFFF":s,a=e.fgColor,i=a===void 0?"#000000":a,o=e.level,l=o===void 0?"L":o,c=e.size,d=c===void 0?256:c,u=e.value,m=Mq(e,["bgColor","fgColor","level","size","value"]),h=new Aq.default(-1,kq.default[l]);h.addData(u),h.make();var g=h.modules;return Tq.default.createElement(Oq.default,Cq({},m,{bgColor:n,bgD:g.map(function(j,y){return j.map(function(w,x){return w?"":"M "+x+" "+y+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:i,fgD:g.map(function(j,y){return j.map(function(w,x){return w?"M "+x+" "+y+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:t,size:d,viewBoxSize:g.length}))});fm.QRCode=pm;pm.displayName="QRCode";pm.propTypes=Rq;var Pq=fm.default=pm;const Lq=()=>{var Ge;const{user:e}=Ce(),[t,s]=f.useState([]),[n,a]=f.useState([]),[i,o]=f.useState([]),[l,c]=f.useState(""),[d,u]=f.useState(""),[m,h]=f.useState(""),[g,j]=f.useState(!0),[y,w]=f.useState(null),[x,p]=f.useState(null),[v,N]=f.useState(!1),[b,C]=f.useState(null),[S,k]=f.useState(null),[D,L]=f.useState([]),[T,B]=f.useState(null),[V,A]=f.useState(null),[I,q]=f.useState(!1),[Y,M]=f.useState(null),[W,E]=f.useState(!1),[R,$]=f.useState(null),[_,O]=f.useState(!1),[P,F]=f.useState(null),[Q,X]=f.useState(!1);f.useEffect(()=>{re(),G()},[]),f.useEffect(()=>{G()},[l,d,m]);const re=async()=>{try{const[z,de]=await Promise.all([K.get("/admin/users?role=ABOGADO"),K.get("/admin/users?role=CLIENTE")]);a(z.data),o(de.data)}catch(z){console.error("Error fetching users:",z)}},G=async()=>{try{j(!0);const z={};l&&(z.lawyerId=l),d&&(z.clientId=d),m&&(z.paymentDate=m);const de=await K.get("/invoices",{params:z});console.log("📊 Admin invoices response:",de.data),s(de.data),w(null)}catch(z){console.error("Error fetching invoices:",z),w("Error al cargar las facturas"),s([])}finally{j(!1)}},le=async z=>{M(z),E(!0)},ie=z=>{p(z),N(!0)},xe=async z=>{if(confirm("¿Estás seguro de que quieres eliminar esta factura? Esta acción no se puede deshacer.")){C(z);try{await K.delete(`/invoices/${z}`),k("✅ Factura eliminada correctamente"),G(),setTimeout(()=>k(null),5e3)}catch(de){console.error("Error deleting invoice:",de),w("Error al eliminar la factura"),setTimeout(()=>w(null),5e3)}finally{C(null)}}},je=z=>{A(z),q(!0)},Pe=async z=>{$(z),O(!0),X(!0);try{const de=await K.get(`/invoices/${z.id}/audit-history`);F(de.data)}catch(de){console.error("Error fetching audit history:",de),w("Error al cargar el historial de auditoría"),setTimeout(()=>w(null),5e3)}finally{X(!1)}},ee=z=>{var De,ge;const de={ID:z.id,"Número de Factura":z.numeroFactura,"Fecha de Factura":z.fechaFactura,"Fecha de Creación":z.createdAt,"Última Actualización":z.updatedAt,Estado:z.estado,"XML Generado":z.xml?"Sí":"No","XML Firmado":z.xmlFirmado?"Sí":"No","Sello de Tiempo":z.selloTiempo||"No aplicado",Emisor:z.emisor?`${z.emisor.name} (${z.emisor.email})`:"No especificado",Receptor:z.receptor?`${z.receptor.name} (${z.receptor.email})`:"No especificado",Expediente:z.expediente?`${z.expediente.title} (ID: ${z.expediente.id})`:"No asociado",Items:((De=z.items)==null?void 0:De.length)||0,Provisiones:((ge=z.provisionFondos)==null?void 0:ge.length)||0};return Object.entries(de).map(([gt,Ve])=>`${gt}: ${Ve}`).join(`
`)},pe=async z=>{var de;if(z.preventDefault(),!!x)try{const De={fechaFactura:x.fechaFactura,estado:x.estado,paymentDate:x.paymentDate,tipoIVA:x.tipoIVA,descuento:x.descuento,retencion:x.retencion,items:(de=x.items)==null?void 0:de.map(ge=>({description:ge.description,quantity:ge.quantity,unitPrice:ge.unitPrice}))};await K.put(`/invoices/${x.id}`,De),k("✅ Factura actualizada correctamente"),N(!1),G(),setTimeout(()=>k(null),5e3)}catch(De){console.error("Error updating invoice:",De),w("Error al actualizar la factura"),setTimeout(()=>w(null),5e3)}},be=z=>new Date(z).toLocaleDateString("es-ES"),we=z=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(z||0),ke=async(z,de)=>{B(de);try{await navigator.clipboard.writeText(z),k(`✅ ${de} copiado al portapapeles`),setTimeout(()=>k(null),3e3)}catch{w("Error al copiar al portapapeles"),setTimeout(()=>w(null),3e3)}finally{B(null)}},Ue=z=>{L(de=>de.includes(z)?de.filter(De=>De!==z):[...de,z])},ct=()=>{D.length===t.length?L([]):L(t.map(z=>z.id))},sr=()=>{if(t.length===0){w("No hay facturas para exportar"),setTimeout(()=>w(null),3e3);return}const de=[["ID","Número Factura","Fecha Factura","Importe Total","Estado","Abogado","Cliente","Fecha de Pago","Base Imponible","IVA","Fecha de Creación"].join(","),...t.map(Ve=>{var nt,Dt;return[Ve.id,Ve.numeroFactura||"",Ve.fechaFactura||"",Ve.importeTotal||0,Ve.estado||"",((nt=Ve.emisor)==null?void 0:nt.name)||"",((Dt=Ve.receptor)==null?void 0:Dt.name)||"",Ve.paymentDate||"",Ve.baseImponible||0,Ve.cuotaIVA||0,Ve.createdAt||""].join(",")})].join(`
`),De=new Blob([de],{type:"text/csv;charset=utf-8;"}),ge=document.createElement("a"),gt=URL.createObjectURL(De);ge.setAttribute("href",gt),ge.setAttribute("download",`facturas_${new Date().toISOString().split("T")[0]}.csv`),ge.style.visibility="hidden",document.body.appendChild(ge),ge.click(),document.body.removeChild(ge),k("✅ CSV exportado correctamente"),setTimeout(()=>k(null),3e3)},Ar=z=>{var ge,gt,Ve,nt;const de={"Número de Factura":z.numeroFactura||"N/A","Fecha de Factura":z.fechaFactura?be(z.fechaFactura):"N/A","Importe Total":we(z.importeTotal||0),Estado:z.estado||"N/A",Abogado:((ge=z.emisor)==null?void 0:ge.name)||"N/A",Cliente:((gt=z.receptor)==null?void 0:gt.name)||"N/A","Fecha de Pago":z.paymentDate?be(z.paymentDate):"N/A","Base Imponible":we(z.baseImponible||0),IVA:we(z.cuotaIVA||0),Items:((Ve=z.items)==null?void 0:Ve.length)||0,Provisiones:((nt=z.provisionFondos)==null?void 0:nt.length)||0},De=Object.entries(de).map(([Dt,$t])=>`${Dt}: ${$t}`).join(`
`);ke(De,`Datos de factura ${z.numeroFactura}`)},xs=()=>{if(D.length===0){w("No hay facturas seleccionadas"),setTimeout(()=>w(null),3e3);return}const De=t.filter(ge=>D.includes(ge.id)).map(ge=>{var gt,Ve;return{"Número de Factura":ge.numeroFactura||"N/A","Fecha de Factura":ge.fechaFactura?be(ge.fechaFactura):"N/A","Importe Total":we(ge.importeTotal||0),Estado:ge.estado||"N/A",Abogado:((gt=ge.emisor)==null?void 0:gt.name)||"N/A",Cliente:((Ve=ge.receptor)==null?void 0:Ve.name)||"N/A"}}).map((ge,gt)=>`Factura ${gt+1}:
${Object.entries(ge).map(([Ve,nt])=>`${Ve}: ${nt}`).join(`
`)}`).join(`

`);ke(De,`Datos de ${D.length} facturas seleccionadas`)},Vs=({invoice:z})=>{var de,De,ge,gt,Ve;return r.jsxs("div",{className:"bg-white p-8 max-w-4xl mx-auto",children:[r.jsx("div",{className:"border-b-2 border-gray-300 pb-6 mb-6",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"FACTURA"}),r.jsx("div",{className:"my-4 flex flex-col items-center",children:z.qrData?r.jsxs(r.Fragment,{children:[r.jsx("h4",{className:"text-xs text-gray-600 mb-1",children:"Código QR de la factura"}),r.jsx(Pq,{value:z.qrData,size:120}),r.jsx("pre",{className:"text-xs mt-1 bg-gray-100 p-1 rounded",children:z.qrData})]}):r.jsx("span",{className:"text-xs text-gray-400",children:"QR no disponible"})}),r.jsxs("div",{className:"text-lg text-gray-600",children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Número:"})," ",z.numeroFactura||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Fecha:"})," ",z.fechaFactura?be(z.fechaFactura):"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Estado:"})," ",r.jsx("span",{className:`px-2 py-1 rounded text-xs ${z.estado==="emitida"?"bg-green-100 text-green-800":z.estado==="pagada"?"bg-blue-100 text-blue-800":z.estado==="anulada"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:(z.estado||"N/A").toUpperCase()})]})]})]}),r.jsxs("div",{className:"text-right text-gray-600",children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Fecha de Operación:"})," ",z.fechaOperacion?be(z.fechaOperacion):"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Método de Pago:"})," ",z.metodoPago||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Clave de Operación:"})," ",z.claveOperacion||"N/A"]})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-3",children:"DATOS DEL EMISOR"}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded border",children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Nombre:"})," ",((de=z.emisor)==null?void 0:de.name)||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Email:"})," ",((De=z.emisor)==null?void 0:De.email)||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Régimen IVA:"})," ",z.regimenIvaEmisor||"N/A"]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-3",children:"DATOS DEL RECEPTOR"}),r.jsxs("div",{className:"bg-gray-50 p-4 rounded border",children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Nombre:"})," ",((ge=z.receptor)==null?void 0:ge.name)||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Email:"})," ",((gt=z.receptor)==null?void 0:gt.email)||"N/A"]}),z.expediente&&r.jsxs("div",{children:[r.jsx("strong",{children:"Expediente:"})," ",z.expediente.title]})]})]})]}),z.items&&z.items.length>0&&r.jsxs("div",{className:"mb-8",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-3",children:"CONCEPTOS"}),r.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-gray-100",children:[r.jsx("th",{className:"border border-gray-300 px-3 py-2 text-left",children:"Descripción"}),r.jsx("th",{className:"border border-gray-300 px-3 py-2 text-center",children:"Cantidad"}),r.jsx("th",{className:"border border-gray-300 px-3 py-2 text-right",children:"Precio Unitario"}),r.jsx("th",{className:"border border-gray-300 px-3 py-2 text-right",children:"Total"})]})}),r.jsx("tbody",{children:z.items.map((nt,Dt)=>r.jsxs("tr",{className:Dt%2===0?"bg-white":"bg-gray-50",children:[r.jsx("td",{className:"border border-gray-300 px-3 py-2",children:nt.description}),r.jsx("td",{className:"border border-gray-300 px-3 py-2 text-center",children:nt.quantity}),r.jsx("td",{className:"border border-gray-300 px-3 py-2 text-right",children:we(nt.unitPrice)}),r.jsx("td",{className:"border border-gray-300 px-3 py-2 text-right font-semibold",children:we(nt.total)})]},Dt))})]})]}),z.descuento&&z.descuento>0&&r.jsxs("div",{className:"mb-8",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-3",children:"DESCUENTOS"}),r.jsx("div",{className:"bg-yellow-50 p-4 rounded border border-yellow-200",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("span",{className:"font-semibold text-yellow-800",children:["Descuento (",z.descuento,"%)"]}),r.jsxs("span",{className:"font-bold text-yellow-800 text-lg",children:["-",we((((Ve=z.items)==null?void 0:Ve.reduce((nt,Dt)=>nt+Dt.quantity*Dt.unitPrice,0))||0)*(z.descuento/100))]})]})})]}),z.provisionFondos&&z.provisionFondos.length>0&&r.jsxs("div",{className:"mb-8",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-3",children:"PROVISIONES DE FONDOS ASOCIADAS"}),r.jsx("div",{className:"bg-blue-50 p-4 rounded border",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-blue-200",children:[r.jsx("th",{className:"text-left py-2",children:"Descripción"}),r.jsx("th",{className:"text-right py-2",children:"Fecha"}),r.jsx("th",{className:"text-right py-2",children:"Importe"})]})}),r.jsx("tbody",{children:z.provisionFondos.map(nt=>r.jsxs("tr",{className:"border-b border-blue-100",children:[r.jsx("td",{className:"py-2",children:nt.description||"Sin descripción"}),r.jsx("td",{className:"text-right py-2",children:be(nt.date)}),r.jsx("td",{className:"text-right py-2 font-semibold",children:we(nt.amount)})]},nt.id))})]})})]}),r.jsx("div",{className:"mb-8",children:r.jsx("div",{className:"flex justify-end",children:r.jsxs("div",{className:"w-64 space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Base Imponible:"}),r.jsx("span",{className:"font-semibold",children:we(z.baseImponible??0)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("span",{children:["IVA (",z.tipoIVA??21,"%):"]}),r.jsx("span",{className:"font-semibold",children:we(z.cuotaIVA??0)})]}),r.jsxs("div",{className:"flex justify-between text-lg font-bold border-t border-gray-300 pt-2",children:[r.jsx("span",{children:"TOTAL:"}),r.jsx("span",{children:we(z.importeTotal??0)})]})]})})}),r.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:r.jsxs("div",{className:"grid grid-cols-2 gap-8 text-sm text-gray-600",children:[r.jsxs("div",{children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Método de pago:"})," ",z.metodoPago||"N/A"]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Clave de operación:"})," ",z.claveOperacion||"N/A"]})]}),r.jsxs("div",{children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Fecha de creación:"})," ",be(z.createdAt)]}),z.motivoAnulacion&&r.jsxs("div",{children:[r.jsx("strong",{children:"Motivo de anulación:"})," ",z.motivoAnulacion]})]})]})}),r.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200 flex justify-end space-x-4",children:r.jsxs("button",{onClick:()=>Ar(z),disabled:T!==null,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50 flex items-center space-x-2",children:[r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),r.jsx("span",{children:T===`Datos de factura ${z.numeroFactura}`?"Copiando...":"📋 Copiar Datos"})]})})]})};return g?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):r.jsxs("div",{className:"py-6",children:[r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-semibold mb-2",children:"Gestión de Facturas"}),r.jsx("p",{className:"text-gray-600",children:"Administra todas las facturas del sistema"})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs("button",{onClick:sr,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 flex items-center space-x-2",title:"Exportar todas las facturas a CSV",children:[r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsx("span",{children:"Exportar CSV"})]}),r.jsxs("button",{onClick:G,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center space-x-2",children:[r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),r.jsx("span",{children:"Refrescar"})]})]})]}),S&&r.jsx("div",{className:"mb-4 p-3 bg-green-100 text-green-700 rounded",children:S}),y&&r.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded",children:y}),r.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Abogado"}),r.jsxs("select",{value:l,onChange:z=>c(z.target.value),className:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Todos"}),n.map(z=>r.jsx("option",{value:z.id,children:z.name},z.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cliente"}),r.jsxs("select",{value:d,onChange:z=>u(z.target.value),className:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Todos"}),i.map(z=>r.jsx("option",{value:z.id,children:z.name},z.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de pago"}),r.jsx("input",{type:"date",value:m,onChange:z=>h(z.target.value),className:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsx("div",{className:"flex items-end",children:r.jsx("button",{onClick:()=>{c(""),u(""),h("")},className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"Limpiar Filtros"})})]}),t.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No se encontraron facturas"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:l||d||m?"Intenta ajustar los filtros de búsqueda.":"No hay facturas registradas en el sistema."})]}):r.jsxs(r.Fragment,{children:[D.length>0&&r.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"text-sm text-blue-800",children:[D.length," factura",D.length!==1?"s":""," seleccionada",D.length!==1?"s":""]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:xs,disabled:T!==null,className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 disabled:opacity-50",title:"Copiar datos de facturas seleccionadas",children:T?"📋 Copiando...":"📋 Copiar Seleccionadas"}),r.jsx("button",{onClick:()=>L([]),className:"px-3 py-1 bg-gray-600 text-white text-sm rounded hover:bg-gray-700",children:"Deseleccionar Todo"})]})]})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:r.jsx("input",{type:"checkbox",checked:D.length===t.length&&t.length>0,onChange:ct,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",title:"Seleccionar todas las facturas"})}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nº Factura"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Importe"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Abogado"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha de pago"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(z=>{var de,De;return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("input",{type:"checkbox",checked:D.includes(z.id),onChange:()=>Ue(z.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",title:`Seleccionar factura ${z.numeroFactura}`})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:z.numeroFactura||"N/A"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:z.fechaFactura?be(z.fechaFactura):"N/A"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:we(z.importeTotal||0)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${z.estado==="emitida"?"bg-green-100 text-green-800":z.estado==="pagada"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:z.estado||"N/A"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((de=z.emisor)==null?void 0:de.name)||"-"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((De=z.receptor)==null?void 0:De.name)||"-"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:z.paymentDate?be(z.paymentDate):"-"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>le(z),className:"text-blue-600 hover:text-blue-900 hover:bg-blue-50 px-2 py-1 rounded",title:"Ver factura completa con todos los detalles",children:"👁️ Ver"}),r.jsx("button",{onClick:()=>Ar(z),disabled:T!==null,className:"text-green-600 hover:text-green-900 px-2 py-1 rounded hover:bg-green-50",title:"Copiar datos de la factura",children:T===`Datos de factura ${z.numeroFactura}`?"📋 Copiando...":"📋 Copiar"}),r.jsx("button",{onClick:()=>ie(z),className:"text-yellow-600 hover:text-yellow-900 px-2 py-1 rounded hover:bg-yellow-50",title:"Editar factura",children:"✏️ Editar"}),r.jsx("button",{onClick:()=>xe(z.id),disabled:b===z.id,className:`px-2 py-1 rounded ${b===z.id?"text-gray-400 cursor-not-allowed":"text-red-600 hover:text-red-900 hover:bg-red-50"}`,title:"Eliminar factura",children:b===z.id?"🗑️ Borrando...":"🗑️ Borrar"}),r.jsx("button",{onClick:()=>je(z),className:"text-gray-600 hover:text-gray-900 px-2 py-1 rounded hover:bg-gray-50",title:"Ver metadatos técnicos",children:"🔍 Metadatos"}),r.jsx("button",{onClick:()=>Pe(z),className:"text-purple-600 hover:text-purple-900 px-2 py-1 rounded hover:bg-purple-50",title:"Ver historial de cambios",children:"📋 Auditoría"})]})})]},z.id)})})]})}),r.jsxs("div",{className:"mt-4 text-sm text-gray-500",children:["Mostrando ",t.length," factura",t.length!==1?"s":""]})]})]})}),v&&x&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",role:"dialog","aria-modal":"true","aria-labelledby":"edit-invoice-title","aria-describedby":"edit-invoice-description",onClick:z=>z.target===z.currentTarget&&N(!1),children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsxs("h2",{id:"edit-invoice-title",className:"text-xl font-bold",children:["Editar Factura ",x.numeroFactura]}),r.jsx("button",{onClick:()=>N(!1),className:"text-gray-500 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded p-1","aria-label":"Cerrar modal de edición",type:"button",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsxs("p",{id:"edit-invoice-description",className:"sr-only",children:["Formulario para editar los detalles de la factura ",x.numeroFactura||""]}),r.jsxs("form",{onSubmit:pe,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Número de Factura"}),r.jsx("input",{type:"text",value:x.numeroFactura||"",readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"No editable"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de Factura"}),r.jsx("input",{type:"date",value:x.fechaFactura?x.fechaFactura.split("T")[0]:"",onChange:z=>p({...x,fechaFactura:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),r.jsxs("select",{value:x.estado||"emitida",onChange:z=>p({...x,estado:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"emitida",children:"Emitida"}),r.jsx("option",{value:"pagada",children:"Pagada"}),r.jsx("option",{value:"anulada",children:"Anulada"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de Pago"}),r.jsx("input",{type:"date",value:x.paymentDate?x.paymentDate.split("T")[0]:"",onChange:z=>p({...x,paymentDate:z.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]})]}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Configuración Fiscal"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo IVA (%)"}),r.jsx("input",{type:"number",step:"0.01",value:x.tipoIVA||21,onChange:z=>p({...x,tipoIVA:parseFloat(z.target.value)||21}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descuento (%)"}),r.jsx("input",{type:"number",step:"0.01",value:x.descuento||0,onChange:z=>p({...x,descuento:parseFloat(z.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Retención (%)"}),r.jsx("input",{type:"number",step:"0.01",value:x.retencion||0,onChange:z=>p({...x,retencion:parseFloat(z.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]})]})]}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Conceptos"}),r.jsx("div",{className:"space-y-3",children:(Ge=x.items)==null?void 0:Ge.map((z,de)=>r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 p-3 border border-gray-200 rounded-md",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripción"}),r.jsx("input",{type:"text",value:z.description,onChange:De=>{const ge=[...x.items||[]];ge[de]={...ge[de],description:De.target.value},p({...x,items:ge})},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cantidad"}),r.jsx("input",{type:"number",value:z.quantity,onChange:De=>{const ge=[...x.items||[]];ge[de]={...ge[de],quantity:parseInt(De.target.value)||0,total:(parseInt(De.target.value)||0)*ge[de].unitPrice},p({...x,items:ge})},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Precio Unitario"}),r.jsx("input",{type:"number",step:"0.01",value:z.unitPrice,onChange:De=>{const ge=[...x.items||[]];ge[de]={...ge[de],unitPrice:parseFloat(De.target.value)||0,total:ge[de].quantity*(parseFloat(De.target.value)||0)},p({...x,items:ge})},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total"}),r.jsx("input",{type:"number",step:"0.01",value:z.total,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500"})]})]},de))}),r.jsx("button",{type:"button",onClick:()=>{const z=[...x.items||[],{id:`temp-${Date.now()}`,description:"",quantity:1,unitPrice:0,total:0}];p({...x,items:z})},className:"mt-3 px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"+ Agregar Concepto"})]}),r.jsxs("div",{className:"border-t pt-4",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Totales"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Base Imponible"}),r.jsx("input",{type:"number",step:"0.01",value:x.baseImponible||0,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cuota IVA"}),r.jsx("input",{type:"number",step:"0.01",value:x.cuotaIVA||0,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Importe Total"}),r.jsx("input",{type:"number",step:"0.01",value:x.importeTotal||0,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500"})]})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[r.jsx("button",{type:"button",onClick:()=>N(!1),className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"Cancelar"}),r.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Guardar Cambios"})]})]})]})}),I&&V&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsxs("h2",{className:"text-xl font-bold",children:["Metadatos - Factura ",V.numeroFactura]}),r.jsx("button",{onClick:()=>q(!1),className:"text-gray-500 hover:text-gray-700 text-2xl",children:"×"})]}),r.jsx("div",{className:"mb-4",children:r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Información técnica de la factura. Puedes copiar estos datos al portapapeles."})}),r.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border",children:r.jsx("pre",{className:"text-sm text-gray-800 whitespace-pre-wrap font-mono",children:ee(V)})}),r.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[r.jsxs("button",{onClick:()=>{const z=ee(V);ke(z,`Metadatos de factura ${V.numeroFactura}`)},disabled:T!==null,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 flex items-center space-x-2",children:[r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),r.jsx("span",{children:T===`Metadatos de factura ${V.numeroFactura}`?"Copiando...":"Copiar Metadatos"})]}),r.jsx("button",{onClick:()=>q(!1),className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"Cerrar"})]})]})}),W&&Y&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[95vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[r.jsxs("h2",{className:"text-xl font-bold",children:["Factura ",Y.numeroFactura]}),r.jsx("button",{onClick:()=>E(!1),className:"text-gray-500 hover:text-gray-700 text-2xl",children:"×"})]}),r.jsx("div",{className:"p-6",children:r.jsx(Vs,{invoice:Y})})]})}),_&&R&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[95vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[r.jsxs("h2",{className:"text-xl font-bold",children:["Historial de Auditoría - Factura ",R.numeroFactura]}),r.jsx("button",{onClick:()=>O(!1),className:"text-gray-500 hover:text-gray-700 text-2xl",children:"×"})]}),r.jsx("div",{className:"p-6",children:Q?r.jsxs("div",{className:"flex items-center justify-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"}),r.jsx("span",{className:"ml-2",children:"Cargando historial..."})]}):P?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-medium text-blue-900 mb-2",children:"Resumen de Cambios"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Total de cambios:"})," ",P.summary.totalChanges]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Última modificación:"})," ",P.summary.lastModified?new Date(P.summary.lastModified).toLocaleString():"N/A"]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Último modificador:"})," ",P.summary.lastModifiedBy||"N/A"]})]})]}),Object.keys(P.summary.changesByField).length>0&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Cambios por Campo"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(P.summary.changesByField).map(([z,de])=>r.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[r.jsxs("span",{className:"font-medium",children:[z,":"]})," ",String(de)," cambio",de!==1?"s":""]},z))})]}),Object.keys(P.summary.changesByUser).length>0&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Cambios por Usuario"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(P.summary.changesByUser).map(([z,de])=>r.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[r.jsxs("span",{className:"font-medium",children:[z,":"]})," ",String(de)," cambio",de!==1?"s":""]},z))})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Historial Detallado"}),r.jsx("div",{className:"space-y-3",children:P.auditHistory.map(z=>{var de,De;return r.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${z.action==="created"?"bg-green-100 text-green-800":z.action==="updated"?"bg-blue-100 text-blue-800":z.action==="deleted"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:z.action==="created"?"Creado":z.action==="updated"?"Actualizado":z.action==="deleted"?"Eliminado":z.action==="status_changed"?"Estado Cambiado":z.action}),z.fieldName&&r.jsxs("span",{className:"text-sm text-gray-600",children:["Campo: ",z.fieldName]})]}),r.jsx("span",{className:"text-sm text-gray-500",children:new Date(z.createdAt).toLocaleString()})]}),r.jsx("div",{className:"text-sm text-gray-700 mb-2",children:z.description}),z.fieldName&&z.oldValue!==z.newValue&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-red-600",children:"Valor anterior:"}),r.jsx("div",{className:"bg-red-50 p-2 rounded mt-1 break-all",children:z.oldValue||"Vacío"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-green-600",children:"Nuevo valor:"}),r.jsx("div",{className:"bg-green-50 p-2 rounded mt-1 break-all",children:z.newValue||"Vacío"})]})]}),r.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[r.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-500",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Usuario:"})," ",(de=z.user)==null?void 0:de.name," (",(De=z.user)==null?void 0:De.email,")"]}),z.ipAddress&&r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"IP:"})," ",z.ipAddress]})]}),z.userAgent&&r.jsxs("div",{className:"text-xs text-gray-500 mt-1 break-all",children:[r.jsx("span",{className:"font-medium",children:"User Agent:"})," ",z.userAgent]})]})]},z.id)})})]})]}):r.jsx("div",{className:"text-center py-8 text-gray-500",children:"No se encontró historial de auditoría para esta factura."})})]})})]})},Iq=()=>{const[e,t]=f.useState(null),[s,n]=f.useState(!0),[a,i]=f.useState(null);f.useEffect(()=>{o()},[]);const o=async()=>{var u,m;try{n(!0);const h=localStorage.getItem("token"),g=await K.get("/admin/reports",{headers:{Authorization:`Bearer ${h}`}});t(g.data),i(null)}catch(h){console.error("Error fetching reports:",h),i(((m=(u=h.response)==null?void 0:u.data)==null?void 0:m.message)||"Error al cargar reportes")}finally{n(!1)}},l=u=>{if(!u||u===0)return"0 Bytes";const m=1024,h=["Bytes","KB","MB","GB"],g=Math.floor(Math.log(u)/Math.log(m));return parseFloat((u/Math.pow(m,g)).toFixed(2))+" "+h[g]},c=u=>{switch(u){case"ABIERTO":return"Abierto";case"EN_PROCESO":return"En Proceso";case"CERRADO":return"Cerrado";case"PENDIENTE":return"Pendiente";case"EN_PROGRESO":return"En Progreso";case"COMPLETADA":return"Completada";case"CANCELADA":return"Cancelada";default:return u}},d=u=>{switch(u){case"ADMIN":return"Administrador";case"ABOGADO":return"Abogado";case"CLIENTE":return"Cliente";default:return u}};return s?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):a?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-red-600 text-xl mb-4",children:"Error"}),r.jsx("div",{className:"text-gray-600",children:a}),r.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Reintentar"})]})}):r.jsx("div",{className:"py-6",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Reportes del Sistema"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Análisis y estadísticas del sistema"})]}),r.jsx("button",{onClick:o,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Actualizar"})]})}),r.jsxs("nav",{className:"mb-8 bg-gray-50 p-4 rounded-lg shadow flex flex-wrap gap-3 items-center",children:[r.jsx("span",{className:"font-semibold text-gray-700 mr-2",children:"Ir a sección:"}),r.jsx("a",{href:"#expedientes",className:"px-3 py-1 bg-blue-100 text-blue-800 rounded hover:bg-blue-200 transition-colors",children:"Expedientes"}),r.jsx("a",{href:"#tareas",className:"px-3 py-1 bg-green-100 text-green-800 rounded hover:bg-green-200 transition-colors",children:"Tareas"}),r.jsx("a",{href:"#usuarios",className:"px-3 py-1 bg-purple-100 text-purple-800 rounded hover:bg-purple-200 transition-colors",children:"Actividad de Usuarios"}),r.jsx("a",{href:"#documentos",className:"px-3 py-1 bg-yellow-100 text-yellow-800 rounded hover:bg-yellow-200 transition-colors",children:"Documentos"}),r.jsx("a",{href:"#citas",className:"px-3 py-1 bg-pink-100 text-pink-800 rounded hover:bg-pink-200 transition-colors",children:"Citas por Mes"})]}),e&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Estadísticas Generales"}),r.jsxs("div",{id:"expedientes",className:"bg-white p-6 rounded-lg shadow scroll-mt-24",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Estadísticas de Expedientes"}),r.jsx("a",{href:"/admin/cases",className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm transition-colors",target:"_blank",rel:"noopener noreferrer",children:"Ver todos"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:e.casesByStatus.map(u=>r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("div",{className:"text-sm font-medium text-gray-500",children:c(u.status)}),r.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:u._count.status})]},u.status))})]}),r.jsxs("div",{id:"tareas",className:"bg-white p-6 rounded-lg shadow scroll-mt-24",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Estadísticas de Tareas"}),r.jsx("a",{href:"/admin/tasks",className:"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 text-sm transition-colors",target:"_blank",rel:"noopener noreferrer",children:"Ver todos"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:e.tasksByStatus.map(u=>r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("div",{className:"text-sm font-medium text-gray-500",children:c(u.status)}),r.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:u._count.status})]},u.status))})]}),r.jsxs("div",{id:"usuarios",className:"bg-white p-6 rounded-lg shadow scroll-mt-24",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Actividad de Usuarios"}),r.jsx("a",{href:"/admin/users",className:"px-3 py-1 bg-purple-600 text-white rounded hover:bg-purple-700 text-sm transition-colors",target:"_blank",rel:"noopener noreferrer",children:"Ver todos"})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Usuario"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rol"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expedientes"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Citas"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tareas"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Registro"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.userActivity.map(u=>{var m,h,g;return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm font-medium text-gray-900",children:u.name})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:d(u.role)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((m=u.expedientesAsLawyer)==null?void 0:m.length)||0}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((h=u.appointmentsAsLawyer)==null?void 0:h.length)||0}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((g=u.assignedTasks)==null?void 0:g.length)||0}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(u.createdAt).toLocaleDateString()})]},u.id)})})]})})]}),r.jsxs("div",{id:"documentos",className:"bg-white p-6 rounded-lg shadow scroll-mt-24",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Estadísticas de Documentos"}),r.jsx("a",{href:"/admin/documents",className:"px-3 py-1 bg-yellow-600 text-white rounded hover:bg-yellow-700 text-sm transition-colors",target:"_blank",rel:"noopener noreferrer",children:"Ver todos"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.documentStats.map(u=>r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("div",{className:"text-sm font-medium text-gray-500",children:u.mimeType}),r.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:u._count.mimeType}),r.jsx("div",{className:"text-sm text-gray-500",children:l(u._sum.fileSize)})]},u.mimeType))})]}),r.jsxs("div",{id:"citas",className:"bg-white p-6 rounded-lg shadow scroll-mt-24",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Citas por Mes"}),r.jsx("a",{href:"/admin/appointments",className:"px-3 py-1 bg-pink-600 text-white rounded hover:bg-pink-700 text-sm transition-colors",target:"_blank",rel:"noopener noreferrer",children:"Ver todos"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.appointmentsByMonth.map(u=>r.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[r.jsx("div",{className:"text-sm font-medium text-gray-500",children:new Date(u.date).toLocaleDateString("es-ES",{month:"long",year:"numeric"})}),r.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:u._count.date})]},u.date))})]})]})]})})};async function $q(e){return(await K.get("/parametros",{headers:{Authorization:`Bearer ${e}`}})).data}async function Fq(e,t){return(await K.post("/parametros",e,{headers:{Authorization:`Bearer ${t}`}})).data}async function Bq(e,t,s){return(await K.put(`/parametros/${e}`,t,{headers:{Authorization:`Bearer ${s}`}})).data}async function zq(e,t){await K.delete(`/parametros/${e}`,{headers:{Authorization:`Bearer ${t}`}})}const Uq=()=>{const e=localStorage.getItem("token"),[t,s]=f.useState([]),[n,a]=f.useState(!0),[i,o]=f.useState(null),[l,c]=f.useState(!1),[d,u]=f.useState(null),[m,h]=f.useState({}),[g,j]=f.useState(!1),y=async()=>{var b,C;a(!0),o(null);try{if(!e)throw new Error("No autenticado");const S=await $q(e);s(S)}catch(S){o(((C=(b=S.response)==null?void 0:b.data)==null?void 0:C.message)||S.message||"Error al cargar parámetros")}finally{a(!1)}};f.useEffect(()=>{y()},[e]);const w=b=>{u(b||null),h(b||{}),c(!0)},x=()=>{c(!1),u(null),h({})},p=b=>{h({...m,[b.target.name]:b.target.value})},v=async()=>{var b,C;j(!0),o(null);try{if(!e)throw new Error("No autenticado");d?await Bq(d.id,{valor:m.valor,etiqueta:m.etiqueta,tipo:m.tipo},e):await Fq({clave:m.clave,valor:m.valor,etiqueta:m.etiqueta,tipo:m.tipo},e),await y(),x()}catch(S){o(((C=(b=S.response)==null?void 0:b.data)==null?void 0:C.message)||S.message||"Error al guardar parámetro")}finally{j(!1)}},N=async b=>{var C,S;if(window.confirm("¿Seguro que deseas eliminar este parámetro?")){o(null),j(!0);try{if(!e)throw new Error("No autenticado");await zq(b,e),await y()}catch(k){o(((S=(C=k.response)==null?void 0:C.data)==null?void 0:S.message)||k.message||"Error al eliminar parámetro")}finally{j(!1)}}};return r.jsxs("div",{className:"max-w-3xl mx-auto py-8",children:[r.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Configuración de Parámetros Globales"}),r.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[r.jsx("button",{className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",onClick:async()=>{var b,C;if(window.confirm("¿Desea inicializar los parámetros por defecto? Esto creará o actualizará los parámetros básicos del sistema."))try{if(!e)throw new Error("No autenticado");await fetch("undefined/api/parametros/initialize",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}}),await y(),alert("Parámetros inicializados correctamente")}catch(S){o(((C=(b=S.response)==null?void 0:b.data)==null?void 0:C.message)||S.message||"Error al inicializar parámetros")}},children:"🔧 Inicializar Parámetros"}),r.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",onClick:()=>w(),children:"Nuevo Parámetro"})]}),n?r.jsx("div",{className:"text-center py-8",children:"Cargando..."}):i?r.jsx("div",{className:"text-center text-red-600",children:i}):r.jsxs("table",{className:"min-w-full bg-white border rounded shadow",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-2 border",children:"Clave"}),r.jsx("th",{className:"px-4 py-2 border",children:"Valor"}),r.jsx("th",{className:"px-4 py-2 border",children:"Etiqueta"}),r.jsx("th",{className:"px-4 py-2 border",children:"Tipo"}),r.jsx("th",{className:"px-4 py-2 border",children:"Acciones"})]})}),r.jsx("tbody",{children:t.map(b=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-4 py-2 border font-mono text-sm",children:b.clave}),r.jsx("td",{className:"px-4 py-2 border",children:b.tipo==="html"?r.jsxs("div",{className:"max-w-xs",children:[r.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"HTML Content"}),r.jsxs("div",{className:"text-xs bg-gray-100 p-2 rounded max-h-20 overflow-y-auto",children:[b.valor.substring(0,100),"..."]})]}):b.valor.length>50?r.jsx("div",{className:"max-w-xs",children:r.jsxs("div",{className:"text-sm truncate",title:b.valor,children:[b.valor.substring(0,50),"..."]})}):r.jsx("span",{className:"text-sm",children:b.valor})}),r.jsx("td",{className:"px-4 py-2 border text-sm",children:b.etiqueta}),r.jsx("td",{className:"px-4 py-2 border",children:r.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${b.tipo==="html"?"bg-purple-100 text-purple-800":b.tipo==="email"?"bg-blue-100 text-blue-800":b.tipo==="url"?"bg-green-100 text-green-800":b.tipo==="text"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:b.tipo})}),r.jsxs("td",{className:"px-4 py-2 border",children:[r.jsx("button",{className:"text-blue-600 hover:underline mr-2 text-sm",onClick:()=>w(b),children:"Editar"}),r.jsx("button",{className:"text-red-600 hover:underline text-sm",onClick:()=>N(b.id),disabled:g,children:"Eliminar"})]})]},b.id))})]}),l&&r.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-30 z-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 w-full max-w-md",children:[r.jsxs("h2",{className:"text-xl font-bold mb-4",children:[d?"Editar":"Nuevo"," Parámetro"]}),i&&r.jsx("div",{className:"text-red-600 mb-2",children:i}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block mb-1 font-medium",children:"Clave"}),r.jsx("input",{type:"text",name:"clave",value:m.clave||"",onChange:p,className:"w-full border px-3 py-2 rounded",disabled:!!d})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block mb-1 font-medium",children:"Valor"}),m.tipo==="html"||m.tipo==="text"?r.jsx("textarea",{name:"valor",value:m.valor||"",onChange:b=>h({...m,valor:b.target.value}),className:"w-full border px-3 py-2 rounded",rows:m.tipo==="html"?10:5,placeholder:m.tipo==="html"?"Contenido HTML...":"Texto largo..."}):r.jsx("input",{type:m.tipo==="email"?"email":m.tipo==="number"?"number":"text",name:"valor",value:m.valor||"",onChange:p,className:"w-full border px-3 py-2 rounded"})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block mb-1 font-medium",children:"Etiqueta"}),r.jsx("input",{type:"text",name:"etiqueta",value:m.etiqueta||"",onChange:p,className:"w-full border px-3 py-2 rounded"})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block mb-1 font-medium",children:"Tipo"}),r.jsxs("select",{name:"tipo",value:m.tipo||"",onChange:p,className:"w-full border px-3 py-2 rounded",children:[r.jsx("option",{value:"",children:"Selecciona tipo"}),r.jsx("option",{value:"string",children:"Texto"}),r.jsx("option",{value:"number",children:"Número"}),r.jsx("option",{value:"email",children:"Email"}),r.jsx("option",{value:"url",children:"URL"}),r.jsx("option",{value:"text",children:"Texto largo"}),r.jsx("option",{value:"html",children:"HTML"}),r.jsx("option",{value:"image",children:"Imagen/Base64"}),r.jsx("option",{value:"boolean",children:"Booleano"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-2",children:[r.jsx("button",{className:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",onClick:x,disabled:g,children:"Cancelar"}),r.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:v,disabled:g,children:g?"Guardando...":"Guardar"})]})]})})]})},Vq=()=>{const{user:e}=Ce(),[t,s]=f.useState([]),[n,a]=f.useState(!0),[i,o]=f.useState(null),[l,c]=f.useState(null),[d,u]=f.useState(!1),[m,h]=f.useState({title:"",description:"",icon:"⚖️",orden:0});f.useEffect(()=>{g()},[]);const g=async()=>{try{a(!0);const p=await fetch("undefined/api/parametros/services");if(p.ok){const v=await p.json();s(v)}else throw new Error("Error al cargar los servicios")}catch(p){console.error("Error fetching services:",p),o("Error al cargar los servicios")}finally{a(!1)}},j=async p=>{p.preventDefault();try{const v=l?`undefined/api/parametros/services/${l.id}`:"undefined/api/parametros/services";if((await fetch(v,{method:l?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(m)})).ok)await g(),c(null),u(!1),h({title:"",description:"",icon:"⚖️",orden:0});else throw new Error("Error al guardar el servicio")}catch(v){console.error("Error saving service:",v),o("Error al guardar el servicio")}},y=p=>{c(p),h({title:p.title,description:p.description,icon:p.icon,orden:p.orden}),u(!0)},w=async p=>{if(confirm("¿Estás seguro de que quieres eliminar este servicio?"))try{if((await fetch(`undefined/api/parametros/services/${p}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)await g();else throw new Error("Error al eliminar el servicio")}catch(v){console.error("Error deleting service:",v),o("Error al eliminar el servicio")}},x=()=>{c(null),u(!1),h({title:"",description:"",icon:"⚖️",orden:0})};return!e||e.role!=="ADMIN"?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Acceso Denegado"}),r.jsx("p",{className:"text-gray-600",children:"No tienes permisos para acceder a esta página."})]})}):r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Gestión de Servicios"}),r.jsx("p",{className:"text-gray-600",children:"Administra los servicios que se muestran en el frontend"})]}),i&&r.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:r.jsx("p",{className:"text-red-800",children:i})}),r.jsx("div",{className:"mb-6",children:r.jsx("button",{onClick:()=>u(!0),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"+ Agregar Nuevo Servicio"})}),d&&r.jsxs("div",{className:"mb-8 p-6 bg-gray-50 rounded-lg",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:l?"Editar Servicio":"Agregar Nuevo Servicio"}),r.jsxs("form",{onSubmit:j,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Título *"}),r.jsx("input",{type:"text",value:m.title,onChange:p=>h({...m,title:p.target.value}),required:!0,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Icono *"}),r.jsx("input",{type:"text",value:m.icon,onChange:p=>h({...m,icon:p.target.value}),required:!0,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"⚖️"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripción *"}),r.jsx("textarea",{value:m.description,onChange:p=>h({...m,description:p.target.value}),required:!0,rows:4,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Orden"}),r.jsx("input",{type:"number",value:m.orden,onChange:p=>h({...m,orden:parseInt(p.target.value)||0}),className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{className:"flex space-x-4",children:[r.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:l?"Actualizar":"Guardar"}),r.jsx("button",{type:"button",onClick:x,className:"bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition-colors",children:"Cancelar"})]})]})]}),n?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Cargando servicios..."})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(p=>r.jsxs("div",{className:"bg-white p-6 rounded-lg border shadow-sm",children:[r.jsxs("div",{className:"flex items-start space-x-4 mb-4",children:[r.jsx("div",{className:"text-3xl",children:p.icon}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-1",children:p.title}),r.jsxs("p",{className:"text-sm text-gray-500",children:["Orden: ",p.orden]})]})]}),r.jsx("p",{className:"text-gray-600 mb-4 text-sm",children:p.description}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>y(p),className:"bg-blue-600 text-white px-4 py-2 rounded text-sm hover:bg-blue-700 transition-colors",children:"Editar"}),r.jsx("button",{onClick:()=>w(p.id),className:"bg-red-600 text-white px-4 py-2 rounded text-sm hover:bg-red-700 transition-colors",children:"Eliminar"})]})]},p.id))}),!n&&t.length===0&&r.jsx("div",{className:"text-center py-8",children:r.jsx("p",{className:"text-gray-600",children:"No hay servicios configurados."})})]})};function Hq(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return f.useMemo(()=>n=>{t.forEach(a=>a(n))},t)}const xm=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Qi(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Ag(e){return"nodeType"in e}function rr(e){var t,s;return e?Qi(e)?e:Ag(e)&&(t=(s=e.ownerDocument)==null?void 0:s.defaultView)!=null?t:window:window}function Tg(e){const{Document:t}=rr(e);return e instanceof t}function tc(e){return Qi(e)?!1:e instanceof rr(e).HTMLElement}function vC(e){return e instanceof rr(e).SVGElement}function Ji(e){return e?Qi(e)?e.document:Ag(e)?Tg(e)?e:tc(e)||vC(e)?e.ownerDocument:document:document:document}const Is=xm?f.useLayoutEffect:f.useEffect;function gm(e){const t=f.useRef(e);return Is(()=>{t.current=e}),f.useCallback(function(){for(var s=arguments.length,n=new Array(s),a=0;a<s;a++)n[a]=arguments[a];return t.current==null?void 0:t.current(...n)},[])}function Wq(){const e=f.useRef(null),t=f.useCallback((n,a)=>{e.current=setInterval(n,a)},[]),s=f.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,s]}function Al(e,t){t===void 0&&(t=[e]);const s=f.useRef(e);return Is(()=>{s.current!==e&&(s.current=e)},t),s}function rc(e,t){const s=f.useRef();return f.useMemo(()=>{const n=e(s.current);return s.current=n,n},[...t])}function su(e){const t=gm(e),s=f.useRef(null),n=f.useCallback(a=>{a!==s.current&&(t==null||t(a,s.current)),s.current=a},[]);return[s,n]}function nu(e){const t=f.useRef();return f.useEffect(()=>{t.current=e},[e]),t.current}let Sh={};function vm(e,t){return f.useMemo(()=>{if(t)return t;const s=Sh[e]==null?0:Sh[e]+1;return Sh[e]=s,e+"-"+s},[e,t])}function yC(e){return function(t){for(var s=arguments.length,n=new Array(s>1?s-1:0),a=1;a<s;a++)n[a-1]=arguments[a];return n.reduce((i,o)=>{const l=Object.entries(o);for(const[c,d]of l){const u=i[c];u!=null&&(i[c]=u+e*d)}return i},{...t})}}const fi=yC(1),au=yC(-1);function Yq(e){return"clientX"in e&&"clientY"in e}function ym(e){if(!e)return!1;const{KeyboardEvent:t}=rr(e.target);return t&&e instanceof t}function qq(e){if(!e)return!1;const{TouchEvent:t}=rr(e.target);return t&&e instanceof t}function iu(e){if(qq(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:s}=e.touches[0];return{x:t,y:s}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:s}=e.changedTouches[0];return{x:t,y:s}}}return Yq(e)?{x:e.clientX,y:e.clientY}:null}const Wn=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:s}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(s?Math.round(s):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:s}=e;return"scaleX("+t+") scaleY("+s+")"}},Transform:{toString(e){if(e)return[Wn.Translate.toString(e),Wn.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:s,easing:n}=e;return t+" "+s+"ms "+n}}}),ab="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Gq(e){return e.matches(ab)?e:e.querySelector(ab)}const Kq={display:"none"};function Xq(e){let{id:t,value:s}=e;return H.createElement("div",{id:t,style:Kq},s)}function Qq(e){let{id:t,announcement:s,ariaLiveType:n="assertive"}=e;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return H.createElement("div",{id:t,style:a,role:"status","aria-live":n,"aria-atomic":!0},s)}function Jq(){const[e,t]=f.useState("");return{announce:f.useCallback(n=>{n!=null&&t(n)},[]),announcement:e}}const bC=f.createContext(null);function Zq(e){const t=f.useContext(bC);f.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function eG(){const[e]=f.useState(()=>new Set),t=f.useCallback(n=>(e.add(n),()=>e.delete(n)),[e]);return[f.useCallback(n=>{let{type:a,event:i}=n;e.forEach(o=>{var l;return(l=o[a])==null?void 0:l.call(o,i)})},[e]),t]}const tG={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},rG={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:s}=e;return s?"Draggable item "+t.id+" was moved over droppable area "+s.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:s}=e;return s?"Draggable item "+t.id+" was dropped over droppable area "+s.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function sG(e){let{announcements:t=rG,container:s,hiddenTextDescribedById:n,screenReaderInstructions:a=tG}=e;const{announce:i,announcement:o}=Jq(),l=vm("DndLiveRegion"),[c,d]=f.useState(!1);if(f.useEffect(()=>{d(!0)},[]),Zq(f.useMemo(()=>({onDragStart(m){let{active:h}=m;i(t.onDragStart({active:h}))},onDragMove(m){let{active:h,over:g}=m;t.onDragMove&&i(t.onDragMove({active:h,over:g}))},onDragOver(m){let{active:h,over:g}=m;i(t.onDragOver({active:h,over:g}))},onDragEnd(m){let{active:h,over:g}=m;i(t.onDragEnd({active:h,over:g}))},onDragCancel(m){let{active:h,over:g}=m;i(t.onDragCancel({active:h,over:g}))}}),[i,t])),!c)return null;const u=H.createElement(H.Fragment,null,H.createElement(Xq,{id:n,value:a.draggable}),H.createElement(Qq,{id:l,announcement:o}));return s?fa.createPortal(u,s):u}var Nt;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Nt||(Nt={}));function ou(){}function nG(e,t){return f.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function aG(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return f.useMemo(()=>[...t].filter(n=>n!=null),[...t])}const hs=Object.freeze({x:0,y:0});function iG(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function oG(e,t){const s=iu(e);if(!s)return"0 0";const n={x:(s.x-t.left)/t.width*100,y:(s.y-t.top)/t.height*100};return n.x+"% "+n.y+"%"}function lG(e,t){let{data:{value:s}}=e,{data:{value:n}}=t;return s-n}function cG(e,t){let{data:{value:s}}=e,{data:{value:n}}=t;return n-s}function dG(e,t){if(!e||e.length===0)return null;const[s]=e;return s[t]}function ib(e,t,s){return t===void 0&&(t=e.left),s===void 0&&(s=e.top),{x:t+e.width*.5,y:s+e.height*.5}}const uG=e=>{let{collisionRect:t,droppableRects:s,droppableContainers:n}=e;const a=ib(t,t.left,t.top),i=[];for(const o of n){const{id:l}=o,c=s.get(l);if(c){const d=iG(ib(c),a);i.push({id:l,data:{droppableContainer:o,value:d}})}}return i.sort(lG)};function mG(e,t){const s=Math.max(t.top,e.top),n=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),o=a-n,l=i-s;if(n<a&&s<i){const c=t.width*t.height,d=e.width*e.height,u=o*l,m=u/(c+d-u);return Number(m.toFixed(4))}return 0}const hG=e=>{let{collisionRect:t,droppableRects:s,droppableContainers:n}=e;const a=[];for(const i of n){const{id:o}=i,l=s.get(o);if(l){const c=mG(l,t);c>0&&a.push({id:o,data:{droppableContainer:i,value:c}})}}return a.sort(cG)};function fG(e,t,s){return{...e,scaleX:t&&s?t.width/s.width:1,scaleY:t&&s?t.height/s.height:1}}function jC(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:hs}function pG(e){return function(s){for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return a.reduce((o,l)=>({...o,top:o.top+e*l.y,bottom:o.bottom+e*l.y,left:o.left+e*l.x,right:o.right+e*l.x}),{...s})}}const xG=pG(1);function wC(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function gG(e,t,s){const n=wC(t);if(!n)return e;const{scaleX:a,scaleY:i,x:o,y:l}=n,c=e.left-o-(1-a)*parseFloat(s),d=e.top-l-(1-i)*parseFloat(s.slice(s.indexOf(" ")+1)),u=a?e.width/a:e.width,m=i?e.height/i:e.height;return{width:u,height:m,top:d,right:c+u,bottom:d+m,left:c}}const vG={ignoreTransform:!1};function Zi(e,t){t===void 0&&(t=vG);let s=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:d,transformOrigin:u}=rr(e).getComputedStyle(e);d&&(s=gG(s,d,u))}const{top:n,left:a,width:i,height:o,bottom:l,right:c}=s;return{top:n,left:a,width:i,height:o,bottom:l,right:c}}function ob(e){return Zi(e,{ignoreTransform:!0})}function yG(e){const t=e.innerWidth,s=e.innerHeight;return{top:0,left:0,right:t,bottom:s,width:t,height:s}}function bG(e,t){return t===void 0&&(t=rr(e).getComputedStyle(e)),t.position==="fixed"}function jG(e,t){t===void 0&&(t=rr(e).getComputedStyle(e));const s=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const i=t[a];return typeof i=="string"?s.test(i):!1})}function _g(e,t){const s=[];function n(a){if(t!=null&&s.length>=t||!a)return s;if(Tg(a)&&a.scrollingElement!=null&&!s.includes(a.scrollingElement))return s.push(a.scrollingElement),s;if(!tc(a)||vC(a)||s.includes(a))return s;const i=rr(e).getComputedStyle(a);return a!==e&&jG(a,i)&&s.push(a),bG(a,i)?s:n(a.parentNode)}return e?n(e):s}function NC(e){const[t]=_g(e,1);return t??null}function Eh(e){return!xm||!e?null:Qi(e)?e:Ag(e)?Tg(e)||e===Ji(e).scrollingElement?window:tc(e)?e:null:null}function CC(e){return Qi(e)?e.scrollX:e.scrollLeft}function SC(e){return Qi(e)?e.scrollY:e.scrollTop}function ap(e){return{x:CC(e),y:SC(e)}}var Tt;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Tt||(Tt={}));function EC(e){return!xm||!e?!1:e===document.scrollingElement}function kC(e){const t={x:0,y:0},s=EC(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},n={x:e.scrollWidth-s.width,y:e.scrollHeight-s.height},a=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,o=e.scrollTop>=n.y,l=e.scrollLeft>=n.x;return{isTop:a,isLeft:i,isBottom:o,isRight:l,maxScroll:n,minScroll:t}}const wG={x:.2,y:.2};function NG(e,t,s,n,a){let{top:i,left:o,right:l,bottom:c}=s;n===void 0&&(n=10),a===void 0&&(a=wG);const{isTop:d,isBottom:u,isLeft:m,isRight:h}=kC(e),g={x:0,y:0},j={x:0,y:0},y={height:t.height*a.y,width:t.width*a.x};return!d&&i<=t.top+y.height?(g.y=Tt.Backward,j.y=n*Math.abs((t.top+y.height-i)/y.height)):!u&&c>=t.bottom-y.height&&(g.y=Tt.Forward,j.y=n*Math.abs((t.bottom-y.height-c)/y.height)),!h&&l>=t.right-y.width?(g.x=Tt.Forward,j.x=n*Math.abs((t.right-y.width-l)/y.width)):!m&&o<=t.left+y.width&&(g.x=Tt.Backward,j.x=n*Math.abs((t.left+y.width-o)/y.width)),{direction:g,speed:j}}function CG(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:t,left:s,right:n,bottom:a}=e.getBoundingClientRect();return{top:t,left:s,right:n,bottom:a,width:e.clientWidth,height:e.clientHeight}}function DC(e){return e.reduce((t,s)=>fi(t,ap(s)),hs)}function SG(e){return e.reduce((t,s)=>t+CC(s),0)}function EG(e){return e.reduce((t,s)=>t+SC(s),0)}function AC(e,t){if(t===void 0&&(t=Zi),!e)return;const{top:s,left:n,bottom:a,right:i}=t(e);NC(e)&&(a<=0||i<=0||s>=window.innerHeight||n>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const kG=[["x",["left","right"],SG],["y",["top","bottom"],EG]];class Og{constructor(t,s){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=_g(s),a=DC(n);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,o,l]of kG)for(const c of o)Object.defineProperty(this,c,{get:()=>{const d=l(n),u=a[i]-d;return this.rect[c]+u},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class zo{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(s=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...s)})},this.target=t}add(t,s,n){var a;(a=this.target)==null||a.addEventListener(t,s,n),this.listeners.push([t,s,n])}}function DG(e){const{EventTarget:t}=rr(e);return e instanceof t?e:Ji(e)}function kh(e,t){const s=Math.abs(e.x),n=Math.abs(e.y);return typeof t=="number"?Math.sqrt(s**2+n**2)>t:"x"in t&&"y"in t?s>t.x&&n>t.y:"x"in t?s>t.x:"y"in t?n>t.y:!1}var Pr;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Pr||(Pr={}));function lb(e){e.preventDefault()}function AG(e){e.stopPropagation()}var $e;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})($e||($e={}));const TC={start:[$e.Space,$e.Enter],cancel:[$e.Esc],end:[$e.Space,$e.Enter,$e.Tab]},TG=(e,t)=>{let{currentCoordinates:s}=t;switch(e.code){case $e.Right:return{...s,x:s.x+25};case $e.Left:return{...s,x:s.x-25};case $e.Down:return{...s,y:s.y+25};case $e.Up:return{...s,y:s.y-25}}};class _C{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:s}}=t;this.props=t,this.listeners=new zo(Ji(s)),this.windowListeners=new zo(rr(s)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Pr.Resize,this.handleCancel),this.windowListeners.add(Pr.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Pr.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:s}=this.props,n=t.node.current;n&&AC(n),s(hs)}handleKeyDown(t){if(ym(t)){const{active:s,context:n,options:a}=this.props,{keyboardCodes:i=TC,coordinateGetter:o=TG,scrollBehavior:l="smooth"}=a,{code:c}=t;if(i.end.includes(c)){this.handleEnd(t);return}if(i.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:d}=n.current,u=d?{x:d.left,y:d.top}:hs;this.referenceCoordinates||(this.referenceCoordinates=u);const m=o(t,{active:s,context:n.current,currentCoordinates:u});if(m){const h=au(m,u),g={x:0,y:0},{scrollableAncestors:j}=n.current;for(const y of j){const w=t.code,{isTop:x,isRight:p,isLeft:v,isBottom:N,maxScroll:b,minScroll:C}=kC(y),S=CG(y),k={x:Math.min(w===$e.Right?S.right-S.width/2:S.right,Math.max(w===$e.Right?S.left:S.left+S.width/2,m.x)),y:Math.min(w===$e.Down?S.bottom-S.height/2:S.bottom,Math.max(w===$e.Down?S.top:S.top+S.height/2,m.y))},D=w===$e.Right&&!p||w===$e.Left&&!v,L=w===$e.Down&&!N||w===$e.Up&&!x;if(D&&k.x!==m.x){const T=y.scrollLeft+h.x,B=w===$e.Right&&T<=b.x||w===$e.Left&&T>=C.x;if(B&&!h.y){y.scrollTo({left:T,behavior:l});return}B?g.x=y.scrollLeft-T:g.x=w===$e.Right?y.scrollLeft-b.x:y.scrollLeft-C.x,g.x&&y.scrollBy({left:-g.x,behavior:l});break}else if(L&&k.y!==m.y){const T=y.scrollTop+h.y,B=w===$e.Down&&T<=b.y||w===$e.Up&&T>=C.y;if(B&&!h.x){y.scrollTo({top:T,behavior:l});return}B?g.y=y.scrollTop-T:g.y=w===$e.Down?y.scrollTop-b.y:y.scrollTop-C.y,g.y&&y.scrollBy({top:-g.y,behavior:l});break}}this.handleMove(t,fi(au(m,this.referenceCoordinates),g))}}}handleMove(t,s){const{onMove:n}=this.props;t.preventDefault(),n(s)}handleEnd(t){const{onEnd:s}=this.props;t.preventDefault(),this.detach(),s()}handleCancel(t){const{onCancel:s}=this.props;t.preventDefault(),this.detach(),s()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}_C.activators=[{eventName:"onKeyDown",handler:(e,t,s)=>{let{keyboardCodes:n=TC,onActivation:a}=t,{active:i}=s;const{code:o}=e.nativeEvent;if(n.start.includes(o)){const l=i.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),a==null||a({event:e.nativeEvent}),!0)}return!1}}];function cb(e){return!!(e&&"distance"in e)}function db(e){return!!(e&&"delay"in e)}class Mg{constructor(t,s,n){var a;n===void 0&&(n=DG(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=s;const{event:i}=t,{target:o}=i;this.props=t,this.events=s,this.document=Ji(o),this.documentListeners=new zo(this.document),this.listeners=new zo(n),this.windowListeners=new zo(rr(o)),this.initialCoordinates=(a=iu(i))!=null?a:hs,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:s,bypassActivationConstraint:n}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Pr.Resize,this.handleCancel),this.windowListeners.add(Pr.DragStart,lb),this.windowListeners.add(Pr.VisibilityChange,this.handleCancel),this.windowListeners.add(Pr.ContextMenu,lb),this.documentListeners.add(Pr.Keydown,this.handleKeydown),s){if(n!=null&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(db(s)){this.timeoutId=setTimeout(this.handleStart,s.delay),this.handlePending(s);return}if(cb(s)){this.handlePending(s);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,s){const{active:n,onPending:a}=this.props;a(n,t,this.initialCoordinates,s)}handleStart(){const{initialCoordinates:t}=this,{onStart:s}=this.props;t&&(this.activated=!0,this.documentListeners.add(Pr.Click,AG,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Pr.SelectionChange,this.removeTextSelection),s(t))}handleMove(t){var s;const{activated:n,initialCoordinates:a,props:i}=this,{onMove:o,options:{activationConstraint:l}}=i;if(!a)return;const c=(s=iu(t))!=null?s:hs,d=au(a,c);if(!n&&l){if(cb(l)){if(l.tolerance!=null&&kh(d,l.tolerance))return this.handleCancel();if(kh(d,l.distance))return this.handleStart()}if(db(l)&&kh(d,l.tolerance))return this.handleCancel();this.handlePending(l,d);return}t.cancelable&&t.preventDefault(),o(c)}handleEnd(){const{onAbort:t,onEnd:s}=this.props;this.detach(),this.activated||t(this.props.active),s()}handleCancel(){const{onAbort:t,onCancel:s}=this.props;this.detach(),this.activated||t(this.props.active),s()}handleKeydown(t){t.code===$e.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const _G={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Rg extends Mg{constructor(t){const{event:s}=t,n=Ji(s.target);super(t,_G,n)}}Rg.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:s}=e,{onActivation:n}=t;return!s.isPrimary||s.button!==0?!1:(n==null||n({event:s}),!0)}}];const OG={move:{name:"mousemove"},end:{name:"mouseup"}};var ip;(function(e){e[e.RightClick=2]="RightClick"})(ip||(ip={}));class MG extends Mg{constructor(t){super(t,OG,Ji(t.event.target))}}MG.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:s}=e,{onActivation:n}=t;return s.button===ip.RightClick?!1:(n==null||n({event:s}),!0)}}];const Dh={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class RG extends Mg{constructor(t){super(t,Dh)}static setup(){return window.addEventListener(Dh.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Dh.move.name,t)};function t(){}}}RG.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:s}=e,{onActivation:n}=t;const{touches:a}=s;return a.length>1?!1:(n==null||n({event:s}),!0)}}];var Uo;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Uo||(Uo={}));var lu;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(lu||(lu={}));function PG(e){let{acceleration:t,activator:s=Uo.Pointer,canScroll:n,draggingRect:a,enabled:i,interval:o=5,order:l=lu.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:u,delta:m,threshold:h}=e;const g=IG({delta:m,disabled:!i}),[j,y]=Wq(),w=f.useRef({x:0,y:0}),x=f.useRef({x:0,y:0}),p=f.useMemo(()=>{switch(s){case Uo.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Uo.DraggableRect:return a}},[s,a,c]),v=f.useRef(null),N=f.useCallback(()=>{const C=v.current;if(!C)return;const S=w.current.x*x.current.x,k=w.current.y*x.current.y;C.scrollBy(S,k)},[]),b=f.useMemo(()=>l===lu.TreeOrder?[...d].reverse():d,[l,d]);f.useEffect(()=>{if(!i||!d.length||!p){y();return}for(const C of b){if((n==null?void 0:n(C))===!1)continue;const S=d.indexOf(C),k=u[S];if(!k)continue;const{direction:D,speed:L}=NG(C,k,p,t,h);for(const T of["x","y"])g[T][D[T]]||(L[T]=0,D[T]=0);if(L.x>0||L.y>0){y(),v.current=C,j(N,o),w.current=L,x.current=D;return}}w.current={x:0,y:0},x.current={x:0,y:0},y()},[t,N,n,y,i,o,JSON.stringify(p),JSON.stringify(g),j,d,b,u,JSON.stringify(h)])}const LG={x:{[Tt.Backward]:!1,[Tt.Forward]:!1},y:{[Tt.Backward]:!1,[Tt.Forward]:!1}};function IG(e){let{delta:t,disabled:s}=e;const n=nu(t);return rc(a=>{if(s||!n||!a)return LG;const i={x:Math.sign(t.x-n.x),y:Math.sign(t.y-n.y)};return{x:{[Tt.Backward]:a.x[Tt.Backward]||i.x===-1,[Tt.Forward]:a.x[Tt.Forward]||i.x===1},y:{[Tt.Backward]:a.y[Tt.Backward]||i.y===-1,[Tt.Forward]:a.y[Tt.Forward]||i.y===1}}},[s,t,n])}function $G(e,t){const s=t!=null?e.get(t):void 0,n=s?s.node.current:null;return rc(a=>{var i;return t==null?null:(i=n??a)!=null?i:null},[n,t])}function FG(e,t){return f.useMemo(()=>e.reduce((s,n)=>{const{sensor:a}=n,i=a.activators.map(o=>({eventName:o.eventName,handler:t(o.handler,n)}));return[...s,...i]},[]),[e,t])}var Tl;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Tl||(Tl={}));var op;(function(e){e.Optimized="optimized"})(op||(op={}));const ub=new Map;function BG(e,t){let{dragging:s,dependencies:n,config:a}=t;const[i,o]=f.useState(null),{frequency:l,measure:c,strategy:d}=a,u=f.useRef(e),m=w(),h=Al(m),g=f.useCallback(function(x){x===void 0&&(x=[]),!h.current&&o(p=>p===null?x:p.concat(x.filter(v=>!p.includes(v))))},[h]),j=f.useRef(null),y=rc(x=>{if(m&&!s)return ub;if(!x||x===ub||u.current!==e||i!=null){const p=new Map;for(let v of e){if(!v)continue;if(i&&i.length>0&&!i.includes(v.id)&&v.rect.current){p.set(v.id,v.rect.current);continue}const N=v.node.current,b=N?new Og(c(N),N):null;v.rect.current=b,b&&p.set(v.id,b)}return p}return x},[e,i,s,m,c]);return f.useEffect(()=>{u.current=e},[e]),f.useEffect(()=>{m||g()},[s,m]),f.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),f.useEffect(()=>{m||typeof l!="number"||j.current!==null||(j.current=setTimeout(()=>{g(),j.current=null},l))},[l,m,g,...n]),{droppableRects:y,measureDroppableContainers:g,measuringScheduled:i!=null};function w(){switch(d){case Tl.Always:return!1;case Tl.BeforeDragging:return s;default:return!s}}}function Pg(e,t){return rc(s=>e?s||(typeof t=="function"?t(e):e):null,[t,e])}function zG(e,t){return Pg(e,t)}function UG(e){let{callback:t,disabled:s}=e;const n=gm(t),a=f.useMemo(()=>{if(s||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(n)},[n,s]);return f.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function bm(e){let{callback:t,disabled:s}=e;const n=gm(t),a=f.useMemo(()=>{if(s||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(n)},[s]);return f.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function VG(e){return new Og(Zi(e),e)}function mb(e,t,s){t===void 0&&(t=VG);const[n,a]=f.useState(null);function i(){a(c=>{if(!e)return null;if(e.isConnected===!1){var d;return(d=c??s)!=null?d:null}const u=t(e);return JSON.stringify(c)===JSON.stringify(u)?c:u})}const o=UG({callback(c){if(e)for(const d of c){const{type:u,target:m}=d;if(u==="childList"&&m instanceof HTMLElement&&m.contains(e)){i();break}}}}),l=bm({callback:i});return Is(()=>{i(),e?(l==null||l.observe(e),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),o==null||o.disconnect())},[e]),n}function HG(e){const t=Pg(e);return jC(e,t)}const hb=[];function WG(e){const t=f.useRef(e),s=rc(n=>e?n&&n!==hb&&e&&t.current&&e.parentNode===t.current.parentNode?n:_g(e):hb,[e]);return f.useEffect(()=>{t.current=e},[e]),s}function YG(e){const[t,s]=f.useState(null),n=f.useRef(e),a=f.useCallback(i=>{const o=Eh(i.target);o&&s(l=>l?(l.set(o,ap(o)),new Map(l)):null)},[]);return f.useEffect(()=>{const i=n.current;if(e!==i){o(i);const l=e.map(c=>{const d=Eh(c);return d?(d.addEventListener("scroll",a,{passive:!0}),[d,ap(d)]):null}).filter(c=>c!=null);s(l.length?new Map(l):null),n.current=e}return()=>{o(e),o(i)};function o(l){l.forEach(c=>{const d=Eh(c);d==null||d.removeEventListener("scroll",a)})}},[a,e]),f.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,o)=>fi(i,o),hs):DC(e):hs,[e,t])}function fb(e,t){t===void 0&&(t=[]);const s=f.useRef(null);return f.useEffect(()=>{s.current=null},t),f.useEffect(()=>{const n=e!==hs;n&&!s.current&&(s.current=e),!n&&s.current&&(s.current=null)},[e]),s.current?au(e,s.current):hs}function qG(e){f.useEffect(()=>{if(!xm)return;const t=e.map(s=>{let{sensor:n}=s;return n.setup==null?void 0:n.setup()});return()=>{for(const s of t)s==null||s()}},e.map(t=>{let{sensor:s}=t;return s}))}function GG(e,t){return f.useMemo(()=>e.reduce((s,n)=>{let{eventName:a,handler:i}=n;return s[a]=o=>{i(o,t)},s},{}),[e,t])}function OC(e){return f.useMemo(()=>e?yG(e):null,[e])}const pb=[];function KG(e,t){t===void 0&&(t=Zi);const[s]=e,n=OC(s?rr(s):null),[a,i]=f.useState(pb);function o(){i(()=>e.length?e.map(c=>EC(c)?n:new Og(t(c),c)):pb)}const l=bm({callback:o});return Is(()=>{l==null||l.disconnect(),o(),e.forEach(c=>l==null?void 0:l.observe(c))},[e]),a}function MC(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return tc(t)?t:e}function XG(e){let{measure:t}=e;const[s,n]=f.useState(null),a=f.useCallback(d=>{for(const{target:u}of d)if(tc(u)){n(m=>{const h=t(u);return m?{...m,width:h.width,height:h.height}:h});break}},[t]),i=bm({callback:a}),o=f.useCallback(d=>{const u=MC(d);i==null||i.disconnect(),u&&(i==null||i.observe(u)),n(u?t(u):null)},[t,i]),[l,c]=su(o);return f.useMemo(()=>({nodeRef:l,rect:s,setRef:c}),[s,l,c])}const QG=[{sensor:Rg,options:{}},{sensor:_C,options:{}}],JG={current:{}},id={draggable:{measure:ob},droppable:{measure:ob,strategy:Tl.WhileDragging,frequency:op.Optimized},dragOverlay:{measure:Zi}};class Vo extends Map{get(t){var s;return t!=null&&(s=super.get(t))!=null?s:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:s}=t;return!s})}getNodeFor(t){var s,n;return(s=(n=this.get(t))==null?void 0:n.node.current)!=null?s:void 0}}const ZG={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Vo,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:ou},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:id,measureDroppableContainers:ou,windowRect:null,measuringScheduled:!1},RC={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:ou,draggableNodes:new Map,over:null,measureDroppableContainers:ou},sc=f.createContext(RC),PC=f.createContext(ZG);function eK(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Vo}}}function tK(e,t){switch(t.type){case Nt.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Nt.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Nt.DragEnd:case Nt.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Nt.RegisterDroppable:{const{element:s}=t,{id:n}=s,a=new Vo(e.droppable.containers);return a.set(n,s),{...e,droppable:{...e.droppable,containers:a}}}case Nt.SetDroppableDisabled:{const{id:s,key:n,disabled:a}=t,i=e.droppable.containers.get(s);if(!i||n!==i.key)return e;const o=new Vo(e.droppable.containers);return o.set(s,{...i,disabled:a}),{...e,droppable:{...e.droppable,containers:o}}}case Nt.UnregisterDroppable:{const{id:s,key:n}=t,a=e.droppable.containers.get(s);if(!a||n!==a.key)return e;const i=new Vo(e.droppable.containers);return i.delete(s),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function rK(e){let{disabled:t}=e;const{active:s,activatorEvent:n,draggableNodes:a}=f.useContext(sc),i=nu(n),o=nu(s==null?void 0:s.id);return f.useEffect(()=>{if(!t&&!n&&i&&o!=null){if(!ym(i)||document.activeElement===i.target)return;const l=a.get(o);if(!l)return;const{activatorNode:c,node:d}=l;if(!c.current&&!d.current)return;requestAnimationFrame(()=>{for(const u of[c.current,d.current]){if(!u)continue;const m=Gq(u);if(m){m.focus();break}}})}},[n,t,a,o,i]),null}function LC(e,t){let{transform:s,...n}=t;return e!=null&&e.length?e.reduce((a,i)=>i({transform:a,...n}),s):s}function sK(e){return f.useMemo(()=>({draggable:{...id.draggable,...e==null?void 0:e.draggable},droppable:{...id.droppable,...e==null?void 0:e.droppable},dragOverlay:{...id.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function nK(e){let{activeNode:t,measure:s,initialRect:n,config:a=!0}=e;const i=f.useRef(!1),{x:o,y:l}=typeof a=="boolean"?{x:a,y:a}:a;Is(()=>{if(!o&&!l||!t){i.current=!1;return}if(i.current||!n)return;const d=t==null?void 0:t.node.current;if(!d||d.isConnected===!1)return;const u=s(d),m=jC(u,n);if(o||(m.x=0),l||(m.y=0),i.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const h=NC(d);h&&h.scrollBy({top:m.y,left:m.x})}},[t,o,l,n,s])}const jm=f.createContext({...hs,scaleX:1,scaleY:1});var wn;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(wn||(wn={}));const aK=f.memo(function(t){var s,n,a,i;let{id:o,accessibility:l,autoScroll:c=!0,children:d,sensors:u=QG,collisionDetection:m=hG,measuring:h,modifiers:g,...j}=t;const y=f.useReducer(tK,void 0,eK),[w,x]=y,[p,v]=eG(),[N,b]=f.useState(wn.Uninitialized),C=N===wn.Initialized,{draggable:{active:S,nodes:k,translate:D},droppable:{containers:L}}=w,T=S!=null?k.get(S):null,B=f.useRef({initial:null,translated:null}),V=f.useMemo(()=>{var at;return S!=null?{id:S,data:(at=T==null?void 0:T.data)!=null?at:JG,rect:B}:null},[S,T]),A=f.useRef(null),[I,q]=f.useState(null),[Y,M]=f.useState(null),W=Al(j,Object.values(j)),E=vm("DndDescribedBy",o),R=f.useMemo(()=>L.getEnabled(),[L]),$=sK(h),{droppableRects:_,measureDroppableContainers:O,measuringScheduled:P}=BG(R,{dragging:C,dependencies:[D.x,D.y],config:$.droppable}),F=$G(k,S),Q=f.useMemo(()=>Y?iu(Y):null,[Y]),X=gs(),re=zG(F,$.draggable.measure);nK({activeNode:S!=null?k.get(S):null,config:X.layoutShiftCompensation,initialRect:re,measure:$.draggable.measure});const G=mb(F,$.draggable.measure,re),le=mb(F?F.parentElement:null),ie=f.useRef({activatorEvent:null,active:null,activeNode:F,collisionRect:null,collisions:null,droppableRects:_,draggableNodes:k,draggingNode:null,draggingNodeRect:null,droppableContainers:L,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),xe=L.getNodeFor((s=ie.current.over)==null?void 0:s.id),je=XG({measure:$.dragOverlay.measure}),Pe=(n=je.nodeRef.current)!=null?n:F,ee=C?(a=je.rect)!=null?a:G:null,pe=!!(je.nodeRef.current&&je.rect),be=HG(pe?null:G),we=OC(Pe?rr(Pe):null),ke=WG(C?xe??F:null),Ue=KG(ke),ct=LC(g,{transform:{x:D.x-be.x,y:D.y-be.y,scaleX:1,scaleY:1},activatorEvent:Y,active:V,activeNodeRect:G,containerNodeRect:le,draggingNodeRect:ee,over:ie.current.over,overlayNodeRect:je.rect,scrollableAncestors:ke,scrollableAncestorRects:Ue,windowRect:we}),sr=Q?fi(Q,D):null,Ar=YG(ke),xs=fb(Ar),Vs=fb(Ar,[G]),Ge=fi(ct,xs),z=ee?xG(ee,ct):null,de=V&&z?m({active:V,collisionRect:z,droppableRects:_,droppableContainers:R,pointerCoordinates:sr}):null,De=dG(de,"id"),[ge,gt]=f.useState(null),Ve=pe?ct:fi(ct,Vs),nt=fG(Ve,(i=ge==null?void 0:ge.rect)!=null?i:null,G),Dt=f.useRef(null),$t=f.useCallback((at,Kt)=>{let{sensor:Xt,options:vs}=Kt;if(A.current==null)return;const nr=k.get(A.current);if(!nr)return;const Be=at.nativeEvent,Tr=new Xt({active:A.current,activeNode:nr,event:Be,options:vs,context:ie,onAbort(bt){if(!k.get(bt))return;const{onDragAbort:_r}=W.current,Qr={id:bt};_r==null||_r(Qr),p({type:"onDragAbort",event:Qr})},onPending(bt,bs,_r,Qr){if(!k.get(bt))return;const{onDragPending:ra}=W.current,js={id:bt,constraint:bs,initialCoordinates:_r,offset:Qr};ra==null||ra(js),p({type:"onDragPending",event:js})},onStart(bt){const bs=A.current;if(bs==null)return;const _r=k.get(bs);if(!_r)return;const{onDragStart:Qr}=W.current,ta={activatorEvent:Be,active:{id:bs,data:_r.data,rect:B}};fa.unstable_batchedUpdates(()=>{Qr==null||Qr(ta),b(wn.Initializing),x({type:Nt.DragStart,initialCoordinates:bt,active:bs}),p({type:"onDragStart",event:ta}),q(Dt.current),M(Be)})},onMove(bt){x({type:Nt.DragMove,coordinates:bt})},onEnd:ys(Nt.DragEnd),onCancel:ys(Nt.DragCancel)});Dt.current=Tr;function ys(bt){return async function(){const{active:_r,collisions:Qr,over:ta,scrollAdjustedTranslate:ra}=ie.current;let js=null;if(_r&&ra){const{cancelDrop:sa}=W.current;js={activatorEvent:Be,active:_r,collisions:Qr,delta:ra,over:ta},bt===Nt.DragEnd&&typeof sa=="function"&&await Promise.resolve(sa(js))&&(bt=Nt.DragCancel)}A.current=null,fa.unstable_batchedUpdates(()=>{x({type:bt}),b(wn.Uninitialized),gt(null),q(null),M(null),Dt.current=null;const sa=bt===Nt.DragEnd?"onDragEnd":"onDragCancel";if(js){const ro=W.current[sa];ro==null||ro(js),p({type:sa,event:js})}})}}},[k]),Cm=f.useCallback((at,Kt)=>(Xt,vs)=>{const nr=Xt.nativeEvent,Be=k.get(vs);if(A.current!==null||!Be||nr.dndKit||nr.defaultPrevented)return;const Tr={active:Be};at(Xt,Kt.options,Tr)===!0&&(nr.dndKit={capturedBy:Kt.sensor},A.current=vs,$t(Xt,Kt))},[k,$t]),to=FG(u,Cm);qG(u),Is(()=>{G&&N===wn.Initializing&&b(wn.Initialized)},[G,N]),f.useEffect(()=>{const{onDragMove:at}=W.current,{active:Kt,activatorEvent:Xt,collisions:vs,over:nr}=ie.current;if(!Kt||!Xt)return;const Be={active:Kt,activatorEvent:Xt,collisions:vs,delta:{x:Ge.x,y:Ge.y},over:nr};fa.unstable_batchedUpdates(()=>{at==null||at(Be),p({type:"onDragMove",event:Be})})},[Ge.x,Ge.y]),f.useEffect(()=>{const{active:at,activatorEvent:Kt,collisions:Xt,droppableContainers:vs,scrollAdjustedTranslate:nr}=ie.current;if(!at||A.current==null||!Kt||!nr)return;const{onDragOver:Be}=W.current,Tr=vs.get(De),ys=Tr&&Tr.rect.current?{id:Tr.id,rect:Tr.rect.current,data:Tr.data,disabled:Tr.disabled}:null,bt={active:at,activatorEvent:Kt,collisions:Xt,delta:{x:nr.x,y:nr.y},over:ys};fa.unstable_batchedUpdates(()=>{gt(ys),Be==null||Be(bt),p({type:"onDragOver",event:bt})})},[De]),Is(()=>{ie.current={activatorEvent:Y,active:V,activeNode:F,collisionRect:z,collisions:de,droppableRects:_,draggableNodes:k,draggingNode:Pe,draggingNodeRect:ee,droppableContainers:L,over:ge,scrollableAncestors:ke,scrollAdjustedTranslate:Ge},B.current={initial:ee,translated:z}},[V,F,de,z,k,Pe,ee,_,L,ge,ke,Ge]),PG({...X,delta:D,draggingRect:z,pointerCoordinates:sr,scrollableAncestors:ke,scrollableAncestorRects:Ue});const Sm=f.useMemo(()=>({active:V,activeNode:F,activeNodeRect:G,activatorEvent:Y,collisions:de,containerNodeRect:le,dragOverlay:je,draggableNodes:k,droppableContainers:L,droppableRects:_,over:ge,measureDroppableContainers:O,scrollableAncestors:ke,scrollableAncestorRects:Ue,measuringConfiguration:$,measuringScheduled:P,windowRect:we}),[V,F,G,Y,de,le,je,k,L,_,ge,O,ke,Ue,$,P,we]),ea=f.useMemo(()=>({activatorEvent:Y,activators:to,active:V,activeNodeRect:G,ariaDescribedById:{draggable:E},dispatch:x,draggableNodes:k,over:ge,measureDroppableContainers:O}),[Y,to,V,G,x,E,k,ge,O]);return H.createElement(bC.Provider,{value:v},H.createElement(sc.Provider,{value:ea},H.createElement(PC.Provider,{value:Sm},H.createElement(jm.Provider,{value:nt},d)),H.createElement(rK,{disabled:(l==null?void 0:l.restoreFocus)===!1})),H.createElement(sG,{...l,hiddenTextDescribedById:E}));function gs(){const at=(I==null?void 0:I.autoScrollEnabled)===!1,Kt=typeof c=="object"?c.enabled===!1:c===!1,Xt=C&&!at&&!Kt;return typeof c=="object"?{...c,enabled:Xt}:{enabled:Xt}}}),iK=f.createContext(null),xb="button",oK="Draggable";function IC(e){let{id:t,data:s,disabled:n=!1,attributes:a}=e;const i=vm(oK),{activators:o,activatorEvent:l,active:c,activeNodeRect:d,ariaDescribedById:u,draggableNodes:m,over:h}=f.useContext(sc),{role:g=xb,roleDescription:j="draggable",tabIndex:y=0}=a??{},w=(c==null?void 0:c.id)===t,x=f.useContext(w?jm:iK),[p,v]=su(),[N,b]=su(),C=GG(o,t),S=Al(s);Is(()=>(m.set(t,{id:t,key:i,node:p,activatorNode:N,data:S}),()=>{const D=m.get(t);D&&D.key===i&&m.delete(t)}),[m,t]);const k=f.useMemo(()=>({role:g,tabIndex:y,"aria-disabled":n,"aria-pressed":w&&g===xb?!0:void 0,"aria-roledescription":j,"aria-describedby":u.draggable}),[n,g,y,w,j,u.draggable]);return{active:c,activatorEvent:l,activeNodeRect:d,attributes:k,isDragging:w,listeners:n?void 0:C,node:p,over:h,setNodeRef:v,setActivatorNodeRef:b,transform:x}}function lK(){return f.useContext(PC)}const cK="Droppable",dK={timeout:25};function $C(e){let{data:t,disabled:s=!1,id:n,resizeObserverConfig:a}=e;const i=vm(cK),{active:o,dispatch:l,over:c,measureDroppableContainers:d}=f.useContext(sc),u=f.useRef({disabled:s}),m=f.useRef(!1),h=f.useRef(null),g=f.useRef(null),{disabled:j,updateMeasurementsFor:y,timeout:w}={...dK,...a},x=Al(y??n),p=f.useCallback(()=>{if(!m.current){m.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{d(Array.isArray(x.current)?x.current:[x.current]),g.current=null},w)},[w]),v=bm({callback:p,disabled:j||!o}),N=f.useCallback((k,D)=>{v&&(D&&(v.unobserve(D),m.current=!1),k&&v.observe(k))},[v]),[b,C]=su(N),S=Al(t);return f.useEffect(()=>{!v||!b.current||(v.disconnect(),m.current=!1,v.observe(b.current))},[b,v]),f.useEffect(()=>(l({type:Nt.RegisterDroppable,element:{id:n,key:i,disabled:s,node:b,rect:h,data:S}}),()=>l({type:Nt.UnregisterDroppable,key:i,id:n})),[n]),f.useEffect(()=>{s!==u.current.disabled&&(l({type:Nt.SetDroppableDisabled,id:n,key:i,disabled:s}),u.current.disabled=s)},[n,i,s,l]),{active:o,rect:h,isOver:(c==null?void 0:c.id)===n,node:b,over:c,setNodeRef:C}}function uK(e){let{animation:t,children:s}=e;const[n,a]=f.useState(null),[i,o]=f.useState(null),l=nu(s);return!s&&!n&&l&&a(l),Is(()=>{if(!i)return;const c=n==null?void 0:n.key,d=n==null?void 0:n.props.id;if(c==null||d==null){a(null);return}Promise.resolve(t(d,i)).then(()=>{a(null)})},[t,n,i]),H.createElement(H.Fragment,null,s,n?f.cloneElement(n,{ref:o}):null)}const mK={x:0,y:0,scaleX:1,scaleY:1};function hK(e){let{children:t}=e;return H.createElement(sc.Provider,{value:RC},H.createElement(jm.Provider,{value:mK},t))}const fK={position:"fixed",touchAction:"none"},pK=e=>ym(e)?"transform 250ms ease":void 0,xK=f.forwardRef((e,t)=>{let{as:s,activatorEvent:n,adjustScale:a,children:i,className:o,rect:l,style:c,transform:d,transition:u=pK}=e;if(!l)return null;const m=a?d:{...d,scaleX:1,scaleY:1},h={...fK,width:l.width,height:l.height,top:l.top,left:l.left,transform:Wn.Transform.toString(m),transformOrigin:a&&n?oG(n,l):void 0,transition:typeof u=="function"?u(n):u,...c};return H.createElement(s,{className:o,style:h,ref:t},i)}),gK=e=>t=>{let{active:s,dragOverlay:n}=t;const a={},{styles:i,className:o}=e;if(i!=null&&i.active)for(const[l,c]of Object.entries(i.active))c!==void 0&&(a[l]=s.node.style.getPropertyValue(l),s.node.style.setProperty(l,c));if(i!=null&&i.dragOverlay)for(const[l,c]of Object.entries(i.dragOverlay))c!==void 0&&n.node.style.setProperty(l,c);return o!=null&&o.active&&s.node.classList.add(o.active),o!=null&&o.dragOverlay&&n.node.classList.add(o.dragOverlay),function(){for(const[c,d]of Object.entries(a))s.node.style.setProperty(c,d);o!=null&&o.active&&s.node.classList.remove(o.active)}},vK=e=>{let{transform:{initial:t,final:s}}=e;return[{transform:Wn.Transform.toString(t)},{transform:Wn.Transform.toString(s)}]},yK={duration:250,easing:"ease",keyframes:vK,sideEffects:gK({styles:{active:{opacity:"0"}}})};function bK(e){let{config:t,draggableNodes:s,droppableContainers:n,measuringConfiguration:a}=e;return gm((i,o)=>{if(t===null)return;const l=s.get(i);if(!l)return;const c=l.node.current;if(!c)return;const d=MC(o);if(!d)return;const{transform:u}=rr(o).getComputedStyle(o),m=wC(u);if(!m)return;const h=typeof t=="function"?t:jK(t);return AC(c,a.draggable.measure),h({active:{id:i,data:l.data,node:c,rect:a.draggable.measure(c)},draggableNodes:s,dragOverlay:{node:o,rect:a.dragOverlay.measure(d)},droppableContainers:n,measuringConfiguration:a,transform:m})})}function jK(e){const{duration:t,easing:s,sideEffects:n,keyframes:a}={...yK,...e};return i=>{let{active:o,dragOverlay:l,transform:c,...d}=i;if(!t)return;const u={x:l.rect.left-o.rect.left,y:l.rect.top-o.rect.top},m={scaleX:c.scaleX!==1?o.rect.width*c.scaleX/l.rect.width:1,scaleY:c.scaleY!==1?o.rect.height*c.scaleY/l.rect.height:1},h={x:c.x-u.x,y:c.y-u.y,...m},g=a({...d,active:o,dragOverlay:l,transform:{initial:c,final:h}}),[j]=g,y=g[g.length-1];if(JSON.stringify(j)===JSON.stringify(y))return;const w=n==null?void 0:n({active:o,dragOverlay:l,...d}),x=l.node.animate(g,{duration:t,easing:s,fill:"forwards"});return new Promise(p=>{x.onfinish=()=>{w==null||w(),p()}})}}let gb=0;function wK(e){return f.useMemo(()=>{if(e!=null)return gb++,gb},[e])}const NK=H.memo(e=>{let{adjustScale:t=!1,children:s,dropAnimation:n,style:a,transition:i,modifiers:o,wrapperElement:l="div",className:c,zIndex:d=999}=e;const{activatorEvent:u,active:m,activeNodeRect:h,containerNodeRect:g,draggableNodes:j,droppableContainers:y,dragOverlay:w,over:x,measuringConfiguration:p,scrollableAncestors:v,scrollableAncestorRects:N,windowRect:b}=lK(),C=f.useContext(jm),S=wK(m==null?void 0:m.id),k=LC(o,{activatorEvent:u,active:m,activeNodeRect:h,containerNodeRect:g,draggingNodeRect:w.rect,over:x,overlayNodeRect:w.rect,scrollableAncestors:v,scrollableAncestorRects:N,transform:C,windowRect:b}),D=Pg(h),L=bK({config:n,draggableNodes:j,droppableContainers:y,measuringConfiguration:p}),T=D?w.setRef:void 0;return H.createElement(hK,null,H.createElement(uK,{animation:L},m&&S?H.createElement(xK,{key:S,id:m.id,ref:T,as:l,activatorEvent:u,adjustScale:t,className:c,transition:i,rect:D,style:{zIndex:d,...a},transform:k},s):null))});function Lg(e,t,s){const n=e.slice();return n.splice(s<0?n.length+s:s,0,n.splice(t,1)[0]),n}function Oc(e){return e!==null&&e>=0}const CK=e=>{let{rects:t,activeIndex:s,overIndex:n,index:a}=e;const i=Lg(t,n,s),o=t[a],l=i[a];return!l||!o?null:{x:l.left-o.left,y:l.top-o.top,scaleX:l.width/o.width,scaleY:l.height/o.height}},SK="Sortable",EK=H.createContext({activeIndex:-1,containerId:SK,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:CK,disabled:{draggable:!1,droppable:!1}}),kK=e=>{let{id:t,items:s,activeIndex:n,overIndex:a}=e;return Lg(s,n,a).indexOf(t)},DK=e=>{let{containerId:t,isSorting:s,wasDragging:n,index:a,items:i,newIndex:o,previousItems:l,previousContainerId:c,transition:d}=e;return!d||!n||l!==i&&a===o?!1:s?!0:o!==a&&t===c},AK={duration:200,easing:"ease"},FC="transform",TK=Wn.Transition.toString({property:FC,duration:0,easing:"linear"}),_K={roleDescription:"sortable"};function OK(e){let{disabled:t,index:s,node:n,rect:a}=e;const[i,o]=f.useState(null),l=f.useRef(s);return Is(()=>{if(!t&&s!==l.current&&n.current){const c=a.current;if(c){const d=Zi(n.current,{ignoreTransform:!0}),u={x:c.left-d.left,y:c.top-d.top,scaleX:c.width/d.width,scaleY:c.height/d.height};(u.x||u.y)&&o(u)}}s!==l.current&&(l.current=s)},[t,s,n,a]),f.useEffect(()=>{i&&o(null)},[i]),i}function MK(e){let{animateLayoutChanges:t=DK,attributes:s,disabled:n,data:a,getNewIndex:i=kK,id:o,strategy:l,resizeObserverConfig:c,transition:d=AK}=e;const{items:u,containerId:m,activeIndex:h,disabled:g,disableTransforms:j,sortedRects:y,overIndex:w,useDragOverlay:x,strategy:p}=f.useContext(EK),v=RK(n,g),N=u.indexOf(o),b=f.useMemo(()=>({sortable:{containerId:m,index:N,items:u},...a}),[m,a,N,u]),C=f.useMemo(()=>u.slice(u.indexOf(o)),[u,o]),{rect:S,node:k,isOver:D,setNodeRef:L}=$C({id:o,data:b,disabled:v.droppable,resizeObserverConfig:{updateMeasurementsFor:C,...c}}),{active:T,activatorEvent:B,activeNodeRect:V,attributes:A,setNodeRef:I,listeners:q,isDragging:Y,over:M,setActivatorNodeRef:W,transform:E}=IC({id:o,data:b,attributes:{..._K,...s},disabled:v.draggable}),R=Hq(L,I),$=!!T,_=$&&!j&&Oc(h)&&Oc(w),O=!x&&Y,P=O&&_?E:null,Q=_?P??(l??p)({rects:y,activeNodeRect:V,activeIndex:h,overIndex:w,index:N}):null,X=Oc(h)&&Oc(w)?i({id:o,items:u,activeIndex:h,overIndex:w}):N,re=T==null?void 0:T.id,G=f.useRef({activeId:re,items:u,newIndex:X,containerId:m}),le=u!==G.current.items,ie=t({active:T,containerId:m,isDragging:Y,isSorting:$,id:o,index:N,items:u,newIndex:G.current.newIndex,previousItems:G.current.items,previousContainerId:G.current.containerId,transition:d,wasDragging:G.current.activeId!=null}),xe=OK({disabled:!ie,index:N,node:k,rect:S});return f.useEffect(()=>{$&&G.current.newIndex!==X&&(G.current.newIndex=X),m!==G.current.containerId&&(G.current.containerId=m),u!==G.current.items&&(G.current.items=u)},[$,X,m,u]),f.useEffect(()=>{if(re===G.current.activeId)return;if(re!=null&&G.current.activeId==null){G.current.activeId=re;return}const Pe=setTimeout(()=>{G.current.activeId=re},50);return()=>clearTimeout(Pe)},[re]),{active:T,activeIndex:h,attributes:A,data:b,rect:S,index:N,newIndex:X,items:u,isOver:D,isSorting:$,isDragging:Y,listeners:q,node:k,overIndex:w,over:M,setNodeRef:R,setActivatorNodeRef:W,setDroppableNodeRef:L,setDraggableNodeRef:I,transform:xe??Q,transition:je()};function je(){if(xe||le&&G.current.newIndex===N)return TK;if(!(O&&!ym(B)||!d)&&($||ie))return Wn.Transition.toString({...d,property:FC})}}function RK(e,t){var s,n;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(s=e==null?void 0:e.draggable)!=null?s:t.draggable,droppable:(n=e==null?void 0:e.droppable)!=null?n:t.droppable}}$e.Down,$e.Right,$e.Up,$e.Left;const PK=()=>{console.log("ComponentLibrary - Rendering");const e=[{type:"hero-banner",name:"Banner Principal",description:"Banner destacado con título, subtítulo y botón CTA",icon:"🎯",category:"Contenido Principal",color:"bg-gradient-to-r from-blue-500 to-purple-600"},{type:"service-cards",name:"Tarjetas de Servicios",description:"Grid de servicios con iconos y descripciones",icon:"⚖️",category:"Servicios",color:"bg-gradient-to-r from-green-500 to-teal-600"},{type:"contact-form",name:"Formulario de Contacto",description:"Formulario para que los clientes se pongan en contacto",icon:"📧",category:"Contacto",color:"bg-gradient-to-r from-orange-500 to-red-600"},{type:"testimonials",name:"Testimonios",description:"Opiniones y comentarios de clientes satisfechos",icon:"💬",category:"Social Proof",color:"bg-gradient-to-r from-purple-500 to-pink-600"},{type:"stats",name:"Estadísticas",description:"Números y métricas importantes del despacho",icon:"📊",category:"Social Proof",color:"bg-gradient-to-r from-indigo-500 to-blue-600"},{type:"text-block",name:"Bloque de Texto",description:"Texto con título y contenido personalizable",icon:"📝",category:"Contenido",color:"bg-gradient-to-r from-gray-500 to-gray-700"},{type:"image-gallery",name:"Galería de Imágenes",description:"Grid de imágenes con títulos opcionales",icon:"🖼️",category:"Contenido",color:"bg-gradient-to-r from-yellow-500 to-orange-600"},{type:"map",name:"Mapa de Ubicación",description:"Mapa interactivo con la ubicación del despacho",icon:"🗺️",category:"Contacto",color:"bg-gradient-to-r from-teal-500 to-green-600"},{type:"divider",name:"Separador",description:"Línea divisoria para separar secciones",icon:"➖",category:"Layout",color:"bg-gradient-to-r from-gray-400 to-gray-600"},{type:"spacer",name:"Espaciador",description:"Espacio vertical para separar elementos",icon:"⬜",category:"Layout",color:"bg-gradient-to-r from-gray-300 to-gray-500"}],t=[...new Set(e.map(s=>s.category))];return r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[r.jsxs("div",{className:"p-4 border-b bg-gradient-to-r from-blue-50 to-indigo-50",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"📚 Biblioteca de Componentes"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Arrastra componentes al canvas"})]}),r.jsx("div",{className:"p-4 max-h-[800px] overflow-y-auto",children:t.map(s=>r.jsxs("div",{className:"mb-6",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3 px-2 py-1 bg-gray-100 rounded",children:s}),r.jsx("div",{className:"space-y-2",children:e.filter(n=>n.category===s).map(n=>r.jsx(LK,{component:n},n.type))})]},s))})]})},LK=({component:e})=>{const{attributes:t,listeners:s,setNodeRef:n,transform:a,isDragging:i}=IC({id:e.type,data:{type:"component-library",component:e}}),o=a?{transform:`translate3d(${a.x}px, ${a.y}px, 0)`}:void 0;return console.log(`DraggableComponent - ${e.type} - isDragging:`,i),r.jsxs("div",{ref:n,...s,...t,style:o,className:`
        p-4 border rounded-lg cursor-move transition-all hover:shadow-md
        ${i?"bg-blue-50 border-blue-300 shadow-lg opacity-50 scale-105":"bg-white border-gray-200 hover:border-blue-300 hover:bg-blue-50"}
      `,children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center text-2xl ${e.color}`,children:e.icon}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h5",{className:"text-sm font-semibold text-gray-900 truncate",children:e.name}),r.jsx("p",{className:"text-xs text-gray-500 mt-1 leading-relaxed",children:e.description})]})]}),r.jsx("div",{className:"mt-2 text-xs text-gray-400 text-center",children:"← Arrastra al canvas"})]})},IK=({layout:e,onComponentSelect:t,onComponentDelete:s,selectedComponent:n,isPreviewMode:a})=>{const{setNodeRef:i,isOver:o}=$C({id:"canvas-drop-zone"});return console.log("Canvas - Rendering, components:",e.components.length),console.log("Canvas - isPreviewMode:",a),r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[r.jsxs("div",{className:"p-4 border-b bg-gradient-to-r from-green-50 to-emerald-50",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:a?"👁️ Vista Previa":"🎨 Canvas de Diseño"}),r.jsx("p",{className:"text-sm text-gray-600",children:a?"Vista previa de la página principal":"Arrastra componentes aquí para diseñar la página"})]}),r.jsxs("div",{ref:i,className:`
          min-h-[600px] p-6 transition-all
          ${o?"bg-blue-50 border-2 border-dashed border-blue-400":"bg-gray-50 border-2 border-dashed border-gray-300"}
          ${a?"bg-white":""}
        `,children:[e.components.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center h-96 text-center",children:[r.jsx("div",{className:"text-6xl mb-4",children:"🎨"}),r.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Canvas Vacío"}),r.jsx("p",{className:"text-gray-500 mb-4 max-w-md",children:a?"No hay componentes para mostrar en la vista previa":"Arrastra componentes desde la biblioteca para comenzar a diseñar"}),!a&&r.jsx("div",{className:"text-sm text-gray-400",children:"💡 Tip: Comienza con un Banner Principal"})]}):r.jsx("div",{className:"space-y-4",children:e.components.map((l,c)=>r.jsx($K,{component:l,index:c,onSelect:t,onDelete:s,isSelected:(n==null?void 0:n.id)===l.id,isPreviewMode:a},l.id))}),o&&!a&&r.jsx("div",{className:"text-center py-8 text-blue-600 font-medium",children:"✨ Suelta aquí para agregar el componente"})]})]})},$K=({component:e,index:t,onSelect:s,onDelete:n,isSelected:a,isPreviewMode:i})=>{const{attributes:o,listeners:l,setNodeRef:c,transform:d,transition:u,isDragging:m}=MK({id:e.id,data:{type:"canvas-component",component:e}}),h={transform:Wn.Transform.toString(d),transition:u};return console.log(`CanvasComponent - ${e.type} - isSelected:`,a),r.jsxs("div",{ref:c,style:h,...o,...l,className:`
        relative group transition-all
        ${m?"opacity-50 scale-95":""}
        ${a&&!i?"ring-2 ring-blue-500 ring-offset-2":"hover:ring-1 hover:ring-gray-300"}
      `,children:[!i&&r.jsxs("div",{className:"absolute -top-2 -left-2 z-10 flex space-x-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[r.jsx("button",{onClick:g=>{g.stopPropagation(),s(e)},className:"bg-blue-500 text-white p-1 rounded-full text-xs hover:bg-blue-600 transition-colors",title:"Editar componente",children:"✏️"}),r.jsx("button",{onClick:g=>{g.stopPropagation(),n(e.id)},className:"bg-red-500 text-white p-1 rounded-full text-xs hover:bg-red-600 transition-colors",title:"Eliminar componente",children:"🗑️"})]}),!i&&r.jsx("div",{className:"absolute -top-2 -right-2 bg-gray-500 text-white text-xs px-2 py-1 rounded-full",children:t+1}),r.jsx("div",{className:`
          ${i?"":"cursor-move"}
          ${a&&!i?"bg-blue-50":""}
        `,onClick:()=>!i&&s(e),children:r.jsx(_N,{component:e})}),a&&!i&&r.jsx("div",{className:"absolute inset-0 border-2 border-blue-500 pointer-events-none rounded-lg"})]})},FK=({component:e,onUpdate:t})=>{const[s,n]=f.useState(e.props);f.useEffect(()=>{n(e.props)},[e]),console.log("PropertiesPanel - Rendering for component:",e.type);const a=(d,u)=>{const m={...s,[d]:u};n(m),t(e.id,m)},i=(d,u,m,h)=>{const g=[...s[d]||[]];g[u]={...g[u],[m]:h},a(d,g)},o=(d,u)=>{const m=[...s[d]||[],u];a(d,m)},l=(d,u)=>{const m=[...s[d]||[]];m.splice(u,1),a(d,m)},c=()=>{switch(e.type){case"hero-banner":return r.jsxs("div",{className:"space-y-4",children:[r.jsx(Ke,{label:"Título Principal",value:s.title||"",onChange:d=>a("title",d),type:"text",placeholder:"Ej: Despacho de Abogados García & Asociados"}),r.jsx(Ke,{label:"Subtítulo",value:s.subtitle||"",onChange:d=>a("subtitle",d),type:"textarea",placeholder:"Ej: Más de 15 años de experiencia en servicios legales profesionales"}),r.jsx(Ke,{label:"Texto del Botón",value:s.ctaText||"",onChange:d=>a("ctaText",d),type:"text",placeholder:"Ej: Consulta Gratuita"}),r.jsx(Ke,{label:"Enlace del Botón",value:s.ctaLink||"",onChange:d=>a("ctaLink",d),type:"text",placeholder:"Ej: /contacto o https://wa.me/34612345678"})]});case"service-cards":return r.jsxs("div",{className:"space-y-4",children:[r.jsx(Ke,{label:"Título de la Sección",value:s.title||"",onChange:d=>a("title",d),type:"text",placeholder:"Ej: Nuestros Servicios Legales"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Servicios"}),r.jsx("button",{onClick:()=>o("services",{icon:"⚖️",title:"Nuevo Servicio",description:"Descripción del servicio"}),className:"text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600",children:"+ Agregar"})]}),(s.services||[]).map((d,u)=>r.jsxs("div",{className:"p-3 border rounded-lg bg-gray-50 space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("span",{className:"text-xs font-medium text-gray-600",children:["Servicio ",u+1]}),r.jsx("button",{onClick:()=>l("services",u),className:"text-xs bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600",children:"Eliminar"})]}),r.jsx(Ke,{label:"Icono (emoji)",value:d.icon||"",onChange:m=>i("services",u,"icon",m),type:"text",placeholder:"Ej: ⚖️ 👥 🏢"}),r.jsx(Ke,{label:"Título del Servicio",value:d.title||"",onChange:m=>i("services",u,"title",m),type:"text",placeholder:"Ej: Derecho Civil"}),r.jsx(Ke,{label:"Descripción",value:d.description||"",onChange:m=>i("services",u,"description",m),type:"textarea",placeholder:"Ej: Asesoría especializada en casos civiles"})]},u))]})]});case"contact-form":return r.jsxs("div",{className:"space-y-4",children:[r.jsx(Ke,{label:"Título del Formulario",value:s.title||"",onChange:d=>a("title",d),type:"text",placeholder:"Ej: Solicita tu Consulta Gratuita"}),r.jsx(Ke,{label:"Subtítulo",value:s.subtitle||"",onChange:d=>a("subtitle",d),type:"textarea",placeholder:"Ej: Nuestros abogados especialistas están listos para ayudarte"}),r.jsx(Ke,{label:"Texto del Botón",value:s.submitText||"",onChange:d=>a("submitText",d),type:"text",placeholder:"Ej: Enviar Consulta"})]});case"testimonials":return r.jsxs("div",{className:"space-y-4",children:[r.jsx(Ke,{label:"Título de la Sección",value:s.title||"",onChange:d=>a("title",d),type:"text",placeholder:"Ej: Lo que dicen nuestros clientes"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Testimonios"}),r.jsx("button",{onClick:()=>o("testimonials",{name:"Cliente",text:"Excelente servicio",rating:5}),className:"text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600",children:"+ Agregar"})]}),(s.testimonials||[]).map((d,u)=>r.jsxs("div",{className:"p-3 border rounded-lg bg-gray-50 space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("span",{className:"text-xs font-medium text-gray-600",children:["Testimonio ",u+1]}),r.jsx("button",{onClick:()=>l("testimonials",u),className:"text-xs bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600",children:"Eliminar"})]}),r.jsx(Ke,{label:"Nombre del Cliente",value:d.name||"",onChange:m=>i("testimonials",u,"name",m),type:"text",placeholder:"Ej: María García"}),r.jsx(Ke,{label:"Testimonio",value:d.text||"",onChange:m=>i("testimonials",u,"text",m),type:"textarea",placeholder:"Ej: Excelente servicio profesional..."})]},u))]})]});case"stats":return r.jsxs("div",{className:"space-y-4",children:[r.jsx(Ke,{label:"Título de la Sección",value:s.title||"",onChange:d=>a("title",d),type:"text",placeholder:"Ej: Nuestros Números"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Estadísticas"}),r.jsx("button",{onClick:()=>o("stats",{value:"0",label:"Nueva Estadística"}),className:"text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600",children:"+ Agregar"})]}),(s.stats||[]).map((d,u)=>r.jsxs("div",{className:"p-3 border rounded-lg bg-gray-50 space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("span",{className:"text-xs font-medium text-gray-600",children:["Estadística ",u+1]}),r.jsx("button",{onClick:()=>l("stats",u),className:"text-xs bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600",children:"Eliminar"})]}),r.jsx(Ke,{label:"Valor",value:d.value||"",onChange:m=>i("stats",u,"value",m),type:"text",placeholder:"Ej: 500+"}),r.jsx(Ke,{label:"Etiqueta",value:d.label||"",onChange:m=>i("stats",u,"label",m),type:"text",placeholder:"Ej: Casos Exitosos"})]},u))]})]});case"text-block":return r.jsxs("div",{className:"space-y-4",children:[r.jsx(Ke,{label:"Título",value:s.title||"",onChange:d=>a("title",d),type:"text",placeholder:"Ej: Sobre Nosotros"}),r.jsx(Ke,{label:"Contenido",value:s.content||"",onChange:d=>a("content",d),type:"textarea",placeholder:"Ej: Somos un despacho de abogados comprometido..."}),r.jsx(Mc,{label:"Alineación del Texto",value:s.alignment||"left",onChange:d=>a("alignment",d),options:[{value:"left",label:"Izquierda"},{value:"center",label:"Centro"},{value:"right",label:"Derecha"}]}),r.jsx(Mc,{label:"Tamaño de Fuente",value:s.fontSize||"medium",onChange:d=>a("fontSize",d),options:[{value:"small",label:"Pequeño"},{value:"medium",label:"Mediano"},{value:"large",label:"Grande"}]})]});case"image-gallery":return r.jsxs("div",{className:"space-y-4",children:[r.jsx(Ke,{label:"Título de la Galería",value:s.title||"",onChange:d=>a("title",d),type:"text",placeholder:"Ej: Nuestras Instalaciones"}),r.jsx(Mc,{label:"Número de Columnas",value:s.columns||3,onChange:d=>a("columns",parseInt(d)),options:[{value:2,label:"2 columnas"},{value:3,label:"3 columnas"},{value:4,label:"4 columnas"}]})]});case"map":return r.jsxs("div",{className:"space-y-4",children:[r.jsx(Ke,{label:"Título",value:s.title||"",onChange:d=>a("title",d),type:"text",placeholder:"Ej: Nuestra Ubicación"}),r.jsx(Ke,{label:"Dirección",value:s.address||"",onChange:d=>a("address",d),type:"text",placeholder:"Ej: Calle Principal 123, Madrid"})]});case"divider":return r.jsxs("div",{className:"space-y-4",children:[r.jsx(Mc,{label:"Tipo de Línea",value:s.type||"solid",onChange:d=>a("type",d),options:[{value:"solid",label:"Sólida"},{value:"dashed",label:"Punteada"},{value:"dotted",label:"Puntos"}]}),r.jsx(Ke,{label:"Color",value:s.color||"#e5e7eb",onChange:d=>a("color",d),type:"color"}),r.jsx(Ke,{label:"Grosor (px)",value:s.thickness||1,onChange:d=>a("thickness",parseInt(d)),type:"number"})]});case"spacer":return r.jsx("div",{className:"space-y-4",children:r.jsx(Ke,{label:"Altura (px)",value:s.height||40,onChange:d=>a("height",parseInt(d)),type:"number"})});default:return r.jsx("div",{className:"text-gray-500 text-center py-4",children:"No hay propiedades editables para este componente"})}};return r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[r.jsxs("div",{className:"p-4 border-b bg-gradient-to-r from-purple-50 to-pink-50",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"⚙️ Propiedades"}),r.jsx("p",{className:"text-sm text-gray-600",children:BK(e.type)})]}),r.jsx("div",{className:"p-4 max-h-[600px] overflow-y-auto",children:c()})]})},Ke=({label:e,value:t,onChange:s,type:n,placeholder:a})=>r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),n==="textarea"?r.jsx("textarea",{value:t,onChange:i=>s(i.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",rows:3,placeholder:a}):r.jsx("input",{type:n,value:t,onChange:i=>s(i.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",placeholder:a})]}),Mc=({label:e,value:t,onChange:s,options:n})=>r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),r.jsx("select",{value:t,onChange:a=>s(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",children:n.map(a=>r.jsx("option",{value:a.value,children:a.label},a.value))})]}),BK=e=>({"hero-banner":"Banner Principal","service-cards":"Tarjetas de Servicios","contact-form":"Formulario de Contacto",testimonials:"Testimonios",stats:"Estadísticas","text-block":"Bloque de Texto","image-gallery":"Galería de Imágenes",map:"Mapa de Ubicación",divider:"Separador",spacer:"Espaciador"})[e]||e,zK=()=>{const[e,t]=f.useState({id:"home-layout",name:"Home Page",components:[],version:1,lastModified:new Date().toISOString()}),[s,n]=f.useState(null),[a,i]=f.useState(!1),[o,l]=f.useState(null),c=aG(nG(Rg,{activationConstraint:{distance:8}}));console.log("HomeBuilder - Rendering, components:",e.components.length);const d=w=>{console.log("Drag start:",w),l(w.active.id)},u=f.useCallback(w=>{var v;console.log("Drag end:",w);const{active:x,over:p}=w;if(l(null),!!p)if(((v=x.data.current)==null?void 0:v.type)==="component-library"){const N=x.id,b={id:`component-${Date.now()}`,type:N,props:UK(N),order:e.components.length};console.log("Adding new component:",b),t(C=>({...C,components:[...C.components,b]}))}else x.id!==p.id&&t(N=>({...N,components:Lg(N.components,N.components.findIndex(b=>b.id===x.id),N.components.findIndex(b=>b.id===p.id)).map((b,C)=>({...b,order:C}))}))},[e.components]),m=f.useCallback(w=>{console.log("Component selected:",w),n(w)},[]),h=f.useCallback((w,x)=>{t(p=>({...p,components:p.components.map(v=>v.id===w?{...v,props:{...v.props,...x}}:v)}))},[]),g=f.useCallback(w=>{t(x=>({...x,components:x.components.filter(p=>p.id!==w)})),n(null)},[]),j=async()=>{try{console.log("Saving layout:",e),alert("Layout guardado exitosamente! (Modo demo)")}catch(w){console.error("Error saving layout:",w),alert("Error al guardar el layout")}},y=async()=>{try{console.log("Loading layout..."),alert("Layout cargado exitosamente! (Modo demo)")}catch(w){console.error("Error loading layout:",w)}};return r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-white shadow-sm border-b",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex justify-between items-center py-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"🎨 Home Builder"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Diseña la página principal arrastrando componentes"})]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsx("button",{onClick:()=>i(!a),className:`px-4 py-2 rounded-md text-sm font-medium ${a?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:a?"Editar":"Vista Previa"}),r.jsx("button",{onClick:y,className:"px-4 py-2 bg-gray-600 text-white rounded-md text-sm font-medium hover:bg-gray-700",children:"Cargar"}),r.jsx("button",{onClick:j,className:"px-4 py-2 bg-green-600 text-white rounded-md text-sm font-medium hover:bg-green-700",children:"Guardar"})]})]})})}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:r.jsxs(aK,{sensors:c,collisionDetection:uG,onDragStart:d,onDragEnd:u,children:[r.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[!a&&r.jsx("div",{className:"col-span-3",children:r.jsx(PK,{})}),r.jsx("div",{className:a?"col-span-12":"col-span-6",children:r.jsx(IK,{layout:e,onComponentSelect:m,onComponentDelete:g,selectedComponent:s,isPreviewMode:a})}),!a&&s&&r.jsx("div",{className:"col-span-3",children:r.jsx(FK,{component:s,onUpdate:h})})]}),r.jsx(NK,{children:o?r.jsx("div",{className:"bg-white border-2 border-blue-500 rounded-lg p-4 shadow-lg opacity-80",children:r.jsx("div",{className:"text-sm font-medium text-gray-900",children:o.startsWith("component-")?"Nuevo componente":"Componente"})}):null})]})})]})},UK=e=>({"hero-banner":{title:"Bienvenido a Nuestro Despacho",subtitle:"Servicios legales profesionales y confiables",backgroundImage:"/images/hero-bg.jpg",ctaText:"Consultar Ahora",ctaLink:"/contact"},"service-cards":{title:"Nuestros Servicios",services:[{title:"Derecho Civil",description:"Asesoría en casos civiles",icon:"⚖️"},{title:"Derecho Laboral",description:"Protección de derechos laborales",icon:"👥"},{title:"Derecho Familiar",description:"Divorcios y custodia",icon:"👨‍👩‍👧‍👦"}]},"contact-form":{title:"Contáctanos",subtitle:"Estamos aquí para ayudarte",fields:["nombre","email","telefono","mensaje"]},testimonials:{title:"Lo que dicen nuestros clientes",testimonials:[{name:"María García",text:"Excelente servicio profesional",rating:5},{name:"Juan Pérez",text:"Muy satisfecho con el resultado",rating:5}]},stats:{title:"Nuestros Números",stats:[{label:"Casos Exitosos",value:"500+"},{label:"Años de Experiencia",value:"15"},{label:"Clientes Satisfechos",value:"1000+"}]},"text-block":{title:"Sobre Nosotros",content:"Somos un despacho de abogados comprometido con la excelencia y la justicia.",alignment:"left",fontSize:"medium"},"image-gallery":{title:"Nuestras Instalaciones",columns:3,showCaptions:!0,images:["/images/office-1.jpg","/images/office-2.jpg","/images/office-3.jpg"]},map:{title:"Nuestra Ubicación",address:"Calle Principal 123, Ciudad",latitude:40.4168,longitude:-3.7038,zoom:15},divider:{type:"solid",color:"#e5e7eb",thickness:1},spacer:{height:40}})[e]||{},VK=()=>r.jsx(zK,{}),HK=()=>{const{user:e}=Ce(),[t,s]=f.useState([]),[n,a]=f.useState(!0),[i,o]=f.useState(null),[l,c]=f.useState(null),[d,u]=f.useState(!1),[m,h]=f.useState({name:"",role:"ADMIN",orientation:"horizontal",isActive:!0,items:[]});f.useEffect(()=>{g()},[]);const g=async()=>{try{a(!0);const b=await K.get("/menu-config");s(b.data)}catch(b){console.error("Error fetching menu configs:",b)}finally{a(!1)}},j=async()=>{try{await K.post("/menu-config",m),u(!1),h({name:"",role:"ADMIN",orientation:"horizontal",isActive:!0,items:[]}),g()}catch(b){console.error("Error creating menu:",b)}},y=async()=>{if(l)try{await K.patch(`/menu-config/${l.id}`,l),c(null),g()}catch(b){console.error("Error updating menu:",b)}},w=async b=>{if(confirm("¿Estás seguro de que quieres eliminar este menú?"))try{await K.delete(`/menu-config/${b}`),g()}catch(C){console.error("Error deleting menu:",C)}},x=b=>{const C={label:"Nuevo elemento",url:"/",icon:"📄",order:b.items.length,isVisible:!0,isExternal:!1},S={...b,items:[...b.items,C]};(l==null?void 0:l.id)===b.id&&c(S)},p=(b,C,S,k)=>{const D=[...b.items];D[C]={...D[C],[S]:k};const L={...b,items:D};(l==null?void 0:l.id)===b.id&&c(L)},v=(b,C)=>{const S=b.items.filter((D,L)=>L!==C),k={...b,items:S};(l==null?void 0:l.id)===b.id&&c(k)},N=b=>({ADMIN:"Administrador",ABOGADO:"Abogado",CLIENTE:"Cliente"})[b]||b;return n?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Cargando configuraciones de menús..."})]})}):r.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"🍽️ Configuración de Menús"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Gestiona los menús de navegación para cada rol de usuario"})]}),r.jsx("div",{className:"mb-6",children:r.jsx("button",{onClick:()=>u(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"➕ Crear Nuevo Menú"})}),d&&r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Crear Nuevo Menú"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre del Menú"}),r.jsx("input",{type:"text",value:m.name,onChange:b=>h({...m,name:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ej: Menú Principal"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rol"}),r.jsxs("select",{value:m.role,onChange:b=>h({...m,role:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"ADMIN",children:"Administrador"}),r.jsx("option",{value:"ABOGADO",children:"Abogado"}),r.jsx("option",{value:"CLIENTE",children:"Cliente"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Orientación"}),r.jsxs("select",{value:m.orientation,onChange:b=>h({...m,orientation:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"horizontal",children:"Horizontal"}),r.jsx("option",{value:"vertical",children:"Vertical"})]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:m.isActive,onChange:b=>h({...m,isActive:b.target.checked}),className:"mr-2"}),r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Menú Activo"})]})]}),r.jsxs("div",{className:"mt-4 flex space-x-3",children:[r.jsx("button",{onClick:j,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors",children:"✅ Crear Menú"}),r.jsx("button",{onClick:()=>u(!1),className:"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition-colors",children:"❌ Cancelar"})]})]}),r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:t.map(b=>r.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-4",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold",children:b.name}),r.jsxs("p",{className:"text-blue-100 text-sm",children:[N(b.role)," • ",b.orientation==="horizontal"?"Horizontal":"Vertical"]})]}),r.jsxs("div",{className:"flex space-x-2",children:[b.isActive&&r.jsx("span",{className:"bg-green-500 text-white px-2 py-1 rounded-full text-xs",children:"Activo"}),r.jsx("button",{onClick:()=>c((l==null?void 0:l.id)===b.id?null:b),className:"bg-white bg-opacity-20 hover:bg-opacity-30 px-3 py-1 rounded text-sm transition-colors",children:(l==null?void 0:l.id)===b.id?"❌ Cancelar":"✏️ Editar"}),r.jsx("button",{onClick:()=>w(b.id),className:"bg-red-500 hover:bg-red-600 px-3 py-1 rounded text-sm transition-colors",children:"🗑️ Eliminar"})]})]})}),r.jsx("div",{className:"p-4",children:(l==null?void 0:l.id)===b.id?r.jsxs("div",{children:[r.jsx("div",{className:"mb-4",children:r.jsx("button",{onClick:()=>x(l),className:"bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600 transition-colors",children:"➕ Agregar Elemento"})}),l.items.map((C,S)=>r.jsx("div",{className:"border border-gray-200 rounded p-3 mb-3",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsx("input",{type:"text",value:C.label,onChange:k=>p(l,S,"label",k.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"Etiqueta"}),r.jsx("input",{type:"text",value:C.url,onChange:k=>p(l,S,"url",k.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"URL"}),r.jsx("input",{type:"text",value:C.icon,onChange:k=>p(l,S,"icon",k.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"Icono (emoji)"}),r.jsx("input",{type:"number",value:C.order,onChange:k=>p(l,S,"order",parseInt(k.target.value)),className:"px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"Orden"}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("label",{className:"flex items-center text-sm",children:[r.jsx("input",{type:"checkbox",checked:C.isVisible,onChange:k=>p(l,S,"isVisible",k.target.checked),className:"mr-2"}),"Visible"]}),r.jsxs("label",{className:"flex items-center text-sm",children:[r.jsx("input",{type:"checkbox",checked:C.isExternal,onChange:k=>p(l,S,"isExternal",k.target.checked),className:"mr-2"}),"Externo"]})]}),r.jsx("button",{onClick:()=>v(l,S),className:"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600 transition-colors",children:"🗑️ Eliminar"})]})},S)),r.jsxs("div",{className:"mt-4 flex space-x-3",children:[r.jsx("button",{onClick:y,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors",children:"💾 Guardar Cambios"}),r.jsx("button",{onClick:()=>c(null),className:"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition-colors",children:"❌ Cancelar"})]})]}):r.jsx("div",{children:b.items.length===0?r.jsx("p",{className:"text-gray-500 text-center py-4",children:"No hay elementos en este menú"}):r.jsx("div",{className:"space-y-2",children:b.items.sort((C,S)=>C.order-S.order).map((C,S)=>r.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("span",{className:"text-lg",children:C.icon}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:C.label}),r.jsx("p",{className:"text-sm text-gray-500",children:C.url})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[!C.isVisible&&r.jsx("span",{className:"text-xs bg-gray-300 text-gray-600 px-2 py-1 rounded",children:"Oculto"}),C.isExternal&&r.jsx("span",{className:"text-xs bg-blue-300 text-blue-600 px-2 py-1 rounded",children:"Externo"}),r.jsx("span",{className:"text-xs bg-gray-200 text-gray-600 px-2 py-1 rounded",children:C.order})]})]},S))})})})]},b.id))}),t.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-gray-500 text-lg",children:"No hay configuraciones de menús creadas"}),r.jsx("button",{onClick:()=>u(!0),className:"mt-4 bg-blue-600 text-white px-6 py-3 rounded-md hover:bg-blue-700 transition-colors",children:"➕ Crear Primer Menú"})]})]})})},WK=()=>{const{user:e}=Ce(),[t,s]=f.useState([]),[n,a]=f.useState(!0),[i,o]=f.useState(null),[l,c]=f.useState(!1),[d,u]=f.useState({key:"",value:"",type:"string",category:"general",description:"",isPublic:!1});f.useEffect(()=>{m()},[]);const m=async()=>{try{a(!0);const v=await K.get("/site-config/categories");s(v.data)}catch(v){console.error("Error fetching site configs:",v)}finally{a(!1)}},h=async()=>{try{await K.post("/site-config",d),c(!1),u({key:"",value:"",type:"string",category:"general",description:"",isPublic:!1}),m()}catch(v){console.error("Error creating config:",v)}},g=async()=>{if(i)try{await K.patch(`/site-config/${i.id}`,i),o(null),m()}catch(v){console.error("Error updating config:",v)}},j=async v=>{if(confirm("¿Estás seguro de que quieres eliminar esta configuración?"))try{await K.delete(`/site-config/${v}`),m()}catch(N){console.error("Error deleting config:",N)}},y=async(v,N)=>{try{await K.patch(`/site-config/key/${v}`,{value:N}),m()}catch(b){console.error("Error updating config:",b)}},w=v=>({branding:"🎨 Marca",layout:"📐 Diseño",contact:"📞 Contacto",social:"🌐 Social",general:"⚙️ General"})[v]||v,x=v=>({string:"Texto",image:"Imagen",color:"Color",boolean:"Booleano",json:"JSON"})[v]||v,p=v=>{switch(v.type){case"boolean":return r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:v.value==="true",onChange:N=>y(v.key,N.target.checked.toString()),className:"mr-2"}),r.jsx("span",{className:"text-sm text-gray-600",children:v.value==="true"?"Activado":"Desactivado"})]});case"color":return r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"color",value:v.value,onChange:N=>y(v.key,N.target.value),className:"w-8 h-8 border border-gray-300 rounded"}),r.jsx("span",{className:"text-sm font-mono",children:v.value})]});case"image":return r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("img",{src:v.value,alt:"Preview",className:"w-8 h-8 object-cover border border-gray-300 rounded",onError:N=>{N.currentTarget.style.display="none"}}),r.jsx("input",{type:"text",value:v.value,onChange:N=>y(v.key,N.target.value),className:"flex-1 px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"URL de la imagen"})]});default:return r.jsx("input",{type:"text",value:v.value,onChange:N=>y(v.key,N.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"Valor"})}};return n?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Cargando configuraciones del sitio..."})]})}):r.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"⚙️ Configuración del Sitio"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Gestiona la configuración general del sitio web"})]}),r.jsxs("div",{className:"mb-6 flex space-x-4",children:[r.jsx("button",{onClick:()=>c(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"➕ Nueva Configuración"}),r.jsx("button",{onClick:async()=>{try{await K.post("/site-config/initialize"),m(),alert("Configuraciones por defecto inicializadas")}catch(v){console.error("Error initializing configs:",v)}},className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors",children:"🔄 Inicializar Configuraciones"})]}),l&&r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Crear Nueva Configuración"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Clave"}),r.jsx("input",{type:"text",value:d.key,onChange:v=>u({...d,key:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ej: site_name"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Valor"}),r.jsx("input",{type:"text",value:d.value,onChange:v=>u({...d,value:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Valor de la configuración"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo"}),r.jsxs("select",{value:d.type,onChange:v=>u({...d,type:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"string",children:"Texto"}),r.jsx("option",{value:"image",children:"Imagen"}),r.jsx("option",{value:"color",children:"Color"}),r.jsx("option",{value:"boolean",children:"Booleano"}),r.jsx("option",{value:"json",children:"JSON"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Categoría"}),r.jsxs("select",{value:d.category,onChange:v=>u({...d,category:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"branding",children:"Marca"}),r.jsx("option",{value:"layout",children:"Diseño"}),r.jsx("option",{value:"contact",children:"Contacto"}),r.jsx("option",{value:"social",children:"Social"}),r.jsx("option",{value:"general",children:"General"})]})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripción"}),r.jsx("input",{type:"text",value:d.description,onChange:v=>u({...d,description:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Descripción de la configuración"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:d.isPublic,onChange:v=>u({...d,isPublic:v.target.checked}),className:"mr-2"}),r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Configuración Pública"})]})]}),r.jsxs("div",{className:"mt-4 flex space-x-3",children:[r.jsx("button",{onClick:h,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors",children:"✅ Crear Configuración"}),r.jsx("button",{onClick:()=>c(!1),className:"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition-colors",children:"❌ Cancelar"})]})]}),r.jsx("div",{className:"space-y-6",children:t.map(v=>r.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[r.jsxs("div",{className:"bg-gradient-to-r from-gray-600 to-gray-700 text-white p-4",children:[r.jsx("h2",{className:"text-lg font-semibold",children:w(v.category)}),r.jsxs("p",{className:"text-gray-200 text-sm",children:[v.configs.length," configuración",v.configs.length!==1?"es":""]})]}),r.jsx("div",{className:"p-4",children:r.jsx("div",{className:"space-y-4",children:v.configs.map(N=>r.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[r.jsxs("div",{className:"flex justify-between items-start mb-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[r.jsx("h4",{className:"font-medium text-gray-900",children:N.key}),r.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:x(N.type)}),N.isPublic&&r.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded",children:"Público"})]}),N.description&&r.jsx("p",{className:"text-sm text-gray-600",children:N.description})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>o((i==null?void 0:i.id)===N.id?null:N),className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm transition-colors",children:(i==null?void 0:i.id)===N.id?"❌ Cancelar":"✏️ Editar"}),r.jsx("button",{onClick:()=>j(N.id),className:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm transition-colors",children:"🗑️ Eliminar"})]})]}),(i==null?void 0:i.id)===N.id?r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valor"}),N.type==="boolean"?r.jsxs("select",{value:N.value,onChange:b=>o({...N,value:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[r.jsx("option",{value:"true",children:"Activado"}),r.jsx("option",{value:"false",children:"Desactivado"})]}):N.type==="color"?r.jsx("input",{type:"color",value:N.value,onChange:b=>o({...N,value:b.target.value}),className:"w-full h-10 border border-gray-300 rounded-md"}):r.jsx("input",{type:"text",value:N.value,onChange:b=>o({...N,value:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripción"}),r.jsx("input",{type:"text",value:N.description||"",onChange:b=>o({...N,description:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:N.isPublic,onChange:b=>o({...N,isPublic:b.target.checked}),className:"mr-2"}),r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Configuración Pública"})]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsx("button",{onClick:g,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors",children:"💾 Guardar Cambios"}),r.jsx("button",{onClick:()=>o(null),className:"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition-colors",children:"❌ Cancelar"})]})]}):r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Valor Actual"}),p(N)]})]},N.id))})})]},v.category))}),t.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-gray-500 text-lg",children:"No hay configuraciones del sitio"}),r.jsx("button",{onClick:()=>c(!0),className:"mt-4 bg-blue-600 text-white px-6 py-3 rounded-md hover:bg-blue-700 transition-colors",children:"➕ Crear Primera Configuración"})]})]})})},YK=()=>{var k,D,L;const{user:e}=Ce(),t=Yt(),[s,n]=f.useState(0),[a,i]=f.useState(null),[o,l]=f.useState({}),[c,d]=f.useState(!1),[u,m]=f.useState(!1),h=[{id:"legal-office",name:"Despacho Legal",description:"Gestión completa de casos legales, clientes y documentación",icon:"⚖️",category:"Legal",features:["Gestión de expedientes y casos","Sistema de citas y calendario","Documentación legal","Facturación y pagos","Comunicación con clientes"],configSteps:[{id:"basic-info",title:"Información Básica del Despacho",description:"Configura los datos fundamentales de tu despacho",type:"site",questions:[{id:"office_name",question:"¿Cuál es el nombre de tu despacho legal?",type:"text",defaultValue:"Despacho Legal"},{id:"specialties",question:"¿En qué especialidades legales te enfocas?",type:"multiselect",options:["Derecho Civil","Derecho Penal","Derecho Laboral","Derecho Mercantil","Derecho Administrativo","Derecho de Familia","Derecho Inmobiliario","Derecho Fiscal"]},{id:"office_hours",question:"¿Cuáles son tus horarios de atención?",type:"text",defaultValue:"Lunes a Viernes: 9:00 - 18:00"}]},{id:"menu-setup",title:"Configuración de Menús",description:"Personaliza la navegación para abogados y clientes",type:"menu",questions:[{id:"enable_consultations",question:"¿Quieres ofrecer consultas online?",type:"boolean",defaultValue:!0},{id:"enable_document_templates",question:"¿Quieres vender plantillas de documentos legales?",type:"boolean",defaultValue:!0},{id:"enable_payment_plans",question:"¿Quieres ofrecer planes de pago a plazos?",type:"boolean",defaultValue:!1}]},{id:"ecommerce-setup",title:"Configuración de Tienda Online",description:"Configura la venta de servicios y productos legales",type:"ecommerce",questions:[{id:"enable_online_payments",question:"¿Quieres habilitar pagos online?",type:"boolean",defaultValue:!0},{id:"payment_methods",question:"¿Qué métodos de pago quieres aceptar?",type:"multiselect",options:["PayPal","Tarjeta de Crédito","Transferencia Bancaria"],dependsOn:"enable_online_payments",dependsValue:!0},{id:"consultation_price",question:"¿Cuál será el precio de la consulta inicial?",type:"text",defaultValue:"50",dependsOn:"enable_consultations",dependsValue:!0}]}]},{id:"consulting-firm",name:"Empresa de Consultoría",description:"Servicios de consultoría empresarial y estratégica",icon:"💼",category:"Business",features:["Consultoría estratégica","Análisis de procesos","Gestión de proyectos","Formación empresarial","Auditorías y reportes"],configSteps:[{id:"basic-info",title:"Información de la Consultora",description:"Configura los datos de tu empresa de consultoría",type:"site",questions:[{id:"company_name",question:"¿Cuál es el nombre de tu consultora?",type:"text",defaultValue:"Consultora Empresarial"},{id:"consulting_areas",question:"¿En qué áreas de consultoría te especializas?",type:"multiselect",options:["Estrategia Empresarial","Optimización de Procesos","Recursos Humanos","Finanzas Corporativas","Marketing Digital","Transformación Digital","Gestión de Calidad","Compliance y Legal"]}]},{id:"service-catalog",title:"Catálogo de Servicios",description:"Configura los servicios que ofreces",type:"ecommerce",questions:[{id:"service_types",question:"¿Qué tipos de servicios quieres ofrecer?",type:"multiselect",options:["Consultoría por Horas","Proyectos Completos","Auditorías","Formación","Mentoring","Análisis de Datos"]},{id:"enable_packages",question:"¿Quieres ofrecer paquetes de servicios?",type:"boolean",defaultValue:!0}]}]},{id:"online-academy",name:"Academia Online",description:"Plataforma de formación y cursos online",icon:"🎓",category:"Education",features:["Cursos online","Sistema de evaluación","Certificaciones","Comunidad de estudiantes","Contenido multimedia"],configSteps:[{id:"academy-info",title:"Información de la Academia",description:"Configura los datos de tu academia online",type:"site",questions:[{id:"academy_name",question:"¿Cuál es el nombre de tu academia?",type:"text",defaultValue:"Academia Online"},{id:"academic_areas",question:"¿En qué áreas académicas te especializas?",type:"multiselect",options:["Tecnología y Programación","Negocios y Emprendimiento","Idiomas","Arte y Diseño","Salud y Bienestar","Ciencias y Matemáticas","Humanidades","Formación Profesional"]}]},{id:"course-structure",title:"Estructura de Cursos",description:"Configura cómo organizarás tus cursos",type:"custom",questions:[{id:"course_types",question:"¿Qué tipos de cursos quieres ofrecer?",type:"multiselect",options:["Cursos Autodidactas","Cursos con Tutor","Bootcamps Intensivos","Webinars","Talleres Prácticos","Certificaciones"]},{id:"enable_subscriptions",question:"¿Quieres ofrecer suscripciones mensuales?",type:"boolean",defaultValue:!0}]}]},{id:"digital-agency",name:"Agencia Digital",description:"Servicios de marketing digital y desarrollo web",icon:"🚀",category:"Digital",features:["Desarrollo web","Marketing digital","SEO y SEM","Redes sociales","Analytics y reportes"],configSteps:[{id:"agency-info",title:"Información de la Agencia",description:"Configura los datos de tu agencia digital",type:"site",questions:[{id:"agency_name",question:"¿Cuál es el nombre de tu agencia?",type:"text",defaultValue:"Agencia Digital"},{id:"digital_services",question:"¿Qué servicios digitales ofreces?",type:"multiselect",options:["Desarrollo Web","Diseño Gráfico","Marketing Digital","SEO y SEM","Gestión de Redes Sociales","Email Marketing","Analytics y Reportes","Consultoría Digital"]}]},{id:"project-management",title:"Gestión de Proyectos",description:"Configura el sistema de gestión de proyectos",type:"custom",questions:[{id:"project_tracking",question:"¿Quieres que los clientes puedan seguir sus proyectos?",type:"boolean",defaultValue:!0},{id:"client_portal",question:"¿Quieres crear un portal para clientes?",type:"boolean",defaultValue:!0}]}]},{id:"health-clinic",name:"Clínica de Salud",description:"Gestión de citas médicas y pacientes",icon:"🏥",category:"Health",features:["Gestión de citas","Historiales médicos","Facturación médica","Comunicación con pacientes","Reportes médicos"],configSteps:[{id:"clinic-info",title:"Información de la Clínica",description:"Configura los datos de tu clínica",type:"site",questions:[{id:"clinic_name",question:"¿Cuál es el nombre de tu clínica?",type:"text",defaultValue:"Clínica de Salud"},{id:"medical_specialties",question:"¿Qué especialidades médicas ofreces?",type:"multiselect",options:["Medicina General","Cardiología","Dermatología","Ginecología","Pediatría","Psicología","Fisioterapia","Odontología"]}]},{id:"appointment-system",title:"Sistema de Citas",description:"Configura el sistema de citas médicas",type:"custom",questions:[{id:"online_booking",question:"¿Quieres que los pacientes puedan reservar citas online?",type:"boolean",defaultValue:!0},{id:"appointment_reminders",question:"¿Quieres enviar recordatorios de citas?",type:"boolean",defaultValue:!0}]}]}],g=T=>{i(T),n(0),l({})},j=(T,B)=>{l(V=>({...V,[T]:B}))},y=T=>T.dependsOn?o[T.dependsOn]===T.dependsValue:!0,w=()=>a?a.configSteps[s]:null,x=()=>{s<a.configSteps.length-1?n(s+1):v()},p=()=>{s>0&&n(s-1)},v=async()=>{m(!0);try{await N(),t("/admin/menu-config")}catch(T){console.error("Error applying configuration:",T)}finally{m(!1)}},N=async()=>{const T=b();for(const V of T)await K.post("/site-config",V);const B=C();for(const V of B)await K.post("/menu-config",V)},b=()=>{const T=[];return(a==null?void 0:a.id)==="legal-office"?T.push({key:"site_name",value:o.office_name||"Despacho Legal",type:"string",category:"branding",isPublic:!0},{key:"site_description",value:"Servicios legales profesionales",type:"string",category:"branding",isPublic:!0},{key:"office_hours",value:o.office_hours||"Lunes a Viernes: 9:00 - 18:00",type:"string",category:"contact",isPublic:!0}):(a==null?void 0:a.id)==="consulting-firm"&&T.push({key:"site_name",value:o.company_name||"Consultora Empresarial",type:"string",category:"branding",isPublic:!0},{key:"site_description",value:"Consultoría empresarial y estratégica",type:"string",category:"branding",isPublic:!0}),T},C=()=>{const T=[];if((a==null?void 0:a.id)==="legal-office"){const B={name:"Menú Abogado",role:"ABOGADO",orientation:"horizontal",isActive:!0,items:[{label:"Dashboard",url:"/dashboard",icon:"🏠",order:1,isVisible:!0,isExternal:!1},{label:"Expedientes",url:"/lawyer/cases",icon:"📋",order:2,isVisible:!0,isExternal:!1},{label:"Citas",url:"/lawyer/appointments",icon:"📅",order:3,isVisible:!0,isExternal:!1}]};o.enable_consultations&&B.items.push({label:"Consultas",url:"/lawyer/consultations",icon:"💬",order:4,isVisible:!0,isExternal:!1}),T.push(B)}return T},S=T=>{var B,V;if(!y(T))return null;switch(T.type){case"boolean":return r.jsx("div",{className:"mb-6",children:r.jsxs("label",{className:"flex items-center space-x-3",children:[r.jsx("input",{type:"checkbox",checked:o[T.id]??T.defaultValue,onChange:A=>j(T.id,A.target.checked),className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),r.jsx("span",{className:"text-lg font-medium text-gray-900",children:T.question})]})},T.id);case"text":return r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-lg font-medium text-gray-900 mb-2",children:T.question}),r.jsx("input",{type:"text",value:o[T.id]??T.defaultValue??"",onChange:A=>j(T.id,A.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Escribe tu respuesta..."})]},T.id);case"select":return r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-lg font-medium text-gray-900 mb-2",children:T.question}),r.jsxs("select",{value:o[T.id]??"",onChange:A=>j(T.id,A.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"",children:"Selecciona una opción"}),(B=T.options)==null?void 0:B.map(A=>r.jsx("option",{value:A,children:A},A))]})]},T.id);case"multiselect":return r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-lg font-medium text-gray-900 mb-2",children:T.question}),r.jsx("div",{className:"space-y-2",children:(V=T.options)==null?void 0:V.map(A=>r.jsxs("label",{className:"flex items-center space-x-3",children:[r.jsx("input",{type:"checkbox",checked:(o[T.id]||[]).includes(A),onChange:I=>{const q=o[T.id]||[],Y=I.target.checked?[...q,A]:q.filter(M=>M!==A);j(T.id,Y)},className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),r.jsx("span",{className:"text-gray-700",children:A})]},A))})]},T.id);default:return null}};return c?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):r.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:r.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"🎯 Configuración Guiada del Sistema"}),r.jsx("p",{className:"text-lg text-gray-600",children:"Te ayudaremos a configurar tu sistema paso a paso según tu tipo de negocio"})]}),a?r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Paso ",s+1," de ",a.configSteps.length]}),r.jsxs("span",{className:"text-sm text-gray-500",children:[Math.round((s+1)/a.configSteps.length*100),"% completado"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${(s+1)/a.configSteps.length*100}%`}})})]}),r.jsx("div",{className:"mb-8 p-4 bg-blue-50 rounded-lg",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"text-2xl mr-3",children:a.icon}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-bold text-gray-900",children:["Configurando: ",a.name]}),r.jsx("p",{className:"text-gray-600",children:a.description})]})]})}),r.jsxs("div",{className:"mb-8",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:(k=w())==null?void 0:k.title}),r.jsx("p",{className:"text-gray-600 mb-6",children:(D=w())==null?void 0:D.description}),r.jsx("div",{className:"space-y-6",children:(L=w())==null?void 0:L.questions.map(S)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("button",{onClick:()=>i(null),className:"px-6 py-3 text-gray-600 hover:text-gray-800 transition-colors",children:"← Cambiar tipo de negocio"}),r.jsxs("div",{className:"flex space-x-4",children:[s>0&&r.jsx("button",{onClick:p,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"← Anterior"}),r.jsx("button",{onClick:x,disabled:u,className:"px-6 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50",children:u?r.jsxs("span",{className:"flex items-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Configurando..."]}):s===a.configSteps.length-1?"Finalizar Configuración":"Siguiente →"})]})]})]}):r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6 text-center",children:"¿Qué tipo de negocio quieres configurar?"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:h.map(T=>r.jsx("div",{onClick:()=>g(T),className:"border-2 border-gray-200 rounded-lg p-6 hover:border-blue-500 hover:shadow-lg transition-all cursor-pointer",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-4xl mb-4",children:T.icon}),r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:T.name}),r.jsx("p",{className:"text-gray-600 mb-4",children:T.description}),r.jsxs("div",{className:"text-sm text-gray-500",children:[r.jsx("strong",{children:"Características principales:"}),r.jsx("ul",{className:"mt-2 space-y-1",children:T.features.slice(0,3).map((B,V)=>r.jsxs("li",{children:["• ",B]},V))})]})]})},T.id))})]}),r.jsxs("div",{className:"mt-8 bg-blue-50 rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"💡 ¿Necesitas ayuda?"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600",children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Para Despachos Legales:"}),r.jsxs("ul",{className:"mt-1 space-y-1",children:[r.jsx("li",{children:"• Configura especialidades legales"}),r.jsx("li",{children:"• Habilita consultas online"}),r.jsx("li",{children:"• Establece precios de servicios"})]})]}),r.jsxs("div",{children:[r.jsx("strong",{children:"Para Consultorías:"}),r.jsxs("ul",{className:"mt-1 space-y-1",children:[r.jsx("li",{children:"• Define áreas de consultoría"}),r.jsx("li",{children:"• Configura tipos de servicios"}),r.jsx("li",{children:"• Establece paquetes de servicios"})]})]})]})]})]})})},vb=()=>{var T,B,V;const{user:e}=Ce(),[t,s]=f.useState([]),[n,a]=f.useState([]),[i,o]=f.useState(null),[l,c]=f.useState(!0),[d,u]=f.useState("pending"),[m,h]=f.useState([]),[g,j]=f.useState(""),[y,w]=f.useState({}),[x,p]=f.useState(!1);f.useEffect(()=>{v(),p(!0),K.get("/teleassistance/remote-tools").then(A=>h(A.data)).catch(()=>h([])).finally(()=>p(!1))},[e]);const v=async()=>{try{c(!0);const A=await K.get("/teleassistance/sessions/pending");if(a(A.data),e){const I=await K.get("/teleassistance/sessions/assistant/"+e.id);s(I.data)}if((e==null?void 0:e.role)==="ADMIN"){const I=await K.get("/teleassistance/stats");o(I.data)}}catch(A){console.error("Error loading teleassistance data:",A)}finally{c(!1)}},N=async A=>{try{await K.post(`/teleassistance/sessions/${A}/start`),v()}catch(I){console.error("Error starting session:",I)}},b=async(A,I)=>{try{await K.post(`/teleassistance/sessions/${A}/end`,{resolution:I}),v()}catch(q){console.error("Error ending session:",q)}},C=A=>{const I={PENDING:{color:"bg-yellow-100 text-yellow-800",text:"Pendiente"},ACTIVE:{color:"bg-green-100 text-green-800",text:"Activa"},COMPLETED:{color:"bg-blue-100 text-blue-800",text:"Completada"},CANCELLED:{color:"bg-red-100 text-red-800",text:"Cancelada"}},q=I[A]||I.PENDING;return r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${q.color}`,children:q.text})},S=A=>({AUTOFIRMA:"🔐",CERTIFICADO_DIGITAL:"🆔",SEDES:"🏛️",CLAVE_PIN:"📱",NAVEGADOR:"🌐",SISTEMA_OPERATIVO:"💻",OTRO:"❓"})[A]||"❓",k=A=>{if(!A)return"N/A";const I=Math.floor(A/60),q=A%60;return I>0?`${I}h ${q}m`:`${q}m`},D=A=>new Date(A).toLocaleString("es-ES"),L=()=>{if(!g)return null;switch(g){case"teamviewer-quicksupport":return r.jsxs(r.Fragment,{children:[r.jsxs("label",{children:["ID de TeamViewer",r.jsx("input",{type:"text",required:!0,value:y.teamviewerId||"",onChange:A=>w({...y,teamviewerId:A.target.value})})]}),r.jsxs("label",{children:["Contraseña",r.jsx("input",{type:"text",required:!0,value:y.teamviewerPassword||"",onChange:A=>w({...y,teamviewerPassword:A.target.value})})]})]});case"remotely-anywhere":return r.jsx(r.Fragment,{children:r.jsxs("label",{children:["Código de acceso",r.jsx("input",{type:"text",required:!0,value:y.remotelyCode||"",onChange:A=>w({...y,remotelyCode:A.target.value})})]})});case"anydesk":return r.jsx(r.Fragment,{children:r.jsxs("label",{children:["Código de AnyDesk",r.jsx("input",{type:"text",required:!0,value:y.anydeskCode||"",onChange:A=>w({...y,anydeskCode:A.target.value})})]})});case"chrome-remote-desktop":return r.jsx(r.Fragment,{children:r.jsxs("label",{children:["Código de acceso",r.jsx("input",{type:"text",required:!0,value:y.chromeCode||"",onChange:A=>w({...y,chromeCode:A.target.value})})]})});default:return null}};return l?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):r.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"🖥️ Sistema de Teleasistencia"}),r.jsx("p",{className:"text-lg text-gray-600",children:"Gestiona sesiones de asistencia remota para problemas de administración electrónica"})]}),i&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6 mb-8",children:[r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:r.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Sesiones"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.totalSessions})]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:r.jsx("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Pendientes"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.pendingSessions})]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:r.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Activas"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.activeSessions})]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:r.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Completadas"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.completedSessions})]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:r.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Duración Promedio"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:k(i.averageDuration)})]})]})})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow mb-8",children:[r.jsx("div",{className:"border-b border-gray-200",children:r.jsxs("nav",{className:"-mb-px flex space-x-8 px-6",children:[r.jsxs("button",{onClick:()=>u("pending"),className:`py-4 px-1 border-b-2 font-medium text-sm ${d==="pending"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Sesiones Pendientes (",n.length,")"]}),r.jsxs("button",{onClick:()=>u("all"),className:`py-4 px-1 border-b-2 font-medium text-sm ${d==="all"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Mis Sesiones (",t.length,")"]}),(e==null?void 0:e.role)==="ADMIN"&&r.jsx("button",{onClick:()=>u("stats"),className:`py-4 px-1 border-b-2 font-medium text-sm ${d==="stats"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Estadísticas"})]})}),r.jsxs("div",{className:"p-6",children:[d==="pending"&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Sesiones Pendientes de Asistencia"}),n.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No hay sesiones pendientes"})]}):r.jsx("div",{className:"space-y-4",children:n.map(A=>r.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"text-2xl",children:S(A.issueType)}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-lg font-medium text-gray-900",children:A.user.name}),r.jsxs("p",{className:"text-sm text-gray-500",children:[A.issueType.replace("_"," ")," - ",A.description]}),r.jsxs("p",{className:"text-xs text-gray-400",children:["Creada: ",D(A.createdAt)]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[C(A.status),r.jsx("button",{onClick:()=>N(A.id),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Iniciar Sesión"})]})]})},A.id))})]}),d==="all"&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Mis Sesiones de Teleasistencia"}),t.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No tienes sesiones de teleasistencia"})]}):r.jsx("div",{className:"space-y-4",children:t.map(A=>r.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"text-2xl",children:S(A.issueType)}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-lg font-medium text-gray-900",children:A.user.name}),r.jsxs("p",{className:"text-sm text-gray-500",children:[A.issueType.replace("_"," ")," - ",A.description]}),r.jsxs("p",{className:"text-xs text-gray-400",children:[A.startedAt&&`Iniciada: ${D(A.startedAt)}`,A.duration&&` | Duración: ${k(A.duration)}`]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[C(A.status),A.status==="ACTIVE"&&r.jsx("button",{onClick:()=>b(A.id),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:"Finalizar"})]})]})},A.id))})]}),d==="stats"&&i&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Estadísticas Detalladas"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Resumen General"}),r.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[r.jsxs("li",{children:["Total de sesiones: ",i.totalSessions]}),r.jsxs("li",{children:["Sesiones pendientes: ",i.pendingSessions]}),r.jsxs("li",{children:["Sesiones activas: ",i.activeSessions]}),r.jsxs("li",{children:["Sesiones completadas: ",i.completedSessions]})]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Métricas de Tiempo"}),r.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[r.jsxs("li",{children:["Duración promedio: ",k(i.averageDuration)]}),r.jsxs("li",{children:["Tasa de resolución: ",i.totalSessions>0?Math.round(i.completedSessions/i.totalSessions*100):0,"%"]})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[r.jsx("h2",{className:"text-xl font-bold mb-4",children:"Conectar con el cliente autenticado"}),r.jsxs("label",{children:["Herramienta de escritorio remoto",r.jsxs("select",{required:!0,value:g,onChange:A=>j(A.target.value),children:[r.jsx("option",{value:"",children:"Selecciona una herramienta"}),m.map(A=>r.jsx("option",{value:A.id,children:A.name},A.id))]})]}),L(),g&&r.jsxs("div",{style:{marginTop:24,background:"#f8f8f8",borderRadius:6,padding:16},children:[r.jsxs("h4",{children:["Instrucciones para ",(T=m.find(A=>A.id===g))==null?void 0:T.name]}),r.jsx("ul",{children:(B=m.find(A=>A.id===g))==null?void 0:B.instructions.map((A,I)=>r.jsx("li",{children:A},I))}),r.jsx("a",{href:(V=m.find(A=>A.id===g))==null?void 0:V.downloadUrl,target:"_blank",rel:"noopener noreferrer",children:"Descargar / Abrir herramienta"})]})]})]})]})]})})},qK=()=>{var $,_;const[e,t]=f.useState([]),[s,n]=f.useState([]),[a,i]=f.useState([]),[o,l]=f.useState(""),[c,d]=f.useState(""),[u,m]=f.useState(""),[h,g]=f.useState(!0),[j,y]=f.useState(null),[w,x]=f.useState(!1),[p,v]=f.useState(null),[N,b]=f.useState([]),[C,S]=f.useState(new Set),[k,D]=f.useState(!1),L=f.useRef(null),T=f.useRef(null),{user:B}=Ce();f.useEffect(()=>{B&&console.log("WebSocket temporalmente deshabilitado - implementar en backend")},[B]),f.useEffect(()=>{(async()=>{try{g(!0);const P=localStorage.getItem("token");if(console.log("Token from localStorage:",P?"Token exists":"No token found"),console.log("User from context:",B),!P||!B){console.error("No token or user found"),y("Usuario no autenticado"),n([]),i([]);return}const[F,Q]=await Promise.all([K.get("/users/lawyers"),K.get("/chat/conversations")]);console.log("Lawyers response:",F.data),console.log("Lawyers response type:",typeof F.data),console.log("Lawyers response isArray:",Array.isArray(F.data)),console.log("Lawyers response status:",F.status),console.log("Conversations response:",Q.data),console.log("Conversations response type:",typeof Q.data),console.log("Conversations response isArray:",Array.isArray(Q.data)),console.log("Conversations response status:",Q.status),console.log("Conversations response headers:",Q.headers),i(Array.isArray(F.data)?F.data:[]),n(Array.isArray(Q.data)?Q.data:[]),y(null)}catch(P){console.error("Error fetching data:",P),y("Error al cargar los datos"),n([]),i([])}finally{g(!1)}})()},[]),f.useEffect(()=>{c&&V(c)},[c]),f.useEffect(()=>{A()},[e]);const V=async O=>{try{const P=localStorage.getItem("token"),F=await K.get(`/chat/messages/${O}`);t(F.data)}catch(P){console.error("Error fetching messages:",P),y("Error al cargar los mensajes")}},A=()=>{var O;(O=L.current)==null||O.scrollIntoView({behavior:"smooth"})},I=async O=>{if(O.preventDefault(),!(!u.trim()||!c||!p))try{x(!0),p.emit("send_message",{receiverId:c,content:u}),m(""),p.emit("typing_stop",{receiverId:c}),D(!1)}catch(P){console.error("Error sending message:",P),y("Error al enviar el mensaje")}finally{x(!1)}},q=O=>{l(O),d(O),t([])},Y=O=>{d(O)},M=O=>{m(O.target.value),!(!p||!c)&&(k||(D(!0),p.emit("typing_start",{receiverId:c})),T.current&&clearTimeout(T.current),T.current=setTimeout(()=>{D(!1),p.emit("typing_stop",{receiverId:c})},1e3))},W=O=>{const P=new Date(O),Q=(new Date().getTime()-P.getTime())/(1e3*60*60);return Q<24?P.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):Q<48?"Ayer":P.toLocaleDateString()},E=O=>N.some(P=>P.userId===O),R=O=>O.charAt(0).toUpperCase();return h?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):r.jsx("div",{className:"py-6",children:r.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"bg-white rounded-lg shadow",children:[r.jsxs("div",{className:"p-4 border-b",children:[r.jsx("h1",{className:"text-xl font-semibold",children:"Chat con Abogado"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Comunicación directa con tu abogado"})]}),r.jsxs("div",{className:"flex h-96",children:[r.jsxs("div",{className:"w-1/3 border-r bg-gray-50",children:[r.jsxs("div",{className:"p-4 border-b",children:[r.jsx("h2",{className:"font-medium text-gray-900 mb-3",children:"Conversaciones"}),!Array.isArray(s)||s.length===0?r.jsx("p",{className:"text-sm text-gray-500",children:"No hay conversaciones activas"}):r.jsx("div",{className:"space-y-2",children:s.map(O=>r.jsx("div",{onClick:()=>Y(O.userId),className:`p-3 rounded-lg cursor-pointer transition-colors ${c===O.userId?"bg-blue-100 border-blue-300":"bg-white hover:bg-gray-100"}`,children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white text-sm font-medium",children:R(O.userName)})}),E(O.userId)&&r.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:O.userName}),r.jsx("div",{className:"text-xs text-gray-400",children:W(O.lastMessageTime)})]}),r.jsx("p",{className:"text-xs text-gray-500 truncate",children:O.lastMessage}),O.unreadCount>0&&r.jsx("div",{className:"mt-1",children:r.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:O.unreadCount})})]})]})},O.userId))})]}),r.jsxs("div",{className:"p-4 border-t",children:[r.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Nueva conversación"}),r.jsxs("select",{value:o,onChange:O=>q(O.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Seleccionar abogado para nueva conversación",children:[r.jsx("option",{value:"",children:"Selecciona un abogado"}),a.map(O=>r.jsxs("option",{value:O.id,children:[O.name," (",O.email,")"]},O.id))]})]})]}),r.jsx("div",{className:"flex-1 flex flex-col",children:c?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"p-4 border-b bg-gray-50",children:r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white text-sm font-medium",children:R(Array.isArray(s)&&(($=s.find(O=>O.userId===c))==null?void 0:$.userName)||"A")})}),E(c)&&r.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})]}),r.jsxs("div",{className:"ml-3",children:[r.jsx("p",{className:"font-medium text-gray-900",children:Array.isArray(s)&&((_=s.find(O=>O.userId===c))==null?void 0:_.userName)||"Abogado"}),r.jsx("p",{className:"text-sm text-gray-500",children:E(c)?"En línea":"Desconectado"})]})]})})}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e.length===0?r.jsx("div",{className:"text-center text-gray-500 mt-8",children:r.jsx("p",{children:"No hay mensajes aún. ¡Inicia la conversación!"})}):e.map(O=>r.jsx("div",{className:`flex ${O.isOwnMessage?"justify-end":"justify-start"}`,children:r.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${O.isOwnMessage?"bg-blue-600 text-white":"bg-gray-200 text-gray-900"}`,children:[r.jsx("div",{className:"text-sm",children:O.content}),r.jsx("div",{className:`text-xs mt-1 ${O.isOwnMessage?"text-blue-100":"text-gray-500"}`,children:W(O.createdAt)})]})},O.id)),C.has(c)&&r.jsx("div",{className:"flex justify-start",children:r.jsx("div",{className:"bg-gray-200 text-gray-900 px-4 py-2 rounded-lg",children:r.jsx("div",{className:"text-sm",children:"Escribiendo..."})})}),r.jsx("div",{ref:L})]}),r.jsx("form",{onSubmit:I,className:"p-4 border-t",children:r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("input",{type:"text",value:u,onChange:M,placeholder:"Escribe tu mensaje...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:w}),r.jsx("button",{type:"submit",disabled:!u.trim()||w,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:w?"Enviando...":"Enviar"})]})})]}):r.jsx("div",{className:"flex-1 flex items-center justify-center",children:r.jsxs("div",{className:"text-center text-gray-500",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),r.jsx("p",{className:"text-lg font-medium",children:"Selecciona una conversación"}),r.jsx("p",{className:"text-sm",children:"O inicia una nueva conversación con un abogado"})]})})})]}),j&&r.jsx("div",{className:"p-4 bg-red-50 border-t border-red-200",children:r.jsx("div",{className:"text-red-600 text-sm",children:j})})]})})})},$s=Object.create(null);$s.open="0";$s.close="1";$s.ping="2";$s.pong="3";$s.message="4";$s.upgrade="5";$s.noop="6";const od=Object.create(null);Object.keys($s).forEach(e=>{od[$s[e]]=e});const lp={type:"error",data:"parser error"},BC=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",zC=typeof ArrayBuffer=="function",UC=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Ig=({type:e,data:t},s,n)=>BC&&t instanceof Blob?s?n(t):yb(t,n):zC&&(t instanceof ArrayBuffer||UC(t))?s?n(t):yb(new Blob([t]),n):n($s[e]+(t||"")),yb=(e,t)=>{const s=new FileReader;return s.onload=function(){const n=s.result.split(",")[1];t("b"+(n||""))},s.readAsDataURL(e)};function bb(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Ah;function GK(e,t){if(BC&&e.data instanceof Blob)return e.data.arrayBuffer().then(bb).then(t);if(zC&&(e.data instanceof ArrayBuffer||UC(e.data)))return t(bb(e.data));Ig(e,!1,s=>{Ah||(Ah=new TextEncoder),t(Ah.encode(s))})}const jb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ko=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<jb.length;e++)ko[jb.charCodeAt(e)]=e;const KK=e=>{let t=e.length*.75,s=e.length,n,a=0,i,o,l,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const d=new ArrayBuffer(t),u=new Uint8Array(d);for(n=0;n<s;n+=4)i=ko[e.charCodeAt(n)],o=ko[e.charCodeAt(n+1)],l=ko[e.charCodeAt(n+2)],c=ko[e.charCodeAt(n+3)],u[a++]=i<<2|o>>4,u[a++]=(o&15)<<4|l>>2,u[a++]=(l&3)<<6|c&63;return d},XK=typeof ArrayBuffer=="function",$g=(e,t)=>{if(typeof e!="string")return{type:"message",data:VC(e,t)};const s=e.charAt(0);return s==="b"?{type:"message",data:QK(e.substring(1),t)}:od[s]?e.length>1?{type:od[s],data:e.substring(1)}:{type:od[s]}:lp},QK=(e,t)=>{if(XK){const s=KK(e);return VC(s,t)}else return{base64:!0,data:e}},VC=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},HC="",JK=(e,t)=>{const s=e.length,n=new Array(s);let a=0;e.forEach((i,o)=>{Ig(i,!1,l=>{n[o]=l,++a===s&&t(n.join(HC))})})},ZK=(e,t)=>{const s=e.split(HC),n=[];for(let a=0;a<s.length;a++){const i=$g(s[a],t);if(n.push(i),i.type==="error")break}return n};function eX(){return new TransformStream({transform(e,t){GK(e,s=>{const n=s.length;let a;if(n<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,n);else if(n<65536){a=new Uint8Array(3);const i=new DataView(a.buffer);i.setUint8(0,126),i.setUint16(1,n)}else{a=new Uint8Array(9);const i=new DataView(a.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(n))}e.data&&typeof e.data!="string"&&(a[0]|=128),t.enqueue(a),t.enqueue(s)})}})}let Th;function Rc(e){return e.reduce((t,s)=>t+s.length,0)}function Pc(e,t){if(e[0].length===t)return e.shift();const s=new Uint8Array(t);let n=0;for(let a=0;a<t;a++)s[a]=e[0][n++],n===e[0].length&&(e.shift(),n=0);return e.length&&n<e[0].length&&(e[0]=e[0].slice(n)),s}function tX(e,t){Th||(Th=new TextDecoder);const s=[];let n=0,a=-1,i=!1;return new TransformStream({transform(o,l){for(s.push(o);;){if(n===0){if(Rc(s)<1)break;const c=Pc(s,1);i=(c[0]&128)===128,a=c[0]&127,a<126?n=3:a===126?n=1:n=2}else if(n===1){if(Rc(s)<2)break;const c=Pc(s,2);a=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),n=3}else if(n===2){if(Rc(s)<8)break;const c=Pc(s,8),d=new DataView(c.buffer,c.byteOffset,c.length),u=d.getUint32(0);if(u>Math.pow(2,21)-1){l.enqueue(lp);break}a=u*Math.pow(2,32)+d.getUint32(4),n=3}else{if(Rc(s)<a)break;const c=Pc(s,a);l.enqueue($g(i?c:Th.decode(c),t)),n=0}if(a===0||a>e){l.enqueue(lp);break}}}})}const WC=4;function yt(e){if(e)return rX(e)}function rX(e){for(var t in yt.prototype)e[t]=yt.prototype[t];return e}yt.prototype.on=yt.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};yt.prototype.once=function(e,t){function s(){this.off(e,s),t.apply(this,arguments)}return s.fn=t,this.on(e,s),this};yt.prototype.off=yt.prototype.removeListener=yt.prototype.removeAllListeners=yt.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+e];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var n,a=0;a<s.length;a++)if(n=s[a],n===t||n.fn===t){s.splice(a,1);break}return s.length===0&&delete this._callbacks["$"+e],this};yt.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),s=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(s){s=s.slice(0);for(var n=0,a=s.length;n<a;++n)s[n].apply(this,t)}return this};yt.prototype.emitReserved=yt.prototype.emit;yt.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};yt.prototype.hasListeners=function(e){return!!this.listeners(e).length};const wm=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,s)=>s(t,0),Fr=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),sX="arraybuffer";function YC(e,...t){return t.reduce((s,n)=>(e.hasOwnProperty(n)&&(s[n]=e[n]),s),{})}const nX=Fr.setTimeout,aX=Fr.clearTimeout;function Nm(e,t){t.useNativeTimers?(e.setTimeoutFn=nX.bind(Fr),e.clearTimeoutFn=aX.bind(Fr)):(e.setTimeoutFn=Fr.setTimeout.bind(Fr),e.clearTimeoutFn=Fr.clearTimeout.bind(Fr))}const iX=1.33;function oX(e){return typeof e=="string"?lX(e):Math.ceil((e.byteLength||e.size)*iX)}function lX(e){let t=0,s=0;for(let n=0,a=e.length;n<a;n++)t=e.charCodeAt(n),t<128?s+=1:t<2048?s+=2:t<55296||t>=57344?s+=3:(n++,s+=4);return s}function qC(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function cX(e){let t="";for(let s in e)e.hasOwnProperty(s)&&(t.length&&(t+="&"),t+=encodeURIComponent(s)+"="+encodeURIComponent(e[s]));return t}function dX(e){let t={},s=e.split("&");for(let n=0,a=s.length;n<a;n++){let i=s[n].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}class uX extends Error{constructor(t,s,n){super(t),this.description=s,this.context=n,this.type="TransportError"}}class Fg extends yt{constructor(t){super(),this.writable=!1,Nm(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,s,n){return super.emitReserved("error",new uX(t,s,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const s=$g(t,this.socket.binaryType);this.onPacket(s)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,s={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(s)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const s=cX(t);return s.length?"?"+s:""}}class mX extends Fg{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const s=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||s()})),this.writable||(n++,this.once("drain",function(){--n||s()}))}else s()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const s=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};ZK(t,this.socket.binaryType).forEach(s),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,JK(t,s=>{this.doWrite(s,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",s=this.query||{};return this.opts.timestampRequests!==!1&&(s[this.opts.timestampParam]=qC()),!this.supportsBinary&&!s.sid&&(s.b64=1),this.createUri(t,s)}}let GC=!1;try{GC=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const hX=GC;function fX(){}class pX extends mX{constructor(t){if(super(t),typeof location<"u"){const s=location.protocol==="https:";let n=location.port;n||(n=s?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||n!==t.port}}doWrite(t,s){const n=this.request({method:"POST",data:t});n.on("success",s),n.on("error",(a,i)=>{this.onError("xhr post error",a,i)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(s,n)=>{this.onError("xhr poll error",s,n)}),this.pollXhr=t}}let pi=class ld extends yt{constructor(t,s,n){super(),this.createRequest=t,Nm(this,n),this._opts=n,this._method=n.method||"GET",this._uri=s,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var t;const s=YC(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");s.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(s);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let a in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(a)&&n.setRequestHeader(a,this._opts.extraHeaders[a])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var a;n.readyState===3&&((a=this._opts.cookieJar)===null||a===void 0||a.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(a){this.setTimeoutFn(()=>{this._onError(a)},0);return}typeof document<"u"&&(this._index=ld.requestsCount++,ld.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=fX,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete ld.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};pi.requestsCount=0;pi.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",wb);else if(typeof addEventListener=="function"){const e="onpagehide"in Fr?"pagehide":"unload";addEventListener(e,wb,!1)}}function wb(){for(let e in pi.requests)pi.requests.hasOwnProperty(e)&&pi.requests[e].abort()}const xX=function(){const e=KC({xdomain:!1});return e&&e.responseType!==null}();class gX extends pX{constructor(t){super(t);const s=t&&t.forceBase64;this.supportsBinary=xX&&!s}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new pi(KC,this.uri(),t)}}function KC(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||hX))return new XMLHttpRequest}catch{}if(!t)try{return new Fr[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const XC=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class vX extends Fg{get name(){return"websocket"}doOpen(){const t=this.uri(),s=this.opts.protocols,n=XC?{}:YC(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,s,n)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let s=0;s<t.length;s++){const n=t[s],a=s===t.length-1;Ig(n,this.supportsBinary,i=>{try{this.doWrite(n,i)}catch{}a&&wm(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",s=this.query||{};return this.opts.timestampRequests&&(s[this.opts.timestampParam]=qC()),this.supportsBinary||(s.b64=1),this.createUri(t,s)}}const _h=Fr.WebSocket||Fr.MozWebSocket;class yX extends vX{createSocket(t,s,n){return XC?new _h(t,s,n):s?new _h(t,s):new _h(t)}doWrite(t,s){this.ws.send(s)}}class bX extends Fg{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const s=tX(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=t.readable.pipeThrough(s).getReader(),a=eX();a.readable.pipeTo(t.writable),this._writer=a.writable.getWriter();const i=()=>{n.read().then(({done:l,value:c})=>{l||(this.onPacket(c),i())}).catch(l=>{})};i();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let s=0;s<t.length;s++){const n=t[s],a=s===t.length-1;this._writer.write(n).then(()=>{a&&wm(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const jX={websocket:yX,webtransport:bX,polling:gX},wX=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,NX=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function cp(e){if(e.length>8e3)throw"URI too long";const t=e,s=e.indexOf("["),n=e.indexOf("]");s!=-1&&n!=-1&&(e=e.substring(0,s)+e.substring(s,n).replace(/:/g,";")+e.substring(n,e.length));let a=wX.exec(e||""),i={},o=14;for(;o--;)i[NX[o]]=a[o]||"";return s!=-1&&n!=-1&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=CX(i,i.path),i.queryKey=SX(i,i.query),i}function CX(e,t){const s=/\/{2,9}/g,n=t.replace(s,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&n.splice(0,1),t.slice(-1)=="/"&&n.splice(n.length-1,1),n}function SX(e,t){const s={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,a,i){a&&(s[a]=i)}),s}const dp=typeof addEventListener=="function"&&typeof removeEventListener=="function",cd=[];dp&&addEventListener("offline",()=>{cd.forEach(e=>e())},!1);class Bn extends yt{constructor(t,s){if(super(),this.binaryType=sX,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(s=t,t=null),t){const n=cp(t);s.hostname=n.host,s.secure=n.protocol==="https"||n.protocol==="wss",s.port=n.port,n.query&&(s.query=n.query)}else s.host&&(s.hostname=cp(s.host).host);Nm(this,s),this.secure=s.secure!=null?s.secure:typeof location<"u"&&location.protocol==="https:",s.hostname&&!s.port&&(s.port=this.secure?"443":"80"),this.hostname=s.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=s.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},s.transports.forEach(n=>{const a=n.prototype.name;this.transports.push(a),this._transportsByName[a]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},s),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=dX(this.opts.query)),dp&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},cd.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const s=Object.assign({},this.opts.query);s.EIO=WC,s.transport=t,this.id&&(s.sid=this.id);const n=Object.assign({},this.opts,{query:s,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&Bn.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const s=this.createTransport(t);s.open(),this.setTransport(s)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",s=>this._onClose("transport close",s))}onOpen(){this.readyState="open",Bn.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const s=new Error("server error");s.code=t.data,this._onError(s);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let s=1;for(let n=0;n<this.writeBuffer.length;n++){const a=this.writeBuffer[n].data;if(a&&(s+=oX(a)),n>0&&s>this._maxPayload)return this.writeBuffer.slice(0,n);s+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,wm(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,s,n){return this._sendPacket("message",t,s,n),this}send(t,s,n){return this._sendPacket("message",t,s,n),this}_sendPacket(t,s,n,a){if(typeof s=="function"&&(a=s,s=void 0),typeof n=="function"&&(a=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const i={type:t,data:s,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),a&&this.once("flush",a),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},s=()=>{this.off("upgrade",s),this.off("upgradeError",s),t()},n=()=>{this.once("upgrade",s),this.once("upgradeError",s)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():t()}):this.upgrading?n():t()),this}_onError(t){if(Bn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,s){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),dp&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=cd.indexOf(this._offlineEventListener);n!==-1&&cd.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,s),this.writeBuffer=[],this._prevBufferLen=0}}}Bn.protocol=WC;class EX extends Bn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let s=this.createTransport(t),n=!1;Bn.priorWebsocketSuccess=!1;const a=()=>{n||(s.send([{type:"ping",data:"probe"}]),s.once("packet",m=>{if(!n)if(m.type==="pong"&&m.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",s),!s)return;Bn.priorWebsocketSuccess=s.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(u(),this.setTransport(s),s.send([{type:"upgrade"}]),this.emitReserved("upgrade",s),s=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=s.name,this.emitReserved("upgradeError",h)}}))};function i(){n||(n=!0,u(),s.close(),s=null)}const o=m=>{const h=new Error("probe error: "+m);h.transport=s.name,i(),this.emitReserved("upgradeError",h)};function l(){o("transport closed")}function c(){o("socket closed")}function d(m){s&&m.name!==s.name&&i()}const u=()=>{s.removeListener("open",a),s.removeListener("error",o),s.removeListener("close",l),this.off("close",c),this.off("upgrading",d)};s.once("open",a),s.once("error",o),s.once("close",l),this.once("close",c),this.once("upgrading",d),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{n||s.open()},200):s.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const s=[];for(let n=0;n<t.length;n++)~this.transports.indexOf(t[n])&&s.push(t[n]);return s}}let kX=class extends EX{constructor(t,s={}){const n=typeof t=="object"?t:s;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(a=>jX[a]).filter(a=>!!a)),super(t,n)}};function DX(e,t="",s){let n=e;s=s||typeof location<"u"&&location,e==null&&(e=s.protocol+"//"+s.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=s.protocol+e:e=s.host+e),/^(https?|wss?):\/\//.test(e)||(typeof s<"u"?e=s.protocol+"//"+e:e="https://"+e),n=cp(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const i=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+i+":"+n.port+t,n.href=n.protocol+"://"+i+(s&&s.port===n.port?"":":"+n.port),n}const AX=typeof ArrayBuffer=="function",TX=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,QC=Object.prototype.toString,_X=typeof Blob=="function"||typeof Blob<"u"&&QC.call(Blob)==="[object BlobConstructor]",OX=typeof File=="function"||typeof File<"u"&&QC.call(File)==="[object FileConstructor]";function Bg(e){return AX&&(e instanceof ArrayBuffer||TX(e))||_X&&e instanceof Blob||OX&&e instanceof File}function dd(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let s=0,n=e.length;s<n;s++)if(dd(e[s]))return!0;return!1}if(Bg(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return dd(e.toJSON(),!0);for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&dd(e[s]))return!0;return!1}function MX(e){const t=[],s=e.data,n=e;return n.data=up(s,t),n.attachments=t.length,{packet:n,buffers:t}}function up(e,t){if(!e)return e;if(Bg(e)){const s={_placeholder:!0,num:t.length};return t.push(e),s}else if(Array.isArray(e)){const s=new Array(e.length);for(let n=0;n<e.length;n++)s[n]=up(e[n],t);return s}else if(typeof e=="object"&&!(e instanceof Date)){const s={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(s[n]=up(e[n],t));return s}return e}function RX(e,t){return e.data=mp(e.data,t),delete e.attachments,e}function mp(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let s=0;s<e.length;s++)e[s]=mp(e[s],t);else if(typeof e=="object")for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(e[s]=mp(e[s],t));return e}const PX=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],LX=5;var Oe;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(Oe||(Oe={}));class IX{constructor(t){this.replacer=t}encode(t){return(t.type===Oe.EVENT||t.type===Oe.ACK)&&dd(t)?this.encodeAsBinary({type:t.type===Oe.EVENT?Oe.BINARY_EVENT:Oe.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let s=""+t.type;return(t.type===Oe.BINARY_EVENT||t.type===Oe.BINARY_ACK)&&(s+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(s+=t.nsp+","),t.id!=null&&(s+=t.id),t.data!=null&&(s+=JSON.stringify(t.data,this.replacer)),s}encodeAsBinary(t){const s=MX(t),n=this.encodeAsString(s.packet),a=s.buffers;return a.unshift(n),a}}function Nb(e){return Object.prototype.toString.call(e)==="[object Object]"}class zg extends yt{constructor(t){super(),this.reviver=t}add(t){let s;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");s=this.decodeString(t);const n=s.type===Oe.BINARY_EVENT;n||s.type===Oe.BINARY_ACK?(s.type=n?Oe.EVENT:Oe.ACK,this.reconstructor=new $X(s),s.attachments===0&&super.emitReserved("decoded",s)):super.emitReserved("decoded",s)}else if(Bg(t)||t.base64)if(this.reconstructor)s=this.reconstructor.takeBinaryData(t),s&&(this.reconstructor=null,super.emitReserved("decoded",s));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let s=0;const n={type:Number(t.charAt(0))};if(Oe[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===Oe.BINARY_EVENT||n.type===Oe.BINARY_ACK){const i=s+1;for(;t.charAt(++s)!=="-"&&s!=t.length;);const o=t.substring(i,s);if(o!=Number(o)||t.charAt(s)!=="-")throw new Error("Illegal attachments");n.attachments=Number(o)}if(t.charAt(s+1)==="/"){const i=s+1;for(;++s&&!(t.charAt(s)===","||s===t.length););n.nsp=t.substring(i,s)}else n.nsp="/";const a=t.charAt(s+1);if(a!==""&&Number(a)==a){const i=s+1;for(;++s;){const o=t.charAt(s);if(o==null||Number(o)!=o){--s;break}if(s===t.length)break}n.id=Number(t.substring(i,s+1))}if(t.charAt(++s)){const i=this.tryParse(t.substr(s));if(zg.isPayloadValid(n.type,i))n.data=i;else throw new Error("invalid payload")}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,s){switch(t){case Oe.CONNECT:return Nb(s);case Oe.DISCONNECT:return s===void 0;case Oe.CONNECT_ERROR:return typeof s=="string"||Nb(s);case Oe.EVENT:case Oe.BINARY_EVENT:return Array.isArray(s)&&(typeof s[0]=="number"||typeof s[0]=="string"&&PX.indexOf(s[0])===-1);case Oe.ACK:case Oe.BINARY_ACK:return Array.isArray(s)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class $X{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const s=RX(this.reconPack,this.buffers);return this.finishedReconstruction(),s}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const FX=Object.freeze(Object.defineProperty({__proto__:null,Decoder:zg,Encoder:IX,get PacketType(){return Oe},protocol:LX},Symbol.toStringTag,{value:"Module"}));function ss(e,t,s){return e.on(t,s),function(){e.off(t,s)}}const BX=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class JC extends yt{constructor(t,s,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=s,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[ss(t,"open",this.onopen.bind(this)),ss(t,"packet",this.onpacket.bind(this)),ss(t,"error",this.onerror.bind(this)),ss(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...s){var n,a,i;if(BX.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(s.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(s),this;const o={type:Oe.EVENT,data:s};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof s[s.length-1]=="function"){const u=this.ids++,m=s.pop();this._registerAckCallback(u,m),o.id=u}const l=(a=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||a===void 0?void 0:a.writable,c=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,s){var n;const a=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(a===void 0){this.acks[t]=s;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===t&&this.sendBuffer.splice(l,1);s.call(this,new Error("operation has timed out"))},a),o=(...l)=>{this.io.clearTimeoutFn(i),s.apply(this,l)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...s){return new Promise((n,a)=>{const i=(o,l)=>o?a(o):n(l);i.withError=!0,s.push(i),this.emit(t,...s)})}_addToQueue(t){let s;typeof t[t.length-1]=="function"&&(s=t.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((a,...i)=>n!==this._queue[0]?void 0:(a!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),s&&s(a)):(this._queue.shift(),s&&s(null,...i)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const s=this._queue[0];s.pending&&!t||(s.pending=!0,s.tryCount++,this.flags=s.flags,this.emit.apply(this,s.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Oe.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,s){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,s),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(n=>String(n.id)===t)){const n=this.acks[t];delete this.acks[t],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Oe.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Oe.EVENT:case Oe.BINARY_EVENT:this.onevent(t);break;case Oe.ACK:case Oe.BINARY_ACK:this.onack(t);break;case Oe.DISCONNECT:this.ondisconnect();break;case Oe.CONNECT_ERROR:this.destroy();const n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n);break}}onevent(t){const s=t.data||[];t.id!=null&&s.push(this.ack(t.id)),this.connected?this.emitEvent(s):this.receiveBuffer.push(Object.freeze(s))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const s=this._anyListeners.slice();for(const n of s)n.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const s=this;let n=!1;return function(...a){n||(n=!0,s.packet({type:Oe.ACK,id:t,data:a}))}}onack(t){const s=this.acks[t.id];typeof s=="function"&&(delete this.acks[t.id],s.withError&&t.data.unshift(null),s.apply(this,t.data))}onconnect(t,s){this.id=t,this.recovered=s&&this._pid===s,this._pid=s,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Oe.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const s=this._anyListeners;for(let n=0;n<s.length;n++)if(t===s[n])return s.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const s=this._anyOutgoingListeners;for(let n=0;n<s.length;n++)if(t===s[n])return s.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const s=this._anyOutgoingListeners.slice();for(const n of s)n.apply(this,t.data)}}}function eo(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}eo.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),s=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+s:e-s}return Math.min(e,this.max)|0};eo.prototype.reset=function(){this.attempts=0};eo.prototype.setMin=function(e){this.ms=e};eo.prototype.setMax=function(e){this.max=e};eo.prototype.setJitter=function(e){this.jitter=e};class hp extends yt{constructor(t,s){var n;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(s=t,t=void 0),s=s||{},s.path=s.path||"/socket.io",this.opts=s,Nm(this,s),this.reconnection(s.reconnection!==!1),this.reconnectionAttempts(s.reconnectionAttempts||1/0),this.reconnectionDelay(s.reconnectionDelay||1e3),this.reconnectionDelayMax(s.reconnectionDelayMax||5e3),this.randomizationFactor((n=s.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new eo({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(s.timeout==null?2e4:s.timeout),this._readyState="closed",this.uri=t;const a=s.parser||FX;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=s.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var s;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(s=this.backoff)===null||s===void 0||s.setMin(t),this)}randomizationFactor(t){var s;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(s=this.backoff)===null||s===void 0||s.setJitter(t),this)}reconnectionDelayMax(t){var s;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(s=this.backoff)===null||s===void 0||s.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new kX(this.uri,this.opts);const s=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const a=ss(s,"open",function(){n.onopen(),t&&t()}),i=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),t?t(l):this.maybeReconnectOnOpen()},o=ss(s,"error",i);if(this._timeout!==!1){const l=this._timeout,c=this.setTimeoutFn(()=>{a(),i(new Error("timeout")),s.close()},l);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(a),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(ss(t,"ping",this.onping.bind(this)),ss(t,"data",this.ondata.bind(this)),ss(t,"error",this.onerror.bind(this)),ss(t,"close",this.onclose.bind(this)),ss(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(s){this.onclose("parse error",s)}}ondecoded(t){wm(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,s){let n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new JC(this,t,s),this.nsps[t]=n),n}_destroy(t){const s=Object.keys(this.nsps);for(const n of s)if(this.nsps[n].active)return;this._close()}_packet(t){const s=this.encoder.encode(t);for(let n=0;n<s.length;n++)this.engine.write(s[n],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,s){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,s),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const s=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(a=>{a?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",a)):t.onreconnect()}))},s);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const vo={};function ud(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const s=DX(e,t.path||"/socket.io"),n=s.source,a=s.id,i=s.path,o=vo[a]&&i in vo[a].nsps,l=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let c;return l?c=new hp(n,t):(vo[a]||(vo[a]=new hp(n,t)),c=vo[a]),s.query&&!t.query&&(t.query=s.queryKey),c.socket(s.path,t)}Object.assign(ud,{Manager:hp,Socket:JC,io:ud,connect:ud});const zX=()=>{var _,O;const[e,t]=f.useState([]),[s,n]=f.useState([]),[a,i]=f.useState([]),[o,l]=f.useState(""),[c,d]=f.useState(""),[u,m]=f.useState(""),[h,g]=f.useState(!0),[j,y]=f.useState(null),[w,x]=f.useState(!1),[p,v]=f.useState(null),[N,b]=f.useState([]),[C,S]=f.useState(new Set),[k,D]=f.useState(!1),L=f.useRef(null),T=f.useRef(null),{user:B}=Ce();f.useEffect(()=>{if(!B)return;const P=localStorage.getItem("token"),F=ud("https://experimento2-production-54c0.up.railway.app",{auth:{token:P,user:{id:B.id,name:B.name,role:B.role}}});return F.on("connect",()=>{console.log("Conectado al servidor de chat")}),F.on("disconnect",()=>{console.log("Desconectado del servidor de chat")}),F.on("new_message",Q=>{t(X=>[...X,Q]),n(X=>X.map(re=>re.userId===Q.senderId?{...re,lastMessage:Q.content,lastMessageTime:Q.createdAt}:re)),c!==Q.senderId&&W(Q.senderName,Q.content)}),F.on("message_sent",Q=>{t(X=>[...X,Q])}),F.on("user_typing",Q=>{Q.isTyping?S(X=>new Set(X).add(Q.userId)):S(X=>{const re=new Set(X);return re.delete(Q.userId),re})}),F.on("user_connected",Q=>{b(X=>[...X,Q])}),F.on("user_disconnected",Q=>{b(X=>X.filter(re=>re.userId!==Q.userId))}),F.on("message_error",Q=>{y(Q.error)}),v(F),()=>{F.close()}},[B]),f.useEffect(()=>{(async()=>{try{g(!0);const F=localStorage.getItem("token"),[Q,X]=await Promise.all([K.get("/users/clients",{headers:{Authorization:`Bearer ${F}`}}),K.get("/chat/conversations",{headers:{Authorization:`Bearer ${F}`}})]);i(Q.data),n(X.data),y(null)}catch(F){console.error("Error fetching data:",F),y("Error al cargar los datos")}finally{g(!1)}})()},[]),f.useEffect(()=>{c&&V(c)},[c]),f.useEffect(()=>{A()},[e]);const V=async P=>{try{const F=localStorage.getItem("token"),Q=await K.get(`/chat/messages/${P}`,{headers:{Authorization:`Bearer ${F}`}});t(Q.data)}catch(F){console.error("Error fetching messages:",F),y("Error al cargar los mensajes")}},A=()=>{var P;(P=L.current)==null||P.scrollIntoView({behavior:"smooth"})},I=async P=>{if(P.preventDefault(),!(!u.trim()||!c||!p))try{x(!0),p.emit("send_message",{receiverId:c,content:u}),m(""),p.emit("typing_stop",{receiverId:c}),D(!1)}catch(F){console.error("Error sending message:",F),y("Error al enviar el mensaje")}finally{x(!1)}},q=P=>{l(P),d(P),t([])},Y=P=>{d(P)},M=P=>{m(P.target.value),!(!p||!c)&&(k||(D(!0),p.emit("typing_start",{receiverId:c})),T.current&&clearTimeout(T.current),T.current=setTimeout(()=>{D(!1),p.emit("typing_stop",{receiverId:c})},1e3))},W=(P,F)=>{"Notification"in window&&Notification.permission==="granted"&&new Notification(`Nuevo mensaje de ${P}`,{body:F,icon:"/favicon.ico"})},E=P=>{const F=new Date(P),X=(new Date().getTime()-F.getTime())/(1e3*60*60);return X<24?F.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):X<48?"Ayer":F.toLocaleDateString()},R=P=>N.some(F=>F.userId===P),$=P=>P.charAt(0).toUpperCase();return h?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):r.jsx("div",{className:"py-6",children:r.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"bg-white rounded-lg shadow",children:[r.jsxs("div",{className:"p-4 border-b",children:[r.jsx("h1",{className:"text-xl font-semibold",children:"Chat con Clientes"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Comunicación directa con tus clientes"})]}),r.jsxs("div",{className:"flex h-96",children:[r.jsxs("div",{className:"w-1/3 border-r bg-gray-50",children:[r.jsxs("div",{className:"p-4 border-b",children:[r.jsx("h2",{className:"font-medium text-gray-900 mb-3",children:"Conversaciones"}),s.length===0?r.jsx("p",{className:"text-sm text-gray-500",children:"No hay conversaciones activas"}):r.jsx("div",{className:"space-y-2",children:s.map(P=>r.jsx("div",{onClick:()=>Y(P.userId),className:`p-3 rounded-lg cursor-pointer transition-colors ${c===P.userId?"bg-blue-100 border-blue-300":"bg-white hover:bg-gray-100"}`,children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"w-10 h-10 bg-green-600 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white text-sm font-medium",children:$(P.userName)})}),R(P.userId)&&r.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:P.userName}),r.jsx("div",{className:"text-xs text-gray-400",children:E(P.lastMessageTime)})]}),r.jsx("p",{className:"text-xs text-gray-500 truncate",children:P.lastMessage}),P.unreadCount>0&&r.jsx("div",{className:"mt-1",children:r.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:P.unreadCount})})]})]})},P.userId))})]}),r.jsxs("div",{className:"p-4 border-t",children:[r.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Nueva conversación"}),r.jsxs("select",{value:o,onChange:P=>q(P.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Seleccionar cliente para nueva conversación",children:[r.jsx("option",{value:"",children:"Selecciona un cliente"}),a.map(P=>r.jsxs("option",{value:P.user.id,children:[P.user.name," (",P.user.email,")"]},P.id))]})]})]}),r.jsx("div",{className:"flex-1 flex flex-col",children:c?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"p-4 border-b bg-gray-50",children:r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"w-10 h-10 bg-green-600 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white text-sm font-medium",children:$(((_=s.find(P=>P.userId===c))==null?void 0:_.userName)||"C")})}),R(c)&&r.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})]}),r.jsxs("div",{className:"ml-3",children:[r.jsx("p",{className:"font-medium text-gray-900",children:((O=s.find(P=>P.userId===c))==null?void 0:O.userName)||"Cliente"}),r.jsx("p",{className:"text-sm text-gray-500",children:R(c)?"En línea":"Desconectado"})]})]})})}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e.length===0?r.jsx("div",{className:"text-center text-gray-500 mt-8",children:r.jsx("p",{children:"No hay mensajes aún. ¡Inicia la conversación!"})}):e.map(P=>r.jsx("div",{className:`flex ${P.isOwnMessage?"justify-end":"justify-start"}`,children:r.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${P.isOwnMessage?"bg-blue-600 text-white":"bg-gray-200 text-gray-900"}`,children:[r.jsx("div",{className:"text-sm",children:P.content}),r.jsx("div",{className:`text-xs mt-1 ${P.isOwnMessage?"text-blue-100":"text-gray-500"}`,children:E(P.createdAt)})]})},P.id)),C.has(c)&&r.jsx("div",{className:"flex justify-start",children:r.jsx("div",{className:"bg-gray-200 text-gray-900 px-4 py-2 rounded-lg",children:r.jsx("div",{className:"text-sm",children:"Escribiendo..."})})}),r.jsx("div",{ref:L})]}),r.jsx("form",{onSubmit:I,className:"p-4 border-t",children:r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("input",{type:"text",value:u,onChange:M,placeholder:"Escribe tu mensaje...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:w}),r.jsx("button",{type:"submit",disabled:!u.trim()||w,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:w?"Enviando...":"Enviar"})]})})]}):r.jsx("div",{className:"flex-1 flex items-center justify-center",children:r.jsxs("div",{className:"text-center text-gray-500",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),r.jsx("p",{className:"text-lg font-medium",children:"Selecciona una conversación"}),r.jsx("p",{className:"text-sm",children:"O inicia una nueva conversación con un cliente"})]})})})]}),j&&r.jsx("div",{className:"p-4 bg-red-50 border-t border-red-200",children:r.jsx("div",{className:"text-red-600 text-sm",children:j})})]})})})};async function UX(e,t){return(await K.post("/invoices",e,{headers:{Authorization:`Bearer ${t}`}})).data}async function VX(e,t,s){return(await K.put(`/invoices/${e}`,t,{headers:{Authorization:`Bearer ${s}`}})).data}async function HX(e,t){return(await K.delete(`/invoices/${e}`,{headers:{Authorization:`Bearer ${t}`}})).data}async function WX(e){return(await K.get("/users/clients")).data}const YX=async(e,t)=>(await K.post("/provision-fondos",e,{headers:{Authorization:`Bearer ${t}`}})).data,qX=async e=>(await K.get("/provision-fondos",{params:{soloPendientes:!0},headers:{Authorization:`Bearer ${e}`}})).data,GX=async(e,t,s)=>(await K.get("/provision-fondos",{params:{clientId:e,expedienteId:t,soloPendientes:!0},headers:{Authorization:`Bearer ${s}`}})).data,ZC=async(e,t)=>(await K.get("/provision-fondos",{params:{clientId:e},headers:{Authorization:`Bearer ${t}`}})).data,KX=async(e,t)=>{const s={...t};return(await K.get("/provision-fondos",{params:s,headers:{Authorization:`Bearer ${e}`}})).data},XX=async(e,t,s)=>(await K.patch(`/provision-fondos/${e}`,t,{headers:{Authorization:`Bearer ${s}`}})).data,QX=async(e,t)=>(await K.delete(`/provision-fondos/${e}`,{headers:{Authorization:`Bearer ${t}`}})).data,JX=({invoiceId:e,isOpen:t,onClose:s,currentUser:n})=>{const[a,i]=f.useState([]),[o,l]=f.useState(null),[c,d]=f.useState(!1),[u,m]=f.useState(null);f.useEffect(()=>{t&&e&&h()},[t,e]);const h=async()=>{var x,p;d(!0),m(null);try{const v=localStorage.getItem("token");if(!v)throw new Error("No token available");const N=n||JSON.parse(localStorage.getItem("user")||"{}");if(console.log("Usuario actual:",N),console.log("Rol del usuario:",N.role),console.log("¿Es ADMIN?",N.role==="ADMIN"),console.log("¿Es ABOGADO?",N.role==="ABOGADO"),N.role!=="ADMIN"&&N.role!=="ABOGADO")throw console.log("Acceso denegado - Rol no autorizado:",N.role),new Error("No tienes permisos para ver el historial de auditoría");console.log("Acceso autorizado para auditoría");const b=await K.get(`/invoices/${e}/audit-history`,{headers:{Authorization:`Bearer ${v}`}});i(b.data.auditHistory||[]),l(b.data.summary||null)}catch(v){console.error("Error fetching audit history:",v),m(((p=(x=v.response)==null?void 0:x.data)==null?void 0:p.message)||v.message||"Error al cargar el historial de auditoría")}finally{d(!1)}},g=x=>new Date(x).toLocaleString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),j=x=>{switch(x){case"created":return"📄";case"updated":return"✏️";case"deleted":return"🗑️";case"status_changed":return"🔄";default:return"📝"}},y=x=>{switch(x){case"created":return"text-green-600";case"updated":return"text-blue-600";case"deleted":return"text-red-600";case"status_changed":return"text-purple-600";default:return"text-gray-600"}},w=x=>{if(!x)return"N/A";try{const p=JSON.parse(x);return JSON.stringify(p,null,2)}catch{return x}};return t?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[r.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"📋 Historial de Auditoría de Factura"}),r.jsx("button",{onClick:s,className:"text-gray-500 hover:text-gray-700 text-2xl",children:"×"})]}),r.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:[r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4 mb-4",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("span",{className:"text-blue-600 mr-2",children:"ℹ️"}),r.jsxs("div",{className:"text-sm text-blue-800",children:[r.jsx("p",{className:"font-medium mb-1",children:"Información sobre Auditoría"}),r.jsx("p",{children:"• Solo visible para administradores y abogados"}),r.jsx("p",{children:"• Disponible en cualquier estado de la factura"}),r.jsx("p",{children:"• Registra todos los cambios realizados en la factura para trazabilidad"})]})]})}),c&&r.jsxs("div",{className:"flex justify-center items-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),r.jsx("span",{className:"ml-2",children:"Cargando historial..."})]}),u&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-4",children:r.jsx("p",{className:"text-red-800",children:u})}),!c&&!u&&r.jsxs(r.Fragment,{children:[o&&r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4 mb-6",children:[r.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"📊 Resumen de Cambios"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Total de cambios:"}),r.jsx("span",{className:"ml-2 text-blue-600",children:o.totalChanges})]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Última modificación:"}),r.jsx("span",{className:"ml-2 text-blue-600",children:o.lastModified?g(o.lastModified):"N/A"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Por:"}),r.jsx("span",{className:"ml-2 text-blue-600",children:o.lastModifiedBy||"N/A"})]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Estado:"}),r.jsx("span",{className:"ml-2 text-blue-600",children:o.totalChanges>0?"Con modificaciones":"Sin modificaciones"})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"font-semibold text-gray-800 mb-4",children:"📝 Historial Detallado"}),a.length===0?r.jsx("div",{className:"text-center py-8 text-gray-500",children:r.jsx("p",{children:"No hay registros de auditoría para esta factura."})}):r.jsx("div",{className:"space-y-3",children:a.map(x=>r.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50",children:[r.jsx("div",{className:"flex items-start justify-between",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("span",{className:"text-xl",children:j(x.action)}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:`font-medium ${y(x.action)}`,children:x.description}),r.jsxs("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:[x.user.name," (",x.user.role,")"]})]}),r.jsx("div",{className:"text-sm text-gray-600 mt-1",children:g(x.createdAt)})]})]})}),x.fieldName&&r.jsxs("div",{className:"mt-3 pl-8",children:[r.jsxs("div",{className:"text-sm text-gray-600",children:[r.jsx("span",{className:"font-medium",children:"Campo:"})," ",x.fieldName]}),x.oldValue&&r.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[r.jsx("span",{className:"font-medium text-red-600",children:"Valor anterior:"}),r.jsx("div",{className:"bg-red-50 p-2 rounded mt-1 font-mono text-xs",children:w(x.oldValue)})]}),x.newValue&&r.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[r.jsx("span",{className:"font-medium text-green-600",children:"Nuevo valor:"}),r.jsx("div",{className:"bg-green-50 p-2 rounded mt-1 font-mono text-xs",children:w(x.newValue)})]})]}),(x.ipAddress||x.userAgent)&&r.jsxs("div",{className:"mt-3 pl-8 text-xs text-gray-500",children:[x.ipAddress&&r.jsxs("div",{children:["IP: ",x.ipAddress]}),x.userAgent&&r.jsxs("div",{className:"truncate",title:x.userAgent,children:["User Agent: ",x.userAgent.substring(0,50),"..."]})]})]},x.id))})]})]})]}),r.jsx("div",{className:"border-t p-4 flex justify-end",children:r.jsx("button",{onClick:s,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"Cerrar"})})]})}):null},Ye={BORRADOR:"borrador",EMITIDA:"emitida",ENVIADA:"enviada",NOTIFICADA:"notificada",ACEPTADA:"aceptada",RECHAZADA:"rechazada",ANULADA:"anulada"},ZX=[Ye.BORRADOR,Ye.EMITIDA],eQ=[Ye.BORRADOR,Ye.EMITIDA,Ye.ENVIADA],Cb=e=>ZX.includes(e),tQ=e=>!0,Sb=e=>eQ.includes(e),yo=e=>{switch(e){case Ye.BORRADOR:return"Borrador";case Ye.EMITIDA:return"Emitida";case Ye.ENVIADA:return"Enviada";case Ye.NOTIFICADA:return"Notificada al Cliente";case Ye.ACEPTADA:return"Aceptada";case Ye.RECHAZADA:return"Rechazada";case Ye.ANULADA:return"Anulada";default:return e}},Eb=e=>{switch(e){case Ye.BORRADOR:return"text-gray-600 bg-gray-100";case Ye.EMITIDA:return"text-blue-600 bg-blue-100";case Ye.ENVIADA:return"text-orange-600 bg-orange-100";case Ye.NOTIFICADA:return"text-purple-600 bg-purple-100";case Ye.ACEPTADA:return"text-green-600 bg-green-100";case Ye.RECHAZADA:return"text-red-600 bg-red-100";case Ye.ANULADA:return"text-red-800 bg-red-200";default:return"text-gray-600 bg-gray-100"}},rQ=e=>{switch(e){case Ye.BORRADOR:return"📝";case Ye.EMITIDA:return"📄";case Ye.ENVIADA:return"📤";case Ye.NOTIFICADA:return"📢";case Ye.ACEPTADA:return"✅";case Ye.RECHAZADA:return"❌";case Ye.ANULADA:return"🚫";default:return"📋"}},bo={numeroFactura:"",fechaFactura:"",tipoFactura:"F",receptorId:"",importeTotal:0,baseImponible:0,cuotaIVA:0,tipoIVA:21,regimenIvaEmisor:"General",claveOperacion:"01",metodoPago:"TRANSFERENCIA",fechaOperacion:"",estado:"emitida",items:[{description:"",quantity:1,unitPrice:0,total:0}],aplicarIVA:!0,retencion:"",descuento:0,tipoImpuesto:"iva",facturaOriginalId:"",tipoRectificacion:"",motivoRectificacion:"",provisionIds:[]},sQ=()=>{var Ug,Vg;const{user:e}=Ce(),t=localStorage.getItem("token");console.log("InvoicesPage component initialized"),console.log("User:",e),console.log("Token available:",!!t);const[s,n]=f.useState([]),[a,i]=f.useState(!0),[o,l]=f.useState(null),[c,d]=f.useState(!1),[u,m]=f.useState(null),[h,g]=f.useState(bo),[j,y]=f.useState(null),[w,x]=f.useState(""),[p,v]=f.useState(""),[N,b]=f.useState([]),[C,S]=f.useState([]),[k,D]=f.useState(null),[L,T]=f.useState(null),[B,V]=f.useState(!1),[A,I]=f.useState(null),[q,Y]=f.useState(null),[M,W]=f.useState([]),[E,R]=f.useState(""),[$,_]=f.useState(null),[O,P]=f.useState([]),[F,Q]=f.useState([]),[X,re]=f.useState([]),[G,le]=f.useState([]),[ie,xe]=f.useState(null),[je,Pe]=f.useState(null),[ee,pe]=f.useState(!1),[be,we]=f.useState(null),[ke,Ue]=f.useState(null),ct=f.useRef(null),sr=f.useRef(null),Ar=f.useRef(null),xs=f.useRef([]),[Vs,Ge]=f.useState({}),z=N.find(U=>{var Z;return((Z=U.user)==null?void 0:Z.id)===h.receptorId}),de=z==null?void 0:z.id,[De,ge]=f.useState(""),[gt,Ve]=f.useState(""),[nt,Dt]=f.useState(!1),[$t,Cm]=f.useState(null),[to,Sm]=f.useState([]),ea=U=>{if(!U)return;if(U.includes("/")){const te=U.split("/");if(te.length===3){const ce=te[0],ue=te[1];return`${te[2]}-${ue.padStart(2,"0")}-${ce.padStart(2,"0")}`}}const Z=new Date(U);if(isNaN(Z.getTime())){console.error("Invalid date format:",U);return}return Z.toISOString().split("T")[0]},gs=U=>U.toLocaleString("es-ES",{minimumFractionDigits:2,maximumFractionDigits:2});f.useEffect(()=>{console.log("InvoicesPage useEffect called - fetching data..."),at(),Kt()},[]),f.useEffect(()=>{(async()=>{if(h.receptorId&&h.expedienteId)try{const Z=localStorage.getItem("token");if(!Z)throw new Error("No token found");const te=await qX(Z);console.log("Provisiones recibidas:",te),console.log("Buscando clientProfileId:",de,"expedienteId:",h.expedienteId);const ce=te.filter(ue=>ue.clientId===de&&ue.expedienteId===h.expedienteId&&(!ue.invoiceId||ue.invoiceId===h.id));console.log("Provisiones filtradas:",ce),ce.length>0?(_(ce[0]),Q(ce)):(_(null),Q([]))}catch{_(null),Q([])}else _(null),Q([])})()},[h.receptorId,h.expedienteId,de,h.id]),f.useEffect(()=>{(async()=>{if(console.log("🔍 fetchProvisiones - receptorId:",h.receptorId,"expedienteId:",h.expedienteId,"clientProfileId:",de),h.receptorId&&de)try{const Z=localStorage.getItem("token");let te;if(h.expedienteId?(console.log("🔍 Buscando provisiones específicas del expediente:",h.expedienteId),te=await GX(de??"",h.expedienteId??"",Z??"")):(console.log("🔍 Buscando todas las provisiones del cliente:",de),te=await ZC(de??"",Z??""),te=te.filter(ce=>!ce.invoiceId)),console.log("🔍 Provisiones encontradas:",te),h.id){const ce=h.provisionFondos||[],ye=[...te,...ce].filter((Ae,yr,ar)=>yr===ar.findIndex(nc=>nc.id===Ae.id));re(ye)}else re(te)}catch(Z){console.error("❌ Error al cargar provisiones:",Z),re([])}else console.log("🔍 No se cumplen las condiciones para cargar provisiones"),re([])})()},[h.receptorId,h.expedienteId,de,h.id]),f.useEffect(()=>{console.log("🔍 Provisiones actualizadas:",X.length,X)},[X]);const at=async()=>{var U,Z,te;i(!0);try{if(!t)throw new Error("No token available");console.log("Fetching invoices with token:",t?"Present":"Missing");const ce={};De&&(ce.clientId=De),gt&&(ce.paymentDate=gt),console.log("Invoices params:",ce);const ue=await K.get("/invoices",{params:ce});console.log("Invoices data received:",ue.data),n(ue.data),l(null)}catch(ce){console.error("Error fetching invoices:",ce);const ue=((Z=(U=ce==null?void 0:ce.response)==null?void 0:U.data)==null?void 0:Z.message)||(ce==null?void 0:ce.message)||"Error al cargar las facturas";l(`❌ ${ue}`),((te=ce==null?void 0:ce.response)==null?void 0:te.status)===401&&n([])}finally{i(!1)}},Kt=async()=>{try{if(!t)throw new Error("No token available");console.log("Fetching clients with token:",t?"Present":"Missing");const U=await WX(t);console.log("Clients data received:",U),console.log("First client structure:",U[0]),b(U)}catch(U){console.error("Error fetching clients:",U),b([])}},Xt=()=>{const U=new Date().getFullYear(),Z=s.length+1,te=`fac-${U}-${Z.toString().padStart(4,"0")}`;g({...bo,numeroFactura:te,fechaFactura:new Date().toISOString().split("T")[0],fechaOperacion:new Date().toISOString().split("T")[0]}),m(null),le([]),Q([]),_(null),d(!0)},vs=()=>{const U=s.filter(Z=>Z.estado!=="anulada"&&Z.tipoFactura!=="R"&&Z.estado!=="borrador");Sm(U),Dt(!0)},nr=U=>{Cm(U);const Z=U.provisionFondos||[],te=Z.map(ce=>ce.id);g({...bo,tipoFactura:"R",receptorId:U.receptorId,expedienteId:U.expedienteId,facturaOriginalId:U.id,numeroFactura:"",items:U.items.map(ce=>({description:ce.description,quantity:ce.quantity,unitPrice:ce.unitPrice,total:ce.total})),tipoIVA:U.tipoIVA,regimenIvaEmisor:U.regimenIvaEmisor,metodoPago:U.metodoPago,provisionIds:te}),le(te),re(Z),Dt(!1),d(!0)},Be=U=>{const{name:Z,value:te}=U.target;g(ce=>({...ce,[Z]:te})),Vs[Z]&&Ge(ce=>({...ce,[Z]:!1}))},Tr=async U=>{Be(U);const Z=U.target.value;if(g(te=>({...te,expedienteId:""})),Z)try{console.log("Fetching expedientes for client:",Z);const ce=(await K.get("/cases")).data.filter(ue=>{var ye,Ae;return((Ae=(ye=ue.client)==null?void 0:ye.user)==null?void 0:Ae.id)===Z||ue.clientId===Z});console.log("Expedientes found:",ce),P(ce)}catch(te){console.error("Error fetching expedientes:",te),P([])}else P([])},ys=(U,Z,te)=>{var ce,ue;g(ye=>{const Ae=[...ye.items];return Ae[U][Z]=te,Ae[U].total=Ae[U].quantity*Ae[U].unitPrice,{...ye,items:Ae}}),(ue=(ce=Vs.items)==null?void 0:ce[U])!=null&&ue[Z]&&Ge(ye=>{var Ae;return{...ye,items:{...ye.items,[U]:{...(Ae=ye.items)==null?void 0:Ae[U],[Z]:!1}}}})},bt=()=>{g(U=>({...U,items:[...U.items,{description:"",quantity:1,unitPrice:0,total:0}]}))},bs=async U=>{if(U.preventDefault(),console.log("handleCreate called"),D(null),T(null),V(!0),!h.receptorId||!h.fechaOperacion||!h.items.length){console.log("Validation failed: missing required fields"),D("Completa todos los campos obligatorios."),V(!1);return}if(h.items.some(Z=>!Z.description||Z.quantity<=0||Z.unitPrice===void 0)){console.log("Validation failed: invalid items"),D("Todos los conceptos deben tener descripción, cantidad y precio válidos."),V(!1);return}try{console.log("Starting invoice creation...");const{emisorId:Z,fechaFactura:te,importeTotal:ce,baseImponible:ue,cuotaIVA:ye,...Ae}=h,yr={...Ae,descuento:h.descuento===""||h.descuento==null?0:Number(h.descuento),retencion:h.retencion===""||h.retencion==null?0:Number(h.retencion),tipoIVA:h.tipoIVA===""||h.tipoIVA==null?21:Number(h.tipoIVA),estado:h.estado||"emitida",provisionIds:G,fechaOperacion:ea(h.fechaOperacion),paymentDate:h.paymentDate?ea(h.paymentDate):void 0};console.log("FRONTEND - provisionesSeleccionadas:",G),console.log("FRONTEND - facturaData a enviar:",yr),console.log("FRONTEND - form original:",h),console.log("FRONTEND - facturaDataSinCalculos:",Ae);const ar=await UX(yr,t??"");console.log("Invoice created successfully:",ar),T("✅ Factura creada correctamente."),d(!1),await at(),setTimeout(()=>T(null),5e3)}catch(Z){console.error("Error al crear factura:",Z),l("❌ Error al crear la factura. Verifica los datos e intenta de nuevo.")}finally{V(!1)}},_r=async U=>{var Z;if(U.preventDefault(),D(null),T(null),Ge({}),V(!0),!h.receptorId){D("Debes seleccionar un cliente."),Ge({cliente:!0}),V(!1),setTimeout(()=>{var te;return(te=ct.current)==null?void 0:te.focus()},100);return}if(!h.expedienteId){D("Debes seleccionar un expediente."),Ge({expediente:!0}),V(!1),setTimeout(()=>{var te;return(te=sr.current)==null?void 0:te.focus()},100);return}if(!h.fechaOperacion){D("Debes indicar la fecha de operación."),Ge({fechaOperacion:!0}),V(!1),setTimeout(()=>{var te;return(te=Ar.current)==null?void 0:te.focus()},100);return}if(!h.items.length){D("Debes añadir al menos un concepto."),V(!1);return}for(let te=0;te<h.items.length;te++){const ce=h.items[te];if(!ce.description){D("Todos los conceptos deben tener descripción."),Ge({items:{[te]:{description:!0}}}),V(!1),setTimeout(()=>{var ue,ye;return(ye=(ue=xs.current[te])==null?void 0:ue.description)==null?void 0:ye.focus()},100);return}if(!ce.quantity||ce.quantity<=0){D("Todos los conceptos deben tener cantidad válida."),Ge({items:{[te]:{quantity:!0}}}),V(!1),setTimeout(()=>{var ue,ye;return(ye=(ue=xs.current[te])==null?void 0:ue.quantity)==null?void 0:ye.focus()},100);return}if(ce.unitPrice===void 0||ce.unitPrice===null){D("Todos los conceptos deben tener precio unitario."),Ge({items:{[te]:{unitPrice:!0}}}),V(!1),setTimeout(()=>{var ue,ye;return(ye=(ue=xs.current[te])==null?void 0:ue.unitPrice)==null?void 0:ye.focus()},100);return}}try{const{id:te,emisorId:ce,fechaFactura:ue,importeTotal:ye,baseImponible:Ae,cuotaIVA:yr,xml:ar,xmlFirmado:nc,selloTiempo:na,createdAt:za,updatedAt:Jr,emisor:Hs,receptor:ac,expediente:Hg,provisionFondos:yQ,numeroFactura:bQ,tipoFactura:jQ,qrData:wQ,...xn}=h,Wg=xn.items.map(tS=>{const{id:NQ,invoiceId:CQ,total:SQ,...rS}=tS;return rS}),Yg={receptorId:xn.receptorId,expedienteId:xn.expedienteId,fechaOperacion:ea(h.fechaOperacion),metodoPago:((Z=xn.metodoPago)==null?void 0:Z.toLowerCase())||"transferencia",regimenIvaEmisor:xn.regimenIvaEmisor,claveOperacion:xn.claveOperacion,tipoIVA:h.tipoIVA===""||h.tipoIVA==null?21:Number(h.tipoIVA),aplicarIVA:xn.aplicarIVA!==!1,descuento:h.descuento===""||h.descuento==null?0:Number(h.descuento),retencion:h.retencion===""||h.retencion==null?0:Number(h.retencion),items:Wg,provisionIds:G,estado:h.estado||"emitida",motivoAnulacion:xn.motivoAnulacion||null,paymentDate:h.paymentDate?ea(h.paymentDate):void 0};console.log("Datos a enviar al backend:",Yg),console.log("Datos originales del form:",h),console.log("Items limpios:",Wg),console.log("Fecha de operación original:",h.fechaOperacion),console.log("Fecha de operación formateada:",ea(h.fechaOperacion)),await VX(h.id,Yg,t??""),T("✅ Factura actualizada correctamente."),l(null),m(null),at(),setTimeout(()=>{T(null),d(!1)},3e3)}catch(te){if(console.error("Error al actualizar factura:",te),T(null),te.response&&te.response.data&&te.response.data.message){const ce=Array.isArray(te.response.data.message)?te.response.data.message:[te.response.data.message];let ue=`❌ Error al actualizar la factura:

`,ye=[];ce.forEach(Ae=>{Ae.includes("numeroFactura should not exist")?(ue+=`• No puedes editar el número de factura
`,ye.push("El número de factura se asigna automáticamente")):Ae.includes("tipoFactura should not exist")?(ue+=`• No puedes editar el tipo de factura
`,ye.push("El tipo de factura no se puede modificar después de la creación")):Ae.includes("qrData should not exist")?(ue+=`• El código QR se genera automáticamente
`,ye.push("El código QR se calcula automáticamente")):Ae.includes("total should not exist")?(ue+=`• Los totales de los conceptos se calculan automáticamente
`,ye.push("No edites manualmente los totales de los conceptos")):ue+=`• ${Ae}
`}),ye.length>0&&(ue+=`
💡 Sugerencias:
`,ye.forEach(Ae=>{ue+=`• ${Ae}
`})),l(ue)}else l("❌ Error al actualizar la factura. Verifica los datos e intenta de nuevo.");if(te.response&&te.response.data&&te.response.data.message){const ce=Array.isArray(te.response.data.message)?te.response.data.message:[te.response.data.message];ce.some(ue=>ue.includes("fechaOperacion"))?(Ge({fechaOperacion:!0}),setTimeout(()=>{var ue;return(ue=Ar.current)==null?void 0:ue.focus()},100)):ce.some(ue=>ue.includes("receptorId"))?(Ge({cliente:!0}),setTimeout(()=>{var ue;return(ue=ct.current)==null?void 0:ue.focus()},100)):ce.some(ue=>ue.includes("expedienteId"))&&(Ge({expediente:!0}),setTimeout(()=>{var ue;return(ue=sr.current)==null?void 0:ue.focus()},100))}}finally{V(!1)}},Qr=()=>r.jsxs("div",{className:"mb-6 p-4 bg-blue-50 border-l-4 border-blue-400 rounded",children:[r.jsx("h3",{className:"font-bold mb-2 text-blue-800",id:"info-panel-heading",children:"Información sobre Gestión de Facturas"}),r.jsxs("ol",{className:"list-decimal pl-6 mb-2 text-sm text-blue-900",children:[r.jsx("li",{children:"Puedes crear nuevas facturas, editarlas, ver sus detalles, eliminar o consultar sus metadatos."}),r.jsx("li",{children:"Utiliza los botones de la columna de acciones para gestionar cada factura."})]}),r.jsxs("div",{className:"text-xs text-blue-700",children:[r.jsx("b",{children:"¿Problemas?"})," Si tienes dudas sobre la gestión de facturas, contacta con soporte técnico.",r.jsx("br",{})]})]}),ta=U=>{console.log("[FRONTEND] Abriendo modal para factura:",U.id,U.numeroFactura),Pe(U)},ra=async U=>{if(console.log("EDITANDO FACTURA:",U),console.log("PROVISIONES DE LA FACTURA:",U.provisionFondos),!Cb(U.estado)){D(`No se puede editar una factura con estado '${yo(U.estado)}'. Solo se pueden editar facturas en estado 'Borrador' o 'Emitida'.`);return}const Z={...U,items:U.items||[],aplicarIVA:U.aplicarIVA!==!1,retencion:U.retencion??"",descuento:U.descuento??"",tipoImpuesto:U.tipoImpuesto||(U.retencion&&Number(U.retencion)>0?"retencion":"iva"),fechaOperacion:U.fechaOperacion?U.fechaOperacion.slice(0,10):""};if(g(Z),m(U),d(!0),U.receptorId)try{const ce=(await K.get("/cases")).data.filter(ue=>{var ye,Ae;return((Ae=(ye=ue.client)==null?void 0:ye.user)==null?void 0:Ae.id)===U.receptorId||ue.clientId===U.receptorId});P(ce)}catch{P([])}if(U.provisionFondos&&U.provisionFondos.length>0){console.log("PROVISIONES ENCONTRADAS:",U.provisionFondos);const te=U.provisionFondos.map(ce=>ce.id);console.log("PROVISION IDs:",te),le(te),Q(U.provisionFondos),_(U.provisionFondos[0])}else console.log("NO HAY PROVISIONES EN LA FACTURA"),le([]),Q([]),_(null)},js=async U=>{var te,ce,ue;const Z=s.find(ye=>ye.id===U);if(!Z){l("❌ No se encontró la factura en la lista local."),await at();return}if(!Sb(Z.estado)){l(`❌ No se puede eliminar una factura con estado '${yo(Z.estado)}'. Solo se pueden eliminar facturas en estado 'borrador', 'emitida' o 'enviada'.`),setTimeout(()=>l(null),5e3);return}if(window.confirm("¿Estás seguro de que quieres eliminar esta factura? Esta acción no se puede deshacer.")){xe(U);try{await HX(U,t??""),await at(),T("🗑️ Factura eliminada correctamente."),setTimeout(()=>T(null),5e3)}catch(ye){if(console.error("Error al eliminar factura:",ye),((te=ye==null?void 0:ye.response)==null?void 0:te.status)===404)l("❌ La factura ya no existe en el servidor. Refrescando lista..."),await at();else{const Ae=((ue=(ce=ye==null?void 0:ye.response)==null?void 0:ce.data)==null?void 0:ue.message)||(ye==null?void 0:ye.message)||"Error al eliminar la factura.";l(`❌ Error al eliminar la factura: ${Ae}`)}setTimeout(()=>l(null),5e3)}finally{xe(null)}}},sa=U=>{Ue({open:!0,invoiceId:U.id})},ro=U=>{var ce,ue;const Z={"Información General":{ID:U.id,"Número de Factura":U.numeroFactura,Tipo:U.tipoFactura,Estado:U.estado,"Fecha de Creación":new Date(U.createdAt).toLocaleString("es-ES"),"Última Actualización":new Date(U.updatedAt).toLocaleString("es-ES")},Fechas:{"Fecha de Factura":new Date(U.fechaFactura).toLocaleDateString("es-ES"),"Fecha de Operación":new Date(U.fechaOperacion).toLocaleDateString("es-ES"),"Sello de Tiempo":U.selloTiempo?new Date(U.selloTiempo).toLocaleString("es-ES"):"No aplicado"},"Datos Fiscales":{"Base Imponible":`${gs(U.baseImponible)} €`,"Cuota IVA":`${gs(U.cuotaIVA)} €`,"Tipo IVA":`${U.tipoIVA}%`,"Importe Total":`${gs(U.importeTotal)} €`,"Régimen IVA Emisor":U.regimenIvaEmisor,"Clave de Operación":U.claveOperacion,"Método de Pago":U.metodoPago},Relaciones:{"Emisor ID":U.emisorId,"Receptor ID":U.receptorId,"Expediente ID":U.expedienteId||"No asociado","Número de Items":((ce=U.items)==null?void 0:ce.length)||0,"Provisiones Asociadas":((ue=U.provisionFondos)==null?void 0:ue.length)||0},XML:{"XML Generado":U.xml?"Sí":"No","XML Firmado":U.xmlFirmado?"Sí":"No","Tamaño XML":U.xml?`${Math.round(U.xml.length/1024)} KB`:"N/A","Tamaño XML Firmado":U.xmlFirmado?`${Math.round(U.xmlFirmado.length/1024)} KB`:"N/A"},Anulación:U.motivoAnulacion?{"Motivo de Anulación":U.motivoAnulacion}:"No anulada"},te=Object.entries(Z).map(([ye,Ae])=>typeof Ae=="string"?`${ye}: ${Ae}`:`${ye}:
${Object.entries(Ae).map(([yr,ar])=>`  ${yr}: ${ar}`).join(`
`)}`).join(`

`);we({open:!0,text:te})},eS=({invoice:U})=>{console.log("[FRONTEND] InvoiceView renderizado para factura:",U.id,U.numeroFactura);const[Z,te]=f.useState(null),[ce,ue]=f.useState(!0),[ye,Ae]=f.useState(null),[yr,ar]=f.useState(!1);f.useEffect(()=>{(async()=>{ue(!0),Ae(null);try{const Jr=localStorage.getItem("token");console.log("[FRONTEND] Cargando HTML preview para factura:",U.id);const Hs=await fetch(`${Ii()}/api/invoices/${U.id}/html-preview`,{headers:{Authorization:`Bearer ${Jr}`,"Content-Type":"application/json"},mode:"cors"});if(console.log("[FRONTEND] Status de respuesta HTML:",Hs.status),!Hs.ok){const Hg=await Hs.text();throw console.error("[FRONTEND] Error response HTML:",Hg),new Error(`No se pudo cargar la previsualización: ${Hs.status} ${Hs.statusText}`)}const ac=await Hs.text();console.log("[FRONTEND] HTML recibido, longitud:",ac.length),console.log("[FRONTEND] Primeros 200 caracteres:",ac.substring(0,200)),te(ac)}catch(Jr){console.error("[FRONTEND] Error cargando HTML:",Jr),Ae(Jr.message||"Error desconocido")}finally{ue(!1)}})();const za=Jr=>{Jr.data==="print-completed"&&(console.log("[FRONTEND] Impresión completada, reseteando estado"),ar(!1))};return window.addEventListener("message",za),()=>{window.removeEventListener("message",za)}},[U.id]);const nc=()=>{var za;if(!Z||Z.trim()===""){console.error("[FRONTEND] No hay HTML disponible para imprimir"),alert("Error: No hay contenido disponible para imprimir. Por favor, espere a que se cargue la factura.");return}if(yr){console.log("[FRONTEND] Impresión ya en progreso");return}ar(!0),console.log("[FRONTEND] Iniciando impresión con HTML de longitud:",Z.length),setTimeout(()=>{console.warn("[FRONTEND] Timeout de seguridad para impresión"),ar(!1)},3e4);const na=window.open("","_blank","width=800,height=600,scrollbars=yes,resizable=yes");if(na)try{na.document.write(`
            <!DOCTYPE html>
            <html lang="es">
            <head>
              <meta charset="UTF-8">
              <meta name="viewport" content="width=device-width, initial-scale=1.0">
              <title>Factura ${U.numeroFactura}</title>
              <style>
                @media print {
                  body { 
                    margin: 0; 
                    padding: 0; 
                    font-size: 12pt;
                  }
                  .no-print { display: none !important; }
                  .invoice-content { 
                    padding: 0; 
                    margin: 0; 
                    box-shadow: none; 
                    border-radius: 0; 
                  }
                  @page {
                    margin: 1cm;
                    size: A4;
                  }
                }
                body { 
                  font-family: Arial, sans-serif; 
                  margin: 0;
                  padding: 20px;
                  background: white;
                }
                .invoice-content {
                  background: white;
                  padding: 20px;
                  border-radius: 8px;
                  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                }
                .print-header {
                  text-align: center;
                  margin-bottom: 20px;
                  padding: 10px;
                  background: #f8f9fa;
                  border-radius: 5px;
                  display: none;
                }
                @media print {
                  .print-header { display: block; }
                }
              </style>
            </head>
            <body>
              <div class="print-header">
                <h2>Factura ${U.numeroFactura}</h2>
                <p>Fecha: ${U.fechaFactura?new Date(U.fechaFactura).toLocaleDateString("es-ES"):"N/A"}</p>
                <p>Estado: ${((za=U.estado)==null?void 0:za.toUpperCase())||"N/A"}</p>
              </div>
              <div class="invoice-content">
                ${Z}
              </div>
              <script>
                // Esperar a que se cargue todo el contenido antes de imprimir
                window.onload = function() {
                  setTimeout(function() {
                    window.print();
                    // Cerrar la ventana después de un breve delay
                    setTimeout(function() {
                      window.close();
                      // Notificar al padre que la impresión se completó
                      if (window.opener) {
                        window.opener.postMessage('print-completed', '*');
                      }
                    }, 1000);
                  }, 500);
                };
              <\/script>
            </body>
            </html>
          `),na.document.close(),na.focus(),console.log("[FRONTEND] Ventana de impresión creada correctamente")}catch(Jr){console.error("[FRONTEND] Error al crear ventana de impresión:",Jr),na.close(),console.log("[FRONTEND] Usando fallback de impresión directa");try{window.print(),setTimeout(()=>ar(!1),2e3)}catch(Hs){console.error("[FRONTEND] Error en fallback de impresión:",Hs),ar(!1),alert("Error al imprimir. Por favor, intente nuevamente.")}}else{console.warn("[FRONTEND] No se pudo abrir ventana de impresión, usando fallback"),alert("No se pudo abrir la ventana de impresión. Se usará la impresión del navegador.");try{window.print(),setTimeout(()=>ar(!1),2e3)}catch(Jr){console.error("[FRONTEND] Error en fallback de impresión:",Jr),ar(!1),alert("Error al imprimir. Por favor, intente nuevamente.")}}};return ce?r.jsx("div",{className:"p-8 text-center",children:"Cargando previsualización..."}):ye?r.jsx("div",{className:"p-8 text-center text-red-500",children:ye}):Z?r.jsxs("div",{className:"invoice-preview-container",children:[!1,r.jsx("div",{className:"invoice-content bg-white p-4 rounded shadow",dangerouslySetInnerHTML:{__html:Z},style:{minHeight:"400px",position:"relative",overflow:"auto"}}),r.jsx("div",{className:"flex gap-4 mt-8 justify-center no-print",children:r.jsxs("button",{onClick:nc,disabled:!Z||Z.trim()===""||yr,className:`px-4 py-2 rounded transition-colors ${!Z||Z.trim()===""||yr?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,title:!Z||Z.trim()===""?"Espere a que se cargue la factura":yr?"Imprimiendo...":"Imprimir factura",children:["🖨️ ",!Z||Z.trim()===""?"Cargando...":yr?"Imprimiendo...":"Imprimir"]})}),r.jsx("style",{children:`
          @media print {
            .no-print { display: none !important; }
            body { margin: 0; padding: 0; }
            .invoice-preview-container { 
              padding: 0; 
              margin: 0; 
              background: white; 
            }
            .invoice-content { 
              padding: 0; 
              margin: 0; 
              box-shadow: none; 
              border-radius: 0; 
            }
          }
        `})]}):r.jsx("div",{className:"p-8 text-center text-gray-500",children:"No se pudo cargar el contenido de la factura"})};return r.jsxs("main",{className:"p-6",children:[r.jsxs("header",{className:"mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Gestión de Facturas"}),r.jsx("div",{className:"flex justify-between items-center",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:Xt,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Nueva Factura"}),r.jsx("button",{onClick:vs,className:"px-4 py-2 bg-orange-600 text-white rounded hover:bg-orange-700",title:"Crear factura rectificativa basada en una factura existente",children:"Factura Rectificativa"})]})})]}),L&&r.jsx("div",{className:"mb-6 p-4 bg-green-100 border border-green-400 text-green-700 rounded-lg",role:"alert",children:L}),o&&r.jsx("div",{className:"mb-6 p-4 bg-red-100 border border-red-400 text-red-600 rounded-lg",role:"alert",children:o}),!1,r.jsxs("section",{"aria-labelledby":"info-panel-heading",children:[r.jsx("h2",{id:"info-panel-heading",className:"sr-only",children:"Información sobre Gestión de Facturas"}),r.jsx(Qr,{})]}),r.jsxs("section",{className:"mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Clientes y Expedientes"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[r.jsxs("h3",{className:"text-lg font-medium text-gray-800 mb-3",children:["Clientes (",N.length,")"]}),N.length>0?r.jsx("div",{className:"space-y-2",children:N.map(U=>{var Z,te;return r.jsxs("div",{className:"p-2 border rounded",children:[r.jsx("p",{className:"font-medium",children:((Z=U.user)==null?void 0:Z.name)||"Cliente sin nombre"}),r.jsx("p",{className:"text-sm text-gray-600",children:(te=U.user)==null?void 0:te.email})]},U.id)})}):r.jsx("p",{className:"text-gray-500",children:"No hay clientes disponibles"})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-3",children:"Expedientes"}),r.jsx("p",{className:"text-gray-500",children:"Los expedientes se cargan al seleccionar un cliente"})]})]})]}),r.jsxs("section",{"aria-labelledby":"invoices-table-heading",children:[r.jsx("h2",{id:"invoices-table-heading",className:"text-xl font-semibold text-gray-800 mb-4",children:"Lista de Facturas"}),r.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:[r.jsx("label",{htmlFor:"select-all-invoices",className:"sr-only",children:"Seleccionar todas las facturas"}),r.jsx("input",{id:"select-all-invoices",type:"checkbox",checked:M.length===s.length&&s.length>0,onChange:U=>{U.target.checked?W(s.map(Z=>Z.id)):W([])},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500","aria-describedby":"select-all-help"}),r.jsx("span",{id:"select-all-help",className:"sr-only",children:"Marca esta casilla para seleccionar todas las facturas de la lista"})]}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Número"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Importe"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Provisiones"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(U=>{var Z;return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsxs("label",{htmlFor:`select-invoice-${U.id}`,className:"sr-only",children:["Seleccionar factura ",U.numeroFactura]}),r.jsx("input",{id:`select-invoice-${U.id}`,type:"checkbox",checked:M.includes(U.id),onChange:te=>{te.target.checked?W([...M,U.id]):W(M.filter(ce=>ce!==U.id))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500","aria-describedby":`select-invoice-help-${U.id}`}),r.jsxs("span",{id:`select-invoice-help-${U.id}`,className:"sr-only",children:["Marca esta casilla para seleccionar la factura ",U.numeroFactura]})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:U.numeroFactura}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:U.fechaFactura?new Date(U.fechaFactura).toLocaleDateString():"N/A"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((Z=U.receptor)==null?void 0:Z.name)||"N/A"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:U.importeTotal?`${gs(U.importeTotal)} €`:"N/A"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${Eb(U.estado)}`,children:[rQ(U.estado)," ",yo(U.estado)]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:U.provisionFondos&&U.provisionFondos.length>0?r.jsxs("div",{className:"flex flex-col gap-1",children:[r.jsxs("span",{className:"text-xs font-medium text-green-600",children:["✓ ",U.provisionFondos.length," provisión",U.provisionFondos.length>1?"es":""]}),r.jsxs("span",{className:"text-xs text-gray-500",children:["Total: ",new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(U.provisionFondos.reduce((te,ce)=>te+ce.amount,0))]})]}):r.jsx("span",{className:"text-xs text-gray-400",children:"Sin provisiones"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>ta(U),className:"text-blue-600 hover:text-blue-900 hover:bg-blue-50 px-2 py-1 rounded",title:"Ver factura completa con todos los detalles",children:"👁️ Ver"}),Cb(U.estado)&&r.jsx("button",{onClick:()=>ra(U),className:"text-yellow-600 hover:text-yellow-900 px-2 py-1 rounded hover:bg-yellow-50",title:"Editar factura",children:"✏️ Editar"}),Sb(U.estado)&&r.jsx("button",{onClick:()=>js(U.id),className:"text-red-600 hover:text-red-900 px-2 py-1 rounded hover:bg-red-50",title:"Eliminar factura (no disponible si está notificada al cliente)",children:"🗑️ Eliminar"}),r.jsx("button",{onClick:()=>ro(U),className:"text-gray-600 hover:text-gray-900 px-2 py-1 rounded hover:bg-gray-50",title:"Ver metadatos técnicos",children:"🔍 Metadatos"}),((e==null?void 0:e.role)==="ADMIN"||(e==null?void 0:e.role)==="ABOGADO")&&tQ(U.estado)&&r.jsx("button",{onClick:()=>sa(U),className:"text-purple-600 hover:text-purple-900 px-2 py-1 rounded hover:bg-purple-50",title:"Ver historial de auditoría (disponible en cualquier estado)",children:"📋 Auditoría"})]})})]},U.id)})})]})})})]}),je&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg max-w-5xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center sticky top-0 bg-white z-10",children:[r.jsxs("h2",{className:"text-xl font-bold",children:["Vista de Factura - ",je.numeroFactura]}),r.jsx("button",{onClick:()=>{console.log("[FRONTEND] Cerrando modal de factura"),Pe(null)},className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),r.jsx("div",{className:"p-4",children:r.jsx(eS,{invoice:je})})]})}),c&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center",children:[r.jsx("h2",{className:"text-xl font-bold",children:u?"Editar Factura":"Nueva Factura"}),r.jsx("button",{onClick:()=>{d(!1),m(null),g(bo),le([]),Q([]),_(null)},className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),r.jsxs("div",{className:"p-6",children:[L&&r.jsx("div",{className:"mb-4 p-3 bg-green-100 border border-green-400 text-green-700 rounded",children:L}),k&&r.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:k}),r.jsxs("form",{onSubmit:u?_r:bs,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Número de Factura"}),r.jsx("input",{type:"text",name:"numeroFactura",value:h.numeroFactura,onChange:Be,className:`w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${h.tipoFactura==="R"?"bg-gray-100 cursor-not-allowed":""}`,required:!0,disabled:h.tipoFactura==="R",placeholder:h.tipoFactura==="R"?"Se generará automáticamente":"Ingrese número de factura"}),h.tipoFactura==="R"&&r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"El número se generará automáticamente basado en la factura original"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de Factura"}),r.jsx("input",{type:"date",name:"fechaFactura",value:h.fechaFactura,onChange:Be,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de Operación"}),r.jsx("input",{type:"date",name:"fechaOperacion",value:h.fechaOperacion,onChange:Be,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Factura"}),r.jsx("select",{name:"tipoFactura",value:h.tipoFactura,onChange:Be,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:r.jsx("option",{value:"F",children:"Completa"})})]}),h.tipoFactura==="R"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Rectificación"}),r.jsxs("select",{name:"tipoRectificacion",value:h.tipoRectificacion,onChange:Be,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:h.tipoFactura==="R",children:[r.jsx("option",{value:"",children:"Seleccionar tipo"}),r.jsx("option",{value:"R1",children:"R1 - Por anulación"}),r.jsx("option",{value:"R2",children:"R2 - Por corrección"}),r.jsx("option",{value:"R3",children:"R3 - Por descuento"}),r.jsx("option",{value:"R4",children:"R4 - Por devolución"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Motivo de Rectificación"}),r.jsx("input",{type:"text",name:"motivoRectificacion",value:h.motivoRectificacion,onChange:Be,placeholder:"Especificar motivo de la rectificación",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:h.tipoFactura==="R"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),r.jsxs("select",{name:"estado",value:h.estado,onChange:Be,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"borrador",children:"📝 Borrador"}),r.jsx("option",{value:"emitida",children:"📄 Emitida"}),r.jsx("option",{value:"enviada",children:"📤 Enviada"}),r.jsx("option",{value:"notificada",children:"📢 Notificada al Cliente"}),r.jsx("option",{value:"aceptada",children:"✅ Aceptada"}),r.jsx("option",{value:"rechazada",children:"❌ Rechazada"}),r.jsx("option",{value:"anulada",children:"🚫 Anulada"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Método de Pago"}),r.jsxs("select",{name:"metodoPago",value:h.metodoPago,onChange:Be,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"transferencia",children:"Transferencia"}),r.jsx("option",{value:"efectivo",children:"Efectivo"}),r.jsx("option",{value:"tarjeta",children:"Tarjeta"})]})]})]}),h.tipoFactura==="R"&&$t&&r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-4 mb-4",children:[r.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"Factura Original"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Número:"})," ",$t.numeroFactura]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Fecha:"})," ",new Date($t.fechaFactura).toLocaleDateString("es-ES")]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Cliente:"})," ",(Ug=$t.receptor)==null?void 0:Ug.name]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Importe:"})," ",gs($t.importeTotal)," €"]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Estado:"})," ",yo($t.estado)]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium",children:"Expediente:"})," ",((Vg=$t.expediente)==null?void 0:Vg.title)||"Sin expediente"]})]}),$t.provisionFondos&&$t.provisionFondos.length>0&&r.jsxs("div",{className:"mt-3 pt-3 border-t border-blue-200",children:[r.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Provisiones Aplicadas en Factura Original:"}),r.jsxs("div",{className:"space-y-1 text-sm",children:[$t.provisionFondos.map((U,Z)=>r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:U.description||`Provisión ${Z+1}`}),r.jsxs("span",{className:"font-medium",children:[gs(U.amount)," €"]})]},U.id)),r.jsx("div",{className:"pt-1 border-t border-blue-200",children:r.jsxs("div",{className:"flex justify-between font-medium",children:[r.jsx("span",{children:"Total Provisiones:"}),r.jsxs("span",{children:[gs($t.provisionFondos.reduce((U,Z)=>U+Z.amount,0))," €"]})]})})]}),r.jsxs("div",{className:"mt-2 p-2 bg-yellow-50 border border-yellow-200 rounded text-xs text-yellow-800",children:[r.jsx("strong",{children:"Nota:"})," Las provisiones de la factura original se copiarán automáticamente a la rectificativa."]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cliente"}),r.jsxs("select",{name:"receptorId",value:h.receptorId,onChange:Tr,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[r.jsx("option",{value:"",children:"Seleccionar cliente"}),N.map(U=>{var Z,te;return r.jsx("option",{value:((Z=U.user)==null?void 0:Z.id)||U.id,children:((te=U.user)==null?void 0:te.name)||"Cliente sin nombre"},U.id)})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expediente"}),r.jsxs("select",{name:"expedienteId",value:h.expedienteId,onChange:Be,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Sin expediente"}),O.map(U=>r.jsx("option",{value:U.id,children:U.title},U.id))]})]})]}),r.jsxs("fieldset",{children:[r.jsx("legend",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Conceptos de la Factura"}),r.jsxs("div",{className:"space-y-2",children:[h.items.map((U,Z)=>r.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:`description-${Z}`,className:"sr-only",children:["Descripción del concepto ",Z+1]}),r.jsx("input",{id:`description-${Z}`,type:"text",placeholder:"Descripción",value:U.description,onChange:te=>ys(Z,"description",te.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","aria-describedby":`description-help-${Z}`}),r.jsxs("p",{id:`description-help-${Z}`,className:"sr-only",children:["Introduce la descripción del concepto ",Z+1]})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:`quantity-${Z}`,className:"sr-only",children:["Cantidad del concepto ",Z+1]}),r.jsx("input",{id:`quantity-${Z}`,type:"number",min:"0",step:"1",placeholder:"Cantidad",value:U.quantity,onChange:te=>ys(Z,"quantity",parseFloat(te.target.value)||0),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","aria-describedby":`quantity-help-${Z}`}),r.jsxs("p",{id:`quantity-help-${Z}`,className:"sr-only",children:["Introduce la cantidad del concepto ",Z+1]})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:`unitPrice-${Z}`,className:"sr-only",children:["Precio unitario del concepto ",Z+1]}),r.jsx("input",{id:`unitPrice-${Z}`,type:"number",step:"0.01",min:"0",placeholder:"Precio unitario",value:U.unitPrice,onChange:te=>ys(Z,"unitPrice",parseFloat(te.target.value)||0),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","aria-describedby":`unitPrice-help-${Z}`}),r.jsxs("p",{id:`unitPrice-help-${Z}`,className:"sr-only",children:["Introduce el precio unitario del concepto ",Z+1," en euros"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"text-sm text-gray-600",children:[(U.quantity*U.unitPrice).toFixed(2)," €"]}),h.items.length>1&&r.jsx("button",{type:"button",onClick:()=>{const te=h.items.filter((ce,ue)=>ue!==Z);g({...h,items:te})},className:"text-red-600 hover:text-red-800",children:"✕"})]})]},Z)),r.jsx("button",{type:"button",onClick:bt,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300","aria-describedby":"add-item-help",children:"+ Añadir concepto"}),r.jsx("p",{id:"add-item-help",className:"sr-only",children:"Haz clic para añadir un nuevo concepto a la factura"})]})]}),X.length>0&&r.jsxs("fieldset",{children:[r.jsx("legend",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Provisiones de Fondos Disponibles"}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4 mb-4",children:[h.tipoFactura==="R"?r.jsxs("div",{className:"mb-3",children:[r.jsxs("p",{className:"text-sm text-blue-700 mb-2",children:[r.jsx("strong",{children:"Factura Rectificativa:"})," Las provisiones de la factura original se han copiado automáticamente."]}),r.jsxs("div",{className:"p-2 bg-green-50 border border-green-200 rounded text-xs text-green-800",children:[r.jsx("strong",{children:"✓ Copiadas automáticamente:"})," ",X.length," provisión(es) de la factura original"]})]}):r.jsx("p",{className:"text-sm text-blue-700 mb-3",children:"Selecciona las provisiones que quieres aplicar a esta factura. Se descontarán automáticamente del total."}),r.jsx("div",{className:"space-y-2",children:X.map(U=>r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",id:`provision-${U.id}`,checked:G.includes(U.id),onChange:Z=>{Z.target.checked?le([...G,U.id]):le(G.filter(te=>te!==U.id))},disabled:h.tipoFactura==="R",className:`h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded ${h.tipoFactura==="R"?"opacity-50 cursor-not-allowed":""}`}),r.jsxs("label",{htmlFor:`provision-${U.id}`,className:"ml-2 text-sm text-gray-700",children:[r.jsx("span",{className:"font-medium",children:U.description||"Sin descripción"}),r.jsxs("span",{className:"text-gray-500 ml-2",children:["(",new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(U.amount),")"]}),U.invoiceId&&r.jsx("span",{className:"text-green-600 ml-2 text-xs",children:"✓ Ya vinculada"})]})]},U.id))}),G.length>0&&r.jsx("div",{className:"mt-3 p-2 bg-green-100 border border-green-200 rounded",children:r.jsxs("p",{className:"text-sm text-green-700",children:["Total de provisiones seleccionadas: ",new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(X.filter(U=>G.includes(U.id)).reduce((U,Z)=>U+Z.amount,0))]})}),(()=>{const U=X.filter(te=>G.includes(te.id)).reduce((te,ce)=>te+ce.amount,0),Z=h.items.reduce((te,ce)=>te+ce.quantity*ce.unitPrice,0);if(U>Z){const te=U-Z;return r.jsxs("div",{className:"mt-3 p-3 bg-yellow-100 border border-yellow-300 rounded",children:[r.jsx("p",{className:"text-sm text-yellow-800 font-medium",children:"⚠️ Advertencia: Las provisiones exceden la base imponible"}),r.jsxs("p",{className:"text-xs text-yellow-700 mt-1",children:["Base imponible: ",new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(Z)]}),r.jsxs("p",{className:"text-xs text-yellow-700",children:["Provisiones: ",new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(U)]}),r.jsxs("p",{className:"text-xs text-yellow-700",children:["Exceso: ",new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(te)]}),r.jsx("p",{className:"text-xs text-yellow-700 mt-2",children:r.jsx("strong",{children:'Se agregará automáticamente un concepto de "Devolución de Provisión" por el exceso.'})})]})}return null})()]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Régimen IVA Emisor"}),r.jsxs("select",{name:"regimenIvaEmisor",value:h.regimenIvaEmisor,onChange:Be,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"General",children:"General"}),r.jsx("option",{value:"Simplificado",children:"Simplificado"}),r.jsx("option",{value:"Exento",children:"Exento"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descuento (%)"}),r.jsx("input",{type:"number",name:"descuento",value:h.descuento,onChange:Be,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Impuesto"}),r.jsxs("select",{name:"tipoImpuesto",value:h.tipoImpuesto||"iva",onChange:U=>{const Z=U.target.value;g(te=>({...te,tipoImpuesto:Z,tipoIVA:Z==="retencion"?0:te.tipoIVA||21,retencion:Z==="iva"?0:te.retencion||15}))},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"iva",children:"IVA"}),r.jsx("option",{value:"retencion",children:"Retención"})]})]})]}),h.tipoImpuesto==="iva"?r.jsx("div",{className:"grid grid-cols-1 gap-4",children:r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo IVA (%)"}),r.jsx("input",{type:"number",name:"tipoIVA",value:h.tipoIVA,onChange:Be,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}):r.jsx("div",{className:"grid grid-cols-1 gap-4",children:r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Retención (%)"}),r.jsx("input",{type:"number",name:"retencion",value:h.retencion,onChange:Be,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),r.jsxs("div",{className:"flex justify-end gap-4",children:[r.jsx("button",{type:"button",onClick:()=>{d(!1),g(bo),m(null),le([]),Q([]),_(null)},className:"px-4 py-2 text-gray-700 bg-gray-200 rounded hover:bg-gray-300",children:"Cancelar"}),r.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:u?"Actualizar Factura":"Crear Factura"})]})]})]})]})}),(be==null?void 0:be.open)&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-lg max-w-lg w-full p-6",children:[r.jsx("h2",{className:"text-lg font-bold mb-2",children:"Metadatos de la Factura"}),r.jsx("textarea",{className:"w-full h-64 p-2 border rounded bg-gray-50 text-xs font-mono mb-4",value:be.text,readOnly:!0,onFocus:U=>U.target.select()}),r.jsxs("div",{className:"flex gap-4 justify-end",children:[r.jsx("button",{className:"px-4 py-2 bg-blue-700 text-white rounded hover:bg-blue-800",onClick:()=>{navigator.clipboard.writeText(be.text)},children:"Copiar"}),r.jsx("button",{className:"px-4 py-2 bg-gray-300 text-gray-800 rounded hover:bg-gray-400",onClick:()=>we(null),children:"Cerrar"})]})]})}),nt&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-lg max-w-4xl w-full p-6 max-h-[80vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Seleccionar Factura Original"}),r.jsx("button",{onClick:()=>Dt(!1),className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("p",{className:"text-gray-600 mb-2",children:"Selecciona la factura que quieres rectificar. Solo se muestran facturas que pueden ser rectificadas."}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-3 mb-4",children:[r.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"Tipos de Rectificación:"}),r.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"R1 - Por anulación:"})," Anula completamente la factura original"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"R2 - Por corrección:"})," Corrige datos fiscales de la factura"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"R3 - Por descuento:"})," Aplica descuentos posteriores"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"R4 - Por devolución:"})," Devuelve parcialmente la factura"]})]})]})]}),to.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("p",{className:"text-gray-500",children:"No hay facturas que puedan ser rectificadas."}),r.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Solo se pueden rectificar facturas emitidas que no estén anuladas."})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Número"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Importe"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acción"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:to.map(U=>{var Z;return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:U.numeroFactura}),r.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:new Date(U.fechaFactura).toLocaleDateString("es-ES")}),r.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:((Z=U.receptor)==null?void 0:Z.name)||"Cliente no encontrado"}),r.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:[gs(U.importeTotal)," €"]}),r.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${Eb(U.estado)}`,children:yo(U.estado)})}),r.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:r.jsx("button",{onClick:()=>nr(U),className:"px-3 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700",children:"Seleccionar"})})]},U.id)})})]})})]})}),(ke==null?void 0:ke.open)&&r.jsx(JX,{invoiceId:ke.invoiceId,isOpen:ke.open,onClose:()=>Ue(null),currentUser:e||void 0})]})},nQ=()=>{console.log("ProvisionFondosPage component loaded");const e=localStorage.getItem("token")||"",[t,s]=f.useState([]),[n,a]=f.useState(!1),[i,o]=f.useState(""),[l,c]=f.useState(""),[d,u]=f.useState([]),[m,h]=f.useState(!1),[g,j]=f.useState(null),[y,w]=f.useState({expedienteId:"",amount:"",date:"",description:""});f.useEffect(()=>{x(),p()},[e]);const x=async()=>{try{const T=await K.get("/cases",{headers:{Authorization:`Bearer ${e}`}});u(T.data)}catch{u([])}},p=async()=>{a(!0);try{const T=await KX(e);s(T)}catch{o("Error al cargar las provisiones")}finally{a(!1)}},v=T=>{w({...y,[T.target.name]:T.target.value})},N=T=>{w({...y,expedienteId:T.target.value})},b=()=>{w({expedienteId:"",amount:"",date:"",description:""}),j(null),h(!1)},C=async T=>{var B;T.preventDefault(),o(""),c(""),a(!0);try{const V=d.find(q=>q.id===y.expedienteId),A=((B=V==null?void 0:V.client)==null?void 0:B.id)||"";if(!A){o("No se pudo determinar el cliente del expediente seleccionado"),a(!1);return}const I={clientId:A,expedienteId:y.expedienteId,amount:Number(y.amount),...y.date?{date:y.date}:{},description:y.description};g?(await XX(g.id,I,e),c("Provisión actualizada correctamente.")):(await YX(I,e),c("Provisión creada correctamente.")),b(),p()}catch{o(g?"Error al actualizar la provisión":"Error al crear la provisión")}finally{a(!1)}},S=T=>{j(T),w({expedienteId:T.expedienteId,amount:T.amount.toString(),date:T.date.slice(0,10),description:T.description}),h(!0)},k=async T=>{if(window.confirm("¿Estás seguro de que quieres eliminar esta provisión?")){a(!0);try{await QX(T,e),c("Provisión eliminada correctamente."),p()}catch{o("Error al eliminar la provisión")}finally{a(!1)}}},D=T=>new Date(T).toLocaleDateString("es-ES"),L=T=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(T);return r.jsxs("main",{className:"max-w-6xl mx-auto py-8 px-4",children:[r.jsxs("header",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gestión de Provisiones de Fondos"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Administra las provisiones de fondos para expedientes"})]}),l&&r.jsx("div",{className:"mb-6 p-4 bg-green-100 border border-green-400 text-green-700 rounded-lg",role:"alert",children:l}),i&&r.jsx("div",{className:"mb-6 p-4 bg-red-100 border border-red-400 text-red-600 rounded-lg",role:"alert",children:i}),r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:m?g?"Editar Provisión":"Crear Nueva Provisión":"Lista de Provisiones"}),r.jsx("button",{onClick:()=>h(!m),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:m?"Cancelar":"Nueva Provisión"})]}),m&&r.jsxs("section",{className:"mb-8 bg-white rounded-lg shadow p-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:g?"Editar Provisión":"Crear Provisión de Fondos"}),r.jsxs("form",{onSubmit:C,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"expediente-select",className:"block text-sm font-medium text-gray-700 mb-2",children:"Expediente *"}),r.jsxs("select",{id:"expediente-select",name:"expedienteId",className:"border border-gray-300 px-3 py-2 rounded-md w-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:y.expedienteId,onChange:N,required:!0,children:[r.jsx("option",{value:"",children:"Selecciona un expediente"}),d.map(T=>{var B,V;return r.jsxs("option",{value:T.id,children:[T.title," - ",((V=(B=T.client)==null?void 0:B.user)==null?void 0:V.name)||"Sin cliente"]},T.id)})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"amount",className:"block text-sm font-medium text-gray-700 mb-2",children:"Importe (€) *"}),r.jsx("input",{id:"amount",name:"amount",type:"number",step:"0.01",min:"0",value:y.amount,onChange:v,className:"border border-gray-300 px-3 py-2 rounded-md w-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha de Provisión"}),r.jsx("input",{id:"date",name:"date",type:"date",value:y.date,onChange:v,className:"border border-gray-300 px-3 py-2 rounded-md w-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripción"}),r.jsx("input",{id:"description",name:"description",type:"text",value:y.description,onChange:v,className:"border border-gray-300 px-3 py-2 rounded-md w-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Descripción opcional"})]})]}),r.jsxs("div",{className:"flex gap-4 pt-4",children:[r.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",disabled:n,children:n?"Procesando...":g?"Actualizar":"Crear"}),r.jsx("button",{type:"button",onClick:b,className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Cancelar"})]})]})]}),r.jsxs("section",{className:"bg-white rounded-lg shadow overflow-hidden",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Provisiones Existentes"})}),n?r.jsx("div",{className:"p-6 text-center text-gray-500",children:"Cargando provisiones..."}):t.length===0?r.jsx("div",{className:"p-6 text-center text-gray-500",children:"No hay provisiones registradas"}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expediente"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Importe"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Descripción"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(T=>{var B;return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((B=T.expediente)==null?void 0:B.title)||"N/A"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:L(T.amount)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:D(T.date)}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 max-w-xs truncate",children:T.description||"-"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${T.invoiceId?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:T.invoiceId?"Vinculada":"Pendiente"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>S(T),className:"text-blue-600 hover:text-blue-900",children:"Editar"}),r.jsx("button",{onClick:()=>k(T.id),className:"text-red-600 hover:text-red-900",children:"Eliminar"})]})})]},T.id)})})]})})]})]})},aQ=()=>{const{user:e}=Ce(),t=localStorage.getItem("token"),[s,n]=f.useState([]),[a,i]=f.useState(!0),[o,l]=f.useState(null),[c,d]=f.useState(null);f.useEffect(()=>{(async()=>{try{if(!t)throw new Error("No token available");const v=await K.get("/users/clients/profile",{headers:{Authorization:`Bearer ${t}`}});v.data?(d(v.data),await u(v.data.id)):l("No se encontró el perfil de cliente")}catch(v){console.error("Error fetching client profile:",v),l("Error al cargar el perfil de cliente")}finally{i(!1)}})()},[t,e]);const u=async p=>{try{const v=await ZC(p,t);n(v)}catch{l("Error al cargar las provisiones")}},m=p=>new Date(p).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}),h=p=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(p),g=p=>p.invoiceId?r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Facturada"}):r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Pendiente"});if(a)return r.jsx("div",{className:"max-w-6xl mx-auto py-8 px-4",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando provisiones..."})]})});if(o)return r.jsx("div",{className:"max-w-6xl mx-auto py-8 px-4",children:r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:r.jsxs("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),r.jsx("div",{className:"mt-2 text-sm text-red-700",children:o})]})]})})});const j=s.filter(p=>!p.invoiceId),y=s.filter(p=>p.invoiceId),w=j.reduce((p,v)=>p+v.amount,0),x=y.reduce((p,v)=>p+v.amount,0);return r.jsxs("div",{className:"max-w-6xl mx-auto py-8 px-4",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Mis Provisiones de Fondos"}),r.jsx("p",{className:"text-gray-600",children:"Aquí puedes ver todas las provisiones de fondos asociadas a tus expedientes"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Provisiones"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:s.length})]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Pendientes"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:h(w)})]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Facturadas"}),r.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:h(x)})]})]})})]}),j.length>0&&r.jsxs("div",{className:"bg-white rounded-lg shadow mb-8",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[r.jsxs("h2",{className:"text-lg font-medium text-gray-900",children:["Provisiones Pendientes (",j.length,")"]}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Provisiones que aún no han sido facturadas"})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Importe"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Descripción"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expediente"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Abogado"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.map(p=>{var v,N,b;return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:m(p.date)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:h(p.amount)}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:p.description||"Sin descripción"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((v=p.expediente)==null?void 0:v.title)||"Sin expediente"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((b=(N=p.expediente)==null?void 0:N.lawyer)==null?void 0:b.name)||"No asignado"})]},p.id)})})]})})]}),y.length>0&&r.jsxs("div",{className:"bg-white rounded-lg shadow",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[r.jsxs("h2",{className:"text-lg font-medium text-gray-900",children:["Provisiones Facturadas (",y.length,")"]}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Provisiones que ya han sido incluidas en facturas"})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha Provisión"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Importe"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Descripción"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expediente"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Factura"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:y.map(p=>{var v,N,b,C;return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:m(p.date)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:h(p.amount)}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:p.description||"Sin descripción"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((v=p.expediente)==null?void 0:v.title)||"Sin expediente"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:(N=p.invoice)==null?void 0:N.numeroFactura}),r.jsx("div",{className:"text-gray-500",children:m(((b=p.invoice)==null?void 0:b.fechaFactura)||"")}),r.jsx("div",{className:"text-gray-500",children:h(((C=p.invoice)==null?void 0:C.importeTotal)||0)})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g(p)})]},p.id)})})]})})]}),s.length===0&&r.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[r.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-gray-100 mb-4",children:r.jsx("svg",{className:"h-6 w-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay provisiones de fondos"}),r.jsx("p",{className:"text-gray-500",children:"Aún no se han creado provisiones de fondos para tus expedientes."})]})]})},kb=async()=>{var t,s,n,a,i,o,l;const e={timestamp:new Date().toISOString(),tests:[]};try{console.log("[API Test] Configuración de la API:"),console.log("[API Test] Base URL:",K.defaults.baseURL),console.log("[API Test] Headers por defecto:",K.defaults.headers),e.tests.push({name:"Configuración de la API",status:"success",details:{baseURL:K.defaults.baseURL,headers:K.defaults.headers}})}catch(c){e.tests.push({name:"Configuración de la API",status:"error",error:c})}try{const c=localStorage.getItem("token");console.log("[API Test] Token de autenticación:",c?"Presente":"Ausente"),e.tests.push({name:"Token de autenticación",status:"success",details:{tokenPresent:!!c,tokenLength:c?c.length:0}})}catch(c){e.tests.push({name:"Token de autenticación",status:"error",error:c})}try{console.log("[API Test] Probando endpoint de health check...");const c=await K.get("/health");console.log("[API Test] Health check response:",c.data),e.tests.push({name:"Health Check",status:"success",details:{status:c.status,data:c.data}})}catch(c){console.error("[API Test] Health check failed:",c),e.tests.push({name:"Health Check",status:"error",error:{message:c.message,status:(t=c.response)==null?void 0:t.status,data:(s=c.response)==null?void 0:s.data}})}try{if(localStorage.getItem("token")){console.log("[API Test] Probando endpoint de autenticación...");const d=await K.get("/auth/me");console.log("[API Test] Auth response:",d.data),e.tests.push({name:"Autenticación",status:"success",details:{status:d.status,user:d.data}})}else e.tests.push({name:"Autenticación",status:"skipped",details:"No hay token disponible"})}catch(c){console.error("[API Test] Auth test failed:",c),e.tests.push({name:"Autenticación",status:"error",error:{message:c.message,status:(n=c.response)==null?void 0:n.status,data:(a=c.response)==null?void 0:a.data}})}try{if(localStorage.getItem("token")){console.log("[API Test] Probando endpoint de appointments...");const d=await K.get("/appointments");console.log("[API Test] Appointments response:",d.data),e.tests.push({name:"Appointments",status:"success",details:{status:d.status,count:((i=d.data)==null?void 0:i.length)||0,data:d.data}})}else e.tests.push({name:"Appointments",status:"skipped",details:"No hay token disponible"})}catch(c){console.error("[API Test] Appointments test failed:",c),e.tests.push({name:"Appointments",status:"error",error:{message:c.message,status:(o=c.response)==null?void 0:o.status,data:(l=c.response)==null?void 0:l.data}})}return console.log("[API Test] Resultados completos:",e),e},Db=()=>{console.log("=== INFORMACIÓN DE LA API ==="),console.log("Base URL:",K.defaults.baseURL),console.log("Headers por defecto:",K.defaults.headers),console.log("Token presente:",!!localStorage.getItem("token")),console.log("=============================")},iQ=()=>{const[e,t]=f.useState([]),[s,n]=f.useState([]),[a,i]=f.useState({lawyerId:"",date:"",location:"",notes:""}),[o,l]=f.useState({id:"",date:"",location:"",notes:""}),[c,d]=f.useState(!0),[u,m]=f.useState(null),[h,g]=f.useState(null),[j,y]=f.useState(!1),[w,x]=f.useState(!1),[p,v]=f.useState("all"),[N,b]=f.useState("list"),{user:C}=Ce();f.useEffect(()=>{(async()=>{var R,$,_,O,P,F;try{d(!0),m(null);const Q=localStorage.getItem("token");if(!Q){m("No hay token de autenticación. Por favor, inicia sesión."),d(!1);return}console.log("[AppointmentsPage] Iniciando fetch de datos..."),console.log("[AppointmentsPage] Token:",Q?"Presente":"Ausente"),console.log("[AppointmentsPage] Usuario:",C),console.log("=== EJECUTANDO PRUEBAS DE API AUTOMÁTICAS ==="),Db(),await kb();const[X,re]=await Promise.all([K.get("/users/lawyers"),K.get("/appointments")]);console.log("[AppointmentsPage] Lawyers response:",X.data),console.log("[AppointmentsPage] Appointments response:",re.data),t(X.data),n(re.data),m(null)}catch(Q){console.error("[AppointmentsPage] Error fetching data:",Q),console.error("[AppointmentsPage] Error response:",Q.response),console.error("[AppointmentsPage] Error status:",(R=Q.response)==null?void 0:R.status),(($=Q.response)==null?void 0:$.status)===401?m("Sesión expirada. Por favor, inicia sesión de nuevo."):((_=Q.response)==null?void 0:_.status)===403?m("No tienes permisos para ver las citas."):((O=Q.response)==null?void 0:O.status)===404?m("Endpoint no encontrado. Verifica la configuración de la API."):m(`Error al cargar los datos: ${((F=(P=Q.response)==null?void 0:P.data)==null?void 0:F.message)||Q.message||"Error desconocido"}`)}finally{d(!1)}})()},[C]);const S=E=>{i({...a,[E.target.name]:E.target.value})},k=E=>{l({...o,[E.target.name]:E.target.value})},D=async E=>{var R,$,_,O,P,F,Q;if(E.preventDefault(),m(null),g(null),!a.lawyerId||!a.date){m("Selecciona abogado y fecha/hora");return}try{const X=localStorage.getItem("token"),re=await K.post("/appointments",{lawyerId:a.lawyerId,date:a.date,location:a.location||void 0,notes:a.notes||void 0},{headers:{Authorization:`Bearer ${X}`}});n(G=>[re.data,...G]),i({lawyerId:"",date:"",location:"",notes:""}),y(!1),g("Cita agendada correctamente"),setTimeout(()=>g(null),3e3)}catch(X){console.error("[AppointmentsPage] Error creating appointment:",X),console.error("[AppointmentsPage] Error response:",X.response),((R=X.response)==null?void 0:R.status)===401?m("Sesión expirada. Por favor, inicia sesión de nuevo."):(($=X.response)==null?void 0:$.status)===403?m("No tienes permisos para crear citas."):((_=X.response)==null?void 0:_.status)===400?m(`Error de validación: ${((P=(O=X.response)==null?void 0:O.data)==null?void 0:P.message)||"Datos incorrectos"}`):m(`Error al agendar la cita: ${((Q=(F=X.response)==null?void 0:F.data)==null?void 0:Q.message)||X.message||"Error desconocido"}`)}},L=async E=>{var R,$,_,O,P,F,Q;if(E.preventDefault(),m(null),g(null),!o.date){m("La fecha es obligatoria");return}try{const X=localStorage.getItem("token"),re=await K.put(`/appointments/${o.id}`,{date:o.date,location:o.location||void 0,notes:o.notes||void 0},{headers:{Authorization:`Bearer ${X}`}});n(G=>G.map(le=>le.id===o.id?re.data:le)),l({id:"",date:"",location:"",notes:""}),x(!1),g("Cita actualizada correctamente"),setTimeout(()=>g(null),3e3)}catch(X){console.error("[AppointmentsPage] Error updating appointment:",X),console.error("[AppointmentsPage] Error response:",X.response),((R=X.response)==null?void 0:R.status)===401?m("Sesión expirada. Por favor, inicia sesión de nuevo."):(($=X.response)==null?void 0:$.status)===403?m("No tienes permisos para editar citas."):((_=X.response)==null?void 0:_.status)===400?m(`Error de validación: ${((P=(O=X.response)==null?void 0:O.data)==null?void 0:P.message)||"Datos incorrectos"}`):m(`Error al actualizar la cita: ${((Q=(F=X.response)==null?void 0:F.data)==null?void 0:Q.message)||X.message||"Error desconocido"}`)}},T=E=>{l({id:E.id,date:E.date.slice(0,16),location:E.location||"",notes:E.notes||""}),x(!0)},B=async E=>{var R,$,_,O,P;if(confirm("¿Estás seguro de que quieres cancelar esta cita?"))try{const F=localStorage.getItem("token");await K.delete(`/appointments/${E}`,{headers:{Authorization:`Bearer ${F}`}}),n(Q=>Q.filter(X=>X.id!==E)),g("Cita cancelada correctamente"),setTimeout(()=>g(null),3e3)}catch(F){console.error("[AppointmentsPage] Error canceling appointment:",F),console.error("[AppointmentsPage] Error response:",F.response),((R=F.response)==null?void 0:R.status)===401?m("Sesión expirada. Por favor, inicia sesión de nuevo."):(($=F.response)==null?void 0:$.status)===403?m("No tienes permisos para cancelar citas."):((_=F.response)==null?void 0:_.status)===404?m("Cita no encontrada."):m(`Error al cancelar la cita: ${((P=(O=F.response)==null?void 0:O.data)==null?void 0:P.message)||F.message||"Error desconocido"}`)}},V=f.useMemo(()=>p==="all"?s:s.filter(E=>E.lawyer.id===p),[s,p]),A=f.useMemo(()=>{const E=new Date,R=new Date(E.getFullYear(),E.getMonth(),E.getDate()),$=new Date(R);return $.setDate($.getDate()+1),{past:V.filter(_=>new Date(_.date)<R),today:V.filter(_=>{const O=new Date(_.date);return O>=R&&O<$}),upcoming:V.filter(_=>new Date(_.date)>=$)}},[V]),I=E=>new Date(E).toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),q=E=>new Date(E).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}),Y=E=>{const R=new Date,$=new Date(E.date),_=new Date(R.getFullYear(),R.getMonth(),R.getDate()),O=new Date(_);if(O.setDate(O.getDate()+1),E.status){const P={PENDIENTE:"bg-yellow-100 text-yellow-800",CONFIRMADA:"bg-green-100 text-green-800",CANCELADA:"bg-red-100 text-red-800",COMPLETADA:"bg-blue-100 text-blue-800"};return r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${P[E.status]||"bg-gray-100 text-gray-800"}`,children:E.status})}return $<_?r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"Pasada"}):$>=_&&$<O?r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Hoy"}):r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Próxima"})},M=E=>r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 border-l-4 border-blue-500",children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:E.lawyer.name}),r.jsx("p",{className:"text-sm text-gray-600",children:E.lawyer.email})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[Y(E),r.jsxs("div",{className:"flex space-x-1",children:[r.jsx("button",{onClick:()=>T(E),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",title:"Editar cita",children:"✏️"}),r.jsx("button",{onClick:()=>B(E.id),className:"text-red-600 hover:text-red-800 text-sm font-medium",title:"Cancelar cita",children:"✕"})]})]})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[r.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),I(E.date)," a las ",q(E.date)]}),E.location&&r.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[r.jsxs("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),E.location]}),E.notes&&r.jsxs("div",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded-md",children:[r.jsx("strong",{children:"Notas:"})," ",E.notes]})]})]},E.id),W=()=>{const E=new Date,R=Array.from({length:7},($,_)=>{const O=new Date(E);return O.setDate(O.getDate()+_),O});return r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-4",children:R.map(($,_)=>{const O=V.filter(P=>new Date(P.date).toDateString()===$.toDateString());return r.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[r.jsxs("div",{className:"text-center mb-3",children:[r.jsx("div",{className:"text-sm font-medium text-gray-500",children:$.toLocaleDateString("es-ES",{weekday:"short"})}),r.jsx("div",{className:`text-lg font-bold ${$.toDateString()===E.toDateString()?"text-blue-600":"text-gray-900"}`,children:$.getDate()})]}),r.jsx("div",{className:"space-y-2",children:O.map(P=>r.jsxs("div",{className:"text-xs bg-blue-50 p-2 rounded border-l-2 border-blue-500",children:[r.jsx("div",{className:"font-medium",children:P.lawyer.name}),r.jsx("div",{className:"text-gray-600",children:q(P.date)}),P.status&&r.jsx("div",{className:"text-xs mt-1",children:r.jsx("span",{className:`px-1 py-0.5 rounded ${P.status==="CONFIRMADA"?"bg-green-100 text-green-800":P.status==="PENDIENTE"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:P.status})})]},P.id))})]},_)})})};return c?r.jsx("div",{className:"max-w-6xl mx-auto py-8 px-4",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando citas..."})]})}):r.jsxs("div",{className:"max-w-6xl mx-auto py-8 px-4",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Mis Citas"}),r.jsx("p",{className:"text-gray-600",children:"Gestiona tus citas con los abogados"})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4",children:[r.jsx("button",{onClick:()=>y(!j),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:j?"Cancelar":"Nueva Cita"}),r.jsxs("select",{value:p,onChange:E=>v(E.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"all",children:"Todos los abogados"}),e.map(E=>r.jsx("option",{value:E.id,children:E.name},E.id))]})]}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>b("list"),className:`px-3 py-2 rounded-md text-sm font-medium ${N==="list"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Lista"}),r.jsx("button",{onClick:()=>b("calendar"),className:`px-3 py-2 rounded-md text-sm font-medium ${N==="calendar"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Calendario"})]})]}),u&&r.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-md",children:r.jsx("p",{className:"text-red-700 text-sm",children:u})}),h&&r.jsx("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-md",children:r.jsx("p",{className:"text-green-700 text-sm",children:h})}),r.jsx("div",{className:"mt-4 p-3 bg-gray-50 border border-gray-200 rounded-md",children:r.jsxs("details",{className:"text-sm",children:[r.jsx("summary",{className:"cursor-pointer text-gray-700 font-medium",children:"🔍 Información de Debugging"}),r.jsxs("div",{className:"mt-2 space-y-1 text-gray-600",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Estado:"})," ",c?"Cargando...":"Completado"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Usuario:"})," ",C?`${C.name} (${C.email})`:"No autenticado"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Token:"})," ",localStorage.getItem("token")?"Presente":"Ausente"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Abogados cargados:"})," ",e.length]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Citas cargadas:"})," ",s.length]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Error:"})," ",u||"Ninguno"]}),r.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[r.jsx("button",{onClick:async()=>{console.log("=== EJECUTANDO PRUEBAS DE API ==="),Db(),await kb()},className:"px-3 py-1 bg-blue-500 text-white text-xs rounded hover:bg-blue-600",children:"🧪 Ejecutar Pruebas de API"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Abre la consola del navegador para ver los resultados"})]})]})]})})]}),j&&r.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Agendar Nueva Cita"}),r.jsxs("form",{onSubmit:D,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Abogado"}),r.jsxs("select",{name:"lawyerId",value:a.lawyerId,onChange:S,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[r.jsx("option",{value:"",children:"Selecciona un abogado"}),e.map(E=>r.jsxs("option",{value:E.id,children:[E.name," (",E.email,")"]},E.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha y hora"}),r.jsx("input",{type:"datetime-local",name:"date",value:a.date,onChange:S,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ubicación (opcional)"}),r.jsx("input",{type:"text",name:"location",value:a.location,onChange:S,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Oficina, online, etc."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Motivo / Notas (opcional)"}),r.jsx("textarea",{name:"notes",value:a.notes,onChange:S,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Motivo de la cita, detalles, etc."})]}),r.jsxs("div",{className:"flex justify-end space-x-3",children:[r.jsx("button",{type:"button",onClick:()=>y(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancelar"}),r.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Agendar Cita"})]})]})]}),w&&r.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Editar Cita"}),r.jsxs("form",{onSubmit:L,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha y hora"}),r.jsx("input",{type:"datetime-local",name:"date",value:o.date,onChange:k,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ubicación (opcional)"}),r.jsx("input",{type:"text",name:"location",value:o.location,onChange:k,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Oficina, online, etc."})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Motivo / Notas (opcional)"}),r.jsx("textarea",{name:"notes",value:o.notes,onChange:k,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Motivo de la cita, detalles, etc."})]}),r.jsxs("div",{className:"flex justify-end space-x-3",children:[r.jsx("button",{type:"button",onClick:()=>x(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancelar"}),r.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Actualizar Cita"})]})]})]}),N==="calendar"?r.jsxs("div",{className:"mb-8",children:[r.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Vista de Calendario"}),W()]}):r.jsxs("div",{className:"space-y-8",children:[A.today.length>0&&r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold mb-4 text-green-700",children:"Citas de Hoy"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:A.today.map(M)})]}),A.upcoming.length>0&&r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold mb-4 text-blue-700",children:"Próximas Citas"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:A.upcoming.map(M)})]}),A.past.length>0&&r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-700",children:"Citas Pasadas"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:A.past.map(M)})]}),V.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No hay citas"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:p==="all"?"No tienes citas agendadas. Agenda una nueva cita para comenzar.":"No tienes citas con este abogado."}),r.jsx("div",{className:"mt-6",children:r.jsx("button",{onClick:()=>y(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Agendar Nueva Cita"})})]})]})]})},oQ=()=>{const{id:e}=Eu(),t=Yt(),{user:s}=Ce(),[n,a]=f.useState(null),[i,o]=f.useState(!0),[l,c]=f.useState(null);f.useEffect(()=>{(async()=>{var g,j,y,w,x;if(e)try{if(o(!0),c(null),!localStorage.getItem("token")){c("No hay token de autenticación. Por favor, inicia sesión."),o(!1);return}console.log("[AppointmentDetailPage] Fetching appointment:",e);const v=await K.get(`/appointments/visitor/${e}`);console.log("[AppointmentDetailPage] Response:",v.data),a(v.data)}catch(p){console.error("[AppointmentDetailPage] Error:",p),((g=p.response)==null?void 0:g.status)===401?c("Sesión expirada. Por favor, inicia sesión de nuevo."):((j=p.response)==null?void 0:j.status)===403?c("No tienes permisos para ver esta cita."):((y=p.response)==null?void 0:y.status)===404?c("Cita no encontrada."):c(`Error al cargar la cita: ${((x=(w=p.response)==null?void 0:w.data)==null?void 0:x.message)||p.message||"Error desconocido"}`)}finally{o(!1)}})()},[e]);const d=h=>new Date(h).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}),u=h=>new Date(h).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}),m=h=>{const j={PENDIENTE:{color:"bg-yellow-100 text-yellow-800",text:"Pendiente"},CONFIRMADA:{color:"bg-green-100 text-green-800",text:"Confirmada"},CANCELADA:{color:"bg-red-100 text-red-800",text:"Cancelada"},COMPLETADA:{color:"bg-blue-100 text-blue-800",text:"Completada"},RECHAZADA:{color:"bg-red-100 text-red-800",text:"Rechazada"}}[h]||{color:"bg-gray-100 text-gray-800",text:h};return r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${j.color}`,children:j.text})};return i?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando cita..."})]})}):l?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[r.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"⚠️"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Error"}),r.jsx("p",{className:"text-gray-600 mb-6",children:l}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("button",{onClick:()=>t("/client/appointments"),className:"w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Volver a Mis Citas"}),r.jsx("button",{onClick:()=>t("/client/dashboard"),className:"w-full bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:"Ir al Dashboard"})]})]})}):n?r.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:r.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Detalle de la Cita"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"Información completa de tu consulta legal"})]}),r.jsx("button",{onClick:()=>t("/client/appointments"),className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:"← Volver"})]})}),r.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("h2",{className:"text-xl font-semibold text-white",children:["Cita #",n.id.slice(0,8)]}),m(n.status)]})}),r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Información de la Cita"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Fecha y Hora"}),r.jsxs("p",{className:"mt-1 text-lg text-gray-900",children:[d(n.preferredDate)," a las ",u(n.preferredDate)]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tipo de Consulta"}),r.jsx("p",{className:"mt-1 text-lg text-gray-900",children:n.consultationType})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Motivo"}),r.jsx("p",{className:"mt-1 text-gray-900",children:n.consultationReason})]})]})]})}),r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Información Personal"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nombre Completo"}),r.jsx("p",{className:"mt-1 text-lg text-gray-900",children:n.fullName})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Edad"}),r.jsxs("p",{className:"mt-1 text-lg text-gray-900",children:[n.age," años"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Teléfono"}),r.jsx("p",{className:"mt-1 text-lg text-gray-900",children:n.phone})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),r.jsx("p",{className:"mt-1 text-lg text-gray-900",children:n.email})]})]})]})})]}),r.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Información Adicional"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Fecha de Creación"}),r.jsx("p",{className:"mt-1 text-gray-900",children:d(n.createdAt)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Última Actualización"}),r.jsx("p",{className:"mt-1 text-gray-900",children:d(n.updatedAt)})]})]})]}),r.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Acciones"}),r.jsxs("div",{className:"flex flex-wrap gap-3",children:[r.jsx("button",{onClick:()=>t("/client/chat"),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"💬 Contactar Abogado"}),r.jsx("button",{onClick:()=>t("/client/cases"),className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors",children:"📋 Ver Expedientes"}),r.jsx("button",{onClick:()=>t("/client/dashboard"),className:"bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:"🏠 Ir al Dashboard"})]})]})]})]})]})}):r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Cita no encontrada"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"La cita que buscas no existe o ha sido eliminada."}),r.jsx("button",{onClick:()=>t("/client/appointments"),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Volver a Mis Citas"})]})})},lQ=()=>{const{user:e}=Ce(),[t,s]=f.useState([]),[n,a]=f.useState(!0),[i,o]=f.useState(null),[l,c]=f.useState([]),[d,u]=f.useState(""),[m,h]=f.useState("");return f.useEffect(()=>{(async()=>{try{const j=localStorage.getItem("token"),y=await K.get("/users/lawyers");c(y.data)}catch{}})()},[]),f.useEffect(()=>{(async()=>{try{a(!0);const j=localStorage.getItem("token"),y={};d&&(y.lawyerId=d),m&&(y.paymentDate=m);const w=await K.get("/invoices/my",{params:y});s(w.data),o(null)}catch{o("Error al cargar las facturas"),s([])}finally{a(!1)}})()},[d,m]),r.jsx("div",{className:"py-6",children:r.jsx("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsx("h1",{className:"text-2xl font-semibold mb-2",children:"Gestionar pagos y facturas"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Aquí puedes consultar tus facturas, descargar el PDF y acceder al QR para pago o verificación."}),r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Filtros de Búsqueda"}),r.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Abogado"}),r.jsxs("select",{value:d,onChange:g=>u(g.target.value),className:"border rounded px-2 py-1",children:[r.jsx("option",{value:"",children:"Todos"}),l.map(g=>r.jsx("option",{value:g.id,children:g.name},g.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de pago"}),r.jsx("input",{type:"date",value:m,onChange:g=>h(g.target.value),className:"border rounded px-2 py-1"})]})]}),n?r.jsx("div",{className:"flex items-center justify-center h-40",children:r.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-blue-500"})}):i?r.jsx("div",{className:"bg-red-100 text-red-700 p-3 rounded mb-4",children:i}):t.length===0?r.jsx("div",{className:"text-gray-500",children:"No tienes facturas registradas."}):r.jsxs("div",{className:"overflow-x-auto",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Lista de Facturas"}),r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Nº Factura"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Fecha"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Importe"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Estado"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Abogado"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Fecha de pago"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"QR"}),r.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"PDF"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(g=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-4 py-2",children:g.number}),r.jsx("td",{className:"px-4 py-2",children:new Date(g.date).toLocaleDateString()}),r.jsxs("td",{className:"px-4 py-2",children:[g.amount.toFixed(2)," €"]}),r.jsx("td",{className:"px-4 py-2",children:r.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${g.status==="PAGADA"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:g.status})}),r.jsx("td",{className:"px-4 py-2",children:g.lawyerName||"-"}),r.jsx("td",{className:"px-4 py-2",children:g.paymentDate?new Date(g.paymentDate).toLocaleDateString():"-"}),r.jsx("td",{className:"px-4 py-2",children:g.qrUrl?r.jsx("img",{src:g.qrUrl,alt:"QR Factura",className:"h-12 w-12 object-contain"}):r.jsx("span",{className:"text-gray-400",children:"No disponible"})}),r.jsx("td",{className:"px-4 py-2",children:g.pdfUrl?r.jsx("a",{href:g.pdfUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Descargar"}):r.jsx("span",{className:"text-gray-400",children:"No disponible"})})]},g.id))})]})]}),r.jsx("div",{className:"mt-8 flex justify-between items-center",children:r.jsx(Ne,{to:"/dashboard",className:"text-blue-600 hover:underline",children:"Volver al Dashboard"})})]})})})},cQ=()=>{Yt();const[e,t]=f.useState([]),[s,n]=f.useState(!0),[a,i]=f.useState(null),[o,l]=f.useState(null),[c,d]=f.useState(!1),[u,m]=f.useState({lawyerId:"",paymentDate:"",status:""}),[h,g]=f.useState(null);f.useEffect(()=>{j()},[]);const j=async()=>{var S,k;try{if(n(!0),i(null),!localStorage.getItem("token")){i("No hay token de autenticación");return}const L=new URLSearchParams;u.lawyerId&&L.append("lawyerId",u.lawyerId),u.paymentDate&&L.append("paymentDate",u.paymentDate),u.status&&L.append("status",u.status);const T=await K.get("/invoices/my",{params:Object.fromEntries(L)});console.log("Client invoices response:",T.data),t(T.data)}catch(D){console.error("Error fetching client invoices:",D),i(((k=(S=D.response)==null?void 0:S.data)==null?void 0:k.message)||"Error al cargar las facturas"),t([])}finally{n(!1)}},y=(S,k)=>{console.log("[CLIENT] Abriendo modal para factura:",S.id,S.numeroFactura);const D=k==null?void 0:k.currentTarget;D&&(D.disabled=!0,D.innerHTML="⏳ Cargando..."),g(S),setTimeout(()=>{D&&(D.disabled=!1,D.innerHTML="👁️ Ver")},1e3)},w=()=>{l(null)},x=()=>{g(null)},p=({invoice:S})=>{const[k,D]=f.useState(null),[L,T]=f.useState(!0),[B,V]=f.useState(null);f.useEffect(()=>{(async()=>{T(!0),V(null);try{const q=localStorage.getItem("token");console.log("[CLIENT] Cargando HTML preview para factura:",S.id);const Y=await fetch(`${Ii()}/api/invoices/${S.id}/html-preview`,{headers:{Authorization:`Bearer ${q}`,"Content-Type":"application/json"},mode:"cors"});if(console.log("[CLIENT] Status de respuesta HTML:",Y.status),!Y.ok){const W=await Y.text();throw console.error("[CLIENT] Error response HTML:",W),new Error(`No se pudo cargar la previsualización: ${Y.status} ${Y.statusText}`)}const M=await Y.text();console.log("[CLIENT] HTML recibido, longitud:",M.length),console.log("[CLIENT] Primeros 200 caracteres:",M.substring(0,200)),D(M)}catch(q){console.error("[CLIENT] Error cargando HTML:",q),V(q.message||"Error desconocido")}finally{T(!1)}})()},[S.id]);const A=()=>{var q;if(!k||k.trim()===""){console.error("[CLIENT] No hay HTML disponible para imprimir"),alert("Error: No hay contenido disponible para imprimir. Por favor, espere a que se cargue la factura.");return}console.log("[CLIENT] Iniciando impresión con HTML de longitud:",k.length);const I=window.open("","_blank","width=800,height=600,scrollbars=yes,resizable=yes");if(I)try{I.document.write(`
            <!DOCTYPE html>
            <html lang="es">
            <head>
              <meta charset="UTF-8">
              <meta name="viewport" content="width=device-width, initial-scale=1.0">
              <title>Factura ${S.numeroFactura}</title>
              <style>
                @media print {
                  body { 
                    margin: 0; 
                    padding: 0; 
                    font-size: 12pt;
                  }
                  .no-print { display: none !important; }
                  .invoice-content { 
                    padding: 0; 
                    margin: 0; 
                    box-shadow: none; 
                    border-radius: 0; 
                  }
                  @page {
                    margin: 1cm;
                    size: A4;
                  }
                }
                body { 
                  font-family: Arial, sans-serif; 
                  margin: 0;
                  padding: 20px;
                  background: white;
                }
                .invoice-content {
                  background: white;
                  padding: 20px;
                  border-radius: 8px;
                  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                }
                .print-header {
                  text-align: center;
                  margin-bottom: 20px;
                  padding: 10px;
                  background: #f8f9fa;
                  border-radius: 5px;
                  display: none;
                }
                @media print {
                  .print-header { display: block; }
                }
              </style>
            </head>
            <body>
              <div class="print-header">
                <h2>Factura ${S.numeroFactura}</h2>
                <p>Fecha: ${S.fechaEmision?new Date(S.fechaEmision).toLocaleDateString("es-ES"):"N/A"}</p>
                <p>Estado: ${((q=S.estado)==null?void 0:q.toUpperCase())||"N/A"}</p>
              </div>
              <div class="invoice-content">
                ${k}
              </div>
              <script>
                // Esperar a que se cargue todo el contenido antes de imprimir
                window.onload = function() {
                  setTimeout(function() {
                    window.print();
                    // Cerrar la ventana después de un breve delay
                    setTimeout(function() {
                      window.close();
                    }, 1000);
                  }, 500);
                };
              <\/script>
            </body>
            </html>
          `),I.document.close(),I.focus(),console.log("[CLIENT] Ventana de impresión creada correctamente")}catch(Y){console.error("[CLIENT] Error al crear ventana de impresión:",Y),I.close(),console.log("[CLIENT] Usando fallback de impresión directa");try{window.print()}catch(M){console.error("[CLIENT] Error en fallback de impresión:",M),alert("Error al imprimir. Por favor, intente nuevamente.")}}else{console.warn("[CLIENT] No se pudo abrir ventana de impresión, usando fallback"),alert("No se pudo abrir la ventana de impresión. Se usará la impresión del navegador.");try{window.print()}catch(Y){console.error("[CLIENT] Error en fallback de impresión:",Y),alert("Error al imprimir. Por favor, intente nuevamente.")}}};return L?r.jsx("div",{className:"p-8 text-center",children:"Cargando previsualización..."}):B?r.jsx("div",{className:"p-8 text-center text-red-500",children:B}):k?r.jsxs("div",{className:"invoice-preview-container",children:[!1,r.jsx("div",{className:"invoice-content bg-white p-4 rounded shadow",dangerouslySetInnerHTML:{__html:k},style:{minHeight:"400px",position:"relative",overflow:"auto"}}),r.jsx("div",{className:"flex gap-4 mt-8 justify-center no-print",children:r.jsx("button",{onClick:A,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"🖨️ Imprimir"})}),r.jsx("style",{children:`
          @media print {
            .no-print { display: none !important; }
            body { margin: 0; padding: 0; }
            .invoice-preview-container { 
              padding: 0; 
              margin: 0; 
              background: white; 
            }
            .invoice-content { 
              padding: 0; 
              margin: 0; 
              box-shadow: none; 
              border-radius: 0; 
            }
          }
        `})]}):r.jsx("div",{className:"p-8 text-center text-gray-500",children:"No se pudo cargar el contenido de la factura"})},v=S=>new Date(S).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}),N=S=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(S),b=S=>{switch(S){case"PAGADA":return"bg-green-100 text-green-800";case"PENDIENTE":return"bg-yellow-100 text-yellow-800";case"VENCIDA":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},C=S=>{switch(S){case"PAGADA":return"Pagada";case"PENDIENTE":return"Pendiente";case"VENCIDA":return"Vencida";default:return S}};return s?r.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsx("div",{className:"flex items-center justify-center min-h-96",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando facturas..."})]})})})}):a?r.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"text-center py-12",children:[r.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Error"}),r.jsx("p",{className:"text-gray-600 mb-4",children:a}),r.jsx("button",{onClick:j,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Reintentar"})]})})}):r.jsxs("div",{className:"min-h-screen bg-gray-50 py-8",children:[r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mis Facturas"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Gestiona y visualiza tus facturas"}),r.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Funcionalidades disponibles:"}),r.jsxs("div",{className:"mt-2 text-sm text-blue-700",children:[r.jsxs("p",{children:["• ",r.jsx("strong",{children:"👁️ Ver:"})," Muestra la factura completa en pantalla con opciones de impresión"]}),r.jsxs("p",{children:["• ",r.jsx("strong",{children:"🖨️ Imprimir:"})," Imprime la factura desde la vista completa"]})]})]})]})})]}),r.jsx("button",{onClick:()=>d(!c),className:"bg-white text-gray-700 px-4 py-2 rounded-lg border border-gray-300 hover:bg-gray-50",children:c?"Ocultar filtros":"Mostrar filtros"})]})}),c&&r.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Filtros"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Abogado"}),r.jsx("input",{type:"text",value:u.lawyerId,onChange:S=>m({...u,lawyerId:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"ID del abogado"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha de pago"}),r.jsx("input",{type:"date",value:u.paymentDate,onChange:S=>m({...u,paymentDate:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado"}),r.jsxs("select",{value:u.status,onChange:S=>m({...u,status:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Todos"}),r.jsx("option",{value:"PAGADA",children:"Pagada"}),r.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),r.jsx("option",{value:"VENCIDA",children:"Vencida"})]})]})]}),r.jsxs("div",{className:"mt-4 flex gap-2",children:[r.jsx("button",{onClick:j,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Aplicar filtros"}),r.jsx("button",{onClick:()=>{m({lawyerId:"",paymentDate:"",status:""}),j()},className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",children:"Limpiar filtros"})]})]}),r.jsxs("div",{className:"bg-white shadow rounded-lg",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:r.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Facturas (",e.length,")"]})}),e.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:"🧾"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay facturas disponibles"}),r.jsx("p",{className:"text-gray-600",children:"No se encontraron facturas para tu cuenta."})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Número"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Concepto"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Importe"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(S=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:S.numeroFactura}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:v(S.fechaEmision)}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:r.jsx("div",{className:"max-w-xs truncate",children:S.concepto||"Sin concepto"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:N(S.importeTotal)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${b(S.estado)}`,children:C(S.estado)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:r.jsx("div",{className:"flex space-x-2",children:r.jsx("button",{onClick:k=>y(S,k),className:"text-blue-600 hover:text-blue-900 hover:bg-blue-50 px-2 py-1 rounded",title:"Ver factura completa con todos los detalles",children:"👁️ Ver"})})})]},S.id))})]})})]})]}),o&&r.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:r.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:r.jsxs("div",{className:"mt-3",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Detalles de la Factura"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Número:"}),r.jsx("p",{className:"text-sm text-gray-900",children:o.numeroFactura})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Fecha de emisión:"}),r.jsx("p",{className:"text-sm text-gray-900",children:v(o.fechaEmision)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Concepto:"}),r.jsx("p",{className:"text-sm text-gray-900",children:o.concepto||"Sin concepto"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Importe total:"}),r.jsx("p",{className:"text-sm text-gray-900",children:N(o.importeTotal)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Estado:"}),r.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${b(o.estado)}`,children:C(o.estado)})]}),o.fechaVencimiento&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Fecha de vencimiento:"}),r.jsx("p",{className:"text-sm text-gray-900",children:v(o.fechaVencimiento)})]}),o.observaciones&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Observaciones:"}),r.jsx("p",{className:"text-sm text-gray-900",children:o.observaciones})]})]}),r.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[r.jsx("button",{onClick:S=>y(o,S),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",title:"Ver factura completa",children:"👁️ Ver"}),r.jsx("button",{onClick:w,className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",children:"Cerrar"})]})]})})}),h&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg max-w-5xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center sticky top-0 bg-white z-10",children:[r.jsxs("h2",{className:"text-xl font-bold",children:["Vista de Factura - ",h.numeroFactura]}),r.jsx("button",{onClick:x,className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),r.jsx("div",{className:"p-4",children:r.jsx(p,{invoice:h})})]})})]})},dQ=()=>{const[e,t]=f.useState(""),[s,n]=f.useState(!0),[a,i]=f.useState(""),{user:o}=Ce();return f.useEffect(()=>{(async()=>{try{n(!0);const c=await K.get("/parametros/legal/PRIVACY_POLICY");t(c.data.valor)}catch(c){console.error("Error fetching privacy content:",c),i("No se pudo cargar la política de privacidad"),t(`
          <h1>Política de Privacidad</h1>
          <p>Esta política de privacidad describe cómo recopilamos, usamos y protegemos su información personal.</p>
          <h2>Información que recopilamos</h2>
          <p>Recopilamos información que usted nos proporciona directamente, como cuando se registra en nuestro sitio web, nos contacta o utiliza nuestros servicios.</p>
          <h2>Cómo usamos su información</h2>
          <p>Utilizamos la información recopilada para proporcionar, mantener y mejorar nuestros servicios, comunicarnos con usted y cumplir con nuestras obligaciones legales.</p>
          <h2>Protección de la información</h2>
          <p>Implementamos medidas de seguridad técnicas y organizativas apropiadas para proteger su información personal contra acceso no autorizado, alteración, divulgación o destrucción.</p>
          <h2>Sus derechos</h2>
          <p>Usted tiene derecho a acceder, corregir, eliminar y oponerse al procesamiento de su información personal. Para ejercer estos derechos, contáctenos.</p>
          <h2>Contacto</h2>
          <p>Si tiene preguntas sobre esta política de privacidad, contáctenos en info@despacholegal.com</p>
        `)}finally{n(!1)}})()},[]),s?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando política de privacidad..."})]})}):a?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-red-600 text-6xl mb-4",children:"⚠️"}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Error"}),r.jsx("p",{className:"text-gray-600",children:a})]})}):r.jsx("div",{className:"min-h-screen bg-gray-50",children:r.jsx("div",{className:"max-w-4xl mx-auto py-12 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden",children:[r.jsx("div",{className:"px-6 py-8",children:r.jsx("div",{className:"prose prose-lg max-w-none",dangerouslySetInnerHTML:{__html:e}})}),(o==null?void 0:o.role)==="ADMIN"&&r.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t",children:r.jsx("button",{onClick:()=>window.location.href="/admin/parametros",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"✏️ Editar Contenido"})})]})})})},uQ=()=>{const[e,t]=f.useState(""),[s,n]=f.useState(!0),[a,i]=f.useState(""),{user:o}=Ce();return f.useEffect(()=>{(async()=>{try{n(!0);const c=await K.get("/parametros/legal/TERMS_OF_SERVICE");t(c.data.valor)}catch(c){console.error("Error fetching terms content:",c),i("No se pudo cargar los términos de servicio"),t(`
          <h1>Términos de Servicio</h1>
          <p>Al utilizar nuestros servicios, usted acepta estos términos de servicio.</p>
          <h2>Servicios proporcionados</h2>
          <p>Proporcionamos servicios de asesoramiento jurídico y gestión legal a través de nuestra plataforma digital.</p>
          <h2>Uso aceptable</h2>
          <p>Usted se compromete a utilizar nuestros servicios únicamente para fines legales y de acuerdo con estos términos.</p>
          <h2>Propiedad intelectual</h2>
          <p>Todos los derechos de propiedad intelectual relacionados con nuestros servicios son propiedad de Despacho Legal.</p>
          <h2>Limitación de responsabilidad</h2>
          <p>En la máxima medida permitida por la ley, Despacho Legal no será responsable de daños indirectos, incidentales o consecuentes.</p>
          <h2>Modificaciones</h2>
          <p>Nos reservamos el derecho de modificar estos términos en cualquier momento. Los cambios serán efectivos inmediatamente después de su publicación.</p>
          <h2>Contacto</h2>
          <p>Si tiene preguntas sobre estos términos, contáctenos en info@despacholegal.com</p>
        `)}finally{n(!1)}})()},[]),s?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando términos de servicio..."})]})}):a?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-red-600 text-6xl mb-4",children:"⚠️"}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Error"}),r.jsx("p",{className:"text-gray-600",children:a})]})}):r.jsx("div",{className:"min-h-screen bg-gray-50",children:r.jsx("div",{className:"max-w-4xl mx-auto py-12 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden",children:[r.jsx("div",{className:"px-6 py-8",children:r.jsx("div",{className:"prose prose-lg max-w-none",dangerouslySetInnerHTML:{__html:e}})}),(o==null?void 0:o.role)==="ADMIN"&&r.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t",children:r.jsx("button",{onClick:()=>window.location.href="/admin/parametros",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"✏️ Editar Contenido"})})]})})})},mQ=()=>{const[e,t]=f.useState(""),[s,n]=f.useState(!0),[a,i]=f.useState(""),{user:o}=Ce();return f.useEffect(()=>{(async()=>{try{n(!0);const c=await K.get("/parametros/legal/COOKIE_POLICY");t(c.data.valor)}catch(c){console.error("Error fetching cookies content:",c),i("No se pudo cargar la política de cookies"),t(`
          <h1>Política de Cookies</h1>
          <p>Esta política de cookies explica qué son las cookies, cómo las utilizamos y cómo puede gestionarlas.</p>
          
          <h2>¿Qué son las cookies?</h2>
          <p>Las cookies son pequeños archivos de texto que se almacenan en su dispositivo cuando visita nuestro sitio web. Nos ayudan a mejorar su experiencia y a analizar el tráfico del sitio.</p>
          
          <h2>Tipos de cookies que utilizamos</h2>
          
          <h2>Cookies por Categoría</h2>
          <h3>Cookies técnicas (necesarias)</h3>
          <p>Estas cookies son esenciales para el funcionamiento del sitio web y no se pueden desactivar. Incluyen:</p>
          <ul>
            <li>Cookies de sesión para mantener su sesión activa</li>
            <li>Cookies de seguridad para proteger contra ataques</li>
            <li>Cookies de preferencias para recordar su configuración</li>
          </ul>
          
          <h3>Cookies analíticas</h3>
          <p>Nos ayudan a entender cómo interactúan los visitantes con nuestro sitio web:</p>
          <ul>
            <li>Análisis de tráfico y uso del sitio</li>
            <li>Identificación de páginas más populares</li>
            <li>Mejora de la experiencia del usuario</li>
          </ul>
          
          <h3>Cookies de funcionalidad</h3>
          <p>Mejoran la funcionalidad del sitio web:</p>
          <ul>
            <li>Recordar sus preferencias de idioma</li>
            <li>Personalizar el contenido mostrado</li>
            <li>Mejorar la navegación</li>
          </ul>
          
          <h2>Gestión de cookies</h2>
          <p>Puede gestionar las cookies a través de la configuración de su navegador:</p>
          <ul>
            <li><strong>Chrome:</strong> Configuración > Privacidad y seguridad > Cookies</li>
            <li><strong>Firefox:</strong> Opciones > Privacidad y seguridad > Cookies</li>
            <li><strong>Safari:</strong> Preferencias > Privacidad > Cookies</li>
            <li><strong>Edge:</strong> Configuración > Cookies y permisos del sitio</li>
          </ul>
          
          <h2>Cookies de terceros</h2>
          <p>Algunos servicios de terceros pueden instalar cookies en su dispositivo:</p>
          <ul>
            <li>Google Analytics para análisis web</li>
            <li>Servicios de chat en vivo</li>
            <li>Herramientas de redes sociales</li>
          </ul>
          
          <h2>Actualizaciones de esta política</h2>
          <p>Podemos actualizar esta política de cookies ocasionalmente. Le notificaremos cualquier cambio significativo.</p>
          
          <h2>Contacto</h2>
          <p>Si tiene preguntas sobre nuestra política de cookies, contáctenos en info@despacholegal.com</p>
          
          <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mt-6">
            <p class="text-sm text-blue-700">
              <strong>Nota:</strong> Esta política cumple con las directrices de la Agencia Española de Protección de Datos (AEPD) y el Reglamento General de Protección de Datos (RGPD).
            </p>
          </div>
        `)}finally{n(!1)}})()},[]),s?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando política de cookies..."})]})}):a?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-red-600 text-6xl mb-4",children:"⚠️"}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Error"}),r.jsx("p",{className:"text-gray-600",children:a})]})}):r.jsx("div",{className:"min-h-screen bg-gray-50",children:r.jsx("div",{className:"max-w-4xl mx-auto py-12 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden",children:[r.jsx("div",{className:"px-6 py-8",children:r.jsx("div",{className:"prose prose-lg max-w-none",dangerouslySetInnerHTML:{__html:e}})}),(o==null?void 0:o.role)==="ADMIN"&&r.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t",children:r.jsx("button",{onClick:()=>window.location.href="/admin/parametros",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"✏️ Editar Contenido"})})]})})})},hQ=()=>{const{user:e}=Ce(),[t,s]=f.useState([]),[n,a]=f.useState(!0),[i,o]=f.useState(null),[l,c]=f.useState(""),[d,u]=f.useState(!1);f.useEffect(()=>{m()},[]);const m=async()=>{try{a(!0);const p=await K.get("/teleassistance/sessions/user/"+(e==null?void 0:e.id));s(p.data)}catch(p){console.error("Error loading sessions:",p)}finally{a(!1)}},h=async p=>{try{const v=await K.get(`/teleassistance/sessions/${p}`);o(v.data)}catch(v){console.error("Error loading session details:",v)}},g=async p=>{if(l.trim())try{u(!0),await K.post(`/teleassistance/sessions/${p}/messages`,{content:l,messageType:"TEXT"}),c(""),await h(p)}catch(v){console.error("Error sending message:",v)}finally{u(!1)}},j=p=>{const v={PENDING:{color:"bg-yellow-100 text-yellow-800",text:"Pendiente"},ACTIVE:{color:"bg-green-100 text-green-800",text:"Activa"},COMPLETED:{color:"bg-blue-100 text-blue-800",text:"Completada"},CANCELLED:{color:"bg-red-100 text-red-800",text:"Cancelada"}},N=v[p]||v.PENDING;return r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${N.color}`,children:N.text})},y=p=>({AUTOFIRMA:"🔐",CERTIFICADO_DIGITAL:"🆔",SEDES:"🏛️",CLAVE_PIN:"📱",NAVEGADOR:"🌐",SISTEMA_OPERATIVO:"💻",OTRO:"❓"})[p]||"❓",w=p=>new Date(p).toLocaleString("es-ES"),x=p=>{if(!p)return"N/A";const v=Math.floor(p/60),N=p%60;return v>0?`${v}h ${N}m`:`${N}m`};return n?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):r.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"🖥️ Mis Sesiones de Teleasistencia"}),r.jsx("p",{className:"text-lg text-gray-600",children:"Gestiona tus solicitudes de asistencia remota"})]}),r.jsx(Ne,{to:"/client/teleassistance/request",className:"bg-blue-600 text-white px-6 py-3 rounded-md hover:bg-blue-700 transition-colors",children:"Nueva Solicitud"})]})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsx("div",{className:"lg:col-span-1",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:["Mis Sesiones (",t.length,")"]}),t.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No tienes sesiones de teleasistencia"}),r.jsx(Ne,{to:"/client/teleassistance/request",className:"mt-4 inline-block bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Solicitar Asistencia"})]}):r.jsx("div",{className:"space-y-3",children:t.map(p=>r.jsxs("div",{onClick:()=>h(p.id),className:`border rounded-lg p-3 cursor-pointer transition-colors ${(i==null?void 0:i.id)===p.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-lg",children:y(p.issueType)}),r.jsx("span",{className:"font-medium text-gray-900",children:p.issueType.replace("_"," ")})]}),j(p.status)]}),r.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:p.description}),r.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[r.jsxs("span",{children:["Asistente: ",p.assistant.name]}),r.jsx("span",{children:w(p.createdAt)})]})]},p.id))})]})}),r.jsx("div",{className:"lg:col-span-2",children:i?r.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[r.jsxs("div",{className:"border-b border-gray-200 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("span",{className:"text-2xl",children:y(i.issueType)}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:i.issueType.replace("_"," ")}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Asistente: ",i.assistant.name]})]})]}),j(i.status)]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-gray-700",children:"Descripción:"}),r.jsx("p",{className:"text-gray-600",children:i.description})]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-gray-700",children:"Código de Sesión:"}),r.jsx("p",{className:"text-gray-600 font-mono",children:i.sessionCode})]}),i.startedAt&&r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-gray-700",children:"Iniciada:"}),r.jsx("p",{className:"text-gray-600",children:w(i.startedAt)})]}),i.duration&&r.jsxs("div",{children:[r.jsx("span",{className:"font-medium text-gray-700",children:"Duración:"}),r.jsx("p",{className:"text-gray-600",children:x(i.duration)})]})]}),i.resolution&&r.jsxs("div",{className:"mt-4 p-4 bg-green-50 rounded-lg",children:[r.jsx("h4",{className:"font-medium text-green-900 mb-2",children:"Resolución:"}),r.jsx("p",{className:"text-green-800",children:i.resolution})]})]}),r.jsxs("div",{className:"p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Mensajes"}),r.jsx("div",{className:"space-y-4 mb-4 max-h-96 overflow-y-auto",children:i.messages.length===0?r.jsx("p",{className:"text-gray-500 text-center py-4",children:"No hay mensajes en esta sesión"}):i.messages.map(p=>r.jsx("div",{className:`flex ${p.sender.id===(e==null?void 0:e.id)?"justify-end":"justify-start"}`,children:r.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${p.sender.id===(e==null?void 0:e.id)?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"}`,children:[r.jsxs("div",{className:"text-xs opacity-75 mb-1",children:[p.sender.name," - ",w(p.createdAt)]}),r.jsx("p",{children:p.content})]})},p.id))}),i.status==="ACTIVE"&&r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("input",{type:"text",value:l,onChange:p=>c(p.target.value),onKeyPress:p=>p.key==="Enter"&&g(i.id),placeholder:"Escribe un mensaje...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),r.jsx("button",{onClick:()=>g(i.id),disabled:d||!l.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50",children:d?"Enviando...":"Enviar"})]})]})]}):r.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:r.jsxs("div",{className:"text-center py-8",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Selecciona una sesión para ver los detalles"})]})})})]})]})})},fQ=()=>{const{user:e}=Ce(),t=Yt(),[s,n]=f.useState([]),[a,i]=f.useState([]),[o,l]=f.useState([]),[c,d]=f.useState(!0),[u,m]=f.useState(!1),[h,g]=f.useState(""),[j,y]=f.useState(""),[w,x]=f.useState(""),[p,v]=f.useState(""),[N,b]=f.useState(!1),[C,S]=f.useState(null);f.useEffect(()=>{k()},[]);const k=async()=>{try{d(!0);const[B,V,A]=await Promise.all([K.get("/teleassistance/available-assistants"),K.get("/teleassistance/remote-tools"),K.get("/teleassistance/common-issues")]);n(B.data),i(V.data),l(A.data)}catch(B){console.error("Error loading teleassistance data:",B)}finally{d(!1)}},D=async B=>{if(B.preventDefault(),!h||!j||!p){alert("Por favor completa todos los campos obligatorios");return}try{m(!0);const V={userId:e==null?void 0:e.id,assistantId:h,issueType:j,description:p,remoteTool:w||void 0},A=await K.post("/teleassistance/sessions",V);alert("Solicitud de teleasistencia enviada exitosamente. Te contactaremos pronto."),t("/client/teleassistance")}catch(V){console.error("Error creating teleassistance session:",V),alert("Error al enviar la solicitud. Por favor intenta de nuevo.")}finally{m(!1)}},L=B=>{S(B),b(!0)},T=B=>({AUTOFIRMA:"🔐",CERTIFICADO_DIGITAL:"🆔",SEDES:"🏛️",CLAVE_PIN:"📱",NAVEGADOR:"🌐",SISTEMA_OPERATIVO:"💻",OTRO:"❓"})[B]||"❓";return c?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):r.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:r.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"🖥️ Solicitar Teleasistencia"}),r.jsx("p",{className:"text-lg text-gray-600",children:"¿Necesitas ayuda con problemas de administración electrónica? Solicita asistencia remota"})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsx("div",{className:"lg:col-span-2",children:r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Nueva Solicitud de Teleasistencia"}),r.jsxs("form",{onSubmit:D,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Seleccionar Asistente *"}),r.jsxs("select",{value:h,onChange:B=>g(B.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[r.jsx("option",{value:"",children:"Selecciona un asistente"}),s.map(B=>r.jsxs("option",{value:B.id,children:[B.name," (",B.role,")"]},B.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Problema *"}),r.jsxs("select",{value:j,onChange:B=>y(B.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[r.jsx("option",{value:"",children:"Selecciona el tipo de problema"}),o.map(B=>r.jsxs("option",{value:B.id,children:[T(B.id)," ",B.name]},B.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripción del Problema *"}),r.jsx("textarea",{value:p,onChange:B=>v(B.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Describe detalladamente el problema que estás experimentando...",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Herramienta de Control Remoto (Opcional)"}),r.jsxs("select",{value:w,onChange:B=>x(B.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Sin preferencia"}),a.map(B=>r.jsx("option",{value:B.id,children:B.name},B.id))]})]}),r.jsx("div",{className:"pt-4",children:r.jsx("button",{type:"submit",disabled:u,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50",children:u?"Enviando...":"Enviar Solicitud de Teleasistencia"})})]})]})}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"🛠️ Herramientas de Control Remoto"}),r.jsx("div",{className:"space-y-3",children:a.map(B=>r.jsxs("div",{className:"border border-gray-200 rounded-lg p-3",children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:B.name}),r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:B.description}),r.jsx("button",{onClick:()=>L(B),className:"text-blue-600 text-sm hover:text-blue-800",children:"Ver instrucciones"})]},B.id))})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"❓ Problemas Comunes"}),r.jsx("div",{className:"space-y-3",children:o.slice(0,5).map(B=>r.jsxs("div",{className:"border border-gray-200 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center mb-2",children:[r.jsx("span",{className:"text-lg mr-2",children:T(B.id)}),r.jsx("h4",{className:"font-medium text-gray-900",children:B.name})]}),r.jsx("p",{className:"text-sm text-gray-600",children:B.description})]},B.id))})]}),r.jsxs("div",{className:"bg-blue-50 rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-bold text-blue-900 mb-2",children:"📞 Información de Contacto"}),r.jsx("p",{className:"text-sm text-blue-800 mb-3",children:"Una vez enviada tu solicitud, el asistente te contactará para coordinar la sesión de teleasistencia."}),r.jsxs("div",{className:"text-sm text-blue-700",children:[r.jsx("p",{children:"• Tiempo de respuesta: 15-30 minutos"}),r.jsx("p",{children:"• Horario de atención: Lunes a Viernes 9:00-18:00"}),r.jsx("p",{children:"• Sesiones gratuitas incluidas en tu plan"})]})]})]})]}),N&&C&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl mx-4 max-h-[80vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h3",{className:"text-xl font-bold text-gray-900",children:["Instrucciones: ",C.name]}),r.jsx("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-gray-600",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Características:"}),r.jsx("ul",{className:"list-disc list-inside text-sm text-gray-600 space-y-1",children:C.features.map((B,V)=>r.jsx("li",{children:B},V))})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Instrucciones de Instalación:"}),r.jsx("ol",{className:"list-decimal list-inside text-sm text-gray-600 space-y-1",children:C.instructions.map((B,V)=>r.jsx("li",{children:B},V))})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("a",{href:C.downloadUrl,target:"_blank",rel:"noopener noreferrer",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:["Descargar ",C.name]}),r.jsx("button",{onClick:()=>b(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"Cerrar"})]})]})})]})})},pQ=()=>{const e=Yt(),{user:t}=Ce(),[s,n]=f.useState(null),[a,i]=f.useState(!0),[o,l]=f.useState(null),[c,d]=f.useState(!1),[u,m]=f.useState({name:"",email:"",phone:"",address:""}),[h,g]=f.useState({totalCases:0,activeCases:0,totalAppointments:0,upcomingAppointments:0,totalDocuments:0,totalInvoices:0});f.useEffect(()=>{j(),y()},[]);const j=async()=>{var N,b;try{if(i(!0),l(null),!localStorage.getItem("token")){l("No hay token de autenticación");return}const S=await K.get("/users/clients/profile");console.log("Client profile response:",S.data),n(S.data),S.data&&m({name:S.data.user.name,email:S.data.user.email,phone:S.data.phone||"",address:S.data.address||""})}catch(C){console.error("Error fetching client profile:",C),l(((b=(N=C.response)==null?void 0:N.data)==null?void 0:b.message)||"Error al cargar el perfil")}finally{i(!1)}},y=async()=>{try{const N=localStorage.getItem("token");if(console.log("🔍 Token disponible:",!!N),console.log("👤 Usuario actual:",t),!N){console.error("❌ No hay token de autenticación");return}console.log("📊 Iniciando llamadas a la API...");try{const C=(await K.get("/cases/my")).data||[];g(S=>({...S,totalCases:C.length,activeCases:C.filter(k=>k.status==="ACTIVO").length}))}catch(b){console.error("Error fetching cases:",b)}try{const C=(await K.get("/appointments/my")).data||[];g(S=>({...S,totalAppointments:C.length,upcomingAppointments:C.filter(k=>new Date(k.date)>new Date).length}))}catch(b){console.error("Error fetching appointments:",b)}try{const C=(await K.get("/documents/my")).data||[];g(S=>({...S,totalDocuments:C.length}))}catch(b){console.error("Error fetching documents:",b)}try{const C=(await K.get("/invoices/my")).data||[];g(S=>({...S,totalInvoices:C.length}))}catch(b){console.error("Error fetching invoices:",b)}console.log("✅ Llamadas a la API completadas")}catch(N){console.error("Error fetching stats:",N)}},w=N=>{const{name:b,value:C}=N.target;m(S=>({...S,[b]:C}))},x=async N=>{var b,C;N.preventDefault();try{i(!0),l(null);const S={name:u.name,email:u.email,phone:u.phone,address:u.address};await K.patch("/users/clients/profile",{name:u.name,email:u.email,phone:u.phone,address:u.address}),await j(),d(!1),alert("Perfil actualizado exitosamente")}catch(S){console.error("Error updating profile:",S),l(((C=(b=S.response)==null?void 0:b.data)==null?void 0:C.message)||"Error al actualizar el perfil")}finally{i(!1)}},p=()=>{s&&m({name:s.user.name,email:s.user.email,phone:s.phone||"",address:s.address||""}),d(!1),l(null)},v=N=>new Date(N).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"});return a?r.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsx("div",{className:"flex items-center justify-center min-h-96",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando perfil..."})]})})})}):o?r.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"text-center py-12",children:[r.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Error"}),r.jsx("p",{className:"text-gray-600 mb-4",children:o}),r.jsx("button",{onClick:j,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Reintentar"})]})})}):r.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mi Perfil"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Gestiona tu información personal y revisa tus estadísticas"})]}),r.jsx("button",{onClick:()=>e("/client/dashboard"),className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",children:"Volver al Dashboard"})]})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsx("div",{className:"lg:col-span-2",children:r.jsxs("div",{className:"bg-white shadow rounded-lg",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Información Personal"}),!c&&r.jsx("button",{onClick:()=>d(!0),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Editar"})]})}),r.jsx("div",{className:"p-6",children:c?r.jsxs("form",{onSubmit:x,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre completo"}),r.jsx("input",{type:"text",name:"name",value:u.name,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),r.jsx("input",{type:"email",name:"email",value:u.email,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Teléfono"}),r.jsx("input",{type:"tel",name:"phone",value:u.phone,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"DNI"}),r.jsx("input",{type:"text",value:(s==null?void 0:s.dni)||"",className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50",disabled:!0})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dirección"}),r.jsx("textarea",{name:"address",value:u.address,onChange:N=>m(b=>({...b,address:N.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{className:"flex gap-2 pt-4",children:[r.jsx("button",{type:"submit",disabled:a,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-50",children:a?"Guardando...":"Guardar cambios"}),r.jsx("button",{type:"button",onClick:p,className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",children:"Cancelar"})]})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nombre completo"}),r.jsx("p",{className:"text-sm text-gray-900",children:s==null?void 0:s.user.name})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),r.jsx("p",{className:"text-sm text-gray-900",children:s==null?void 0:s.user.email})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Teléfono"}),r.jsx("p",{className:"text-sm text-gray-900",children:(s==null?void 0:s.phone)||"No especificado"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"DNI"}),r.jsx("p",{className:"text-sm text-gray-900",children:s==null?void 0:s.dni})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Dirección"}),r.jsx("p",{className:"text-sm text-gray-900",children:(s==null?void 0:s.address)||"No especificada"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Fecha de registro"}),r.jsx("p",{className:"text-sm text-gray-900",children:v((s==null?void 0:s.createdAt)||"")})]})]})})]})}),r.jsxs("div",{className:"lg:col-span-1",children:[r.jsxs("div",{className:"bg-white shadow rounded-lg",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Estadísticas"})}),r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Expedientes"}),r.jsx("p",{className:"text-2xl font-bold text-blue-900",children:h.totalCases})]}),r.jsx("div",{className:"text-blue-600",children:r.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})]}),r.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-green-600",children:"Expedientes Activos"}),r.jsx("p",{className:"text-2xl font-bold text-green-900",children:h.activeCases})]}),r.jsx("div",{className:"text-green-600",children:r.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),r.jsxs("div",{className:"flex items-center justify-between p-4 bg-yellow-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-yellow-600",children:"Citas"}),r.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:h.totalAppointments})]}),r.jsx("div",{className:"text-yellow-600",children:r.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]}),r.jsxs("div",{className:"flex items-center justify-between p-4 bg-purple-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-purple-600",children:"Próximas Citas"}),r.jsx("p",{className:"text-2xl font-bold text-purple-900",children:h.upcomingAppointments})]}),r.jsx("div",{className:"text-purple-600",children:r.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),r.jsxs("div",{className:"flex items-center justify-between p-4 bg-indigo-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-indigo-600",children:"Documentos"}),r.jsx("p",{className:"text-2xl font-bold text-indigo-900",children:h.totalDocuments})]}),r.jsx("div",{className:"text-indigo-600",children:r.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})]}),r.jsxs("div",{className:"flex items-center justify-between p-4 bg-red-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-red-600",children:"Facturas"}),r.jsx("p",{className:"text-2xl font-bold text-red-900",children:h.totalInvoices})]}),r.jsx("div",{className:"text-red-600",children:r.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})]})]})})]}),r.jsxs("div",{className:"bg-white shadow rounded-lg mt-6",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Acciones Rápidas"})}),r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"space-y-3",children:[r.jsx("button",{onClick:()=>e("/client/cases"),className:"w-full text-left p-3 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("svg",{className:"w-5 h-5 text-blue-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Ver mis expedientes"})]})}),r.jsx("button",{onClick:()=>e("/client/appointments"),className:"w-full text-left p-3 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("svg",{className:"w-5 h-5 text-yellow-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),r.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Gestionar citas"})]})}),r.jsx("button",{onClick:()=>e("/client/invoices"),className:"w-full text-left p-3 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("svg",{className:"w-5 h-5 text-red-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Ver facturas"})]})}),r.jsx("button",{onClick:()=>e("/client/documents"),className:"w-full text-left p-3 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("svg",{className:"w-5 h-5 text-indigo-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Documentos"})]})})]})})]})]})]})]})})},xQ=()=>{const{user:e,loading:t}=Ce(),[s,n]=f.useState({});return f.useEffect(()=>{const a=()=>{const o=localStorage.getItem("token"),l=localStorage.getItem("user"),c={timestamp:new Date().toISOString(),localStorage:{token:o?"Presente":"Ausente",user:l?"Presente":"Ausente",tokenLength:o?o.length:0},authUtils:{isAuthenticated:EN(),authenticatedUser:g5()},context:{user:e,loading:t}};if(o)try{const d=CN(o);c.tokenDetails={valid:dl(o),expiringSoon:x5(o),userFromToken:d,rawToken:o.substring(0,50)+"..."}}catch(d){c.tokenDetails={error:d.message}}n(c)};a();const i=setInterval(a,5e3);return()=>clearInterval(i)},[e,t]),null};function gQ(){return r.jsxs(v5,{children:[r.jsx(T4,{children:r.jsx(N4,{children:r.jsxs(fe,{path:"/",element:r.jsx(AN,{}),children:[r.jsx(fe,{index:!0,element:r.jsx(z5,{})}),r.jsx(fe,{path:"contact",element:r.jsx(U5,{})}),r.jsx(fe,{path:"login",element:r.jsx(V5,{})}),r.jsx(fe,{path:"register",element:r.jsx(H5,{})}),r.jsx(fe,{path:"privacidad",element:r.jsx(dQ,{})}),r.jsx(fe,{path:"terminos",element:r.jsx(uQ,{})}),r.jsx(fe,{path:"cookies",element:r.jsx(mQ,{})}),r.jsx(fe,{path:"dashboard",element:r.jsx(ah,{})}),r.jsxs(fe,{element:r.jsx(Y5,{}),children:[r.jsx(fe,{element:r.jsx(oh,{allowedRoles:["ADMIN"]}),children:r.jsxs(fe,{path:"admin",children:[r.jsx(fe,{path:"dashboard",element:r.jsx(nq,{})}),r.jsx(fe,{path:"users",element:r.jsx(aq,{})}),r.jsx(fe,{path:"cases",element:r.jsx(oq,{})}),r.jsx(fe,{path:"cases/:id",element:r.jsx(Cv,{})}),r.jsx(fe,{path:"appointments",element:r.jsx(lq,{})}),r.jsx(fe,{path:"tasks",element:r.jsx(cq,{})}),r.jsx(fe,{path:"documents",element:r.jsx(dq,{})}),r.jsx(fe,{path:"invoices",element:r.jsx(Lq,{})}),r.jsx(fe,{path:"reports",element:r.jsx(Iq,{})}),r.jsx(fe,{path:"home-builder",element:r.jsx(VK,{})}),r.jsx(fe,{path:"menu-config",element:r.jsx(HK,{})}),r.jsx(fe,{path:"site-config",element:r.jsx(WK,{})}),r.jsx(fe,{path:"guided-config",element:r.jsx(YK,{})}),r.jsx(fe,{path:"teleassistance",element:r.jsx(vb,{})}),r.jsx(fe,{path:"services",element:r.jsx(Vq,{})}),r.jsx(fe,{path:"settings",element:r.jsx(lh,{title:"Configuración del Sistema",description:"Configurar parámetros generales",icon:"⚙️"})}),r.jsx(fe,{path:"audit",element:r.jsx(lh,{title:"Auditoría",description:"Registros de actividad del sistema",icon:"🔍"})}),r.jsx(fe,{path:"backup",element:r.jsx(lh,{title:"Backup y Restauración",description:"Gestionar copias de seguridad",icon:"💾"})}),r.jsx(fe,{path:"/admin/parametros",element:r.jsx(Uq,{})})]})}),r.jsx(fe,{element:r.jsx(oh,{allowedRoles:["ABOGADO"]}),children:r.jsxs(fe,{path:"lawyer",children:[r.jsx(fe,{path:"dashboard",element:r.jsx(ah,{})}),r.jsx(fe,{path:"facturacion",element:r.jsx(sQ,{})}),r.jsx(fe,{path:"provisiones",element:r.jsx(nQ,{})}),r.jsxs(fe,{path:"cases",children:[r.jsx(fe,{index:!0,element:r.jsx(q5,{})}),r.jsx(fe,{path:"new",element:r.jsx(G5,{})}),r.jsx(fe,{path:":id",element:r.jsx(Cv,{})}),r.jsx(fe,{path:":id/edit",element:r.jsx(n6,{})})]}),r.jsx(fe,{path:"clients",element:r.jsx(tq,{})}),r.jsx(fe,{path:"appointments",element:r.jsx(eq,{})}),r.jsx(fe,{path:"documents",element:r.jsx(r6,{})}),r.jsx(fe,{path:"tasks",element:r.jsx(rq,{})}),r.jsx(fe,{path:"reports",element:r.jsx(sq,{})}),r.jsx(fe,{path:"chat",element:r.jsx(zX,{})}),r.jsx(fe,{path:"teleassistance",element:r.jsx(vb,{})})]})}),r.jsx(fe,{element:r.jsx(oh,{allowedRoles:["CLIENTE"]}),children:r.jsxs(fe,{path:"client",children:[r.jsx(fe,{path:"dashboard",element:r.jsx(ah,{})}),r.jsx(fe,{path:"cases",element:r.jsx(Q5,{})}),r.jsx(fe,{path:"cases/:id",element:r.jsx(Z5,{})}),r.jsx(fe,{path:"documents",element:r.jsx(s6,{})}),r.jsx(fe,{path:"provisiones",element:r.jsx(aQ,{})}),r.jsx(fe,{path:"appointments",element:r.jsx(iQ,{})}),r.jsx(fe,{path:"appointments/:id",element:r.jsx(oQ,{})}),r.jsx(fe,{path:"chat",element:r.jsx(qK,{})}),r.jsx(fe,{path:"teleassistance",element:r.jsx(hQ,{})}),r.jsx(fe,{path:"teleassistance/request",element:r.jsx(fQ,{})}),r.jsx(fe,{path:"payments",element:r.jsx(lQ,{})}),r.jsx(fe,{path:"invoices",element:r.jsx(cQ,{})}),r.jsx(fe,{path:"profile",element:r.jsx(pQ,{})})]})})]}),r.jsx(fe,{path:"*",element:r.jsx(W5,{})})]})})}),r.jsx(xQ,{})]})}Oh.createRoot(document.getElementById("root")).render(r.jsx(H.StrictMode,{children:r.jsx(gQ,{})}))});export default vQ();
