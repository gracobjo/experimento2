var HS=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var qX=HS((yQ,hd)=>{function WS(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var zr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var bb={exports:{}},cu={},jb={exports:{}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ol=Symbol.for("react.element"),YS=Symbol.for("react.portal"),qS=Symbol.for("react.fragment"),GS=Symbol.for("react.strict_mode"),KS=Symbol.for("react.profiler"),XS=Symbol.for("react.provider"),QS=Symbol.for("react.context"),JS=Symbol.for("react.forward_ref"),ZS=Symbol.for("react.suspense"),eC=Symbol.for("react.memo"),tC=Symbol.for("react.lazy"),Bg=Symbol.iterator;function rC(e){return e===null||typeof e!="object"?null:(e=Bg&&e[Bg]||e["@@iterator"],typeof e=="function"?e:null)}var Nb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},wb=Object.assign,Sb={};function Ti(e,t,r){this.props=e,this.context=t,this.refs=Sb,this.updater=r||Nb}Ti.prototype.isReactComponent={};Ti.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ti.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Cb(){}Cb.prototype=Ti.prototype;function lp(e,t,r){this.props=e,this.context=t,this.refs=Sb,this.updater=r||Nb}var cp=lp.prototype=new Cb;cp.constructor=lp;wb(cp,Ti.prototype);cp.isPureReactComponent=!0;var zg=Array.isArray,Eb=Object.prototype.hasOwnProperty,dp={current:null},kb={key:!0,ref:!0,__self:!0,__source:!0};function Db(e,t,r){var n,a={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)Eb.call(t,n)&&!kb.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:Ol,type:e,key:i,ref:o,props:a,_owner:dp.current}}function sC(e,t){return{$$typeof:Ol,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function up(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ol}function nC(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Ug=/\/+/g;function wm(e,t){return typeof e=="object"&&e!==null&&e.key!=null?nC(""+e.key):t.toString(36)}function $c(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Ol:case YS:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+wm(o,0):n,zg(a)?(r="",e!=null&&(r=e.replace(Ug,"$&/")+"/"),$c(a,t,r,"",function(d){return d})):a!=null&&(up(a)&&(a=sC(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(Ug,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",zg(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+wm(i,l);o+=$c(i,t,r,c,a)}else if(c=rC(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+wm(i,l++),o+=$c(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function oc(e,t,r){if(e==null)return e;var n=[],a=0;return $c(e,n,"","",function(i){return t.call(r,i,a++)}),n}function aC(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var sr={current:null},Fc={transition:null},iC={ReactCurrentDispatcher:sr,ReactCurrentBatchConfig:Fc,ReactCurrentOwner:dp};function Ab(){throw Error("act(...) is not supported in production builds of React.")}Te.Children={map:oc,forEach:function(e,t,r){oc(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return oc(e,function(){t++}),t},toArray:function(e){return oc(e,function(t){return t})||[]},only:function(e){if(!up(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Te.Component=Ti;Te.Fragment=qS;Te.Profiler=KS;Te.PureComponent=lp;Te.StrictMode=GS;Te.Suspense=ZS;Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iC;Te.act=Ab;Te.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=wb({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=dp.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Eb.call(t,c)&&!kb.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:Ol,type:e.type,key:a,ref:i,props:n,_owner:o}};Te.createContext=function(e){return e={$$typeof:QS,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:XS,_context:e},e.Consumer=e};Te.createElement=Db;Te.createFactory=function(e){var t=Db.bind(null,e);return t.type=e,t};Te.createRef=function(){return{current:null}};Te.forwardRef=function(e){return{$$typeof:JS,render:e}};Te.isValidElement=up;Te.lazy=function(e){return{$$typeof:tC,_payload:{_status:-1,_result:e},_init:aC}};Te.memo=function(e,t){return{$$typeof:eC,type:e,compare:t===void 0?null:t}};Te.startTransition=function(e){var t=Fc.transition;Fc.transition={};try{e()}finally{Fc.transition=t}};Te.unstable_act=Ab;Te.useCallback=function(e,t){return sr.current.useCallback(e,t)};Te.useContext=function(e){return sr.current.useContext(e)};Te.useDebugValue=function(){};Te.useDeferredValue=function(e){return sr.current.useDeferredValue(e)};Te.useEffect=function(e,t){return sr.current.useEffect(e,t)};Te.useId=function(){return sr.current.useId()};Te.useImperativeHandle=function(e,t,r){return sr.current.useImperativeHandle(e,t,r)};Te.useInsertionEffect=function(e,t){return sr.current.useInsertionEffect(e,t)};Te.useLayoutEffect=function(e,t){return sr.current.useLayoutEffect(e,t)};Te.useMemo=function(e,t){return sr.current.useMemo(e,t)};Te.useReducer=function(e,t,r){return sr.current.useReducer(e,t,r)};Te.useRef=function(e){return sr.current.useRef(e)};Te.useState=function(e){return sr.current.useState(e)};Te.useSyncExternalStore=function(e,t,r){return sr.current.useSyncExternalStore(e,t,r)};Te.useTransition=function(){return sr.current.useTransition()};Te.version="18.3.1";jb.exports=Te;var p=jb.exports;const z=vr(p),oC=WS({__proto__:null,default:z},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lC=p,cC=Symbol.for("react.element"),dC=Symbol.for("react.fragment"),uC=Object.prototype.hasOwnProperty,mC=lC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,hC={key:!0,ref:!0,__self:!0,__source:!0};function Tb(e,t,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)uC.call(t,n)&&!hC.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:cC,type:e,key:i,ref:o,props:a,_owner:mC.current}}cu.Fragment=dC;cu.jsx=Tb;cu.jsxs=Tb;bb.exports=cu;var s=bb.exports,Eh={},_b={exports:{}},Cr={},Ob={exports:{}},Mb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(W,_){var T=W.length;W.push(_);e:for(;0<T;){var R=T-1>>>1,B=W[R];if(0<a(B,_))W[R]=_,W[T]=B,T=R;else break e}}function r(W){return W.length===0?null:W[0]}function n(W){if(W.length===0)return null;var _=W[0],T=W.pop();if(T!==_){W[0]=T;e:for(var R=0,B=W.length,U=B>>>1;R<U;){var X=2*(R+1)-1,F=W[X],H=X+1,Y=W[H];if(0>a(F,T))H<B&&0>a(Y,F)?(W[R]=Y,W[H]=T,R=H):(W[R]=F,W[X]=T,R=X);else if(H<B&&0>a(Y,T))W[R]=Y,W[H]=T,R=H;else break e}}return _}function a(W,_){var T=W.sortIndex-_.sortIndex;return T!==0?T:W.id-_.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,m=null,h=3,g=!1,j=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(W){for(var _=r(d);_!==null;){if(_.callback===null)n(d);else if(_.startTime<=W)n(d),_.sortIndex=_.expirationTime,t(c,_);else break;_=r(d)}}function N(W){if(y=!1,b(W),!j)if(r(c)!==null)j=!0,V(w);else{var _=r(d);_!==null&&G(N,_.startTime-W)}}function w(W,_){j=!1,y&&(y=!1,f(k),k=-1),g=!0;var T=h;try{for(b(_),m=r(c);m!==null&&(!(m.expirationTime>_)||W&&!D());){var R=m.callback;if(typeof R=="function"){m.callback=null,h=m.priorityLevel;var B=R(m.expirationTime<=_);_=e.unstable_now(),typeof B=="function"?m.callback=B:m===r(c)&&n(c),b(_)}else n(c);m=r(c)}if(m!==null)var U=!0;else{var X=r(d);X!==null&&G(N,X.startTime-_),U=!1}return U}finally{m=null,h=T,g=!1}}var S=!1,C=null,k=-1,A=5,O=-1;function D(){return!(e.unstable_now()-O<A)}function I(){if(C!==null){var W=e.unstable_now();O=W;var _=!0;try{_=C(!0,W)}finally{_?M():(S=!1,C=null)}}else S=!1}var M;if(typeof x=="function")M=function(){x(I)};else if(typeof MessageChannel<"u"){var E=new MessageChannel,L=E.port2;E.port1.onmessage=I,M=function(){L.postMessage(null)}}else M=function(){v(I,0)};function V(W){C=W,S||(S=!0,M())}function G(W,_){k=v(function(){W(e.unstable_now())},_)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(W){W.callback=null},e.unstable_continueExecution=function(){j||g||(j=!0,V(w))},e.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<W?Math.floor(1e3/W):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(W){switch(h){case 1:case 2:case 3:var _=3;break;default:_=h}var T=h;h=_;try{return W()}finally{h=T}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(W,_){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var T=h;h=W;try{return _()}finally{h=T}},e.unstable_scheduleCallback=function(W,_,T){var R=e.unstable_now();switch(typeof T=="object"&&T!==null?(T=T.delay,T=typeof T=="number"&&0<T?R+T:R):T=R,W){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=T+B,W={id:u++,callback:_,priorityLevel:W,startTime:T,expirationTime:B,sortIndex:-1},T>R?(W.sortIndex=T,t(d,W),r(c)===null&&W===r(d)&&(y?(f(k),k=-1):y=!0,G(N,T-R))):(W.sortIndex=B,t(c,W),j||g||(j=!0,V(w))),W},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(W){var _=h;return function(){var T=h;h=_;try{return W.apply(this,arguments)}finally{h=T}}}})(Mb);Ob.exports=Mb;var fC=Ob.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pC=p,wr=fC;function re(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Rb=new Set,Yo={};function Ia(e,t){gi(e,t),gi(e+"Capture",t)}function gi(e,t){for(Yo[e]=t,e=0;e<t.length;e++)Rb.add(t[e])}var sn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kh=Object.prototype.hasOwnProperty,xC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Vg={},Hg={};function gC(e){return kh.call(Hg,e)?!0:kh.call(Vg,e)?!1:xC.test(e)?Hg[e]=!0:(Vg[e]=!0,!1)}function vC(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function yC(e,t,r,n){if(t===null||typeof t>"u"||vC(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function nr(e,t,r,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Lt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Lt[e]=new nr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Lt[t]=new nr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Lt[e]=new nr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Lt[e]=new nr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Lt[e]=new nr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Lt[e]=new nr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Lt[e]=new nr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Lt[e]=new nr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Lt[e]=new nr(e,5,!1,e.toLowerCase(),null,!1,!1)});var mp=/[\-:]([a-z])/g;function hp(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(mp,hp);Lt[t]=new nr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(mp,hp);Lt[t]=new nr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(mp,hp);Lt[t]=new nr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Lt[e]=new nr(e,1,!1,e.toLowerCase(),null,!1,!1)});Lt.xlinkHref=new nr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Lt[e]=new nr(e,1,!1,e.toLowerCase(),null,!0,!0)});function fp(e,t,r,n){var a=Lt.hasOwnProperty(t)?Lt[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(yC(t,r,a,n)&&(r=null),n||a===null?gC(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var un=pC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,lc=Symbol.for("react.element"),qa=Symbol.for("react.portal"),Ga=Symbol.for("react.fragment"),pp=Symbol.for("react.strict_mode"),Dh=Symbol.for("react.profiler"),Pb=Symbol.for("react.provider"),Lb=Symbol.for("react.context"),xp=Symbol.for("react.forward_ref"),Ah=Symbol.for("react.suspense"),Th=Symbol.for("react.suspense_list"),gp=Symbol.for("react.memo"),Nn=Symbol.for("react.lazy"),Ib=Symbol.for("react.offscreen"),Wg=Symbol.iterator;function so(e){return e===null||typeof e!="object"?null:(e=Wg&&e[Wg]||e["@@iterator"],typeof e=="function"?e:null)}var ut=Object.assign,Sm;function jo(e){if(Sm===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Sm=t&&t[1]||""}return`
`+Sm+e}var Cm=!1;function Em(e,t){if(!e||Cm)return"";Cm=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Cm=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?jo(e):""}function bC(e){switch(e.tag){case 5:return jo(e.type);case 16:return jo("Lazy");case 13:return jo("Suspense");case 19:return jo("SuspenseList");case 0:case 2:case 15:return e=Em(e.type,!1),e;case 11:return e=Em(e.type.render,!1),e;case 1:return e=Em(e.type,!0),e;default:return""}}function _h(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ga:return"Fragment";case qa:return"Portal";case Dh:return"Profiler";case pp:return"StrictMode";case Ah:return"Suspense";case Th:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Lb:return(e.displayName||"Context")+".Consumer";case Pb:return(e._context.displayName||"Context")+".Provider";case xp:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case gp:return t=e.displayName||null,t!==null?t:_h(e.type)||"Memo";case Nn:t=e._payload,e=e._init;try{return _h(e(t))}catch{}}return null}function jC(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _h(t);case 8:return t===pp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Vn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function $b(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function NC(e){var t=$b(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function cc(e){e._valueTracker||(e._valueTracker=NC(e))}function Fb(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=$b(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function fd(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Oh(e,t){var r=t.checked;return ut({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Yg(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Vn(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Bb(e,t){t=t.checked,t!=null&&fp(e,"checked",t,!1)}function Mh(e,t){Bb(e,t);var r=Vn(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Rh(e,t.type,r):t.hasOwnProperty("defaultValue")&&Rh(e,t.type,Vn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function qg(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Rh(e,t,r){(t!=="number"||fd(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var No=Array.isArray;function ii(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Vn(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Ph(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(re(91));return ut({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Gg(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(re(92));if(No(r)){if(1<r.length)throw Error(re(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Vn(r)}}function zb(e,t){var r=Vn(t.value),n=Vn(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Kg(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Ub(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Lh(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ub(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var dc,Vb=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(dc=dc||document.createElement("div"),dc.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=dc.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function qo(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Do={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wC=["Webkit","ms","Moz","O"];Object.keys(Do).forEach(function(e){wC.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Do[t]=Do[e]})});function Hb(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Do.hasOwnProperty(e)&&Do[e]?(""+t).trim():t+"px"}function Wb(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=Hb(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var SC=ut({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ih(e,t){if(t){if(SC[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(re(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(re(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(re(61))}if(t.style!=null&&typeof t.style!="object")throw Error(re(62))}}function $h(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fh=null;function vp(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Bh=null,oi=null,li=null;function Xg(e){if(e=Pl(e)){if(typeof Bh!="function")throw Error(re(280));var t=e.stateNode;t&&(t=fu(t),Bh(e.stateNode,e.type,t))}}function Yb(e){oi?li?li.push(e):li=[e]:oi=e}function qb(){if(oi){var e=oi,t=li;if(li=oi=null,Xg(e),t)for(e=0;e<t.length;e++)Xg(t[e])}}function Gb(e,t){return e(t)}function Kb(){}var km=!1;function Xb(e,t,r){if(km)return e(t,r);km=!0;try{return Gb(e,t,r)}finally{km=!1,(oi!==null||li!==null)&&(Kb(),qb())}}function Go(e,t){var r=e.stateNode;if(r===null)return null;var n=fu(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(re(231,t,typeof r));return r}var zh=!1;if(sn)try{var no={};Object.defineProperty(no,"passive",{get:function(){zh=!0}}),window.addEventListener("test",no,no),window.removeEventListener("test",no,no)}catch{zh=!1}function CC(e,t,r,n,a,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(u){this.onError(u)}}var Ao=!1,pd=null,xd=!1,Uh=null,EC={onError:function(e){Ao=!0,pd=e}};function kC(e,t,r,n,a,i,o,l,c){Ao=!1,pd=null,CC.apply(EC,arguments)}function DC(e,t,r,n,a,i,o,l,c){if(kC.apply(this,arguments),Ao){if(Ao){var d=pd;Ao=!1,pd=null}else throw Error(re(198));xd||(xd=!0,Uh=d)}}function $a(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Qb(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Qg(e){if($a(e)!==e)throw Error(re(188))}function AC(e){var t=e.alternate;if(!t){if(t=$a(e),t===null)throw Error(re(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return Qg(a),e;if(i===n)return Qg(a),t;i=i.sibling}throw Error(re(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o)throw Error(re(189))}}if(r.alternate!==n)throw Error(re(190))}if(r.tag!==3)throw Error(re(188));return r.stateNode.current===r?e:t}function Jb(e){return e=AC(e),e!==null?Zb(e):null}function Zb(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Zb(e);if(t!==null)return t;e=e.sibling}return null}var ej=wr.unstable_scheduleCallback,Jg=wr.unstable_cancelCallback,TC=wr.unstable_shouldYield,_C=wr.unstable_requestPaint,xt=wr.unstable_now,OC=wr.unstable_getCurrentPriorityLevel,yp=wr.unstable_ImmediatePriority,tj=wr.unstable_UserBlockingPriority,gd=wr.unstable_NormalPriority,MC=wr.unstable_LowPriority,rj=wr.unstable_IdlePriority,du=null,Ts=null;function RC(e){if(Ts&&typeof Ts.onCommitFiberRoot=="function")try{Ts.onCommitFiberRoot(du,e,void 0,(e.current.flags&128)===128)}catch{}}var os=Math.clz32?Math.clz32:IC,PC=Math.log,LC=Math.LN2;function IC(e){return e>>>=0,e===0?32:31-(PC(e)/LC|0)|0}var uc=64,mc=4194304;function wo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function vd(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?n=wo(l):(i&=o,i!==0&&(n=wo(i)))}else o=r&~a,o!==0?n=wo(o):i!==0&&(n=wo(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-os(t),a=1<<r,n|=e[r],t&=~a;return n}function $C(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function FC(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-os(i),l=1<<o,c=a[o];c===-1?(!(l&r)||l&n)&&(a[o]=$C(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Vh(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function sj(){var e=uc;return uc<<=1,!(uc&4194240)&&(uc=64),e}function Dm(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Ml(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-os(t),e[t]=r}function BC(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-os(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function bp(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-os(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var Ve=0;function nj(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var aj,jp,ij,oj,lj,Hh=!1,hc=[],On=null,Mn=null,Rn=null,Ko=new Map,Xo=new Map,Cn=[],zC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zg(e,t){switch(e){case"focusin":case"focusout":On=null;break;case"dragenter":case"dragleave":Mn=null;break;case"mouseover":case"mouseout":Rn=null;break;case"pointerover":case"pointerout":Ko.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xo.delete(t.pointerId)}}function ao(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Pl(t),t!==null&&jp(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function UC(e,t,r,n,a){switch(t){case"focusin":return On=ao(On,e,t,r,n,a),!0;case"dragenter":return Mn=ao(Mn,e,t,r,n,a),!0;case"mouseover":return Rn=ao(Rn,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return Ko.set(i,ao(Ko.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,Xo.set(i,ao(Xo.get(i)||null,e,t,r,n,a)),!0}return!1}function cj(e){var t=ma(e.target);if(t!==null){var r=$a(t);if(r!==null){if(t=r.tag,t===13){if(t=Qb(r),t!==null){e.blockedOn=t,lj(e.priority,function(){ij(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Bc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Wh(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Fh=n,r.target.dispatchEvent(n),Fh=null}else return t=Pl(r),t!==null&&jp(t),e.blockedOn=r,!1;t.shift()}return!0}function e0(e,t,r){Bc(e)&&r.delete(t)}function VC(){Hh=!1,On!==null&&Bc(On)&&(On=null),Mn!==null&&Bc(Mn)&&(Mn=null),Rn!==null&&Bc(Rn)&&(Rn=null),Ko.forEach(e0),Xo.forEach(e0)}function io(e,t){e.blockedOn===t&&(e.blockedOn=null,Hh||(Hh=!0,wr.unstable_scheduleCallback(wr.unstable_NormalPriority,VC)))}function Qo(e){function t(a){return io(a,e)}if(0<hc.length){io(hc[0],e);for(var r=1;r<hc.length;r++){var n=hc[r];n.blockedOn===e&&(n.blockedOn=null)}}for(On!==null&&io(On,e),Mn!==null&&io(Mn,e),Rn!==null&&io(Rn,e),Ko.forEach(t),Xo.forEach(t),r=0;r<Cn.length;r++)n=Cn[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Cn.length&&(r=Cn[0],r.blockedOn===null);)cj(r),r.blockedOn===null&&Cn.shift()}var ci=un.ReactCurrentBatchConfig,yd=!0;function HC(e,t,r,n){var a=Ve,i=ci.transition;ci.transition=null;try{Ve=1,Np(e,t,r,n)}finally{Ve=a,ci.transition=i}}function WC(e,t,r,n){var a=Ve,i=ci.transition;ci.transition=null;try{Ve=4,Np(e,t,r,n)}finally{Ve=a,ci.transition=i}}function Np(e,t,r,n){if(yd){var a=Wh(e,t,r,n);if(a===null)$m(e,t,n,bd,r),Zg(e,n);else if(UC(a,e,t,r,n))n.stopPropagation();else if(Zg(e,n),t&4&&-1<zC.indexOf(e)){for(;a!==null;){var i=Pl(a);if(i!==null&&aj(i),i=Wh(e,t,r,n),i===null&&$m(e,t,n,bd,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else $m(e,t,n,null,r)}}var bd=null;function Wh(e,t,r,n){if(bd=null,e=vp(n),e=ma(e),e!==null)if(t=$a(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Qb(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return bd=e,null}function dj(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(OC()){case yp:return 1;case tj:return 4;case gd:case MC:return 16;case rj:return 536870912;default:return 16}default:return 16}}var kn=null,wp=null,zc=null;function uj(){if(zc)return zc;var e,t=wp,r=t.length,n,a="value"in kn?kn.value:kn.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[i-n];n++);return zc=a.slice(e,1<n?1-n:void 0)}function Uc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function fc(){return!0}function t0(){return!1}function Er(e){function t(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?fc:t0,this.isPropagationStopped=t0,this}return ut(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=fc)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=fc)},persist:function(){},isPersistent:fc}),t}var _i={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sp=Er(_i),Rl=ut({},_i,{view:0,detail:0}),YC=Er(Rl),Am,Tm,oo,uu=ut({},Rl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cp,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==oo&&(oo&&e.type==="mousemove"?(Am=e.screenX-oo.screenX,Tm=e.screenY-oo.screenY):Tm=Am=0,oo=e),Am)},movementY:function(e){return"movementY"in e?e.movementY:Tm}}),r0=Er(uu),qC=ut({},uu,{dataTransfer:0}),GC=Er(qC),KC=ut({},Rl,{relatedTarget:0}),_m=Er(KC),XC=ut({},_i,{animationName:0,elapsedTime:0,pseudoElement:0}),QC=Er(XC),JC=ut({},_i,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ZC=Er(JC),eE=ut({},_i,{data:0}),s0=Er(eE),tE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nE(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=sE[e])?!!t[e]:!1}function Cp(){return nE}var aE=ut({},Rl,{key:function(e){if(e.key){var t=tE[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Uc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?rE[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cp,charCode:function(e){return e.type==="keypress"?Uc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Uc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),iE=Er(aE),oE=ut({},uu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),n0=Er(oE),lE=ut({},Rl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cp}),cE=Er(lE),dE=ut({},_i,{propertyName:0,elapsedTime:0,pseudoElement:0}),uE=Er(dE),mE=ut({},uu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),hE=Er(mE),fE=[9,13,27,32],Ep=sn&&"CompositionEvent"in window,To=null;sn&&"documentMode"in document&&(To=document.documentMode);var pE=sn&&"TextEvent"in window&&!To,mj=sn&&(!Ep||To&&8<To&&11>=To),a0=" ",i0=!1;function hj(e,t){switch(e){case"keyup":return fE.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fj(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ka=!1;function xE(e,t){switch(e){case"compositionend":return fj(t);case"keypress":return t.which!==32?null:(i0=!0,a0);case"textInput":return e=t.data,e===a0&&i0?null:e;default:return null}}function gE(e,t){if(Ka)return e==="compositionend"||!Ep&&hj(e,t)?(e=uj(),zc=wp=kn=null,Ka=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return mj&&t.locale!=="ko"?null:t.data;default:return null}}var vE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function o0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!vE[e.type]:t==="textarea"}function pj(e,t,r,n){Yb(n),t=jd(t,"onChange"),0<t.length&&(r=new Sp("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var _o=null,Jo=null;function yE(e){Ej(e,0)}function mu(e){var t=Ja(e);if(Fb(t))return e}function bE(e,t){if(e==="change")return t}var xj=!1;if(sn){var Om;if(sn){var Mm="oninput"in document;if(!Mm){var l0=document.createElement("div");l0.setAttribute("oninput","return;"),Mm=typeof l0.oninput=="function"}Om=Mm}else Om=!1;xj=Om&&(!document.documentMode||9<document.documentMode)}function c0(){_o&&(_o.detachEvent("onpropertychange",gj),Jo=_o=null)}function gj(e){if(e.propertyName==="value"&&mu(Jo)){var t=[];pj(t,Jo,e,vp(e)),Xb(yE,t)}}function jE(e,t,r){e==="focusin"?(c0(),_o=t,Jo=r,_o.attachEvent("onpropertychange",gj)):e==="focusout"&&c0()}function NE(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return mu(Jo)}function wE(e,t){if(e==="click")return mu(t)}function SE(e,t){if(e==="input"||e==="change")return mu(t)}function CE(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var cs=typeof Object.is=="function"?Object.is:CE;function Zo(e,t){if(cs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!kh.call(t,a)||!cs(e[a],t[a]))return!1}return!0}function d0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function u0(e,t){var r=d0(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=d0(r)}}function vj(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?vj(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function yj(){for(var e=window,t=fd();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=fd(e.document)}return t}function kp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function EE(e){var t=yj(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&vj(r.ownerDocument.documentElement,r)){if(n!==null&&kp(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=u0(r,i);var o=u0(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var kE=sn&&"documentMode"in document&&11>=document.documentMode,Xa=null,Yh=null,Oo=null,qh=!1;function m0(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;qh||Xa==null||Xa!==fd(n)||(n=Xa,"selectionStart"in n&&kp(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Oo&&Zo(Oo,n)||(Oo=n,n=jd(Yh,"onSelect"),0<n.length&&(t=new Sp("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Xa)))}function pc(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Qa={animationend:pc("Animation","AnimationEnd"),animationiteration:pc("Animation","AnimationIteration"),animationstart:pc("Animation","AnimationStart"),transitionend:pc("Transition","TransitionEnd")},Rm={},bj={};sn&&(bj=document.createElement("div").style,"AnimationEvent"in window||(delete Qa.animationend.animation,delete Qa.animationiteration.animation,delete Qa.animationstart.animation),"TransitionEvent"in window||delete Qa.transitionend.transition);function hu(e){if(Rm[e])return Rm[e];if(!Qa[e])return e;var t=Qa[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in bj)return Rm[e]=t[r];return e}var jj=hu("animationend"),Nj=hu("animationiteration"),wj=hu("animationstart"),Sj=hu("transitionend"),Cj=new Map,h0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gn(e,t){Cj.set(e,t),Ia(t,[e])}for(var Pm=0;Pm<h0.length;Pm++){var Lm=h0[Pm],DE=Lm.toLowerCase(),AE=Lm[0].toUpperCase()+Lm.slice(1);Gn(DE,"on"+AE)}Gn(jj,"onAnimationEnd");Gn(Nj,"onAnimationIteration");Gn(wj,"onAnimationStart");Gn("dblclick","onDoubleClick");Gn("focusin","onFocus");Gn("focusout","onBlur");Gn(Sj,"onTransitionEnd");gi("onMouseEnter",["mouseout","mouseover"]);gi("onMouseLeave",["mouseout","mouseover"]);gi("onPointerEnter",["pointerout","pointerover"]);gi("onPointerLeave",["pointerout","pointerover"]);Ia("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ia("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ia("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ia("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ia("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ia("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var So="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),TE=new Set("cancel close invalid load scroll toggle".split(" ").concat(So));function f0(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,DC(n,t,void 0,e),e.currentTarget=null}function Ej(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;f0(a,l,d),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;f0(a,l,d),i=c}}}if(xd)throw e=Uh,xd=!1,Uh=null,e}function Ze(e,t){var r=t[Jh];r===void 0&&(r=t[Jh]=new Set);var n=e+"__bubble";r.has(n)||(kj(t,e,2,!1),r.add(n))}function Im(e,t,r){var n=0;t&&(n|=4),kj(r,e,n,t)}var xc="_reactListening"+Math.random().toString(36).slice(2);function el(e){if(!e[xc]){e[xc]=!0,Rb.forEach(function(r){r!=="selectionchange"&&(TE.has(r)||Im(r,!1,e),Im(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[xc]||(t[xc]=!0,Im("selectionchange",!1,t))}}function kj(e,t,r,n){switch(dj(t)){case 1:var a=HC;break;case 4:a=WC;break;default:a=Np}r=a.bind(null,t,r,e),a=void 0,!zh||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function $m(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=ma(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}Xb(function(){var d=i,u=vp(r),m=[];e:{var h=Cj.get(e);if(h!==void 0){var g=Sp,j=e;switch(e){case"keypress":if(Uc(r)===0)break e;case"keydown":case"keyup":g=iE;break;case"focusin":j="focus",g=_m;break;case"focusout":j="blur",g=_m;break;case"beforeblur":case"afterblur":g=_m;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=r0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=GC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=cE;break;case jj:case Nj:case wj:g=QC;break;case Sj:g=uE;break;case"scroll":g=YC;break;case"wheel":g=hE;break;case"copy":case"cut":case"paste":g=ZC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=n0}var y=(t&4)!==0,v=!y&&e==="scroll",f=y?h!==null?h+"Capture":null:h;y=[];for(var x=d,b;x!==null;){b=x;var N=b.stateNode;if(b.tag===5&&N!==null&&(b=N,f!==null&&(N=Go(x,f),N!=null&&y.push(tl(x,N,b)))),v)break;x=x.return}0<y.length&&(h=new g(h,j,null,r,u),m.push({event:h,listeners:y}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",h&&r!==Fh&&(j=r.relatedTarget||r.fromElement)&&(ma(j)||j[nn]))break e;if((g||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,g?(j=r.relatedTarget||r.toElement,g=d,j=j?ma(j):null,j!==null&&(v=$a(j),j!==v||j.tag!==5&&j.tag!==6)&&(j=null)):(g=null,j=d),g!==j)){if(y=r0,N="onMouseLeave",f="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(y=n0,N="onPointerLeave",f="onPointerEnter",x="pointer"),v=g==null?h:Ja(g),b=j==null?h:Ja(j),h=new y(N,x+"leave",g,r,u),h.target=v,h.relatedTarget=b,N=null,ma(u)===d&&(y=new y(f,x+"enter",j,r,u),y.target=b,y.relatedTarget=v,N=y),v=N,g&&j)t:{for(y=g,f=j,x=0,b=y;b;b=Va(b))x++;for(b=0,N=f;N;N=Va(N))b++;for(;0<x-b;)y=Va(y),x--;for(;0<b-x;)f=Va(f),b--;for(;x--;){if(y===f||f!==null&&y===f.alternate)break t;y=Va(y),f=Va(f)}y=null}else y=null;g!==null&&p0(m,h,g,y,!1),j!==null&&v!==null&&p0(m,v,j,y,!0)}}e:{if(h=d?Ja(d):window,g=h.nodeName&&h.nodeName.toLowerCase(),g==="select"||g==="input"&&h.type==="file")var w=bE;else if(o0(h))if(xj)w=SE;else{w=NE;var S=jE}else(g=h.nodeName)&&g.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(w=wE);if(w&&(w=w(e,d))){pj(m,w,r,u);break e}S&&S(e,h,d),e==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&Rh(h,"number",h.value)}switch(S=d?Ja(d):window,e){case"focusin":(o0(S)||S.contentEditable==="true")&&(Xa=S,Yh=d,Oo=null);break;case"focusout":Oo=Yh=Xa=null;break;case"mousedown":qh=!0;break;case"contextmenu":case"mouseup":case"dragend":qh=!1,m0(m,r,u);break;case"selectionchange":if(kE)break;case"keydown":case"keyup":m0(m,r,u)}var C;if(Ep)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Ka?hj(e,r)&&(k="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(k="onCompositionStart");k&&(mj&&r.locale!=="ko"&&(Ka||k!=="onCompositionStart"?k==="onCompositionEnd"&&Ka&&(C=uj()):(kn=u,wp="value"in kn?kn.value:kn.textContent,Ka=!0)),S=jd(d,k),0<S.length&&(k=new s0(k,e,null,r,u),m.push({event:k,listeners:S}),C?k.data=C:(C=fj(r),C!==null&&(k.data=C)))),(C=pE?xE(e,r):gE(e,r))&&(d=jd(d,"onBeforeInput"),0<d.length&&(u=new s0("onBeforeInput","beforeinput",null,r,u),m.push({event:u,listeners:d}),u.data=C))}Ej(m,t)})}function tl(e,t,r){return{instance:e,listener:t,currentTarget:r}}function jd(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Go(e,r),i!=null&&n.unshift(tl(e,i,a)),i=Go(e,t),i!=null&&n.push(tl(e,i,a))),e=e.return}return n}function Va(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function p0(e,t,r,n,a){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,a?(c=Go(r,i),c!=null&&o.unshift(tl(r,c,l))):a||(c=Go(r,i),c!=null&&o.push(tl(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var _E=/\r\n?/g,OE=/\u0000|\uFFFD/g;function x0(e){return(typeof e=="string"?e:""+e).replace(_E,`
`).replace(OE,"")}function gc(e,t,r){if(t=x0(t),x0(e)!==t&&r)throw Error(re(425))}function Nd(){}var Gh=null,Kh=null;function Xh(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Qh=typeof setTimeout=="function"?setTimeout:void 0,ME=typeof clearTimeout=="function"?clearTimeout:void 0,g0=typeof Promise=="function"?Promise:void 0,RE=typeof queueMicrotask=="function"?queueMicrotask:typeof g0<"u"?function(e){return g0.resolve(null).then(e).catch(PE)}:Qh;function PE(e){setTimeout(function(){throw e})}function Fm(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),Qo(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);Qo(t)}function Pn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function v0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Oi=Math.random().toString(36).slice(2),Es="__reactFiber$"+Oi,rl="__reactProps$"+Oi,nn="__reactContainer$"+Oi,Jh="__reactEvents$"+Oi,LE="__reactListeners$"+Oi,IE="__reactHandles$"+Oi;function ma(e){var t=e[Es];if(t)return t;for(var r=e.parentNode;r;){if(t=r[nn]||r[Es]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=v0(e);e!==null;){if(r=e[Es])return r;e=v0(e)}return t}e=r,r=e.parentNode}return null}function Pl(e){return e=e[Es]||e[nn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ja(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(re(33))}function fu(e){return e[rl]||null}var Zh=[],Za=-1;function Kn(e){return{current:e}}function rt(e){0>Za||(e.current=Zh[Za],Zh[Za]=null,Za--)}function Xe(e,t){Za++,Zh[Za]=e.current,e.current=t}var Hn={},qt=Kn(Hn),dr=Kn(!1),Sa=Hn;function vi(e,t){var r=e.type.contextTypes;if(!r)return Hn;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function ur(e){return e=e.childContextTypes,e!=null}function wd(){rt(dr),rt(qt)}function y0(e,t,r){if(qt.current!==Hn)throw Error(re(168));Xe(qt,t),Xe(dr,r)}function Dj(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(re(108,jC(e)||"Unknown",a));return ut({},r,n)}function Sd(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Hn,Sa=qt.current,Xe(qt,e),Xe(dr,dr.current),!0}function b0(e,t,r){var n=e.stateNode;if(!n)throw Error(re(169));r?(e=Dj(e,t,Sa),n.__reactInternalMemoizedMergedChildContext=e,rt(dr),rt(qt),Xe(qt,e)):rt(dr),Xe(dr,r)}var Ks=null,pu=!1,Bm=!1;function Aj(e){Ks===null?Ks=[e]:Ks.push(e)}function $E(e){pu=!0,Aj(e)}function Xn(){if(!Bm&&Ks!==null){Bm=!0;var e=0,t=Ve;try{var r=Ks;for(Ve=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Ks=null,pu=!1}catch(a){throw Ks!==null&&(Ks=Ks.slice(e+1)),ej(yp,Xn),a}finally{Ve=t,Bm=!1}}return null}var ei=[],ti=0,Cd=null,Ed=0,Lr=[],Ir=0,Ca=null,Xs=1,Qs="";function la(e,t){ei[ti++]=Ed,ei[ti++]=Cd,Cd=e,Ed=t}function Tj(e,t,r){Lr[Ir++]=Xs,Lr[Ir++]=Qs,Lr[Ir++]=Ca,Ca=e;var n=Xs;e=Qs;var a=32-os(n)-1;n&=~(1<<a),r+=1;var i=32-os(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,Xs=1<<32-os(t)+a|r<<a|n,Qs=i+e}else Xs=1<<i|r<<a|n,Qs=e}function Dp(e){e.return!==null&&(la(e,1),Tj(e,1,0))}function Ap(e){for(;e===Cd;)Cd=ei[--ti],ei[ti]=null,Ed=ei[--ti],ei[ti]=null;for(;e===Ca;)Ca=Lr[--Ir],Lr[Ir]=null,Qs=Lr[--Ir],Lr[Ir]=null,Xs=Lr[--Ir],Lr[Ir]=null}var Nr=null,jr=null,it=!1,ns=null;function _j(e,t){var r=Ur(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function j0(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Nr=e,jr=Pn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Nr=e,jr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Ca!==null?{id:Xs,overflow:Qs}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ur(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Nr=e,jr=null,!0):!1;default:return!1}}function ef(e){return(e.mode&1)!==0&&(e.flags&128)===0}function tf(e){if(it){var t=jr;if(t){var r=t;if(!j0(e,t)){if(ef(e))throw Error(re(418));t=Pn(r.nextSibling);var n=Nr;t&&j0(e,t)?_j(n,r):(e.flags=e.flags&-4097|2,it=!1,Nr=e)}}else{if(ef(e))throw Error(re(418));e.flags=e.flags&-4097|2,it=!1,Nr=e}}}function N0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Nr=e}function vc(e){if(e!==Nr)return!1;if(!it)return N0(e),it=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Xh(e.type,e.memoizedProps)),t&&(t=jr)){if(ef(e))throw Oj(),Error(re(418));for(;t;)_j(e,t),t=Pn(t.nextSibling)}if(N0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(re(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){jr=Pn(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}jr=null}}else jr=Nr?Pn(e.stateNode.nextSibling):null;return!0}function Oj(){for(var e=jr;e;)e=Pn(e.nextSibling)}function yi(){jr=Nr=null,it=!1}function Tp(e){ns===null?ns=[e]:ns.push(e)}var FE=un.ReactCurrentBatchConfig;function lo(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(re(309));var n=r.stateNode}if(!n)throw Error(re(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(re(284));if(!r._owner)throw Error(re(290,e))}return e}function yc(e,t){throw e=Object.prototype.toString.call(t),Error(re(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function w0(e){var t=e._init;return t(e._payload)}function Mj(e){function t(f,x){if(e){var b=f.deletions;b===null?(f.deletions=[x],f.flags|=16):b.push(x)}}function r(f,x){if(!e)return null;for(;x!==null;)t(f,x),x=x.sibling;return null}function n(f,x){for(f=new Map;x!==null;)x.key!==null?f.set(x.key,x):f.set(x.index,x),x=x.sibling;return f}function a(f,x){return f=Fn(f,x),f.index=0,f.sibling=null,f}function i(f,x,b){return f.index=b,e?(b=f.alternate,b!==null?(b=b.index,b<x?(f.flags|=2,x):b):(f.flags|=2,x)):(f.flags|=1048576,x)}function o(f){return e&&f.alternate===null&&(f.flags|=2),f}function l(f,x,b,N){return x===null||x.tag!==6?(x=qm(b,f.mode,N),x.return=f,x):(x=a(x,b),x.return=f,x)}function c(f,x,b,N){var w=b.type;return w===Ga?u(f,x,b.props.children,N,b.key):x!==null&&(x.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Nn&&w0(w)===x.type)?(N=a(x,b.props),N.ref=lo(f,x,b),N.return=f,N):(N=Kc(b.type,b.key,b.props,null,f.mode,N),N.ref=lo(f,x,b),N.return=f,N)}function d(f,x,b,N){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=Gm(b,f.mode,N),x.return=f,x):(x=a(x,b.children||[]),x.return=f,x)}function u(f,x,b,N,w){return x===null||x.tag!==7?(x=ya(b,f.mode,N,w),x.return=f,x):(x=a(x,b),x.return=f,x)}function m(f,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return x=qm(""+x,f.mode,b),x.return=f,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case lc:return b=Kc(x.type,x.key,x.props,null,f.mode,b),b.ref=lo(f,null,x),b.return=f,b;case qa:return x=Gm(x,f.mode,b),x.return=f,x;case Nn:var N=x._init;return m(f,N(x._payload),b)}if(No(x)||so(x))return x=ya(x,f.mode,b,null),x.return=f,x;yc(f,x)}return null}function h(f,x,b,N){var w=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return w!==null?null:l(f,x,""+b,N);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case lc:return b.key===w?c(f,x,b,N):null;case qa:return b.key===w?d(f,x,b,N):null;case Nn:return w=b._init,h(f,x,w(b._payload),N)}if(No(b)||so(b))return w!==null?null:u(f,x,b,N,null);yc(f,b)}return null}function g(f,x,b,N,w){if(typeof N=="string"&&N!==""||typeof N=="number")return f=f.get(b)||null,l(x,f,""+N,w);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case lc:return f=f.get(N.key===null?b:N.key)||null,c(x,f,N,w);case qa:return f=f.get(N.key===null?b:N.key)||null,d(x,f,N,w);case Nn:var S=N._init;return g(f,x,b,S(N._payload),w)}if(No(N)||so(N))return f=f.get(b)||null,u(x,f,N,w,null);yc(x,N)}return null}function j(f,x,b,N){for(var w=null,S=null,C=x,k=x=0,A=null;C!==null&&k<b.length;k++){C.index>k?(A=C,C=null):A=C.sibling;var O=h(f,C,b[k],N);if(O===null){C===null&&(C=A);break}e&&C&&O.alternate===null&&t(f,C),x=i(O,x,k),S===null?w=O:S.sibling=O,S=O,C=A}if(k===b.length)return r(f,C),it&&la(f,k),w;if(C===null){for(;k<b.length;k++)C=m(f,b[k],N),C!==null&&(x=i(C,x,k),S===null?w=C:S.sibling=C,S=C);return it&&la(f,k),w}for(C=n(f,C);k<b.length;k++)A=g(C,f,k,b[k],N),A!==null&&(e&&A.alternate!==null&&C.delete(A.key===null?k:A.key),x=i(A,x,k),S===null?w=A:S.sibling=A,S=A);return e&&C.forEach(function(D){return t(f,D)}),it&&la(f,k),w}function y(f,x,b,N){var w=so(b);if(typeof w!="function")throw Error(re(150));if(b=w.call(b),b==null)throw Error(re(151));for(var S=w=null,C=x,k=x=0,A=null,O=b.next();C!==null&&!O.done;k++,O=b.next()){C.index>k?(A=C,C=null):A=C.sibling;var D=h(f,C,O.value,N);if(D===null){C===null&&(C=A);break}e&&C&&D.alternate===null&&t(f,C),x=i(D,x,k),S===null?w=D:S.sibling=D,S=D,C=A}if(O.done)return r(f,C),it&&la(f,k),w;if(C===null){for(;!O.done;k++,O=b.next())O=m(f,O.value,N),O!==null&&(x=i(O,x,k),S===null?w=O:S.sibling=O,S=O);return it&&la(f,k),w}for(C=n(f,C);!O.done;k++,O=b.next())O=g(C,f,k,O.value,N),O!==null&&(e&&O.alternate!==null&&C.delete(O.key===null?k:O.key),x=i(O,x,k),S===null?w=O:S.sibling=O,S=O);return e&&C.forEach(function(I){return t(f,I)}),it&&la(f,k),w}function v(f,x,b,N){if(typeof b=="object"&&b!==null&&b.type===Ga&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case lc:e:{for(var w=b.key,S=x;S!==null;){if(S.key===w){if(w=b.type,w===Ga){if(S.tag===7){r(f,S.sibling),x=a(S,b.props.children),x.return=f,f=x;break e}}else if(S.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Nn&&w0(w)===S.type){r(f,S.sibling),x=a(S,b.props),x.ref=lo(f,S,b),x.return=f,f=x;break e}r(f,S);break}else t(f,S);S=S.sibling}b.type===Ga?(x=ya(b.props.children,f.mode,N,b.key),x.return=f,f=x):(N=Kc(b.type,b.key,b.props,null,f.mode,N),N.ref=lo(f,x,b),N.return=f,f=N)}return o(f);case qa:e:{for(S=b.key;x!==null;){if(x.key===S)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){r(f,x.sibling),x=a(x,b.children||[]),x.return=f,f=x;break e}else{r(f,x);break}else t(f,x);x=x.sibling}x=Gm(b,f.mode,N),x.return=f,f=x}return o(f);case Nn:return S=b._init,v(f,x,S(b._payload),N)}if(No(b))return j(f,x,b,N);if(so(b))return y(f,x,b,N);yc(f,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,x!==null&&x.tag===6?(r(f,x.sibling),x=a(x,b),x.return=f,f=x):(r(f,x),x=qm(b,f.mode,N),x.return=f,f=x),o(f)):r(f,x)}return v}var bi=Mj(!0),Rj=Mj(!1),kd=Kn(null),Dd=null,ri=null,_p=null;function Op(){_p=ri=Dd=null}function Mp(e){var t=kd.current;rt(kd),e._currentValue=t}function rf(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function di(e,t){Dd=e,_p=ri=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(cr=!0),e.firstContext=null)}function Hr(e){var t=e._currentValue;if(_p!==e)if(e={context:e,memoizedValue:t,next:null},ri===null){if(Dd===null)throw Error(re(308));ri=e,Dd.dependencies={lanes:0,firstContext:e}}else ri=ri.next=e;return t}var ha=null;function Rp(e){ha===null?ha=[e]:ha.push(e)}function Pj(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,Rp(t)):(r.next=a.next,a.next=r),t.interleaved=r,an(e,n)}function an(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var wn=!1;function Pp(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Lj(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function en(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ln(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,$e&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,an(e,r)}return a=n.interleaved,a===null?(t.next=t,Rp(n)):(t.next=a.next,a.next=t),n.interleaved=t,an(e,r)}function Vc(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,bp(e,r)}}function S0(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ad(e,t,r,n){var a=e.updateQueue;wn=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(i!==null){var m=a.baseState;o=0,u=d=c=null,l=i;do{var h=l.lane,g=l.eventTime;if((n&h)===h){u!==null&&(u=u.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var j=e,y=l;switch(h=t,g=r,y.tag){case 1:if(j=y.payload,typeof j=="function"){m=j.call(g,m,h);break e}m=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=y.payload,h=typeof j=="function"?j.call(g,m,h):j,h==null)break e;m=ut({},m,h);break e;case 2:wn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[l]:h.push(l))}else g={eventTime:g,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=g,c=m):u=u.next=g,o|=h;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;h=l,l=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(u===null&&(c=m),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);ka|=o,e.lanes=o,e.memoizedState=m}}function C0(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(re(191,a));a.call(n)}}}var Ll={},_s=Kn(Ll),sl=Kn(Ll),nl=Kn(Ll);function fa(e){if(e===Ll)throw Error(re(174));return e}function Lp(e,t){switch(Xe(nl,t),Xe(sl,e),Xe(_s,Ll),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Lh(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Lh(t,e)}rt(_s),Xe(_s,t)}function ji(){rt(_s),rt(sl),rt(nl)}function Ij(e){fa(nl.current);var t=fa(_s.current),r=Lh(t,e.type);t!==r&&(Xe(sl,e),Xe(_s,r))}function Ip(e){sl.current===e&&(rt(_s),rt(sl))}var ct=Kn(0);function Td(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var zm=[];function $p(){for(var e=0;e<zm.length;e++)zm[e]._workInProgressVersionPrimary=null;zm.length=0}var Hc=un.ReactCurrentDispatcher,Um=un.ReactCurrentBatchConfig,Ea=0,dt=null,Nt=null,Dt=null,_d=!1,Mo=!1,al=0,BE=0;function zt(){throw Error(re(321))}function Fp(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!cs(e[r],t[r]))return!1;return!0}function Bp(e,t,r,n,a,i){if(Ea=i,dt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Hc.current=e===null||e.memoizedState===null?HE:WE,e=r(n,a),Mo){i=0;do{if(Mo=!1,al=0,25<=i)throw Error(re(301));i+=1,Dt=Nt=null,t.updateQueue=null,Hc.current=YE,e=r(n,a)}while(Mo)}if(Hc.current=Od,t=Nt!==null&&Nt.next!==null,Ea=0,Dt=Nt=dt=null,_d=!1,t)throw Error(re(300));return e}function zp(){var e=al!==0;return al=0,e}function Ss(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?dt.memoizedState=Dt=e:Dt=Dt.next=e,Dt}function Wr(){if(Nt===null){var e=dt.alternate;e=e!==null?e.memoizedState:null}else e=Nt.next;var t=Dt===null?dt.memoizedState:Dt.next;if(t!==null)Dt=t,Nt=e;else{if(e===null)throw Error(re(310));Nt=e,e={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},Dt===null?dt.memoizedState=Dt=e:Dt=Dt.next=e}return Dt}function il(e,t){return typeof t=="function"?t(e):t}function Vm(e){var t=Wr(),r=t.queue;if(r===null)throw Error(re(311));r.lastRenderedReducer=e;var n=Nt,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((Ea&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=m,o=n):c=c.next=m,dt.lanes|=u,ka|=u}d=d.next}while(d!==null&&d!==i);c===null?o=n:c.next=l,cs(n,t.memoizedState)||(cr=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,dt.lanes|=i,ka|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Hm(e){var t=Wr(),r=t.queue;if(r===null)throw Error(re(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);cs(i,t.memoizedState)||(cr=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function $j(){}function Fj(e,t){var r=dt,n=Wr(),a=t(),i=!cs(n.memoizedState,a);if(i&&(n.memoizedState=a,cr=!0),n=n.queue,Up(Uj.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Dt!==null&&Dt.memoizedState.tag&1){if(r.flags|=2048,ol(9,zj.bind(null,r,n,a,t),void 0,null),Tt===null)throw Error(re(349));Ea&30||Bj(r,t,a)}return a}function Bj(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=dt.updateQueue,t===null?(t={lastEffect:null,stores:null},dt.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function zj(e,t,r,n){t.value=r,t.getSnapshot=n,Vj(t)&&Hj(e)}function Uj(e,t,r){return r(function(){Vj(t)&&Hj(e)})}function Vj(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!cs(e,r)}catch{return!0}}function Hj(e){var t=an(e,1);t!==null&&ls(t,e,1,-1)}function E0(e){var t=Ss();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:il,lastRenderedState:e},t.queue=e,e=e.dispatch=VE.bind(null,dt,e),[t.memoizedState,e]}function ol(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=dt.updateQueue,t===null?(t={lastEffect:null,stores:null},dt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Wj(){return Wr().memoizedState}function Wc(e,t,r,n){var a=Ss();dt.flags|=e,a.memoizedState=ol(1|t,r,void 0,n===void 0?null:n)}function xu(e,t,r,n){var a=Wr();n=n===void 0?null:n;var i=void 0;if(Nt!==null){var o=Nt.memoizedState;if(i=o.destroy,n!==null&&Fp(n,o.deps)){a.memoizedState=ol(t,r,i,n);return}}dt.flags|=e,a.memoizedState=ol(1|t,r,i,n)}function k0(e,t){return Wc(8390656,8,e,t)}function Up(e,t){return xu(2048,8,e,t)}function Yj(e,t){return xu(4,2,e,t)}function qj(e,t){return xu(4,4,e,t)}function Gj(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Kj(e,t,r){return r=r!=null?r.concat([e]):null,xu(4,4,Gj.bind(null,t,e),r)}function Vp(){}function Xj(e,t){var r=Wr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Fp(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Qj(e,t){var r=Wr();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Fp(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Jj(e,t,r){return Ea&21?(cs(r,t)||(r=sj(),dt.lanes|=r,ka|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,cr=!0),e.memoizedState=r)}function zE(e,t){var r=Ve;Ve=r!==0&&4>r?r:4,e(!0);var n=Um.transition;Um.transition={};try{e(!1),t()}finally{Ve=r,Um.transition=n}}function Zj(){return Wr().memoizedState}function UE(e,t,r){var n=$n(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},eN(e))tN(t,r);else if(r=Pj(e,t,r,n),r!==null){var a=rr();ls(r,e,n,a),rN(r,t,n)}}function VE(e,t,r){var n=$n(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(eN(e))tN(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(a.hasEagerState=!0,a.eagerState=l,cs(l,o)){var c=t.interleaved;c===null?(a.next=a,Rp(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=Pj(e,t,a,n),r!==null&&(a=rr(),ls(r,e,n,a),rN(r,t,n))}}function eN(e){var t=e.alternate;return e===dt||t!==null&&t===dt}function tN(e,t){Mo=_d=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function rN(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,bp(e,r)}}var Od={readContext:Hr,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useInsertionEffect:zt,useLayoutEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useMutableSource:zt,useSyncExternalStore:zt,useId:zt,unstable_isNewReconciler:!1},HE={readContext:Hr,useCallback:function(e,t){return Ss().memoizedState=[e,t===void 0?null:t],e},useContext:Hr,useEffect:k0,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Wc(4194308,4,Gj.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Wc(4194308,4,e,t)},useInsertionEffect:function(e,t){return Wc(4,2,e,t)},useMemo:function(e,t){var r=Ss();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Ss();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=UE.bind(null,dt,e),[n.memoizedState,e]},useRef:function(e){var t=Ss();return e={current:e},t.memoizedState=e},useState:E0,useDebugValue:Vp,useDeferredValue:function(e){return Ss().memoizedState=e},useTransition:function(){var e=E0(!1),t=e[0];return e=zE.bind(null,e[1]),Ss().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=dt,a=Ss();if(it){if(r===void 0)throw Error(re(407));r=r()}else{if(r=t(),Tt===null)throw Error(re(349));Ea&30||Bj(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,k0(Uj.bind(null,n,i,e),[e]),n.flags|=2048,ol(9,zj.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=Ss(),t=Tt.identifierPrefix;if(it){var r=Qs,n=Xs;r=(n&~(1<<32-os(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=al++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=BE++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},WE={readContext:Hr,useCallback:Xj,useContext:Hr,useEffect:Up,useImperativeHandle:Kj,useInsertionEffect:Yj,useLayoutEffect:qj,useMemo:Qj,useReducer:Vm,useRef:Wj,useState:function(){return Vm(il)},useDebugValue:Vp,useDeferredValue:function(e){var t=Wr();return Jj(t,Nt.memoizedState,e)},useTransition:function(){var e=Vm(il)[0],t=Wr().memoizedState;return[e,t]},useMutableSource:$j,useSyncExternalStore:Fj,useId:Zj,unstable_isNewReconciler:!1},YE={readContext:Hr,useCallback:Xj,useContext:Hr,useEffect:Up,useImperativeHandle:Kj,useInsertionEffect:Yj,useLayoutEffect:qj,useMemo:Qj,useReducer:Hm,useRef:Wj,useState:function(){return Hm(il)},useDebugValue:Vp,useDeferredValue:function(e){var t=Wr();return Nt===null?t.memoizedState=e:Jj(t,Nt.memoizedState,e)},useTransition:function(){var e=Hm(il)[0],t=Wr().memoizedState;return[e,t]},useMutableSource:$j,useSyncExternalStore:Fj,useId:Zj,unstable_isNewReconciler:!1};function ts(e,t){if(e&&e.defaultProps){t=ut({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function sf(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:ut({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var gu={isMounted:function(e){return(e=e._reactInternals)?$a(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=rr(),a=$n(e),i=en(n,a);i.payload=t,r!=null&&(i.callback=r),t=Ln(e,i,a),t!==null&&(ls(t,e,a,n),Vc(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=rr(),a=$n(e),i=en(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Ln(e,i,a),t!==null&&(ls(t,e,a,n),Vc(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=rr(),n=$n(e),a=en(r,n);a.tag=2,t!=null&&(a.callback=t),t=Ln(e,a,n),t!==null&&(ls(t,e,n,r),Vc(t,e,n))}};function D0(e,t,r,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!Zo(r,n)||!Zo(a,i):!0}function sN(e,t,r){var n=!1,a=Hn,i=t.contextType;return typeof i=="object"&&i!==null?i=Hr(i):(a=ur(t)?Sa:qt.current,n=t.contextTypes,i=(n=n!=null)?vi(e,a):Hn),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=gu,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function A0(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&gu.enqueueReplaceState(t,t.state,null)}function nf(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Pp(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=Hr(i):(i=ur(t)?Sa:qt.current,a.context=vi(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(sf(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&gu.enqueueReplaceState(a,a.state,null),Ad(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Ni(e,t){try{var r="",n=t;do r+=bC(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function Wm(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function af(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var qE=typeof WeakMap=="function"?WeakMap:Map;function nN(e,t,r){r=en(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Rd||(Rd=!0,xf=n),af(e,t)},r}function aN(e,t,r){r=en(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){af(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){af(e,t),typeof n!="function"&&(In===null?In=new Set([this]):In.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function T0(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new qE;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=ok.bind(null,e,t,r),t.then(e,e))}function _0(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function O0(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=en(-1,1),t.tag=2,Ln(r,t,1))),r.lanes|=1),e)}var GE=un.ReactCurrentOwner,cr=!1;function er(e,t,r,n){t.child=e===null?Rj(t,null,r,n):bi(t,e.child,r,n)}function M0(e,t,r,n,a){r=r.render;var i=t.ref;return di(t,a),n=Bp(e,t,r,n,i,a),r=zp(),e!==null&&!cr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,on(e,t,a)):(it&&r&&Dp(t),t.flags|=1,er(e,t,n,a),t.child)}function R0(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!Qp(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,iN(e,t,i,n,a)):(e=Kc(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Zo,r(o,n)&&e.ref===t.ref)return on(e,t,a)}return t.flags|=1,e=Fn(i,n),e.ref=t.ref,e.return=t,t.child=e}function iN(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(Zo(i,n)&&e.ref===t.ref)if(cr=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(cr=!0);else return t.lanes=e.lanes,on(e,t,a)}return of(e,t,r,n,a)}function oN(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe(ni,br),br|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Xe(ni,br),br|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Xe(ni,br),br|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,Xe(ni,br),br|=n;return er(e,t,a,r),t.child}function lN(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function of(e,t,r,n,a){var i=ur(r)?Sa:qt.current;return i=vi(t,i),di(t,a),r=Bp(e,t,r,n,i,a),n=zp(),e!==null&&!cr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,on(e,t,a)):(it&&n&&Dp(t),t.flags|=1,er(e,t,r,a),t.child)}function P0(e,t,r,n,a){if(ur(r)){var i=!0;Sd(t)}else i=!1;if(di(t,a),t.stateNode===null)Yc(e,t),sN(t,r,n),nf(t,r,n,a),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=Hr(d):(d=ur(r)?Sa:qt.current,d=vi(t,d));var u=r.getDerivedStateFromProps,m=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==d)&&A0(t,o,n,d),wn=!1;var h=t.memoizedState;o.state=h,Ad(t,n,o,a),c=t.memoizedState,l!==n||h!==c||dr.current||wn?(typeof u=="function"&&(sf(t,r,u,n),c=t.memoizedState),(l=wn||D0(t,r,l,n,h,c,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=d,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,Lj(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:ts(t.type,l),o.props=d,m=t.pendingProps,h=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Hr(c):(c=ur(r)?Sa:qt.current,c=vi(t,c));var g=r.getDerivedStateFromProps;(u=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||h!==c)&&A0(t,o,n,c),wn=!1,h=t.memoizedState,o.state=h,Ad(t,n,o,a);var j=t.memoizedState;l!==m||h!==j||dr.current||wn?(typeof g=="function"&&(sf(t,r,g,n),j=t.memoizedState),(d=wn||D0(t,r,d,n,h,j,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,j,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,j,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=j),o.props=n,o.state=j,o.context=c,n=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return lf(e,t,r,n,i,a)}function lf(e,t,r,n,a,i){lN(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&b0(t,r,!1),on(e,t,i);n=t.stateNode,GE.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=bi(t,e.child,null,i),t.child=bi(t,null,l,i)):er(e,t,l,i),t.memoizedState=n.state,a&&b0(t,r,!0),t.child}function cN(e){var t=e.stateNode;t.pendingContext?y0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&y0(e,t.context,!1),Lp(e,t.containerInfo)}function L0(e,t,r,n,a){return yi(),Tp(a),t.flags|=256,er(e,t,r,n),t.child}var cf={dehydrated:null,treeContext:null,retryLane:0};function df(e){return{baseLanes:e,cachePool:null,transitions:null}}function dN(e,t,r){var n=t.pendingProps,a=ct.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Xe(ct,a&1),e===null)return tf(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=bu(o,n,0,null),e=ya(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=df(r),t.memoizedState=cf,e):Hp(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return KE(e,t,o,n,l,a,r);if(i){i=n.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Fn(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=Fn(l,i):(i=ya(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?df(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=cf,n}return i=e.child,e=i.sibling,n=Fn(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Hp(e,t){return t=bu({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function bc(e,t,r,n){return n!==null&&Tp(n),bi(t,e.child,null,r),e=Hp(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function KE(e,t,r,n,a,i,o){if(r)return t.flags&256?(t.flags&=-257,n=Wm(Error(re(422))),bc(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=bu({mode:"visible",children:n.children},a,0,null),i=ya(i,a,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&bi(t,e.child,null,o),t.child.memoizedState=df(o),t.memoizedState=cf,i);if(!(t.mode&1))return bc(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(re(419)),n=Wm(i,n,void 0),bc(e,t,o,n)}if(l=(o&e.childLanes)!==0,cr||l){if(n=Tt,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,an(e,a),ls(n,e,a,-1))}return Xp(),n=Wm(Error(re(421))),bc(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=lk.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,jr=Pn(a.nextSibling),Nr=t,it=!0,ns=null,e!==null&&(Lr[Ir++]=Xs,Lr[Ir++]=Qs,Lr[Ir++]=Ca,Xs=e.id,Qs=e.overflow,Ca=t),t=Hp(t,n.children),t.flags|=4096,t)}function I0(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),rf(e.return,t,r)}function Ym(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function uN(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(er(e,t,n.children,r),n=ct.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&I0(e,r,t);else if(e.tag===19)I0(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Xe(ct,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Td(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Ym(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Td(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Ym(t,!0,r,null,i);break;case"together":Ym(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Yc(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function on(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),ka|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(re(153));if(t.child!==null){for(e=t.child,r=Fn(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Fn(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function XE(e,t,r){switch(t.tag){case 3:cN(t),yi();break;case 5:Ij(t);break;case 1:ur(t.type)&&Sd(t);break;case 4:Lp(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;Xe(kd,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Xe(ct,ct.current&1),t.flags|=128,null):r&t.child.childLanes?dN(e,t,r):(Xe(ct,ct.current&1),e=on(e,t,r),e!==null?e.sibling:null);Xe(ct,ct.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return uN(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Xe(ct,ct.current),n)break;return null;case 22:case 23:return t.lanes=0,oN(e,t,r)}return on(e,t,r)}var mN,uf,hN,fN;mN=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};uf=function(){};hN=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,fa(_s.current);var i=null;switch(r){case"input":a=Oh(e,a),n=Oh(e,n),i=[];break;case"select":a=ut({},a,{value:void 0}),n=ut({},n,{value:void 0}),i=[];break;case"textarea":a=Ph(e,a),n=Ph(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Nd)}Ih(r,n);var o;r=null;for(d in a)if(!n.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var l=a[d];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Yo.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(l=a!=null?a[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Yo.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ze("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};fN=function(e,t,r,n){r!==n&&(t.flags|=4)};function co(e,t){if(!it)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ut(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function QE(e,t,r){var n=t.pendingProps;switch(Ap(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(t),null;case 1:return ur(t.type)&&wd(),Ut(t),null;case 3:return n=t.stateNode,ji(),rt(dr),rt(qt),$p(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(vc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ns!==null&&(yf(ns),ns=null))),uf(e,t),Ut(t),null;case 5:Ip(t);var a=fa(nl.current);if(r=t.type,e!==null&&t.stateNode!=null)hN(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(re(166));return Ut(t),null}if(e=fa(_s.current),vc(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Es]=t,n[rl]=i,e=(t.mode&1)!==0,r){case"dialog":Ze("cancel",n),Ze("close",n);break;case"iframe":case"object":case"embed":Ze("load",n);break;case"video":case"audio":for(a=0;a<So.length;a++)Ze(So[a],n);break;case"source":Ze("error",n);break;case"img":case"image":case"link":Ze("error",n),Ze("load",n);break;case"details":Ze("toggle",n);break;case"input":Yg(n,i),Ze("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Ze("invalid",n);break;case"textarea":Gg(n,i),Ze("invalid",n)}Ih(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&gc(n.textContent,l,e),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&gc(n.textContent,l,e),a=["children",""+l]):Yo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ze("scroll",n)}switch(r){case"input":cc(n),qg(n,i,!0);break;case"textarea":cc(n),Kg(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Nd)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ub(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[Es]=t,e[rl]=n,mN(e,t,!1,!1),t.stateNode=e;e:{switch(o=$h(r,n),r){case"dialog":Ze("cancel",e),Ze("close",e),a=n;break;case"iframe":case"object":case"embed":Ze("load",e),a=n;break;case"video":case"audio":for(a=0;a<So.length;a++)Ze(So[a],e);a=n;break;case"source":Ze("error",e),a=n;break;case"img":case"image":case"link":Ze("error",e),Ze("load",e),a=n;break;case"details":Ze("toggle",e),a=n;break;case"input":Yg(e,n),a=Oh(e,n),Ze("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=ut({},n,{value:void 0}),Ze("invalid",e);break;case"textarea":Gg(e,n),a=Ph(e,n),Ze("invalid",e);break;default:a=n}Ih(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Wb(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Vb(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&qo(e,c):typeof c=="number"&&qo(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Yo.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ze("scroll",e):c!=null&&fp(e,i,c,o))}switch(r){case"input":cc(e),qg(e,n,!1);break;case"textarea":cc(e),Kg(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Vn(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?ii(e,!!n.multiple,i,!1):n.defaultValue!=null&&ii(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Nd)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ut(t),null;case 6:if(e&&t.stateNode!=null)fN(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(re(166));if(r=fa(nl.current),fa(_s.current),vc(t)){if(n=t.stateNode,r=t.memoizedProps,n[Es]=t,(i=n.nodeValue!==r)&&(e=Nr,e!==null))switch(e.tag){case 3:gc(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&gc(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Es]=t,t.stateNode=n}return Ut(t),null;case 13:if(rt(ct),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(it&&jr!==null&&t.mode&1&&!(t.flags&128))Oj(),yi(),t.flags|=98560,i=!1;else if(i=vc(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(re(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(re(317));i[Es]=t}else yi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ut(t),i=!1}else ns!==null&&(yf(ns),ns=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||ct.current&1?St===0&&(St=3):Xp())),t.updateQueue!==null&&(t.flags|=4),Ut(t),null);case 4:return ji(),uf(e,t),e===null&&el(t.stateNode.containerInfo),Ut(t),null;case 10:return Mp(t.type._context),Ut(t),null;case 17:return ur(t.type)&&wd(),Ut(t),null;case 19:if(rt(ct),i=t.memoizedState,i===null)return Ut(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)co(i,!1);else{if(St!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Td(e),o!==null){for(t.flags|=128,co(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Xe(ct,ct.current&1|2),t.child}e=e.sibling}i.tail!==null&&xt()>wi&&(t.flags|=128,n=!0,co(i,!1),t.lanes=4194304)}else{if(!n)if(e=Td(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),co(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!it)return Ut(t),null}else 2*xt()-i.renderingStartTime>wi&&r!==1073741824&&(t.flags|=128,n=!0,co(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=xt(),t.sibling=null,r=ct.current,Xe(ct,n?r&1|2:r&1),t):(Ut(t),null);case 22:case 23:return Kp(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?br&1073741824&&(Ut(t),t.subtreeFlags&6&&(t.flags|=8192)):Ut(t),null;case 24:return null;case 25:return null}throw Error(re(156,t.tag))}function JE(e,t){switch(Ap(t),t.tag){case 1:return ur(t.type)&&wd(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ji(),rt(dr),rt(qt),$p(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ip(t),null;case 13:if(rt(ct),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(re(340));yi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return rt(ct),null;case 4:return ji(),null;case 10:return Mp(t.type._context),null;case 22:case 23:return Kp(),null;case 24:return null;default:return null}}var jc=!1,Ht=!1,ZE=typeof WeakSet=="function"?WeakSet:Set,me=null;function si(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){mt(e,t,n)}else r.current=null}function mf(e,t,r){try{r()}catch(n){mt(e,t,n)}}var $0=!1;function ek(e,t){if(Gh=yd,e=yj(),kp(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,d=0,u=0,m=e,h=null;t:for(;;){for(var g;m!==r||a!==0&&m.nodeType!==3||(l=o+a),m!==i||n!==0&&m.nodeType!==3||(c=o+n),m.nodeType===3&&(o+=m.nodeValue.length),(g=m.firstChild)!==null;)h=m,m=g;for(;;){if(m===e)break t;if(h===r&&++d===a&&(l=o),h===i&&++u===n&&(c=o),(g=m.nextSibling)!==null)break;m=h,h=m.parentNode}m=g}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Kh={focusedElem:e,selectionRange:r},yd=!1,me=t;me!==null;)if(t=me,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,me=e;else for(;me!==null;){t=me;try{var j=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var y=j.memoizedProps,v=j.memoizedState,f=t.stateNode,x=f.getSnapshotBeforeUpdate(t.elementType===t.type?y:ts(t.type,y),v);f.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(re(163))}}catch(N){mt(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,me=e;break}me=t.return}return j=$0,$0=!1,j}function Ro(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&mf(t,r,i)}a=a.next}while(a!==n)}}function vu(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function hf(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function pN(e){var t=e.alternate;t!==null&&(e.alternate=null,pN(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Es],delete t[rl],delete t[Jh],delete t[LE],delete t[IE])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function xN(e){return e.tag===5||e.tag===3||e.tag===4}function F0(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||xN(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ff(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Nd));else if(n!==4&&(e=e.child,e!==null))for(ff(e,t,r),e=e.sibling;e!==null;)ff(e,t,r),e=e.sibling}function pf(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(pf(e,t,r),e=e.sibling;e!==null;)pf(e,t,r),e=e.sibling}var Mt=null,rs=!1;function yn(e,t,r){for(r=r.child;r!==null;)gN(e,t,r),r=r.sibling}function gN(e,t,r){if(Ts&&typeof Ts.onCommitFiberUnmount=="function")try{Ts.onCommitFiberUnmount(du,r)}catch{}switch(r.tag){case 5:Ht||si(r,t);case 6:var n=Mt,a=rs;Mt=null,yn(e,t,r),Mt=n,rs=a,Mt!==null&&(rs?(e=Mt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Mt.removeChild(r.stateNode));break;case 18:Mt!==null&&(rs?(e=Mt,r=r.stateNode,e.nodeType===8?Fm(e.parentNode,r):e.nodeType===1&&Fm(e,r),Qo(e)):Fm(Mt,r.stateNode));break;case 4:n=Mt,a=rs,Mt=r.stateNode.containerInfo,rs=!0,yn(e,t,r),Mt=n,rs=a;break;case 0:case 11:case 14:case 15:if(!Ht&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&mf(r,t,o),a=a.next}while(a!==n)}yn(e,t,r);break;case 1:if(!Ht&&(si(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){mt(r,t,l)}yn(e,t,r);break;case 21:yn(e,t,r);break;case 22:r.mode&1?(Ht=(n=Ht)||r.memoizedState!==null,yn(e,t,r),Ht=n):yn(e,t,r);break;default:yn(e,t,r)}}function B0(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new ZE),t.forEach(function(n){var a=ck.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function Zr(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Mt=l.stateNode,rs=!1;break e;case 3:Mt=l.stateNode.containerInfo,rs=!0;break e;case 4:Mt=l.stateNode.containerInfo,rs=!0;break e}l=l.return}if(Mt===null)throw Error(re(160));gN(i,o,a),Mt=null,rs=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){mt(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)vN(t,e),t=t.sibling}function vN(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Zr(t,e),Ns(e),n&4){try{Ro(3,e,e.return),vu(3,e)}catch(y){mt(e,e.return,y)}try{Ro(5,e,e.return)}catch(y){mt(e,e.return,y)}}break;case 1:Zr(t,e),Ns(e),n&512&&r!==null&&si(r,r.return);break;case 5:if(Zr(t,e),Ns(e),n&512&&r!==null&&si(r,r.return),e.flags&32){var a=e.stateNode;try{qo(a,"")}catch(y){mt(e,e.return,y)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Bb(a,i),$h(l,o);var d=$h(l,i);for(o=0;o<c.length;o+=2){var u=c[o],m=c[o+1];u==="style"?Wb(a,m):u==="dangerouslySetInnerHTML"?Vb(a,m):u==="children"?qo(a,m):fp(a,u,m,d)}switch(l){case"input":Mh(a,i);break;case"textarea":zb(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?ii(a,!!i.multiple,g,!1):h!==!!i.multiple&&(i.defaultValue!=null?ii(a,!!i.multiple,i.defaultValue,!0):ii(a,!!i.multiple,i.multiple?[]:"",!1))}a[rl]=i}catch(y){mt(e,e.return,y)}}break;case 6:if(Zr(t,e),Ns(e),n&4){if(e.stateNode===null)throw Error(re(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(y){mt(e,e.return,y)}}break;case 3:if(Zr(t,e),Ns(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Qo(t.containerInfo)}catch(y){mt(e,e.return,y)}break;case 4:Zr(t,e),Ns(e);break;case 13:Zr(t,e),Ns(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(qp=xt())),n&4&&B0(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(Ht=(d=Ht)||u,Zr(t,e),Ht=d):Zr(t,e),Ns(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(me=e,u=e.child;u!==null;){for(m=me=u;me!==null;){switch(h=me,g=h.child,h.tag){case 0:case 11:case 14:case 15:Ro(4,h,h.return);break;case 1:si(h,h.return);var j=h.stateNode;if(typeof j.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,j.props=t.memoizedProps,j.state=t.memoizedState,j.componentWillUnmount()}catch(y){mt(n,r,y)}}break;case 5:si(h,h.return);break;case 22:if(h.memoizedState!==null){U0(m);continue}}g!==null?(g.return=h,me=g):U0(m)}u=u.sibling}e:for(u=null,m=e;;){if(m.tag===5){if(u===null){u=m;try{a=m.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Hb("display",o))}catch(y){mt(e,e.return,y)}}}else if(m.tag===6){if(u===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(y){mt(e,e.return,y)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Zr(t,e),Ns(e),n&4&&B0(e);break;case 21:break;default:Zr(t,e),Ns(e)}}function Ns(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(xN(r)){var n=r;break e}r=r.return}throw Error(re(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(qo(a,""),n.flags&=-33);var i=F0(e);pf(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=F0(e);ff(e,l,o);break;default:throw Error(re(161))}}catch(c){mt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function tk(e,t,r){me=e,yN(e)}function yN(e,t,r){for(var n=(e.mode&1)!==0;me!==null;){var a=me,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||jc;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||Ht;l=jc;var d=Ht;if(jc=o,(Ht=c)&&!d)for(me=a;me!==null;)o=me,c=o.child,o.tag===22&&o.memoizedState!==null?V0(a):c!==null?(c.return=o,me=c):V0(a);for(;i!==null;)me=i,yN(i),i=i.sibling;me=a,jc=l,Ht=d}z0(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,me=i):z0(e)}}function z0(e){for(;me!==null;){var t=me;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ht||vu(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Ht)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:ts(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&C0(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}C0(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var m=u.dehydrated;m!==null&&Qo(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(re(163))}Ht||t.flags&512&&hf(t)}catch(h){mt(t,t.return,h)}}if(t===e){me=null;break}if(r=t.sibling,r!==null){r.return=t.return,me=r;break}me=t.return}}function U0(e){for(;me!==null;){var t=me;if(t===e){me=null;break}var r=t.sibling;if(r!==null){r.return=t.return,me=r;break}me=t.return}}function V0(e){for(;me!==null;){var t=me;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{vu(4,t)}catch(c){mt(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){mt(t,a,c)}}var i=t.return;try{hf(t)}catch(c){mt(t,i,c)}break;case 5:var o=t.return;try{hf(t)}catch(c){mt(t,o,c)}}}catch(c){mt(t,t.return,c)}if(t===e){me=null;break}var l=t.sibling;if(l!==null){l.return=t.return,me=l;break}me=t.return}}var rk=Math.ceil,Md=un.ReactCurrentDispatcher,Wp=un.ReactCurrentOwner,Vr=un.ReactCurrentBatchConfig,$e=0,Tt=null,vt=null,Pt=0,br=0,ni=Kn(0),St=0,ll=null,ka=0,yu=0,Yp=0,Po=null,lr=null,qp=0,wi=1/0,qs=null,Rd=!1,xf=null,In=null,Nc=!1,Dn=null,Pd=0,Lo=0,gf=null,qc=-1,Gc=0;function rr(){return $e&6?xt():qc!==-1?qc:qc=xt()}function $n(e){return e.mode&1?$e&2&&Pt!==0?Pt&-Pt:FE.transition!==null?(Gc===0&&(Gc=sj()),Gc):(e=Ve,e!==0||(e=window.event,e=e===void 0?16:dj(e.type)),e):1}function ls(e,t,r,n){if(50<Lo)throw Lo=0,gf=null,Error(re(185));Ml(e,r,n),(!($e&2)||e!==Tt)&&(e===Tt&&(!($e&2)&&(yu|=r),St===4&&En(e,Pt)),mr(e,n),r===1&&$e===0&&!(t.mode&1)&&(wi=xt()+500,pu&&Xn()))}function mr(e,t){var r=e.callbackNode;FC(e,t);var n=vd(e,e===Tt?Pt:0);if(n===0)r!==null&&Jg(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Jg(r),t===1)e.tag===0?$E(H0.bind(null,e)):Aj(H0.bind(null,e)),RE(function(){!($e&6)&&Xn()}),r=null;else{switch(nj(n)){case 1:r=yp;break;case 4:r=tj;break;case 16:r=gd;break;case 536870912:r=rj;break;default:r=gd}r=kN(r,bN.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function bN(e,t){if(qc=-1,Gc=0,$e&6)throw Error(re(327));var r=e.callbackNode;if(ui()&&e.callbackNode!==r)return null;var n=vd(e,e===Tt?Pt:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Ld(e,n);else{t=n;var a=$e;$e|=2;var i=NN();(Tt!==e||Pt!==t)&&(qs=null,wi=xt()+500,va(e,t));do try{ak();break}catch(l){jN(e,l)}while(!0);Op(),Md.current=i,$e=a,vt!==null?t=0:(Tt=null,Pt=0,t=St)}if(t!==0){if(t===2&&(a=Vh(e),a!==0&&(n=a,t=vf(e,a))),t===1)throw r=ll,va(e,0),En(e,n),mr(e,xt()),r;if(t===6)En(e,n);else{if(a=e.current.alternate,!(n&30)&&!sk(a)&&(t=Ld(e,n),t===2&&(i=Vh(e),i!==0&&(n=i,t=vf(e,i))),t===1))throw r=ll,va(e,0),En(e,n),mr(e,xt()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(re(345));case 2:ca(e,lr,qs);break;case 3:if(En(e,n),(n&130023424)===n&&(t=qp+500-xt(),10<t)){if(vd(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){rr(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Qh(ca.bind(null,e,lr,qs),t);break}ca(e,lr,qs);break;case 4:if(En(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-os(n);i=1<<o,o=t[o],o>a&&(a=o),n&=~i}if(n=a,n=xt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*rk(n/1960))-n,10<n){e.timeoutHandle=Qh(ca.bind(null,e,lr,qs),n);break}ca(e,lr,qs);break;case 5:ca(e,lr,qs);break;default:throw Error(re(329))}}}return mr(e,xt()),e.callbackNode===r?bN.bind(null,e):null}function vf(e,t){var r=Po;return e.current.memoizedState.isDehydrated&&(va(e,t).flags|=256),e=Ld(e,t),e!==2&&(t=lr,lr=r,t!==null&&yf(t)),e}function yf(e){lr===null?lr=e:lr.push.apply(lr,e)}function sk(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!cs(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function En(e,t){for(t&=~Yp,t&=~yu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-os(t),n=1<<r;e[r]=-1,t&=~n}}function H0(e){if($e&6)throw Error(re(327));ui();var t=vd(e,0);if(!(t&1))return mr(e,xt()),null;var r=Ld(e,t);if(e.tag!==0&&r===2){var n=Vh(e);n!==0&&(t=n,r=vf(e,n))}if(r===1)throw r=ll,va(e,0),En(e,t),mr(e,xt()),r;if(r===6)throw Error(re(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ca(e,lr,qs),mr(e,xt()),null}function Gp(e,t){var r=$e;$e|=1;try{return e(t)}finally{$e=r,$e===0&&(wi=xt()+500,pu&&Xn())}}function Da(e){Dn!==null&&Dn.tag===0&&!($e&6)&&ui();var t=$e;$e|=1;var r=Vr.transition,n=Ve;try{if(Vr.transition=null,Ve=1,e)return e()}finally{Ve=n,Vr.transition=r,$e=t,!($e&6)&&Xn()}}function Kp(){br=ni.current,rt(ni)}function va(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,ME(r)),vt!==null)for(r=vt.return;r!==null;){var n=r;switch(Ap(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&wd();break;case 3:ji(),rt(dr),rt(qt),$p();break;case 5:Ip(n);break;case 4:ji();break;case 13:rt(ct);break;case 19:rt(ct);break;case 10:Mp(n.type._context);break;case 22:case 23:Kp()}r=r.return}if(Tt=e,vt=e=Fn(e.current,null),Pt=br=t,St=0,ll=null,Yp=yu=ka=0,lr=Po=null,ha!==null){for(t=0;t<ha.length;t++)if(r=ha[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}ha=null}return e}function jN(e,t){do{var r=vt;try{if(Op(),Hc.current=Od,_d){for(var n=dt.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}_d=!1}if(Ea=0,Dt=Nt=dt=null,Mo=!1,al=0,Wp.current=null,r===null||r.return===null){St=1,ll=t,vt=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=Pt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,m=u.tag;if(!(u.mode&1)&&(m===0||m===11||m===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=_0(o);if(g!==null){g.flags&=-257,O0(g,o,l,i,t),g.mode&1&&T0(i,d,t),t=g,c=d;var j=t.updateQueue;if(j===null){var y=new Set;y.add(c),t.updateQueue=y}else j.add(c);break e}else{if(!(t&1)){T0(i,d,t),Xp();break e}c=Error(re(426))}}else if(it&&l.mode&1){var v=_0(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),O0(v,o,l,i,t),Tp(Ni(c,l));break e}}i=c=Ni(c,l),St!==4&&(St=2),Po===null?Po=[i]:Po.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var f=nN(i,c,t);S0(i,f);break e;case 1:l=c;var x=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(In===null||!In.has(b)))){i.flags|=65536,t&=-t,i.lanes|=t;var N=aN(i,l,t);S0(i,N);break e}}i=i.return}while(i!==null)}SN(r)}catch(w){t=w,vt===r&&r!==null&&(vt=r=r.return);continue}break}while(!0)}function NN(){var e=Md.current;return Md.current=Od,e===null?Od:e}function Xp(){(St===0||St===3||St===2)&&(St=4),Tt===null||!(ka&268435455)&&!(yu&268435455)||En(Tt,Pt)}function Ld(e,t){var r=$e;$e|=2;var n=NN();(Tt!==e||Pt!==t)&&(qs=null,va(e,t));do try{nk();break}catch(a){jN(e,a)}while(!0);if(Op(),$e=r,Md.current=n,vt!==null)throw Error(re(261));return Tt=null,Pt=0,St}function nk(){for(;vt!==null;)wN(vt)}function ak(){for(;vt!==null&&!TC();)wN(vt)}function wN(e){var t=EN(e.alternate,e,br);e.memoizedProps=e.pendingProps,t===null?SN(e):vt=t,Wp.current=null}function SN(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=JE(r,t),r!==null){r.flags&=32767,vt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{St=6,vt=null;return}}else if(r=QE(r,t,br),r!==null){vt=r;return}if(t=t.sibling,t!==null){vt=t;return}vt=t=e}while(t!==null);St===0&&(St=5)}function ca(e,t,r){var n=Ve,a=Vr.transition;try{Vr.transition=null,Ve=1,ik(e,t,r,n)}finally{Vr.transition=a,Ve=n}return null}function ik(e,t,r,n){do ui();while(Dn!==null);if($e&6)throw Error(re(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(re(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(BC(e,i),e===Tt&&(vt=Tt=null,Pt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Nc||(Nc=!0,kN(gd,function(){return ui(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Vr.transition,Vr.transition=null;var o=Ve;Ve=1;var l=$e;$e|=4,Wp.current=null,ek(e,r),vN(r,e),EE(Kh),yd=!!Gh,Kh=Gh=null,e.current=r,tk(r),_C(),$e=l,Ve=o,Vr.transition=i}else e.current=r;if(Nc&&(Nc=!1,Dn=e,Pd=a),i=e.pendingLanes,i===0&&(In=null),RC(r.stateNode),mr(e,xt()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Rd)throw Rd=!1,e=xf,xf=null,e;return Pd&1&&e.tag!==0&&ui(),i=e.pendingLanes,i&1?e===gf?Lo++:(Lo=0,gf=e):Lo=0,Xn(),null}function ui(){if(Dn!==null){var e=nj(Pd),t=Vr.transition,r=Ve;try{if(Vr.transition=null,Ve=16>e?16:e,Dn===null)var n=!1;else{if(e=Dn,Dn=null,Pd=0,$e&6)throw Error(re(331));var a=$e;for($e|=4,me=e.current;me!==null;){var i=me,o=i.child;if(me.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(me=d;me!==null;){var u=me;switch(u.tag){case 0:case 11:case 15:Ro(8,u,i)}var m=u.child;if(m!==null)m.return=u,me=m;else for(;me!==null;){u=me;var h=u.sibling,g=u.return;if(pN(u),u===d){me=null;break}if(h!==null){h.return=g,me=h;break}me=g}}}var j=i.alternate;if(j!==null){var y=j.child;if(y!==null){j.child=null;do{var v=y.sibling;y.sibling=null,y=v}while(y!==null)}}me=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,me=o;else e:for(;me!==null;){if(i=me,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ro(9,i,i.return)}var f=i.sibling;if(f!==null){f.return=i.return,me=f;break e}me=i.return}}var x=e.current;for(me=x;me!==null;){o=me;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,me=b;else e:for(o=x;me!==null;){if(l=me,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:vu(9,l)}}catch(w){mt(l,l.return,w)}if(l===o){me=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,me=N;break e}me=l.return}}if($e=a,Xn(),Ts&&typeof Ts.onPostCommitFiberRoot=="function")try{Ts.onPostCommitFiberRoot(du,e)}catch{}n=!0}return n}finally{Ve=r,Vr.transition=t}}return!1}function W0(e,t,r){t=Ni(r,t),t=nN(e,t,1),e=Ln(e,t,1),t=rr(),e!==null&&(Ml(e,1,t),mr(e,t))}function mt(e,t,r){if(e.tag===3)W0(e,e,r);else for(;t!==null;){if(t.tag===3){W0(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(In===null||!In.has(n))){e=Ni(r,e),e=aN(t,e,1),t=Ln(t,e,1),e=rr(),t!==null&&(Ml(t,1,e),mr(t,e));break}}t=t.return}}function ok(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=rr(),e.pingedLanes|=e.suspendedLanes&r,Tt===e&&(Pt&r)===r&&(St===4||St===3&&(Pt&130023424)===Pt&&500>xt()-qp?va(e,0):Yp|=r),mr(e,t)}function CN(e,t){t===0&&(e.mode&1?(t=mc,mc<<=1,!(mc&130023424)&&(mc=4194304)):t=1);var r=rr();e=an(e,t),e!==null&&(Ml(e,t,r),mr(e,r))}function lk(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),CN(e,r)}function ck(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(re(314))}n!==null&&n.delete(t),CN(e,r)}var EN;EN=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||dr.current)cr=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return cr=!1,XE(e,t,r);cr=!!(e.flags&131072)}else cr=!1,it&&t.flags&1048576&&Tj(t,Ed,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Yc(e,t),e=t.pendingProps;var a=vi(t,qt.current);di(t,r),a=Bp(null,t,n,e,a,r);var i=zp();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ur(n)?(i=!0,Sd(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Pp(t),a.updater=gu,t.stateNode=a,a._reactInternals=t,nf(t,n,e,r),t=lf(null,t,n,!0,i,r)):(t.tag=0,it&&i&&Dp(t),er(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Yc(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=uk(n),e=ts(n,e),a){case 0:t=of(null,t,n,e,r);break e;case 1:t=P0(null,t,n,e,r);break e;case 11:t=M0(null,t,n,e,r);break e;case 14:t=R0(null,t,n,ts(n.type,e),r);break e}throw Error(re(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:ts(n,a),of(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:ts(n,a),P0(e,t,n,a,r);case 3:e:{if(cN(t),e===null)throw Error(re(387));n=t.pendingProps,i=t.memoizedState,a=i.element,Lj(e,t),Ad(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Ni(Error(re(423)),t),t=L0(e,t,n,r,a);break e}else if(n!==a){a=Ni(Error(re(424)),t),t=L0(e,t,n,r,a);break e}else for(jr=Pn(t.stateNode.containerInfo.firstChild),Nr=t,it=!0,ns=null,r=Rj(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(yi(),n===a){t=on(e,t,r);break e}er(e,t,n,r)}t=t.child}return t;case 5:return Ij(t),e===null&&tf(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,Xh(n,a)?o=null:i!==null&&Xh(n,i)&&(t.flags|=32),lN(e,t),er(e,t,o,r),t.child;case 6:return e===null&&tf(t),null;case 13:return dN(e,t,r);case 4:return Lp(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=bi(t,null,n,r):er(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:ts(n,a),M0(e,t,n,a,r);case 7:return er(e,t,t.pendingProps,r),t.child;case 8:return er(e,t,t.pendingProps.children,r),t.child;case 12:return er(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Xe(kd,n._currentValue),n._currentValue=o,i!==null)if(cs(i.value,o)){if(i.children===a.children&&!dr.current){t=on(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=en(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),rf(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(re(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),rf(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}er(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,di(t,r),a=Hr(a),n=n(a),t.flags|=1,er(e,t,n,r),t.child;case 14:return n=t.type,a=ts(n,t.pendingProps),a=ts(n.type,a),R0(e,t,n,a,r);case 15:return iN(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:ts(n,a),Yc(e,t),t.tag=1,ur(n)?(e=!0,Sd(t)):e=!1,di(t,r),sN(t,n,a),nf(t,n,a,r),lf(null,t,n,!0,e,r);case 19:return uN(e,t,r);case 22:return oN(e,t,r)}throw Error(re(156,t.tag))};function kN(e,t){return ej(e,t)}function dk(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ur(e,t,r,n){return new dk(e,t,r,n)}function Qp(e){return e=e.prototype,!(!e||!e.isReactComponent)}function uk(e){if(typeof e=="function")return Qp(e)?1:0;if(e!=null){if(e=e.$$typeof,e===xp)return 11;if(e===gp)return 14}return 2}function Fn(e,t){var r=e.alternate;return r===null?(r=Ur(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Kc(e,t,r,n,a,i){var o=2;if(n=e,typeof e=="function")Qp(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Ga:return ya(r.children,a,i,t);case pp:o=8,a|=8;break;case Dh:return e=Ur(12,r,t,a|2),e.elementType=Dh,e.lanes=i,e;case Ah:return e=Ur(13,r,t,a),e.elementType=Ah,e.lanes=i,e;case Th:return e=Ur(19,r,t,a),e.elementType=Th,e.lanes=i,e;case Ib:return bu(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Pb:o=10;break e;case Lb:o=9;break e;case xp:o=11;break e;case gp:o=14;break e;case Nn:o=16,n=null;break e}throw Error(re(130,e==null?e:typeof e,""))}return t=Ur(o,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function ya(e,t,r,n){return e=Ur(7,e,n,t),e.lanes=r,e}function bu(e,t,r,n){return e=Ur(22,e,n,t),e.elementType=Ib,e.lanes=r,e.stateNode={isHidden:!1},e}function qm(e,t,r){return e=Ur(6,e,null,t),e.lanes=r,e}function Gm(e,t,r){return t=Ur(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function mk(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Dm(0),this.expirationTimes=Dm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dm(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Jp(e,t,r,n,a,i,o,l,c){return e=new mk(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Ur(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pp(i),e}function hk(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qa,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function DN(e){if(!e)return Hn;e=e._reactInternals;e:{if($a(e)!==e||e.tag!==1)throw Error(re(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ur(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(re(171))}if(e.tag===1){var r=e.type;if(ur(r))return Dj(e,r,t)}return t}function AN(e,t,r,n,a,i,o,l,c){return e=Jp(r,n,!0,e,a,i,o,l,c),e.context=DN(null),r=e.current,n=rr(),a=$n(r),i=en(n,a),i.callback=t??null,Ln(r,i,a),e.current.lanes=a,Ml(e,a,n),mr(e,n),e}function ju(e,t,r,n){var a=t.current,i=rr(),o=$n(a);return r=DN(r),t.context===null?t.context=r:t.pendingContext=r,t=en(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Ln(a,t,o),e!==null&&(ls(e,a,o,i),Vc(e,a,o)),o}function Id(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Y0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Zp(e,t){Y0(e,t),(e=e.alternate)&&Y0(e,t)}function fk(){return null}var TN=typeof reportError=="function"?reportError:function(e){console.error(e)};function ex(e){this._internalRoot=e}Nu.prototype.render=ex.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(re(409));ju(e,t,null,null)};Nu.prototype.unmount=ex.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Da(function(){ju(null,e,null,null)}),t[nn]=null}};function Nu(e){this._internalRoot=e}Nu.prototype.unstable_scheduleHydration=function(e){if(e){var t=oj();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Cn.length&&t!==0&&t<Cn[r].priority;r++);Cn.splice(r,0,e),r===0&&cj(e)}};function tx(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function wu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function q0(){}function pk(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var d=Id(o);i.call(d)}}var o=AN(t,n,e,0,null,!1,!1,"",q0);return e._reactRootContainer=o,e[nn]=o.current,el(e.nodeType===8?e.parentNode:e),Da(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var d=Id(c);l.call(d)}}var c=Jp(e,0,!1,null,null,!1,!1,"",q0);return e._reactRootContainer=c,e[nn]=c.current,el(e.nodeType===8?e.parentNode:e),Da(function(){ju(t,c,r,n)}),c}function Su(e,t,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=Id(o);l.call(c)}}ju(t,o,e,a)}else o=pk(r,t,e,a,n);return Id(o)}aj=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=wo(t.pendingLanes);r!==0&&(bp(t,r|1),mr(t,xt()),!($e&6)&&(wi=xt()+500,Xn()))}break;case 13:Da(function(){var n=an(e,1);if(n!==null){var a=rr();ls(n,e,1,a)}}),Zp(e,1)}};jp=function(e){if(e.tag===13){var t=an(e,134217728);if(t!==null){var r=rr();ls(t,e,134217728,r)}Zp(e,134217728)}};ij=function(e){if(e.tag===13){var t=$n(e),r=an(e,t);if(r!==null){var n=rr();ls(r,e,t,n)}Zp(e,t)}};oj=function(){return Ve};lj=function(e,t){var r=Ve;try{return Ve=e,t()}finally{Ve=r}};Bh=function(e,t,r){switch(t){case"input":if(Mh(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=fu(n);if(!a)throw Error(re(90));Fb(n),Mh(n,a)}}}break;case"textarea":zb(e,r);break;case"select":t=r.value,t!=null&&ii(e,!!r.multiple,t,!1)}};Gb=Gp;Kb=Da;var xk={usingClientEntryPoint:!1,Events:[Pl,Ja,fu,Yb,qb,Gp]},uo={findFiberByHostInstance:ma,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gk={bundleType:uo.bundleType,version:uo.version,rendererPackageName:uo.rendererPackageName,rendererConfig:uo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:un.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Jb(e),e===null?null:e.stateNode},findFiberByHostInstance:uo.findFiberByHostInstance||fk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wc.isDisabled&&wc.supportsFiber)try{du=wc.inject(gk),Ts=wc}catch{}}Cr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xk;Cr.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tx(t))throw Error(re(200));return hk(e,t,null,r)};Cr.createRoot=function(e,t){if(!tx(e))throw Error(re(299));var r=!1,n="",a=TN;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Jp(e,1,!1,null,null,r,!1,n,a),e[nn]=t.current,el(e.nodeType===8?e.parentNode:e),new ex(t)};Cr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(re(188)):(e=Object.keys(e).join(","),Error(re(268,e)));return e=Jb(t),e=e===null?null:e.stateNode,e};Cr.flushSync=function(e){return Da(e)};Cr.hydrate=function(e,t,r){if(!wu(t))throw Error(re(200));return Su(null,e,t,!0,r)};Cr.hydrateRoot=function(e,t,r){if(!tx(e))throw Error(re(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=TN;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=AN(t,null,e,1,r??null,a,!1,i,o),e[nn]=t.current,el(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Nu(t)};Cr.render=function(e,t,r){if(!wu(t))throw Error(re(200));return Su(null,e,t,!1,r)};Cr.unmountComponentAtNode=function(e){if(!wu(e))throw Error(re(40));return e._reactRootContainer?(Da(function(){Su(null,null,e,!1,function(){e._reactRootContainer=null,e[nn]=null})}),!0):!1};Cr.unstable_batchedUpdates=Gp;Cr.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!wu(r))throw Error(re(200));if(e==null||e._reactInternals===void 0)throw Error(re(38));return Su(e,t,r,!1,n)};Cr.version="18.3.1-next-f1338f8080-20240426";function _N(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_N)}catch(e){console.error(e)}}_N(),_b.exports=Cr;var pa=_b.exports;const ON=vr(pa);var G0=pa;Eh.createRoot=G0.createRoot,Eh.hydrateRoot=G0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cl(){return cl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cl.apply(this,arguments)}var An;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(An||(An={}));const K0="popstate";function vk(e){e===void 0&&(e={});function t(n,a){let{pathname:i,search:o,hash:l}=n.location;return bf("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:$d(a)}return bk(t,r,null,e)}function gt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function MN(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function yk(){return Math.random().toString(36).substr(2,8)}function X0(e,t){return{usr:e.state,key:e.key,idx:t}}function bf(e,t,r,n){return r===void 0&&(r=null),cl({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Mi(t):t,{state:r,key:t&&t.key||n||yk()})}function $d(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Mi(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function bk(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,l=An.Pop,c=null,d=u();d==null&&(d=0,o.replaceState(cl({},o.state,{idx:d}),""));function u(){return(o.state||{idx:null}).idx}function m(){l=An.Pop;let v=u(),f=v==null?null:v-d;d=v,c&&c({action:l,location:y.location,delta:f})}function h(v,f){l=An.Push;let x=bf(y.location,v,f);d=u()+1;let b=X0(x,d),N=y.createHref(x);try{o.pushState(b,"",N)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;a.location.assign(N)}i&&c&&c({action:l,location:y.location,delta:1})}function g(v,f){l=An.Replace;let x=bf(y.location,v,f);d=u();let b=X0(x,d),N=y.createHref(x);o.replaceState(b,"",N),i&&c&&c({action:l,location:y.location,delta:0})}function j(v){let f=a.location.origin!=="null"?a.location.origin:a.location.href,x=typeof v=="string"?v:$d(v);return x=x.replace(/ $/,"%20"),gt(f,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,f)}let y={get action(){return l},get location(){return e(a,o)},listen(v){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(K0,m),c=v,()=>{a.removeEventListener(K0,m),c=null}},createHref(v){return t(a,v)},createURL:j,encodeLocation(v){let f=j(v);return{pathname:f.pathname,search:f.search,hash:f.hash}},push:h,replace:g,go(v){return o.go(v)}};return y}var Q0;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Q0||(Q0={}));function jk(e,t,r){return r===void 0&&(r="/"),Nk(e,t,r)}function Nk(e,t,r,n){let a=typeof t=="string"?Mi(t):t,i=rx(a.pathname||"/",r);if(i==null)return null;let o=RN(e);wk(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=Pk(i);l=Ok(o[c],d)}return l}function RN(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(gt(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let d=Bn([n,c.relativePath]),u=r.concat(c);i.children&&i.children.length>0&&(gt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),RN(i.children,t,u,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:Tk(d,i.index),routesMeta:u})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let c of PN(i.path))a(i,o,c)}),t}function PN(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=PN(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function wk(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:_k(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const Sk=/^:[\w-]+$/,Ck=3,Ek=2,kk=1,Dk=10,Ak=-2,J0=e=>e==="*";function Tk(e,t){let r=e.split("/"),n=r.length;return r.some(J0)&&(n+=Ak),t&&(n+=Ek),r.filter(a=>!J0(a)).reduce((a,i)=>a+(Sk.test(i)?Ck:i===""?kk:Dk),n)}function _k(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function Ok(e,t,r){let{routesMeta:n}=e,a={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],d=l===n.length-1,u=i==="/"?t:t.slice(i.length)||"/",m=Mk({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),h=c.route;if(!m)return null;Object.assign(a,m.params),o.push({params:a,pathname:Bn([i,m.pathname]),pathnameBase:Fk(Bn([i,m.pathnameBase])),route:h}),m.pathnameBase!=="/"&&(i=Bn([i,m.pathnameBase]))}return o}function Mk(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=Rk(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((d,u,m)=>{let{paramName:h,isOptional:g}=u;if(h==="*"){let y=l[m]||"";o=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const j=l[m];return g&&!j?d[h]=void 0:d[h]=(j||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function Rk(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),MN(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function Pk(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return MN(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function rx(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function Lk(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?Mi(e):e;return{pathname:r?r.startsWith("/")?r:Ik(r,t):t,search:Bk(n),hash:zk(a)}}function Ik(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Km(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function $k(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function sx(e,t){let r=$k(e);return t?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function nx(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=Mi(e):(a=cl({},e),gt(!a.pathname||!a.pathname.includes("?"),Km("?","pathname","search",a)),gt(!a.pathname||!a.pathname.includes("#"),Km("#","pathname","hash",a)),gt(!a.search||!a.search.includes("#"),Km("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=r;else{let m=t.length-1;if(!n&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),m-=1;a.pathname=h.join("/")}l=m>=0?t[m]:"/"}let c=Lk(a,l),d=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const Bn=e=>e.join("/").replace(/\/\/+/g,"/"),Fk=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Bk=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,zk=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Uk(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const LN=["post","put","patch","delete"];new Set(LN);const Vk=["get",...LN];new Set(Vk);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dl(){return dl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dl.apply(this,arguments)}const ax=p.createContext(null),Hk=p.createContext(null),Qn=p.createContext(null),Cu=p.createContext(null),$s=p.createContext({outlet:null,matches:[],isDataRoute:!1}),IN=p.createContext(null);function Wk(e,t){let{relative:r}=t===void 0?{}:t;Ri()||gt(!1);let{basename:n,navigator:a}=p.useContext(Qn),{hash:i,pathname:o,search:l}=FN(e,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:Bn([n,o])),a.createHref({pathname:c,search:l,hash:i})}function Ri(){return p.useContext(Cu)!=null}function Pi(){return Ri()||gt(!1),p.useContext(Cu).location}function $N(e){p.useContext(Qn).static||p.useLayoutEffect(e)}function kr(){let{isDataRoute:e}=p.useContext($s);return e?i4():Yk()}function Yk(){Ri()||gt(!1);let e=p.useContext(ax),{basename:t,future:r,navigator:n}=p.useContext(Qn),{matches:a}=p.useContext($s),{pathname:i}=Pi(),o=JSON.stringify(sx(a,r.v7_relativeSplatPath)),l=p.useRef(!1);return $N(()=>{l.current=!0}),p.useCallback(function(d,u){if(u===void 0&&(u={}),!l.current)return;if(typeof d=="number"){n.go(d);return}let m=nx(d,JSON.parse(o),i,u.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:Bn([t,m.pathname])),(u.replace?n.replace:n.push)(m,u.state,u)},[t,n,o,i,e])}const qk=p.createContext(null);function Gk(e){let t=p.useContext($s).outlet;return t&&p.createElement(qk.Provider,{value:e},t)}function ix(){let{matches:e}=p.useContext($s),t=e[e.length-1];return t?t.params:{}}function FN(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=p.useContext(Qn),{matches:a}=p.useContext($s),{pathname:i}=Pi(),o=JSON.stringify(sx(a,n.v7_relativeSplatPath));return p.useMemo(()=>nx(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function Kk(e,t){return Xk(e,t)}function Xk(e,t,r,n){Ri()||gt(!1);let{navigator:a}=p.useContext(Qn),{matches:i}=p.useContext($s),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=Pi(),u;if(t){var m;let v=typeof t=="string"?Mi(t):t;c==="/"||(m=v.pathname)!=null&&m.startsWith(c)||gt(!1),u=v}else u=d;let h=u.pathname||"/",g=h;if(c!=="/"){let v=c.replace(/^\//,"").split("/");g="/"+h.replace(/^\//,"").split("/").slice(v.length).join("/")}let j=jk(e,{pathname:g}),y=t4(j&&j.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:Bn([c,a.encodeLocation?a.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:Bn([c,a.encodeLocation?a.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,r,n);return t&&y?p.createElement(Cu.Provider,{value:{location:dl({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:An.Pop}},y):y}function Qk(){let e=a4(),t=Uk(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},t),r?p.createElement("pre",{style:a},r):null,null)}const Jk=p.createElement(Qk,null);class Zk extends p.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?p.createElement($s.Provider,{value:this.props.routeContext},p.createElement(IN.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function e4(e){let{routeContext:t,match:r,children:n}=e,a=p.useContext(ax);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),p.createElement($s.Provider,{value:t},n)}function t4(e,t,r,n){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(a=r)==null?void 0:a.errors;if(l!=null){let u=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);u>=0||gt(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let u=0;u<o.length;u++){let m=o[u];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=u),m.route.id){let{loaderData:h,errors:g}=r,j=m.route.loader&&h[m.route.id]===void 0&&(!g||g[m.route.id]===void 0);if(m.route.lazy||j){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((u,m,h)=>{let g,j=!1,y=null,v=null;r&&(g=l&&m.route.id?l[m.route.id]:void 0,y=m.route.errorElement||Jk,c&&(d<0&&h===0?(o4("route-fallback"),j=!0,v=null):d===h&&(j=!0,v=m.route.hydrateFallbackElement||null)));let f=t.concat(o.slice(0,h+1)),x=()=>{let b;return g?b=y:j?b=v:m.route.Component?b=p.createElement(m.route.Component,null):m.route.element?b=m.route.element:b=u,p.createElement(e4,{match:m,routeContext:{outlet:u,matches:f,isDataRoute:r!=null},children:b})};return r&&(m.route.ErrorBoundary||m.route.errorElement||h===0)?p.createElement(Zk,{location:r.location,revalidation:r.revalidation,component:y,error:g,children:x(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):x()},null)}var BN=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(BN||{}),zN=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(zN||{});function r4(e){let t=p.useContext(ax);return t||gt(!1),t}function s4(e){let t=p.useContext(Hk);return t||gt(!1),t}function n4(e){let t=p.useContext($s);return t||gt(!1),t}function UN(e){let t=n4(),r=t.matches[t.matches.length-1];return r.route.id||gt(!1),r.route.id}function a4(){var e;let t=p.useContext(IN),r=s4(),n=UN();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function i4(){let{router:e}=r4(BN.UseNavigateStable),t=UN(zN.UseNavigateStable),r=p.useRef(!1);return $N(()=>{r.current=!0}),p.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,dl({fromRouteId:t},i)))},[e,t])}const Z0={};function o4(e,t,r){Z0[e]||(Z0[e]=!0)}function l4(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function VN(e){let{to:t,replace:r,state:n,relative:a}=e;Ri()||gt(!1);let{future:i,static:o}=p.useContext(Qn),{matches:l}=p.useContext($s),{pathname:c}=Pi(),d=kr(),u=nx(t,sx(l,i.v7_relativeSplatPath),c,a==="path"),m=JSON.stringify(u);return p.useEffect(()=>d(JSON.parse(m),{replace:r,state:n,relative:a}),[d,m,a,r,n]),null}function ox(e){return Gk(e.context)}function he(e){gt(!1)}function c4(e){let{basename:t="/",children:r=null,location:n,navigationType:a=An.Pop,navigator:i,static:o=!1,future:l}=e;Ri()&&gt(!1);let c=t.replace(/^\/*/,"/"),d=p.useMemo(()=>({basename:c,navigator:i,static:o,future:dl({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=Mi(n));let{pathname:u="/",search:m="",hash:h="",state:g=null,key:j="default"}=n,y=p.useMemo(()=>{let v=rx(u,c);return v==null?null:{location:{pathname:v,search:m,hash:h,state:g,key:j},navigationType:a}},[c,u,m,h,g,j,a]);return y==null?null:p.createElement(Qn.Provider,{value:d},p.createElement(Cu.Provider,{children:r,value:y}))}function d4(e){let{children:t,location:r}=e;return Kk(jf(t),r)}new Promise(()=>{});function jf(e,t){t===void 0&&(t=[]);let r=[];return p.Children.forEach(e,(n,a)=>{if(!p.isValidElement(n))return;let i=[...t,a];if(n.type===p.Fragment){r.push.apply(r,jf(n.props.children,i));return}n.type!==he&&gt(!1),!n.props.index||!n.props.children||gt(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=jf(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nf(){return Nf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nf.apply(this,arguments)}function u4(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function m4(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function h4(e,t){return e.button===0&&(!t||t==="_self")&&!m4(e)}const f4=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],p4="6";try{window.__reactRouterVersion=p4}catch{}const x4="startTransition",ev=oC[x4];function g4(e){let{basename:t,children:r,future:n,window:a}=e,i=p.useRef();i.current==null&&(i.current=vk({window:a,v5Compat:!0}));let o=i.current,[l,c]=p.useState({action:o.action,location:o.location}),{v7_startTransition:d}=n||{},u=p.useCallback(m=>{d&&ev?ev(()=>c(m)):c(m)},[c,d]);return p.useLayoutEffect(()=>o.listen(u),[o,u]),p.useEffect(()=>l4(n),[n]),p.createElement(c4,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const v4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",y4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,be=p.forwardRef(function(t,r){let{onClick:n,relative:a,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:m}=t,h=u4(t,f4),{basename:g}=p.useContext(Qn),j,y=!1;if(typeof d=="string"&&y4.test(d)&&(j=d,v4))try{let b=new URL(window.location.href),N=d.startsWith("//")?new URL(b.protocol+d):new URL(d),w=rx(N.pathname,g);N.origin===b.origin&&w!=null?d=w+N.search+N.hash:y=!0}catch{}let v=Wk(d,{relative:a}),f=b4(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:a,viewTransition:m});function x(b){n&&n(b),b.defaultPrevented||f(b)}return p.createElement("a",Nf({},h,{href:j||v,onClick:y||i?n:x,ref:r,target:c}))});var tv;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(tv||(tv={}));var rv;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(rv||(rv={}));function b4(e,t){let{target:r,replace:n,state:a,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=kr(),d=Pi(),u=FN(e,{relative:o});return p.useCallback(m=>{if(h4(m,r)){m.preventDefault();let h=n!==void 0?n:$d(d)===$d(u);c(e,{replace:h,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,u,n,a,r,e,i,o,l])}function HN(e,t){return function(){return e.apply(t,arguments)}}const{toString:j4}=Object.prototype,{getPrototypeOf:lx}=Object,{iterator:Eu,toStringTag:WN}=Symbol,ku=(e=>t=>{const r=j4.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),fs=e=>(e=e.toLowerCase(),t=>ku(t)===e),Du=e=>t=>typeof t===e,{isArray:Li}=Array,ul=Du("undefined");function N4(e){return e!==null&&!ul(e)&&e.constructor!==null&&!ul(e.constructor)&&hr(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const YN=fs("ArrayBuffer");function w4(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&YN(e.buffer),t}const S4=Du("string"),hr=Du("function"),qN=Du("number"),Au=e=>e!==null&&typeof e=="object",C4=e=>e===!0||e===!1,Xc=e=>{if(ku(e)!=="object")return!1;const t=lx(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(WN in e)&&!(Eu in e)},E4=fs("Date"),k4=fs("File"),D4=fs("Blob"),A4=fs("FileList"),T4=e=>Au(e)&&hr(e.pipe),_4=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||hr(e.append)&&((t=ku(e))==="formdata"||t==="object"&&hr(e.toString)&&e.toString()==="[object FormData]"))},O4=fs("URLSearchParams"),[M4,R4,P4,L4]=["ReadableStream","Request","Response","Headers"].map(fs),I4=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Il(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,a;if(typeof e!="object"&&(e=[e]),Li(e))for(n=0,a=e.length;n<a;n++)t.call(null,e[n],n,e);else{const i=r?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let l;for(n=0;n<o;n++)l=i[n],t.call(null,e[l],l,e)}}function GN(e,t){t=t.toLowerCase();const r=Object.keys(e);let n=r.length,a;for(;n-- >0;)if(a=r[n],t===a.toLowerCase())return a;return null}const xa=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,KN=e=>!ul(e)&&e!==xa;function wf(){const{caseless:e}=KN(this)&&this||{},t={},r=(n,a)=>{const i=e&&GN(t,a)||a;Xc(t[i])&&Xc(n)?t[i]=wf(t[i],n):Xc(n)?t[i]=wf({},n):Li(n)?t[i]=n.slice():t[i]=n};for(let n=0,a=arguments.length;n<a;n++)arguments[n]&&Il(arguments[n],r);return t}const $4=(e,t,r,{allOwnKeys:n}={})=>(Il(t,(a,i)=>{r&&hr(a)?e[i]=HN(a,r):e[i]=a},{allOwnKeys:n}),e),F4=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),B4=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},z4=(e,t,r,n)=>{let a,i,o;const l={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),i=a.length;i-- >0;)o=a[i],(!n||n(o,e,t))&&!l[o]&&(t[o]=e[o],l[o]=!0);e=r!==!1&&lx(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},U4=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},V4=e=>{if(!e)return null;if(Li(e))return e;let t=e.length;if(!qN(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},H4=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&lx(Uint8Array)),W4=(e,t)=>{const n=(e&&e[Eu]).call(e);let a;for(;(a=n.next())&&!a.done;){const i=a.value;t.call(e,i[0],i[1])}},Y4=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},q4=fs("HTMLFormElement"),G4=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,a){return n.toUpperCase()+a}),sv=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),K4=fs("RegExp"),XN=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};Il(r,(a,i)=>{let o;(o=t(a,i,e))!==!1&&(n[i]=o||a)}),Object.defineProperties(e,n)},X4=e=>{XN(e,(t,r)=>{if(hr(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(hr(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Q4=(e,t)=>{const r={},n=a=>{a.forEach(i=>{r[i]=!0})};return Li(e)?n(e):n(String(e).split(t)),r},J4=()=>{},Z4=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function eD(e){return!!(e&&hr(e.append)&&e[WN]==="FormData"&&e[Eu])}const tD=e=>{const t=new Array(10),r=(n,a)=>{if(Au(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[a]=n;const i=Li(n)?[]:{};return Il(n,(o,l)=>{const c=r(o,a+1);!ul(c)&&(i[l]=c)}),t[a]=void 0,i}}return n};return r(e,0)},rD=fs("AsyncFunction"),sD=e=>e&&(Au(e)||hr(e))&&hr(e.then)&&hr(e.catch),QN=((e,t)=>e?setImmediate:t?((r,n)=>(xa.addEventListener("message",({source:a,data:i})=>{a===xa&&i===r&&n.length&&n.shift()()},!1),a=>{n.push(a),xa.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",hr(xa.postMessage)),nD=typeof queueMicrotask<"u"?queueMicrotask.bind(xa):typeof process<"u"&&process.nextTick||QN,aD=e=>e!=null&&hr(e[Eu]),J={isArray:Li,isArrayBuffer:YN,isBuffer:N4,isFormData:_4,isArrayBufferView:w4,isString:S4,isNumber:qN,isBoolean:C4,isObject:Au,isPlainObject:Xc,isReadableStream:M4,isRequest:R4,isResponse:P4,isHeaders:L4,isUndefined:ul,isDate:E4,isFile:k4,isBlob:D4,isRegExp:K4,isFunction:hr,isStream:T4,isURLSearchParams:O4,isTypedArray:H4,isFileList:A4,forEach:Il,merge:wf,extend:$4,trim:I4,stripBOM:F4,inherits:B4,toFlatObject:z4,kindOf:ku,kindOfTest:fs,endsWith:U4,toArray:V4,forEachEntry:W4,matchAll:Y4,isHTMLForm:q4,hasOwnProperty:sv,hasOwnProp:sv,reduceDescriptors:XN,freezeMethods:X4,toObjectSet:Q4,toCamelCase:G4,noop:J4,toFiniteNumber:Z4,findKey:GN,global:xa,isContextDefined:KN,isSpecCompliantForm:eD,toJSONObject:tD,isAsyncFn:rD,isThenable:sD,setImmediate:QN,asap:nD,isIterable:aD};function je(e,t,r,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}J.inherits(je,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:J.toJSONObject(this.config),code:this.code,status:this.status}}});const JN=je.prototype,ZN={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{ZN[e]={value:e}});Object.defineProperties(je,ZN);Object.defineProperty(JN,"isAxiosError",{value:!0});je.from=(e,t,r,n,a,i)=>{const o=Object.create(JN);return J.toFlatObject(e,o,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),je.call(o,e.message,t,r,n,a),o.cause=e,o.name=e.name,i&&Object.assign(o,i),o};const iD=null;function Sf(e){return J.isPlainObject(e)||J.isArray(e)}function ew(e){return J.endsWith(e,"[]")?e.slice(0,-2):e}function nv(e,t,r){return e?e.concat(t).map(function(a,i){return a=ew(a),!r&&i?"["+a+"]":a}).join(r?".":""):t}function oD(e){return J.isArray(e)&&!e.some(Sf)}const lD=J.toFlatObject(J,{},null,function(t){return/^is[A-Z]/.test(t)});function Tu(e,t,r){if(!J.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=J.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,v){return!J.isUndefined(v[y])});const n=r.metaTokens,a=r.visitor||u,i=r.dots,o=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&J.isSpecCompliantForm(t);if(!J.isFunction(a))throw new TypeError("visitor must be a function");function d(j){if(j===null)return"";if(J.isDate(j))return j.toISOString();if(J.isBoolean(j))return j.toString();if(!c&&J.isBlob(j))throw new je("Blob is not supported. Use a Buffer instead.");return J.isArrayBuffer(j)||J.isTypedArray(j)?c&&typeof Blob=="function"?new Blob([j]):Buffer.from(j):j}function u(j,y,v){let f=j;if(j&&!v&&typeof j=="object"){if(J.endsWith(y,"{}"))y=n?y:y.slice(0,-2),j=JSON.stringify(j);else if(J.isArray(j)&&oD(j)||(J.isFileList(j)||J.endsWith(y,"[]"))&&(f=J.toArray(j)))return y=ew(y),f.forEach(function(b,N){!(J.isUndefined(b)||b===null)&&t.append(o===!0?nv([y],N,i):o===null?y:y+"[]",d(b))}),!1}return Sf(j)?!0:(t.append(nv(v,y,i),d(j)),!1)}const m=[],h=Object.assign(lD,{defaultVisitor:u,convertValue:d,isVisitable:Sf});function g(j,y){if(!J.isUndefined(j)){if(m.indexOf(j)!==-1)throw Error("Circular reference detected in "+y.join("."));m.push(j),J.forEach(j,function(f,x){(!(J.isUndefined(f)||f===null)&&a.call(t,f,J.isString(x)?x.trim():x,y,h))===!0&&g(f,y?y.concat(x):[x])}),m.pop()}}if(!J.isObject(e))throw new TypeError("data must be an object");return g(e),t}function av(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function cx(e,t){this._pairs=[],e&&Tu(e,this,t)}const tw=cx.prototype;tw.append=function(t,r){this._pairs.push([t,r])};tw.toString=function(t){const r=t?function(n){return t.call(this,n,av)}:av;return this._pairs.map(function(a){return r(a[0])+"="+r(a[1])},"").join("&")};function cD(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function rw(e,t,r){if(!t)return e;const n=r&&r.encode||cD;J.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let i;if(a?i=a(t,r):i=J.isURLSearchParams(t)?t.toString():new cx(t,r).toString(n),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class iv{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){J.forEach(this.handlers,function(n){n!==null&&t(n)})}}const sw={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},dD=typeof URLSearchParams<"u"?URLSearchParams:cx,uD=typeof FormData<"u"?FormData:null,mD=typeof Blob<"u"?Blob:null,hD={isBrowser:!0,classes:{URLSearchParams:dD,FormData:uD,Blob:mD},protocols:["http","https","file","blob","url","data"]},dx=typeof window<"u"&&typeof document<"u",Cf=typeof navigator=="object"&&navigator||void 0,fD=dx&&(!Cf||["ReactNative","NativeScript","NS"].indexOf(Cf.product)<0),pD=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",xD=dx&&window.location.href||"http://localhost",gD=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:dx,hasStandardBrowserEnv:fD,hasStandardBrowserWebWorkerEnv:pD,navigator:Cf,origin:xD},Symbol.toStringTag,{value:"Module"})),Wt={...gD,...hD};function vD(e,t){return Tu(e,new Wt.classes.URLSearchParams,Object.assign({visitor:function(r,n,a,i){return Wt.isNode&&J.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}function yD(e){return J.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function bD(e){const t={},r=Object.keys(e);let n;const a=r.length;let i;for(n=0;n<a;n++)i=r[n],t[i]=e[i];return t}function nw(e){function t(r,n,a,i){let o=r[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=r.length;return o=!o&&J.isArray(a)?a.length:o,c?(J.hasOwnProp(a,o)?a[o]=[a[o],n]:a[o]=n,!l):((!a[o]||!J.isObject(a[o]))&&(a[o]=[]),t(r,n,a[o],i)&&J.isArray(a[o])&&(a[o]=bD(a[o])),!l)}if(J.isFormData(e)&&J.isFunction(e.entries)){const r={};return J.forEachEntry(e,(n,a)=>{t(yD(n),a,r,0)}),r}return null}function jD(e,t,r){if(J.isString(e))try{return(t||JSON.parse)(e),J.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const $l={transitional:sw,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",a=n.indexOf("application/json")>-1,i=J.isObject(t);if(i&&J.isHTMLForm(t)&&(t=new FormData(t)),J.isFormData(t))return a?JSON.stringify(nw(t)):t;if(J.isArrayBuffer(t)||J.isBuffer(t)||J.isStream(t)||J.isFile(t)||J.isBlob(t)||J.isReadableStream(t))return t;if(J.isArrayBufferView(t))return t.buffer;if(J.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return vD(t,this.formSerializer).toString();if((l=J.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Tu(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||a?(r.setContentType("application/json",!1),jD(t)):t}],transformResponse:[function(t){const r=this.transitional||$l.transitional,n=r&&r.forcedJSONParsing,a=this.responseType==="json";if(J.isResponse(t)||J.isReadableStream(t))return t;if(t&&J.isString(t)&&(n&&!this.responseType||a)){const o=!(r&&r.silentJSONParsing)&&a;try{return JSON.parse(t)}catch(l){if(o)throw l.name==="SyntaxError"?je.from(l,je.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Wt.classes.FormData,Blob:Wt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};J.forEach(["delete","get","head","post","put","patch"],e=>{$l.headers[e]={}});const ND=J.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),wD=e=>{const t={};let r,n,a;return e&&e.split(`
`).forEach(function(o){a=o.indexOf(":"),r=o.substring(0,a).trim().toLowerCase(),n=o.substring(a+1).trim(),!(!r||t[r]&&ND[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},ov=Symbol("internals");function mo(e){return e&&String(e).trim().toLowerCase()}function Qc(e){return e===!1||e==null?e:J.isArray(e)?e.map(Qc):String(e)}function SD(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const CD=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Xm(e,t,r,n,a){if(J.isFunction(n))return n.call(this,t,r);if(a&&(t=r),!!J.isString(t)){if(J.isString(n))return t.indexOf(n)!==-1;if(J.isRegExp(n))return n.test(t)}}function ED(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function kD(e,t){const r=J.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(a,i,o){return this[n].call(this,t,a,i,o)},configurable:!0})})}let fr=class{constructor(t){t&&this.set(t)}set(t,r,n){const a=this;function i(l,c,d){const u=mo(c);if(!u)throw new Error("header name must be a non-empty string");const m=J.findKey(a,u);(!m||a[m]===void 0||d===!0||d===void 0&&a[m]!==!1)&&(a[m||c]=Qc(l))}const o=(l,c)=>J.forEach(l,(d,u)=>i(d,u,c));if(J.isPlainObject(t)||t instanceof this.constructor)o(t,r);else if(J.isString(t)&&(t=t.trim())&&!CD(t))o(wD(t),r);else if(J.isObject(t)&&J.isIterable(t)){let l={},c,d;for(const u of t){if(!J.isArray(u))throw TypeError("Object iterator must return a key-value pair");l[d=u[0]]=(c=l[d])?J.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}o(l,r)}else t!=null&&i(r,t,n);return this}get(t,r){if(t=mo(t),t){const n=J.findKey(this,t);if(n){const a=this[n];if(!r)return a;if(r===!0)return SD(a);if(J.isFunction(r))return r.call(this,a,n);if(J.isRegExp(r))return r.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=mo(t),t){const n=J.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||Xm(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let a=!1;function i(o){if(o=mo(o),o){const l=J.findKey(n,o);l&&(!r||Xm(n,n[l],l,r))&&(delete n[l],a=!0)}}return J.isArray(t)?t.forEach(i):i(t),a}clear(t){const r=Object.keys(this);let n=r.length,a=!1;for(;n--;){const i=r[n];(!t||Xm(this,this[i],i,t,!0))&&(delete this[i],a=!0)}return a}normalize(t){const r=this,n={};return J.forEach(this,(a,i)=>{const o=J.findKey(n,i);if(o){r[o]=Qc(a),delete r[i];return}const l=t?ED(i):String(i).trim();l!==i&&delete r[i],r[l]=Qc(a),n[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return J.forEach(this,(n,a)=>{n!=null&&n!==!1&&(r[a]=t&&J.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(a=>n.set(a)),n}static accessor(t){const n=(this[ov]=this[ov]={accessors:{}}).accessors,a=this.prototype;function i(o){const l=mo(o);n[l]||(kD(a,o),n[l]=!0)}return J.isArray(t)?t.forEach(i):i(t),this}};fr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);J.reduceDescriptors(fr.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});J.freezeMethods(fr);function Qm(e,t){const r=this||$l,n=t||r,a=fr.from(n.headers);let i=n.data;return J.forEach(e,function(l){i=l.call(r,i,a.normalize(),t?t.status:void 0)}),a.normalize(),i}function aw(e){return!!(e&&e.__CANCEL__)}function Ii(e,t,r){je.call(this,e??"canceled",je.ERR_CANCELED,t,r),this.name="CanceledError"}J.inherits(Ii,je,{__CANCEL__:!0});function iw(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new je("Request failed with status code "+r.status,[je.ERR_BAD_REQUEST,je.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function DD(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function AD(e,t){e=e||10;const r=new Array(e),n=new Array(e);let a=0,i=0,o;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),u=n[i];o||(o=d),r[a]=c,n[a]=d;let m=i,h=0;for(;m!==a;)h+=r[m++],m=m%e;if(a=(a+1)%e,a===i&&(i=(i+1)%e),d-o<t)return;const g=u&&d-u;return g?Math.round(h*1e3/g):void 0}}function TD(e,t){let r=0,n=1e3/t,a,i;const o=(d,u=Date.now())=>{r=u,a=null,i&&(clearTimeout(i),i=null),e.apply(null,d)};return[(...d)=>{const u=Date.now(),m=u-r;m>=n?o(d,u):(a=d,i||(i=setTimeout(()=>{i=null,o(a)},n-m)))},()=>a&&o(a)]}const Fd=(e,t,r=3)=>{let n=0;const a=AD(50,250);return TD(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-n,d=a(c),u=o<=l;n=o;const m={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&u?(l-o)/d:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(m)},r)},lv=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},cv=e=>(...t)=>J.asap(()=>e(...t)),_D=Wt.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,Wt.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(Wt.origin),Wt.navigator&&/(msie|trident)/i.test(Wt.navigator.userAgent)):()=>!0,OD=Wt.hasStandardBrowserEnv?{write(e,t,r,n,a,i){const o=[e+"="+encodeURIComponent(t)];J.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),J.isString(n)&&o.push("path="+n),J.isString(a)&&o.push("domain="+a),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function MD(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function RD(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function ow(e,t,r){let n=!MD(t);return e&&(n||r==!1)?RD(e,t):t}const dv=e=>e instanceof fr?{...e}:e;function Aa(e,t){t=t||{};const r={};function n(d,u,m,h){return J.isPlainObject(d)&&J.isPlainObject(u)?J.merge.call({caseless:h},d,u):J.isPlainObject(u)?J.merge({},u):J.isArray(u)?u.slice():u}function a(d,u,m,h){if(J.isUndefined(u)){if(!J.isUndefined(d))return n(void 0,d,m,h)}else return n(d,u,m,h)}function i(d,u){if(!J.isUndefined(u))return n(void 0,u)}function o(d,u){if(J.isUndefined(u)){if(!J.isUndefined(d))return n(void 0,d)}else return n(void 0,u)}function l(d,u,m){if(m in t)return n(d,u);if(m in e)return n(void 0,d)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(d,u,m)=>a(dv(d),dv(u),m,!0)};return J.forEach(Object.keys(Object.assign({},e,t)),function(u){const m=c[u]||a,h=m(e[u],t[u],u);J.isUndefined(h)&&m!==l||(r[u]=h)}),r}const lw=e=>{const t=Aa({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:i,headers:o,auth:l}=t;t.headers=o=fr.from(o),t.url=rw(ow(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(J.isFormData(r)){if(Wt.hasStandardBrowserEnv||Wt.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[d,...u]=c?c.split(";").map(m=>m.trim()).filter(Boolean):[];o.setContentType([d||"multipart/form-data",...u].join("; "))}}if(Wt.hasStandardBrowserEnv&&(n&&J.isFunction(n)&&(n=n(t)),n||n!==!1&&_D(t.url))){const d=a&&i&&OD.read(i);d&&o.set(a,d)}return t},PD=typeof XMLHttpRequest<"u",LD=PD&&function(e){return new Promise(function(r,n){const a=lw(e);let i=a.data;const o=fr.from(a.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=a,u,m,h,g,j;function y(){g&&g(),j&&j(),a.cancelToken&&a.cancelToken.unsubscribe(u),a.signal&&a.signal.removeEventListener("abort",u)}let v=new XMLHttpRequest;v.open(a.method.toUpperCase(),a.url,!0),v.timeout=a.timeout;function f(){if(!v)return;const b=fr.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),w={data:!l||l==="text"||l==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:b,config:e,request:v};iw(function(C){r(C),y()},function(C){n(C),y()},w),v=null}"onloadend"in v?v.onloadend=f:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(f)},v.onabort=function(){v&&(n(new je("Request aborted",je.ECONNABORTED,e,v)),v=null)},v.onerror=function(){n(new je("Network Error",je.ERR_NETWORK,e,v)),v=null},v.ontimeout=function(){let N=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const w=a.transitional||sw;a.timeoutErrorMessage&&(N=a.timeoutErrorMessage),n(new je(N,w.clarifyTimeoutError?je.ETIMEDOUT:je.ECONNABORTED,e,v)),v=null},i===void 0&&o.setContentType(null),"setRequestHeader"in v&&J.forEach(o.toJSON(),function(N,w){v.setRequestHeader(w,N)}),J.isUndefined(a.withCredentials)||(v.withCredentials=!!a.withCredentials),l&&l!=="json"&&(v.responseType=a.responseType),d&&([h,j]=Fd(d,!0),v.addEventListener("progress",h)),c&&v.upload&&([m,g]=Fd(c),v.upload.addEventListener("progress",m),v.upload.addEventListener("loadend",g)),(a.cancelToken||a.signal)&&(u=b=>{v&&(n(!b||b.type?new Ii(null,e,v):b),v.abort(),v=null)},a.cancelToken&&a.cancelToken.subscribe(u),a.signal&&(a.signal.aborted?u():a.signal.addEventListener("abort",u)));const x=DD(a.url);if(x&&Wt.protocols.indexOf(x)===-1){n(new je("Unsupported protocol "+x+":",je.ERR_BAD_REQUEST,e));return}v.send(i||null)})},ID=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,a;const i=function(d){if(!a){a=!0,l();const u=d instanceof Error?d:this.reason;n.abort(u instanceof je?u:new Ii(u instanceof Error?u.message:u))}};let o=t&&setTimeout(()=>{o=null,i(new je(`timeout ${t} of ms exceeded`,je.ETIMEDOUT))},t);const l=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),e=null)};e.forEach(d=>d.addEventListener("abort",i));const{signal:c}=n;return c.unsubscribe=()=>J.asap(l),c}},$D=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,a;for(;n<r;)a=n+t,yield e.slice(n,a),n=a},FD=async function*(e,t){for await(const r of BD(e))yield*$D(r,t)},BD=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},uv=(e,t,r,n)=>{const a=FD(e,t);let i=0,o,l=c=>{o||(o=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await a.next();if(d){l(),c.close();return}let m=u.byteLength;if(r){let h=i+=m;r(h)}c.enqueue(new Uint8Array(u))}catch(d){throw l(d),d}},cancel(c){return l(c),a.return()}},{highWaterMark:2})},_u=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",cw=_u&&typeof ReadableStream=="function",zD=_u&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),dw=(e,...t)=>{try{return!!e(...t)}catch{return!1}},UD=cw&&dw(()=>{let e=!1;const t=new Request(Wt.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),mv=64*1024,Ef=cw&&dw(()=>J.isReadableStream(new Response("").body)),Bd={stream:Ef&&(e=>e.body)};_u&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Bd[t]&&(Bd[t]=J.isFunction(e[t])?r=>r[t]():(r,n)=>{throw new je(`Response type '${t}' is not supported`,je.ERR_NOT_SUPPORT,n)})})})(new Response);const VD=async e=>{if(e==null)return 0;if(J.isBlob(e))return e.size;if(J.isSpecCompliantForm(e))return(await new Request(Wt.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(J.isArrayBufferView(e)||J.isArrayBuffer(e))return e.byteLength;if(J.isURLSearchParams(e)&&(e=e+""),J.isString(e))return(await zD(e)).byteLength},HD=async(e,t)=>{const r=J.toFiniteNumber(e.getContentLength());return r??VD(t)},WD=_u&&(async e=>{let{url:t,method:r,data:n,signal:a,cancelToken:i,timeout:o,onDownloadProgress:l,onUploadProgress:c,responseType:d,headers:u,withCredentials:m="same-origin",fetchOptions:h}=lw(e);d=d?(d+"").toLowerCase():"text";let g=ID([a,i&&i.toAbortSignal()],o),j;const y=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let v;try{if(c&&UD&&r!=="get"&&r!=="head"&&(v=await HD(u,n))!==0){let w=new Request(t,{method:"POST",body:n,duplex:"half"}),S;if(J.isFormData(n)&&(S=w.headers.get("content-type"))&&u.setContentType(S),w.body){const[C,k]=lv(v,Fd(cv(c)));n=uv(w.body,mv,C,k)}}J.isString(m)||(m=m?"include":"omit");const f="credentials"in Request.prototype;j=new Request(t,{...h,signal:g,method:r.toUpperCase(),headers:u.normalize().toJSON(),body:n,duplex:"half",credentials:f?m:void 0});let x=await fetch(j,h);const b=Ef&&(d==="stream"||d==="response");if(Ef&&(l||b&&y)){const w={};["status","statusText","headers"].forEach(A=>{w[A]=x[A]});const S=J.toFiniteNumber(x.headers.get("content-length")),[C,k]=l&&lv(S,Fd(cv(l),!0))||[];x=new Response(uv(x.body,mv,C,()=>{k&&k(),y&&y()}),w)}d=d||"text";let N=await Bd[J.findKey(Bd,d)||"text"](x,e);return!b&&y&&y(),await new Promise((w,S)=>{iw(w,S,{data:N,headers:fr.from(x.headers),status:x.status,statusText:x.statusText,config:e,request:j})})}catch(f){throw y&&y(),f&&f.name==="TypeError"&&/Load failed|fetch/i.test(f.message)?Object.assign(new je("Network Error",je.ERR_NETWORK,e,j),{cause:f.cause||f}):je.from(f,f&&f.code,e,j)}}),kf={http:iD,xhr:LD,fetch:WD};J.forEach(kf,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const hv=e=>`- ${e}`,YD=e=>J.isFunction(e)||e===null||e===!1,uw={getAdapter:e=>{e=J.isArray(e)?e:[e];const{length:t}=e;let r,n;const a={};for(let i=0;i<t;i++){r=e[i];let o;if(n=r,!YD(r)&&(n=kf[(o=String(r)).toLowerCase()],n===void 0))throw new je(`Unknown adapter '${o}'`);if(n)break;a[o||"#"+i]=n}if(!n){const i=Object.entries(a).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=t?i.length>1?`since :
`+i.map(hv).join(`
`):" "+hv(i[0]):"as no adapter specified";throw new je("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:kf};function Jm(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ii(null,e)}function fv(e){return Jm(e),e.headers=fr.from(e.headers),e.data=Qm.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),uw.getAdapter(e.adapter||$l.adapter)(e).then(function(n){return Jm(e),n.data=Qm.call(e,e.transformResponse,n),n.headers=fr.from(n.headers),n},function(n){return aw(n)||(Jm(e),n&&n.response&&(n.response.data=Qm.call(e,e.transformResponse,n.response),n.response.headers=fr.from(n.response.headers))),Promise.reject(n)})}const mw="1.10.0",Ou={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Ou[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const pv={};Ou.transitional=function(t,r,n){function a(i,o){return"[Axios v"+mw+"] Transitional option '"+i+"'"+o+(n?". "+n:"")}return(i,o,l)=>{if(t===!1)throw new je(a(o," has been removed"+(r?" in "+r:"")),je.ERR_DEPRECATED);return r&&!pv[o]&&(pv[o]=!0,console.warn(a(o," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,o,l):!0}};Ou.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function qD(e,t,r){if(typeof e!="object")throw new je("options must be an object",je.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let a=n.length;for(;a-- >0;){const i=n[a],o=t[i];if(o){const l=e[i],c=l===void 0||o(l,i,e);if(c!==!0)throw new je("option "+i+" must be "+c,je.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new je("Unknown option "+i,je.ERR_BAD_OPTION)}}const Jc={assertOptions:qD,validators:Ou},ws=Jc.validators;let ba=class{constructor(t){this.defaults=t||{},this.interceptors={request:new iv,response:new iv}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const i=a.stack?a.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Aa(this.defaults,r);const{transitional:n,paramsSerializer:a,headers:i}=r;n!==void 0&&Jc.assertOptions(n,{silentJSONParsing:ws.transitional(ws.boolean),forcedJSONParsing:ws.transitional(ws.boolean),clarifyTimeoutError:ws.transitional(ws.boolean)},!1),a!=null&&(J.isFunction(a)?r.paramsSerializer={serialize:a}:Jc.assertOptions(a,{encode:ws.function,serialize:ws.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Jc.assertOptions(r,{baseUrl:ws.spelling("baseURL"),withXsrfToken:ws.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=i&&J.merge(i.common,i[r.method]);i&&J.forEach(["delete","get","head","post","put","patch","common"],j=>{delete i[j]}),r.headers=fr.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(r)===!1||(c=c&&y.synchronous,l.unshift(y.fulfilled,y.rejected))});const d=[];this.interceptors.response.forEach(function(y){d.push(y.fulfilled,y.rejected)});let u,m=0,h;if(!c){const j=[fv.bind(this),void 0];for(j.unshift.apply(j,l),j.push.apply(j,d),h=j.length,u=Promise.resolve(r);m<h;)u=u.then(j[m++],j[m++]);return u}h=l.length;let g=r;for(m=0;m<h;){const j=l[m++],y=l[m++];try{g=j(g)}catch(v){y.call(this,v);break}}try{u=fv.call(this,g)}catch(j){return Promise.reject(j)}for(m=0,h=d.length;m<h;)u=u.then(d[m++],d[m++]);return u}getUri(t){t=Aa(this.defaults,t);const r=ow(t.baseURL,t.url,t.allowAbsoluteUrls);return rw(r,t.params,t.paramsSerializer)}};J.forEach(["delete","get","head","options"],function(t){ba.prototype[t]=function(r,n){return this.request(Aa(n||{},{method:t,url:r,data:(n||{}).data}))}});J.forEach(["post","put","patch"],function(t){function r(n){return function(i,o,l){return this.request(Aa(l||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}ba.prototype[t]=r(),ba.prototype[t+"Form"]=r(!0)});let GD=class hw{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const n=this;this.promise.then(a=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](a);n._listeners=null}),this.promise.then=a=>{let i;const o=new Promise(l=>{n.subscribe(l),i=l}).then(a);return o.cancel=function(){n.unsubscribe(i)},o},t(function(i,o,l){n.reason||(n.reason=new Ii(i,o,l),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new hw(function(a){t=a}),cancel:t}}};function KD(e){return function(r){return e.apply(null,r)}}function XD(e){return J.isObject(e)&&e.isAxiosError===!0}const Df={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Df).forEach(([e,t])=>{Df[t]=e});function fw(e){const t=new ba(e),r=HN(ba.prototype.request,t);return J.extend(r,ba.prototype,t,{allOwnKeys:!0}),J.extend(r,t,null,{allOwnKeys:!0}),r.create=function(a){return fw(Aa(e,a))},r}const Ie=fw($l);Ie.Axios=ba;Ie.CanceledError=Ii;Ie.CancelToken=GD;Ie.isCancel=aw;Ie.VERSION=mw;Ie.toFormData=Tu;Ie.AxiosError=je;Ie.Cancel=Ie.CanceledError;Ie.all=function(t){return Promise.all(t)};Ie.spread=KD;Ie.isAxiosError=XD;Ie.mergeConfig=Aa;Ie.AxiosHeaders=fr;Ie.formToJSON=e=>nw(J.isHTMLForm(e)?new FormData(e):e);Ie.getAdapter=uw.getAdapter;Ie.HttpStatusCode=Df;Ie.default=Ie;const{Axios:tQ,AxiosError:rQ,CanceledError:sQ,isCancel:nQ,CancelToken:aQ,VERSION:iQ,all:oQ,Cancel:lQ,isAxiosError:cQ,spread:dQ,toFormData:uQ,AxiosHeaders:mQ,HttpStatusCode:hQ,formToJSON:fQ,getAdapter:pQ,mergeConfig:xQ}=Ie,Q=Ie.create({baseURL:"http://localhost:3000/api"});Q.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e});Q.interceptors.response.use(e=>e,e=>(e.response&&(e.response.status===401?(localStorage.removeItem("token"),window.location.href="/login",alert("Sesin expirada o no autorizada. Por favor, inicia sesin de nuevo.")):e.response.status===429&&alert("Demasiados intentos de autenticacin. Espera unos minutos antes de volver a intentarlo.")),Promise.reject(e)));const pw=p.createContext(null),we=()=>{const e=p.useContext(pw);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},QD=({children:e})=>{const[t,r]=p.useState(null),[n,a]=p.useState(!0);p.useEffect(()=>{i()},[]);const i=async()=>{try{const j=localStorage.getItem("token");if(j){const y=await Q.get("/auth/me",{headers:{Authorization:`Bearer ${j}`}});if(y.data&&y.data.role)r(y.data);else throw new Error("Datos de usuario incompletos")}}catch{localStorage.removeItem("token")}finally{a(!1)}},o=async(j,y)=>{var v,f;try{const x=await Q.post("/auth/login",{email:j,password:y}),{token:b,user:N}=x.data;localStorage.setItem("token",b),r({id:N.id,email:N.email,name:N.name,role:N.role})}catch(x){throw new Error(((f=(v=x==null?void 0:x.response)==null?void 0:v.data)==null?void 0:f.message)||"Error en el inicio de sesin")}},l=()=>{localStorage.removeItem("token"),r(null),window.location.href="/login"},c=async j=>{try{const y=await Q.post("/auth/register",j),{token:v,user:f}=y.data;localStorage.setItem("token",v),r(f)}catch{throw new Error("Error en el registro")}},d=p.useMemo(()=>t,[t==null?void 0:t.id,t==null?void 0:t.email,t==null?void 0:t.name,t==null?void 0:t.role]),u=p.useCallback(o,[]),m=p.useCallback(l,[]),h=p.useCallback(c,[]),g=p.useMemo(()=>({user:d,loading:n,login:u,logout:m,register:h}),[d,n,u,m,h]);return s.jsx(pw.Provider,{value:g,children:e})},JD=()=>{const[e,t]=p.useState({}),[r,n]=p.useState(!0),[a,i]=p.useState(null),[o,l]=p.useState(!1);p.useEffect(()=>{o||c()},[o]);const c=async()=>{try{n(!0),i(null);const g=await Q.get("/site-config/public"),j={};g.data.forEach(y=>{j[y.key]=y.value}),t(j),l(!0)}catch(g){console.error("Error fetching site configs:",g),i("Error al cargar las configuraciones del sitio")}finally{n(!1)}};return{configs:e,loading:r,error:a,getConfig:(g,j="")=>e[g]||j,getBooleanConfig:(g,j=!1)=>e[g]==="true"||j,getNumberConfig:(g,j=0)=>{const y=e[g];return y?parseInt(y,10):j},updateConfig:async(g,j)=>{try{return await Q.patch(`/site-config/key/${g}`,{value:j}),t(y=>({...y,[g]:j})),!0}catch(y){return console.error("Error updating config:",y),!1}},refresh:c}},ZD=e=>{const[t,r]=p.useState(null),[n,a]=p.useState(!0),[i,o]=p.useState(null),[l,c]=p.useState(null);p.useEffect(()=>{e&&e!==l?(c(e),d()):!e&&l?(c(null),r(null),a(!1)):!e&&!l&&n&&a(!1)},[e,l,n]);const d=async()=>{if(e)try{a(!0),o(null);const h=await Q.get(`/menu-config/role/${e}`);r(h.data)}catch(h){console.error("Error fetching menu config:",h),o("Error al cargar la configuracin del men"),r(null)}finally{a(!1)}},u=()=>!t||!t.items?[]:t.items.filter(h=>h.isVisible).sort((h,g)=>h.order-g.order),m=()=>(t==null?void 0:t.orientation)||"horizontal";return{menuConfig:t,menuItems:u(),orientation:m(),loading:n,error:i,refresh:d}},e6=e=>{const t=JD(),r=ZD(e);return{siteName:t.getConfig("site_name","Despacho Legal"),siteDescription:t.getConfig("site_description","Servicios legales profesionales"),logoUrl:t.getConfig("logo_url","/images/logo.png"),faviconUrl:t.getConfig("favicon_url","/images/favicon.ico"),primaryColor:t.getConfig("primary_color","#1e40af"),secondaryColor:t.getConfig("secondary_color","#3b82f6"),sidebarPosition:t.getConfig("sidebar_position","left"),sidebarWidth:t.getConfig("sidebar_width","250px"),headerFixed:t.getBooleanConfig("header_fixed",!0),footerVisible:t.getBooleanConfig("footer_visible",!0),contactEmail:t.getConfig("contact_email","info@despacholegal.com"),contactPhone:t.getConfig("contact_phone","+34 123 456 789"),contactAddress:t.getConfig("contact_address","Calle Principal 123, Madrid"),officeHours:t.getConfig("office_hours","Lunes a Viernes: 9:00 - 18:00"),socialFacebook:t.getConfig("social_facebook",""),socialTwitter:t.getConfig("social_twitter",""),socialLinkedin:t.getConfig("social_linkedin",""),socialInstagram:t.getConfig("social_instagram",""),maintenanceMode:t.getBooleanConfig("maintenance_mode",!1),defaultLanguage:t.getConfig("default_language","es"),timezone:t.getConfig("timezone","Europe/Madrid"),dateFormat:t.getConfig("date_format","DD/MM/YYYY"),menuItems:e?r.menuItems:[],menuOrientation:e?r.orientation:"horizontal",loading:t.loading||(e?r.loading:!1),error:t.error||(e?r.error:null),updateSiteConfig:t.updateConfig,refreshSiteConfig:t.refresh,refreshMenuConfig:r.refresh}},t6=()=>{const[e,t]=p.useState([]),[r,n]=p.useState(!0),[a,i]=p.useState(new Set),{user:o}=we(),l=Pi();p.useEffect(()=>{if(!o)return;const u=async()=>{try{n(!0);const h=localStorage.getItem("token"),g=await Q.get("/appointments",{headers:{Authorization:`Bearer ${h}`}});let j=0;try{j=(await Q.get("/chat/unread-count",{headers:{Authorization:`Bearer ${h}`}})).data.count||0}catch{}const y=[],v=new Date,f=new Date(v.getFullYear(),v.getMonth(),v.getDate()),x=new Date(f);if(x.setDate(x.getDate()+1),o.role!=="ADMIN"){const b=g.data.filter(N=>new Date(N.date)>=f);if(b.length>0){const N=b.filter(w=>{const S=new Date(w.date);return S>=f&&S<x});N.length>0?y.push({id:"appointments-today",type:"appointment",count:N.length,title:"Citas de Hoy",description:`Tienes ${N.length} cita${N.length>1?"s":""} programada${N.length>1?"s":""} para hoy`,link:o.role==="CLIENTE"?"/client/appointments":"/lawyer/appointments"}):y.push({id:"appointments-upcoming",type:"appointment",count:b.length,title:"Prximas Citas",description:`Tienes ${b.length} cita${b.length>1?"s":""} programada${b.length>1?"s":""}`,link:o.role==="CLIENTE"?"/client/appointments":"/lawyer/appointments"})}}j>0&&y.push({id:"unread-messages",type:"message",count:j,title:"Mensajes Nuevos",description:`Tienes ${j} mensaje${j>1?"s":""} sin leer`,link:o.role==="CLIENTE"?"/client/chat":"/lawyer/chat"}),t(y)}catch(h){console.error("Error fetching notifications:",h)}finally{n(!1)}};u();const m=setInterval(u,3e4);return()=>clearInterval(m)},[o]),p.useEffect(()=>{const u=new Set(a);e.forEach(m=>{l.pathname===m.link&&u.add(m.id)}),u.size!==a.size&&i(u)},[l.pathname,e,a]);const c=u=>{i(m=>new Set([...m,u]))},d=e.filter(u=>!a.has(u.id));return r||d.length===0?null:s.jsx("div",{className:"fixed top-20 left-4 z-50 space-y-2 max-w-sm",children:d.map(u=>s.jsx("div",{className:`bg-white rounded-lg shadow-lg border-l-4 p-4 transform transition-all duration-300 ${u.type==="appointment"?"border-blue-500":"border-green-500"}`,children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-900",children:u.title}),s.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${u.type==="appointment"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:u.count})]}),s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:u.description}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("a",{href:u.link,className:`text-sm font-medium px-3 py-1 rounded-md transition-colors ${u.type==="appointment"?"bg-blue-100 text-blue-700 hover:bg-blue-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:["Ver ",u.type==="appointment"?"Citas":"Mensajes"]}),s.jsx("button",{onClick:()=>c(u.id),className:"text-sm text-gray-500 hover:text-gray-700 px-2 py-1 rounded-md hover:bg-gray-100",children:"Ocultar"})]})]}),s.jsx("button",{onClick:()=>c(u.id),className:"text-gray-400 hover:text-gray-600 ml-2",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},u.id))})},Io=Ie.create({baseURL:"http://localhost:8000"});Io.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e});Io.interceptors.response.use(e=>e,e=>(console.error("Chatbot API Error:",e),Promise.reject(e)));const r6=({onDateSelect:e,onClose:t,isVisible:r})=>{const[n,a]=p.useState(""),[i,o]=p.useState(""),[l,c]=p.useState([]),[d,u]=p.useState(!1),[m,h]=p.useState(new Date),g=()=>{const w=[],S=new Date;for(let C=1;C<=14;C++){const k=new Date(S);k.setDate(S.getDate()+C),k.getDay()>=1&&k.getDay()<=5&&[9,10,11,12,16,17].forEach(O=>{const D=new Date(k);D.setHours(O,0,0,0),w.push({id:`${k.toISOString().split("T")[0]}-${O}`,date:k.toISOString().split("T")[0],time:`${O}:00`,available:!0,formatted:j(D)})})}return w},j=w=>{const S=["Domingo","Lunes","Martes","Mircoles","Jueves","Viernes","Sbado"],C=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];return`${S[w.getDay()]} ${w.getDate()} de ${C[w.getMonth()]} a las ${w.getHours()}:00`};p.useEffect(()=>{r&&c(g())},[r]);const y=w=>{console.log("handleDateSelect called with:",w),a(w),o("")},v=w=>{console.log("handleTimeSelect called with:",w),o(w)},f=()=>{if(console.log("handleConfirm called with:",{selectedDate:n,selectedTime:i}),!n||!i){console.error("Missing date or time:",{selectedDate:n,selectedTime:i}),alert("Por favor, selecciona una fecha y hora antes de confirmar.");return}if(!/^\d{4}-\d{2}-\d{2}$/.test(n)){console.error("Invalid date format:",n),alert("Formato de fecha invlido. Por favor, selecciona de nuevo.");return}if(!/^\d{1,2}:\d{2}$/.test(i)){console.error("Invalid time format:",i),alert("Formato de hora invlido. Por favor, selecciona de nuevo.");return}console.log("Calling onDateSelect with:",n,i),e(n,i),t()},x=w=>l.filter(S=>S.date===w),b=()=>[...new Set(l.map(w=>w.date))].sort(),N=w=>{const S=new Date(w),C=["Dom","Lun","Mar","Mi","Jue","Vie","Sb"],k=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"];return{day:C[S.getDay()],date:S.getDate(),month:k[S.getMonth()],full:`${C[S.getDay()]} ${S.getDate()} de ${k[S.getMonth()]}`}};return r?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[85vh] flex flex-col",children:[s.jsxs("div",{className:"bg-blue-600 text-white p-4 rounded-t-lg flex-shrink-0",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-lg font-semibold",children:" Selecciona tu cita"}),s.jsx("button",{onClick:t,className:"text-white hover:text-gray-200 text-xl font-bold",children:""})]}),s.jsx("p",{className:"text-blue-100 mt-1 text-sm",children:"Elige la fecha y hora que mejor te convenga"})]}),s.jsxs("div",{className:"flex flex-col lg:flex-row flex-1 overflow-hidden",children:[s.jsxs("div",{className:"lg:w-1/2 p-4 border-r border-gray-200 overflow-y-auto",children:[s.jsx("h3",{className:"text-md font-semibold mb-3 text-gray-800",children:" Fechas disponibles"}),s.jsx("div",{className:"space-y-2",children:b().map(w=>{const S=N(w),C=n===w,k=x(w);return s.jsx("div",{className:`border rounded-lg p-2 cursor-pointer transition-all ${C?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300 hover:bg-gray-50"}`,onClick:()=>y(w),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("div",{className:`text-center min-w-[50px] ${C?"text-blue-600":"text-gray-600"}`,children:[s.jsx("div",{className:"text-xs font-medium",children:S.day}),s.jsx("div",{className:"text-md font-bold",children:S.date}),s.jsx("div",{className:"text-xs",children:S.month})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:`font-medium text-sm ${C?"text-blue-800":"text-gray-800"}`,children:S.full}),s.jsxs("div",{className:"text-xs text-gray-500",children:[k.length," horarios disponibles"]})]})]}),C&&s.jsx("div",{className:"text-blue-600",children:s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]})},w)})})]}),s.jsx("div",{className:"lg:w-1/2 p-4 overflow-y-auto",children:n?s.jsxs(s.Fragment,{children:[s.jsx("h3",{className:"text-md font-semibold mb-3 text-gray-800",children:" Horarios disponibles"}),s.jsx("div",{className:"mb-3 p-2 bg-blue-50 rounded-lg",children:s.jsxs("p",{className:"text-blue-800 font-medium text-sm",children:["Fecha seleccionada: ",N(n).full]})}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:x(n).map(w=>s.jsxs("button",{onClick:()=>v(w.time),className:`p-3 border rounded-lg text-center transition-all ${i===w.time?"border-blue-500 bg-blue-500 text-white":"border-gray-200 hover:border-blue-300 hover:bg-blue-50"}`,children:[s.jsx("div",{className:"text-md font-semibold",children:w.time}),s.jsx("div",{className:"text-xs opacity-75",children:"Disponible"})]},w.id))}),i&&s.jsxs("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:[s.jsx("h4",{className:"font-semibold text-green-800 mb-1 text-sm",children:" Cita seleccionada"}),s.jsxs("p",{className:"text-green-700 text-sm",children:[N(n).full," a las ",i]})]})]}):s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsxs("div",{className:"text-center text-gray-500",children:[s.jsx("svg",{className:"w-12 h-12 mx-auto mb-3 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("p",{className:"text-sm",children:"Selecciona una fecha para ver los horarios disponibles"})]})})})]}),s.jsx("div",{className:"bg-gray-50 p-3 border-t border-gray-200 flex-shrink-0",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors text-sm",children:"Cancelar"}),s.jsx("button",{onClick:f,disabled:!n||!i,className:`px-4 py-2 rounded-lg font-medium transition-colors text-sm ${n&&i?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"Confirmar Cita"})]})})]})}):null},s6=()=>{const[e,t]=p.useState(!1),[r,n]=p.useState([]),[a,i]=p.useState(""),[o,l]=p.useState(!1),[c,d]=p.useState(null),[u,m]=p.useState(!1),[h,g]=p.useState(null),j=p.useRef(null),y=p.useRef(null),v=p.useRef("user_"+Math.random().toString(36).substring(2,12)),f=p.useRef(null),x=p.useRef(null);p.useEffect(()=>{e&&r.length===0&&n([{text:"Hola! Soy el asistente virtual del despacho legal. En qu puedo ayudarte hoy?",isUser:!1,timestamp:new Date().toISOString()}])},[e,r.length]),p.useEffect(()=>{N()},[r]),p.useEffect(()=>{e&&y.current&&!u&&setTimeout(()=>{var O;(O=y.current)==null||O.focus()},100)},[e,u]);const b=()=>{f.current&&clearTimeout(f.current),x.current&&clearTimeout(x.current),e&&!u&&(x.current=setTimeout(()=>{e&&!u&&n(O=>[...O,{text:" No hay actividad. El chat se cerrar automticamente en 10 segundos si no respondes.",isUser:!1,timestamp:new Date().toISOString()}])},5e4),f.current=setTimeout(()=>{e&&!u&&w()},6e4))};p.useEffect(()=>(e&&r.length>0&&!u&&b(),()=>{f.current&&clearTimeout(f.current),x.current&&clearTimeout(x.current)}),[r,e,u]);const N=()=>{var O;(O=j.current)==null||O.scrollIntoView({behavior:"smooth"})},w=async()=>{f.current&&clearTimeout(f.current),x.current&&clearTimeout(x.current);try{await Io.post("/end_chat",{user_id:v.current})}catch{}n([]),i(""),d(null),t(!1),m(!1),g(null),setTimeout(()=>{alert("El chat ha finalizado.")},100)},S=async(O,D)=>{if(console.log("handleDateSelect called with:",{date:O,time:D}),!O||!D||O.trim()===""||D.trim()===""){console.error("Invalid date or time:",{date:O,time:D});const I={text:"Error: Fecha o hora no vlida. Por favor, selecciona de nuevo.",isUser:!1,timestamp:new Date().toISOString()};n(M=>[...M,I]);return}m(!1);try{if(!/^\d{4}-\d{2}-\d{2}$/.test(O))throw new Error(`Invalid date format: ${O}. Expected YYYY-MM-DD`);if(!/^\d{1,2}:\d{2}$/.test(D))throw new Error(`Invalid time format: ${D}. Expected HH:MM`);const E=`${O}T${D}:00`;console.log("selectedDateTime:",E);const L=new Date(E);if(console.log("formattedDate:",L),isNaN(L.getTime()))throw new Error(`Invalid date: ${E}`);const V=["Domingo","Lunes","Martes","Mircoles","Jueves","Viernes","Sbado"],G=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],W=V[L.getDay()],_=L.getDate(),T=G[L.getMonth()];if(!W||!T||isNaN(_))throw new Error(`Invalid date components: day=${W}, month=${T}, date=${_}`);const R=`${W} ${_} de ${T} a las ${D}`;console.log("formattedDateStr:",R);const B={text:`He seleccionado: ${R}`,isUser:!0,timestamp:new Date().toISOString()};n(F=>[...F,B]),l(!0);const X={text:(await Io.post("/chat",{text:R,language:"es",user_id:v.current})).data.response,isUser:!1,timestamp:new Date().toISOString()};n(F=>[...F,X])}catch(I){console.error("Error in handleDateSelect:",I);const E={text:`Lo siento, hubo un problema al procesar tu seleccin: ${I.message||"Error desconocido"}. Por favor, intenta de nuevo.`,isUser:!1,timestamp:new Date().toISOString()};n(L=>[...L,E])}finally{l(!1)}},C=async O=>{if(O.preventDefault(),!a.trim()||o)return;const D=a.trim();i(""),l(!0),d(null);const I={text:D,isUser:!0,timestamp:new Date().toISOString()};n(M=>[...M,I]);try{const E=(await Io.post("/chat",{text:D,language:"es",user_id:v.current})).data.response,L=["si","s","vale","ok","claro","jj","a","x","123","abc","xyz"],V=E.includes("Para ayudarte mejor")&&E.includes("En qu puedo ayudarte?")&&(D.length<10||L.includes(D.toLowerCase()));let G=E;V&&(G=`**Has indicado:** "${D}"

${E}`);const W={text:G,isUser:!1,timestamp:new Date().toISOString()};n(_=>[..._,W]),E.includes("Qu fecha prefieres para tu consulta?")&&E.includes("Opciones disponibles:")&&E.includes("Responde con el nmero de la opcin que prefieras")&&m(!0)}catch(M){console.error("Error sending message:",M),d("Error al enviar el mensaje. Por favor, intenta de nuevo.");const E={text:"Lo siento, estoy teniendo problemas para procesar tu mensaje. Por favor, intenta de nuevo o contacta directamente al despacho.",isUser:!1,timestamp:new Date().toISOString()};n(L=>[...L,E])}finally{l(!1),u||setTimeout(()=>{var M;(M=y.current)==null||M.focus()},100)}},k=()=>{t(!e),e||(d(null),m(!1),g(null),f.current&&clearTimeout(f.current),x.current&&clearTimeout(x.current))},A=O=>new Date(O).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"});return s.jsxs("div",{className:"fixed bottom-4 right-4 z-50",children:[s.jsx("button",{onClick:k,className:"bg-blue-600 hover:bg-blue-700 text-white rounded-full p-4 shadow-lg transition-all duration-200",title:"Chat del despacho",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),s.jsx(r6,{isVisible:u,onDateSelect:S,onClose:()=>m(!1)}),e&&s.jsxs("div",{className:"absolute bottom-16 right-0 w-96 h-96 bg-white rounded-lg shadow-xl border border-gray-200 flex flex-col",children:[s.jsxs("div",{className:"bg-blue-600 text-white p-4 rounded-t-lg",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h3",{className:"font-semibold",children:"Asistente Virtual"}),s.jsx("button",{onClick:k,className:"text-white hover:text-gray-200",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("p",{className:"text-sm opacity-90",children:"Despacho Legal"})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[r.map((O,D)=>s.jsx("div",{className:`flex ${O.isUser?"justify-end":"justify-start"}`,children:s.jsxs("div",{className:`max-w-xs px-3 py-2 rounded-lg ${O.isUser?"bg-blue-600 text-white":"bg-gray-100 text-gray-800"}`,children:[s.jsx("p",{className:"text-sm",children:O.text}),s.jsx("p",{className:`text-xs mt-1 ${O.isUser?"text-blue-100":"text-gray-500"}`,children:A(O.timestamp)})]})},D)),o&&s.jsx("div",{className:"flex justify-start",children:s.jsx("div",{className:"bg-gray-100 text-gray-800 max-w-xs px-3 py-2 rounded-lg",children:s.jsxs("div",{className:"flex space-x-1",children:[s.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),s.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),s.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),c&&s.jsx("div",{className:"flex justify-start",children:s.jsx("div",{className:"bg-red-100 text-red-800 max-w-xs px-3 py-2 rounded-lg",children:s.jsx("p",{className:"text-sm",children:c})})}),s.jsx("div",{ref:j})]}),s.jsx("form",{onSubmit:C,className:"p-4 border-t border-gray-200",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("input",{ref:y,type:"text",value:a,onChange:O=>i(O.target.value),placeholder:"Escribe tu mensaje...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:o||u}),s.jsx("button",{type:"submit",disabled:o||!a.trim()||u,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})}),s.jsx("div",{className:"p-2 border-t border-gray-200 flex justify-end",children:s.jsx("button",{onClick:w,className:"px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700 text-sm",children:"Finalizar chat"})})]})]})};let n6=class{constructor(){this.results=[]}runAllTests(){return this.results=[],this.testKeyboardNavigation(),this.testScreenReaderSupport(),this.testColorContrast(),this.testSemanticStructure(),this.testFormLabels(),this.testModalAccessibility(),this.testFocusManagement(),this.results}testKeyboardNavigation(){const t=document.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');let r=t.length>0,n=!0;t.forEach(a=>{const i=a,o=window.getComputedStyle(i);!o.outline&&!o.boxShadow&&(n=!1)}),this.results.push({test:"Navegacin por teclado",passed:r&&n,message:r?n?"Todos los elementos enfocables tienen estilos de focus visibles":"Algunos elementos enfocables no tienen estilos de focus visibles":"No se encontraron elementos enfocables"})}testScreenReaderSupport(){const t=document.querySelectorAll("img"),r=document.querySelectorAll("button"),n=document.querySelectorAll("input");let a=!0,i=!0,o=!0;t.forEach(l=>{l.getAttribute("alt")||(a=!1)}),r.forEach(l=>{var u;const c=l.getAttribute("aria-label"),d=(u=l.textContent)==null?void 0:u.trim();!c&&!d&&(i=!1)}),n.forEach(l=>{const c=l.getAttribute("id");c&&(document.querySelector(`label[for="${c}"]`)||(o=!1))}),this.results.push({test:"Soporte para lectores de pantalla",passed:a&&i&&o,message:`Imgenes con alt: ${a}, Botones con aria-label: ${i}, Inputs con labels: ${o}`})}testColorContrast(){const t=document.querySelectorAll("p, h1, h2, h3, h4, h5, h6, span, div");let r=!0;t.forEach(n=>{const a=n,i=window.getComputedStyle(a);i.color,i.backgroundColor}),this.results.push({test:"Contraste de colores",passed:r,message:"Verificacin bsica de contraste completada (recomendado usar herramienta especializada)"})}testSemanticStructure(){const t=document.querySelectorAll("h1, h2, h3, h4, h5, h6"),r=document.querySelectorAll("ul, ol"),n=document.querySelectorAll("nav, main, header, footer, aside");let a=!0,i=!0,o=n.length>0,l="",c=0;t.forEach(m=>{const h=parseInt(m.tagName.charAt(1));h>c+1&&(a=!1,l=`Salto de nivel detectado: h${c} -> h${h}`),c=h});const d=document.querySelectorAll("h1").length;d===0?(a=!1,l="No se encontr ningn encabezado h1"):d>1&&(a=!1,l=`Mltiples h1 encontrados: ${d}`),r.forEach(m=>{m.querySelectorAll("li").length===0&&(i=!1)});const u=a?`Estructura de encabezados: , Listas semnticas: ${i?"":""}, Landmarks: ${o?"":""}`:`Estructura de encabezados:  (${l}), Listas semnticas: ${i?"":""}, Landmarks: ${o?"":""}`;this.results.push({test:"Estructura semntica",passed:a&&i&&o,message:u})}testFormLabels(){const t=document.querySelectorAll("input, select, textarea");let r=!0;t.forEach(n=>{const a=n.getAttribute("id"),i=n.getAttribute("aria-label"),o=n.getAttribute("aria-labelledby"),l=n.getAttribute("placeholder");!a&&!i&&!o&&!l&&(r=!1),a&&!document.querySelector(`label[for="${a}"]`)&&!i&&!o&&(r=!1)}),this.results.push({test:"Etiquetas de formularios",passed:r,message:r?"Todos los campos de formulario tienen etiquetas apropiadas":"Algunos campos de formulario no tienen etiquetas"})}testModalAccessibility(){const t=document.querySelectorAll('[role="dialog"], .modal, [class*="fixed inset-0"]');let r=!0,n=[];if(t.length===0){this.results.push({test:"Accesibilidad de modales",passed:!0,message:"No se encontraron modales en esta pgina"});return}t.forEach((i,o)=>{const l=i,c=[],d=l.getAttribute("role")==="dialog",u=l.getAttribute("aria-modal")==="true",m=l.getAttribute("aria-labelledby"),h=l.getAttribute("aria-describedby");d||c.push('Falta role="dialog"'),u||c.push('Falta aria-modal="true"'),m||c.push("Falta aria-labelledby");const g=l.querySelectorAll("button");Array.from(g).some(v=>{const f=v.getAttribute("aria-label")||"",x=v.textContent||"";return f.toLowerCase().includes("cerrar")||f.toLowerCase().includes("close")||x.includes("")||x.includes("X")})||c.push("Falta botn de cerrar accesible"),m&&(document.getElementById(m)||c.push("Elemento de ttulo no encontrado")),h&&(document.getElementById(h)||c.push("Elemento de descripcin no encontrado")),l.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])').length===0&&c.push("No hay elementos enfocables dentro del modal"),c.length>0&&(r=!1,n.push(`Modal ${o+1}: ${c.join(", ")}`))});const a=r?` Todos los modales (${t.length}) son accesibles`:` Problemas encontrados en modales: ${n.join("; ")}`;this.results.push({test:"Accesibilidad de modales",passed:r,message:a})}testFocusManagement(){const t=document.querySelectorAll('[role="dialog"]');let r=!0;t.forEach(n=>{n.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])').length===0&&(r=!1)}),this.results.push({test:"Manejo del focus",passed:r,message:r?"El manejo del focus est implementado correctamente":"Hay problemas con el manejo del focus en modales"})}generateReport(){const t=this.results.filter(i=>i.passed).length,r=this.results.length,n=Math.round(t/r*100);let a=`# Reporte de Accesibilidad

`;return a+=`**Resumen**: ${t}/${r} pruebas pasaron (${n}%)

`,a+=`## Detalles de las Pruebas

`,this.results.forEach(i=>{const o=i.passed?"":"";a+=`### ${o} ${i.test}
`,a+=`${i.message}

`}),a}runSpecificTest(t){const r={keyboard:()=>this.testKeyboardNavigation(),"screen-reader":()=>this.testScreenReaderSupport(),contrast:()=>this.testColorContrast(),semantic:()=>this.testSemanticStructure(),forms:()=>this.testFormLabels(),modals:()=>this.testModalAccessibility(),focus:()=>this.testFocusManagement()};return r[t]?(this.results=[],r[t](),this.results[0]||null):null}};const Zm=new n6,a6=({isVisible:e=!1,onClose:t})=>{const[r,n]=p.useState([]),[a,i]=p.useState(!1),[o,l]=p.useState(!1),c=async()=>{i(!0),await new Promise(y=>setTimeout(y,500));const j=Zm.runAllTests();n(j),i(!1)},d=async j=>{i(!0),await new Promise(v=>setTimeout(v,200));const y=Zm.runSpecificTest(j);y&&n([y]),i(!1)},u=()=>{const j=Zm.generateReport(),y=new Blob([j],{type:"text/markdown"}),v=URL.createObjectURL(y),f=document.createElement("a");f.href=v,f.download=`accessibility-report-${new Date().toISOString().split("T")[0]}.md`,document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL(v)};if(p.useEffect(()=>{e&&c()},[e]),!e)return null;const m=r.filter(j=>j.passed).length,h=r.length,g=h>0?Math.round(m/h*100):0;return s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",role:"dialog","aria-modal":"true","aria-labelledby":"accessibility-tester-title",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{id:"accessibility-tester-title",className:"text-2xl font-bold text-gray-900",children:"Tester de Accesibilidad"}),s.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded","aria-label":"Cerrar tester de accesibilidad",children:""})]}),s.jsx("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Resumen"}),s.jsxs("p",{className:"text-gray-600",children:[m," de ",h," pruebas pasaron (",g,"%)"]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:c,disabled:a,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Ejecutar todas las pruebas de accesibilidad",children:a?"Ejecutando...":"Ejecutar Todas"}),s.jsx("button",{onClick:u,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500","aria-label":"Descargar reporte de accesibilidad",children:"Descargar Reporte"})]})]})}),s.jsxs("div",{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Pruebas Especficas"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[{key:"keyboard",label:"Teclado"},{key:"screen-reader",label:"Lector Pantalla"},{key:"contrast",label:"Contraste"},{key:"semantic",label:"Estructura"},{key:"forms",label:"Formularios"},{key:"modals",label:"Modales"},{key:"focus",label:"Focus"}].map(j=>s.jsx("button",{onClick:()=>d(j.key),disabled:a,className:"px-3 py-2 text-sm bg-gray-200 text-gray-700 rounded hover:bg-gray-300 disabled:opacity-50 focus:outline-none focus:ring-2 focus:ring-gray-500","aria-label":`Ejecutar prueba de ${j.label}`,children:j.label},j.key))})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Resultados"}),a?s.jsxs("div",{className:"flex items-center justify-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"}),s.jsx("span",{className:"ml-2 text-gray-600",children:"Ejecutando pruebas..."})]}):r.length>0?s.jsx("div",{className:"space-y-3",children:r.map((j,y)=>s.jsx("div",{className:`p-4 rounded-lg border ${j.passed?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center",children:[j.passed?"":""," ",j.test]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:j.message})]}),s.jsx("span",{className:`px-2 py-1 text-xs rounded ${j.passed?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:j.passed?"PAS":"FALL"})]})},y))}):s.jsx("div",{className:"text-center py-8 text-gray-500",children:"No hay resultados disponibles. Ejecuta las pruebas para ver los resultados."})]}),s.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[s.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Informacin"}),s.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[s.jsx("li",{children:" Las pruebas verifican el cumplimiento de WCAG 2.1 AA"}),s.jsx("li",{children:" Se recomienda usar herramientas especializadas para contraste de colores"}),s.jsx("li",{children:" Los resultados son una gua, no reemplazan pruebas manuales"}),s.jsx("li",{children:" Para pruebas completas, usar lectores de pantalla reales"})]})]})]})})},$o=({isOpen:e,onClose:t,title:r,children:n,description:a,size:i="md",closeOnOverlayClick:o=!0,closeOnEscape:l=!0})=>{const c=p.useRef(null),d=p.useRef(null),u={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-2xl"};p.useEffect(()=>{const g=j=>{j.key==="Escape"&&l&&t()};return e&&(document.addEventListener("keydown",g),d.current=document.activeElement),()=>{document.removeEventListener("keydown",g)}},[e,t,l]),p.useEffect(()=>(e?(document.body.style.overflow="hidden",setTimeout(()=>{if(c.current){const j=c.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')[0];j&&j.focus()}},100)):(document.body.style.overflow="unset",d.current&&d.current.focus()),()=>{document.body.style.overflow="unset"}),[e]);const m=g=>{g.target===g.currentTarget&&o&&t()},h=()=>{t()};return e?s.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black bg-opacity-50 p-4 modal-overlay modal-backdrop",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title","aria-describedby":a?"modal-description":void 0,onClick:m,children:s.jsxs("div",{ref:c,className:`bg-white rounded-lg shadow-xl w-full ${u[i]} max-h-[85vh] overflow-y-auto relative modal-container modal-content`,role:"document",children:[s.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[s.jsxs("div",{children:[s.jsx("h2",{id:"modal-title",className:"text-xl font-bold text-gray-900",children:r}),a&&s.jsx("p",{id:"modal-description",className:"text-sm text-gray-600 mt-1",children:a})]}),s.jsx("button",{onClick:h,className:"text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded-md p-1","aria-label":"Cerrar modal",type:"button",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"p-6",children:n})]})}):null},i6=({isOpen:e,onClose:t})=>{const[r,n]=p.useState({nombre:"",email:"",telefono:"",asunto:"",mensaje:""}),[a,i]=p.useState(!1),[o,l]=p.useState("idle"),c=u=>{const{name:m,value:h}=u.target;n(g=>({...g,[m]:h}))},d=async u=>{u.preventDefault(),i(!0),l("idle");try{const m=await Q.post("/contact",{...r,ip:"unknown",userAgent:navigator.userAgent});if(m.status===200||m.status===201)l("success"),n({nombre:"",email:"",telefono:"",asunto:"",mensaje:""}),setTimeout(()=>{t(),l("idle")},2e3);else throw new Error("Error en el servidor")}catch(m){console.error("Error al enviar formulario:",m),l("error")}finally{i(!1)}};return s.jsx($o,{isOpen:e,onClose:t,title:"Contctanos",description:"Complete el formulario para solicitar una consulta gratuita",size:"xl",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informacin de Contacto"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:s.jsxs("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Direccin"}),s.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Calle Principal 123",s.jsx("br",{}),"Madrid, 28001",s.jsx("br",{}),"Espaa"]})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:s.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Telfono"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s.jsx("a",{href:"tel:+34612345678",className:"hover:text-blue-600",children:"+34 612 345 678"})})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:s.jsx("svg",{className:"w-4 h-4 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Email"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s.jsx("a",{href:"mailto:info@despachoabogados.com",className:"hover:text-blue-600",children:"info@despachoabogados.com"})})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center",children:s.jsx("svg",{className:"w-4 h-4 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Horario de Atencin"}),s.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Lunes - Viernes: 9:00 - 18:00",s.jsx("br",{}),"Sbados: 9:00 - 14:00",s.jsx("br",{}),"Domingos: Cerrado"]})]})]})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Servicios Destacados"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-blue-600 text-xs",children:""})}),s.jsx("span",{className:"text-sm text-gray-700",children:"Derecho Civil"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-green-600 text-xs",children:""})}),s.jsx("span",{className:"text-sm text-gray-700",children:"Derecho Laboral"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-6 h-6 bg-purple-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-purple-600 text-xs",children:""})}),s.jsx("span",{className:"text-sm text-gray-700",children:"Derecho Familiar"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-6 h-6 bg-orange-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-orange-600 text-xs",children:""})}),s.jsx("span",{className:"text-sm text-gray-700",children:"Derecho Empresarial"})]})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Solicita tu Consulta Gratuita"}),s.jsxs("form",{onSubmit:d,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"nombre",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre completo *"}),s.jsx("input",{type:"text",id:"nombre",name:"nombre",value:r.nombre,onChange:c,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Tu nombre completo"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),s.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:c,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"tu@email.com"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"telefono",className:"block text-sm font-medium text-gray-700 mb-1",children:"Telfono"}),s.jsx("input",{type:"tel",id:"telefono",name:"telefono",value:r.telefono,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"+34 612 345 678"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"asunto",className:"block text-sm font-medium text-gray-700 mb-1",children:"Asunto *"}),s.jsxs("select",{id:"asunto",name:"asunto",value:r.asunto,onChange:c,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Selecciona un asunto"}),s.jsx("option",{value:"Consulta General",children:"Consulta General"}),s.jsx("option",{value:"Derecho Civil",children:"Derecho Civil"}),s.jsx("option",{value:"Derecho Laboral",children:"Derecho Laboral"}),s.jsx("option",{value:"Derecho Familiar",children:"Derecho Familiar"}),s.jsx("option",{value:"Derecho Empresarial",children:"Derecho Empresarial"}),s.jsx("option",{value:"Otro",children:"Otro"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"mensaje",className:"block text-sm font-medium text-gray-700 mb-1",children:"Mensaje *"}),s.jsx("textarea",{id:"mensaje",name:"mensaje",value:r.mensaje,onChange:c,required:!0,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Describe tu consulta o situacin legal..."})]}),o==="success"&&s.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md",role:"alert","aria-live":"polite",children:s.jsx("p",{className:"text-green-600 text-sm",children:"Gracias por tu mensaje! Nos pondremos en contacto contigo en las prximas 24 horas."})}),o==="error"&&s.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",role:"alert","aria-live":"polite",children:s.jsx("p",{className:"text-red-600 text-sm",children:"Ha ocurrido un error al enviar tu mensaje. Por favor, intntalo de nuevo."})}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Cancelar"}),s.jsx("button",{type:"submit",disabled:a,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Enviando...":"Enviar Consulta"})]})]})]})]})})},xw=()=>{const{user:e,loading:t,logout:r}=we(),[n,a]=p.useState(!1),[i,o]=p.useState([]),[l,c]=p.useState(" 2024 Despacho Legal. Todos los derechos reservados."),[d,u]=p.useState(0),[m,h]=p.useState(!1),[g,j]=p.useState(!1),y=(e==null?void 0:e.role)==="ADMIN",v=(e==null?void 0:e.role)==="ABOGADO",f=(e==null?void 0:e.role)==="CLIENTE",{siteName:x,logoUrl:b,primaryColor:N,menuItems:w,menuOrientation:S,headerFixed:C,footerVisible:k,loading:A}=e6(t||e==null?void 0:e.role),O={backgroundColor:N},D=C?"fixed top-0 w-full z-50":"",I=V=>{if(V.children&&V.children.length>0)return s.jsxs("div",{className:"relative",children:[s.jsxs("button",{className:"hover:text-blue-200 px-2 py-1 rounded focus:outline-none flex items-center",onClick:()=>a(W=>!W),onBlur:()=>setTimeout(()=>a(!1),200),children:[V.icon&&s.jsx("span",{className:"mr-1",children:V.icon}),V.label,s.jsx("svg",{className:"inline w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),n&&s.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white text-gray-900 rounded shadow-lg z-50",onMouseEnter:()=>a(!0),onMouseLeave:()=>setTimeout(()=>a(!1),100),children:V.children.map((W,_)=>s.jsxs(be,{to:W.url,className:"block px-4 py-2 hover:bg-blue-100 transition-colors",onClick:T=>{T.stopPropagation(),a(!1)},children:[W.icon&&s.jsx("span",{className:"mr-2",children:W.icon}),W.label]},W.id||W.label||`child-${_}`))})]});const G=V.url&&V.url.includes("/chat");return s.jsxs(be,{to:V.url,className:"hover:text-blue-200 flex items-center relative",target:V.isExternal?"_blank":void 0,rel:V.isExternal?"noopener noreferrer":void 0,children:[V.icon&&s.jsx("span",{className:"mr-1",children:V.icon}),V.label,G&&d>0&&s.jsx("span",{className:"ml-1 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-600 text-white absolute -top-2 -right-4",children:d})]})},M=()=>y?[{label:"Admin Dashboard",url:"/admin/dashboard",icon:""},{label:"Usuarios",url:"/admin/users",icon:""},{label:"Expedientes",url:"/admin/cases",icon:""},{label:"Citas",url:"/admin/appointments",icon:""},{label:"Tareas",url:"/admin/tasks",icon:""},{label:"Documentos",url:"/admin/documents",icon:""},{label:"Reportes",url:"/admin/reports",icon:""},{label:"Servicios",url:"/admin/services",icon:""},{label:"Home Builder",url:"/admin/home-builder",icon:""}]:v?[{label:"Dashboard",url:"/dashboard",icon:""},{label:"Mis Expedientes",url:"/lawyer/cases",icon:""},{label:"Citas",url:"/lawyer/appointments",icon:""},{label:"Tareas",url:"/lawyer/tasks",icon:""},{label:"Chat",url:"/lawyer/chat",icon:""},{label:"Reportes",url:"/lawyer/reports",icon:""},{label:"Facturacin",url:"/lawyer/facturacion",icon:"",children:[{label:"Provisin de Fondos",url:"/lawyer/provisiones",icon:""},{label:"Facturacin Electrnica",url:"/lawyer/facturacion",icon:""}]}]:f?[{label:"Dashboard",url:"/dashboard",icon:""},{label:"Mis Expedientes",url:"/client/cases",icon:""},{label:"Provisiones",url:"/client/provisiones",icon:""},{label:"Mis Citas",url:"/client/appointments",icon:""},{label:"Chat",url:"/client/chat",icon:""}]:[],E=A?M():w&&w.length>0?w:M();p.useEffect(()=>{(async()=>{try{console.log("[LAYOUT] Obteniendo parmetros de contacto...");const[G,W]=await Promise.all([Q.get("/parametros/contact"),Q.get("/parametros/legal")]);console.log("[LAYOUT] Respuesta de contact:",G.data),console.log("[LAYOUT] Respuesta de legal:",W.data);const _=Array.isArray(G.data)?G.data:[];o(_),console.log("[LAYOUT] Parmetros de contacto cargados:",_.length),console.log("[LAYOUT] Parmetros encontrados:",_.map(B=>({clave:B.clave,valor:B.valor})));const R=(Array.isArray(W.data)?W.data:[]).find(B=>B.clave==="COPYRIGHT_TEXT");R&&c(R.valor)}catch(G){console.error("[LAYOUT] Error obteniendo parmetros:",G),o([])}})()},[]),p.useEffect(()=>{e&&(async()=>{try{if(!e)return;const G=await Q.get("/chat/unread-count");u(G.data.count||0)}catch{u(0)}})()},[e]);const L=V=>{if(!Array.isArray(i))return console.log("[LAYOUT] getParamValue - contactParams no es array:",i),"";const G=i.find(W=>W.clave===V);return console.log(`[LAYOUT] getParamValue(${V}):`,G?G.valor:"NO ENCONTRADO"),G?G.valor:""};return s.jsxs("div",{className:"min-h-screen flex flex-col",children:[s.jsx("nav",{className:`text-white ${D}`,style:O,children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex items-center justify-between h-16",children:[s.jsx("div",{className:"flex items-center",children:s.jsxs(be,{to:"/",className:"text-xl font-bold flex items-center",children:[b&&s.jsx("img",{src:b,alt:x,className:"h-8 w-auto mr-2",onError:V=>{V.currentTarget.style.display="none"}}),x]})}),s.jsx("div",{className:"flex items-center space-x-4 relative",children:e?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:`flex items-center space-x-4 ${S==="vertical"?"flex-col":""}`,children:E.map((V,G)=>s.jsx(z.Fragment,{children:I(V)},V.id||V.label||`menu-item-${G}`))}),s.jsxs("span",{className:"text-sm font-medium text-white bg-blue-900 rounded px-3 py-1",children:[e.name," ",e.email&&s.jsxs("span",{className:"text-gray-300",children:["(",e.email,")"]})]}),s.jsx("button",{onClick:()=>h(!0),className:"hover:text-blue-200 px-2 py-1 rounded focus:outline-none focus:ring-2 focus:ring-blue-300","aria-label":"Abrir tester de accesibilidad",title:"Probar accesibilidad",children:""}),s.jsx("button",{onClick:r,className:"hover:text-blue-200",children:"Cerrar Sesin"})]}):s.jsxs(s.Fragment,{children:[s.jsx(be,{to:"/login",className:"hover:text-blue-200",children:"Iniciar Sesin"}),s.jsx(be,{to:"/register",className:"hover:text-blue-200",children:"Registro"})]})})]})})}),C&&s.jsx("div",{className:"h-16"}),e&&s.jsx(t6,{}),s.jsx("main",{className:"flex-grow",children:s.jsx("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:s.jsx(ox,{})})}),k&&s.jsx("footer",{className:"bg-gray-800 text-white",children:s.jsxs("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:[s.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Informacin de Contacto"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Contacto"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[L("CONTACT_INFO")&&s.jsx("p",{className:"text-gray-300 mb-2",children:L("CONTACT_INFO")}),L("CONTACT_EMAIL")&&s.jsxs("button",{onClick:()=>j(!0),className:"text-left hover:text-blue-300 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded px-1 py-1 transition-colors","aria-label":`Abrir formulario de contacto. Email: ${L("CONTACT_EMAIL")}`,children:[" ",L("CONTACT_EMAIL")]}),L("CONTACT_PHONE_PREFIX")&&L("CONTACT_PHONE")&&s.jsxs("p",{children:[" ",L("CONTACT_PHONE_PREFIX")," ",L("CONTACT_PHONE")]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Enlaces"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsx(be,{to:"/privacidad",className:"hover:text-gray-300 block",children:"Poltica de Privacidad"}),s.jsx(be,{to:"/terminos",className:"hover:text-gray-300 block",children:"Trminos de Servicio"}),s.jsx(be,{to:"/cookies",className:"hover:text-gray-300 block",children:"Poltica de Cookies"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Sguenos"}),s.jsxs("div",{className:"flex space-x-4",children:[L("SOCIAL_FACEBOOK")&&s.jsx("a",{href:L("SOCIAL_FACEBOOK"),target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-white",children:" Facebook"}),L("SOCIAL_TWITTER")&&s.jsx("a",{href:L("SOCIAL_TWITTER"),target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-white",children:" Twitter"}),L("SOCIAL_LINKEDIN")&&s.jsx("a",{href:L("SOCIAL_LINKEDIN"),target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-white",children:" LinkedIn"}),L("SOCIAL_INSTAGRAM")&&s.jsx("a",{href:L("SOCIAL_INSTAGRAM"),target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-white",children:" Instagram"})]})]})]}),s.jsx("div",{className:"mt-8 pt-8 border-t border-gray-700 text-center",children:s.jsx("p",{children:l})})]})}),!e&&s.jsx(s6,{}),s.jsx(a6,{isVisible:m,onClose:()=>h(!1)}),s.jsx(i6,{isOpen:g,onClose:()=>j(!1)})]})},gw=({component:e})=>{const t=()=>{switch(e.type){case"hero-banner":return s.jsx(o6,{props:e.props});case"service-cards":return s.jsx(l6,{props:e.props});case"contact-form":return s.jsx(c6,{props:e.props});case"testimonials":return s.jsx(u6,{props:e.props});case"stats":return s.jsx(m6,{props:e.props});case"text-block":return s.jsx(h6,{props:e.props});case"image-gallery":return s.jsx(f6,{props:e.props});case"map":return s.jsx(p6,{props:e.props});case"divider":return s.jsx(x6,{props:e.props});case"spacer":return s.jsx(g6,{props:e.props});default:return s.jsx("div",{className:"p-4 bg-red-100 border border-red-300 rounded",children:s.jsxs("p",{className:"text-red-700",children:["Componente no reconocido: ",e.type]})})}};return s.jsx("div",{className:"component-renderer",children:t()})},o6=({props:e})=>{const[t,r]=p.useState(!1),[n,a]=p.useState(!1);return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"relative bg-gradient-to-r from-blue-600 to-purple-700 text-white p-8 rounded-lg",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:e.title||"Banner Principal"}),s.jsx("p",{className:"text-xl mb-6 opacity-90",children:e.subtitle||"Subttulo del banner"}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s.jsx("button",{onClick:()=>r(!0),className:"inline-block bg-white text-blue-600 px-6 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors",children:e.ctaText||"Consultar Ahora"}),s.jsx("button",{onClick:()=>a(!0),className:"inline-block border-2 border-white text-white px-6 py-3 rounded-lg font-semibold hover:bg-white hover:text-blue-600 transition-colors",children:e.secondaryText||"Conocer Servicios"})]})]})}),t&&s.jsx(vw,{onClose:()=>r(!1),props:{title:"Solicitar Consulta Gratuita",submitText:"Enviar Consulta"}}),n&&s.jsx(d6,{onClose:()=>a(!1)})]})},l6=({props:e})=>s.jsxs("div",{className:"bg-white p-6 rounded-lg border",children:[s.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:e.title||"Nuestros Servicios"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:(e.services||[]).map((t,r)=>s.jsxs("div",{className:"text-center p-4 border rounded-lg hover:shadow-md transition-shadow",children:[s.jsx("div",{className:"text-4xl mb-3",children:t.icon||""}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:t.title||"Servicio"}),s.jsx("p",{className:"text-gray-600",children:t.description||"Descripcin del servicio"})]},r))})]}),c6=({props:e})=>{const[t,r]=p.useState(!1);return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg border text-center",children:[s.jsx("h2",{className:"text-2xl font-bold mb-4",children:e.title||"Contctanos"}),s.jsx("p",{className:"text-gray-600 mb-6",children:e.subtitle||"Estamos aqu para ayudarte"}),s.jsx("button",{onClick:()=>r(!0),className:"bg-blue-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:e.buttonText||"Solicitar Consulta"})]}),t&&s.jsx(vw,{onClose:()=>r(!1),props:e})]})},vw=({onClose:e,props:t})=>{const[r,n]=p.useState({nombre:"",email:"",telefono:"",asunto:"Consulta desde formulario de contacto",mensaje:""}),[a,i]=p.useState(!1),[o,l]=p.useState("idle"),c=u=>{const{name:m,value:h}=u.target;n(g=>({...g,[m]:h}))},d=async u=>{u.preventDefault(),i(!0),l("idle");try{const m=await fetch("undefined/api/contact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...r,ip:"unknown",userAgent:navigator.userAgent})});if(m.ok)l("success"),n({nombre:"",email:"",telefono:"",asunto:"Consulta desde formulario de contacto",mensaje:""}),setTimeout(()=>{e()},2e3);else{const h=await m.text();throw console.error("Error del servidor:",m.status,h),new Error(`Error ${m.status}: ${h}`)}}catch(m){console.error("Error al enviar formulario:",m),l("error")}finally{i(!1)}};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsx("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-2xl font-bold",children:t.title||"Contctanos"}),s.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),o==="success"&&s.jsx("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),s.jsx("div",{className:"ml-3",children:s.jsx("p",{className:"text-sm text-green-800",children:"Gracias por tu mensaje! Nos pondremos en contacto contigo en las prximas 24 horas."})})]})}),o==="error"&&s.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),s.jsx("div",{className:"ml-3",children:s.jsx("p",{className:"text-sm text-red-800",children:"Ha ocurrido un error al enviar tu mensaje. Por favor, intntalo de nuevo."})})]})}),s.jsxs("form",{onSubmit:d,className:"space-y-4",children:[s.jsx("input",{type:"text",name:"nombre",placeholder:"Nombre *",value:r.nombre,onChange:c,required:!0,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsx("input",{type:"email",name:"email",placeholder:"Email *",value:r.email,onChange:c,required:!0,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsx("input",{type:"tel",name:"telefono",placeholder:"Telfono",value:r.telefono,onChange:c,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsx("input",{type:"text",name:"asunto",placeholder:"Asunto *",value:r.asunto,onChange:c,required:!0,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsx("textarea",{name:"mensaje",placeholder:"Mensaje *",rows:4,value:r.mensaje,onChange:c,required:!0,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),s.jsx("button",{type:"submit",disabled:a,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Enviando...":t.submitText||"Enviar Mensaje"})]})]})})})},d6=({onClose:e})=>{const[t,r]=p.useState([]),[n,a]=p.useState(!0),[i,o]=p.useState(null);return p.useEffect(()=>{(async()=>{try{a(!0);const c=await fetch("undefined/api/parametros/services");if(c.ok){const d=await c.json();r(d)}else throw new Error("Error al cargar los servicios")}catch(c){console.error("Error fetching services:",c),o("Error al cargar los servicios")}finally{a(!1)}})()},[]),s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsx("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Nuestros Servicios Legales"}),s.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n&&s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Cargando servicios..."})]}),i&&s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"text-red-500 mb-4",children:s.jsx("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),s.jsx("p",{className:"text-gray-600",children:i})]}),!n&&!i&&s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.map(l=>s.jsx("div",{className:"bg-gray-50 p-6 rounded-lg hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"text-4xl flex-shrink-0",children:l.icon||""}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:l.title}),s.jsx("p",{className:"text-gray-600 leading-relaxed",children:l.description})]})]})},l.id))}),s.jsx("div",{className:"mt-8 text-center",children:s.jsx("button",{onClick:()=>{e(),setTimeout(()=>{const l=document.querySelector('[onclick*="setShowContactModal"]');l&&l.click()},100)},className:"bg-blue-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:"Solicitar Consulta Gratuita"})})]})})})},u6=({props:e})=>s.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg",children:[s.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:e.title||"Lo que dicen nuestros clientes"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:(e.testimonials||[]).map((t,r)=>s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[s.jsx("div",{className:"flex items-center mb-3",children:s.jsx("div",{className:"text-yellow-400 text-lg",children:""})}),s.jsxs("p",{className:"text-gray-700 mb-3",children:['"',t.text||"Excelente servicio",'"']}),s.jsx("p",{className:"font-semibold text-gray-900",children:t.name||"Cliente"})]},r))})]}),m6=({props:e})=>s.jsxs("div",{className:"bg-white p-6 rounded-lg border",children:[s.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:e.title||"Nuestros Nmeros"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:(e.stats||[]).map((t,r)=>s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:t.value||"0"}),s.jsx("div",{className:"text-gray-600",children:t.label||"Estadstica"})]},r))})]}),h6=({props:e})=>s.jsxs("div",{className:`bg-white p-6 rounded-lg border text-${e.alignment||"left"}`,children:[s.jsx("h2",{className:"text-2xl font-bold mb-4",children:e.title||"Ttulo del bloque"}),s.jsx("p",{className:`text-gray-700 ${e.fontSize==="large"?"text-lg":e.fontSize==="small"?"text-sm":"text-base"}`,children:e.content||"Contenido del bloque de texto. Aqu puedes escribir cualquier informacin relevante."})]}),f6=({props:e})=>s.jsxs("div",{className:"bg-white p-6 rounded-lg border",children:[s.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:e.title||"Galera de Imgenes"}),s.jsx("div",{className:`grid grid-cols-${e.columns||3} gap-4`,children:(e.images||[]).map((t,r)=>s.jsx("div",{className:"aspect-square bg-gray-200 rounded-lg flex items-center justify-center",children:s.jsxs("span",{className:"text-gray-500",children:[" Imagen ",r+1]})},r))})]}),p6=({props:e})=>s.jsxs("div",{className:"bg-white p-6 rounded-lg border",children:[s.jsx("h2",{className:"text-2xl font-bold text-center mb-4",children:e.title||"Nuestra Ubicacin"}),s.jsx("div",{className:"bg-gray-200 h-64 rounded-lg flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-4xl mb-2",children:""}),s.jsx("p",{className:"text-gray-600",children:e.address||"Direccin del despacho"})]})})]}),x6=({props:e})=>s.jsx("div",{className:"flex items-center justify-center py-4",children:s.jsx("div",{className:`w-full h-${e.thickness||1} bg-${e.color||"gray-300"}`,style:{backgroundColor:e.color||"#e5e7eb"}})}),g6=({props:e})=>s.jsx("div",{style:{height:`${e.height||40}px`}}),v6=()=>{const[e,t]=p.useState(null),[r,n]=p.useState(!0),[a,i]=p.useState(null),{user:o}=we();return p.useEffect(()=>{(async()=>{try{n(!0);const c=await Q.get("/layouts/home");if(c.status===200)t(c.data);else if(c.status===404)t(xv());else throw new Error("Error al cargar el layout")}catch(c){console.error("Error fetching layout:",c),t(xv())}finally{n(!1)}})()},[]),r?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Cargando..."})]})}):a&&!e?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Error"}),s.jsx("p",{className:"text-gray-600",children:a})]})}):e?s.jsxs("div",{className:"min-h-screen",children:[s.jsx("h1",{className:"sr-only",children:"Pgina Principal - Despacho Legal"}),e.components.map(l=>s.jsx("div",{children:s.jsx(gw,{component:l})},l.id))]}):s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-600 mb-4",children:"Pgina no encontrada"}),s.jsx("p",{className:"text-gray-500",children:"No hay contenido configurado para esta pgina."})]})})},xv=()=>({id:"default-home",name:"Home Page",components:[{id:"default-hero",type:"hero-banner",props:{title:"Bienvenido a Nuestro Despacho Legal",subtitle:"Servicios legales profesionales y confiables para proteger sus derechos",backgroundImage:"/images/hero-bg.jpg",ctaText:"Solicitar Consulta Gratuita",secondaryText:"Conocer Servicios",secondaryLink:"/contact"},order:0},{id:"default-services",type:"service-cards",props:{title:"Nuestros Servicios",services:[{title:"Derecho Civil",description:"Asesora especializada en casos civiles y comerciales",icon:""},{title:"Derecho Laboral",description:"Proteccin de sus derechos laborales y reclamaciones",icon:""},{title:"Derecho Familiar",description:"Divorcios, custodia y asuntos familiares",icon:""}]},order:1},{id:"default-stats",type:"stats",props:{title:"Nuestros Nmeros",stats:[{label:"Casos Exitosos",value:"500+",icon:""},{label:"Aos de Experiencia",value:"15",icon:""},{label:"Clientes Satisfechos",value:"1000+",icon:""}]},order:2},{id:"default-contact",type:"contact-form",props:{title:"Necesitas Asesora Legal?",subtitle:"Nuestros abogados especialistas estn listos para ayudarte",buttonText:"Solicitar Consulta Gratuita",submitText:"Enviar Consulta"},order:3}],version:1,lastModified:new Date().toISOString()}),y6=()=>s.jsx(v6,{}),b6=()=>{const[e,t]=p.useState({nombre:"",email:"",telefono:"",asunto:"",mensaje:""}),[r,n]=p.useState(!1),[a,i]=p.useState("idle"),o=c=>{const{name:d,value:u}=c.target;t(m=>({...m,[d]:u}))},l=async c=>{c.preventDefault(),n(!0),i("idle");try{if((await fetch("undefined/api/contact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,ip:"unknown",userAgent:navigator.userAgent})})).ok)i("success"),t({nombre:"",email:"",telefono:"",asunto:"",mensaje:""});else throw new Error("Error en el servidor")}catch(d){console.error("Error al enviar formulario:",d),i("error")}finally{n(!1)}};return s.jsx(xw,{children:s.jsx("div",{className:"min-h-screen bg-gray-50 py-12",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Contctanos"}),s.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Estamos aqu para ayudarte. Nuestros abogados especialistas estn listos para atender tu consulta y brindarte la asesora legal que necesitas."})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-8",children:[s.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-6",children:"Informacin de Contacto"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:s.jsxs("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Direccin"}),s.jsxs("p",{className:"text-gray-600 mt-1",children:["Calle Principal 123",s.jsx("br",{}),"Madrid, 28001",s.jsx("br",{}),"Espaa"]})]})]}),s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:s.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Telfono"}),s.jsx("p",{className:"text-gray-600 mt-1",children:s.jsx("a",{href:"tel:+34612345678",className:"hover:text-blue-600",children:"+34 612 345 678"})})]})]}),s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:s.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Email"}),s.jsx("p",{className:"text-gray-600 mt-1",children:s.jsx("a",{href:"mailto:info@despachoabogados.com",className:"hover:text-blue-600",children:"info@despachoabogados.com"})})]})]}),s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:s.jsx("svg",{className:"w-6 h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Horario de Atencin"}),s.jsxs("p",{className:"text-gray-600 mt-1",children:["Lunes - Viernes: 9:00 - 18:00",s.jsx("br",{}),"Sbados: 9:00 - 14:00",s.jsx("br",{}),"Domingos: Cerrado"]})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-8",children:[s.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-6",children:"Servicios Destacados"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-blue-600 text-sm font-semibold",children:""})}),s.jsx("span",{className:"text-gray-700",children:"Derecho Civil"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-green-600 text-sm font-semibold",children:""})}),s.jsx("span",{className:"text-gray-700",children:"Derecho Laboral"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-purple-600 text-sm font-semibold",children:""})}),s.jsx("span",{className:"text-gray-700",children:"Derecho Familiar"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-orange-600 text-sm font-semibold",children:""})}),s.jsx("span",{className:"text-gray-700",children:"Derecho Empresarial"})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-8",children:[s.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-6",children:"Solicita tu Consulta Gratuita"}),a==="success"&&s.jsx("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),s.jsx("div",{className:"ml-3",children:s.jsx("p",{className:"text-sm text-green-800",children:"Gracias por tu mensaje! Nos pondremos en contacto contigo en las prximas 24 horas."})})]})}),a==="error"&&s.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),s.jsx("div",{className:"ml-3",children:s.jsx("p",{className:"text-sm text-red-800",children:"Ha ocurrido un error al enviar tu mensaje. Por favor, intntalo de nuevo."})})]})}),s.jsxs("form",{onSubmit:l,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"nombre",className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre Completo *"}),s.jsx("input",{type:"text",id:"nombre",name:"nombre",value:e.nombre,onChange:o,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Tu nombre completo"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),s.jsx("input",{type:"email",id:"email",name:"email",value:e.email,onChange:o,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"tu@email.com"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"telefono",className:"block text-sm font-medium text-gray-700 mb-2",children:"Telfono"}),s.jsx("input",{type:"tel",id:"telefono",name:"telefono",value:e.telefono,onChange:o,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"+34 612 345 678"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"asunto",className:"block text-sm font-medium text-gray-700 mb-2",children:"Asunto *"}),s.jsxs("select",{id:"asunto",name:"asunto",value:e.asunto,onChange:o,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Selecciona un asunto"}),s.jsx("option",{value:"consulta-civil",children:"Consulta - Derecho Civil"}),s.jsx("option",{value:"consulta-laboral",children:"Consulta - Derecho Laboral"}),s.jsx("option",{value:"consulta-familiar",children:"Consulta - Derecho Familiar"}),s.jsx("option",{value:"consulta-empresarial",children:"Consulta - Derecho Empresarial"}),s.jsx("option",{value:"contratos",children:"Elaboracin de Contratos"}),s.jsx("option",{value:"herencias",children:"Gestin de Herencias"}),s.jsx("option",{value:"otro",children:"Otro"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"mensaje",className:"block text-sm font-medium text-gray-700 mb-2",children:"Mensaje *"}),s.jsx("textarea",{id:"mensaje",name:"mensaje",value:e.mensaje,onChange:o,required:!0,rows:6,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Describe tu consulta o situacin legal..."})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("input",{type:"checkbox",id:"privacidad",required:!0,className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),s.jsxs("label",{htmlFor:"privacidad",className:"text-sm text-gray-600",children:["Acepto la"," ",s.jsx("a",{href:"/privacidad",className:"text-blue-600 hover:text-blue-500",children:"poltica de privacidad"})," ","y el"," ",s.jsx("a",{href:"/terminos",className:"text-blue-600 hover:text-blue-500",children:"tratamiento de datos personales"})]})]}),s.jsx("button",{type:"submit",disabled:r,className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:r?s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Enviando..."]}):"Enviar Consulta"})]})]})]}),s.jsx("div",{className:"mt-16",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border p-8",children:[s.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-6 text-center",children:"Nuestra Ubicacin"}),s.jsx("div",{className:"bg-gray-200 h-96 rounded-lg flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-6xl mb-4",children:""}),s.jsx("p",{className:"text-gray-600 text-lg",children:"Calle Principal 123, Madrid, 28001"}),s.jsx("p",{className:"text-gray-500 mt-2",children:"Mapa interactivo (integrado con Google Maps)"})]})})]})})]})})})},eh=()=>{const{user:e}=we(),t=kr(),[r,n]=p.useState({totalCases:0,activeCases:0,pendingAppointments:0,recentDocuments:0,totalUsers:0}),[a,i]=p.useState(!1),[o,l]=p.useState(null),[c,d]=p.useState([]),u=p.useRef(null),m=p.useRef(!1),h=p.useRef(!1),g=p.useRef(0),j=async()=>{if(!e)return;g.current+=1,console.log(`Dashboard loadDashboardData: user (execution #${g.current})`,e);const w=e.id;if(console.log(`Dashboard loadDashboardData: Current user ID: ${w}, Last user ID: ${u.current}, Initialized: ${m.current}`),u.current===w&&m.current){console.log("Dashboard loadDashboardData: Already initialized for this user, skipping");return}if(h.current){console.log("Dashboard loadDashboardData: Already processing, skipping duplicate execution");return}h.current=!0,u.current=w,console.log("Dashboard loadDashboardData: Starting data fetch for user:",w);try{i(!0),l(null);const S=[Q.get("/cases/stats"),Q.get("/appointments"),Q.get("/documents/stats")];e.role==="ADMIN"&&S.push(Q.get("/users")),S.push(Q.get("/cases/recent")),e.role==="ABOGADO"&&S.push(Q.get("/cases/recent-activities"));const C=await Promise.allSettled(S),k=C[0].status==="fulfilled"?C[0].value.data:{},A=C[1].status==="fulfilled"?C[1].value.data:[],O=C[2].status==="fulfilled"?C[2].value.data:{},D=e.role==="ADMIN"&&C[3]&&C[3].status==="fulfilled"?C[3].value.data:[],I=C[e.role==="ADMIN"?4:3]&&C[e.role==="ADMIN"?4:3].status==="fulfilled"?C[e.role==="ADMIN"?4:3].value.data:[],M=e.role==="ABOGADO"&&C[4]&&C[4].status==="fulfilled"?C[4].value.data:null;let E=0,L=0,V=0,G=0,W=0;if((e.role==="ADMIN"||e.role==="ABOGADO"||e.role==="CLIENTE")&&(E=k.total||0,L=(k.abiertos||0)+(k.enProceso||0)),Array.isArray(A)){const T=new Date;e.role==="ADMIN"?V=A.filter(R=>new Date(R.date)>T).length:(e.role==="ABOGADO"||e.role==="CLIENTE")&&(V=A.filter(R=>{const B=new Date(R.date);return B.getDate()===T.getDate()&&B.getMonth()===T.getMonth()&&B.getFullYear()===T.getFullYear()}).length)}O&&typeof O.total=="number"&&(G=O.total),e.role==="ADMIN"&&Array.isArray(D)&&(W=D.length),n({totalCases:E,activeCases:L,pendingAppointments:V,recentDocuments:G,totalUsers:W});const _=[];e.role==="ABOGADO"&&M?(M.cases&&M.cases.length>0&&M.cases.forEach(T=>{_.push({action:`Expediente: ${T.title}`,time:T.createdAt,type:"case",id:T.id,link:`/lawyer/cases/${T.id}`,entityType:"Expediente"})}),M.tasks&&M.tasks.length>0&&M.tasks.forEach(T=>{var U,X,F;const R=((X=(U=T.client)==null?void 0:U.user)==null?void 0:X.name)||"Cliente",B=(F=T.expediente)!=null&&F.title?` - ${T.expediente.title}`:"";_.push({action:`Tarea: ${T.title} (${R}${B})`,time:new Date(T.createdAt).toLocaleDateString(),type:"task",id:T.id,link:`/lawyer/tasks/${T.id}`,entityType:"Tarea"})}),M.appointments&&M.appointments.length>0&&M.appointments.forEach(T=>{var B,U;const R=((U=(B=T.client)==null?void 0:B.user)==null?void 0:U.name)||"Cliente";_.push({action:`Cita: ${T.title} (${R})`,time:new Date(T.date).toLocaleDateString(),type:"appointment",id:T.id,link:`/lawyer/appointments/${T.id}`,entityType:"Cita"})}),M.provisions&&M.provisions.length>0&&M.provisions.forEach(T=>{var B,U;const R=((U=(B=T.client)==null?void 0:B.user)==null?void 0:U.name)||"Cliente";_.push({action:`Provisin: ${T.concept} (${R})`,time:new Date(T.createdAt).toLocaleDateString(),type:"provision",id:T.id,link:`/lawyer/provisiones/${T.id}`,entityType:"Provisin"})})):e.role==="CLIENTE"?(Array.isArray(I)&&I.forEach(T=>{_.push({action:`Expediente: ${T.title}`,time:T.createdAt,type:"case",id:T.id,link:`/client/cases/${T.id}`,entityType:"Expediente"})}),Array.isArray(A)&&A.slice(0,3).forEach(T=>{_.push({action:`Cita: ${T.title}`,time:new Date(T.date).toLocaleDateString(),type:"appointment",id:T.id,link:`/client/appointments/${T.id}`,entityType:"Cita"})})):(Array.isArray(I)&&I.forEach(T=>{_.push({action:`Expediente: ${T.title}`,time:T.createdAt,type:"case",id:T.id,link:`/admin/cases/${T.id}`,entityType:"Expediente"})}),e.role==="ADMIN"&&W>0&&_.push({action:`${W} usuarios registrados`,time:"Total",type:"user",link:"/admin/users",entityType:"user"})),d(_.slice(0,4)),m.current=!0,console.log("Dashboard loadDashboardData: Data fetch completed successfully for user:",w)}catch(S){console.error("Error fetching dashboard data:",S),l("Error al cargar las estadsticas del dashboard")}finally{h.current=!1,i(!1)}};p.useEffect(()=>{e&&window.location.pathname==="/dashboard"&&(e.role==="ADMIN"?t("/admin/dashboard",{replace:!0}):e.role==="ABOGADO"?t("/lawyer/dashboard",{replace:!0}):e.role==="CLIENTE"&&t("/client/dashboard",{replace:!0}))},[e,t]),p.useEffect(()=>{e?j():(u.current=null,m.current=!1,h.current=!1)},[e==null?void 0:e.id]);const y=(w,S)=>{if(w===0)return{value:"0%",positive:!1,neutral:!0};const C=Math.random()*20+5;return Math.random()>.3?{value:`+${C.toFixed(1)}%`,positive:!0,neutral:!1}:{value:`-${(C*.5).toFixed(1)}%`,positive:!1,neutral:!1}},v=()=>{const w=y(r.totalCases),S=y(r.activeCases),C=y(r.pendingAppointments),k=y(r.recentDocuments);return{cases:w,activeCases:S,appointments:C,documents:k}},f=()=>{const w=v();return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(es,{title:"Total Usuarios",value:r.totalUsers,change:y(r.totalUsers).value,positive:y(r.totalUsers).positive,neutral:y(r.totalUsers).neutral}),s.jsx(es,{title:"Expedientes Activos",value:r.activeCases,change:w.activeCases.value,positive:w.activeCases.positive,neutral:w.activeCases.neutral}),s.jsx(es,{title:"Citas Pendientes",value:r.pendingAppointments,change:w.appointments.value,positive:w.appointments.positive,neutral:w.appointments.neutral}),s.jsx(es,{title:"Documentos",value:r.recentDocuments,change:w.documents.value,positive:w.documents.positive,neutral:w.documents.neutral})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsx(jt,{title:"Gestin de Usuarios",description:"Administrar usuarios, roles y permisos",icon:"",link:"/admin/users",color:"blue"}),s.jsx(jt,{title:"Todos los Expedientes",description:"Ver y gestionar todos los casos",icon:"",link:"/admin/cases",color:"green"}),s.jsx(jt,{title:"Reportes y Estadsticas",description:"Anlisis y reportes del sistema",icon:"",link:"/admin/reports",color:"purple"}),s.jsx(jt,{title:"Configuracin del Sistema",description:"Configurar parmetros generales",icon:"",link:"/admin/settings",color:"gray"}),s.jsx(jt,{title:"Auditora",description:"Registros de actividad del sistema",icon:"",link:"/admin/audit",color:"yellow"}),s.jsx(jt,{title:"Backup y Restauracin",description:"Gestionar copias de seguridad",icon:"",link:"/admin/backup",color:"red"})]}),s.jsx(th,{role:"ADMIN",activities:c})]})},x=()=>{const w=v();return s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Estadsticas Principales"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(es,{title:"Mis Casos",value:r.totalCases,change:w.cases.value,positive:w.cases.positive,neutral:w.cases.neutral}),s.jsx(es,{title:"Casos Activos",value:r.activeCases,change:w.activeCases.value,positive:w.activeCases.positive,neutral:w.activeCases.neutral}),s.jsx(es,{title:"Citas Hoy",value:r.pendingAppointments,change:w.appointments.value,positive:w.appointments.positive,neutral:w.appointments.neutral}),s.jsx(es,{title:"Documentos",value:r.recentDocuments,change:w.documents.value,positive:w.documents.positive,neutral:w.documents.neutral})]}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Acciones Rpidas"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsx(jt,{title:"Mis Casos",description:"Gestionar casos asignados",icon:"",link:"/lawyer/cases",color:"blue"}),s.jsx(jt,{title:"Mis Clientes",description:"Ver informacin de clientes",icon:"",link:"/lawyer/clients",color:"green"}),s.jsx(jt,{title:"Provisin de Fondos",description:"Gestiona provisiones de fondos",icon:"",link:"/lawyer/provisiones",color:"blue"}),s.jsx(jt,{title:"Facturacin Electrnica",description:"Gestiona y firma tus facturas",icon:"",link:"/lawyer/facturacion",color:"green"}),s.jsx(jt,{title:"Calendario de Citas",description:"Programar y gestionar citas",icon:"",link:"/lawyer/appointments",color:"purple"}),s.jsx(jt,{title:"Documentos",description:"Gestionar documentos legales",icon:"",link:"/lawyer/documents",color:"yellow"}),s.jsx(jt,{title:"Tareas Pendientes",description:"Ver tareas y recordatorios",icon:"",link:"/lawyer/tasks",color:"red"})]}),s.jsx(th,{role:"ABOGADO",activities:c})]})},b=()=>{const w=v();return s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Mis Expedientes"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsx(es,{title:"Mis Casos",value:r.totalCases,change:w.cases.value,positive:w.cases.positive,neutral:w.cases.neutral}),s.jsx(es,{title:"Casos Activos",value:r.activeCases,change:w.activeCases.value,positive:w.activeCases.positive,neutral:w.activeCases.neutral}),s.jsx(es,{title:"Citas Hoy",value:r.pendingAppointments,change:w.appointments.value,positive:w.appointments.positive,neutral:w.appointments.neutral})]}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Acciones Rpidas"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsx(jt,{title:"Mis Expedientes",description:"Ver el estado de mis casos",icon:"",link:"/client/cases",color:"blue"}),s.jsx(jt,{title:"Mis Citas",description:"Ver y programar citas",icon:"",link:"/client/appointments",color:"green"}),s.jsx(jt,{title:"Documentos",description:"Acceder a mis documentos",icon:"",link:"/client/documents",color:"purple"}),s.jsx(jt,{title:"Contactar Abogado",description:"Enviar mensaje a mi abogado",icon:"",link:"/client/chat",color:"yellow"}),s.jsx(jt,{title:"Facturas",description:"Ver mis facturas",icon:"",link:"/client/invoices",color:"red"}),s.jsx(jt,{title:"Perfil",description:"Actualizar mi informacin",icon:"",link:"/client/profile",color:"gray"})]}),s.jsx(th,{role:"CLIENTE",activities:c})]})},N=()=>{if(!e)return s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando dashboard..."})]})});switch(e.role){case"ADMIN":return f();case"ABOGADO":return x();case"CLIENTE":return b();default:return s.jsxs("div",{className:"text-center py-12",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Rol no reconocido"}),s.jsx("p",{className:"text-gray-600",children:"Contacta al administrador del sistema."})]})}};return a?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando estadsticas..."})]})}):o?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Error"}),s.jsx("p",{className:"text-gray-600 mb-4",children:o}),s.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Reintentar"})]}):s.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),s.jsxs("p",{className:"mt-2 text-gray-600",children:["Bienvenido, ",(e==null?void 0:e.name)||"Usuario"]})]}),N()]})})},es=({title:e,value:t,change:r,positive:n,negative:a,neutral:i})=>s.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:s.jsx("div",{className:"p-5",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-md flex items-center justify-center",children:s.jsx("span",{className:"text-white text-sm font-medium",children:""})})}),s.jsx("div",{className:"ml-5 w-0 flex-1",children:s.jsxs("dl",{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:e}),s.jsxs("dd",{className:"flex items-baseline",children:[s.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:t}),s.jsx("div",{className:`ml-2 flex items-baseline text-sm font-semibold ${n?"text-green-600":a?"text-red-600":"text-gray-500"}`,children:r})]})]})})]})})}),jt=({title:e,description:t,icon:r,link:n,color:a})=>{const i=kr(),o=l=>{switch(l){case"blue":return"bg-blue-50 border-blue-200 hover:bg-blue-100";case"green":return"bg-green-50 border-green-200 hover:bg-green-100";case"purple":return"bg-purple-50 border-purple-200 hover:bg-purple-100";case"yellow":return"bg-yellow-50 border-yellow-200 hover:bg-yellow-100";case"red":return"bg-red-50 border-red-200 hover:bg-red-100";case"gray":return"bg-gray-50 border-gray-200 hover:bg-gray-100";default:return"bg-blue-50 border-blue-200 hover:bg-blue-100"}};return s.jsx("div",{className:`p-6 border rounded-lg cursor-pointer transition-colors duration-200 ${o(a)}`,onClick:()=>i(n),children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("span",{className:"text-2xl",children:r})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:e}),s.jsx("p",{className:"text-sm text-gray-600",children:t})]})]})})},th=({role:e,activities:t=[]})=>{const r=kr(),n=()=>t&&t.length>0?t:[{action:"Expediente creado",time:"Hace 2 horas",type:"case",link:"#"},{action:"Cita programada",time:"Hace 1 da",type:"appointment",link:"#"},{action:"Documento subido",time:"Hace 2 das",type:"document",link:"#"}],a=l=>{l.link&&l.link!=="#"&&r(l.link)},i=l=>{switch(l){case"case":return"";case"appointment":return"";case"document":return"";case"task":return"";case"provision":return"";case"user":return"";default:return""}},o=n();return s.jsxs("div",{className:"bg-white shadow rounded-lg",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Actividad Reciente"})}),s.jsx("div",{className:"divide-y divide-gray-200",children:o.length>0?o.map((l,c)=>s.jsx("div",{className:"px-6 py-4 hover:bg-gray-50 cursor-pointer transition-colors duration-150",onClick:()=>a(l),children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("span",{className:"text-lg",children:i(l.type)})}),s.jsxs("div",{className:"ml-4 flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:l.action}),s.jsx("p",{className:"text-sm text-gray-500",children:l.time})]})]})},c)):s.jsx("div",{className:"px-6 py-8 text-center",children:s.jsx("p",{className:"text-gray-500",children:"No hay actividad reciente"})})})]})};class Co extends Error{}Co.prototype.name="InvalidTokenError";function j6(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,r)=>{let n=r.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}function N6(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return j6(t)}catch{return atob(t)}}function w6(e,t){if(typeof e!="string")throw new Co("Invalid token specified: must be a string");t||(t={});const r=t.header===!0?0:1,n=e.split(".")[r];if(typeof n!="string")throw new Co(`Invalid token specified: missing part #${r+1}`);let a;try{a=N6(n)}catch(i){throw new Co(`Invalid token specified: invalid base64 for part #${r+1} (${i.message})`)}try{return JSON.parse(a)}catch(i){throw new Co(`Invalid token specified: invalid json for part #${r+1} (${i.message})`)}}const S6=()=>{const e=kr(),{login:t}=we(),[r,n]=p.useState({email:"",password:""}),[a,i]=p.useState(""),[o,l]=p.useState(!1),c=u=>{const{name:m,value:h}=u.target;n(g=>({...g,[m]:h}))},d=async u=>{u.preventDefault();try{i(""),l(!0),await t(r.email,r.password);const m=localStorage.getItem("token");if(m){const h=w6(m);switch(console.log("Usuario decodificado:",h),h.role){case"ADMIN":e("/admin/dashboard");break;case"ABOGADO":e("/lawyer/dashboard");break;case"CLIENTE":e("/client/dashboard");break;default:e("/")}}}catch(m){console.error("Error completo:",m),i("Error al iniciar sesin. Por favor, verifique sus credenciales.")}finally{l(!1)}};return s.jsx("div",{className:"min-h-[calc(100vh-64px)] flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full space-y-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Iniciar Sesin"}),s.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["No tiene una cuenta?"," ",s.jsx(be,{to:"/register",className:"font-medium text-blue-600 hover:text-blue-500",children:"Regstrese aqu"})]})]}),s.jsxs("form",{className:"mt-8 space-y-6",onSubmit:d,children:[a&&s.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:s.jsx("span",{className:"block sm:inline",children:a})}),s.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"sr-only",children:"Correo Electrnico"}),s.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Correo Electrnico",value:r.email,onChange:c})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"sr-only",children:"Contrasea"}),s.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Contrasea",value:r.password,onChange:c})]})]}),s.jsx("div",{className:"flex items-center justify-between",children:s.jsx("div",{className:"text-sm",children:s.jsx(be,{to:"/forgot-password",className:"font-medium text-blue-600 hover:text-blue-500",children:"Olvid su contrasea?"})})}),s.jsx("div",{children:s.jsx("button",{type:"submit",disabled:o,className:`group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${o?"opacity-50 cursor-not-allowed":""}`,children:o?"Iniciando sesin...":"Iniciar Sesin"})})]})]})})},C6=()=>{const e=kr(),{register:t}=we(),[r,n]=p.useState({email:"",password:"",confirmPassword:"",name:"",role:"CLIENTE"}),[a,i]=p.useState(""),[o,l]=p.useState(!1),c=u=>{const{name:m,value:h}=u.target;n(g=>({...g,[m]:h}))},d=async u=>{if(u.preventDefault(),r.password!==r.confirmPassword)return i("Las contraseas no coinciden");try{i(""),l(!0),await t({email:r.email,password:r.password,name:r.name,role:r.role}),e("/dashboard")}catch{i("Error al crear la cuenta. Por favor, intntelo de nuevo.")}finally{l(!1)}};return s.jsx("div",{className:"min-h-[calc(100vh-64px)] flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full space-y-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Crear una cuenta"}),s.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Ya tiene una cuenta?"," ",s.jsx(be,{to:"/login",className:"font-medium text-blue-600 hover:text-blue-500",children:"Inicie sesin aqu"})]})]}),s.jsxs("form",{className:"mt-8 space-y-6",onSubmit:d,children:[a&&s.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:s.jsx("span",{className:"block sm:inline",children:a})}),s.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"name",className:"sr-only",children:"Nombre Completo"}),s.jsx("input",{id:"name",name:"name",type:"text",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Nombre Completo",value:r.name,onChange:c})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"sr-only",children:"Correo Electrnico"}),s.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Correo Electrnico",value:r.email,onChange:c})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"sr-only",children:"Contrasea"}),s.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Contrasea",value:r.password,onChange:c})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"confirmPassword",className:"sr-only",children:"Confirmar Contrasea"}),s.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Confirmar Contrasea",value:r.confirmPassword,onChange:c})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"role",className:"sr-only",children:"Tipo de Usuario"}),s.jsxs("select",{id:"role",name:"role",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",value:r.role,onChange:c,children:[s.jsx("option",{value:"CLIENTE",children:"Cliente"}),s.jsx("option",{value:"ABOGADO",children:"Abogado"})]})]})]}),s.jsx("div",{children:s.jsx("button",{type:"submit",disabled:o,className:`group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${o?"opacity-50 cursor-not-allowed":""}`,children:o?"Creando cuenta...":"Registrarse"})})]})]})})},E6=()=>s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto h-16 w-16 text-gray-400",children:s.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 12h6m-6-4h6m2 5.291A7.962 7.962 0 0112 15c-2.34 0-4.47-.881-6.08-2.33"})})}),s.jsx("h1",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Pgina No Encontrada"}),s.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Lo sentimos, la pgina que buscas no existe o ha sido movida."})]}),s.jsxs("div",{className:"flex flex-col space-y-3",children:[s.jsx(be,{to:"/",className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Ir al Inicio"}),s.jsx(be,{to:"/contact",className:"group relative w-full flex justify-center py-2 px-4 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Contactar Soporte"})]})]})}),rh=({allowedRoles:e})=>{const{user:t,loading:r}=we();return r?s.jsx("div",{children:"Cargando..."}):!t||!e.includes(t.role)?s.jsx(VN,{to:"/login",replace:!0}):s.jsx(ox,{})},k6=()=>{const{user:e,loading:t}=we();return t?s.jsx("div",{children:"Cargando..."}):e?s.jsx(ox,{}):s.jsx(VN,{to:"/login",replace:!0})},Sc=({title:e,description:t,icon:r=""})=>s.jsx("div",{className:"min-h-[calc(100vh-200px)] flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full text-center",children:[s.jsx("div",{className:"text-6xl mb-6",children:r}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:e}),s.jsx("p",{className:"text-lg text-gray-600 mb-8",children:t||"Esta funcionalidad est en desarrollo y estar disponible pronto."}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Prximas funcionalidades:"}),s.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[s.jsx("li",{children:" Interfaz completa y funcional"}),s.jsx("li",{children:" Integracin con backend"}),s.jsx("li",{children:" Gestin de datos en tiempo real"}),s.jsx("li",{children:" Reportes y estadsticas"})]})]}),s.jsx(be,{to:"/dashboard",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Volver al Dashboard"})]})]})}),D6=()=>{const[e,t]=p.useState([]),[r,n]=p.useState([]),[a,i]=p.useState(!0),[o,l]=p.useState(null),[c,d]=p.useState(""),[u,m]=p.useState("todos"),[h,g]=p.useState(null),{user:j}=we(),[y,v]=p.useState([]);return p.useEffect(()=>{(async()=>{try{i(!0);const x=localStorage.getItem("token"),[b,N]=await Promise.all([Q.get("/cases",{headers:{Authorization:`Bearer ${x}`}}),Q.get("/cases/stats",{headers:{Authorization:`Bearer ${x}`}})]);t(b.data),l(N.data),g(null)}catch(x){console.error("Error fetching cases:",x),g("Error al cargar los expedientes")}finally{i(!1)}})()},[]),p.useEffect(()=>{(async()=>{try{const x=localStorage.getItem("token"),b=await Q.get("/chat/conversations",{headers:{Authorization:`Bearer ${x}`}});v(b.data)}catch{}})()},[]),p.useEffect(()=>{let f=e;c&&(f=f.filter(x=>{var b;return x.title.toLowerCase().includes(c.toLowerCase())||x.client.user.name.toLowerCase().includes(c.toLowerCase())||((b=x.description)==null?void 0:b.toLowerCase().includes(c.toLowerCase()))})),u!=="todos"&&(f=f.filter(x=>x.status===u)),n(f)},[e,c,u]),a?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):h?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 text-xl mb-4",children:"Error"}),s.jsx("div",{className:"text-gray-600",children:h}),s.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700","aria-label":"Reintentar cargar los expedientes",children:"Reintentar"})]})}):s.jsx("div",{className:"py-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mis Expedientes"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Gestiona y da seguimiento a todos tus casos legales"})]}),s.jsx(be,{to:"/lawyer/cases/new",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2","aria-label":"Crear un nuevo expediente",children:"Nuevo Expediente"})]})}),o&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6 col-span-full",children:"Estadsticas de Expedientes"}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Expedientes"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:o.total})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-green-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Abiertos"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:o.abiertos})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-yellow-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"En Proceso"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:o.enProceso})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-gray-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Cerrados"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:o.cerrados})]})]})})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Filtros de Bsqueda"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"search-cases",className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar"}),s.jsx("input",{id:"search-cases",type:"text",placeholder:"Buscar por ttulo, cliente o descripcin...",value:c,onChange:f=>d(f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-describedby":"search-cases-help"}),s.jsx("div",{id:"search-cases-help",className:"sr-only",children:"Busque expedientes por ttulo, nombre del cliente o descripcin"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"status-filter",className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado"}),s.jsxs("select",{id:"status-filter",value:u,onChange:f=>m(f.target.value),"aria-label":"Filtrar por estado",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-describedby":"status-filter-help",children:[s.jsx("option",{value:"todos",children:"Todos los estados"}),s.jsx("option",{value:"ABIERTO",children:"Abierto"}),s.jsx("option",{value:"EN_PROCESO",children:"En Proceso"}),s.jsx("option",{value:"CERRADO",children:"Cerrado"})]}),s.jsx("div",{id:"status-filter-help",className:"sr-only",children:"Filtre los expedientes por su estado actual"})]}),s.jsx("div",{className:"flex items-end",children:s.jsx("button",{onClick:()=>{d(""),m("todos")},className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2","aria-label":"Limpiar todos los filtros de bsqueda",children:"Limpiar Filtros"})})]})]}),s.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 p-6 border-b border-gray-200",children:"Lista de Expedientes"}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID de Expediente"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ttulo"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(f=>{const x=y.find(b=>b.userId===f.client.user.id);return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 flex items-center gap-2",children:[s.jsx("span",{children:f.id}),s.jsx("button",{className:"ml-2 px-2 py-1 text-xs bg-gray-200 rounded hover:bg-gray-300",title:"Copiar ID",onClick:()=>navigator.clipboard.writeText(f.id),"aria-label":`Copiar ID del expediente ${f.id} al portapapeles`,children:"Copiar"})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:f.title}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 flex items-center gap-2",children:[f.client.user.name,x&&x.unreadCount>0&&s.jsxs("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-yellow-100 text-yellow-800",title:"Mensajes no ledos",role:"status","aria-label":`${x.unreadCount} mensaje${x.unreadCount>1?"s":""} no ledo${x.unreadCount>1?"s":""} de ${f.client.user.name}`,children:[s.jsx("svg",{className:"w-3 h-3 mr-1 text-yellow-600",fill:"currentColor",viewBox:"0 0 20 20","aria-hidden":"true",children:s.jsx("path",{d:"M10 2a8 8 0 100 16 8 8 0 000-16zm1 12H9v-2h2v2zm0-4H9V6h2v4z"})}),x.unreadCount]})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:f.status}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(be,{to:`/lawyer/cases/${f.id}`,className:"text-blue-600 hover:text-blue-900","aria-label":`Ver detalles del expediente ${f.title}`,children:"Ver"}),s.jsx(be,{to:`/lawyer/cases/${f.id}/edit`,className:"text-green-600 hover:text-green-900","aria-label":`Editar expediente ${f.title}`,children:"Editar"})]})})]},f.id)})})]})})]}),r.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsx("h4",{className:"mt-2 text-sm font-medium text-gray-900",children:"No se encontraron expedientes"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Intenta ajustar los filtros o crear un nuevo expediente."})]})]})})},A6=()=>{const e=kr(),{user:t}=we(),[r,n]=p.useState(!1),[a,i]=p.useState(!1),[o,l]=p.useState(null),[c,d]=p.useState([]),[u,m]=p.useState([]),[h,g]=p.useState({title:"",description:"",clientId:"",lawyerId:(t==null?void 0:t.role)==="ABOGADO"?t.id:""});p.useEffect(()=>{(async()=>{try{n(!0);const f=localStorage.getItem("token"),[x,b]=await Promise.all([Q.get("/users/clients"),Q.get("/users/lawyers")]);d(x.data),m(b.data)}catch(f){console.error("Error fetching data:",f),l("Error al cargar los datos")}finally{n(!1)}})()},[t]);const j=v=>{const{name:f,value:x}=v.target;g(b=>({...b,[f]:x}))},y=async v=>{var f,x;if(v.preventDefault(),!h.title||!h.clientId||!h.lawyerId){l("Por favor completa todos los campos obligatorios");return}try{i(!0),l(null);const b=localStorage.getItem("token");await Q.post("/cases",h,{headers:{Authorization:`Bearer ${b}`}}),e("/lawyer/cases")}catch(b){console.error("Error creating case:",b),l(((x=(f=b.response)==null?void 0:f.data)==null?void 0:x.message)||"Error al crear el expediente")}finally{i(!1)}};return r?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):s.jsx("div",{className:"py-6",children:s.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Nuevo Expediente"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Crea un nuevo expediente legal"})]}),s.jsx("button",{onClick:()=>e("/lawyer/cases"),className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Cancelar"})]})}),s.jsx("div",{className:"bg-white shadow rounded-lg",children:s.jsxs("form",{onSubmit:y,className:"p-6 space-y-6",children:[o&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md",children:o}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Ttulo del Expediente *"}),s.jsx("input",{type:"text",id:"title",name:"title",value:h.title,onChange:j,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: Contrato de Compraventa"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripcin"}),s.jsx("textarea",{id:"description",name:"description",value:h.description,onChange:j,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe brevemente el caso..."})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"clientId",className:"block text-sm font-medium text-gray-700 mb-2",children:"Cliente *"}),s.jsxs("select",{id:"clientId",name:"clientId",value:h.clientId,onChange:j,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Selecciona un cliente"}),c.filter(v=>v.user).length===0&&s.jsx("option",{disabled:!0,value:"",children:"No hay clientes disponibles"}),c.filter(v=>v.user).map(v=>{var f,x;return s.jsxs("option",{value:v.id,children:[((f=v.user)==null?void 0:f.name)||"Sin nombre"," - ",((x=v.user)==null?void 0:x.email)||"Sin email"," (DNI: ",v.dni,")"]},v.id)})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"lawyerId",className:"block text-sm font-medium text-gray-700 mb-2",children:"Abogado Asignado *"}),s.jsxs("select",{id:"lawyerId",name:"lawyerId",value:h.lawyerId,onChange:j,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:(t==null?void 0:t.role)==="ABOGADO",children:[s.jsx("option",{value:"",children:"Selecciona un abogado"}),u.map(v=>s.jsxs("option",{value:v.id,children:[v.name," - ",v.email]},v.id))]}),(t==null?void 0:t.role)==="ABOGADO"&&s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Sers asignado automticamente como abogado responsable"})]}),s.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:()=>e("/lawyer/cases"),className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Cancelar"}),s.jsx("button",{type:"submit",disabled:a,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Creando...":"Crear Expediente"})]})]})})]})})},T6=({value:e,onChange:t,required:r=!1,className:n="",placeholder:a="Seleccionar fecha y hora"})=>{const[i,o]=p.useState(!1),[l,c]=p.useState(""),[d,u]=p.useState(""),[m,h]=p.useState(new Date),[g,j]=p.useState(!1),y=p.useRef(null);p.useEffect(()=>{if(e)try{const C=new Date(e);isNaN(C.getTime())||(c(C.toISOString().split("T")[0]),u(`${C.getHours().toString().padStart(2,"0")}:${C.getMinutes().toString().padStart(2,"0")}`))}catch(C){console.error("Error parsing date value:",C),c(""),u("")}else c(""),u("")},[e]),p.useEffect(()=>{const C=k=>{y.current&&!y.current.contains(k.target)&&(o(!1),j(!1))};return i&&document.addEventListener("mousedown",C),()=>{document.removeEventListener("mousedown",C)}},[i]);const v=()=>{const C=[],k=new Date;for(let A=0;A<14;A++){const O=new Date(k);O.setDate(k.getDate()+A),O.getDay()>=1&&O.getDay()<=5&&C.push(new Date(O))}return C},f=()=>["09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","16:00","16:30","17:00","17:30"],x=C=>{const k=C.toISOString().split("T")[0];if(c(k),j(!1),d){const A=`${k}T${d}:00`;t(A)}},b=C=>{if(u(C),j(!1),l){const k=`${l}T${C}:00`;t(k)}},N=()=>{if(l&&d)try{const C=new Date(`${l}T${d}:00`);if(!isNaN(C.getTime()))return C.toLocaleString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch(C){console.error("Error formatting date:",C)}return""},w=v(),S=f();return s.jsxs("div",{className:`relative ${n}`,ref:y,children:[s.jsx("input",{type:"text",value:N(),readOnly:!0,required:r,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white cursor-pointer",placeholder:a,onClick:()=>{o(!i),r&&!l&&!d&&j(!0)},onInvalid:C=>{C.preventDefault()}}),g&&r&&!l&&!d&&s.jsx("div",{className:"absolute top-full left-0 mt-1 px-3 py-2 bg-orange-100 border border-orange-300 rounded-md text-orange-800 text-sm z-[99999] whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("svg",{className:"w-4 h-4 mr-1 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Completa este campo"]})}),i&&s.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-md shadow-lg z-[99999] max-h-80 overflow-y-auto",children:s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold mb-3 text-gray-700",children:"Fecha"}),s.jsx("div",{className:"space-y-2",children:w.map(C=>s.jsx("button",{onClick:()=>x(C),className:`w-full p-2 text-left rounded border transition-colors ${l===C.toISOString().split("T")[0]?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-200 hover:bg-gray-50"}`,children:C.toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},C.toISOString()))})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold mb-3 text-gray-700",children:"Hora"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:S.map(C=>s.jsx("button",{onClick:()=>b(C),className:`p-2 text-center rounded border transition-colors ${d===C?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-200 hover:bg-gray-50"}`,children:C},C))})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 mt-4 pt-4 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:()=>{o(!1),j(!1)},className:"px-3 py-1 text-sm bg-gray-200 text-gray-700 rounded hover:bg-gray-300",children:"Cancelar"}),s.jsx("button",{type:"button",onClick:()=>{o(!1),j(!1)},className:"px-3 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600",children:"Aceptar"})]})]})})]})},yw=({expedienteId:e,expedienteData:t,onAppointmentCreated:r,onNoteAdded:n,onMessageSent:a})=>{var b,N,w,S,C,k,A,O,D,I,M,E,L,V,G,W,_,T,R,B;const{user:i}=we(),[o,l]=p.useState(null),[c,d]=p.useState({}),[u,m]=p.useState(!1),[h,g]=p.useState(null),[j,y]=p.useState(null),v=()=>{l(null),d({}),g(null),y(null)},f=U=>{d({...c,[U.target.name]:U.target.value})},x=async U=>{var X,F,H,Y,K,le,q,ce;if(U.preventDefault(),m(!0),g(null),y(null),o==="cita"){if((i==null?void 0:i.role)==="CLIENTE"){let ae=(X=t==null?void 0:t.lawyer)==null?void 0:X.id;if(!ae){g("No se pudo obtener el abogado del expediente."),m(!1);return}try{const xe=localStorage.getItem("token"),Ce={lawyerId:ae,date:c.datetime,location:c.location||"",notes:c.notes||""},He=await Q.post("/appointments",Ce,{headers:{Authorization:`Bearer ${xe}`}});y("Cita programada con xito"),r&&r(He.data),setTimeout(v,1200)}catch(xe){g(((H=(F=xe.response)==null?void 0:F.data)==null?void 0:H.message)||"Error al programar la cita")}finally{m(!1)}return}else if((i==null?void 0:i.role)==="ABOGADO"||(i==null?void 0:i.role)==="ADMIN"){let ae=(Y=t==null?void 0:t.client)==null?void 0:Y.id;if(!ae){g("No se pudo obtener el cliente del expediente."),m(!1);return}try{const xe=localStorage.getItem("token"),Ce={clientId:ae,date:c.datetime,location:c.location||"",notes:c.notes||""},He=await Q.post("/appointments/lawyer",Ce,{headers:{Authorization:`Bearer ${xe}`}});y("Cita programada con xito"),r&&r(He.data),setTimeout(v,1200)}catch(xe){g(((le=(K=xe.response)==null?void 0:K.data)==null?void 0:le.message)||"Error al programar la cita")}finally{m(!1)}return}}else if(o==="nota"){try{const ae=localStorage.getItem("token"),xe={expedienteId:e,title:c.title||"Nota del expediente",content:c.note,isPrivate:c.isPrivate||!1},Ce=await Q.post("/notes",xe,{headers:{Authorization:`Bearer ${ae}`}});y("Nota agregada con xito"),n&&n(Ce.data),setTimeout(v,1200)}catch(ae){g(((ce=(q=ae.response)==null?void 0:q.data)==null?void 0:ce.message)||"Error al agregar la nota")}finally{m(!1)}return}setTimeout(()=>{m(!1),y("Accin realizada con xito"),o==="mensaje"&&a&&a(c),setTimeout(v,1e3)},800)};return s.jsxs("div",{className:"flex flex-col md:flex-row gap-2 md:gap-4",children:[(i==null?void 0:i.role)==="CLIENTE"&&s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:()=>l("cita"),"aria-label":"Programar cita con el abogado",children:"Programar Cita"}),s.jsx("button",{className:"px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700",onClick:()=>l("mensaje"),"aria-label":"Enviar mensaje al abogado",children:"Enviar Mensaje"})]}),((i==null?void 0:i.role)==="ABOGADO"||(i==null?void 0:i.role)==="ADMIN")&&s.jsxs(s.Fragment,{children:[s.jsx("button",{className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",onClick:()=>l("nota"),"aria-label":"Agregar nota interna al expediente",children:"Agregar Nota"}),s.jsx("button",{className:"px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700",onClick:()=>l("mensaje"),"aria-label":"Enviar mensaje al cliente",children:"Enviar Mensaje"}),s.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:()=>l("cita"),"aria-label":"Programar cita con el cliente",children:"Programar Cita"})]}),s.jsx($o,{isOpen:o==="cita",onClose:v,title:"Programar Cita",description:(i==null?void 0:i.role)==="CLIENTE"?`Programe una cita con ${((b=t==null?void 0:t.lawyer)==null?void 0:b.name)||"su abogado"} para este expediente`:`Programe una cita con ${((w=(N=t==null?void 0:t.client)==null?void 0:N.user)==null?void 0:w.name)||"el cliente"} para este expediente`,size:"md",children:s.jsxs("form",{onSubmit:x,className:"space-y-4",children:[s.jsx("input",{type:"hidden",name:"expedienteId",value:e||""}),(i==null?void 0:i.role)==="CLIENTE"?s.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-md p-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),s.jsx("span",{className:"text-sm font-medium text-green-900",children:"Abogado:"}),s.jsx("span",{className:"text-sm text-green-700",children:((S=t==null?void 0:t.lawyer)==null?void 0:S.name)||"Abogado no asignado"})]}),((C=t==null?void 0:t.lawyer)==null?void 0:C.email)&&s.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[s.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),s.jsx("span",{className:"text-sm text-green-700",children:t.lawyer.email})]})]}):s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),s.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Cliente:"}),s.jsx("span",{className:"text-sm text-blue-700",children:((A=(k=t==null?void 0:t.client)==null?void 0:k.user)==null?void 0:A.name)||"Cliente no especificado"})]}),((D=(O=t==null?void 0:t.client)==null?void 0:O.user)==null?void 0:D.email)&&s.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[s.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),s.jsx("span",{className:"text-sm text-blue-700",children:t.client.user.email})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"datetime",className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha y hora"}),s.jsx(T6,{value:c.datetime||"",onChange:U=>d({...c,datetime:U}),required:!0,placeholder:"Seleccionar fecha y hora para la cita"}),s.jsx("div",{id:"datetime-help",className:"sr-only",children:"Seleccione la fecha y hora para la cita"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"location",className:"block text-sm font-medium text-gray-700 mb-1",children:"Lugar"}),s.jsx("input",{id:"location",type:"text",name:"location",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onChange:f,placeholder:"Ingrese el lugar de la cita","aria-describedby":"location-help"}),s.jsx("div",{id:"location-help",className:"sr-only",children:"Especifique el lugar donde se realizar la cita"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas"}),s.jsx("textarea",{id:"notes",name:"notes",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onChange:f,placeholder:"Ingrese notas adicionales (opcional)","aria-describedby":"notes-help"}),s.jsx("div",{id:"notes-help",className:"sr-only",children:"Agregue informacin adicional sobre la cita"})]}),h&&s.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",role:"alert","aria-live":"polite",children:s.jsx("p",{className:"text-red-600 text-sm",children:h})}),j&&s.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md",role:"alert","aria-live":"polite",children:s.jsx("p",{className:"text-green-600 text-sm",children:j})}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4 sticky bottom-0 bg-white border-t border-gray-200 mt-4 -mx-6 px-6 py-4 modal-actions",children:[s.jsx("button",{type:"button",onClick:v,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 relative z-20","aria-label":"Cancelar programacin de cita",style:{position:"relative",zIndex:20},children:"Cancelar"}),s.jsx("button",{type:"submit",disabled:u,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed relative z-20","aria-label":"Guardar cita programada",style:{position:"relative",zIndex:20},children:u?"Guardando...":"Guardar"})]})]})}),s.jsx($o,{isOpen:o==="nota",onClose:v,title:"Agregar Nota",description:"Agregue una nota interna al expediente para su seguimiento",size:"md",children:s.jsxs("form",{onSubmit:x,className:"space-y-4",children:[s.jsx("input",{type:"hidden",name:"expedienteId",value:e||""}),s.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-md p-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsx("span",{className:"text-sm font-medium text-green-900",children:"Expediente:"}),s.jsx("span",{className:"text-sm text-green-700",children:(t==null?void 0:t.title)||e||"Expediente"})]}),s.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[s.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),s.jsxs("span",{className:"text-sm text-green-700",children:["Cliente: ",((M=(I=t==null?void 0:t.client)==null?void 0:I.user)==null?void 0:M.name)||"No especificado"]})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"nota-title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Ttulo de la nota"}),s.jsx("input",{id:"nota-title",name:"title",type:"text",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",onChange:f,placeholder:"Ttulo descriptivo de la nota...","aria-describedby":"nota-title-help"}),s.jsx("div",{id:"nota-title-help",className:"sr-only",children:"Ingrese un ttulo descriptivo para la nota"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"nota-textarea",className:"block text-sm font-medium text-gray-700 mb-1",children:"Contenido de la nota"}),s.jsx("textarea",{id:"nota-textarea",name:"note",required:!0,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",onChange:f,placeholder:"Escriba el contenido de la nota interna sobre este expediente...","aria-describedby":"nota-help"}),s.jsx("div",{id:"nota-help",className:"sr-only",children:"Escriba el contenido de la nota interna que ser agregada al expediente para el seguimiento del caso"})]}),((i==null?void 0:i.role)==="ABOGADO"||(i==null?void 0:i.role)==="ADMIN")&&s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{id:"nota-private",name:"isPrivate",type:"checkbox",className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded",onChange:U=>d({...c,isPrivate:U.target.checked})}),s.jsx("label",{htmlFor:"nota-private",className:"ml-2 block text-sm text-gray-700",children:"Nota privada (solo visible para abogados)"})]}),h&&s.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",role:"alert","aria-live":"polite",children:s.jsx("p",{className:"text-red-600 text-sm",children:h})}),j&&s.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md",role:"alert","aria-live":"polite",children:s.jsx("p",{className:"text-green-600 text-sm",children:j})}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:v,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2","aria-label":"Cancelar agregar nota",children:"Cancelar"}),s.jsx("button",{type:"submit",disabled:u,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Guardar nota agregada",children:u?"Guardando...":"Guardar"})]})]})}),s.jsx($o,{isOpen:o==="mensaje",onClose:v,title:"Enviar Mensaje",description:(i==null?void 0:i.role)==="CLIENTE"?`Enve un mensaje a ${((E=t==null?void 0:t.lawyer)==null?void 0:E.name)||"su abogado"} relacionado con este expediente`:`Enve un mensaje a ${((V=(L=t==null?void 0:t.client)==null?void 0:L.user)==null?void 0:V.name)||"el cliente"} relacionado con este expediente`,size:"md",children:s.jsxs("form",{onSubmit:x,className:"space-y-4",children:[s.jsx("input",{type:"hidden",name:"expedienteId",value:e||""}),(i==null?void 0:i.role)==="CLIENTE"?s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),s.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Destinatario:"}),s.jsx("span",{className:"text-sm text-blue-700",children:((G=t==null?void 0:t.lawyer)==null?void 0:G.name)||"Abogado no asignado"})]}),((W=t==null?void 0:t.lawyer)==null?void 0:W.email)&&s.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[s.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),s.jsx("span",{className:"text-sm text-blue-700",children:t.lawyer.email})]})]}):s.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-md p-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("svg",{className:"w-4 h-4 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),s.jsx("span",{className:"text-sm font-medium text-purple-900",children:"Destinatario:"}),s.jsx("span",{className:"text-sm text-purple-700",children:((T=(_=t==null?void 0:t.client)==null?void 0:_.user)==null?void 0:T.name)||"Cliente no especificado"})]}),((B=(R=t==null?void 0:t.client)==null?void 0:R.user)==null?void 0:B.email)&&s.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[s.jsx("svg",{className:"w-4 h-4 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),s.jsx("span",{className:"text-sm text-purple-700",children:t.client.user.email})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"mensaje-textarea",className:"block text-sm font-medium text-gray-700 mb-1",children:"Mensaje"}),s.jsx("textarea",{id:"mensaje-textarea",name:"message",required:!0,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500",onChange:f,placeholder:(i==null?void 0:i.role)==="CLIENTE"?"Escriba su mensaje aqu. Este mensaje ser enviado a su abogado...":"Escriba su mensaje aqu. Este mensaje ser enviado al cliente...","aria-describedby":"mensaje-help"}),s.jsx("div",{id:"mensaje-help",className:"sr-only",children:(i==null?void 0:i.role)==="CLIENTE"?"Escriba el mensaje que desea enviar a su abogado":"Escriba el mensaje que desea enviar al cliente"})]}),h&&s.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",role:"alert","aria-live":"polite",children:s.jsx("p",{className:"text-red-600 text-sm",children:h})}),j&&s.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md",role:"alert","aria-live":"polite",children:s.jsx("p",{className:"text-green-600 text-sm",children:j})}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:v,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2","aria-label":"Cancelar envo de mensaje",children:"Cancelar"}),s.jsx("button",{type:"submit",disabled:u,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Enviar mensaje",children:u?"Enviando...":"Enviar"})]})]})})]})},_6=({expedienteId:e,onNoteAdded:t})=>{const{user:r}=we(),[n,a]=p.useState([]),[i,o]=p.useState(!0),[l,c]=p.useState(null),[d,u]=p.useState(null),[m,h]=p.useState({title:"",content:""}),[g,j]=p.useState(""),[y,v]=p.useState("all"),[f,x]=p.useState("all"),[b,N]=p.useState(""),[w,S]=p.useState(""),[C,k]=p.useState(!1),[A,O]=p.useState({title:"",content:"",isPrivate:!1});p.useEffect(()=>{D()},[e]);const D=async()=>{var T,R,B;try{console.log("Fetching notes for expediente:",e);const U=[{id:"1",title:"Nota de prueba del expediente",content:"Esta es una nota de prueba para verificar que el sistema funciona correctamente. Contiene informacin importante sobre el caso.",isPrivate:!1,createdAt:new Date().toISOString(),author:{id:(r==null?void 0:r.id)||"1",name:(r==null?void 0:r.name)||"Usuario Test",email:(r==null?void 0:r.email)||"test@example.com"}},{id:"2",title:"Segunda nota de prueba",content:"Esta es otra nota para verificar que se muestran mltiples notas. Incluye detalles adicionales sobre el progreso del caso.",isPrivate:!1,createdAt:new Date(Date.now()-864e5).toISOString(),author:{id:(r==null?void 0:r.id)||"1",name:(r==null?void 0:r.name)||"Usuario Test",email:(r==null?void 0:r.email)||"test@example.com"}},{id:"3",title:"Nota privada del abogado",content:"Esta es una nota privada que solo debe ser visible para abogados y administradores.",isPrivate:!0,createdAt:new Date(Date.now()-1728e5).toISOString(),author:{id:(r==null?void 0:r.id)||"1",name:(r==null?void 0:r.name)||"Usuario Test",email:(r==null?void 0:r.email)||"test@example.com"}}],X=localStorage.getItem("token");console.log("Token:",X?"Present":"Missing");const F=await Q.get(`/notes/expediente/${e}`,{headers:{Authorization:`Bearer ${X}`}});console.log("Notes response:",F.data),a(F.data)}catch(U){console.error("Error fetching notes:",U),console.error("Error response:",(T=U.response)==null?void 0:T.data),c(((B=(R=U.response)==null?void 0:R.data)==null?void 0:B.message)||"Error al cargar las notas")}finally{o(!1)}},I=T=>{u(T.id),h({title:T.title,content:T.content})},M=async T=>{var R,B;try{const U=localStorage.getItem("token"),X=await Q.patch(`/notes/${T}`,m,{headers:{Authorization:`Bearer ${U}`}});a(n.map(F=>F.id===T?X.data:F)),u(null),h({title:"",content:""})}catch(U){c(((B=(R=U.response)==null?void 0:R.data)==null?void 0:B.message)||"Error al actualizar la nota")}},E=async T=>{var R,B;if(window.confirm("Est seguro de que desea eliminar esta nota?"))try{const U=localStorage.getItem("token");await Q.delete(`/notes/${T}`,{headers:{Authorization:`Bearer ${U}`}}),a(n.filter(X=>X.id!==T))}catch(U){c(((B=(R=U.response)==null?void 0:R.data)==null?void 0:B.message)||"Error al eliminar la nota")}},L=T=>T.author.id===(r==null?void 0:r.id)||(r==null?void 0:r.role)==="ADMIN",V=T=>T.author.id===(r==null?void 0:r.id)||(r==null?void 0:r.role)==="ADMIN",G=T=>{const R=new Date(T),U=Math.abs(new Date().getTime()-R.getTime()),X=Math.ceil(U/(1e3*60*60*24));return X===1?"Ayer":X===0?"Hoy":X<7?`Hace ${X} das`:R.toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"})},W=async()=>{var T,R;try{const B=localStorage.getItem("token"),U={expedienteId:e,title:A.title,content:A.content,isPrivate:A.isPrivate},X=await Q.post("/notes",U,{headers:{Authorization:`Bearer ${B}`}});a([X.data,...n]),O({title:"",content:"",isPrivate:!1}),k(!1)}catch(B){c(((R=(T=B.response)==null?void 0:T.data)==null?void 0:R.message)||"Error al crear la nota")}},_=n.filter(T=>{const R=T.title.toLowerCase().includes(g.toLowerCase())||T.content.toLowerCase().includes(g.toLowerCase()),B=y==="all"||y==="public"&&!T.isPrivate||y==="private"&&T.isPrivate,U=new Date(T.createdAt),X=new Date,F=new Date(X.getFullYear(),X.getMonth(),X.getDate()),H=new Date(X.getFullYear(),X.getMonth(),X.getDate()-X.getDay()),Y=new Date(X.getFullYear(),X.getMonth(),1);let K=!0;switch(f){case"today":K=U>=F;break;case"week":K=U>=H;break;case"month":K=U>=Y;break;case"custom":if(b&&w){const le=new Date(b),q=new Date(w);q.setHours(23,59,59,999),K=U>=le&&U<=q}else if(b){const le=new Date(b);K=U>=le}else if(w){const le=new Date(w);le.setHours(23,59,59,999),K=U<=le}break;default:K=!0}return R&&B&&K});return i?s.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Notas del Expediente"}),s.jsxs("div",{className:"text-center py-4",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Cargando notas..."})]})]}):s.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Notas del Expediente"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:D,className:"px-3 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500","aria-label":"Recargar notas","aria-describedby":"recargar-notas-help",children:" Recargar"}),s.jsx("div",{id:"recargar-notas-help",className:"sr-only",children:"Actualizar la lista de notas del expediente"}),s.jsx("button",{onClick:()=>k(!C),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Crear nueva nota","aria-describedby":"crear-nota-help",children:C?"Cancelar":"Crear Nota"}),s.jsx("div",{id:"crear-nota-help",className:"sr-only",children:C?"Cancelar la creacin de una nueva nota":"Abrir formulario para crear una nueva nota"})]})]}),l&&s.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:s.jsx("p",{className:"text-red-600 text-sm",children:l})}),C&&s.jsxs("div",{className:"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50",children:[s.jsx("h3",{className:"text-md font-medium text-gray-900 mb-3",children:"Nueva Nota"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"create-note-title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Ttulo de la nota"}),s.jsx("input",{id:"create-note-title",type:"text",placeholder:"Ttulo de la nota",value:A.title,onChange:T=>O({...A,title:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","aria-describedby":"create-note-title-help"}),s.jsx("div",{id:"create-note-title-help",className:"sr-only",children:"Ingrese un ttulo descriptivo para la nota"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"create-note-content",className:"block text-sm font-medium text-gray-700 mb-1",children:"Contenido de la nota"}),s.jsx("textarea",{id:"create-note-content",placeholder:"Contenido de la nota",value:A.content,onChange:T=>O({...A,content:T.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","aria-describedby":"create-note-content-help"}),s.jsx("div",{id:"create-note-content-help",className:"sr-only",children:"Escriba el contenido de la nota que desea agregar al expediente"})]}),((r==null?void 0:r.role)==="ABOGADO"||(r==null?void 0:r.role)==="ADMIN")&&s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{id:"create-note-private",type:"checkbox",checked:A.isPrivate,onChange:T=>O({...A,isPrivate:T.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded","aria-describedby":"create-note-private-help"}),s.jsx("label",{htmlFor:"create-note-private",className:"ml-2 text-sm text-gray-700",children:"Nota privada (solo visible para abogados)"}),s.jsx("div",{id:"create-note-private-help",className:"sr-only",children:"Marque esta opcin si la nota debe ser visible solo para abogados y administradores"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:W,disabled:!A.title||!A.content,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Guardar nueva nota","aria-describedby":"save-create-note-help",children:"Guardar Nota"}),s.jsx("button",{onClick:()=>k(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300","aria-label":"Cancelar creacin de nota","aria-describedby":"cancel-create-note-help",children:"Cancelar"}),s.jsx("div",{id:"save-create-note-help",className:"sr-only",children:"Guardar la nueva nota en el expediente"}),s.jsx("div",{id:"cancel-create-note-help",className:"sr-only",children:"Cancelar la creacin de la nota y cerrar el formulario"})]})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-2",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx("label",{htmlFor:"search-notes",className:"sr-only",children:"Buscar en notas"}),s.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:""}),s.jsx("input",{id:"search-notes",type:"text",placeholder:"Buscar en notas...",value:g,onChange:T=>j(T.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","aria-describedby":"search-notes-help"}),s.jsx("div",{id:"search-notes-help",className:"sr-only",children:"Busque en el ttulo y contenido de las notas"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{htmlFor:"filter-privacy",className:"sr-only",children:"Filtrar por privacidad"}),s.jsx("span",{className:"text-gray-500",children:""}),s.jsxs("select",{id:"filter-privacy",value:y,onChange:T=>v(T.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","aria-describedby":"filter-privacy-help",children:[s.jsx("option",{value:"all",children:"Todas las notas"}),s.jsx("option",{value:"public",children:"Solo pblicas"}),s.jsx("option",{value:"private",children:"Solo privadas"})]}),s.jsx("div",{id:"filter-privacy-help",className:"sr-only",children:"Seleccione el tipo de notas que desea ver"})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{htmlFor:"filter-date",className:"sr-only",children:"Filtrar por fecha"}),s.jsx("span",{className:"text-gray-500",children:""}),s.jsxs("select",{id:"filter-date",value:f,onChange:T=>x(T.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","aria-describedby":"filter-date-help",children:[s.jsx("option",{value:"all",children:"Todas las fechas"}),s.jsx("option",{value:"today",children:"Hoy"}),s.jsx("option",{value:"week",children:"Esta semana"}),s.jsx("option",{value:"month",children:"Este mes"}),s.jsx("option",{value:"custom",children:"Rango personalizado"})]}),s.jsx("div",{id:"filter-date-help",className:"sr-only",children:"Seleccione el perodo de tiempo para filtrar las notas"})]}),f==="custom"&&s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"custom-date-from",className:"sr-only",children:"Fecha desde"}),s.jsx("input",{id:"custom-date-from",type:"date",value:b,onChange:T=>N(T.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Desde","aria-describedby":"custom-date-from-help"}),s.jsx("div",{id:"custom-date-from-help",className:"sr-only",children:"Seleccione la fecha de inicio para el filtro personalizado"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"custom-date-to",className:"sr-only",children:"Fecha hasta"}),s.jsx("input",{id:"custom-date-to",type:"date",value:w,onChange:T=>S(T.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Hasta","aria-describedby":"custom-date-to-help"}),s.jsx("div",{id:"custom-date-to-help",className:"sr-only",children:"Seleccione la fecha de fin para el filtro personalizado"})]})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-gray-600",children:["Mostrando ",_.length," de ",n.length," notas",g&&` (filtradas por "${g}")`,f!=="all"&&s.jsxs("span",{children:[f==="today"&&" (hoy)",f==="week"&&" (esta semana)",f==="month"&&" (este mes)",f==="custom"&&" (rango personalizado)"]})]}),(g||y!=="all"||f!=="all")&&s.jsx("button",{onClick:()=>{j(""),v("all"),x("all"),N(""),S("")},className:"text-sm text-blue-600 hover:text-blue-800 underline","aria-label":"Limpiar todos los filtros aplicados",children:"Limpiar filtros"})]})]}),_.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No hay notas"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"An no se han agregado notas a este expediente."})]}):s.jsx("div",{className:"space-y-4",children:_.map(T=>s.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:d===T.id?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:`edit-note-title-${T.id}`,className:"block text-sm font-medium text-gray-700 mb-1",children:"Ttulo de la nota"}),s.jsx("input",{id:`edit-note-title-${T.id}`,type:"text",value:m.title,onChange:R=>h({...m,title:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ttulo de la nota","aria-describedby":`edit-note-title-help-${T.id}`}),s.jsx("div",{id:`edit-note-title-help-${T.id}`,className:"sr-only",children:"Edite el ttulo de la nota"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:`edit-note-content-${T.id}`,className:"block text-sm font-medium text-gray-700 mb-1",children:"Contenido de la nota"}),s.jsx("textarea",{id:`edit-note-content-${T.id}`,value:m.content,onChange:R=>h({...m,content:R.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Contenido de la nota","aria-describedby":`edit-note-content-help-${T.id}`}),s.jsx("div",{id:`edit-note-content-help-${T.id}`,className:"sr-only",children:"Edite el contenido de la nota"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>M(T.id),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700","aria-label":"Guardar cambios en la nota","aria-describedby":`save-edit-help-${T.id}`,children:"Guardar"}),s.jsx("button",{onClick:()=>u(null),className:"px-3 py-1 bg-gray-200 text-gray-700 text-sm rounded-md hover:bg-gray-300","aria-label":"Cancelar edicin de la nota","aria-describedby":`cancel-edit-help-${T.id}`,children:"Cancelar"}),s.jsx("div",{id:`save-edit-help-${T.id}`,className:"sr-only",children:"Confirmar los cambios realizados en la nota"}),s.jsx("div",{id:`cancel-edit-help-${T.id}`,className:"sr-only",children:"Descartar los cambios y volver a la vista normal de la nota"})]})]}):s.jsx("div",{children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:T.title}),T.isPrivate&&s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Privada"})]}),s.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:T.content}),s.jsxs("div",{className:"mt-3 flex items-center gap-4 text-sm text-gray-500",children:[s.jsxs("span",{children:["Por: ",T.author.name]}),s.jsx("span",{children:""}),s.jsx("span",{children:G(T.createdAt)})]})]}),s.jsxs("div",{className:"flex gap-2 ml-4",children:[L(T)&&s.jsx("button",{onClick:()=>I(T),className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 text-sm font-medium","aria-label":"Editar nota","aria-describedby":`edit-note-help-${T.id}`,children:"Editar"}),V(T)&&s.jsx("button",{onClick:()=>E(T.id),className:"px-3 py-1 bg-red-100 text-red-700 rounded-md hover:bg-red-200 text-sm font-medium","aria-label":"Eliminar nota","aria-describedby":`delete-note-help-${T.id}`,children:"Eliminar"}),s.jsx("div",{id:`edit-note-help-${T.id}`,className:"sr-only",children:"Modificar el contenido de esta nota"}),s.jsx("div",{id:`delete-note-help-${T.id}`,className:"sr-only",children:"Eliminar permanentemente esta nota del expediente"})]})]})})},T.id))})]})},bw=({onFileSelect:e,maxFiles:t=5,maxSize:r=5*1024*1024,acceptedTypes:n=[".pdf",".txt",".csv",".doc",".docx",".jpg",".jpeg",".png",".gif",".webp"],disabled:a=!1})=>{const[i,o]=p.useState(!1),[l,c]=p.useState(null),d=p.useRef(null),u=f=>{const x=[],b=[];return f.length>t&&b.push(`No se pueden subir ms de ${t} archivos`),Array.from(f).forEach(N=>{var S;N.size>r&&b.push(`${N.name} excede el tamao mximo de ${r/(1024*1024)}MB`);const w="."+((S=N.name.split(".").pop())==null?void 0:S.toLowerCase());n.includes(w)||b.push(`${N.name} no es un tipo de archivo permitido`),N.size===0&&b.push(`${N.name} est vaco`),b.length===0&&x.push(N)}),b.length>0?(c(b.join(", ")),[]):(c(null),x)},m=f=>{console.log("FileUpload: handleFiles called with",f.length,"files"),console.log("FileUpload: File names:",Array.from(f).map(b=>b.name));const x=u(f);x.length>0&&(console.log("FileUpload: Valid files to send:",x.map(b=>b.name)),e(x)),d.current&&(d.current.value="")},h=f=>{f.preventDefault(),f.stopPropagation(),f.type==="dragenter"||f.type==="dragover"?o(!0):f.type==="dragleave"&&o(!1)},g=f=>{f.preventDefault(),f.stopPropagation(),o(!1),f.dataTransfer.files&&f.dataTransfer.files[0]&&m(f.dataTransfer.files)},j=f=>{f.preventDefault(),f.target.files&&f.target.files[0]&&m(f.target.files)},y=f=>{f.preventDefault(),f.stopPropagation(),d.current&&!a&&d.current.click()},v=f=>{f.preventDefault(),f.stopPropagation(),a||y(f)};return s.jsxs("div",{className:"w-full",children:[s.jsx("input",{ref:d,type:"file",multiple:!0,accept:n.join(","),"aria-label":"Seleccionar archivos para subir",title:"Seleccionar archivos para subir",placeholder:"Selecciona archivos",onChange:j,className:"hidden",disabled:a,style:{display:"none"}}),s.jsx("div",{className:`relative border-2 border-dashed rounded-lg p-6 text-center ${i?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"} ${a?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,onDragEnter:h,onDragLeave:h,onDragOver:h,onDrop:g,onClick:v,"aria-label":"rea de carga de archivos",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:s.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),s.jsxs("div",{className:"text-gray-600",children:[s.jsx("span",{className:"font-medium",children:"Haz clic para subir"})," o arrastra y suelta"]}),s.jsxs("p",{className:"text-xs text-gray-500",children:["PDF, TXT, CSV, DOC, DOCX, JPG, PNG, GIF, WEBP hasta ",r/(1024*1024),"MB"]}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Mximo ",t," archivos"]})]})}),l&&s.jsx("div",{className:"mt-2 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md p-2",children:l})]})},gv=()=>{const{id:e}=ix(),t=kr(),{user:r}=we(),[n,a]=p.useState(null),[i,o]=p.useState(!0),[l,c]=p.useState(null),[d,u]=p.useState(!1),[m,h]=p.useState(!1),[g,j]=p.useState([]),[y,v]=p.useState(!1),[f,x]=p.useState(null),[b,N]=p.useState({title:"",description:""});p.useEffect(()=>{(async()=>{var L,V;if(e)try{o(!0);const G=await Q.get(`/cases/${e}`);a(G.data),c(null)}catch(G){console.error("Error fetching case:",G),c(((V=(L=G.response)==null?void 0:L.data)==null?void 0:V.message)||"Error al cargar el expediente")}finally{o(!1)}})()},[e]);const w=async E=>{if(n)try{u(!0),await Q.patch(`/cases/${e}/status`,{status:E}),a(L=>L?{...L,status:E}:null)}catch(L){console.error("Error updating status:",L),c("Error al actualizar el estado del expediente")}finally{u(!1)}},S=E=>{switch(E){case"ABIERTO":return"bg-green-100 text-green-800";case"EN_PROCESO":return"bg-yellow-100 text-yellow-800";case"CERRADO":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},C=E=>{switch(E){case"ABIERTO":return"Abierto";case"EN_PROCESO":return"En Proceso";case"CERRADO":return"Cerrado";default:return E}},k=E=>{console.log("handleFileSelect called with:",E.length,"files"),console.log("Files:",E.map(V=>V.name));const L=E.filter((V,G,W)=>G===W.findIndex(_=>_.name===V.name&&_.size===V.size));L.length!==E.length&&console.warn("Se encontraron archivos duplicados, eliminando..."),j(L)},A=()=>{j([])},O=()=>{h(!0),x(null),j([])},D=()=>{h(!1),j([]),N({title:"",description:""}),x(null)},I=async()=>{var E,L,V;if(g.length===0){x("Por favor selecciona archivos para subir");return}if(!b.title.trim()){x("Por favor ingresa un ttulo para el documento");return}try{v(!0),x(null);const G=g.map(T=>{const R=new FormData;return R.append("file",T),R.append("title",b.title),R.append("expedienteId",n.id),b.description&&R.append("description",b.description),Q.post("/documents/upload",R,{headers:{"Content-Type":"multipart/form-data"}})});console.log("Subiendo archivos...");const W=await Promise.all(G);console.log("Resultados de subida:",W.map(T=>T.data));const _=await Q.get(`/cases/${e}`);a(_.data),D()}catch(G){console.error("Error uploading files:",G),console.error("Error response:",(E=G.response)==null?void 0:E.data),x(((V=(L=G.response)==null?void 0:L.data)==null?void 0:V.message)||"Error al subir los archivos")}finally{v(!1)}},M=E=>{if(E===0)return"0 Bytes";const L=1024,V=["Bytes","KB","MB","GB"],G=Math.floor(Math.log(E)/Math.log(L));return parseFloat((E/Math.pow(L,G)).toFixed(2))+" "+V[G]};return i?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):l||!n?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 text-xl mb-4",children:"Error"}),s.jsx("div",{className:"text-gray-600",children:l||"Expediente no encontrado"}),s.jsx("button",{onClick:()=>t("/lawyer/cases"),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700","aria-label":"Volver a la lista de expedientes","aria-describedby":"volver-lista-help",children:"Volver a Expedientes"}),s.jsx("div",{id:"volver-lista-help",className:"sr-only",children:"Regresar a la pgina principal de expedientes"})]})}):s.jsxs("div",{className:"py-6",children:[s.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:()=>t("/lawyer/cases"),className:"text-gray-400 hover:text-gray-600","aria-label":"Volver a Expedientes",title:"Volver a Expedientes",type:"button","aria-describedby":"volver-expedientes-help",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),s.jsx("div",{id:"volver-expedientes-help",className:"sr-only",children:"Regresar a la lista de expedientes"}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:n.title})]}),s.jsxs("p",{className:"mt-2 text-gray-600",children:["Expediente creado el ",new Date(n.createdAt).toLocaleDateString()]})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx(be,{to:`/lawyer/cases/${e}/edit`,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2","aria-label":"Editar expediente","aria-describedby":"edit-expediente-help",children:"Editar"}),s.jsx("div",{id:"edit-expediente-help",className:"sr-only",children:"Ir a la pgina de edicin del expediente"})]})]})}),s.jsxs("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Acciones Rpidas"}),s.jsx(yw,{expedienteId:n.id,expedienteData:n})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Estado del Expediente"}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${S(n.status)}`,children:C(n.status)}),((r==null?void 0:r.role)==="ABOGADO"||(r==null?void 0:r.role)==="ADMIN")&&s.jsxs(s.Fragment,{children:[s.jsx("label",{htmlFor:"status-select",className:"sr-only",children:"Cambiar estado del expediente"}),s.jsxs("select",{id:"status-select",value:n.status,onChange:E=>w(E.target.value),disabled:d,className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",title:"Cambiar estado del expediente","aria-label":"Cambiar estado del expediente","aria-describedby":"status-select-help",children:[s.jsx("option",{value:"ABIERTO",children:"Abierto"}),s.jsx("option",{value:"EN_PROCESO",children:"En Proceso"}),s.jsx("option",{value:"CERRADO",children:"Cerrado"})]}),s.jsx("div",{id:"status-select-help",className:"sr-only",children:"Seleccione el nuevo estado del expediente"})]})]})]}),s.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Descripcin"}),s.jsx("p",{className:"text-gray-700",children:n.description||"No hay descripcin disponible para este expediente."})]}),s.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Documentos"}),s.jsx("button",{onClick:O,className:"px-3 py-1 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700","aria-label":"Subir documento al expediente","aria-describedby":"upload-document-help",children:"Subir Documento"}),s.jsx("div",{id:"upload-document-help",className:"sr-only",children:"Haga clic para subir un nuevo documento al expediente"})]}),n.documents.length>0?s.jsx("div",{className:"space-y-3",children:n.documents.map(E=>s.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-md",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:E.filename}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Subido el ",new Date(E.uploadedAt).toLocaleDateString()]})]})]}),s.jsx("a",{href:E.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-sm","aria-label":`Ver documento ${E.filename}`,"aria-describedby":`doc-help-${E.id}`,children:"Ver"}),s.jsx("div",{id:`doc-help-${E.id}`,className:"sr-only",children:"Abrir documento en una nueva pestaa"})]},E.id))}):s.jsx("p",{className:"text-gray-500 text-center py-4",children:"No hay documentos subidos an."})]}),s.jsx(_6,{expedienteId:n.id})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informacin del Cliente"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Nombre"}),s.jsx("p",{className:"text-sm text-gray-900",children:n.client.user.name})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Email"}),s.jsx("p",{className:"text-sm text-gray-900",children:n.client.user.email})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"DNI"}),s.jsx("p",{className:"text-sm text-gray-900",children:n.client.dni})]}),n.client.phone&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Telfono"}),s.jsx("p",{className:"text-sm text-gray-900",children:n.client.phone})]}),n.client.address&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Direccin"}),s.jsx("p",{className:"text-sm text-gray-900",children:n.client.address})]})]})]}),s.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Abogado Asignado"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Nombre"}),s.jsx("p",{className:"text-sm text-gray-900",children:n.lawyer.name})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Email"}),s.jsx("p",{className:"text-sm text-gray-900",children:n.lawyer.email})]})]})]})]})]})]}),m&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:s.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:s.jsxs("div",{className:"mt-3",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Subir Documentos"}),f&&s.jsx("div",{className:"mb-4 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md p-2",children:f}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ttulo del documento *"}),s.jsx("input",{type:"text",value:b.title,onChange:E=>N(L=>({...L,title:E.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ttulo del documento...",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripcin (opcional)"}),s.jsx("textarea",{value:b.description,onChange:E=>N(L=>({...L,description:E.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Descripcin del documento..."})]}),s.jsx(bw,{onFileSelect:k,maxFiles:5,maxSize:5*1024*1024}),g.length>0&&s.jsxs("div",{className:"mt-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Archivos seleccionados:"}),s.jsx("button",{onClick:A,className:"text-sm text-red-600 hover:text-red-800",children:"Limpiar"})]}),s.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:g.map((E,L)=>s.jsxs("li",{children:[E.name," (",M(E.size),")"]},L))})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx("button",{onClick:D,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Cancelar"}),s.jsx("button",{onClick:I,disabled:y||g.length===0||!b.title.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:y?"Subiendo...":"Subir Documentos"})]})]})})})]})},O6=()=>{const[e,t]=p.useState([]),[r,n]=p.useState(!0),[a,i]=p.useState(null),{user:o}=we();if(p.useEffect(()=>{(async()=>{try{n(!0);const d=await Q.get("/cases"),u=Array.isArray(d.data)?d.data:[];t(u),i(null)}catch(d){console.error("Error fetching cases:",d),i("Error al cargar los expedientes"),t([])}finally{n(!1)}})()},[]),r)return s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})});if(a)return s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 text-xl mb-4",children:"Error"}),s.jsx("div",{className:"text-gray-600",children:a}),s.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Reintentar"})]})});const l=Array.isArray(e)?e:[];return s.jsx("div",{className:"py-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mis Expedientes"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Revisa el estado de tus casos legales"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(c=>{var d;return s.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:c.title}),s.jsx("p",{className:"text-gray-600 text-sm mb-4",children:c.description||"Sin descripcin disponible"}),s.jsxs("div",{className:"text-sm text-gray-500 mb-4",children:["Abogado: ",((d=c.lawyer)==null?void 0:d.name)||"No asignado"]}),s.jsx(be,{to:`/client/cases/${c.id}`,className:"px-3 py-2 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700",children:"Ver Detalles"})]},c.id)})}),l.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"No se encontraron expedientes"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"An no tienes expedientes asignados."})]})]})})},M6=({isOpen:e,onClose:t,lawyer:r,expedienteId:n,expedienteTitle:a})=>{const[i,o]=p.useState({asunto:"",mensaje:""}),[l,c]=p.useState([]),[d,u]=p.useState(!1),[m,h]=p.useState("idle"),g=p.useRef(null),j=N=>{const{name:w,value:S}=N.target;o(C=>({...C,[w]:S}))},y=N=>{const S=Array.from(N.target.files||[]).filter(A=>A.size>5*1024*1024?(alert(`El archivo "${A.name}" excede el tamao mximo de 5MB`),!1):!0),C=["text/plain","image/jpeg","image/png","image/gif","application/pdf"],k=S.filter(A=>C.includes(A.type)?!0:(alert(`El archivo "${A.name}" no es un tipo de archivo permitido. Solo se permiten: texto, imgenes y PDF`),!1));c(A=>[...A,...k])},v=N=>{c(w=>w.filter((S,C)=>C!==N))},f=async N=>{N.preventDefault(),u(!0),h("idle");try{const w=new FormData;w.append("asunto",i.asunto),w.append("mensaje",i.mensaje),w.append("lawyerId",r.id),w.append("expedienteId",n),w.append("expedienteTitle",a),l.forEach((C,k)=>{w.append("files",C)});const S=await Q.post("/contact/lawyer",w,{headers:{"Content-Type":"multipart/form-data"}});if(S.status===200||S.status===201)h("success"),o({asunto:"",mensaje:""}),c([]),setTimeout(()=>{t(),h("idle")},2e3);else throw new Error("Error en el servidor")}catch(w){console.error("Error al enviar mensaje:",w),h("error")}finally{u(!1)}},x=N=>{if(N===0)return"0 Bytes";const w=1024,S=["Bytes","KB","MB","GB"],C=Math.floor(Math.log(N)/Math.log(w));return parseFloat((N/Math.pow(w,C)).toFixed(2))+" "+S[C]},b=N=>N.startsWith("image/")?"":N==="application/pdf"?"":N==="text/plain"?"":"";return s.jsx($o,{isOpen:e,onClose:t,title:"Contactar Abogado",description:`Enve un mensaje a ${r.name} sobre el expediente "${a}"`,size:"xl",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-blue-50 rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-4",children:"Informacin del Abogado"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-blue-600 font-semibold",children:r.name.split(" ").map(N=>N[0]).join("")})})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-blue-900",children:"Abogado Asignado"}),s.jsx("p",{className:"text-sm text-blue-700 mt-1",children:r.name})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:s.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Email"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:r.email})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:s.jsx("svg",{className:"w-4 h-4 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Expediente"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:a}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["ID: ",n]})]})]})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Tipos de Archivos Permitidos"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:"text-lg",children:""}),s.jsx("span",{className:"text-sm text-gray-700",children:"Documentos PDF"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:"text-lg",children:""}),s.jsx("span",{className:"text-sm text-gray-700",children:"Imgenes (JPG, PNG, GIF)"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:"text-lg",children:""}),s.jsx("span",{className:"text-sm text-gray-700",children:"Archivos de texto"})]}),s.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:s.jsxs("p",{className:"text-sm text-yellow-800",children:[s.jsx("strong",{children:"Tamao mximo:"})," 5MB por archivo"]})})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Enviar Mensaje"}),s.jsxs("form",{onSubmit:f,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"asunto",className:"block text-sm font-medium text-gray-700 mb-1",children:"Asunto *"}),s.jsxs("select",{id:"asunto",name:"asunto",value:i.asunto,onChange:j,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500","aria-describedby":"asunto-help",children:[s.jsx("option",{value:"",children:"Selecciona un asunto"}),s.jsx("option",{value:"Consulta sobre expediente",children:"Consulta sobre expediente"}),s.jsx("option",{value:"Solicitud de informacin",children:"Solicitud de informacin"}),s.jsx("option",{value:"Documentacin adicional",children:"Documentacin adicional"}),s.jsx("option",{value:"Actualizacin de estado",children:"Actualizacin de estado"}),s.jsx("option",{value:"Programacin de cita",children:"Programacin de cita"}),s.jsx("option",{value:"Otro",children:"Otro"})]}),s.jsx("div",{id:"asunto-help",className:"sr-only",children:"Seleccione el tipo de asunto para su mensaje"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"mensaje",className:"block text-sm font-medium text-gray-700 mb-1",children:"Mensaje *"}),s.jsx("textarea",{id:"mensaje",name:"mensaje",value:i.mensaje,onChange:j,required:!0,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Escriba su mensaje aqu...","aria-describedby":"mensaje-help"}),s.jsx("div",{id:"mensaje-help",className:"sr-only",children:"Escriba el contenido de su mensaje para el abogado"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"file-upload",className:"block text-sm font-medium text-gray-700 mb-1",children:"Adjuntar Archivos (opcional)"}),s.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-md p-4 text-center",children:[s.jsx("input",{ref:g,id:"file-upload",type:"file",multiple:!0,accept:".txt,.pdf,.jpg,.jpeg,.png,.gif",onChange:y,className:"hidden","aria-describedby":"file-upload-help"}),s.jsx("button",{type:"button",onClick:()=>{var N;return(N=g.current)==null?void 0:N.click()},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2","aria-label":"Seleccionar archivos para adjuntar",children:"Seleccionar Archivos"}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Arrastra archivos aqu o haz clic para seleccionar"}),s.jsx("div",{id:"file-upload-help",className:"sr-only",children:"Seleccione archivos para adjuntar al mensaje. Tipos permitidos: PDF, imgenes y archivos de texto. Tamao mximo: 5MB por archivo."})]})]}),l.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Archivos seleccionados:"}),s.jsx("div",{className:"space-y-2",children:l.map((N,w)=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-md",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-lg",children:b(N.type)}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:N.name}),s.jsx("p",{className:"text-xs text-gray-500",children:x(N.size)})]})]}),s.jsx("button",{type:"button",onClick:()=>v(w),className:"text-red-600 hover:text-red-800","aria-label":`Eliminar archivo ${N.name}`,children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},w))})]}),m==="success"&&s.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md",role:"alert","aria-live":"polite",children:s.jsx("p",{className:"text-green-600 text-sm",children:"Mensaje enviado con xito! Su abogado se pondr en contacto con usted pronto."})}),m==="error"&&s.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",role:"alert","aria-live":"polite",children:s.jsx("p",{className:"text-red-600 text-sm",children:"Ha ocurrido un error al enviar su mensaje. Por favor, intntelo de nuevo."})}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2","aria-label":"Cancelar envo de mensaje",children:"Cancelar"}),s.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Enviar mensaje al abogado",children:d?"Enviando...":"Enviar Mensaje"})]})]})]})]})})},R6=()=>{var g,j,y,v;const{id:e}=ix(),t=kr(),[r,n]=p.useState(null),[a,i]=p.useState(!0),[o,l]=p.useState(null),[c,d]=p.useState(!1);p.useEffect(()=>{(async()=>{var x,b;if(e)try{i(!0);const N=localStorage.getItem("token"),w=await Ie.get(`/api/cases/${e}`,{headers:{Authorization:`Bearer ${N}`}});n(w.data),l(null)}catch(N){console.error("Error fetching case:",N),l(((b=(x=N.response)==null?void 0:x.data)==null?void 0:b.message)||"Error al cargar el expediente")}finally{i(!1)}})()},[e]);const u=f=>{switch(f){case"ABIERTO":return"bg-green-100 text-green-800";case"EN_PROCESO":return"bg-yellow-100 text-yellow-800";case"CERRADO":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},m=f=>{switch(f){case"ABIERTO":return"Abierto";case"EN_PROCESO":return"En Proceso";case"CERRADO":return"Cerrado";default:return f}},h=()=>{var f;(f=r==null?void 0:r.lawyer)!=null&&f.email?d(!0):alert("No hay informacin de contacto del abogado disponible.")};return a?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):o||!r?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 text-xl mb-4",children:"Error"}),s.jsx("div",{className:"text-gray-600",children:o||"Expediente no encontrado"}),s.jsx("button",{onClick:()=>t("/client/cases"),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Volver a Expedientes"})]})}):s.jsxs("div",{className:"py-6",children:[s.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("button",{onClick:()=>t("/client/cases"),className:"text-gray-400 hover:text-gray-600","aria-label":"Volver a Expedientes",title:"Volver a Expedientes",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:r.title}),s.jsxs("p",{className:"mt-1 text-gray-600",children:["Expediente creado el ",new Date(r.createdAt).toLocaleDateString()]})]})]})}),s.jsx(yw,{expedienteId:r.id,expedienteData:r}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mt-8",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Estado del Expediente"}),s.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${u(r.status)}`,children:m(r.status)})]}),s.jsx("p",{className:"text-gray-700 mb-4",children:r.description||"No hay descripcin disponible para este expediente."}),s.jsxs("p",{className:"text-sm text-gray-600",children:[r.status==="ABIERTO"&&"Tu caso est siendo revisado por nuestro equipo legal.",r.status==="EN_PROCESO"&&"Tu caso est en proceso activo. Nuestro abogado est trabajando en l.",r.status==="CERRADO"&&"Tu caso ha sido completado y cerrado."]})]}),s.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Documentos del Caso"}),r.documents.length>0?s.jsx("div",{className:"space-y-3",children:r.documents.map(f=>s.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-md",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:f.filename}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Subido el ",new Date(f.uploadedAt).toLocaleDateString()]})]})]}),s.jsx("a",{href:f.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-sm",children:"Descargar"})]},f.id))}):s.jsx("p",{className:"text-gray-500 text-center py-4",children:"No hay documentos disponibles an."})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Tu Abogado"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-blue-600 font-semibold",children:((j=(g=r.lawyer)==null?void 0:g.name)==null?void 0:j.split(" ").map(f=>f[0]).join(""))||"AB"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:((y=r.lawyer)==null?void 0:y.name)||"Abogado no asignado"}),s.jsx("p",{className:"text-sm text-gray-500",children:((v=r.lawyer)==null?void 0:v.email)||"Email no disponible"})]})]}),s.jsx("button",{onClick:h,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm",children:"Contactar Abogado"})]})]}),s.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contacto del Despacho"}),s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),s.jsx("span",{className:"text-gray-600",children:"(555) 123-4567"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),s.jsx("span",{className:"text-gray-600",children:"info@despacholegal.com"})]})]})]})]})]})]}),r&&s.jsx(M6,{isOpen:c,onClose:()=>d(!1),lawyer:r.lawyer,expedienteId:r.id,expedienteTitle:r.title})]})},P6=()=>{const[e,t]=p.useState([]),[r,n]=p.useState([]),[a,i]=p.useState(!0),[o,l]=p.useState(null),[c,d]=p.useState(""),[u,m]=p.useState("todos"),[h,g]=p.useState(null),[j,y]=p.useState(null),[v,f]=p.useState(!1),[x,b]=p.useState([]),[N,w]=p.useState(!1),[S,C]=p.useState({expedienteId:"",description:""}),[k,A]=p.useState([]),{user:O}=we();p.useEffect(()=>{(async()=>{try{i(!0);const T=localStorage.getItem("token"),[R,B,U]=await Promise.all([Ie.get("/api/documents",{headers:{Authorization:`Bearer ${T}`}}),Ie.get("/api/documents/stats",{headers:{Authorization:`Bearer ${T}`}}),Ie.get("/api/cases",{headers:{Authorization:`Bearer ${T}`}})]);t(R.data),l(B.data),A(U.data),g(null)}catch(T){console.error("Error fetching documents:",T),g("Error al cargar los documentos")}finally{i(!1)}})()},[]),p.useEffect(()=>{let _=Array.isArray(e)?e:[];c&&(_=_.filter(T=>{var R;return T.originalName.toLowerCase().includes(c.toLowerCase())||T.expediente.title.toLowerCase().includes(c.toLowerCase())||T.expediente.client.user.name.toLowerCase().includes(c.toLowerCase())||((R=T.description)==null?void 0:R.toLowerCase().includes(c.toLowerCase()))})),u!=="todos"&&(_=_.filter(T=>T.mimeType===u)),n(_)},[e,c,u]);const D=_=>{console.log("handleFileSelect called with:",_.length,"files"),console.log("Files:",_.map(R=>R.name)),console.log("Files details:",_.map(R=>({name:R.name,size:R.size,type:R.type})));const T=_.filter((R,B,U)=>B===U.findIndex(X=>X.name===R.name&&X.size===R.size));T.length!==_.length&&console.warn("Se encontraron archivos duplicados, eliminando..."),b(T)},I=()=>{b([])},M=()=>{w(!0),g(null),b([])},E=()=>{w(!1),b([]),C({expedienteId:"",description:""}),g(null)},L=async()=>{var _,T,R;if(x.length===0||!S.expedienteId){g("Por favor selecciona archivos y un expediente");return}try{f(!0),g(null);const B=localStorage.getItem("token"),U=x.map(Y=>{const K=new FormData;return K.append("file",Y),K.append("expedienteId",S.expedienteId),S.description&&K.append("description",S.description),Ie.post("/api/documents/upload",K,{headers:{Authorization:`Bearer ${B}`,"Content-Type":"multipart/form-data"}})});console.log("Subiendo archivos...");const X=await Promise.all(U);console.log("Resultados de subida:",X.map(Y=>Y.data)),console.log("Recargando documentos...");const F=await Ie.get("/api/documents",{headers:{Authorization:`Bearer ${B}`}});console.log("Documentos cargados:",F.data);const H=F.data.filter(Y=>{const K=Y&&Y.id&&Y.originalName;return K||console.warn("Documento invlido encontrado:",Y),K});t(H),E()}catch(B){console.error("Error uploading files:",B),console.error("Error response:",(_=B.response)==null?void 0:_.data),g(((R=(T=B.response)==null?void 0:T.data)==null?void 0:R.message)||"Error al subir los archivos")}finally{f(!1)}},V=async _=>{var T,R;if(confirm("Ests seguro de que quieres eliminar este documento?"))try{const B=localStorage.getItem("token");await Ie.delete(`/api/documents/${_}`,{headers:{Authorization:`Bearer ${B}`}}),t(X=>X.filter(F=>F.id!==_)),g(null),y("Documento eliminado exitosamente"),setTimeout(()=>y(null),3e3);const U=await Ie.get("/api/documents/stats",{headers:{Authorization:`Bearer ${B}`}});l(U.data)}catch(B){console.error("Error deleting document:",B),g(((R=(T=B.response)==null?void 0:T.data)==null?void 0:R.message)||"Error al eliminar el documento")}},G=_=>{if(_===0)return"0 Bytes";const T=1024,R=["Bytes","KB","MB","GB"],B=Math.floor(Math.log(_)/Math.log(T));return parseFloat((_/Math.pow(T,B)).toFixed(2))+" "+R[B]},W=_=>_.includes("pdf")?"":_.includes("image")?"":_.includes("text")?"":_.includes("word")?"":"";return a?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):s.jsxs("div",{className:"py-6",children:[s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[j&&s.jsx("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-md",children:s.jsx("p",{className:"text-green-700 text-sm",children:j})}),h&&s.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-md",children:s.jsx("p",{className:"text-red-700 text-sm",children:h})}),s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Documentos"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Gestiona todos los documentos legales"})]}),s.jsx("button",{onClick:M,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Subir Documentos"})]})}),o&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6 col-span-full",children:"Estadsticas de Documentos"}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Documentos"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:typeof o.total=="number"&&!isNaN(o.total)?o.total:0})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-green-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Tamao Total"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:typeof o.totalSize=="number"&&!isNaN(o.totalSize)?G(o.totalSize):"-"})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-yellow-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"PDFs"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:(Array.isArray(o.byType)?o.byType:[]).filter(_=>_.type.includes("pdf")).reduce((_,T)=>_+T.count,0)})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-purple-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 002 2z"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Imgenes"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:(Array.isArray(o.byType)?o.byType:[]).filter(_=>_.type.includes("image")).reduce((_,T)=>_+T.count,0)})]})]})})]}),o&&s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Estadsticas por Tipo"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:(Array.isArray(o.byType)?o.byType:[]).filter(_=>_.type.includes("pdf")).reduce((_,T)=>_+T.count,0)}),s.jsx("div",{className:"text-sm text-gray-600",children:"PDFs"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:(Array.isArray(o.byType)?o.byType:[]).filter(_=>_.type.includes("text")).reduce((_,T)=>_+T.count,0)}),s.jsx("div",{className:"text-sm text-gray-600",children:"Documentos de Texto"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600",children:(Array.isArray(o.byType)?o.byType:[]).filter(_=>_.type.includes("image")).reduce((_,T)=>_+T.count,0)}),s.jsx("div",{className:"text-sm text-gray-600",children:"Imgenes"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-orange-600",children:(Array.isArray(o.byType)?o.byType:[]).filter(_=>_.type.includes("word")||_.type.includes("document")).reduce((_,T)=>_+T.count,0)}),s.jsx("div",{className:"text-sm text-gray-600",children:"Documentos Word"})]})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Filtros de Bsqueda"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar"}),s.jsx("input",{type:"text",placeholder:"Buscar por nombre, expediente o descripcin...",value:c,onChange:_=>d(_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Archivo"}),s.jsxs("select",{value:u,onChange:_=>m(_.target.value),"aria-label":"Filtrar por tipo de archivo",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"todos",children:"Todos los tipos"}),s.jsx("option",{value:"application/pdf",children:"PDF"}),s.jsx("option",{value:"text/plain",children:"Texto"}),s.jsx("option",{value:"image/jpeg",children:"Imgenes"}),s.jsx("option",{value:"application/msword",children:"Word"})]})]}),s.jsx("div",{className:"flex items-end",children:s.jsx("button",{onClick:()=>{d(""),m("todos")},className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Limpiar Filtros"})})]})]}),s.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 p-6 border-b border-gray-200",children:"Lista de Documentos"}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Documento"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expediente"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tamao"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subido Por"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(Array.isArray(r)?r:[]).map(_=>{var T,R,B,U,X;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-2xl mr-3",children:W(_.mimeType)}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:_.originalName}),_.description&&s.jsx("div",{className:"text-sm text-gray-500",children:_.description})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx(be,{to:`/lawyer/cases/${_.expedienteId}`,className:"text-blue-600 hover:text-blue-900 text-sm",children:((T=_.expediente)==null?void 0:T.title)||"Sin ttulo"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((U=(B=(R=_.expediente)==null?void 0:R.client)==null?void 0:B.user)==null?void 0:U.name)||"Cliente no disponible"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:G(_.fileSize)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((X=_.uploadedByUser)==null?void 0:X.name)||"Usuario no disponible"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(_.uploadedAt).toLocaleDateString()}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("a",{href:`/api/documents/${_.id}/download`,className:"inline-flex items-center px-3 py-1 border border-transparent text-sm leading-4 font-medium rounded-md text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",target:"_blank",rel:"noopener noreferrer",children:[s.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Ver"]}),s.jsxs("button",{onClick:()=>V(_.id),className:"inline-flex items-center px-3 py-1 border border-transparent text-sm leading-4 font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[s.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Eliminar"]})]})})]},_.id)})})]})})]}),r.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No se encontraron documentos"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Intenta ajustar los filtros o subir nuevos documentos."})]})]}),N&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:s.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:s.jsxs("div",{className:"mt-3",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Subir Documentos"}),h&&s.jsx("div",{className:"mb-4 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md p-2",children:h}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expediente"}),s.jsxs("select",{id:"expediente-select","aria-label":"Expediente",value:S.expedienteId,onChange:_=>C(T=>({...T,expedienteId:_.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Selecciona un expediente"}),k.map(_=>s.jsxs("option",{value:_.id,children:[_.title," - ",_.client.user.name]},_.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripcin (opcional)"}),s.jsx("textarea",{value:S.description,onChange:_=>C(T=>({...T,description:_.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Descripcin del documento..."})]}),s.jsx(bw,{onFileSelect:D,maxFiles:5,maxSize:5*1024*1024}),x.length>0&&s.jsxs("div",{className:"mt-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Archivos seleccionados:"}),s.jsx("button",{onClick:I,className:"text-sm text-red-600 hover:text-red-800",children:"Limpiar"})]}),s.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:x.map((_,T)=>s.jsxs("li",{children:[_.name," (",G(_.size),")"]},T))})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx("button",{onClick:E,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Cancelar"}),s.jsx("button",{onClick:L,disabled:v||x.length===0||!S.expedienteId,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:v?"Subiendo...":"Subir Documentos"})]})]})})})]})},L6=()=>{const[e,t]=p.useState([]),[r,n]=p.useState([]),[a,i]=p.useState(!0),[o,l]=p.useState(""),[c,d]=p.useState("todos"),[u,m]=p.useState(null),{user:h}=we();p.useEffect(()=>{(async()=>{try{i(!0);const x=localStorage.getItem("token"),b=await Q.get("/documents",{headers:{Authorization:`Bearer ${x}`}});t(b.data),m(null)}catch(x){console.error("Error fetching documents:",x),m("Error al cargar los documentos")}finally{i(!1)}})()},[]),p.useEffect(()=>{let f=e;o&&(f=f.filter(x=>{var b;return x.originalName.toLowerCase().includes(o.toLowerCase())||x.expediente.title.toLowerCase().includes(o.toLowerCase())||((b=x.description)==null?void 0:b.toLowerCase().includes(o.toLowerCase()))})),c!=="todos"&&(f=f.filter(x=>x.mimeType===c)),n(f)},[e,o,c]);const g=f=>{if(f===0)return"0 Bytes";const x=1024,b=["Bytes","KB","MB","GB"],N=Math.floor(Math.log(f)/Math.log(x));return parseFloat((f/Math.pow(x,N)).toFixed(2))+" "+b[N]},j=f=>f.includes("pdf")?"":f.includes("image")?"":f.includes("text")?"":f.includes("word")?"":"",y=f=>{switch(f){case"ABIERTO":return"bg-green-100 text-green-800";case"EN_PROCESO":return"bg-yellow-100 text-yellow-800";case"CERRADO":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},v=f=>{switch(f){case"ABIERTO":return"Abierto";case"EN_PROCESO":return"En Proceso";case"CERRADO":return"Cerrado";default:return f}};return a?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):u?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 text-xl mb-4",children:"Error"}),s.jsx("div",{className:"text-gray-600",children:u}),s.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Reintentar"})]})}):s.jsx("div",{className:"py-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mis Documentos"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Accede a todos los documentos de tus expedientes"})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar"}),s.jsx("input",{type:"text",placeholder:"Buscar por nombre de documento o expediente...",value:o,onChange:f=>l(f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Archivo"}),s.jsxs("select",{value:c,onChange:f=>d(f.target.value),"aria-label":"Filtrar por tipo de archivo",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"todos",children:"Todos los tipos"}),s.jsx("option",{value:"application/pdf",children:"PDF"}),s.jsx("option",{value:"text/plain",children:"Texto"}),s.jsx("option",{value:"image/jpeg",children:"Imgenes"}),s.jsx("option",{value:"application/msword",children:"Word"})]})]}),s.jsx("div",{className:"flex items-end",children:s.jsx("button",{onClick:()=>{l(""),d("todos")},className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Limpiar Filtros"})})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(f=>s.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("span",{className:"text-3xl",children:j(f.mimeType)}),s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${y(f.expediente.status)}`,children:v(f.expediente.status)})]}),s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-2 truncate",children:f.originalName}),f.description&&s.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:f.description}),s.jsxs("div",{className:"space-y-2 mb-4",children:[s.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),f.expediente.title]}),s.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),f.uploadedBy.name]}),s.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"})}),g(f.fileSize)]}),s.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),new Date(f.uploadedAt).toLocaleDateString()]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("a",{href:`/api/documents/${f.id}/download`,className:"flex-1 px-3 py-2 bg-blue-600 text-white text-center text-sm rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",target:"_blank",rel:"noopener noreferrer",children:"Descargar"}),s.jsx("button",{className:"px-3 py-2 bg-green-600 text-white text-sm rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",children:"Ver"})]})]})},f.id))}),r.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No se encontraron documentos"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:e.length===0?"An no tienes documentos en tus expedientes.":"Intenta ajustar los filtros de bsqueda."})]})]})})},I6=()=>{const e=kr(),{id:t}=ix(),{user:r}=we(),[n,a]=p.useState(!0),[i,o]=p.useState(!1),[l,c]=p.useState(null),[d,u]=p.useState([]),[m,h]=p.useState([]),[g,j]=p.useState({title:"",description:"",clientId:"",lawyerId:(r==null?void 0:r.role)==="ABOGADO"?r.id:""});p.useEffect(()=>{(async()=>{var x,b;try{a(!0);const N=localStorage.getItem("token"),[w,S,C]=await Promise.all([Q.get("/users/clients"),Q.get("/users/lawyers"),Q.get(`/cases/${t}`)]);u(w.data),h(S.data);const k=C.data;j({title:k.title||"",description:k.description||"",clientId:((x=k.client)==null?void 0:x.id)||"",lawyerId:((b=k.lawyer)==null?void 0:b.id)||((r==null?void 0:r.role)==="ABOGADO"?r.id:"")}),c(null)}catch(N){console.error("Error fetching data:",N),c("Error al cargar los datos del expediente")}finally{a(!1)}})()},[t,r]);const y=f=>{const{name:x,value:b}=f.target;j(N=>({...N,[x]:b}))},v=async f=>{var x,b;if(f.preventDefault(),!g.title||!g.clientId||!g.lawyerId){c("Por favor completa todos los campos obligatorios");return}try{o(!0),c(null),await Q.patch(`/cases/${t}`,g),e(`/lawyer/cases/${t}`)}catch(N){console.error("Error updating case:",N),c(((b=(x=N.response)==null?void 0:x.data)==null?void 0:b.message)||"Error al actualizar el expediente")}finally{o(!1)}};return n?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):s.jsx("div",{className:"py-6",children:s.jsxs("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Editar Expediente"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Modifica los datos del expediente legal"})]}),s.jsx("button",{onClick:()=>e(`/lawyer/cases/${t}`),className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Cancelar"})]})}),s.jsx("div",{className:"bg-white shadow rounded-lg",children:s.jsxs("form",{onSubmit:v,className:"p-6 space-y-6",children:[l&&s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md",children:l}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Ttulo del Expediente *"}),s.jsx("input",{type:"text",id:"title",name:"title",value:g.title,onChange:y,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: Contrato de Compraventa"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripcin"}),s.jsx("textarea",{id:"description",name:"description",value:g.description,onChange:y,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe brevemente el caso..."})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"clientId",className:"block text-sm font-medium text-gray-700 mb-2",children:"Cliente *"}),s.jsxs("select",{id:"clientId",name:"clientId",value:g.clientId,onChange:y,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Selecciona un cliente"}),d.filter(f=>f.user).length===0&&s.jsx("option",{disabled:!0,value:"",children:"No hay clientes disponibles"}),d.filter(f=>f.user).map(f=>{var x,b;return s.jsxs("option",{value:f.id,children:[((x=f.user)==null?void 0:x.name)||"Sin nombre"," - ",((b=f.user)==null?void 0:b.email)||"Sin email"," (DNI: ",f.dni,")"]},f.id)})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"lawyerId",className:"block text-sm font-medium text-gray-700 mb-2",children:"Abogado Asignado *"}),s.jsxs("select",{id:"lawyerId",name:"lawyerId",value:g.lawyerId,onChange:y,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:(r==null?void 0:r.role)==="ABOGADO",children:[s.jsx("option",{value:"",children:"Selecciona un abogado"}),m.map(f=>s.jsxs("option",{value:f.id,children:[f.name," - ",f.email]},f.id))]}),(r==null?void 0:r.role)==="ABOGADO"&&s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Sers asignado automticamente como abogado responsable"})]}),s.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:()=>e(`/lawyer/cases/${t}`),className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Cancelar"}),s.jsx("button",{type:"submit",disabled:i,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Guardando...":"Guardar Cambios"})]})]})})]})})};function ln(e){"@babel/helpers - typeof";return ln=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ln(e)}function $6(e,t){if(ln(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ln(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jw(e){var t=$6(e,"string");return ln(t)=="symbol"?t:t+""}function ua(e,t,r){return(t=jw(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function qe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vv(Object(r),!0).forEach(function(n){ua(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vv(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Mu(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Rs(e,t){if(e==null)return{};var r,n,a=Mu(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Et(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,jw(n.key),n)}}function kt(e,t,r){return t&&yv(e.prototype,t),r&&yv(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function zd(e){return zd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},zd(e)}function Nw(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Nw=function(){return!!e})()}function F6(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B6(e,t){if(t&&(ln(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return F6(e)}function Gt(e,t,r){return t=zd(t),B6(e,Nw()?Reflect.construct(t,r||[],zd(e).constructor):t.apply(e,r))}function Ud(e,t){return Ud=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Ud(e,t)}function Kt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ud(e,t)}function ww(e){if(Array.isArray(e))return e}function z6(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function Af(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ux(e,t){if(e){if(typeof e=="string")return Af(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Af(e,t):void 0}}function Sw(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Br(e,t){return ww(e)||z6(e,t)||ux(e,t)||Sw()}function Cw(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=Cw(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function ft(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=Cw(e))&&(n&&(n+=" "),n+=t);return n}function ht(){return ht=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ht.apply(null,arguments)}var U6=function(e,t,r,n,a,i,o,l){if(!e){var c;if(t===void 0)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[r,n,a,i,o,l],u=0;c=new Error(t.replace(/%s/g,function(){return d[u++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}},V6=U6;const ml=vr(V6);var H6=function(){};function W6(e,t){var r={};return Object.keys(e).forEach(function(n){r[Zc(n)]=H6}),r}function bv(e,t){return e[t]!==void 0}function Zc(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function Y6(e){return!!e&&(typeof e!="function"||e.prototype&&e.prototype.isReactComponent)}function q6(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Ud(e,t)}function Ew(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);e!=null&&this.setState(e)}function kw(e){function t(r){var n=this.constructor.getDerivedStateFromProps(e,r);return n??null}this.setState(t.bind(this))}function Dw(e,t){try{var r=this.props,n=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(r,n)}finally{this.props=r,this.state=n}}Ew.__suppressDeprecationWarning=!0;kw.__suppressDeprecationWarning=!0;Dw.__suppressDeprecationWarning=!0;function G6(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if(typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function")return e;var r=null,n=null,a=null;if(typeof t.componentWillMount=="function"?r="componentWillMount":typeof t.UNSAFE_componentWillMount=="function"&&(r="UNSAFE_componentWillMount"),typeof t.componentWillReceiveProps=="function"?n="componentWillReceiveProps":typeof t.UNSAFE_componentWillReceiveProps=="function"&&(n="UNSAFE_componentWillReceiveProps"),typeof t.componentWillUpdate=="function"?a="componentWillUpdate":typeof t.UNSAFE_componentWillUpdate=="function"&&(a="UNSAFE_componentWillUpdate"),r!==null||n!==null||a!==null){var i=e.displayName||e.name,o=typeof e.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+i+" uses "+o+" but also contains the following legacy lifecycles:"+(r!==null?`
  `+r:"")+(n!==null?`
  `+n:"")+(a!==null?`
  `+a:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof e.getDerivedStateFromProps=="function"&&(t.componentWillMount=Ew,t.componentWillReceiveProps=kw),typeof t.getSnapshotBeforeUpdate=="function"){if(typeof t.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=Dw;var l=t.componentDidUpdate;t.componentDidUpdate=function(d,u,m){var h=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:m;l.call(this,d,u,h)}}return e}var K6="/Users/jquense/src/uncontrollable/src/uncontrollable.js";function Aw(e,t,r){r===void 0&&(r=[]);var n=e.displayName||e.name||"Component",a=Y6(e),i=Object.keys(t),o=i.map(Zc);a||!r.length||ml(!1);var l=function(d){q6(u,d);function u(){for(var h,g=arguments.length,j=new Array(g),y=0;y<g;y++)j[y]=arguments[y];h=d.call.apply(d,[this].concat(j))||this,h.handlers=Object.create(null),i.forEach(function(f){var x=t[f],b=function(w){if(h.props[x]){var S;h._notifying=!0;for(var C=arguments.length,k=new Array(C>1?C-1:0),A=1;A<C;A++)k[A-1]=arguments[A];(S=h.props)[x].apply(S,[w].concat(k)),h._notifying=!1}h.unmounted||h.setState(function(O){var D,I=O.values;return{values:ht(Object.create(null),I,(D={},D[f]=w,D))}})};h.handlers[x]=b}),r.length&&(h.attachRef=function(f){h.inner=f});var v=Object.create(null);return i.forEach(function(f){v[f]=h.props[Zc(f)]}),h.state={values:v,prevProps:{}},h}var m=u.prototype;return m.shouldComponentUpdate=function(){return!this._notifying},u.getDerivedStateFromProps=function(g,j){var y=j.values,v=j.prevProps,f={values:ht(Object.create(null),y),prevProps:{}};return i.forEach(function(x){f.prevProps[x]=g[x],!bv(g,x)&&bv(v,x)&&(f.values[x]=g[Zc(x)])}),f},m.componentWillUnmount=function(){this.unmounted=!0},m.render=function(){var g=this,j=this.props,y=j.innerRef,v=Mu(j,["innerRef"]);o.forEach(function(x){delete v[x]});var f={};return i.forEach(function(x){var b=g.props[x];f[x]=b!==void 0?b:g.state.values[x]}),z.createElement(e,ht({},v,f,this.handlers,{ref:y||this.attachRef}))},u}(z.Component);G6(l),l.displayName="Uncontrolled("+n+")",l.propTypes=ht({innerRef:function(){}},W6(t)),r.forEach(function(d){l.prototype[d]=function(){var m;return(m=this.inner)[d].apply(m,arguments)}});var c=l;return z.forwardRef&&(c=z.forwardRef(function(d,u){return z.createElement(l,ht({},d,{innerRef:u,__source:{fileName:K6,lineNumber:128},__self:this}))}),c.propTypes=l.propTypes),c.ControlledComponent=e,c.deferControlTo=function(d,u,m){return u===void 0&&(u={}),Aw(d,ht({},t,u),m)},c}var Tw={exports:{}},X6="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Q6=X6,J6=Q6;function _w(){}function Ow(){}Ow.resetWarningCache=_w;var Z6=function(){function e(n,a,i,o,l,c){if(c!==J6){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Ow,resetWarningCache:_w};return r.PropTypes=r,r};Tw.exports=Z6();var mx=Tw.exports;const ie=vr(mx);var Vd="milliseconds",hl="seconds",fl="minutes",pl="hours",Ta="day",Si="week",xl="month",_a="year",Oa="decade",Ma="century",Mw={milliseconds:1,seconds:1e3,minutes:60*1e3,hours:60*60*1e3,day:24*60*60*1e3,week:7*24*60*60*1e3},e5={month:1,year:12,decade:10*12,century:100*12};function t5(e){return[31,r5(e),31,30,31,30,31,31,30,31,30,31]}function r5(e){return e%4===0&&e%100!==0||e%400===0?29:28}function ds(e,t,r){switch(e=new Date(e),r){case Vd:case hl:case fl:case pl:case Ta:case Si:return s5(e,t*Mw[r]);case xl:case _a:case Oa:case Ma:return n5(e,t*e5[r])}throw new TypeError('Invalid units: "'+r+'"')}function s5(e,t){var r=new Date(+e+t);return a5(e,r)}function n5(e,t){var r=e.getFullYear(),n=e.getMonth(),a=e.getDate(),i=r*12+n+t,o=Math.trunc(i/12),l=i%12,c=Math.min(a,t5(o)[l]),d=new Date(e);return d.setFullYear(o),d.setDate(1),d.setMonth(l),d.setDate(c),d}function a5(e,t){var r=e.getTimezoneOffset(),n=t.getTimezoneOffset(),a=n-r;return new Date(+t+a*Mw.minutes)}function gl(e,t,r){return ds(e,-t,r)}function It(e,t,r){switch(e=new Date(e),t){case Ma:case Oa:case _a:e=Wd(e,0);case xl:e=$w(e,1);case Si:case Ta:e=bl(e,0);case pl:e=Ci(e,0);case fl:e=yl(e,0);case hl:e=vl(e,0)}return t===Oa&&(e=gl(e,Ra(e)%10,"year")),t===Ma&&(e=gl(e,Ra(e)%100,"year")),t===Si&&(e=Fw(e,0,r)),e}function Hd(e,t,r){switch(e=new Date(e),e=It(e,t,r),t){case Ma:case Oa:case _a:case xl:case Si:e=ds(e,1,t),e=gl(e,1,Ta),e.setHours(23,59,59,999);break;case Ta:e.setHours(23,59,59,999);break;case pl:case fl:case hl:e=ds(e,1,t),e=gl(e,1,Vd)}return e}var Fl=Fi(function(e,t){return e===t}),hx=Fi(function(e,t){return e!==t}),Ru=Fi(function(e,t){return e>t}),Bl=Fi(function(e,t){return e>=t}),fx=Fi(function(e,t){return e<t}),$i=Fi(function(e,t){return e<=t});function Rw(){return new Date(Math.min.apply(Math,arguments))}function Pw(){return new Date(Math.max.apply(Math,arguments))}function Lw(e,t,r,n){return n=n||"day",(!t||Bl(e,t,n))&&(!r||$i(e,r,n))}var vl=Jn("Milliseconds"),yl=Jn("Seconds"),Ci=Jn("Minutes"),bl=Jn("Hours"),Iw=Jn("Day"),$w=Jn("Date"),Wd=Jn("Month"),Ra=Jn("FullYear");function i5(e,t){return t===void 0?Ra(It(e,Oa)):ds(e,t+10,_a)}function o5(e,t){return t===void 0?Ra(It(e,Ma)):ds(e,t+100,_a)}function Fw(e,t,r){var n=(Iw(e)+7-(r||0))%7;return t===void 0?n:ds(e,t-n,Ta)}function l5(e,t,r,n){var a,i,o;switch(r){case Vd:case hl:case fl:case pl:case Ta:case Si:a=t.getTime()-e.getTime();break;case xl:case _a:case Oa:case Ma:a=(Ra(t)-Ra(e))*12+Wd(t)-Wd(e);break;default:throw new TypeError('Invalid units: "'+r+'"')}switch(r){case Vd:i=1;break;case hl:i=1e3;break;case fl:i=1e3*60;break;case pl:i=1e3*60*60;break;case Ta:i=1e3*60*60*24;break;case Si:i=1e3*60*60*24*7;break;case xl:i=1;break;case _a:i=12;break;case Oa:i=120;break;case Ma:i=1200;break;default:throw new TypeError('Invalid units: "'+r+'"')}return o=a/i,n?o:Math.round(o)}function Jn(e){var t=function(r){switch(r){case"Milliseconds":return 36e5;case"Seconds":return 3600;case"Minutes":return 60;case"Hours":return 1;default:return null}}(e);return function(r,n){if(n===void 0)return r["get"+e]();var a=new Date(r);return a["set"+e](n),t&&a["get"+e]()!=n&&(e==="Hours"||n>=t&&a.getHours()-r.getHours()<Math.floor(n/t))&&a["set"+e](n+t),a}}function Fi(e){return function(t,r,n){return e(+It(t,n),+It(r,n))}}const jv=Object.freeze(Object.defineProperty({__proto__:null,add:ds,century:o5,date:$w,day:Iw,decade:i5,diff:l5,endOf:Hd,eq:Fl,gt:Ru,gte:Bl,hours:bl,inRange:Lw,lt:fx,lte:$i,max:Pw,milliseconds:vl,min:Rw,minutes:Ci,month:Wd,neq:hx,seconds:yl,startOf:It,subtract:gl,weekday:Fw,year:Ra},Symbol.toStringTag,{value:"Module"}));function c5(e){if(Array.isArray(e))return Af(e)}function Bw(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function d5(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ed(e){return c5(e)||Bw(e)||ux(e)||d5()}function u5(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(a);++n<a;)i[n]=e[n+t];return i}var zw=u5;function m5(e,t){return e===t||e!==e&&t!==t}var zl=m5,h5=typeof zr=="object"&&zr&&zr.Object===Object&&zr,Uw=h5,f5=Uw,p5=typeof self=="object"&&self&&self.Object===Object&&self,x5=f5||p5||Function("return this")(),Fs=x5,g5=Fs,v5=g5.Symbol,Bi=v5,Nv=Bi,Vw=Object.prototype,y5=Vw.hasOwnProperty,b5=Vw.toString,ho=Nv?Nv.toStringTag:void 0;function j5(e){var t=y5.call(e,ho),r=e[ho];try{e[ho]=void 0;var n=!0}catch{}var a=b5.call(e);return n&&(t?e[ho]=r:delete e[ho]),a}var N5=j5,w5=Object.prototype,S5=w5.toString;function C5(e){return S5.call(e)}var E5=C5,wv=Bi,k5=N5,D5=E5,A5="[object Null]",T5="[object Undefined]",Sv=wv?wv.toStringTag:void 0;function _5(e){return e==null?e===void 0?T5:A5:Sv&&Sv in Object(e)?k5(e):D5(e)}var zi=_5;function O5(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var mn=O5,M5=zi,R5=mn,P5="[object AsyncFunction]",L5="[object Function]",I5="[object GeneratorFunction]",$5="[object Proxy]";function F5(e){if(!R5(e))return!1;var t=M5(e);return t==L5||t==I5||t==P5||t==$5}var px=F5,B5=9007199254740991;function z5(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=B5}var xx=z5,U5=px,V5=xx;function H5(e){return e!=null&&V5(e.length)&&!U5(e)}var Ul=H5,W5=9007199254740991,Y5=/^(?:0|[1-9]\d*)$/;function q5(e,t){var r=typeof e;return t=t??W5,!!t&&(r=="number"||r!="symbol"&&Y5.test(e))&&e>-1&&e%1==0&&e<t}var gx=q5,G5=zl,K5=Ul,X5=gx,Q5=mn;function J5(e,t,r){if(!Q5(r))return!1;var n=typeof t;return(n=="number"?K5(r)&&X5(t,r.length):n=="string"&&t in r)?G5(r[t],e):!1}var Pu=J5,Z5=/\s/;function eA(e){for(var t=e.length;t--&&Z5.test(e.charAt(t)););return t}var tA=eA,rA=tA,sA=/^\s+/;function nA(e){return e&&e.slice(0,rA(e)+1).replace(sA,"")}var aA=nA;function iA(e){return e!=null&&typeof e=="object"}var Zn=iA,oA=zi,lA=Zn,cA="[object Symbol]";function dA(e){return typeof e=="symbol"||lA(e)&&oA(e)==cA}var Vl=dA,uA=aA,Cv=mn,mA=Vl,Ev=NaN,hA=/^[-+]0x[0-9a-f]+$/i,fA=/^0b[01]+$/i,pA=/^0o[0-7]+$/i,xA=parseInt;function gA(e){if(typeof e=="number")return e;if(mA(e))return Ev;if(Cv(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Cv(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=uA(e);var r=fA.test(e);return r||pA.test(e)?xA(e.slice(2),r?2:8):hA.test(e)?Ev:+e}var vA=gA,yA=vA,kv=1/0,bA=17976931348623157e292;function jA(e){if(!e)return e===0?e:0;if(e=yA(e),e===kv||e===-kv){var t=e<0?-1:1;return t*bA}return e===e?e:0}var Hw=jA,NA=Hw;function wA(e){var t=NA(e),r=t%1;return t===t?r?t-r:t:0}var Ww=wA,SA=zw,CA=Pu,EA=Ww,kA=Math.ceil,DA=Math.max;function AA(e,t,r){(r?CA(e,t,r):t===void 0)?t=1:t=DA(EA(t),0);var n=e==null?0:e.length;if(!n||t<1)return[];for(var a=0,i=0,o=Array(kA(n/t));a<n;)o[i++]=SA(e,a,a+=t);return o}var TA=AA;const _A=vr(TA);function Hl(e){return e&&e.ownerDocument||document}function OA(e){var t=Hl(e);return t&&t.defaultView||window}function MA(e,t){return OA(e).getComputedStyle(e,t)}var RA=/([A-Z])/g;function PA(e){return e.replace(RA,"-$1").toLowerCase()}var LA=/^ms-/;function Cc(e){return PA(e).replace(LA,"-ms-")}var IA=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function $A(e){return!!(e&&IA.test(e))}function Wa(e,t){var r="",n="";if(typeof t=="string")return e.style.getPropertyValue(Cc(t))||MA(e).getPropertyValue(Cc(t));Object.keys(t).forEach(function(a){var i=t[a];!i&&i!==0?e.style.removeProperty(Cc(a)):$A(a)?n+=a+"("+i+") ":r+=Cc(a)+": "+i+";"}),n&&(r+="transform: "+n+";"),e.style.cssText+=";"+r}function jl(e,t){if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return e===t||!!(e.compareDocumentPosition(t)&16)}function FA(e){return"nodeType"in e&&e.nodeType===document.DOCUMENT_NODE}function vx(e){return"window"in e&&e.window===e?e:FA(e)&&e.defaultView||!1}function Yw(e){var t=e==="pageXOffset"?"scrollLeft":"scrollTop";function r(n,a){var i=vx(n);if(a===void 0)return i?i[e]:n[t];i?i.scrollTo(i[e],a):n[t]=a}return r}const qw=Yw("pageXOffset"),Gw=Yw("pageYOffset");function ja(e){var t=Hl(e),r={top:0,left:0,height:0,width:0},n=t&&t.documentElement;return!n||!jl(n,e)||(e.getBoundingClientRect!==void 0&&(r=e.getBoundingClientRect()),r={top:r.top+Gw(n)-(n.clientTop||0),left:r.left+qw(n)-(n.clientLeft||0),width:r.width,height:r.height}),r}var BA=function(t){return!!t&&"offsetParent"in t};function zA(e){for(var t=Hl(e),r=e&&e.offsetParent;BA(r)&&r.nodeName!=="HTML"&&Wa(r,"position")==="static";)r=r.offsetParent;return r||t.documentElement}var UA=function(t){return t.nodeName&&t.nodeName.toLowerCase()};function Kw(e,t){var r={top:0,left:0},n;if(Wa(e,"position")==="fixed")n=e.getBoundingClientRect();else{var a=t||zA(e);n=ja(e),UA(a)!=="html"&&(r=ja(a));var i=String(Wa(a,"borderTopWidth")||0);r.top+=parseInt(i,10)-Gw(a)||0;var o=String(Wa(a,"borderLeftWidth")||0);r.left+=parseInt(o,10)-qw(a)||0}var l=String(Wa(e,"marginTop")||0),c=String(Wa(e,"marginLeft")||0);return ht({},n,{top:n.top-r.top-(parseInt(l,10)||0),left:n.left-r.left-(parseInt(c,10)||0)})}const yx=!!(typeof window<"u"&&window.document&&window.document.createElement);var Dv=new Date().getTime();function VA(e){var t=new Date().getTime(),r=Math.max(0,16-(t-Dv)),n=setTimeout(e,r);return Dv=t,n}var HA=["","webkit","moz","o","ms"],Tf="clearTimeout",_f=VA,Av=function(t,r){return t+(t?r[0].toUpperCase()+r.substr(1):r)+"AnimationFrame"};yx&&HA.some(function(e){var t=Av(e,"request");return t in window&&(Tf=Av(e,"cancel"),_f=function(n){return window[t](n)}),!!_f});var Tv=function(t){typeof window[Tf]=="function"&&window[Tf](t)},Xw=_f,sh;function WA(e,t){if(!sh){var r=document.body,n=r.matches||r.matchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector;sh=function(i,o){return n.call(i,o)}}return sh(e,t)}var YA=Function.prototype.bind.call(Function.prototype.call,[].slice);function qA(e,t){return YA(e.querySelectorAll(t))}var Of=!1,Mf=!1;try{var nh={get passive(){return Of=!0},get once(){return Mf=Of=!0}};yx&&(window.addEventListener("test",nh,nh),window.removeEventListener("test",nh,!0))}catch{}function GA(e,t,r,n){if(n&&typeof n!="boolean"&&!Mf){var a=n.once,i=n.capture,o=r;!Mf&&a&&(o=r.__once||function l(c){this.removeEventListener(t,l,i),r.call(this,c)},r.__once=o),e.addEventListener(t,o,Of?n:i)}e.addEventListener(t,r,n)}function KA(e){const t=p.useRef(e);return p.useEffect(()=>{t.current=e},[e]),t}function _v(e){const t=KA(e);return p.useCallback(function(...r){return t.current&&t.current(...r)},[t])}function Ov(){return p.useState(null)}function XA(){const e=p.useRef(!0),t=p.useRef(()=>e.current);return p.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}function QA(e){const t=XA();return[e[0],p.useCallback(r=>{if(t())return e[1](r)},[t,e[1]])]}var pr="top",Yr="bottom",qr="right",xr="left",bx="auto",Wl=[pr,Yr,qr,xr],Ei="start",Nl="end",JA="clippingParents",Qw="viewport",fo="popper",ZA="reference",Mv=Wl.reduce(function(e,t){return e.concat([t+"-"+Ei,t+"-"+Nl])},[]),jx=[].concat(Wl,[bx]).reduce(function(e,t){return e.concat([t,t+"-"+Ei,t+"-"+Nl])},[]),eT="beforeRead",tT="read",rT="afterRead",sT="beforeMain",nT="main",aT="afterMain",iT="beforeWrite",oT="write",lT="afterWrite",cT=[eT,tT,rT,sT,nT,aT,iT,oT,lT];function Os(e){return e.split("-")[0]}function Sr(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Pa(e){var t=Sr(e).Element;return e instanceof t||e instanceof Element}function Ms(e){var t=Sr(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Nx(e){if(typeof ShadowRoot>"u")return!1;var t=Sr(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}var Na=Math.max,Yd=Math.min,ki=Math.round;function Rf(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function Jw(){return!/^((?!chrome|android).)*safari/i.test(Rf())}function Di(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var n=e.getBoundingClientRect(),a=1,i=1;t&&Ms(e)&&(a=e.offsetWidth>0&&ki(n.width)/e.offsetWidth||1,i=e.offsetHeight>0&&ki(n.height)/e.offsetHeight||1);var o=Pa(e)?Sr(e):window,l=o.visualViewport,c=!Jw()&&r,d=(n.left+(c&&l?l.offsetLeft:0))/a,u=(n.top+(c&&l?l.offsetTop:0))/i,m=n.width/a,h=n.height/i;return{width:m,height:h,top:u,right:d+m,bottom:u+h,left:d,x:d,y:u}}function wx(e){var t=Di(e),r=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function Zw(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&Nx(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Wn(e){return e?(e.nodeName||"").toLowerCase():null}function cn(e){return Sr(e).getComputedStyle(e)}function dT(e){return["table","td","th"].indexOf(Wn(e))>=0}function ea(e){return((Pa(e)?e.ownerDocument:e.document)||window.document).documentElement}function Lu(e){return Wn(e)==="html"?e:e.assignedSlot||e.parentNode||(Nx(e)?e.host:null)||ea(e)}function Rv(e){return!Ms(e)||cn(e).position==="fixed"?null:e.offsetParent}function uT(e){var t=/firefox/i.test(Rf()),r=/Trident/i.test(Rf());if(r&&Ms(e)){var n=cn(e);if(n.position==="fixed")return null}var a=Lu(e);for(Nx(a)&&(a=a.host);Ms(a)&&["html","body"].indexOf(Wn(a))<0;){var i=cn(a);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||t&&i.willChange==="filter"||t&&i.filter&&i.filter!=="none")return a;a=a.parentNode}return null}function Yl(e){for(var t=Sr(e),r=Rv(e);r&&dT(r)&&cn(r).position==="static";)r=Rv(r);return r&&(Wn(r)==="html"||Wn(r)==="body"&&cn(r).position==="static")?t:r||uT(e)||t}function Sx(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Fo(e,t,r){return Na(e,Yd(t,r))}function mT(e,t,r){var n=Fo(e,t,r);return n>r?r:n}function e2(){return{top:0,right:0,bottom:0,left:0}}function t2(e){return Object.assign({},e2(),e)}function r2(e,t){return t.reduce(function(r,n){return r[n]=e,r},{})}var hT=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,t2(typeof t!="number"?t:r2(t,Wl))};function fT(e){var t,r=e.state,n=e.name,a=e.options,i=r.elements.arrow,o=r.modifiersData.popperOffsets,l=Os(r.placement),c=Sx(l),d=[xr,qr].indexOf(l)>=0,u=d?"height":"width";if(!(!i||!o)){var m=hT(a.padding,r),h=wx(i),g=c==="y"?pr:xr,j=c==="y"?Yr:qr,y=r.rects.reference[u]+r.rects.reference[c]-o[c]-r.rects.popper[u],v=o[c]-r.rects.reference[c],f=Yl(i),x=f?c==="y"?f.clientHeight||0:f.clientWidth||0:0,b=y/2-v/2,N=m[g],w=x-h[u]-m[j],S=x/2-h[u]/2+b,C=Fo(N,S,w),k=c;r.modifiersData[n]=(t={},t[k]=C,t.centerOffset=C-S,t)}}function pT(e){var t=e.state,r=e.options,n=r.element,a=n===void 0?"[data-popper-arrow]":n;a!=null&&(typeof a=="string"&&(a=t.elements.popper.querySelector(a),!a)||Zw(t.elements.popper,a)&&(t.elements.arrow=a))}const xT={name:"arrow",enabled:!0,phase:"main",fn:fT,effect:pT,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ai(e){return e.split("-")[1]}var gT={top:"auto",right:"auto",bottom:"auto",left:"auto"};function vT(e,t){var r=e.x,n=e.y,a=t.devicePixelRatio||1;return{x:ki(r*a)/a||0,y:ki(n*a)/a||0}}function Pv(e){var t,r=e.popper,n=e.popperRect,a=e.placement,i=e.variation,o=e.offsets,l=e.position,c=e.gpuAcceleration,d=e.adaptive,u=e.roundOffsets,m=e.isFixed,h=o.x,g=h===void 0?0:h,j=o.y,y=j===void 0?0:j,v=typeof u=="function"?u({x:g,y}):{x:g,y};g=v.x,y=v.y;var f=o.hasOwnProperty("x"),x=o.hasOwnProperty("y"),b=xr,N=pr,w=window;if(d){var S=Yl(r),C="clientHeight",k="clientWidth";if(S===Sr(r)&&(S=ea(r),cn(S).position!=="static"&&l==="absolute"&&(C="scrollHeight",k="scrollWidth")),S=S,a===pr||(a===xr||a===qr)&&i===Nl){N=Yr;var A=m&&S===w&&w.visualViewport?w.visualViewport.height:S[C];y-=A-n.height,y*=c?1:-1}if(a===xr||(a===pr||a===Yr)&&i===Nl){b=qr;var O=m&&S===w&&w.visualViewport?w.visualViewport.width:S[k];g-=O-n.width,g*=c?1:-1}}var D=Object.assign({position:l},d&&gT),I=u===!0?vT({x:g,y},Sr(r)):{x:g,y};if(g=I.x,y=I.y,c){var M;return Object.assign({},D,(M={},M[N]=x?"0":"",M[b]=f?"0":"",M.transform=(w.devicePixelRatio||1)<=1?"translate("+g+"px, "+y+"px)":"translate3d("+g+"px, "+y+"px, 0)",M))}return Object.assign({},D,(t={},t[N]=x?y+"px":"",t[b]=f?g+"px":"",t.transform="",t))}function yT(e){var t=e.state,r=e.options,n=r.gpuAcceleration,a=n===void 0?!0:n,i=r.adaptive,o=i===void 0?!0:i,l=r.roundOffsets,c=l===void 0?!0:l,d={placement:Os(t.placement),variation:Ai(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:a,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Pv(Object.assign({},d,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:c})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Pv(Object.assign({},d,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const bT={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:yT,data:{}};var Ec={passive:!0};function jT(e){var t=e.state,r=e.instance,n=e.options,a=n.scroll,i=a===void 0?!0:a,o=n.resize,l=o===void 0?!0:o,c=Sr(t.elements.popper),d=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&d.forEach(function(u){u.addEventListener("scroll",r.update,Ec)}),l&&c.addEventListener("resize",r.update,Ec),function(){i&&d.forEach(function(u){u.removeEventListener("scroll",r.update,Ec)}),l&&c.removeEventListener("resize",r.update,Ec)}}const NT={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:jT,data:{}};var wT={left:"right",right:"left",bottom:"top",top:"bottom"};function td(e){return e.replace(/left|right|bottom|top/g,function(t){return wT[t]})}var ST={start:"end",end:"start"};function Lv(e){return e.replace(/start|end/g,function(t){return ST[t]})}function Cx(e){var t=Sr(e),r=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:r,scrollTop:n}}function Ex(e){return Di(ea(e)).left+Cx(e).scrollLeft}function CT(e,t){var r=Sr(e),n=ea(e),a=r.visualViewport,i=n.clientWidth,o=n.clientHeight,l=0,c=0;if(a){i=a.width,o=a.height;var d=Jw();(d||!d&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:i,height:o,x:l+Ex(e),y:c}}function ET(e){var t,r=ea(e),n=Cx(e),a=(t=e.ownerDocument)==null?void 0:t.body,i=Na(r.scrollWidth,r.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),o=Na(r.scrollHeight,r.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),l=-n.scrollLeft+Ex(e),c=-n.scrollTop;return cn(a||r).direction==="rtl"&&(l+=Na(r.clientWidth,a?a.clientWidth:0)-i),{width:i,height:o,x:l,y:c}}function kx(e){var t=cn(e),r=t.overflow,n=t.overflowX,a=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+a+n)}function s2(e){return["html","body","#document"].indexOf(Wn(e))>=0?e.ownerDocument.body:Ms(e)&&kx(e)?e:s2(Lu(e))}function Bo(e,t){var r;t===void 0&&(t=[]);var n=s2(e),a=n===((r=e.ownerDocument)==null?void 0:r.body),i=Sr(n),o=a?[i].concat(i.visualViewport||[],kx(n)?n:[]):n,l=t.concat(o);return a?l:l.concat(Bo(Lu(o)))}function Pf(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function kT(e,t){var r=Di(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function Iv(e,t,r){return t===Qw?Pf(CT(e,r)):Pa(t)?kT(t,r):Pf(ET(ea(e)))}function DT(e){var t=Bo(Lu(e)),r=["absolute","fixed"].indexOf(cn(e).position)>=0,n=r&&Ms(e)?Yl(e):e;return Pa(n)?t.filter(function(a){return Pa(a)&&Zw(a,n)&&Wn(a)!=="body"}):[]}function AT(e,t,r,n){var a=t==="clippingParents"?DT(e):[].concat(t),i=[].concat(a,[r]),o=i[0],l=i.reduce(function(c,d){var u=Iv(e,d,n);return c.top=Na(u.top,c.top),c.right=Yd(u.right,c.right),c.bottom=Yd(u.bottom,c.bottom),c.left=Na(u.left,c.left),c},Iv(e,o,n));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function n2(e){var t=e.reference,r=e.element,n=e.placement,a=n?Os(n):null,i=n?Ai(n):null,o=t.x+t.width/2-r.width/2,l=t.y+t.height/2-r.height/2,c;switch(a){case pr:c={x:o,y:t.y-r.height};break;case Yr:c={x:o,y:t.y+t.height};break;case qr:c={x:t.x+t.width,y:l};break;case xr:c={x:t.x-r.width,y:l};break;default:c={x:t.x,y:t.y}}var d=a?Sx(a):null;if(d!=null){var u=d==="y"?"height":"width";switch(i){case Ei:c[d]=c[d]-(t[u]/2-r[u]/2);break;case Nl:c[d]=c[d]+(t[u]/2-r[u]/2);break}}return c}function wl(e,t){t===void 0&&(t={});var r=t,n=r.placement,a=n===void 0?e.placement:n,i=r.strategy,o=i===void 0?e.strategy:i,l=r.boundary,c=l===void 0?JA:l,d=r.rootBoundary,u=d===void 0?Qw:d,m=r.elementContext,h=m===void 0?fo:m,g=r.altBoundary,j=g===void 0?!1:g,y=r.padding,v=y===void 0?0:y,f=t2(typeof v!="number"?v:r2(v,Wl)),x=h===fo?ZA:fo,b=e.rects.popper,N=e.elements[j?x:h],w=AT(Pa(N)?N:N.contextElement||ea(e.elements.popper),c,u,o),S=Di(e.elements.reference),C=n2({reference:S,element:b,placement:a}),k=Pf(Object.assign({},b,C)),A=h===fo?k:S,O={top:w.top-A.top+f.top,bottom:A.bottom-w.bottom+f.bottom,left:w.left-A.left+f.left,right:A.right-w.right+f.right},D=e.modifiersData.offset;if(h===fo&&D){var I=D[a];Object.keys(O).forEach(function(M){var E=[qr,Yr].indexOf(M)>=0?1:-1,L=[pr,Yr].indexOf(M)>=0?"y":"x";O[M]+=I[L]*E})}return O}function TT(e,t){t===void 0&&(t={});var r=t,n=r.placement,a=r.boundary,i=r.rootBoundary,o=r.padding,l=r.flipVariations,c=r.allowedAutoPlacements,d=c===void 0?jx:c,u=Ai(n),m=u?l?Mv:Mv.filter(function(j){return Ai(j)===u}):Wl,h=m.filter(function(j){return d.indexOf(j)>=0});h.length===0&&(h=m);var g=h.reduce(function(j,y){return j[y]=wl(e,{placement:y,boundary:a,rootBoundary:i,padding:o})[Os(y)],j},{});return Object.keys(g).sort(function(j,y){return g[j]-g[y]})}function _T(e){if(Os(e)===bx)return[];var t=td(e);return[Lv(e),t,Lv(t)]}function OT(e){var t=e.state,r=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var a=r.mainAxis,i=a===void 0?!0:a,o=r.altAxis,l=o===void 0?!0:o,c=r.fallbackPlacements,d=r.padding,u=r.boundary,m=r.rootBoundary,h=r.altBoundary,g=r.flipVariations,j=g===void 0?!0:g,y=r.allowedAutoPlacements,v=t.options.placement,f=Os(v),x=f===v,b=c||(x||!j?[td(v)]:_T(v)),N=[v].concat(b).reduce(function(X,F){return X.concat(Os(F)===bx?TT(t,{placement:F,boundary:u,rootBoundary:m,padding:d,flipVariations:j,allowedAutoPlacements:y}):F)},[]),w=t.rects.reference,S=t.rects.popper,C=new Map,k=!0,A=N[0],O=0;O<N.length;O++){var D=N[O],I=Os(D),M=Ai(D)===Ei,E=[pr,Yr].indexOf(I)>=0,L=E?"width":"height",V=wl(t,{placement:D,boundary:u,rootBoundary:m,altBoundary:h,padding:d}),G=E?M?qr:xr:M?Yr:pr;w[L]>S[L]&&(G=td(G));var W=td(G),_=[];if(i&&_.push(V[I]<=0),l&&_.push(V[G]<=0,V[W]<=0),_.every(function(X){return X})){A=D,k=!1;break}C.set(D,_)}if(k)for(var T=j?3:1,R=function(F){var H=N.find(function(Y){var K=C.get(Y);if(K)return K.slice(0,F).every(function(le){return le})});if(H)return A=H,"break"},B=T;B>0;B--){var U=R(B);if(U==="break")break}t.placement!==A&&(t.modifiersData[n]._skip=!0,t.placement=A,t.reset=!0)}}const MT={name:"flip",enabled:!0,phase:"main",fn:OT,requiresIfExists:["offset"],data:{_skip:!1}};function $v(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function Fv(e){return[pr,qr,Yr,xr].some(function(t){return e[t]>=0})}function RT(e){var t=e.state,r=e.name,n=t.rects.reference,a=t.rects.popper,i=t.modifiersData.preventOverflow,o=wl(t,{elementContext:"reference"}),l=wl(t,{altBoundary:!0}),c=$v(o,n),d=$v(l,a,i),u=Fv(c),m=Fv(d);t.modifiersData[r]={referenceClippingOffsets:c,popperEscapeOffsets:d,isReferenceHidden:u,hasPopperEscaped:m},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":m})}const PT={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:RT};function LT(e,t,r){var n=Os(e),a=[xr,pr].indexOf(n)>=0?-1:1,i=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,o=i[0],l=i[1];return o=o||0,l=(l||0)*a,[xr,qr].indexOf(n)>=0?{x:l,y:o}:{x:o,y:l}}function IT(e){var t=e.state,r=e.options,n=e.name,a=r.offset,i=a===void 0?[0,0]:a,o=jx.reduce(function(u,m){return u[m]=LT(m,t.rects,i),u},{}),l=o[t.placement],c=l.x,d=l.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=d),t.modifiersData[n]=o}const $T={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:IT};function FT(e){var t=e.state,r=e.name;t.modifiersData[r]=n2({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const BT={name:"popperOffsets",enabled:!0,phase:"read",fn:FT,data:{}};function zT(e){return e==="x"?"y":"x"}function UT(e){var t=e.state,r=e.options,n=e.name,a=r.mainAxis,i=a===void 0?!0:a,o=r.altAxis,l=o===void 0?!1:o,c=r.boundary,d=r.rootBoundary,u=r.altBoundary,m=r.padding,h=r.tether,g=h===void 0?!0:h,j=r.tetherOffset,y=j===void 0?0:j,v=wl(t,{boundary:c,rootBoundary:d,padding:m,altBoundary:u}),f=Os(t.placement),x=Ai(t.placement),b=!x,N=Sx(f),w=zT(N),S=t.modifiersData.popperOffsets,C=t.rects.reference,k=t.rects.popper,A=typeof y=="function"?y(Object.assign({},t.rects,{placement:t.placement})):y,O=typeof A=="number"?{mainAxis:A,altAxis:A}:Object.assign({mainAxis:0,altAxis:0},A),D=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,I={x:0,y:0};if(S){if(i){var M,E=N==="y"?pr:xr,L=N==="y"?Yr:qr,V=N==="y"?"height":"width",G=S[N],W=G+v[E],_=G-v[L],T=g?-k[V]/2:0,R=x===Ei?C[V]:k[V],B=x===Ei?-k[V]:-C[V],U=t.elements.arrow,X=g&&U?wx(U):{width:0,height:0},F=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:e2(),H=F[E],Y=F[L],K=Fo(0,C[V],X[V]),le=b?C[V]/2-T-K-H-O.mainAxis:R-K-H-O.mainAxis,q=b?-C[V]/2+T+K+Y+O.mainAxis:B+K+Y+O.mainAxis,ce=t.elements.arrow&&Yl(t.elements.arrow),ae=ce?N==="y"?ce.clientTop||0:ce.clientLeft||0:0,xe=(M=D==null?void 0:D[N])!=null?M:0,Ce=G+le-xe-ae,He=G+q-xe,ee=Fo(g?Yd(W,Ce):W,G,g?Na(_,He):_);S[N]=ee,I[N]=ee-G}if(l){var ge,Ee=N==="x"?pr:xr,Pe=N==="x"?Yr:qr,ke=S[w],Oe=w==="y"?"height":"width",Le=ke+v[Ee],$t=ke-v[Pe],Qr=[pr,xr].indexOf(f)!==-1,xs=(ge=D==null?void 0:D[w])!=null?ge:0,Us=Qr?Le:ke-C[Oe]-k[Oe]-xs+O.altAxis,Qe=Qr?ke+C[Oe]+k[Oe]-xs-O.altAxis:$t,Xt=g&&Qr?mT(Us,ke,Qe):Fo(g?Us:Le,ke,g?Qe:$t);S[w]=Xt,I[w]=Xt-ke}t.modifiersData[n]=I}}const VT={name:"preventOverflow",enabled:!0,phase:"main",fn:UT,requiresIfExists:["offset"]};function HT(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function WT(e){return e===Sr(e)||!Ms(e)?Cx(e):HT(e)}function YT(e){var t=e.getBoundingClientRect(),r=ki(t.width)/e.offsetWidth||1,n=ki(t.height)/e.offsetHeight||1;return r!==1||n!==1}function qT(e,t,r){r===void 0&&(r=!1);var n=Ms(t),a=Ms(t)&&YT(t),i=ea(t),o=Di(e,a,r),l={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(n||!n&&!r)&&((Wn(t)!=="body"||kx(i))&&(l=WT(t)),Ms(t)?(c=Di(t,!0),c.x+=t.clientLeft,c.y+=t.clientTop):i&&(c.x=Ex(i))),{x:o.left+l.scrollLeft-c.x,y:o.top+l.scrollTop-c.y,width:o.width,height:o.height}}function GT(e){var t=new Map,r=new Set,n=[];e.forEach(function(i){t.set(i.name,i)});function a(i){r.add(i.name);var o=[].concat(i.requires||[],i.requiresIfExists||[]);o.forEach(function(l){if(!r.has(l)){var c=t.get(l);c&&a(c)}}),n.push(i)}return e.forEach(function(i){r.has(i.name)||a(i)}),n}function KT(e){var t=GT(e);return cT.reduce(function(r,n){return r.concat(t.filter(function(a){return a.phase===n}))},[])}function XT(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function QT(e){var t=e.reduce(function(r,n){var a=r[n.name];return r[n.name]=a?Object.assign({},a,n,{options:Object.assign({},a.options,n.options),data:Object.assign({},a.data,n.data)}):n,r},{});return Object.keys(t).map(function(r){return t[r]})}var Bv={placement:"bottom",modifiers:[],strategy:"absolute"};function zv(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function JT(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,n=r===void 0?[]:r,a=t.defaultOptions,i=a===void 0?Bv:a;return function(l,c,d){d===void 0&&(d=i);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},Bv,i),modifiersData:{},elements:{reference:l,popper:c},attributes:{},styles:{}},m=[],h=!1,g={state:u,setOptions:function(f){var x=typeof f=="function"?f(u.options):f;y(),u.options=Object.assign({},i,u.options,x),u.scrollParents={reference:Pa(l)?Bo(l):l.contextElement?Bo(l.contextElement):[],popper:Bo(c)};var b=KT(QT([].concat(n,u.options.modifiers)));return u.orderedModifiers=b.filter(function(N){return N.enabled}),j(),g.update()},forceUpdate:function(){if(!h){var f=u.elements,x=f.reference,b=f.popper;if(zv(x,b)){u.rects={reference:qT(x,Yl(b),u.options.strategy==="fixed"),popper:wx(b)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(O){return u.modifiersData[O.name]=Object.assign({},O.data)});for(var N=0;N<u.orderedModifiers.length;N++){if(u.reset===!0){u.reset=!1,N=-1;continue}var w=u.orderedModifiers[N],S=w.fn,C=w.options,k=C===void 0?{}:C,A=w.name;typeof S=="function"&&(u=S({state:u,options:k,name:A,instance:g})||u)}}}},update:XT(function(){return new Promise(function(v){g.forceUpdate(),v(u)})}),destroy:function(){y(),h=!0}};if(!zv(l,c))return g;g.setOptions(d).then(function(v){!h&&d.onFirstUpdate&&d.onFirstUpdate(v)});function j(){u.orderedModifiers.forEach(function(v){var f=v.name,x=v.options,b=x===void 0?{}:x,N=v.effect;if(typeof N=="function"){var w=N({state:u,name:f,instance:g,options:b}),S=function(){};m.push(w||S)}})}function y(){m.forEach(function(v){return v()}),m=[]}return g}}var ZT=JT({defaultModifiers:[PT,BT,bT,NT,$T,MT,VT,xT]}),Uv=function(t){return{position:t,top:"0",left:"0",opacity:"0",pointerEvents:"none"}},e3={name:"applyStyles",enabled:!1},t3={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:function(t){var r=t.state;return function(){var n=r.elements,a=n.reference,i=n.popper;if("removeAttribute"in a){var o=(a.getAttribute("aria-describedby")||"").split(",").filter(function(l){return l.trim()!==i.id});o.length?a.setAttribute("aria-describedby",o.join(",")):a.removeAttribute("aria-describedby")}}},fn:function(t){var r,n=t.state,a=n.elements,i=a.popper,o=a.reference,l=(r=i.getAttribute("role"))==null?void 0:r.toLowerCase();if(i.id&&l==="tooltip"&&"setAttribute"in o){var c=o.getAttribute("aria-describedby");if(c&&c.split(",").indexOf(i.id)!==-1)return;o.setAttribute("aria-describedby",c?c+","+i.id:i.id)}}},r3=[];function s3(e,t,r){var n=r===void 0?{}:r,a=n.enabled,i=a===void 0?!0:a,o=n.placement,l=o===void 0?"bottom":o,c=n.strategy,d=c===void 0?"absolute":c,u=n.modifiers,m=u===void 0?r3:u,h=Mu(n,["enabled","placement","strategy","modifiers"]),g=p.useRef(),j=p.useCallback(function(){var N;(N=g.current)==null||N.update()},[]),y=p.useCallback(function(){var N;(N=g.current)==null||N.forceUpdate()},[]),v=QA(p.useState({placement:l,update:j,forceUpdate:y,attributes:{},styles:{popper:Uv(d),arrow:{}}})),f=v[0],x=v[1],b=p.useMemo(function(){return{name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:function(w){var S=w.state,C={},k={};Object.keys(S.elements).forEach(function(A){C[A]=S.styles[A],k[A]=S.attributes[A]}),x({state:S,styles:C,attributes:k,update:j,forceUpdate:y,placement:S.placement})}}},[j,y,x]);return p.useEffect(function(){!g.current||!i||g.current.setOptions({placement:l,strategy:d,modifiers:[].concat(m,[b,e3])})},[d,l,b,i]),p.useEffect(function(){if(!(!i||e==null||t==null))return g.current=ZT(e,t,ht({},h,{placement:l,strategy:d,modifiers:[].concat(m,[t3,b])})),function(){g.current!=null&&(g.current.destroy(),g.current=void 0,x(function(N){return ht({},N,{attributes:{},styles:{popper:Uv(d)}})}))}},[i,e,t]),f}function n3(e,t,r,n){var a=n&&typeof n!="boolean"?n.capture:n;e.removeEventListener(t,r,a),r.__once&&e.removeEventListener(t,r.__once,a)}function Eo(e,t,r,n){return GA(e,t,r,n),function(){n3(e,t,r,n)}}var a3=function(){},i3=a3;const o3=vr(i3);function l3(e){return e&&"setState"in e?ON.findDOMNode(e):e??null}const c3=function(e){return Hl(l3(e))};var d3=27,Vv=function(){};function u3(e){return e.button===0}function m3(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}var Hv=function(t){return t&&("current"in t?t.current:t)};function h3(e,t,r){var n=r===void 0?{}:r,a=n.disabled,i=n.clickTrigger,o=i===void 0?"click":i,l=p.useRef(!1),c=t||Vv,d=p.useCallback(function(h){var g,j=Hv(e);o3(!!j,"RootClose captured a close event but does not have a ref to compare it to. useRootClose(), should be passed a ref that resolves to a DOM node"),l.current=!j||m3(h)||!u3(h)||!!jl(j,(g=h.composedPath==null?void 0:h.composedPath()[0])!=null?g:h.target)},[e]),u=_v(function(h){l.current||c(h)}),m=_v(function(h){h.keyCode===d3&&c(h)});p.useEffect(function(){if(!(a||e==null)){var h=window.event,g=c3(Hv(e)),j=Eo(g,o,d,!0),y=Eo(g,o,function(x){if(x===h){h=void 0;return}u(x)}),v=Eo(g,"keyup",function(x){if(x===h){h=void 0;return}m(x)}),f=[];return"ontouchstart"in g.documentElement&&(f=[].slice.call(g.body.children).map(function(x){return Eo(x,"mousemove",Vv)})),function(){j(),y(),v(),f.forEach(function(x){return x()})}}},[e,a,o,d,u,m])}function f3(e){var t={};return Array.isArray(e)?(e==null||e.forEach(function(r){t[r.name]=r}),t):e||t}function p3(e){return e===void 0&&(e={}),Array.isArray(e)?e:Object.keys(e).map(function(t){return e[t].name=t,e[t]})}function x3(e){var t,r,n,a,i=e.enabled,o=e.enableEvents,l=e.placement,c=e.flip,d=e.offset,u=e.fixed,m=e.containerPadding,h=e.arrowElement,g=e.popperConfig,j=g===void 0?{}:g,y=f3(j.modifiers);return ht({},j,{placement:l,enabled:i,strategy:u?"fixed":j.strategy,modifiers:p3(ht({},y,{eventListeners:{enabled:o},preventOverflow:ht({},y.preventOverflow,{options:m?ht({padding:m},(t=y.preventOverflow)==null?void 0:t.options):(r=y.preventOverflow)==null?void 0:r.options}),offset:{options:ht({offset:d},(n=y.offset)==null?void 0:n.options)},arrow:ht({},y.arrow,{enabled:!!h,options:ht({},(a=y.arrow)==null?void 0:a.options,{element:h})}),flip:ht({enabled:!!c},y.flip)}))})}function g3(e,t){return e.classList?e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function v3(e,t){e.classList?e.classList.add(t):g3(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function Wv(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function y3(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=Wv(e.className,t):e.setAttribute("class",Wv(e.className&&e.className.baseVal||"",t))}var kc;function Dx(e){if((!kc&&kc!==0||e)&&yx){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),kc=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return kc}var ah=function(t){var r;return typeof document>"u"?null:t==null?Hl().body:(typeof t=="function"&&(t=t()),t&&"current"in t&&(t=t.current),(r=t)!=null&&r.nodeType&&t||null)};function Yv(e,t){var r=p.useState(function(){return ah(e)}),n=r[0],a=r[1];if(!n){var i=ah(e);i&&a(i)}return p.useEffect(function(){},[t,n]),p.useEffect(function(){var o=ah(e);o!==n&&a(o)},[e,n]),n}const qv=e=>!e||typeof e=="function"?e:t=>{e.current=t};function b3(e,t){const r=qv(e),n=qv(t);return a=>{r&&r(a),n&&n(a)}}function j3(e,t){return p.useMemo(()=>b3(e,t),[e,t])}var Ax=z.forwardRef(function(e,t){var r=e.flip,n=e.offset,a=e.placement,i=e.containerPadding,o=i===void 0?5:i,l=e.popperConfig,c=l===void 0?{}:l,d=e.transition,u=Ov(),m=u[0],h=u[1],g=Ov(),j=g[0],y=g[1],v=j3(h,t),f=Yv(e.container),x=Yv(e.target),b=p.useState(!e.show),N=b[0],w=b[1],S=s3(x,m,x3({placement:a,enableEvents:!!e.show,containerPadding:o||5,flip:r,offset:n,arrowElement:j,popperConfig:c})),C=S.styles,k=S.attributes,A=Mu(S,["styles","attributes"]);e.show?N&&w(!1):!e.transition&&!N&&w(!0);var O=function(){w(!0),e.onExited&&e.onExited.apply(e,arguments)},D=e.show||d&&!N;if(h3(m,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!D)return null;var I=e.children(ht({},A,{show:!!e.show,props:ht({},k.popper,{style:C.popper,ref:v}),arrowProps:ht({},k.arrow,{style:C.arrow,ref:y})}));if(d){var M=e.onExit,E=e.onExiting,L=e.onEnter,V=e.onEntering,G=e.onEntered;I=z.createElement(d,{in:e.show,appear:!0,onExit:M,onExiting:E,onExited:O,onEnter:L,onEntering:V,onEntered:G},I)}return f?ON.createPortal(I,f):null});Ax.displayName="Overlay";Ax.propTypes={show:ie.bool,placement:ie.oneOf(jx),target:ie.any,container:ie.any,flip:ie.bool,children:ie.func.isRequired,containerPadding:ie.number,popperConfig:ie.object,rootClose:ie.bool,rootCloseEvent:ie.oneOf(["click","mousedown"]),rootCloseDisabled:ie.bool,onHide:function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];if(t.rootClose){var i;return(i=ie.func).isRequired.apply(i,[t].concat(n))}return ie.func.apply(ie,[t].concat(n))},transition:ie.elementType,onEnter:ie.func,onEntering:ie.func,onEntered:ie.func,onExit:ie.func,onExiting:ie.func,onExited:ie.func};function N3(){this.__data__=[],this.size=0}var w3=N3,S3=zl;function C3(e,t){for(var r=e.length;r--;)if(S3(e[r][0],t))return r;return-1}var Iu=C3,E3=Iu,k3=Array.prototype,D3=k3.splice;function A3(e){var t=this.__data__,r=E3(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():D3.call(t,r,1),--this.size,!0}var T3=A3,_3=Iu;function O3(e){var t=this.__data__,r=_3(t,e);return r<0?void 0:t[r][1]}var M3=O3,R3=Iu;function P3(e){return R3(this.__data__,e)>-1}var L3=P3,I3=Iu;function $3(e,t){var r=this.__data__,n=I3(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var F3=$3,B3=w3,z3=T3,U3=M3,V3=L3,H3=F3;function Ui(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ui.prototype.clear=B3;Ui.prototype.delete=z3;Ui.prototype.get=U3;Ui.prototype.has=V3;Ui.prototype.set=H3;var $u=Ui,W3=$u;function Y3(){this.__data__=new W3,this.size=0}var q3=Y3;function G3(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var K3=G3;function X3(e){return this.__data__.get(e)}var Q3=X3;function J3(e){return this.__data__.has(e)}var Z3=J3,e_=Fs,t_=e_["__core-js_shared__"],r_=t_,ih=r_,Gv=function(){var e=/[^.]+$/.exec(ih&&ih.keys&&ih.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function s_(e){return!!Gv&&Gv in e}var n_=s_,a_=Function.prototype,i_=a_.toString;function o_(e){if(e!=null){try{return i_.call(e)}catch{}try{return e+""}catch{}}return""}var a2=o_,l_=px,c_=n_,d_=mn,u_=a2,m_=/[\\^$.*+?()[\]{}|]/g,h_=/^\[object .+?Constructor\]$/,f_=Function.prototype,p_=Object.prototype,x_=f_.toString,g_=p_.hasOwnProperty,v_=RegExp("^"+x_.call(g_).replace(m_,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function y_(e){if(!d_(e)||c_(e))return!1;var t=l_(e)?v_:h_;return t.test(u_(e))}var b_=y_;function j_(e,t){return e==null?void 0:e[t]}var N_=j_,w_=b_,S_=N_;function C_(e,t){var r=S_(e,t);return w_(r)?r:void 0}var Fa=C_,E_=Fa,k_=Fs,D_=E_(k_,"Map"),Tx=D_,A_=Fa,T_=A_(Object,"create"),Fu=T_,Kv=Fu;function __(){this.__data__=Kv?Kv(null):{},this.size=0}var O_=__;function M_(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var R_=M_,P_=Fu,L_="__lodash_hash_undefined__",I_=Object.prototype,$_=I_.hasOwnProperty;function F_(e){var t=this.__data__;if(P_){var r=t[e];return r===L_?void 0:r}return $_.call(t,e)?t[e]:void 0}var B_=F_,z_=Fu,U_=Object.prototype,V_=U_.hasOwnProperty;function H_(e){var t=this.__data__;return z_?t[e]!==void 0:V_.call(t,e)}var W_=H_,Y_=Fu,q_="__lodash_hash_undefined__";function G_(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Y_&&t===void 0?q_:t,this}var K_=G_,X_=O_,Q_=R_,J_=B_,Z_=W_,eO=K_;function Vi(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Vi.prototype.clear=X_;Vi.prototype.delete=Q_;Vi.prototype.get=J_;Vi.prototype.has=Z_;Vi.prototype.set=eO;var tO=Vi,Xv=tO,rO=$u,sO=Tx;function nO(){this.size=0,this.__data__={hash:new Xv,map:new(sO||rO),string:new Xv}}var aO=nO;function iO(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var oO=iO,lO=oO;function cO(e,t){var r=e.__data__;return lO(t)?r[typeof t=="string"?"string":"hash"]:r.map}var Bu=cO,dO=Bu;function uO(e){var t=dO(this,e).delete(e);return this.size-=t?1:0,t}var mO=uO,hO=Bu;function fO(e){return hO(this,e).get(e)}var pO=fO,xO=Bu;function gO(e){return xO(this,e).has(e)}var vO=gO,yO=Bu;function bO(e,t){var r=yO(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var jO=bO,NO=aO,wO=mO,SO=pO,CO=vO,EO=jO;function Hi(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Hi.prototype.clear=NO;Hi.prototype.delete=wO;Hi.prototype.get=SO;Hi.prototype.has=CO;Hi.prototype.set=EO;var _x=Hi,kO=$u,DO=Tx,AO=_x,TO=200;function _O(e,t){var r=this.__data__;if(r instanceof kO){var n=r.__data__;if(!DO||n.length<TO-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new AO(n)}return r.set(e,t),this.size=r.size,this}var OO=_O,MO=$u,RO=q3,PO=K3,LO=Q3,IO=Z3,$O=OO;function Wi(e){var t=this.__data__=new MO(e);this.size=t.size}Wi.prototype.clear=RO;Wi.prototype.delete=PO;Wi.prototype.get=LO;Wi.prototype.has=IO;Wi.prototype.set=$O;var Ox=Wi,FO="__lodash_hash_undefined__";function BO(e){return this.__data__.set(e,FO),this}var zO=BO;function UO(e){return this.__data__.has(e)}var VO=UO,HO=_x,WO=zO,YO=VO;function qd(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new HO;++t<r;)this.add(e[t])}qd.prototype.add=qd.prototype.push=WO;qd.prototype.has=YO;var qO=qd;function GO(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var KO=GO;function XO(e,t){return e.has(t)}var QO=XO,JO=qO,ZO=KO,eM=QO,tM=1,rM=2;function sM(e,t,r,n,a,i){var o=r&tM,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var d=i.get(e),u=i.get(t);if(d&&u)return d==t&&u==e;var m=-1,h=!0,g=r&rM?new JO:void 0;for(i.set(e,t),i.set(t,e);++m<l;){var j=e[m],y=t[m];if(n)var v=o?n(y,j,m,t,e,i):n(j,y,m,e,t,i);if(v!==void 0){if(v)continue;h=!1;break}if(g){if(!ZO(t,function(f,x){if(!eM(g,x)&&(j===f||a(j,f,r,n,i)))return g.push(x)})){h=!1;break}}else if(!(j===y||a(j,y,r,n,i))){h=!1;break}}return i.delete(e),i.delete(t),h}var i2=sM,nM=Fs,aM=nM.Uint8Array,o2=aM;function iM(e){var t=-1,r=Array(e.size);return e.forEach(function(n,a){r[++t]=[a,n]}),r}var oM=iM;function lM(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var cM=lM,Qv=Bi,Jv=o2,dM=zl,uM=i2,mM=oM,hM=cM,fM=1,pM=2,xM="[object Boolean]",gM="[object Date]",vM="[object Error]",yM="[object Map]",bM="[object Number]",jM="[object RegExp]",NM="[object Set]",wM="[object String]",SM="[object Symbol]",CM="[object ArrayBuffer]",EM="[object DataView]",Zv=Qv?Qv.prototype:void 0,oh=Zv?Zv.valueOf:void 0;function kM(e,t,r,n,a,i,o){switch(r){case EM:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case CM:return!(e.byteLength!=t.byteLength||!i(new Jv(e),new Jv(t)));case xM:case gM:case bM:return dM(+e,+t);case vM:return e.name==t.name&&e.message==t.message;case jM:case wM:return e==t+"";case yM:var l=mM;case NM:var c=n&fM;if(l||(l=hM),e.size!=t.size&&!c)return!1;var d=o.get(e);if(d)return d==t;n|=pM,o.set(e,t);var u=uM(l(e),l(t),n,a,i,o);return o.delete(e),u;case SM:if(oh)return oh.call(e)==oh.call(t)}return!1}var DM=kM;function AM(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}var Mx=AM,TM=Array.isArray,Gr=TM,_M=Mx,OM=Gr;function MM(e,t,r){var n=t(e);return OM(e)?n:_M(n,r(e))}var l2=MM;function RM(e,t){for(var r=-1,n=e==null?0:e.length,a=0,i=[];++r<n;){var o=e[r];t(o,r,e)&&(i[a++]=o)}return i}var PM=RM;function LM(){return[]}var c2=LM,IM=PM,$M=c2,FM=Object.prototype,BM=FM.propertyIsEnumerable,ey=Object.getOwnPropertySymbols,zM=ey?function(e){return e==null?[]:(e=Object(e),IM(ey(e),function(t){return BM.call(e,t)}))}:$M,Rx=zM;function UM(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var VM=UM,HM=zi,WM=Zn,YM="[object Arguments]";function qM(e){return WM(e)&&HM(e)==YM}var GM=qM,ty=GM,KM=Zn,d2=Object.prototype,XM=d2.hasOwnProperty,QM=d2.propertyIsEnumerable,JM=ty(function(){return arguments}())?ty:function(e){return KM(e)&&XM.call(e,"callee")&&!QM.call(e,"callee")},Px=JM,Gd={exports:{}};function ZM(){return!1}var eR=ZM;Gd.exports;(function(e,t){var r=Fs,n=eR,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||n;e.exports=d})(Gd,Gd.exports);var zu=Gd.exports,tR=zi,rR=xx,sR=Zn,nR="[object Arguments]",aR="[object Array]",iR="[object Boolean]",oR="[object Date]",lR="[object Error]",cR="[object Function]",dR="[object Map]",uR="[object Number]",mR="[object Object]",hR="[object RegExp]",fR="[object Set]",pR="[object String]",xR="[object WeakMap]",gR="[object ArrayBuffer]",vR="[object DataView]",yR="[object Float32Array]",bR="[object Float64Array]",jR="[object Int8Array]",NR="[object Int16Array]",wR="[object Int32Array]",SR="[object Uint8Array]",CR="[object Uint8ClampedArray]",ER="[object Uint16Array]",kR="[object Uint32Array]",et={};et[yR]=et[bR]=et[jR]=et[NR]=et[wR]=et[SR]=et[CR]=et[ER]=et[kR]=!0;et[nR]=et[aR]=et[gR]=et[iR]=et[vR]=et[oR]=et[lR]=et[cR]=et[dR]=et[uR]=et[mR]=et[hR]=et[fR]=et[pR]=et[xR]=!1;function DR(e){return sR(e)&&rR(e.length)&&!!et[tR(e)]}var AR=DR;function TR(e){return function(t){return e(t)}}var Uu=TR,Kd={exports:{}};Kd.exports;(function(e,t){var r=Uw,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===n,o=i&&r.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(Kd,Kd.exports);var Lx=Kd.exports,_R=AR,OR=Uu,ry=Lx,sy=ry&&ry.isTypedArray,MR=sy?OR(sy):_R,Ix=MR,RR=VM,PR=Px,LR=Gr,IR=zu,$R=gx,FR=Ix,BR=Object.prototype,zR=BR.hasOwnProperty;function UR(e,t){var r=LR(e),n=!r&&PR(e),a=!r&&!n&&IR(e),i=!r&&!n&&!a&&FR(e),o=r||n||a||i,l=o?RR(e.length,String):[],c=l.length;for(var d in e)(t||zR.call(e,d))&&!(o&&(d=="length"||a&&(d=="offset"||d=="parent")||i&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||$R(d,c)))&&l.push(d);return l}var u2=UR,VR=Object.prototype;function HR(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||VR;return e===r}var $x=HR;function WR(e,t){return function(r){return e(t(r))}}var m2=WR,YR=m2,qR=YR(Object.keys,Object),GR=qR,KR=$x,XR=GR,QR=Object.prototype,JR=QR.hasOwnProperty;function ZR(e){if(!KR(e))return XR(e);var t=[];for(var r in Object(e))JR.call(e,r)&&r!="constructor"&&t.push(r);return t}var eP=ZR,tP=u2,rP=eP,sP=Ul;function nP(e){return sP(e)?tP(e):rP(e)}var ql=nP,aP=l2,iP=Rx,oP=ql;function lP(e){return aP(e,oP,iP)}var h2=lP,ny=h2,cP=1,dP=Object.prototype,uP=dP.hasOwnProperty;function mP(e,t,r,n,a,i){var o=r&cP,l=ny(e),c=l.length,d=ny(t),u=d.length;if(c!=u&&!o)return!1;for(var m=c;m--;){var h=l[m];if(!(o?h in t:uP.call(t,h)))return!1}var g=i.get(e),j=i.get(t);if(g&&j)return g==t&&j==e;var y=!0;i.set(e,t),i.set(t,e);for(var v=o;++m<c;){h=l[m];var f=e[h],x=t[h];if(n)var b=o?n(x,f,h,t,e,i):n(f,x,h,e,t,i);if(!(b===void 0?f===x||a(f,x,r,n,i):b)){y=!1;break}v||(v=h=="constructor")}if(y&&!v){var N=e.constructor,w=t.constructor;N!=w&&"constructor"in e&&"constructor"in t&&!(typeof N=="function"&&N instanceof N&&typeof w=="function"&&w instanceof w)&&(y=!1)}return i.delete(e),i.delete(t),y}var hP=mP,fP=Fa,pP=Fs,xP=fP(pP,"DataView"),gP=xP,vP=Fa,yP=Fs,bP=vP(yP,"Promise"),jP=bP,NP=Fa,wP=Fs,SP=NP(wP,"Set"),CP=SP,EP=Fa,kP=Fs,DP=EP(kP,"WeakMap"),AP=DP,Lf=gP,If=Tx,$f=jP,Ff=CP,Bf=AP,f2=zi,Yi=a2,ay="[object Map]",TP="[object Object]",iy="[object Promise]",oy="[object Set]",ly="[object WeakMap]",cy="[object DataView]",_P=Yi(Lf),OP=Yi(If),MP=Yi($f),RP=Yi(Ff),PP=Yi(Bf),da=f2;(Lf&&da(new Lf(new ArrayBuffer(1)))!=cy||If&&da(new If)!=ay||$f&&da($f.resolve())!=iy||Ff&&da(new Ff)!=oy||Bf&&da(new Bf)!=ly)&&(da=function(e){var t=f2(e),r=t==TP?e.constructor:void 0,n=r?Yi(r):"";if(n)switch(n){case _P:return cy;case OP:return ay;case MP:return iy;case RP:return oy;case PP:return ly}return t});var Vu=da,lh=Ox,LP=i2,IP=DM,$P=hP,dy=Vu,uy=Gr,my=zu,FP=Ix,BP=1,hy="[object Arguments]",fy="[object Array]",Dc="[object Object]",zP=Object.prototype,py=zP.hasOwnProperty;function UP(e,t,r,n,a,i){var o=uy(e),l=uy(t),c=o?fy:dy(e),d=l?fy:dy(t);c=c==hy?Dc:c,d=d==hy?Dc:d;var u=c==Dc,m=d==Dc,h=c==d;if(h&&my(e)){if(!my(t))return!1;o=!0,u=!1}if(h&&!u)return i||(i=new lh),o||FP(e)?LP(e,t,r,n,a,i):IP(e,t,c,r,n,a,i);if(!(r&BP)){var g=u&&py.call(e,"__wrapped__"),j=m&&py.call(t,"__wrapped__");if(g||j){var y=g?e.value():e,v=j?t.value():t;return i||(i=new lh),a(y,v,r,n,i)}}return h?(i||(i=new lh),$P(e,t,r,n,a,i)):!1}var VP=UP,HP=VP,xy=Zn;function p2(e,t,r,n,a){return e===t?!0:e==null||t==null||!xy(e)&&!xy(t)?e!==e&&t!==t:HP(e,t,r,n,p2,a)}var Fx=p2,WP=Fx;function YP(e,t){return WP(e,t)}var qP=YP;const GP=vr(qP);function ch(e,t){var r=vx(e);return r?r.innerHeight:ja(e).height}function x2(e,t,r){e.closest&&!r&&e.closest(t);var n=e;do{if(WA(n,t))return n;n=n.parentElement}while(n&&n!==r&&n.nodeType===document.ELEMENT_NODE);return null}function KP(e,t,r,n){for(var a=e.length,i=r+(n?1:-1);n?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var XP=KP,QP=Ox,JP=Fx,ZP=1,eL=2;function tL(e,t,r,n){var a=r.length,i=a,o=!n;if(e==null)return!i;for(e=Object(e);a--;){var l=r[a];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<i;){l=r[a];var c=l[0],d=e[c],u=l[1];if(o&&l[2]){if(d===void 0&&!(c in e))return!1}else{var m=new QP;if(n)var h=n(d,u,c,e,t,m);if(!(h===void 0?JP(u,d,ZP|eL,n,m):h))return!1}}return!0}var rL=tL,sL=mn;function nL(e){return e===e&&!sL(e)}var g2=nL,aL=g2,iL=ql;function oL(e){for(var t=iL(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,aL(a)]}return t}var lL=oL;function cL(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var v2=cL,dL=rL,uL=lL,mL=v2;function hL(e){var t=uL(e);return t.length==1&&t[0][2]?mL(t[0][0],t[0][1]):function(r){return r===e||dL(r,e,t)}}var fL=hL,pL=Gr,xL=Vl,gL=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,vL=/^\w*$/;function yL(e,t){if(pL(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||xL(e)?!0:vL.test(e)||!gL.test(e)||t!=null&&e in Object(t)}var Bx=yL,y2=_x,bL="Expected a function";function zx(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(bL);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var o=e.apply(this,n);return r.cache=i.set(a,o)||i,o};return r.cache=new(zx.Cache||y2),r}zx.Cache=y2;var jL=zx,NL=jL,wL=500;function SL(e){var t=NL(e,function(n){return r.size===wL&&r.clear(),n}),r=t.cache;return t}var CL=SL,EL=CL,kL=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,DL=/\\(\\)?/g,AL=EL(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(kL,function(r,n,a,i){t.push(a?i.replace(DL,"$1"):n||r)}),t}),TL=AL;function _L(e,t){for(var r=-1,n=e==null?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}var Ux=_L,gy=Bi,OL=Ux,ML=Gr,RL=Vl,vy=gy?gy.prototype:void 0,yy=vy?vy.toString:void 0;function b2(e){if(typeof e=="string")return e;if(ML(e))return OL(e,b2)+"";if(RL(e))return yy?yy.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var PL=b2,LL=PL;function IL(e){return e==null?"":LL(e)}var $L=IL,FL=Gr,BL=Bx,zL=TL,UL=$L;function VL(e,t){return FL(e)?e:BL(e,t)?[e]:zL(UL(e))}var Hu=VL,HL=Vl;function WL(e){if(typeof e=="string"||HL(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var Gl=WL,YL=Hu,qL=Gl;function GL(e,t){t=YL(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[qL(t[r++])];return r&&r==n?e:void 0}var Wu=GL,KL=Wu;function XL(e,t,r){var n=e==null?void 0:KL(e,t);return n===void 0?r:n}var QL=XL;function JL(e,t){return e!=null&&t in Object(e)}var ZL=JL,eI=Hu,tI=Px,rI=Gr,sI=gx,nI=xx,aI=Gl;function iI(e,t,r){t=eI(t,e);for(var n=-1,a=t.length,i=!1;++n<a;){var o=aI(t[n]);if(!(i=e!=null&&r(e,o)))break;e=e[o]}return i||++n!=a?i:(a=e==null?0:e.length,!!a&&nI(a)&&sI(o,a)&&(rI(e)||tI(e)))}var oI=iI,lI=ZL,cI=oI;function dI(e,t){return e!=null&&cI(e,t,lI)}var uI=dI,mI=Fx,hI=QL,fI=uI,pI=Bx,xI=g2,gI=v2,vI=Gl,yI=1,bI=2;function jI(e,t){return pI(e)&&xI(t)?gI(vI(e),t):function(r){var n=hI(r,e);return n===void 0&&n===t?fI(r,e):mI(t,n,yI|bI)}}var NI=jI;function wI(e){return e}var Yu=wI;function SI(e){return function(t){return t==null?void 0:t[e]}}var CI=SI,EI=Wu;function kI(e){return function(t){return EI(t,e)}}var DI=kI,AI=CI,TI=DI,_I=Bx,OI=Gl;function MI(e){return _I(e)?AI(OI(e)):TI(e)}var RI=MI,PI=fL,LI=NI,II=Yu,$I=Gr,FI=RI;function BI(e){return typeof e=="function"?e:e==null?II:typeof e=="object"?$I(e)?LI(e[0],e[1]):PI(e):FI(e)}var qu=BI,zI=XP,UI=qu,VI=Ww,HI=Math.max;function WI(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var a=r==null?0:VI(r);return a<0&&(a=HI(n+a,0)),zI(e,UI(t),a)}var YI=WI;const qI=vr(YI);var GI=Math.ceil,KI=Math.max;function XI(e,t,r,n){for(var a=-1,i=KI(GI((t-e)/(r||1)),0),o=Array(i);i--;)o[n?i:++a]=e,e+=r;return o}var QI=XI,JI=QI,ZI=Pu,dh=Hw;function e$(e){return function(t,r,n){return n&&typeof n!="number"&&ZI(t,r,n)&&(r=n=void 0),t=dh(t),r===void 0?(r=t,t=0):r=dh(r),n=n===void 0?t<r?1:-1:dh(n),JI(t,r,n,e)}}var t$=e$,r$=t$,s$=r$(),n$=s$;const a$=vr(n$);var by=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function i$(e,t){return!!(e===t||by(e)&&by(t))}function o$(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!i$(e[r],t[r]))return!1;return!0}function j2(e,t){t===void 0&&(t=o$);var r=null;function n(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];if(r&&r.lastThis===this&&t(a,r.lastArgs))return r.lastResult;var o=e.apply(this,a);return r={lastResult:o,lastArgs:a,lastThis:this},o}return n.clear=function(){r=null},n}function zf(e,t){var r=vx(e);return r?r.innerWidth:ja(e).width}var jy=Bi,l$=Px,c$=Gr,Ny=jy?jy.isConcatSpreadable:void 0;function d$(e){return c$(e)||l$(e)||!!(Ny&&e&&e[Ny])}var u$=d$,m$=Mx,h$=u$;function N2(e,t,r,n,a){var i=-1,o=e.length;for(r||(r=h$),a||(a=[]);++i<o;){var l=e[i];t>0&&r(l)?t>1?N2(l,t-1,r,n,a):m$(a,l):n||(a[a.length]=l)}return a}var w2=N2;function f$(e){return function(t,r,n){for(var a=-1,i=Object(t),o=n(t),l=o.length;l--;){var c=o[e?l:++a];if(r(i[c],c,i)===!1)break}return t}}var p$=f$,x$=p$,g$=x$(),v$=g$,y$=v$,b$=ql;function j$(e,t){return e&&y$(e,t,b$)}var Vx=j$,N$=Ul;function w$(e,t){return function(r,n){if(r==null)return r;if(!N$(r))return e(r,n);for(var a=r.length,i=t?a:-1,o=Object(r);(t?i--:++i<a)&&n(o[i],i,o)!==!1;);return r}}var S$=w$,C$=Vx,E$=S$,k$=E$(C$),D$=k$,A$=D$,T$=Ul;function _$(e,t){var r=-1,n=T$(e)?Array(e.length):[];return A$(e,function(a,i,o){n[++r]=t(a,i,o)}),n}var O$=_$;function M$(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var R$=M$,wy=Vl;function P$(e,t){if(e!==t){var r=e!==void 0,n=e===null,a=e===e,i=wy(e),o=t!==void 0,l=t===null,c=t===t,d=wy(t);if(!l&&!d&&!i&&e>t||i&&o&&c&&!l&&!d||n&&o&&c||!r&&c||!a)return 1;if(!n&&!i&&!d&&e<t||d&&r&&a&&!n&&!i||l&&r&&a||!o&&a||!c)return-1}return 0}var L$=P$,I$=L$;function $$(e,t,r){for(var n=-1,a=e.criteria,i=t.criteria,o=a.length,l=r.length;++n<o;){var c=I$(a[n],i[n]);if(c){if(n>=l)return c;var d=r[n];return c*(d=="desc"?-1:1)}}return e.index-t.index}var F$=$$,uh=Ux,B$=Wu,z$=qu,U$=O$,V$=R$,H$=Uu,W$=F$,Y$=Yu,q$=Gr;function G$(e,t,r){t.length?t=uh(t,function(i){return q$(i)?function(o){return B$(o,i.length===1?i[0]:i)}:i}):t=[Y$];var n=-1;t=uh(t,H$(z$));var a=U$(e,function(i,o,l){var c=uh(t,function(d){return d(i)});return{criteria:c,index:++n,value:i}});return V$(a,function(i,o){return W$(i,o,r)})}var K$=G$;function X$(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var Q$=X$,J$=Q$,Sy=Math.max;function Z$(e,t,r){return t=Sy(t===void 0?e.length-1:t,0),function(){for(var n=arguments,a=-1,i=Sy(n.length-t,0),o=Array(i);++a<i;)o[a]=n[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=n[a];return l[t]=r(o),J$(e,this,l)}}var S2=Z$;function e8(e){return function(){return e}}var t8=e8,r8=Fa,s8=function(){try{var e=r8(Object,"defineProperty");return e({},"",{}),e}catch{}}(),C2=s8,n8=t8,Cy=C2,a8=Yu,i8=Cy?function(e,t){return Cy(e,"toString",{configurable:!0,enumerable:!1,value:n8(t),writable:!0})}:a8,o8=i8,l8=800,c8=16,d8=Date.now;function u8(e){var t=0,r=0;return function(){var n=d8(),a=c8-(n-r);if(r=n,a>0){if(++t>=l8)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var m8=u8,h8=o8,f8=m8,p8=f8(h8),E2=p8,x8=Yu,g8=S2,v8=E2;function y8(e,t){return v8(g8(e,t,x8),e+"")}var k2=y8,b8=w2,j8=K$,N8=k2,Ey=Pu,w8=N8(function(e,t){if(e==null)return[];var r=t.length;return r>1&&Ey(e,t[0],t[1])?t=[]:r>2&&Ey(t[0],t[1],t[2])&&(t=[t[0]]),j8(e,b8(t,1),[])}),S8=w8;const C8=vr(S8);function D2(e){return ww(e)||Bw(e)||ux(e)||Sw()}function E8(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var k8=E8,D8=mn,A8=$x,T8=k8,_8=Object.prototype,O8=_8.hasOwnProperty;function M8(e){if(!D8(e))return T8(e);var t=A8(e),r=[];for(var n in e)n=="constructor"&&(t||!O8.call(e,n))||r.push(n);return r}var R8=M8,P8=u2,L8=R8,I8=Ul;function $8(e){return I8(e)?P8(e,!0):L8(e)}var Gu=$8,F8=k2,B8=zl,z8=Pu,U8=Gu,A2=Object.prototype,V8=A2.hasOwnProperty,H8=F8(function(e,t){e=Object(e);var r=-1,n=t.length,a=n>2?t[2]:void 0;for(a&&z8(t[0],t[1],a)&&(n=1);++r<n;)for(var i=t[r],o=U8(i),l=-1,c=o.length;++l<c;){var d=o[l],u=e[d];(u===void 0||B8(u,A2[d])&&!V8.call(e,d))&&(e[d]=i[d])}return e}),W8=H8;const Y8=vr(W8);var ky=C2;function q8(e,t,r){t=="__proto__"&&ky?ky(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var Hx=q8,G8=Hx,K8=Vx,X8=qu;function Q8(e,t){var r={};return t=X8(t),K8(e,function(n,a,i){G8(r,a,t(n,a,i))}),r}var J8=Q8;const Z8=vr(J8);function eF(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var T2=eF,tF=Hx,rF=zl,sF=Object.prototype,nF=sF.hasOwnProperty;function aF(e,t,r){var n=e[t];(!(nF.call(e,t)&&rF(n,r))||r===void 0&&!(t in e))&&tF(e,t,r)}var _2=aF,iF=_2,oF=Hx;function lF(e,t,r,n){var a=!r;r||(r={});for(var i=-1,o=t.length;++i<o;){var l=t[i],c=n?n(r[l],e[l],l,r,e):void 0;c===void 0&&(c=e[l]),a?oF(r,l,c):iF(r,l,c)}return r}var Kl=lF,cF=Kl,dF=ql;function uF(e,t){return e&&cF(t,dF(t),e)}var mF=uF,hF=Kl,fF=Gu;function pF(e,t){return e&&hF(t,fF(t),e)}var xF=pF,Xd={exports:{}};Xd.exports;(function(e,t){var r=Fs,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===n,o=i?r.Buffer:void 0,l=o?o.allocUnsafe:void 0;function c(d,u){if(u)return d.slice();var m=d.length,h=l?l(m):new d.constructor(m);return d.copy(h),h}e.exports=c})(Xd,Xd.exports);var gF=Xd.exports;function vF(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var yF=vF,bF=Kl,jF=Rx;function NF(e,t){return bF(e,jF(e),t)}var wF=NF,SF=m2,CF=SF(Object.getPrototypeOf,Object),Ku=CF,EF=Mx,kF=Ku,DF=Rx,AF=c2,TF=Object.getOwnPropertySymbols,_F=TF?function(e){for(var t=[];e;)EF(t,DF(e)),e=kF(e);return t}:AF,O2=_F,OF=Kl,MF=O2;function RF(e,t){return OF(e,MF(e),t)}var PF=RF,LF=l2,IF=O2,$F=Gu;function FF(e){return LF(e,$F,IF)}var M2=FF,BF=Object.prototype,zF=BF.hasOwnProperty;function UF(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&zF.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var VF=UF,Dy=o2;function HF(e){var t=new e.constructor(e.byteLength);return new Dy(t).set(new Dy(e)),t}var Wx=HF,WF=Wx;function YF(e,t){var r=t?WF(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var qF=YF,GF=/\w*$/;function KF(e){var t=new e.constructor(e.source,GF.exec(e));return t.lastIndex=e.lastIndex,t}var XF=KF,Ay=Bi,Ty=Ay?Ay.prototype:void 0,_y=Ty?Ty.valueOf:void 0;function QF(e){return _y?Object(_y.call(e)):{}}var JF=QF,ZF=Wx;function e7(e,t){var r=t?ZF(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var t7=e7,r7=Wx,s7=qF,n7=XF,a7=JF,i7=t7,o7="[object Boolean]",l7="[object Date]",c7="[object Map]",d7="[object Number]",u7="[object RegExp]",m7="[object Set]",h7="[object String]",f7="[object Symbol]",p7="[object ArrayBuffer]",x7="[object DataView]",g7="[object Float32Array]",v7="[object Float64Array]",y7="[object Int8Array]",b7="[object Int16Array]",j7="[object Int32Array]",N7="[object Uint8Array]",w7="[object Uint8ClampedArray]",S7="[object Uint16Array]",C7="[object Uint32Array]";function E7(e,t,r){var n=e.constructor;switch(t){case p7:return r7(e);case o7:case l7:return new n(+e);case x7:return s7(e,r);case g7:case v7:case y7:case b7:case j7:case N7:case w7:case S7:case C7:return i7(e,r);case c7:return new n;case d7:case h7:return new n(e);case u7:return n7(e);case m7:return new n;case f7:return a7(e)}}var k7=E7,D7=mn,Oy=Object.create,A7=function(){function e(){}return function(t){if(!D7(t))return{};if(Oy)return Oy(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),R2=A7,T7=R2,_7=Ku,O7=$x;function M7(e){return typeof e.constructor=="function"&&!O7(e)?T7(_7(e)):{}}var R7=M7,P7=Vu,L7=Zn,I7="[object Map]";function $7(e){return L7(e)&&P7(e)==I7}var F7=$7,B7=F7,z7=Uu,My=Lx,Ry=My&&My.isMap,U7=Ry?z7(Ry):B7,V7=U7,H7=Vu,W7=Zn,Y7="[object Set]";function q7(e){return W7(e)&&H7(e)==Y7}var G7=q7,K7=G7,X7=Uu,Py=Lx,Ly=Py&&Py.isSet,Q7=Ly?X7(Ly):K7,J7=Q7,Z7=Ox,e9=T2,t9=_2,r9=mF,s9=xF,n9=gF,a9=yF,i9=wF,o9=PF,l9=h2,c9=M2,d9=Vu,u9=VF,m9=k7,h9=R7,f9=Gr,p9=zu,x9=V7,g9=mn,v9=J7,y9=ql,b9=Gu,j9=1,N9=2,w9=4,P2="[object Arguments]",S9="[object Array]",C9="[object Boolean]",E9="[object Date]",k9="[object Error]",L2="[object Function]",D9="[object GeneratorFunction]",A9="[object Map]",T9="[object Number]",I2="[object Object]",_9="[object RegExp]",O9="[object Set]",M9="[object String]",R9="[object Symbol]",P9="[object WeakMap]",L9="[object ArrayBuffer]",I9="[object DataView]",$9="[object Float32Array]",F9="[object Float64Array]",B9="[object Int8Array]",z9="[object Int16Array]",U9="[object Int32Array]",V9="[object Uint8Array]",H9="[object Uint8ClampedArray]",W9="[object Uint16Array]",Y9="[object Uint32Array]",Ge={};Ge[P2]=Ge[S9]=Ge[L9]=Ge[I9]=Ge[C9]=Ge[E9]=Ge[$9]=Ge[F9]=Ge[B9]=Ge[z9]=Ge[U9]=Ge[A9]=Ge[T9]=Ge[I2]=Ge[_9]=Ge[O9]=Ge[M9]=Ge[R9]=Ge[V9]=Ge[H9]=Ge[W9]=Ge[Y9]=!0;Ge[k9]=Ge[L2]=Ge[P9]=!1;function rd(e,t,r,n,a,i){var o,l=t&j9,c=t&N9,d=t&w9;if(r&&(o=a?r(e,n,a,i):r(e)),o!==void 0)return o;if(!g9(e))return e;var u=f9(e);if(u){if(o=u9(e),!l)return a9(e,o)}else{var m=d9(e),h=m==L2||m==D9;if(p9(e))return n9(e,l);if(m==I2||m==P2||h&&!a){if(o=c||h?{}:h9(e),!l)return c?o9(e,s9(o,e)):i9(e,r9(o,e))}else{if(!Ge[m])return a?e:{};o=m9(e,m,l)}}i||(i=new Z7);var g=i.get(e);if(g)return g;i.set(e,o),v9(e)?e.forEach(function(v){o.add(rd(v,t,r,v,e,i))}):x9(e)&&e.forEach(function(v,f){o.set(f,rd(v,t,r,f,e,i))});var j=d?c?c9:l9:c?b9:y9,y=u?void 0:j(e);return e9(y||e,function(v,f){y&&(f=v,v=e[f]),t9(o,f,rd(v,t,r,f,e,i))}),o}var q9=rd;function G9(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var K9=G9,X9=Wu,Q9=zw;function J9(e,t){return t.length<2?e:X9(e,Q9(t,0,-1))}var Z9=J9,eB=Hu,tB=K9,rB=Z9,sB=Gl;function nB(e,t){return t=eB(t,e),e=rB(e,t),e==null||delete e[sB(tB(t))]}var aB=nB,iB=zi,oB=Ku,lB=Zn,cB="[object Object]",dB=Function.prototype,uB=Object.prototype,$2=dB.toString,mB=uB.hasOwnProperty,hB=$2.call(Object);function fB(e){if(!lB(e)||iB(e)!=cB)return!1;var t=oB(e);if(t===null)return!0;var r=mB.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&$2.call(r)==hB}var pB=fB,xB=pB;function gB(e){return xB(e)?void 0:e}var vB=gB,yB=w2;function bB(e){var t=e==null?0:e.length;return t?yB(e,1):[]}var jB=bB,NB=jB,wB=S2,SB=E2;function CB(e){return SB(wB(e,void 0,NB),e+"")}var EB=CB,kB=Ux,DB=q9,AB=aB,TB=Hu,_B=Kl,OB=vB,MB=EB,RB=M2,PB=1,LB=2,IB=4,$B=MB(function(e,t){var r={};if(e==null)return r;var n=!1;t=kB(t,function(i){return i=TB(i,e),n||(n=i.length>1),i}),_B(e,RB(e),r),n&&(r=DB(r,PB|LB|IB,OB));for(var a=t.length;a--;)AB(r,t[a]);return r}),FB=$B;const BB=vr(FB);var zB=T2,UB=R2,VB=Vx,HB=qu,WB=Ku,YB=Gr,qB=zu,GB=px,KB=mn,XB=Ix;function QB(e,t,r){var n=YB(e),a=n||qB(e)||XB(e);if(t=HB(t),r==null){var i=e&&e.constructor;a?r=n?new i:[]:KB(e)?r=GB(i)?UB(WB(e)):{}:r={}}return(a?zB:VB)(e,function(o,l,c){return t(r,o,l,c)}),r}var JB=QB;const ZB=vr(JB);var ez={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(zr,function(){return function(r,n,a){n.prototype.isBetween=function(i,o,l,c){var d=a(i),u=a(o),m=(c=c||"()")[0]==="(",h=c[1]===")";return(m?this.isAfter(d,l):!this.isBefore(d,l))&&(h?this.isBefore(u,l):!this.isAfter(u,l))||(m?this.isBefore(d,l):!this.isAfter(d,l))&&(h?this.isAfter(u,l):!this.isBefore(u,l))}}})})(ez);var tz={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(zr,function(){return function(r,n){n.prototype.isSameOrAfter=function(a,i){return this.isSame(a,i)||this.isAfter(a,i)}}})})(tz);var rz={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(zr,function(){return function(r,n){n.prototype.isSameOrBefore=function(a,i){return this.isSame(a,i)||this.isBefore(a,i)}}})})(rz);var sz={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(zr,function(){return function(r,n,a){var i=n.prototype,o=function(m){return m&&(m.indexOf?m:m.s)},l=function(m,h,g,j,y){var v=m.name?m:m.$locale(),f=o(v[h]),x=o(v[g]),b=f||x.map(function(w){return w.slice(0,j)});if(!y)return b;var N=v.weekStart;return b.map(function(w,S){return b[(S+(N||0))%7]})},c=function(){return a.Ls[a.locale()]},d=function(m,h){return m.formats[h]||function(g){return g.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(j,y,v){return y||v.slice(1)})}(m.formats[h.toUpperCase()])},u=function(){var m=this;return{months:function(h){return h?h.format("MMMM"):l(m,"months")},monthsShort:function(h){return h?h.format("MMM"):l(m,"monthsShort","months",3)},firstDayOfWeek:function(){return m.$locale().weekStart||0},weekdays:function(h){return h?h.format("dddd"):l(m,"weekdays")},weekdaysMin:function(h){return h?h.format("dd"):l(m,"weekdaysMin","weekdays",2)},weekdaysShort:function(h){return h?h.format("ddd"):l(m,"weekdaysShort","weekdays",3)},longDateFormat:function(h){return d(m.$locale(),h)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};i.localeData=function(){return u.bind(this)()},a.localeData=function(){var m=c();return{firstDayOfWeek:function(){return m.weekStart||0},weekdays:function(){return a.weekdays()},weekdaysShort:function(){return a.weekdaysShort()},weekdaysMin:function(){return a.weekdaysMin()},months:function(){return a.months()},monthsShort:function(){return a.monthsShort()},longDateFormat:function(h){return d(m,h)},meridiem:m.meridiem,ordinal:m.ordinal}},a.months=function(){return l(c(),"months")},a.monthsShort=function(){return l(c(),"monthsShort","months",3)},a.weekdays=function(m){return l(c(),"weekdays",null,null,m)},a.weekdaysShort=function(m){return l(c(),"weekdaysShort","weekdays",3,m)},a.weekdaysMin=function(m){return l(c(),"weekdaysMin","weekdays",2,m)}}})})(sz);var nz={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(zr,function(){var r={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(n,a,i){var o=a.prototype,l=o.format;i.en.formats=r,o.format=function(c){c===void 0&&(c="YYYY-MM-DDTHH:mm:ssZ");var d=this.$locale().formats,u=function(m,h){return m.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(g,j,y){var v=y&&y.toUpperCase();return j||h[y]||r[y]||h[v].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(f,x,b){return x||b.slice(1)})})}(c,d===void 0?{}:d);return l.call(this,u)}}})})(nz);var az={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(zr,function(){return function(r,n,a){var i=function(o,l){if(!l||!l.length||l.length===1&&!l[0]||l.length===1&&Array.isArray(l[0])&&!l[0].length)return null;var c;l.length===1&&l[0].length>0&&(l=l[0]),c=(l=l.filter(function(u){return u}))[0];for(var d=1;d<l.length;d+=1)l[d].isValid()&&!l[d][o](c)||(c=l[d]);return c};a.max=function(){var o=[].slice.call(arguments,0);return i("isAfter",o)},a.min=function(){var o=[].slice.call(arguments,0);return i("isBefore",o)}}})})(az);var iz={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(zr,function(){var r="minute",n=/[+-]\d\d(?::?\d\d)?/g,a=/([+-]|\d\d)/g;return function(i,o,l){var c=o.prototype;l.utc=function(y){var v={date:y,utc:!0,args:arguments};return new o(v)},c.utc=function(y){var v=l(this.toDate(),{locale:this.$L,utc:!0});return y?v.add(this.utcOffset(),r):v},c.local=function(){return l(this.toDate(),{locale:this.$L,utc:!1})};var d=c.parse;c.parse=function(y){y.utc&&(this.$u=!0),this.$utils().u(y.$offset)||(this.$offset=y.$offset),d.call(this,y)};var u=c.init;c.init=function(){if(this.$u){var y=this.$d;this.$y=y.getUTCFullYear(),this.$M=y.getUTCMonth(),this.$D=y.getUTCDate(),this.$W=y.getUTCDay(),this.$H=y.getUTCHours(),this.$m=y.getUTCMinutes(),this.$s=y.getUTCSeconds(),this.$ms=y.getUTCMilliseconds()}else u.call(this)};var m=c.utcOffset;c.utcOffset=function(y,v){var f=this.$utils().u;if(f(y))return this.$u?0:f(this.$offset)?m.call(this):this.$offset;if(typeof y=="string"&&(y=function(w){w===void 0&&(w="");var S=w.match(n);if(!S)return null;var C=(""+S[0]).match(a)||["-",0,0],k=C[0],A=60*+C[1]+ +C[2];return A===0?0:k==="+"?A:-A}(y),y===null))return this;var x=Math.abs(y)<=16?60*y:y,b=this;if(v)return b.$offset=x,b.$u=y===0,b;if(y!==0){var N=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(b=this.local().add(x+N,r)).$offset=x,b.$x.$localOffset=N}else b=this.utc();return b};var h=c.format;c.format=function(y){var v=y||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return h.call(this,v)},c.valueOf=function(){var y=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*y},c.isUTC=function(){return!!this.$u},c.toISOString=function(){return this.toDate().toISOString()},c.toString=function(){return this.toDate().toUTCString()};var g=c.toDate;c.toDate=function(y){return y==="s"&&this.$offset?l(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():g.call(this)};var j=c.diff;c.diff=function(y,v,f){if(y&&this.$u===y.$u)return j.call(this,y,v,f);var x=this.local(),b=l(y).local();return j.call(x,b,v,f)}}})})(iz);var oz={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(zr,function(){return function(r,n){n.prototype.isLeapYear=function(){return this.$y%4==0&&this.$y%100!=0||this.$y%400==0}}})})(oz);function Cs(e){return e.children}var gr={PREVIOUS:"PREV",NEXT:"NEXT",TODAY:"TODAY",DATE:"DATE"},tr={MONTH:"month",WEEK:"week",WORK_WEEK:"work_week",DAY:"day",AGENDA:"agenda"},Iy=Object.keys(tr).map(function(e){return tr[e]});ie.oneOfType([ie.string,ie.func]);ie.any;ie.func;ie.oneOfType([ie.arrayOf(ie.oneOf(Iy)),ie.objectOf(function(e,t){var r=Iy.indexOf(t)!==-1&&typeof e[t]=="boolean";if(r)return null;for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i];return ie.elementType.apply(ie,[e,t].concat(a))})]);ie.oneOfType([ie.oneOf(["overlap","no-overlap"]),ie.func]);var $y={seconds:1e3,minutes:1e3*60,hours:1e3*60*60,day:1e3*60*60*24};function F2(e,t){var r=It(e,"month");return It(r,"week",t.startOfWeek())}function B2(e,t){var r=Hd(e,"month");return Hd(r,"week",t.startOfWeek())}function lz(e,t){for(var r=F2(e,t),n=B2(e,t),a=[];$i(r,n,"day");)a.push(r),r=ds(r,1,"day");return a}function cz(e,t){var r=It(e,t);return Fl(r,e)?r:ds(r,1,t)}function dz(e,t){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"day",n=e,a=[];$i(n,t,r);)a.push(n),n=ds(n,1,r);return a}function uz(e,t){return t==null&&e==null?null:(t==null&&(t=new Date),e==null&&(e=new Date),e=It(e,"day"),e=bl(e,bl(t)),e=Ci(e,Ci(t)),e=yl(e,yl(t)),vl(e,vl(t)))}function Fy(e){return bl(e)===0&&Ci(e)===0&&yl(e)===0&&vl(e)===0}function mz(e,t,r,n){return r==="day"&&(r="date"),Math.abs(jv[r](e,void 0,n)-jv[r](t,void 0,n))}function Yx(e,t,r){return!r||r==="milliseconds"?Math.abs(+e-+t):Math.round(Math.abs(+It(e,r)/$y[r]-+It(t,r)/$y[r]))}var hz=ie.oneOfType([ie.string,ie.func]);function fz(e,t,r,n,a){var i=typeof n=="function"?n(r,a,e):t.call(e,r,n,a);return ml(i==null||typeof i=="string","`localizer format(..)` must return a string, null, or undefined"),i}function pz(e,t,r){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,t+r,0,0)}function qx(e,t){return e.getTimezoneOffset()-t.getTimezoneOffset()}function xz(e,t){return Yx(e,t,"minutes")+qx(e,t)}function gz(e){var t=It(e,"day");return Yx(t,e,"minutes")+qx(t,e)}function vz(e,t){return fx(e,t,"day")}function yz(e,t,r){var n=Fl(e,t,"minutes");return n?Bl(t,r,"minutes"):Ru(t,r,"minutes")}function Uf(e,t){return mz(e,t,"day")}function bz(e){var t=e.evtA,r=t.start,n=t.end,a=t.allDay,i=e.evtB,o=i.start,l=i.end,c=i.allDay,d=+It(r,"day")-+It(o,"day"),u=Uf(r,n),m=Uf(o,l);return d||m-u||!!c-!!a||+r-+o||+n-+l}function jz(e){var t=e.event,r=t.start,n=t.end,a=e.range,i=a.start,o=a.end,l=It(r,"day"),c=$i(l,o,"day"),d=hx(l,n,"minutes"),u=d?Ru(n,i,"minutes"):Bl(n,i,"minutes");return c&&u}function Nz(e,t){return Fl(e,t,"day")}function wz(e,t){return Fy(e)&&Fy(t)}var Sz=kt(function e(t){var r=this;Et(this,e),ml(typeof t.format=="function","date localizer `format(..)` must be a function"),ml(typeof t.firstOfWeek=="function","date localizer `firstOfWeek(..)` must be a function"),this.propType=t.propType||hz,this.formats=t.formats,this.format=function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return fz.apply(void 0,[r,t.format].concat(a))},this.startOfWeek=t.firstOfWeek,this.merge=t.merge||uz,this.inRange=t.inRange||Lw,this.lt=t.lt||fx,this.lte=t.lte||$i,this.gt=t.gt||Ru,this.gte=t.gte||Bl,this.eq=t.eq||Fl,this.neq=t.neq||hx,this.startOf=t.startOf||It,this.endOf=t.endOf||Hd,this.add=t.add||ds,this.range=t.range||dz,this.diff=t.diff||Yx,this.ceil=t.ceil||cz,this.min=t.min||Rw,this.max=t.max||Pw,this.minutes=t.minutes||Ci,this.daySpan=t.daySpan||Uf,this.firstVisibleDay=t.firstVisibleDay||F2,this.lastVisibleDay=t.lastVisibleDay||B2,this.visibleDays=t.visibleDays||lz,this.getSlotDate=t.getSlotDate||pz,this.getTimezoneOffset=t.getTimezoneOffset||function(n){return n.getTimezoneOffset()},this.getDstOffset=t.getDstOffset||qx,this.getTotalMin=t.getTotalMin||xz,this.getMinutesFromMidnight=t.getMinutesFromMidnight||gz,this.continuesPrior=t.continuesPrior||vz,this.continuesAfter=t.continuesAfter||yz,this.sortEvents=t.sortEvents||bz,this.inEventRange=t.inEventRange||jz,this.isSameDate=t.isSameDate||Nz,this.startAndEndAreDateOnly=t.startAndEndAreDateOnly||wz,this.segmentOffset=t.browserTZOffset?t.browserTZOffset():0});function Cz(e,t,r,n){var a=qe(qe({},e.formats),r);return qe(qe({},e),{},{messages:n,startOfWeek:function(){return e.startOfWeek(t)},format:function(o,l){return e.format(o,a[l]||l,t)}})}var Ez=function(e){function t(){var r;Et(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Gt(this,t,[].concat(a)),r.navigate=function(o){r.props.onNavigate(o)},r.view=function(o){r.props.onView(o)},r}return Kt(t,e),kt(t,[{key:"render",value:function(){var n=this.props,a=n.localizer.messages,i=n.label;return z.createElement("div",{className:"rbc-toolbar"},z.createElement("span",{className:"rbc-btn-group"},z.createElement("button",{type:"button",onClick:this.navigate.bind(null,gr.TODAY)},a.today),z.createElement("button",{type:"button",onClick:this.navigate.bind(null,gr.PREVIOUS)},a.previous),z.createElement("button",{type:"button",onClick:this.navigate.bind(null,gr.NEXT)},a.next)),z.createElement("span",{className:"rbc-toolbar-label"},i),z.createElement("span",{className:"rbc-btn-group"},this.viewNamesGroup(a)))}},{key:"viewNamesGroup",value:function(n){var a=this,i=this.props.views,o=this.props.view;if(i.length>1)return i.map(function(l){return z.createElement("button",{type:"button",key:l,className:ft({"rbc-active":o===l}),onClick:a.view.bind(null,l)},n[l])})}}])}(z.Component);function tt(e,t){e&&e.apply(null,[].concat(t))}var kz={date:"Date",time:"Time",event:"Event",allDay:"All Day",week:"Week",work_week:"Work Week",day:"Day",month:"Month",previous:"Back",next:"Next",yesterday:"Yesterday",tomorrow:"Tomorrow",today:"Today",agenda:"Agenda",noEventsInRange:"There are no events in this range.",showMore:function(t){return"+".concat(t," more")}};function Dz(e){return qe(qe({},kz),e)}function Az(e){var t=e.ref,r=e.callback;p.useEffect(function(){var n=function(i){t.current&&!t.current.contains(i.target)&&r()};return document.addEventListener("mousedown",n),function(){document.removeEventListener("mousedown",n)}},[t,r])}var Tz=["style","className","event","selected","isAllDay","onSelect","onDoubleClick","onKeyPress","localizer","continuesPrior","continuesAfter","accessors","getters","children","components","slotStart","slotEnd"],z2=function(e){function t(){return Et(this,t),Gt(this,t,arguments)}return Kt(t,e),kt(t,[{key:"render",value:function(){var n=this.props,a=n.style,i=n.className,o=n.event,l=n.selected,c=n.isAllDay,d=n.onSelect,u=n.onDoubleClick,m=n.onKeyPress,h=n.localizer,g=n.continuesPrior,j=n.continuesAfter,y=n.accessors,v=n.getters,f=n.children,x=n.components,b=x.event,N=x.eventWrapper,w=n.slotStart,S=n.slotEnd,C=Rs(n,Tz);delete C.resizable;var k=y.title(o),A=y.tooltip(o),O=y.end(o),D=y.start(o),I=y.allDay(o),M=c||I||h.diff(D,h.ceil(O,"day"),"day")>1,E=v.eventProp(o,D,O,l),L=z.createElement("div",{className:"rbc-event-content",title:A||void 0},b?z.createElement(b,{event:o,continuesPrior:g,continuesAfter:j,title:k,isAllDay:I,localizer:h,slotStart:w,slotEnd:S}):k);return z.createElement(N,Object.assign({},this.props,{type:"date"}),z.createElement("div",Object.assign({},C,{style:qe(qe({},E.style),a),className:ft("rbc-event",i,E.className,{"rbc-selected":l,"rbc-event-allday":M,"rbc-event-continues-prior":g,"rbc-event-continues-after":j}),onClick:function(G){return d&&d(o,G)},onDoubleClick:function(G){return u&&u(o,G)},onKeyDown:function(G){return m&&m(o,G)}}),typeof f=="function"?f(L):L))}}])}(z.Component);function Xu(e,t){return!e||t==null?!1:GP(e,t)}function U2(e,t){var r=e.right-e.left,n=r/t;return n}function V2(e,t,r,n){var a=U2(e,n);return r?n-1-Math.floor((t-e.left)/a):Math.floor((t-e.left)/a)}function _z(e,t){var r=t.x,n=t.y;return n>=e.top&&n<=e.bottom&&r>=e.left&&r<=e.right}function Oz(e,t,r,n,a){var i=-1,o=-1,l=n-1,c=U2(t,n),d=V2(t,r.x,a,n),u=t.top<r.y&&t.bottom>r.y,m=t.top<e.y&&t.bottom>e.y,h=e.y>t.bottom,g=t.top>e.y,j=r.top<t.top&&r.bottom>t.bottom;return j&&(i=0,o=l),u&&(g?(i=0,o=d):h&&(i=d,o=l)),m&&(i=o=a?l-Math.floor((e.x-t.left)/c):Math.floor((e.x-t.left)/c),u?d<i?i=d:o=d:e.y<r.y?o=l:i=0),{startIdx:i,endIdx:o}}function Mz(e){var t=e.target,r=e.offset,n=e.container,a=e.box,i=ja(t),o=i.top,l=i.left,c=i.width,d=i.height,u=ja(n),m=u.top,h=u.left,g=u.width,j=u.height,y=ja(a),v=y.width,f=y.height,x=m+j,b=h+g,N=o+f,w=l+v,S=r.x,C=r.y,k=N>x?o-f-C:o+C+d,A=w>b?l+S-v+c:l+S;return{topOffset:k,leftOffset:A}}function Rz(e){var t=e.containerRef,r=e.accessors,n=e.getters,a=e.selected,i=e.components,o=e.localizer,l=e.position,c=e.show,d=e.events,u=e.slotStart,m=e.slotEnd,h=e.onSelect,g=e.onDoubleClick,j=e.onKeyPress,y=e.handleDragStart,v=e.popperRef,f=e.target,x=e.offset;Az({ref:v,callback:c}),p.useLayoutEffect(function(){var w=Mz({target:f,offset:x,container:t.current,box:v.current}),S=w.topOffset,C=w.leftOffset;v.current.style.top="".concat(S,"px"),v.current.style.left="".concat(C,"px")},[x.x,x.y,f]);var b=l.width,N={minWidth:b+b/2};return z.createElement("div",{style:N,className:"rbc-overlay",ref:v},z.createElement("div",{className:"rbc-overlay-header"},o.format(u,"dayHeaderFormat")),d.map(function(w,S){return z.createElement(z2,{key:S,type:"popup",localizer:o,event:w,getters:n,onSelect:h,accessors:r,components:i,onDoubleClick:g,onKeyPress:j,continuesPrior:o.lt(r.end(w),u,"day"),continuesAfter:o.gte(r.start(w),m,"day"),slotStart:u,slotEnd:m,selected:Xu(w,a),draggable:!0,onDragStart:function(){return y(w)},onDragEnd:function(){return c()}})}))}var H2=z.forwardRef(function(e,t){return z.createElement(Rz,Object.assign({},e,{popperRef:t}))});H2.propTypes={accessors:ie.object.isRequired,getters:ie.object.isRequired,selected:ie.object,components:ie.object.isRequired,localizer:ie.object.isRequired,position:ie.object.isRequired,show:ie.func.isRequired,events:ie.array.isRequired,slotStart:ie.instanceOf(Date).isRequired,slotEnd:ie.instanceOf(Date),onSelect:ie.func,onDoubleClick:ie.func,onKeyPress:ie.func,handleDragStart:ie.func,style:ie.object,offset:ie.shape({x:ie.number,y:ie.number})};function Pz(e){var t=e.containerRef,r=e.popupOffset,n=r===void 0?5:r,a=e.overlay,i=e.accessors,o=e.localizer,l=e.components,c=e.getters,d=e.selected,u=e.handleSelectEvent,m=e.handleDoubleClickEvent,h=e.handleKeyPressEvent,g=e.handleDragStart,j=e.onHide,y=e.overlayDisplay,v=p.useRef(null);if(!a.position)return null;var f=n;isNaN(n)||(f={x:n,y:n});var x=a.position,b=a.events,N=a.date,w=a.end;return z.createElement(Ax,{rootClose:!0,flip:!0,show:!0,placement:"bottom",onHide:j,target:a.target},function(S){var C=S.props;return z.createElement(H2,Object.assign({},C,{containerRef:t,ref:v,target:a.target,offset:f,accessors:i,getters:c,selected:d,components:l,localizer:o,position:x,show:y,events:b,slotStart:N,slotEnd:w,onSelect:u,onDoubleClick:m,onKeyPress:h,handleDragStart:g}))})}var Gx=z.forwardRef(function(e,t){return z.createElement(Pz,Object.assign({},e,{containerRef:t}))});Gx.propTypes={popupOffset:ie.oneOfType([ie.number,ie.shape({x:ie.number,y:ie.number})]),overlay:ie.shape({position:ie.object,events:ie.array,date:ie.instanceOf(Date),end:ie.instanceOf(Date)}),accessors:ie.object.isRequired,localizer:ie.object.isRequired,components:ie.object.isRequired,getters:ie.object.isRequired,selected:ie.object,handleSelectEvent:ie.func,handleDoubleClickEvent:ie.func,handleKeyPressEvent:ie.func,handleDragStart:ie.func,onHide:ie.func,overlayDisplay:ie.func};function Vt(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;return Eo(r,e,t,{passive:!1})}function Lz(e,t,r){return!e||jl(e,document.elementFromPoint(t,r))}function Iz(e,t){var r=t.clientX,n=t.clientY,a=document.elementFromPoint(r,n);return x2(a,".rbc-event",e)}function $z(e,t){var r=t.clientX,n=t.clientY,a=document.elementFromPoint(r,n);return x2(a,".rbc-show-more",e)}function Qd(e,t){return!!Iz(e,t)}function Fz(e,t){return!!$z(e,t)}function po(e){var t=e;return e.touches&&e.touches.length&&(t=e.touches[0]),{clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY}}var By=5,Bz=250,W2=function(){function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.global,a=n===void 0?!1:n,i=r.longPressThreshold,o=i===void 0?250:i,l=r.validContainers,c=l===void 0?[]:l;Et(this,e),this._initialEvent=null,this.selecting=!1,this.isDetached=!1,this.container=t,this.globalMouse=!t||a,this.longPressThreshold=o,this.validContainers=c,this._listeners=Object.create(null),this._handleInitialEvent=this._handleInitialEvent.bind(this),this._handleMoveEvent=this._handleMoveEvent.bind(this),this._handleTerminatingEvent=this._handleTerminatingEvent.bind(this),this._keyListener=this._keyListener.bind(this),this._dropFromOutsideListener=this._dropFromOutsideListener.bind(this),this._dragOverFromOutsideListener=this._dragOverFromOutsideListener.bind(this),this._removeTouchMoveWindowListener=Vt("touchmove",function(){},window),this._removeKeyDownListener=Vt("keydown",this._keyListener),this._removeKeyUpListener=Vt("keyup",this._keyListener),this._removeDropFromOutsideListener=Vt("drop",this._dropFromOutsideListener),this._removeDragOverFromOutsideListener=Vt("dragover",this._dragOverFromOutsideListener),this._addInitialEventListener()}return kt(e,[{key:"on",value:function(r,n){var a=this._listeners[r]||(this._listeners[r]=[]);return a.push(n),{remove:function(){var o=a.indexOf(n);o!==-1&&a.splice(o,1)}}}},{key:"emit",value:function(r){for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];var o,l=this._listeners[r]||[];return l.forEach(function(c){o===void 0&&(o=c.apply(void 0,a))}),o}},{key:"teardown",value:function(){this._initialEvent=null,this._initialEventData=null,this._selectRect=null,this.selecting=!1,this._lastClickData=null,this.isDetached=!0,this._listeners=Object.create(null),this._removeTouchMoveWindowListener&&this._removeTouchMoveWindowListener(),this._removeInitialEventListener&&this._removeInitialEventListener(),this._removeEndListener&&this._removeEndListener(),this._onEscListener&&this._onEscListener(),this._removeMoveListener&&this._removeMoveListener(),this._removeKeyUpListener&&this._removeKeyUpListener(),this._removeKeyDownListener&&this._removeKeyDownListener(),this._removeDropFromOutsideListener&&this._removeDropFromOutsideListener(),this._removeDragOverFromOutsideListener&&this._removeDragOverFromOutsideListener()}},{key:"isSelected",value:function(r){var n=this._selectRect;return!n||!this.selecting?!1:zy(n,La(r))}},{key:"filter",value:function(r){var n=this._selectRect;return!n||!this.selecting?[]:r.filter(this.isSelected,this)}},{key:"_addLongPressListener",value:function(r,n){var a=this,i=null,o=null,l=null,c=function(h){i=setTimeout(function(){u(),r(h)},a.longPressThreshold),o=Vt("touchmove",function(){return u()}),l=Vt("touchend",function(){return u()})},d=Vt("touchstart",c),u=function(){i&&clearTimeout(i),o&&o(),l&&l(),i=null,o=null,l=null};return n&&c(n),function(){u(),d()}}},{key:"_addInitialEventListener",value:function(){var r=this,n=Vt("mousedown",function(i){r._removeInitialEventListener(),r._handleInitialEvent(i),r._removeInitialEventListener=Vt("mousedown",r._handleInitialEvent)}),a=Vt("touchstart",function(i){r._removeInitialEventListener(),r._removeInitialEventListener=r._addLongPressListener(r._handleInitialEvent,i)});this._removeInitialEventListener=function(){n(),a()}}},{key:"_dropFromOutsideListener",value:function(r){var n=po(r),a=n.pageX,i=n.pageY,o=n.clientX,l=n.clientY;this.emit("dropFromOutside",{x:a,y:i,clientX:o,clientY:l}),r.preventDefault()}},{key:"_dragOverFromOutsideListener",value:function(r){var n=po(r),a=n.pageX,i=n.pageY,o=n.clientX,l=n.clientY;this.emit("dragOverFromOutside",{x:a,y:i,clientX:o,clientY:l}),r.preventDefault()}},{key:"_handleInitialEvent",value:function(r){if(this._initialEvent=r,!this.isDetached){var n=po(r),a=n.clientX,i=n.clientY,o=n.pageX,l=n.pageY,c=this.container(),d,u;if(!(r.which===3||r.button===2||!Lz(c,a,i))){if(!this.globalMouse&&c&&!jl(c,r.target)){var m=zz(0),h=m.top,g=m.left,j=m.bottom,y=m.right;if(u=La(c),d=zy({top:u.top-h,left:u.left-g,bottom:u.bottom+j,right:u.right+y},{top:l,left:o}),!d)return}var v=this.emit("beforeSelect",this._initialEventData={isTouch:/^touch/.test(r.type),x:o,y:l,clientX:a,clientY:i});if(v!==!1)switch(r.type){case"mousedown":this._removeEndListener=Vt("mouseup",this._handleTerminatingEvent),this._onEscListener=Vt("keydown",this._handleTerminatingEvent),this._removeMoveListener=Vt("mousemove",this._handleMoveEvent);break;case"touchstart":this._handleMoveEvent(r),this._removeEndListener=Vt("touchend",this._handleTerminatingEvent),this._removeMoveListener=Vt("touchmove",this._handleMoveEvent);break}}}}},{key:"_isWithinValidContainer",value:function(r){var n=r.target,a=this.validContainers;return!a||!a.length||!n?!0:a.some(function(i){return!!n.closest(i)})}},{key:"_handleTerminatingEvent",value:function(r){var n=this.selecting,a=this._selectRect;if(!n&&r.type.includes("key")&&(r=this._initialEvent),this.selecting=!1,this._removeEndListener&&this._removeEndListener(),this._removeMoveListener&&this._removeMoveListener(),this._selectRect=null,this._initialEvent=null,this._initialEventData=null,!!r){var i=!this.container||jl(this.container(),r.target),o=this._isWithinValidContainer(r);return r.key==="Escape"||!o?this.emit("reset"):!n&&i?this._handleClickEvent(r):n?this.emit("select",a):this.emit("reset")}}},{key:"_handleClickEvent",value:function(r){var n=po(r),a=n.pageX,i=n.pageY,o=n.clientX,l=n.clientY,c=new Date().getTime();return this._lastClickData&&c-this._lastClickData.timestamp<Bz?(this._lastClickData=null,this.emit("doubleClick",{x:a,y:i,clientX:o,clientY:l})):(this._lastClickData={timestamp:c},this.emit("click",{x:a,y:i,clientX:o,clientY:l}))}},{key:"_handleMoveEvent",value:function(r){if(!(this._initialEventData===null||this.isDetached)){var n=this._initialEventData,a=n.x,i=n.y,o=po(r),l=o.pageX,c=o.pageY,d=Math.abs(a-l),u=Math.abs(i-c),m=Math.min(l,a),h=Math.min(c,i),g=this.selecting,j=this.isClick(l,c);j&&!g&&!(d||u)||(!g&&!j&&this.emit("selectStart",this._initialEventData),j||(this.selecting=!0,this._selectRect={top:h,left:m,x:l,y:c,right:m+d,bottom:h+u},this.emit("selecting",this._selectRect)),r.preventDefault())}}},{key:"_keyListener",value:function(r){this.ctrl=r.metaKey||r.ctrlKey}},{key:"isClick",value:function(r,n){var a=this._initialEventData,i=a.x,o=a.y,l=a.isTouch;return!l&&Math.abs(r-i)<=By&&Math.abs(n-o)<=By}}])}();function zz(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return ln(e)!=="object"&&(e={top:e,left:e,right:e,bottom:e}),e}function zy(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=La(e),a=n.top,i=n.left,o=n.right,l=o===void 0?i:o,c=n.bottom,d=c===void 0?a:c,u=La(t),m=u.top,h=u.left,g=u.right,j=g===void 0?h:g,y=u.bottom,v=y===void 0?m:y;return!(d-r<m||a+r>v||l-r<h||i+r>j)}function La(e){if(!e.getBoundingClientRect)return e;var t=e.getBoundingClientRect(),r=t.left+Uy("left"),n=t.top+Uy("top");return{top:n,left:r,right:(e.offsetWidth||0)+r,bottom:(e.offsetHeight||0)+n}}function Uy(e){if(e==="left")return window.pageXOffset||document.body.scrollLeft||0;if(e==="top")return window.pageYOffset||document.body.scrollTop||0}var Uz=function(e){function t(r,n){var a;return Et(this,t),a=Gt(this,t,[r,n]),a.state={selecting:!1},a.containerRef=p.createRef(),a}return Kt(t,e),kt(t,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable()}},{key:"componentDidUpdate",value:function(n){!n.selectable&&this.props.selectable&&this._selectable(),n.selectable&&!this.props.selectable&&this._teardownSelectable()}},{key:"render",value:function(){var n=this.props,a=n.range,i=n.getNow,o=n.getters,l=n.date,c=n.components.dateCellWrapper,d=n.localizer,u=this.state,m=u.selecting,h=u.startIdx,g=u.endIdx,j=i();return z.createElement("div",{className:"rbc-row-bg",ref:this.containerRef},a.map(function(y,v){var f=m&&v>=h&&v<=g,x=o.dayProp(y),b=x.className,N=x.style;return z.createElement(c,{key:v,value:y,range:a},z.createElement("div",{style:N,className:ft("rbc-day-bg",b,f&&"rbc-selected-cell",d.isSameDate(y,j)&&"rbc-today",l&&d.neq(l,y,"month")&&"rbc-off-range-bg")}))}))}},{key:"_selectable",value:function(){var n=this,a=this.containerRef.current,i=this._selector=new W2(this.props.container,{longPressThreshold:this.props.longPressThreshold}),o=function(c,d){if(!Qd(a,c)&&!Fz(a,c)){var u=La(a),m=n.props,h=m.range,g=m.rtl;if(_z(u,c)){var j=V2(u,c.x,g,h.length);n._selectSlot({startIdx:j,endIdx:j,action:d,box:c})}}n._initial={},n.setState({selecting:!1})};i.on("selecting",function(l){var c=n.props,d=c.range,u=c.rtl,m=-1,h=-1;if(n.state.selecting||(tt(n.props.onSelectStart,[l]),n._initial={x:l.x,y:l.y}),i.isSelected(a)){var g=La(a),j=Oz(n._initial,g,l,d.length,u);m=j.startIdx,h=j.endIdx}n.setState({selecting:!0,startIdx:m,endIdx:h})}),i.on("beforeSelect",function(l){if(n.props.selectable==="ignoreEvents")return!Qd(n.containerRef.current,l)}),i.on("click",function(l){return o(l,"click")}),i.on("doubleClick",function(l){return o(l,"doubleClick")}),i.on("select",function(l){n._selectSlot(qe(qe({},n.state),{},{action:"select",bounds:l})),n._initial={},n.setState({selecting:!1}),tt(n.props.onSelectEnd,[n.state])})}},{key:"_teardownSelectable",value:function(){this._selector&&(this._selector.teardown(),this._selector=null)}},{key:"_selectSlot",value:function(n){var a=n.endIdx,i=n.startIdx,o=n.action,l=n.bounds,c=n.box;a!==-1&&i!==-1&&this.props.onSelectSlot&&this.props.onSelectSlot({start:i,end:a,action:o,bounds:l,box:c,resourceId:this.props.resourceId})}}])}(z.Component),Rr={propTypes:{slotMetrics:ie.object.isRequired,selected:ie.object,isAllDay:ie.bool,accessors:ie.object.isRequired,localizer:ie.object.isRequired,components:ie.object.isRequired,getters:ie.object.isRequired,onSelect:ie.func,onDoubleClick:ie.func,onKeyPress:ie.func},defaultProps:{segments:[],selected:{}},renderEvent:function(t,r){var n=t.selected;t.isAllDay;var a=t.accessors,i=t.getters,o=t.onSelect,l=t.onDoubleClick,c=t.onKeyPress,d=t.localizer,u=t.slotMetrics,m=t.components,h=t.resizable,g=u.continuesPrior(r),j=u.continuesAfter(r);return z.createElement(z2,{event:r,getters:i,localizer:d,accessors:a,components:m,onSelect:o,onDoubleClick:l,onKeyPress:c,continuesPrior:g,continuesAfter:j,slotStart:u.first,slotEnd:u.last,selected:Xu(r,n),resizable:h})},renderSpan:function(t,r,n){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:" ",i=Math.abs(r)/t*100+"%";return z.createElement("div",{key:n,className:"rbc-row-segment",style:{WebkitFlexBasis:i,flexBasis:i,maxWidth:i}},a)}},Y2=function(e){function t(){return Et(this,t),Gt(this,t,arguments)}return Kt(t,e),kt(t,[{key:"render",value:function(){var n=this,a=this.props,i=a.segments,o=a.slotMetrics.slots,l=a.className,c=1;return z.createElement("div",{className:ft(l,"rbc-row")},i.reduce(function(d,u,m){var h=u.event,g=u.left,j=u.right,y=u.span,v="_lvl_"+m,f=g-c,x=Rr.renderEvent(n.props,h);return f&&d.push(Rr.renderSpan(o,f,"".concat(v,"_gap"))),d.push(Rr.renderSpan(o,y,v,x)),c=j+1,d},[]))}}])}(z.Component);Y2.defaultProps=qe({},Rr.defaultProps);function q2(e){var t=e.dateRange,r=e.unit,n=r===void 0?"day":r,a=e.localizer;return{first:t[0],last:a.add(t[t.length-1],1,n)}}function Vz(e,t,r,n){var a=q2({dateRange:t,localizer:n}),i=a.first,o=a.last,l=n.diff(i,o,"day"),c=n.max(n.startOf(r.start(e),"day"),i),d=n.min(n.ceil(r.end(e),"day"),o),u=qI(t,function(h){return n.isSameDate(h,c)}),m=n.diff(c,d,"day");return m=Math.min(m,l),m=Math.max(m-n.segmentOffset,1),{event:e,span:m,left:u+1,right:Math.max(u+m,1)}}function Vf(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1/0,r,n,a,i=[],o=[];for(r=0;r<e.length;r++){for(a=e[r],n=0;n<i.length&&Hz(a,i[n]);n++);n>=t?o.push(a):(i[n]||(i[n]=[])).push(a)}for(r=0;r<i.length;r++)i[r].sort(function(l,c){return l.left-c.left});return{levels:i,extra:o}}function Sl(e,t,r,n,a){var i={start:n.start(e),end:n.end(e)},o={start:t,end:r};return a.inEventRange({event:i,range:o})}function Hz(e,t){return t.some(function(r){return r.left<=e.right&&r.right>=e.left})}function Wz(e,t,r){var n=ed(e),a=[],i=[];n.forEach(function(c){var d=t.start(c),u=t.end(c);r.daySpan(d,u)>1?a.push(c):i.push(c)});var o=a.sort(function(c,d){return Hf(c,d,t,r)}),l=i.sort(function(c,d){return Hf(c,d,t,r)});return[].concat(ed(o),ed(l))}function Hf(e,t,r,n){var a={start:r.start(e),end:r.end(e),allDay:r.allDay(e)},i={start:r.start(t),end:r.end(t),allDay:r.allDay(t)};return n.sortEvents({evtA:a,evtB:i})}var Wf=function(t,r){return t.left<=r&&t.right>=r},mh=function(t,r){return t.filter(function(n){return Wf(n,r)}).map(function(n){return n.event})},G2=function(e){function t(){return Et(this,t),Gt(this,t,arguments)}return Kt(t,e),kt(t,[{key:"render",value:function(){for(var n=this.props,a=n.segments,i=n.slotMetrics.slots,o=Vf(a).levels[0],l=1,c=1,d=[];l<=i;){var u="_lvl_"+l,m=o.filter(function(N){return Wf(N,l)})[0]||{},h=m.event,g=m.left,j=m.right,y=m.span;if(!h){var v=this.getHiddenEventsForSlot(a,l);if(v.length>0){var f=l-c;f&&d.push(Rr.renderSpan(i,f,u+"_gap")),d.push(Rr.renderSpan(i,1,u,this.renderShowMore(a,l))),c=l=l+1;continue}l++;continue}var x=Math.max(0,g-c);if(this.canRenderSlotEvent(g,y)){var b=Rr.renderEvent(this.props,h);x&&d.push(Rr.renderSpan(i,x,u+"_gap")),d.push(Rr.renderSpan(i,y,u,b)),c=l=j+1}else x&&d.push(Rr.renderSpan(i,x,u+"_gap")),d.push(Rr.renderSpan(i,1,u,this.renderShowMore(a,l))),c=l=l+1}return z.createElement("div",{className:"rbc-row"},d)}},{key:"getHiddenEventsForSlot",value:function(n,a){var i=mh(n,a),o=Vf(n).levels[0],l=o.filter(function(c){return Wf(c,a)}).map(function(c){return c.event});return i.filter(function(c){return!l.some(function(d){return d===c})})}},{key:"canRenderSlotEvent",value:function(n,a){var i=this.props.segments;return a$(n,n+a).every(function(o){var l=mh(i,o).length;return l===1})}},{key:"renderShowMore",value:function(n,a){var i=this,o=this.props,l=o.localizer,c=o.slotMetrics,d=o.components,u=c.getEventsForSlot(a),m=mh(n,a),h=m.length;if(d!=null&&d.showMore){var g=d.showMore,j=c.getDateForSlot(a-1);return h?z.createElement(g,{localizer:l,slotDate:j,slot:a,count:h,events:u,remainingEvents:m}):!1}return h?z.createElement("button",{type:"button",key:"sm_"+a,className:ft("rbc-button-link","rbc-show-more"),onClick:function(v){return i.showMore(a,v)}},l.messages.showMore(h,m,u)):!1}},{key:"showMore",value:function(n,a){a.preventDefault(),a.stopPropagation(),this.props.onShowMore(n,a.target)}}])}(z.Component);G2.defaultProps=qe({},Rr.defaultProps);var Yz=function(t){var r=t.children;return z.createElement("div",{className:"rbc-row-content-scroll-container"},r)},qz=function(t,r){return t.left<=r&&t.right>=r},Gz=function(t,r){return t[0].range===r[0].range&&t[0].events===r[0].events};function K2(){return j2(function(e){for(var t=e.range,r=e.events,n=e.maxRows,a=e.minRows,i=e.accessors,o=e.localizer,l=q2({dateRange:t,localizer:o}),c=l.first,d=l.last,u=r.map(function(y){return Vz(y,t,i,o)}),m=Vf(u,Math.max(n-1,1)),h=m.levels,g=m.extra,j=g.length>0?a-1:a;h.length<j;)h.push([]);return{first:c,last:d,levels:h,extra:g,range:t,slots:t.length,clone:function(v){var f=K2();return f(qe(qe({},e),v))},getDateForSlot:function(v){return t[v]},getSlotForDate:function(v){return t.find(function(f){return o.isSameDate(f,v)})},getEventsForSlot:function(v){return u.filter(function(f){return qz(f,v)}).map(function(f){return f.event})},continuesPrior:function(v){return o.continuesPrior(i.start(v),c)},continuesAfter:function(v){var f=i.start(v),x=i.end(v);return o.continuesAfter(f,x,d)}}},Gz)}var Cl=function(e){function t(){var r;Et(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Gt(this,t,[].concat(a)),r.handleSelectSlot=function(o){var l=r.props,c=l.range,d=l.onSelectSlot;d(c.slice(o.start,o.end+1),o)},r.handleShowMore=function(o,l){var c=r.props,d=c.range,u=c.onShowMore,m=r.slotMetrics(r.props),h=qA(r.containerRef.current,".rbc-row-bg")[0],g;h&&(g=h.children[o-1]);var j=m.getEventsForSlot(o);u(j,d[o-1],g,o,l)},r.getContainer=function(){var o=r.props.container;return o?o():r.containerRef.current},r.renderHeadingCell=function(o,l){var c=r.props,d=c.renderHeader,u=c.getNow,m=c.localizer;return d({date:o,key:"header_".concat(l),className:ft("rbc-date-cell",m.isSameDate(o,u())&&"rbc-now")})},r.renderDummy=function(){var o=r.props,l=o.className,c=o.range,d=o.renderHeader,u=o.showAllEvents;return z.createElement("div",{className:l,ref:r.containerRef},z.createElement("div",{className:ft("rbc-row-content",u&&"rbc-row-content-scrollable")},d&&z.createElement("div",{className:"rbc-row",ref:r.headingRowRef},c.map(r.renderHeadingCell)),z.createElement("div",{className:"rbc-row",ref:r.eventRowRef},z.createElement("div",{className:"rbc-row-segment"},z.createElement("div",{className:"rbc-event"},z.createElement("div",{className:"rbc-event-content"},""))))))},r.containerRef=p.createRef(),r.headingRowRef=p.createRef(),r.eventRowRef=p.createRef(),r.slotMetrics=K2(),r}return Kt(t,e),kt(t,[{key:"getRowLimit",value:function(){var n,a=ch(this.eventRowRef.current),i=(n=this.headingRowRef)!==null&&n!==void 0&&n.current?ch(this.headingRowRef.current):0,o=ch(this.containerRef.current)-i;return Math.max(Math.floor(o/a),1)}},{key:"render",value:function(){var n=this.props,a=n.date,i=n.rtl,o=n.range,l=n.className,c=n.selected,d=n.selectable,u=n.renderForMeasure,m=n.accessors,h=n.getters,g=n.components,j=n.getNow,y=n.renderHeader,v=n.onSelect,f=n.localizer,x=n.onSelectStart,b=n.onSelectEnd,N=n.onDoubleClick,w=n.onKeyPress,S=n.resourceId,C=n.longPressThreshold,k=n.isAllDay,A=n.resizable,O=n.showAllEvents;if(u)return this.renderDummy();var D=this.slotMetrics(this.props),I=D.levels,M=D.extra,E=O?Yz:Cs,L=g.weekWrapper,V={selected:c,accessors:m,getters:h,localizer:f,components:g,onSelect:v,onDoubleClick:N,onKeyPress:w,resourceId:S,slotMetrics:D,resizable:A};return z.createElement("div",{className:l,role:"rowgroup",ref:this.containerRef},z.createElement(Uz,{localizer:f,date:a,getNow:j,rtl:i,range:o,selectable:d,container:this.getContainer,getters:h,onSelectStart:x,onSelectEnd:b,onSelectSlot:this.handleSelectSlot,components:g,longPressThreshold:C,resourceId:S}),z.createElement("div",{className:ft("rbc-row-content",O&&"rbc-row-content-scrollable"),role:"row"},y&&z.createElement("div",{className:"rbc-row ",ref:this.headingRowRef},o.map(this.renderHeadingCell)),z.createElement(E,null,z.createElement(L,Object.assign({isAllDay:k},V,{rtl:this.props.rtl}),I.map(function(G,W){return z.createElement(Y2,Object.assign({key:W,segments:G},V))}),!!M.length&&z.createElement(G2,Object.assign({segments:M,onShowMore:this.handleShowMore},V))))))}}])}(z.Component);Cl.defaultProps={minRows:0,maxRows:1/0};var Kx=function(t){var r=t.label;return z.createElement("span",{role:"columnheader","aria-sort":"none"},r)},Kz=function(t){var r=t.label,n=t.drilldownView,a=t.onDrillDown;return n?z.createElement("button",{type:"button",className:"rbc-button-link",onClick:a},r):z.createElement("span",null,r)},Xz=["date","className"],Qz=function(t,r,n,a,i){return t.filter(function(o){return Sl(o,r,n,a,i)})},Qu=function(e){function t(){var r;Et(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Gt(this,t,[].concat(a)),r.getContainer=function(){return r.containerRef.current},r.renderWeek=function(o,l){var c=r.props,d=c.events,u=c.components,m=c.selectable,h=c.getNow,g=c.selected,j=c.date,y=c.localizer,v=c.longPressThreshold,f=c.accessors,x=c.getters,b=c.showAllEvents,N=r.state,w=N.needLimitMeasure,S=N.rowLimit,C=Qz(ed(d),o[0],o[o.length-1],f,y),k=Wz(C,f,y);return z.createElement(Cl,{key:l,ref:l===0?r.slotRowRef:void 0,container:r.getContainer,className:"rbc-month-row",getNow:h,date:j,range:o,events:k,maxRows:b?1/0:S,selected:g,selectable:m,components:u,accessors:f,getters:x,localizer:y,renderHeader:r.readerDateHeading,renderForMeasure:w,onShowMore:r.handleShowMore,onSelect:r.handleSelectEvent,onDoubleClick:r.handleDoubleClickEvent,onKeyPress:r.handleKeyPressEvent,onSelectSlot:r.handleSelectSlot,longPressThreshold:v,rtl:r.props.rtl,resizable:r.props.resizable,showAllEvents:b})},r.readerDateHeading=function(o){var l=o.date,c=o.className,d=Rs(o,Xz),u=r.props,m=u.date,h=u.getDrilldownView,g=u.localizer,j=g.neq(m,l,"month"),y=g.isSameDate(l,m),v=h(l),f=g.format(l,"dateFormat"),x=r.props.components.dateHeader||Kz;return z.createElement("div",Object.assign({},d,{className:ft(c,j&&"rbc-off-range",y&&"rbc-current"),role:"cell"}),z.createElement(x,{label:f,date:l,drilldownView:v,isOffRange:j,onDrillDown:function(N){return r.handleHeadingClick(l,v,N)}}))},r.handleSelectSlot=function(o,l){r._pendingSelection=r._pendingSelection.concat(o),clearTimeout(r._selectTimer),r._selectTimer=setTimeout(function(){return r.selectDates(l)})},r.handleHeadingClick=function(o,l,c){c.preventDefault(),r.clearSelection(),tt(r.props.onDrillDown,[o,l])},r.handleSelectEvent=function(){r.clearSelection();for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];tt(r.props.onSelectEvent,l)},r.handleDoubleClickEvent=function(){r.clearSelection();for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];tt(r.props.onDoubleClickEvent,l)},r.handleKeyPressEvent=function(){r.clearSelection();for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];tt(r.props.onKeyPressEvent,l)},r.handleShowMore=function(o,l,c,d,u){var m=r.props,h=m.popup,g=m.onDrillDown,j=m.onShowMore,y=m.getDrilldownView,v=m.doShowMoreDrillDown;if(r.clearSelection(),h){var f=Kw(c,r.containerRef.current);r.setState({overlay:{date:l,events:o,position:f,target:u}})}else v&&tt(g,[l,y(l)||tr.DAY]);tt(j,[o,l,d])},r.overlayDisplay=function(){r.setState({overlay:null})},r.state={rowLimit:5,needLimitMeasure:!0,date:null},r.containerRef=p.createRef(),r.slotRowRef=p.createRef(),r._bgRows=[],r._pendingSelection=[],r}return Kt(t,e),kt(t,[{key:"componentDidMount",value:function(){var n=this,a;this.state.needLimitMeasure&&this.measureRowLimit(this.props),window.addEventListener("resize",this._resizeListener=function(){a||Xw(function(){a=!1,n.setState({needLimitMeasure:!0})})},!1)}},{key:"componentDidUpdate",value:function(){this.state.needLimitMeasure&&this.measureRowLimit(this.props)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._resizeListener,!1)}},{key:"render",value:function(){var n=this.props,a=n.date,i=n.localizer,o=n.className,l=i.visibleDays(a,i),c=_A(l,7);return this._weekCount=c.length,z.createElement("div",{className:ft("rbc-month-view",o),role:"table","aria-label":"Month View",ref:this.containerRef},z.createElement("div",{className:"rbc-row rbc-month-header",role:"row"},this.renderHeaders(c[0])),c.map(this.renderWeek),this.props.popup&&this.renderOverlay())}},{key:"renderHeaders",value:function(n){var a=this.props,i=a.localizer,o=a.components,l=n[0],c=n[n.length-1],d=o.header||Kx;return i.range(l,c,"day").map(function(u,m){return z.createElement("div",{key:"header_"+m,className:"rbc-header"},z.createElement(d,{date:u,localizer:i,label:i.format(u,"weekdayFormat")}))})}},{key:"renderOverlay",value:function(){var n,a,i=this,o=(n=(a=this.state)===null||a===void 0?void 0:a.overlay)!==null&&n!==void 0?n:{},l=this.props,c=l.accessors,d=l.localizer,u=l.components,m=l.getters,h=l.selected,g=l.popupOffset,j=l.handleDragStart,y=function(){return i.setState({overlay:null})};return z.createElement(Gx,{overlay:o,accessors:c,localizer:d,components:u,getters:m,selected:h,popupOffset:g,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:j,show:!!o.position,overlayDisplay:this.overlayDisplay,onHide:y})}},{key:"measureRowLimit",value:function(){this.setState({needLimitMeasure:!1,rowLimit:this.slotRowRef.current.getRowLimit()})}},{key:"selectDates",value:function(n){var a=this._pendingSelection.slice();this._pendingSelection=[],a.sort(function(l,c){return+l-+c});var i=new Date(a[0]),o=new Date(a[a.length-1]);o.setDate(a[a.length-1].getDate()+1),tt(this.props.onSelectSlot,{slots:a,start:i,end:o,action:n.action,bounds:n.bounds,box:n.box})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}}],[{key:"getDerivedStateFromProps",value:function(n,a){var i=n.date,o=n.localizer;return{date:i,needLimitMeasure:o.neq(i,a.date,"month")}}}])}(z.Component);Qu.range=function(e,t){var r=t.localizer,n=r.firstVisibleDay(e,r),a=r.lastVisibleDay(e,r);return{start:n,end:a}};Qu.navigate=function(e,t,r){var n=r.localizer;switch(t){case gr.PREVIOUS:return n.add(e,-1,"month");case gr.NEXT:return n.add(e,1,"month");default:return e}};Qu.title=function(e,t){var r=t.localizer;return r.format(e,"monthHeaderFormat")};var Vy=function(t){var r=t.min,n=t.max,a=t.step,i=t.slots,o=t.localizer;return"".concat(+o.startOf(r,"minutes"))+"".concat(+o.startOf(n,"minutes"))+"".concat(a,"-").concat(i)};function Xx(e){for(var t=e.min,r=e.max,n=e.step,a=e.timeslots,i=e.localizer,o=Vy({step:n,localizer:i}),l=1+i.getTotalMin(t,r),c=i.getMinutesFromMidnight(t),d=Math.ceil((l-1)/(n*a)),u=d*a,m=new Array(d),h=new Array(u),g=0;g<d;g++){m[g]=new Array(a);for(var j=0;j<a;j++){var y=g*a+j,v=y*n;h[y]=m[g][j]=i.getSlotDate(t,c,v)}}var f=h.length*n;h.push(i.getSlotDate(t,c,f));function x(b){var N=i.diff(t,b,"minutes")+i.getDstOffset(t,b);return Math.min(N,l)}return{groups:m,update:function(N){return Vy(N)!==o?Xx(N):this},dateIsInGroup:function(N,w){var S=m[w+1];return i.inRange(N,m[w][0],S?S[0]:r,"minutes")},nextSlot:function(N){var w=h[Math.min(h.findIndex(function(S){return S===N||i.eq(S,N)})+1,h.length-1)];return i.eq(w,N)&&(w=i.add(N,n,"minutes")),w},closestSlotToPosition:function(N){var w=Math.min(h.length-1,Math.max(0,Math.floor(N*u)));return h[w]},closestSlotFromPoint:function(N,w){var S=Math.abs(w.top-w.bottom);return this.closestSlotToPosition((N.y-w.top)/S)},closestSlotFromDate:function(N){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(i.lt(N,t,"minutes"))return h[0];if(i.gt(N,r,"minutes"))return h[h.length-1];var S=i.diff(t,N,"minutes");return h[(S-S%n)/n+w]},startsBeforeDay:function(N){return i.lt(N,t,"day")},startsAfterDay:function(N){return i.gt(N,r,"day")},startsBefore:function(N){return i.lt(i.merge(t,N),t,"minutes")},startsAfter:function(N){return i.gt(i.merge(r,N),r,"minutes")},getRange:function(N,w,S,C){S||(N=i.min(r,i.max(t,N))),C||(w=i.min(r,i.max(t,w)));var k=x(N),A=x(w),O=A>n*u&&!i.eq(r,w)?(k-n)/(n*u)*100:k/(n*u)*100;return{top:O,height:A/(n*u)*100-O,start:x(N),startDate:N,end:x(w),endDate:w}},getCurrentTimePosition:function(N){var w=x(N),S=w/(n*u)*100;return S}}}var Jz=function(){function e(t,r){var n=r.accessors,a=r.slotMetrics;Et(this,e);var i=a.getRange(n.start(t),n.end(t)),o=i.start,l=i.startDate,c=i.end,d=i.endDate,u=i.top,m=i.height;this.start=o,this.end=c,this.startMs=+l,this.endMs=+d,this.top=u,this.height=m,this.data=t}return kt(e,[{key:"_width",get:function(){if(this.rows){var r=this.rows.reduce(function(a,i){return Math.max(a,i.leaves.length+1)},0)+1;return 100/r}if(this.leaves){var n=100-this.container._width;return n/(this.leaves.length+1)}return this.row._width}},{key:"width",get:function(){var r=this._width,n=Math.min(100,this._width*1.7);if(this.rows)return n;if(this.leaves)return this.leaves.length>0?n:r;var a=this.row.leaves,i=a.indexOf(this);return i===a.length-1?r:n}},{key:"xOffset",get:function(){if(this.rows)return 0;if(this.leaves)return this.container._width;var r=this.row,n=r.leaves,a=r.xOffset,i=r._width,o=n.indexOf(this)+1;return a+o*i}}])}();function Zz(e,t,r){return Math.abs(t.start-e.start)<r||t.start>e.start&&t.start<e.end}function eU(e){for(var t=C8(e,["startMs",function(l){return-l.endMs}]),r=[];t.length>0;){var n=t.shift();r.push(n);for(var a=0;a<t.length;a++){var i=t[a];if(!(n.endMs>i.startMs)){if(a>0){var o=t.splice(a,1)[0];r.push(o)}break}}}return r}function X2(e){for(var t=e.events,r=e.minimumStartDifference,n=e.slotMetrics,a=e.accessors,i=t.map(function(u){return new Jz(u,{slotMetrics:n,accessors:a})}),o=eU(i),l=[],c=function(){var m=o[d],h=l.find(function(y){return y.end>m.start||Math.abs(m.start-y.start)<r});if(!h)return m.rows=[],l.push(m),1;m.container=h;for(var g=null,j=h.rows.length-1;!g&&j>=0;j--)Zz(h.rows[j],m,r)&&(g=h.rows[j]);g?(g.leaves.push(m),m.row=g):(m.leaves=[],h.rows.push(m))},d=0;d<o.length;d++)c();return o.map(function(u){return{event:u.data,style:{top:u.top,height:u.height,width:u.width,xOffset:Math.max(0,u.xOffset)}}})}function Q2(e,t,r){for(var n=0;n<e.friends.length;++n)if(!(r.indexOf(e.friends[n])>-1)){t=t>e.friends[n].idx?t:e.friends[n].idx,r.push(e.friends[n]);var a=Q2(e.friends[n],t,r);t=t>a?t:a}return t}function tU(e){var t=e.events,r=e.minimumStartDifference,n=e.slotMetrics,a=e.accessors,i=X2({events:t,minimumStartDifference:r,slotMetrics:n,accessors:a});i.sort(function(L,V){return L=L.style,V=V.style,L.top!==V.top?L.top>V.top?1:-1:L.height!==V.height?L.top+L.height<V.top+V.height?1:-1:0});for(var o=0;o<i.length;++o)i[o].friends=[],delete i[o].style.left,delete i[o].style.left,delete i[o].idx,delete i[o].size;for(var l=0;l<i.length-1;++l)for(var c=i[l],d=c.style.top,u=c.style.top+c.style.height,m=l+1;m<i.length;++m){var h=i[m],g=h.style.top,j=h.style.top+h.style.height;(g>=d&&j<=u||j>d&&j<=u||g>=d&&g<u)&&(c.friends.push(h),h.friends.push(c))}for(var y=0;y<i.length;++y){for(var v=i[y],f=[],x=0;x<100;++x)f.push(1);for(var b=0;b<v.friends.length;++b)v.friends[b].idx!==void 0&&(f[v.friends[b].idx]=0);v.idx=f.indexOf(1)}for(var N=0;N<i.length;++N){var w=0;if(!i[N].size){var S=[],C=Q2(i[N],0,S);w=100/(C+1),i[N].size=w;for(var k=0;k<S.length;++k)S[k].size=w}}for(var A=0;A<i.length;++A){var O=i[A];O.style.left=O.idx*O.size;for(var D=0,I=0;I<O.friends.length;++I){var M=O.friends[I].idx;D=D>M?D:M}D<=O.idx&&(O.size=100-O.idx*O.size);var E=O.idx===0?0:3;O.style.width="calc(".concat(O.size,"% - ").concat(E,"px)"),O.style.height="calc(".concat(O.style.height,"% - 2px)"),O.style.xOffset="calc(".concat(O.style.left,"% + ").concat(E,"px)")}return i}var Hy={overlap:X2,"no-overlap":tU};function rU(e){return!!(e&&e.constructor&&e.call&&e.apply)}function sU(e){e.events,e.minimumStartDifference,e.slotMetrics,e.accessors;var t=e.dayLayoutAlgorithm,r=t;return t in Hy&&(r=Hy[t]),rU(r)?r.apply(this,arguments):[]}var J2=function(e){function t(){return Et(this,t),Gt(this,t,arguments)}return Kt(t,e),kt(t,[{key:"render",value:function(){var n=this.props,a=n.renderSlot,i=n.resource,o=n.group,l=n.getters,c=n.components,d=c===void 0?{}:c,u=d.timeSlotWrapper,m=u===void 0?Cs:u,h=l?l.slotGroupProp(o):{};return z.createElement("div",Object.assign({className:"rbc-timeslot-group"},h),o.map(function(g,j){var y=l?l.slotProp(g,i):{};return z.createElement(m,{key:j,value:g,resource:i},z.createElement("div",Object.assign({},y,{className:ft("rbc-time-slot",y.className)}),a&&a(g,j)))}))}}])}(p.Component);function Ac(e){return typeof e=="string"?e:e+"%"}function nU(e){var t=e.style,r=e.className,n=e.event,a=e.accessors,i=e.rtl,o=e.selected,l=e.label,c=e.continuesPrior,d=e.continuesAfter,u=e.getters,m=e.onClick,h=e.onDoubleClick,g=e.isBackgroundEvent,j=e.onKeyPress,y=e.components,v=y.event,f=y.eventWrapper,x=a.title(n),b=a.tooltip(n),N=a.end(n),w=a.start(n),S=u.eventProp(n,w,N,o),C=[z.createElement("div",{key:"1",className:"rbc-event-label"},l),z.createElement("div",{key:"2",className:"rbc-event-content"},v?z.createElement(v,{event:n,title:x}):x)],k=t.height,A=t.top,O=t.width,D=t.xOffset,I=qe(qe({},S.style),{},ua({top:Ac(A),height:Ac(k),width:Ac(O)},i?"right":"left",Ac(D)));return z.createElement(f,Object.assign({type:"time"},e),z.createElement("div",{role:"button",tabIndex:0,onClick:m,onDoubleClick:h,style:I,onKeyDown:j,title:b?(typeof l=="string"?l+": ":"")+b:void 0,className:ft(g?"rbc-background-event":"rbc-event",r,S.className,{"rbc-selected":o,"rbc-event-continues-earlier":c,"rbc-event-continues-later":d})},C))}var aU=function(t){var r=t.children,n=t.className,a=t.style,i=t.innerRef;return z.createElement("div",{className:n,style:a,ref:i},r)},iU=z.forwardRef(function(e,t){return z.createElement(aU,Object.assign({},e,{innerRef:t}))}),oU=["dayProp"],lU=["eventContainerWrapper","timeIndicatorWrapper"],Z2=function(e){function t(){var r;Et(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Gt(this,t,[].concat(a)),r.state={selecting:!1,timeIndicatorPosition:null},r.intervalTriggered=!1,r.renderEvents=function(o){var l=o.events,c=o.isBackgroundEvent,d=r.props,u=d.rtl,m=d.selected,h=d.accessors,g=d.localizer,j=d.getters,y=d.components,v=d.step,f=d.timeslots,x=d.dayLayoutAlgorithm,b=d.resizable,N=r,w=N.slotMetrics,S=g.messages,C=sU({events:l,accessors:h,slotMetrics:w,minimumStartDifference:Math.ceil(v*f/2),dayLayoutAlgorithm:x});return C.map(function(k,A){var O,D=k.event,I=k.style,M=h.end(D),E=h.start(D),L=(O=h.eventId(D))!==null&&O!==void 0?O:"evt_"+A,V="eventTimeRangeFormat",G,W=w.startsBeforeDay(E),_=w.startsAfterDay(M);W?V="eventTimeRangeEndFormat":_&&(V="eventTimeRangeStartFormat"),W&&_?G=S.allDay:G=g.format({start:E,end:M},V);var T=W||w.startsBefore(E),R=_||w.startsAfter(M);return z.createElement(nU,{style:I,event:D,label:G,key:L,getters:j,rtl:u,components:y,continuesPrior:T,continuesAfter:R,accessors:h,resource:r.props.resource,selected:Xu(D,m),onClick:function(U){return r._select(qe(qe(qe({},D),r.props.resource&&{sourceResource:r.props.resource}),c&&{isBackgroundEvent:!0}),U)},onDoubleClick:function(U){return r._doubleClick(D,U)},isBackgroundEvent:c,onKeyPress:function(U){return r._keyPress(D,U)},resizable:b})})},r._selectable=function(){var o=r.containerRef.current,l=r.props,c=l.longPressThreshold,d=l.localizer,u=r._selector=new W2(function(){return o},{longPressThreshold:c}),m=function(y){var v=r.props.onSelecting,f=r.state||{},x=h(y),b=x.startDate,N=x.endDate;v&&(d.eq(f.startDate,b,"minutes")&&d.eq(f.endDate,N,"minutes")||v({start:b,end:N,resourceId:r.props.resource})===!1)||(r.state.start!==x.start||r.state.end!==x.end||r.state.selecting!==x.selecting)&&r.setState(x)},h=function(y){var v=r.slotMetrics.closestSlotFromPoint(y,La(o));r.state.selecting||(r._initialSlot=v);var f=r._initialSlot;d.lte(f,v)?v=r.slotMetrics.nextSlot(v):d.gt(f,v)&&(f=r.slotMetrics.nextSlot(f));var x=r.slotMetrics.getRange(d.min(f,v),d.max(f,v));return qe(qe({},x),{},{selecting:!0,top:"".concat(x.top,"%"),height:"".concat(x.height,"%")})},g=function(y,v){if(!Qd(r.containerRef.current,y)){var f=h(y),x=f.startDate,b=f.endDate;r._selectSlot({startDate:x,endDate:b,action:v,box:y})}r.setState({selecting:!1})};u.on("selecting",m),u.on("selectStart",m),u.on("beforeSelect",function(j){if(r.props.selectable==="ignoreEvents")return!Qd(r.containerRef.current,j)}),u.on("click",function(j){return g(j,"click")}),u.on("doubleClick",function(j){return g(j,"doubleClick")}),u.on("select",function(j){r.state.selecting&&(r._selectSlot(qe(qe({},r.state),{},{action:"select",bounds:j})),r.setState({selecting:!1}))}),u.on("reset",function(){r.state.selecting&&r.setState({selecting:!1})})},r._teardownSelectable=function(){r._selector&&(r._selector.teardown(),r._selector=null)},r._selectSlot=function(o){for(var l=o.startDate,c=o.endDate,d=o.action,u=o.bounds,m=o.box,h=l,g=[];r.props.localizer.lte(h,c);)g.push(h),h=new Date(+h+r.props.step*60*1e3);tt(r.props.onSelectSlot,{slots:g,start:l,end:c,resourceId:r.props.resource,action:d,bounds:u,box:m})},r._select=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];tt(r.props.onSelectEvent,l)},r._doubleClick=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];tt(r.props.onDoubleClickEvent,l)},r._keyPress=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];tt(r.props.onKeyPressEvent,l)},r.slotMetrics=Xx(r.props),r.containerRef=p.createRef(),r}return Kt(t,e),kt(t,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable(),this.props.isNow&&this.setTimeIndicatorPositionUpdateInterval()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable(),this.clearTimeIndicatorInterval()}},{key:"componentDidUpdate",value:function(n,a){this.props.selectable&&!n.selectable&&this._selectable(),!this.props.selectable&&n.selectable&&this._teardownSelectable();var i=this.props,o=i.getNow,l=i.isNow,c=i.localizer,d=i.date,u=i.min,m=i.max,h=c.neq(n.getNow(),o(),"minutes");if(n.isNow!==l||h){if(this.clearTimeIndicatorInterval(),l){var g=!h&&c.eq(n.date,d,"minutes")&&a.timeIndicatorPosition===this.state.timeIndicatorPosition;this.setTimeIndicatorPositionUpdateInterval(g)}}else l&&(c.neq(n.min,u,"minutes")||c.neq(n.max,m,"minutes"))&&this.positionTimeIndicator()}},{key:"setTimeIndicatorPositionUpdateInterval",value:function(){var n=this,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;!this.intervalTriggered&&!a&&this.positionTimeIndicator(),this._timeIndicatorTimeout=window.setTimeout(function(){n.intervalTriggered=!0,n.positionTimeIndicator(),n.setTimeIndicatorPositionUpdateInterval()},6e4)}},{key:"clearTimeIndicatorInterval",value:function(){this.intervalTriggered=!1,window.clearTimeout(this._timeIndicatorTimeout)}},{key:"positionTimeIndicator",value:function(){var n=this.props,a=n.min,i=n.max,o=n.getNow,l=o();if(l>=a&&l<=i){var c=this.slotMetrics.getCurrentTimePosition(l);this.intervalTriggered=!0,this.setState({timeIndicatorPosition:c})}else this.clearTimeIndicatorInterval()}},{key:"render",value:function(){var n=this.props,a=n.date,i=n.max,o=n.rtl,l=n.isNow,c=n.resource,d=n.accessors,u=n.localizer,m=n.getters,h=m.dayProp,g=Rs(m,oU),j=n.components,y=j.eventContainerWrapper,v=j.timeIndicatorWrapper,f=Rs(j,lU);this.slotMetrics=this.slotMetrics.update(this.props);var x=this.slotMetrics,b=this.state,N=b.selecting,w=b.top,S=b.height,C=b.startDate,k=b.endDate,A={start:C,end:k},O=h(i,c),D=O.className,I=O.style,M={className:"rbc-current-time-indicator",style:{top:"".concat(this.state.timeIndicatorPosition,"%")}},E=f.dayColumnWrapper||iU;return z.createElement(E,{ref:this.containerRef,date:a,style:I,className:ft(D,"rbc-day-slot","rbc-time-column",l&&"rbc-now",l&&"rbc-today",N&&"rbc-slot-selecting"),slotMetrics:x,resource:c},x.groups.map(function(L,V){return z.createElement(J2,{key:V,group:L,resource:c,getters:g,components:f})}),z.createElement(y,{localizer:u,resource:c,accessors:d,getters:g,components:f,slotMetrics:x},z.createElement("div",{className:ft("rbc-events-container",o&&"rtl")},this.renderEvents({events:this.props.backgroundEvents,isBackgroundEvent:!0}),this.renderEvents({events:this.props.events}))),N&&z.createElement("div",{className:"rbc-slot-selection",style:{top:w,height:S}},z.createElement("span",null,u.format(A,"selectRangeFormat"))),l&&this.intervalTriggered&&z.createElement(v,M,z.createElement("div",M)))}}])}(z.Component);Z2.defaultProps={dragThroughEvents:!0,timeslots:2};var e1=function(t){var r=t.label;return z.createElement(z.Fragment,null,r)},cU=function(e){function t(){var r;Et(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Gt(this,t,[].concat(a)),r.handleHeaderClick=function(o,l,c){c.preventDefault(),tt(r.props.onDrillDown,[o,l])},r.renderRow=function(o){var l=r.props,c=l.events,d=l.rtl,u=l.selectable,m=l.getNow,h=l.range,g=l.getters,j=l.localizer,y=l.accessors,v=l.components,f=l.resizable,x=y.resourceId(o),b=o?c.filter(function(N){return y.resource(N)===x}):c;return z.createElement(Cl,{isAllDay:!0,rtl:d,getNow:m,minRows:2,maxRows:r.props.allDayMaxRows+1,range:h,events:b,resourceId:x,className:"rbc-allday-cell",selectable:u,selected:r.props.selected,components:v,accessors:y,getters:g,localizer:j,onSelect:r.props.onSelectEvent,onShowMore:r.props.onShowMore,onDoubleClick:r.props.onDoubleClickEvent,onKeyPress:r.props.onKeyPressEvent,onSelectSlot:r.props.onSelectSlot,longPressThreshold:r.props.longPressThreshold,resizable:f})},r}return Kt(t,e),kt(t,[{key:"renderHeaderCells",value:function(n){var a=this,i=this.props,o=i.localizer,l=i.getDrilldownView,c=i.getNow,d=i.getters.dayProp,u=i.components.header,m=u===void 0?Kx:u,h=c();return n.map(function(g,j){var y=l(g),v=o.format(g,"dayFormat"),f=d(g),x=f.className,b=f.style,N=z.createElement(m,{date:g,label:v,localizer:o});return z.createElement("div",{key:j,style:b,className:ft("rbc-header",x,o.isSameDate(g,h)&&"rbc-today")},y?z.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(S){return a.handleHeaderClick(g,y,S)}},N):z.createElement("span",null,N))})}},{key:"render",value:function(){var n=this,a=this.props,i=a.width,o=a.rtl,l=a.resources,c=a.range,d=a.events,u=a.getNow,m=a.accessors,h=a.selectable,g=a.components,j=a.getters,y=a.scrollRef,v=a.localizer,f=a.isOverflowing,x=a.components,b=x.timeGutterHeader,N=x.resourceHeader,w=N===void 0?e1:N,S=a.resizable,C={};f&&(C[o?"marginLeft":"marginRight"]="".concat(Dx()-1,"px"));var k=l.groupEvents(d);return z.createElement("div",{style:C,ref:y,className:ft("rbc-time-header",f&&"rbc-overflowing")},z.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:i,minWidth:i,maxWidth:i}},b&&z.createElement(b,null)),l.map(function(A,O){var D=Br(A,2),I=D[0],M=D[1];return z.createElement("div",{className:"rbc-time-header-content",key:I||O},M&&z.createElement("div",{className:"rbc-row rbc-row-resource",key:"resource_".concat(O)},z.createElement("div",{className:"rbc-header"},z.createElement(w,{index:O,label:m.resourceTitle(M),resource:M}))),z.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(c.length<=1?" rbc-time-header-cell-single-day":"")},n.renderHeaderCells(c)),z.createElement(Cl,{isAllDay:!0,rtl:o,getNow:u,minRows:2,maxRows:n.props.allDayMaxRows+1,range:c,events:k.get(I)||[],resourceId:M&&I,className:"rbc-allday-cell",selectable:h,selected:n.props.selected,components:g,accessors:m,getters:j,localizer:v,onSelect:n.props.onSelectEvent,onShowMore:n.props.onShowMore,onDoubleClick:n.props.onDoubleClickEvent,onKeyDown:n.props.onKeyPressEvent,onSelectSlot:n.props.onSelectSlot,longPressThreshold:n.props.longPressThreshold,resizable:S}))}))}}])}(z.Component),dU=function(e){function t(){var r;Et(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Gt(this,t,[].concat(a)),r.handleHeaderClick=function(o,l,c){c.preventDefault(),tt(r.props.onDrillDown,[o,l])},r}return Kt(t,e),kt(t,[{key:"renderHeaderCells",value:function(n){var a=this,i=this.props,o=i.localizer,l=i.getDrilldownView,c=i.getNow,d=i.getters.dayProp,u=i.components,m=u.header,h=m===void 0?Kx:m,g=u.resourceHeader,j=g===void 0?e1:g,y=i.resources,v=i.accessors,f=i.events,x=i.rtl,b=i.selectable,N=i.components,w=i.getters,S=i.resizable,C=c(),k=y.groupEvents(f);return n.map(function(A,O){var D=l(A),I=o.format(A,"dayFormat"),M=d(A),E=M.className,L=M.style,V=z.createElement(h,{date:A,label:I,localizer:o});return z.createElement("div",{key:O,className:"rbc-time-header-content rbc-resource-grouping"},z.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(n.length<=1?" rbc-time-header-cell-single-day":"")},z.createElement("div",{style:L,className:ft("rbc-header",E,o.isSameDate(A,C)&&"rbc-today")},D?z.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(W){return a.handleHeaderClick(A,D,W)}},V):z.createElement("span",null,V))),z.createElement("div",{className:"rbc-row"},y.map(function(G,W){var _=Br(G,2),T=_[0],R=_[1];return z.createElement("div",{key:"resource_".concat(T,"_").concat(W),className:ft("rbc-header",E,o.isSameDate(A,C)&&"rbc-today")},z.createElement(j,{index:W,label:v.resourceTitle(R),resource:R}))})),z.createElement("div",{className:"rbc-row rbc-m-b-negative-3 rbc-h-full"},y.map(function(G,W){var _=Br(G,2),T=_[0],R=_[1],B=(k.get(T)||[]).filter(function(U){return o.isSameDate(U.start,A)||o.isSameDate(U.end,A)});return z.createElement(Cl,{key:"resource_".concat(T,"_").concat(W),isAllDay:!0,rtl:x,getNow:c,minRows:2,maxRows:a.props.allDayMaxRows+1,range:[A],events:B,resourceId:R&&T,className:"rbc-allday-cell",selectable:b,selected:a.props.selected,components:N,accessors:v,getters:w,localizer:o,onSelect:a.props.onSelectEvent,onShowMore:a.props.onShowMore,onDoubleClick:a.props.onDoubleClickEvent,onKeyDown:a.props.onKeyPressEvent,onSelectSlot:a.props.onSelectSlot,longPressThreshold:a.props.longPressThreshold,resizable:S})})))})}},{key:"render",value:function(){var n=this.props,a=n.width,i=n.rtl,o=n.range,l=n.scrollRef,c=n.isOverflowing,d=n.components.timeGutterHeader,u={};return c&&(u[i?"marginLeft":"marginRight"]="".concat(Dx()-1,"px")),z.createElement("div",{style:u,ref:l,className:ft("rbc-time-header",c&&"rbc-overflowing")},z.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:a,minWidth:a,maxWidth:a}},d&&z.createElement(d,null)),this.renderHeaderCells(o))}}])}(z.Component);function uU(e){var t=e.min,r=e.max,n=e.localizer;return n.getTimezoneOffset(t)!==n.getTimezoneOffset(r)?{start:n.add(t,-1,"day"),end:n.add(r,-1,"day")}:{start:t,end:r}}var mU=function(t){var r=t.min,n=t.max,a=t.timeslots,i=t.step,o=t.localizer,l=t.getNow,c=t.resource,d=t.components,u=t.getters,m=t.gutterRef,h=d.timeGutterWrapper,g=p.useMemo(function(){return uU({min:r,max:n,localizer:o})},[r==null?void 0:r.toISOString(),n==null?void 0:n.toISOString(),o]),j=g.start,y=g.end,v=p.useState(Xx({min:j,max:y,timeslots:a,step:i,localizer:o})),f=Br(v,2),x=f[0],b=f[1];p.useEffect(function(){x&&b(x.update({min:j,max:y,timeslots:a,step:i,localizer:o}))},[j==null?void 0:j.toISOString(),y==null?void 0:y.toISOString(),a,i]);var N=p.useCallback(function(w,S){if(S)return null;var C=x.dateIsInGroup(l(),S);return z.createElement("span",{className:ft("rbc-label",C&&"rbc-now")},o.format(w,"timeGutterFormat"))},[x,o,l]);return z.createElement(h,{slotMetrics:x},z.createElement("div",{className:"rbc-time-gutter rbc-time-column",ref:m},x.groups.map(function(w,S){return z.createElement(J2,{key:S,group:w,resource:c,components:d,renderSlot:N,getters:u})})))},hU=z.forwardRef(function(e,t){return z.createElement(mU,Object.assign({gutterRef:t},e))}),hh={};function fU(e,t){return{map:function(n){return e?e.map(function(a,i){return n([t.resourceId(a),a],i)}):[n([hh,null],0)]},groupEvents:function(n){var a=new Map;return e?(n.forEach(function(i){var o=t.resource(i)||hh;if(Array.isArray(o))o.forEach(function(c){var d=a.get(c)||[];d.push(i),a.set(c,d)});else{var l=a.get(o)||[];l.push(i),a.set(o,l)}}),a):(a.set(hh,n),a)}}}var qi=function(e){function t(r){var n;return Et(this,t),n=Gt(this,t,[r]),n.handleScroll=function(a){n.scrollRef.current&&(n.scrollRef.current.scrollLeft=a.target.scrollLeft)},n.handleResize=function(){Tv(n.rafHandle),n.rafHandle=Xw(n.checkOverflow)},n.handleKeyPressEvent=function(){n.clearSelection();for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];tt(n.props.onKeyPressEvent,i)},n.handleSelectEvent=function(){n.clearSelection();for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];tt(n.props.onSelectEvent,i)},n.handleDoubleClickEvent=function(){n.clearSelection();for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];tt(n.props.onDoubleClickEvent,i)},n.handleShowMore=function(a,i,o,l,c){var d=n.props,u=d.popup,m=d.onDrillDown,h=d.onShowMore,g=d.getDrilldownView,j=d.doShowMoreDrillDown;if(n.clearSelection(),u){var y=Kw(o,n.containerRef.current);n.setState({overlay:{date:i,events:a,position:qe(qe({},y),{},{width:"200px"}),target:c}})}else j&&tt(m,[i,g(i)||tr.DAY]);tt(h,[a,i,l])},n.handleSelectAllDaySlot=function(a,i){var o=n.props.onSelectSlot,l=new Date(a[0]),c=new Date(a[a.length-1]);c.setDate(a[a.length-1].getDate()+1),tt(o,{slots:a,start:l,end:c,action:i.action,resourceId:i.resourceId})},n.overlayDisplay=function(){n.setState({overlay:null})},n.checkOverflow=function(){if(!n._updatingOverflow){var a=n.contentRef.current;if(a!=null&&a.scrollHeight){var i=a.scrollHeight>a.clientHeight;n.state.isOverflowing!==i&&(n._updatingOverflow=!0,n.setState({isOverflowing:i},function(){n._updatingOverflow=!1}))}}},n.memoizedResources=j2(function(a,i){return fU(a,i)}),n.state={gutterWidth:void 0,isOverflowing:null},n.scrollRef=z.createRef(),n.contentRef=z.createRef(),n.containerRef=z.createRef(),n._scrollRatio=null,n.gutterRef=p.createRef(),n}return Kt(t,e),kt(t,[{key:"getSnapshotBeforeUpdate",value:function(){return this.checkOverflow(),null}},{key:"componentDidMount",value:function(){this.props.width==null&&this.measureGutter(),this.calculateScroll(),this.applyScroll(),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),Tv(this.rafHandle),this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest)}},{key:"componentDidUpdate",value:function(){this.applyScroll()}},{key:"renderDayColumn",value:function(n,a,i,o,l,c,d,u,m,h){var g=this.props,j=g.min,y=g.max,v=(o.get(a)||[]).filter(function(x){return c.inRange(n,d.start(x),d.end(x),"day")}),f=(l.get(a)||[]).filter(function(x){return c.inRange(n,d.start(x),d.end(x),"day")});return z.createElement(Z2,Object.assign({},this.props,{localizer:c,min:c.merge(n,j),max:c.merge(n,y),resource:i&&a,components:u,isNow:c.isSameDate(n,h),key:"".concat(a,"-").concat(n),date:n,events:v,backgroundEvents:f,dayLayoutAlgorithm:m}))}},{key:"renderResourcesFirst",value:function(n,a,i,o,l,c,d,u,m){var h=this;return a.map(function(g){var j=Br(g,2),y=j[0],v=j[1];return n.map(function(f){return h.renderDayColumn(f,y,v,i,o,l,c,u,m,d)})})}},{key:"renderRangeFirst",value:function(n,a,i,o,l,c,d,u,m){var h=this;return n.map(function(g){return z.createElement("div",{style:{display:"flex",minHeight:"100%",flex:1},key:g},a.map(function(j){var y=Br(j,2),v=y[0],f=y[1];return z.createElement("div",{style:{flex:1},key:c.resourceId(f)},h.renderDayColumn(g,v,f,i,o,l,c,u,m,d))}))})}},{key:"renderEvents",value:function(n,a,i,o){var l=this.props,c=l.accessors,d=l.localizer,u=l.resourceGroupingLayout,m=l.components,h=l.dayLayoutAlgorithm,g=this.memoizedResources(this.props.resources,c),j=g.groupEvents(a),y=g.groupEvents(i);return u?this.renderRangeFirst(n,g,j,y,d,c,o,m,h):this.renderResourcesFirst(n,g,j,y,d,c,o,m,h)}},{key:"render",value:function(){var n,a=this.props,i=a.events,o=a.backgroundEvents,l=a.range,c=a.width,d=a.rtl,u=a.selected,m=a.getNow,h=a.resources,g=a.components,j=a.accessors,y=a.getters,v=a.localizer,f=a.min,x=a.max,b=a.showMultiDayTimes,N=a.longPressThreshold,w=a.resizable,S=a.resourceGroupingLayout;c=c||this.state.gutterWidth;var C=l[0],k=l[l.length-1];this.slots=l.length;var A=[],O=[],D=[];i.forEach(function(M){if(Sl(M,C,k,j,v)){var E=j.start(M),L=j.end(M);j.allDay(M)||v.startAndEndAreDateOnly(E,L)||!b&&!v.isSameDate(E,L)?A.push(M):O.push(M)}}),o.forEach(function(M){Sl(M,C,k,j,v)&&D.push(M)}),A.sort(function(M,E){return Hf(M,E,j,v)});var I={range:l,events:A,width:c,rtl:d,getNow:m,localizer:v,selected:u,allDayMaxRows:this.props.showAllEvents?1/0:(n=this.props.allDayMaxRows)!==null&&n!==void 0?n:1/0,resources:this.memoizedResources(h,j),selectable:this.props.selectable,accessors:j,getters:y,components:g,scrollRef:this.scrollRef,isOverflowing:this.state.isOverflowing,longPressThreshold:N,onSelectSlot:this.handleSelectAllDaySlot,onSelectEvent:this.handleSelectEvent,onShowMore:this.handleShowMore,onDoubleClickEvent:this.props.onDoubleClickEvent,onKeyPressEvent:this.props.onKeyPressEvent,onDrillDown:this.props.onDrillDown,getDrilldownView:this.props.getDrilldownView,resizable:w};return z.createElement("div",{className:ft("rbc-time-view",h&&"rbc-time-view-resources"),ref:this.containerRef},h&&h.length>1&&S?z.createElement(dU,I):z.createElement(cU,I),this.props.popup&&this.renderOverlay(),z.createElement("div",{ref:this.contentRef,className:"rbc-time-content",onScroll:this.handleScroll},z.createElement(hU,{date:C,ref:this.gutterRef,localizer:v,min:v.merge(C,f),max:v.merge(C,x),step:this.props.step,getNow:this.props.getNow,timeslots:this.props.timeslots,components:g,className:"rbc-time-gutter",getters:y}),this.renderEvents(l,O,D,m())))}},{key:"renderOverlay",value:function(){var n,a,i=this,o=(n=(a=this.state)===null||a===void 0?void 0:a.overlay)!==null&&n!==void 0?n:{},l=this.props,c=l.accessors,d=l.localizer,u=l.components,m=l.getters,h=l.selected,g=l.popupOffset,j=l.handleDragStart,y=function(){return i.setState({overlay:null})};return z.createElement(Gx,{overlay:o,accessors:c,localizer:d,components:u,getters:m,selected:h,popupOffset:g,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:j,show:!!o.position,overlayDisplay:this.overlayDisplay,onHide:y})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}},{key:"measureGutter",value:function(){var n=this;this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest),this.measureGutterAnimationFrameRequest=window.requestAnimationFrame(function(){var a,i=(a=n.gutterRef)!==null&&a!==void 0&&a.current?zf(n.gutterRef.current):void 0;i&&n.state.gutterWidth!==i&&n.setState({gutterWidth:i})})}},{key:"applyScroll",value:function(){if(this._scrollRatio!=null&&this.props.enableAutoScroll===!0){var n=this.contentRef.current;n.scrollTop=n.scrollHeight*this._scrollRatio,this._scrollRatio=null}}},{key:"calculateScroll",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,a=n.min,i=n.max,o=n.scrollToTime,l=n.localizer,c=l.diff(l.merge(o,a),o,"milliseconds"),d=l.diff(a,i,"milliseconds");this._scrollRatio=c/d}}])}(p.Component);qi.defaultProps={step:30,timeslots:2,resourceGroupingLayout:!1};var pU=["date","localizer","min","max","scrollToTime","enableAutoScroll"],Ju=function(e){function t(){return Et(this,t),Gt(this,t,arguments)}return Kt(t,e),kt(t,[{key:"render",value:function(){var n=this.props,a=n.date,i=n.localizer,o=n.min,l=o===void 0?i.startOf(new Date,"day"):o,c=n.max,d=c===void 0?i.endOf(new Date,"day"):c,u=n.scrollToTime,m=u===void 0?i.startOf(new Date,"day"):u,h=n.enableAutoScroll,g=h===void 0?!0:h,j=Rs(n,pU),y=t.range(a,{localizer:i});return z.createElement(qi,Object.assign({},j,{range:y,eventOffset:10,localizer:i,min:l,max:d,scrollToTime:m,enableAutoScroll:g}))}}])}(z.Component);Ju.range=function(e,t){var r=t.localizer;return[r.startOf(e,"day")]};Ju.navigate=function(e,t,r){var n=r.localizer;switch(t){case gr.PREVIOUS:return n.add(e,-1,"day");case gr.NEXT:return n.add(e,1,"day");default:return e}};Ju.title=function(e,t){var r=t.localizer;return r.format(e,"dayHeaderFormat")};var xU=["date","localizer","min","max","scrollToTime","enableAutoScroll"],Yn=function(e){function t(){return Et(this,t),Gt(this,t,arguments)}return Kt(t,e),kt(t,[{key:"render",value:function(){var n=this.props,a=n.date,i=n.localizer,o=n.min,l=o===void 0?i.startOf(new Date,"day"):o,c=n.max,d=c===void 0?i.endOf(new Date,"day"):c,u=n.scrollToTime,m=u===void 0?i.startOf(new Date,"day"):u,h=n.enableAutoScroll,g=h===void 0?!0:h,j=Rs(n,xU),y=t.range(a,this.props);return z.createElement(qi,Object.assign({},j,{range:y,eventOffset:15,localizer:i,min:l,max:d,scrollToTime:m,enableAutoScroll:g}))}}])}(z.Component);Yn.defaultProps=qi.defaultProps;Yn.navigate=function(e,t,r){var n=r.localizer;switch(t){case gr.PREVIOUS:return n.add(e,-1,"week");case gr.NEXT:return n.add(e,1,"week");default:return e}};Yn.range=function(e,t){var r=t.localizer,n=r.startOfWeek(),a=r.startOf(e,"week",n),i=r.endOf(e,"week",n);return r.range(a,i)};Yn.title=function(e,t){var r=t.localizer,n=Yn.range(e,{localizer:r}),a=D2(n),i=a[0],o=a.slice(1);return r.format({start:i,end:o.pop()},"dayRangeHeaderFormat")};var gU=["date","localizer","min","max","scrollToTime","enableAutoScroll"];function Qx(e,t){return Yn.range(e,t).filter(function(r){return[6,0].indexOf(r.getDay())===-1})}var Xl=function(e){function t(){return Et(this,t),Gt(this,t,arguments)}return Kt(t,e),kt(t,[{key:"render",value:function(){var n=this.props,a=n.date,i=n.localizer,o=n.min,l=o===void 0?i.startOf(new Date,"day"):o,c=n.max,d=c===void 0?i.endOf(new Date,"day"):c,u=n.scrollToTime,m=u===void 0?i.startOf(new Date,"day"):u,h=n.enableAutoScroll,g=h===void 0?!0:h,j=Rs(n,gU),y=Qx(a,this.props);return z.createElement(qi,Object.assign({},j,{range:y,eventOffset:15,localizer:i,min:l,max:d,scrollToTime:m,enableAutoScroll:g}))}}])}(z.Component);Xl.defaultProps=qi.defaultProps;Xl.range=Qx;Xl.navigate=Yn.navigate;Xl.title=function(e,t){var r=t.localizer,n=Qx(e,{localizer:r}),a=D2(n),i=a[0],o=a.slice(1);return r.format({start:i,end:o.pop()},"dayRangeHeaderFormat")};var Zu=30;function em(e){var t=e.accessors,r=e.components,n=e.date,a=e.events,i=e.getters,o=e.length,l=o===void 0?Zu:o,c=e.localizer,d=e.onDoubleClickEvent,u=e.onSelectEvent,m=e.selected,h=p.useRef(null),g=p.useRef(null),j=p.useRef(null),y=p.useRef(null),v=p.useRef(null);p.useEffect(function(){b()});var f=function(k,A,O){var D=r.event,I=r.date;return A=A.filter(function(M){return Sl(M,c.startOf(k,"day"),c.endOf(k,"day"),t,c)}),A.map(function(M,E){var L=t.title(M),V=t.end(M),G=t.start(M),W=i.eventProp(M,G,V,Xu(M,m)),_=E===0&&c.format(k,"agendaDateFormat"),T=E===0?z.createElement("td",{rowSpan:A.length,className:"rbc-agenda-date-cell"},I?z.createElement(I,{day:k,label:_}):_):!1;return z.createElement("tr",{key:O+"_"+E,className:W.className,style:W.style},T,z.createElement("td",{className:"rbc-agenda-time-cell"},x(k,M)),z.createElement("td",{className:"rbc-agenda-event-cell",onClick:function(B){return u&&u(M,B)},onDoubleClick:function(B){return d&&d(M,B)}},D?z.createElement(D,{event:M,title:L}):L))},[])},x=function(k,A){var O="",D=r.time,I=c.messages.allDay,M=t.end(A),E=t.start(A);return t.allDay(A)||(c.eq(E,M)?I=c.format(E,"agendaTimeFormat"):c.isSameDate(E,M)?I=c.format({start:E,end:M},"agendaTimeRangeFormat"):c.isSameDate(k,E)?I=c.format(E,"agendaTimeFormat"):c.isSameDate(k,M)&&(I=c.format(M,"agendaTimeFormat"))),c.gt(k,E,"day")&&(O="rbc-continues-prior"),c.lt(k,M,"day")&&(O+=" rbc-continues-after"),z.createElement("span",{className:O.trim()},D?z.createElement(D,{event:A,day:k,label:I}):I)},b=function(){if(v.current){var k=h.current,A=v.current.firstChild;if(A){var O=y.current.scrollHeight>y.current.clientHeight,D=[],I=D;D=[zf(A.children[0]),zf(A.children[1])],(I[0]!==D[0]||I[1]!==D[1])&&(g.current.style.width=D[0]+"px",j.current.style.width=D[1]+"px"),O?(v3(k,"rbc-header-overflowing"),k.style.marginRight=Dx()+"px"):y3(k,"rbc-header-overflowing")}}},N=c.messages,w=c.add(n,l,"day"),S=c.range(n,w,"day");return a=a.filter(function(C){return Sl(C,c.startOf(n,"day"),c.endOf(w,"day"),t,c)}),a.sort(function(C,k){return+t.start(C)-+t.start(k)}),z.createElement("div",{className:"rbc-agenda-view"},a.length!==0?z.createElement(z.Fragment,null,z.createElement("table",{ref:h,className:"rbc-agenda-table"},z.createElement("thead",null,z.createElement("tr",null,z.createElement("th",{className:"rbc-header",ref:g},N.date),z.createElement("th",{className:"rbc-header",ref:j},N.time),z.createElement("th",{className:"rbc-header"},N.event)))),z.createElement("div",{className:"rbc-agenda-content",ref:y},z.createElement("table",{className:"rbc-agenda-table"},z.createElement("tbody",{ref:v},S.map(function(C,k){return f(C,a,k)}))))):z.createElement("span",{className:"rbc-agenda-empty"},N.noEventsInRange))}em.range=function(e,t){var r=t.length,n=r===void 0?Zu:r,a=t.localizer,i=a.add(e,n,"day");return{start:e,end:i}};em.navigate=function(e,t,r){var n=r.length,a=n===void 0?Zu:n,i=r.localizer;switch(t){case gr.PREVIOUS:return i.add(e,-a,"day");case gr.NEXT:return i.add(e,a,"day");default:return e}};em.title=function(e,t){var r=t.length,n=r===void 0?Zu:r,a=t.localizer,i=a.add(e,n,"day");return a.format({start:e,end:i},"agendaHeaderFormat")};var sd=ua(ua(ua(ua(ua({},tr.MONTH,Qu),tr.WEEK,Yn),tr.WORK_WEEK,Xl),tr.DAY,Ju),tr.AGENDA,em),vU=["action","date","today"];function yU(e,t){var r=t.action,n=t.date,a=t.today,i=Rs(t,vU);switch(e=typeof e=="string"?sd[e]:e,r){case gr.TODAY:n=a||new Date;break;case gr.DATE:break;default:ml(e&&typeof e.navigate=="function","Calendar View components must implement a static `.navigate(date, action)` method.s"),n=e.navigate(n,r,i)}return n}function bU(e,t){var r=null;return typeof t=="function"?r=t(e):typeof t=="string"&&ln(e)==="object"&&e!=null&&t in e&&(r=e[t]),r}var Hs=function(t){return function(r){return bU(r,t)}},jU=["view","date","getNow","onNavigate"],NU=["view","toolbar","events","backgroundEvents","resourceGroupingLayout","style","className","elementProps","date","getNow","length","showMultiDayTimes","onShowMore","doShowMoreDrillDown","components","formats","messages","culture"];function t1(e){if(Array.isArray(e))return e;for(var t=[],r=0,n=Object.entries(e);r<n.length;r++){var a=Br(n[r],2),i=a[0],o=a[1];o&&t.push(i)}return t}function wU(e,t){var r=t.views,n=t1(r);return n.indexOf(e)!==-1}var r1=function(e){function t(){var r;Et(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Gt(this,t,[].concat(a)),r.getViews=function(){var o=r.props.views;return Array.isArray(o)?ZB(o,function(l,c){return l[c]=sd[c]},{}):ln(o)==="object"?Z8(o,function(l,c){return l===!0?sd[c]:l}):sd},r.getView=function(){var o=r.getViews();return o[r.props.view]},r.getDrilldownView=function(o){var l=r.props,c=l.view,d=l.drilldownView,u=l.getDrilldownView;return u?u(o,c,Object.keys(r.getViews())):d},r.handleRangeChange=function(o,l,c){var d=r.props,u=d.onRangeChange,m=d.localizer;u&&l.range&&u(l.range(o,{localizer:m}),c)},r.handleNavigate=function(o,l){var c=r.props,d=c.view,u=c.date,m=c.getNow,h=c.onNavigate,g=Rs(c,jU),j=r.getView(),y=m();u=yU(j,qe(qe({},g),{},{action:o,date:l||u||y,today:y})),h(u,d,o),r.handleRangeChange(u,j)},r.handleViewChange=function(o){o!==r.props.view&&wU(o,r.props)&&r.props.onView(o);var l=r.getViews();r.handleRangeChange(r.props.date||r.props.getNow(),l[o],o)},r.handleSelectEvent=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];tt(r.props.onSelectEvent,l)},r.handleDoubleClickEvent=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];tt(r.props.onDoubleClickEvent,l)},r.handleKeyPressEvent=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];tt(r.props.onKeyPressEvent,l)},r.handleSelectSlot=function(o){tt(r.props.onSelectSlot,o)},r.handleDrillDown=function(o,l){var c=r.props.onDrillDown;if(c){c(o,l,r.drilldownView);return}l&&r.handleViewChange(l),r.handleNavigate(gr.DATE,o)},r.state={context:t.getContext(r.props)},r}return Kt(t,e),kt(t,[{key:"render",value:function(){var n=this.props,a=n.view,i=n.toolbar,o=n.events,l=n.backgroundEvents,c=n.resourceGroupingLayout,d=n.style,u=n.className,m=n.elementProps,h=n.date,g=n.getNow,j=n.length,y=n.showMultiDayTimes,v=n.onShowMore,f=n.doShowMoreDrillDown;n.components,n.formats,n.messages,n.culture;var x=Rs(n,NU);h=h||g();var b=this.getView(),N=this.state.context,w=N.accessors,S=N.components,C=N.getters,k=N.localizer,A=N.viewNames,O=S.toolbar||Ez,D=b.title(h,{localizer:k,length:j});return z.createElement("div",Object.assign({},m,{className:ft(u,"rbc-calendar",x.rtl&&"rbc-rtl"),style:d}),i&&z.createElement(O,{date:h,view:a,views:A,label:D,onView:this.handleViewChange,onNavigate:this.handleNavigate,localizer:k}),z.createElement(b,Object.assign({},x,{events:o,backgroundEvents:l,date:h,getNow:g,length:j,localizer:k,getters:C,components:S,accessors:w,showMultiDayTimes:y,getDrilldownView:this.getDrilldownView,onNavigate:this.handleNavigate,onDrillDown:this.handleDrillDown,onSelectEvent:this.handleSelectEvent,onDoubleClickEvent:this.handleDoubleClickEvent,onKeyPressEvent:this.handleKeyPressEvent,onSelectSlot:this.handleSelectSlot,onShowMore:v,doShowMoreDrillDown:f,resourceGroupingLayout:c})))}}],[{key:"getDerivedStateFromProps",value:function(n){return{context:t.getContext(n)}}},{key:"getContext",value:function(n){var a=n.startAccessor,i=n.endAccessor,o=n.allDayAccessor,l=n.tooltipAccessor,c=n.titleAccessor,d=n.resourceAccessor,u=n.resourceIdAccessor,m=n.resourceTitleAccessor,h=n.eventIdAccessor,g=n.eventPropGetter,j=n.backgroundEventPropGetter,y=n.slotPropGetter,v=n.slotGroupPropGetter,f=n.dayPropGetter,x=n.view,b=n.views,N=n.localizer,w=n.culture,S=n.messages,C=S===void 0?{}:S,k=n.components,A=k===void 0?{}:k,O=n.formats,D=O===void 0?{}:O,I=t1(b),M=Dz(C);return{viewNames:I,localizer:Cz(N,w,D,M),getters:{eventProp:function(){return g&&g.apply(void 0,arguments)||{}},backgroundEventProp:function(){return j&&j.apply(void 0,arguments)||{}},slotProp:function(){return y&&y.apply(void 0,arguments)||{}},slotGroupProp:function(){return v&&v.apply(void 0,arguments)||{}},dayProp:function(){return f&&f.apply(void 0,arguments)||{}}},components:Y8(A[x]||{},BB(A,I),{eventWrapper:Cs,backgroundEventWrapper:Cs,eventContainerWrapper:Cs,dateCellWrapper:Cs,weekWrapper:Cs,timeSlotWrapper:Cs,timeGutterWrapper:Cs,timeIndicatorWrapper:Cs}),accessors:{start:Hs(a),end:Hs(i),allDay:Hs(o),tooltip:Hs(l),title:Hs(c),resource:Hs(d),resourceId:Hs(u),resourceTitle:Hs(m),eventId:Hs(h)}}}}])}(z.Component);r1.defaultProps={events:[],backgroundEvents:[],elementProps:{},popup:!1,toolbar:!0,view:tr.MONTH,views:[tr.MONTH,tr.WEEK,tr.DAY,tr.AGENDA],step:30,length:30,allDayMaxRows:1/0,doShowMoreDrillDown:!0,drilldownView:tr.DAY,titleAccessor:"title",tooltipAccessor:"title",allDayAccessor:"allDay",startAccessor:"start",endAccessor:"end",resourceAccessor:"resourceId",resourceIdAccessor:"id",resourceTitleAccessor:"title",eventIdAccessor:"id",longPressThreshold:250,getNow:function(){return new Date},dayLayoutAlgorithm:"overlap"};var SU=Aw(r1,{view:"onView",date:"onNavigate",selected:"onSelectEvent"}),CU=function(t,r,n){var a=t.start,i=t.end;return n.format(a,"MMMM DD",r)+"  "+n.format(i,n.eq(a,i,"month")?"DD":"MMMM DD",r)},EU=function(t,r,n){var a=t.start,i=t.end;return n.format(a,"L",r)+"  "+n.format(i,"L",r)},fh=function(t,r,n){var a=t.start,i=t.end;return n.format(a,"LT",r)+"  "+n.format(i,"LT",r)},kU=function(t,r,n){var a=t.start;return n.format(a,"LT",r)+"  "},DU=function(t,r,n){var a=t.end;return"  "+n.format(a,"LT",r)},AU={dateFormat:"DD",dayFormat:"DD ddd",weekdayFormat:"ddd",selectRangeFormat:fh,eventTimeRangeFormat:fh,eventTimeRangeStartFormat:kU,eventTimeRangeEndFormat:DU,timeGutterFormat:"LT",monthHeaderFormat:"MMMM YYYY",dayHeaderFormat:"dddd MMM DD",dayRangeHeaderFormat:CU,agendaHeaderFormat:EU,agendaDateFormat:"ddd MMM DD",agendaTimeFormat:"LT",agendaTimeRangeFormat:fh};function bn(e){var t=e&&e.toLowerCase();return t==="FullYear"?t="year":t||(t=void 0),t}function TU(e){var t=function(B,U){return U?B.locale(U):B};function r(R){return e(R).toDate().getTimezoneOffset()}function n(R,B){var U,X,F=e(R).local(),H=e(B).local();if(!e.tz)return F.toDate().getTimezoneOffset()-H.toDate().getTimezoneOffset();var Y=(U=F==null||(X=F._z)===null||X===void 0?void 0:X.name)!==null&&U!==void 0?U:e.tz.guess(),K=e.tz.zone(Y).utcOffset(+F),le=e.tz.zone(Y).utcOffset(+H);return K-le}function a(R){var B=e(R).startOf("day");return n(B,R)}function i(R,B,U){var X=bn(U),F=X?e(R).startOf(X):e(R),H=X?e(B).startOf(X):e(B);return[F,H,X]}function o(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,B=arguments.length>1?arguments[1]:void 0,U=bn(B);return U?e(R).startOf(U).toDate():e(R).toDate()}function l(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,B=arguments.length>1?arguments[1]:void 0,U=bn(B);return U?e(R).endOf(U).toDate():e(R).toDate()}function c(R,B,U){var X=i(R,B,U),F=Br(X,3),H=F[0],Y=F[1],K=F[2];return H.isSame(Y,K)}function d(R,B,U){return!c(R,B,U)}function u(R,B,U){var X=i(R,B,U),F=Br(X,3),H=F[0],Y=F[1],K=F[2];return H.isAfter(Y,K)}function m(R,B,U){var X=i(R,B,U),F=Br(X,3),H=F[0],Y=F[1],K=F[2];return H.isBefore(Y,K)}function h(R,B,U){var X=i(R,B,U),F=Br(X,3),H=F[0],Y=F[1],K=F[2];return H.isSameOrBefore(Y,K)}function g(R,B,U){var X=i(R,B,U),F=Br(X,3),H=F[0],Y=F[1],K=F[2];return H.isSameOrBefore(Y,K)}function j(R,B,U){var X=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"day",F=bn(X),H=e(R),Y=e(B),K=e(U);return H.isBetween(Y,K,F,"[]")}function y(R,B){var U=e(R),X=e(B),F=e.min(U,X);return F.toDate()}function v(R,B){var U=e(R),X=e(B),F=e.max(U,X);return F.toDate()}function f(R,B){if(!R&&!B)return null;var U=e(B).format("HH:mm:ss"),X=e(R).startOf("day").format("MM/DD/YYYY");return e("".concat(X," ").concat(U),"MM/DD/YYYY HH:mm:ss").toDate()}function x(R,B,U){var X=bn(U);return e(R).add(B,X).toDate()}function b(R,B){for(var U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"day",X=bn(U),F=e(R).toDate(),H=[];g(F,B);)H.push(F),F=x(F,1,X);return H}function N(R,B){var U=bn(B),X=o(R,U);return c(X,R)?X:x(X,1,U)}function w(R,B){var U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"day",X=bn(U),F=e(R),H=e(B);return H.diff(F,X)}function S(R){var B=e(R);return B.minutes()}function C(R){var B=R?e.localeData(R):e.localeData();return B?B.firstDayOfWeek():0}function k(R){return e(R).startOf("month").startOf("week").toDate()}function A(R){return e(R).endOf("month").endOf("week").toDate()}function O(R){for(var B=k(R),U=A(R),X=[];g(B,U);)X.push(B),B=x(B,1,"d");return X}function D(R,B,U){return e(R).startOf("day").minute(B+U).toDate()}function I(R,B){return w(R,B,"minutes")}function M(R){var B=e(R).startOf("day"),U=e(R);return U.diff(B,"minutes")+a(R)}function E(R,B){var U=e(R),X=e(B);return U.isBefore(X,"day")}function L(R,B,U){var X=e(B),F=e(U);return X.isSameOrAfter(F,"minutes")}function V(R,B){var U=e(R),X=e(B),F=e.duration(X.diff(U));return F.days()}function G(R){var B=R.evtA,U=B.start,X=B.end,F=B.allDay,H=R.evtB,Y=H.start,K=H.end,le=H.allDay,q=+o(U,"day")-+o(Y,"day"),ce=V(U,X),ae=V(Y,K);return q||ae-ce||!!le-!!F||+U-+Y||+X-+K}function W(R){var B=R.event,U=B.start,X=B.end,F=R.range,H=F.start,Y=F.end,K=e(U).startOf("day"),le=e(X),q=e(H),ce=e(Y),ae=K.isSameOrBefore(ce,"day"),xe=!K.isSame(le,"minutes"),Ce=xe?le.isAfter(q,"minutes"):le.isSameOrAfter(q,"minutes");return ae&&Ce}function _(R,B){var U=e(R),X=e(B);return U.isSame(X,"day")}function T(){var R=new Date,B=/-/.test(R.toString())?"-":"",U=R.getTimezoneOffset(),X=Number("".concat(B).concat(Math.abs(U))),F=e().utcOffset();return F>X?1:0}return new Sz({formats:AU,firstOfWeek:C,firstVisibleDay:k,lastVisibleDay:A,visibleDays:O,format:function(B,U,X){return t(e(B),X).format(U)},lt:m,lte:g,gt:u,gte:h,eq:c,neq:d,merge:f,inRange:j,startOf:o,endOf:l,range:b,add:x,diff:w,ceil:N,min:y,max:v,minutes:S,getSlotDate:D,getTimezoneOffset:r,getDstOffset:n,getTotalMin:I,getMinutesFromMidnight:M,continuesPrior:E,continuesAfter:L,sortEvents:G,inEventRange:W,isSameDate:_,daySpan:V,browserTZOffset:T})}//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var s1;function ne(){return s1.apply(null,arguments)}function _U(e){s1=e}function us(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function wa(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function Fe(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Jx(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var t;for(t in e)if(Fe(e,t))return!1;return!0}function or(e){return e===void 0}function dn(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function Ql(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function n1(e,t){var r=[],n,a=e.length;for(n=0;n<a;++n)r.push(t(e[n],n));return r}function Tn(e,t){for(var r in t)Fe(t,r)&&(e[r]=t[r]);return Fe(t,"toString")&&(e.toString=t.toString),Fe(t,"valueOf")&&(e.valueOf=t.valueOf),e}function Bs(e,t,r,n){return k1(e,t,r,n,!0).utc()}function OU(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function Ne(e){return e._pf==null&&(e._pf=OU()),e._pf}var Yf;Array.prototype.some?Yf=Array.prototype.some:Yf=function(e){var t=Object(this),r=t.length>>>0,n;for(n=0;n<r;n++)if(n in t&&e.call(this,t[n],n,t))return!0;return!1};function Zx(e){var t=null,r=!1,n=e._d&&!isNaN(e._d.getTime());if(n&&(t=Ne(e),r=Yf.call(t.parsedDateParts,function(a){return a!=null}),n=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&r),e._strict&&(n=n&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=n;else return n;return e._isValid}function tm(e){var t=Bs(NaN);return e!=null?Tn(Ne(t),e):Ne(t).userInvalidated=!0,t}var Wy=ne.momentProperties=[],ph=!1;function eg(e,t){var r,n,a,i=Wy.length;if(or(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),or(t._i)||(e._i=t._i),or(t._f)||(e._f=t._f),or(t._l)||(e._l=t._l),or(t._strict)||(e._strict=t._strict),or(t._tzm)||(e._tzm=t._tzm),or(t._isUTC)||(e._isUTC=t._isUTC),or(t._offset)||(e._offset=t._offset),or(t._pf)||(e._pf=Ne(t)),or(t._locale)||(e._locale=t._locale),i>0)for(r=0;r<i;r++)n=Wy[r],a=t[n],or(a)||(e[n]=a);return e}function Jl(e){eg(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),ph===!1&&(ph=!0,ne.updateOffset(this),ph=!1)}function ms(e){return e instanceof Jl||e!=null&&e._isAMomentObject!=null}function a1(e){ne.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function Kr(e,t){var r=!0;return Tn(function(){if(ne.deprecationHandler!=null&&ne.deprecationHandler(null,e),r){var n=[],a,i,o,l=arguments.length;for(i=0;i<l;i++){if(a="",typeof arguments[i]=="object"){a+=`
[`+i+"] ";for(o in arguments[0])Fe(arguments[0],o)&&(a+=o+": "+arguments[0][o]+", ");a=a.slice(0,-2)}else a=arguments[i];n.push(a)}a1(e+`
Arguments: `+Array.prototype.slice.call(n).join("")+`
`+new Error().stack),r=!1}return t.apply(this,arguments)},t)}var Yy={};function i1(e,t){ne.deprecationHandler!=null&&ne.deprecationHandler(e,t),Yy[e]||(a1(t),Yy[e]=!0)}ne.suppressDeprecationWarnings=!1;ne.deprecationHandler=null;function zs(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function MU(e){var t,r;for(r in e)Fe(e,r)&&(t=e[r],zs(t)?this[r]=t:this["_"+r]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function qf(e,t){var r=Tn({},e),n;for(n in t)Fe(t,n)&&(wa(e[n])&&wa(t[n])?(r[n]={},Tn(r[n],e[n]),Tn(r[n],t[n])):t[n]!=null?r[n]=t[n]:delete r[n]);for(n in e)Fe(e,n)&&!Fe(t,n)&&wa(e[n])&&(r[n]=Tn({},r[n]));return r}function tg(e){e!=null&&this.set(e)}var Gf;Object.keys?Gf=Object.keys:Gf=function(e){var t,r=[];for(t in e)Fe(e,t)&&r.push(t);return r};var RU={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function PU(e,t,r){var n=this._calendar[e]||this._calendar.sameElse;return zs(n)?n.call(t,r):n}function Ps(e,t,r){var n=""+Math.abs(e),a=t-n.length,i=e>=0;return(i?r?"+":"":"-")+Math.pow(10,Math.max(0,a)).toString().substr(1)+n}var rg=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Tc=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,xh={},mi={};function pe(e,t,r,n){var a=n;typeof n=="string"&&(a=function(){return this[n]()}),e&&(mi[e]=a),t&&(mi[t[0]]=function(){return Ps(a.apply(this,arguments),t[1],t[2])}),r&&(mi[r]=function(){return this.localeData().ordinal(a.apply(this,arguments),e)})}function LU(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function IU(e){var t=e.match(rg),r,n;for(r=0,n=t.length;r<n;r++)mi[t[r]]?t[r]=mi[t[r]]:t[r]=LU(t[r]);return function(a){var i="",o;for(o=0;o<n;o++)i+=zs(t[o])?t[o].call(a,e):t[o];return i}}function nd(e,t){return e.isValid()?(t=o1(t,e.localeData()),xh[t]=xh[t]||IU(t),xh[t](e)):e.localeData().invalidDate()}function o1(e,t){var r=5;function n(a){return t.longDateFormat(a)||a}for(Tc.lastIndex=0;r>=0&&Tc.test(e);)e=e.replace(Tc,n),Tc.lastIndex=0,r-=1;return e}var $U={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function FU(e){var t=this._longDateFormat[e],r=this._longDateFormat[e.toUpperCase()];return t||!r?t:(this._longDateFormat[e]=r.match(rg).map(function(n){return n==="MMMM"||n==="MM"||n==="DD"||n==="dddd"?n.slice(1):n}).join(""),this._longDateFormat[e])}var BU="Invalid date";function zU(){return this._invalidDate}var UU="%d",VU=/\d{1,2}/;function HU(e){return this._ordinal.replace("%d",e)}var WU={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function YU(e,t,r,n){var a=this._relativeTime[r];return zs(a)?a(e,t,r,n):a.replace(/%d/i,e)}function qU(e,t){var r=this._relativeTime[e>0?"future":"past"];return zs(r)?r(t):r.replace(/%s/i,t)}var qy={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function Xr(e){return typeof e=="string"?qy[e]||qy[e.toLowerCase()]:void 0}function sg(e){var t={},r,n;for(n in e)Fe(e,n)&&(r=Xr(n),r&&(t[r]=e[n]));return t}var GU={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function KU(e){var t=[],r;for(r in e)Fe(e,r)&&t.push({unit:r,priority:GU[r]});return t.sort(function(n,a){return n.priority-a.priority}),t}var l1=/\d/,Dr=/\d\d/,c1=/\d{3}/,ng=/\d{4}/,rm=/[+-]?\d{6}/,nt=/\d\d?/,d1=/\d\d\d\d?/,u1=/\d\d\d\d\d\d?/,sm=/\d{1,3}/,ag=/\d{1,4}/,nm=/[+-]?\d{1,6}/,Gi=/\d+/,am=/[+-]?\d+/,XU=/Z|[+-]\d\d:?\d\d/gi,im=/Z|[+-]\d\d(?::?\d\d)?/gi,QU=/[+-]?\d+(\.\d{1,3})?/,Zl=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Ki=/^[1-9]\d?/,ig=/^([1-9]\d|\d)/,Jd;Jd={};function ue(e,t,r){Jd[e]=zs(t)?t:function(n,a){return n&&r?r:t}}function JU(e,t){return Fe(Jd,e)?Jd[e](t._strict,t._locale):new RegExp(ZU(e))}function ZU(e){return tn(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,r,n,a,i){return r||n||a||i}))}function tn(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function $r(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function _e(e){var t=+e,r=0;return t!==0&&isFinite(t)&&(r=$r(t)),r}var Kf={};function Ye(e,t){var r,n=t,a;for(typeof e=="string"&&(e=[e]),dn(t)&&(n=function(i,o){o[t]=_e(i)}),a=e.length,r=0;r<a;r++)Kf[e[r]]=n}function ec(e,t){Ye(e,function(r,n,a,i){a._w=a._w||{},t(r,a._w,a,i)})}function eV(e,t,r){t!=null&&Fe(Kf,e)&&Kf[e](t,r._a,r,e)}function om(e){return e%4===0&&e%100!==0||e%400===0}var Yt=0,Js=1,ks=2,Ct=3,is=4,Zs=5,ga=6,tV=7,rV=8;pe("Y",0,0,function(){var e=this.year();return e<=9999?Ps(e,4):"+"+e});pe(0,["YY",2],0,function(){return this.year()%100});pe(0,["YYYY",4],0,"year");pe(0,["YYYYY",5],0,"year");pe(0,["YYYYYY",6,!0],0,"year");ue("Y",am);ue("YY",nt,Dr);ue("YYYY",ag,ng);ue("YYYYY",nm,rm);ue("YYYYYY",nm,rm);Ye(["YYYYY","YYYYYY"],Yt);Ye("YYYY",function(e,t){t[Yt]=e.length===2?ne.parseTwoDigitYear(e):_e(e)});Ye("YY",function(e,t){t[Yt]=ne.parseTwoDigitYear(e)});Ye("Y",function(e,t){t[Yt]=parseInt(e,10)});function zo(e){return om(e)?366:365}ne.parseTwoDigitYear=function(e){return _e(e)+(_e(e)>68?1900:2e3)};var m1=Xi("FullYear",!0);function sV(){return om(this.year())}function Xi(e,t){return function(r){return r!=null?(h1(this,e,r),ne.updateOffset(this,t),this):El(this,e)}}function El(e,t){if(!e.isValid())return NaN;var r=e._d,n=e._isUTC;switch(t){case"Milliseconds":return n?r.getUTCMilliseconds():r.getMilliseconds();case"Seconds":return n?r.getUTCSeconds():r.getSeconds();case"Minutes":return n?r.getUTCMinutes():r.getMinutes();case"Hours":return n?r.getUTCHours():r.getHours();case"Date":return n?r.getUTCDate():r.getDate();case"Day":return n?r.getUTCDay():r.getDay();case"Month":return n?r.getUTCMonth():r.getMonth();case"FullYear":return n?r.getUTCFullYear():r.getFullYear();default:return NaN}}function h1(e,t,r){var n,a,i,o,l;if(!(!e.isValid()||isNaN(r))){switch(n=e._d,a=e._isUTC,t){case"Milliseconds":return void(a?n.setUTCMilliseconds(r):n.setMilliseconds(r));case"Seconds":return void(a?n.setUTCSeconds(r):n.setSeconds(r));case"Minutes":return void(a?n.setUTCMinutes(r):n.setMinutes(r));case"Hours":return void(a?n.setUTCHours(r):n.setHours(r));case"Date":return void(a?n.setUTCDate(r):n.setDate(r));case"FullYear":break;default:return}i=r,o=e.month(),l=e.date(),l=l===29&&o===1&&!om(i)?28:l,a?n.setUTCFullYear(i,o,l):n.setFullYear(i,o,l)}}function nV(e){return e=Xr(e),zs(this[e])?this[e]():this}function aV(e,t){if(typeof e=="object"){e=sg(e);var r=KU(e),n,a=r.length;for(n=0;n<a;n++)this[r[n].unit](e[r[n].unit])}else if(e=Xr(e),zs(this[e]))return this[e](t);return this}function iV(e,t){return(e%t+t)%t}var pt;Array.prototype.indexOf?pt=Array.prototype.indexOf:pt=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function og(e,t){if(isNaN(e)||isNaN(t))return NaN;var r=iV(t,12);return e+=(t-r)/12,r===1?om(e)?29:28:31-r%7%2}pe("M",["MM",2],"Mo",function(){return this.month()+1});pe("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});pe("MMMM",0,0,function(e){return this.localeData().months(this,e)});ue("M",nt,Ki);ue("MM",nt,Dr);ue("MMM",function(e,t){return t.monthsShortRegex(e)});ue("MMMM",function(e,t){return t.monthsRegex(e)});Ye(["M","MM"],function(e,t){t[Js]=_e(e)-1});Ye(["MMM","MMMM"],function(e,t,r,n){var a=r._locale.monthsParse(e,n,r._strict);a!=null?t[Js]=a:Ne(r).invalidMonth=e});var oV="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),f1="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),p1=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,lV=Zl,cV=Zl;function dV(e,t){return e?us(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||p1).test(t)?"format":"standalone"][e.month()]:us(this._months)?this._months:this._months.standalone}function uV(e,t){return e?us(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[p1.test(t)?"format":"standalone"][e.month()]:us(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function mV(e,t,r){var n,a,i,o=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)i=Bs([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(i,"").toLocaleLowerCase();return r?t==="MMM"?(a=pt.call(this._shortMonthsParse,o),a!==-1?a:null):(a=pt.call(this._longMonthsParse,o),a!==-1?a:null):t==="MMM"?(a=pt.call(this._shortMonthsParse,o),a!==-1?a:(a=pt.call(this._longMonthsParse,o),a!==-1?a:null)):(a=pt.call(this._longMonthsParse,o),a!==-1?a:(a=pt.call(this._shortMonthsParse,o),a!==-1?a:null))}function hV(e,t,r){var n,a,i;if(this._monthsParseExact)return mV.call(this,e,t,r);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(a=Bs([2e3,n]),r&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(a,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(a,"").replace(".","")+"$","i")),!r&&!this._monthsParse[n]&&(i="^"+this.months(a,"")+"|^"+this.monthsShort(a,""),this._monthsParse[n]=new RegExp(i.replace(".",""),"i")),r&&t==="MMMM"&&this._longMonthsParse[n].test(e))return n;if(r&&t==="MMM"&&this._shortMonthsParse[n].test(e))return n;if(!r&&this._monthsParse[n].test(e))return n}}function x1(e,t){if(!e.isValid())return e;if(typeof t=="string"){if(/^\d+$/.test(t))t=_e(t);else if(t=e.localeData().monthsParse(t),!dn(t))return e}var r=t,n=e.date();return n=n<29?n:Math.min(n,og(e.year(),r)),e._isUTC?e._d.setUTCMonth(r,n):e._d.setMonth(r,n),e}function g1(e){return e!=null?(x1(this,e),ne.updateOffset(this,!0),this):El(this,"Month")}function fV(){return og(this.year(),this.month())}function pV(e){return this._monthsParseExact?(Fe(this,"_monthsRegex")||v1.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(Fe(this,"_monthsShortRegex")||(this._monthsShortRegex=lV),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function xV(e){return this._monthsParseExact?(Fe(this,"_monthsRegex")||v1.call(this),e?this._monthsStrictRegex:this._monthsRegex):(Fe(this,"_monthsRegex")||(this._monthsRegex=cV),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function v1(){function e(c,d){return d.length-c.length}var t=[],r=[],n=[],a,i,o,l;for(a=0;a<12;a++)i=Bs([2e3,a]),o=tn(this.monthsShort(i,"")),l=tn(this.months(i,"")),t.push(o),r.push(l),n.push(l),n.push(o);t.sort(e),r.sort(e),n.sort(e),this._monthsRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}function gV(e,t,r,n,a,i,o){var l;return e<100&&e>=0?(l=new Date(e+400,t,r,n,a,i,o),isFinite(l.getFullYear())&&l.setFullYear(e)):l=new Date(e,t,r,n,a,i,o),l}function kl(e){var t,r;return e<100&&e>=0?(r=Array.prototype.slice.call(arguments),r[0]=e+400,t=new Date(Date.UTC.apply(null,r)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function Zd(e,t,r){var n=7+t-r,a=(7+kl(e,0,n).getUTCDay()-t)%7;return-a+n-1}function y1(e,t,r,n,a){var i=(7+r-n)%7,o=Zd(e,n,a),l=1+7*(t-1)+i+o,c,d;return l<=0?(c=e-1,d=zo(c)+l):l>zo(e)?(c=e+1,d=l-zo(e)):(c=e,d=l),{year:c,dayOfYear:d}}function Dl(e,t,r){var n=Zd(e.year(),t,r),a=Math.floor((e.dayOfYear()-n-1)/7)+1,i,o;return a<1?(o=e.year()-1,i=a+rn(o,t,r)):a>rn(e.year(),t,r)?(i=a-rn(e.year(),t,r),o=e.year()+1):(o=e.year(),i=a),{week:i,year:o}}function rn(e,t,r){var n=Zd(e,t,r),a=Zd(e+1,t,r);return(zo(e)-n+a)/7}pe("w",["ww",2],"wo","week");pe("W",["WW",2],"Wo","isoWeek");ue("w",nt,Ki);ue("ww",nt,Dr);ue("W",nt,Ki);ue("WW",nt,Dr);ec(["w","ww","W","WW"],function(e,t,r,n){t[n.substr(0,1)]=_e(e)});function vV(e){return Dl(e,this._week.dow,this._week.doy).week}var yV={dow:0,doy:6};function bV(){return this._week.dow}function jV(){return this._week.doy}function NV(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function wV(e){var t=Dl(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}pe("d",0,"do","day");pe("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});pe("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});pe("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});pe("e",0,0,"weekday");pe("E",0,0,"isoWeekday");ue("d",nt);ue("e",nt);ue("E",nt);ue("dd",function(e,t){return t.weekdaysMinRegex(e)});ue("ddd",function(e,t){return t.weekdaysShortRegex(e)});ue("dddd",function(e,t){return t.weekdaysRegex(e)});ec(["dd","ddd","dddd"],function(e,t,r,n){var a=r._locale.weekdaysParse(e,n,r._strict);a!=null?t.d=a:Ne(r).invalidWeekday=e});ec(["d","e","E"],function(e,t,r,n){t[n]=_e(e)});function SV(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function CV(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function lg(e,t){return e.slice(t,7).concat(e.slice(0,t))}var EV="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),b1="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),kV="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),DV=Zl,AV=Zl,TV=Zl;function _V(e,t){var r=us(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===!0?lg(r,this._week.dow):e?r[e.day()]:r}function OV(e){return e===!0?lg(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function MV(e){return e===!0?lg(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function RV(e,t,r){var n,a,i,o=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)i=Bs([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(i,"").toLocaleLowerCase();return r?t==="dddd"?(a=pt.call(this._weekdaysParse,o),a!==-1?a:null):t==="ddd"?(a=pt.call(this._shortWeekdaysParse,o),a!==-1?a:null):(a=pt.call(this._minWeekdaysParse,o),a!==-1?a:null):t==="dddd"?(a=pt.call(this._weekdaysParse,o),a!==-1||(a=pt.call(this._shortWeekdaysParse,o),a!==-1)?a:(a=pt.call(this._minWeekdaysParse,o),a!==-1?a:null)):t==="ddd"?(a=pt.call(this._shortWeekdaysParse,o),a!==-1||(a=pt.call(this._weekdaysParse,o),a!==-1)?a:(a=pt.call(this._minWeekdaysParse,o),a!==-1?a:null)):(a=pt.call(this._minWeekdaysParse,o),a!==-1||(a=pt.call(this._weekdaysParse,o),a!==-1)?a:(a=pt.call(this._shortWeekdaysParse,o),a!==-1?a:null))}function PV(e,t,r){var n,a,i;if(this._weekdaysParseExact)return RV.call(this,e,t,r);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(a=Bs([2e3,1]).day(n),r&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(a,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(a,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(a,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[n]||(i="^"+this.weekdays(a,"")+"|^"+this.weekdaysShort(a,"")+"|^"+this.weekdaysMin(a,""),this._weekdaysParse[n]=new RegExp(i.replace(".",""),"i")),r&&t==="dddd"&&this._fullWeekdaysParse[n].test(e))return n;if(r&&t==="ddd"&&this._shortWeekdaysParse[n].test(e))return n;if(r&&t==="dd"&&this._minWeekdaysParse[n].test(e))return n;if(!r&&this._weekdaysParse[n].test(e))return n}}function LV(e){if(!this.isValid())return e!=null?this:NaN;var t=El(this,"Day");return e!=null?(e=SV(e,this.localeData()),this.add(e-t,"d")):t}function IV(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function $V(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=CV(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function FV(e){return this._weekdaysParseExact?(Fe(this,"_weekdaysRegex")||cg.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(Fe(this,"_weekdaysRegex")||(this._weekdaysRegex=DV),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function BV(e){return this._weekdaysParseExact?(Fe(this,"_weekdaysRegex")||cg.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(Fe(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=AV),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function zV(e){return this._weekdaysParseExact?(Fe(this,"_weekdaysRegex")||cg.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(Fe(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=TV),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function cg(){function e(u,m){return m.length-u.length}var t=[],r=[],n=[],a=[],i,o,l,c,d;for(i=0;i<7;i++)o=Bs([2e3,1]).day(i),l=tn(this.weekdaysMin(o,"")),c=tn(this.weekdaysShort(o,"")),d=tn(this.weekdays(o,"")),t.push(l),r.push(c),n.push(d),a.push(l),a.push(c),a.push(d);t.sort(e),r.sort(e),n.sort(e),a.sort(e),this._weekdaysRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function dg(){return this.hours()%12||12}function UV(){return this.hours()||24}pe("H",["HH",2],0,"hour");pe("h",["hh",2],0,dg);pe("k",["kk",2],0,UV);pe("hmm",0,0,function(){return""+dg.apply(this)+Ps(this.minutes(),2)});pe("hmmss",0,0,function(){return""+dg.apply(this)+Ps(this.minutes(),2)+Ps(this.seconds(),2)});pe("Hmm",0,0,function(){return""+this.hours()+Ps(this.minutes(),2)});pe("Hmmss",0,0,function(){return""+this.hours()+Ps(this.minutes(),2)+Ps(this.seconds(),2)});function j1(e,t){pe(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}j1("a",!0);j1("A",!1);function N1(e,t){return t._meridiemParse}ue("a",N1);ue("A",N1);ue("H",nt,ig);ue("h",nt,Ki);ue("k",nt,Ki);ue("HH",nt,Dr);ue("hh",nt,Dr);ue("kk",nt,Dr);ue("hmm",d1);ue("hmmss",u1);ue("Hmm",d1);ue("Hmmss",u1);Ye(["H","HH"],Ct);Ye(["k","kk"],function(e,t,r){var n=_e(e);t[Ct]=n===24?0:n});Ye(["a","A"],function(e,t,r){r._isPm=r._locale.isPM(e),r._meridiem=e});Ye(["h","hh"],function(e,t,r){t[Ct]=_e(e),Ne(r).bigHour=!0});Ye("hmm",function(e,t,r){var n=e.length-2;t[Ct]=_e(e.substr(0,n)),t[is]=_e(e.substr(n)),Ne(r).bigHour=!0});Ye("hmmss",function(e,t,r){var n=e.length-4,a=e.length-2;t[Ct]=_e(e.substr(0,n)),t[is]=_e(e.substr(n,2)),t[Zs]=_e(e.substr(a)),Ne(r).bigHour=!0});Ye("Hmm",function(e,t,r){var n=e.length-2;t[Ct]=_e(e.substr(0,n)),t[is]=_e(e.substr(n))});Ye("Hmmss",function(e,t,r){var n=e.length-4,a=e.length-2;t[Ct]=_e(e.substr(0,n)),t[is]=_e(e.substr(n,2)),t[Zs]=_e(e.substr(a))});function VV(e){return(e+"").toLowerCase().charAt(0)==="p"}var HV=/[ap]\.?m?\.?/i,WV=Xi("Hours",!0);function YV(e,t,r){return e>11?r?"pm":"PM":r?"am":"AM"}var w1={calendar:RU,longDateFormat:$U,invalidDate:BU,ordinal:UU,dayOfMonthOrdinalParse:VU,relativeTime:WU,months:oV,monthsShort:f1,week:yV,weekdays:EV,weekdaysMin:kV,weekdaysShort:b1,meridiemParse:HV},at={},xo={},Al;function qV(e,t){var r,n=Math.min(e.length,t.length);for(r=0;r<n;r+=1)if(e[r]!==t[r])return r;return n}function Gy(e){return e&&e.toLowerCase().replace("_","-")}function GV(e){for(var t=0,r,n,a,i;t<e.length;){for(i=Gy(e[t]).split("-"),r=i.length,n=Gy(e[t+1]),n=n?n.split("-"):null;r>0;){if(a=lm(i.slice(0,r).join("-")),a)return a;if(n&&n.length>=r&&qV(i,n)>=r-1)break;r--}t++}return Al}function KV(e){return!!(e&&e.match("^[^/\\\\]*$"))}function lm(e){var t=null,r;if(at[e]===void 0&&typeof hd<"u"&&hd&&hd.exports&&KV(e))try{t=Al._abbr,r=require,r("./locale/"+e),zn(t)}catch{at[e]=null}return at[e]}function zn(e,t){var r;return e&&(or(t)?r=hn(e):r=ug(e,t),r?Al=r:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),Al._abbr}function ug(e,t){if(t!==null){var r,n=w1;if(t.abbr=e,at[e]!=null)i1("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=at[e]._config;else if(t.parentLocale!=null)if(at[t.parentLocale]!=null)n=at[t.parentLocale]._config;else if(r=lm(t.parentLocale),r!=null)n=r._config;else return xo[t.parentLocale]||(xo[t.parentLocale]=[]),xo[t.parentLocale].push({name:e,config:t}),null;return at[e]=new tg(qf(n,t)),xo[e]&&xo[e].forEach(function(a){ug(a.name,a.config)}),zn(e),at[e]}else return delete at[e],null}function XV(e,t){if(t!=null){var r,n,a=w1;at[e]!=null&&at[e].parentLocale!=null?at[e].set(qf(at[e]._config,t)):(n=lm(e),n!=null&&(a=n._config),t=qf(a,t),n==null&&(t.abbr=e),r=new tg(t),r.parentLocale=at[e],at[e]=r),zn(e)}else at[e]!=null&&(at[e].parentLocale!=null?(at[e]=at[e].parentLocale,e===zn()&&zn(e)):at[e]!=null&&delete at[e]);return at[e]}function hn(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Al;if(!us(e)){if(t=lm(e),t)return t;e=[e]}return GV(e)}function QV(){return Gf(at)}function mg(e){var t,r=e._a;return r&&Ne(e).overflow===-2&&(t=r[Js]<0||r[Js]>11?Js:r[ks]<1||r[ks]>og(r[Yt],r[Js])?ks:r[Ct]<0||r[Ct]>24||r[Ct]===24&&(r[is]!==0||r[Zs]!==0||r[ga]!==0)?Ct:r[is]<0||r[is]>59?is:r[Zs]<0||r[Zs]>59?Zs:r[ga]<0||r[ga]>999?ga:-1,Ne(e)._overflowDayOfYear&&(t<Yt||t>ks)&&(t=ks),Ne(e)._overflowWeeks&&t===-1&&(t=tV),Ne(e)._overflowWeekday&&t===-1&&(t=rV),Ne(e).overflow=t),e}var JV=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ZV=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,eH=/Z|[+-]\d\d(?::?\d\d)?/,_c=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],gh=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],tH=/^\/?Date\((-?\d+)/i,rH=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,sH={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function S1(e){var t,r,n=e._i,a=JV.exec(n)||ZV.exec(n),i,o,l,c,d=_c.length,u=gh.length;if(a){for(Ne(e).iso=!0,t=0,r=d;t<r;t++)if(_c[t][1].exec(a[1])){o=_c[t][0],i=_c[t][2]!==!1;break}if(o==null){e._isValid=!1;return}if(a[3]){for(t=0,r=u;t<r;t++)if(gh[t][1].exec(a[3])){l=(a[2]||" ")+gh[t][0];break}if(l==null){e._isValid=!1;return}}if(!i&&l!=null){e._isValid=!1;return}if(a[4])if(eH.exec(a[4]))c="Z";else{e._isValid=!1;return}e._f=o+(l||"")+(c||""),fg(e)}else e._isValid=!1}function nH(e,t,r,n,a,i){var o=[aH(e),f1.indexOf(t),parseInt(r,10),parseInt(n,10),parseInt(a,10)];return i&&o.push(parseInt(i,10)),o}function aH(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function iH(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function oH(e,t,r){if(e){var n=b1.indexOf(e),a=new Date(t[0],t[1],t[2]).getDay();if(n!==a)return Ne(r).weekdayMismatch=!0,r._isValid=!1,!1}return!0}function lH(e,t,r){if(e)return sH[e];if(t)return 0;var n=parseInt(r,10),a=n%100,i=(n-a)/100;return i*60+a}function C1(e){var t=rH.exec(iH(e._i)),r;if(t){if(r=nH(t[4],t[3],t[2],t[5],t[6],t[7]),!oH(t[1],r,e))return;e._a=r,e._tzm=lH(t[8],t[9],t[10]),e._d=kl.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),Ne(e).rfc2822=!0}else e._isValid=!1}function cH(e){var t=tH.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}if(S1(e),e._isValid===!1)delete e._isValid;else return;if(C1(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:ne.createFromInputFallback(e)}ne.createFromInputFallback=Kr("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function Ya(e,t,r){return e??t??r}function dH(e){var t=new Date(ne.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function hg(e){var t,r,n=[],a,i,o;if(!e._d){for(a=dH(e),e._w&&e._a[ks]==null&&e._a[Js]==null&&uH(e),e._dayOfYear!=null&&(o=Ya(e._a[Yt],a[Yt]),(e._dayOfYear>zo(o)||e._dayOfYear===0)&&(Ne(e)._overflowDayOfYear=!0),r=kl(o,0,e._dayOfYear),e._a[Js]=r.getUTCMonth(),e._a[ks]=r.getUTCDate()),t=0;t<3&&e._a[t]==null;++t)e._a[t]=n[t]=a[t];for(;t<7;t++)e._a[t]=n[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[Ct]===24&&e._a[is]===0&&e._a[Zs]===0&&e._a[ga]===0&&(e._nextDay=!0,e._a[Ct]=0),e._d=(e._useUTC?kl:gV).apply(null,n),i=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Ct]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==i&&(Ne(e).weekdayMismatch=!0)}}function uH(e){var t,r,n,a,i,o,l,c,d;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(i=1,o=4,r=Ya(t.GG,e._a[Yt],Dl(st(),1,4).year),n=Ya(t.W,1),a=Ya(t.E,1),(a<1||a>7)&&(c=!0)):(i=e._locale._week.dow,o=e._locale._week.doy,d=Dl(st(),i,o),r=Ya(t.gg,e._a[Yt],d.year),n=Ya(t.w,d.week),t.d!=null?(a=t.d,(a<0||a>6)&&(c=!0)):t.e!=null?(a=t.e+i,(t.e<0||t.e>6)&&(c=!0)):a=i),n<1||n>rn(r,i,o)?Ne(e)._overflowWeeks=!0:c!=null?Ne(e)._overflowWeekday=!0:(l=y1(r,n,a,i,o),e._a[Yt]=l.year,e._dayOfYear=l.dayOfYear)}ne.ISO_8601=function(){};ne.RFC_2822=function(){};function fg(e){if(e._f===ne.ISO_8601){S1(e);return}if(e._f===ne.RFC_2822){C1(e);return}e._a=[],Ne(e).empty=!0;var t=""+e._i,r,n,a,i,o,l=t.length,c=0,d,u;for(a=o1(e._f,e._locale).match(rg)||[],u=a.length,r=0;r<u;r++)i=a[r],n=(t.match(JU(i,e))||[])[0],n&&(o=t.substr(0,t.indexOf(n)),o.length>0&&Ne(e).unusedInput.push(o),t=t.slice(t.indexOf(n)+n.length),c+=n.length),mi[i]?(n?Ne(e).empty=!1:Ne(e).unusedTokens.push(i),eV(i,n,e)):e._strict&&!n&&Ne(e).unusedTokens.push(i);Ne(e).charsLeftOver=l-c,t.length>0&&Ne(e).unusedInput.push(t),e._a[Ct]<=12&&Ne(e).bigHour===!0&&e._a[Ct]>0&&(Ne(e).bigHour=void 0),Ne(e).parsedDateParts=e._a.slice(0),Ne(e).meridiem=e._meridiem,e._a[Ct]=mH(e._locale,e._a[Ct],e._meridiem),d=Ne(e).era,d!==null&&(e._a[Yt]=e._locale.erasConvertYear(d,e._a[Yt])),hg(e),mg(e)}function mH(e,t,r){var n;return r==null?t:e.meridiemHour!=null?e.meridiemHour(t,r):(e.isPM!=null&&(n=e.isPM(r),n&&t<12&&(t+=12),!n&&t===12&&(t=0)),t)}function hH(e){var t,r,n,a,i,o,l=!1,c=e._f.length;if(c===0){Ne(e).invalidFormat=!0,e._d=new Date(NaN);return}for(a=0;a<c;a++)i=0,o=!1,t=eg({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[a],fg(t),Zx(t)&&(o=!0),i+=Ne(t).charsLeftOver,i+=Ne(t).unusedTokens.length*10,Ne(t).score=i,l?i<n&&(n=i,r=t):(n==null||i<n||o)&&(n=i,r=t,o&&(l=!0));Tn(e,r||t)}function fH(e){if(!e._d){var t=sg(e._i),r=t.day===void 0?t.date:t.day;e._a=n1([t.year,t.month,r,t.hour,t.minute,t.second,t.millisecond],function(n){return n&&parseInt(n,10)}),hg(e)}}function pH(e){var t=new Jl(mg(E1(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function E1(e){var t=e._i,r=e._f;return e._locale=e._locale||hn(e._l),t===null||r===void 0&&t===""?tm({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),ms(t)?new Jl(mg(t)):(Ql(t)?e._d=t:us(r)?hH(e):r?fg(e):xH(e),Zx(e)||(e._d=null),e))}function xH(e){var t=e._i;or(t)?e._d=new Date(ne.now()):Ql(t)?e._d=new Date(t.valueOf()):typeof t=="string"?cH(e):us(t)?(e._a=n1(t.slice(0),function(r){return parseInt(r,10)}),hg(e)):wa(t)?fH(e):dn(t)?e._d=new Date(t):ne.createFromInputFallback(e)}function k1(e,t,r,n,a){var i={};return(t===!0||t===!1)&&(n=t,t=void 0),(r===!0||r===!1)&&(n=r,r=void 0),(wa(e)&&Jx(e)||us(e)&&e.length===0)&&(e=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=a,i._l=r,i._i=e,i._f=t,i._strict=n,pH(i)}function st(e,t,r,n){return k1(e,t,r,n,!1)}var gH=Kr("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=st.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:tm()}),vH=Kr("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=st.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:tm()});function D1(e,t){var r,n;if(t.length===1&&us(t[0])&&(t=t[0]),!t.length)return st();for(r=t[0],n=1;n<t.length;++n)(!t[n].isValid()||t[n][e](r))&&(r=t[n]);return r}function yH(){var e=[].slice.call(arguments,0);return D1("isBefore",e)}function bH(){var e=[].slice.call(arguments,0);return D1("isAfter",e)}var jH=function(){return Date.now?Date.now():+new Date},go=["year","quarter","month","week","day","hour","minute","second","millisecond"];function NH(e){var t,r=!1,n,a=go.length;for(t in e)if(Fe(e,t)&&!(pt.call(go,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return!1;for(n=0;n<a;++n)if(e[go[n]]){if(r)return!1;parseFloat(e[go[n]])!==_e(e[go[n]])&&(r=!0)}return!0}function wH(){return this._isValid}function SH(){return ps(NaN)}function cm(e){var t=sg(e),r=t.year||0,n=t.quarter||0,a=t.month||0,i=t.week||t.isoWeek||0,o=t.day||0,l=t.hour||0,c=t.minute||0,d=t.second||0,u=t.millisecond||0;this._isValid=NH(t),this._milliseconds=+u+d*1e3+c*6e4+l*1e3*60*60,this._days=+o+i*7,this._months=+a+n*3+r*12,this._data={},this._locale=hn(),this._bubble()}function ad(e){return e instanceof cm}function Xf(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function CH(e,t,r){var n=Math.min(e.length,t.length),a=Math.abs(e.length-t.length),i=0,o;for(o=0;o<n;o++)_e(e[o])!==_e(t[o])&&i++;return i+a}function A1(e,t){pe(e,0,0,function(){var r=this.utcOffset(),n="+";return r<0&&(r=-r,n="-"),n+Ps(~~(r/60),2)+t+Ps(~~r%60,2)})}A1("Z",":");A1("ZZ","");ue("Z",im);ue("ZZ",im);Ye(["Z","ZZ"],function(e,t,r){r._useUTC=!0,r._tzm=pg(im,e)});var EH=/([\+\-]|\d\d)/gi;function pg(e,t){var r=(t||"").match(e),n,a,i;return r===null?null:(n=r[r.length-1]||[],a=(n+"").match(EH)||["-",0,0],i=+(a[1]*60)+_e(a[2]),i===0?0:a[0]==="+"?i:-i)}function xg(e,t){var r,n;return t._isUTC?(r=t.clone(),n=(ms(e)||Ql(e)?e.valueOf():st(e).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+n),ne.updateOffset(r,!1),r):st(e).local()}function Qf(e){return-Math.round(e._d.getTimezoneOffset())}ne.updateOffset=function(){};function kH(e,t,r){var n=this._offset||0,a;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=pg(im,e),e===null)return this}else Math.abs(e)<16&&!r&&(e=e*60);return!this._isUTC&&t&&(a=Qf(this)),this._offset=e,this._isUTC=!0,a!=null&&this.add(a,"m"),n!==e&&(!t||this._changeInProgress?O1(this,ps(e-n,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,ne.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?n:Qf(this)}function DH(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function AH(e){return this.utcOffset(0,e)}function TH(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Qf(this),"m")),this}function _H(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=pg(XU,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function OH(e){return this.isValid()?(e=e?st(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function MH(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function RH(){if(!or(this._isDSTShifted))return this._isDSTShifted;var e={},t;return eg(e,this),e=E1(e),e._a?(t=e._isUTC?Bs(e._a):st(e._a),this._isDSTShifted=this.isValid()&&CH(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function PH(){return this.isValid()?!this._isUTC:!1}function LH(){return this.isValid()?this._isUTC:!1}function T1(){return this.isValid()?this._isUTC&&this._offset===0:!1}var IH=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,$H=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function ps(e,t){var r=e,n=null,a,i,o;return ad(e)?r={ms:e._milliseconds,d:e._days,M:e._months}:dn(e)||!isNaN(+e)?(r={},t?r[t]=+e:r.milliseconds=+e):(n=IH.exec(e))?(a=n[1]==="-"?-1:1,r={y:0,d:_e(n[ks])*a,h:_e(n[Ct])*a,m:_e(n[is])*a,s:_e(n[Zs])*a,ms:_e(Xf(n[ga]*1e3))*a}):(n=$H.exec(e))?(a=n[1]==="-"?-1:1,r={y:ia(n[2],a),M:ia(n[3],a),w:ia(n[4],a),d:ia(n[5],a),h:ia(n[6],a),m:ia(n[7],a),s:ia(n[8],a)}):r==null?r={}:typeof r=="object"&&("from"in r||"to"in r)&&(o=FH(st(r.from),st(r.to)),r={},r.ms=o.milliseconds,r.M=o.months),i=new cm(r),ad(e)&&Fe(e,"_locale")&&(i._locale=e._locale),ad(e)&&Fe(e,"_isValid")&&(i._isValid=e._isValid),i}ps.fn=cm.prototype;ps.invalid=SH;function ia(e,t){var r=e&&parseFloat(e.replace(",","."));return(isNaN(r)?0:r)*t}function Ky(e,t){var r={};return r.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(r.months,"M").isAfter(t)&&--r.months,r.milliseconds=+t-+e.clone().add(r.months,"M"),r}function FH(e,t){var r;return e.isValid()&&t.isValid()?(t=xg(t,e),e.isBefore(t)?r=Ky(e,t):(r=Ky(t,e),r.milliseconds=-r.milliseconds,r.months=-r.months),r):{milliseconds:0,months:0}}function _1(e,t){return function(r,n){var a,i;return n!==null&&!isNaN(+n)&&(i1(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=r,r=n,n=i),a=ps(r,n),O1(this,a,e),this}}function O1(e,t,r,n){var a=t._milliseconds,i=Xf(t._days),o=Xf(t._months);e.isValid()&&(n=n??!0,o&&x1(e,El(e,"Month")+o*r),i&&h1(e,"Date",El(e,"Date")+i*r),a&&e._d.setTime(e._d.valueOf()+a*r),n&&ne.updateOffset(e,i||o))}var BH=_1(1,"add"),zH=_1(-1,"subtract");function M1(e){return typeof e=="string"||e instanceof String}function UH(e){return ms(e)||Ql(e)||M1(e)||dn(e)||HH(e)||VH(e)||e===null||e===void 0}function VH(e){var t=wa(e)&&!Jx(e),r=!1,n=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],a,i,o=n.length;for(a=0;a<o;a+=1)i=n[a],r=r||Fe(e,i);return t&&r}function HH(e){var t=us(e),r=!1;return t&&(r=e.filter(function(n){return!dn(n)&&M1(e)}).length===0),t&&r}function WH(e){var t=wa(e)&&!Jx(e),r=!1,n=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],a,i;for(a=0;a<n.length;a+=1)i=n[a],r=r||Fe(e,i);return t&&r}function YH(e,t){var r=e.diff(t,"days",!0);return r<-6?"sameElse":r<-1?"lastWeek":r<0?"lastDay":r<1?"sameDay":r<2?"nextDay":r<7?"nextWeek":"sameElse"}function qH(e,t){arguments.length===1&&(arguments[0]?UH(arguments[0])?(e=arguments[0],t=void 0):WH(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var r=e||st(),n=xg(r,this).startOf("day"),a=ne.calendarFormat(this,n)||"sameElse",i=t&&(zs(t[a])?t[a].call(this,r):t[a]);return this.format(i||this.localeData().calendar(a,this,st(r)))}function GH(){return new Jl(this)}function KH(e,t){var r=ms(e)?e:st(e);return this.isValid()&&r.isValid()?(t=Xr(t)||"millisecond",t==="millisecond"?this.valueOf()>r.valueOf():r.valueOf()<this.clone().startOf(t).valueOf()):!1}function XH(e,t){var r=ms(e)?e:st(e);return this.isValid()&&r.isValid()?(t=Xr(t)||"millisecond",t==="millisecond"?this.valueOf()<r.valueOf():this.clone().endOf(t).valueOf()<r.valueOf()):!1}function QH(e,t,r,n){var a=ms(e)?e:st(e),i=ms(t)?t:st(t);return this.isValid()&&a.isValid()&&i.isValid()?(n=n||"()",(n[0]==="("?this.isAfter(a,r):!this.isBefore(a,r))&&(n[1]===")"?this.isBefore(i,r):!this.isAfter(i,r))):!1}function JH(e,t){var r=ms(e)?e:st(e),n;return this.isValid()&&r.isValid()?(t=Xr(t)||"millisecond",t==="millisecond"?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf())):!1}function ZH(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function eW(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function tW(e,t,r){var n,a,i;if(!this.isValid())return NaN;if(n=xg(e,this),!n.isValid())return NaN;switch(a=(n.utcOffset()-this.utcOffset())*6e4,t=Xr(t),t){case"year":i=id(this,n)/12;break;case"month":i=id(this,n);break;case"quarter":i=id(this,n)/3;break;case"second":i=(this-n)/1e3;break;case"minute":i=(this-n)/6e4;break;case"hour":i=(this-n)/36e5;break;case"day":i=(this-n-a)/864e5;break;case"week":i=(this-n-a)/6048e5;break;default:i=this-n}return r?i:$r(i)}function id(e,t){if(e.date()<t.date())return-id(t,e);var r=(t.year()-e.year())*12+(t.month()-e.month()),n=e.clone().add(r,"months"),a,i;return t-n<0?(a=e.clone().add(r-1,"months"),i=(t-n)/(n-a)):(a=e.clone().add(r+1,"months"),i=(t-n)/(a-n)),-(r+i)||0}ne.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";ne.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function rW(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function sW(e){if(!this.isValid())return null;var t=e!==!0,r=t?this.clone().utc():this;return r.year()<0||r.year()>9999?nd(r,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):zs(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",nd(r,"Z")):nd(r,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function nW(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",r,n,a,i;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z"),r="["+e+'("]',n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",a="-MM-DD[T]HH:mm:ss.SSS",i=t+'[")]',this.format(r+n+a+i)}function aW(e){e||(e=this.isUtc()?ne.defaultFormatUtc:ne.defaultFormat);var t=nd(this,e);return this.localeData().postformat(t)}function iW(e,t){return this.isValid()&&(ms(e)&&e.isValid()||st(e).isValid())?ps({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function oW(e){return this.from(st(),e)}function lW(e,t){return this.isValid()&&(ms(e)&&e.isValid()||st(e).isValid())?ps({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function cW(e){return this.to(st(),e)}function R1(e){var t;return e===void 0?this._locale._abbr:(t=hn(e),t!=null&&(this._locale=t),this)}var P1=Kr("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function L1(){return this._locale}var eu=1e3,hi=60*eu,tu=60*hi,I1=(365*400+97)*24*tu;function fi(e,t){return(e%t+t)%t}function $1(e,t,r){return e<100&&e>=0?new Date(e+400,t,r)-I1:new Date(e,t,r).valueOf()}function F1(e,t,r){return e<100&&e>=0?Date.UTC(e+400,t,r)-I1:Date.UTC(e,t,r)}function dW(e){var t,r;if(e=Xr(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(r=this._isUTC?F1:$1,e){case"year":t=r(this.year(),0,1);break;case"quarter":t=r(this.year(),this.month()-this.month()%3,1);break;case"month":t=r(this.year(),this.month(),1);break;case"week":t=r(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=r(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=fi(t+(this._isUTC?0:this.utcOffset()*hi),tu);break;case"minute":t=this._d.valueOf(),t-=fi(t,hi);break;case"second":t=this._d.valueOf(),t-=fi(t,eu);break}return this._d.setTime(t),ne.updateOffset(this,!0),this}function uW(e){var t,r;if(e=Xr(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(r=this._isUTC?F1:$1,e){case"year":t=r(this.year()+1,0,1)-1;break;case"quarter":t=r(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=r(this.year(),this.month()+1,1)-1;break;case"week":t=r(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=r(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=tu-fi(t+(this._isUTC?0:this.utcOffset()*hi),tu)-1;break;case"minute":t=this._d.valueOf(),t+=hi-fi(t,hi)-1;break;case"second":t=this._d.valueOf(),t+=eu-fi(t,eu)-1;break}return this._d.setTime(t),ne.updateOffset(this,!0),this}function mW(){return this._d.valueOf()-(this._offset||0)*6e4}function hW(){return Math.floor(this.valueOf()/1e3)}function fW(){return new Date(this.valueOf())}function pW(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function xW(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function gW(){return this.isValid()?this.toISOString():null}function vW(){return Zx(this)}function yW(){return Tn({},Ne(this))}function bW(){return Ne(this).overflow}function jW(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}pe("N",0,0,"eraAbbr");pe("NN",0,0,"eraAbbr");pe("NNN",0,0,"eraAbbr");pe("NNNN",0,0,"eraName");pe("NNNNN",0,0,"eraNarrow");pe("y",["y",1],"yo","eraYear");pe("y",["yy",2],0,"eraYear");pe("y",["yyy",3],0,"eraYear");pe("y",["yyyy",4],0,"eraYear");ue("N",gg);ue("NN",gg);ue("NNN",gg);ue("NNNN",OW);ue("NNNNN",MW);Ye(["N","NN","NNN","NNNN","NNNNN"],function(e,t,r,n){var a=r._locale.erasParse(e,n,r._strict);a?Ne(r).era=a:Ne(r).invalidEra=e});ue("y",Gi);ue("yy",Gi);ue("yyy",Gi);ue("yyyy",Gi);ue("yo",RW);Ye(["y","yy","yyy","yyyy"],Yt);Ye(["yo"],function(e,t,r,n){var a;r._locale._eraYearOrdinalRegex&&(a=e.match(r._locale._eraYearOrdinalRegex)),r._locale.eraYearOrdinalParse?t[Yt]=r._locale.eraYearOrdinalParse(e,a):t[Yt]=parseInt(e,10)});function NW(e,t){var r,n,a,i=this._eras||hn("en")._eras;for(r=0,n=i.length;r<n;++r){switch(typeof i[r].since){case"string":a=ne(i[r].since).startOf("day"),i[r].since=a.valueOf();break}switch(typeof i[r].until){case"undefined":i[r].until=1/0;break;case"string":a=ne(i[r].until).startOf("day").valueOf(),i[r].until=a.valueOf();break}}return i}function wW(e,t,r){var n,a,i=this.eras(),o,l,c;for(e=e.toUpperCase(),n=0,a=i.length;n<a;++n)if(o=i[n].name.toUpperCase(),l=i[n].abbr.toUpperCase(),c=i[n].narrow.toUpperCase(),r)switch(t){case"N":case"NN":case"NNN":if(l===e)return i[n];break;case"NNNN":if(o===e)return i[n];break;case"NNNNN":if(c===e)return i[n];break}else if([o,l,c].indexOf(e)>=0)return i[n]}function SW(e,t){var r=e.since<=e.until?1:-1;return t===void 0?ne(e.since).year():ne(e.since).year()+(t-e.offset)*r}function CW(){var e,t,r,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e)if(r=this.clone().startOf("day").valueOf(),n[e].since<=r&&r<=n[e].until||n[e].until<=r&&r<=n[e].since)return n[e].name;return""}function EW(){var e,t,r,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e)if(r=this.clone().startOf("day").valueOf(),n[e].since<=r&&r<=n[e].until||n[e].until<=r&&r<=n[e].since)return n[e].narrow;return""}function kW(){var e,t,r,n=this.localeData().eras();for(e=0,t=n.length;e<t;++e)if(r=this.clone().startOf("day").valueOf(),n[e].since<=r&&r<=n[e].until||n[e].until<=r&&r<=n[e].since)return n[e].abbr;return""}function DW(){var e,t,r,n,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e)if(r=a[e].since<=a[e].until?1:-1,n=this.clone().startOf("day").valueOf(),a[e].since<=n&&n<=a[e].until||a[e].until<=n&&n<=a[e].since)return(this.year()-ne(a[e].since).year())*r+a[e].offset;return this.year()}function AW(e){return Fe(this,"_erasNameRegex")||vg.call(this),e?this._erasNameRegex:this._erasRegex}function TW(e){return Fe(this,"_erasAbbrRegex")||vg.call(this),e?this._erasAbbrRegex:this._erasRegex}function _W(e){return Fe(this,"_erasNarrowRegex")||vg.call(this),e?this._erasNarrowRegex:this._erasRegex}function gg(e,t){return t.erasAbbrRegex(e)}function OW(e,t){return t.erasNameRegex(e)}function MW(e,t){return t.erasNarrowRegex(e)}function RW(e,t){return t._eraYearOrdinalRegex||Gi}function vg(){var e=[],t=[],r=[],n=[],a,i,o,l,c,d=this.eras();for(a=0,i=d.length;a<i;++a)o=tn(d[a].name),l=tn(d[a].abbr),c=tn(d[a].narrow),t.push(o),e.push(l),r.push(c),n.push(o),n.push(l),n.push(c);this._erasRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+r.join("|")+")","i")}pe(0,["gg",2],0,function(){return this.weekYear()%100});pe(0,["GG",2],0,function(){return this.isoWeekYear()%100});function dm(e,t){pe(0,[e,e.length],0,t)}dm("gggg","weekYear");dm("ggggg","weekYear");dm("GGGG","isoWeekYear");dm("GGGGG","isoWeekYear");ue("G",am);ue("g",am);ue("GG",nt,Dr);ue("gg",nt,Dr);ue("GGGG",ag,ng);ue("gggg",ag,ng);ue("GGGGG",nm,rm);ue("ggggg",nm,rm);ec(["gggg","ggggg","GGGG","GGGGG"],function(e,t,r,n){t[n.substr(0,2)]=_e(e)});ec(["gg","GG"],function(e,t,r,n){t[n]=ne.parseTwoDigitYear(e)});function PW(e){return B1.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function LW(e){return B1.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function IW(){return rn(this.year(),1,4)}function $W(){return rn(this.isoWeekYear(),1,4)}function FW(){var e=this.localeData()._week;return rn(this.year(),e.dow,e.doy)}function BW(){var e=this.localeData()._week;return rn(this.weekYear(),e.dow,e.doy)}function B1(e,t,r,n,a){var i;return e==null?Dl(this,n,a).year:(i=rn(e,n,a),t>i&&(t=i),zW.call(this,e,t,r,n,a))}function zW(e,t,r,n,a){var i=y1(e,t,r,n,a),o=kl(i.year,0,i.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}pe("Q",0,"Qo","quarter");ue("Q",l1);Ye("Q",function(e,t){t[Js]=(_e(e)-1)*3});function UW(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}pe("D",["DD",2],"Do","date");ue("D",nt,Ki);ue("DD",nt,Dr);ue("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});Ye(["D","DD"],ks);Ye("Do",function(e,t){t[ks]=_e(e.match(nt)[0])});var z1=Xi("Date",!0);pe("DDD",["DDDD",3],"DDDo","dayOfYear");ue("DDD",sm);ue("DDDD",c1);Ye(["DDD","DDDD"],function(e,t,r){r._dayOfYear=_e(e)});function VW(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}pe("m",["mm",2],0,"minute");ue("m",nt,ig);ue("mm",nt,Dr);Ye(["m","mm"],is);var HW=Xi("Minutes",!1);pe("s",["ss",2],0,"second");ue("s",nt,ig);ue("ss",nt,Dr);Ye(["s","ss"],Zs);var WW=Xi("Seconds",!1);pe("S",0,0,function(){return~~(this.millisecond()/100)});pe(0,["SS",2],0,function(){return~~(this.millisecond()/10)});pe(0,["SSS",3],0,"millisecond");pe(0,["SSSS",4],0,function(){return this.millisecond()*10});pe(0,["SSSSS",5],0,function(){return this.millisecond()*100});pe(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});pe(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});pe(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});pe(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});ue("S",sm,l1);ue("SS",sm,Dr);ue("SSS",sm,c1);var _n,U1;for(_n="SSSS";_n.length<=9;_n+="S")ue(_n,Gi);function YW(e,t){t[ga]=_e(("0."+e)*1e3)}for(_n="S";_n.length<=9;_n+="S")Ye(_n,YW);U1=Xi("Milliseconds",!1);pe("z",0,0,"zoneAbbr");pe("zz",0,0,"zoneName");function qW(){return this._isUTC?"UTC":""}function GW(){return this._isUTC?"Coordinated Universal Time":""}var se=Jl.prototype;se.add=BH;se.calendar=qH;se.clone=GH;se.diff=tW;se.endOf=uW;se.format=aW;se.from=iW;se.fromNow=oW;se.to=lW;se.toNow=cW;se.get=nV;se.invalidAt=bW;se.isAfter=KH;se.isBefore=XH;se.isBetween=QH;se.isSame=JH;se.isSameOrAfter=ZH;se.isSameOrBefore=eW;se.isValid=vW;se.lang=P1;se.locale=R1;se.localeData=L1;se.max=vH;se.min=gH;se.parsingFlags=yW;se.set=aV;se.startOf=dW;se.subtract=zH;se.toArray=pW;se.toObject=xW;se.toDate=fW;se.toISOString=sW;se.inspect=nW;typeof Symbol<"u"&&Symbol.for!=null&&(se[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});se.toJSON=gW;se.toString=rW;se.unix=hW;se.valueOf=mW;se.creationData=jW;se.eraName=CW;se.eraNarrow=EW;se.eraAbbr=kW;se.eraYear=DW;se.year=m1;se.isLeapYear=sV;se.weekYear=PW;se.isoWeekYear=LW;se.quarter=se.quarters=UW;se.month=g1;se.daysInMonth=fV;se.week=se.weeks=NV;se.isoWeek=se.isoWeeks=wV;se.weeksInYear=FW;se.weeksInWeekYear=BW;se.isoWeeksInYear=IW;se.isoWeeksInISOWeekYear=$W;se.date=z1;se.day=se.days=LV;se.weekday=IV;se.isoWeekday=$V;se.dayOfYear=VW;se.hour=se.hours=WV;se.minute=se.minutes=HW;se.second=se.seconds=WW;se.millisecond=se.milliseconds=U1;se.utcOffset=kH;se.utc=AH;se.local=TH;se.parseZone=_H;se.hasAlignedHourOffset=OH;se.isDST=MH;se.isLocal=PH;se.isUtcOffset=LH;se.isUtc=T1;se.isUTC=T1;se.zoneAbbr=qW;se.zoneName=GW;se.dates=Kr("dates accessor is deprecated. Use date instead.",z1);se.months=Kr("months accessor is deprecated. Use month instead",g1);se.years=Kr("years accessor is deprecated. Use year instead",m1);se.zone=Kr("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",DH);se.isDSTShifted=Kr("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",RH);function KW(e){return st(e*1e3)}function XW(){return st.apply(null,arguments).parseZone()}function V1(e){return e}var Be=tg.prototype;Be.calendar=PU;Be.longDateFormat=FU;Be.invalidDate=zU;Be.ordinal=HU;Be.preparse=V1;Be.postformat=V1;Be.relativeTime=YU;Be.pastFuture=qU;Be.set=MU;Be.eras=NW;Be.erasParse=wW;Be.erasConvertYear=SW;Be.erasAbbrRegex=TW;Be.erasNameRegex=AW;Be.erasNarrowRegex=_W;Be.months=dV;Be.monthsShort=uV;Be.monthsParse=hV;Be.monthsRegex=xV;Be.monthsShortRegex=pV;Be.week=vV;Be.firstDayOfYear=jV;Be.firstDayOfWeek=bV;Be.weekdays=_V;Be.weekdaysMin=MV;Be.weekdaysShort=OV;Be.weekdaysParse=PV;Be.weekdaysRegex=FV;Be.weekdaysShortRegex=BV;Be.weekdaysMinRegex=zV;Be.isPM=VV;Be.meridiem=YV;function ru(e,t,r,n){var a=hn(),i=Bs().set(n,t);return a[r](i,e)}function H1(e,t,r){if(dn(e)&&(t=e,e=void 0),e=e||"",t!=null)return ru(e,t,r,"month");var n,a=[];for(n=0;n<12;n++)a[n]=ru(e,n,r,"month");return a}function yg(e,t,r,n){typeof e=="boolean"?(dn(t)&&(r=t,t=void 0),t=t||""):(t=e,r=t,e=!1,dn(t)&&(r=t,t=void 0),t=t||"");var a=hn(),i=e?a._week.dow:0,o,l=[];if(r!=null)return ru(t,(r+i)%7,n,"day");for(o=0;o<7;o++)l[o]=ru(t,(o+i)%7,n,"day");return l}function QW(e,t){return H1(e,t,"months")}function JW(e,t){return H1(e,t,"monthsShort")}function ZW(e,t,r){return yg(e,t,r,"weekdays")}function eY(e,t,r){return yg(e,t,r,"weekdaysShort")}function tY(e,t,r){return yg(e,t,r,"weekdaysMin")}zn("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,r=_e(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+r}});ne.lang=Kr("moment.lang is deprecated. Use moment.locale instead.",zn);ne.langData=Kr("moment.langData is deprecated. Use moment.localeData instead.",hn);var Ws=Math.abs;function rY(){var e=this._data;return this._milliseconds=Ws(this._milliseconds),this._days=Ws(this._days),this._months=Ws(this._months),e.milliseconds=Ws(e.milliseconds),e.seconds=Ws(e.seconds),e.minutes=Ws(e.minutes),e.hours=Ws(e.hours),e.months=Ws(e.months),e.years=Ws(e.years),this}function W1(e,t,r,n){var a=ps(t,r);return e._milliseconds+=n*a._milliseconds,e._days+=n*a._days,e._months+=n*a._months,e._bubble()}function sY(e,t){return W1(this,e,t,1)}function nY(e,t){return W1(this,e,t,-1)}function Xy(e){return e<0?Math.floor(e):Math.ceil(e)}function aY(){var e=this._milliseconds,t=this._days,r=this._months,n=this._data,a,i,o,l,c;return e>=0&&t>=0&&r>=0||e<=0&&t<=0&&r<=0||(e+=Xy(Jf(r)+t)*864e5,t=0,r=0),n.milliseconds=e%1e3,a=$r(e/1e3),n.seconds=a%60,i=$r(a/60),n.minutes=i%60,o=$r(i/60),n.hours=o%24,t+=$r(o/24),c=$r(Y1(t)),r+=c,t-=Xy(Jf(c)),l=$r(r/12),r%=12,n.days=t,n.months=r,n.years=l,this}function Y1(e){return e*4800/146097}function Jf(e){return e*146097/4800}function iY(e){if(!this.isValid())return NaN;var t,r,n=this._milliseconds;if(e=Xr(e),e==="month"||e==="quarter"||e==="year")switch(t=this._days+n/864e5,r=this._months+Y1(t),e){case"month":return r;case"quarter":return r/3;case"year":return r/12}else switch(t=this._days+Math.round(Jf(this._months)),e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return t*24+n/36e5;case"minute":return t*1440+n/6e4;case"second":return t*86400+n/1e3;case"millisecond":return Math.floor(t*864e5)+n;default:throw new Error("Unknown unit "+e)}}function fn(e){return function(){return this.as(e)}}var q1=fn("ms"),oY=fn("s"),lY=fn("m"),cY=fn("h"),dY=fn("d"),uY=fn("w"),mY=fn("M"),hY=fn("Q"),fY=fn("y"),pY=q1;function xY(){return ps(this)}function gY(e){return e=Xr(e),this.isValid()?this[e+"s"]():NaN}function Ba(e){return function(){return this.isValid()?this._data[e]:NaN}}var vY=Ba("milliseconds"),yY=Ba("seconds"),bY=Ba("minutes"),jY=Ba("hours"),NY=Ba("days"),wY=Ba("months"),SY=Ba("years");function CY(){return $r(this.days()/7)}var Gs=Math.round,ai={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function EY(e,t,r,n,a){return a.relativeTime(t||1,!!r,e,n)}function kY(e,t,r,n){var a=ps(e).abs(),i=Gs(a.as("s")),o=Gs(a.as("m")),l=Gs(a.as("h")),c=Gs(a.as("d")),d=Gs(a.as("M")),u=Gs(a.as("w")),m=Gs(a.as("y")),h=i<=r.ss&&["s",i]||i<r.s&&["ss",i]||o<=1&&["m"]||o<r.m&&["mm",o]||l<=1&&["h"]||l<r.h&&["hh",l]||c<=1&&["d"]||c<r.d&&["dd",c];return r.w!=null&&(h=h||u<=1&&["w"]||u<r.w&&["ww",u]),h=h||d<=1&&["M"]||d<r.M&&["MM",d]||m<=1&&["y"]||["yy",m],h[2]=t,h[3]=+e>0,h[4]=n,EY.apply(null,h)}function DY(e){return e===void 0?Gs:typeof e=="function"?(Gs=e,!0):!1}function AY(e,t){return ai[e]===void 0?!1:t===void 0?ai[e]:(ai[e]=t,e==="s"&&(ai.ss=t-1),!0)}function TY(e,t){if(!this.isValid())return this.localeData().invalidDate();var r=!1,n=ai,a,i;return typeof e=="object"&&(t=e,e=!1),typeof e=="boolean"&&(r=e),typeof t=="object"&&(n=Object.assign({},ai,t),t.s!=null&&t.ss==null&&(n.ss=t.s-1)),a=this.localeData(),i=kY(this,!r,n,a),r&&(i=a.pastFuture(+this,i)),a.postformat(i)}var vh=Math.abs;function Ha(e){return(e>0)-(e<0)||+e}function um(){if(!this.isValid())return this.localeData().invalidDate();var e=vh(this._milliseconds)/1e3,t=vh(this._days),r=vh(this._months),n,a,i,o,l=this.asSeconds(),c,d,u,m;return l?(n=$r(e/60),a=$r(n/60),e%=60,n%=60,i=$r(r/12),r%=12,o=e?e.toFixed(3).replace(/\.?0+$/,""):"",c=l<0?"-":"",d=Ha(this._months)!==Ha(l)?"-":"",u=Ha(this._days)!==Ha(l)?"-":"",m=Ha(this._milliseconds)!==Ha(l)?"-":"",c+"P"+(i?d+i+"Y":"")+(r?d+r+"M":"")+(t?u+t+"D":"")+(a||n||e?"T":"")+(a?m+a+"H":"")+(n?m+n+"M":"")+(e?m+o+"S":"")):"P0D"}var Re=cm.prototype;Re.isValid=wH;Re.abs=rY;Re.add=sY;Re.subtract=nY;Re.as=iY;Re.asMilliseconds=q1;Re.asSeconds=oY;Re.asMinutes=lY;Re.asHours=cY;Re.asDays=dY;Re.asWeeks=uY;Re.asMonths=mY;Re.asQuarters=hY;Re.asYears=fY;Re.valueOf=pY;Re._bubble=aY;Re.clone=xY;Re.get=gY;Re.milliseconds=vY;Re.seconds=yY;Re.minutes=bY;Re.hours=jY;Re.days=NY;Re.weeks=CY;Re.months=wY;Re.years=SY;Re.humanize=TY;Re.toISOString=um;Re.toString=um;Re.toJSON=um;Re.locale=R1;Re.localeData=L1;Re.toIsoString=Kr("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",um);Re.lang=P1;pe("X",0,0,"unix");pe("x",0,0,"valueOf");ue("x",am);ue("X",QU);Ye("X",function(e,t,r){r._d=new Date(parseFloat(e)*1e3)});Ye("x",function(e,t,r){r._d=new Date(_e(e))});//! moment.js
ne.version="2.30.1";_U(st);ne.fn=se;ne.min=yH;ne.max=bH;ne.now=jH;ne.utc=Bs;ne.unix=KW;ne.months=QW;ne.isDate=Ql;ne.locale=zn;ne.invalid=tm;ne.duration=ps;ne.isMoment=ms;ne.weekdays=ZW;ne.parseZone=XW;ne.localeData=hn;ne.isDuration=ad;ne.monthsShort=JW;ne.weekdaysMin=tY;ne.defineLocale=ug;ne.updateLocale=XV;ne.locales=QV;ne.weekdaysShort=eY;ne.normalizeUnits=Xr;ne.relativeTimeRounding=DY;ne.relativeTimeThreshold=AY;ne.calendarFormat=YH;ne.prototype=se;ne.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const _Y=e=>{const t=()=>{e.onNavigate("TODAY")},r=()=>{e.onNavigate("PREV")},n=()=>{e.onNavigate("NEXT")},a={month:"Mes",week:"Semana",day:"Da",agenda:"Agenda"};return s.jsxs("div",{className:"rbc-toolbar",role:"toolbar","aria-label":"Controles del calendario",children:[s.jsxs("div",{className:"rbc-btn-group",role:"group","aria-label":"Navegacin del calendario",children:[s.jsx("button",{type:"button",onClick:r,className:"rbc-btn","aria-label":"Mes anterior",children:s.jsx("span",{"aria-hidden":"true",children:""})}),s.jsx("button",{type:"button",onClick:t,className:"rbc-btn rbc-active","aria-label":"Ir a hoy",children:"Hoy"}),s.jsx("button",{type:"button",onClick:n,className:"rbc-btn","aria-label":"Mes siguiente",children:s.jsx("span",{"aria-hidden":"true",children:""})})]}),s.jsx("span",{className:"rbc-toolbar-label",role:"heading","aria-level":2,children:e.label}),s.jsx("div",{className:"rbc-btn-group",role:"group","aria-label":"Vistas del calendario",children:e.views.map(i=>s.jsx("button",{type:"button",onClick:()=>e.onView(i),className:`rbc-btn ${e.view===i?"rbc-active":""}`,"aria-pressed":e.view===i,"aria-label":`Ver ${a[i]}`,children:a[i]},i))})]})},OY=TU(ne),MY=()=>{const[e,t]=p.useState([]),[r,n]=p.useState(!0),[a,i]=p.useState(null),[o,l]=p.useState(null),[c,d]=p.useState(null),[u,m]=p.useState(!1),[h,g]=p.useState({date:"",location:"",notes:""}),[j,y]=p.useState(!1),[v,f]=p.useState(!1),[x,b]=p.useState(!1),[N,w]=p.useState({clientName:"",dateFrom:"",dateTo:"",status:"",consultationType:""}),[S,C]=p.useState([]),[k,A]=p.useState("calendar");p.useEffect(()=>{(async()=>{try{n(!0);const T=localStorage.getItem("token"),R=await Ie.get("/api/appointments",{headers:{Authorization:`Bearer ${T}`},params:{_t:Date.now()}}),B=Array.isArray(R.data)?R.data:[];t(B),i(null)}catch{i("Error al cargar las citas"),t([])}finally{n(!1)}})()},[]),p.useEffect(()=>{const _=e.filter(T=>{const R=T.type==="VISITOR"?T.fullName:T.client.user.name;return!(N.clientName&&R&&!R.toLowerCase().includes(N.clientName.toLowerCase())||N.dateFrom&&ne(T.date).isBefore(ne(N.dateFrom))||N.dateTo&&ne(T.date).isAfter(ne(N.dateTo).endOf("day"))||N.status&&T.status!==N.status||N.consultationType&&T.consultationType!==N.consultationType)});C(_)},[e,N]);const O=p.useMemo(()=>{const _=Array.isArray(S)?S:[],T=_.length,R=_.filter(U=>ne(U.date).isAfter(ne())).length,B=_.filter(U=>ne(U.date).isBefore(ne())).length;return{total:T,upcoming:R,past:B}},[S]),D=(Array.isArray(S)?S:[]).map(_=>{const T=_.type==="VISITOR"?_.fullName:_.client.user.name;return{id:_.id,title:`${T} - ${ne(_.date).format("HH:mm")}`,start:new Date(_.date),end:ne(_.date).add(1,"hour").toDate(),resource:_}}),I=_=>{d(_),g({date:ne(_.date).format("YYYY-MM-DDTHH:mm"),location:_.location||"",notes:""}),m(!0)},M=async _=>{var T,R;if(_.preventDefault(),!!c)try{y(!0);const B=localStorage.getItem("token"),U=await Ie.put(`/api/appointments/${c.id}/reschedule`,h,{headers:{Authorization:`Bearer ${B}`}});t(X=>X.map(F=>F.id===c.id?U.data:F)),l("Cita reprogramada exitosamente. Se ha enviado una notificacin al cliente."),m(!1),d(null),setTimeout(()=>l(null),5e3)}catch(B){i(((R=(T=B.response)==null?void 0:T.data)==null?void 0:R.message)||"Error al reprogramar la cita")}finally{y(!1)}},E=async()=>{var _,T;if(c&&window.confirm("Ests seguro de que quieres eliminar esta cita? Esta accin no se puede deshacer."))try{f(!0);const R=localStorage.getItem("token");await Ie.delete(`/api/appointments/${c.id}`,{headers:{Authorization:`Bearer ${R}`}}),t(B=>B.filter(U=>U.id!==c.id)),l("Cita eliminada exitosamente."),d(null),setTimeout(()=>l(null),5e3)}catch(R){i(((T=(_=R.response)==null?void 0:_.data)==null?void 0:T.message)||"Error al eliminar la cita")}finally{f(!1)}},L=_=>{g(T=>({...T,[_.target.name]:_.target.value}))},V=_=>{w(T=>({...T,[_.target.name]:_.target.value}))},G=()=>{w({clientName:"",dateFrom:"",dateTo:"",status:"",consultationType:""})},W=p.useMemo(()=>e.filter(T=>T.consultationType).map(T=>T.consultationType).filter((T,R,B)=>B.indexOf(T)===R),[e]);return s.jsx("div",{className:"py-6",children:s.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Calendario de Citas"}),o&&s.jsx("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-md",children:s.jsx("p",{className:"text-green-700 text-sm",children:o})}),a&&s.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-md",children:s.jsx("p",{className:"text-red-700 text-sm",children:a})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[s.jsxs("div",{className:"bg-white p-4 rounded shadow text-center",children:[s.jsx("div",{className:"text-gray-500 text-sm",children:"Total Citas"}),s.jsx("div",{className:"text-2xl font-bold",children:O.total})]}),s.jsxs("div",{className:"bg-white p-4 rounded shadow text-center",children:[s.jsx("div",{className:"text-gray-500 text-sm",children:"Prximas"}),s.jsx("div",{className:"text-2xl font-bold",children:O.upcoming})]}),s.jsxs("div",{className:"bg-white p-4 rounded shadow text-center",children:[s.jsx("div",{className:"text-gray-500 text-sm",children:"Pasadas"}),s.jsx("div",{className:"text-2xl font-bold",children:O.past})]})]}),s.jsxs("div",{className:"bg-white rounded shadow p-4 mb-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Filtros de Bsqueda"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>b(!x),className:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500","aria-expanded":x,"aria-controls":"filters-panel","aria-label":x?"Ocultar filtros de bsqueda":"Mostrar filtros de bsqueda",children:x?"Ocultar Filtros":"Mostrar Filtros"}),s.jsx("button",{onClick:G,className:"px-3 py-1 text-sm bg-gray-600 text-white rounded hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500","aria-label":"Limpiar todos los filtros aplicados",children:"Limpiar Filtros"})]})]}),x&&s.jsxs("div",{id:"filters-panel",role:"region","aria-label":"Panel de filtros avanzados",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"clientName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre del Cliente"}),s.jsx("input",{id:"clientName",type:"text",name:"clientName",value:N.clientName,onChange:V,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Buscar por nombre...","aria-describedby":"clientName-help"}),s.jsx("div",{id:"clientName-help",className:"sr-only",children:"Escribe el nombre del cliente para filtrar las citas"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"dateFrom",className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha Desde"}),s.jsx("input",{id:"dateFrom",type:"date",name:"dateFrom",value:N.dateFrom,onChange:V,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","aria-describedby":"dateFrom-help"}),s.jsx("div",{id:"dateFrom-help",className:"sr-only",children:"Selecciona la fecha desde la cual quieres ver citas"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"dateTo",className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha Hasta"}),s.jsx("input",{id:"dateTo",type:"date",name:"dateTo",value:N.dateTo,onChange:V,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","aria-describedby":"dateTo-help"}),s.jsx("div",{id:"dateTo-help",className:"sr-only",children:"Selecciona la fecha hasta la cual quieres ver citas"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),s.jsxs("select",{id:"status",name:"status",value:N.status,onChange:V,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","aria-describedby":"status-help",children:[s.jsx("option",{value:"",children:"Todos los estados"}),s.jsx("option",{value:"CONFIRMADA",children:"Confirmada"}),s.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),s.jsx("option",{value:"CANCELADA",children:"Cancelada"}),s.jsx("option",{value:"COMPLETADA",children:"Completada"})]}),s.jsx("div",{id:"status-help",className:"sr-only",children:"Selecciona el estado de las citas que quieres ver"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"consultationType",className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Consulta"}),s.jsxs("select",{id:"consultationType",name:"consultationType",value:N.consultationType,onChange:V,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","aria-describedby":"consultationType-help",children:[s.jsx("option",{value:"",children:"Todos los tipos"}),W.map(_=>s.jsx("option",{value:_,children:_},_))]}),s.jsx("div",{id:"consultationType-help",className:"sr-only",children:"Selecciona el tipo de consulta para filtrar las citas"})]}),s.jsx("div",{className:"md:col-span-2 lg:col-span-3",children:s.jsxs("div",{className:"text-sm text-gray-600",role:"status","aria-live":"polite","aria-label":"Estado de filtros aplicados",children:[s.jsx("strong",{children:"Filtros activos:"}),N.clientName&&s.jsxs("span",{className:"ml-2 px-2 py-1 bg-blue-100 text-blue-800 rounded",role:"status",children:["Cliente: ",N.clientName]}),N.dateFrom&&s.jsxs("span",{className:"ml-2 px-2 py-1 bg-blue-100 text-blue-800 rounded",role:"status",children:["Desde: ",N.dateFrom]}),N.dateTo&&s.jsxs("span",{className:"ml-2 px-2 py-1 bg-blue-100 text-blue-800 rounded",role:"status",children:["Hasta: ",N.dateTo]}),N.status&&s.jsxs("span",{className:"ml-2 px-2 py-1 bg-blue-100 text-blue-800 rounded",role:"status",children:["Estado: ",N.status]}),N.consultationType&&s.jsxs("span",{className:"ml-2 px-2 py-1 bg-blue-100 text-blue-800 rounded",role:"status",children:["Tipo: ",N.consultationType]}),!N.clientName&&!N.dateFrom&&!N.dateTo&&!N.status&&!N.consultationType&&s.jsx("span",{className:"text-gray-500",role:"status",children:"Ningn filtro activo"})]})})]})]}),s.jsx("div",{className:"bg-white rounded shadow p-4 mb-6",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Vista de Citas"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>A("calendar"),className:`px-4 py-2 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 ${k==="calendar"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700"}`,"aria-pressed":k==="calendar","aria-label":"Ver citas en formato calendario",children:"Calendario"}),s.jsx("button",{onClick:()=>A("list"),className:`px-4 py-2 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 ${k==="list"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700"}`,"aria-pressed":k==="list","aria-label":"Ver citas en formato lista",children:"Lista"})]})]})}),k==="calendar"&&s.jsx("div",{className:"bg-white rounded shadow p-4",role:"region","aria-label":"Calendario de citas",children:s.jsx(SU,{localizer:OY,events:D,startAccessor:"start",endAccessor:"end",style:{height:500},onSelectEvent:_=>d(_.resource),messages:{next:"Siguiente",previous:"Anterior",today:"Hoy",month:"Mes",week:"Semana",day:"Da",agenda:"Agenda",noEventsInRange:"No hay citas en este perodo",showMore:_=>`+ ${_} citas ms`},components:{toolbar:_Y}})}),k==="list"&&s.jsxs("div",{className:"bg-white rounded shadow p-4",role:"region","aria-label":"Lista de citas",children:[s.jsxs("h2",{className:"text-lg font-semibold mb-4",children:["Lista de Citas (",S.length,")"]}),S.length===0?s.jsx("div",{className:"text-center py-8 text-gray-500",role:"status","aria-live":"polite",children:"No hay citas que coincidan con los filtros aplicados"}):s.jsxs("div",{className:"space-y-4",role:"list","aria-label":"Citas",children:[s.jsx("h3",{className:"text-md font-semibold text-gray-700 mb-3",children:"Citas Programadas"}),S.map((_,T)=>{const R=_.type==="VISITOR"?_.fullName:_.client.user.name,B=ne(_.date).isBefore(ne()),U=ne(_.date).isSame(ne(),"day");return s.jsx("div",{className:`p-4 border rounded-lg cursor-pointer hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 ${B?"border-gray-300 bg-gray-50":U?"border-blue-300 bg-blue-50":"border-green-300 bg-green-50"}`,onClick:()=>d(_),onKeyDown:X=>{(X.key==="Enter"||X.key===" ")&&(X.preventDefault(),d(_))},tabIndex:0,role:"listitem","aria-label":`Cita ${T+1}: ${R} el ${ne(_.date).format("DD/MM/YYYY a las HH:mm")} - ${B?"Pasada":U?"Hoy":"Prxima"}`,children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("h4",{className:"font-semibold text-lg",children:R}),s.jsx("span",{className:`px-2 py-1 text-xs rounded ${_.type==="VISITOR"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:_.type==="VISITOR"?"Visitante":"Cliente"}),_.status&&s.jsx("span",{className:`px-2 py-1 text-xs rounded ${_.status==="CONFIRMADA"?"bg-green-100 text-green-800":_.status==="PENDIENTE"?"bg-yellow-100 text-yellow-800":_.status==="CANCELADA"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:_.status})]}),s.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Fecha:"})," ",ne(_.date).format("DD/MM/YYYY HH:mm")]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Ubicacin:"})," ",_.location||"No especificada"]}),_.consultationType&&s.jsxs("div",{children:[s.jsx("strong",{children:"Tipo:"})," ",_.consultationType]}),_.consultationReason&&s.jsxs("div",{children:[s.jsx("strong",{children:"Motivo:"})," ",_.consultationReason]}),_.phone&&s.jsxs("div",{children:[s.jsx("strong",{children:"Telfono:"})," ",_.phone]})]})]}),s.jsx("div",{className:"text-right text-sm text-gray-500",children:B?"Pasada":U?"Hoy":"Prxima"})]})},_.id)})]})]}),c&&!u&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",role:"dialog","aria-modal":"true","aria-labelledby":"appointment-detail-title","aria-describedby":"appointment-detail-content",onClick:_=>_.target===_.currentTarget&&d(null),children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md relative",children:[s.jsx("button",{className:"absolute top-2 right-2 text-gray-500 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded p-1",onClick:()=>d(null),"aria-label":"Cerrar detalle de cita",type:"button",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),s.jsx("h3",{id:"appointment-detail-title",className:"text-xl font-bold mb-4 pr-8",children:"Detalle de la Cita"}),s.jsxs("div",{id:"appointment-detail-content",className:"mb-4 space-y-3",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Informacin del Cliente"}),c.type==="VISITOR"?s.jsxs("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded-md",children:[s.jsx("h4",{className:"font-semibold text-purple-800 mb-2",children:"Cliente Visitante"}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Nombre:"})," ",c.fullName]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Email:"})," ",c.email]}),c.phone&&s.jsxs("div",{children:[s.jsx("strong",{children:"Telfono:"})," ",c.phone]}),c.age&&s.jsxs("div",{children:[s.jsx("strong",{children:"Edad:"})," ",c.age," aos"]}),c.consultationType&&s.jsxs("div",{children:[s.jsx("strong",{children:"Tipo de consulta:"})," ",c.consultationType]}),c.consultationReason&&s.jsxs("div",{children:[s.jsx("strong",{children:"Motivo:"})," ",c.consultationReason]})]})]}):s.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md",children:[s.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"Cliente Registrado"}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Nombre:"})," ",c.client.user.name]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Email:"})," ",c.client.user.email]})]})]}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Detalles de la Cita"}),s.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-md",children:[s.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Informacin de la Cita"}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Abogado:"})," ",c.lawyer.name," (",c.lawyer.email,")"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Fecha y hora:"})," ",ne(c.date).format("DD/MM/YYYY HH:mm")]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Lugar:"})," ",c.location]}),c.status&&s.jsxs("div",{children:[s.jsx("strong",{children:"Estado:"}),s.jsx("span",{className:`ml-1 px-2 py-1 text-xs rounded ${c.status==="CONFIRMADA"?"bg-green-100 text-green-800":c.status==="PENDIENTE"?"bg-yellow-100 text-yellow-800":c.status==="CANCELADA"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:c.status})]}),c.notes&&s.jsxs("div",{children:[s.jsx("strong",{children:"Notas:"})," ",c.notes]})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx("button",{className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",onClick:E,disabled:v,"aria-label":"Eliminar esta cita",type:"button",children:v?"Eliminando...":"Eliminar"}),s.jsx("button",{className:"px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2",onClick:()=>I(c),"aria-label":"Reprogramar esta cita",type:"button",children:"Reprogramar"}),s.jsx("button",{className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",onClick:()=>d(null),"aria-label":"Cerrar detalle de cita",type:"button",children:"Cerrar"})]})]})}),u&&c&&s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",role:"dialog","aria-modal":"true","aria-labelledby":"reschedule-title","aria-describedby":"reschedule-description",onClick:_=>_.target===_.currentTarget&&m(!1),children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md relative",children:[s.jsx("button",{className:"absolute top-2 right-2 text-gray-500 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded p-1",onClick:()=>{m(!1),d(null)},"aria-label":"Cerrar modal de reprogramacin",type:"button",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),s.jsx("h3",{id:"reschedule-title",className:"text-xl font-bold mb-4 pr-8",children:"Reprogramar Cita"}),s.jsxs("p",{id:"reschedule-description",className:"text-sm text-gray-600 mb-4",children:["Cliente: ",s.jsx("strong",{children:c.type==="VISITOR"?c.fullName:c.client.user.name})]}),s.jsxs("form",{onSubmit:M,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"reschedule-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Nueva fecha y hora"}),s.jsx("input",{id:"reschedule-date",type:"datetime-local",name:"date",value:h.date,onChange:L,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,"aria-describedby":"date-help"}),s.jsx("div",{id:"date-help",className:"sr-only",children:"Selecciona la nueva fecha y hora para la cita"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"reschedule-location",className:"block text-sm font-medium text-gray-700 mb-2",children:"Ubicacin"}),s.jsx("input",{id:"reschedule-location",type:"text",name:"location",value:h.location,onChange:L,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Oficina, online, etc.","aria-describedby":"location-help"}),s.jsx("div",{id:"location-help",className:"sr-only",children:"Especifica la ubicacin de la cita reprogramada"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"reschedule-notes",className:"block text-sm font-medium text-gray-700 mb-2",children:"Notas adicionales (opcional)"}),s.jsx("textarea",{id:"reschedule-notes",name:"notes",value:h.notes,onChange:L,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Motivo del cambio, instrucciones especiales, etc.","aria-describedby":"notes-help"}),s.jsx("div",{id:"notes-help",className:"sr-only",children:"Agrega notas adicionales sobre la reprogramacin"})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx("button",{type:"button",className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",onClick:()=>{m(!1),d(null)},disabled:j,children:"Cancelar"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",disabled:j,children:j?"Reprogramando...":"Reprogramar Cita"})]})]})]})}),r&&s.jsx("div",{className:"text-center py-8",children:"Cargando..."})]})})},RY=()=>{var X,F;const[e,t]=p.useState([]),[r,n]=p.useState([]),[a,i]=p.useState(!0),[o,l]=p.useState(null),[c,d]=p.useState(""),[u,m]=p.useState("todos"),[h,g]=p.useState(null),[j,y]=p.useState(null),[v,f]=p.useState(!1),[x,b]=p.useState(!1),[N,w]=p.useState(null),{user:S}=we(),[C,k]=p.useState("asc");p.useEffect(()=>{(async()=>{try{i(!0);const Y=localStorage.getItem("token"),[K,le]=await Promise.all([Q.get("/users/clients/my"),Q.get("/users/clients/stats")]);t(K.data),l(le.data),g(null)}catch(Y){console.error("Error fetching clients:",Y),g("Error al cargar los clientes")}finally{i(!1)}})()},[]),p.useEffect(()=>{let H=e;c&&(H=H.filter(Y=>{var K;return Y.user.name.toLowerCase().includes(c.toLowerCase())||Y.user.email.toLowerCase().includes(c.toLowerCase())||Y.dni.toLowerCase().includes(c.toLowerCase())||((K=Y.phone)==null?void 0:K.toLowerCase().includes(c.toLowerCase()))})),u==="activos"?H=H.filter(Y=>{var K;return((K=Y._count)==null?void 0:K.expedientes)&&Y._count.expedientes>0}):u==="inactivos"&&(H=H.filter(Y=>{var K;return!((K=Y._count)!=null&&K.expedientes)||Y._count.expedientes===0})),n(H)},[e,c,u]),p.useEffect(()=>()=>{N&&clearTimeout(N)},[N]);function A(H){if(!H)return"";const Y=H.trim().split(" ");return Y.length>1?Y[1].toLowerCase():""}const O=p.useMemo(()=>[...r].sort((Y,K)=>{const le=A(Y.user.name),q=A(K.user.name);return le<q?C==="asc"?-1:1:le>q?C==="asc"?1:-1:0}),[r,C]),D=H=>{y(H),f(!0)},I=()=>{y(null),f(!1)},M=H=>{var K;return((K=H._count)==null?void 0:K.expedientes)&&H._count.expedientes>0?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"},E=H=>{var K;return((K=H._count)==null?void 0:K.expedientes)&&H._count.expedientes>0?"Activo":"Inactivo"},L=()=>{const H=r.map(ce=>{var ae,xe;return{Nombre:ce.user.name,Email:ce.user.email,DNI:ce.dni,Telfono:ce.phone||"N/A",Direccin:ce.address||"N/A",Estado:E(ce),Expedientes:((ae=ce._count)==null?void 0:ae.expedientes)||0,Citas:((xe=ce._count)==null?void 0:xe.appointments)||0}}),Y=[Object.keys(H[0]).join(","),...H.map(ce=>Object.values(ce).map(ae=>`"${ae}"`).join(","))].join(`
`),K=new Blob([Y],{type:"text/csv;charset=utf-8;"}),le=document.createElement("a"),q=URL.createObjectURL(K);le.setAttribute("href",q),le.setAttribute("download",`clientes_${new Date().toISOString().split("T")[0]}.csv`),le.style.visibility="hidden",document.body.appendChild(le),le.click(),document.body.removeChild(le)},V=H=>{const Y=encodeURIComponent("Consulta Legal - Despacho"),K=encodeURIComponent(`Estimado/a ${H.user.name},

Esperamos que se encuentre bien.

Saludos cordiales,
Su equipo legal`);window.open(`mailto:${H.user.email}?subject=${Y}&body=${K}`)},G=H=>{H.phone&&window.open(`tel:${H.phone}`)},W=()=>{b(!0),setTimeout(()=>{b(!1)},500)},_=()=>{d(""),m("todos"),b(!1)},T=H=>{H.key==="Enter"&&W()},R=H=>{m(H.target.value),b(!0),setTimeout(()=>{b(!1)},300)},B=H=>{const Y=H.target.value;if(d(Y),N&&clearTimeout(N),Y.trim()){b(!0);const K=setTimeout(()=>{b(!1)},500);w(K)}else b(!1)},U=()=>{k(H=>H==="asc"?"desc":"asc")};return a?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):h?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 text-xl mb-4",children:"Error"}),s.jsx("div",{className:"text-gray-600",children:h}),s.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Reintentar"})]})}):s.jsxs("div",{className:"py-6",children:[s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mis Clientes"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Gestiona y da seguimiento a todos tus clientes"})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:L,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",children:"Exportar Datos"}),s.jsx(be,{to:"/lawyer/cases/new",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Nuevo Cliente"})]})]})}),o&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-6 mb-6",children:[s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Clientes"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:o.total})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-green-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Activos"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:o.active})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-gray-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L18.364 5.636M5.636 18.364l12.728-12.728"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Inactivos"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:o.inactive})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-yellow-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Expedientes"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:o.totalCases})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-purple-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Citas"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:o.totalAppointments})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-indigo-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Promedio Expedientes"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:o.averageCasesPerClient})]})]})})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar"}),s.jsx("input",{type:"text",placeholder:"Buscar por nombre, email, DNI o telfono...",value:c,onChange:B,onKeyDown:T,className:`w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${x&&c?"bg-blue-50 border-blue-300":""}`}),x&&c&&s.jsxs("div",{className:"mt-1 text-xs text-blue-600 flex items-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-blue-600 mr-1"}),"Buscando..."]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado"}),s.jsxs("select",{value:u,onChange:R,"aria-label":"Filtrar por estado",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"todos",children:"Todos los estados"}),s.jsx("option",{value:"activos",children:"Solo activos"}),s.jsx("option",{value:"inactivos",children:"Solo inactivos"})]})]}),s.jsx("div",{className:"flex items-end",children:s.jsx("button",{onClick:W,disabled:x,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:x?s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Buscando..."]}):" Buscar"})}),s.jsx("div",{className:"flex items-end",children:s.jsx("button",{onClick:_,className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:" Limpiar Filtros"})})]}),(c||u!=="todos")&&s.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-blue-800",children:[s.jsx("span",{className:"font-medium",children:"Resultados de bsqueda:"}),c&&s.jsxs("span",{className:"ml-2",children:['"',c,'"',u!=="todos"&&` + ${u}`]}),!c&&u!=="todos"&&s.jsxs("span",{className:"ml-2",children:["Estado: ",u]})]}),s.jsxs("div",{className:"text-sm text-blue-600",children:[r.length," de ",e.length," clientes encontrados"]})]})})]}),s.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:U,children:["Cliente",s.jsx("span",{className:"ml-1",children:C==="asc"?"":""})]}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contacto"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expedientes"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Citas"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:O.map(H=>{var Y,K;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:H.user.name}),s.jsxs("div",{className:"text-sm text-gray-500",children:["DNI: ",H.dni]}),H.address&&s.jsx("div",{className:"text-sm text-gray-500",children:H.address})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-900",children:H.user.email}),H.phone&&s.jsx("div",{className:"text-sm text-gray-500",children:H.phone})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${M(H)}`,children:E(H)})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((Y=H._count)==null?void 0:Y.expedientes)||0}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((K=H._count)==null?void 0:K.appointments)||0}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex flex-col space-y-1",children:[s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>D(H),className:"text-blue-600 hover:text-blue-900 text-xs",children:"Ver Detalles"}),s.jsx(be,{to:`/lawyer/cases/new?clientId=${H.id}`,className:"text-green-600 hover:text-green-900 text-xs",children:"Nuevo Expediente"})]}),s.jsxs("div",{className:"flex space-x-2",children:[H.user.email&&s.jsx("button",{onClick:()=>V(H),className:"text-purple-600 hover:text-purple-900 text-xs",title:"Enviar email",children:" Email"}),H.phone&&s.jsx("button",{onClick:()=>G(H),className:"text-orange-600 hover:text-orange-900 text-xs",title:"Llamar",children:" Llamar"}),s.jsx(be,{to:`/lawyer/appointments?clientId=${H.id}`,className:"text-indigo-600 hover:text-indigo-900 text-xs",children:" Cita"})]})]})})]},H.id)})})]})})}),r.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No se encontraron clientes"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Intenta ajustar los filtros o agregar nuevos clientes."})]})]}),v&&j&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:s.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:s.jsxs("div",{className:"mt-3",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Detalles del Cliente"}),s.jsx("button",{onClick:I,className:"text-gray-400 hover:text-gray-600",title:"Cerrar",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nombre"}),s.jsx("p",{className:"text-sm text-gray-900",children:j.user.name})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),s.jsx("p",{className:"text-sm text-gray-900",children:j.user.email})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"DNI"}),s.jsx("p",{className:"text-sm text-gray-900",children:j.dni})]}),j.phone&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Telfono"}),s.jsx("p",{className:"text-sm text-gray-900",children:j.phone})]}),j.address&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Direccin"}),s.jsx("p",{className:"text-sm text-gray-900",children:j.address})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Estado"}),s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${M(j)}`,children:E(j)})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Expedientes"}),s.jsx("p",{className:"text-sm text-gray-900",children:((X=j._count)==null?void 0:X.expedientes)||0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Citas"}),s.jsx("p",{className:"text-sm text-gray-900",children:((F=j._count)==null?void 0:F.appointments)||0})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx("button",{onClick:I,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Cerrar"}),j.user.email&&s.jsx("button",{onClick:()=>V(j),className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2",children:"Enviar Email"}),j.phone&&s.jsx("button",{onClick:()=>G(j),className:"px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2",children:"Llamar"}),s.jsx(be,{to:`/lawyer/cases/new?clientId=${j.id}`,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Nuevo Expediente"})]})]})})})]})},PY=()=>{var He;const[e,t]=p.useState([]),[r,n]=p.useState([]),[a,i]=p.useState(!0),[o,l]=p.useState(null),[c,d]=p.useState(""),[u,m]=p.useState("todos"),[h,g]=p.useState("todos"),[j,y]=p.useState(null),[v,f]=p.useState(null),[x,b]=p.useState(!1),[N,w]=p.useState(!1),[S,C]=p.useState(!1),[k,A]=p.useState(null),[O,D]=p.useState([]),[I,M]=p.useState([]),{user:E}=we(),[L,V]=p.useState({title:"",description:"",dueDate:"",priority:"MEDIA",expedienteId:"",clientId:"",assignedTo:""});p.useEffect(()=>{(async()=>{var ge,Ee;try{i(!0);const[Pe,ke,Oe,Le]=await Promise.all([Q.get("/tasks"),Q.get("/tasks/stats"),Q.get("/cases"),Q.get("/users/clients")]);console.log("TasksPage - Expedientes response:",Oe.data),console.log("TasksPage - Clients response:",Le.data),t(Pe.data),l(ke.data),Array.isArray(Oe.data)?D(Oe.data):(console.error("Expedientes response is not an array:",Oe.data),D([])),Array.isArray(Le.data)?M(Le.data):(console.error("Clients response is not an array:",Le.data),M([])),y(null)}catch(Pe){console.error("Error fetching data:",Pe),console.error("Error response:",(ge=Pe.response)==null?void 0:ge.data),console.error("Error status:",(Ee=Pe.response)==null?void 0:Ee.status),y("Error al cargar los datos"),D([]),M([])}finally{i(!1)}})()},[]),p.useEffect(()=>{let ee=e;c&&(ee=ee.filter(ge=>{var Ee,Pe,ke;return ge.title.toLowerCase().includes(c.toLowerCase())||((Ee=ge.description)==null?void 0:Ee.toLowerCase().includes(c.toLowerCase()))||((Pe=ge.expediente)==null?void 0:Pe.title.toLowerCase().includes(c.toLowerCase()))||((ke=ge.client)==null?void 0:ke.user.name.toLowerCase().includes(c.toLowerCase()))})),u!=="todos"&&(ee=ee.filter(ge=>ge.status===u)),h!=="todos"&&(ee=ee.filter(ge=>ge.priority===h)),n(ee)},[e,c,u,h]),p.useEffect(()=>()=>{k&&clearTimeout(k)},[k]);const G=ee=>{f(ee),b(!0)},W=()=>{f(null),b(!1)},_=()=>{w(!0),y(null)},T=()=>{w(!1),V({title:"",description:"",dueDate:"",priority:"MEDIA",expedienteId:"",clientId:"",assignedTo:""}),y(null)},R=async()=>{var ee,ge;if(!L.title.trim()){y("El ttulo es obligatorio");return}try{const Ee=localStorage.getItem("token"),Pe={title:L.title,description:L.description||void 0,dueDate:L.dueDate||void 0,priority:L.priority,expedienteId:L.expedienteId||void 0,clientId:L.clientId||void 0,assignedTo:L.assignedTo||void 0},ke=await Q.post("/tasks",Pe);t(Oe=>[ke.data,...Oe]),T()}catch(Ee){console.error("Error creating task:",Ee),y(((ge=(ee=Ee.response)==null?void 0:ee.data)==null?void 0:ge.message)||"Error al crear la tarea")}},B=async(ee,ge)=>{try{await Q.patch(`/tasks/${ee}/status`,{status:ge}),t(Ee=>Ee.map(Pe=>Pe.id===ee?{...Pe,status:ge}:Pe))}catch(Ee){console.error("Error updating task status:",Ee),y("Error al actualizar el estado de la tarea")}},U=async ee=>{if(confirm("Ests seguro de que quieres eliminar esta tarea?"))try{await Q.delete(`/tasks/${ee}`),t(ge=>ge.filter(Ee=>Ee.id!==ee))}catch(ge){console.error("Error deleting task:",ge),y("Error al eliminar la tarea")}},X=ee=>{switch(ee){case"URGENTE":return"bg-red-100 text-red-800";case"ALTA":return"bg-orange-100 text-orange-800";case"MEDIA":return"bg-yellow-100 text-yellow-800";case"BAJA":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},F=ee=>{switch(ee){case"PENDIENTE":return"bg-yellow-100 text-yellow-800";case"EN_PROGRESO":return"bg-blue-100 text-blue-800";case"COMPLETADA":return"bg-green-100 text-green-800";case"CANCELADA":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},H=ee=>{switch(ee){case"URGENTE":return"Urgente";case"ALTA":return"Alta";case"MEDIA":return"Media";case"BAJA":return"Baja";default:return ee}},Y=ee=>{switch(ee){case"PENDIENTE":return"Pendiente";case"EN_PROGRESO":return"En Progreso";case"COMPLETADA":return"Completada";case"CANCELADA":return"Cancelada";default:return ee}},K=ee=>new Date(ee)<new Date,le=()=>{C(!0),setTimeout(()=>{C(!1)},500)},q=()=>{d(""),m("todos"),g("todos"),C(!1)},ce=ee=>{ee.key==="Enter"&&le()},ae=ee=>{m(ee.target.value),C(!0),setTimeout(()=>{C(!1)},300)},xe=ee=>{g(ee.target.value),C(!0),setTimeout(()=>{C(!1)},300)},Ce=ee=>{const ge=ee.target.value;if(d(ge),k&&clearTimeout(k),ge.trim()){C(!0);const Ee=setTimeout(()=>{C(!1)},500);A(Ee)}else C(!1)};return a?s.jsxs("div",{className:"flex items-center justify-center min-h-screen",role:"status","aria-live":"polite",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500","aria-hidden":"true"}),s.jsx("span",{className:"sr-only",children:"Cargando tareas..."})]}):j?s.jsx("div",{className:"flex items-center justify-center min-h-screen",role:"alert","aria-live":"assertive",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 text-xl mb-4",children:"Error"}),s.jsx("div",{className:"text-gray-600",children:j}),s.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700","aria-label":"Reintentar cargar la pgina",children:"Reintentar"})]})}):s.jsxs("div",{className:"py-6",role:"main",children:[s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Tareas Pendientes"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Gestiona y da seguimiento a todas tus tareas y recordatorios"})]}),s.jsx("button",{onClick:_,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2","aria-label":"Crear nueva tarea",children:"Nueva Tarea"})]})}),o&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-6 mb-6",role:"region","aria-labelledby":"stats-heading",children:[s.jsx("h2",{id:"stats-heading",className:"text-2xl font-bold text-gray-900 mb-6 col-span-full",children:"Estadsticas de Tareas"}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Tareas"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:typeof o.total=="number"&&!isNaN(o.total)?o.total:0})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-yellow-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Pendientes"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:typeof o.pendientes=="number"&&!isNaN(o.pendientes)?o.pendientes:0})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"En Progreso"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:typeof o.enProgreso=="number"&&!isNaN(o.enProgreso)?o.enProgreso:0})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-green-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Completadas"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:typeof o.completadas=="number"&&!isNaN(o.completadas)?o.completadas:0})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-gray-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L18.364 5.636M5.636 18.364l12.728-12.728"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Canceladas"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:typeof o.canceladas=="number"&&!isNaN(o.canceladas)?o.canceladas:0})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-red-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Vencidas"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:typeof o.vencidas=="number"&&!isNaN(o.vencidas)?o.vencidas:0})]})]})})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-6",role:"region","aria-labelledby":"filters-heading",children:[s.jsx("h2",{id:"filters-heading",className:"text-xl font-semibold text-gray-900 mb-4",children:"Filtros de Bsqueda"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"search-input",className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar"}),s.jsx("input",{id:"search-input",type:"text",placeholder:"Buscar por ttulo, descripcin o expediente...",value:c,onChange:Ce,onKeyDown:ce,className:`w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${S&&c?"bg-blue-50 border-blue-300":""}`,"aria-label":"Buscar tareas por ttulo, descripcin o expediente"}),S&&c&&s.jsxs("div",{id:"search-status",className:"mt-1 text-xs text-blue-600 flex items-center",role:"status","aria-live":"polite",children:[s.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-blue-600 mr-1","aria-hidden":"true"}),"Buscando..."]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"status-filter",className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado"}),s.jsxs("select",{id:"status-filter",value:u,onChange:ae,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Filtrar por estado",children:[s.jsx("option",{value:"todos",children:"Todos los estados"}),s.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),s.jsx("option",{value:"EN_PROGRESO",children:"En Progreso"}),s.jsx("option",{value:"COMPLETADA",children:"Completada"}),s.jsx("option",{value:"CANCELADA",children:"Cancelada"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"priority-filter",className:"block text-sm font-medium text-gray-700 mb-2",children:"Prioridad"}),s.jsxs("select",{id:"priority-filter",value:h,onChange:xe,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Filtrar por prioridad",children:[s.jsx("option",{value:"todos",children:"Todas las prioridades"}),s.jsx("option",{value:"URGENTE",children:"Urgente"}),s.jsx("option",{value:"ALTA",children:"Alta"}),s.jsx("option",{value:"MEDIA",children:"Media"}),s.jsx("option",{value:"BAJA",children:"Baja"})]})]}),s.jsx("div",{className:"flex items-end",children:s.jsx("button",{onClick:le,disabled:S,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":S?"Buscando tareas...":"Buscar tareas","aria-describedby":S&&c?"search-status":void 0,children:S?s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2","aria-hidden":"true"}),"Buscando..."]}):" Buscar"})}),s.jsx("div",{className:"flex items-end",children:s.jsx("button",{onClick:q,className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2","aria-label":"Limpiar filtros de bsqueda",children:" Limpiar"})})]}),(c||u!=="todos"||h!=="todos")&&s.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-blue-800",children:[s.jsx("span",{className:"font-medium",children:"Resultados de bsqueda:"}),c&&s.jsxs("span",{className:"ml-2",children:['"',c,'"']}),u!=="todos"&&s.jsxs("span",{className:"ml-2",children:["+ Estado: ",u]}),h!=="todos"&&s.jsxs("span",{className:"ml-2",children:["+ Prioridad: ",h]})]}),s.jsxs("div",{className:"text-sm text-blue-600",children:[r.length," de ",e.length," tareas encontradas"]})]})})]}),s.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",role:"region","aria-labelledby":"tasks-heading",children:[s.jsx("h2",{id:"tasks-heading",className:"text-xl font-semibold text-gray-900 p-6 border-b border-gray-200",children:"Lista de Tareas"}),r.length>0&&s.jsxs("p",{className:"sr-only",id:"tasks-summary",children:["Mostrando ",r.length," de ",e.length," tareas. Cada fila contiene: ttulo de la tarea, prioridad, estado, fecha lmite, persona asignada y acciones disponibles."]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",role:"table","aria-labelledby":"tasks-heading","aria-describedby":"tasks-summary",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{role:"row",children:[s.jsx("th",{role:"columnheader",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tarea"}),s.jsx("th",{role:"columnheader",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Prioridad"}),s.jsx("th",{role:"columnheader",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),s.jsx("th",{role:"columnheader",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha Lmite"}),s.jsx("th",{role:"columnheader",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Asignado"}),s.jsx("th",{role:"columnheader",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(Array.isArray(r)?r:[]).map(ee=>{var ge;return s.jsxs("tr",{role:"row",className:`hover:bg-gray-50 ${ee.dueDate&&K(ee.dueDate)&&ee.status!=="COMPLETADA"?"bg-red-50":""}`,children:[s.jsx("td",{role:"cell",className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:ee.title}),s.jsx("div",{className:"text-sm text-gray-500",children:ee.description||"Sin descripcin"}),ee.expediente&&s.jsxs("div",{className:"text-xs text-blue-600",children:[" ",ee.expediente.title]}),ee.client&&s.jsxs("div",{className:"text-xs text-green-600",children:[" ",ee.client.user.name]})]})}),s.jsx("td",{role:"cell",className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${X(ee.priority)}`,children:H(ee.priority)})}),s.jsx("td",{role:"cell",className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("select",{value:ee.status,onChange:Ee=>B(ee.id,Ee.target.value),className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full border ${F(ee.status)}`,"aria-label":`Cambiar estado de tarea: ${ee.title}`,children:[s.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),s.jsx("option",{value:"EN_PROGRESO",children:"En Progreso"}),s.jsx("option",{value:"COMPLETADA",children:"Completada"}),s.jsx("option",{value:"CANCELADA",children:"Cancelada"})]})}),s.jsx("td",{role:"cell",className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:ee.dueDate?s.jsxs("div",{children:[s.jsx("div",{className:ee.dueDate&&K(ee.dueDate)&&ee.status!=="COMPLETADA"?"text-red-600 font-medium":"",children:new Date(ee.dueDate).toLocaleDateString()}),ee.dueDate&&K(ee.dueDate)&&ee.status!=="COMPLETADA"&&s.jsx("div",{className:"text-xs text-red-500",children:" Vencida"})]}):"Sin fecha lmite"}),s.jsx("td",{role:"cell",className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((ge=ee.assignedToUser)==null?void 0:ge.name)||"Sin asignar"}),s.jsx("td",{role:"cell",className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>G(ee),className:"text-blue-600 hover:text-blue-900","aria-label":`Ver detalles de tarea: ${ee.title}`,children:"Ver"}),s.jsx("button",{onClick:()=>U(ee.id),className:"text-red-600 hover:text-red-900","aria-label":`Eliminar tarea: ${ee.title}`,children:"Eliminar"})]})})]},ee.id)})})]})})]}),r.length===0&&s.jsxs("div",{className:"text-center py-12",id:"tasks-summary",children:[s.jsx("p",{className:"sr-only",children:"No se encontraron tareas que coincidan con los filtros aplicados"}),s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No se encontraron tareas"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Intenta ajustar los filtros o crear una nueva tarea."})]})]}),x&&v&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:s.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:s.jsxs("div",{className:"mt-3",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Detalles de la Tarea"}),s.jsx("button",{onClick:W,className:"text-gray-400 hover:text-gray-600","aria-label":"Cerrar modal de detalles de tarea",title:"Cerrar modal",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Ttulo"}),s.jsx("p",{className:"text-sm text-gray-900",children:v.title})]}),v.description&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Descripcin"}),s.jsx("p",{className:"text-sm text-gray-900",children:v.description})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Prioridad"}),s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${X(v.priority)}`,children:H(v.priority)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Estado"}),s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${F(v.status)}`,children:Y(v.status)})]}),v.dueDate&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Fecha Lmite"}),s.jsxs("p",{className:`text-sm ${K(v.dueDate)&&v.status!=="COMPLETADA"?"text-red-600 font-medium":"text-gray-900"}`,children:[new Date(v.dueDate).toLocaleDateString(),K(v.dueDate)&&v.status!=="COMPLETADA"&&s.jsx("span",{className:"ml-2 text-red-500",children:" Vencida"})]})]}),v.expediente&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Expediente"}),s.jsx("p",{className:"text-sm text-blue-600",children:v.expediente.title}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Cliente: ",v.expediente.client.user.name]})]}),v.client&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Cliente"}),s.jsx("p",{className:"text-sm text-gray-900",children:v.client.user.name}),s.jsx("p",{className:"text-xs text-gray-500",children:v.client.user.email})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Asignado a"}),s.jsx("p",{className:"text-sm text-gray-900",children:((He=v.assignedToUser)==null?void 0:He.name)||"Sin asignar"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Creado por"}),s.jsx("p",{className:"text-sm text-gray-900",children:v.createdByUser.name})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Fecha de creacin"}),s.jsx("p",{className:"text-sm text-gray-900",children:new Date(v.createdAt).toLocaleDateString()})]})]}),s.jsx("div",{className:"flex justify-end mt-6",children:s.jsx("button",{onClick:W,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700","aria-label":"Cerrar modal de detalles de tarea",children:"Cerrar"})})]})})}),N&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:s.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:s.jsxs("div",{className:"mt-3",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Nueva Tarea"}),s.jsx("button",{onClick:T,className:"text-gray-400 hover:text-gray-600","aria-label":"Cerrar modal de nueva tarea",title:"Cerrar modal",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),j&&s.jsx("div",{className:"mb-4 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md p-2",children:j}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"task-title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Ttulo *"}),s.jsx("input",{id:"task-title",type:"text",value:L.title,onChange:ee=>V(ge=>({...ge,title:ee.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ttulo de la tarea","aria-label":"Ttulo de la tarea"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"task-description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripcin"}),s.jsx("textarea",{id:"task-description",value:L.description,onChange:ee=>V(ge=>({...ge,description:ee.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Descripcin de la tarea","aria-label":"Descripcin de la tarea"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"task-due-date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha Lmite"}),s.jsx("input",{id:"task-due-date",type:"datetime-local",value:L.dueDate,onChange:ee=>V(ge=>({...ge,dueDate:ee.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Fecha lmite de la tarea"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"task-priority",className:"block text-sm font-medium text-gray-700 mb-2",children:"Prioridad"}),s.jsxs("select",{id:"task-priority",value:L.priority,onChange:ee=>V(ge=>({...ge,priority:ee.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Prioridad de la tarea",children:[s.jsx("option",{value:"BAJA",children:"Baja"}),s.jsx("option",{value:"MEDIA",children:"Media"}),s.jsx("option",{value:"ALTA",children:"Alta"}),s.jsx("option",{value:"URGENTE",children:"Urgente"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"task-expediente",className:"block text-sm font-medium text-gray-700 mb-2",children:"Expediente (opcional)"}),s.jsxs("select",{id:"task-expediente",value:L.expedienteId,onChange:ee=>V(ge=>({...ge,expedienteId:ee.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Seleccionar expediente",children:[s.jsx("option",{value:"",children:"Seleccionar expediente"}),Array.isArray(O)&&O.map(ee=>s.jsxs("option",{value:ee.id,children:[ee.title," - ",ee.client.user.name]},ee.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"task-client",className:"block text-sm font-medium text-gray-700 mb-2",children:"Cliente (opcional)"}),s.jsxs("select",{id:"task-client",value:L.clientId,onChange:ee=>V(ge=>({...ge,clientId:ee.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Seleccionar cliente",children:[s.jsx("option",{value:"",children:"Seleccionar cliente"}),Array.isArray(I)&&I.map(ee=>s.jsxs("option",{value:ee.id,children:[ee.user.name," - ",ee.user.email]},ee.id))]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx("button",{onClick:T,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2","aria-label":"Cancelar creacin de tarea",children:"Cancelar"}),s.jsx("button",{onClick:R,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2","aria-label":"Crear nueva tarea",children:"Crear Tarea"})]})]})})})]})},LY=()=>{var d,u,m,h,g,j,y,v;const[e,t]=p.useState(null),[r,n]=p.useState(!0),[a,i]=p.useState(null),{user:o}=we();p.useEffect(()=>{(async()=>{try{n(!0);const x=localStorage.getItem("token");console.log("Fetching lawyer reports...");const b=await Q.get("/lawyer/reports");console.log("Reports data received:",b.data),t(b.data),i(null)}catch(x){console.error("Error fetching reports:",x),t({tasks:{total:0,byStatus:{PENDIENTE:0,EN_PROGRESO:0,COMPLETADA:0,CANCELADA:0},overdue:0},cases:{total:0,byStatus:{ABIERTO:0,EN_PROCESO:0,CERRADO:0}},appointments:{upcoming:0}}),i("No se pudieron cargar los datos dinmicos. Mostrando datos de ejemplo.")}finally{n(!1)}})()},[]);const l=f=>{switch(f){case"PENDIENTE":return"bg-yellow-100 text-yellow-800";case"EN_PROGRESO":return"bg-blue-100 text-blue-800";case"COMPLETADA":return"bg-green-100 text-green-800";case"CANCELADA":return"bg-gray-100 text-gray-800";case"ABIERTO":return"bg-green-100 text-green-800";case"EN_PROCESO":return"bg-blue-100 text-blue-800";case"CERRADO":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},c=f=>{switch(f){case"PENDIENTE":return"Pendiente";case"EN_PROGRESO":return"En Progreso";case"COMPLETADA":return"Completada";case"CANCELADA":return"Cancelada";case"ABIERTO":return"Abierto";case"EN_PROCESO":return"En Proceso";case"CERRADO":return"Cerrado";default:return f}};return r?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):a?s.jsx("div",{className:"py-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mis Reportes"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Estadsticas y reportes personales de tu actividad"})]}),s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-4 mb-6",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Informacin"}),s.jsx("div",{className:"mt-2 text-sm text-yellow-700",children:s.jsx("p",{children:a})}),s.jsx("div",{className:"mt-4",children:s.jsx("button",{onClick:()=>window.location.reload(),className:"bg-yellow-50 px-2 py-1.5 rounded-md text-sm font-medium text-yellow-800 hover:bg-yellow-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-yellow-50 focus:ring-yellow-600",children:"Reintentar"})})]})]})})]})}):e?s.jsx("div",{className:"py-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mis Reportes"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Estadsticas y reportes personales de tu actividad"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6 col-span-full",children:"Resumen General"}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Tareas"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:((d=e.tasks)==null?void 0:d.total)??0})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-green-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Casos"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:((u=e.cases)==null?void 0:u.total)??0})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-red-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Tareas Vencidas"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:((m=e.tasks)==null?void 0:m.overdue)??0})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-purple-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Prximas Citas"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:((h=e.appointments)==null?void 0:h.upcoming)??0})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6 col-span-full",children:"Estadsticas Detalladas"}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Estado de Tareas"}),s.jsx("div",{className:"space-y-3",children:Object.entries(((g=e.tasks)==null?void 0:g.byStatus)??{}).map(([f,x])=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${l(f)}`,children:c(f)})}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:x})]},f))}),s.jsx("div",{className:"mt-6",children:s.jsx("div",{className:"flex items-end space-x-2 h-32",children:Object.entries(((j=e.tasks)==null?void 0:j.byStatus)??{}).map(([f,x])=>{var w;const b=Math.max(...Object.values(((w=e.tasks)==null?void 0:w.byStatus)??{})),N=b>0?x/b*100:0;return s.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[s.jsx("div",{className:"w-full bg-blue-500 rounded-t",style:{height:`${N}%`}}),s.jsx("span",{className:"text-xs text-gray-500 mt-1",children:x})]},f)})})})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Estado de Casos"}),s.jsx("div",{className:"space-y-3",children:Object.entries(((y=e.cases)==null?void 0:y.byStatus)??{}).map(([f,x])=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${l(f)}`,children:c(f)})}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:x})]},f))}),s.jsxs("div",{className:"mt-6",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"relative w-32 h-32",children:(()=>{var N,w;const f=Object.values(((N=e.cases)==null?void 0:N.byStatus)??{}).reduce((S,C)=>S+C,0);let x=0;const b=["#10B981","#3B82F6","#6B7280"];return Object.entries(((w=e.cases)==null?void 0:w.byStatus)??{}).map(([S,C],k)=>{if(f===0)return null;const O=C/f*100/100*360,D=s.jsx("div",{className:"absolute inset-0 rounded-full",style:{background:`conic-gradient(from ${x}deg, ${b[k]} 0deg, ${b[k]} ${O}deg, transparent ${O}deg)`}},S);return x+=O,D})})()})}),s.jsx("div",{className:"mt-4 flex justify-center space-x-4",children:Object.entries(((v=e.cases)==null?void 0:v.byStatus)??{}).map(([f,x],b)=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:["#10B981","#3B82F6","#6B7280"][b]}}),s.jsx("span",{className:"text-xs text-gray-600",children:c(f)})]},f))})]})]})]})]})}):s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"text-center",children:s.jsx("div",{className:"text-gray-600",children:"No hay datos disponibles"})})})},IY=()=>{var l,c,d;const[e,t]=p.useState(null),[r,n]=p.useState(!0),[a,i]=p.useState(null),{user:o}=we();return p.useEffect(()=>{(async()=>{var m,h;try{n(!0);const g=await Q.get("/admin/dashboard");t(g.data),i(null)}catch(g){console.error("Error fetching dashboard stats:",g),i(((h=(m=g.response)==null?void 0:m.data)==null?void 0:h.message)||"Error al cargar las estadsticas")}finally{n(!1)}})()},[]),r?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):a?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 text-xl mb-4",children:"Error"}),s.jsx("div",{className:"text-gray-600",children:a}),s.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Reintentar"})]})}):s.jsx("div",{className:"py-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("div",{children:s.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Bienvenido, ",o==null?void 0:o.name,(o==null?void 0:o.email)&&` (${o.email})`]})}),s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("div",{className:"text-sm text-gray-500",children:["ltima actualizacin: ",new Date().toLocaleString()]})})]})}),e&&s.jsxs(s.Fragment,{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Estadsticas Principales"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Usuarios"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.totalUsers||0})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-green-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Expedientes"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.totalCases||0})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-purple-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Citas"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.totalAppointments||0})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-orange-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Tareas"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:e.totalTasks||0})]})]})})]})]}),e&&s.jsxs(s.Fragment,{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Estadsticas Detalladas"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Usuarios por Rol"})}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Abogados"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.totalLawyers||0})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Clientes"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.totalClients||0})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Documentos"}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.totalDocuments||0})]})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Tareas Vencidas"}),s.jsx("span",{className:"text-sm text-red-600 font-medium",children:((l=e.overdueTasks)==null?void 0:l.length)||0})]}),s.jsxs("div",{className:"space-y-2",children:[(c=e.overdueTasks)==null?void 0:c.slice(0,3).map(u=>{var m;return s.jsxs("div",{className:"text-sm",children:[s.jsx("div",{className:"font-medium text-gray-900",children:u.title}),s.jsxs("div",{className:"text-gray-500",children:["Asignado a: ",((m=u.assignedToUser)==null?void 0:m.name)||"Sin asignar"]})]},u.id)}),(!e.overdueTasks||e.overdueTasks.length===0)&&s.jsx("div",{className:"text-sm text-gray-500",children:"No hay tareas vencidas"})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Citas Recientes"})}),s.jsxs("div",{className:"space-y-2",children:[(d=e.recentAppointments)==null?void 0:d.slice(0,3).map(u=>{var m,h,g;return s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"font-medium text-gray-900",children:[u.fullName||((h=(m=u.client)==null?void 0:m.user)==null?void 0:h.name)||"Cliente"," - ",((g=u.lawyer)==null?void 0:g.name)||"Sin asignar"]}),s.jsxs("div",{className:"text-gray-500",children:[new Date(u.date).toLocaleDateString(),u.type==="VISITOR"&&s.jsx("span",{className:"ml-2 inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-purple-100 text-purple-800",children:"Visitante"})]})]},u.id)}),(!e.recentAppointments||e.recentAppointments.length===0)&&s.jsx("div",{className:"text-sm text-gray-500",children:"No hay citas recientes"})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Navegacin Rpida"})}),s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs(be,{to:"/admin/users",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Gestionar Usuarios"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Ver y editar usuarios"})]})]}),s.jsxs(be,{to:"/admin/cases",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-green-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Gestionar Expedientes"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Ver y editar casos"})]})]}),s.jsxs(be,{to:"/admin/appointments",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-purple-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Gestionar Citas"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Ver y editar citas"})]})]}),s.jsxs(be,{to:"/admin/tasks",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-orange-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Gestionar Tareas"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Ver y editar tareas"})]})]}),s.jsxs(be,{to:"/admin/documents",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-indigo-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Gestionar Documentos"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Ver y gestionar archivos"})]})]}),s.jsxs(be,{to:"/admin/invoices",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-emerald-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Gestionar Facturas"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Ver y gestionar facturas"})]})]}),s.jsxs(be,{to:"/admin/reports",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-red-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Reportes"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Ver estadsticas del sistema"})]})]}),s.jsxs(be,{to:"/admin/parametros",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-gray-700 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6 1a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Configurar Parmetros"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Gestionar parmetros globales"})]})]}),s.jsxs(be,{to:"/admin/backup",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-pink-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Backup y Restauracin"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Gestionar copias de seguridad"})]})]}),s.jsxs(be,{to:"/admin/menu-config",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-yellow-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Configurar Mens"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Gestionar navegacin del sitio"})]})]}),s.jsxs(be,{to:"/admin/site-config",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-teal-600 rounded-md flex items-center justify-center",children:s.jsxs("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Configurar Sitio"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Personalizar apariencia y contenido"})]})]}),s.jsxs(be,{to:"/admin/home-builder",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-purple-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v12a4 4 0 004 4h4a2 2 0 002-2V5z"})})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Home Builder"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Disear pgina principal"})]})]}),s.jsxs(be,{to:"/admin/guided-config",className:"flex items-center p-4 border-2 border-blue-500 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-blue-900",children:" Configuracin Guiada"}),s.jsx("p",{className:"text-xs text-blue-700",children:"Configurar sistema paso a paso"})]})]}),s.jsxs(be,{to:"/admin/teleassistance",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-green-600 rounded-md flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:" Teleasistencia"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Asistencia remota a usuarios"})]})]})]})})]})]})})},$Y=()=>{const[e,t]=p.useState([]),[r,n]=p.useState([]),[a,i]=p.useState(!0),[o,l]=p.useState(null),[c,d]=p.useState(""),[u,m]=p.useState("todos"),[h,g]=p.useState(null),[j,y]=p.useState(!1),[v,f]=p.useState({name:"",email:"",role:"CLIENTE",dni:"",phone:"",address:""}),[x,b]=p.useState("asc"),{user:N}=we();p.useEffect(()=>{w()},[]);const w=async()=>{var E,L,V,G;try{i(!0);const W=localStorage.getItem("token");if(console.log("Fetching users with token:",W?"Token exists":"No token"),console.log("Current user from context:",N),!W){console.error("No token found in localStorage"),l("No hay token de autenticacin");return}const _=await Q.get("/admin/users");console.log("Users response:",_.data),console.log("Response type:",typeof _.data),console.log("Is array:",Array.isArray(_.data)),Array.isArray(_.data)&&(console.log("Number of users:",_.data.length),_.data.forEach((T,R)=>{console.log(`User ${R}:`,{id:T.id,name:T.name,email:T.email,role:T.role,createdAt:T.createdAt,client:T.client,expedientesAsLawyer:T.expedientesAsLawyer,appointmentsAsLawyer:T.appointmentsAsLawyer,assignedTasks:T.assignedTasks})})),t(_.data),l(null)}catch(W){console.error("Error fetching users:",W),console.error("Error response:",W.response),console.error("Error status:",(E=W.response)==null?void 0:E.status),console.error("Error data:",(L=W.response)==null?void 0:L.data),l(((G=(V=W.response)==null?void 0:V.data)==null?void 0:G.message)||"Error al cargar usuarios")}finally{i(!1)}};p.useEffect(()=>{let E=e;c&&(E=E.filter(L=>{var V;return L.name.toLowerCase().includes(c.toLowerCase())||L.email.toLowerCase().includes(c.toLowerCase())||((V=L.client)==null?void 0:V.dni.toLowerCase().includes(c.toLowerCase()))})),u!=="todos"&&(E=E.filter(L=>L.role===u)),n(E)},[e,c,u]);function S(E){if(!E)return"";const L=E.trim().split(" ");return L.length>1?L[1].toLowerCase():""}const C=p.useMemo(()=>[...r].sort((L,V)=>{const G=S(L.name),W=S(V.name);return G<W?x==="asc"?-1:1:G>W?x==="asc"?1:-1:0}),[r,x]),k=()=>{b(E=>E==="asc"?"desc":"asc")},A=E=>{var L,V,G;g(E),f({name:E.name,email:E.email,role:E.role,dni:((L=E.client)==null?void 0:L.dni)||"",phone:((V=E.client)==null?void 0:V.phone)||"",address:((G=E.client)==null?void 0:G.address)||""}),y(!0)},O=async()=>{var E,L;if(h)try{const V=localStorage.getItem("token"),G={name:v.name,email:v.email,role:v.role,client:v.role==="CLIENTE"?{dni:v.dni,phone:v.phone,address:v.address}:void 0};await Q.put(`/admin/users/${h.id}`,G),y(!1),w()}catch(V){console.error("Error updating user:",V),l(((L=(E=V.response)==null?void 0:E.data)==null?void 0:L.message)||"Error al actualizar usuario")}},D=async E=>{var L,V;if(confirm("Ests seguro de que quieres eliminar este usuario?"))try{const G=localStorage.getItem("token");await Q.delete(`/admin/users/${E}`),w()}catch(G){console.error("Error deleting user:",G),l(((V=(L=G.response)==null?void 0:L.data)==null?void 0:V.message)||"Error al eliminar usuario")}},I=E=>{switch(E){case"ADMIN":return"bg-red-100 text-red-800";case"ABOGADO":return"bg-blue-100 text-blue-800";case"CLIENTE":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},M=E=>{switch(E){case"ADMIN":return"Administrador";case"ABOGADO":return"Abogado";case"CLIENTE":return"Cliente";default:return E}};return a?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):o?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 text-xl mb-4",children:"Error"}),s.jsx("div",{className:"text-gray-600",children:o}),s.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Reintentar"})]})}):s.jsxs("div",{className:"py-6",children:[s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gestin de Usuarios"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Administra todos los usuarios del sistema"})]})}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Filtros de Bsqueda"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar"}),s.jsx("input",{type:"text",placeholder:"Buscar por nombre, email o DNI...",value:c,onChange:E=>d(E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rol"}),s.jsxs("select",{value:u,onChange:E=>m(E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Filtrar por rol",children:[s.jsx("option",{value:"todos",children:"Todos los roles"}),s.jsx("option",{value:"ADMIN",children:"Administrador"}),s.jsx("option",{value:"ABOGADO",children:"Abogado"}),s.jsx("option",{value:"CLIENTE",children:"Cliente"})]})]}),s.jsx("div",{className:"flex items-end",children:s.jsx("button",{onClick:()=>{d(""),m("todos")},className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Limpiar Filtros"})})]})]}),s.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Lista de Usuarios"})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:k,children:["Usuario",s.jsx("span",{className:"ml-1",children:x==="asc"?"":""})]}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rol"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Informacin Adicional"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actividad"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:C.map(E=>{var L,V,G;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:E.name}),s.jsx("div",{className:"text-sm text-gray-500",children:E.email}),s.jsxs("div",{className:"text-xs text-gray-400",children:["Registrado: ",E.createdAt?new Date(E.createdAt).toLocaleDateString():"Fecha no disponible"]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${I(E.role)}`,children:M(E.role)})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:E.client&&s.jsxs("div",{children:[s.jsxs("div",{children:["DNI: ",E.client.dni]}),E.client.phone&&s.jsxs("div",{children:["Tel: ",E.client.phone]},E.client.dni+"-phone"),E.client.address&&s.jsxs("div",{children:["Dir: ",E.client.address]},E.client.dni+"-address")]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.jsxs("div",{children:[s.jsxs("div",{children:["Casos: ",((L=E.expedientesAsLawyer)==null?void 0:L.length)||0]}),s.jsxs("div",{children:["Citas: ",((V=E.appointmentsAsLawyer)==null?void 0:V.length)||0]}),s.jsxs("div",{children:["Tareas: ",((G=E.assignedTasks)==null?void 0:G.length)||0]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>A(E),className:"text-blue-600 hover:text-blue-900",children:"Editar"},E.id+"-edit"),E.id!==(N==null?void 0:N.id)&&s.jsx("button",{onClick:()=>D(E.id),className:"text-red-600 hover:text-red-900",children:"Eliminar"},E.id+"-delete")]})})]},E.id)})})]})})]}),(!C||C.length===0)&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No se encontraron usuarios"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Intenta ajustar los filtros de bsqueda."})]})]}),j&&h&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:s.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:s.jsxs("div",{className:"mt-3",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Editar Usuario"}),s.jsx("button",{onClick:()=>y(!1),className:"text-gray-400 hover:text-gray-600","aria-label":"Cerrar modal de edicin",title:"Cerrar modal de edicin",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),o&&s.jsx("div",{className:"mb-4 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md p-2",children:o}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre"}),s.jsx("input",{type:"text",value:v.name,onChange:E=>f(L=>({...L,name:E.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ingrese el nombre","aria-label":"Nombre del usuario",title:"Nombre del usuario"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),s.jsx("input",{type:"email",value:v.email,onChange:E=>f(L=>({...L,email:E.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ingrese el email","aria-label":"Email del usuario",title:"Email del usuario"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rol"}),s.jsxs("select",{value:v.role,onChange:E=>f(L=>({...L,role:E.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Rol del usuario",title:"Rol del usuario",children:[s.jsx("option",{value:"CLIENTE",children:"Cliente"}),s.jsx("option",{value:"ABOGADO",children:"Abogado"}),s.jsx("option",{value:"ADMIN",children:"Administrador"})]})]}),v.role==="CLIENTE"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"DNI"}),s.jsx("input",{type:"text",value:v.dni,onChange:E=>f(L=>({...L,dni:E.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ingrese el DNI","aria-label":"DNI del cliente",title:"DNI del cliente"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telfono"}),s.jsx("input",{type:"text",value:v.phone,onChange:E=>f(L=>({...L,phone:E.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ingrese el telfono","aria-label":"Telfono del cliente",title:"Telfono del cliente"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Direccin"}),s.jsx("input",{type:"text",value:v.address,onChange:E=>f(L=>({...L,address:E.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ingrese la direccin","aria-label":"Direccin del cliente",title:"Direccin del cliente"})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx("button",{onClick:()=>y(!1),className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Cancelar"}),s.jsx("button",{onClick:O,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Actualizar"})]})]})})})]})},FY=()=>{const{user:e}=we(),t=i=>e?i.includes(e.role):!1,r=(e==null?void 0:e.role)==="ADMIN",n=(e==null?void 0:e.role)==="ABOGADO",a=(e==null?void 0:e.role)==="CLIENTE";return{hasPermission:t,isAdmin:r,isLawyer:n,isClient:a,userRole:(e==null?void 0:e.role)||null}},BY=()=>{const[e,t]=p.useState([]),[r,n]=p.useState([]),[a,i]=p.useState(!0),[o,l]=p.useState(null),[c,d]=p.useState(""),[u,m]=p.useState("todos"),[h,g]=p.useState("asc"),{isAdmin:j,userRole:y}=FY();p.useEffect(()=>{v()},[]);const v=async()=>{var S,C;try{i(!0);const k=await Q.get("/admin/cases");t(k.data),l(null)}catch(k){console.error("Error fetching cases:",k),l(((C=(S=k.response)==null?void 0:S.data)==null?void 0:C.message)||"Error al cargar expedientes")}finally{i(!1)}};p.useEffect(()=>{let S=e;c&&(S=S.filter(C=>{var k;return C.title.toLowerCase().includes(c.toLowerCase())||((k=C.description)==null?void 0:k.toLowerCase().includes(c.toLowerCase()))||C.client.user.name.toLowerCase().includes(c.toLowerCase())||C.lawyer.name.toLowerCase().includes(c.toLowerCase())})),u!=="todos"&&(S=S.filter(C=>C.status===u)),n(S)},[e,c,u]);const f=p.useMemo(()=>[...r].sort((C,k)=>C.id<k.id?h==="asc"?-1:1:C.id>k.id?h==="asc"?1:-1:0),[r,h]),x=()=>{g(S=>S==="asc"?"desc":"asc")},b=async S=>{var C,k;if(confirm("Ests seguro de que quieres eliminar este expediente?"))try{await Q.delete(`/admin/cases/${S}`),v()}catch(A){console.error("Error deleting case:",A),l(((k=(C=A.response)==null?void 0:C.data)==null?void 0:k.message)||"Error al eliminar expediente")}},N=S=>{switch(S){case"ABIERTO":return"bg-green-100 text-green-800";case"EN_PROCESO":return"bg-yellow-100 text-yellow-800";case"CERRADO":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},w=S=>{switch(S){case"ABIERTO":return"Abierto";case"EN_PROCESO":return"En Proceso";case"CERRADO":return"Cerrado";default:return S}};return j?a?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):o?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 text-xl mb-4",children:"Error"}),s.jsx("div",{className:"text-gray-600",children:o}),s.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Reintentar"})]})}):s.jsx("div",{className:"py-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"mb-8",children:s.jsx("div",{className:"flex justify-between items-center",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gestin de Expedientes"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Administra todos los expedientes del sistema"})]})})}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Filtros de Bsqueda"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar"}),s.jsx("input",{type:"text",placeholder:"Buscar por ttulo, descripcin, cliente o abogado...",value:c,onChange:S=>d(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado"}),s.jsxs("select",{value:u,onChange:S=>m(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Filtrar por estado",children:[s.jsx("option",{value:"todos",children:"Todos los estados"}),s.jsx("option",{value:"ABIERTO",children:"Abierto"}),s.jsx("option",{value:"EN_PROCESO",children:"En Proceso"}),s.jsx("option",{value:"CERRADO",children:"Cerrado"})]})]}),s.jsx("div",{className:"flex items-end",children:s.jsx("button",{onClick:()=>{d(""),m("todos")},className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Limpiar Filtros"})})]})]}),s.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Lista de Expedientes"})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:x,children:["Expediente",s.jsx("span",{className:"ml-1",children:h==="asc"?"":""})]}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Abogado"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actividad"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map(S=>{var C,k,A,O,D,I,M,E,L;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:S.title||"Sin ttulo"}),s.jsx("div",{className:"text-sm text-gray-500",children:S.description||"Sin descripcin"}),s.jsxs("div",{className:"text-xs text-gray-400",children:["Creado: ",S.createdAt&&!isNaN(Date.parse(S.createdAt))?new Date(S.createdAt).toLocaleDateString():"Fecha no disponible"]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:((k=(C=S.client)==null?void 0:C.user)==null?void 0:k.name)||((O=(A=S.client)==null?void 0:A.user)==null?void 0:O.email)||"Cliente no disponible"}),s.jsx("div",{className:"text-sm text-gray-500",children:((I=(D=S.client)==null?void 0:D.user)==null?void 0:I.email)||"Email no disponible"})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:((M=S.lawyer)==null?void 0:M.name)||((E=S.lawyer)==null?void 0:E.email)||"Abogado no disponible"}),s.jsx("div",{className:"text-sm text-gray-500",children:((L=S.lawyer)==null?void 0:L.email)||"Email no disponible"})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${N(S.status)}`,children:w(S.status)})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.jsxs("div",{children:[s.jsxs("div",{children:["Documentos: ",Array.isArray(S.documents)?S.documents.length:0]}),s.jsxs("div",{children:["Tareas: ",Array.isArray(S.tasks)?S.tasks.length:0]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(be,{to:`/admin/cases/${S.id}`,className:"text-blue-600 hover:text-blue-900",children:"Ver"},S.id+"-ver"),s.jsx("button",{onClick:()=>b(S.id),className:"text-red-600 hover:text-red-900",children:"Eliminar"},S.id+"-eliminar")]})})]},S.id||Math.random())})})]})})]}),(!r||r.length===0)&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No se encontraron expedientes"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Intenta ajustar los filtros de bsqueda."})]})]})}):(console.warn(`Access denied: User role ${y} does not have admin permissions`),s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 text-xl mb-4",children:"Acceso Denegado"}),s.jsx("div",{className:"text-gray-600",children:"No tienes permisos para acceder a esta pgina."})]})}))},zY=()=>{var K,le;const[e,t]=p.useState([]),[r,n]=p.useState([]),[a,i]=p.useState([]),[o,l]=p.useState(!0),[c,d]=p.useState(null),[u,m]=p.useState(""),[h,g]=p.useState(""),[j,y]=p.useState("date"),[v,f]=p.useState("desc"),[x,b]=p.useState(1),[N]=p.useState(10),[w,S]=p.useState(null),[C,k]=p.useState(!1),[A,O]=p.useState(new Date),[D,I]=p.useState({date:"",time:"",location:"",notes:"",lawyerId:""});p.useEffect(()=>{M(),E();const q=setInterval(()=>{M()},3e4);return()=>clearInterval(q)},[]);const M=async()=>{var q,ce;try{l(!0);const ae=await Q.get("/admin/appointments");t(ae.data),O(new Date),d(null)}catch(ae){console.error("Error fetching appointments:",ae),d(((ce=(q=ae.response)==null?void 0:q.data)==null?void 0:ce.message)||"Error al cargar citas")}finally{l(!1)}},E=async()=>{try{console.log(" Fetching lawyers...");const q=await Q.get("/admin/users");if(console.log(" Response from /admin/users:",q),console.log(" Response data type:",typeof q.data),console.log(" Response data:",q.data),Array.isArray(q.data)){const ce=q.data.filter(ae=>ae.role==="ABOGADO");console.log(" Found lawyers:",ce),i(ce)}else console.error("Error: response.data is not an array:",q.data),i([])}catch(q){console.error("Error fetching lawyers:",q)}};p.useEffect(()=>{let q=e;if(u){const ce=u.toLowerCase().split(";").filter(ae=>ae.trim().length>0);q=q.filter(ae=>ce.every(xe=>{var ee,ge,Ee,Pe,ke,Oe;const Ce=xe.trim(),He={clientName:ae.fullName||((ge=(ee=ae.client)==null?void 0:ee.user)==null?void 0:ge.name)||"",clientEmail:ae.email||((Pe=(Ee=ae.client)==null?void 0:Ee.user)==null?void 0:Pe.email)||"",lawyerName:((ke=ae.lawyer)==null?void 0:ke.name)||"",lawyerEmail:((Oe=ae.lawyer)==null?void 0:Oe.email)||"",location:ae.location||"No especificada",notes:ae.notes||"",type:ae.type==="VISITOR"?"visitante":"cliente",status:L(ae.date)?"prxima":"pasada"};return Object.values(He).some(Le=>Le.toLowerCase().includes(Ce))}))}if(h){const ce=new Date(h);q=q.filter(ae=>new Date(ae.date).toDateString()===ce.toDateString())}n(q),b(1)},[e,u,h]);const L=q=>new Date(q)>new Date,V=q=>new Date(q)<new Date,G=(q,ce)=>{var ae,xe,Ce;switch(ce){case"date":return new Date(q.date).getTime();case"client":return(q.fullName||((xe=(ae=q.client)==null?void 0:ae.user)==null?void 0:xe.name)||"").toLowerCase();case"lawyer":return(((Ce=q.lawyer)==null?void 0:Ce.name)||"").toLowerCase();case"location":return(q.location||"").toLowerCase();case"status":return L(q.date)?1:0;case"type":return q.type;default:return""}},W=p.useMemo(()=>[...r].sort((q,ce)=>{const ae=G(q,j),xe=G(ce,j);return typeof ae=="string"&&typeof xe=="string"?v==="asc"?ae.localeCompare(xe):xe.localeCompare(ae):v==="asc"?ae-xe:xe-ae}),[r,j,v]),_=Math.ceil(W.length/N),T=(x-1)*N,R=T+N,B=W.slice(T,R),U=q=>{j===q?f(ce=>ce==="asc"?"desc":"asc"):(y(q),f("asc"))},X=q=>{b(q)},F=q=>{var ae;const ce=new Date(q.date);I({date:ce.toISOString().split("T")[0],time:ce.toTimeString().slice(0,5),location:q.location||"",notes:q.notes||"",lawyerId:((ae=q.lawyer)==null?void 0:ae.id)||""}),S(q),k(!0)},H=async()=>{var q,ce;if(w)try{const ae=localStorage.getItem("token"),xe={date:`${D.date}T${D.time}:00`,location:D.location,notes:D.notes,lawyerId:D.lawyerId};await Q.put(`/admin/appointments/${w.id}`,xe),k(!1),S(null),M()}catch(ae){console.error("Error updating appointment:",ae),d(((ce=(q=ae.response)==null?void 0:q.data)==null?void 0:ce.message)||"Error al actualizar cita")}},Y=async q=>{var ce,ae;if(confirm("Ests seguro de que quieres eliminar esta cita?"))try{await Q.delete(`/admin/appointments/${q}`),M()}catch(xe){console.error("Error deleting appointment:",xe),d(((ae=(ce=xe.response)==null?void 0:ce.data)==null?void 0:ae.message)||"Error al eliminar cita")}};return o?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):c?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 text-xl mb-4",children:"Error"}),s.jsx("div",{className:"text-gray-600",children:c}),s.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Reintentar"})]})}):s.jsxs("div",{className:"py-6",children:[s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gestin de Citas"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Administra todas las citas del sistema - Asigna abogados y reprograma citas"}),s.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["ltima actualizacin: ",A.toLocaleString(),s.jsx("span",{className:"ml-2 text-blue-600",children:"(Actualizacin automtica cada 30s)"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("button",{onClick:M,disabled:o,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),s.jsx("span",{children:"Refrescar"})]}),u&&s.jsxs("button",{onClick:()=>{console.log(" DEBUG: Analizando bsqueda actual"),console.log(" Trmino de bsqueda:",u),console.log(" Total de citas:",e.length),console.log(" Citas filtradas:",r.length),console.log("---"),e.forEach(q=>{var xe,Ce,He,ee,ge,Ee;const ce=u.toLowerCase().split(";").filter(Pe=>Pe.trim().length>0),ae={clientName:q.fullName||((Ce=(xe=q.client)==null?void 0:xe.user)==null?void 0:Ce.name)||"",clientEmail:q.email||((ee=(He=q.client)==null?void 0:He.user)==null?void 0:ee.email)||"",lawyerName:((ge=q.lawyer)==null?void 0:ge.name)||"",lawyerEmail:((Ee=q.lawyer)==null?void 0:Ee.email)||"",location:q.location||"No especificada",notes:q.notes||"",type:q.type==="VISITOR"?"visitante":"cliente",status:L(q.date)?"prxima":"pasada"};console.log(` Cita ${q.id}:`),console.log(" Campos:",ae),ce.forEach(Pe=>{const ke=Pe.trim(),Oe=Object.entries(ae).filter(([Le,$t])=>$t.toLowerCase().includes(ke)).map(([Le,$t])=>`${Le}: "${$t}"`);Oe.length>0?console.log(` "${ke}" encontrado en:`,Oe):console.log(` "${ke}" NO encontrado`)}),console.log("---")})},className:"px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 flex items-center space-x-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("span",{children:"Debug"})]})]})]})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar"}),s.jsx("input",{type:"text",placeholder:"Buscar por cliente, abogado, ubicacin, notas, tipo (cliente/visitante) o estado (prxima/pasada). Puedes combinar trminos separados por punto y coma (;)...",value:u,onChange:q=>m(q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha"}),s.jsx("input",{type:"date",value:h,onChange:q=>g(q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Filtrar por fecha"})]}),s.jsx("div",{className:"flex items-end",children:s.jsx("button",{onClick:()=>{m(""),g("")},className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Limpiar Filtros"})})]})}),s.jsx("div",{className:"bg-white p-4 rounded-lg shadow mb-4",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"text-sm text-gray-600",children:[s.jsx("span",{className:"font-medium",children:W.length})," citas encontradas",u&&s.jsxs("span",{className:"ml-2",children:['para "',s.jsx("span",{className:"font-medium",children:u}),'"']}),h&&s.jsxs("span",{className:"ml-2",children:["en ",s.jsx("span",{className:"font-medium",children:new Date(h).toLocaleDateString()})]})]}),s.jsxs("div",{className:"text-sm text-gray-500",children:["Mostrando ",T+1,"-",Math.min(R,W.length)," de ",W.length," citas"]})]})}),s.jsx("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:()=>U("date"),children:["Fecha y Hora",s.jsx("span",{className:"ml-1",children:j==="date"?v==="asc"?"":"":""})]}),s.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:()=>U("client"),children:["Cliente",s.jsx("span",{className:"ml-1",children:j==="client"?v==="asc"?"":"":""})]}),s.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:()=>U("lawyer"),children:["Abogado",s.jsx("span",{className:"ml-1",children:j==="lawyer"?v==="asc"?"":"":""})]}),s.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:()=>U("location"),children:["Ubicacin",s.jsx("span",{className:"ml-1",children:j==="location"?v==="asc"?"":"":""})]}),s.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:()=>U("status"),children:["Estado",s.jsx("span",{className:"ml-1",children:j==="status"?v==="asc"?"":"":""})]}),s.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:()=>U("type"),children:["Tipo",s.jsx("span",{className:"ml-1",children:j==="type"?v==="asc"?"":"":""})]}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:B.map(q=>{var ce,ae,xe,Ce,He,ee;return s.jsxs("tr",{className:`hover:bg-gray-50 ${V(q.date)?"bg-gray-50":""}`,children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:new Date(q.date).toLocaleDateString()}),s.jsx("div",{className:"text-sm text-gray-500",children:new Date(q.date).toLocaleTimeString()})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:q.fullName||((ae=(ce=q.client)==null?void 0:ce.user)==null?void 0:ae.name)||""}),s.jsx("div",{className:"text-sm text-gray-500",children:q.email||((Ce=(xe=q.client)==null?void 0:xe.user)==null?void 0:Ce.email)||""})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:((He=q.lawyer)==null?void 0:He.name)||""}),s.jsx("div",{className:"text-sm text-gray-500",children:((ee=q.lawyer)==null?void 0:ee.email)||""})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:q.location||"No especificada"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:L(q.date)?s.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:"Prxima"}):s.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800",children:"Pasada"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:q.type==="VISITOR"?s.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-purple-100 text-purple-800",children:"Visitante (Chatbot)"}):s.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:"Cliente"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>F(q),className:"text-blue-600 hover:text-blue-900",children:"Editar"}),s.jsx("button",{onClick:()=>Y(q.id),className:"text-red-600 hover:text-red-900",children:"Eliminar"})]})})]},q.id)})})]})})}),_>1&&s.jsxs("div",{className:"flex justify-center items-center space-x-2 mt-6",children:[s.jsx("button",{onClick:()=>X(x-1),disabled:x===1,className:"px-3 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),s.jsxs("span",{className:"text-sm text-gray-700",children:["Pgina ",x," de ",_]}),s.jsx("button",{onClick:()=>X(x+1),disabled:x===_,className:"px-3 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"Siguiente"})]}),r.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No se encontraron citas"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Intenta ajustar los filtros de bsqueda."})]})]}),C&&w&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:s.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:s.jsxs("div",{className:"mt-3",children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Editar Cita - ",((le=(K=w.client)==null?void 0:K.user)==null?void 0:le.name)||"Desconocido"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha"}),s.jsx("input",{type:"date",value:D.date,onChange:q=>I({...D,date:q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hora"}),s.jsx("input",{type:"time",value:D.time,onChange:q=>I({...D,time:q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Abogado"}),s.jsx("select",{value:D.lawyerId,onChange:q=>I({...D,lawyerId:q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:a.map(q=>s.jsxs("option",{value:q.id,children:[q.name," (",q.email,")"]},q.id))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ubicacin"}),s.jsx("input",{type:"text",value:D.location,onChange:q=>I({...D,location:q.target.value}),placeholder:"Ubicacin de la cita",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas"}),s.jsx("textarea",{value:D.notes,onChange:q=>I({...D,notes:q.target.value}),placeholder:"Notas adicionales",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx("button",{onClick:()=>{k(!1),S(null)},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",children:"Cancelar"}),s.jsx("button",{onClick:H,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Guardar Cambios"})]})]})})})]})},UY=()=>{const[e,t]=p.useState([]),[r,n]=p.useState([]),[a,i]=p.useState(!0),[o,l]=p.useState(null),[c,d]=p.useState(""),[u,m]=p.useState("todos"),[h,g]=p.useState("todos"),[j,y]=p.useState("asc");p.useEffect(()=>{v()},[]);const v=async()=>{var A,O;try{i(!0);const D=await Q.get("/admin/tasks");t(D.data),l(null)}catch(D){console.error("Error fetching tasks:",D),l(((O=(A=D.response)==null?void 0:A.data)==null?void 0:O.message)||"Error al cargar tareas")}finally{i(!1)}};p.useEffect(()=>{let A=e;c&&(A=A.filter(O=>{var D,I,M,E;return O.title.toLowerCase().includes(c.toLowerCase())||((D=O.description)==null?void 0:D.toLowerCase().includes(c.toLowerCase()))||((I=O.expediente)==null?void 0:I.title.toLowerCase().includes(c.toLowerCase()))||((M=O.client)==null?void 0:M.user.name.toLowerCase().includes(c.toLowerCase()))||((E=O.assignedToUser)==null?void 0:E.name.toLowerCase().includes(c.toLowerCase()))})),u!=="todos"&&(A=A.filter(O=>O.status===u)),h!=="todos"&&(A=A.filter(O=>O.priority===h)),n(A)},[e,c,u,h]);const f=p.useMemo(()=>[...r].sort((A,O)=>{if(!A.dueDate)return 1;if(!O.dueDate)return-1;const D=new Date(A.dueDate).getTime(),I=new Date(O.dueDate).getTime();return j==="asc"?D-I:I-D}),[r,j]),x=()=>{y(A=>A==="asc"?"desc":"asc")},b=async A=>{var O,D;if(confirm("Ests seguro de que quieres eliminar esta tarea?"))try{await Q.delete(`/admin/tasks/${A}`),v()}catch(I){console.error("Error deleting task:",I),l(((D=(O=I.response)==null?void 0:O.data)==null?void 0:D.message)||"Error al eliminar tarea")}},N=A=>{switch(A){case"URGENTE":return"bg-red-100 text-red-800";case"ALTA":return"bg-orange-100 text-orange-800";case"MEDIA":return"bg-yellow-100 text-yellow-800";case"BAJA":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},w=A=>{switch(A){case"PENDIENTE":return"bg-yellow-100 text-yellow-800";case"EN_PROGRESO":return"bg-blue-100 text-blue-800";case"COMPLETADA":return"bg-green-100 text-green-800";case"CANCELADA":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},S=A=>{switch(A){case"URGENTE":return"Urgente";case"ALTA":return"Alta";case"MEDIA":return"Media";case"BAJA":return"Baja";default:return A}},C=A=>{switch(A){case"PENDIENTE":return"Pendiente";case"EN_PROGRESO":return"En Progreso";case"COMPLETADA":return"Completada";case"CANCELADA":return"Cancelada";default:return A}},k=A=>new Date(A)<new Date;return a?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):o?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 text-xl mb-4",children:"Error"}),s.jsx("div",{className:"text-gray-600",children:o}),s.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Reintentar"})]})}):s.jsx("div",{className:"py-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"mb-8",children:s.jsx("div",{className:"flex justify-between items-center",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gestin de Tareas"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Administra todas las tareas del sistema"})]})})}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Filtros de Bsqueda"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar"}),s.jsx("input",{type:"text",placeholder:"Buscar por ttulo, descripcin, expediente, cliente o asignado...",value:c,onChange:A=>d(A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado"}),s.jsxs("select",{value:u,onChange:A=>m(A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Filtrar por estado",children:[s.jsx("option",{value:"todos",children:"Todos los estados"}),s.jsx("option",{value:"PENDIENTE",children:"Pendiente"}),s.jsx("option",{value:"EN_PROGRESO",children:"En Progreso"}),s.jsx("option",{value:"COMPLETADA",children:"Completada"}),s.jsx("option",{value:"CANCELADA",children:"Cancelada"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prioridad"}),s.jsxs("select",{value:h,onChange:A=>g(A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Filtrar por prioridad",children:[s.jsx("option",{value:"todos",children:"Todas las prioridades"}),s.jsx("option",{value:"URGENTE",children:"Urgente"}),s.jsx("option",{value:"ALTA",children:"Alta"}),s.jsx("option",{value:"MEDIA",children:"Media"}),s.jsx("option",{value:"BAJA",children:"Baja"})]})]}),s.jsx("div",{className:"flex items-end",children:s.jsx("button",{onClick:()=>{d(""),m("todos"),g("todos")},className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Limpiar Filtros"})})]})]}),s.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Lista de Tareas"})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tarea"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Prioridad"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),s.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:x,children:["Vencimiento",s.jsx("span",{className:"ml-1",children:j==="asc"?"":""})]}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Asignado"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map(A=>{var O;return s.jsxs("tr",{className:`hover:bg-gray-50 ${A.dueDate&&k(A.dueDate)&&A.status!=="COMPLETADA"?"bg-red-50":""}`,children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:A.title}),s.jsx("div",{className:"text-sm text-gray-500",children:A.description||"Sin descripcin"}),A.expediente&&s.jsxs("div",{className:"text-xs text-blue-600",children:[" ",A.expediente.title]}),A.client&&s.jsxs("div",{className:"text-xs text-green-600",children:[" ",A.client.user.name]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${N(A.priority)}`,children:S(A.priority)})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${w(A.status)}`,children:C(A.status)})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:A.dueDate?s.jsxs("div",{children:[s.jsx("div",{className:A.dueDate&&k(A.dueDate)&&A.status!=="COMPLETADA"?"text-red-600 font-medium":"",children:new Date(A.dueDate).toLocaleDateString()}),A.dueDate&&k(A.dueDate)&&A.status!=="COMPLETADA"&&s.jsx("div",{className:"text-xs text-red-500",children:" Vencida"})]}):"Sin fecha lmite"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((O=A.assignedToUser)==null?void 0:O.name)||"Sin asignar"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsx("div",{className:"flex space-x-2",children:s.jsx("button",{onClick:()=>b(A.id),className:"text-red-600 hover:text-red-900",children:"Eliminar"})})})]},A.id)})})]})})]}),f.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No se encontraron tareas"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Intenta ajustar los filtros de bsqueda."})]})]})})},VY=()=>{const[e,t]=p.useState([]),[r,n]=p.useState([]),[a,i]=p.useState(!0),[o,l]=p.useState(null),[c,d]=p.useState(""),[u,m]=p.useState("todos");p.useEffect(()=>{h()},[]);const h=async()=>{var v,f;try{i(!0);const x=localStorage.getItem("token"),b=await Q.get("/admin/documents",{headers:{Authorization:`Bearer ${x}`}});t(b.data),l(null)}catch(x){console.error("Error fetching documents:",x),l(((f=(v=x.response)==null?void 0:v.data)==null?void 0:f.message)||"Error al cargar documentos")}finally{i(!1)}};p.useEffect(()=>{let v=e;c&&(v=v.filter(f=>{var x;return f.originalName.toLowerCase().includes(c.toLowerCase())||((x=f.description)==null?void 0:x.toLowerCase().includes(c.toLowerCase()))||f.expediente.title.toLowerCase().includes(c.toLowerCase())||f.expediente.client.user.name.toLowerCase().includes(c.toLowerCase())||f.uploadedByUser.name.toLowerCase().includes(c.toLowerCase())})),u!=="todos"&&(v=v.filter(f=>f.mimeType.includes(u))),n(v)},[e,c,u]);const g=async v=>{var f,x;if(confirm("Ests seguro de que quieres eliminar este documento?"))try{const b=localStorage.getItem("token");await Q.delete(`/admin/documents/${v}`,{headers:{Authorization:`Bearer ${b}`}}),h()}catch(b){console.error("Error deleting document:",b),l(((x=(f=b.response)==null?void 0:f.data)==null?void 0:x.message)||"Error al eliminar documento")}},j=v=>{if(v===0)return"0 Bytes";const f=1024,x=["Bytes","KB","MB","GB"],b=Math.floor(Math.log(v)/Math.log(f));return parseFloat((v/Math.pow(f,b)).toFixed(2))+" "+x[b]},y=v=>v.includes("pdf")?"":v.includes("image")?"":v.includes("word")||v.includes("document")?"":v.includes("excel")||v.includes("spreadsheet")?"":v.includes("powerpoint")||v.includes("presentation")?"":"";return a?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):o?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 text-xl mb-4",children:"Error"}),s.jsx("div",{className:"text-gray-600",children:o}),s.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Reintentar"})]})}):s.jsx("div",{className:"py-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"mb-8",children:s.jsx("div",{className:"flex justify-between items-center",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gestin de Documentos"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Administra todos los documentos del sistema"})]})})}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Filtros de Bsqueda"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar"}),s.jsx("input",{type:"text",placeholder:"Buscar por nombre, descripcin, expediente, cliente o subido por...",value:c,onChange:v=>d(v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Archivo"}),s.jsxs("select",{value:u,onChange:v=>m(v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Filtrar por tipo de archivo",children:[s.jsx("option",{value:"todos",children:"Todos los tipos"}),s.jsx("option",{value:"pdf",children:"PDF"}),s.jsx("option",{value:"image",children:"Imgenes"}),s.jsx("option",{value:"word",children:"Documentos Word"}),s.jsx("option",{value:"excel",children:"Hojas de clculo"}),s.jsx("option",{value:"powerpoint",children:"Presentaciones"})]})]}),s.jsx("div",{className:"flex items-end",children:s.jsx("button",{onClick:()=>{d(""),m("todos")},className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Limpiar Filtros"})})]})]}),s.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Lista de Documentos"})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Documento"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expediente"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Subido por"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tamao"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(v=>{var f,x,b,N,w,S,C,k,A;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("span",{className:"text-2xl",children:y(v.mimeType)})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:v.originalName}),s.jsx("div",{className:"text-sm text-gray-500",children:v.description||"Sin descripcin"}),s.jsxs("div",{className:"text-xs text-gray-400",children:["Subido: ",new Date(v.uploadedAt).toLocaleDateString()]})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm text-gray-900",children:((f=v.expediente)==null?void 0:f.title)||"Sin expediente"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:((N=(b=(x=v.expediente)==null?void 0:x.client)==null?void 0:b.user)==null?void 0:N.name)||"Sin cliente"}),s.jsx("div",{className:"text-sm text-gray-500",children:((C=(S=(w=v.expediente)==null?void 0:w.client)==null?void 0:S.user)==null?void 0:C.email)||"Sin email"})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:((k=v.uploadedByUser)==null?void 0:k.name)||"Sin usuario"}),s.jsx("div",{className:"text-sm text-gray-500",children:((A=v.uploadedByUser)==null?void 0:A.email)||"Sin email"})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:j(v.fileSize)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("a",{href:v.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-900",children:"Ver"}),s.jsx("button",{onClick:()=>g(v.id),className:"text-red-600 hover:text-red-900",children:"Eliminar"})]})})]},v.id)})})]})})]}),r.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No se encontraron documentos"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Intenta ajustar los filtros de bsqueda."})]})]})})};var mm={},G1={L:1,M:0,Q:3,H:2},K1={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},HY=K1;function X1(e){this.mode=HY.MODE_8BIT_BYTE,this.data=e}X1.prototype={getLength:function(e){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}};var WY=X1,Oc=G1;function Ds(e,t){this.totalCount=e,this.dataCount=t}Ds.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];Ds.getRSBlocks=function(e,t){var r=Ds.getRsBlockTable(e,t);if(r==null)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var n=r.length/3,a=new Array,i=0;i<n;i++)for(var o=r[i*3+0],l=r[i*3+1],c=r[i*3+2],d=0;d<o;d++)a.push(new Ds(l,c));return a};Ds.getRsBlockTable=function(e,t){switch(t){case Oc.L:return Ds.RS_BLOCK_TABLE[(e-1)*4+0];case Oc.M:return Ds.RS_BLOCK_TABLE[(e-1)*4+1];case Oc.Q:return Ds.RS_BLOCK_TABLE[(e-1)*4+2];case Oc.H:return Ds.RS_BLOCK_TABLE[(e-1)*4+3];default:return}};var YY=Ds;function Q1(){this.buffer=new Array,this.length=0}Q1.prototype={get:function(e){var t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1},put:function(e,t){for(var r=0;r<t;r++)this.putBit((e>>>t-r-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var qY=Q1,as={glog:function(e){if(e<1)throw new Error("glog("+e+")");return as.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return as.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var Rt=0;Rt<8;Rt++)as.EXP_TABLE[Rt]=1<<Rt;for(var Rt=8;Rt<256;Rt++)as.EXP_TABLE[Rt]=as.EXP_TABLE[Rt-4]^as.EXP_TABLE[Rt-5]^as.EXP_TABLE[Rt-6]^as.EXP_TABLE[Rt-8];for(var Rt=0;Rt<255;Rt++)as.LOG_TABLE[as.EXP_TABLE[Rt]]=Rt;var J1=as,oa=J1;function od(e,t){if(e.length==null)throw new Error(e.length+"/"+t);for(var r=0;r<e.length&&e[r]==0;)r++;this.num=new Array(e.length-r+t);for(var n=0;n<e.length-r;n++)this.num[n]=e[n+r]}od.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),r=0;r<this.getLength();r++)for(var n=0;n<e.getLength();n++)t[r+n]^=oa.gexp(oa.glog(this.get(r))+oa.glog(e.get(n)));return new od(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=oa.glog(this.get(0))-oa.glog(e.get(0)),r=new Array(this.getLength()),n=0;n<this.getLength();n++)r[n]=this.get(n);for(var n=0;n<e.getLength();n++)r[n]^=oa.gexp(oa.glog(e.get(n))+t);return new od(r,0).mod(e)}};var Z1=od,Or=K1,Qy=Z1,GY=J1,jn={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},Ot={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;Ot.getBCHDigit(t)-Ot.getBCHDigit(Ot.G15)>=0;)t^=Ot.G15<<Ot.getBCHDigit(t)-Ot.getBCHDigit(Ot.G15);return(e<<10|t)^Ot.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;Ot.getBCHDigit(t)-Ot.getBCHDigit(Ot.G18)>=0;)t^=Ot.G18<<Ot.getBCHDigit(t)-Ot.getBCHDigit(Ot.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;e!=0;)t++,e>>>=1;return t},getPatternPosition:function(e){return Ot.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,r){switch(e){case jn.PATTERN000:return(t+r)%2==0;case jn.PATTERN001:return t%2==0;case jn.PATTERN010:return r%3==0;case jn.PATTERN011:return(t+r)%3==0;case jn.PATTERN100:return(Math.floor(t/2)+Math.floor(r/3))%2==0;case jn.PATTERN101:return t*r%2+t*r%3==0;case jn.PATTERN110:return(t*r%2+t*r%3)%2==0;case jn.PATTERN111:return(t*r%3+(t+r)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new Qy([1],0),r=0;r<e;r++)t=t.multiply(new Qy([1,GY.gexp(r)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case Or.MODE_NUMBER:return 10;case Or.MODE_ALPHA_NUM:return 9;case Or.MODE_8BIT_BYTE:return 8;case Or.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case Or.MODE_NUMBER:return 12;case Or.MODE_ALPHA_NUM:return 11;case Or.MODE_8BIT_BYTE:return 16;case Or.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else if(t<41)switch(e){case Or.MODE_NUMBER:return 14;case Or.MODE_ALPHA_NUM:return 13;case Or.MODE_8BIT_BYTE:return 16;case Or.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}else throw new Error("type:"+t)},getLostPoint:function(e){for(var t=e.getModuleCount(),r=0,n=0;n<t;n++)for(var a=0;a<t;a++){for(var i=0,o=e.isDark(n,a),l=-1;l<=1;l++)if(!(n+l<0||t<=n+l))for(var c=-1;c<=1;c++)a+c<0||t<=a+c||l==0&&c==0||o==e.isDark(n+l,a+c)&&i++;i>5&&(r+=3+i-5)}for(var n=0;n<t-1;n++)for(var a=0;a<t-1;a++){var d=0;e.isDark(n,a)&&d++,e.isDark(n+1,a)&&d++,e.isDark(n,a+1)&&d++,e.isDark(n+1,a+1)&&d++,(d==0||d==4)&&(r+=3)}for(var n=0;n<t;n++)for(var a=0;a<t-6;a++)e.isDark(n,a)&&!e.isDark(n,a+1)&&e.isDark(n,a+2)&&e.isDark(n,a+3)&&e.isDark(n,a+4)&&!e.isDark(n,a+5)&&e.isDark(n,a+6)&&(r+=40);for(var a=0;a<t;a++)for(var n=0;n<t-6;n++)e.isDark(n,a)&&!e.isDark(n+1,a)&&e.isDark(n+2,a)&&e.isDark(n+3,a)&&e.isDark(n+4,a)&&!e.isDark(n+5,a)&&e.isDark(n+6,a)&&(r+=40);for(var u=0,a=0;a<t;a++)for(var n=0;n<t;n++)e.isDark(n,a)&&u++;var m=Math.abs(100*u/t/t-50)/5;return r+=m*10,r}},KY=Ot,XY=WY,eS=YY,tS=qY,ta=KY,QY=Z1;function As(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var Ar=As.prototype;Ar.addData=function(e){var t=new XY(e);this.dataList.push(t),this.dataCache=null};Ar.isDark=function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]};Ar.getModuleCount=function(){return this.moduleCount};Ar.make=function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){for(var t=eS.getRSBlocks(e,this.errorCorrectLevel),r=new tS,n=0,a=0;a<t.length;a++)n+=t[a].dataCount;for(var a=0;a<this.dataList.length;a++){var i=this.dataList[a];r.put(i.mode,4),r.put(i.getLength(),ta.getLengthInBits(i.mode,e)),i.write(r)}if(r.getLengthInBits()<=n*8)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())};Ar.makeImpl=function(e,t){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++)this.modules[r][n]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),this.dataCache==null&&(this.dataCache=As.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)};Ar.setupPositionProbePattern=function(e,t){for(var r=-1;r<=7;r++)if(!(e+r<=-1||this.moduleCount<=e+r))for(var n=-1;n<=7;n++)t+n<=-1||this.moduleCount<=t+n||(0<=r&&r<=6&&(n==0||n==6)||0<=n&&n<=6&&(r==0||r==6)||2<=r&&r<=4&&2<=n&&n<=4?this.modules[e+r][t+n]=!0:this.modules[e+r][t+n]=!1)};Ar.getBestMaskPattern=function(){for(var e=0,t=0,r=0;r<8;r++){this.makeImpl(!0,r);var n=ta.getLostPoint(this);(r==0||e>n)&&(e=n,t=r)}return t};Ar.createMovieClip=function(e,t,r){var n=e.createEmptyMovieClip(t,r),a=1;this.make();for(var i=0;i<this.modules.length;i++)for(var o=i*a,l=0;l<this.modules[i].length;l++){var c=l*a,d=this.modules[i][l];d&&(n.beginFill(0,100),n.moveTo(c,o),n.lineTo(c+a,o),n.lineTo(c+a,o+a),n.lineTo(c,o+a),n.endFill())}return n};Ar.setupTimingPattern=function(){for(var e=8;e<this.moduleCount-8;e++)this.modules[e][6]==null&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)this.modules[6][t]==null&&(this.modules[6][t]=t%2==0)};Ar.setupPositionAdjustPattern=function(){for(var e=ta.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var r=0;r<e.length;r++){var n=e[t],a=e[r];if(this.modules[n][a]==null)for(var i=-2;i<=2;i++)for(var o=-2;o<=2;o++)i==-2||i==2||o==-2||o==2||i==0&&o==0?this.modules[n+i][a+o]=!0:this.modules[n+i][a+o]=!1}};Ar.setupTypeNumber=function(e){for(var t=ta.getBCHTypeNumber(this.typeNumber),r=0;r<18;r++){var n=!e&&(t>>r&1)==1;this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=n}for(var r=0;r<18;r++){var n=!e&&(t>>r&1)==1;this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=n}};Ar.setupTypeInfo=function(e,t){for(var r=this.errorCorrectLevel<<3|t,n=ta.getBCHTypeInfo(r),a=0;a<15;a++){var i=!e&&(n>>a&1)==1;a<6?this.modules[a][8]=i:a<8?this.modules[a+1][8]=i:this.modules[this.moduleCount-15+a][8]=i}for(var a=0;a<15;a++){var i=!e&&(n>>a&1)==1;a<8?this.modules[8][this.moduleCount-a-1]=i:a<9?this.modules[8][15-a-1+1]=i:this.modules[8][15-a-1]=i}this.modules[this.moduleCount-8][8]=!e};Ar.mapData=function(e,t){for(var r=-1,n=this.moduleCount-1,a=7,i=0,o=this.moduleCount-1;o>0;o-=2)for(o==6&&o--;;){for(var l=0;l<2;l++)if(this.modules[n][o-l]==null){var c=!1;i<e.length&&(c=(e[i]>>>a&1)==1);var d=ta.getMask(t,n,o-l);d&&(c=!c),this.modules[n][o-l]=c,a--,a==-1&&(i++,a=7)}if(n+=r,n<0||this.moduleCount<=n){n-=r,r=-r;break}}};As.PAD0=236;As.PAD1=17;As.createData=function(e,t,r){for(var n=eS.getRSBlocks(e,t),a=new tS,i=0;i<r.length;i++){var o=r[i];a.put(o.mode,4),a.put(o.getLength(),ta.getLengthInBits(o.mode,e)),o.write(a)}for(var l=0,i=0;i<n.length;i++)l+=n[i].dataCount;if(a.getLengthInBits()>l*8)throw new Error("code length overflow. ("+a.getLengthInBits()+">"+l*8+")");for(a.getLengthInBits()+4<=l*8&&a.put(0,4);a.getLengthInBits()%8!=0;)a.putBit(!1);for(;!(a.getLengthInBits()>=l*8||(a.put(As.PAD0,8),a.getLengthInBits()>=l*8));)a.put(As.PAD1,8);return As.createBytes(a,n)};As.createBytes=function(e,t){for(var r=0,n=0,a=0,i=new Array(t.length),o=new Array(t.length),l=0;l<t.length;l++){var c=t[l].dataCount,d=t[l].totalCount-c;n=Math.max(n,c),a=Math.max(a,d),i[l]=new Array(c);for(var u=0;u<i[l].length;u++)i[l][u]=255&e.buffer[u+r];r+=c;var m=ta.getErrorCorrectPolynomial(d),h=new QY(i[l],m.getLength()-1),g=h.mod(m);o[l]=new Array(m.getLength()-1);for(var u=0;u<o[l].length;u++){var j=u+g.getLength()-o[l].length;o[l][u]=j>=0?g.get(j):0}}for(var y=0,u=0;u<t.length;u++)y+=t[u].totalCount;for(var v=new Array(y),f=0,u=0;u<n;u++)for(var l=0;l<t.length;l++)u<i[l].length&&(v[f++]=i[l][u]);for(var u=0;u<a;u++)for(var l=0;l<t.length;l++)u<o[l].length&&(v[f++]=o[l][u]);return v};var JY=As,bg={};Object.defineProperty(bg,"__esModule",{value:!0});var ZY=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},eq=mx,Mr=sS(eq),rS=p,Mc=sS(rS);function sS(e){return e&&e.__esModule?e:{default:e}}function tq(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}var rq={bgColor:Mr.default.oneOfType([Mr.default.object,Mr.default.string]).isRequired,bgD:Mr.default.string.isRequired,fgColor:Mr.default.oneOfType([Mr.default.object,Mr.default.string]).isRequired,fgD:Mr.default.string.isRequired,size:Mr.default.number.isRequired,title:Mr.default.string,viewBoxSize:Mr.default.number.isRequired,xmlns:Mr.default.string},jg=(0,rS.forwardRef)(function(e,t){var r=e.bgColor,n=e.bgD,a=e.fgD,i=e.fgColor,o=e.size,l=e.title,c=e.viewBoxSize,d=e.xmlns,u=d===void 0?"http://www.w3.org/2000/svg":d,m=tq(e,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return Mc.default.createElement("svg",ZY({},m,{height:o,ref:t,viewBox:"0 0 "+c+" "+c,width:o,xmlns:u}),l?Mc.default.createElement("title",null,l):null,Mc.default.createElement("path",{d:n,fill:r}),Mc.default.createElement("path",{d:a,fill:i}))});jg.displayName="QRCodeSvg";jg.propTypes=rq;bg.default=jg;Object.defineProperty(mm,"__esModule",{value:!0});mm.QRCode=void 0;var sq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nq=mx,Ys=tc(nq),aq=G1,iq=tc(aq),oq=JY,lq=tc(oq),nS=p,cq=tc(nS),dq=bg,uq=tc(dq);function tc(e){return e&&e.__esModule?e:{default:e}}function mq(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}var hq={bgColor:Ys.default.oneOfType([Ys.default.object,Ys.default.string]),fgColor:Ys.default.oneOfType([Ys.default.object,Ys.default.string]),level:Ys.default.string,size:Ys.default.number,value:Ys.default.string.isRequired},hm=(0,nS.forwardRef)(function(e,t){var r=e.bgColor,n=r===void 0?"#FFFFFF":r,a=e.fgColor,i=a===void 0?"#000000":a,o=e.level,l=o===void 0?"L":o,c=e.size,d=c===void 0?256:c,u=e.value,m=mq(e,["bgColor","fgColor","level","size","value"]),h=new lq.default(-1,iq.default[l]);h.addData(u),h.make();var g=h.modules;return cq.default.createElement(uq.default,sq({},m,{bgColor:n,bgD:g.map(function(j,y){return j.map(function(v,f){return v?"":"M "+f+" "+y+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:i,fgD:g.map(function(j,y){return j.map(function(v,f){return v?"M "+f+" "+y+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:t,size:d,viewBoxSize:g.length}))});mm.QRCode=hm;hm.displayName="QRCode";hm.propTypes=hq;var fq=mm.default=hm;const pq=()=>{var pn;const{user:e}=we(),[t,r]=p.useState([]),[n,a]=p.useState([]),[i,o]=p.useState([]),[l,c]=p.useState(""),[d,u]=p.useState(""),[m,h]=p.useState(""),[g,j]=p.useState(!0),[y,v]=p.useState(null),[f,x]=p.useState(null),[b,N]=p.useState(!1),[w,S]=p.useState(null),[C,k]=p.useState(null),[A,O]=p.useState(null),[D,I]=p.useState([]),[M,E]=p.useState(null),[L,V]=p.useState(null),[G,W]=p.useState(!1),[_,T]=p.useState(null),[R,B]=p.useState(!1),[U,X]=p.useState(null),[F,H]=p.useState(!1),[Y,K]=p.useState(null),[le,q]=p.useState(!1);p.useEffect(()=>{ce(),ae()},[]),p.useEffect(()=>{ae()},[l,d,m]);const ce=async()=>{try{const[P,fe]=await Promise.all([Q.get("/admin/users?role=ABOGADO"),Q.get("/admin/users?role=CLIENTE")]);a(P.data),o(fe.data)}catch(P){console.error("Error fetching users:",P)}},ae=async()=>{try{j(!0);const P={};l&&(P.lawyerId=l),d&&(P.clientId=d),m&&(P.paymentDate=m);const fe=await Q.get("/invoices",{params:P});console.log(" Admin invoices response:",fe.data),r(fe.data),v(null)}catch(P){console.error("Error fetching invoices:",P),v("Error al cargar las facturas"),r([])}finally{j(!1)}},xe=async P=>{T(P),B(!0)},Ce=async P=>{k(P.id);try{const fe=await Q.get(`/invoices/${P.id}/pdf-qr`,{responseType:"blob"}),De=new Blob([fe.data],{type:"application/pdf"}),ve=window.URL.createObjectURL(De),Ue=document.createElement("a");Ue.href=ve,Ue.target="_blank",Ue.download=`factura_${P.numeroFactura||P.id}.pdf`,document.body.appendChild(Ue),Ue.click(),document.body.removeChild(Ue),window.URL.revokeObjectURL(ve),O(` PDF de factura ${P.numeroFactura} descargado`),setTimeout(()=>O(null),3e3)}catch(fe){console.error("Error downloading PDF:",fe),v("Error al descargar el PDF de la factura"),setTimeout(()=>v(null),3e3)}finally{k(null)}},He=P=>{x(P),N(!0)},ee=async P=>{if(confirm("Ests seguro de que quieres eliminar esta factura? Esta accin no se puede deshacer.")){S(P);try{await Q.delete(`/invoices/${P}`),O(" Factura eliminada correctamente"),ae(),setTimeout(()=>O(null),5e3)}catch(fe){console.error("Error deleting invoice:",fe),v("Error al eliminar la factura"),setTimeout(()=>v(null),5e3)}finally{S(null)}}},ge=P=>{V(P),W(!0)},Ee=async P=>{X(P),H(!0),q(!0);try{const fe=await Q.get(`/invoices/${P.id}/audit-history`);K(fe.data)}catch(fe){console.error("Error fetching audit history:",fe),v("Error al cargar el historial de auditora"),setTimeout(()=>v(null),5e3)}finally{q(!1)}},Pe=P=>{var De,ve;const fe={ID:P.id,"Nmero de Factura":P.numeroFactura,"Fecha de Factura":P.fechaFactura,"Fecha de Creacin":P.createdAt,"ltima Actualizacin":P.updatedAt,Estado:P.estado,"XML Generado":P.xml?"S":"No","XML Firmado":P.xmlFirmado?"S":"No","Sello de Tiempo":P.selloTiempo||"No aplicado",Emisor:P.emisor?`${P.emisor.name} (${P.emisor.email})`:"No especificado",Receptor:P.receptor?`${P.receptor.name} (${P.receptor.email})`:"No especificado",Expediente:P.expediente?`${P.expediente.title} (ID: ${P.expediente.id})`:"No asociado",Items:((De=P.items)==null?void 0:De.length)||0,Provisiones:((ve=P.provisionFondos)==null?void 0:ve.length)||0};return Object.entries(fe).map(([Ue,Se])=>`${Ue}: ${Se}`).join(`
`)},ke=async P=>{var fe;if(P.preventDefault(),!!f)try{const De={fechaFactura:f.fechaFactura,estado:f.estado,paymentDate:f.paymentDate,tipoIVA:f.tipoIVA,descuento:f.descuento,retencion:f.retencion,items:(fe=f.items)==null?void 0:fe.map(ve=>({description:ve.description,quantity:ve.quantity,unitPrice:ve.unitPrice}))};await Q.put(`/invoices/${f.id}`,De),O(" Factura actualizada correctamente"),N(!1),ae(),setTimeout(()=>O(null),5e3)}catch(De){console.error("Error updating invoice:",De),v("Error al actualizar la factura"),setTimeout(()=>v(null),5e3)}},Oe=P=>new Date(P).toLocaleDateString("es-ES"),Le=P=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(P||0),$t=async(P,fe)=>{E(fe);try{await navigator.clipboard.writeText(P),O(` ${fe} copiado al portapapeles`),setTimeout(()=>O(null),3e3)}catch{v("Error al copiar al portapapeles"),setTimeout(()=>v(null),3e3)}finally{E(null)}},Qr=P=>{I(fe=>fe.includes(P)?fe.filter(De=>De!==P):[...fe,P])},xs=()=>{D.length===t.length?I([]):I(t.map(P=>P.id))},Us=()=>{if(t.length===0){v("No hay facturas para exportar"),setTimeout(()=>v(null),3e3);return}const fe=[["ID","Nmero Factura","Fecha Factura","Importe Total","Estado","Abogado","Cliente","Fecha de Pago","Base Imponible","IVA","Fecha de Creacin"].join(","),...t.map(Se=>{var ot,Ft;return[Se.id,Se.numeroFactura||"",Se.fechaFactura||"",Se.importeTotal||0,Se.estado||"",((ot=Se.emisor)==null?void 0:ot.name)||"",((Ft=Se.receptor)==null?void 0:Ft.name)||"",Se.paymentDate||"",Se.baseImponible||0,Se.cuotaIVA||0,Se.createdAt||""].join(",")})].join(`
`),De=new Blob([fe],{type:"text/csv;charset=utf-8;"}),ve=document.createElement("a"),Ue=URL.createObjectURL(De);ve.setAttribute("href",Ue),ve.setAttribute("download",`facturas_${new Date().toISOString().split("T")[0]}.csv`),ve.style.visibility="hidden",document.body.appendChild(ve),ve.click(),document.body.removeChild(ve),O(" CSV exportado correctamente"),setTimeout(()=>O(null),3e3)},Qe=P=>{var ve,Ue,Se,ot;const fe={"Nmero de Factura":P.numeroFactura||"N/A","Fecha de Factura":P.fechaFactura?Oe(P.fechaFactura):"N/A","Importe Total":Le(P.importeTotal||0),Estado:P.estado||"N/A",Abogado:((ve=P.emisor)==null?void 0:ve.name)||"N/A",Cliente:((Ue=P.receptor)==null?void 0:Ue.name)||"N/A","Fecha de Pago":P.paymentDate?Oe(P.paymentDate):"N/A","Base Imponible":Le(P.baseImponible||0),IVA:Le(P.cuotaIVA||0),Items:((Se=P.items)==null?void 0:Se.length)||0,Provisiones:((ot=P.provisionFondos)==null?void 0:ot.length)||0},De=Object.entries(fe).map(([Ft,to])=>`${Ft}: ${to}`).join(`
`);$t(De,`Datos de factura ${P.numeroFactura}`)},Xt=()=>{if(D.length===0){v("No hay facturas seleccionadas"),setTimeout(()=>v(null),3e3);return}const De=t.filter(ve=>D.includes(ve.id)).map(ve=>{var Ue,Se;return{"Nmero de Factura":ve.numeroFactura||"N/A","Fecha de Factura":ve.fechaFactura?Oe(ve.fechaFactura):"N/A","Importe Total":Le(ve.importeTotal||0),Estado:ve.estado||"N/A",Abogado:((Ue=ve.emisor)==null?void 0:Ue.name)||"N/A",Cliente:((Se=ve.receptor)==null?void 0:Se.name)||"N/A"}}).map((ve,Ue)=>`Factura ${Ue+1}:
${Object.entries(ve).map(([Se,ot])=>`${Se}: ${ot}`).join(`
`)}`).join(`

`);$t(De,`Datos de ${D.length} facturas seleccionadas`)},_t=({invoice:P})=>{var fe,De,ve,Ue,Se;return s.jsxs("div",{className:"bg-white p-8 max-w-4xl mx-auto",children:[s.jsx("div",{className:"border-b-2 border-gray-300 pb-6 mb-6",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"FACTURA"}),s.jsx("div",{className:"my-4 flex flex-col items-center",children:P.qrData?s.jsxs(s.Fragment,{children:[s.jsx("h4",{className:"text-xs text-gray-600 mb-1",children:"Cdigo QR de la factura"}),s.jsx(fq,{value:P.qrData,size:120}),s.jsx("pre",{className:"text-xs mt-1 bg-gray-100 p-1 rounded",children:P.qrData})]}):s.jsx("span",{className:"text-xs text-gray-400",children:"QR no disponible"})}),s.jsxs("div",{className:"text-lg text-gray-600",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Nmero:"})," ",P.numeroFactura||"N/A"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Fecha:"})," ",P.fechaFactura?Oe(P.fechaFactura):"N/A"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Estado:"})," ",s.jsx("span",{className:`px-2 py-1 rounded text-xs ${P.estado==="emitida"?"bg-green-100 text-green-800":P.estado==="pagada"?"bg-blue-100 text-blue-800":P.estado==="anulada"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:(P.estado||"N/A").toUpperCase()})]})]})]}),s.jsxs("div",{className:"text-right text-gray-600",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Fecha de Operacin:"})," ",P.fechaOperacion?Oe(P.fechaOperacion):"N/A"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Mtodo de Pago:"})," ",P.metodoPago||"N/A"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Clave de Operacin:"})," ",P.claveOperacion||"N/A"]})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-3",children:"DATOS DEL EMISOR"}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded border",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Nombre:"})," ",((fe=P.emisor)==null?void 0:fe.name)||"N/A"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Email:"})," ",((De=P.emisor)==null?void 0:De.email)||"N/A"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Rgimen IVA:"})," ",P.regimenIvaEmisor||"N/A"]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-3",children:"DATOS DEL RECEPTOR"}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded border",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Nombre:"})," ",((ve=P.receptor)==null?void 0:ve.name)||"N/A"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Email:"})," ",((Ue=P.receptor)==null?void 0:Ue.email)||"N/A"]}),P.expediente&&s.jsxs("div",{children:[s.jsx("strong",{children:"Expediente:"})," ",P.expediente.title]})]})]})]}),P.items&&P.items.length>0&&s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-3",children:"CONCEPTOS"}),s.jsxs("table",{className:"w-full border-collapse border border-gray-300",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-gray-100",children:[s.jsx("th",{className:"border border-gray-300 px-3 py-2 text-left",children:"Descripcin"}),s.jsx("th",{className:"border border-gray-300 px-3 py-2 text-center",children:"Cantidad"}),s.jsx("th",{className:"border border-gray-300 px-3 py-2 text-right",children:"Precio Unitario"}),s.jsx("th",{className:"border border-gray-300 px-3 py-2 text-right",children:"Total"})]})}),s.jsx("tbody",{children:P.items.map((ot,Ft)=>s.jsxs("tr",{className:Ft%2===0?"bg-white":"bg-gray-50",children:[s.jsx("td",{className:"border border-gray-300 px-3 py-2",children:ot.description}),s.jsx("td",{className:"border border-gray-300 px-3 py-2 text-center",children:ot.quantity}),s.jsx("td",{className:"border border-gray-300 px-3 py-2 text-right",children:Le(ot.unitPrice)}),s.jsx("td",{className:"border border-gray-300 px-3 py-2 text-right font-semibold",children:Le(ot.total)})]},Ft))})]})]}),P.descuento&&P.descuento>0&&s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-3",children:"DESCUENTOS"}),s.jsx("div",{className:"bg-yellow-50 p-4 rounded border border-yellow-200",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"font-semibold text-yellow-800",children:["Descuento (",P.descuento,"%)"]}),s.jsxs("span",{className:"font-bold text-yellow-800 text-lg",children:["-",Le((((Se=P.items)==null?void 0:Se.reduce((ot,Ft)=>ot+Ft.quantity*Ft.unitPrice,0))||0)*(P.descuento/100))]})]})})]}),P.provisionFondos&&P.provisionFondos.length>0&&s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-3",children:"PROVISIONES DE FONDOS ASOCIADAS"}),s.jsx("div",{className:"bg-blue-50 p-4 rounded border",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-blue-200",children:[s.jsx("th",{className:"text-left py-2",children:"Descripcin"}),s.jsx("th",{className:"text-right py-2",children:"Fecha"}),s.jsx("th",{className:"text-right py-2",children:"Importe"})]})}),s.jsx("tbody",{children:P.provisionFondos.map(ot=>s.jsxs("tr",{className:"border-b border-blue-100",children:[s.jsx("td",{className:"py-2",children:ot.description||"Sin descripcin"}),s.jsx("td",{className:"text-right py-2",children:Oe(ot.date)}),s.jsx("td",{className:"text-right py-2 font-semibold",children:Le(ot.amount)})]},ot.id))})]})})]}),s.jsx("div",{className:"mb-8",children:s.jsx("div",{className:"flex justify-end",children:s.jsxs("div",{className:"w-64 space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Base Imponible:"}),s.jsx("span",{className:"font-semibold",children:Le(P.baseImponible??0)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{children:["IVA (",P.tipoIVA??21,"%):"]}),s.jsx("span",{className:"font-semibold",children:Le(P.cuotaIVA??0)})]}),s.jsxs("div",{className:"flex justify-between text-lg font-bold border-t border-gray-300 pt-2",children:[s.jsx("span",{children:"TOTAL:"}),s.jsx("span",{children:Le(P.importeTotal??0)})]})]})})}),s.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:s.jsxs("div",{className:"grid grid-cols-2 gap-8 text-sm text-gray-600",children:[s.jsxs("div",{children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Mtodo de pago:"})," ",P.metodoPago||"N/A"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Clave de operacin:"})," ",P.claveOperacion||"N/A"]})]}),s.jsxs("div",{children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Fecha de creacin:"})," ",Oe(P.createdAt)]}),P.motivoAnulacion&&s.jsxs("div",{children:[s.jsx("strong",{children:"Motivo de anulacin:"})," ",P.motivoAnulacion]})]})]})}),s.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200 flex justify-end space-x-4",children:[s.jsxs("button",{onClick:()=>Ce(P),disabled:C===P.id,className:`px-4 py-2 rounded flex items-center space-x-2 ${C===P.id?"bg-gray-400 text-white cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsx("span",{children:C===P.id?"Descargando...":" Descargar PDF"})]}),s.jsxs("button",{onClick:()=>Qe(P),disabled:M!==null,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50 flex items-center space-x-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),s.jsx("span",{children:M===`Datos de factura ${P.numeroFactura}`?"Copiando...":" Copiar Datos"})]})]})]})};return g?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):s.jsxs("div",{className:"py-6",children:[s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-semibold mb-2",children:"Gestin de Facturas"}),s.jsx("p",{className:"text-gray-600",children:"Administra todas las facturas del sistema"})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("button",{onClick:Us,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 flex items-center space-x-2",title:"Exportar todas las facturas a CSV",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsx("span",{children:"Exportar CSV"})]}),s.jsxs("button",{onClick:ae,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center space-x-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),s.jsx("span",{children:"Refrescar"})]})]})]}),A&&s.jsx("div",{className:"mb-4 p-3 bg-green-100 text-green-700 rounded",children:A}),y&&s.jsx("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded",children:y}),s.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Abogado"}),s.jsxs("select",{value:l,onChange:P=>c(P.target.value),className:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Todos"}),n.map(P=>s.jsx("option",{value:P.id,children:P.name},P.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cliente"}),s.jsxs("select",{value:d,onChange:P=>u(P.target.value),className:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Todos"}),i.map(P=>s.jsx("option",{value:P.id,children:P.name},P.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de pago"}),s.jsx("input",{type:"date",value:m,onChange:P=>h(P.target.value),className:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsx("div",{className:"flex items-end",children:s.jsx("button",{onClick:()=>{c(""),u(""),h("")},className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"Limpiar Filtros"})})]}),t.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No se encontraron facturas"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:l||d||m?"Intenta ajustar los filtros de bsqueda.":"No hay facturas registradas en el sistema."})]}):s.jsxs(s.Fragment,{children:[D.length>0&&s.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-sm text-blue-800",children:[D.length," factura",D.length!==1?"s":""," seleccionada",D.length!==1?"s":""]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:Xt,disabled:M!==null,className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 disabled:opacity-50",title:"Copiar datos de facturas seleccionadas",children:M?" Copiando...":" Copiar Seleccionadas"}),s.jsx("button",{onClick:()=>I([]),className:"px-3 py-1 bg-gray-600 text-white text-sm rounded hover:bg-gray-700",children:"Deseleccionar Todo"})]})]})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:s.jsx("input",{type:"checkbox",checked:D.length===t.length&&t.length>0,onChange:xs,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",title:"Seleccionar todas las facturas"})}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"N Factura"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Importe"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Abogado"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha de pago"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(P=>{var fe,De;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("input",{type:"checkbox",checked:D.includes(P.id),onChange:()=>Qr(P.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",title:`Seleccionar factura ${P.numeroFactura}`})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:P.numeroFactura||"N/A"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:P.fechaFactura?Oe(P.fechaFactura):"N/A"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Le(P.importeTotal||0)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${P.estado==="emitida"?"bg-green-100 text-green-800":P.estado==="pagada"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:P.estado||"N/A"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((fe=P.emisor)==null?void 0:fe.name)||"-"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((De=P.receptor)==null?void 0:De.name)||"-"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:P.paymentDate?Oe(P.paymentDate):"-"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>xe(P),className:"text-blue-600 hover:text-blue-900 hover:bg-blue-50 px-2 py-1 rounded",title:"Ver factura completa con todos los detalles",children:" Ver"}),s.jsx("button",{onClick:()=>Qe(P),disabled:M!==null,className:"text-green-600 hover:text-green-900 px-2 py-1 rounded hover:bg-green-50",title:"Copiar datos de la factura",children:M===`Datos de factura ${P.numeroFactura}`?" Copiando...":" Copiar"}),s.jsx("button",{onClick:()=>He(P),className:"text-yellow-600 hover:text-yellow-900 px-2 py-1 rounded hover:bg-yellow-50",title:"Editar factura",children:" Editar"}),s.jsx("button",{onClick:()=>ee(P.id),disabled:w===P.id,className:`px-2 py-1 rounded ${w===P.id?"text-gray-400 cursor-not-allowed":"text-red-600 hover:text-red-900 hover:bg-red-50"}`,title:"Eliminar factura",children:w===P.id?" Borrando...":" Borrar"}),s.jsx("button",{onClick:()=>ge(P),className:"text-gray-600 hover:text-gray-900 px-2 py-1 rounded hover:bg-gray-50",title:"Ver metadatos tcnicos",children:" Metadatos"}),s.jsx("button",{onClick:()=>Ee(P),className:"text-purple-600 hover:text-purple-900 px-2 py-1 rounded hover:bg-purple-50",title:"Ver historial de cambios",children:" Auditora"})]})})]},P.id)})})]})}),s.jsxs("div",{className:"mt-4 text-sm text-gray-500",children:["Mostrando ",t.length," factura",t.length!==1?"s":""]})]})]})}),b&&f&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",role:"dialog","aria-modal":"true","aria-labelledby":"edit-invoice-title","aria-describedby":"edit-invoice-description",onClick:P=>P.target===P.currentTarget&&N(!1),children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h2",{id:"edit-invoice-title",className:"text-xl font-bold",children:["Editar Factura ",f.numeroFactura]}),s.jsx("button",{onClick:()=>N(!1),className:"text-gray-500 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded p-1","aria-label":"Cerrar modal de edicin",type:"button",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("p",{id:"edit-invoice-description",className:"sr-only",children:["Formulario para editar los detalles de la factura ",f.numeroFactura||""]}),s.jsxs("form",{onSubmit:ke,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nmero de Factura"}),s.jsx("input",{type:"text",value:f.numeroFactura||"",readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"No editable"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de Factura"}),s.jsx("input",{type:"date",value:f.fechaFactura?f.fechaFactura.split("T")[0]:"",onChange:P=>x({...f,fechaFactura:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),s.jsxs("select",{value:f.estado||"emitida",onChange:P=>x({...f,estado:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"emitida",children:"Emitida"}),s.jsx("option",{value:"pagada",children:"Pagada"}),s.jsx("option",{value:"anulada",children:"Anulada"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de Pago"}),s.jsx("input",{type:"date",value:f.paymentDate?f.paymentDate.split("T")[0]:"",onChange:P=>x({...f,paymentDate:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]})]}),s.jsxs("div",{className:"border-t pt-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Configuracin Fiscal"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo IVA (%)"}),s.jsx("input",{type:"number",step:"0.01",value:f.tipoIVA||21,onChange:P=>x({...f,tipoIVA:parseFloat(P.target.value)||21}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descuento (%)"}),s.jsx("input",{type:"number",step:"0.01",value:f.descuento||0,onChange:P=>x({...f,descuento:parseFloat(P.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Retencin (%)"}),s.jsx("input",{type:"number",step:"0.01",value:f.retencion||0,onChange:P=>x({...f,retencion:parseFloat(P.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]})]})]}),s.jsxs("div",{className:"border-t pt-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Conceptos"}),s.jsx("div",{className:"space-y-3",children:(pn=f.items)==null?void 0:pn.map((P,fe)=>s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 p-3 border border-gray-200 rounded-md",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripcin"}),s.jsx("input",{type:"text",value:P.description,onChange:De=>{const ve=[...f.items||[]];ve[fe]={...ve[fe],description:De.target.value},x({...f,items:ve})},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cantidad"}),s.jsx("input",{type:"number",value:P.quantity,onChange:De=>{const ve=[...f.items||[]];ve[fe]={...ve[fe],quantity:parseInt(De.target.value)||0,total:(parseInt(De.target.value)||0)*ve[fe].unitPrice},x({...f,items:ve})},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Precio Unitario"}),s.jsx("input",{type:"number",step:"0.01",value:P.unitPrice,onChange:De=>{const ve=[...f.items||[]];ve[fe]={...ve[fe],unitPrice:parseFloat(De.target.value)||0,total:ve[fe].quantity*(parseFloat(De.target.value)||0)},x({...f,items:ve})},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total"}),s.jsx("input",{type:"number",step:"0.01",value:P.total,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500"})]})]},fe))}),s.jsx("button",{type:"button",onClick:()=>{const P=[...f.items||[],{id:`temp-${Date.now()}`,description:"",quantity:1,unitPrice:0,total:0}];x({...f,items:P})},className:"mt-3 px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"+ Agregar Concepto"})]}),s.jsxs("div",{className:"border-t pt-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Totales"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Base Imponible"}),s.jsx("input",{type:"number",step:"0.01",value:f.baseImponible||0,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cuota IVA"}),s.jsx("input",{type:"number",step:"0.01",value:f.cuotaIVA||0,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Importe Total"}),s.jsx("input",{type:"number",step:"0.01",value:f.importeTotal||0,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500"})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[s.jsx("button",{type:"button",onClick:()=>N(!1),className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"Cancelar"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Guardar Cambios"})]})]})]})}),G&&L&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h2",{className:"text-xl font-bold",children:["Metadatos - Factura ",L.numeroFactura]}),s.jsx("button",{onClick:()=>W(!1),className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]}),s.jsx("div",{className:"mb-4",children:s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Informacin tcnica de la factura. Puedes copiar estos datos al portapapeles."})}),s.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border",children:s.jsx("pre",{className:"text-sm text-gray-800 whitespace-pre-wrap font-mono",children:Pe(L)})}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsxs("button",{onClick:()=>{const P=Pe(L);$t(P,`Metadatos de factura ${L.numeroFactura}`)},disabled:M!==null,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 flex items-center space-x-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),s.jsx("span",{children:M===`Metadatos de factura ${L.numeroFactura}`?"Copiando...":"Copiar Metadatos"})]}),s.jsx("button",{onClick:()=>W(!1),className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"Cerrar"})]})]})}),R&&_&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[95vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[s.jsxs("h2",{className:"text-xl font-bold",children:["Factura ",_.numeroFactura]}),s.jsx("button",{onClick:()=>B(!1),className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]}),s.jsx("div",{className:"p-6",children:s.jsx(_t,{invoice:_})})]})}),F&&U&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[95vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[s.jsxs("h2",{className:"text-xl font-bold",children:["Historial de Auditora - Factura ",U.numeroFactura]}),s.jsx("button",{onClick:()=>H(!1),className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]}),s.jsx("div",{className:"p-6",children:le?s.jsxs("div",{className:"flex items-center justify-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"}),s.jsx("span",{className:"ml-2",children:"Cargando historial..."})]}):Y?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[s.jsx("h3",{className:"text-lg font-medium text-blue-900 mb-2",children:"Resumen de Cambios"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Total de cambios:"})," ",Y.summary.totalChanges]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"ltima modificacin:"})," ",Y.summary.lastModified?new Date(Y.summary.lastModified).toLocaleString():"N/A"]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"ltimo modificador:"})," ",Y.summary.lastModifiedBy||"N/A"]})]})]}),Object.keys(Y.summary.changesByField).length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Cambios por Campo"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(Y.summary.changesByField).map(([P,fe])=>s.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[s.jsxs("span",{className:"font-medium",children:[P,":"]})," ",String(fe)," cambio",fe!==1?"s":""]},P))})]}),Object.keys(Y.summary.changesByUser).length>0&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Cambios por Usuario"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(Y.summary.changesByUser).map(([P,fe])=>s.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[s.jsxs("span",{className:"font-medium",children:[P,":"]})," ",String(fe)," cambio",fe!==1?"s":""]},P))})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Historial Detallado"}),s.jsx("div",{className:"space-y-3",children:Y.auditHistory.map(P=>{var fe,De;return s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${P.action==="created"?"bg-green-100 text-green-800":P.action==="updated"?"bg-blue-100 text-blue-800":P.action==="deleted"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:P.action==="created"?"Creado":P.action==="updated"?"Actualizado":P.action==="deleted"?"Eliminado":P.action==="status_changed"?"Estado Cambiado":P.action}),P.fieldName&&s.jsxs("span",{className:"text-sm text-gray-600",children:["Campo: ",P.fieldName]})]}),s.jsx("span",{className:"text-sm text-gray-500",children:new Date(P.createdAt).toLocaleString()})]}),s.jsx("div",{className:"text-sm text-gray-700 mb-2",children:P.description}),P.fieldName&&P.oldValue!==P.newValue&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-red-600",children:"Valor anterior:"}),s.jsx("div",{className:"bg-red-50 p-2 rounded mt-1 break-all",children:P.oldValue||"Vaco"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-green-600",children:"Nuevo valor:"}),s.jsx("div",{className:"bg-green-50 p-2 rounded mt-1 break-all",children:P.newValue||"Vaco"})]})]}),s.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[s.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-500",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Usuario:"})," ",(fe=P.user)==null?void 0:fe.name," (",(De=P.user)==null?void 0:De.email,")"]}),P.ipAddress&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"IP:"})," ",P.ipAddress]})]}),P.userAgent&&s.jsxs("div",{className:"text-xs text-gray-500 mt-1 break-all",children:[s.jsx("span",{className:"font-medium",children:"User Agent:"})," ",P.userAgent]})]})]},P.id)})})]})]}):s.jsx("div",{className:"text-center py-8 text-gray-500",children:"No se encontr historial de auditora para esta factura."})})]})})]})},xq=()=>{const[e,t]=p.useState(null),[r,n]=p.useState(!0),[a,i]=p.useState(null);p.useEffect(()=>{o()},[]);const o=async()=>{var u,m;try{n(!0);const h=localStorage.getItem("token"),g=await Q.get("/admin/reports",{headers:{Authorization:`Bearer ${h}`}});t(g.data),i(null)}catch(h){console.error("Error fetching reports:",h),i(((m=(u=h.response)==null?void 0:u.data)==null?void 0:m.message)||"Error al cargar reportes")}finally{n(!1)}},l=u=>{if(!u||u===0)return"0 Bytes";const m=1024,h=["Bytes","KB","MB","GB"],g=Math.floor(Math.log(u)/Math.log(m));return parseFloat((u/Math.pow(m,g)).toFixed(2))+" "+h[g]},c=u=>{switch(u){case"ABIERTO":return"Abierto";case"EN_PROCESO":return"En Proceso";case"CERRADO":return"Cerrado";case"PENDIENTE":return"Pendiente";case"EN_PROGRESO":return"En Progreso";case"COMPLETADA":return"Completada";case"CANCELADA":return"Cancelada";default:return u}},d=u=>{switch(u){case"ADMIN":return"Administrador";case"ABOGADO":return"Abogado";case"CLIENTE":return"Cliente";default:return u}};return r?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):a?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 text-xl mb-4",children:"Error"}),s.jsx("div",{className:"text-gray-600",children:a}),s.jsx("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Reintentar"})]})}):s.jsx("div",{className:"py-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Reportes del Sistema"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Anlisis y estadsticas del sistema"})]}),s.jsx("button",{onClick:o,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Actualizar"})]})}),s.jsxs("nav",{className:"mb-8 bg-gray-50 p-4 rounded-lg shadow flex flex-wrap gap-3 items-center",children:[s.jsx("span",{className:"font-semibold text-gray-700 mr-2",children:"Ir a seccin:"}),s.jsx("a",{href:"#expedientes",className:"px-3 py-1 bg-blue-100 text-blue-800 rounded hover:bg-blue-200 transition-colors",children:"Expedientes"}),s.jsx("a",{href:"#tareas",className:"px-3 py-1 bg-green-100 text-green-800 rounded hover:bg-green-200 transition-colors",children:"Tareas"}),s.jsx("a",{href:"#usuarios",className:"px-3 py-1 bg-purple-100 text-purple-800 rounded hover:bg-purple-200 transition-colors",children:"Actividad de Usuarios"}),s.jsx("a",{href:"#documentos",className:"px-3 py-1 bg-yellow-100 text-yellow-800 rounded hover:bg-yellow-200 transition-colors",children:"Documentos"}),s.jsx("a",{href:"#citas",className:"px-3 py-1 bg-pink-100 text-pink-800 rounded hover:bg-pink-200 transition-colors",children:"Citas por Mes"})]}),e&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Estadsticas Generales"}),s.jsxs("div",{id:"expedientes",className:"bg-white p-6 rounded-lg shadow scroll-mt-24",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Estadsticas de Expedientes"}),s.jsx("a",{href:"/admin/cases",className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm transition-colors",target:"_blank",rel:"noopener noreferrer",children:"Ver todos"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:e.casesByStatus.map(u=>s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-sm font-medium text-gray-500",children:c(u.status)}),s.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:u._count.status})]},u.status))})]}),s.jsxs("div",{id:"tareas",className:"bg-white p-6 rounded-lg shadow scroll-mt-24",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Estadsticas de Tareas"}),s.jsx("a",{href:"/admin/tasks",className:"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 text-sm transition-colors",target:"_blank",rel:"noopener noreferrer",children:"Ver todos"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:e.tasksByStatus.map(u=>s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-sm font-medium text-gray-500",children:c(u.status)}),s.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:u._count.status})]},u.status))})]}),s.jsxs("div",{id:"usuarios",className:"bg-white p-6 rounded-lg shadow scroll-mt-24",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Actividad de Usuarios"}),s.jsx("a",{href:"/admin/users",className:"px-3 py-1 bg-purple-600 text-white rounded hover:bg-purple-700 text-sm transition-colors",target:"_blank",rel:"noopener noreferrer",children:"Ver todos"})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Usuario"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rol"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expedientes"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Citas"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tareas"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Registro"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.userActivity.map(u=>{var m,h,g;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm font-medium text-gray-900",children:u.name})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:d(u.role)})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((m=u.expedientesAsLawyer)==null?void 0:m.length)||0}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((h=u.appointmentsAsLawyer)==null?void 0:h.length)||0}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((g=u.assignedTasks)==null?void 0:g.length)||0}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(u.createdAt).toLocaleDateString()})]},u.id)})})]})})]}),s.jsxs("div",{id:"documentos",className:"bg-white p-6 rounded-lg shadow scroll-mt-24",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Estadsticas de Documentos"}),s.jsx("a",{href:"/admin/documents",className:"px-3 py-1 bg-yellow-600 text-white rounded hover:bg-yellow-700 text-sm transition-colors",target:"_blank",rel:"noopener noreferrer",children:"Ver todos"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.documentStats.map(u=>s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-sm font-medium text-gray-500",children:u.mimeType}),s.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:u._count.mimeType}),s.jsx("div",{className:"text-sm text-gray-500",children:l(u._sum.fileSize)})]},u.mimeType))})]}),s.jsxs("div",{id:"citas",className:"bg-white p-6 rounded-lg shadow scroll-mt-24",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Citas por Mes"}),s.jsx("a",{href:"/admin/appointments",className:"px-3 py-1 bg-pink-600 text-white rounded hover:bg-pink-700 text-sm transition-colors",target:"_blank",rel:"noopener noreferrer",children:"Ver todos"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.appointmentsByMonth.map(u=>s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[s.jsx("div",{className:"text-sm font-medium text-gray-500",children:new Date(u.date).toLocaleDateString("es-ES",{month:"long",year:"numeric"})}),s.jsx("div",{className:"text-2xl font-semibold text-gray-900",children:u._count.date})]},u.date))})]})]})]})})};async function gq(e){return(await Q.get("/parametros",{headers:{Authorization:`Bearer ${e}`}})).data}async function vq(e,t){return(await Q.post("/parametros",e,{headers:{Authorization:`Bearer ${t}`}})).data}async function yq(e,t,r){return(await Q.put(`/parametros/${e}`,t,{headers:{Authorization:`Bearer ${r}`}})).data}async function bq(e,t){await Q.delete(`/parametros/${e}`,{headers:{Authorization:`Bearer ${t}`}})}const jq=()=>{const e=localStorage.getItem("token"),[t,r]=p.useState([]),[n,a]=p.useState(!0),[i,o]=p.useState(null),[l,c]=p.useState(!1),[d,u]=p.useState(null),[m,h]=p.useState({}),[g,j]=p.useState(!1),y=async()=>{var w,S;a(!0),o(null);try{if(!e)throw new Error("No autenticado");const C=await gq(e);r(C)}catch(C){o(((S=(w=C.response)==null?void 0:w.data)==null?void 0:S.message)||C.message||"Error al cargar parmetros")}finally{a(!1)}};p.useEffect(()=>{y()},[e]);const v=w=>{u(w||null),h(w||{}),c(!0)},f=()=>{c(!1),u(null),h({})},x=w=>{h({...m,[w.target.name]:w.target.value})},b=async()=>{var w,S;j(!0),o(null);try{if(!e)throw new Error("No autenticado");d?await yq(d.id,{valor:m.valor,etiqueta:m.etiqueta,tipo:m.tipo},e):await vq({clave:m.clave,valor:m.valor,etiqueta:m.etiqueta,tipo:m.tipo},e),await y(),f()}catch(C){o(((S=(w=C.response)==null?void 0:w.data)==null?void 0:S.message)||C.message||"Error al guardar parmetro")}finally{j(!1)}},N=async w=>{var S,C;if(window.confirm("Seguro que deseas eliminar este parmetro?")){o(null),j(!0);try{if(!e)throw new Error("No autenticado");await bq(w,e),await y()}catch(k){o(((C=(S=k.response)==null?void 0:S.data)==null?void 0:C.message)||k.message||"Error al eliminar parmetro")}finally{j(!1)}}};return s.jsxs("div",{className:"max-w-3xl mx-auto py-8",children:[s.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Configuracin de Parmetros Globales"}),s.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[s.jsx("button",{className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",onClick:async()=>{var w,S;if(window.confirm("Desea inicializar los parmetros por defecto? Esto crear o actualizar los parmetros bsicos del sistema."))try{if(!e)throw new Error("No autenticado");await fetch("undefined/api/parametros/initialize",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}}),await y(),alert("Parmetros inicializados correctamente")}catch(C){o(((S=(w=C.response)==null?void 0:w.data)==null?void 0:S.message)||C.message||"Error al inicializar parmetros")}},children:" Inicializar Parmetros"}),s.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",onClick:()=>v(),children:"Nuevo Parmetro"})]}),n?s.jsx("div",{className:"text-center py-8",children:"Cargando..."}):i?s.jsx("div",{className:"text-center text-red-600",children:i}):s.jsxs("table",{className:"min-w-full bg-white border rounded shadow",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 border",children:"Clave"}),s.jsx("th",{className:"px-4 py-2 border",children:"Valor"}),s.jsx("th",{className:"px-4 py-2 border",children:"Etiqueta"}),s.jsx("th",{className:"px-4 py-2 border",children:"Tipo"}),s.jsx("th",{className:"px-4 py-2 border",children:"Acciones"})]})}),s.jsx("tbody",{children:t.map(w=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-2 border font-mono text-sm",children:w.clave}),s.jsx("td",{className:"px-4 py-2 border",children:w.tipo==="html"?s.jsxs("div",{className:"max-w-xs",children:[s.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"HTML Content"}),s.jsxs("div",{className:"text-xs bg-gray-100 p-2 rounded max-h-20 overflow-y-auto",children:[w.valor.substring(0,100),"..."]})]}):w.valor.length>50?s.jsx("div",{className:"max-w-xs",children:s.jsxs("div",{className:"text-sm truncate",title:w.valor,children:[w.valor.substring(0,50),"..."]})}):s.jsx("span",{className:"text-sm",children:w.valor})}),s.jsx("td",{className:"px-4 py-2 border text-sm",children:w.etiqueta}),s.jsx("td",{className:"px-4 py-2 border",children:s.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${w.tipo==="html"?"bg-purple-100 text-purple-800":w.tipo==="email"?"bg-blue-100 text-blue-800":w.tipo==="url"?"bg-green-100 text-green-800":w.tipo==="text"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:w.tipo})}),s.jsxs("td",{className:"px-4 py-2 border",children:[s.jsx("button",{className:"text-blue-600 hover:underline mr-2 text-sm",onClick:()=>v(w),children:"Editar"}),s.jsx("button",{className:"text-red-600 hover:underline text-sm",onClick:()=>N(w.id),disabled:g,children:"Eliminar"})]})]},w.id))})]}),l&&s.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-30 z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 w-full max-w-md",children:[s.jsxs("h2",{className:"text-xl font-bold mb-4",children:[d?"Editar":"Nuevo"," Parmetro"]}),i&&s.jsx("div",{className:"text-red-600 mb-2",children:i}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block mb-1 font-medium",children:"Clave"}),s.jsx("input",{type:"text",name:"clave",value:m.clave||"",onChange:x,className:"w-full border px-3 py-2 rounded",disabled:!!d})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block mb-1 font-medium",children:"Valor"}),m.tipo==="html"||m.tipo==="text"?s.jsx("textarea",{name:"valor",value:m.valor||"",onChange:w=>h({...m,valor:w.target.value}),className:"w-full border px-3 py-2 rounded",rows:m.tipo==="html"?10:5,placeholder:m.tipo==="html"?"Contenido HTML...":"Texto largo..."}):s.jsx("input",{type:m.tipo==="email"?"email":m.tipo==="number"?"number":"text",name:"valor",value:m.valor||"",onChange:x,className:"w-full border px-3 py-2 rounded"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block mb-1 font-medium",children:"Etiqueta"}),s.jsx("input",{type:"text",name:"etiqueta",value:m.etiqueta||"",onChange:x,className:"w-full border px-3 py-2 rounded"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block mb-1 font-medium",children:"Tipo"}),s.jsxs("select",{name:"tipo",value:m.tipo||"",onChange:x,className:"w-full border px-3 py-2 rounded",children:[s.jsx("option",{value:"",children:"Selecciona tipo"}),s.jsx("option",{value:"string",children:"Texto"}),s.jsx("option",{value:"number",children:"Nmero"}),s.jsx("option",{value:"email",children:"Email"}),s.jsx("option",{value:"url",children:"URL"}),s.jsx("option",{value:"text",children:"Texto largo"}),s.jsx("option",{value:"html",children:"HTML"}),s.jsx("option",{value:"image",children:"Imagen/Base64"}),s.jsx("option",{value:"boolean",children:"Booleano"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx("button",{className:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",onClick:f,disabled:g,children:"Cancelar"}),s.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:b,disabled:g,children:g?"Guardando...":"Guardar"})]})]})})]})},Nq=()=>{const{user:e}=we(),[t,r]=p.useState([]),[n,a]=p.useState(!0),[i,o]=p.useState(null),[l,c]=p.useState(null),[d,u]=p.useState(!1),[m,h]=p.useState({title:"",description:"",icon:"",orden:0});p.useEffect(()=>{g()},[]);const g=async()=>{try{a(!0);const x=await fetch("undefined/api/parametros/services");if(x.ok){const b=await x.json();r(b)}else throw new Error("Error al cargar los servicios")}catch(x){console.error("Error fetching services:",x),o("Error al cargar los servicios")}finally{a(!1)}},j=async x=>{x.preventDefault();try{const b=l?`undefined/api/parametros/services/${l.id}`:"undefined/api/parametros/services";if((await fetch(b,{method:l?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(m)})).ok)await g(),c(null),u(!1),h({title:"",description:"",icon:"",orden:0});else throw new Error("Error al guardar el servicio")}catch(b){console.error("Error saving service:",b),o("Error al guardar el servicio")}},y=x=>{c(x),h({title:x.title,description:x.description,icon:x.icon,orden:x.orden}),u(!0)},v=async x=>{if(confirm("Ests seguro de que quieres eliminar este servicio?"))try{if((await fetch(`undefined/api/parametros/services/${x}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)await g();else throw new Error("Error al eliminar el servicio")}catch(b){console.error("Error deleting service:",b),o("Error al eliminar el servicio")}},f=()=>{c(null),u(!1),h({title:"",description:"",icon:"",orden:0})};return!e||e.role!=="ADMIN"?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Acceso Denegado"}),s.jsx("p",{className:"text-gray-600",children:"No tienes permisos para acceder a esta pgina."})]})}):s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Gestin de Servicios"}),s.jsx("p",{className:"text-gray-600",children:"Administra los servicios que se muestran en el frontend"})]}),i&&s.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:s.jsx("p",{className:"text-red-800",children:i})}),s.jsx("div",{className:"mb-6",children:s.jsx("button",{onClick:()=>u(!0),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"+ Agregar Nuevo Servicio"})}),d&&s.jsxs("div",{className:"mb-8 p-6 bg-gray-50 rounded-lg",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:l?"Editar Servicio":"Agregar Nuevo Servicio"}),s.jsxs("form",{onSubmit:j,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ttulo *"}),s.jsx("input",{type:"text",value:m.title,onChange:x=>h({...m,title:x.target.value}),required:!0,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Icono *"}),s.jsx("input",{type:"text",value:m.icon,onChange:x=>h({...m,icon:x.target.value}),required:!0,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:""})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripcin *"}),s.jsx("textarea",{value:m.description,onChange:x=>h({...m,description:x.target.value}),required:!0,rows:4,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Orden"}),s.jsx("input",{type:"number",value:m.orden,onChange:x=>h({...m,orden:parseInt(x.target.value)||0}),className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{className:"flex space-x-4",children:[s.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:l?"Actualizar":"Guardar"}),s.jsx("button",{type:"button",onClick:f,className:"bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition-colors",children:"Cancelar"})]})]})]}),n?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Cargando servicios..."})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(x=>s.jsxs("div",{className:"bg-white p-6 rounded-lg border shadow-sm",children:[s.jsxs("div",{className:"flex items-start space-x-4 mb-4",children:[s.jsx("div",{className:"text-3xl",children:x.icon}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-1",children:x.title}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Orden: ",x.orden]})]})]}),s.jsx("p",{className:"text-gray-600 mb-4 text-sm",children:x.description}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>y(x),className:"bg-blue-600 text-white px-4 py-2 rounded text-sm hover:bg-blue-700 transition-colors",children:"Editar"}),s.jsx("button",{onClick:()=>v(x.id),className:"bg-red-600 text-white px-4 py-2 rounded text-sm hover:bg-red-700 transition-colors",children:"Eliminar"})]})]},x.id))}),!n&&t.length===0&&s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-gray-600",children:"No hay servicios configurados."})})]})};function wq(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return p.useMemo(()=>n=>{t.forEach(a=>a(n))},t)}const fm=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Qi(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Ng(e){return"nodeType"in e}function ar(e){var t,r;return e?Qi(e)?e:Ng(e)&&(t=(r=e.ownerDocument)==null?void 0:r.defaultView)!=null?t:window:window}function wg(e){const{Document:t}=ar(e);return e instanceof t}function rc(e){return Qi(e)?!1:e instanceof ar(e).HTMLElement}function aS(e){return e instanceof ar(e).SVGElement}function Ji(e){return e?Qi(e)?e.document:Ng(e)?wg(e)?e:rc(e)||aS(e)?e.ownerDocument:document:document:document}const Ls=fm?p.useLayoutEffect:p.useEffect;function pm(e){const t=p.useRef(e);return Ls(()=>{t.current=e}),p.useCallback(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return t.current==null?void 0:t.current(...n)},[])}function Sq(){const e=p.useRef(null),t=p.useCallback((n,a)=>{e.current=setInterval(n,a)},[]),r=p.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,r]}function Tl(e,t){t===void 0&&(t=[e]);const r=p.useRef(e);return Ls(()=>{r.current!==e&&(r.current=e)},t),r}function sc(e,t){const r=p.useRef();return p.useMemo(()=>{const n=e(r.current);return r.current=n,n},[...t])}function su(e){const t=pm(e),r=p.useRef(null),n=p.useCallback(a=>{a!==r.current&&(t==null||t(a,r.current)),r.current=a},[]);return[r,n]}function nu(e){const t=p.useRef();return p.useEffect(()=>{t.current=e},[e]),t.current}let yh={};function xm(e,t){return p.useMemo(()=>{if(t)return t;const r=yh[e]==null?0:yh[e]+1;return yh[e]=r,e+"-"+r},[e,t])}function iS(e){return function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return n.reduce((i,o)=>{const l=Object.entries(o);for(const[c,d]of l){const u=i[c];u!=null&&(i[c]=u+e*d)}return i},{...t})}}const pi=iS(1),au=iS(-1);function Cq(e){return"clientX"in e&&"clientY"in e}function gm(e){if(!e)return!1;const{KeyboardEvent:t}=ar(e.target);return t&&e instanceof t}function Eq(e){if(!e)return!1;const{TouchEvent:t}=ar(e.target);return t&&e instanceof t}function iu(e){if(Eq(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return Cq(e)?{x:e.clientX,y:e.clientY}:null}const qn=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[qn.Translate.toString(e),qn.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:n}=e;return t+" "+r+"ms "+n}}}),Jy="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function kq(e){return e.matches(Jy)?e:e.querySelector(Jy)}const Dq={display:"none"};function Aq(e){let{id:t,value:r}=e;return z.createElement("div",{id:t,style:Dq},r)}function Tq(e){let{id:t,announcement:r,ariaLiveType:n="assertive"}=e;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return z.createElement("div",{id:t,style:a,role:"status","aria-live":n,"aria-atomic":!0},r)}function _q(){const[e,t]=p.useState("");return{announce:p.useCallback(n=>{n!=null&&t(n)},[]),announcement:e}}const oS=p.createContext(null);function Oq(e){const t=p.useContext(oS);p.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function Mq(){const[e]=p.useState(()=>new Set),t=p.useCallback(n=>(e.add(n),()=>e.delete(n)),[e]);return[p.useCallback(n=>{let{type:a,event:i}=n;e.forEach(o=>{var l;return(l=o[a])==null?void 0:l.call(o,i)})},[e]),t]}const Rq={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Pq={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Lq(e){let{announcements:t=Pq,container:r,hiddenTextDescribedById:n,screenReaderInstructions:a=Rq}=e;const{announce:i,announcement:o}=_q(),l=xm("DndLiveRegion"),[c,d]=p.useState(!1);if(p.useEffect(()=>{d(!0)},[]),Oq(p.useMemo(()=>({onDragStart(m){let{active:h}=m;i(t.onDragStart({active:h}))},onDragMove(m){let{active:h,over:g}=m;t.onDragMove&&i(t.onDragMove({active:h,over:g}))},onDragOver(m){let{active:h,over:g}=m;i(t.onDragOver({active:h,over:g}))},onDragEnd(m){let{active:h,over:g}=m;i(t.onDragEnd({active:h,over:g}))},onDragCancel(m){let{active:h,over:g}=m;i(t.onDragCancel({active:h,over:g}))}}),[i,t])),!c)return null;const u=z.createElement(z.Fragment,null,z.createElement(Aq,{id:n,value:a.draggable}),z.createElement(Tq,{id:l,announcement:o}));return r?pa.createPortal(u,r):u}var wt;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(wt||(wt={}));function ou(){}function Iq(e,t){return p.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function $q(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return p.useMemo(()=>[...t].filter(n=>n!=null),[...t])}const hs=Object.freeze({x:0,y:0});function Fq(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Bq(e,t){const r=iu(e);if(!r)return"0 0";const n={x:(r.x-t.left)/t.width*100,y:(r.y-t.top)/t.height*100};return n.x+"% "+n.y+"%"}function zq(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return r-n}function Uq(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return n-r}function Vq(e,t){if(!e||e.length===0)return null;const[r]=e;return r[t]}function Zy(e,t,r){return t===void 0&&(t=e.left),r===void 0&&(r=e.top),{x:t+e.width*.5,y:r+e.height*.5}}const Hq=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const a=Zy(t,t.left,t.top),i=[];for(const o of n){const{id:l}=o,c=r.get(l);if(c){const d=Fq(Zy(c),a);i.push({id:l,data:{droppableContainer:o,value:d}})}}return i.sort(zq)};function Wq(e,t){const r=Math.max(t.top,e.top),n=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),o=a-n,l=i-r;if(n<a&&r<i){const c=t.width*t.height,d=e.width*e.height,u=o*l,m=u/(c+d-u);return Number(m.toFixed(4))}return 0}const Yq=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const a=[];for(const i of n){const{id:o}=i,l=r.get(o);if(l){const c=Wq(l,t);c>0&&a.push({id:o,data:{droppableContainer:i,value:c}})}}return a.sort(Uq)};function qq(e,t,r){return{...e,scaleX:t&&r?t.width/r.width:1,scaleY:t&&r?t.height/r.height:1}}function lS(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:hs}function Gq(e){return function(r){for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return a.reduce((o,l)=>({...o,top:o.top+e*l.y,bottom:o.bottom+e*l.y,left:o.left+e*l.x,right:o.right+e*l.x}),{...r})}}const Kq=Gq(1);function cS(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Xq(e,t,r){const n=cS(t);if(!n)return e;const{scaleX:a,scaleY:i,x:o,y:l}=n,c=e.left-o-(1-a)*parseFloat(r),d=e.top-l-(1-i)*parseFloat(r.slice(r.indexOf(" ")+1)),u=a?e.width/a:e.width,m=i?e.height/i:e.height;return{width:u,height:m,top:d,right:c+u,bottom:d+m,left:c}}const Qq={ignoreTransform:!1};function Zi(e,t){t===void 0&&(t=Qq);let r=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:d,transformOrigin:u}=ar(e).getComputedStyle(e);d&&(r=Xq(r,d,u))}const{top:n,left:a,width:i,height:o,bottom:l,right:c}=r;return{top:n,left:a,width:i,height:o,bottom:l,right:c}}function eb(e){return Zi(e,{ignoreTransform:!0})}function Jq(e){const t=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:t,bottom:r,width:t,height:r}}function Zq(e,t){return t===void 0&&(t=ar(e).getComputedStyle(e)),t.position==="fixed"}function eG(e,t){t===void 0&&(t=ar(e).getComputedStyle(e));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const i=t[a];return typeof i=="string"?r.test(i):!1})}function Sg(e,t){const r=[];function n(a){if(t!=null&&r.length>=t||!a)return r;if(wg(a)&&a.scrollingElement!=null&&!r.includes(a.scrollingElement))return r.push(a.scrollingElement),r;if(!rc(a)||aS(a)||r.includes(a))return r;const i=ar(e).getComputedStyle(a);return a!==e&&eG(a,i)&&r.push(a),Zq(a,i)?r:n(a.parentNode)}return e?n(e):r}function dS(e){const[t]=Sg(e,1);return t??null}function bh(e){return!fm||!e?null:Qi(e)?e:Ng(e)?wg(e)||e===Ji(e).scrollingElement?window:rc(e)?e:null:null}function uS(e){return Qi(e)?e.scrollX:e.scrollLeft}function mS(e){return Qi(e)?e.scrollY:e.scrollTop}function Zf(e){return{x:uS(e),y:mS(e)}}var At;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(At||(At={}));function hS(e){return!fm||!e?!1:e===document.scrollingElement}function fS(e){const t={x:0,y:0},r=hS(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},n={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},a=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,o=e.scrollTop>=n.y,l=e.scrollLeft>=n.x;return{isTop:a,isLeft:i,isBottom:o,isRight:l,maxScroll:n,minScroll:t}}const tG={x:.2,y:.2};function rG(e,t,r,n,a){let{top:i,left:o,right:l,bottom:c}=r;n===void 0&&(n=10),a===void 0&&(a=tG);const{isTop:d,isBottom:u,isLeft:m,isRight:h}=fS(e),g={x:0,y:0},j={x:0,y:0},y={height:t.height*a.y,width:t.width*a.x};return!d&&i<=t.top+y.height?(g.y=At.Backward,j.y=n*Math.abs((t.top+y.height-i)/y.height)):!u&&c>=t.bottom-y.height&&(g.y=At.Forward,j.y=n*Math.abs((t.bottom-y.height-c)/y.height)),!h&&l>=t.right-y.width?(g.x=At.Forward,j.x=n*Math.abs((t.right-y.width-l)/y.width)):!m&&o<=t.left+y.width&&(g.x=At.Backward,j.x=n*Math.abs((t.left+y.width-o)/y.width)),{direction:g,speed:j}}function sG(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:t,left:r,right:n,bottom:a}=e.getBoundingClientRect();return{top:t,left:r,right:n,bottom:a,width:e.clientWidth,height:e.clientHeight}}function pS(e){return e.reduce((t,r)=>pi(t,Zf(r)),hs)}function nG(e){return e.reduce((t,r)=>t+uS(r),0)}function aG(e){return e.reduce((t,r)=>t+mS(r),0)}function xS(e,t){if(t===void 0&&(t=Zi),!e)return;const{top:r,left:n,bottom:a,right:i}=t(e);dS(e)&&(a<=0||i<=0||r>=window.innerHeight||n>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const iG=[["x",["left","right"],nG],["y",["top","bottom"],aG]];class Cg{constructor(t,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=Sg(r),a=pS(n);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,o,l]of iG)for(const c of o)Object.defineProperty(this,c,{get:()=>{const d=l(n),u=a[i]-d;return this.rect[c]+u},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Uo{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...r)})},this.target=t}add(t,r,n){var a;(a=this.target)==null||a.addEventListener(t,r,n),this.listeners.push([t,r,n])}}function oG(e){const{EventTarget:t}=ar(e);return e instanceof t?e:Ji(e)}function jh(e,t){const r=Math.abs(e.x),n=Math.abs(e.y);return typeof t=="number"?Math.sqrt(r**2+n**2)>t:"x"in t&&"y"in t?r>t.x&&n>t.y:"x"in t?r>t.x:"y"in t?n>t.y:!1}var Pr;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Pr||(Pr={}));function tb(e){e.preventDefault()}function lG(e){e.stopPropagation()}var ze;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(ze||(ze={}));const gS={start:[ze.Space,ze.Enter],cancel:[ze.Esc],end:[ze.Space,ze.Enter,ze.Tab]},cG=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case ze.Right:return{...r,x:r.x+25};case ze.Left:return{...r,x:r.x-25};case ze.Down:return{...r,y:r.y+25};case ze.Up:return{...r,y:r.y-25}}};class vS{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:r}}=t;this.props=t,this.listeners=new Uo(Ji(r)),this.windowListeners=new Uo(ar(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Pr.Resize,this.handleCancel),this.windowListeners.add(Pr.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Pr.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:r}=this.props,n=t.node.current;n&&xS(n),r(hs)}handleKeyDown(t){if(gm(t)){const{active:r,context:n,options:a}=this.props,{keyboardCodes:i=gS,coordinateGetter:o=cG,scrollBehavior:l="smooth"}=a,{code:c}=t;if(i.end.includes(c)){this.handleEnd(t);return}if(i.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:d}=n.current,u=d?{x:d.left,y:d.top}:hs;this.referenceCoordinates||(this.referenceCoordinates=u);const m=o(t,{active:r,context:n.current,currentCoordinates:u});if(m){const h=au(m,u),g={x:0,y:0},{scrollableAncestors:j}=n.current;for(const y of j){const v=t.code,{isTop:f,isRight:x,isLeft:b,isBottom:N,maxScroll:w,minScroll:S}=fS(y),C=sG(y),k={x:Math.min(v===ze.Right?C.right-C.width/2:C.right,Math.max(v===ze.Right?C.left:C.left+C.width/2,m.x)),y:Math.min(v===ze.Down?C.bottom-C.height/2:C.bottom,Math.max(v===ze.Down?C.top:C.top+C.height/2,m.y))},A=v===ze.Right&&!x||v===ze.Left&&!b,O=v===ze.Down&&!N||v===ze.Up&&!f;if(A&&k.x!==m.x){const D=y.scrollLeft+h.x,I=v===ze.Right&&D<=w.x||v===ze.Left&&D>=S.x;if(I&&!h.y){y.scrollTo({left:D,behavior:l});return}I?g.x=y.scrollLeft-D:g.x=v===ze.Right?y.scrollLeft-w.x:y.scrollLeft-S.x,g.x&&y.scrollBy({left:-g.x,behavior:l});break}else if(O&&k.y!==m.y){const D=y.scrollTop+h.y,I=v===ze.Down&&D<=w.y||v===ze.Up&&D>=S.y;if(I&&!h.x){y.scrollTo({top:D,behavior:l});return}I?g.y=y.scrollTop-D:g.y=v===ze.Down?y.scrollTop-w.y:y.scrollTop-S.y,g.y&&y.scrollBy({top:-g.y,behavior:l});break}}this.handleMove(t,pi(au(m,this.referenceCoordinates),g))}}}handleMove(t,r){const{onMove:n}=this.props;t.preventDefault(),n(r)}handleEnd(t){const{onEnd:r}=this.props;t.preventDefault(),this.detach(),r()}handleCancel(t){const{onCancel:r}=this.props;t.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}vS.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:n=gS,onActivation:a}=t,{active:i}=r;const{code:o}=e.nativeEvent;if(n.start.includes(o)){const l=i.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),a==null||a({event:e.nativeEvent}),!0)}return!1}}];function rb(e){return!!(e&&"distance"in e)}function sb(e){return!!(e&&"delay"in e)}class Eg{constructor(t,r,n){var a;n===void 0&&(n=oG(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=r;const{event:i}=t,{target:o}=i;this.props=t,this.events=r,this.document=Ji(o),this.documentListeners=new Uo(this.document),this.listeners=new Uo(n),this.windowListeners=new Uo(ar(o)),this.initialCoordinates=(a=iu(i))!=null?a:hs,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:r,bypassActivationConstraint:n}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Pr.Resize,this.handleCancel),this.windowListeners.add(Pr.DragStart,tb),this.windowListeners.add(Pr.VisibilityChange,this.handleCancel),this.windowListeners.add(Pr.ContextMenu,tb),this.documentListeners.add(Pr.Keydown,this.handleKeydown),r){if(n!=null&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(sb(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(rb(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,r){const{active:n,onPending:a}=this.props;a(n,t,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:t}=this,{onStart:r}=this.props;t&&(this.activated=!0,this.documentListeners.add(Pr.Click,lG,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Pr.SelectionChange,this.removeTextSelection),r(t))}handleMove(t){var r;const{activated:n,initialCoordinates:a,props:i}=this,{onMove:o,options:{activationConstraint:l}}=i;if(!a)return;const c=(r=iu(t))!=null?r:hs,d=au(a,c);if(!n&&l){if(rb(l)){if(l.tolerance!=null&&jh(d,l.tolerance))return this.handleCancel();if(jh(d,l.distance))return this.handleStart()}if(sb(l)&&jh(d,l.tolerance))return this.handleCancel();this.handlePending(l,d);return}t.cancelable&&t.preventDefault(),o(c)}handleEnd(){const{onAbort:t,onEnd:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleCancel(){const{onAbort:t,onCancel:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleKeydown(t){t.code===ze.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const dG={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class kg extends Eg{constructor(t){const{event:r}=t,n=Ji(r.target);super(t,dG,n)}}kg.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return!r.isPrimary||r.button!==0?!1:(n==null||n({event:r}),!0)}}];const uG={move:{name:"mousemove"},end:{name:"mouseup"}};var ep;(function(e){e[e.RightClick=2]="RightClick"})(ep||(ep={}));class mG extends Eg{constructor(t){super(t,uG,Ji(t.event.target))}}mG.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return r.button===ep.RightClick?!1:(n==null||n({event:r}),!0)}}];const Nh={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class hG extends Eg{constructor(t){super(t,Nh)}static setup(){return window.addEventListener(Nh.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Nh.move.name,t)};function t(){}}}hG.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;const{touches:a}=r;return a.length>1?!1:(n==null||n({event:r}),!0)}}];var Vo;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Vo||(Vo={}));var lu;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(lu||(lu={}));function fG(e){let{acceleration:t,activator:r=Vo.Pointer,canScroll:n,draggingRect:a,enabled:i,interval:o=5,order:l=lu.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:u,delta:m,threshold:h}=e;const g=xG({delta:m,disabled:!i}),[j,y]=Sq(),v=p.useRef({x:0,y:0}),f=p.useRef({x:0,y:0}),x=p.useMemo(()=>{switch(r){case Vo.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Vo.DraggableRect:return a}},[r,a,c]),b=p.useRef(null),N=p.useCallback(()=>{const S=b.current;if(!S)return;const C=v.current.x*f.current.x,k=v.current.y*f.current.y;S.scrollBy(C,k)},[]),w=p.useMemo(()=>l===lu.TreeOrder?[...d].reverse():d,[l,d]);p.useEffect(()=>{if(!i||!d.length||!x){y();return}for(const S of w){if((n==null?void 0:n(S))===!1)continue;const C=d.indexOf(S),k=u[C];if(!k)continue;const{direction:A,speed:O}=rG(S,k,x,t,h);for(const D of["x","y"])g[D][A[D]]||(O[D]=0,A[D]=0);if(O.x>0||O.y>0){y(),b.current=S,j(N,o),v.current=O,f.current=A;return}}v.current={x:0,y:0},f.current={x:0,y:0},y()},[t,N,n,y,i,o,JSON.stringify(x),JSON.stringify(g),j,d,w,u,JSON.stringify(h)])}const pG={x:{[At.Backward]:!1,[At.Forward]:!1},y:{[At.Backward]:!1,[At.Forward]:!1}};function xG(e){let{delta:t,disabled:r}=e;const n=nu(t);return sc(a=>{if(r||!n||!a)return pG;const i={x:Math.sign(t.x-n.x),y:Math.sign(t.y-n.y)};return{x:{[At.Backward]:a.x[At.Backward]||i.x===-1,[At.Forward]:a.x[At.Forward]||i.x===1},y:{[At.Backward]:a.y[At.Backward]||i.y===-1,[At.Forward]:a.y[At.Forward]||i.y===1}}},[r,t,n])}function gG(e,t){const r=t!=null?e.get(t):void 0,n=r?r.node.current:null;return sc(a=>{var i;return t==null?null:(i=n??a)!=null?i:null},[n,t])}function vG(e,t){return p.useMemo(()=>e.reduce((r,n)=>{const{sensor:a}=n,i=a.activators.map(o=>({eventName:o.eventName,handler:t(o.handler,n)}));return[...r,...i]},[]),[e,t])}var _l;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(_l||(_l={}));var tp;(function(e){e.Optimized="optimized"})(tp||(tp={}));const nb=new Map;function yG(e,t){let{dragging:r,dependencies:n,config:a}=t;const[i,o]=p.useState(null),{frequency:l,measure:c,strategy:d}=a,u=p.useRef(e),m=v(),h=Tl(m),g=p.useCallback(function(f){f===void 0&&(f=[]),!h.current&&o(x=>x===null?f:x.concat(f.filter(b=>!x.includes(b))))},[h]),j=p.useRef(null),y=sc(f=>{if(m&&!r)return nb;if(!f||f===nb||u.current!==e||i!=null){const x=new Map;for(let b of e){if(!b)continue;if(i&&i.length>0&&!i.includes(b.id)&&b.rect.current){x.set(b.id,b.rect.current);continue}const N=b.node.current,w=N?new Cg(c(N),N):null;b.rect.current=w,w&&x.set(b.id,w)}return x}return f},[e,i,r,m,c]);return p.useEffect(()=>{u.current=e},[e]),p.useEffect(()=>{m||g()},[r,m]),p.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),p.useEffect(()=>{m||typeof l!="number"||j.current!==null||(j.current=setTimeout(()=>{g(),j.current=null},l))},[l,m,g,...n]),{droppableRects:y,measureDroppableContainers:g,measuringScheduled:i!=null};function v(){switch(d){case _l.Always:return!1;case _l.BeforeDragging:return r;default:return!r}}}function Dg(e,t){return sc(r=>e?r||(typeof t=="function"?t(e):e):null,[t,e])}function bG(e,t){return Dg(e,t)}function jG(e){let{callback:t,disabled:r}=e;const n=pm(t),a=p.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(n)},[n,r]);return p.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function vm(e){let{callback:t,disabled:r}=e;const n=pm(t),a=p.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(n)},[r]);return p.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function NG(e){return new Cg(Zi(e),e)}function ab(e,t,r){t===void 0&&(t=NG);const[n,a]=p.useState(null);function i(){a(c=>{if(!e)return null;if(e.isConnected===!1){var d;return(d=c??r)!=null?d:null}const u=t(e);return JSON.stringify(c)===JSON.stringify(u)?c:u})}const o=jG({callback(c){if(e)for(const d of c){const{type:u,target:m}=d;if(u==="childList"&&m instanceof HTMLElement&&m.contains(e)){i();break}}}}),l=vm({callback:i});return Ls(()=>{i(),e?(l==null||l.observe(e),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),o==null||o.disconnect())},[e]),n}function wG(e){const t=Dg(e);return lS(e,t)}const ib=[];function SG(e){const t=p.useRef(e),r=sc(n=>e?n&&n!==ib&&e&&t.current&&e.parentNode===t.current.parentNode?n:Sg(e):ib,[e]);return p.useEffect(()=>{t.current=e},[e]),r}function CG(e){const[t,r]=p.useState(null),n=p.useRef(e),a=p.useCallback(i=>{const o=bh(i.target);o&&r(l=>l?(l.set(o,Zf(o)),new Map(l)):null)},[]);return p.useEffect(()=>{const i=n.current;if(e!==i){o(i);const l=e.map(c=>{const d=bh(c);return d?(d.addEventListener("scroll",a,{passive:!0}),[d,Zf(d)]):null}).filter(c=>c!=null);r(l.length?new Map(l):null),n.current=e}return()=>{o(e),o(i)};function o(l){l.forEach(c=>{const d=bh(c);d==null||d.removeEventListener("scroll",a)})}},[a,e]),p.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,o)=>pi(i,o),hs):pS(e):hs,[e,t])}function ob(e,t){t===void 0&&(t=[]);const r=p.useRef(null);return p.useEffect(()=>{r.current=null},t),p.useEffect(()=>{const n=e!==hs;n&&!r.current&&(r.current=e),!n&&r.current&&(r.current=null)},[e]),r.current?au(e,r.current):hs}function EG(e){p.useEffect(()=>{if(!fm)return;const t=e.map(r=>{let{sensor:n}=r;return n.setup==null?void 0:n.setup()});return()=>{for(const r of t)r==null||r()}},e.map(t=>{let{sensor:r}=t;return r}))}function kG(e,t){return p.useMemo(()=>e.reduce((r,n)=>{let{eventName:a,handler:i}=n;return r[a]=o=>{i(o,t)},r},{}),[e,t])}function yS(e){return p.useMemo(()=>e?Jq(e):null,[e])}const lb=[];function DG(e,t){t===void 0&&(t=Zi);const[r]=e,n=yS(r?ar(r):null),[a,i]=p.useState(lb);function o(){i(()=>e.length?e.map(c=>hS(c)?n:new Cg(t(c),c)):lb)}const l=vm({callback:o});return Ls(()=>{l==null||l.disconnect(),o(),e.forEach(c=>l==null?void 0:l.observe(c))},[e]),a}function bS(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return rc(t)?t:e}function AG(e){let{measure:t}=e;const[r,n]=p.useState(null),a=p.useCallback(d=>{for(const{target:u}of d)if(rc(u)){n(m=>{const h=t(u);return m?{...m,width:h.width,height:h.height}:h});break}},[t]),i=vm({callback:a}),o=p.useCallback(d=>{const u=bS(d);i==null||i.disconnect(),u&&(i==null||i.observe(u)),n(u?t(u):null)},[t,i]),[l,c]=su(o);return p.useMemo(()=>({nodeRef:l,rect:r,setRef:c}),[r,l,c])}const TG=[{sensor:kg,options:{}},{sensor:vS,options:{}}],_G={current:{}},ld={draggable:{measure:eb},droppable:{measure:eb,strategy:_l.WhileDragging,frequency:tp.Optimized},dragOverlay:{measure:Zi}};class Ho extends Map{get(t){var r;return t!=null&&(r=super.get(t))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:r}=t;return!r})}getNodeFor(t){var r,n;return(r=(n=this.get(t))==null?void 0:n.node.current)!=null?r:void 0}}const OG={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ho,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:ou},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:ld,measureDroppableContainers:ou,windowRect:null,measuringScheduled:!1},jS={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:ou,draggableNodes:new Map,over:null,measureDroppableContainers:ou},nc=p.createContext(jS),NS=p.createContext(OG);function MG(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ho}}}function RG(e,t){switch(t.type){case wt.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case wt.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case wt.DragEnd:case wt.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case wt.RegisterDroppable:{const{element:r}=t,{id:n}=r,a=new Ho(e.droppable.containers);return a.set(n,r),{...e,droppable:{...e.droppable,containers:a}}}case wt.SetDroppableDisabled:{const{id:r,key:n,disabled:a}=t,i=e.droppable.containers.get(r);if(!i||n!==i.key)return e;const o=new Ho(e.droppable.containers);return o.set(r,{...i,disabled:a}),{...e,droppable:{...e.droppable,containers:o}}}case wt.UnregisterDroppable:{const{id:r,key:n}=t,a=e.droppable.containers.get(r);if(!a||n!==a.key)return e;const i=new Ho(e.droppable.containers);return i.delete(r),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function PG(e){let{disabled:t}=e;const{active:r,activatorEvent:n,draggableNodes:a}=p.useContext(nc),i=nu(n),o=nu(r==null?void 0:r.id);return p.useEffect(()=>{if(!t&&!n&&i&&o!=null){if(!gm(i)||document.activeElement===i.target)return;const l=a.get(o);if(!l)return;const{activatorNode:c,node:d}=l;if(!c.current&&!d.current)return;requestAnimationFrame(()=>{for(const u of[c.current,d.current]){if(!u)continue;const m=kq(u);if(m){m.focus();break}}})}},[n,t,a,o,i]),null}function wS(e,t){let{transform:r,...n}=t;return e!=null&&e.length?e.reduce((a,i)=>i({transform:a,...n}),r):r}function LG(e){return p.useMemo(()=>({draggable:{...ld.draggable,...e==null?void 0:e.draggable},droppable:{...ld.droppable,...e==null?void 0:e.droppable},dragOverlay:{...ld.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function IG(e){let{activeNode:t,measure:r,initialRect:n,config:a=!0}=e;const i=p.useRef(!1),{x:o,y:l}=typeof a=="boolean"?{x:a,y:a}:a;Ls(()=>{if(!o&&!l||!t){i.current=!1;return}if(i.current||!n)return;const d=t==null?void 0:t.node.current;if(!d||d.isConnected===!1)return;const u=r(d),m=lS(u,n);if(o||(m.x=0),l||(m.y=0),i.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const h=dS(d);h&&h.scrollBy({top:m.y,left:m.x})}},[t,o,l,n,r])}const ym=p.createContext({...hs,scaleX:1,scaleY:1});var Sn;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Sn||(Sn={}));const $G=p.memo(function(t){var r,n,a,i;let{id:o,accessibility:l,autoScroll:c=!0,children:d,sensors:u=TG,collisionDetection:m=Yq,measuring:h,modifiers:g,...j}=t;const y=p.useReducer(RG,void 0,MG),[v,f]=y,[x,b]=Mq(),[N,w]=p.useState(Sn.Uninitialized),S=N===Sn.Initialized,{draggable:{active:C,nodes:k,translate:A},droppable:{containers:O}}=v,D=C!=null?k.get(C):null,I=p.useRef({initial:null,translated:null}),M=p.useMemo(()=>{var lt;return C!=null?{id:C,data:(lt=D==null?void 0:D.data)!=null?lt:_G,rect:I}:null},[C,D]),E=p.useRef(null),[L,V]=p.useState(null),[G,W]=p.useState(null),_=Tl(j,Object.values(j)),T=xm("DndDescribedBy",o),R=p.useMemo(()=>O.getEnabled(),[O]),B=LG(h),{droppableRects:U,measureDroppableContainers:X,measuringScheduled:F}=yG(R,{dragging:S,dependencies:[A.x,A.y],config:B.droppable}),H=gG(k,C),Y=p.useMemo(()=>G?iu(G):null,[G]),K=gs(),le=bG(H,B.draggable.measure);IG({activeNode:C!=null?k.get(C):null,config:K.layoutShiftCompensation,initialRect:le,measure:B.draggable.measure});const q=ab(H,B.draggable.measure,le),ce=ab(H?H.parentElement:null),ae=p.useRef({activatorEvent:null,active:null,activeNode:H,collisionRect:null,collisions:null,droppableRects:U,draggableNodes:k,draggingNode:null,draggingNodeRect:null,droppableContainers:O,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),xe=O.getNodeFor((r=ae.current.over)==null?void 0:r.id),Ce=AG({measure:B.dragOverlay.measure}),He=(n=Ce.nodeRef.current)!=null?n:H,ee=S?(a=Ce.rect)!=null?a:q:null,ge=!!(Ce.nodeRef.current&&Ce.rect),Ee=wG(ge?null:q),Pe=yS(He?ar(He):null),ke=SG(S?xe??H:null),Oe=DG(ke),Le=wS(g,{transform:{x:A.x-Ee.x,y:A.y-Ee.y,scaleX:1,scaleY:1},activatorEvent:G,active:M,activeNodeRect:q,containerNodeRect:ce,draggingNodeRect:ee,over:ae.current.over,overlayNodeRect:Ce.rect,scrollableAncestors:ke,scrollableAncestorRects:Oe,windowRect:Pe}),$t=Y?pi(Y,A):null,Qr=CG(ke),xs=ob(Qr),Us=ob(Qr,[q]),Qe=pi(Le,xs),Xt=ee?Kq(ee,Le):null,_t=M&&Xt?m({active:M,collisionRect:Xt,droppableRects:U,droppableContainers:R,pointerCoordinates:$t}):null,pn=Vq(_t,"id"),[P,fe]=p.useState(null),De=ge?Le:pi(Le,Us),ve=qq(De,(i=P==null?void 0:P.rect)!=null?i:null,q),Ue=p.useRef(null),Se=p.useCallback((lt,Qt)=>{let{sensor:Jt,options:vs}=Qt;if(E.current==null)return;const ir=k.get(E.current);if(!ir)return;const We=lt.nativeEvent,Tr=new Jt({active:E.current,activeNode:ir,event:We,options:vs,context:ae,onAbort(bt){if(!k.get(bt))return;const{onDragAbort:_r}=_.current,Jr={id:bt};_r==null||_r(Jr),x({type:"onDragAbort",event:Jr})},onPending(bt,bs,_r,Jr){if(!k.get(bt))return;const{onDragPending:na}=_.current,js={id:bt,constraint:bs,initialCoordinates:_r,offset:Jr};na==null||na(js),x({type:"onDragPending",event:js})},onStart(bt){const bs=E.current;if(bs==null)return;const _r=k.get(bs);if(!_r)return;const{onDragStart:Jr}=_.current,sa={activatorEvent:We,active:{id:bs,data:_r.data,rect:I}};pa.unstable_batchedUpdates(()=>{Jr==null||Jr(sa),w(Sn.Initializing),f({type:wt.DragStart,initialCoordinates:bt,active:bs}),x({type:"onDragStart",event:sa}),V(Ue.current),W(We)})},onMove(bt){f({type:wt.DragMove,coordinates:bt})},onEnd:ys(wt.DragEnd),onCancel:ys(wt.DragCancel)});Ue.current=Tr;function ys(bt){return async function(){const{active:_r,collisions:Jr,over:sa,scrollAdjustedTranslate:na}=ae.current;let js=null;if(_r&&na){const{cancelDrop:aa}=_.current;js={activatorEvent:We,active:_r,collisions:Jr,delta:na,over:sa},bt===wt.DragEnd&&typeof aa=="function"&&await Promise.resolve(aa(js))&&(bt=wt.DragCancel)}E.current=null,pa.unstable_batchedUpdates(()=>{f({type:bt}),w(Sn.Uninitialized),fe(null),V(null),W(null),Ue.current=null;const aa=bt===wt.DragEnd?"onDragEnd":"onDragCancel";if(js){const ro=_.current[aa];ro==null||ro(js),x({type:aa,event:js})}})}}},[k]),ot=p.useCallback((lt,Qt)=>(Jt,vs)=>{const ir=Jt.nativeEvent,We=k.get(vs);if(E.current!==null||!We||ir.dndKit||ir.defaultPrevented)return;const Tr={active:We};lt(Jt,Qt.options,Tr)===!0&&(ir.dndKit={capturedBy:Qt.sensor},E.current=vs,Se(Jt,Qt))},[k,Se]),Ft=vG(u,ot);EG(u),Ls(()=>{q&&N===Sn.Initializing&&w(Sn.Initialized)},[q,N]),p.useEffect(()=>{const{onDragMove:lt}=_.current,{active:Qt,activatorEvent:Jt,collisions:vs,over:ir}=ae.current;if(!Qt||!Jt)return;const We={active:Qt,activatorEvent:Jt,collisions:vs,delta:{x:Qe.x,y:Qe.y},over:ir};pa.unstable_batchedUpdates(()=>{lt==null||lt(We),x({type:"onDragMove",event:We})})},[Qe.x,Qe.y]),p.useEffect(()=>{const{active:lt,activatorEvent:Qt,collisions:Jt,droppableContainers:vs,scrollAdjustedTranslate:ir}=ae.current;if(!lt||E.current==null||!Qt||!ir)return;const{onDragOver:We}=_.current,Tr=vs.get(pn),ys=Tr&&Tr.rect.current?{id:Tr.id,rect:Tr.rect.current,data:Tr.data,disabled:Tr.disabled}:null,bt={active:lt,activatorEvent:Qt,collisions:Jt,delta:{x:ir.x,y:ir.y},over:ys};pa.unstable_batchedUpdates(()=>{fe(ys),We==null||We(bt),x({type:"onDragOver",event:bt})})},[pn]),Ls(()=>{ae.current={activatorEvent:G,active:M,activeNode:H,collisionRect:Xt,collisions:_t,droppableRects:U,draggableNodes:k,draggingNode:He,draggingNodeRect:ee,droppableContainers:O,over:P,scrollableAncestors:ke,scrollAdjustedTranslate:Qe},I.current={initial:ee,translated:Xt}},[M,H,_t,Xt,k,He,ee,U,O,P,ke,Qe]),fG({...K,delta:A,draggingRect:Xt,pointerCoordinates:$t,scrollableAncestors:ke,scrollableAncestorRects:Oe});const to=p.useMemo(()=>({active:M,activeNode:H,activeNodeRect:q,activatorEvent:G,collisions:_t,containerNodeRect:ce,dragOverlay:Ce,draggableNodes:k,droppableContainers:O,droppableRects:U,over:P,measureDroppableContainers:X,scrollableAncestors:ke,scrollableAncestorRects:Oe,measuringConfiguration:B,measuringScheduled:F,windowRect:Pe}),[M,H,q,G,_t,ce,Ce,k,O,U,P,X,ke,Oe,B,F,Pe]),ra=p.useMemo(()=>({activatorEvent:G,activators:Ft,active:M,activeNodeRect:q,ariaDescribedById:{draggable:T},dispatch:f,draggableNodes:k,over:P,measureDroppableContainers:X}),[G,Ft,M,q,f,T,k,P,X]);return z.createElement(oS.Provider,{value:b},z.createElement(nc.Provider,{value:ra},z.createElement(NS.Provider,{value:to},z.createElement(ym.Provider,{value:ve},d)),z.createElement(PG,{disabled:(l==null?void 0:l.restoreFocus)===!1})),z.createElement(Lq,{...l,hiddenTextDescribedById:T}));function gs(){const lt=(L==null?void 0:L.autoScrollEnabled)===!1,Qt=typeof c=="object"?c.enabled===!1:c===!1,Jt=S&&!lt&&!Qt;return typeof c=="object"?{...c,enabled:Jt}:{enabled:Jt}}}),FG=p.createContext(null),cb="button",BG="Draggable";function SS(e){let{id:t,data:r,disabled:n=!1,attributes:a}=e;const i=xm(BG),{activators:o,activatorEvent:l,active:c,activeNodeRect:d,ariaDescribedById:u,draggableNodes:m,over:h}=p.useContext(nc),{role:g=cb,roleDescription:j="draggable",tabIndex:y=0}=a??{},v=(c==null?void 0:c.id)===t,f=p.useContext(v?ym:FG),[x,b]=su(),[N,w]=su(),S=kG(o,t),C=Tl(r);Ls(()=>(m.set(t,{id:t,key:i,node:x,activatorNode:N,data:C}),()=>{const A=m.get(t);A&&A.key===i&&m.delete(t)}),[m,t]);const k=p.useMemo(()=>({role:g,tabIndex:y,"aria-disabled":n,"aria-pressed":v&&g===cb?!0:void 0,"aria-roledescription":j,"aria-describedby":u.draggable}),[n,g,y,v,j,u.draggable]);return{active:c,activatorEvent:l,activeNodeRect:d,attributes:k,isDragging:v,listeners:n?void 0:S,node:x,over:h,setNodeRef:b,setActivatorNodeRef:w,transform:f}}function zG(){return p.useContext(NS)}const UG="Droppable",VG={timeout:25};function CS(e){let{data:t,disabled:r=!1,id:n,resizeObserverConfig:a}=e;const i=xm(UG),{active:o,dispatch:l,over:c,measureDroppableContainers:d}=p.useContext(nc),u=p.useRef({disabled:r}),m=p.useRef(!1),h=p.useRef(null),g=p.useRef(null),{disabled:j,updateMeasurementsFor:y,timeout:v}={...VG,...a},f=Tl(y??n),x=p.useCallback(()=>{if(!m.current){m.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{d(Array.isArray(f.current)?f.current:[f.current]),g.current=null},v)},[v]),b=vm({callback:x,disabled:j||!o}),N=p.useCallback((k,A)=>{b&&(A&&(b.unobserve(A),m.current=!1),k&&b.observe(k))},[b]),[w,S]=su(N),C=Tl(t);return p.useEffect(()=>{!b||!w.current||(b.disconnect(),m.current=!1,b.observe(w.current))},[w,b]),p.useEffect(()=>(l({type:wt.RegisterDroppable,element:{id:n,key:i,disabled:r,node:w,rect:h,data:C}}),()=>l({type:wt.UnregisterDroppable,key:i,id:n})),[n]),p.useEffect(()=>{r!==u.current.disabled&&(l({type:wt.SetDroppableDisabled,id:n,key:i,disabled:r}),u.current.disabled=r)},[n,i,r,l]),{active:o,rect:h,isOver:(c==null?void 0:c.id)===n,node:w,over:c,setNodeRef:S}}function HG(e){let{animation:t,children:r}=e;const[n,a]=p.useState(null),[i,o]=p.useState(null),l=nu(r);return!r&&!n&&l&&a(l),Ls(()=>{if(!i)return;const c=n==null?void 0:n.key,d=n==null?void 0:n.props.id;if(c==null||d==null){a(null);return}Promise.resolve(t(d,i)).then(()=>{a(null)})},[t,n,i]),z.createElement(z.Fragment,null,r,n?p.cloneElement(n,{ref:o}):null)}const WG={x:0,y:0,scaleX:1,scaleY:1};function YG(e){let{children:t}=e;return z.createElement(nc.Provider,{value:jS},z.createElement(ym.Provider,{value:WG},t))}const qG={position:"fixed",touchAction:"none"},GG=e=>gm(e)?"transform 250ms ease":void 0,KG=p.forwardRef((e,t)=>{let{as:r,activatorEvent:n,adjustScale:a,children:i,className:o,rect:l,style:c,transform:d,transition:u=GG}=e;if(!l)return null;const m=a?d:{...d,scaleX:1,scaleY:1},h={...qG,width:l.width,height:l.height,top:l.top,left:l.left,transform:qn.Transform.toString(m),transformOrigin:a&&n?Bq(n,l):void 0,transition:typeof u=="function"?u(n):u,...c};return z.createElement(r,{className:o,style:h,ref:t},i)}),XG=e=>t=>{let{active:r,dragOverlay:n}=t;const a={},{styles:i,className:o}=e;if(i!=null&&i.active)for(const[l,c]of Object.entries(i.active))c!==void 0&&(a[l]=r.node.style.getPropertyValue(l),r.node.style.setProperty(l,c));if(i!=null&&i.dragOverlay)for(const[l,c]of Object.entries(i.dragOverlay))c!==void 0&&n.node.style.setProperty(l,c);return o!=null&&o.active&&r.node.classList.add(o.active),o!=null&&o.dragOverlay&&n.node.classList.add(o.dragOverlay),function(){for(const[c,d]of Object.entries(a))r.node.style.setProperty(c,d);o!=null&&o.active&&r.node.classList.remove(o.active)}},QG=e=>{let{transform:{initial:t,final:r}}=e;return[{transform:qn.Transform.toString(t)},{transform:qn.Transform.toString(r)}]},JG={duration:250,easing:"ease",keyframes:QG,sideEffects:XG({styles:{active:{opacity:"0"}}})};function ZG(e){let{config:t,draggableNodes:r,droppableContainers:n,measuringConfiguration:a}=e;return pm((i,o)=>{if(t===null)return;const l=r.get(i);if(!l)return;const c=l.node.current;if(!c)return;const d=bS(o);if(!d)return;const{transform:u}=ar(o).getComputedStyle(o),m=cS(u);if(!m)return;const h=typeof t=="function"?t:eK(t);return xS(c,a.draggable.measure),h({active:{id:i,data:l.data,node:c,rect:a.draggable.measure(c)},draggableNodes:r,dragOverlay:{node:o,rect:a.dragOverlay.measure(d)},droppableContainers:n,measuringConfiguration:a,transform:m})})}function eK(e){const{duration:t,easing:r,sideEffects:n,keyframes:a}={...JG,...e};return i=>{let{active:o,dragOverlay:l,transform:c,...d}=i;if(!t)return;const u={x:l.rect.left-o.rect.left,y:l.rect.top-o.rect.top},m={scaleX:c.scaleX!==1?o.rect.width*c.scaleX/l.rect.width:1,scaleY:c.scaleY!==1?o.rect.height*c.scaleY/l.rect.height:1},h={x:c.x-u.x,y:c.y-u.y,...m},g=a({...d,active:o,dragOverlay:l,transform:{initial:c,final:h}}),[j]=g,y=g[g.length-1];if(JSON.stringify(j)===JSON.stringify(y))return;const v=n==null?void 0:n({active:o,dragOverlay:l,...d}),f=l.node.animate(g,{duration:t,easing:r,fill:"forwards"});return new Promise(x=>{f.onfinish=()=>{v==null||v(),x()}})}}let db=0;function tK(e){return p.useMemo(()=>{if(e!=null)return db++,db},[e])}const rK=z.memo(e=>{let{adjustScale:t=!1,children:r,dropAnimation:n,style:a,transition:i,modifiers:o,wrapperElement:l="div",className:c,zIndex:d=999}=e;const{activatorEvent:u,active:m,activeNodeRect:h,containerNodeRect:g,draggableNodes:j,droppableContainers:y,dragOverlay:v,over:f,measuringConfiguration:x,scrollableAncestors:b,scrollableAncestorRects:N,windowRect:w}=zG(),S=p.useContext(ym),C=tK(m==null?void 0:m.id),k=wS(o,{activatorEvent:u,active:m,activeNodeRect:h,containerNodeRect:g,draggingNodeRect:v.rect,over:f,overlayNodeRect:v.rect,scrollableAncestors:b,scrollableAncestorRects:N,transform:S,windowRect:w}),A=Dg(h),O=ZG({config:n,draggableNodes:j,droppableContainers:y,measuringConfiguration:x}),D=A?v.setRef:void 0;return z.createElement(YG,null,z.createElement(HG,{animation:O},m&&C?z.createElement(KG,{key:C,id:m.id,ref:D,as:l,activatorEvent:u,adjustScale:t,className:c,transition:i,rect:A,style:{zIndex:d,...a},transform:k},r):null))});function Ag(e,t,r){const n=e.slice();return n.splice(r<0?n.length+r:r,0,n.splice(t,1)[0]),n}function Rc(e){return e!==null&&e>=0}const sK=e=>{let{rects:t,activeIndex:r,overIndex:n,index:a}=e;const i=Ag(t,n,r),o=t[a],l=i[a];return!l||!o?null:{x:l.left-o.left,y:l.top-o.top,scaleX:l.width/o.width,scaleY:l.height/o.height}},nK="Sortable",aK=z.createContext({activeIndex:-1,containerId:nK,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:sK,disabled:{draggable:!1,droppable:!1}}),iK=e=>{let{id:t,items:r,activeIndex:n,overIndex:a}=e;return Ag(r,n,a).indexOf(t)},oK=e=>{let{containerId:t,isSorting:r,wasDragging:n,index:a,items:i,newIndex:o,previousItems:l,previousContainerId:c,transition:d}=e;return!d||!n||l!==i&&a===o?!1:r?!0:o!==a&&t===c},lK={duration:200,easing:"ease"},ES="transform",cK=qn.Transition.toString({property:ES,duration:0,easing:"linear"}),dK={roleDescription:"sortable"};function uK(e){let{disabled:t,index:r,node:n,rect:a}=e;const[i,o]=p.useState(null),l=p.useRef(r);return Ls(()=>{if(!t&&r!==l.current&&n.current){const c=a.current;if(c){const d=Zi(n.current,{ignoreTransform:!0}),u={x:c.left-d.left,y:c.top-d.top,scaleX:c.width/d.width,scaleY:c.height/d.height};(u.x||u.y)&&o(u)}}r!==l.current&&(l.current=r)},[t,r,n,a]),p.useEffect(()=>{i&&o(null)},[i]),i}function mK(e){let{animateLayoutChanges:t=oK,attributes:r,disabled:n,data:a,getNewIndex:i=iK,id:o,strategy:l,resizeObserverConfig:c,transition:d=lK}=e;const{items:u,containerId:m,activeIndex:h,disabled:g,disableTransforms:j,sortedRects:y,overIndex:v,useDragOverlay:f,strategy:x}=p.useContext(aK),b=hK(n,g),N=u.indexOf(o),w=p.useMemo(()=>({sortable:{containerId:m,index:N,items:u},...a}),[m,a,N,u]),S=p.useMemo(()=>u.slice(u.indexOf(o)),[u,o]),{rect:C,node:k,isOver:A,setNodeRef:O}=CS({id:o,data:w,disabled:b.droppable,resizeObserverConfig:{updateMeasurementsFor:S,...c}}),{active:D,activatorEvent:I,activeNodeRect:M,attributes:E,setNodeRef:L,listeners:V,isDragging:G,over:W,setActivatorNodeRef:_,transform:T}=SS({id:o,data:w,attributes:{...dK,...r},disabled:b.draggable}),R=wq(O,L),B=!!D,U=B&&!j&&Rc(h)&&Rc(v),X=!f&&G,F=X&&U?T:null,Y=U?F??(l??x)({rects:y,activeNodeRect:M,activeIndex:h,overIndex:v,index:N}):null,K=Rc(h)&&Rc(v)?i({id:o,items:u,activeIndex:h,overIndex:v}):N,le=D==null?void 0:D.id,q=p.useRef({activeId:le,items:u,newIndex:K,containerId:m}),ce=u!==q.current.items,ae=t({active:D,containerId:m,isDragging:G,isSorting:B,id:o,index:N,items:u,newIndex:q.current.newIndex,previousItems:q.current.items,previousContainerId:q.current.containerId,transition:d,wasDragging:q.current.activeId!=null}),xe=uK({disabled:!ae,index:N,node:k,rect:C});return p.useEffect(()=>{B&&q.current.newIndex!==K&&(q.current.newIndex=K),m!==q.current.containerId&&(q.current.containerId=m),u!==q.current.items&&(q.current.items=u)},[B,K,m,u]),p.useEffect(()=>{if(le===q.current.activeId)return;if(le!=null&&q.current.activeId==null){q.current.activeId=le;return}const He=setTimeout(()=>{q.current.activeId=le},50);return()=>clearTimeout(He)},[le]),{active:D,activeIndex:h,attributes:E,data:w,rect:C,index:N,newIndex:K,items:u,isOver:A,isSorting:B,isDragging:G,listeners:V,node:k,overIndex:v,over:W,setNodeRef:R,setActivatorNodeRef:_,setDroppableNodeRef:O,setDraggableNodeRef:L,transform:xe??Y,transition:Ce()};function Ce(){if(xe||ce&&q.current.newIndex===N)return cK;if(!(X&&!gm(I)||!d)&&(B||ae))return qn.Transition.toString({...d,property:ES})}}function hK(e,t){var r,n;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(r=e==null?void 0:e.draggable)!=null?r:t.draggable,droppable:(n=e==null?void 0:e.droppable)!=null?n:t.droppable}}ze.Down,ze.Right,ze.Up,ze.Left;const fK=()=>{console.log("ComponentLibrary - Rendering");const e=[{type:"hero-banner",name:"Banner Principal",description:"Banner destacado con ttulo, subttulo y botn CTA",icon:"",category:"Contenido Principal",color:"bg-gradient-to-r from-blue-500 to-purple-600"},{type:"service-cards",name:"Tarjetas de Servicios",description:"Grid de servicios con iconos y descripciones",icon:"",category:"Servicios",color:"bg-gradient-to-r from-green-500 to-teal-600"},{type:"contact-form",name:"Formulario de Contacto",description:"Formulario para que los clientes se pongan en contacto",icon:"",category:"Contacto",color:"bg-gradient-to-r from-orange-500 to-red-600"},{type:"testimonials",name:"Testimonios",description:"Opiniones y comentarios de clientes satisfechos",icon:"",category:"Social Proof",color:"bg-gradient-to-r from-purple-500 to-pink-600"},{type:"stats",name:"Estadsticas",description:"Nmeros y mtricas importantes del despacho",icon:"",category:"Social Proof",color:"bg-gradient-to-r from-indigo-500 to-blue-600"},{type:"text-block",name:"Bloque de Texto",description:"Texto con ttulo y contenido personalizable",icon:"",category:"Contenido",color:"bg-gradient-to-r from-gray-500 to-gray-700"},{type:"image-gallery",name:"Galera de Imgenes",description:"Grid de imgenes con ttulos opcionales",icon:"",category:"Contenido",color:"bg-gradient-to-r from-yellow-500 to-orange-600"},{type:"map",name:"Mapa de Ubicacin",description:"Mapa interactivo con la ubicacin del despacho",icon:"",category:"Contacto",color:"bg-gradient-to-r from-teal-500 to-green-600"},{type:"divider",name:"Separador",description:"Lnea divisoria para separar secciones",icon:"",category:"Layout",color:"bg-gradient-to-r from-gray-400 to-gray-600"},{type:"spacer",name:"Espaciador",description:"Espacio vertical para separar elementos",icon:"",category:"Layout",color:"bg-gradient-to-r from-gray-300 to-gray-500"}],t=[...new Set(e.map(r=>r.category))];return s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[s.jsxs("div",{className:"p-4 border-b bg-gradient-to-r from-blue-50 to-indigo-50",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:" Biblioteca de Componentes"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Arrastra componentes al canvas"})]}),s.jsx("div",{className:"p-4 max-h-[800px] overflow-y-auto",children:t.map(r=>s.jsxs("div",{className:"mb-6",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3 px-2 py-1 bg-gray-100 rounded",children:r}),s.jsx("div",{className:"space-y-2",children:e.filter(n=>n.category===r).map(n=>s.jsx(pK,{component:n},n.type))})]},r))})]})},pK=({component:e})=>{const{attributes:t,listeners:r,setNodeRef:n,transform:a,isDragging:i}=SS({id:e.type,data:{type:"component-library",component:e}}),o=a?{transform:`translate3d(${a.x}px, ${a.y}px, 0)`}:void 0;return console.log(`DraggableComponent - ${e.type} - isDragging:`,i),s.jsxs("div",{ref:n,...r,...t,style:o,className:`
        p-4 border rounded-lg cursor-move transition-all hover:shadow-md
        ${i?"bg-blue-50 border-blue-300 shadow-lg opacity-50 scale-105":"bg-white border-gray-200 hover:border-blue-300 hover:bg-blue-50"}
      `,children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center text-2xl ${e.color}`,children:e.icon}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h5",{className:"text-sm font-semibold text-gray-900 truncate",children:e.name}),s.jsx("p",{className:"text-xs text-gray-500 mt-1 leading-relaxed",children:e.description})]})]}),s.jsx("div",{className:"mt-2 text-xs text-gray-400 text-center",children:" Arrastra al canvas"})]})},xK=({layout:e,onComponentSelect:t,onComponentDelete:r,selectedComponent:n,isPreviewMode:a})=>{const{setNodeRef:i,isOver:o}=CS({id:"canvas-drop-zone"});return console.log("Canvas - Rendering, components:",e.components.length),console.log("Canvas - isPreviewMode:",a),s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[s.jsxs("div",{className:"p-4 border-b bg-gradient-to-r from-green-50 to-emerald-50",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:a?" Vista Previa":" Canvas de Diseo"}),s.jsx("p",{className:"text-sm text-gray-600",children:a?"Vista previa de la pgina principal":"Arrastra componentes aqu para disear la pgina"})]}),s.jsxs("div",{ref:i,className:`
          min-h-[600px] p-6 transition-all
          ${o?"bg-blue-50 border-2 border-dashed border-blue-400":"bg-gray-50 border-2 border-dashed border-gray-300"}
          ${a?"bg-white":""}
        `,children:[e.components.length===0?s.jsxs("div",{className:"flex flex-col items-center justify-center h-96 text-center",children:[s.jsx("div",{className:"text-6xl mb-4",children:""}),s.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Canvas Vaco"}),s.jsx("p",{className:"text-gray-500 mb-4 max-w-md",children:a?"No hay componentes para mostrar en la vista previa":"Arrastra componentes desde la biblioteca para comenzar a disear"}),!a&&s.jsx("div",{className:"text-sm text-gray-400",children:" Tip: Comienza con un Banner Principal"})]}):s.jsx("div",{className:"space-y-4",children:e.components.map((l,c)=>s.jsx(gK,{component:l,index:c,onSelect:t,onDelete:r,isSelected:(n==null?void 0:n.id)===l.id,isPreviewMode:a},l.id))}),o&&!a&&s.jsx("div",{className:"text-center py-8 text-blue-600 font-medium",children:" Suelta aqu para agregar el componente"})]})]})},gK=({component:e,index:t,onSelect:r,onDelete:n,isSelected:a,isPreviewMode:i})=>{const{attributes:o,listeners:l,setNodeRef:c,transform:d,transition:u,isDragging:m}=mK({id:e.id,data:{type:"canvas-component",component:e}}),h={transform:qn.Transform.toString(d),transition:u};return console.log(`CanvasComponent - ${e.type} - isSelected:`,a),s.jsxs("div",{ref:c,style:h,...o,...l,className:`
        relative group transition-all
        ${m?"opacity-50 scale-95":""}
        ${a&&!i?"ring-2 ring-blue-500 ring-offset-2":"hover:ring-1 hover:ring-gray-300"}
      `,children:[!i&&s.jsxs("div",{className:"absolute -top-2 -left-2 z-10 flex space-x-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx("button",{onClick:g=>{g.stopPropagation(),r(e)},className:"bg-blue-500 text-white p-1 rounded-full text-xs hover:bg-blue-600 transition-colors",title:"Editar componente",children:""}),s.jsx("button",{onClick:g=>{g.stopPropagation(),n(e.id)},className:"bg-red-500 text-white p-1 rounded-full text-xs hover:bg-red-600 transition-colors",title:"Eliminar componente",children:""})]}),!i&&s.jsx("div",{className:"absolute -top-2 -right-2 bg-gray-500 text-white text-xs px-2 py-1 rounded-full",children:t+1}),s.jsx("div",{className:`
          ${i?"":"cursor-move"}
          ${a&&!i?"bg-blue-50":""}
        `,onClick:()=>!i&&r(e),children:s.jsx(gw,{component:e})}),a&&!i&&s.jsx("div",{className:"absolute inset-0 border-2 border-blue-500 pointer-events-none rounded-lg"})]})},vK=({component:e,onUpdate:t})=>{const[r,n]=p.useState(e.props);p.useEffect(()=>{n(e.props)},[e]),console.log("PropertiesPanel - Rendering for component:",e.type);const a=(d,u)=>{const m={...r,[d]:u};n(m),t(e.id,m)},i=(d,u,m,h)=>{const g=[...r[d]||[]];g[u]={...g[u],[m]:h},a(d,g)},o=(d,u)=>{const m=[...r[d]||[],u];a(d,m)},l=(d,u)=>{const m=[...r[d]||[]];m.splice(u,1),a(d,m)},c=()=>{switch(e.type){case"hero-banner":return s.jsxs("div",{className:"space-y-4",children:[s.jsx(Je,{label:"Ttulo Principal",value:r.title||"",onChange:d=>a("title",d),type:"text",placeholder:"Ej: Despacho de Abogados Garca & Asociados"}),s.jsx(Je,{label:"Subttulo",value:r.subtitle||"",onChange:d=>a("subtitle",d),type:"textarea",placeholder:"Ej: Ms de 15 aos de experiencia en servicios legales profesionales"}),s.jsx(Je,{label:"Texto del Botn",value:r.ctaText||"",onChange:d=>a("ctaText",d),type:"text",placeholder:"Ej: Consulta Gratuita"}),s.jsx(Je,{label:"Enlace del Botn",value:r.ctaLink||"",onChange:d=>a("ctaLink",d),type:"text",placeholder:"Ej: /contacto o https://wa.me/34612345678"})]});case"service-cards":return s.jsxs("div",{className:"space-y-4",children:[s.jsx(Je,{label:"Ttulo de la Seccin",value:r.title||"",onChange:d=>a("title",d),type:"text",placeholder:"Ej: Nuestros Servicios Legales"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Servicios"}),s.jsx("button",{onClick:()=>o("services",{icon:"",title:"Nuevo Servicio",description:"Descripcin del servicio"}),className:"text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600",children:"+ Agregar"})]}),(r.services||[]).map((d,u)=>s.jsxs("div",{className:"p-3 border rounded-lg bg-gray-50 space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"text-xs font-medium text-gray-600",children:["Servicio ",u+1]}),s.jsx("button",{onClick:()=>l("services",u),className:"text-xs bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600",children:"Eliminar"})]}),s.jsx(Je,{label:"Icono (emoji)",value:d.icon||"",onChange:m=>i("services",u,"icon",m),type:"text",placeholder:"Ej:   "}),s.jsx(Je,{label:"Ttulo del Servicio",value:d.title||"",onChange:m=>i("services",u,"title",m),type:"text",placeholder:"Ej: Derecho Civil"}),s.jsx(Je,{label:"Descripcin",value:d.description||"",onChange:m=>i("services",u,"description",m),type:"textarea",placeholder:"Ej: Asesora especializada en casos civiles"})]},u))]})]});case"contact-form":return s.jsxs("div",{className:"space-y-4",children:[s.jsx(Je,{label:"Ttulo del Formulario",value:r.title||"",onChange:d=>a("title",d),type:"text",placeholder:"Ej: Solicita tu Consulta Gratuita"}),s.jsx(Je,{label:"Subttulo",value:r.subtitle||"",onChange:d=>a("subtitle",d),type:"textarea",placeholder:"Ej: Nuestros abogados especialistas estn listos para ayudarte"}),s.jsx(Je,{label:"Texto del Botn",value:r.submitText||"",onChange:d=>a("submitText",d),type:"text",placeholder:"Ej: Enviar Consulta"})]});case"testimonials":return s.jsxs("div",{className:"space-y-4",children:[s.jsx(Je,{label:"Ttulo de la Seccin",value:r.title||"",onChange:d=>a("title",d),type:"text",placeholder:"Ej: Lo que dicen nuestros clientes"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Testimonios"}),s.jsx("button",{onClick:()=>o("testimonials",{name:"Cliente",text:"Excelente servicio",rating:5}),className:"text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600",children:"+ Agregar"})]}),(r.testimonials||[]).map((d,u)=>s.jsxs("div",{className:"p-3 border rounded-lg bg-gray-50 space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"text-xs font-medium text-gray-600",children:["Testimonio ",u+1]}),s.jsx("button",{onClick:()=>l("testimonials",u),className:"text-xs bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600",children:"Eliminar"})]}),s.jsx(Je,{label:"Nombre del Cliente",value:d.name||"",onChange:m=>i("testimonials",u,"name",m),type:"text",placeholder:"Ej: Mara Garca"}),s.jsx(Je,{label:"Testimonio",value:d.text||"",onChange:m=>i("testimonials",u,"text",m),type:"textarea",placeholder:"Ej: Excelente servicio profesional..."})]},u))]})]});case"stats":return s.jsxs("div",{className:"space-y-4",children:[s.jsx(Je,{label:"Ttulo de la Seccin",value:r.title||"",onChange:d=>a("title",d),type:"text",placeholder:"Ej: Nuestros Nmeros"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Estadsticas"}),s.jsx("button",{onClick:()=>o("stats",{value:"0",label:"Nueva Estadstica"}),className:"text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600",children:"+ Agregar"})]}),(r.stats||[]).map((d,u)=>s.jsxs("div",{className:"p-3 border rounded-lg bg-gray-50 space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"text-xs font-medium text-gray-600",children:["Estadstica ",u+1]}),s.jsx("button",{onClick:()=>l("stats",u),className:"text-xs bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600",children:"Eliminar"})]}),s.jsx(Je,{label:"Valor",value:d.value||"",onChange:m=>i("stats",u,"value",m),type:"text",placeholder:"Ej: 500+"}),s.jsx(Je,{label:"Etiqueta",value:d.label||"",onChange:m=>i("stats",u,"label",m),type:"text",placeholder:"Ej: Casos Exitosos"})]},u))]})]});case"text-block":return s.jsxs("div",{className:"space-y-4",children:[s.jsx(Je,{label:"Ttulo",value:r.title||"",onChange:d=>a("title",d),type:"text",placeholder:"Ej: Sobre Nosotros"}),s.jsx(Je,{label:"Contenido",value:r.content||"",onChange:d=>a("content",d),type:"textarea",placeholder:"Ej: Somos un despacho de abogados comprometido..."}),s.jsx(Pc,{label:"Alineacin del Texto",value:r.alignment||"left",onChange:d=>a("alignment",d),options:[{value:"left",label:"Izquierda"},{value:"center",label:"Centro"},{value:"right",label:"Derecha"}]}),s.jsx(Pc,{label:"Tamao de Fuente",value:r.fontSize||"medium",onChange:d=>a("fontSize",d),options:[{value:"small",label:"Pequeo"},{value:"medium",label:"Mediano"},{value:"large",label:"Grande"}]})]});case"image-gallery":return s.jsxs("div",{className:"space-y-4",children:[s.jsx(Je,{label:"Ttulo de la Galera",value:r.title||"",onChange:d=>a("title",d),type:"text",placeholder:"Ej: Nuestras Instalaciones"}),s.jsx(Pc,{label:"Nmero de Columnas",value:r.columns||3,onChange:d=>a("columns",parseInt(d)),options:[{value:2,label:"2 columnas"},{value:3,label:"3 columnas"},{value:4,label:"4 columnas"}]})]});case"map":return s.jsxs("div",{className:"space-y-4",children:[s.jsx(Je,{label:"Ttulo",value:r.title||"",onChange:d=>a("title",d),type:"text",placeholder:"Ej: Nuestra Ubicacin"}),s.jsx(Je,{label:"Direccin",value:r.address||"",onChange:d=>a("address",d),type:"text",placeholder:"Ej: Calle Principal 123, Madrid"})]});case"divider":return s.jsxs("div",{className:"space-y-4",children:[s.jsx(Pc,{label:"Tipo de Lnea",value:r.type||"solid",onChange:d=>a("type",d),options:[{value:"solid",label:"Slida"},{value:"dashed",label:"Punteada"},{value:"dotted",label:"Puntos"}]}),s.jsx(Je,{label:"Color",value:r.color||"#e5e7eb",onChange:d=>a("color",d),type:"color"}),s.jsx(Je,{label:"Grosor (px)",value:r.thickness||1,onChange:d=>a("thickness",parseInt(d)),type:"number"})]});case"spacer":return s.jsx("div",{className:"space-y-4",children:s.jsx(Je,{label:"Altura (px)",value:r.height||40,onChange:d=>a("height",parseInt(d)),type:"number"})});default:return s.jsx("div",{className:"text-gray-500 text-center py-4",children:"No hay propiedades editables para este componente"})}};return s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[s.jsxs("div",{className:"p-4 border-b bg-gradient-to-r from-purple-50 to-pink-50",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:" Propiedades"}),s.jsx("p",{className:"text-sm text-gray-600",children:yK(e.type)})]}),s.jsx("div",{className:"p-4 max-h-[600px] overflow-y-auto",children:c()})]})},Je=({label:e,value:t,onChange:r,type:n,placeholder:a})=>s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),n==="textarea"?s.jsx("textarea",{value:t,onChange:i=>r(i.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",rows:3,placeholder:a}):s.jsx("input",{type:n,value:t,onChange:i=>r(i.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",placeholder:a})]}),Pc=({label:e,value:t,onChange:r,options:n})=>s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:e}),s.jsx("select",{value:t,onChange:a=>r(a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",children:n.map(a=>s.jsx("option",{value:a.value,children:a.label},a.value))})]}),yK=e=>({"hero-banner":"Banner Principal","service-cards":"Tarjetas de Servicios","contact-form":"Formulario de Contacto",testimonials:"Testimonios",stats:"Estadsticas","text-block":"Bloque de Texto","image-gallery":"Galera de Imgenes",map:"Mapa de Ubicacin",divider:"Separador",spacer:"Espaciador"})[e]||e,bK=()=>{const[e,t]=p.useState({id:"home-layout",name:"Home Page",components:[],version:1,lastModified:new Date().toISOString()}),[r,n]=p.useState(null),[a,i]=p.useState(!1),[o,l]=p.useState(null),c=$q(Iq(kg,{activationConstraint:{distance:8}}));console.log("HomeBuilder - Rendering, components:",e.components.length);const d=v=>{console.log("Drag start:",v),l(v.active.id)},u=p.useCallback(v=>{var b;console.log("Drag end:",v);const{active:f,over:x}=v;if(l(null),!!x)if(((b=f.data.current)==null?void 0:b.type)==="component-library"){const N=f.id,w={id:`component-${Date.now()}`,type:N,props:jK(N),order:e.components.length};console.log("Adding new component:",w),t(S=>({...S,components:[...S.components,w]}))}else f.id!==x.id&&t(N=>({...N,components:Ag(N.components,N.components.findIndex(w=>w.id===f.id),N.components.findIndex(w=>w.id===x.id)).map((w,S)=>({...w,order:S}))}))},[e.components]),m=p.useCallback(v=>{console.log("Component selected:",v),n(v)},[]),h=p.useCallback((v,f)=>{t(x=>({...x,components:x.components.map(b=>b.id===v?{...b,props:{...b.props,...f}}:b)}))},[]),g=p.useCallback(v=>{t(f=>({...f,components:f.components.filter(x=>x.id!==v)})),n(null)},[]),j=async()=>{try{console.log("Saving layout:",e),alert("Layout guardado exitosamente! (Modo demo)")}catch(v){console.error("Error saving layout:",v),alert("Error al guardar el layout")}},y=async()=>{try{console.log("Loading layout..."),alert("Layout cargado exitosamente! (Modo demo)")}catch(v){console.error("Error loading layout:",v)}};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white shadow-sm border-b",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex justify-between items-center py-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:" Home Builder"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Disea la pgina principal arrastrando componentes"})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:()=>i(!a),className:`px-4 py-2 rounded-md text-sm font-medium ${a?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:a?"Editar":"Vista Previa"}),s.jsx("button",{onClick:y,className:"px-4 py-2 bg-gray-600 text-white rounded-md text-sm font-medium hover:bg-gray-700",children:"Cargar"}),s.jsx("button",{onClick:j,className:"px-4 py-2 bg-green-600 text-white rounded-md text-sm font-medium hover:bg-green-700",children:"Guardar"})]})]})})}),s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:s.jsxs($G,{sensors:c,collisionDetection:Hq,onDragStart:d,onDragEnd:u,children:[s.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[!a&&s.jsx("div",{className:"col-span-3",children:s.jsx(fK,{})}),s.jsx("div",{className:a?"col-span-12":"col-span-6",children:s.jsx(xK,{layout:e,onComponentSelect:m,onComponentDelete:g,selectedComponent:r,isPreviewMode:a})}),!a&&r&&s.jsx("div",{className:"col-span-3",children:s.jsx(vK,{component:r,onUpdate:h})})]}),s.jsx(rK,{children:o?s.jsx("div",{className:"bg-white border-2 border-blue-500 rounded-lg p-4 shadow-lg opacity-80",children:s.jsx("div",{className:"text-sm font-medium text-gray-900",children:o.startsWith("component-")?"Nuevo componente":"Componente"})}):null})]})})]})},jK=e=>({"hero-banner":{title:"Bienvenido a Nuestro Despacho",subtitle:"Servicios legales profesionales y confiables",backgroundImage:"/images/hero-bg.jpg",ctaText:"Consultar Ahora",ctaLink:"/contact"},"service-cards":{title:"Nuestros Servicios",services:[{title:"Derecho Civil",description:"Asesora en casos civiles",icon:""},{title:"Derecho Laboral",description:"Proteccin de derechos laborales",icon:""},{title:"Derecho Familiar",description:"Divorcios y custodia",icon:""}]},"contact-form":{title:"Contctanos",subtitle:"Estamos aqu para ayudarte",fields:["nombre","email","telefono","mensaje"]},testimonials:{title:"Lo que dicen nuestros clientes",testimonials:[{name:"Mara Garca",text:"Excelente servicio profesional",rating:5},{name:"Juan Prez",text:"Muy satisfecho con el resultado",rating:5}]},stats:{title:"Nuestros Nmeros",stats:[{label:"Casos Exitosos",value:"500+"},{label:"Aos de Experiencia",value:"15"},{label:"Clientes Satisfechos",value:"1000+"}]},"text-block":{title:"Sobre Nosotros",content:"Somos un despacho de abogados comprometido con la excelencia y la justicia.",alignment:"left",fontSize:"medium"},"image-gallery":{title:"Nuestras Instalaciones",columns:3,showCaptions:!0,images:["/images/office-1.jpg","/images/office-2.jpg","/images/office-3.jpg"]},map:{title:"Nuestra Ubicacin",address:"Calle Principal 123, Ciudad",latitude:40.4168,longitude:-3.7038,zoom:15},divider:{type:"solid",color:"#e5e7eb",thickness:1},spacer:{height:40}})[e]||{},NK=()=>s.jsx(bK,{}),wK=()=>{const{user:e}=we(),[t,r]=p.useState([]),[n,a]=p.useState(!0),[i,o]=p.useState(null),[l,c]=p.useState(null),[d,u]=p.useState(!1),[m,h]=p.useState({name:"",role:"ADMIN",orientation:"horizontal",isActive:!0,items:[]});p.useEffect(()=>{g()},[]);const g=async()=>{try{a(!0);const w=await Q.get("/menu-config");r(w.data)}catch(w){console.error("Error fetching menu configs:",w)}finally{a(!1)}},j=async()=>{try{await Q.post("/menu-config",m),u(!1),h({name:"",role:"ADMIN",orientation:"horizontal",isActive:!0,items:[]}),g()}catch(w){console.error("Error creating menu:",w)}},y=async()=>{if(l)try{await Q.patch(`/menu-config/${l.id}`,l),c(null),g()}catch(w){console.error("Error updating menu:",w)}},v=async w=>{if(confirm("Ests seguro de que quieres eliminar este men?"))try{await Q.delete(`/menu-config/${w}`),g()}catch(S){console.error("Error deleting menu:",S)}},f=w=>{const S={label:"Nuevo elemento",url:"/",icon:"",order:w.items.length,isVisible:!0,isExternal:!1},C={...w,items:[...w.items,S]};(l==null?void 0:l.id)===w.id&&c(C)},x=(w,S,C,k)=>{const A=[...w.items];A[S]={...A[S],[C]:k};const O={...w,items:A};(l==null?void 0:l.id)===w.id&&c(O)},b=(w,S)=>{const C=w.items.filter((A,O)=>O!==S),k={...w,items:C};(l==null?void 0:l.id)===w.id&&c(k)},N=w=>({ADMIN:"Administrador",ABOGADO:"Abogado",CLIENTE:"Cliente"})[w]||w;return n?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Cargando configuraciones de mens..."})]})}):s.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:" Configuracin de Mens"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Gestiona los mens de navegacin para cada rol de usuario"})]}),s.jsx("div",{className:"mb-6",children:s.jsx("button",{onClick:()=>u(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:" Crear Nuevo Men"})}),d&&s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Crear Nuevo Men"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre del Men"}),s.jsx("input",{type:"text",value:m.name,onChange:w=>h({...m,name:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ej: Men Principal"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rol"}),s.jsxs("select",{value:m.role,onChange:w=>h({...m,role:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"ADMIN",children:"Administrador"}),s.jsx("option",{value:"ABOGADO",children:"Abogado"}),s.jsx("option",{value:"CLIENTE",children:"Cliente"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Orientacin"}),s.jsxs("select",{value:m.orientation,onChange:w=>h({...m,orientation:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"horizontal",children:"Horizontal"}),s.jsx("option",{value:"vertical",children:"Vertical"})]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:m.isActive,onChange:w=>h({...m,isActive:w.target.checked}),className:"mr-2"}),s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Men Activo"})]})]}),s.jsxs("div",{className:"mt-4 flex space-x-3",children:[s.jsx("button",{onClick:j,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors",children:" Crear Men"}),s.jsx("button",{onClick:()=>u(!1),className:"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition-colors",children:" Cancelar"})]})]}),s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:t.map(w=>s.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-4",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold",children:w.name}),s.jsxs("p",{className:"text-blue-100 text-sm",children:[N(w.role),"  ",w.orientation==="horizontal"?"Horizontal":"Vertical"]})]}),s.jsxs("div",{className:"flex space-x-2",children:[w.isActive&&s.jsx("span",{className:"bg-green-500 text-white px-2 py-1 rounded-full text-xs",children:"Activo"}),s.jsx("button",{onClick:()=>c((l==null?void 0:l.id)===w.id?null:w),className:"bg-white bg-opacity-20 hover:bg-opacity-30 px-3 py-1 rounded text-sm transition-colors",children:(l==null?void 0:l.id)===w.id?" Cancelar":" Editar"}),s.jsx("button",{onClick:()=>v(w.id),className:"bg-red-500 hover:bg-red-600 px-3 py-1 rounded text-sm transition-colors",children:" Eliminar"})]})]})}),s.jsx("div",{className:"p-4",children:(l==null?void 0:l.id)===w.id?s.jsxs("div",{children:[s.jsx("div",{className:"mb-4",children:s.jsx("button",{onClick:()=>f(l),className:"bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600 transition-colors",children:" Agregar Elemento"})}),l.items.map((S,C)=>s.jsx("div",{className:"border border-gray-200 rounded p-3 mb-3",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsx("input",{type:"text",value:S.label,onChange:k=>x(l,C,"label",k.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"Etiqueta"}),s.jsx("input",{type:"text",value:S.url,onChange:k=>x(l,C,"url",k.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"URL"}),s.jsx("input",{type:"text",value:S.icon,onChange:k=>x(l,C,"icon",k.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"Icono (emoji)"}),s.jsx("input",{type:"number",value:S.order,onChange:k=>x(l,C,"order",parseInt(k.target.value)),className:"px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"Orden"}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("label",{className:"flex items-center text-sm",children:[s.jsx("input",{type:"checkbox",checked:S.isVisible,onChange:k=>x(l,C,"isVisible",k.target.checked),className:"mr-2"}),"Visible"]}),s.jsxs("label",{className:"flex items-center text-sm",children:[s.jsx("input",{type:"checkbox",checked:S.isExternal,onChange:k=>x(l,C,"isExternal",k.target.checked),className:"mr-2"}),"Externo"]})]}),s.jsx("button",{onClick:()=>b(l,C),className:"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600 transition-colors",children:" Eliminar"})]})},C)),s.jsxs("div",{className:"mt-4 flex space-x-3",children:[s.jsx("button",{onClick:y,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors",children:" Guardar Cambios"}),s.jsx("button",{onClick:()=>c(null),className:"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition-colors",children:" Cancelar"})]})]}):s.jsx("div",{children:w.items.length===0?s.jsx("p",{className:"text-gray-500 text-center py-4",children:"No hay elementos en este men"}):s.jsx("div",{className:"space-y-2",children:w.items.sort((S,C)=>S.order-C.order).map((S,C)=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:"text-lg",children:S.icon}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:S.label}),s.jsx("p",{className:"text-sm text-gray-500",children:S.url})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[!S.isVisible&&s.jsx("span",{className:"text-xs bg-gray-300 text-gray-600 px-2 py-1 rounded",children:"Oculto"}),S.isExternal&&s.jsx("span",{className:"text-xs bg-blue-300 text-blue-600 px-2 py-1 rounded",children:"Externo"}),s.jsx("span",{className:"text-xs bg-gray-200 text-gray-600 px-2 py-1 rounded",children:S.order})]})]},C))})})})]},w.id))}),t.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("p",{className:"text-gray-500 text-lg",children:"No hay configuraciones de mens creadas"}),s.jsx("button",{onClick:()=>u(!0),className:"mt-4 bg-blue-600 text-white px-6 py-3 rounded-md hover:bg-blue-700 transition-colors",children:" Crear Primer Men"})]})]})})},SK=()=>{const{user:e}=we(),[t,r]=p.useState([]),[n,a]=p.useState(!0),[i,o]=p.useState(null),[l,c]=p.useState(!1),[d,u]=p.useState({key:"",value:"",type:"string",category:"general",description:"",isPublic:!1});p.useEffect(()=>{m()},[]);const m=async()=>{try{a(!0);const b=await Q.get("/site-config/categories");r(b.data)}catch(b){console.error("Error fetching site configs:",b)}finally{a(!1)}},h=async()=>{try{await Q.post("/site-config",d),c(!1),u({key:"",value:"",type:"string",category:"general",description:"",isPublic:!1}),m()}catch(b){console.error("Error creating config:",b)}},g=async()=>{if(i)try{await Q.patch(`/site-config/${i.id}`,i),o(null),m()}catch(b){console.error("Error updating config:",b)}},j=async b=>{if(confirm("Ests seguro de que quieres eliminar esta configuracin?"))try{await Q.delete(`/site-config/${b}`),m()}catch(N){console.error("Error deleting config:",N)}},y=async(b,N)=>{try{await Q.patch(`/site-config/key/${b}`,{value:N}),m()}catch(w){console.error("Error updating config:",w)}},v=b=>({branding:" Marca",layout:" Diseo",contact:" Contacto",social:" Social",general:" General"})[b]||b,f=b=>({string:"Texto",image:"Imagen",color:"Color",boolean:"Booleano",json:"JSON"})[b]||b,x=b=>{switch(b.type){case"boolean":return s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:b.value==="true",onChange:N=>y(b.key,N.target.checked.toString()),className:"mr-2"}),s.jsx("span",{className:"text-sm text-gray-600",children:b.value==="true"?"Activado":"Desactivado"})]});case"color":return s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"color",value:b.value,onChange:N=>y(b.key,N.target.value),className:"w-8 h-8 border border-gray-300 rounded"}),s.jsx("span",{className:"text-sm font-mono",children:b.value})]});case"image":return s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("img",{src:b.value,alt:"Preview",className:"w-8 h-8 object-cover border border-gray-300 rounded",onError:N=>{N.currentTarget.style.display="none"}}),s.jsx("input",{type:"text",value:b.value,onChange:N=>y(b.key,N.target.value),className:"flex-1 px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"URL de la imagen"})]});default:return s.jsx("input",{type:"text",value:b.value,onChange:N=>y(b.key,N.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"Valor"})}};return n?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Cargando configuraciones del sitio..."})]})}):s.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:" Configuracin del Sitio"}),s.jsx("p",{className:"mt-2 text-gray-600",children:"Gestiona la configuracin general del sitio web"})]}),s.jsxs("div",{className:"mb-6 flex space-x-4",children:[s.jsx("button",{onClick:()=>c(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:" Nueva Configuracin"}),s.jsx("button",{onClick:async()=>{try{await Q.post("/site-config/initialize"),m(),alert("Configuraciones por defecto inicializadas")}catch(b){console.error("Error initializing configs:",b)}},className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors",children:" Inicializar Configuraciones"})]}),l&&s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Crear Nueva Configuracin"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Clave"}),s.jsx("input",{type:"text",value:d.key,onChange:b=>u({...d,key:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ej: site_name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Valor"}),s.jsx("input",{type:"text",value:d.value,onChange:b=>u({...d,value:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Valor de la configuracin"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo"}),s.jsxs("select",{value:d.type,onChange:b=>u({...d,type:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"string",children:"Texto"}),s.jsx("option",{value:"image",children:"Imagen"}),s.jsx("option",{value:"color",children:"Color"}),s.jsx("option",{value:"boolean",children:"Booleano"}),s.jsx("option",{value:"json",children:"JSON"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Categora"}),s.jsxs("select",{value:d.category,onChange:b=>u({...d,category:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"branding",children:"Marca"}),s.jsx("option",{value:"layout",children:"Diseo"}),s.jsx("option",{value:"contact",children:"Contacto"}),s.jsx("option",{value:"social",children:"Social"}),s.jsx("option",{value:"general",children:"General"})]})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripcin"}),s.jsx("input",{type:"text",value:d.description,onChange:b=>u({...d,description:b.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Descripcin de la configuracin"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:d.isPublic,onChange:b=>u({...d,isPublic:b.target.checked}),className:"mr-2"}),s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Configuracin Pblica"})]})]}),s.jsxs("div",{className:"mt-4 flex space-x-3",children:[s.jsx("button",{onClick:h,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors",children:" Crear Configuracin"}),s.jsx("button",{onClick:()=>c(!1),className:"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition-colors",children:" Cancelar"})]})]}),s.jsx("div",{className:"space-y-6",children:t.map(b=>s.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[s.jsxs("div",{className:"bg-gradient-to-r from-gray-600 to-gray-700 text-white p-4",children:[s.jsx("h2",{className:"text-lg font-semibold",children:v(b.category)}),s.jsxs("p",{className:"text-gray-200 text-sm",children:[b.configs.length," configuracin",b.configs.length!==1?"es":""]})]}),s.jsx("div",{className:"p-4",children:s.jsx("div",{className:"space-y-4",children:b.configs.map(N=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[s.jsx("h4",{className:"font-medium text-gray-900",children:N.key}),s.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:f(N.type)}),N.isPublic&&s.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded",children:"Pblico"})]}),N.description&&s.jsx("p",{className:"text-sm text-gray-600",children:N.description})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>o((i==null?void 0:i.id)===N.id?null:N),className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm transition-colors",children:(i==null?void 0:i.id)===N.id?" Cancelar":" Editar"}),s.jsx("button",{onClick:()=>j(N.id),className:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm transition-colors",children:" Eliminar"})]})]}),(i==null?void 0:i.id)===N.id?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valor"}),N.type==="boolean"?s.jsxs("select",{value:N.value,onChange:w=>o({...N,value:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:[s.jsx("option",{value:"true",children:"Activado"}),s.jsx("option",{value:"false",children:"Desactivado"})]}):N.type==="color"?s.jsx("input",{type:"color",value:N.value,onChange:w=>o({...N,value:w.target.value}),className:"w-full h-10 border border-gray-300 rounded-md"}):s.jsx("input",{type:"text",value:N.value,onChange:w=>o({...N,value:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripcin"}),s.jsx("input",{type:"text",value:N.description||"",onChange:w=>o({...N,description:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:N.isPublic,onChange:w=>o({...N,isPublic:w.target.checked}),className:"mr-2"}),s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Configuracin Pblica"})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{onClick:g,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors",children:" Guardar Cambios"}),s.jsx("button",{onClick:()=>o(null),className:"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition-colors",children:" Cancelar"})]})]}):s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Valor Actual"}),x(N)]})]},N.id))})})]},b.category))}),t.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("p",{className:"text-gray-500 text-lg",children:"No hay configuraciones del sitio"}),s.jsx("button",{onClick:()=>c(!0),className:"mt-4 bg-blue-600 text-white px-6 py-3 rounded-md hover:bg-blue-700 transition-colors",children:" Crear Primera Configuracin"})]})]})})},CK=()=>{var k,A,O;const{user:e}=we(),t=kr(),[r,n]=p.useState(0),[a,i]=p.useState(null),[o,l]=p.useState({}),[c,d]=p.useState(!1),[u,m]=p.useState(!1),h=[{id:"legal-office",name:"Despacho Legal",description:"Gestin completa de casos legales, clientes y documentacin",icon:"",category:"Legal",features:["Gestin de expedientes y casos","Sistema de citas y calendario","Documentacin legal","Facturacin y pagos","Comunicacin con clientes"],configSteps:[{id:"basic-info",title:"Informacin Bsica del Despacho",description:"Configura los datos fundamentales de tu despacho",type:"site",questions:[{id:"office_name",question:"Cul es el nombre de tu despacho legal?",type:"text",defaultValue:"Despacho Legal"},{id:"specialties",question:"En qu especialidades legales te enfocas?",type:"multiselect",options:["Derecho Civil","Derecho Penal","Derecho Laboral","Derecho Mercantil","Derecho Administrativo","Derecho de Familia","Derecho Inmobiliario","Derecho Fiscal"]},{id:"office_hours",question:"Cules son tus horarios de atencin?",type:"text",defaultValue:"Lunes a Viernes: 9:00 - 18:00"}]},{id:"menu-setup",title:"Configuracin de Mens",description:"Personaliza la navegacin para abogados y clientes",type:"menu",questions:[{id:"enable_consultations",question:"Quieres ofrecer consultas online?",type:"boolean",defaultValue:!0},{id:"enable_document_templates",question:"Quieres vender plantillas de documentos legales?",type:"boolean",defaultValue:!0},{id:"enable_payment_plans",question:"Quieres ofrecer planes de pago a plazos?",type:"boolean",defaultValue:!1}]},{id:"ecommerce-setup",title:"Configuracin de Tienda Online",description:"Configura la venta de servicios y productos legales",type:"ecommerce",questions:[{id:"enable_online_payments",question:"Quieres habilitar pagos online?",type:"boolean",defaultValue:!0},{id:"payment_methods",question:"Qu mtodos de pago quieres aceptar?",type:"multiselect",options:["PayPal","Tarjeta de Crdito","Transferencia Bancaria"],dependsOn:"enable_online_payments",dependsValue:!0},{id:"consultation_price",question:"Cul ser el precio de la consulta inicial?",type:"text",defaultValue:"50",dependsOn:"enable_consultations",dependsValue:!0}]}]},{id:"consulting-firm",name:"Empresa de Consultora",description:"Servicios de consultora empresarial y estratgica",icon:"",category:"Business",features:["Consultora estratgica","Anlisis de procesos","Gestin de proyectos","Formacin empresarial","Auditoras y reportes"],configSteps:[{id:"basic-info",title:"Informacin de la Consultora",description:"Configura los datos de tu empresa de consultora",type:"site",questions:[{id:"company_name",question:"Cul es el nombre de tu consultora?",type:"text",defaultValue:"Consultora Empresarial"},{id:"consulting_areas",question:"En qu reas de consultora te especializas?",type:"multiselect",options:["Estrategia Empresarial","Optimizacin de Procesos","Recursos Humanos","Finanzas Corporativas","Marketing Digital","Transformacin Digital","Gestin de Calidad","Compliance y Legal"]}]},{id:"service-catalog",title:"Catlogo de Servicios",description:"Configura los servicios que ofreces",type:"ecommerce",questions:[{id:"service_types",question:"Qu tipos de servicios quieres ofrecer?",type:"multiselect",options:["Consultora por Horas","Proyectos Completos","Auditoras","Formacin","Mentoring","Anlisis de Datos"]},{id:"enable_packages",question:"Quieres ofrecer paquetes de servicios?",type:"boolean",defaultValue:!0}]}]},{id:"online-academy",name:"Academia Online",description:"Plataforma de formacin y cursos online",icon:"",category:"Education",features:["Cursos online","Sistema de evaluacin","Certificaciones","Comunidad de estudiantes","Contenido multimedia"],configSteps:[{id:"academy-info",title:"Informacin de la Academia",description:"Configura los datos de tu academia online",type:"site",questions:[{id:"academy_name",question:"Cul es el nombre de tu academia?",type:"text",defaultValue:"Academia Online"},{id:"academic_areas",question:"En qu reas acadmicas te especializas?",type:"multiselect",options:["Tecnologa y Programacin","Negocios y Emprendimiento","Idiomas","Arte y Diseo","Salud y Bienestar","Ciencias y Matemticas","Humanidades","Formacin Profesional"]}]},{id:"course-structure",title:"Estructura de Cursos",description:"Configura cmo organizars tus cursos",type:"custom",questions:[{id:"course_types",question:"Qu tipos de cursos quieres ofrecer?",type:"multiselect",options:["Cursos Autodidactas","Cursos con Tutor","Bootcamps Intensivos","Webinars","Talleres Prcticos","Certificaciones"]},{id:"enable_subscriptions",question:"Quieres ofrecer suscripciones mensuales?",type:"boolean",defaultValue:!0}]}]},{id:"digital-agency",name:"Agencia Digital",description:"Servicios de marketing digital y desarrollo web",icon:"",category:"Digital",features:["Desarrollo web","Marketing digital","SEO y SEM","Redes sociales","Analytics y reportes"],configSteps:[{id:"agency-info",title:"Informacin de la Agencia",description:"Configura los datos de tu agencia digital",type:"site",questions:[{id:"agency_name",question:"Cul es el nombre de tu agencia?",type:"text",defaultValue:"Agencia Digital"},{id:"digital_services",question:"Qu servicios digitales ofreces?",type:"multiselect",options:["Desarrollo Web","Diseo Grfico","Marketing Digital","SEO y SEM","Gestin de Redes Sociales","Email Marketing","Analytics y Reportes","Consultora Digital"]}]},{id:"project-management",title:"Gestin de Proyectos",description:"Configura el sistema de gestin de proyectos",type:"custom",questions:[{id:"project_tracking",question:"Quieres que los clientes puedan seguir sus proyectos?",type:"boolean",defaultValue:!0},{id:"client_portal",question:"Quieres crear un portal para clientes?",type:"boolean",defaultValue:!0}]}]},{id:"health-clinic",name:"Clnica de Salud",description:"Gestin de citas mdicas y pacientes",icon:"",category:"Health",features:["Gestin de citas","Historiales mdicos","Facturacin mdica","Comunicacin con pacientes","Reportes mdicos"],configSteps:[{id:"clinic-info",title:"Informacin de la Clnica",description:"Configura los datos de tu clnica",type:"site",questions:[{id:"clinic_name",question:"Cul es el nombre de tu clnica?",type:"text",defaultValue:"Clnica de Salud"},{id:"medical_specialties",question:"Qu especialidades mdicas ofreces?",type:"multiselect",options:["Medicina General","Cardiologa","Dermatologa","Ginecologa","Pediatra","Psicologa","Fisioterapia","Odontologa"]}]},{id:"appointment-system",title:"Sistema de Citas",description:"Configura el sistema de citas mdicas",type:"custom",questions:[{id:"online_booking",question:"Quieres que los pacientes puedan reservar citas online?",type:"boolean",defaultValue:!0},{id:"appointment_reminders",question:"Quieres enviar recordatorios de citas?",type:"boolean",defaultValue:!0}]}]}],g=D=>{i(D),n(0),l({})},j=(D,I)=>{l(M=>({...M,[D]:I}))},y=D=>D.dependsOn?o[D.dependsOn]===D.dependsValue:!0,v=()=>a?a.configSteps[r]:null,f=()=>{r<a.configSteps.length-1?n(r+1):b()},x=()=>{r>0&&n(r-1)},b=async()=>{m(!0);try{await N(),t("/admin/menu-config")}catch(D){console.error("Error applying configuration:",D)}finally{m(!1)}},N=async()=>{const D=w();for(const M of D)await Q.post("/api/site-config",M);const I=S();for(const M of I)await Q.post("/api/menu-config",M)},w=()=>{const D=[];return(a==null?void 0:a.id)==="legal-office"?D.push({key:"site_name",value:o.office_name||"Despacho Legal",type:"string",category:"branding",isPublic:!0},{key:"site_description",value:"Servicios legales profesionales",type:"string",category:"branding",isPublic:!0},{key:"office_hours",value:o.office_hours||"Lunes a Viernes: 9:00 - 18:00",type:"string",category:"contact",isPublic:!0}):(a==null?void 0:a.id)==="consulting-firm"&&D.push({key:"site_name",value:o.company_name||"Consultora Empresarial",type:"string",category:"branding",isPublic:!0},{key:"site_description",value:"Consultora empresarial y estratgica",type:"string",category:"branding",isPublic:!0}),D},S=()=>{const D=[];if((a==null?void 0:a.id)==="legal-office"){const I={name:"Men Abogado",role:"ABOGADO",orientation:"horizontal",isActive:!0,items:[{label:"Dashboard",url:"/dashboard",icon:"",order:1,isVisible:!0,isExternal:!1},{label:"Expedientes",url:"/lawyer/cases",icon:"",order:2,isVisible:!0,isExternal:!1},{label:"Citas",url:"/lawyer/appointments",icon:"",order:3,isVisible:!0,isExternal:!1}]};o.enable_consultations&&I.items.push({label:"Consultas",url:"/lawyer/consultations",icon:"",order:4,isVisible:!0,isExternal:!1}),D.push(I)}return D},C=D=>{var I,M;if(!y(D))return null;switch(D.type){case"boolean":return s.jsx("div",{className:"mb-6",children:s.jsxs("label",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"checkbox",checked:o[D.id]??D.defaultValue,onChange:E=>j(D.id,E.target.checked),className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),s.jsx("span",{className:"text-lg font-medium text-gray-900",children:D.question})]})},D.id);case"text":return s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-lg font-medium text-gray-900 mb-2",children:D.question}),s.jsx("input",{type:"text",value:o[D.id]??D.defaultValue??"",onChange:E=>j(D.id,E.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Escribe tu respuesta..."})]},D.id);case"select":return s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-lg font-medium text-gray-900 mb-2",children:D.question}),s.jsxs("select",{value:o[D.id]??"",onChange:E=>j(D.id,E.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"",children:"Selecciona una opcin"}),(I=D.options)==null?void 0:I.map(E=>s.jsx("option",{value:E,children:E},E))]})]},D.id);case"multiselect":return s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-lg font-medium text-gray-900 mb-2",children:D.question}),s.jsx("div",{className:"space-y-2",children:(M=D.options)==null?void 0:M.map(E=>s.jsxs("label",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"checkbox",checked:(o[D.id]||[]).includes(E),onChange:L=>{const V=o[D.id]||[],G=L.target.checked?[...V,E]:V.filter(W=>W!==E);j(D.id,G)},className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),s.jsx("span",{className:"text-gray-700",children:E})]},E))})]},D.id);default:return null}};return c?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:" Configuracin Guiada del Sistema"}),s.jsx("p",{className:"text-lg text-gray-600",children:"Te ayudaremos a configurar tu sistema paso a paso segn tu tipo de negocio"})]}),a?s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Paso ",r+1," de ",a.configSteps.length]}),s.jsxs("span",{className:"text-sm text-gray-500",children:[Math.round((r+1)/a.configSteps.length*100),"% completado"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${(r+1)/a.configSteps.length*100}%`}})})]}),s.jsx("div",{className:"mb-8 p-4 bg-blue-50 rounded-lg",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-2xl mr-3",children:a.icon}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-bold text-gray-900",children:["Configurando: ",a.name]}),s.jsx("p",{className:"text-gray-600",children:a.description})]})]})}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:(k=v())==null?void 0:k.title}),s.jsx("p",{className:"text-gray-600 mb-6",children:(A=v())==null?void 0:A.description}),s.jsx("div",{className:"space-y-6",children:(O=v())==null?void 0:O.questions.map(C)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("button",{onClick:()=>i(null),className:"px-6 py-3 text-gray-600 hover:text-gray-800 transition-colors",children:" Cambiar tipo de negocio"}),s.jsxs("div",{className:"flex space-x-4",children:[r>0&&s.jsx("button",{onClick:x,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:" Anterior"}),s.jsx("button",{onClick:f,disabled:u,className:"px-6 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50",children:u?s.jsxs("span",{className:"flex items-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Configurando..."]}):r===a.configSteps.length-1?"Finalizar Configuracin":"Siguiente "})]})]})]}):s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6 text-center",children:"Qu tipo de negocio quieres configurar?"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:h.map(D=>s.jsx("div",{onClick:()=>g(D),className:"border-2 border-gray-200 rounded-lg p-6 hover:border-blue-500 hover:shadow-lg transition-all cursor-pointer",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-4xl mb-4",children:D.icon}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:D.name}),s.jsx("p",{className:"text-gray-600 mb-4",children:D.description}),s.jsxs("div",{className:"text-sm text-gray-500",children:[s.jsx("strong",{children:"Caractersticas principales:"}),s.jsx("ul",{className:"mt-2 space-y-1",children:D.features.slice(0,3).map((I,M)=>s.jsxs("li",{children:[" ",I]},M))})]})]})},D.id))})]}),s.jsxs("div",{className:"mt-8 bg-blue-50 rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:" Necesitas ayuda?"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Para Despachos Legales:"}),s.jsxs("ul",{className:"mt-1 space-y-1",children:[s.jsx("li",{children:" Configura especialidades legales"}),s.jsx("li",{children:" Habilita consultas online"}),s.jsx("li",{children:" Establece precios de servicios"})]})]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Para Consultoras:"}),s.jsxs("ul",{className:"mt-1 space-y-1",children:[s.jsx("li",{children:" Define reas de consultora"}),s.jsx("li",{children:" Configura tipos de servicios"}),s.jsx("li",{children:" Establece paquetes de servicios"})]})]})]})]})]})})},ub=()=>{var D,I,M;const{user:e}=we(),[t,r]=p.useState([]),[n,a]=p.useState([]),[i,o]=p.useState(null),[l,c]=p.useState(!0),[d,u]=p.useState("pending"),[m,h]=p.useState([]),[g,j]=p.useState(""),[y,v]=p.useState({}),[f,x]=p.useState(!1);p.useEffect(()=>{b(),x(!0),Q.get("/teleassistance/remote-tools").then(E=>h(E.data)).catch(()=>h([])).finally(()=>x(!1))},[e]);const b=async()=>{try{c(!0);const E=await Q.get("/teleassistance/sessions/pending");if(a(E.data),e){const L=await Q.get("/teleassistance/sessions/assistant/"+e.id);r(L.data)}if((e==null?void 0:e.role)==="ADMIN"){const L=await Q.get("/teleassistance/stats");o(L.data)}}catch(E){console.error("Error loading teleassistance data:",E)}finally{c(!1)}},N=async E=>{try{await Q.post(`/teleassistance/sessions/${E}/start`),b()}catch(L){console.error("Error starting session:",L)}},w=async(E,L)=>{try{await Q.post(`/teleassistance/sessions/${E}/end`,{resolution:L}),b()}catch(V){console.error("Error ending session:",V)}},S=E=>{const L={PENDING:{color:"bg-yellow-100 text-yellow-800",text:"Pendiente"},ACTIVE:{color:"bg-green-100 text-green-800",text:"Activa"},COMPLETED:{color:"bg-blue-100 text-blue-800",text:"Completada"},CANCELLED:{color:"bg-red-100 text-red-800",text:"Cancelada"}},V=L[E]||L.PENDING;return s.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${V.color}`,children:V.text})},C=E=>({AUTOFIRMA:"",CERTIFICADO_DIGITAL:"",SEDES:"",CLAVE_PIN:"",NAVEGADOR:"",SISTEMA_OPERATIVO:"",OTRO:""})[E]||"",k=E=>{if(!E)return"N/A";const L=Math.floor(E/60),V=E%60;return L>0?`${L}h ${V}m`:`${V}m`},A=E=>new Date(E).toLocaleString("es-ES"),O=()=>{if(!g)return null;switch(g){case"teamviewer-quicksupport":return s.jsxs(s.Fragment,{children:[s.jsxs("label",{children:["ID de TeamViewer",s.jsx("input",{type:"text",required:!0,value:y.teamviewerId||"",onChange:E=>v({...y,teamviewerId:E.target.value})})]}),s.jsxs("label",{children:["Contrasea",s.jsx("input",{type:"text",required:!0,value:y.teamviewerPassword||"",onChange:E=>v({...y,teamviewerPassword:E.target.value})})]})]});case"remotely-anywhere":return s.jsx(s.Fragment,{children:s.jsxs("label",{children:["Cdigo de acceso",s.jsx("input",{type:"text",required:!0,value:y.remotelyCode||"",onChange:E=>v({...y,remotelyCode:E.target.value})})]})});case"anydesk":return s.jsx(s.Fragment,{children:s.jsxs("label",{children:["Cdigo de AnyDesk",s.jsx("input",{type:"text",required:!0,value:y.anydeskCode||"",onChange:E=>v({...y,anydeskCode:E.target.value})})]})});case"chrome-remote-desktop":return s.jsx(s.Fragment,{children:s.jsxs("label",{children:["Cdigo de acceso",s.jsx("input",{type:"text",required:!0,value:y.chromeCode||"",onChange:E=>v({...y,chromeCode:E.target.value})})]})});default:return null}};return l?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:" Sistema de Teleasistencia"}),s.jsx("p",{className:"text-lg text-gray-600",children:"Gestiona sesiones de asistencia remota para problemas de administracin electrnica"})]}),i&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6 mb-8",children:[s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Sesiones"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.totalSessions})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:s.jsx("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Pendientes"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.pendingSessions})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:s.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Activas"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.activeSessions})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Completadas"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.completedSessions})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:s.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Duracin Promedio"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:k(i.averageDuration)})]})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow mb-8",children:[s.jsx("div",{className:"border-b border-gray-200",children:s.jsxs("nav",{className:"-mb-px flex space-x-8 px-6",children:[s.jsxs("button",{onClick:()=>u("pending"),className:`py-4 px-1 border-b-2 font-medium text-sm ${d==="pending"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Sesiones Pendientes (",n.length,")"]}),s.jsxs("button",{onClick:()=>u("all"),className:`py-4 px-1 border-b-2 font-medium text-sm ${d==="all"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Mis Sesiones (",t.length,")"]}),(e==null?void 0:e.role)==="ADMIN"&&s.jsx("button",{onClick:()=>u("stats"),className:`py-4 px-1 border-b-2 font-medium text-sm ${d==="stats"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Estadsticas"})]})}),s.jsxs("div",{className:"p-6",children:[d==="pending"&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Sesiones Pendientes de Asistencia"}),n.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No hay sesiones pendientes"})]}):s.jsx("div",{className:"space-y-4",children:n.map(E=>s.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"text-2xl",children:C(E.issueType)}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-medium text-gray-900",children:E.user.name}),s.jsxs("p",{className:"text-sm text-gray-500",children:[E.issueType.replace("_"," ")," - ",E.description]}),s.jsxs("p",{className:"text-xs text-gray-400",children:["Creada: ",A(E.createdAt)]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[S(E.status),s.jsx("button",{onClick:()=>N(E.id),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Iniciar Sesin"})]})]})},E.id))})]}),d==="all"&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Mis Sesiones de Teleasistencia"}),t.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No tienes sesiones de teleasistencia"})]}):s.jsx("div",{className:"space-y-4",children:t.map(E=>s.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"text-2xl",children:C(E.issueType)}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-lg font-medium text-gray-900",children:E.user.name}),s.jsxs("p",{className:"text-sm text-gray-500",children:[E.issueType.replace("_"," ")," - ",E.description]}),s.jsxs("p",{className:"text-xs text-gray-400",children:[E.startedAt&&`Iniciada: ${A(E.startedAt)}`,E.duration&&` | Duracin: ${k(E.duration)}`]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[S(E.status),E.status==="ACTIVE"&&s.jsx("button",{onClick:()=>w(E.id),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:"Finalizar"})]})]})},E.id))})]}),d==="stats"&&i&&s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Estadsticas Detalladas"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Resumen General"}),s.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[s.jsxs("li",{children:["Total de sesiones: ",i.totalSessions]}),s.jsxs("li",{children:["Sesiones pendientes: ",i.pendingSessions]}),s.jsxs("li",{children:["Sesiones activas: ",i.activeSessions]}),s.jsxs("li",{children:["Sesiones completadas: ",i.completedSessions]})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Mtricas de Tiempo"}),s.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[s.jsxs("li",{children:["Duracin promedio: ",k(i.averageDuration)]}),s.jsxs("li",{children:["Tasa de resolucin: ",i.totalSessions>0?Math.round(i.completedSessions/i.totalSessions*100):0,"%"]})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"Conectar con el cliente autenticado"}),s.jsxs("label",{children:["Herramienta de escritorio remoto",s.jsxs("select",{required:!0,value:g,onChange:E=>j(E.target.value),children:[s.jsx("option",{value:"",children:"Selecciona una herramienta"}),m.map(E=>s.jsx("option",{value:E.id,children:E.name},E.id))]})]}),O(),g&&s.jsxs("div",{style:{marginTop:24,background:"#f8f8f8",borderRadius:6,padding:16},children:[s.jsxs("h4",{children:["Instrucciones para ",(D=m.find(E=>E.id===g))==null?void 0:D.name]}),s.jsx("ul",{children:(I=m.find(E=>E.id===g))==null?void 0:I.instructions.map((E,L)=>s.jsx("li",{children:E},L))}),s.jsx("a",{href:(M=m.find(E=>E.id===g))==null?void 0:M.downloadUrl,target:"_blank",rel:"noopener noreferrer",children:"Descargar / Abrir herramienta"})]})]})]})]})]})})},Is=Object.create(null);Is.open="0";Is.close="1";Is.ping="2";Is.pong="3";Is.message="4";Is.upgrade="5";Is.noop="6";const cd=Object.create(null);Object.keys(Is).forEach(e=>{cd[Is[e]]=e});const rp={type:"error",data:"parser error"},kS=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",DS=typeof ArrayBuffer=="function",AS=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Tg=({type:e,data:t},r,n)=>kS&&t instanceof Blob?r?n(t):mb(t,n):DS&&(t instanceof ArrayBuffer||AS(t))?r?n(t):mb(new Blob([t]),n):n(Is[e]+(t||"")),mb=(e,t)=>{const r=new FileReader;return r.onload=function(){const n=r.result.split(",")[1];t("b"+(n||""))},r.readAsDataURL(e)};function hb(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let wh;function EK(e,t){if(kS&&e.data instanceof Blob)return e.data.arrayBuffer().then(hb).then(t);if(DS&&(e.data instanceof ArrayBuffer||AS(e.data)))return t(hb(e.data));Tg(e,!1,r=>{wh||(wh=new TextEncoder),t(wh.encode(r))})}const fb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ko=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<fb.length;e++)ko[fb.charCodeAt(e)]=e;const kK=e=>{let t=e.length*.75,r=e.length,n,a=0,i,o,l,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const d=new ArrayBuffer(t),u=new Uint8Array(d);for(n=0;n<r;n+=4)i=ko[e.charCodeAt(n)],o=ko[e.charCodeAt(n+1)],l=ko[e.charCodeAt(n+2)],c=ko[e.charCodeAt(n+3)],u[a++]=i<<2|o>>4,u[a++]=(o&15)<<4|l>>2,u[a++]=(l&3)<<6|c&63;return d},DK=typeof ArrayBuffer=="function",_g=(e,t)=>{if(typeof e!="string")return{type:"message",data:TS(e,t)};const r=e.charAt(0);return r==="b"?{type:"message",data:AK(e.substring(1),t)}:cd[r]?e.length>1?{type:cd[r],data:e.substring(1)}:{type:cd[r]}:rp},AK=(e,t)=>{if(DK){const r=kK(e);return TS(r,t)}else return{base64:!0,data:e}},TS=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},_S="",TK=(e,t)=>{const r=e.length,n=new Array(r);let a=0;e.forEach((i,o)=>{Tg(i,!1,l=>{n[o]=l,++a===r&&t(n.join(_S))})})},_K=(e,t)=>{const r=e.split(_S),n=[];for(let a=0;a<r.length;a++){const i=_g(r[a],t);if(n.push(i),i.type==="error")break}return n};function OK(){return new TransformStream({transform(e,t){EK(e,r=>{const n=r.length;let a;if(n<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,n);else if(n<65536){a=new Uint8Array(3);const i=new DataView(a.buffer);i.setUint8(0,126),i.setUint16(1,n)}else{a=new Uint8Array(9);const i=new DataView(a.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(n))}e.data&&typeof e.data!="string"&&(a[0]|=128),t.enqueue(a),t.enqueue(r)})}})}let Sh;function Lc(e){return e.reduce((t,r)=>t+r.length,0)}function Ic(e,t){if(e[0].length===t)return e.shift();const r=new Uint8Array(t);let n=0;for(let a=0;a<t;a++)r[a]=e[0][n++],n===e[0].length&&(e.shift(),n=0);return e.length&&n<e[0].length&&(e[0]=e[0].slice(n)),r}function MK(e,t){Sh||(Sh=new TextDecoder);const r=[];let n=0,a=-1,i=!1;return new TransformStream({transform(o,l){for(r.push(o);;){if(n===0){if(Lc(r)<1)break;const c=Ic(r,1);i=(c[0]&128)===128,a=c[0]&127,a<126?n=3:a===126?n=1:n=2}else if(n===1){if(Lc(r)<2)break;const c=Ic(r,2);a=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),n=3}else if(n===2){if(Lc(r)<8)break;const c=Ic(r,8),d=new DataView(c.buffer,c.byteOffset,c.length),u=d.getUint32(0);if(u>Math.pow(2,21)-1){l.enqueue(rp);break}a=u*Math.pow(2,32)+d.getUint32(4),n=3}else{if(Lc(r)<a)break;const c=Ic(r,a);l.enqueue(_g(i?c:Sh.decode(c),t)),n=0}if(a===0||a>e){l.enqueue(rp);break}}}})}const OS=4;function yt(e){if(e)return RK(e)}function RK(e){for(var t in yt.prototype)e[t]=yt.prototype[t];return e}yt.prototype.on=yt.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};yt.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this};yt.prototype.off=yt.prototype.removeListener=yt.prototype.removeAllListeners=yt.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var n,a=0;a<r.length;a++)if(n=r[a],n===t||n.fn===t){r.splice(a,1);break}return r.length===0&&delete this._callbacks["$"+e],this};yt.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,a=r.length;n<a;++n)r[n].apply(this,t)}return this};yt.prototype.emitReserved=yt.prototype.emit;yt.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};yt.prototype.hasListeners=function(e){return!!this.listeners(e).length};const bm=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,r)=>r(t,0),Fr=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),PK="arraybuffer";function MS(e,...t){return t.reduce((r,n)=>(e.hasOwnProperty(n)&&(r[n]=e[n]),r),{})}const LK=Fr.setTimeout,IK=Fr.clearTimeout;function jm(e,t){t.useNativeTimers?(e.setTimeoutFn=LK.bind(Fr),e.clearTimeoutFn=IK.bind(Fr)):(e.setTimeoutFn=Fr.setTimeout.bind(Fr),e.clearTimeoutFn=Fr.clearTimeout.bind(Fr))}const $K=1.33;function FK(e){return typeof e=="string"?BK(e):Math.ceil((e.byteLength||e.size)*$K)}function BK(e){let t=0,r=0;for(let n=0,a=e.length;n<a;n++)t=e.charCodeAt(n),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(n++,r+=4);return r}function RS(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function zK(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}function UK(e){let t={},r=e.split("&");for(let n=0,a=r.length;n<a;n++){let i=r[n].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}class VK extends Error{constructor(t,r,n){super(t),this.description=r,this.context=n,this.type="TransportError"}}class Og extends yt{constructor(t){super(),this.writable=!1,jm(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,r,n){return super.emitReserved("error",new VK(t,r,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=_g(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,r={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const r=zK(t);return r.length?"?"+r:""}}class HK extends Og{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||r()})),this.writable||(n++,this.once("drain",function(){--n||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};_K(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,TK(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=RS()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(t,r)}}let PS=!1;try{PS=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const WK=PS;function YK(){}class qK extends HK{constructor(t){if(super(t),typeof location<"u"){const r=location.protocol==="https:";let n=location.port;n||(n=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||n!==t.port}}doWrite(t,r){const n=this.request({method:"POST",data:t});n.on("success",r),n.on("error",(a,i)=>{this.onError("xhr post error",a,i)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,n)=>{this.onError("xhr poll error",r,n)}),this.pollXhr=t}}let xi=class dd extends yt{constructor(t,r,n){super(),this.createRequest=t,jm(this,n),this._opts=n,this._method=n.method||"GET",this._uri=r,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var t;const r=MS(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(r);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let a in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(a)&&n.setRequestHeader(a,this._opts.extraHeaders[a])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var a;n.readyState===3&&((a=this._opts.cookieJar)===null||a===void 0||a.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(a){this.setTimeoutFn(()=>{this._onError(a)},0);return}typeof document<"u"&&(this._index=dd.requestsCount++,dd.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=YK,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete dd.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};xi.requestsCount=0;xi.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",pb);else if(typeof addEventListener=="function"){const e="onpagehide"in Fr?"pagehide":"unload";addEventListener(e,pb,!1)}}function pb(){for(let e in xi.requests)xi.requests.hasOwnProperty(e)&&xi.requests[e].abort()}const GK=function(){const e=LS({xdomain:!1});return e&&e.responseType!==null}();class KK extends qK{constructor(t){super(t);const r=t&&t.forceBase64;this.supportsBinary=GK&&!r}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new xi(LS,this.uri(),t)}}function LS(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||WK))return new XMLHttpRequest}catch{}if(!t)try{return new Fr[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const IS=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class XK extends Og{get name(){return"websocket"}doOpen(){const t=this.uri(),r=this.opts.protocols,n=IS?{}:MS(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,r,n)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],a=r===t.length-1;Tg(n,this.supportsBinary,i=>{try{this.doWrite(n,i)}catch{}a&&bm(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=RS()),this.supportsBinary||(r.b64=1),this.createUri(t,r)}}const Ch=Fr.WebSocket||Fr.MozWebSocket;class QK extends XK{createSocket(t,r,n){return IS?new Ch(t,r,n):r?new Ch(t,r):new Ch(t)}doWrite(t,r){this.ws.send(r)}}class JK extends Og{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const r=MK(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=t.readable.pipeThrough(r).getReader(),a=OK();a.readable.pipeTo(t.writable),this._writer=a.writable.getWriter();const i=()=>{n.read().then(({done:l,value:c})=>{l||(this.onPacket(c),i())}).catch(l=>{})};i();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],a=r===t.length-1;this._writer.write(n).then(()=>{a&&bm(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const ZK={websocket:QK,webtransport:JK,polling:KK},eX=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,tX=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function sp(e){if(e.length>8e3)throw"URI too long";const t=e,r=e.indexOf("["),n=e.indexOf("]");r!=-1&&n!=-1&&(e=e.substring(0,r)+e.substring(r,n).replace(/:/g,";")+e.substring(n,e.length));let a=eX.exec(e||""),i={},o=14;for(;o--;)i[tX[o]]=a[o]||"";return r!=-1&&n!=-1&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=rX(i,i.path),i.queryKey=sX(i,i.query),i}function rX(e,t){const r=/\/{2,9}/g,n=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&n.splice(0,1),t.slice(-1)=="/"&&n.splice(n.length-1,1),n}function sX(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,a,i){a&&(r[a]=i)}),r}const np=typeof addEventListener=="function"&&typeof removeEventListener=="function",ud=[];np&&addEventListener("offline",()=>{ud.forEach(e=>e())},!1);class Un extends yt{constructor(t,r){if(super(),this.binaryType=PK,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(r=t,t=null),t){const n=sp(t);r.hostname=n.host,r.secure=n.protocol==="https"||n.protocol==="wss",r.port=n.port,n.query&&(r.query=n.query)}else r.host&&(r.hostname=sp(r.host).host);jm(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(n=>{const a=n.prototype.name;this.transports.push(a),this._transportsByName[a]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=UK(this.opts.query)),np&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},ud.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=OS,r.transport=t,this.id&&(r.sid=this.id);const n=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&Un.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(t);r.open(),this.setTransport(r)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",Un.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=t.data,this._onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let n=0;n<this.writeBuffer.length;n++){const a=this.writeBuffer[n].data;if(a&&(r+=FK(a)),n>0&&r>this._maxPayload)return this.writeBuffer.slice(0,n);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,bm(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,r,n){return this._sendPacket("message",t,r,n),this}send(t,r,n){return this._sendPacket("message",t,r,n),this}_sendPacket(t,r,n,a){if(typeof r=="function"&&(a=r,r=void 0),typeof n=="function"&&(a=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const i={type:t,data:r,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),a&&this.once("flush",a),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},n=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():t()}):this.upgrading?n():t()),this}_onError(t){if(Un.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),np&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=ud.indexOf(this._offlineEventListener);n!==-1&&ud.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this._prevBufferLen=0}}}Un.protocol=OS;class nX extends Un{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let r=this.createTransport(t),n=!1;Un.priorWebsocketSuccess=!1;const a=()=>{n||(r.send([{type:"ping",data:"probe"}]),r.once("packet",m=>{if(!n)if(m.type==="pong"&&m.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;Un.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(u(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=r.name,this.emitReserved("upgradeError",h)}}))};function i(){n||(n=!0,u(),r.close(),r=null)}const o=m=>{const h=new Error("probe error: "+m);h.transport=r.name,i(),this.emitReserved("upgradeError",h)};function l(){o("transport closed")}function c(){o("socket closed")}function d(m){r&&m.name!==r.name&&i()}const u=()=>{r.removeListener("open",a),r.removeListener("error",o),r.removeListener("close",l),this.off("close",c),this.off("upgrading",d)};r.once("open",a),r.once("error",o),r.once("close",l),this.once("close",c),this.once("upgrading",d),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{n||r.open()},200):r.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const r=[];for(let n=0;n<t.length;n++)~this.transports.indexOf(t[n])&&r.push(t[n]);return r}}let aX=class extends nX{constructor(t,r={}){const n=typeof t=="object"?t:r;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(a=>ZK[a]).filter(a=>!!a)),super(t,n)}};function iX(e,t="",r){let n=e;r=r||typeof location<"u"&&location,e==null&&(e=r.protocol+"//"+r.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=r.protocol+e:e=r.host+e),/^(https?|wss?):\/\//.test(e)||(typeof r<"u"?e=r.protocol+"//"+e:e="https://"+e),n=sp(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const i=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+i+":"+n.port+t,n.href=n.protocol+"://"+i+(r&&r.port===n.port?"":":"+n.port),n}const oX=typeof ArrayBuffer=="function",lX=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,$S=Object.prototype.toString,cX=typeof Blob=="function"||typeof Blob<"u"&&$S.call(Blob)==="[object BlobConstructor]",dX=typeof File=="function"||typeof File<"u"&&$S.call(File)==="[object FileConstructor]";function Mg(e){return oX&&(e instanceof ArrayBuffer||lX(e))||cX&&e instanceof Blob||dX&&e instanceof File}function md(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let r=0,n=e.length;r<n;r++)if(md(e[r]))return!0;return!1}if(Mg(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return md(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&md(e[r]))return!0;return!1}function uX(e){const t=[],r=e.data,n=e;return n.data=ap(r,t),n.attachments=t.length,{packet:n,buffers:t}}function ap(e,t){if(!e)return e;if(Mg(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}else if(Array.isArray(e)){const r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=ap(e[n],t);return r}else if(typeof e=="object"&&!(e instanceof Date)){const r={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=ap(e[n],t));return r}return e}function mX(e,t){return e.data=ip(e.data,t),delete e.attachments,e}function ip(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=ip(e[r],t);else if(typeof e=="object")for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=ip(e[r],t));return e}const hX=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],fX=5;var Me;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(Me||(Me={}));class pX{constructor(t){this.replacer=t}encode(t){return(t.type===Me.EVENT||t.type===Me.ACK)&&md(t)?this.encodeAsBinary({type:t.type===Me.EVENT?Me.BINARY_EVENT:Me.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===Me.BINARY_EVENT||t.type===Me.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=uX(t),n=this.encodeAsString(r.packet),a=r.buffers;return a.unshift(n),a}}function xb(e){return Object.prototype.toString.call(e)==="[object Object]"}class Rg extends yt{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t);const n=r.type===Me.BINARY_EVENT;n||r.type===Me.BINARY_ACK?(r.type=n?Me.EVENT:Me.ACK,this.reconstructor=new xX(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(Mg(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const n={type:Number(t.charAt(0))};if(Me[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===Me.BINARY_EVENT||n.type===Me.BINARY_ACK){const i=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const o=t.substring(i,r);if(o!=Number(o)||t.charAt(r)!=="-")throw new Error("Illegal attachments");n.attachments=Number(o)}if(t.charAt(r+1)==="/"){const i=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););n.nsp=t.substring(i,r)}else n.nsp="/";const a=t.charAt(r+1);if(a!==""&&Number(a)==a){const i=r+1;for(;++r;){const o=t.charAt(r);if(o==null||Number(o)!=o){--r;break}if(r===t.length)break}n.id=Number(t.substring(i,r+1))}if(t.charAt(++r)){const i=this.tryParse(t.substr(r));if(Rg.isPayloadValid(n.type,i))n.data=i;else throw new Error("invalid payload")}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case Me.CONNECT:return xb(r);case Me.DISCONNECT:return r===void 0;case Me.CONNECT_ERROR:return typeof r=="string"||xb(r);case Me.EVENT:case Me.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&hX.indexOf(r[0])===-1);case Me.ACK:case Me.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class xX{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=mX(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const gX=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Rg,Encoder:pX,get PacketType(){return Me},protocol:fX},Symbol.toStringTag,{value:"Module"}));function ss(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const vX=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class FS extends yt{constructor(t,r,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[ss(t,"open",this.onopen.bind(this)),ss(t,"packet",this.onpacket.bind(this)),ss(t,"error",this.onerror.bind(this)),ss(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){var n,a,i;if(vX.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(r.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const o={type:Me.EVENT,data:r};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const u=this.ids++,m=r.pop();this._registerAckCallback(u,m),o.id=u}const l=(a=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||a===void 0?void 0:a.writable,c=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,r){var n;const a=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(a===void 0){this.acks[t]=r;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===t&&this.sendBuffer.splice(l,1);r.call(this,new Error("operation has timed out"))},a),o=(...l)=>{this.io.clearTimeoutFn(i),r.apply(this,l)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...r){return new Promise((n,a)=>{const i=(o,l)=>o?a(o):n(l);i.withError=!0,r.push(i),this.emit(t,...r)})}_addToQueue(t){let r;typeof t[t.length-1]=="function"&&(r=t.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((a,...i)=>n!==this._queue[0]?void 0:(a!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(a)):(this._queue.shift(),r&&r(null,...i)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!t||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Me.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(n=>String(n.id)===t)){const n=this.acks[t];delete this.acks[t],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Me.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Me.EVENT:case Me.BINARY_EVENT:this.onevent(t);break;case Me.ACK:case Me.BINARY_ACK:this.onack(t);break;case Me.DISCONNECT:this.ondisconnect();break;case Me.CONNECT_ERROR:this.destroy();const n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const n of r)n.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const r=this;let n=!1;return function(...a){n||(n=!0,r.packet({type:Me.ACK,id:t,data:a}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(delete this.acks[t.id],r.withError&&t.data.unshift(null),r.apply(this,t.data))}onconnect(t,r){this.id=t,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Me.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const n of r)n.apply(this,t.data)}}}function eo(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}eo.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+r:e-r}return Math.min(e,this.max)|0};eo.prototype.reset=function(){this.attempts=0};eo.prototype.setMin=function(e){this.ms=e};eo.prototype.setMax=function(e){this.max=e};eo.prototype.setJitter=function(e){this.jitter=e};class op extends yt{constructor(t,r){var n;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,jm(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((n=r.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new eo({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const a=r.parser||gX;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new aX(this.uri,this.opts);const r=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const a=ss(r,"open",function(){n.onopen(),t&&t()}),i=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),t?t(l):this.maybeReconnectOnOpen()},o=ss(r,"error",i);if(this._timeout!==!1){const l=this._timeout,c=this.setTimeoutFn(()=>{a(),i(new Error("timeout")),r.close()},l);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(a),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(ss(t,"ping",this.onping.bind(this)),ss(t,"data",this.ondata.bind(this)),ss(t,"error",this.onerror.bind(this)),ss(t,"close",this.onclose.bind(this)),ss(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){bm(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new FS(this,t,r),this.nsps[t]=n),n}_destroy(t){const r=Object.keys(this.nsps);for(const n of r)if(this.nsps[n].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let n=0;n<r.length;n++)this.engine.write(r[n],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,r){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(a=>{a?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",a)):t.onreconnect()}))},r);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const vo={};function Wo(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const r=iX(e,t.path||"/socket.io"),n=r.source,a=r.id,i=r.path,o=vo[a]&&i in vo[a].nsps,l=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let c;return l?c=new op(n,t):(vo[a]||(vo[a]=new op(n,t)),c=vo[a]),r.query&&!t.query&&(t.query=r.queryKey),c.socket(r.path,t)}Object.assign(Wo,{Manager:op,Socket:FS,io:Wo,connect:Wo});const yX=()=>{var U,X;const[e,t]=p.useState([]),[r,n]=p.useState([]),[a,i]=p.useState([]),[o,l]=p.useState(""),[c,d]=p.useState(""),[u,m]=p.useState(""),[h,g]=p.useState(!0),[j,y]=p.useState(null),[v,f]=p.useState(!1),[x,b]=p.useState(null),[N,w]=p.useState([]),[S,C]=p.useState(new Set),[k,A]=p.useState(!1),O=p.useRef(null),D=p.useRef(null),{user:I}=we();p.useEffect(()=>{if(!I)return;const F=localStorage.getItem("token"),H=Wo("http://localhost:3000",{auth:{token:F,user:{id:I.id,name:I.name,role:I.role}}});return H.on("connect",()=>{console.log("Conectado al servidor de chat")}),H.on("disconnect",()=>{console.log("Desconectado del servidor de chat")}),H.on("new_message",Y=>{t(K=>[...K,Y]),n(K=>K.map(le=>le.userId===Y.senderId?{...le,lastMessage:Y.content,lastMessageTime:Y.createdAt}:le)),c!==Y.senderId&&_(Y.senderName,Y.content)}),H.on("message_sent",Y=>{t(K=>[...K,Y])}),H.on("user_typing",Y=>{Y.isTyping?C(K=>new Set(K).add(Y.userId)):C(K=>{const le=new Set(K);return le.delete(Y.userId),le})}),H.on("user_connected",Y=>{w(K=>[...K,Y])}),H.on("user_disconnected",Y=>{w(K=>K.filter(le=>le.userId!==Y.userId))}),H.on("message_error",Y=>{y(Y.error)}),b(H),()=>{H.close()}},[I]),p.useEffect(()=>{(async()=>{try{g(!0);const H=localStorage.getItem("token");if(console.log("Token from localStorage:",H?"Token exists":"No token found"),console.log("User from context:",I),!H||!I){console.error("No token or user found"),y("Usuario no autenticado"),n([]),i([]);return}const[Y,K]=await Promise.all([Q.get("/users/lawyers"),Q.get("/chat/conversations")]);console.log("Lawyers response:",Y.data),console.log("Lawyers response type:",typeof Y.data),console.log("Lawyers response isArray:",Array.isArray(Y.data)),console.log("Lawyers response status:",Y.status),console.log("Conversations response:",K.data),console.log("Conversations response type:",typeof K.data),console.log("Conversations response isArray:",Array.isArray(K.data)),console.log("Conversations response status:",K.status),console.log("Conversations response headers:",K.headers),i(Array.isArray(Y.data)?Y.data:[]),n(Array.isArray(K.data)?K.data:[]),y(null)}catch(H){console.error("Error fetching data:",H),y("Error al cargar los datos"),n([]),i([])}finally{g(!1)}})()},[]),p.useEffect(()=>{c&&M(c)},[c]),p.useEffect(()=>{E()},[e]);const M=async F=>{try{const H=localStorage.getItem("token"),Y=await Q.get(`/chat/messages/${F}`);t(Y.data)}catch(H){console.error("Error fetching messages:",H),y("Error al cargar los mensajes")}},E=()=>{var F;(F=O.current)==null||F.scrollIntoView({behavior:"smooth"})},L=async F=>{if(F.preventDefault(),!(!u.trim()||!c||!x))try{f(!0),x.emit("send_message",{receiverId:c,content:u}),m(""),x.emit("typing_stop",{receiverId:c}),A(!1)}catch(H){console.error("Error sending message:",H),y("Error al enviar el mensaje")}finally{f(!1)}},V=F=>{l(F),d(F),t([])},G=F=>{d(F)},W=F=>{m(F.target.value),!(!x||!c)&&(k||(A(!0),x.emit("typing_start",{receiverId:c})),D.current&&clearTimeout(D.current),D.current=setTimeout(()=>{A(!1),x.emit("typing_stop",{receiverId:c})},1e3))},_=(F,H)=>{"Notification"in window&&Notification.permission==="granted"&&new Notification(`Nuevo mensaje de ${F}`,{body:H,icon:"/favicon.ico"})},T=F=>{const H=new Date(F),K=(new Date().getTime()-H.getTime())/(1e3*60*60);return K<24?H.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):K<48?"Ayer":H.toLocaleDateString()},R=F=>N.some(H=>H.userId===F),B=F=>F.charAt(0).toUpperCase();return h?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):s.jsx("div",{className:"py-6",children:s.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[s.jsxs("div",{className:"p-4 border-b",children:[s.jsx("h1",{className:"text-xl font-semibold",children:"Chat con Abogado"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Comunicacin directa con tu abogado"})]}),s.jsxs("div",{className:"flex h-96",children:[s.jsxs("div",{className:"w-1/3 border-r bg-gray-50",children:[s.jsxs("div",{className:"p-4 border-b",children:[s.jsx("h2",{className:"font-medium text-gray-900 mb-3",children:"Conversaciones"}),!Array.isArray(r)||r.length===0?s.jsx("p",{className:"text-sm text-gray-500",children:"No hay conversaciones activas"}):s.jsx("div",{className:"space-y-2",children:r.map(F=>s.jsx("div",{onClick:()=>G(F.userId),className:`p-3 rounded-lg cursor-pointer transition-colors ${c===F.userId?"bg-blue-100 border-blue-300":"bg-white hover:bg-gray-100"}`,children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white text-sm font-medium",children:B(F.userName)})}),R(F.userId)&&s.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:F.userName}),s.jsx("div",{className:"text-xs text-gray-400",children:T(F.lastMessageTime)})]}),s.jsx("p",{className:"text-xs text-gray-500 truncate",children:F.lastMessage}),F.unreadCount>0&&s.jsx("div",{className:"mt-1",children:s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:F.unreadCount})})]})]})},F.userId))})]}),s.jsxs("div",{className:"p-4 border-t",children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Nueva conversacin"}),s.jsxs("select",{value:o,onChange:F=>V(F.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Seleccionar abogado para nueva conversacin",children:[s.jsx("option",{value:"",children:"Selecciona un abogado"}),a.map(F=>s.jsxs("option",{value:F.id,children:[F.name," (",F.email,")"]},F.id))]})]})]}),s.jsx("div",{className:"flex-1 flex flex-col",children:c?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"p-4 border-b bg-gray-50",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white text-sm font-medium",children:B(Array.isArray(r)&&((U=r.find(F=>F.userId===c))==null?void 0:U.userName)||"A")})}),R(c)&&s.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})]}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"font-medium text-gray-900",children:Array.isArray(r)&&((X=r.find(F=>F.userId===c))==null?void 0:X.userName)||"Abogado"}),s.jsx("p",{className:"text-sm text-gray-500",children:R(c)?"En lnea":"Desconectado"})]})]})})}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e.length===0?s.jsx("div",{className:"text-center text-gray-500 mt-8",children:s.jsx("p",{children:"No hay mensajes an. Inicia la conversacin!"})}):e.map(F=>s.jsx("div",{className:`flex ${F.isOwnMessage?"justify-end":"justify-start"}`,children:s.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${F.isOwnMessage?"bg-blue-600 text-white":"bg-gray-200 text-gray-900"}`,children:[s.jsx("div",{className:"text-sm",children:F.content}),s.jsx("div",{className:`text-xs mt-1 ${F.isOwnMessage?"text-blue-100":"text-gray-500"}`,children:T(F.createdAt)})]})},F.id)),S.has(c)&&s.jsx("div",{className:"flex justify-start",children:s.jsx("div",{className:"bg-gray-200 text-gray-900 px-4 py-2 rounded-lg",children:s.jsx("div",{className:"text-sm",children:"Escribiendo..."})})}),s.jsx("div",{ref:O})]}),s.jsx("form",{onSubmit:L,className:"p-4 border-t",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("input",{type:"text",value:u,onChange:W,placeholder:"Escribe tu mensaje...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:v}),s.jsx("button",{type:"submit",disabled:!u.trim()||v,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:v?"Enviando...":"Enviar"})]})})]}):s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsxs("div",{className:"text-center text-gray-500",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),s.jsx("p",{className:"text-lg font-medium",children:"Selecciona una conversacin"}),s.jsx("p",{className:"text-sm",children:"O inicia una nueva conversacin con un abogado"})]})})})]}),j&&s.jsx("div",{className:"p-4 bg-red-50 border-t border-red-200",children:s.jsx("div",{className:"text-red-600 text-sm",children:j})})]})})})},bX=()=>{var U,X;const[e,t]=p.useState([]),[r,n]=p.useState([]),[a,i]=p.useState([]),[o,l]=p.useState(""),[c,d]=p.useState(""),[u,m]=p.useState(""),[h,g]=p.useState(!0),[j,y]=p.useState(null),[v,f]=p.useState(!1),[x,b]=p.useState(null),[N,w]=p.useState([]),[S,C]=p.useState(new Set),[k,A]=p.useState(!1),O=p.useRef(null),D=p.useRef(null),{user:I}=we();p.useEffect(()=>{if(!I)return;const F=localStorage.getItem("token"),H=Wo("http://localhost:3000",{auth:{token:F,user:{id:I.id,name:I.name,role:I.role}}});return H.on("connect",()=>{console.log("Conectado al servidor de chat")}),H.on("disconnect",()=>{console.log("Desconectado del servidor de chat")}),H.on("new_message",Y=>{t(K=>[...K,Y]),n(K=>K.map(le=>le.userId===Y.senderId?{...le,lastMessage:Y.content,lastMessageTime:Y.createdAt}:le)),c!==Y.senderId&&_(Y.senderName,Y.content)}),H.on("message_sent",Y=>{t(K=>[...K,Y])}),H.on("user_typing",Y=>{Y.isTyping?C(K=>new Set(K).add(Y.userId)):C(K=>{const le=new Set(K);return le.delete(Y.userId),le})}),H.on("user_connected",Y=>{w(K=>[...K,Y])}),H.on("user_disconnected",Y=>{w(K=>K.filter(le=>le.userId!==Y.userId))}),H.on("message_error",Y=>{y(Y.error)}),b(H),()=>{H.close()}},[I]),p.useEffect(()=>{(async()=>{try{g(!0);const H=localStorage.getItem("token"),[Y,K]=await Promise.all([Q.get("/users/clients",{headers:{Authorization:`Bearer ${H}`}}),Q.get("/chat/conversations",{headers:{Authorization:`Bearer ${H}`}})]);i(Y.data),n(K.data),y(null)}catch(H){console.error("Error fetching data:",H),y("Error al cargar los datos")}finally{g(!1)}})()},[]),p.useEffect(()=>{c&&M(c)},[c]),p.useEffect(()=>{E()},[e]);const M=async F=>{try{const H=localStorage.getItem("token"),Y=await Q.get(`/chat/messages/${F}`,{headers:{Authorization:`Bearer ${H}`}});t(Y.data)}catch(H){console.error("Error fetching messages:",H),y("Error al cargar los mensajes")}},E=()=>{var F;(F=O.current)==null||F.scrollIntoView({behavior:"smooth"})},L=async F=>{if(F.preventDefault(),!(!u.trim()||!c||!x))try{f(!0),x.emit("send_message",{receiverId:c,content:u}),m(""),x.emit("typing_stop",{receiverId:c}),A(!1)}catch(H){console.error("Error sending message:",H),y("Error al enviar el mensaje")}finally{f(!1)}},V=F=>{l(F),d(F),t([])},G=F=>{d(F)},W=F=>{m(F.target.value),!(!x||!c)&&(k||(A(!0),x.emit("typing_start",{receiverId:c})),D.current&&clearTimeout(D.current),D.current=setTimeout(()=>{A(!1),x.emit("typing_stop",{receiverId:c})},1e3))},_=(F,H)=>{"Notification"in window&&Notification.permission==="granted"&&new Notification(`Nuevo mensaje de ${F}`,{body:H,icon:"/favicon.ico"})},T=F=>{const H=new Date(F),K=(new Date().getTime()-H.getTime())/(1e3*60*60);return K<24?H.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):K<48?"Ayer":H.toLocaleDateString()},R=F=>N.some(H=>H.userId===F),B=F=>F.charAt(0).toUpperCase();return h?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):s.jsx("div",{className:"py-6",children:s.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[s.jsxs("div",{className:"p-4 border-b",children:[s.jsx("h1",{className:"text-xl font-semibold",children:"Chat con Clientes"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Comunicacin directa con tus clientes"})]}),s.jsxs("div",{className:"flex h-96",children:[s.jsxs("div",{className:"w-1/3 border-r bg-gray-50",children:[s.jsxs("div",{className:"p-4 border-b",children:[s.jsx("h2",{className:"font-medium text-gray-900 mb-3",children:"Conversaciones"}),r.length===0?s.jsx("p",{className:"text-sm text-gray-500",children:"No hay conversaciones activas"}):s.jsx("div",{className:"space-y-2",children:r.map(F=>s.jsx("div",{onClick:()=>G(F.userId),className:`p-3 rounded-lg cursor-pointer transition-colors ${c===F.userId?"bg-blue-100 border-blue-300":"bg-white hover:bg-gray-100"}`,children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-10 h-10 bg-green-600 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white text-sm font-medium",children:B(F.userName)})}),R(F.userId)&&s.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:F.userName}),s.jsx("div",{className:"text-xs text-gray-400",children:T(F.lastMessageTime)})]}),s.jsx("p",{className:"text-xs text-gray-500 truncate",children:F.lastMessage}),F.unreadCount>0&&s.jsx("div",{className:"mt-1",children:s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:F.unreadCount})})]})]})},F.userId))})]}),s.jsxs("div",{className:"p-4 border-t",children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"Nueva conversacin"}),s.jsxs("select",{value:o,onChange:F=>V(F.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Seleccionar cliente para nueva conversacin",children:[s.jsx("option",{value:"",children:"Selecciona un cliente"}),a.map(F=>s.jsxs("option",{value:F.user.id,children:[F.user.name," (",F.user.email,")"]},F.id))]})]})]}),s.jsx("div",{className:"flex-1 flex flex-col",children:c?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"p-4 border-b bg-gray-50",children:s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-10 h-10 bg-green-600 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white text-sm font-medium",children:B(((U=r.find(F=>F.userId===c))==null?void 0:U.userName)||"C")})}),R(c)&&s.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})]}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"font-medium text-gray-900",children:((X=r.find(F=>F.userId===c))==null?void 0:X.userName)||"Cliente"}),s.jsx("p",{className:"text-sm text-gray-500",children:R(c)?"En lnea":"Desconectado"})]})]})})}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e.length===0?s.jsx("div",{className:"text-center text-gray-500 mt-8",children:s.jsx("p",{children:"No hay mensajes an. Inicia la conversacin!"})}):e.map(F=>s.jsx("div",{className:`flex ${F.isOwnMessage?"justify-end":"justify-start"}`,children:s.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${F.isOwnMessage?"bg-blue-600 text-white":"bg-gray-200 text-gray-900"}`,children:[s.jsx("div",{className:"text-sm",children:F.content}),s.jsx("div",{className:`text-xs mt-1 ${F.isOwnMessage?"text-blue-100":"text-gray-500"}`,children:T(F.createdAt)})]})},F.id)),S.has(c)&&s.jsx("div",{className:"flex justify-start",children:s.jsx("div",{className:"bg-gray-200 text-gray-900 px-4 py-2 rounded-lg",children:s.jsx("div",{className:"text-sm",children:"Escribiendo..."})})}),s.jsx("div",{ref:O})]}),s.jsx("form",{onSubmit:L,className:"p-4 border-t",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("input",{type:"text",value:u,onChange:W,placeholder:"Escribe tu mensaje...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:v}),s.jsx("button",{type:"submit",disabled:!u.trim()||v,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:v?"Enviando...":"Enviar"})]})})]}):s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsxs("div",{className:"text-center text-gray-500",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),s.jsx("p",{className:"text-lg font-medium",children:"Selecciona una conversacin"}),s.jsx("p",{className:"text-sm",children:"O inicia una nueva conversacin con un cliente"})]})})})]}),j&&s.jsx("div",{className:"p-4 bg-red-50 border-t border-red-200",children:s.jsx("div",{className:"text-red-600 text-sm",children:j})})]})})})};async function jX(e,t){return(await Q.post("/invoices",e,{headers:{Authorization:`Bearer ${t}`}})).data}async function NX(e,t,r){return(await Q.put(`/invoices/${e}`,t,{headers:{Authorization:`Bearer ${r}`}})).data}async function wX(e,t){return(await Q.delete(`/invoices/${e}`,{headers:{Authorization:`Bearer ${t}`}})).data}async function SX(e){return(await Q.get("/users/clients")).data}const CX=async(e,t)=>(await Q.post("/provision-fondos",e,{headers:{Authorization:`Bearer ${t}`}})).data,EX=async e=>(await Q.get("/provision-fondos",{params:{soloPendientes:!0},headers:{Authorization:`Bearer ${e}`}})).data,kX=async(e,t,r)=>(await Q.get("/provision-fondos",{params:{clientId:e,expedienteId:t,soloPendientes:!0},headers:{Authorization:`Bearer ${r}`}})).data,BS=async(e,t)=>(await Q.get("/provision-fondos",{params:{clientId:e},headers:{Authorization:`Bearer ${t}`}})).data,DX=async(e,t)=>{const r={...t};return(await Q.get("/provision-fondos",{params:r,headers:{Authorization:`Bearer ${e}`}})).data},AX=async(e,t,r)=>(await Q.patch(`/provision-fondos/${e}`,t,{headers:{Authorization:`Bearer ${r}`}})).data,TX=async(e,t)=>(await Q.delete(`/provision-fondos/${e}`,{headers:{Authorization:`Bearer ${t}`}})).data,_X=({invoiceId:e,isOpen:t,onClose:r,currentUser:n})=>{const[a,i]=p.useState([]),[o,l]=p.useState(null),[c,d]=p.useState(!1),[u,m]=p.useState(null);p.useEffect(()=>{t&&e&&h()},[t,e]);const h=async()=>{var f,x;d(!0),m(null);try{const b=localStorage.getItem("token");if(!b)throw new Error("No token available");const N=n||JSON.parse(localStorage.getItem("user")||"{}");if(console.log("Usuario actual:",N),console.log("Rol del usuario:",N.role),console.log("Es ADMIN?",N.role==="ADMIN"),console.log("Es ABOGADO?",N.role==="ABOGADO"),N.role!=="ADMIN"&&N.role!=="ABOGADO")throw console.log("Acceso denegado - Rol no autorizado:",N.role),new Error("No tienes permisos para ver el historial de auditora");console.log("Acceso autorizado para auditora");const w=await Q.get(`/invoices/${e}/audit-history`,{headers:{Authorization:`Bearer ${b}`}});i(w.data.auditHistory||[]),l(w.data.summary||null)}catch(b){console.error("Error fetching audit history:",b),m(((x=(f=b.response)==null?void 0:f.data)==null?void 0:x.message)||b.message||"Error al cargar el historial de auditora")}finally{d(!1)}},g=f=>new Date(f).toLocaleString("es-ES",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),j=f=>{switch(f){case"created":return"";case"updated":return"";case"deleted":return"";case"status_changed":return"";default:return""}},y=f=>{switch(f){case"created":return"text-green-600";case"updated":return"text-blue-600";case"deleted":return"text-red-600";case"status_changed":return"text-purple-600";default:return"text-gray-600"}},v=f=>{if(!f)return"N/A";try{const x=JSON.parse(f);return JSON.stringify(x,null,2)}catch{return f}};return t?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800",children:" Historial de Auditora de Factura"}),s.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 text-2xl",children:""})]}),s.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:[s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4 mb-4",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("span",{className:"text-blue-600 mr-2",children:""}),s.jsxs("div",{className:"text-sm text-blue-800",children:[s.jsx("p",{className:"font-medium mb-1",children:"Informacin sobre Auditora"}),s.jsx("p",{children:" Solo visible para administradores y abogados"}),s.jsx("p",{children:" Disponible en cualquier estado de la factura"}),s.jsx("p",{children:" Registra todos los cambios realizados en la factura para trazabilidad"})]})]})}),c&&s.jsxs("div",{className:"flex justify-center items-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),s.jsx("span",{className:"ml-2",children:"Cargando historial..."})]}),u&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4 mb-4",children:s.jsx("p",{className:"text-red-800",children:u})}),!c&&!u&&s.jsxs(s.Fragment,{children:[o&&s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4 mb-6",children:[s.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:" Resumen de Cambios"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Total de cambios:"}),s.jsx("span",{className:"ml-2 text-blue-600",children:o.totalChanges})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"ltima modificacin:"}),s.jsx("span",{className:"ml-2 text-blue-600",children:o.lastModified?g(o.lastModified):"N/A"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Por:"}),s.jsx("span",{className:"ml-2 text-blue-600",children:o.lastModifiedBy||"N/A"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Estado:"}),s.jsx("span",{className:"ml-2 text-blue-600",children:o.totalChanges>0?"Con modificaciones":"Sin modificaciones"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-semibold text-gray-800 mb-4",children:" Historial Detallado"}),a.length===0?s.jsx("div",{className:"text-center py-8 text-gray-500",children:s.jsx("p",{children:"No hay registros de auditora para esta factura."})}):s.jsx("div",{className:"space-y-3",children:a.map(f=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50",children:[s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:"text-xl",children:j(f.action)}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:`font-medium ${y(f.action)}`,children:f.description}),s.jsxs("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:[f.user.name," (",f.user.role,")"]})]}),s.jsx("div",{className:"text-sm text-gray-600 mt-1",children:g(f.createdAt)})]})]})}),f.fieldName&&s.jsxs("div",{className:"mt-3 pl-8",children:[s.jsxs("div",{className:"text-sm text-gray-600",children:[s.jsx("span",{className:"font-medium",children:"Campo:"})," ",f.fieldName]}),f.oldValue&&s.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[s.jsx("span",{className:"font-medium text-red-600",children:"Valor anterior:"}),s.jsx("div",{className:"bg-red-50 p-2 rounded mt-1 font-mono text-xs",children:v(f.oldValue)})]}),f.newValue&&s.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[s.jsx("span",{className:"font-medium text-green-600",children:"Nuevo valor:"}),s.jsx("div",{className:"bg-green-50 p-2 rounded mt-1 font-mono text-xs",children:v(f.newValue)})]})]}),(f.ipAddress||f.userAgent)&&s.jsxs("div",{className:"mt-3 pl-8 text-xs text-gray-500",children:[f.ipAddress&&s.jsxs("div",{children:["IP: ",f.ipAddress]}),f.userAgent&&s.jsxs("div",{className:"truncate",title:f.userAgent,children:["User Agent: ",f.userAgent.substring(0,50),"..."]})]})]},f.id))})]})]})]}),s.jsx("div",{className:"border-t p-4 flex justify-end",children:s.jsx("button",{onClick:r,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"Cerrar"})})]})}):null},Ke={BORRADOR:"borrador",EMITIDA:"emitida",ENVIADA:"enviada",NOTIFICADA:"notificada",ACEPTADA:"aceptada",RECHAZADA:"rechazada",ANULADA:"anulada"},OX=[Ke.BORRADOR,Ke.EMITIDA],MX=[Ke.BORRADOR,Ke.EMITIDA,Ke.ENVIADA],gb=e=>OX.includes(e),RX=e=>!0,vb=e=>MX.includes(e),yo=e=>{switch(e){case Ke.BORRADOR:return"Borrador";case Ke.EMITIDA:return"Emitida";case Ke.ENVIADA:return"Enviada";case Ke.NOTIFICADA:return"Notificada al Cliente";case Ke.ACEPTADA:return"Aceptada";case Ke.RECHAZADA:return"Rechazada";case Ke.ANULADA:return"Anulada";default:return e}},yb=e=>{switch(e){case Ke.BORRADOR:return"text-gray-600 bg-gray-100";case Ke.EMITIDA:return"text-blue-600 bg-blue-100";case Ke.ENVIADA:return"text-orange-600 bg-orange-100";case Ke.NOTIFICADA:return"text-purple-600 bg-purple-100";case Ke.ACEPTADA:return"text-green-600 bg-green-100";case Ke.RECHAZADA:return"text-red-600 bg-red-100";case Ke.ANULADA:return"text-red-800 bg-red-200";default:return"text-gray-600 bg-gray-100"}},PX=e=>{switch(e){case Ke.BORRADOR:return"";case Ke.EMITIDA:return"";case Ke.ENVIADA:return"";case Ke.NOTIFICADA:return"";case Ke.ACEPTADA:return"";case Ke.RECHAZADA:return"";case Ke.ANULADA:return"";default:return""}},bo={numeroFactura:"",fechaFactura:"",tipoFactura:"F",receptorId:"",importeTotal:0,baseImponible:0,cuotaIVA:0,tipoIVA:21,regimenIvaEmisor:"General",claveOperacion:"01",metodoPago:"TRANSFERENCIA",fechaOperacion:"",estado:"emitida",items:[{description:"",quantity:1,unitPrice:0,total:0}],aplicarIVA:!0,retencion:"",descuento:0,tipoImpuesto:"iva",facturaOriginalId:"",tipoRectificacion:"",motivoRectificacion:"",provisionIds:[]},LX=()=>{var Pg,Lg;const{user:e}=we(),t=localStorage.getItem("token");console.log("InvoicesPage component initialized"),console.log("User:",e),console.log("Token available:",!!t);const[r,n]=p.useState([]),[a,i]=p.useState(!0),[o,l]=p.useState(null),[c,d]=p.useState(!1),[u,m]=p.useState(null),[h,g]=p.useState(bo),[j,y]=p.useState(null),[v,f]=p.useState(""),[x,b]=p.useState(""),[N,w]=p.useState([]),[S,C]=p.useState([]),[k,A]=p.useState(null),[O,D]=p.useState(null),[I,M]=p.useState(!1),[E,L]=p.useState(null),[V,G]=p.useState(null),[W,_]=p.useState([]),[T,R]=p.useState(""),[B,U]=p.useState(null),[X,F]=p.useState([]),[H,Y]=p.useState([]),[K,le]=p.useState([]),[q,ce]=p.useState([]),[ae,xe]=p.useState(null),[Ce,He]=p.useState(null),[ee,ge]=p.useState(!1),[Ee,Pe]=p.useState(null),[ke,Oe]=p.useState(null),Le=p.useRef(null),$t=p.useRef(null),Qr=p.useRef(null),xs=p.useRef([]),[Us,Qe]=p.useState({}),Xt=N.find($=>{var Z;return((Z=$.user)==null?void 0:Z.id)===h.receptorId}),_t=Xt==null?void 0:Xt.id,[pn,P]=p.useState(""),[fe,De]=p.useState(""),[ve,Ue]=p.useState(!1),[Se,ot]=p.useState(null),[Ft,to]=p.useState([]),ra=$=>{if(!$)return;if($.includes("/")){const te=$.split("/");if(te.length===3){const oe=te[0],de=te[1];return`${te[2]}-${de.padStart(2,"0")}-${oe.padStart(2,"0")}`}}const Z=new Date($);if(isNaN(Z.getTime())){console.error("Invalid date format:",$);return}return Z.toISOString().split("T")[0]},gs=$=>$.toLocaleString("es-ES",{minimumFractionDigits:2,maximumFractionDigits:2});p.useEffect(()=>{console.log("InvoicesPage useEffect called - fetching data..."),lt(),Qt()},[]),p.useEffect(()=>{(async()=>{if(h.receptorId&&h.expedienteId)try{const Z=localStorage.getItem("token");if(!Z)throw new Error("No token found");const te=await EX(Z);console.log("Provisiones recibidas:",te),console.log("Buscando clientProfileId:",_t,"expedienteId:",h.expedienteId);const oe=te.filter(de=>de.clientId===_t&&de.expedienteId===h.expedienteId&&(!de.invoiceId||de.invoiceId===h.id));console.log("Provisiones filtradas:",oe),oe.length>0?(U(oe[0]),Y(oe)):(U(null),Y([]))}catch{U(null),Y([])}else U(null),Y([])})()},[h.receptorId,h.expedienteId,_t,h.id]),p.useEffect(()=>{(async()=>{if(console.log(" fetchProvisiones - receptorId:",h.receptorId,"expedienteId:",h.expedienteId,"clientProfileId:",_t),h.receptorId&&_t)try{const Z=localStorage.getItem("token");let te;if(h.expedienteId?(console.log(" Buscando provisiones especficas del expediente:",h.expedienteId),te=await kX(_t??"",h.expedienteId??"",Z??"")):(console.log(" Buscando todas las provisiones del cliente:",_t),te=await BS(_t??"",Z??""),te=te.filter(oe=>!oe.invoiceId)),console.log(" Provisiones encontradas:",te),h.id){const oe=h.provisionFondos||[],ye=[...te,...oe].filter((Ae,Vs,xn)=>Vs===xn.findIndex(Bt=>Bt.id===Ae.id));le(ye)}else le(te)}catch(Z){console.error(" Error al cargar provisiones:",Z),le([])}else console.log(" No se cumplen las condiciones para cargar provisiones"),le([])})()},[h.receptorId,h.expedienteId,_t,h.id]),p.useEffect(()=>{console.log(" Provisiones actualizadas:",K.length,K)},[K]);const lt=async()=>{var $,Z,te;i(!0);try{if(!t)throw new Error("No token available");console.log("Fetching invoices with token:",t?"Present":"Missing");const oe={};pn&&(oe.clientId=pn),fe&&(oe.paymentDate=fe),console.log("Invoices params:",oe);const de=await Q.get("/invoices",{params:oe});console.log("Invoices data received:",de.data),n(de.data),l(null)}catch(oe){console.error("Error fetching invoices:",oe);const de=((Z=($=oe==null?void 0:oe.response)==null?void 0:$.data)==null?void 0:Z.message)||(oe==null?void 0:oe.message)||"Error al cargar las facturas";l(` ${de}`),((te=oe==null?void 0:oe.response)==null?void 0:te.status)===401&&n([])}finally{i(!1)}},Qt=async()=>{try{if(!t)throw new Error("No token available");console.log("Fetching clients with token:",t?"Present":"Missing");const $=await SX(t);console.log("Clients data received:",$),console.log("First client structure:",$[0]),w($)}catch($){console.error("Error fetching clients:",$),w([])}},Jt=()=>{const $=new Date().getFullYear(),Z=r.length+1,te=`fac-${$}-${Z.toString().padStart(4,"0")}`;g({...bo,numeroFactura:te,fechaFactura:new Date().toISOString().split("T")[0],fechaOperacion:new Date().toISOString().split("T")[0]}),m(null),ce([]),Y([]),U(null),d(!0)},vs=()=>{const $=r.filter(Z=>Z.estado!=="anulada"&&Z.tipoFactura!=="R"&&Z.estado!=="borrador");to($),Ue(!0)},ir=$=>{ot($);const Z=$.provisionFondos||[],te=Z.map(oe=>oe.id);g({...bo,tipoFactura:"R",receptorId:$.receptorId,expedienteId:$.expedienteId,facturaOriginalId:$.id,numeroFactura:"",items:$.items.map(oe=>({description:oe.description,quantity:oe.quantity,unitPrice:oe.unitPrice,total:oe.total})),tipoIVA:$.tipoIVA,regimenIvaEmisor:$.regimenIvaEmisor,metodoPago:$.metodoPago,provisionIds:te}),ce(te),le(Z),Ue(!1),d(!0)},We=$=>{const{name:Z,value:te}=$.target;g(oe=>({...oe,[Z]:te})),Us[Z]&&Qe(oe=>({...oe,[Z]:!1}))},Tr=async $=>{We($);const Z=$.target.value;if(g(te=>({...te,expedienteId:""})),Z)try{console.log("Fetching expedientes for client:",Z);const oe=(await Q.get("/cases")).data.filter(de=>{var ye,Ae;return((Ae=(ye=de.client)==null?void 0:ye.user)==null?void 0:Ae.id)===Z||de.clientId===Z});console.log("Expedientes found:",oe),F(oe)}catch(te){console.error("Error fetching expedientes:",te),F([])}else F([])},ys=($,Z,te)=>{var oe,de;g(ye=>{const Ae=[...ye.items];return Ae[$][Z]=te,Ae[$].total=Ae[$].quantity*Ae[$].unitPrice,{...ye,items:Ae}}),(de=(oe=Us.items)==null?void 0:oe[$])!=null&&de[Z]&&Qe(ye=>{var Ae;return{...ye,items:{...ye.items,[$]:{...(Ae=ye.items)==null?void 0:Ae[$],[Z]:!1}}}})},bt=()=>{g($=>({...$,items:[...$.items,{description:"",quantity:1,unitPrice:0,total:0}]}))},bs=async $=>{if($.preventDefault(),console.log("handleCreate called"),A(null),D(null),M(!0),!h.receptorId||!h.fechaOperacion||!h.items.length){console.log("Validation failed: missing required fields"),A("Completa todos los campos obligatorios."),M(!1);return}if(h.items.some(Z=>!Z.description||Z.quantity<=0||Z.unitPrice===void 0)){console.log("Validation failed: invalid items"),A("Todos los conceptos deben tener descripcin, cantidad y precio vlidos."),M(!1);return}try{console.log("Starting invoice creation...");const{emisorId:Z,fechaFactura:te,importeTotal:oe,baseImponible:de,cuotaIVA:ye,...Ae}=h,Vs={...Ae,descuento:h.descuento===""||h.descuento==null?0:Number(h.descuento),retencion:h.retencion===""||h.retencion==null?0:Number(h.retencion),tipoIVA:h.tipoIVA===""||h.tipoIVA==null?21:Number(h.tipoIVA),estado:h.estado||"emitida",provisionIds:q,fechaOperacion:ra(h.fechaOperacion),paymentDate:h.paymentDate?ra(h.paymentDate):void 0};console.log("FRONTEND - provisionesSeleccionadas:",q),console.log("FRONTEND - facturaData a enviar:",Vs),console.log("FRONTEND - form original:",h),console.log("FRONTEND - facturaDataSinCalculos:",Ae);const xn=await jX(Vs,t??"");console.log("Invoice created successfully:",xn),D(" Factura creada correctamente."),d(!1),await lt(),setTimeout(()=>D(null),5e3)}catch(Z){console.error("Error al crear factura:",Z),l(" Error al crear la factura. Verifica los datos e intenta de nuevo.")}finally{M(!1)}},_r=async $=>{var Z;if($.preventDefault(),A(null),D(null),Qe({}),M(!0),!h.receptorId){A("Debes seleccionar un cliente."),Qe({cliente:!0}),M(!1),setTimeout(()=>{var te;return(te=Le.current)==null?void 0:te.focus()},100);return}if(!h.expedienteId){A("Debes seleccionar un expediente."),Qe({expediente:!0}),M(!1),setTimeout(()=>{var te;return(te=$t.current)==null?void 0:te.focus()},100);return}if(!h.fechaOperacion){A("Debes indicar la fecha de operacin."),Qe({fechaOperacion:!0}),M(!1),setTimeout(()=>{var te;return(te=Qr.current)==null?void 0:te.focus()},100);return}if(!h.items.length){A("Debes aadir al menos un concepto."),M(!1);return}for(let te=0;te<h.items.length;te++){const oe=h.items[te];if(!oe.description){A("Todos los conceptos deben tener descripcin."),Qe({items:{[te]:{description:!0}}}),M(!1),setTimeout(()=>{var de,ye;return(ye=(de=xs.current[te])==null?void 0:de.description)==null?void 0:ye.focus()},100);return}if(!oe.quantity||oe.quantity<=0){A("Todos los conceptos deben tener cantidad vlida."),Qe({items:{[te]:{quantity:!0}}}),M(!1),setTimeout(()=>{var de,ye;return(ye=(de=xs.current[te])==null?void 0:de.quantity)==null?void 0:ye.focus()},100);return}if(oe.unitPrice===void 0||oe.unitPrice===null){A("Todos los conceptos deben tener precio unitario."),Qe({items:{[te]:{unitPrice:!0}}}),M(!1),setTimeout(()=>{var de,ye;return(ye=(de=xs.current[te])==null?void 0:de.unitPrice)==null?void 0:ye.focus()},100);return}}try{const{id:te,emisorId:oe,fechaFactura:de,importeTotal:ye,baseImponible:Ae,cuotaIVA:Vs,xml:xn,xmlFirmado:Bt,selloTiempo:gn,createdAt:Zt,updatedAt:yr,emisor:ac,receptor:Ig,expediente:ic,provisionFondos:Nm,numeroFactura:za,tipoFactura:Ua,qrData:GX,...vn}=h,$g=vn.items.map(US=>{const{id:KX,invoiceId:XX,total:QX,...VS}=US;return VS}),Fg={receptorId:vn.receptorId,expedienteId:vn.expedienteId,fechaOperacion:ra(h.fechaOperacion),metodoPago:((Z=vn.metodoPago)==null?void 0:Z.toLowerCase())||"transferencia",regimenIvaEmisor:vn.regimenIvaEmisor,claveOperacion:vn.claveOperacion,tipoIVA:h.tipoIVA===""||h.tipoIVA==null?21:Number(h.tipoIVA),aplicarIVA:vn.aplicarIVA!==!1,descuento:h.descuento===""||h.descuento==null?0:Number(h.descuento),retencion:h.retencion===""||h.retencion==null?0:Number(h.retencion),items:$g,provisionIds:q,estado:h.estado||"emitida",motivoAnulacion:vn.motivoAnulacion||null,paymentDate:h.paymentDate?ra(h.paymentDate):void 0};console.log("Datos a enviar al backend:",Fg),console.log("Datos originales del form:",h),console.log("Items limpios:",$g),console.log("Fecha de operacin original:",h.fechaOperacion),console.log("Fecha de operacin formateada:",ra(h.fechaOperacion)),await NX(h.id,Fg,t??""),D(" Factura actualizada correctamente."),l(null),m(null),lt(),setTimeout(()=>{D(null),d(!1)},3e3)}catch(te){if(console.error("Error al actualizar factura:",te),D(null),te.response&&te.response.data&&te.response.data.message){const oe=Array.isArray(te.response.data.message)?te.response.data.message:[te.response.data.message];let de=` Error al actualizar la factura:

`,ye=[];oe.forEach(Ae=>{Ae.includes("numeroFactura should not exist")?(de+=` No puedes editar el nmero de factura
`,ye.push("El nmero de factura se asigna automticamente")):Ae.includes("tipoFactura should not exist")?(de+=` No puedes editar el tipo de factura
`,ye.push("El tipo de factura no se puede modificar despus de la creacin")):Ae.includes("qrData should not exist")?(de+=` El cdigo QR se genera automticamente
`,ye.push("El cdigo QR se calcula automticamente")):Ae.includes("total should not exist")?(de+=` Los totales de los conceptos se calculan automticamente
`,ye.push("No edites manualmente los totales de los conceptos")):de+=` ${Ae}
`}),ye.length>0&&(de+=`
 Sugerencias:
`,ye.forEach(Ae=>{de+=` ${Ae}
`})),l(de)}else l(" Error al actualizar la factura. Verifica los datos e intenta de nuevo.");if(te.response&&te.response.data&&te.response.data.message){const oe=Array.isArray(te.response.data.message)?te.response.data.message:[te.response.data.message];oe.some(de=>de.includes("fechaOperacion"))?(Qe({fechaOperacion:!0}),setTimeout(()=>{var de;return(de=Qr.current)==null?void 0:de.focus()},100)):oe.some(de=>de.includes("receptorId"))?(Qe({cliente:!0}),setTimeout(()=>{var de;return(de=Le.current)==null?void 0:de.focus()},100)):oe.some(de=>de.includes("expedienteId"))&&(Qe({expediente:!0}),setTimeout(()=>{var de;return(de=$t.current)==null?void 0:de.focus()},100))}}finally{M(!1)}},Jr=()=>s.jsxs("div",{className:"mb-6 p-4 bg-blue-50 border-l-4 border-blue-400 rounded",children:[s.jsx("h3",{className:"font-bold mb-2 text-blue-800",id:"info-panel-heading",children:"Informacin sobre Gestin de Facturas"}),s.jsxs("ol",{className:"list-decimal pl-6 mb-2 text-sm text-blue-900",children:[s.jsx("li",{children:"Puedes crear nuevas facturas, editarlas, ver sus detalles, eliminar o consultar sus metadatos."}),s.jsx("li",{children:"Utiliza los botones de la columna de acciones para gestionar cada factura."})]}),s.jsxs("div",{className:"text-xs text-blue-700",children:[s.jsx("b",{children:"Problemas?"})," Si tienes dudas sobre la gestin de facturas, contacta con soporte tcnico.",s.jsx("br",{})]})]}),sa=$=>{console.log("[FRONTEND] Abriendo modal para factura:",$.id,$.numeroFactura),He($)},na=async $=>{if(console.log("EDITANDO FACTURA:",$),console.log("PROVISIONES DE LA FACTURA:",$.provisionFondos),!gb($.estado)){A(`No se puede editar una factura con estado '${yo($.estado)}'. Solo se pueden editar facturas en estado 'Borrador' o 'Emitida'.`);return}const Z={...$,items:$.items||[],aplicarIVA:$.aplicarIVA!==!1,retencion:$.retencion??"",descuento:$.descuento??"",tipoImpuesto:$.tipoImpuesto||($.retencion&&$.retencion>0?"retencion":"iva"),fechaOperacion:$.fechaOperacion?$.fechaOperacion.slice(0,10):""};if(g(Z),m($),d(!0),$.receptorId)try{const oe=(await Q.get("/cases")).data.filter(de=>{var ye,Ae;return((Ae=(ye=de.client)==null?void 0:ye.user)==null?void 0:Ae.id)===$.receptorId||de.clientId===$.receptorId});F(oe)}catch{F([])}if($.provisionFondos&&$.provisionFondos.length>0){console.log("PROVISIONES ENCONTRADAS:",$.provisionFondos);const te=$.provisionFondos.map(oe=>oe.id);console.log("PROVISION IDs:",te),ce(te),Y($.provisionFondos),U($.provisionFondos[0])}else console.log("NO HAY PROVISIONES EN LA FACTURA"),ce([]),Y([]),U(null)},js=async $=>{var te,oe,de;const Z=r.find(ye=>ye.id===$);if(!Z){l(" No se encontr la factura en la lista local."),await lt();return}if(!vb(Z.estado)){l(` No se puede eliminar una factura con estado '${yo(Z.estado)}'. Solo se pueden eliminar facturas en estado 'borrador', 'emitida' o 'enviada'.`),setTimeout(()=>l(null),5e3);return}if(window.confirm("Ests seguro de que quieres eliminar esta factura? Esta accin no se puede deshacer.")){xe($);try{await wX($,t??""),await lt(),D(" Factura eliminada correctamente."),setTimeout(()=>D(null),5e3)}catch(ye){if(console.error("Error al eliminar factura:",ye),((te=ye==null?void 0:ye.response)==null?void 0:te.status)===404)l(" La factura ya no existe en el servidor. Refrescando lista..."),await lt();else{const Ae=((de=(oe=ye==null?void 0:ye.response)==null?void 0:oe.data)==null?void 0:de.message)||(ye==null?void 0:ye.message)||"Error al eliminar la factura.";l(` Error al eliminar la factura: ${Ae}`)}setTimeout(()=>l(null),5e3)}finally{xe(null)}}},aa=$=>{Oe({open:!0,invoiceId:$.id})},ro=$=>{var oe,de;const Z={"Informacin General":{ID:$.id,"Nmero de Factura":$.numeroFactura,Tipo:$.tipoFactura,Estado:$.estado,"Fecha de Creacin":new Date($.createdAt).toLocaleString("es-ES"),"ltima Actualizacin":new Date($.updatedAt).toLocaleString("es-ES")},Fechas:{"Fecha de Factura":new Date($.fechaFactura).toLocaleDateString("es-ES"),"Fecha de Operacin":new Date($.fechaOperacion).toLocaleDateString("es-ES"),"Sello de Tiempo":$.selloTiempo?new Date($.selloTiempo).toLocaleString("es-ES"):"No aplicado"},"Datos Fiscales":{"Base Imponible":`${gs($.baseImponible)} `,"Cuota IVA":`${gs($.cuotaIVA)} `,"Tipo IVA":`${$.tipoIVA}%`,"Importe Total":`${gs($.importeTotal)} `,"Rgimen IVA Emisor":$.regimenIvaEmisor,"Clave de Operacin":$.claveOperacion,"Mtodo de Pago":$.metodoPago},Relaciones:{"Emisor ID":$.emisorId,"Receptor ID":$.receptorId,"Expediente ID":$.expedienteId||"No asociado","Nmero de Items":((oe=$.items)==null?void 0:oe.length)||0,"Provisiones Asociadas":((de=$.provisionFondos)==null?void 0:de.length)||0},XML:{"XML Generado":$.xml?"S":"No","XML Firmado":$.xmlFirmado?"S":"No","Tamao XML":$.xml?`${Math.round($.xml.length/1024)} KB`:"N/A","Tamao XML Firmado":$.xmlFirmado?`${Math.round($.xmlFirmado.length/1024)} KB`:"N/A"},Anulacin:$.motivoAnulacion?{"Motivo de Anulacin":$.motivoAnulacion}:"No anulada"},te=Object.entries(Z).map(([ye,Ae])=>typeof Ae=="string"?`${ye}: ${Ae}`:`${ye}:
${Object.entries(Ae).map(([Vs,xn])=>`  ${Vs}: ${xn}`).join(`
`)}`).join(`

`);Pe({open:!0,text:te})},zS=({invoice:$})=>{console.log("[FRONTEND] InvoiceView renderizado para factura:",$.id,$.numeroFactura);const[Z,te]=p.useState(null),[oe,de]=p.useState(!0),[ye,Ae]=p.useState(null);p.useEffect(()=>{(async()=>{de(!0),Ae(null);try{const gn=localStorage.getItem("token");console.log("[FRONTEND] Cargando HTML preview para factura:",$.id);const Zt=await fetch(`https://experimento2-production.up.railway.app/api/invoices/${$.id}/html-preview`,{headers:{Authorization:`Bearer ${gn}`,"Content-Type":"application/json"},mode:"cors"});if(console.log("[FRONTEND] Status de respuesta HTML:",Zt.status),!Zt.ok){const ac=await Zt.text();throw console.error("[FRONTEND] Error response HTML:",ac),new Error(`No se pudo cargar la previsualizacin: ${Zt.status} ${Zt.statusText}`)}const yr=await Zt.text();console.log("[FRONTEND] HTML recibido, longitud:",yr.length),console.log("[FRONTEND] Primeros 200 caracteres:",yr.substring(0,200)),te(yr)}catch(gn){console.error("[FRONTEND] Error cargando HTML:",gn),Ae(gn.message||"Error desconocido")}finally{de(!1)}})()},[$.id]);const Vs=()=>{const Bt=window.open("","_blank");Bt?(Bt.document.write(`
          <!DOCTYPE html>
          <html>
          <head>
            <title>Factura ${$.numeroFactura}</title>
            <style>
              @media print {
                body { margin: 0; padding: 0; }
                .no-print { display: none !important; }
              }
              body { font-family: Arial, sans-serif; }
            </style>
          </head>
          <body>
            ${Z}
          </body>
          </html>
        `),Bt.document.close(),Bt.focus(),Bt.print(),Bt.close()):window.print()},xn=async()=>{try{console.log("[FRONTEND] Iniciando descarga de PDF para factura:",$.id);const Bt=localStorage.getItem("token");console.log("[FRONTEND] Token disponible:",!!Bt);const gn=`https://experimento2-production.up.railway.app/api/invoices/${$.id}/pdf-qr`;console.log("[FRONTEND] URL de descarga directa:",gn);const Zt=await fetch(gn,{headers:{Authorization:`Bearer ${Bt}`,"Content-Type":"application/json"},mode:"cors"});if(console.log("[FRONTEND] Status de respuesta:",Zt.status),console.log("[FRONTEND] Headers de respuesta:",Object.fromEntries(Zt.headers.entries())),!Zt.ok){const Ua=await Zt.text();throw console.error("[FRONTEND] Error response:",Ua),new Error(`Error al descargar el PDF: ${Zt.status} ${Zt.statusText}`)}const yr=await Zt.blob();if(console.log("[FRONTEND] Blob recibido. Tamao:",yr.size,"bytes"),console.log("[FRONTEND] Tipo de contenido:",yr.type),yr.type!=="application/pdf"){console.error("[FRONTEND] Error: El contenido no es un PDF. Tipo:",yr.type);const Ua=await yr.text();throw console.error("[FRONTEND] Contenido recibido:",Ua.substring(0,200)),new Error("El archivo descargado no es un PDF vlido")}const ac=await yr.arrayBuffer(),Ig=new Uint8Array(ac),ic=String.fromCharCode.apply(null,Ig.slice(0,4));if(console.log("[FRONTEND] Header del PDF:",ic),ic!=="%PDF"){console.error("[FRONTEND] Error: El archivo no es un PDF vlido. Header:",ic);const Ua=await yr.text();throw console.error("[FRONTEND] Contenido completo:",Ua),new Error("El archivo descargado no es un PDF vlido")}console.log("[FRONTEND] PDF vlido detectado");const Nm=window.URL.createObjectURL(yr),za=document.createElement("a");za.href=Nm,za.download=`factura_${$.numeroFactura||$.id}.pdf`,document.body.appendChild(za),za.click(),document.body.removeChild(za),window.URL.revokeObjectURL(Nm),console.log("[FRONTEND] PDF descargado exitosamente")}catch(Bt){console.error("[FRONTEND] Error downloading PDF:",Bt),alert(`Error al descargar el PDF: ${Bt.message}`)}};return oe?s.jsx("div",{className:"p-8 text-center",children:"Cargando previsualizacin..."}):ye?s.jsx("div",{className:"p-8 text-center text-red-500",children:ye}):Z?s.jsxs("div",{className:"invoice-preview-container",children:[!1,s.jsx("div",{className:"invoice-content bg-white p-4 rounded shadow",dangerouslySetInnerHTML:{__html:Z},style:{minHeight:"400px",position:"relative",overflow:"auto"}}),s.jsxs("div",{className:"flex gap-4 mt-8 justify-center no-print",children:[s.jsx("button",{onClick:Vs,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:" Imprimir"}),s.jsx("button",{onClick:xn,className:"px-4 py-2 bg-green-700 text-white rounded hover:bg-green-800",children:" Descargar PDF"})]}),s.jsx("style",{jsx:!0,children:`
          @media print {
            .no-print { display: none !important; }
            body { margin: 0; padding: 0; }
            .invoice-preview-container { 
              padding: 0; 
              margin: 0; 
              background: white; 
            }
            .invoice-content { 
              padding: 0; 
              margin: 0; 
              box-shadow: none; 
              border-radius: 0; 
            }
          }
        `})]}):s.jsx("div",{className:"p-8 text-center text-gray-500",children:"No se pudo cargar el contenido de la factura"})};return s.jsxs("main",{className:"p-6",children:[s.jsxs("header",{className:"mb-6",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Gestin de Facturas"}),s.jsx("div",{className:"flex justify-between items-center",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:Jt,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Nueva Factura"}),s.jsx("button",{onClick:vs,className:"px-4 py-2 bg-orange-600 text-white rounded hover:bg-orange-700",title:"Crear factura rectificativa basada en una factura existente",children:"Factura Rectificativa"})]})})]}),O&&s.jsx("div",{className:"mb-6 p-4 bg-green-100 border border-green-400 text-green-700 rounded-lg",role:"alert",children:O}),o&&s.jsx("div",{className:"mb-6 p-4 bg-red-100 border border-red-400 text-red-600 rounded-lg",role:"alert",children:o}),!1,s.jsxs("section",{"aria-labelledby":"info-panel-heading",children:[s.jsx("h2",{id:"info-panel-heading",className:"sr-only",children:"Informacin sobre Gestin de Facturas"}),s.jsx(Jr,{})]}),s.jsxs("section",{className:"mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Clientes y Expedientes"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-800 mb-3",children:["Clientes (",N.length,")"]}),N.length>0?s.jsx("div",{className:"space-y-2",children:N.map($=>{var Z,te;return s.jsxs("div",{className:"p-2 border rounded",children:[s.jsx("p",{className:"font-medium",children:((Z=$.user)==null?void 0:Z.name)||"Cliente sin nombre"}),s.jsx("p",{className:"text-sm text-gray-600",children:(te=$.user)==null?void 0:te.email})]},$.id)})}):s.jsx("p",{className:"text-gray-500",children:"No hay clientes disponibles"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-3",children:"Expedientes"}),s.jsx("p",{className:"text-gray-500",children:"Los expedientes se cargan al seleccionar un cliente"})]})]})]}),s.jsxs("section",{"aria-labelledby":"invoices-table-heading",children:[s.jsx("h2",{id:"invoices-table-heading",className:"text-xl font-semibold text-gray-800 mb-4",children:"Lista de Facturas"}),s.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:[s.jsx("label",{htmlFor:"select-all-invoices",className:"sr-only",children:"Seleccionar todas las facturas"}),s.jsx("input",{id:"select-all-invoices",type:"checkbox",checked:W.length===r.length&&r.length>0,onChange:$=>{$.target.checked?_(r.map(Z=>Z.id)):_([])},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500","aria-describedby":"select-all-help"}),s.jsx("span",{id:"select-all-help",className:"sr-only",children:"Marca esta casilla para seleccionar todas las facturas de la lista"})]}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nmero"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Importe"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Provisiones"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map($=>{var Z;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsxs("label",{htmlFor:`select-invoice-${$.id}`,className:"sr-only",children:["Seleccionar factura ",$.numeroFactura]}),s.jsx("input",{id:`select-invoice-${$.id}`,type:"checkbox",checked:W.includes($.id),onChange:te=>{te.target.checked?_([...W,$.id]):_(W.filter(oe=>oe!==$.id))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500","aria-describedby":`select-invoice-help-${$.id}`}),s.jsxs("span",{id:`select-invoice-help-${$.id}`,className:"sr-only",children:["Marca esta casilla para seleccionar la factura ",$.numeroFactura]})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:$.numeroFactura}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:$.fechaFactura?new Date($.fechaFactura).toLocaleDateString():"N/A"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((Z=$.receptor)==null?void 0:Z.name)||"N/A"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:$.importeTotal?`${gs($.importeTotal)} `:"N/A"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${yb($.estado)}`,children:[PX($.estado)," ",yo($.estado)]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:$.provisionFondos&&$.provisionFondos.length>0?s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsxs("span",{className:"text-xs font-medium text-green-600",children:[" ",$.provisionFondos.length," provisin",$.provisionFondos.length>1?"es":""]}),s.jsxs("span",{className:"text-xs text-gray-500",children:["Total: ",new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format($.provisionFondos.reduce((te,oe)=>te+oe.amount,0))]})]}):s.jsx("span",{className:"text-xs text-gray-400",children:"Sin provisiones"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>sa($),className:"text-blue-600 hover:text-blue-900 hover:bg-blue-50 px-2 py-1 rounded",title:"Ver factura completa con todos los detalles",children:" Ver"}),gb($.estado)&&s.jsx("button",{onClick:()=>na($),className:"text-yellow-600 hover:text-yellow-900 px-2 py-1 rounded hover:bg-yellow-50",title:"Editar factura",children:" Editar"}),vb($.estado)&&s.jsx("button",{onClick:()=>js($.id),className:"text-red-600 hover:text-red-900 px-2 py-1 rounded hover:bg-red-50",title:"Eliminar factura (no disponible si est notificada al cliente)",children:" Eliminar"}),s.jsx("button",{onClick:()=>ro($),className:"text-gray-600 hover:text-gray-900 px-2 py-1 rounded hover:bg-gray-50",title:"Ver metadatos tcnicos",children:" Metadatos"}),((e==null?void 0:e.role)==="ADMIN"||(e==null?void 0:e.role)==="ABOGADO")&&RX($.estado)&&s.jsx("button",{onClick:()=>aa($),className:"text-purple-600 hover:text-purple-900 px-2 py-1 rounded hover:bg-purple-50",title:"Ver historial de auditora (disponible en cualquier estado)",children:" Auditora"})]})})]},$.id)})})]})})})]}),Ce&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg max-w-5xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center sticky top-0 bg-white z-10",children:[s.jsxs("h2",{className:"text-xl font-bold",children:["Vista de Factura - ",Ce.numeroFactura]}),s.jsx("button",{onClick:()=>{console.log("[FRONTEND] Cerrando modal de factura"),He(null)},className:"text-gray-500 hover:text-gray-700",children:""})]}),s.jsx("div",{className:"p-4",children:s.jsx(zS,{invoice:Ce})})]})}),c&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center",children:[s.jsx("h2",{className:"text-xl font-bold",children:u?"Editar Factura":"Nueva Factura"}),s.jsx("button",{onClick:()=>{d(!1),m(null),g(bo),ce([]),Y([]),U(null)},className:"text-gray-500 hover:text-gray-700",children:""})]}),s.jsxs("div",{className:"p-6",children:[O&&s.jsx("div",{className:"mb-4 p-3 bg-green-100 border border-green-400 text-green-700 rounded",children:O}),k&&s.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:k}),s.jsxs("form",{onSubmit:u?_r:bs,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nmero de Factura"}),s.jsx("input",{type:"text",name:"numeroFactura",value:h.numeroFactura,onChange:We,className:`w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${h.tipoFactura==="R"?"bg-gray-100 cursor-not-allowed":""}`,required:!0,disabled:h.tipoFactura==="R",placeholder:h.tipoFactura==="R"?"Se generar automticamente":"Ingrese nmero de factura"}),h.tipoFactura==="R"&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"El nmero se generar automticamente basado en la factura original"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de Factura"}),s.jsx("input",{type:"date",name:"fechaFactura",value:h.fechaFactura,onChange:We,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de Operacin"}),s.jsx("input",{type:"date",name:"fechaOperacion",value:h.fechaOperacion,onChange:We,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Factura"}),s.jsx("select",{name:"tipoFactura",value:h.tipoFactura,onChange:We,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:s.jsx("option",{value:"F",children:"Completa"})})]}),h.tipoFactura==="R"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Rectificacin"}),s.jsxs("select",{name:"tipoRectificacion",value:h.tipoRectificacion,onChange:We,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:h.tipoFactura==="R",children:[s.jsx("option",{value:"",children:"Seleccionar tipo"}),s.jsx("option",{value:"R1",children:"R1 - Por anulacin"}),s.jsx("option",{value:"R2",children:"R2 - Por correccin"}),s.jsx("option",{value:"R3",children:"R3 - Por descuento"}),s.jsx("option",{value:"R4",children:"R4 - Por devolucin"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Motivo de Rectificacin"}),s.jsx("input",{type:"text",name:"motivoRectificacion",value:h.motivoRectificacion,onChange:We,placeholder:"Especificar motivo de la rectificacin",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:h.tipoFactura==="R"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),s.jsxs("select",{name:"estado",value:h.estado,onChange:We,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"borrador",children:" Borrador"}),s.jsx("option",{value:"emitida",children:" Emitida"}),s.jsx("option",{value:"enviada",children:" Enviada"}),s.jsx("option",{value:"notificada",children:" Notificada al Cliente"}),s.jsx("option",{value:"aceptada",children:" Aceptada"}),s.jsx("option",{value:"rechazada",children:" Rechazada"}),s.jsx("option",{value:"anulada",children:" Anulada"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mtodo de Pago"}),s.jsxs("select",{name:"metodoPago",value:h.metodoPago,onChange:We,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"transferencia",children:"Transferencia"}),s.jsx("option",{value:"efectivo",children:"Efectivo"}),s.jsx("option",{value:"tarjeta",children:"Tarjeta"})]})]})]}),h.tipoFactura==="R"&&Se&&s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-4 mb-4",children:[s.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"Factura Original"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Nmero:"})," ",Se.numeroFactura]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Fecha:"})," ",new Date(Se.fechaFactura).toLocaleDateString("es-ES")]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Cliente:"})," ",(Pg=Se.receptor)==null?void 0:Pg.name]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Importe:"})," ",gs(Se.importeTotal)," "]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Estado:"})," ",yo(Se.estado)]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Expediente:"})," ",((Lg=Se.expediente)==null?void 0:Lg.title)||"Sin expediente"]})]}),Se.provisionFondos&&Se.provisionFondos.length>0&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-blue-200",children:[s.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Provisiones Aplicadas en Factura Original:"}),s.jsxs("div",{className:"space-y-1 text-sm",children:[Se.provisionFondos.map(($,Z)=>s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:$.description||`Provisin ${Z+1}`}),s.jsxs("span",{className:"font-medium",children:[gs($.amount)," "]})]},$.id)),s.jsx("div",{className:"pt-1 border-t border-blue-200",children:s.jsxs("div",{className:"flex justify-between font-medium",children:[s.jsx("span",{children:"Total Provisiones:"}),s.jsxs("span",{children:[gs(Se.provisionFondos.reduce(($,Z)=>$+Z.amount,0))," "]})]})})]}),s.jsxs("div",{className:"mt-2 p-2 bg-yellow-50 border border-yellow-200 rounded text-xs text-yellow-800",children:[s.jsx("strong",{children:"Nota:"})," Las provisiones de la factura original se copiarn automticamente a la rectificativa."]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cliente"}),s.jsxs("select",{name:"receptorId",value:h.receptorId,onChange:Tr,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[s.jsx("option",{value:"",children:"Seleccionar cliente"}),N.map($=>{var Z,te;return s.jsx("option",{value:((Z=$.user)==null?void 0:Z.id)||$.id,children:((te=$.user)==null?void 0:te.name)||"Cliente sin nombre"},$.id)})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expediente"}),s.jsxs("select",{name:"expedienteId",value:h.expedienteId,onChange:We,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Sin expediente"}),X.map($=>s.jsx("option",{value:$.id,children:$.title},$.id))]})]})]}),s.jsxs("fieldset",{children:[s.jsx("legend",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Conceptos de la Factura"}),s.jsxs("div",{className:"space-y-2",children:[h.items.map(($,Z)=>s.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[s.jsxs("div",{children:[s.jsxs("label",{htmlFor:`description-${Z}`,className:"sr-only",children:["Descripcin del concepto ",Z+1]}),s.jsx("input",{id:`description-${Z}`,type:"text",placeholder:"Descripcin",value:$.description,onChange:te=>ys(Z,"description",te.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","aria-describedby":`description-help-${Z}`}),s.jsxs("p",{id:`description-help-${Z}`,className:"sr-only",children:["Introduce la descripcin del concepto ",Z+1]})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:`quantity-${Z}`,className:"sr-only",children:["Cantidad del concepto ",Z+1]}),s.jsx("input",{id:`quantity-${Z}`,type:"number",min:"0",step:"1",placeholder:"Cantidad",value:$.quantity,onChange:te=>ys(Z,"quantity",parseFloat(te.target.value)||0),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","aria-describedby":`quantity-help-${Z}`}),s.jsxs("p",{id:`quantity-help-${Z}`,className:"sr-only",children:["Introduce la cantidad del concepto ",Z+1]})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:`unitPrice-${Z}`,className:"sr-only",children:["Precio unitario del concepto ",Z+1]}),s.jsx("input",{id:`unitPrice-${Z}`,type:"number",step:"0.01",min:"0",placeholder:"Precio unitario",value:$.unitPrice,onChange:te=>ys(Z,"unitPrice",parseFloat(te.target.value)||0),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","aria-describedby":`unitPrice-help-${Z}`}),s.jsxs("p",{id:`unitPrice-help-${Z}`,className:"sr-only",children:["Introduce el precio unitario del concepto ",Z+1," en euros"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:[($.quantity*$.unitPrice).toFixed(2)," "]}),h.items.length>1&&s.jsx("button",{type:"button",onClick:()=>{const te=h.items.filter((oe,de)=>de!==Z);g({...h,items:te})},className:"text-red-600 hover:text-red-800",children:""})]})]},Z)),s.jsx("button",{type:"button",onClick:bt,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300","aria-describedby":"add-item-help",children:"+ Aadir concepto"}),s.jsx("p",{id:"add-item-help",className:"sr-only",children:"Haz clic para aadir un nuevo concepto a la factura"})]})]}),K.length>0&&s.jsxs("fieldset",{children:[s.jsx("legend",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Provisiones de Fondos Disponibles"}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4 mb-4",children:[h.tipoFactura==="R"?s.jsxs("div",{className:"mb-3",children:[s.jsxs("p",{className:"text-sm text-blue-700 mb-2",children:[s.jsx("strong",{children:"Factura Rectificativa:"})," Las provisiones de la factura original se han copiado automticamente."]}),s.jsxs("div",{className:"p-2 bg-green-50 border border-green-200 rounded text-xs text-green-800",children:[s.jsx("strong",{children:" Copiadas automticamente:"})," ",K.length," provisin(es) de la factura original"]})]}):s.jsx("p",{className:"text-sm text-blue-700 mb-3",children:"Selecciona las provisiones que quieres aplicar a esta factura. Se descontarn automticamente del total."}),s.jsx("div",{className:"space-y-2",children:K.map($=>s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",id:`provision-${$.id}`,checked:q.includes($.id),onChange:Z=>{Z.target.checked?ce([...q,$.id]):ce(q.filter(te=>te!==$.id))},disabled:h.tipoFactura==="R",className:`h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded ${h.tipoFactura==="R"?"opacity-50 cursor-not-allowed":""}`}),s.jsxs("label",{htmlFor:`provision-${$.id}`,className:"ml-2 text-sm text-gray-700",children:[s.jsx("span",{className:"font-medium",children:$.description||"Sin descripcin"}),s.jsxs("span",{className:"text-gray-500 ml-2",children:["(",new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format($.amount),")"]}),$.invoiceId&&s.jsx("span",{className:"text-green-600 ml-2 text-xs",children:" Ya vinculada"})]})]},$.id))}),q.length>0&&s.jsx("div",{className:"mt-3 p-2 bg-green-100 border border-green-200 rounded",children:s.jsxs("p",{className:"text-sm text-green-700",children:["Total de provisiones seleccionadas: ",new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(K.filter($=>q.includes($.id)).reduce(($,Z)=>$+Z.amount,0))]})}),(()=>{const $=K.filter(te=>q.includes(te.id)).reduce((te,oe)=>te+oe.amount,0),Z=h.items.reduce((te,oe)=>te+oe.quantity*oe.unitPrice,0);if($>Z){const te=$-Z;return s.jsxs("div",{className:"mt-3 p-3 bg-yellow-100 border border-yellow-300 rounded",children:[s.jsx("p",{className:"text-sm text-yellow-800 font-medium",children:" Advertencia: Las provisiones exceden la base imponible"}),s.jsxs("p",{className:"text-xs text-yellow-700 mt-1",children:["Base imponible: ",new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(Z)]}),s.jsxs("p",{className:"text-xs text-yellow-700",children:["Provisiones: ",new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format($)]}),s.jsxs("p",{className:"text-xs text-yellow-700",children:["Exceso: ",new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(te)]}),s.jsx("p",{className:"text-xs text-yellow-700 mt-2",children:s.jsx("strong",{children:'Se agregar automticamente un concepto de "Devolucin de Provisin" por el exceso.'})})]})}return null})()]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rgimen IVA Emisor"}),s.jsxs("select",{name:"regimenIvaEmisor",value:h.regimenIvaEmisor,onChange:We,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"General",children:"General"}),s.jsx("option",{value:"Simplificado",children:"Simplificado"}),s.jsx("option",{value:"Exento",children:"Exento"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descuento (%)"}),s.jsx("input",{type:"number",name:"descuento",value:h.descuento,onChange:We,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Impuesto"}),s.jsxs("select",{name:"tipoImpuesto",value:h.tipoImpuesto||"iva",onChange:$=>{const Z=$.target.value;g(te=>({...te,tipoImpuesto:Z,tipoIVA:Z==="retencion"?0:te.tipoIVA||21,retencion:Z==="iva"?0:te.retencion||15}))},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"iva",children:"IVA"}),s.jsx("option",{value:"retencion",children:"Retencin"})]})]})]}),h.tipoImpuesto==="iva"?s.jsx("div",{className:"grid grid-cols-1 gap-4",children:s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo IVA (%)"}),s.jsx("input",{type:"number",name:"tipoIVA",value:h.tipoIVA,onChange:We,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}):s.jsx("div",{className:"grid grid-cols-1 gap-4",children:s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Retencin (%)"}),s.jsx("input",{type:"number",name:"retencion",value:h.retencion,onChange:We,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),s.jsxs("div",{className:"flex justify-end gap-4",children:[s.jsx("button",{type:"button",onClick:()=>{d(!1),g(bo),m(null),ce([]),Y([]),U(null)},className:"px-4 py-2 text-gray-700 bg-gray-200 rounded hover:bg-gray-300",children:"Cancelar"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:u?"Actualizar Factura":"Crear Factura"})]})]})]})]})}),(Ee==null?void 0:Ee.open)&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg max-w-lg w-full p-6",children:[s.jsx("h2",{className:"text-lg font-bold mb-2",children:"Metadatos de la Factura"}),s.jsx("textarea",{className:"w-full h-64 p-2 border rounded bg-gray-50 text-xs font-mono mb-4",value:Ee.text,readOnly:!0,onFocus:$=>$.target.select()}),s.jsxs("div",{className:"flex gap-4 justify-end",children:[s.jsx("button",{className:"px-4 py-2 bg-blue-700 text-white rounded hover:bg-blue-800",onClick:()=>{navigator.clipboard.writeText(Ee.text)},children:"Copiar"}),s.jsx("button",{className:"px-4 py-2 bg-gray-300 text-gray-800 rounded hover:bg-gray-400",onClick:()=>Pe(null),children:"Cerrar"})]})]})}),ve&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg max-w-4xl w-full p-6 max-h-[80vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Seleccionar Factura Original"}),s.jsx("button",{onClick:()=>Ue(!1),className:"text-gray-500 hover:text-gray-700",children:""})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("p",{className:"text-gray-600 mb-2",children:"Selecciona la factura que quieres rectificar. Solo se muestran facturas que pueden ser rectificadas."}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded p-3 mb-4",children:[s.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"Tipos de Rectificacin:"}),s.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[s.jsxs("li",{children:[s.jsx("strong",{children:"R1 - Por anulacin:"})," Anula completamente la factura original"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"R2 - Por correccin:"})," Corrige datos fiscales de la factura"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"R3 - Por descuento:"})," Aplica descuentos posteriores"]}),s.jsxs("li",{children:[s.jsx("strong",{children:"R4 - Por devolucin:"})," Devuelve parcialmente la factura"]})]})]})]}),Ft.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-gray-500",children:"No hay facturas que puedan ser rectificadas."}),s.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Solo se pueden rectificar facturas emitidas que no estn anuladas."})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nmero"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Importe"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),s.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Accin"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Ft.map($=>{var Z;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:$.numeroFactura}),s.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:new Date($.fechaFactura).toLocaleDateString("es-ES")}),s.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:((Z=$.receptor)==null?void 0:Z.name)||"Cliente no encontrado"}),s.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:[gs($.importeTotal)," "]}),s.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${yb($.estado)}`,children:yo($.estado)})}),s.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:s.jsx("button",{onClick:()=>ir($),className:"px-3 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700",children:"Seleccionar"})})]},$.id)})})]})})]})}),(ke==null?void 0:ke.open)&&s.jsx(_X,{invoiceId:ke.invoiceId,isOpen:ke.open,onClose:()=>Oe(null),currentUser:e||void 0})]})},IX=()=>{console.log("ProvisionFondosPage component loaded");const e=localStorage.getItem("token")||"",[t,r]=p.useState([]),[n,a]=p.useState(!1),[i,o]=p.useState(""),[l,c]=p.useState(""),[d,u]=p.useState([]),[m,h]=p.useState(!1),[g,j]=p.useState(null),[y,v]=p.useState({expedienteId:"",amount:"",date:"",description:""});p.useEffect(()=>{f(),x()},[e]);const f=async()=>{try{const D=await Q.get("/cases",{headers:{Authorization:`Bearer ${e}`}});u(D.data)}catch{u([])}},x=async()=>{a(!0);try{const D=await DX(e);r(D)}catch{o("Error al cargar las provisiones")}finally{a(!1)}},b=D=>{v({...y,[D.target.name]:D.target.value})},N=D=>{v({...y,expedienteId:D.target.value})},w=()=>{v({expedienteId:"",amount:"",date:"",description:""}),j(null),h(!1)},S=async D=>{var I;D.preventDefault(),o(""),c(""),a(!0);try{const M=d.find(V=>V.id===y.expedienteId),E=((I=M==null?void 0:M.client)==null?void 0:I.id)||"";if(!E){o("No se pudo determinar el cliente del expediente seleccionado"),a(!1);return}const L={clientId:E,expedienteId:y.expedienteId,amount:Number(y.amount),...y.date?{date:y.date}:{},description:y.description};g?(await AX(g.id,L,e),c("Provisin actualizada correctamente.")):(await CX(L,e),c("Provisin creada correctamente.")),w(),x()}catch{o(g?"Error al actualizar la provisin":"Error al crear la provisin")}finally{a(!1)}},C=D=>{j(D),v({expedienteId:D.expedienteId,amount:D.amount.toString(),date:D.date.slice(0,10),description:D.description}),h(!0)},k=async D=>{if(window.confirm("Ests seguro de que quieres eliminar esta provisin?")){a(!0);try{await TX(D,e),c("Provisin eliminada correctamente."),x()}catch{o("Error al eliminar la provisin")}finally{a(!1)}}},A=D=>new Date(D).toLocaleDateString("es-ES"),O=D=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(D);return s.jsxs("main",{className:"max-w-6xl mx-auto py-8 px-4",children:[s.jsxs("header",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gestin de Provisiones de Fondos"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Administra las provisiones de fondos para expedientes"})]}),l&&s.jsx("div",{className:"mb-6 p-4 bg-green-100 border border-green-400 text-green-700 rounded-lg",role:"alert",children:l}),i&&s.jsx("div",{className:"mb-6 p-4 bg-red-100 border border-red-400 text-red-600 rounded-lg",role:"alert",children:i}),s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:m?g?"Editar Provisin":"Crear Nueva Provisin":"Lista de Provisiones"}),s.jsx("button",{onClick:()=>h(!m),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:m?"Cancelar":"Nueva Provisin"})]}),m&&s.jsxs("section",{className:"mb-8 bg-white rounded-lg shadow p-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800",children:g?"Editar Provisin":"Crear Provisin de Fondos"}),s.jsxs("form",{onSubmit:S,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"expediente-select",className:"block text-sm font-medium text-gray-700 mb-2",children:"Expediente *"}),s.jsxs("select",{id:"expediente-select",name:"expedienteId",className:"border border-gray-300 px-3 py-2 rounded-md w-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:y.expedienteId,onChange:N,required:!0,children:[s.jsx("option",{value:"",children:"Selecciona un expediente"}),d.map(D=>{var I,M;return s.jsxs("option",{value:D.id,children:[D.title," - ",((M=(I=D.client)==null?void 0:I.user)==null?void 0:M.name)||"Sin cliente"]},D.id)})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"amount",className:"block text-sm font-medium text-gray-700 mb-2",children:"Importe () *"}),s.jsx("input",{id:"amount",name:"amount",type:"number",step:"0.01",min:"0",value:y.amount,onChange:b,className:"border border-gray-300 px-3 py-2 rounded-md w-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha de Provisin"}),s.jsx("input",{id:"date",name:"date",type:"date",value:y.date,onChange:b,className:"border border-gray-300 px-3 py-2 rounded-md w-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripcin"}),s.jsx("input",{id:"description",name:"description",type:"text",value:y.description,onChange:b,className:"border border-gray-300 px-3 py-2 rounded-md w-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Descripcin opcional"})]})]}),s.jsxs("div",{className:"flex gap-4 pt-4",children:[s.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",disabled:n,children:n?"Procesando...":g?"Actualizar":"Crear"}),s.jsx("button",{type:"button",onClick:w,className:"px-6 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Cancelar"})]})]})]}),s.jsxs("section",{className:"bg-white rounded-lg shadow overflow-hidden",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Provisiones Existentes"})}),n?s.jsx("div",{className:"p-6 text-center text-gray-500",children:"Cargando provisiones..."}):t.length===0?s.jsx("div",{className:"p-6 text-center text-gray-500",children:"No hay provisiones registradas"}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expediente"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Importe"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Descripcin"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(D=>{var I;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((I=D.expediente)==null?void 0:I.title)||"N/A"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:O(D.amount)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:A(D.date)}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 max-w-xs truncate",children:D.description||"-"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${D.invoiceId?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:D.invoiceId?"Vinculada":"Pendiente"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>C(D),className:"text-blue-600 hover:text-blue-900",children:"Editar"}),s.jsx("button",{onClick:()=>k(D.id),className:"text-red-600 hover:text-red-900",children:"Eliminar"})]})})]},D.id)})})]})})]})]})},$X=()=>{const{user:e}=we(),t=localStorage.getItem("token"),[r,n]=p.useState([]),[a,i]=p.useState(!0),[o,l]=p.useState(null),[c,d]=p.useState(null);p.useEffect(()=>{(async()=>{try{if(!t)throw new Error("No token available");const b=await Q.get("/users/clients/profile",{headers:{Authorization:`Bearer ${t}`}});b.data?(d(b.data),await u(b.data.id)):l("No se encontr el perfil de cliente")}catch(b){console.error("Error fetching client profile:",b),l("Error al cargar el perfil de cliente")}finally{i(!1)}})()},[t,e]);const u=async x=>{try{const b=await BS(x,t);n(b)}catch{l("Error al cargar las provisiones")}},m=x=>new Date(x).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}),h=x=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(x),g=x=>x.invoiceId?s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Facturada"}):s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Pendiente"});if(a)return s.jsx("div",{className:"max-w-6xl mx-auto py-8 px-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando provisiones..."})]})});if(o)return s.jsx("div",{className:"max-w-6xl mx-auto py-8 px-4",children:s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),s.jsx("div",{className:"mt-2 text-sm text-red-700",children:o})]})]})})});const j=r.filter(x=>!x.invoiceId),y=r.filter(x=>x.invoiceId),v=j.reduce((x,b)=>x+b.amount,0),f=y.reduce((x,b)=>x+b.amount,0);return s.jsxs("div",{className:"max-w-6xl mx-auto py-8 px-4",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Mis Provisiones de Fondos"}),s.jsx("p",{className:"text-gray-600",children:"Aqu puedes ver todas las provisiones de fondos asociadas a tus expedientes"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Provisiones"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:r.length})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Pendientes"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:h(v)})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Facturadas"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:h(f)})]})]})})]}),j.length>0&&s.jsxs("div",{className:"bg-white rounded-lg shadow mb-8",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[s.jsxs("h2",{className:"text-lg font-medium text-gray-900",children:["Provisiones Pendientes (",j.length,")"]}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Provisiones que an no han sido facturadas"})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Importe"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Descripcin"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expediente"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Abogado"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.map(x=>{var b,N,w;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:m(x.date)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:h(x.amount)}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:x.description||"Sin descripcin"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((b=x.expediente)==null?void 0:b.title)||"Sin expediente"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((w=(N=x.expediente)==null?void 0:N.lawyer)==null?void 0:w.name)||"No asignado"})]},x.id)})})]})})]}),y.length>0&&s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[s.jsxs("h2",{className:"text-lg font-medium text-gray-900",children:["Provisiones Facturadas (",y.length,")"]}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Provisiones que ya han sido incluidas en facturas"})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fecha Provisin"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Importe"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Descripcin"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expediente"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Factura"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:y.map(x=>{var b,N,w,S;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:m(x.date)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:h(x.amount)}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:x.description||"Sin descripcin"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((b=x.expediente)==null?void 0:b.title)||"Sin expediente"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:(N=x.invoice)==null?void 0:N.numeroFactura}),s.jsx("div",{className:"text-gray-500",children:m(((w=x.invoice)==null?void 0:w.fechaFactura)||"")}),s.jsx("div",{className:"text-gray-500",children:h(((S=x.invoice)==null?void 0:S.importeTotal)||0)})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g(x)})]},x.id)})})]})})]}),r.length===0&&s.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[s.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-gray-100 mb-4",children:s.jsx("svg",{className:"h-6 w-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay provisiones de fondos"}),s.jsx("p",{className:"text-gray-500",children:"An no se han creado provisiones de fondos para tus expedientes."})]})]})},FX=()=>{const[e,t]=p.useState([]),[r,n]=p.useState([]),[a,i]=p.useState({lawyerId:"",date:"",location:"",notes:""}),[o,l]=p.useState(!0),[c,d]=p.useState(null),[u,m]=p.useState(null),[h,g]=p.useState(!1),[j,y]=p.useState("all"),[v,f]=p.useState("list"),{user:x}=we();p.useEffect(()=>{(async()=>{try{l(!0);const E=localStorage.getItem("token"),[L,V]=await Promise.all([Q.get("/users/lawyers"),Q.get("/appointments")]);t(L.data),n(V.data),d(null)}catch{d("Error al cargar los datos")}finally{l(!1)}})()},[]);const b=M=>{i({...a,[M.target.name]:M.target.value})},N=async M=>{var E,L;if(M.preventDefault(),d(null),m(null),!a.lawyerId||!a.date){d("Selecciona abogado y fecha/hora");return}try{const V=localStorage.getItem("token"),G=await Q.post("/appointments",{lawyerId:a.lawyerId,date:a.date,location:a.location||void 0,notes:a.notes||void 0},{headers:{Authorization:`Bearer ${V}`}});n(W=>[G.data,...W]),i({lawyerId:"",date:"",location:"",notes:""}),g(!1),m("Cita agendada correctamente"),setTimeout(()=>m(null),3e3)}catch(V){d(((L=(E=V.response)==null?void 0:E.data)==null?void 0:L.message)||"Error al agendar la cita")}},w=async M=>{if(confirm("Ests seguro de que quieres cancelar esta cita?"))try{const E=localStorage.getItem("token");await Q.delete(`/appointments/${M}`,{headers:{Authorization:`Bearer ${E}`}}),n(L=>L.filter(V=>V.id!==M)),m("Cita cancelada correctamente"),setTimeout(()=>m(null),3e3)}catch{d("Error al cancelar la cita")}},S=p.useMemo(()=>j==="all"?r:r.filter(M=>M.lawyer.id===j),[r,j]),C=p.useMemo(()=>{const M=new Date,E=new Date(M.getFullYear(),M.getMonth(),M.getDate()),L=new Date(E);return L.setDate(L.getDate()+1),{past:S.filter(V=>new Date(V.date)<E),today:S.filter(V=>{const G=new Date(V.date);return G>=E&&G<L}),upcoming:S.filter(V=>new Date(V.date)>=L)}},[S]),k=M=>new Date(M).toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),A=M=>new Date(M).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}),O=M=>{const E=new Date,L=new Date(M),V=new Date(E.getFullYear(),E.getMonth(),E.getDate()),G=new Date(V);return G.setDate(G.getDate()+1),L<V?s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"Pasada"}):L>=V&&L<G?s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Hoy"}):s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Prxima"})},D=M=>s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 border-l-4 border-blue-500",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:M.lawyer.name}),s.jsx("p",{className:"text-sm text-gray-600",children:M.lawyer.email})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[O(M.date),s.jsx("button",{onClick:()=>w(M.id),className:"text-red-600 hover:text-red-800 text-sm font-medium",title:"Cancelar cita",children:""})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),k(M.date)," a las ",A(M.date)]}),M.location&&s.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[s.jsxs("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),M.location]}),M.notes&&s.jsxs("div",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded-md",children:[s.jsx("strong",{children:"Notas:"})," ",M.notes]})]})]},M.id),I=()=>{const M=new Date,E=Array.from({length:7},(L,V)=>{const G=new Date(M);return G.setDate(G.getDate()+V),G});return s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-4",children:E.map((L,V)=>{const G=S.filter(W=>new Date(W.date).toDateString()===L.toDateString());return s.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[s.jsxs("div",{className:"text-center mb-3",children:[s.jsx("div",{className:"text-sm font-medium text-gray-500",children:L.toLocaleDateString("es-ES",{weekday:"short"})}),s.jsx("div",{className:`text-lg font-bold ${L.toDateString()===M.toDateString()?"text-blue-600":"text-gray-900"}`,children:L.getDate()})]}),s.jsx("div",{className:"space-y-2",children:G.map(W=>s.jsxs("div",{className:"text-xs bg-blue-50 p-2 rounded border-l-2 border-blue-500",children:[s.jsx("div",{className:"font-medium",children:W.lawyer.name}),s.jsx("div",{className:"text-gray-600",children:A(W.date)})]},W.id))})]},V)})})};return o?s.jsx("div",{className:"max-w-6xl mx-auto py-8 px-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando citas..."})]})}):s.jsxs("div",{className:"max-w-6xl mx-auto py-8 px-4",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Mis Citas"}),s.jsx("p",{className:"text-gray-600",children:"Gestiona tus citas con los abogados"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4",children:[s.jsx("button",{onClick:()=>g(!h),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:h?"Cancelar":"Nueva Cita"}),s.jsxs("select",{value:j,onChange:M=>y(M.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"all",children:"Todos los abogados"}),e.map(M=>s.jsx("option",{value:M.id,children:M.name},M.id))]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>f("list"),className:`px-3 py-2 rounded-md text-sm font-medium ${v==="list"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Lista"}),s.jsx("button",{onClick:()=>f("calendar"),className:`px-3 py-2 rounded-md text-sm font-medium ${v==="calendar"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Calendario"})]})]}),c&&s.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-md",children:s.jsx("p",{className:"text-red-700 text-sm",children:c})}),u&&s.jsx("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-md",children:s.jsx("p",{className:"text-green-700 text-sm",children:u})})]}),h&&s.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Agendar Nueva Cita"}),s.jsxs("form",{onSubmit:N,className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Abogado"}),s.jsxs("select",{name:"lawyerId",value:a.lawyerId,onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[s.jsx("option",{value:"",children:"Selecciona un abogado"}),e.map(M=>s.jsxs("option",{value:M.id,children:[M.name," (",M.email,")"]},M.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha y hora"}),s.jsx("input",{type:"datetime-local",name:"date",value:a.date,onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ubicacin (opcional)"}),s.jsx("input",{type:"text",name:"location",value:a.location,onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Oficina, online, etc."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Motivo / Notas (opcional)"}),s.jsx("textarea",{name:"notes",value:a.notes,onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Motivo de la cita, detalles, etc."})]}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx("button",{type:"button",onClick:()=>g(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancelar"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Agendar Cita"})]})]})]}),v==="calendar"?s.jsxs("div",{className:"mb-8",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Vista de Calendario"}),I()]}):s.jsxs("div",{className:"space-y-8",children:[C.today.length>0&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold mb-4 text-green-700",children:"Citas de Hoy"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:C.today.map(D)})]}),C.upcoming.length>0&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold mb-4 text-blue-700",children:"Prximas Citas"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:C.upcoming.map(D)})]}),C.past.length>0&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-700",children:"Citas Pasadas"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:C.past.map(D)})]}),S.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No hay citas"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:j==="all"?"No tienes citas agendadas. Agenda una nueva cita para comenzar.":"No tienes citas con este abogado."}),s.jsx("div",{className:"mt-6",children:s.jsx("button",{onClick:()=>g(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Agendar Nueva Cita"})})]})]})]})},BX=()=>{const{user:e}=we(),[t,r]=p.useState([]),[n,a]=p.useState(!0),[i,o]=p.useState(null),[l,c]=p.useState([]),[d,u]=p.useState(""),[m,h]=p.useState("");return p.useEffect(()=>{(async()=>{try{const j=localStorage.getItem("token"),y=await Q.get("/users/lawyers");c(y.data)}catch{}})()},[]),p.useEffect(()=>{(async()=>{try{a(!0);const j=localStorage.getItem("token"),y={};d&&(y.lawyerId=d),m&&(y.paymentDate=m);const v=await Q.get("/invoices/my",{params:y});r(v.data),o(null)}catch{o("Error al cargar las facturas"),r([])}finally{a(!1)}})()},[d,m]),s.jsx("div",{className:"py-6",children:s.jsx("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsx("h1",{className:"text-2xl font-semibold mb-2",children:"Gestionar pagos y facturas"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Aqu puedes consultar tus facturas, descargar el PDF y acceder al QR para pago o verificacin."}),s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Filtros de Bsqueda"}),s.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Abogado"}),s.jsxs("select",{value:d,onChange:g=>u(g.target.value),className:"border rounded px-2 py-1",children:[s.jsx("option",{value:"",children:"Todos"}),l.map(g=>s.jsx("option",{value:g.id,children:g.name},g.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha de pago"}),s.jsx("input",{type:"date",value:m,onChange:g=>h(g.target.value),className:"border rounded px-2 py-1"})]})]}),n?s.jsx("div",{className:"flex items-center justify-center h-40",children:s.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-blue-500"})}):i?s.jsx("div",{className:"bg-red-100 text-red-700 p-3 rounded mb-4",children:i}):t.length===0?s.jsx("div",{className:"text-gray-500",children:"No tienes facturas registradas."}):s.jsxs("div",{className:"overflow-x-auto",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Lista de Facturas"}),s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"N Factura"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Fecha"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Importe"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Estado"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Abogado"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Fecha de pago"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"QR"}),s.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"PDF"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(g=>s.jsxs("tr",{children:[s.jsx("td",{className:"px-4 py-2",children:g.number}),s.jsx("td",{className:"px-4 py-2",children:new Date(g.date).toLocaleDateString()}),s.jsxs("td",{className:"px-4 py-2",children:[g.amount.toFixed(2)," "]}),s.jsx("td",{className:"px-4 py-2",children:s.jsx("span",{className:`px-2 py-1 rounded text-xs font-semibold ${g.status==="PAGADA"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:g.status})}),s.jsx("td",{className:"px-4 py-2",children:g.lawyerName||"-"}),s.jsx("td",{className:"px-4 py-2",children:g.paymentDate?new Date(g.paymentDate).toLocaleDateString():"-"}),s.jsx("td",{className:"px-4 py-2",children:g.qrUrl?s.jsx("img",{src:g.qrUrl,alt:"QR Factura",className:"h-12 w-12 object-contain"}):s.jsx("span",{className:"text-gray-400",children:"No disponible"})}),s.jsx("td",{className:"px-4 py-2",children:g.pdfUrl?s.jsx("a",{href:g.pdfUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Descargar"}):s.jsx("span",{className:"text-gray-400",children:"No disponible"})})]},g.id))})]})]}),s.jsx("div",{className:"mt-8 flex justify-between items-center",children:s.jsx(be,{to:"/dashboard",className:"text-blue-600 hover:underline",children:"Volver al Dashboard"})})]})})})},zX=()=>{const[e,t]=p.useState(""),[r,n]=p.useState(!0),[a,i]=p.useState(""),{user:o}=we();return p.useEffect(()=>{(async()=>{try{n(!0);const c=await Q.get("/parametros/legal/PRIVACY_POLICY");t(c.data.valor)}catch(c){console.error("Error fetching privacy content:",c),i("No se pudo cargar la poltica de privacidad"),t(`
          <h1>Poltica de Privacidad</h1>
          <p>Esta poltica de privacidad describe cmo recopilamos, usamos y protegemos su informacin personal.</p>
          <h2>Informacin que recopilamos</h2>
          <p>Recopilamos informacin que usted nos proporciona directamente, como cuando se registra en nuestro sitio web, nos contacta o utiliza nuestros servicios.</p>
          <h2>Cmo usamos su informacin</h2>
          <p>Utilizamos la informacin recopilada para proporcionar, mantener y mejorar nuestros servicios, comunicarnos con usted y cumplir con nuestras obligaciones legales.</p>
          <h2>Proteccin de la informacin</h2>
          <p>Implementamos medidas de seguridad tcnicas y organizativas apropiadas para proteger su informacin personal contra acceso no autorizado, alteracin, divulgacin o destruccin.</p>
          <h2>Sus derechos</h2>
          <p>Usted tiene derecho a acceder, corregir, eliminar y oponerse al procesamiento de su informacin personal. Para ejercer estos derechos, contctenos.</p>
          <h2>Contacto</h2>
          <p>Si tiene preguntas sobre esta poltica de privacidad, contctenos en info@despacholegal.com</p>
        `)}finally{n(!1)}})()},[]),r?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando poltica de privacidad..."})]})}):a?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 text-6xl mb-4",children:""}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Error"}),s.jsx("p",{className:"text-gray-600",children:a})]})}):s.jsx("div",{className:"min-h-screen bg-gray-50",children:s.jsx("div",{className:"max-w-4xl mx-auto py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden",children:[s.jsx("div",{className:"px-6 py-8",children:s.jsx("div",{className:"prose prose-lg max-w-none",dangerouslySetInnerHTML:{__html:e}})}),(o==null?void 0:o.role)==="ADMIN"&&s.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t",children:s.jsx("button",{onClick:()=>window.location.href="/admin/parametros",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:" Editar Contenido"})})]})})})},UX=()=>{const[e,t]=p.useState(""),[r,n]=p.useState(!0),[a,i]=p.useState(""),{user:o}=we();return p.useEffect(()=>{(async()=>{try{n(!0);const c=await Q.get("/parametros/legal/TERMS_OF_SERVICE");t(c.data.valor)}catch(c){console.error("Error fetching terms content:",c),i("No se pudo cargar los trminos de servicio"),t(`
          <h1>Trminos de Servicio</h1>
          <p>Al utilizar nuestros servicios, usted acepta estos trminos de servicio.</p>
          <h2>Servicios proporcionados</h2>
          <p>Proporcionamos servicios de asesoramiento jurdico y gestin legal a travs de nuestra plataforma digital.</p>
          <h2>Uso aceptable</h2>
          <p>Usted se compromete a utilizar nuestros servicios nicamente para fines legales y de acuerdo con estos trminos.</p>
          <h2>Propiedad intelectual</h2>
          <p>Todos los derechos de propiedad intelectual relacionados con nuestros servicios son propiedad de Despacho Legal.</p>
          <h2>Limitacin de responsabilidad</h2>
          <p>En la mxima medida permitida por la ley, Despacho Legal no ser responsable de daos indirectos, incidentales o consecuentes.</p>
          <h2>Modificaciones</h2>
          <p>Nos reservamos el derecho de modificar estos trminos en cualquier momento. Los cambios sern efectivos inmediatamente despus de su publicacin.</p>
          <h2>Contacto</h2>
          <p>Si tiene preguntas sobre estos trminos, contctenos en info@despacholegal.com</p>
        `)}finally{n(!1)}})()},[]),r?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando trminos de servicio..."})]})}):a?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 text-6xl mb-4",children:""}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Error"}),s.jsx("p",{className:"text-gray-600",children:a})]})}):s.jsx("div",{className:"min-h-screen bg-gray-50",children:s.jsx("div",{className:"max-w-4xl mx-auto py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden",children:[s.jsx("div",{className:"px-6 py-8",children:s.jsx("div",{className:"prose prose-lg max-w-none",dangerouslySetInnerHTML:{__html:e}})}),(o==null?void 0:o.role)==="ADMIN"&&s.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t",children:s.jsx("button",{onClick:()=>window.location.href="/admin/parametros",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:" Editar Contenido"})})]})})})},VX=()=>{const[e,t]=p.useState(""),[r,n]=p.useState(!0),[a,i]=p.useState(""),{user:o}=we();return p.useEffect(()=>{(async()=>{try{n(!0);const c=await Q.get("/parametros/legal/COOKIE_POLICY");t(c.data.valor)}catch(c){console.error("Error fetching cookies content:",c),i("No se pudo cargar la poltica de cookies"),t(`
          <h1>Poltica de Cookies</h1>
          <p>Esta poltica de cookies explica qu son las cookies, cmo las utilizamos y cmo puede gestionarlas.</p>
          
          <h2>Qu son las cookies?</h2>
          <p>Las cookies son pequeos archivos de texto que se almacenan en su dispositivo cuando visita nuestro sitio web. Nos ayudan a mejorar su experiencia y a analizar el trfico del sitio.</p>
          
          <h2>Tipos de cookies que utilizamos</h2>
          
          <h2>Cookies por Categora</h2>
          <h3>Cookies tcnicas (necesarias)</h3>
          <p>Estas cookies son esenciales para el funcionamiento del sitio web y no se pueden desactivar. Incluyen:</p>
          <ul>
            <li>Cookies de sesin para mantener su sesin activa</li>
            <li>Cookies de seguridad para proteger contra ataques</li>
            <li>Cookies de preferencias para recordar su configuracin</li>
          </ul>
          
          <h3>Cookies analticas</h3>
          <p>Nos ayudan a entender cmo interactan los visitantes con nuestro sitio web:</p>
          <ul>
            <li>Anlisis de trfico y uso del sitio</li>
            <li>Identificacin de pginas ms populares</li>
            <li>Mejora de la experiencia del usuario</li>
          </ul>
          
          <h3>Cookies de funcionalidad</h3>
          <p>Mejoran la funcionalidad del sitio web:</p>
          <ul>
            <li>Recordar sus preferencias de idioma</li>
            <li>Personalizar el contenido mostrado</li>
            <li>Mejorar la navegacin</li>
          </ul>
          
          <h2>Gestin de cookies</h2>
          <p>Puede gestionar las cookies a travs de la configuracin de su navegador:</p>
          <ul>
            <li><strong>Chrome:</strong> Configuracin > Privacidad y seguridad > Cookies</li>
            <li><strong>Firefox:</strong> Opciones > Privacidad y seguridad > Cookies</li>
            <li><strong>Safari:</strong> Preferencias > Privacidad > Cookies</li>
            <li><strong>Edge:</strong> Configuracin > Cookies y permisos del sitio</li>
          </ul>
          
          <h2>Cookies de terceros</h2>
          <p>Algunos servicios de terceros pueden instalar cookies en su dispositivo:</p>
          <ul>
            <li>Google Analytics para anlisis web</li>
            <li>Servicios de chat en vivo</li>
            <li>Herramientas de redes sociales</li>
          </ul>
          
          <h2>Actualizaciones de esta poltica</h2>
          <p>Podemos actualizar esta poltica de cookies ocasionalmente. Le notificaremos cualquier cambio significativo.</p>
          
          <h2>Contacto</h2>
          <p>Si tiene preguntas sobre nuestra poltica de cookies, contctenos en info@despacholegal.com</p>
          
          <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mt-6">
            <p class="text-sm text-blue-700">
              <strong>Nota:</strong> Esta poltica cumple con las directrices de la Agencia Espaola de Proteccin de Datos (AEPD) y el Reglamento General de Proteccin de Datos (RGPD).
            </p>
          </div>
        `)}finally{n(!1)}})()},[]),r?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Cargando poltica de cookies..."})]})}):a?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-red-600 text-6xl mb-4",children:""}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Error"}),s.jsx("p",{className:"text-gray-600",children:a})]})}):s.jsx("div",{className:"min-h-screen bg-gray-50",children:s.jsx("div",{className:"max-w-4xl mx-auto py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden",children:[s.jsx("div",{className:"px-6 py-8",children:s.jsx("div",{className:"prose prose-lg max-w-none",dangerouslySetInnerHTML:{__html:e}})}),(o==null?void 0:o.role)==="ADMIN"&&s.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t",children:s.jsx("button",{onClick:()=>window.location.href="/admin/parametros",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:" Editar Contenido"})})]})})})},HX=()=>{const{user:e}=we(),[t,r]=p.useState([]),[n,a]=p.useState(!0),[i,o]=p.useState(null),[l,c]=p.useState(""),[d,u]=p.useState(!1);p.useEffect(()=>{m()},[]);const m=async()=>{try{a(!0);const x=await Q.get("/teleassistance/sessions/user/"+(e==null?void 0:e.id));r(x.data)}catch(x){console.error("Error loading sessions:",x)}finally{a(!1)}},h=async x=>{try{const b=await Q.get(`/api/teleassistance/sessions/${x}`);o(b.data)}catch(b){console.error("Error loading session details:",b)}},g=async x=>{if(l.trim())try{u(!0),await Q.post(`/api/teleassistance/sessions/${x}/messages`,{content:l,messageType:"TEXT"}),c(""),await h(x)}catch(b){console.error("Error sending message:",b)}finally{u(!1)}},j=x=>{const b={PENDING:{color:"bg-yellow-100 text-yellow-800",text:"Pendiente"},ACTIVE:{color:"bg-green-100 text-green-800",text:"Activa"},COMPLETED:{color:"bg-blue-100 text-blue-800",text:"Completada"},CANCELLED:{color:"bg-red-100 text-red-800",text:"Cancelada"}},N=b[x]||b.PENDING;return s.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${N.color}`,children:N.text})},y=x=>({AUTOFIRMA:"",CERTIFICADO_DIGITAL:"",SEDES:"",CLAVE_PIN:"",NAVEGADOR:"",SISTEMA_OPERATIVO:"",OTRO:""})[x]||"",v=x=>new Date(x).toLocaleString("es-ES"),f=x=>{if(!x)return"N/A";const b=Math.floor(x/60),N=x%60;return b>0?`${b}h ${N}m`:`${N}m`};return n?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"mb-8",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:" Mis Sesiones de Teleasistencia"}),s.jsx("p",{className:"text-lg text-gray-600",children:"Gestiona tus solicitudes de asistencia remota"})]}),s.jsx(be,{to:"/client/teleassistance/request",className:"bg-blue-600 text-white px-6 py-3 rounded-md hover:bg-blue-700 transition-colors",children:"Nueva Solicitud"})]})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:["Mis Sesiones (",t.length,")"]}),t.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No tienes sesiones de teleasistencia"}),s.jsx(be,{to:"/client/teleassistance/request",className:"mt-4 inline-block bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Solicitar Asistencia"})]}):s.jsx("div",{className:"space-y-3",children:t.map(x=>s.jsxs("div",{onClick:()=>h(x.id),className:`border rounded-lg p-3 cursor-pointer transition-colors ${(i==null?void 0:i.id)===x.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-lg",children:y(x.issueType)}),s.jsx("span",{className:"font-medium text-gray-900",children:x.issueType.replace("_"," ")})]}),j(x.status)]}),s.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:x.description}),s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[s.jsxs("span",{children:["Asistente: ",x.assistant.name]}),s.jsx("span",{children:v(x.createdAt)})]})]},x.id))})]})}),s.jsx("div",{className:"lg:col-span-2",children:i?s.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[s.jsxs("div",{className:"border-b border-gray-200 p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:"text-2xl",children:y(i.issueType)}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:i.issueType.replace("_"," ")}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Asistente: ",i.assistant.name]})]})]}),j(i.status)]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Descripcin:"}),s.jsx("p",{className:"text-gray-600",children:i.description})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Cdigo de Sesin:"}),s.jsx("p",{className:"text-gray-600 font-mono",children:i.sessionCode})]}),i.startedAt&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Iniciada:"}),s.jsx("p",{className:"text-gray-600",children:v(i.startedAt)})]}),i.duration&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Duracin:"}),s.jsx("p",{className:"text-gray-600",children:f(i.duration)})]})]}),i.resolution&&s.jsxs("div",{className:"mt-4 p-4 bg-green-50 rounded-lg",children:[s.jsx("h4",{className:"font-medium text-green-900 mb-2",children:"Resolucin:"}),s.jsx("p",{className:"text-green-800",children:i.resolution})]})]}),s.jsxs("div",{className:"p-6",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Mensajes"}),s.jsx("div",{className:"space-y-4 mb-4 max-h-96 overflow-y-auto",children:i.messages.length===0?s.jsx("p",{className:"text-gray-500 text-center py-4",children:"No hay mensajes en esta sesin"}):i.messages.map(x=>s.jsx("div",{className:`flex ${x.sender.id===(e==null?void 0:e.id)?"justify-end":"justify-start"}`,children:s.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${x.sender.id===(e==null?void 0:e.id)?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"}`,children:[s.jsxs("div",{className:"text-xs opacity-75 mb-1",children:[x.sender.name," - ",v(x.createdAt)]}),s.jsx("p",{children:x.content})]})},x.id))}),i.status==="ACTIVE"&&s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("input",{type:"text",value:l,onChange:x=>c(x.target.value),onKeyPress:x=>x.key==="Enter"&&g(i.id),placeholder:"Escribe un mensaje...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsx("button",{onClick:()=>g(i.id),disabled:d||!l.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50",children:d?"Enviando...":"Enviar"})]})]})]}):s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:s.jsxs("div",{className:"text-center py-8",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),s.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Selecciona una sesin para ver los detalles"})]})})})]})]})})},WX=()=>{const{user:e}=we(),t=kr(),[r,n]=p.useState([]),[a,i]=p.useState([]),[o,l]=p.useState([]),[c,d]=p.useState(!0),[u,m]=p.useState(!1),[h,g]=p.useState(""),[j,y]=p.useState(""),[v,f]=p.useState(""),[x,b]=p.useState(""),[N,w]=p.useState(!1),[S,C]=p.useState(null);p.useEffect(()=>{k()},[]);const k=async()=>{try{d(!0);const[I,M,E]=await Promise.all([Q.get("/teleassistance/available-assistants"),Q.get("/teleassistance/remote-tools"),Q.get("/teleassistance/common-issues")]);n(I.data),i(M.data),l(E.data)}catch(I){console.error("Error loading teleassistance data:",I)}finally{d(!1)}},A=async I=>{if(I.preventDefault(),!h||!j||!x){alert("Por favor completa todos los campos obligatorios");return}try{m(!0);const M={userId:e==null?void 0:e.id,assistantId:h,issueType:j,description:x,remoteTool:v||void 0},E=await Q.post("/api/teleassistance/sessions",M);alert("Solicitud de teleasistencia enviada exitosamente. Te contactaremos pronto."),t("/client/teleassistance")}catch(M){console.error("Error creating teleassistance session:",M),alert("Error al enviar la solicitud. Por favor intenta de nuevo.")}finally{m(!1)}},O=I=>{C(I),w(!0)},D=I=>({AUTOFIRMA:"",CERTIFICADO_DIGITAL:"",SEDES:"",CLAVE_PIN:"",NAVEGADOR:"",SISTEMA_OPERATIVO:"",OTRO:""})[I]||"";return c?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:" Solicitar Teleasistencia"}),s.jsx("p",{className:"text-lg text-gray-600",children:"Necesitas ayuda con problemas de administracin electrnica? Solicita asistencia remota"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Nueva Solicitud de Teleasistencia"}),s.jsxs("form",{onSubmit:A,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Seleccionar Asistente *"}),s.jsxs("select",{value:h,onChange:I=>g(I.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[s.jsx("option",{value:"",children:"Selecciona un asistente"}),r.map(I=>s.jsxs("option",{value:I.id,children:[I.name," (",I.role,")"]},I.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Problema *"}),s.jsxs("select",{value:j,onChange:I=>y(I.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[s.jsx("option",{value:"",children:"Selecciona el tipo de problema"}),o.map(I=>s.jsxs("option",{value:I.id,children:[D(I.id)," ",I.name]},I.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripcin del Problema *"}),s.jsx("textarea",{value:x,onChange:I=>b(I.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Describe detalladamente el problema que ests experimentando...",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Herramienta de Control Remoto (Opcional)"}),s.jsxs("select",{value:v,onChange:I=>f(I.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Sin preferencia"}),a.map(I=>s.jsx("option",{value:I.id,children:I.name},I.id))]})]}),s.jsx("div",{className:"pt-4",children:s.jsx("button",{type:"submit",disabled:u,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50",children:u?"Enviando...":"Enviar Solicitud de Teleasistencia"})})]})]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:" Herramientas de Control Remoto"}),s.jsx("div",{className:"space-y-3",children:a.map(I=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-3",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:I.name}),s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:I.description}),s.jsx("button",{onClick:()=>O(I),className:"text-blue-600 text-sm hover:text-blue-800",children:"Ver instrucciones"})]},I.id))})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:" Problemas Comunes"}),s.jsx("div",{className:"space-y-3",children:o.slice(0,5).map(I=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx("span",{className:"text-lg mr-2",children:D(I.id)}),s.jsx("h4",{className:"font-medium text-gray-900",children:I.name})]}),s.jsx("p",{className:"text-sm text-gray-600",children:I.description})]},I.id))})]}),s.jsxs("div",{className:"bg-blue-50 rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-bold text-blue-900 mb-2",children:" Informacin de Contacto"}),s.jsx("p",{className:"text-sm text-blue-800 mb-3",children:"Una vez enviada tu solicitud, el asistente te contactar para coordinar la sesin de teleasistencia."}),s.jsxs("div",{className:"text-sm text-blue-700",children:[s.jsx("p",{children:" Tiempo de respuesta: 15-30 minutos"}),s.jsx("p",{children:" Horario de atencin: Lunes a Viernes 9:00-18:00"}),s.jsx("p",{children:" Sesiones gratuitas incluidas en tu plan"})]})]})]})]}),N&&S&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl mx-4 max-h-[80vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-xl font-bold text-gray-900",children:["Instrucciones: ",S.name]}),s.jsx("button",{onClick:()=>w(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Caractersticas:"}),s.jsx("ul",{className:"list-disc list-inside text-sm text-gray-600 space-y-1",children:S.features.map((I,M)=>s.jsx("li",{children:I},M))})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Instrucciones de Instalacin:"}),s.jsx("ol",{className:"list-decimal list-inside text-sm text-gray-600 space-y-1",children:S.instructions.map((I,M)=>s.jsx("li",{children:I},M))})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("a",{href:S.downloadUrl,target:"_blank",rel:"noopener noreferrer",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:["Descargar ",S.name]}),s.jsx("button",{onClick:()=>w(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"Cerrar"})]})]})})]})})};function YX(){return s.jsx(QD,{children:s.jsx(g4,{children:s.jsx(d4,{children:s.jsxs(he,{path:"/",element:s.jsx(xw,{}),children:[s.jsx(he,{index:!0,element:s.jsx(y6,{})}),s.jsx(he,{path:"contact",element:s.jsx(b6,{})}),s.jsx(he,{path:"login",element:s.jsx(S6,{})}),s.jsx(he,{path:"register",element:s.jsx(C6,{})}),s.jsx(he,{path:"privacidad",element:s.jsx(zX,{})}),s.jsx(he,{path:"terminos",element:s.jsx(UX,{})}),s.jsx(he,{path:"cookies",element:s.jsx(VX,{})}),s.jsx(he,{path:"dashboard",element:s.jsx(eh,{})}),s.jsxs(he,{element:s.jsx(k6,{}),children:[s.jsx(he,{element:s.jsx(rh,{allowedRoles:["ADMIN"]}),children:s.jsxs(he,{path:"admin",children:[s.jsx(he,{path:"dashboard",element:s.jsx(IY,{})}),s.jsx(he,{path:"users",element:s.jsx($Y,{})}),s.jsx(he,{path:"cases",element:s.jsx(BY,{})}),s.jsx(he,{path:"cases/:id",element:s.jsx(gv,{})}),s.jsx(he,{path:"appointments",element:s.jsx(zY,{})}),s.jsx(he,{path:"tasks",element:s.jsx(UY,{})}),s.jsx(he,{path:"documents",element:s.jsx(VY,{})}),s.jsx(he,{path:"invoices",element:s.jsx(pq,{})}),s.jsx(he,{path:"reports",element:s.jsx(xq,{})}),s.jsx(he,{path:"home-builder",element:s.jsx(NK,{})}),s.jsx(he,{path:"menu-config",element:s.jsx(wK,{})}),s.jsx(he,{path:"site-config",element:s.jsx(SK,{})}),s.jsx(he,{path:"guided-config",element:s.jsx(CK,{})}),s.jsx(he,{path:"teleassistance",element:s.jsx(ub,{})}),s.jsx(he,{path:"services",element:s.jsx(Nq,{})}),s.jsx(he,{path:"settings",element:s.jsx(Sc,{title:"Configuracin del Sistema",description:"Configurar parmetros generales",icon:""})}),s.jsx(he,{path:"audit",element:s.jsx(Sc,{title:"Auditora",description:"Registros de actividad del sistema",icon:""})}),s.jsx(he,{path:"backup",element:s.jsx(Sc,{title:"Backup y Restauracin",description:"Gestionar copias de seguridad",icon:""})}),s.jsx(he,{path:"/admin/parametros",element:s.jsx(jq,{})})]})}),s.jsx(he,{element:s.jsx(rh,{allowedRoles:["ABOGADO"]}),children:s.jsxs(he,{path:"lawyer",children:[s.jsx(he,{path:"dashboard",element:s.jsx(eh,{})}),s.jsx(he,{path:"facturacion",element:s.jsx(LX,{})}),s.jsx(he,{path:"provisiones",element:s.jsx(IX,{})}),s.jsxs(he,{path:"cases",children:[s.jsx(he,{index:!0,element:s.jsx(D6,{})}),s.jsx(he,{path:"new",element:s.jsx(A6,{})}),s.jsx(he,{path:":id",element:s.jsx(gv,{})}),s.jsx(he,{path:":id/edit",element:s.jsx(I6,{})})]}),s.jsx(he,{path:"clients",element:s.jsx(RY,{})}),s.jsx(he,{path:"appointments",element:s.jsx(MY,{})}),s.jsx(he,{path:"documents",element:s.jsx(P6,{})}),s.jsx(he,{path:"tasks",element:s.jsx(PY,{})}),s.jsx(he,{path:"reports",element:s.jsx(LY,{})}),s.jsx(he,{path:"chat",element:s.jsx(bX,{})}),s.jsx(he,{path:"teleassistance",element:s.jsx(ub,{})})]})}),s.jsx(he,{element:s.jsx(rh,{allowedRoles:["CLIENTE"]}),children:s.jsxs(he,{path:"client",children:[s.jsx(he,{path:"dashboard",element:s.jsx(eh,{})}),s.jsx(he,{path:"cases",element:s.jsx(O6,{})}),s.jsx(he,{path:"cases/:id",element:s.jsx(R6,{})}),s.jsx(he,{path:"documents",element:s.jsx(L6,{})}),s.jsx(he,{path:"provisiones",element:s.jsx($X,{})}),s.jsx(he,{path:"appointments",element:s.jsx(FX,{})}),s.jsx(he,{path:"chat",element:s.jsx(yX,{})}),s.jsx(he,{path:"teleassistance",element:s.jsx(HX,{})}),s.jsx(he,{path:"teleassistance/request",element:s.jsx(WX,{})}),s.jsx(he,{path:"payments",element:s.jsx(BX,{})}),s.jsx(he,{path:"profile",element:s.jsx(Sc,{title:"Perfil",description:"Actualizar informacin personal",icon:""})})]})})]}),s.jsx(he,{path:"*",element:s.jsx(E6,{})})]})})})})}Eh.createRoot(document.getElementById("root")).render(s.jsx(z.StrictMode,{children:s.jsx(YX,{})}))});export default qX();
