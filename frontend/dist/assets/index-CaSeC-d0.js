var pS=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var JK=pS((wX,Wc)=>{function gS(e,t){for(var r=0;r<t.length;r++){const a=t[r];if(typeof a!="string"&&!Array.isArray(a)){for(const s in a)if(s!=="default"&&!(s in e)){const o=Object.getOwnPropertyDescriptor(a,s);o&&Object.defineProperty(e,s,o.get?o:{enumerable:!0,get:()=>a[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();var Br=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var GE={exports:{}},Le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var di=Symbol.for("react.element"),hS=Symbol.for("react.portal"),vS=Symbol.for("react.fragment"),yS=Symbol.for("react.strict_mode"),ES=Symbol.for("react.profiler"),xS=Symbol.for("react.provider"),bS=Symbol.for("react.context"),wS=Symbol.for("react.forward_ref"),NS=Symbol.for("react.suspense"),SS=Symbol.for("react.memo"),CS=Symbol.for("react.lazy"),h0=Symbol.iterator;function kS(e){return e===null||typeof e!="object"?null:(e=h0&&e[h0]||e["@@iterator"],typeof e=="function"?e:null)}var KE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},XE=Object.assign,QE={};function ho(e,t,r){this.props=e,this.context=t,this.refs=QE,this.updater=r||KE}ho.prototype.isReactComponent={};ho.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ho.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function JE(){}JE.prototype=ho.prototype;function zp(e,t,r){this.props=e,this.context=t,this.refs=QE,this.updater=r||KE}var Up=zp.prototype=new JE;Up.constructor=zp;XE(Up,ho.prototype);Up.isPureReactComponent=!0;var v0=Array.isArray,ZE=Object.prototype.hasOwnProperty,Vp={current:null},ex={key:!0,ref:!0,__self:!0,__source:!0};function tx(e,t,r){var a,s={},o=null,l=null;if(t!=null)for(a in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(o=""+t.key),t)ZE.call(t,a)&&!ex.hasOwnProperty(a)&&(s[a]=t[a]);var i=arguments.length-2;if(i===1)s.children=r;else if(1<i){for(var c=Array(i),d=0;d<i;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(a in i=e.defaultProps,i)s[a]===void 0&&(s[a]=i[a]);return{$$typeof:di,type:e,key:o,ref:l,props:s,_owner:Vp.current}}function DS(e,t){return{$$typeof:di,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Wp(e){return typeof e=="object"&&e!==null&&e.$$typeof===di}function AS(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var y0=/\/+/g;function nm(e,t){return typeof e=="object"&&e!==null&&e.key!=null?AS(""+e.key):t.toString(36)}function gc(e,t,r,a,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case di:case hS:l=!0}}if(l)return l=e,s=s(l),e=a===""?"."+nm(l,0):a,v0(s)?(r="",e!=null&&(r=e.replace(y0,"$&/")+"/"),gc(s,t,r,"",function(d){return d})):s!=null&&(Wp(s)&&(s=DS(s,r+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(y0,"$&/")+"/")+e)),t.push(s)),1;if(l=0,a=a===""?".":a+":",v0(e))for(var i=0;i<e.length;i++){o=e[i];var c=a+nm(o,i);l+=gc(o,t,r,c,s)}else if(c=kS(e),typeof c=="function")for(e=c.call(e),i=0;!(o=e.next()).done;)o=o.value,c=a+nm(o,i++),l+=gc(o,t,r,c,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Fi(e,t,r){if(e==null)return e;var a=[],s=0;return gc(e,a,"","",function(o){return t.call(r,o,s++)}),a}function TS(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var sr={current:null},hc={transition:null},_S={ReactCurrentDispatcher:sr,ReactCurrentBatchConfig:hc,ReactCurrentOwner:Vp};function rx(){throw Error("act(...) is not supported in production builds of React.")}Le.Children={map:Fi,forEach:function(e,t,r){Fi(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Fi(e,function(){t++}),t},toArray:function(e){return Fi(e,function(t){return t})||[]},only:function(e){if(!Wp(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Le.Component=ho;Le.Fragment=vS;Le.Profiler=ES;Le.PureComponent=zp;Le.StrictMode=yS;Le.Suspense=NS;Le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_S;Le.act=rx;Le.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=XE({},e.props),s=e.key,o=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,l=Vp.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(c in t)ZE.call(t,c)&&!ex.hasOwnProperty(c)&&(a[c]=t[c]===void 0&&i!==void 0?i[c]:t[c])}var c=arguments.length-2;if(c===1)a.children=r;else if(1<c){i=Array(c);for(var d=0;d<c;d++)i[d]=arguments[d+2];a.children=i}return{$$typeof:di,type:e.type,key:s,ref:o,props:a,_owner:l}};Le.createContext=function(e){return e={$$typeof:bS,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:xS,_context:e},e.Consumer=e};Le.createElement=tx;Le.createFactory=function(e){var t=tx.bind(null,e);return t.type=e,t};Le.createRef=function(){return{current:null}};Le.forwardRef=function(e){return{$$typeof:wS,render:e}};Le.isValidElement=Wp;Le.lazy=function(e){return{$$typeof:CS,_payload:{_status:-1,_result:e},_init:TS}};Le.memo=function(e,t){return{$$typeof:SS,type:e,compare:t===void 0?null:t}};Le.startTransition=function(e){var t=hc.transition;hc.transition={};try{e()}finally{hc.transition=t}};Le.unstable_act=rx;Le.useCallback=function(e,t){return sr.current.useCallback(e,t)};Le.useContext=function(e){return sr.current.useContext(e)};Le.useDebugValue=function(){};Le.useDeferredValue=function(e){return sr.current.useDeferredValue(e)};Le.useEffect=function(e,t){return sr.current.useEffect(e,t)};Le.useId=function(){return sr.current.useId()};Le.useImperativeHandle=function(e,t,r){return sr.current.useImperativeHandle(e,t,r)};Le.useInsertionEffect=function(e,t){return sr.current.useInsertionEffect(e,t)};Le.useLayoutEffect=function(e,t){return sr.current.useLayoutEffect(e,t)};Le.useMemo=function(e,t){return sr.current.useMemo(e,t)};Le.useReducer=function(e,t,r){return sr.current.useReducer(e,t,r)};Le.useRef=function(e){return sr.current.useRef(e)};Le.useState=function(e){return sr.current.useState(e)};Le.useSyncExternalStore=function(e,t,r){return sr.current.useSyncExternalStore(e,t,r)};Le.useTransition=function(){return sr.current.useTransition()};Le.version="18.3.1";GE.exports=Le;var g=GE.exports;const n=xr(g),OS=gS({__proto__:null,default:n},[g]);var sf={},nx={exports:{}},kr={},ax={exports:{}},sx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(M,V){var X=M.length;M.push(V);e:for(;0<X;){var z=X-1>>>1,U=M[z];if(0<s(U,V))M[z]=V,M[X]=U,X=z;else break e}}function r(M){return M.length===0?null:M[0]}function a(M){if(M.length===0)return null;var V=M[0],X=M.pop();if(X!==V){M[0]=X;e:for(var z=0,U=M.length,Y=U>>>1;z<Y;){var Q=2*(z+1)-1,j=M[Q],B=Q+1,H=M[B];if(0>s(j,X))B<U&&0>s(H,j)?(M[z]=H,M[B]=X,z=B):(M[z]=j,M[Q]=X,z=Q);else if(B<U&&0>s(H,X))M[z]=H,M[B]=X,z=B;else break e}}return V}function s(M,V){var X=M.sortIndex-V.sortIndex;return X!==0?X:M.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var l=Date,i=l.now();e.unstable_now=function(){return l.now()-i}}var c=[],d=[],u=1,m=null,f=3,x=!1,b=!1,y=!1,v=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(M){for(var V=r(d);V!==null;){if(V.callback===null)a(d);else if(V.startTime<=M)a(d),V.sortIndex=V.expirationTime,t(c,V);else break;V=r(d)}}function w(M){if(y=!1,E(M),!b)if(r(c)!==null)b=!0,F(N);else{var V=r(d);V!==null&&T(w,V.startTime-M)}}function N(M,V){b=!1,y&&(y=!1,p(D),D=-1),x=!0;var X=f;try{for(E(V),m=r(c);m!==null&&(!(m.expirationTime>V)||M&&!A());){var z=m.callback;if(typeof z=="function"){m.callback=null,f=m.priorityLevel;var U=z(m.expirationTime<=V);V=e.unstable_now(),typeof U=="function"?m.callback=U:m===r(c)&&a(c),E(V)}else a(c);m=r(c)}if(m!==null)var Y=!0;else{var Q=r(d);Q!==null&&T(w,Q.startTime-V),Y=!1}return Y}finally{m=null,f=X,x=!1}}var S=!1,C=null,D=-1,k=5,O=-1;function A(){return!(e.unstable_now()-O<k)}function $(){if(C!==null){var M=e.unstable_now();O=M;var V=!0;try{V=C(!0,M)}finally{V?P():(S=!1,C=null)}}else S=!1}var P;if(typeof h=="function")P=function(){h($)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,L=I.port2;I.port1.onmessage=$,P=function(){L.postMessage(null)}}else P=function(){v($,0)};function F(M){C=M,S||(S=!0,P())}function T(M,V){D=v(function(){M(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){b||x||(b=!0,F(N))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(M){switch(f){case 1:case 2:case 3:var V=3;break;default:V=f}var X=f;f=V;try{return M()}finally{f=X}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,V){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var X=f;f=M;try{return V()}finally{f=X}},e.unstable_scheduleCallback=function(M,V,X){var z=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?z+X:z):X=z,M){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=X+U,M={id:u++,callback:V,priorityLevel:M,startTime:X,expirationTime:U,sortIndex:-1},X>z?(M.sortIndex=X,t(d,M),r(c)===null&&M===r(d)&&(y?(p(D),D=-1):y=!0,T(w,X-z))):(M.sortIndex=U,t(c,M),b||x||(b=!0,F(N))),M},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(M){var V=f;return function(){var X=f;f=V;try{return M.apply(this,arguments)}finally{f=X}}}})(sx);ax.exports=sx;var RS=ax.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MS=g,Sr=RS;function te(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ox=new Set,Cl={};function Ns(e,t){ro(e,t),ro(e+"Capture",t)}function ro(e,t){for(Cl[e]=t,e=0;e<t.length;e++)ox.add(t[e])}var Jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),of=Object.prototype.hasOwnProperty,PS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E0={},x0={};function LS(e){return of.call(x0,e)?!0:of.call(E0,e)?!1:PS.test(e)?x0[e]=!0:(E0[e]=!0,!1)}function IS(e,t,r,a){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function $S(e,t,r,a){if(t===null||typeof t>"u"||IS(e,t,r,a))return!0;if(a)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function or(e,t,r,a,s,o,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=l}var zt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){zt[e]=new or(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];zt[t]=new or(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){zt[e]=new or(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){zt[e]=new or(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){zt[e]=new or(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){zt[e]=new or(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){zt[e]=new or(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){zt[e]=new or(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){zt[e]=new or(e,5,!1,e.toLowerCase(),null,!1,!1)});var Hp=/[\-:]([a-z])/g;function Yp(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Hp,Yp);zt[t]=new or(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Hp,Yp);zt[t]=new or(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Hp,Yp);zt[t]=new or(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){zt[e]=new or(e,1,!1,e.toLowerCase(),null,!1,!1)});zt.xlinkHref=new or("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){zt[e]=new or(e,1,!1,e.toLowerCase(),null,!0,!0)});function qp(e,t,r,a){var s=zt.hasOwnProperty(t)?zt[t]:null;(s!==null?s.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&($S(t,r,s,a)&&(r=null),a||s===null?LS(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,a=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,a?e.setAttributeNS(a,t,r):e.setAttribute(t,r))))}var sa=MS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ji=Symbol.for("react.element"),Os=Symbol.for("react.portal"),Rs=Symbol.for("react.fragment"),Gp=Symbol.for("react.strict_mode"),lf=Symbol.for("react.profiler"),lx=Symbol.for("react.provider"),ix=Symbol.for("react.context"),Kp=Symbol.for("react.forward_ref"),cf=Symbol.for("react.suspense"),uf=Symbol.for("react.suspense_list"),Xp=Symbol.for("react.memo"),ma=Symbol.for("react.lazy"),cx=Symbol.for("react.offscreen"),b0=Symbol.iterator;function Uo(e){return e===null||typeof e!="object"?null:(e=b0&&e[b0]||e["@@iterator"],typeof e=="function"?e:null)}var ft=Object.assign,am;function nl(e){if(am===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);am=t&&t[1]||""}return`
`+am+e}var sm=!1;function om(e,t){if(!e||sm)return"";sm=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var a=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){a=d}e.call(t.prototype)}else{try{throw Error()}catch(d){a=d}e()}}catch(d){if(d&&a&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),o=a.stack.split(`
`),l=s.length-1,i=o.length-1;1<=l&&0<=i&&s[l]!==o[i];)i--;for(;1<=l&&0<=i;l--,i--)if(s[l]!==o[i]){if(l!==1||i!==1)do if(l--,i--,0>i||s[l]!==o[i]){var c=`
`+s[l].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=l&&0<=i);break}}}finally{sm=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?nl(e):""}function FS(e){switch(e.tag){case 5:return nl(e.type);case 16:return nl("Lazy");case 13:return nl("Suspense");case 19:return nl("SuspenseList");case 0:case 2:case 15:return e=om(e.type,!1),e;case 11:return e=om(e.type.render,!1),e;case 1:return e=om(e.type,!0),e;default:return""}}function df(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Rs:return"Fragment";case Os:return"Portal";case lf:return"Profiler";case Gp:return"StrictMode";case cf:return"Suspense";case uf:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ix:return(e.displayName||"Context")+".Consumer";case lx:return(e._context.displayName||"Context")+".Provider";case Kp:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Xp:return t=e.displayName||null,t!==null?t:df(e.type)||"Memo";case ma:t=e._payload,e=e._init;try{return df(e(t))}catch{}}return null}function jS(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return df(t);case 8:return t===Gp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ma(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ux(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function BS(e){var t=ux(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(l){a=""+l,o.call(this,l)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(l){a=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Bi(e){e._valueTracker||(e._valueTracker=BS(e))}function dx(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),a="";return e&&(a=ux(e)?e.checked?"true":"false":e.value),e=a,e!==r?(t.setValue(e),!0):!1}function Hc(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function mf(e,t){var r=t.checked;return ft({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function w0(e,t){var r=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;r=Ma(t.value!=null?t.value:r),e._wrapperState={initialChecked:a,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function mx(e,t){t=t.checked,t!=null&&qp(e,"checked",t,!1)}function ff(e,t){mx(e,t);var r=Ma(t.value),a=t.type;if(r!=null)a==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?pf(e,t.type,r):t.hasOwnProperty("defaultValue")&&pf(e,t.type,Ma(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function N0(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function pf(e,t,r){(t!=="number"||Hc(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var al=Array.isArray;function Ws(e,t,r,a){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&a&&(e[r].defaultSelected=!0)}else{for(r=""+Ma(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,a&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function gf(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(te(91));return ft({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function S0(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(te(92));if(al(r)){if(1<r.length)throw Error(te(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Ma(r)}}function fx(e,t){var r=Ma(t.value),a=Ma(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),a!=null&&(e.defaultValue=""+a)}function C0(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function px(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hf(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?px(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var zi,gx=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,a,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,a,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(zi=zi||document.createElement("div"),zi.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=zi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function kl(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var ul={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zS=["Webkit","ms","Moz","O"];Object.keys(ul).forEach(function(e){zS.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ul[t]=ul[e]})});function hx(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||ul.hasOwnProperty(e)&&ul[e]?(""+t).trim():t+"px"}function vx(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var a=r.indexOf("--")===0,s=hx(r,t[r],a);r==="float"&&(r="cssFloat"),a?e.setProperty(r,s):e[r]=s}}var US=ft({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vf(e,t){if(t){if(US[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(te(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(te(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(te(61))}if(t.style!=null&&typeof t.style!="object")throw Error(te(62))}}function yf(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ef=null;function Qp(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var xf=null,Hs=null,Ys=null;function k0(e){if(e=pi(e)){if(typeof xf!="function")throw Error(te(280));var t=e.stateNode;t&&(t=Wu(t),xf(e.stateNode,e.type,t))}}function yx(e){Hs?Ys?Ys.push(e):Ys=[e]:Hs=e}function Ex(){if(Hs){var e=Hs,t=Ys;if(Ys=Hs=null,k0(e),t)for(e=0;e<t.length;e++)k0(t[e])}}function xx(e,t){return e(t)}function bx(){}var lm=!1;function wx(e,t,r){if(lm)return e(t,r);lm=!0;try{return xx(e,t,r)}finally{lm=!1,(Hs!==null||Ys!==null)&&(bx(),Ex())}}function Dl(e,t){var r=e.stateNode;if(r===null)return null;var a=Wu(r);if(a===null)return null;r=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(te(231,t,typeof r));return r}var bf=!1;if(Jn)try{var Vo={};Object.defineProperty(Vo,"passive",{get:function(){bf=!0}}),window.addEventListener("test",Vo,Vo),window.removeEventListener("test",Vo,Vo)}catch{bf=!1}function VS(e,t,r,a,s,o,l,i,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(u){this.onError(u)}}var dl=!1,Yc=null,qc=!1,wf=null,WS={onError:function(e){dl=!0,Yc=e}};function HS(e,t,r,a,s,o,l,i,c){dl=!1,Yc=null,VS.apply(WS,arguments)}function YS(e,t,r,a,s,o,l,i,c){if(HS.apply(this,arguments),dl){if(dl){var d=Yc;dl=!1,Yc=null}else throw Error(te(198));qc||(qc=!0,wf=d)}}function Ss(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Nx(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function D0(e){if(Ss(e)!==e)throw Error(te(188))}function qS(e){var t=e.alternate;if(!t){if(t=Ss(e),t===null)throw Error(te(188));return t!==e?null:e}for(var r=e,a=t;;){var s=r.return;if(s===null)break;var o=s.alternate;if(o===null){if(a=s.return,a!==null){r=a;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===r)return D0(s),e;if(o===a)return D0(s),t;o=o.sibling}throw Error(te(188))}if(r.return!==a.return)r=s,a=o;else{for(var l=!1,i=s.child;i;){if(i===r){l=!0,r=s,a=o;break}if(i===a){l=!0,a=s,r=o;break}i=i.sibling}if(!l){for(i=o.child;i;){if(i===r){l=!0,r=o,a=s;break}if(i===a){l=!0,a=o,r=s;break}i=i.sibling}if(!l)throw Error(te(189))}}if(r.alternate!==a)throw Error(te(190))}if(r.tag!==3)throw Error(te(188));return r.stateNode.current===r?e:t}function Sx(e){return e=qS(e),e!==null?Cx(e):null}function Cx(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Cx(e);if(t!==null)return t;e=e.sibling}return null}var kx=Sr.unstable_scheduleCallback,A0=Sr.unstable_cancelCallback,GS=Sr.unstable_shouldYield,KS=Sr.unstable_requestPaint,Et=Sr.unstable_now,XS=Sr.unstable_getCurrentPriorityLevel,Jp=Sr.unstable_ImmediatePriority,Dx=Sr.unstable_UserBlockingPriority,Gc=Sr.unstable_NormalPriority,QS=Sr.unstable_LowPriority,Ax=Sr.unstable_IdlePriority,Bu=null,kn=null;function JS(e){if(kn&&typeof kn.onCommitFiberRoot=="function")try{kn.onCommitFiberRoot(Bu,e,void 0,(e.current.flags&128)===128)}catch{}}var ln=Math.clz32?Math.clz32:tC,ZS=Math.log,eC=Math.LN2;function tC(e){return e>>>=0,e===0?32:31-(ZS(e)/eC|0)|0}var Ui=64,Vi=4194304;function sl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Kc(e,t){var r=e.pendingLanes;if(r===0)return 0;var a=0,s=e.suspendedLanes,o=e.pingedLanes,l=r&268435455;if(l!==0){var i=l&~s;i!==0?a=sl(i):(o&=l,o!==0&&(a=sl(o)))}else l=r&~s,l!==0?a=sl(l):o!==0&&(a=sl(o));if(a===0)return 0;if(t!==0&&t!==a&&!(t&s)&&(s=a&-a,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(a&4&&(a|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)r=31-ln(t),s=1<<r,a|=e[r],t&=~s;return a}function rC(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nC(e,t){for(var r=e.suspendedLanes,a=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var l=31-ln(o),i=1<<l,c=s[l];c===-1?(!(i&r)||i&a)&&(s[l]=rC(i,t)):c<=t&&(e.expiredLanes|=i),o&=~i}}function Nf(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Tx(){var e=Ui;return Ui<<=1,!(Ui&4194240)&&(Ui=64),e}function im(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function mi(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ln(t),e[t]=r}function aC(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-ln(r),o=1<<s;t[s]=0,a[s]=-1,e[s]=-1,r&=~o}}function Zp(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var a=31-ln(r),s=1<<a;s&t|e[a]&t&&(e[a]|=t),r&=~s}}var Ke=0;function _x(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Ox,eg,Rx,Mx,Px,Sf=!1,Wi=[],wa=null,Na=null,Sa=null,Al=new Map,Tl=new Map,ga=[],sC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function T0(e,t){switch(e){case"focusin":case"focusout":wa=null;break;case"dragenter":case"dragleave":Na=null;break;case"mouseover":case"mouseout":Sa=null;break;case"pointerover":case"pointerout":Al.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tl.delete(t.pointerId)}}function Wo(e,t,r,a,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:a,nativeEvent:o,targetContainers:[s]},t!==null&&(t=pi(t),t!==null&&eg(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function oC(e,t,r,a,s){switch(t){case"focusin":return wa=Wo(wa,e,t,r,a,s),!0;case"dragenter":return Na=Wo(Na,e,t,r,a,s),!0;case"mouseover":return Sa=Wo(Sa,e,t,r,a,s),!0;case"pointerover":var o=s.pointerId;return Al.set(o,Wo(Al.get(o)||null,e,t,r,a,s)),!0;case"gotpointercapture":return o=s.pointerId,Tl.set(o,Wo(Tl.get(o)||null,e,t,r,a,s)),!0}return!1}function Lx(e){var t=Ja(e.target);if(t!==null){var r=Ss(t);if(r!==null){if(t=r.tag,t===13){if(t=Nx(r),t!==null){e.blockedOn=t,Px(e.priority,function(){Rx(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function vc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Cf(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var a=new r.constructor(r.type,r);Ef=a,r.target.dispatchEvent(a),Ef=null}else return t=pi(r),t!==null&&eg(t),e.blockedOn=r,!1;t.shift()}return!0}function _0(e,t,r){vc(e)&&r.delete(t)}function lC(){Sf=!1,wa!==null&&vc(wa)&&(wa=null),Na!==null&&vc(Na)&&(Na=null),Sa!==null&&vc(Sa)&&(Sa=null),Al.forEach(_0),Tl.forEach(_0)}function Ho(e,t){e.blockedOn===t&&(e.blockedOn=null,Sf||(Sf=!0,Sr.unstable_scheduleCallback(Sr.unstable_NormalPriority,lC)))}function _l(e){function t(s){return Ho(s,e)}if(0<Wi.length){Ho(Wi[0],e);for(var r=1;r<Wi.length;r++){var a=Wi[r];a.blockedOn===e&&(a.blockedOn=null)}}for(wa!==null&&Ho(wa,e),Na!==null&&Ho(Na,e),Sa!==null&&Ho(Sa,e),Al.forEach(t),Tl.forEach(t),r=0;r<ga.length;r++)a=ga[r],a.blockedOn===e&&(a.blockedOn=null);for(;0<ga.length&&(r=ga[0],r.blockedOn===null);)Lx(r),r.blockedOn===null&&ga.shift()}var qs=sa.ReactCurrentBatchConfig,Xc=!0;function iC(e,t,r,a){var s=Ke,o=qs.transition;qs.transition=null;try{Ke=1,tg(e,t,r,a)}finally{Ke=s,qs.transition=o}}function cC(e,t,r,a){var s=Ke,o=qs.transition;qs.transition=null;try{Ke=4,tg(e,t,r,a)}finally{Ke=s,qs.transition=o}}function tg(e,t,r,a){if(Xc){var s=Cf(e,t,r,a);if(s===null)ym(e,t,a,Qc,r),T0(e,a);else if(oC(s,e,t,r,a))a.stopPropagation();else if(T0(e,a),t&4&&-1<sC.indexOf(e)){for(;s!==null;){var o=pi(s);if(o!==null&&Ox(o),o=Cf(e,t,r,a),o===null&&ym(e,t,a,Qc,r),o===s)break;s=o}s!==null&&a.stopPropagation()}else ym(e,t,a,null,r)}}var Qc=null;function Cf(e,t,r,a){if(Qc=null,e=Qp(a),e=Ja(e),e!==null)if(t=Ss(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Nx(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qc=e,null}function Ix(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(XS()){case Jp:return 1;case Dx:return 4;case Gc:case QS:return 16;case Ax:return 536870912;default:return 16}default:return 16}}var va=null,rg=null,yc=null;function $x(){if(yc)return yc;var e,t=rg,r=t.length,a,s="value"in va?va.value:va.textContent,o=s.length;for(e=0;e<r&&t[e]===s[e];e++);var l=r-e;for(a=1;a<=l&&t[r-a]===s[o-a];a++);return yc=s.slice(e,1<a?1-a:void 0)}function Ec(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Hi(){return!0}function O0(){return!1}function Dr(e){function t(r,a,s,o,l){this._reactName=r,this._targetInst=s,this.type=a,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(r=e[i],this[i]=r?r(o):o[i]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Hi:O0,this.isPropagationStopped=O0,this}return ft(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Hi)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Hi)},persist:function(){},isPersistent:Hi}),t}var vo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ng=Dr(vo),fi=ft({},vo,{view:0,detail:0}),uC=Dr(fi),cm,um,Yo,zu=ft({},fi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ag,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Yo&&(Yo&&e.type==="mousemove"?(cm=e.screenX-Yo.screenX,um=e.screenY-Yo.screenY):um=cm=0,Yo=e),cm)},movementY:function(e){return"movementY"in e?e.movementY:um}}),R0=Dr(zu),dC=ft({},zu,{dataTransfer:0}),mC=Dr(dC),fC=ft({},fi,{relatedTarget:0}),dm=Dr(fC),pC=ft({},vo,{animationName:0,elapsedTime:0,pseudoElement:0}),gC=Dr(pC),hC=ft({},vo,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vC=Dr(hC),yC=ft({},vo,{data:0}),M0=Dr(yC),EC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wC(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=bC[e])?!!t[e]:!1}function ag(){return wC}var NC=ft({},fi,{key:function(e){if(e.key){var t=EC[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ec(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?xC[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ag,charCode:function(e){return e.type==="keypress"?Ec(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ec(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),SC=Dr(NC),CC=ft({},zu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),P0=Dr(CC),kC=ft({},fi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ag}),DC=Dr(kC),AC=ft({},vo,{propertyName:0,elapsedTime:0,pseudoElement:0}),TC=Dr(AC),_C=ft({},zu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),OC=Dr(_C),RC=[9,13,27,32],sg=Jn&&"CompositionEvent"in window,ml=null;Jn&&"documentMode"in document&&(ml=document.documentMode);var MC=Jn&&"TextEvent"in window&&!ml,Fx=Jn&&(!sg||ml&&8<ml&&11>=ml),L0=" ",I0=!1;function jx(e,t){switch(e){case"keyup":return RC.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bx(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ms=!1;function PC(e,t){switch(e){case"compositionend":return Bx(t);case"keypress":return t.which!==32?null:(I0=!0,L0);case"textInput":return e=t.data,e===L0&&I0?null:e;default:return null}}function LC(e,t){if(Ms)return e==="compositionend"||!sg&&jx(e,t)?(e=$x(),yc=rg=va=null,Ms=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fx&&t.locale!=="ko"?null:t.data;default:return null}}var IC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!IC[e.type]:t==="textarea"}function zx(e,t,r,a){yx(a),t=Jc(t,"onChange"),0<t.length&&(r=new ng("onChange","change",null,r,a),e.push({event:r,listeners:t}))}var fl=null,Ol=null;function $C(e){Jx(e,0)}function Uu(e){var t=Is(e);if(dx(t))return e}function FC(e,t){if(e==="change")return t}var Ux=!1;if(Jn){var mm;if(Jn){var fm="oninput"in document;if(!fm){var F0=document.createElement("div");F0.setAttribute("oninput","return;"),fm=typeof F0.oninput=="function"}mm=fm}else mm=!1;Ux=mm&&(!document.documentMode||9<document.documentMode)}function j0(){fl&&(fl.detachEvent("onpropertychange",Vx),Ol=fl=null)}function Vx(e){if(e.propertyName==="value"&&Uu(Ol)){var t=[];zx(t,Ol,e,Qp(e)),wx($C,t)}}function jC(e,t,r){e==="focusin"?(j0(),fl=t,Ol=r,fl.attachEvent("onpropertychange",Vx)):e==="focusout"&&j0()}function BC(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Uu(Ol)}function zC(e,t){if(e==="click")return Uu(t)}function UC(e,t){if(e==="input"||e==="change")return Uu(t)}function VC(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var un=typeof Object.is=="function"?Object.is:VC;function Rl(e,t){if(un(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var s=r[a];if(!of.call(t,s)||!un(e[s],t[s]))return!1}return!0}function B0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function z0(e,t){var r=B0(e);e=0;for(var a;r;){if(r.nodeType===3){if(a=e+r.textContent.length,e<=t&&a>=t)return{node:r,offset:t-e};e=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=B0(r)}}function Wx(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Wx(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Hx(){for(var e=window,t=Hc();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Hc(e.document)}return t}function og(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function WC(e){var t=Hx(),r=e.focusedElem,a=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Wx(r.ownerDocument.documentElement,r)){if(a!==null&&og(r)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,o=Math.min(a.start,s);a=a.end===void 0?o:Math.min(a.end,s),!e.extend&&o>a&&(s=a,a=o,o=s),s=z0(r,o);var l=z0(r,a);s&&l&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>a?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var HC=Jn&&"documentMode"in document&&11>=document.documentMode,Ps=null,kf=null,pl=null,Df=!1;function U0(e,t,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Df||Ps==null||Ps!==Hc(a)||(a=Ps,"selectionStart"in a&&og(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),pl&&Rl(pl,a)||(pl=a,a=Jc(kf,"onSelect"),0<a.length&&(t=new ng("onSelect","select",null,t,r),e.push({event:t,listeners:a}),t.target=Ps)))}function Yi(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ls={animationend:Yi("Animation","AnimationEnd"),animationiteration:Yi("Animation","AnimationIteration"),animationstart:Yi("Animation","AnimationStart"),transitionend:Yi("Transition","TransitionEnd")},pm={},Yx={};Jn&&(Yx=document.createElement("div").style,"AnimationEvent"in window||(delete Ls.animationend.animation,delete Ls.animationiteration.animation,delete Ls.animationstart.animation),"TransitionEvent"in window||delete Ls.transitionend.transition);function Vu(e){if(pm[e])return pm[e];if(!Ls[e])return e;var t=Ls[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Yx)return pm[e]=t[r];return e}var qx=Vu("animationend"),Gx=Vu("animationiteration"),Kx=Vu("animationstart"),Xx=Vu("transitionend"),Qx=new Map,V0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fa(e,t){Qx.set(e,t),Ns(t,[e])}for(var gm=0;gm<V0.length;gm++){var hm=V0[gm],YC=hm.toLowerCase(),qC=hm[0].toUpperCase()+hm.slice(1);Fa(YC,"on"+qC)}Fa(qx,"onAnimationEnd");Fa(Gx,"onAnimationIteration");Fa(Kx,"onAnimationStart");Fa("dblclick","onDoubleClick");Fa("focusin","onFocus");Fa("focusout","onBlur");Fa(Xx,"onTransitionEnd");ro("onMouseEnter",["mouseout","mouseover"]);ro("onMouseLeave",["mouseout","mouseover"]);ro("onPointerEnter",["pointerout","pointerover"]);ro("onPointerLeave",["pointerout","pointerover"]);Ns("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ns("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ns("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ns("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ns("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ns("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ol="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GC=new Set("cancel close invalid load scroll toggle".split(" ").concat(ol));function W0(e,t,r){var a=e.type||"unknown-event";e.currentTarget=r,YS(a,t,void 0,e),e.currentTarget=null}function Jx(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var a=e[r],s=a.event;a=a.listeners;e:{var o=void 0;if(t)for(var l=a.length-1;0<=l;l--){var i=a[l],c=i.instance,d=i.currentTarget;if(i=i.listener,c!==o&&s.isPropagationStopped())break e;W0(s,i,d),o=c}else for(l=0;l<a.length;l++){if(i=a[l],c=i.instance,d=i.currentTarget,i=i.listener,c!==o&&s.isPropagationStopped())break e;W0(s,i,d),o=c}}}if(qc)throw e=wf,qc=!1,wf=null,e}function rt(e,t){var r=t[Rf];r===void 0&&(r=t[Rf]=new Set);var a=e+"__bubble";r.has(a)||(Zx(t,e,2,!1),r.add(a))}function vm(e,t,r){var a=0;t&&(a|=4),Zx(r,e,a,t)}var qi="_reactListening"+Math.random().toString(36).slice(2);function Ml(e){if(!e[qi]){e[qi]=!0,ox.forEach(function(r){r!=="selectionchange"&&(GC.has(r)||vm(r,!1,e),vm(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[qi]||(t[qi]=!0,vm("selectionchange",!1,t))}}function Zx(e,t,r,a){switch(Ix(t)){case 1:var s=iC;break;case 4:s=cC;break;default:s=tg}r=s.bind(null,t,r,e),s=void 0,!bf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),a?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function ym(e,t,r,a,s){var o=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var l=a.tag;if(l===3||l===4){var i=a.stateNode.containerInfo;if(i===s||i.nodeType===8&&i.parentNode===s)break;if(l===4)for(l=a.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;l=l.return}for(;i!==null;){if(l=Ja(i),l===null)return;if(c=l.tag,c===5||c===6){a=o=l;continue e}i=i.parentNode}}a=a.return}wx(function(){var d=o,u=Qp(r),m=[];e:{var f=Qx.get(e);if(f!==void 0){var x=ng,b=e;switch(e){case"keypress":if(Ec(r)===0)break e;case"keydown":case"keyup":x=SC;break;case"focusin":b="focus",x=dm;break;case"focusout":b="blur",x=dm;break;case"beforeblur":case"afterblur":x=dm;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=R0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=mC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=DC;break;case qx:case Gx:case Kx:x=gC;break;case Xx:x=TC;break;case"scroll":x=uC;break;case"wheel":x=OC;break;case"copy":case"cut":case"paste":x=vC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=P0}var y=(t&4)!==0,v=!y&&e==="scroll",p=y?f!==null?f+"Capture":null:f;y=[];for(var h=d,E;h!==null;){E=h;var w=E.stateNode;if(E.tag===5&&w!==null&&(E=w,p!==null&&(w=Dl(h,p),w!=null&&y.push(Pl(h,w,E)))),v)break;h=h.return}0<y.length&&(f=new x(f,b,null,r,u),m.push({event:f,listeners:y}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",f&&r!==Ef&&(b=r.relatedTarget||r.fromElement)&&(Ja(b)||b[Zn]))break e;if((x||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,x?(b=r.relatedTarget||r.toElement,x=d,b=b?Ja(b):null,b!==null&&(v=Ss(b),b!==v||b.tag!==5&&b.tag!==6)&&(b=null)):(x=null,b=d),x!==b)){if(y=R0,w="onMouseLeave",p="onMouseEnter",h="mouse",(e==="pointerout"||e==="pointerover")&&(y=P0,w="onPointerLeave",p="onPointerEnter",h="pointer"),v=x==null?f:Is(x),E=b==null?f:Is(b),f=new y(w,h+"leave",x,r,u),f.target=v,f.relatedTarget=E,w=null,Ja(u)===d&&(y=new y(p,h+"enter",b,r,u),y.target=E,y.relatedTarget=v,w=y),v=w,x&&b)t:{for(y=x,p=b,h=0,E=y;E;E=Ds(E))h++;for(E=0,w=p;w;w=Ds(w))E++;for(;0<h-E;)y=Ds(y),h--;for(;0<E-h;)p=Ds(p),E--;for(;h--;){if(y===p||p!==null&&y===p.alternate)break t;y=Ds(y),p=Ds(p)}y=null}else y=null;x!==null&&H0(m,f,x,y,!1),b!==null&&v!==null&&H0(m,v,b,y,!0)}}e:{if(f=d?Is(d):window,x=f.nodeName&&f.nodeName.toLowerCase(),x==="select"||x==="input"&&f.type==="file")var N=FC;else if($0(f))if(Ux)N=UC;else{N=BC;var S=jC}else(x=f.nodeName)&&x.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(N=zC);if(N&&(N=N(e,d))){zx(m,N,r,u);break e}S&&S(e,f,d),e==="focusout"&&(S=f._wrapperState)&&S.controlled&&f.type==="number"&&pf(f,"number",f.value)}switch(S=d?Is(d):window,e){case"focusin":($0(S)||S.contentEditable==="true")&&(Ps=S,kf=d,pl=null);break;case"focusout":pl=kf=Ps=null;break;case"mousedown":Df=!0;break;case"contextmenu":case"mouseup":case"dragend":Df=!1,U0(m,r,u);break;case"selectionchange":if(HC)break;case"keydown":case"keyup":U0(m,r,u)}var C;if(sg)e:{switch(e){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else Ms?jx(e,r)&&(D="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(D="onCompositionStart");D&&(Fx&&r.locale!=="ko"&&(Ms||D!=="onCompositionStart"?D==="onCompositionEnd"&&Ms&&(C=$x()):(va=u,rg="value"in va?va.value:va.textContent,Ms=!0)),S=Jc(d,D),0<S.length&&(D=new M0(D,e,null,r,u),m.push({event:D,listeners:S}),C?D.data=C:(C=Bx(r),C!==null&&(D.data=C)))),(C=MC?PC(e,r):LC(e,r))&&(d=Jc(d,"onBeforeInput"),0<d.length&&(u=new M0("onBeforeInput","beforeinput",null,r,u),m.push({event:u,listeners:d}),u.data=C))}Jx(m,t)})}function Pl(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Jc(e,t){for(var r=t+"Capture",a=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Dl(e,r),o!=null&&a.unshift(Pl(e,o,s)),o=Dl(e,t),o!=null&&a.push(Pl(e,o,s))),e=e.return}return a}function Ds(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function H0(e,t,r,a,s){for(var o=t._reactName,l=[];r!==null&&r!==a;){var i=r,c=i.alternate,d=i.stateNode;if(c!==null&&c===a)break;i.tag===5&&d!==null&&(i=d,s?(c=Dl(r,o),c!=null&&l.unshift(Pl(r,c,i))):s||(c=Dl(r,o),c!=null&&l.push(Pl(r,c,i)))),r=r.return}l.length!==0&&e.push({event:t,listeners:l})}var KC=/\r\n?/g,XC=/\u0000|\uFFFD/g;function Y0(e){return(typeof e=="string"?e:""+e).replace(KC,`
`).replace(XC,"")}function Gi(e,t,r){if(t=Y0(t),Y0(e)!==t&&r)throw Error(te(425))}function Zc(){}var Af=null,Tf=null;function _f(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Of=typeof setTimeout=="function"?setTimeout:void 0,QC=typeof clearTimeout=="function"?clearTimeout:void 0,q0=typeof Promise=="function"?Promise:void 0,JC=typeof queueMicrotask=="function"?queueMicrotask:typeof q0<"u"?function(e){return q0.resolve(null).then(e).catch(ZC)}:Of;function ZC(e){setTimeout(function(){throw e})}function Em(e,t){var r=t,a=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(a===0){e.removeChild(s),_l(t);return}a--}else r!=="$"&&r!=="$?"&&r!=="$!"||a++;r=s}while(r);_l(t)}function Ca(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function G0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var yo=Math.random().toString(36).slice(2),wn="__reactFiber$"+yo,Ll="__reactProps$"+yo,Zn="__reactContainer$"+yo,Rf="__reactEvents$"+yo,ek="__reactListeners$"+yo,tk="__reactHandles$"+yo;function Ja(e){var t=e[wn];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Zn]||r[wn]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=G0(e);e!==null;){if(r=e[wn])return r;e=G0(e)}return t}e=r,r=e.parentNode}return null}function pi(e){return e=e[wn]||e[Zn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Is(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(te(33))}function Wu(e){return e[Ll]||null}var Mf=[],$s=-1;function ja(e){return{current:e}}function st(e){0>$s||(e.current=Mf[$s],Mf[$s]=null,$s--)}function et(e,t){$s++,Mf[$s]=e.current,e.current=t}var Pa={},Kt=ja(Pa),mr=ja(!1),us=Pa;function no(e,t){var r=e.type.contextTypes;if(!r)return Pa;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in r)s[o]=t[o];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function fr(e){return e=e.childContextTypes,e!=null}function eu(){st(mr),st(Kt)}function K0(e,t,r){if(Kt.current!==Pa)throw Error(te(168));et(Kt,t),et(mr,r)}function eb(e,t,r){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return r;a=a.getChildContext();for(var s in a)if(!(s in t))throw Error(te(108,jS(e)||"Unknown",s));return ft({},r,a)}function tu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Pa,us=Kt.current,et(Kt,e),et(mr,mr.current),!0}function X0(e,t,r){var a=e.stateNode;if(!a)throw Error(te(169));r?(e=eb(e,t,us),a.__reactInternalMemoizedMergedChildContext=e,st(mr),st(Kt),et(Kt,e)):st(mr),et(mr,r)}var Wn=null,Hu=!1,xm=!1;function tb(e){Wn===null?Wn=[e]:Wn.push(e)}function rk(e){Hu=!0,tb(e)}function Ba(){if(!xm&&Wn!==null){xm=!0;var e=0,t=Ke;try{var r=Wn;for(Ke=1;e<r.length;e++){var a=r[e];do a=a(!0);while(a!==null)}Wn=null,Hu=!1}catch(s){throw Wn!==null&&(Wn=Wn.slice(e+1)),kx(Jp,Ba),s}finally{Ke=t,xm=!1}}return null}var Fs=[],js=0,ru=null,nu=0,Lr=[],Ir=0,ds=null,Hn=1,Yn="";function Ga(e,t){Fs[js++]=nu,Fs[js++]=ru,ru=e,nu=t}function rb(e,t,r){Lr[Ir++]=Hn,Lr[Ir++]=Yn,Lr[Ir++]=ds,ds=e;var a=Hn;e=Yn;var s=32-ln(a)-1;a&=~(1<<s),r+=1;var o=32-ln(t)+s;if(30<o){var l=s-s%5;o=(a&(1<<l)-1).toString(32),a>>=l,s-=l,Hn=1<<32-ln(t)+s|r<<s|a,Yn=o+e}else Hn=1<<o|r<<s|a,Yn=e}function lg(e){e.return!==null&&(Ga(e,1),rb(e,1,0))}function ig(e){for(;e===ru;)ru=Fs[--js],Fs[js]=null,nu=Fs[--js],Fs[js]=null;for(;e===ds;)ds=Lr[--Ir],Lr[Ir]=null,Yn=Lr[--Ir],Lr[Ir]=null,Hn=Lr[--Ir],Lr[Ir]=null}var Nr=null,wr=null,ct=!1,an=null;function nb(e,t){var r=zr(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Q0(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Nr=e,wr=Ca(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Nr=e,wr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=ds!==null?{id:Hn,overflow:Yn}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=zr(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Nr=e,wr=null,!0):!1;default:return!1}}function Pf(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Lf(e){if(ct){var t=wr;if(t){var r=t;if(!Q0(e,t)){if(Pf(e))throw Error(te(418));t=Ca(r.nextSibling);var a=Nr;t&&Q0(e,t)?nb(a,r):(e.flags=e.flags&-4097|2,ct=!1,Nr=e)}}else{if(Pf(e))throw Error(te(418));e.flags=e.flags&-4097|2,ct=!1,Nr=e}}}function J0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Nr=e}function Ki(e){if(e!==Nr)return!1;if(!ct)return J0(e),ct=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!_f(e.type,e.memoizedProps)),t&&(t=wr)){if(Pf(e))throw ab(),Error(te(418));for(;t;)nb(e,t),t=Ca(t.nextSibling)}if(J0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(te(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){wr=Ca(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}wr=null}}else wr=Nr?Ca(e.stateNode.nextSibling):null;return!0}function ab(){for(var e=wr;e;)e=Ca(e.nextSibling)}function ao(){wr=Nr=null,ct=!1}function cg(e){an===null?an=[e]:an.push(e)}var nk=sa.ReactCurrentBatchConfig;function qo(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(te(309));var a=r.stateNode}if(!a)throw Error(te(147,e));var s=a,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(l){var i=s.refs;l===null?delete i[o]:i[o]=l},t._stringRef=o,t)}if(typeof e!="string")throw Error(te(284));if(!r._owner)throw Error(te(290,e))}return e}function Xi(e,t){throw e=Object.prototype.toString.call(t),Error(te(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Z0(e){var t=e._init;return t(e._payload)}function sb(e){function t(p,h){if(e){var E=p.deletions;E===null?(p.deletions=[h],p.flags|=16):E.push(h)}}function r(p,h){if(!e)return null;for(;h!==null;)t(p,h),h=h.sibling;return null}function a(p,h){for(p=new Map;h!==null;)h.key!==null?p.set(h.key,h):p.set(h.index,h),h=h.sibling;return p}function s(p,h){return p=Ta(p,h),p.index=0,p.sibling=null,p}function o(p,h,E){return p.index=E,e?(E=p.alternate,E!==null?(E=E.index,E<h?(p.flags|=2,h):E):(p.flags|=2,h)):(p.flags|=1048576,h)}function l(p){return e&&p.alternate===null&&(p.flags|=2),p}function i(p,h,E,w){return h===null||h.tag!==6?(h=Dm(E,p.mode,w),h.return=p,h):(h=s(h,E),h.return=p,h)}function c(p,h,E,w){var N=E.type;return N===Rs?u(p,h,E.props.children,w,E.key):h!==null&&(h.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===ma&&Z0(N)===h.type)?(w=s(h,E.props),w.ref=qo(p,h,E),w.return=p,w):(w=kc(E.type,E.key,E.props,null,p.mode,w),w.ref=qo(p,h,E),w.return=p,w)}function d(p,h,E,w){return h===null||h.tag!==4||h.stateNode.containerInfo!==E.containerInfo||h.stateNode.implementation!==E.implementation?(h=Am(E,p.mode,w),h.return=p,h):(h=s(h,E.children||[]),h.return=p,h)}function u(p,h,E,w,N){return h===null||h.tag!==7?(h=ss(E,p.mode,w,N),h.return=p,h):(h=s(h,E),h.return=p,h)}function m(p,h,E){if(typeof h=="string"&&h!==""||typeof h=="number")return h=Dm(""+h,p.mode,E),h.return=p,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case ji:return E=kc(h.type,h.key,h.props,null,p.mode,E),E.ref=qo(p,null,h),E.return=p,E;case Os:return h=Am(h,p.mode,E),h.return=p,h;case ma:var w=h._init;return m(p,w(h._payload),E)}if(al(h)||Uo(h))return h=ss(h,p.mode,E,null),h.return=p,h;Xi(p,h)}return null}function f(p,h,E,w){var N=h!==null?h.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return N!==null?null:i(p,h,""+E,w);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case ji:return E.key===N?c(p,h,E,w):null;case Os:return E.key===N?d(p,h,E,w):null;case ma:return N=E._init,f(p,h,N(E._payload),w)}if(al(E)||Uo(E))return N!==null?null:u(p,h,E,w,null);Xi(p,E)}return null}function x(p,h,E,w,N){if(typeof w=="string"&&w!==""||typeof w=="number")return p=p.get(E)||null,i(h,p,""+w,N);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ji:return p=p.get(w.key===null?E:w.key)||null,c(h,p,w,N);case Os:return p=p.get(w.key===null?E:w.key)||null,d(h,p,w,N);case ma:var S=w._init;return x(p,h,E,S(w._payload),N)}if(al(w)||Uo(w))return p=p.get(E)||null,u(h,p,w,N,null);Xi(h,w)}return null}function b(p,h,E,w){for(var N=null,S=null,C=h,D=h=0,k=null;C!==null&&D<E.length;D++){C.index>D?(k=C,C=null):k=C.sibling;var O=f(p,C,E[D],w);if(O===null){C===null&&(C=k);break}e&&C&&O.alternate===null&&t(p,C),h=o(O,h,D),S===null?N=O:S.sibling=O,S=O,C=k}if(D===E.length)return r(p,C),ct&&Ga(p,D),N;if(C===null){for(;D<E.length;D++)C=m(p,E[D],w),C!==null&&(h=o(C,h,D),S===null?N=C:S.sibling=C,S=C);return ct&&Ga(p,D),N}for(C=a(p,C);D<E.length;D++)k=x(C,p,D,E[D],w),k!==null&&(e&&k.alternate!==null&&C.delete(k.key===null?D:k.key),h=o(k,h,D),S===null?N=k:S.sibling=k,S=k);return e&&C.forEach(function(A){return t(p,A)}),ct&&Ga(p,D),N}function y(p,h,E,w){var N=Uo(E);if(typeof N!="function")throw Error(te(150));if(E=N.call(E),E==null)throw Error(te(151));for(var S=N=null,C=h,D=h=0,k=null,O=E.next();C!==null&&!O.done;D++,O=E.next()){C.index>D?(k=C,C=null):k=C.sibling;var A=f(p,C,O.value,w);if(A===null){C===null&&(C=k);break}e&&C&&A.alternate===null&&t(p,C),h=o(A,h,D),S===null?N=A:S.sibling=A,S=A,C=k}if(O.done)return r(p,C),ct&&Ga(p,D),N;if(C===null){for(;!O.done;D++,O=E.next())O=m(p,O.value,w),O!==null&&(h=o(O,h,D),S===null?N=O:S.sibling=O,S=O);return ct&&Ga(p,D),N}for(C=a(p,C);!O.done;D++,O=E.next())O=x(C,p,D,O.value,w),O!==null&&(e&&O.alternate!==null&&C.delete(O.key===null?D:O.key),h=o(O,h,D),S===null?N=O:S.sibling=O,S=O);return e&&C.forEach(function($){return t(p,$)}),ct&&Ga(p,D),N}function v(p,h,E,w){if(typeof E=="object"&&E!==null&&E.type===Rs&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case ji:e:{for(var N=E.key,S=h;S!==null;){if(S.key===N){if(N=E.type,N===Rs){if(S.tag===7){r(p,S.sibling),h=s(S,E.props.children),h.return=p,p=h;break e}}else if(S.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===ma&&Z0(N)===S.type){r(p,S.sibling),h=s(S,E.props),h.ref=qo(p,S,E),h.return=p,p=h;break e}r(p,S);break}else t(p,S);S=S.sibling}E.type===Rs?(h=ss(E.props.children,p.mode,w,E.key),h.return=p,p=h):(w=kc(E.type,E.key,E.props,null,p.mode,w),w.ref=qo(p,h,E),w.return=p,p=w)}return l(p);case Os:e:{for(S=E.key;h!==null;){if(h.key===S)if(h.tag===4&&h.stateNode.containerInfo===E.containerInfo&&h.stateNode.implementation===E.implementation){r(p,h.sibling),h=s(h,E.children||[]),h.return=p,p=h;break e}else{r(p,h);break}else t(p,h);h=h.sibling}h=Am(E,p.mode,w),h.return=p,p=h}return l(p);case ma:return S=E._init,v(p,h,S(E._payload),w)}if(al(E))return b(p,h,E,w);if(Uo(E))return y(p,h,E,w);Xi(p,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,h!==null&&h.tag===6?(r(p,h.sibling),h=s(h,E),h.return=p,p=h):(r(p,h),h=Dm(E,p.mode,w),h.return=p,p=h),l(p)):r(p,h)}return v}var so=sb(!0),ob=sb(!1),au=ja(null),su=null,Bs=null,ug=null;function dg(){ug=Bs=su=null}function mg(e){var t=au.current;st(au),e._currentValue=t}function If(e,t,r){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===r)break;e=e.return}}function Gs(e,t){su=e,ug=Bs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(dr=!0),e.firstContext=null)}function Vr(e){var t=e._currentValue;if(ug!==e)if(e={context:e,memoizedValue:t,next:null},Bs===null){if(su===null)throw Error(te(308));Bs=e,su.dependencies={lanes:0,firstContext:e}}else Bs=Bs.next=e;return t}var Za=null;function fg(e){Za===null?Za=[e]:Za.push(e)}function lb(e,t,r,a){var s=t.interleaved;return s===null?(r.next=r,fg(t)):(r.next=s.next,s.next=r),t.interleaved=r,ea(e,a)}function ea(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var fa=!1;function pg(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ib(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Kn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ka(e,t,r){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,Ue&2){var s=a.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),a.pending=t,ea(e,r)}return s=a.interleaved,s===null?(t.next=t,fg(a)):(t.next=s.next,s.next=t),a.interleaved=t,ea(e,r)}function xc(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,Zp(e,r)}}function ev(e,t){var r=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var s=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?s=o=l:o=o.next=l,r=r.next}while(r!==null);o===null?s=o=t:o=o.next=t}else s=o=t;r={baseState:a.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:a.shared,effects:a.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function ou(e,t,r,a){var s=e.updateQueue;fa=!1;var o=s.firstBaseUpdate,l=s.lastBaseUpdate,i=s.shared.pending;if(i!==null){s.shared.pending=null;var c=i,d=c.next;c.next=null,l===null?o=d:l.next=d,l=c;var u=e.alternate;u!==null&&(u=u.updateQueue,i=u.lastBaseUpdate,i!==l&&(i===null?u.firstBaseUpdate=d:i.next=d,u.lastBaseUpdate=c))}if(o!==null){var m=s.baseState;l=0,u=d=c=null,i=o;do{var f=i.lane,x=i.eventTime;if((a&f)===f){u!==null&&(u=u.next={eventTime:x,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var b=e,y=i;switch(f=t,x=r,y.tag){case 1:if(b=y.payload,typeof b=="function"){m=b.call(x,m,f);break e}m=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=y.payload,f=typeof b=="function"?b.call(x,m,f):b,f==null)break e;m=ft({},m,f);break e;case 2:fa=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[i]:f.push(i))}else x={eventTime:x,lane:f,tag:i.tag,payload:i.payload,callback:i.callback,next:null},u===null?(d=u=x,c=m):u=u.next=x,l|=f;if(i=i.next,i===null){if(i=s.shared.pending,i===null)break;f=i,i=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(u===null&&(c=m),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=u,t=s.shared.interleaved,t!==null){s=t;do l|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);fs|=l,e.lanes=l,e.memoizedState=m}}function tv(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],s=a.callback;if(s!==null){if(a.callback=null,a=r,typeof s!="function")throw Error(te(191,s));s.call(a)}}}var gi={},Dn=ja(gi),Il=ja(gi),$l=ja(gi);function es(e){if(e===gi)throw Error(te(174));return e}function gg(e,t){switch(et($l,t),et(Il,e),et(Dn,gi),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:hf(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=hf(t,e)}st(Dn),et(Dn,t)}function oo(){st(Dn),st(Il),st($l)}function cb(e){es($l.current);var t=es(Dn.current),r=hf(t,e.type);t!==r&&(et(Il,e),et(Dn,r))}function hg(e){Il.current===e&&(st(Dn),st(Il))}var dt=ja(0);function lu(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var bm=[];function vg(){for(var e=0;e<bm.length;e++)bm[e]._workInProgressVersionPrimary=null;bm.length=0}var bc=sa.ReactCurrentDispatcher,wm=sa.ReactCurrentBatchConfig,ms=0,mt=null,Nt=null,Ot=null,iu=!1,gl=!1,Fl=0,ak=0;function Vt(){throw Error(te(321))}function yg(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!un(e[r],t[r]))return!1;return!0}function Eg(e,t,r,a,s,o){if(ms=o,mt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,bc.current=e===null||e.memoizedState===null?ik:ck,e=r(a,s),gl){o=0;do{if(gl=!1,Fl=0,25<=o)throw Error(te(301));o+=1,Ot=Nt=null,t.updateQueue=null,bc.current=uk,e=r(a,s)}while(gl)}if(bc.current=cu,t=Nt!==null&&Nt.next!==null,ms=0,Ot=Nt=mt=null,iu=!1,t)throw Error(te(300));return e}function xg(){var e=Fl!==0;return Fl=0,e}function xn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?mt.memoizedState=Ot=e:Ot=Ot.next=e,Ot}function Wr(){if(Nt===null){var e=mt.alternate;e=e!==null?e.memoizedState:null}else e=Nt.next;var t=Ot===null?mt.memoizedState:Ot.next;if(t!==null)Ot=t,Nt=e;else{if(e===null)throw Error(te(310));Nt=e,e={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},Ot===null?mt.memoizedState=Ot=e:Ot=Ot.next=e}return Ot}function jl(e,t){return typeof t=="function"?t(e):t}function Nm(e){var t=Wr(),r=t.queue;if(r===null)throw Error(te(311));r.lastRenderedReducer=e;var a=Nt,s=a.baseQueue,o=r.pending;if(o!==null){if(s!==null){var l=s.next;s.next=o.next,o.next=l}a.baseQueue=s=o,r.pending=null}if(s!==null){o=s.next,a=a.baseState;var i=l=null,c=null,d=o;do{var u=d.lane;if((ms&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),a=d.hasEagerState?d.eagerState:e(a,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(i=c=m,l=a):c=c.next=m,mt.lanes|=u,fs|=u}d=d.next}while(d!==null&&d!==o);c===null?l=a:c.next=i,un(a,t.memoizedState)||(dr=!0),t.memoizedState=a,t.baseState=l,t.baseQueue=c,r.lastRenderedState=a}if(e=r.interleaved,e!==null){s=e;do o=s.lane,mt.lanes|=o,fs|=o,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Sm(e){var t=Wr(),r=t.queue;if(r===null)throw Error(te(311));r.lastRenderedReducer=e;var a=r.dispatch,s=r.pending,o=t.memoizedState;if(s!==null){r.pending=null;var l=s=s.next;do o=e(o,l.action),l=l.next;while(l!==s);un(o,t.memoizedState)||(dr=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,a]}function ub(){}function db(e,t){var r=mt,a=Wr(),s=t(),o=!un(a.memoizedState,s);if(o&&(a.memoizedState=s,dr=!0),a=a.queue,bg(pb.bind(null,r,a,e),[e]),a.getSnapshot!==t||o||Ot!==null&&Ot.memoizedState.tag&1){if(r.flags|=2048,Bl(9,fb.bind(null,r,a,s,t),void 0,null),Mt===null)throw Error(te(349));ms&30||mb(r,t,s)}return s}function mb(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=mt.updateQueue,t===null?(t={lastEffect:null,stores:null},mt.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function fb(e,t,r,a){t.value=r,t.getSnapshot=a,gb(t)&&hb(e)}function pb(e,t,r){return r(function(){gb(t)&&hb(e)})}function gb(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!un(e,r)}catch{return!0}}function hb(e){var t=ea(e,1);t!==null&&cn(t,e,1,-1)}function rv(e){var t=xn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:jl,lastRenderedState:e},t.queue=e,e=e.dispatch=lk.bind(null,mt,e),[t.memoizedState,e]}function Bl(e,t,r,a){return e={tag:e,create:t,destroy:r,deps:a,next:null},t=mt.updateQueue,t===null?(t={lastEffect:null,stores:null},mt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(a=r.next,r.next=e,e.next=a,t.lastEffect=e)),e}function vb(){return Wr().memoizedState}function wc(e,t,r,a){var s=xn();mt.flags|=e,s.memoizedState=Bl(1|t,r,void 0,a===void 0?null:a)}function Yu(e,t,r,a){var s=Wr();a=a===void 0?null:a;var o=void 0;if(Nt!==null){var l=Nt.memoizedState;if(o=l.destroy,a!==null&&yg(a,l.deps)){s.memoizedState=Bl(t,r,o,a);return}}mt.flags|=e,s.memoizedState=Bl(1|t,r,o,a)}function nv(e,t){return wc(8390656,8,e,t)}function bg(e,t){return Yu(2048,8,e,t)}function yb(e,t){return Yu(4,2,e,t)}function Eb(e,t){return Yu(4,4,e,t)}function xb(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function bb(e,t,r){return r=r!=null?r.concat([e]):null,Yu(4,4,xb.bind(null,t,e),r)}function wg(){}function wb(e,t){var r=Wr();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&yg(t,a[1])?a[0]:(r.memoizedState=[e,t],e)}function Nb(e,t){var r=Wr();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&yg(t,a[1])?a[0]:(e=e(),r.memoizedState=[e,t],e)}function Sb(e,t,r){return ms&21?(un(r,t)||(r=Tx(),mt.lanes|=r,fs|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,dr=!0),e.memoizedState=r)}function sk(e,t){var r=Ke;Ke=r!==0&&4>r?r:4,e(!0);var a=wm.transition;wm.transition={};try{e(!1),t()}finally{Ke=r,wm.transition=a}}function Cb(){return Wr().memoizedState}function ok(e,t,r){var a=Aa(e);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},kb(e))Db(t,r);else if(r=lb(e,t,r,a),r!==null){var s=ar();cn(r,e,a,s),Ab(r,t,a)}}function lk(e,t,r){var a=Aa(e),s={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(kb(e))Db(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var l=t.lastRenderedState,i=o(l,r);if(s.hasEagerState=!0,s.eagerState=i,un(i,l)){var c=t.interleaved;c===null?(s.next=s,fg(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=lb(e,t,s,a),r!==null&&(s=ar(),cn(r,e,a,s),Ab(r,t,a))}}function kb(e){var t=e.alternate;return e===mt||t!==null&&t===mt}function Db(e,t){gl=iu=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Ab(e,t,r){if(r&4194240){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,Zp(e,r)}}var cu={readContext:Vr,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useInsertionEffect:Vt,useLayoutEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useMutableSource:Vt,useSyncExternalStore:Vt,useId:Vt,unstable_isNewReconciler:!1},ik={readContext:Vr,useCallback:function(e,t){return xn().memoizedState=[e,t===void 0?null:t],e},useContext:Vr,useEffect:nv,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,wc(4194308,4,xb.bind(null,t,e),r)},useLayoutEffect:function(e,t){return wc(4194308,4,e,t)},useInsertionEffect:function(e,t){return wc(4,2,e,t)},useMemo:function(e,t){var r=xn();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var a=xn();return t=r!==void 0?r(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=ok.bind(null,mt,e),[a.memoizedState,e]},useRef:function(e){var t=xn();return e={current:e},t.memoizedState=e},useState:rv,useDebugValue:wg,useDeferredValue:function(e){return xn().memoizedState=e},useTransition:function(){var e=rv(!1),t=e[0];return e=sk.bind(null,e[1]),xn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var a=mt,s=xn();if(ct){if(r===void 0)throw Error(te(407));r=r()}else{if(r=t(),Mt===null)throw Error(te(349));ms&30||mb(a,t,r)}s.memoizedState=r;var o={value:r,getSnapshot:t};return s.queue=o,nv(pb.bind(null,a,o,e),[e]),a.flags|=2048,Bl(9,fb.bind(null,a,o,r,t),void 0,null),r},useId:function(){var e=xn(),t=Mt.identifierPrefix;if(ct){var r=Yn,a=Hn;r=(a&~(1<<32-ln(a)-1)).toString(32)+r,t=":"+t+"R"+r,r=Fl++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=ak++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ck={readContext:Vr,useCallback:wb,useContext:Vr,useEffect:bg,useImperativeHandle:bb,useInsertionEffect:yb,useLayoutEffect:Eb,useMemo:Nb,useReducer:Nm,useRef:vb,useState:function(){return Nm(jl)},useDebugValue:wg,useDeferredValue:function(e){var t=Wr();return Sb(t,Nt.memoizedState,e)},useTransition:function(){var e=Nm(jl)[0],t=Wr().memoizedState;return[e,t]},useMutableSource:ub,useSyncExternalStore:db,useId:Cb,unstable_isNewReconciler:!1},uk={readContext:Vr,useCallback:wb,useContext:Vr,useEffect:bg,useImperativeHandle:bb,useInsertionEffect:yb,useLayoutEffect:Eb,useMemo:Nb,useReducer:Sm,useRef:vb,useState:function(){return Sm(jl)},useDebugValue:wg,useDeferredValue:function(e){var t=Wr();return Nt===null?t.memoizedState=e:Sb(t,Nt.memoizedState,e)},useTransition:function(){var e=Sm(jl)[0],t=Wr().memoizedState;return[e,t]},useMutableSource:ub,useSyncExternalStore:db,useId:Cb,unstable_isNewReconciler:!1};function tn(e,t){if(e&&e.defaultProps){t=ft({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function $f(e,t,r,a){t=e.memoizedState,r=r(a,t),r=r==null?t:ft({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var qu={isMounted:function(e){return(e=e._reactInternals)?Ss(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var a=ar(),s=Aa(e),o=Kn(a,s);o.payload=t,r!=null&&(o.callback=r),t=ka(e,o,s),t!==null&&(cn(t,e,s,a),xc(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var a=ar(),s=Aa(e),o=Kn(a,s);o.tag=1,o.payload=t,r!=null&&(o.callback=r),t=ka(e,o,s),t!==null&&(cn(t,e,s,a),xc(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ar(),a=Aa(e),s=Kn(r,a);s.tag=2,t!=null&&(s.callback=t),t=ka(e,s,a),t!==null&&(cn(t,e,a,r),xc(t,e,a))}};function av(e,t,r,a,s,o,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,o,l):t.prototype&&t.prototype.isPureReactComponent?!Rl(r,a)||!Rl(s,o):!0}function Tb(e,t,r){var a=!1,s=Pa,o=t.contextType;return typeof o=="object"&&o!==null?o=Vr(o):(s=fr(t)?us:Kt.current,a=t.contextTypes,o=(a=a!=null)?no(e,s):Pa),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=qu,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function sv(e,t,r,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,a),t.state!==e&&qu.enqueueReplaceState(t,t.state,null)}function Ff(e,t,r,a){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},pg(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=Vr(o):(o=fr(t)?us:Kt.current,s.context=no(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&($f(e,t,o,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&qu.enqueueReplaceState(s,s.state,null),ou(e,r,s,a),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function lo(e,t){try{var r="",a=t;do r+=FS(a),a=a.return;while(a);var s=r}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function Cm(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function jf(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var dk=typeof WeakMap=="function"?WeakMap:Map;function _b(e,t,r){r=Kn(-1,r),r.tag=3,r.payload={element:null};var a=t.value;return r.callback=function(){du||(du=!0,Kf=a),jf(e,t)},r}function Ob(e,t,r){r=Kn(-1,r),r.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var s=t.value;r.payload=function(){return a(s)},r.callback=function(){jf(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){jf(e,t),typeof a!="function"&&(Da===null?Da=new Set([this]):Da.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),r}function ov(e,t,r){var a=e.pingCache;if(a===null){a=e.pingCache=new dk;var s=new Set;a.set(t,s)}else s=a.get(t),s===void 0&&(s=new Set,a.set(t,s));s.has(r)||(s.add(r),e=Ck.bind(null,e,t,r),t.then(e,e))}function lv(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function iv(e,t,r,a,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Kn(-1,1),t.tag=2,ka(r,t,1))),r.lanes|=1),e)}var mk=sa.ReactCurrentOwner,dr=!1;function rr(e,t,r,a){t.child=e===null?ob(t,null,r,a):so(t,e.child,r,a)}function cv(e,t,r,a,s){r=r.render;var o=t.ref;return Gs(t,s),a=Eg(e,t,r,a,o,s),r=xg(),e!==null&&!dr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ta(e,t,s)):(ct&&r&&lg(t),t.flags|=1,rr(e,t,a,s),t.child)}function uv(e,t,r,a,s){if(e===null){var o=r.type;return typeof o=="function"&&!_g(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=o,Rb(e,t,o,a,s)):(e=kc(r.type,null,a,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var l=o.memoizedProps;if(r=r.compare,r=r!==null?r:Rl,r(l,a)&&e.ref===t.ref)return ta(e,t,s)}return t.flags|=1,e=Ta(o,a),e.ref=t.ref,e.return=t,t.child=e}function Rb(e,t,r,a,s){if(e!==null){var o=e.memoizedProps;if(Rl(o,a)&&e.ref===t.ref)if(dr=!1,t.pendingProps=a=o,(e.lanes&s)!==0)e.flags&131072&&(dr=!0);else return t.lanes=e.lanes,ta(e,t,s)}return Bf(e,t,r,a,s)}function Mb(e,t,r){var a=t.pendingProps,s=a.children,o=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},et(Us,br),br|=r;else{if(!(r&1073741824))return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,et(Us,br),br|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=o!==null?o.baseLanes:r,et(Us,br),br|=a}else o!==null?(a=o.baseLanes|r,t.memoizedState=null):a=r,et(Us,br),br|=a;return rr(e,t,s,r),t.child}function Pb(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Bf(e,t,r,a,s){var o=fr(r)?us:Kt.current;return o=no(t,o),Gs(t,s),r=Eg(e,t,r,a,o,s),a=xg(),e!==null&&!dr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ta(e,t,s)):(ct&&a&&lg(t),t.flags|=1,rr(e,t,r,s),t.child)}function dv(e,t,r,a,s){if(fr(r)){var o=!0;tu(t)}else o=!1;if(Gs(t,s),t.stateNode===null)Nc(e,t),Tb(t,r,a),Ff(t,r,a,s),a=!0;else if(e===null){var l=t.stateNode,i=t.memoizedProps;l.props=i;var c=l.context,d=r.contextType;typeof d=="object"&&d!==null?d=Vr(d):(d=fr(r)?us:Kt.current,d=no(t,d));var u=r.getDerivedStateFromProps,m=typeof u=="function"||typeof l.getSnapshotBeforeUpdate=="function";m||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(i!==a||c!==d)&&sv(t,l,a,d),fa=!1;var f=t.memoizedState;l.state=f,ou(t,a,l,s),c=t.memoizedState,i!==a||f!==c||mr.current||fa?(typeof u=="function"&&($f(t,r,u,a),c=t.memoizedState),(i=fa||av(t,r,i,a,f,c,d))?(m||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=c),l.props=a,l.state=c,l.context=d,a=i):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{l=t.stateNode,ib(e,t),i=t.memoizedProps,d=t.type===t.elementType?i:tn(t.type,i),l.props=d,m=t.pendingProps,f=l.context,c=r.contextType,typeof c=="object"&&c!==null?c=Vr(c):(c=fr(r)?us:Kt.current,c=no(t,c));var x=r.getDerivedStateFromProps;(u=typeof x=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(i!==m||f!==c)&&sv(t,l,a,c),fa=!1,f=t.memoizedState,l.state=f,ou(t,a,l,s);var b=t.memoizedState;i!==m||f!==b||mr.current||fa?(typeof x=="function"&&($f(t,r,x,a),b=t.memoizedState),(d=fa||av(t,r,d,a,f,b,c)||!1)?(u||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(a,b,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(a,b,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||i===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=b),l.props=a,l.state=b,l.context=c,a=d):(typeof l.componentDidUpdate!="function"||i===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),a=!1)}return zf(e,t,r,a,o,s)}function zf(e,t,r,a,s,o){Pb(e,t);var l=(t.flags&128)!==0;if(!a&&!l)return s&&X0(t,r,!1),ta(e,t,o);a=t.stateNode,mk.current=t;var i=l&&typeof r.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&l?(t.child=so(t,e.child,null,o),t.child=so(t,null,i,o)):rr(e,t,i,o),t.memoizedState=a.state,s&&X0(t,r,!0),t.child}function Lb(e){var t=e.stateNode;t.pendingContext?K0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&K0(e,t.context,!1),gg(e,t.containerInfo)}function mv(e,t,r,a,s){return ao(),cg(s),t.flags|=256,rr(e,t,r,a),t.child}var Uf={dehydrated:null,treeContext:null,retryLane:0};function Vf(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ib(e,t,r){var a=t.pendingProps,s=dt.current,o=!1,l=(t.flags&128)!==0,i;if((i=l)||(i=e!==null&&e.memoizedState===null?!1:(s&2)!==0),i?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),et(dt,s&1),e===null)return Lf(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=a.children,e=a.fallback,o?(a=t.mode,o=t.child,l={mode:"hidden",children:l},!(a&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=Xu(l,a,0,null),e=ss(e,a,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Vf(r),t.memoizedState=Uf,e):Ng(t,l));if(s=e.memoizedState,s!==null&&(i=s.dehydrated,i!==null))return fk(e,t,l,a,i,s,r);if(o){o=a.fallback,l=t.mode,s=e.child,i=s.sibling;var c={mode:"hidden",children:a.children};return!(l&1)&&t.child!==s?(a=t.child,a.childLanes=0,a.pendingProps=c,t.deletions=null):(a=Ta(s,c),a.subtreeFlags=s.subtreeFlags&14680064),i!==null?o=Ta(i,o):(o=ss(o,l,r,null),o.flags|=2),o.return=t,a.return=t,a.sibling=o,t.child=a,a=o,o=t.child,l=e.child.memoizedState,l=l===null?Vf(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~r,t.memoizedState=Uf,a}return o=e.child,e=o.sibling,a=Ta(o,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=r),a.return=t,a.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=a,t.memoizedState=null,a}function Ng(e,t){return t=Xu({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Qi(e,t,r,a){return a!==null&&cg(a),so(t,e.child,null,r),e=Ng(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function fk(e,t,r,a,s,o,l){if(r)return t.flags&256?(t.flags&=-257,a=Cm(Error(te(422))),Qi(e,t,l,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=a.fallback,s=t.mode,a=Xu({mode:"visible",children:a.children},s,0,null),o=ss(o,s,l,null),o.flags|=2,a.return=t,o.return=t,a.sibling=o,t.child=a,t.mode&1&&so(t,e.child,null,l),t.child.memoizedState=Vf(l),t.memoizedState=Uf,o);if(!(t.mode&1))return Qi(e,t,l,null);if(s.data==="$!"){if(a=s.nextSibling&&s.nextSibling.dataset,a)var i=a.dgst;return a=i,o=Error(te(419)),a=Cm(o,a,void 0),Qi(e,t,l,a)}if(i=(l&e.childLanes)!==0,dr||i){if(a=Mt,a!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(a.suspendedLanes|l)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,ea(e,s),cn(a,e,s,-1))}return Tg(),a=Cm(Error(te(421))),Qi(e,t,l,a)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=kk.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,wr=Ca(s.nextSibling),Nr=t,ct=!0,an=null,e!==null&&(Lr[Ir++]=Hn,Lr[Ir++]=Yn,Lr[Ir++]=ds,Hn=e.id,Yn=e.overflow,ds=t),t=Ng(t,a.children),t.flags|=4096,t)}function fv(e,t,r){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),If(e.return,t,r)}function km(e,t,r,a,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=a,o.tail=r,o.tailMode=s)}function $b(e,t,r){var a=t.pendingProps,s=a.revealOrder,o=a.tail;if(rr(e,t,a.children,r),a=dt.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&fv(e,r,t);else if(e.tag===19)fv(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(et(dt,a),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&lu(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),km(t,!1,s,r,o);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&lu(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}km(t,!0,r,null,o);break;case"together":km(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Nc(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ta(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),fs|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(te(153));if(t.child!==null){for(e=t.child,r=Ta(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Ta(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function pk(e,t,r){switch(t.tag){case 3:Lb(t),ao();break;case 5:cb(t);break;case 1:fr(t.type)&&tu(t);break;case 4:gg(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,s=t.memoizedProps.value;et(au,a._currentValue),a._currentValue=s;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(et(dt,dt.current&1),t.flags|=128,null):r&t.child.childLanes?Ib(e,t,r):(et(dt,dt.current&1),e=ta(e,t,r),e!==null?e.sibling:null);et(dt,dt.current&1);break;case 19:if(a=(r&t.childLanes)!==0,e.flags&128){if(a)return $b(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),et(dt,dt.current),a)break;return null;case 22:case 23:return t.lanes=0,Mb(e,t,r)}return ta(e,t,r)}var Fb,Wf,jb,Bb;Fb=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Wf=function(){};jb=function(e,t,r,a){var s=e.memoizedProps;if(s!==a){e=t.stateNode,es(Dn.current);var o=null;switch(r){case"input":s=mf(e,s),a=mf(e,a),o=[];break;case"select":s=ft({},s,{value:void 0}),a=ft({},a,{value:void 0}),o=[];break;case"textarea":s=gf(e,s),a=gf(e,a),o=[];break;default:typeof s.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=Zc)}vf(r,a);var l;r=null;for(d in s)if(!a.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var i=s[d];for(l in i)i.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Cl.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in a){var c=a[d];if(i=s!=null?s[d]:void 0,a.hasOwnProperty(d)&&c!==i&&(c!=null||i!=null))if(d==="style")if(i){for(l in i)!i.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in c)c.hasOwnProperty(l)&&i[l]!==c[l]&&(r||(r={}),r[l]=c[l])}else r||(o||(o=[]),o.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,i=i?i.__html:void 0,c!=null&&i!==c&&(o=o||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Cl.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&rt("scroll",e),o||i===c||(o=[])):(o=o||[]).push(d,c))}r&&(o=o||[]).push("style",r);var d=o;(t.updateQueue=d)&&(t.flags|=4)}};Bb=function(e,t,r,a){r!==a&&(t.flags|=4)};function Go(e,t){if(!ct)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Wt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,a=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,a|=s.subtreeFlags&14680064,a|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,a|=s.subtreeFlags,a|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=a,e.childLanes=r,t}function gk(e,t,r){var a=t.pendingProps;switch(ig(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(t),null;case 1:return fr(t.type)&&eu(),Wt(t),null;case 3:return a=t.stateNode,oo(),st(mr),st(Kt),vg(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Ki(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,an!==null&&(Jf(an),an=null))),Wf(e,t),Wt(t),null;case 5:hg(t);var s=es($l.current);if(r=t.type,e!==null&&t.stateNode!=null)jb(e,t,r,a,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(te(166));return Wt(t),null}if(e=es(Dn.current),Ki(t)){a=t.stateNode,r=t.type;var o=t.memoizedProps;switch(a[wn]=t,a[Ll]=o,e=(t.mode&1)!==0,r){case"dialog":rt("cancel",a),rt("close",a);break;case"iframe":case"object":case"embed":rt("load",a);break;case"video":case"audio":for(s=0;s<ol.length;s++)rt(ol[s],a);break;case"source":rt("error",a);break;case"img":case"image":case"link":rt("error",a),rt("load",a);break;case"details":rt("toggle",a);break;case"input":w0(a,o),rt("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!o.multiple},rt("invalid",a);break;case"textarea":S0(a,o),rt("invalid",a)}vf(r,o),s=null;for(var l in o)if(o.hasOwnProperty(l)){var i=o[l];l==="children"?typeof i=="string"?a.textContent!==i&&(o.suppressHydrationWarning!==!0&&Gi(a.textContent,i,e),s=["children",i]):typeof i=="number"&&a.textContent!==""+i&&(o.suppressHydrationWarning!==!0&&Gi(a.textContent,i,e),s=["children",""+i]):Cl.hasOwnProperty(l)&&i!=null&&l==="onScroll"&&rt("scroll",a)}switch(r){case"input":Bi(a),N0(a,o,!0);break;case"textarea":Bi(a),C0(a);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(a.onclick=Zc)}a=s,t.updateQueue=a,a!==null&&(t.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=px(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=l.createElement(r,{is:a.is}):(e=l.createElement(r),r==="select"&&(l=e,a.multiple?l.multiple=!0:a.size&&(l.size=a.size))):e=l.createElementNS(e,r),e[wn]=t,e[Ll]=a,Fb(e,t,!1,!1),t.stateNode=e;e:{switch(l=yf(r,a),r){case"dialog":rt("cancel",e),rt("close",e),s=a;break;case"iframe":case"object":case"embed":rt("load",e),s=a;break;case"video":case"audio":for(s=0;s<ol.length;s++)rt(ol[s],e);s=a;break;case"source":rt("error",e),s=a;break;case"img":case"image":case"link":rt("error",e),rt("load",e),s=a;break;case"details":rt("toggle",e),s=a;break;case"input":w0(e,a),s=mf(e,a),rt("invalid",e);break;case"option":s=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},s=ft({},a,{value:void 0}),rt("invalid",e);break;case"textarea":S0(e,a),s=gf(e,a),rt("invalid",e);break;default:s=a}vf(r,s),i=s;for(o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="style"?vx(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&gx(e,c)):o==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&kl(e,c):typeof c=="number"&&kl(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Cl.hasOwnProperty(o)?c!=null&&o==="onScroll"&&rt("scroll",e):c!=null&&qp(e,o,c,l))}switch(r){case"input":Bi(e),N0(e,a,!1);break;case"textarea":Bi(e),C0(e);break;case"option":a.value!=null&&e.setAttribute("value",""+Ma(a.value));break;case"select":e.multiple=!!a.multiple,o=a.value,o!=null?Ws(e,!!a.multiple,o,!1):a.defaultValue!=null&&Ws(e,!!a.multiple,a.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Zc)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Wt(t),null;case 6:if(e&&t.stateNode!=null)Bb(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(te(166));if(r=es($l.current),es(Dn.current),Ki(t)){if(a=t.stateNode,r=t.memoizedProps,a[wn]=t,(o=a.nodeValue!==r)&&(e=Nr,e!==null))switch(e.tag){case 3:Gi(a.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Gi(a.nodeValue,r,(e.mode&1)!==0)}o&&(t.flags|=4)}else a=(r.nodeType===9?r:r.ownerDocument).createTextNode(a),a[wn]=t,t.stateNode=a}return Wt(t),null;case 13:if(st(dt),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ct&&wr!==null&&t.mode&1&&!(t.flags&128))ab(),ao(),t.flags|=98560,o=!1;else if(o=Ki(t),a!==null&&a.dehydrated!==null){if(e===null){if(!o)throw Error(te(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(te(317));o[wn]=t}else ao(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Wt(t),o=!1}else an!==null&&(Jf(an),an=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||dt.current&1?Ct===0&&(Ct=3):Tg())),t.updateQueue!==null&&(t.flags|=4),Wt(t),null);case 4:return oo(),Wf(e,t),e===null&&Ml(t.stateNode.containerInfo),Wt(t),null;case 10:return mg(t.type._context),Wt(t),null;case 17:return fr(t.type)&&eu(),Wt(t),null;case 19:if(st(dt),o=t.memoizedState,o===null)return Wt(t),null;if(a=(t.flags&128)!==0,l=o.rendering,l===null)if(a)Go(o,!1);else{if(Ct!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=lu(e),l!==null){for(t.flags|=128,Go(o,!1),a=l.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=r,r=t.child;r!==null;)o=r,e=a,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return et(dt,dt.current&1|2),t.child}e=e.sibling}o.tail!==null&&Et()>io&&(t.flags|=128,a=!0,Go(o,!1),t.lanes=4194304)}else{if(!a)if(e=lu(l),e!==null){if(t.flags|=128,a=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Go(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!ct)return Wt(t),null}else 2*Et()-o.renderingStartTime>io&&r!==1073741824&&(t.flags|=128,a=!0,Go(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(r=o.last,r!==null?r.sibling=l:t.child=l,o.last=l)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Et(),t.sibling=null,r=dt.current,et(dt,a?r&1|2:r&1),t):(Wt(t),null);case 22:case 23:return Ag(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?br&1073741824&&(Wt(t),t.subtreeFlags&6&&(t.flags|=8192)):Wt(t),null;case 24:return null;case 25:return null}throw Error(te(156,t.tag))}function hk(e,t){switch(ig(t),t.tag){case 1:return fr(t.type)&&eu(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return oo(),st(mr),st(Kt),vg(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return hg(t),null;case 13:if(st(dt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(te(340));ao()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return st(dt),null;case 4:return oo(),null;case 10:return mg(t.type._context),null;case 22:case 23:return Ag(),null;case 24:return null;default:return null}}var Ji=!1,Yt=!1,vk=typeof WeakSet=="function"?WeakSet:Set,me=null;function zs(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(a){pt(e,t,a)}else r.current=null}function Hf(e,t,r){try{r()}catch(a){pt(e,t,a)}}var pv=!1;function yk(e,t){if(Af=Xc,e=Hx(),og(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var s=a.anchorOffset,o=a.focusNode;a=a.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var l=0,i=-1,c=-1,d=0,u=0,m=e,f=null;t:for(;;){for(var x;m!==r||s!==0&&m.nodeType!==3||(i=l+s),m!==o||a!==0&&m.nodeType!==3||(c=l+a),m.nodeType===3&&(l+=m.nodeValue.length),(x=m.firstChild)!==null;)f=m,m=x;for(;;){if(m===e)break t;if(f===r&&++d===s&&(i=l),f===o&&++u===a&&(c=l),(x=m.nextSibling)!==null)break;m=f,f=m.parentNode}m=x}r=i===-1||c===-1?null:{start:i,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Tf={focusedElem:e,selectionRange:r},Xc=!1,me=t;me!==null;)if(t=me,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,me=e;else for(;me!==null;){t=me;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var y=b.memoizedProps,v=b.memoizedState,p=t.stateNode,h=p.getSnapshotBeforeUpdate(t.elementType===t.type?y:tn(t.type,y),v);p.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var E=t.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(te(163))}}catch(w){pt(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,me=e;break}me=t.return}return b=pv,pv=!1,b}function hl(e,t,r){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var s=a=a.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&Hf(t,r,o)}s=s.next}while(s!==a)}}function Gu(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var a=r.create;r.destroy=a()}r=r.next}while(r!==t)}}function Yf(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function zb(e){var t=e.alternate;t!==null&&(e.alternate=null,zb(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[wn],delete t[Ll],delete t[Rf],delete t[ek],delete t[tk])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ub(e){return e.tag===5||e.tag===3||e.tag===4}function gv(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ub(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function qf(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Zc));else if(a!==4&&(e=e.child,e!==null))for(qf(e,t,r),e=e.sibling;e!==null;)qf(e,t,r),e=e.sibling}function Gf(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Gf(e,t,r),e=e.sibling;e!==null;)Gf(e,t,r),e=e.sibling}var Ft=null,rn=!1;function ca(e,t,r){for(r=r.child;r!==null;)Vb(e,t,r),r=r.sibling}function Vb(e,t,r){if(kn&&typeof kn.onCommitFiberUnmount=="function")try{kn.onCommitFiberUnmount(Bu,r)}catch{}switch(r.tag){case 5:Yt||zs(r,t);case 6:var a=Ft,s=rn;Ft=null,ca(e,t,r),Ft=a,rn=s,Ft!==null&&(rn?(e=Ft,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ft.removeChild(r.stateNode));break;case 18:Ft!==null&&(rn?(e=Ft,r=r.stateNode,e.nodeType===8?Em(e.parentNode,r):e.nodeType===1&&Em(e,r),_l(e)):Em(Ft,r.stateNode));break;case 4:a=Ft,s=rn,Ft=r.stateNode.containerInfo,rn=!0,ca(e,t,r),Ft=a,rn=s;break;case 0:case 11:case 14:case 15:if(!Yt&&(a=r.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){s=a=a.next;do{var o=s,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&Hf(r,t,l),s=s.next}while(s!==a)}ca(e,t,r);break;case 1:if(!Yt&&(zs(r,t),a=r.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(i){pt(r,t,i)}ca(e,t,r);break;case 21:ca(e,t,r);break;case 22:r.mode&1?(Yt=(a=Yt)||r.memoizedState!==null,ca(e,t,r),Yt=a):ca(e,t,r);break;default:ca(e,t,r)}}function hv(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new vk),t.forEach(function(a){var s=Dk.bind(null,e,a);r.has(a)||(r.add(a),a.then(s,s))})}}function en(e,t){var r=t.deletions;if(r!==null)for(var a=0;a<r.length;a++){var s=r[a];try{var o=e,l=t,i=l;e:for(;i!==null;){switch(i.tag){case 5:Ft=i.stateNode,rn=!1;break e;case 3:Ft=i.stateNode.containerInfo,rn=!0;break e;case 4:Ft=i.stateNode.containerInfo,rn=!0;break e}i=i.return}if(Ft===null)throw Error(te(160));Vb(o,l,s),Ft=null,rn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){pt(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Wb(t,e),t=t.sibling}function Wb(e,t){var r=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(en(t,e),yn(e),a&4){try{hl(3,e,e.return),Gu(3,e)}catch(y){pt(e,e.return,y)}try{hl(5,e,e.return)}catch(y){pt(e,e.return,y)}}break;case 1:en(t,e),yn(e),a&512&&r!==null&&zs(r,r.return);break;case 5:if(en(t,e),yn(e),a&512&&r!==null&&zs(r,r.return),e.flags&32){var s=e.stateNode;try{kl(s,"")}catch(y){pt(e,e.return,y)}}if(a&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,l=r!==null?r.memoizedProps:o,i=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{i==="input"&&o.type==="radio"&&o.name!=null&&mx(s,o),yf(i,l);var d=yf(i,o);for(l=0;l<c.length;l+=2){var u=c[l],m=c[l+1];u==="style"?vx(s,m):u==="dangerouslySetInnerHTML"?gx(s,m):u==="children"?kl(s,m):qp(s,u,m,d)}switch(i){case"input":ff(s,o);break;case"textarea":fx(s,o);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var x=o.value;x!=null?Ws(s,!!o.multiple,x,!1):f!==!!o.multiple&&(o.defaultValue!=null?Ws(s,!!o.multiple,o.defaultValue,!0):Ws(s,!!o.multiple,o.multiple?[]:"",!1))}s[Ll]=o}catch(y){pt(e,e.return,y)}}break;case 6:if(en(t,e),yn(e),a&4){if(e.stateNode===null)throw Error(te(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(y){pt(e,e.return,y)}}break;case 3:if(en(t,e),yn(e),a&4&&r!==null&&r.memoizedState.isDehydrated)try{_l(t.containerInfo)}catch(y){pt(e,e.return,y)}break;case 4:en(t,e),yn(e);break;case 13:en(t,e),yn(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(kg=Et())),a&4&&hv(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(Yt=(d=Yt)||u,en(t,e),Yt=d):en(t,e),yn(e),a&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(me=e,u=e.child;u!==null;){for(m=me=u;me!==null;){switch(f=me,x=f.child,f.tag){case 0:case 11:case 14:case 15:hl(4,f,f.return);break;case 1:zs(f,f.return);var b=f.stateNode;if(typeof b.componentWillUnmount=="function"){a=f,r=f.return;try{t=a,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(y){pt(a,r,y)}}break;case 5:zs(f,f.return);break;case 22:if(f.memoizedState!==null){yv(m);continue}}x!==null?(x.return=f,me=x):yv(m)}u=u.sibling}e:for(u=null,m=e;;){if(m.tag===5){if(u===null){u=m;try{s=m.stateNode,d?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(i=m.stateNode,c=m.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,i.style.display=hx("display",l))}catch(y){pt(e,e.return,y)}}}else if(m.tag===6){if(u===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(y){pt(e,e.return,y)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:en(t,e),yn(e),a&4&&hv(e);break;case 21:break;default:en(t,e),yn(e)}}function yn(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Ub(r)){var a=r;break e}r=r.return}throw Error(te(160))}switch(a.tag){case 5:var s=a.stateNode;a.flags&32&&(kl(s,""),a.flags&=-33);var o=gv(e);Gf(e,o,s);break;case 3:case 4:var l=a.stateNode.containerInfo,i=gv(e);qf(e,i,l);break;default:throw Error(te(161))}}catch(c){pt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ek(e,t,r){me=e,Hb(e)}function Hb(e,t,r){for(var a=(e.mode&1)!==0;me!==null;){var s=me,o=s.child;if(s.tag===22&&a){var l=s.memoizedState!==null||Ji;if(!l){var i=s.alternate,c=i!==null&&i.memoizedState!==null||Yt;i=Ji;var d=Yt;if(Ji=l,(Yt=c)&&!d)for(me=s;me!==null;)l=me,c=l.child,l.tag===22&&l.memoizedState!==null?Ev(s):c!==null?(c.return=l,me=c):Ev(s);for(;o!==null;)me=o,Hb(o),o=o.sibling;me=s,Ji=i,Yt=d}vv(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,me=o):vv(e)}}function vv(e){for(;me!==null;){var t=me;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Yt||Gu(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!Yt)if(r===null)a.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:tn(t.type,r.memoizedProps);a.componentDidUpdate(s,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&tv(t,o,a);break;case 3:var l=t.updateQueue;if(l!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}tv(t,l,r)}break;case 5:var i=t.stateNode;if(r===null&&t.flags&4){r=i;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var m=u.dehydrated;m!==null&&_l(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(te(163))}Yt||t.flags&512&&Yf(t)}catch(f){pt(t,t.return,f)}}if(t===e){me=null;break}if(r=t.sibling,r!==null){r.return=t.return,me=r;break}me=t.return}}function yv(e){for(;me!==null;){var t=me;if(t===e){me=null;break}var r=t.sibling;if(r!==null){r.return=t.return,me=r;break}me=t.return}}function Ev(e){for(;me!==null;){var t=me;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Gu(4,t)}catch(c){pt(t,r,c)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var s=t.return;try{a.componentDidMount()}catch(c){pt(t,s,c)}}var o=t.return;try{Yf(t)}catch(c){pt(t,o,c)}break;case 5:var l=t.return;try{Yf(t)}catch(c){pt(t,l,c)}}}catch(c){pt(t,t.return,c)}if(t===e){me=null;break}var i=t.sibling;if(i!==null){i.return=t.return,me=i;break}me=t.return}}var xk=Math.ceil,uu=sa.ReactCurrentDispatcher,Sg=sa.ReactCurrentOwner,Ur=sa.ReactCurrentBatchConfig,Ue=0,Mt=null,bt=null,Bt=0,br=0,Us=ja(0),Ct=0,zl=null,fs=0,Ku=0,Cg=0,vl=null,ur=null,kg=0,io=1/0,Un=null,du=!1,Kf=null,Da=null,Zi=!1,ya=null,mu=0,yl=0,Xf=null,Sc=-1,Cc=0;function ar(){return Ue&6?Et():Sc!==-1?Sc:Sc=Et()}function Aa(e){return e.mode&1?Ue&2&&Bt!==0?Bt&-Bt:nk.transition!==null?(Cc===0&&(Cc=Tx()),Cc):(e=Ke,e!==0||(e=window.event,e=e===void 0?16:Ix(e.type)),e):1}function cn(e,t,r,a){if(50<yl)throw yl=0,Xf=null,Error(te(185));mi(e,r,a),(!(Ue&2)||e!==Mt)&&(e===Mt&&(!(Ue&2)&&(Ku|=r),Ct===4&&ha(e,Bt)),pr(e,a),r===1&&Ue===0&&!(t.mode&1)&&(io=Et()+500,Hu&&Ba()))}function pr(e,t){var r=e.callbackNode;nC(e,t);var a=Kc(e,e===Mt?Bt:0);if(a===0)r!==null&&A0(r),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(r!=null&&A0(r),t===1)e.tag===0?rk(xv.bind(null,e)):tb(xv.bind(null,e)),JC(function(){!(Ue&6)&&Ba()}),r=null;else{switch(_x(a)){case 1:r=Jp;break;case 4:r=Dx;break;case 16:r=Gc;break;case 536870912:r=Ax;break;default:r=Gc}r=Zb(r,Yb.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Yb(e,t){if(Sc=-1,Cc=0,Ue&6)throw Error(te(327));var r=e.callbackNode;if(Ks()&&e.callbackNode!==r)return null;var a=Kc(e,e===Mt?Bt:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=fu(e,a);else{t=a;var s=Ue;Ue|=2;var o=Gb();(Mt!==e||Bt!==t)&&(Un=null,io=Et()+500,as(e,t));do try{Nk();break}catch(i){qb(e,i)}while(!0);dg(),uu.current=o,Ue=s,bt!==null?t=0:(Mt=null,Bt=0,t=Ct)}if(t!==0){if(t===2&&(s=Nf(e),s!==0&&(a=s,t=Qf(e,s))),t===1)throw r=zl,as(e,0),ha(e,a),pr(e,Et()),r;if(t===6)ha(e,a);else{if(s=e.current.alternate,!(a&30)&&!bk(s)&&(t=fu(e,a),t===2&&(o=Nf(e),o!==0&&(a=o,t=Qf(e,o))),t===1))throw r=zl,as(e,0),ha(e,a),pr(e,Et()),r;switch(e.finishedWork=s,e.finishedLanes=a,t){case 0:case 1:throw Error(te(345));case 2:Ka(e,ur,Un);break;case 3:if(ha(e,a),(a&130023424)===a&&(t=kg+500-Et(),10<t)){if(Kc(e,0)!==0)break;if(s=e.suspendedLanes,(s&a)!==a){ar(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Of(Ka.bind(null,e,ur,Un),t);break}Ka(e,ur,Un);break;case 4:if(ha(e,a),(a&4194240)===a)break;for(t=e.eventTimes,s=-1;0<a;){var l=31-ln(a);o=1<<l,l=t[l],l>s&&(s=l),a&=~o}if(a=s,a=Et()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*xk(a/1960))-a,10<a){e.timeoutHandle=Of(Ka.bind(null,e,ur,Un),a);break}Ka(e,ur,Un);break;case 5:Ka(e,ur,Un);break;default:throw Error(te(329))}}}return pr(e,Et()),e.callbackNode===r?Yb.bind(null,e):null}function Qf(e,t){var r=vl;return e.current.memoizedState.isDehydrated&&(as(e,t).flags|=256),e=fu(e,t),e!==2&&(t=ur,ur=r,t!==null&&Jf(t)),e}function Jf(e){ur===null?ur=e:ur.push.apply(ur,e)}function bk(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var a=0;a<r.length;a++){var s=r[a],o=s.getSnapshot;s=s.value;try{if(!un(o(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ha(e,t){for(t&=~Cg,t&=~Ku,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ln(t),a=1<<r;e[r]=-1,t&=~a}}function xv(e){if(Ue&6)throw Error(te(327));Ks();var t=Kc(e,0);if(!(t&1))return pr(e,Et()),null;var r=fu(e,t);if(e.tag!==0&&r===2){var a=Nf(e);a!==0&&(t=a,r=Qf(e,a))}if(r===1)throw r=zl,as(e,0),ha(e,t),pr(e,Et()),r;if(r===6)throw Error(te(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ka(e,ur,Un),pr(e,Et()),null}function Dg(e,t){var r=Ue;Ue|=1;try{return e(t)}finally{Ue=r,Ue===0&&(io=Et()+500,Hu&&Ba())}}function ps(e){ya!==null&&ya.tag===0&&!(Ue&6)&&Ks();var t=Ue;Ue|=1;var r=Ur.transition,a=Ke;try{if(Ur.transition=null,Ke=1,e)return e()}finally{Ke=a,Ur.transition=r,Ue=t,!(Ue&6)&&Ba()}}function Ag(){br=Us.current,st(Us)}function as(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,QC(r)),bt!==null)for(r=bt.return;r!==null;){var a=r;switch(ig(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&eu();break;case 3:oo(),st(mr),st(Kt),vg();break;case 5:hg(a);break;case 4:oo();break;case 13:st(dt);break;case 19:st(dt);break;case 10:mg(a.type._context);break;case 22:case 23:Ag()}r=r.return}if(Mt=e,bt=e=Ta(e.current,null),Bt=br=t,Ct=0,zl=null,Cg=Ku=fs=0,ur=vl=null,Za!==null){for(t=0;t<Za.length;t++)if(r=Za[t],a=r.interleaved,a!==null){r.interleaved=null;var s=a.next,o=r.pending;if(o!==null){var l=o.next;o.next=s,a.next=l}r.pending=a}Za=null}return e}function qb(e,t){do{var r=bt;try{if(dg(),bc.current=cu,iu){for(var a=mt.memoizedState;a!==null;){var s=a.queue;s!==null&&(s.pending=null),a=a.next}iu=!1}if(ms=0,Ot=Nt=mt=null,gl=!1,Fl=0,Sg.current=null,r===null||r.return===null){Ct=1,zl=t,bt=null;break}e:{var o=e,l=r.return,i=r,c=t;if(t=Bt,i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=i,m=u.tag;if(!(u.mode&1)&&(m===0||m===11||m===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var x=lv(l);if(x!==null){x.flags&=-257,iv(x,l,i,o,t),x.mode&1&&ov(o,d,t),t=x,c=d;var b=t.updateQueue;if(b===null){var y=new Set;y.add(c),t.updateQueue=y}else b.add(c);break e}else{if(!(t&1)){ov(o,d,t),Tg();break e}c=Error(te(426))}}else if(ct&&i.mode&1){var v=lv(l);if(v!==null){!(v.flags&65536)&&(v.flags|=256),iv(v,l,i,o,t),cg(lo(c,i));break e}}o=c=lo(c,i),Ct!==4&&(Ct=2),vl===null?vl=[o]:vl.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var p=_b(o,c,t);ev(o,p);break e;case 1:i=c;var h=o.type,E=o.stateNode;if(!(o.flags&128)&&(typeof h.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Da===null||!Da.has(E)))){o.flags|=65536,t&=-t,o.lanes|=t;var w=Ob(o,i,t);ev(o,w);break e}}o=o.return}while(o!==null)}Xb(r)}catch(N){t=N,bt===r&&r!==null&&(bt=r=r.return);continue}break}while(!0)}function Gb(){var e=uu.current;return uu.current=cu,e===null?cu:e}function Tg(){(Ct===0||Ct===3||Ct===2)&&(Ct=4),Mt===null||!(fs&268435455)&&!(Ku&268435455)||ha(Mt,Bt)}function fu(e,t){var r=Ue;Ue|=2;var a=Gb();(Mt!==e||Bt!==t)&&(Un=null,as(e,t));do try{wk();break}catch(s){qb(e,s)}while(!0);if(dg(),Ue=r,uu.current=a,bt!==null)throw Error(te(261));return Mt=null,Bt=0,Ct}function wk(){for(;bt!==null;)Kb(bt)}function Nk(){for(;bt!==null&&!GS();)Kb(bt)}function Kb(e){var t=Jb(e.alternate,e,br);e.memoizedProps=e.pendingProps,t===null?Xb(e):bt=t,Sg.current=null}function Xb(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=hk(r,t),r!==null){r.flags&=32767,bt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ct=6,bt=null;return}}else if(r=gk(r,t,br),r!==null){bt=r;return}if(t=t.sibling,t!==null){bt=t;return}bt=t=e}while(t!==null);Ct===0&&(Ct=5)}function Ka(e,t,r){var a=Ke,s=Ur.transition;try{Ur.transition=null,Ke=1,Sk(e,t,r,a)}finally{Ur.transition=s,Ke=a}return null}function Sk(e,t,r,a){do Ks();while(ya!==null);if(Ue&6)throw Error(te(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(te(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(aC(e,o),e===Mt&&(bt=Mt=null,Bt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Zi||(Zi=!0,Zb(Gc,function(){return Ks(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=Ur.transition,Ur.transition=null;var l=Ke;Ke=1;var i=Ue;Ue|=4,Sg.current=null,yk(e,r),Wb(r,e),WC(Tf),Xc=!!Af,Tf=Af=null,e.current=r,Ek(r),KS(),Ue=i,Ke=l,Ur.transition=o}else e.current=r;if(Zi&&(Zi=!1,ya=e,mu=s),o=e.pendingLanes,o===0&&(Da=null),JS(r.stateNode),pr(e,Et()),t!==null)for(a=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],a(s.value,{componentStack:s.stack,digest:s.digest});if(du)throw du=!1,e=Kf,Kf=null,e;return mu&1&&e.tag!==0&&Ks(),o=e.pendingLanes,o&1?e===Xf?yl++:(yl=0,Xf=e):yl=0,Ba(),null}function Ks(){if(ya!==null){var e=_x(mu),t=Ur.transition,r=Ke;try{if(Ur.transition=null,Ke=16>e?16:e,ya===null)var a=!1;else{if(e=ya,ya=null,mu=0,Ue&6)throw Error(te(331));var s=Ue;for(Ue|=4,me=e.current;me!==null;){var o=me,l=o.child;if(me.flags&16){var i=o.deletions;if(i!==null){for(var c=0;c<i.length;c++){var d=i[c];for(me=d;me!==null;){var u=me;switch(u.tag){case 0:case 11:case 15:hl(8,u,o)}var m=u.child;if(m!==null)m.return=u,me=m;else for(;me!==null;){u=me;var f=u.sibling,x=u.return;if(zb(u),u===d){me=null;break}if(f!==null){f.return=x,me=f;break}me=x}}}var b=o.alternate;if(b!==null){var y=b.child;if(y!==null){b.child=null;do{var v=y.sibling;y.sibling=null,y=v}while(y!==null)}}me=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,me=l;else e:for(;me!==null;){if(o=me,o.flags&2048)switch(o.tag){case 0:case 11:case 15:hl(9,o,o.return)}var p=o.sibling;if(p!==null){p.return=o.return,me=p;break e}me=o.return}}var h=e.current;for(me=h;me!==null;){l=me;var E=l.child;if(l.subtreeFlags&2064&&E!==null)E.return=l,me=E;else e:for(l=h;me!==null;){if(i=me,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:Gu(9,i)}}catch(N){pt(i,i.return,N)}if(i===l){me=null;break e}var w=i.sibling;if(w!==null){w.return=i.return,me=w;break e}me=i.return}}if(Ue=s,Ba(),kn&&typeof kn.onPostCommitFiberRoot=="function")try{kn.onPostCommitFiberRoot(Bu,e)}catch{}a=!0}return a}finally{Ke=r,Ur.transition=t}}return!1}function bv(e,t,r){t=lo(r,t),t=_b(e,t,1),e=ka(e,t,1),t=ar(),e!==null&&(mi(e,1,t),pr(e,t))}function pt(e,t,r){if(e.tag===3)bv(e,e,r);else for(;t!==null;){if(t.tag===3){bv(t,e,r);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Da===null||!Da.has(a))){e=lo(r,e),e=Ob(t,e,1),t=ka(t,e,1),e=ar(),t!==null&&(mi(t,1,e),pr(t,e));break}}t=t.return}}function Ck(e,t,r){var a=e.pingCache;a!==null&&a.delete(t),t=ar(),e.pingedLanes|=e.suspendedLanes&r,Mt===e&&(Bt&r)===r&&(Ct===4||Ct===3&&(Bt&130023424)===Bt&&500>Et()-kg?as(e,0):Cg|=r),pr(e,t)}function Qb(e,t){t===0&&(e.mode&1?(t=Vi,Vi<<=1,!(Vi&130023424)&&(Vi=4194304)):t=1);var r=ar();e=ea(e,t),e!==null&&(mi(e,t,r),pr(e,r))}function kk(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Qb(e,r)}function Dk(e,t){var r=0;switch(e.tag){case 13:var a=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(te(314))}a!==null&&a.delete(t),Qb(e,r)}var Jb;Jb=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||mr.current)dr=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return dr=!1,pk(e,t,r);dr=!!(e.flags&131072)}else dr=!1,ct&&t.flags&1048576&&rb(t,nu,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Nc(e,t),e=t.pendingProps;var s=no(t,Kt.current);Gs(t,r),s=Eg(null,t,a,e,s,r);var o=xg();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,fr(a)?(o=!0,tu(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,pg(t),s.updater=qu,t.stateNode=s,s._reactInternals=t,Ff(t,a,e,r),t=zf(null,t,a,!0,o,r)):(t.tag=0,ct&&o&&lg(t),rr(null,t,s,r),t=t.child),t;case 16:a=t.elementType;e:{switch(Nc(e,t),e=t.pendingProps,s=a._init,a=s(a._payload),t.type=a,s=t.tag=Tk(a),e=tn(a,e),s){case 0:t=Bf(null,t,a,e,r);break e;case 1:t=dv(null,t,a,e,r);break e;case 11:t=cv(null,t,a,e,r);break e;case 14:t=uv(null,t,a,tn(a.type,e),r);break e}throw Error(te(306,a,""))}return t;case 0:return a=t.type,s=t.pendingProps,s=t.elementType===a?s:tn(a,s),Bf(e,t,a,s,r);case 1:return a=t.type,s=t.pendingProps,s=t.elementType===a?s:tn(a,s),dv(e,t,a,s,r);case 3:e:{if(Lb(t),e===null)throw Error(te(387));a=t.pendingProps,o=t.memoizedState,s=o.element,ib(e,t),ou(t,a,null,r);var l=t.memoizedState;if(a=l.element,o.isDehydrated)if(o={element:a,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=lo(Error(te(423)),t),t=mv(e,t,a,r,s);break e}else if(a!==s){s=lo(Error(te(424)),t),t=mv(e,t,a,r,s);break e}else for(wr=Ca(t.stateNode.containerInfo.firstChild),Nr=t,ct=!0,an=null,r=ob(t,null,a,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ao(),a===s){t=ta(e,t,r);break e}rr(e,t,a,r)}t=t.child}return t;case 5:return cb(t),e===null&&Lf(t),a=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,l=s.children,_f(a,s)?l=null:o!==null&&_f(a,o)&&(t.flags|=32),Pb(e,t),rr(e,t,l,r),t.child;case 6:return e===null&&Lf(t),null;case 13:return Ib(e,t,r);case 4:return gg(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=so(t,null,a,r):rr(e,t,a,r),t.child;case 11:return a=t.type,s=t.pendingProps,s=t.elementType===a?s:tn(a,s),cv(e,t,a,s,r);case 7:return rr(e,t,t.pendingProps,r),t.child;case 8:return rr(e,t,t.pendingProps.children,r),t.child;case 12:return rr(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(a=t.type._context,s=t.pendingProps,o=t.memoizedProps,l=s.value,et(au,a._currentValue),a._currentValue=l,o!==null)if(un(o.value,l)){if(o.children===s.children&&!mr.current){t=ta(e,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var i=o.dependencies;if(i!==null){l=o.child;for(var c=i.firstContext;c!==null;){if(c.context===a){if(o.tag===1){c=Kn(-1,r&-r),c.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),If(o.return,r,t),i.lanes|=r;break}c=c.next}}else if(o.tag===10)l=o.type===t.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(te(341));l.lanes|=r,i=l.alternate,i!==null&&(i.lanes|=r),If(l,r,t),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===t){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}rr(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,a=t.pendingProps.children,Gs(t,r),s=Vr(s),a=a(s),t.flags|=1,rr(e,t,a,r),t.child;case 14:return a=t.type,s=tn(a,t.pendingProps),s=tn(a.type,s),uv(e,t,a,s,r);case 15:return Rb(e,t,t.type,t.pendingProps,r);case 17:return a=t.type,s=t.pendingProps,s=t.elementType===a?s:tn(a,s),Nc(e,t),t.tag=1,fr(a)?(e=!0,tu(t)):e=!1,Gs(t,r),Tb(t,a,s),Ff(t,a,s,r),zf(null,t,a,!0,e,r);case 19:return $b(e,t,r);case 22:return Mb(e,t,r)}throw Error(te(156,t.tag))};function Zb(e,t){return kx(e,t)}function Ak(e,t,r,a){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zr(e,t,r,a){return new Ak(e,t,r,a)}function _g(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Tk(e){if(typeof e=="function")return _g(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Kp)return 11;if(e===Xp)return 14}return 2}function Ta(e,t){var r=e.alternate;return r===null?(r=zr(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function kc(e,t,r,a,s,o){var l=2;if(a=e,typeof e=="function")_g(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Rs:return ss(r.children,s,o,t);case Gp:l=8,s|=8;break;case lf:return e=zr(12,r,t,s|2),e.elementType=lf,e.lanes=o,e;case cf:return e=zr(13,r,t,s),e.elementType=cf,e.lanes=o,e;case uf:return e=zr(19,r,t,s),e.elementType=uf,e.lanes=o,e;case cx:return Xu(r,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case lx:l=10;break e;case ix:l=9;break e;case Kp:l=11;break e;case Xp:l=14;break e;case ma:l=16,a=null;break e}throw Error(te(130,e==null?e:typeof e,""))}return t=zr(l,r,t,s),t.elementType=e,t.type=a,t.lanes=o,t}function ss(e,t,r,a){return e=zr(7,e,a,t),e.lanes=r,e}function Xu(e,t,r,a){return e=zr(22,e,a,t),e.elementType=cx,e.lanes=r,e.stateNode={isHidden:!1},e}function Dm(e,t,r){return e=zr(6,e,null,t),e.lanes=r,e}function Am(e,t,r){return t=zr(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function _k(e,t,r,a,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=im(0),this.expirationTimes=im(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=im(0),this.identifierPrefix=a,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Og(e,t,r,a,s,o,l,i,c){return e=new _k(e,t,r,i,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=zr(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},pg(o),e}function Ok(e,t,r){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Os,key:a==null?null:""+a,children:e,containerInfo:t,implementation:r}}function ew(e){if(!e)return Pa;e=e._reactInternals;e:{if(Ss(e)!==e||e.tag!==1)throw Error(te(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(fr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(te(171))}if(e.tag===1){var r=e.type;if(fr(r))return eb(e,r,t)}return t}function tw(e,t,r,a,s,o,l,i,c){return e=Og(r,a,!0,e,s,o,l,i,c),e.context=ew(null),r=e.current,a=ar(),s=Aa(r),o=Kn(a,s),o.callback=t??null,ka(r,o,s),e.current.lanes=s,mi(e,s,a),pr(e,a),e}function Qu(e,t,r,a){var s=t.current,o=ar(),l=Aa(s);return r=ew(r),t.context===null?t.context=r:t.pendingContext=r,t=Kn(o,l),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=ka(s,t,l),e!==null&&(cn(e,s,l,o),xc(e,s,l)),l}function pu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function wv(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Rg(e,t){wv(e,t),(e=e.alternate)&&wv(e,t)}function Rk(){return null}var rw=typeof reportError=="function"?reportError:function(e){console.error(e)};function Mg(e){this._internalRoot=e}Ju.prototype.render=Mg.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(te(409));Qu(e,t,null,null)};Ju.prototype.unmount=Mg.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ps(function(){Qu(null,e,null,null)}),t[Zn]=null}};function Ju(e){this._internalRoot=e}Ju.prototype.unstable_scheduleHydration=function(e){if(e){var t=Mx();e={blockedOn:null,target:e,priority:t};for(var r=0;r<ga.length&&t!==0&&t<ga[r].priority;r++);ga.splice(r,0,e),r===0&&Lx(e)}};function Pg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Zu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Nv(){}function Mk(e,t,r,a,s){if(s){if(typeof a=="function"){var o=a;a=function(){var d=pu(l);o.call(d)}}var l=tw(t,a,e,0,null,!1,!1,"",Nv);return e._reactRootContainer=l,e[Zn]=l.current,Ml(e.nodeType===8?e.parentNode:e),ps(),l}for(;s=e.lastChild;)e.removeChild(s);if(typeof a=="function"){var i=a;a=function(){var d=pu(c);i.call(d)}}var c=Og(e,0,!1,null,null,!1,!1,"",Nv);return e._reactRootContainer=c,e[Zn]=c.current,Ml(e.nodeType===8?e.parentNode:e),ps(function(){Qu(t,c,r,a)}),c}function ed(e,t,r,a,s){var o=r._reactRootContainer;if(o){var l=o;if(typeof s=="function"){var i=s;s=function(){var c=pu(l);i.call(c)}}Qu(t,l,e,s)}else l=Mk(r,t,e,s,a);return pu(l)}Ox=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=sl(t.pendingLanes);r!==0&&(Zp(t,r|1),pr(t,Et()),!(Ue&6)&&(io=Et()+500,Ba()))}break;case 13:ps(function(){var a=ea(e,1);if(a!==null){var s=ar();cn(a,e,1,s)}}),Rg(e,1)}};eg=function(e){if(e.tag===13){var t=ea(e,134217728);if(t!==null){var r=ar();cn(t,e,134217728,r)}Rg(e,134217728)}};Rx=function(e){if(e.tag===13){var t=Aa(e),r=ea(e,t);if(r!==null){var a=ar();cn(r,e,t,a)}Rg(e,t)}};Mx=function(){return Ke};Px=function(e,t){var r=Ke;try{return Ke=e,t()}finally{Ke=r}};xf=function(e,t,r){switch(t){case"input":if(ff(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var a=r[t];if(a!==e&&a.form===e.form){var s=Wu(a);if(!s)throw Error(te(90));dx(a),ff(a,s)}}}break;case"textarea":fx(e,r);break;case"select":t=r.value,t!=null&&Ws(e,!!r.multiple,t,!1)}};xx=Dg;bx=ps;var Pk={usingClientEntryPoint:!1,Events:[pi,Is,Wu,yx,Ex,Dg]},Ko={findFiberByHostInstance:Ja,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Lk={bundleType:Ko.bundleType,version:Ko.version,rendererPackageName:Ko.rendererPackageName,rendererConfig:Ko.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:sa.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Sx(e),e===null?null:e.stateNode},findFiberByHostInstance:Ko.findFiberByHostInstance||Rk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ec=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ec.isDisabled&&ec.supportsFiber)try{Bu=ec.inject(Lk),kn=ec}catch{}}kr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pk;kr.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pg(t))throw Error(te(200));return Ok(e,t,null,r)};kr.createRoot=function(e,t){if(!Pg(e))throw Error(te(299));var r=!1,a="",s=rw;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Og(e,1,!1,null,null,r,!1,a,s),e[Zn]=t.current,Ml(e.nodeType===8?e.parentNode:e),new Mg(t)};kr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(te(188)):(e=Object.keys(e).join(","),Error(te(268,e)));return e=Sx(t),e=e===null?null:e.stateNode,e};kr.flushSync=function(e){return ps(e)};kr.hydrate=function(e,t,r){if(!Zu(t))throw Error(te(200));return ed(null,e,t,!0,r)};kr.hydrateRoot=function(e,t,r){if(!Pg(e))throw Error(te(405));var a=r!=null&&r.hydratedSources||null,s=!1,o="",l=rw;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),t=tw(t,null,e,1,r??null,s,!1,o,l),e[Zn]=t.current,Ml(e),a)for(e=0;e<a.length;e++)r=a[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Ju(t)};kr.render=function(e,t,r){if(!Zu(t))throw Error(te(200));return ed(null,e,t,!1,r)};kr.unmountComponentAtNode=function(e){if(!Zu(e))throw Error(te(40));return e._reactRootContainer?(ps(function(){ed(null,null,e,!1,function(){e._reactRootContainer=null,e[Zn]=null})}),!0):!1};kr.unstable_batchedUpdates=Dg;kr.unstable_renderSubtreeIntoContainer=function(e,t,r,a){if(!Zu(r))throw Error(te(200));if(e==null||e._reactInternals===void 0)throw Error(te(38));return ed(e,t,r,!1,a)};kr.version="18.3.1-next-f1338f8080-20240426";function nw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(nw)}catch(e){console.error(e)}}nw(),nx.exports=kr;var ts=nx.exports;const aw=xr(ts);var Sv=ts;sf.createRoot=Sv.createRoot,sf.hydrateRoot=Sv.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ul(){return Ul=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Ul.apply(this,arguments)}var Ea;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ea||(Ea={}));const Cv="popstate";function Ik(e){e===void 0&&(e={});function t(a,s){let{pathname:o,search:l,hash:i}=a.location;return Zf("",{pathname:o,search:l,hash:i},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(a,s){return typeof s=="string"?s:gu(s)}return Fk(t,r,null,e)}function xt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function sw(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function $k(){return Math.random().toString(36).substr(2,8)}function kv(e,t){return{usr:e.state,key:e.key,idx:t}}function Zf(e,t,r,a){return r===void 0&&(r=null),Ul({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Eo(t):t,{state:r,key:t&&t.key||a||$k()})}function gu(e){let{pathname:t="/",search:r="",hash:a=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function Eo(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let a=e.indexOf("?");a>=0&&(t.search=e.substr(a),e=e.substr(0,a)),e&&(t.pathname=e)}return t}function Fk(e,t,r,a){a===void 0&&(a={});let{window:s=document.defaultView,v5Compat:o=!1}=a,l=s.history,i=Ea.Pop,c=null,d=u();d==null&&(d=0,l.replaceState(Ul({},l.state,{idx:d}),""));function u(){return(l.state||{idx:null}).idx}function m(){i=Ea.Pop;let v=u(),p=v==null?null:v-d;d=v,c&&c({action:i,location:y.location,delta:p})}function f(v,p){i=Ea.Push;let h=Zf(y.location,v,p);d=u()+1;let E=kv(h,d),w=y.createHref(h);try{l.pushState(E,"",w)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;s.location.assign(w)}o&&c&&c({action:i,location:y.location,delta:1})}function x(v,p){i=Ea.Replace;let h=Zf(y.location,v,p);d=u();let E=kv(h,d),w=y.createHref(h);l.replaceState(E,"",w),o&&c&&c({action:i,location:y.location,delta:0})}function b(v){let p=s.location.origin!=="null"?s.location.origin:s.location.href,h=typeof v=="string"?v:gu(v);return h=h.replace(/ $/,"%20"),xt(p,"No window.location.(origin|href) available to create URL for href: "+h),new URL(h,p)}let y={get action(){return i},get location(){return e(s,l)},listen(v){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Cv,m),c=v,()=>{s.removeEventListener(Cv,m),c=null}},createHref(v){return t(s,v)},createURL:b,encodeLocation(v){let p=b(v);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:f,replace:x,go(v){return l.go(v)}};return y}var Dv;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Dv||(Dv={}));function jk(e,t,r){return r===void 0&&(r="/"),Bk(e,t,r)}function Bk(e,t,r,a){let s=typeof t=="string"?Eo(t):t,o=Lg(s.pathname||"/",r);if(o==null)return null;let l=ow(e);zk(l);let i=null;for(let c=0;i==null&&c<l.length;++c){let d=Zk(o);i=Xk(l[c],d)}return i}function ow(e,t,r,a){t===void 0&&(t=[]),r===void 0&&(r=[]),a===void 0&&(a="");let s=(o,l,i)=>{let c={relativePath:i===void 0?o.path||"":i,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};c.relativePath.startsWith("/")&&(xt(c.relativePath.startsWith(a),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(a.length));let d=_a([a,c.relativePath]),u=r.concat(c);o.children&&o.children.length>0&&(xt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),ow(o.children,t,u,d)),!(o.path==null&&!o.index)&&t.push({path:d,score:Gk(d,o.index),routesMeta:u})};return e.forEach((o,l)=>{var i;if(o.path===""||!((i=o.path)!=null&&i.includes("?")))s(o,l);else for(let c of lw(o.path))s(o,l,c)}),t}function lw(e){let t=e.split("/");if(t.length===0)return[];let[r,...a]=t,s=r.endsWith("?"),o=r.replace(/\?$/,"");if(a.length===0)return s?[o,""]:[o];let l=lw(a.join("/")),i=[];return i.push(...l.map(c=>c===""?o:[o,c].join("/"))),s&&i.push(...l),i.map(c=>e.startsWith("/")&&c===""?"/":c)}function zk(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Kk(t.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}const Uk=/^:[\w-]+$/,Vk=3,Wk=2,Hk=1,Yk=10,qk=-2,Av=e=>e==="*";function Gk(e,t){let r=e.split("/"),a=r.length;return r.some(Av)&&(a+=qk),t&&(a+=Wk),r.filter(s=>!Av(s)).reduce((s,o)=>s+(Uk.test(o)?Vk:o===""?Hk:Yk),a)}function Kk(e,t){return e.length===t.length&&e.slice(0,-1).every((a,s)=>a===t[s])?e[e.length-1]-t[t.length-1]:0}function Xk(e,t,r){let{routesMeta:a}=e,s={},o="/",l=[];for(let i=0;i<a.length;++i){let c=a[i],d=i===a.length-1,u=o==="/"?t:t.slice(o.length)||"/",m=Qk({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),f=c.route;if(!m)return null;Object.assign(s,m.params),l.push({params:s,pathname:_a([o,m.pathname]),pathnameBase:n4(_a([o,m.pathnameBase])),route:f}),m.pathnameBase!=="/"&&(o=_a([o,m.pathnameBase]))}return l}function Qk(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,a]=Jk(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let o=s[0],l=o.replace(/(.)\/+$/,"$1"),i=s.slice(1);return{params:a.reduce((d,u,m)=>{let{paramName:f,isOptional:x}=u;if(f==="*"){let y=i[m]||"";l=o.slice(0,o.length-y.length).replace(/(.)\/+$/,"$1")}const b=i[m];return x&&!b?d[f]=void 0:d[f]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:o,pathnameBase:l,pattern:e}}function Jk(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),sw(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let a=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,i,c)=>(a.push({paramName:i,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(a.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),a]}function Zk(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return sw(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Lg(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,a=e.charAt(r);return a&&a!=="/"?null:e.slice(r)||"/"}function e4(e,t){t===void 0&&(t="/");let{pathname:r,search:a="",hash:s=""}=typeof e=="string"?Eo(e):e;return{pathname:r?r.startsWith("/")?r:t4(r,t):t,search:a4(a),hash:s4(s)}}function t4(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Tm(e,t,r,a){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function r4(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Ig(e,t){let r=r4(e);return t?r.map((a,s)=>s===r.length-1?a.pathname:a.pathnameBase):r.map(a=>a.pathnameBase)}function $g(e,t,r,a){a===void 0&&(a=!1);let s;typeof e=="string"?s=Eo(e):(s=Ul({},e),xt(!s.pathname||!s.pathname.includes("?"),Tm("?","pathname","search",s)),xt(!s.pathname||!s.pathname.includes("#"),Tm("#","pathname","hash",s)),xt(!s.search||!s.search.includes("#"),Tm("#","search","hash",s)));let o=e===""||s.pathname==="",l=o?"/":s.pathname,i;if(l==null)i=r;else{let m=t.length-1;if(!a&&l.startsWith("..")){let f=l.split("/");for(;f[0]==="..";)f.shift(),m-=1;s.pathname=f.join("/")}i=m>=0?t[m]:"/"}let c=e4(s,i),d=l&&l!=="/"&&l.endsWith("/"),u=(o||l===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const _a=e=>e.join("/").replace(/\/\/+/g,"/"),n4=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),a4=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,s4=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function o4(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const iw=["post","put","patch","delete"];new Set(iw);const l4=["get",...iw];new Set(l4);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vl(){return Vl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Vl.apply(this,arguments)}const Fg=g.createContext(null),i4=g.createContext(null),za=g.createContext(null),td=g.createContext(null),Pn=g.createContext({outlet:null,matches:[],isDataRoute:!1}),cw=g.createContext(null);function c4(e,t){let{relative:r}=t===void 0?{}:t;xo()||xt(!1);let{basename:a,navigator:s}=g.useContext(za),{hash:o,pathname:l,search:i}=dw(e,{relative:r}),c=l;return a!=="/"&&(c=l==="/"?a:_a([a,l])),s.createHref({pathname:c,search:i,hash:o})}function xo(){return g.useContext(td)!=null}function bo(){return xo()||xt(!1),g.useContext(td).location}function uw(e){g.useContext(za).static||g.useLayoutEffect(e)}function qr(){let{isDataRoute:e}=g.useContext(Pn);return e?S4():u4()}function u4(){xo()||xt(!1);let e=g.useContext(Fg),{basename:t,future:r,navigator:a}=g.useContext(za),{matches:s}=g.useContext(Pn),{pathname:o}=bo(),l=JSON.stringify(Ig(s,r.v7_relativeSplatPath)),i=g.useRef(!1);return uw(()=>{i.current=!0}),g.useCallback(function(d,u){if(u===void 0&&(u={}),!i.current)return;if(typeof d=="number"){a.go(d);return}let m=$g(d,JSON.parse(l),o,u.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:_a([t,m.pathname])),(u.replace?a.replace:a.push)(m,u.state,u)},[t,a,l,o,e])}const d4=g.createContext(null);function m4(e){let t=g.useContext(Pn).outlet;return t&&g.createElement(d4.Provider,{value:e},t)}function jg(){let{matches:e}=g.useContext(Pn),t=e[e.length-1];return t?t.params:{}}function dw(e,t){let{relative:r}=t===void 0?{}:t,{future:a}=g.useContext(za),{matches:s}=g.useContext(Pn),{pathname:o}=bo(),l=JSON.stringify(Ig(s,a.v7_relativeSplatPath));return g.useMemo(()=>$g(e,JSON.parse(l),o,r==="path"),[e,l,o,r])}function f4(e,t){return p4(e,t)}function p4(e,t,r,a){xo()||xt(!1);let{navigator:s}=g.useContext(za),{matches:o}=g.useContext(Pn),l=o[o.length-1],i=l?l.params:{};l&&l.pathname;let c=l?l.pathnameBase:"/";l&&l.route;let d=bo(),u;if(t){var m;let v=typeof t=="string"?Eo(t):t;c==="/"||(m=v.pathname)!=null&&m.startsWith(c)||xt(!1),u=v}else u=d;let f=u.pathname||"/",x=f;if(c!=="/"){let v=c.replace(/^\//,"").split("/");x="/"+f.replace(/^\//,"").split("/").slice(v.length).join("/")}let b=jk(e,{pathname:x}),y=E4(b&&b.map(v=>Object.assign({},v,{params:Object.assign({},i,v.params),pathname:_a([c,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:_a([c,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),o,r,a);return t&&y?g.createElement(td.Provider,{value:{location:Vl({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Ea.Pop}},y):y}function g4(){let e=N4(),t=o4(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),r?g.createElement("pre",{style:s},r):null,null)}const h4=g.createElement(g4,null);class v4 extends g.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?g.createElement(Pn.Provider,{value:this.props.routeContext},g.createElement(cw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function y4(e){let{routeContext:t,match:r,children:a}=e,s=g.useContext(Fg);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),g.createElement(Pn.Provider,{value:t},a)}function E4(e,t,r,a){var s;if(t===void 0&&(t=[]),r===void 0&&(r=null),a===void 0&&(a=null),e==null){var o;if(!r)return null;if(r.errors)e=r.matches;else if((o=a)!=null&&o.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let l=e,i=(s=r)==null?void 0:s.errors;if(i!=null){let u=l.findIndex(m=>m.route.id&&(i==null?void 0:i[m.route.id])!==void 0);u>=0||xt(!1),l=l.slice(0,Math.min(l.length,u+1))}let c=!1,d=-1;if(r&&a&&a.v7_partialHydration)for(let u=0;u<l.length;u++){let m=l[u];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=u),m.route.id){let{loaderData:f,errors:x}=r,b=m.route.loader&&f[m.route.id]===void 0&&(!x||x[m.route.id]===void 0);if(m.route.lazy||b){c=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}return l.reduceRight((u,m,f)=>{let x,b=!1,y=null,v=null;r&&(x=i&&m.route.id?i[m.route.id]:void 0,y=m.route.errorElement||h4,c&&(d<0&&f===0?(C4("route-fallback"),b=!0,v=null):d===f&&(b=!0,v=m.route.hydrateFallbackElement||null)));let p=t.concat(l.slice(0,f+1)),h=()=>{let E;return x?E=y:b?E=v:m.route.Component?E=g.createElement(m.route.Component,null):m.route.element?E=m.route.element:E=u,g.createElement(y4,{match:m,routeContext:{outlet:u,matches:p,isDataRoute:r!=null},children:E})};return r&&(m.route.ErrorBoundary||m.route.errorElement||f===0)?g.createElement(v4,{location:r.location,revalidation:r.revalidation,component:y,error:x,children:h(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):h()},null)}var mw=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(mw||{}),fw=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(fw||{});function x4(e){let t=g.useContext(Fg);return t||xt(!1),t}function b4(e){let t=g.useContext(i4);return t||xt(!1),t}function w4(e){let t=g.useContext(Pn);return t||xt(!1),t}function pw(e){let t=w4(),r=t.matches[t.matches.length-1];return r.route.id||xt(!1),r.route.id}function N4(){var e;let t=g.useContext(cw),r=b4(),a=pw();return t!==void 0?t:(e=r.errors)==null?void 0:e[a]}function S4(){let{router:e}=x4(mw.UseNavigateStable),t=pw(fw.UseNavigateStable),r=g.useRef(!1);return uw(()=>{r.current=!0}),g.useCallback(function(s,o){o===void 0&&(o={}),r.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,Vl({fromRouteId:t},o)))},[e,t])}const Tv={};function C4(e,t,r){Tv[e]||(Tv[e]=!0)}function k4(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function gw(e){let{to:t,replace:r,state:a,relative:s}=e;xo()||xt(!1);let{future:o,static:l}=g.useContext(za),{matches:i}=g.useContext(Pn),{pathname:c}=bo(),d=qr(),u=$g(t,Ig(i,o.v7_relativeSplatPath),c,s==="path"),m=JSON.stringify(u);return g.useEffect(()=>d(JSON.parse(m),{replace:r,state:a,relative:s}),[d,m,s,r,a]),null}function Bg(e){return m4(e.context)}function ge(e){xt(!1)}function D4(e){let{basename:t="/",children:r=null,location:a,navigationType:s=Ea.Pop,navigator:o,static:l=!1,future:i}=e;xo()&&xt(!1);let c=t.replace(/^\/*/,"/"),d=g.useMemo(()=>({basename:c,navigator:o,static:l,future:Vl({v7_relativeSplatPath:!1},i)}),[c,i,o,l]);typeof a=="string"&&(a=Eo(a));let{pathname:u="/",search:m="",hash:f="",state:x=null,key:b="default"}=a,y=g.useMemo(()=>{let v=Lg(u,c);return v==null?null:{location:{pathname:v,search:m,hash:f,state:x,key:b},navigationType:s}},[c,u,m,f,x,b,s]);return y==null?null:g.createElement(za.Provider,{value:d},g.createElement(td.Provider,{children:r,value:y}))}function A4(e){let{children:t,location:r}=e;return f4(ep(t),r)}new Promise(()=>{});function ep(e,t){t===void 0&&(t=[]);let r=[];return g.Children.forEach(e,(a,s)=>{if(!g.isValidElement(a))return;let o=[...t,s];if(a.type===g.Fragment){r.push.apply(r,ep(a.props.children,o));return}a.type!==ge&&xt(!1),!a.props.index||!a.props.children||xt(!1);let l={id:a.props.id||o.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(l.children=ep(a.props.children,o)),r.push(l)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tp(){return tp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},tp.apply(this,arguments)}function T4(e,t){if(e==null)return{};var r={},a=Object.keys(e),s,o;for(o=0;o<a.length;o++)s=a[o],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function _4(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function O4(e,t){return e.button===0&&(!t||t==="_self")&&!_4(e)}const R4=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],M4="6";try{window.__reactRouterVersion=M4}catch{}const P4="startTransition",_v=OS[P4];function L4(e){let{basename:t,children:r,future:a,window:s}=e,o=g.useRef();o.current==null&&(o.current=Ik({window:s,v5Compat:!0}));let l=o.current,[i,c]=g.useState({action:l.action,location:l.location}),{v7_startTransition:d}=a||{},u=g.useCallback(m=>{d&&_v?_v(()=>c(m)):c(m)},[c,d]);return g.useLayoutEffect(()=>l.listen(u),[l,u]),g.useEffect(()=>k4(a),[a]),g.createElement(D4,{basename:t,children:r,location:i.location,navigationType:i.action,navigator:l,future:a})}const I4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",$4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,De=g.forwardRef(function(t,r){let{onClick:a,relative:s,reloadDocument:o,replace:l,state:i,target:c,to:d,preventScrollReset:u,viewTransition:m}=t,f=T4(t,R4),{basename:x}=g.useContext(za),b,y=!1;if(typeof d=="string"&&$4.test(d)&&(b=d,I4))try{let E=new URL(window.location.href),w=d.startsWith("//")?new URL(E.protocol+d):new URL(d),N=Lg(w.pathname,x);w.origin===E.origin&&N!=null?d=N+w.search+w.hash:y=!0}catch{}let v=c4(d,{relative:s}),p=F4(d,{replace:l,state:i,target:c,preventScrollReset:u,relative:s,viewTransition:m});function h(E){a&&a(E),E.defaultPrevented||p(E)}return g.createElement("a",tp({},f,{href:b||v,onClick:y||o?a:h,ref:r,target:c}))});var Ov;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ov||(Ov={}));var Rv;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Rv||(Rv={}));function F4(e,t){let{target:r,replace:a,state:s,preventScrollReset:o,relative:l,viewTransition:i}=t===void 0?{}:t,c=qr(),d=bo(),u=dw(e,{relative:l});return g.useCallback(m=>{if(O4(m,r)){m.preventDefault();let f=a!==void 0?a:gu(d)===gu(u);c(e,{replace:f,state:s,preventScrollReset:o,relative:l,viewTransition:i})}},[d,c,u,a,s,r,e,o,l,i])}function hw(e,t){return function(){return e.apply(t,arguments)}}const{toString:j4}=Object.prototype,{getPrototypeOf:zg}=Object,{iterator:rd,toStringTag:vw}=Symbol,nd=(e=>t=>{const r=j4.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),gn=e=>(e=e.toLowerCase(),t=>nd(t)===e),ad=e=>t=>typeof t===e,{isArray:wo}=Array,Wl=ad("undefined");function B4(e){return e!==null&&!Wl(e)&&e.constructor!==null&&!Wl(e.constructor)&&gr(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const yw=gn("ArrayBuffer");function z4(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&yw(e.buffer),t}const U4=ad("string"),gr=ad("function"),Ew=ad("number"),sd=e=>e!==null&&typeof e=="object",V4=e=>e===!0||e===!1,Dc=e=>{if(nd(e)!=="object")return!1;const t=zg(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(vw in e)&&!(rd in e)},W4=gn("Date"),H4=gn("File"),Y4=gn("Blob"),q4=gn("FileList"),G4=e=>sd(e)&&gr(e.pipe),K4=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||gr(e.append)&&((t=nd(e))==="formdata"||t==="object"&&gr(e.toString)&&e.toString()==="[object FormData]"))},X4=gn("URLSearchParams"),[Q4,J4,Z4,eD]=["ReadableStream","Request","Response","Headers"].map(gn),tD=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function hi(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let a,s;if(typeof e!="object"&&(e=[e]),wo(e))for(a=0,s=e.length;a<s;a++)t.call(null,e[a],a,e);else{const o=r?Object.getOwnPropertyNames(e):Object.keys(e),l=o.length;let i;for(a=0;a<l;a++)i=o[a],t.call(null,e[i],i,e)}}function xw(e,t){t=t.toLowerCase();const r=Object.keys(e);let a=r.length,s;for(;a-- >0;)if(s=r[a],t===s.toLowerCase())return s;return null}const rs=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,bw=e=>!Wl(e)&&e!==rs;function rp(){const{caseless:e}=bw(this)&&this||{},t={},r=(a,s)=>{const o=e&&xw(t,s)||s;Dc(t[o])&&Dc(a)?t[o]=rp(t[o],a):Dc(a)?t[o]=rp({},a):wo(a)?t[o]=a.slice():t[o]=a};for(let a=0,s=arguments.length;a<s;a++)arguments[a]&&hi(arguments[a],r);return t}const rD=(e,t,r,{allOwnKeys:a}={})=>(hi(t,(s,o)=>{r&&gr(s)?e[o]=hw(s,r):e[o]=s},{allOwnKeys:a}),e),nD=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),aD=(e,t,r,a)=>{e.prototype=Object.create(t.prototype,a),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},sD=(e,t,r,a)=>{let s,o,l;const i={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),o=s.length;o-- >0;)l=s[o],(!a||a(l,e,t))&&!i[l]&&(t[l]=e[l],i[l]=!0);e=r!==!1&&zg(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},oD=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const a=e.indexOf(t,r);return a!==-1&&a===r},lD=e=>{if(!e)return null;if(wo(e))return e;let t=e.length;if(!Ew(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},iD=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&zg(Uint8Array)),cD=(e,t)=>{const a=(e&&e[rd]).call(e);let s;for(;(s=a.next())&&!s.done;){const o=s.value;t.call(e,o[0],o[1])}},uD=(e,t)=>{let r;const a=[];for(;(r=e.exec(t))!==null;)a.push(r);return a},dD=gn("HTMLFormElement"),mD=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,a,s){return a.toUpperCase()+s}),Mv=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),fD=gn("RegExp"),ww=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),a={};hi(r,(s,o)=>{let l;(l=t(s,o,e))!==!1&&(a[o]=l||s)}),Object.defineProperties(e,a)},pD=e=>{ww(e,(t,r)=>{if(gr(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const a=e[r];if(gr(a)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},gD=(e,t)=>{const r={},a=s=>{s.forEach(o=>{r[o]=!0})};return wo(e)?a(e):a(String(e).split(t)),r},hD=()=>{},vD=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function yD(e){return!!(e&&gr(e.append)&&e[vw]==="FormData"&&e[rd])}const ED=e=>{const t=new Array(10),r=(a,s)=>{if(sd(a)){if(t.indexOf(a)>=0)return;if(!("toJSON"in a)){t[s]=a;const o=wo(a)?[]:{};return hi(a,(l,i)=>{const c=r(l,s+1);!Wl(c)&&(o[i]=c)}),t[s]=void 0,o}}return a};return r(e,0)},xD=gn("AsyncFunction"),bD=e=>e&&(sd(e)||gr(e))&&gr(e.then)&&gr(e.catch),Nw=((e,t)=>e?setImmediate:t?((r,a)=>(rs.addEventListener("message",({source:s,data:o})=>{s===rs&&o===r&&a.length&&a.shift()()},!1),s=>{a.push(s),rs.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",gr(rs.postMessage)),wD=typeof queueMicrotask<"u"?queueMicrotask.bind(rs):typeof process<"u"&&process.nextTick||Nw,ND=e=>e!=null&&gr(e[rd]),q={isArray:wo,isArrayBuffer:yw,isBuffer:B4,isFormData:K4,isArrayBufferView:z4,isString:U4,isNumber:Ew,isBoolean:V4,isObject:sd,isPlainObject:Dc,isReadableStream:Q4,isRequest:J4,isResponse:Z4,isHeaders:eD,isUndefined:Wl,isDate:W4,isFile:H4,isBlob:Y4,isRegExp:fD,isFunction:gr,isStream:G4,isURLSearchParams:X4,isTypedArray:iD,isFileList:q4,forEach:hi,merge:rp,extend:rD,trim:tD,stripBOM:nD,inherits:aD,toFlatObject:sD,kindOf:nd,kindOfTest:gn,endsWith:oD,toArray:lD,forEachEntry:cD,matchAll:uD,isHTMLForm:dD,hasOwnProperty:Mv,hasOwnProp:Mv,reduceDescriptors:ww,freezeMethods:pD,toObjectSet:gD,toCamelCase:mD,noop:hD,toFiniteNumber:vD,findKey:xw,global:rs,isContextDefined:bw,isSpecCompliantForm:yD,toJSONObject:ED,isAsyncFn:xD,isThenable:bD,setImmediate:Nw,asap:wD,isIterable:ND};function Ae(e,t,r,a,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),a&&(this.request=a),s&&(this.response=s,this.status=s.status?s.status:null)}q.inherits(Ae,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:q.toJSONObject(this.config),code:this.code,status:this.status}}});const Sw=Ae.prototype,Cw={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Cw[e]={value:e}});Object.defineProperties(Ae,Cw);Object.defineProperty(Sw,"isAxiosError",{value:!0});Ae.from=(e,t,r,a,s,o)=>{const l=Object.create(Sw);return q.toFlatObject(e,l,function(c){return c!==Error.prototype},i=>i!=="isAxiosError"),Ae.call(l,e.message,t,r,a,s),l.cause=e,l.name=e.name,o&&Object.assign(l,o),l};const SD=null;function np(e){return q.isPlainObject(e)||q.isArray(e)}function kw(e){return q.endsWith(e,"[]")?e.slice(0,-2):e}function Pv(e,t,r){return e?e.concat(t).map(function(s,o){return s=kw(s),!r&&o?"["+s+"]":s}).join(r?".":""):t}function CD(e){return q.isArray(e)&&!e.some(np)}const kD=q.toFlatObject(q,{},null,function(t){return/^is[A-Z]/.test(t)});function od(e,t,r){if(!q.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=q.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,v){return!q.isUndefined(v[y])});const a=r.metaTokens,s=r.visitor||u,o=r.dots,l=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&q.isSpecCompliantForm(t);if(!q.isFunction(s))throw new TypeError("visitor must be a function");function d(b){if(b===null)return"";if(q.isDate(b))return b.toISOString();if(q.isBoolean(b))return b.toString();if(!c&&q.isBlob(b))throw new Ae("Blob is not supported. Use a Buffer instead.");return q.isArrayBuffer(b)||q.isTypedArray(b)?c&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function u(b,y,v){let p=b;if(b&&!v&&typeof b=="object"){if(q.endsWith(y,"{}"))y=a?y:y.slice(0,-2),b=JSON.stringify(b);else if(q.isArray(b)&&CD(b)||(q.isFileList(b)||q.endsWith(y,"[]"))&&(p=q.toArray(b)))return y=kw(y),p.forEach(function(E,w){!(q.isUndefined(E)||E===null)&&t.append(l===!0?Pv([y],w,o):l===null?y:y+"[]",d(E))}),!1}return np(b)?!0:(t.append(Pv(v,y,o),d(b)),!1)}const m=[],f=Object.assign(kD,{defaultVisitor:u,convertValue:d,isVisitable:np});function x(b,y){if(!q.isUndefined(b)){if(m.indexOf(b)!==-1)throw Error("Circular reference detected in "+y.join("."));m.push(b),q.forEach(b,function(p,h){(!(q.isUndefined(p)||p===null)&&s.call(t,p,q.isString(h)?h.trim():h,y,f))===!0&&x(p,y?y.concat(h):[h])}),m.pop()}}if(!q.isObject(e))throw new TypeError("data must be an object");return x(e),t}function Lv(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(a){return t[a]})}function Ug(e,t){this._pairs=[],e&&od(e,this,t)}const Dw=Ug.prototype;Dw.append=function(t,r){this._pairs.push([t,r])};Dw.toString=function(t){const r=t?function(a){return t.call(this,a,Lv)}:Lv;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};function DD(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Aw(e,t,r){if(!t)return e;const a=r&&r.encode||DD;q.isFunction(r)&&(r={serialize:r});const s=r&&r.serialize;let o;if(s?o=s(t,r):o=q.isURLSearchParams(t)?t.toString():new Ug(t,r).toString(a),o){const l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class Iv{constructor(){this.handlers=[]}use(t,r,a){return this.handlers.push({fulfilled:t,rejected:r,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){q.forEach(this.handlers,function(a){a!==null&&t(a)})}}const Tw={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},AD=typeof URLSearchParams<"u"?URLSearchParams:Ug,TD=typeof FormData<"u"?FormData:null,_D=typeof Blob<"u"?Blob:null,OD={isBrowser:!0,classes:{URLSearchParams:AD,FormData:TD,Blob:_D},protocols:["http","https","file","blob","url","data"]},Vg=typeof window<"u"&&typeof document<"u",ap=typeof navigator=="object"&&navigator||void 0,RD=Vg&&(!ap||["ReactNative","NativeScript","NS"].indexOf(ap.product)<0),MD=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",PD=Vg&&window.location.href||"http://localhost",LD=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Vg,hasStandardBrowserEnv:RD,hasStandardBrowserWebWorkerEnv:MD,navigator:ap,origin:PD},Symbol.toStringTag,{value:"Module"})),qt={...LD,...OD};function ID(e,t){return od(e,new qt.classes.URLSearchParams,Object.assign({visitor:function(r,a,s,o){return qt.isNode&&q.isBuffer(r)?(this.append(a,r.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function $D(e){return q.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function FD(e){const t={},r=Object.keys(e);let a;const s=r.length;let o;for(a=0;a<s;a++)o=r[a],t[o]=e[o];return t}function _w(e){function t(r,a,s,o){let l=r[o++];if(l==="__proto__")return!0;const i=Number.isFinite(+l),c=o>=r.length;return l=!l&&q.isArray(s)?s.length:l,c?(q.hasOwnProp(s,l)?s[l]=[s[l],a]:s[l]=a,!i):((!s[l]||!q.isObject(s[l]))&&(s[l]=[]),t(r,a,s[l],o)&&q.isArray(s[l])&&(s[l]=FD(s[l])),!i)}if(q.isFormData(e)&&q.isFunction(e.entries)){const r={};return q.forEachEntry(e,(a,s)=>{t($D(a),s,r,0)}),r}return null}function jD(e,t,r){if(q.isString(e))try{return(t||JSON.parse)(e),q.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(r||JSON.stringify)(e)}const vi={transitional:Tw,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const a=r.getContentType()||"",s=a.indexOf("application/json")>-1,o=q.isObject(t);if(o&&q.isHTMLForm(t)&&(t=new FormData(t)),q.isFormData(t))return s?JSON.stringify(_w(t)):t;if(q.isArrayBuffer(t)||q.isBuffer(t)||q.isStream(t)||q.isFile(t)||q.isBlob(t)||q.isReadableStream(t))return t;if(q.isArrayBufferView(t))return t.buffer;if(q.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let i;if(o){if(a.indexOf("application/x-www-form-urlencoded")>-1)return ID(t,this.formSerializer).toString();if((i=q.isFileList(t))||a.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return od(i?{"files[]":t}:t,c&&new c,this.formSerializer)}}return o||s?(r.setContentType("application/json",!1),jD(t)):t}],transformResponse:[function(t){const r=this.transitional||vi.transitional,a=r&&r.forcedJSONParsing,s=this.responseType==="json";if(q.isResponse(t)||q.isReadableStream(t))return t;if(t&&q.isString(t)&&(a&&!this.responseType||s)){const l=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(i){if(l)throw i.name==="SyntaxError"?Ae.from(i,Ae.ERR_BAD_RESPONSE,this,null,this.response):i}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:qt.classes.FormData,Blob:qt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};q.forEach(["delete","get","head","post","put","patch"],e=>{vi.headers[e]={}});const BD=q.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),zD=e=>{const t={};let r,a,s;return e&&e.split(`
`).forEach(function(l){s=l.indexOf(":"),r=l.substring(0,s).trim().toLowerCase(),a=l.substring(s+1).trim(),!(!r||t[r]&&BD[r])&&(r==="set-cookie"?t[r]?t[r].push(a):t[r]=[a]:t[r]=t[r]?t[r]+", "+a:a)}),t},$v=Symbol("internals");function Xo(e){return e&&String(e).trim().toLowerCase()}function Ac(e){return e===!1||e==null?e:q.isArray(e)?e.map(Ac):String(e)}function UD(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=r.exec(e);)t[a[1]]=a[2];return t}const VD=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function _m(e,t,r,a,s){if(q.isFunction(a))return a.call(this,t,r);if(s&&(t=r),!!q.isString(t)){if(q.isString(a))return t.indexOf(a)!==-1;if(q.isRegExp(a))return a.test(t)}}function WD(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,a)=>r.toUpperCase()+a)}function HD(e,t){const r=q.toCamelCase(" "+t);["get","set","has"].forEach(a=>{Object.defineProperty(e,a+r,{value:function(s,o,l){return this[a].call(this,t,s,o,l)},configurable:!0})})}let hr=class{constructor(t){t&&this.set(t)}set(t,r,a){const s=this;function o(i,c,d){const u=Xo(c);if(!u)throw new Error("header name must be a non-empty string");const m=q.findKey(s,u);(!m||s[m]===void 0||d===!0||d===void 0&&s[m]!==!1)&&(s[m||c]=Ac(i))}const l=(i,c)=>q.forEach(i,(d,u)=>o(d,u,c));if(q.isPlainObject(t)||t instanceof this.constructor)l(t,r);else if(q.isString(t)&&(t=t.trim())&&!VD(t))l(zD(t),r);else if(q.isObject(t)&&q.isIterable(t)){let i={},c,d;for(const u of t){if(!q.isArray(u))throw TypeError("Object iterator must return a key-value pair");i[d=u[0]]=(c=i[d])?q.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}l(i,r)}else t!=null&&o(r,t,a);return this}get(t,r){if(t=Xo(t),t){const a=q.findKey(this,t);if(a){const s=this[a];if(!r)return s;if(r===!0)return UD(s);if(q.isFunction(r))return r.call(this,s,a);if(q.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=Xo(t),t){const a=q.findKey(this,t);return!!(a&&this[a]!==void 0&&(!r||_m(this,this[a],a,r)))}return!1}delete(t,r){const a=this;let s=!1;function o(l){if(l=Xo(l),l){const i=q.findKey(a,l);i&&(!r||_m(a,a[i],i,r))&&(delete a[i],s=!0)}}return q.isArray(t)?t.forEach(o):o(t),s}clear(t){const r=Object.keys(this);let a=r.length,s=!1;for(;a--;){const o=r[a];(!t||_m(this,this[o],o,t,!0))&&(delete this[o],s=!0)}return s}normalize(t){const r=this,a={};return q.forEach(this,(s,o)=>{const l=q.findKey(a,o);if(l){r[l]=Ac(s),delete r[o];return}const i=t?WD(o):String(o).trim();i!==o&&delete r[o],r[i]=Ac(s),a[i]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return q.forEach(this,(a,s)=>{a!=null&&a!==!1&&(r[s]=t&&q.isArray(a)?a.join(", "):a)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const a=new this(t);return r.forEach(s=>a.set(s)),a}static accessor(t){const a=(this[$v]=this[$v]={accessors:{}}).accessors,s=this.prototype;function o(l){const i=Xo(l);a[i]||(HD(s,l),a[i]=!0)}return q.isArray(t)?t.forEach(o):o(t),this}};hr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);q.reduceDescriptors(hr.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(a){this[r]=a}}});q.freezeMethods(hr);function Om(e,t){const r=this||vi,a=t||r,s=hr.from(a.headers);let o=a.data;return q.forEach(e,function(i){o=i.call(r,o,s.normalize(),t?t.status:void 0)}),s.normalize(),o}function Ow(e){return!!(e&&e.__CANCEL__)}function No(e,t,r){Ae.call(this,e??"canceled",Ae.ERR_CANCELED,t,r),this.name="CanceledError"}q.inherits(No,Ae,{__CANCEL__:!0});function Rw(e,t,r){const a=r.config.validateStatus;!r.status||!a||a(r.status)?e(r):t(new Ae("Request failed with status code "+r.status,[Ae.ERR_BAD_REQUEST,Ae.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function YD(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function qD(e,t){e=e||10;const r=new Array(e),a=new Array(e);let s=0,o=0,l;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),u=a[o];l||(l=d),r[s]=c,a[s]=d;let m=o,f=0;for(;m!==s;)f+=r[m++],m=m%e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),d-l<t)return;const x=u&&d-u;return x?Math.round(f*1e3/x):void 0}}function GD(e,t){let r=0,a=1e3/t,s,o;const l=(d,u=Date.now())=>{r=u,s=null,o&&(clearTimeout(o),o=null),e.apply(null,d)};return[(...d)=>{const u=Date.now(),m=u-r;m>=a?l(d,u):(s=d,o||(o=setTimeout(()=>{o=null,l(s)},a-m)))},()=>s&&l(s)]}const hu=(e,t,r=3)=>{let a=0;const s=qD(50,250);return GD(o=>{const l=o.loaded,i=o.lengthComputable?o.total:void 0,c=l-a,d=s(c),u=l<=i;a=l;const m={loaded:l,total:i,progress:i?l/i:void 0,bytes:c,rate:d||void 0,estimated:d&&i&&u?(i-l)/d:void 0,event:o,lengthComputable:i!=null,[t?"download":"upload"]:!0};e(m)},r)},Fv=(e,t)=>{const r=e!=null;return[a=>t[0]({lengthComputable:r,total:e,loaded:a}),t[1]]},jv=e=>(...t)=>q.asap(()=>e(...t)),KD=qt.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,qt.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(qt.origin),qt.navigator&&/(msie|trident)/i.test(qt.navigator.userAgent)):()=>!0,XD=qt.hasStandardBrowserEnv?{write(e,t,r,a,s,o){const l=[e+"="+encodeURIComponent(t)];q.isNumber(r)&&l.push("expires="+new Date(r).toGMTString()),q.isString(a)&&l.push("path="+a),q.isString(s)&&l.push("domain="+s),o===!0&&l.push("secure"),document.cookie=l.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function QD(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function JD(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Mw(e,t,r){let a=!QD(t);return e&&(a||r==!1)?JD(e,t):t}const Bv=e=>e instanceof hr?{...e}:e;function gs(e,t){t=t||{};const r={};function a(d,u,m,f){return q.isPlainObject(d)&&q.isPlainObject(u)?q.merge.call({caseless:f},d,u):q.isPlainObject(u)?q.merge({},u):q.isArray(u)?u.slice():u}function s(d,u,m,f){if(q.isUndefined(u)){if(!q.isUndefined(d))return a(void 0,d,m,f)}else return a(d,u,m,f)}function o(d,u){if(!q.isUndefined(u))return a(void 0,u)}function l(d,u){if(q.isUndefined(u)){if(!q.isUndefined(d))return a(void 0,d)}else return a(void 0,u)}function i(d,u,m){if(m in t)return a(d,u);if(m in e)return a(void 0,d)}const c={url:o,method:o,data:o,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:i,headers:(d,u,m)=>s(Bv(d),Bv(u),m,!0)};return q.forEach(Object.keys(Object.assign({},e,t)),function(u){const m=c[u]||s,f=m(e[u],t[u],u);q.isUndefined(f)&&m!==i||(r[u]=f)}),r}const Pw=e=>{const t=gs({},e);let{data:r,withXSRFToken:a,xsrfHeaderName:s,xsrfCookieName:o,headers:l,auth:i}=t;t.headers=l=hr.from(l),t.url=Aw(Mw(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),i&&l.set("Authorization","Basic "+btoa((i.username||"")+":"+(i.password?unescape(encodeURIComponent(i.password)):"")));let c;if(q.isFormData(r)){if(qt.hasStandardBrowserEnv||qt.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if((c=l.getContentType())!==!1){const[d,...u]=c?c.split(";").map(m=>m.trim()).filter(Boolean):[];l.setContentType([d||"multipart/form-data",...u].join("; "))}}if(qt.hasStandardBrowserEnv&&(a&&q.isFunction(a)&&(a=a(t)),a||a!==!1&&KD(t.url))){const d=s&&o&&XD.read(o);d&&l.set(s,d)}return t},ZD=typeof XMLHttpRequest<"u",eA=ZD&&function(e){return new Promise(function(r,a){const s=Pw(e);let o=s.data;const l=hr.from(s.headers).normalize();let{responseType:i,onUploadProgress:c,onDownloadProgress:d}=s,u,m,f,x,b;function y(){x&&x(),b&&b(),s.cancelToken&&s.cancelToken.unsubscribe(u),s.signal&&s.signal.removeEventListener("abort",u)}let v=new XMLHttpRequest;v.open(s.method.toUpperCase(),s.url,!0),v.timeout=s.timeout;function p(){if(!v)return;const E=hr.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders()),N={data:!i||i==="text"||i==="json"?v.responseText:v.response,status:v.status,statusText:v.statusText,headers:E,config:e,request:v};Rw(function(C){r(C),y()},function(C){a(C),y()},N),v=null}"onloadend"in v?v.onloadend=p:v.onreadystatechange=function(){!v||v.readyState!==4||v.status===0&&!(v.responseURL&&v.responseURL.indexOf("file:")===0)||setTimeout(p)},v.onabort=function(){v&&(a(new Ae("Request aborted",Ae.ECONNABORTED,e,v)),v=null)},v.onerror=function(){a(new Ae("Network Error",Ae.ERR_NETWORK,e,v)),v=null},v.ontimeout=function(){let w=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const N=s.transitional||Tw;s.timeoutErrorMessage&&(w=s.timeoutErrorMessage),a(new Ae(w,N.clarifyTimeoutError?Ae.ETIMEDOUT:Ae.ECONNABORTED,e,v)),v=null},o===void 0&&l.setContentType(null),"setRequestHeader"in v&&q.forEach(l.toJSON(),function(w,N){v.setRequestHeader(N,w)}),q.isUndefined(s.withCredentials)||(v.withCredentials=!!s.withCredentials),i&&i!=="json"&&(v.responseType=s.responseType),d&&([f,b]=hu(d,!0),v.addEventListener("progress",f)),c&&v.upload&&([m,x]=hu(c),v.upload.addEventListener("progress",m),v.upload.addEventListener("loadend",x)),(s.cancelToken||s.signal)&&(u=E=>{v&&(a(!E||E.type?new No(null,e,v):E),v.abort(),v=null)},s.cancelToken&&s.cancelToken.subscribe(u),s.signal&&(s.signal.aborted?u():s.signal.addEventListener("abort",u)));const h=YD(s.url);if(h&&qt.protocols.indexOf(h)===-1){a(new Ae("Unsupported protocol "+h+":",Ae.ERR_BAD_REQUEST,e));return}v.send(o||null)})},tA=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let a=new AbortController,s;const o=function(d){if(!s){s=!0,i();const u=d instanceof Error?d:this.reason;a.abort(u instanceof Ae?u:new No(u instanceof Error?u.message:u))}};let l=t&&setTimeout(()=>{l=null,o(new Ae(`timeout ${t} of ms exceeded`,Ae.ETIMEDOUT))},t);const i=()=>{e&&(l&&clearTimeout(l),l=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(o):d.removeEventListener("abort",o)}),e=null)};e.forEach(d=>d.addEventListener("abort",o));const{signal:c}=a;return c.unsubscribe=()=>q.asap(i),c}},rA=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let a=0,s;for(;a<r;)s=a+t,yield e.slice(a,s),a=s},nA=async function*(e,t){for await(const r of aA(e))yield*rA(r,t)},aA=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:a}=await t.read();if(r)break;yield a}}finally{await t.cancel()}},zv=(e,t,r,a)=>{const s=nA(e,t);let o=0,l,i=c=>{l||(l=!0,a&&a(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await s.next();if(d){i(),c.close();return}let m=u.byteLength;if(r){let f=o+=m;r(f)}c.enqueue(new Uint8Array(u))}catch(d){throw i(d),d}},cancel(c){return i(c),s.return()}},{highWaterMark:2})},ld=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Lw=ld&&typeof ReadableStream=="function",sA=ld&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Iw=(e,...t)=>{try{return!!e(...t)}catch{return!1}},oA=Lw&&Iw(()=>{let e=!1;const t=new Request(qt.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),Uv=64*1024,sp=Lw&&Iw(()=>q.isReadableStream(new Response("").body)),vu={stream:sp&&(e=>e.body)};ld&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!vu[t]&&(vu[t]=q.isFunction(e[t])?r=>r[t]():(r,a)=>{throw new Ae(`Response type '${t}' is not supported`,Ae.ERR_NOT_SUPPORT,a)})})})(new Response);const lA=async e=>{if(e==null)return 0;if(q.isBlob(e))return e.size;if(q.isSpecCompliantForm(e))return(await new Request(qt.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(q.isArrayBufferView(e)||q.isArrayBuffer(e))return e.byteLength;if(q.isURLSearchParams(e)&&(e=e+""),q.isString(e))return(await sA(e)).byteLength},iA=async(e,t)=>{const r=q.toFiniteNumber(e.getContentLength());return r??lA(t)},cA=ld&&(async e=>{let{url:t,method:r,data:a,signal:s,cancelToken:o,timeout:l,onDownloadProgress:i,onUploadProgress:c,responseType:d,headers:u,withCredentials:m="same-origin",fetchOptions:f}=Pw(e);d=d?(d+"").toLowerCase():"text";let x=tA([s,o&&o.toAbortSignal()],l),b;const y=x&&x.unsubscribe&&(()=>{x.unsubscribe()});let v;try{if(c&&oA&&r!=="get"&&r!=="head"&&(v=await iA(u,a))!==0){let N=new Request(t,{method:"POST",body:a,duplex:"half"}),S;if(q.isFormData(a)&&(S=N.headers.get("content-type"))&&u.setContentType(S),N.body){const[C,D]=Fv(v,hu(jv(c)));a=zv(N.body,Uv,C,D)}}q.isString(m)||(m=m?"include":"omit");const p="credentials"in Request.prototype;b=new Request(t,{...f,signal:x,method:r.toUpperCase(),headers:u.normalize().toJSON(),body:a,duplex:"half",credentials:p?m:void 0});let h=await fetch(b,f);const E=sp&&(d==="stream"||d==="response");if(sp&&(i||E&&y)){const N={};["status","statusText","headers"].forEach(k=>{N[k]=h[k]});const S=q.toFiniteNumber(h.headers.get("content-length")),[C,D]=i&&Fv(S,hu(jv(i),!0))||[];h=new Response(zv(h.body,Uv,C,()=>{D&&D(),y&&y()}),N)}d=d||"text";let w=await vu[q.findKey(vu,d)||"text"](h,e);return!E&&y&&y(),await new Promise((N,S)=>{Rw(N,S,{data:w,headers:hr.from(h.headers),status:h.status,statusText:h.statusText,config:e,request:b})})}catch(p){throw y&&y(),p&&p.name==="TypeError"&&/Load failed|fetch/i.test(p.message)?Object.assign(new Ae("Network Error",Ae.ERR_NETWORK,e,b),{cause:p.cause||p}):Ae.from(p,p&&p.code,e,b)}}),op={http:SD,xhr:eA,fetch:cA};q.forEach(op,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Vv=e=>`- ${e}`,uA=e=>q.isFunction(e)||e===null||e===!1,$w={getAdapter:e=>{e=q.isArray(e)?e:[e];const{length:t}=e;let r,a;const s={};for(let o=0;o<t;o++){r=e[o];let l;if(a=r,!uA(r)&&(a=op[(l=String(r)).toLowerCase()],a===void 0))throw new Ae(`Unknown adapter '${l}'`);if(a)break;s[l||"#"+o]=a}if(!a){const o=Object.entries(s).map(([i,c])=>`adapter ${i} `+(c===!1?"is not supported by the environment":"is not available in the build"));let l=t?o.length>1?`since :
`+o.map(Vv).join(`
`):" "+Vv(o[0]):"as no adapter specified";throw new Ae("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return a},adapters:op};function Rm(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new No(null,e)}function Wv(e){return Rm(e),e.headers=hr.from(e.headers),e.data=Om.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),$w.getAdapter(e.adapter||vi.adapter)(e).then(function(a){return Rm(e),a.data=Om.call(e,e.transformResponse,a),a.headers=hr.from(a.headers),a},function(a){return Ow(a)||(Rm(e),a&&a.response&&(a.response.data=Om.call(e,e.transformResponse,a.response),a.response.headers=hr.from(a.response.headers))),Promise.reject(a)})}const Fw="1.10.0",id={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{id[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});const Hv={};id.transitional=function(t,r,a){function s(o,l){return"[Axios v"+Fw+"] Transitional option '"+o+"'"+l+(a?". "+a:"")}return(o,l,i)=>{if(t===!1)throw new Ae(s(l," has been removed"+(r?" in "+r:"")),Ae.ERR_DEPRECATED);return r&&!Hv[l]&&(Hv[l]=!0,console.warn(s(l," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(o,l,i):!0}};id.spelling=function(t){return(r,a)=>(console.warn(`${a} is likely a misspelling of ${t}`),!0)};function dA(e,t,r){if(typeof e!="object")throw new Ae("options must be an object",Ae.ERR_BAD_OPTION_VALUE);const a=Object.keys(e);let s=a.length;for(;s-- >0;){const o=a[s],l=t[o];if(l){const i=e[o],c=i===void 0||l(i,o,e);if(c!==!0)throw new Ae("option "+o+" must be "+c,Ae.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Ae("Unknown option "+o,Ae.ERR_BAD_OPTION)}}const Tc={assertOptions:dA,validators:id},En=Tc.validators;let os=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Iv,response:new Iv}}async request(t,r){try{return await this._request(t,r)}catch(a){if(a instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const o=s.stack?s.stack.replace(/^.+\n/,""):"";try{a.stack?o&&!String(a.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+o):a.stack=o}catch{}}throw a}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=gs(this.defaults,r);const{transitional:a,paramsSerializer:s,headers:o}=r;a!==void 0&&Tc.assertOptions(a,{silentJSONParsing:En.transitional(En.boolean),forcedJSONParsing:En.transitional(En.boolean),clarifyTimeoutError:En.transitional(En.boolean)},!1),s!=null&&(q.isFunction(s)?r.paramsSerializer={serialize:s}:Tc.assertOptions(s,{encode:En.function,serialize:En.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Tc.assertOptions(r,{baseUrl:En.spelling("baseURL"),withXsrfToken:En.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let l=o&&q.merge(o.common,o[r.method]);o&&q.forEach(["delete","get","head","post","put","patch","common"],b=>{delete o[b]}),r.headers=hr.concat(l,o);const i=[];let c=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(r)===!1||(c=c&&y.synchronous,i.unshift(y.fulfilled,y.rejected))});const d=[];this.interceptors.response.forEach(function(y){d.push(y.fulfilled,y.rejected)});let u,m=0,f;if(!c){const b=[Wv.bind(this),void 0];for(b.unshift.apply(b,i),b.push.apply(b,d),f=b.length,u=Promise.resolve(r);m<f;)u=u.then(b[m++],b[m++]);return u}f=i.length;let x=r;for(m=0;m<f;){const b=i[m++],y=i[m++];try{x=b(x)}catch(v){y.call(this,v);break}}try{u=Wv.call(this,x)}catch(b){return Promise.reject(b)}for(m=0,f=d.length;m<f;)u=u.then(d[m++],d[m++]);return u}getUri(t){t=gs(this.defaults,t);const r=Mw(t.baseURL,t.url,t.allowAbsoluteUrls);return Aw(r,t.params,t.paramsSerializer)}};q.forEach(["delete","get","head","options"],function(t){os.prototype[t]=function(r,a){return this.request(gs(a||{},{method:t,url:r,data:(a||{}).data}))}});q.forEach(["post","put","patch"],function(t){function r(a){return function(o,l,i){return this.request(gs(i||{},{method:t,headers:a?{"Content-Type":"multipart/form-data"}:{},url:o,data:l}))}}os.prototype[t]=r(),os.prototype[t+"Form"]=r(!0)});let mA=class jw{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(o){r=o});const a=this;this.promise.then(s=>{if(!a._listeners)return;let o=a._listeners.length;for(;o-- >0;)a._listeners[o](s);a._listeners=null}),this.promise.then=s=>{let o;const l=new Promise(i=>{a.subscribe(i),o=i}).then(s);return l.cancel=function(){a.unsubscribe(o)},l},t(function(o,l,i){a.reason||(a.reason=new No(o,l,i),r(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=a=>{t.abort(a)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new jw(function(s){t=s}),cancel:t}}};function fA(e){return function(r){return e.apply(null,r)}}function pA(e){return q.isObject(e)&&e.isAxiosError===!0}const lp={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(lp).forEach(([e,t])=>{lp[t]=e});function Bw(e){const t=new os(e),r=hw(os.prototype.request,t);return q.extend(r,os.prototype,t,{allOwnKeys:!0}),q.extend(r,t,null,{allOwnKeys:!0}),r.create=function(s){return Bw(gs(e,s))},r}const xe=Bw(vi);xe.Axios=os;xe.CanceledError=No;xe.CancelToken=mA;xe.isCancel=Ow;xe.VERSION=Fw;xe.toFormData=od;xe.AxiosError=Ae;xe.Cancel=xe.CanceledError;xe.all=function(t){return Promise.all(t)};xe.spread=fA;xe.isAxiosError=pA;xe.mergeConfig=gs;xe.AxiosHeaders=hr;xe.formToJSON=e=>_w(q.isHTMLForm(e)?new FormData(e):e);xe.getAdapter=$w.getAdapter;xe.HttpStatusCode=lp;xe.default=xe;const{Axios:sX,AxiosError:oX,CanceledError:lX,isCancel:iX,CancelToken:cX,VERSION:uX,all:dX,Cancel:mX,isAxiosError:fX,spread:pX,toFormData:gX,AxiosHeaders:hX,HttpStatusCode:vX,formToJSON:yX,getAdapter:EX,mergeConfig:xX}=xe,Z=xe.create({baseURL:"http://localhost:3000/api"});Z.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e});Z.interceptors.response.use(e=>e,e=>(e.response&&(e.response.status===401?(localStorage.removeItem("token"),window.location.href="/login",alert("Sesión expirada o no autorizada. Por favor, inicia sesión de nuevo.")):e.response.status===429&&alert("Demasiados intentos de autenticación. Espera unos minutos antes de volver a intentarlo.")),Promise.reject(e)));const zw=g.createContext(null),Pe=()=>{const e=g.useContext(zw);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},gA=({children:e})=>{const[t,r]=g.useState(null),[a,s]=g.useState(!0);g.useEffect(()=>{o()},[]);const o=async()=>{var u;try{const m=localStorage.getItem("token");if(console.log("checkAuth - Token exists:",!!m),console.log("checkAuth - Token value:",m?m.substring(0,50)+"...":"No token"),m){console.log("checkAuth - Making request to /auth/me");const f=await Z.get("/auth/me",{headers:{Authorization:`Bearer ${m}`}});if(console.log("checkAuth - Response data:",f.data),f.data&&f.data.role)r(f.data),console.log("checkAuth - User set:",f.data);else throw console.error("checkAuth - Invalid user data structure:",f.data),new Error("Datos de usuario incompletos")}else console.log("checkAuth - No token found, user remains null")}catch(m){console.error("Error en checkAuth:",m),console.error("Error details:",((u=m.response)==null?void 0:u.data)||m.message),localStorage.removeItem("token")}finally{s(!1)}},d={user:t,loading:a,login:async(u,m)=>{var f,x,b;try{const y=await Z.post("/auth/login",{email:u,password:m}),{token:v,user:p}=y.data;localStorage.setItem("token",v),r({id:p.id,email:p.email,name:p.name,role:p.role}),p.role==="ADMIN"?window.location.href="/admin/dashboard":window.location.href="/dashboard"}catch(y){throw console.error("Error completo en login:",((f=y==null?void 0:y.response)==null?void 0:f.data)||(y==null?void 0:y.message)),new Error(((b=(x=y==null?void 0:y.response)==null?void 0:x.data)==null?void 0:b.message)||"Error en el inicio de sesión")}},logout:()=>{localStorage.removeItem("token"),r(null),window.location.href="/login"},register:async u=>{try{const m=await Z.post("/auth/register",u),{token:f,user:x}=m.data;localStorage.setItem("token",f),r(x)}catch{throw new Error("Error en el registro")}}};return n.createElement(zw.Provider,{value:d},e)},_n=Object.create(null);_n.open="0";_n.close="1";_n.ping="2";_n.pong="3";_n.message="4";_n.upgrade="5";_n.noop="6";const _c=Object.create(null);Object.keys(_n).forEach(e=>{_c[_n[e]]=e});const ip={type:"error",data:"parser error"},Uw=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Vw=typeof ArrayBuffer=="function",Ww=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Wg=({type:e,data:t},r,a)=>Uw&&t instanceof Blob?r?a(t):Yv(t,a):Vw&&(t instanceof ArrayBuffer||Ww(t))?r?a(t):Yv(new Blob([t]),a):a(_n[e]+(t||"")),Yv=(e,t)=>{const r=new FileReader;return r.onload=function(){const a=r.result.split(",")[1];t("b"+(a||""))},r.readAsDataURL(e)};function qv(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Mm;function hA(e,t){if(Uw&&e.data instanceof Blob)return e.data.arrayBuffer().then(qv).then(t);if(Vw&&(e.data instanceof ArrayBuffer||Ww(e.data)))return t(qv(e.data));Wg(e,!1,r=>{Mm||(Mm=new TextEncoder),t(Mm.encode(r))})}const Gv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ll=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<Gv.length;e++)ll[Gv.charCodeAt(e)]=e;const vA=e=>{let t=e.length*.75,r=e.length,a,s=0,o,l,i,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const d=new ArrayBuffer(t),u=new Uint8Array(d);for(a=0;a<r;a+=4)o=ll[e.charCodeAt(a)],l=ll[e.charCodeAt(a+1)],i=ll[e.charCodeAt(a+2)],c=ll[e.charCodeAt(a+3)],u[s++]=o<<2|l>>4,u[s++]=(l&15)<<4|i>>2,u[s++]=(i&3)<<6|c&63;return d},yA=typeof ArrayBuffer=="function",Hg=(e,t)=>{if(typeof e!="string")return{type:"message",data:Hw(e,t)};const r=e.charAt(0);return r==="b"?{type:"message",data:EA(e.substring(1),t)}:_c[r]?e.length>1?{type:_c[r],data:e.substring(1)}:{type:_c[r]}:ip},EA=(e,t)=>{if(yA){const r=vA(e);return Hw(r,t)}else return{base64:!0,data:e}},Hw=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},Yw="",xA=(e,t)=>{const r=e.length,a=new Array(r);let s=0;e.forEach((o,l)=>{Wg(o,!1,i=>{a[l]=i,++s===r&&t(a.join(Yw))})})},bA=(e,t)=>{const r=e.split(Yw),a=[];for(let s=0;s<r.length;s++){const o=Hg(r[s],t);if(a.push(o),o.type==="error")break}return a};function wA(){return new TransformStream({transform(e,t){hA(e,r=>{const a=r.length;let s;if(a<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,a);else if(a<65536){s=new Uint8Array(3);const o=new DataView(s.buffer);o.setUint8(0,126),o.setUint16(1,a)}else{s=new Uint8Array(9);const o=new DataView(s.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(a))}e.data&&typeof e.data!="string"&&(s[0]|=128),t.enqueue(s),t.enqueue(r)})}})}let Pm;function tc(e){return e.reduce((t,r)=>t+r.length,0)}function rc(e,t){if(e[0].length===t)return e.shift();const r=new Uint8Array(t);let a=0;for(let s=0;s<t;s++)r[s]=e[0][a++],a===e[0].length&&(e.shift(),a=0);return e.length&&a<e[0].length&&(e[0]=e[0].slice(a)),r}function NA(e,t){Pm||(Pm=new TextDecoder);const r=[];let a=0,s=-1,o=!1;return new TransformStream({transform(l,i){for(r.push(l);;){if(a===0){if(tc(r)<1)break;const c=rc(r,1);o=(c[0]&128)===128,s=c[0]&127,s<126?a=3:s===126?a=1:a=2}else if(a===1){if(tc(r)<2)break;const c=rc(r,2);s=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),a=3}else if(a===2){if(tc(r)<8)break;const c=rc(r,8),d=new DataView(c.buffer,c.byteOffset,c.length),u=d.getUint32(0);if(u>Math.pow(2,21)-1){i.enqueue(ip);break}s=u*Math.pow(2,32)+d.getUint32(4),a=3}else{if(tc(r)<s)break;const c=rc(r,s);i.enqueue(Hg(o?c:Pm.decode(c),t)),a=0}if(s===0||s>e){i.enqueue(ip);break}}}})}const qw=4;function wt(e){if(e)return SA(e)}function SA(e){for(var t in wt.prototype)e[t]=wt.prototype[t];return e}wt.prototype.on=wt.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};wt.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this};wt.prototype.off=wt.prototype.removeListener=wt.prototype.removeAllListeners=wt.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var a,s=0;s<r.length;s++)if(a=r[s],a===t||a.fn===t){r.splice(s,1);break}return r.length===0&&delete this._callbacks["$"+e],this};wt.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],a=1;a<arguments.length;a++)t[a-1]=arguments[a];if(r){r=r.slice(0);for(var a=0,s=r.length;a<s;++a)r[a].apply(this,t)}return this};wt.prototype.emitReserved=wt.prototype.emit;wt.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};wt.prototype.hasListeners=function(e){return!!this.listeners(e).length};const cd=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,r)=>r(t,0),$r=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),CA="arraybuffer";function Gw(e,...t){return t.reduce((r,a)=>(e.hasOwnProperty(a)&&(r[a]=e[a]),r),{})}const kA=$r.setTimeout,DA=$r.clearTimeout;function ud(e,t){t.useNativeTimers?(e.setTimeoutFn=kA.bind($r),e.clearTimeoutFn=DA.bind($r)):(e.setTimeoutFn=$r.setTimeout.bind($r),e.clearTimeoutFn=$r.clearTimeout.bind($r))}const AA=1.33;function TA(e){return typeof e=="string"?_A(e):Math.ceil((e.byteLength||e.size)*AA)}function _A(e){let t=0,r=0;for(let a=0,s=e.length;a<s;a++)t=e.charCodeAt(a),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(a++,r+=4);return r}function Kw(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function OA(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}function RA(e){let t={},r=e.split("&");for(let a=0,s=r.length;a<s;a++){let o=r[a].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}class MA extends Error{constructor(t,r,a){super(t),this.description=r,this.context=a,this.type="TransportError"}}class Yg extends wt{constructor(t){super(),this.writable=!1,ud(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,r,a){return super.emitReserved("error",new MA(t,r,a)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=Hg(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,r={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const r=OA(t);return r.length?"?"+r:""}}class PA extends Yg{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let a=0;this._polling&&(a++,this.once("pollComplete",function(){--a||r()})),this.writable||(a++,this.once("drain",function(){--a||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=a=>{if(this.readyState==="opening"&&a.type==="open"&&this.onOpen(),a.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(a)};bA(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,xA(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=Kw()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(t,r)}}let Xw=!1;try{Xw=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const LA=Xw;function IA(){}class $A extends PA{constructor(t){if(super(t),typeof location<"u"){const r=location.protocol==="https:";let a=location.port;a||(a=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||a!==t.port}}doWrite(t,r){const a=this.request({method:"POST",data:t});a.on("success",r),a.on("error",(s,o)=>{this.onError("xhr post error",s,o)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,a)=>{this.onError("xhr poll error",r,a)}),this.pollXhr=t}}let Xs=class Oc extends wt{constructor(t,r,a){super(),this.createRequest=t,ud(this,a),this._opts=a,this._method=a.method||"GET",this._uri=r,this._data=a.data!==void 0?a.data:null,this._create()}_create(){var t;const r=Gw(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const a=this._xhr=this.createRequest(r);try{a.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){a.setDisableHeaderCheck&&a.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&a.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{a.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{a.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(a),"withCredentials"in a&&(a.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(a.timeout=this._opts.requestTimeout),a.onreadystatechange=()=>{var s;a.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(a.getResponseHeader("set-cookie"))),a.readyState===4&&(a.status===200||a.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof a.status=="number"?a.status:0)},0))},a.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=Oc.requestsCount++,Oc.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=IA,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Oc.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};Xs.requestsCount=0;Xs.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Kv);else if(typeof addEventListener=="function"){const e="onpagehide"in $r?"pagehide":"unload";addEventListener(e,Kv,!1)}}function Kv(){for(let e in Xs.requests)Xs.requests.hasOwnProperty(e)&&Xs.requests[e].abort()}const FA=function(){const e=Qw({xdomain:!1});return e&&e.responseType!==null}();class jA extends $A{constructor(t){super(t);const r=t&&t.forceBase64;this.supportsBinary=FA&&!r}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Xs(Qw,this.uri(),t)}}function Qw(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||LA))return new XMLHttpRequest}catch{}if(!t)try{return new $r[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Jw=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class BA extends Yg{get name(){return"websocket"}doOpen(){const t=this.uri(),r=this.opts.protocols,a=Jw?{}:Gw(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(a.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,r,a)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const a=t[r],s=r===t.length-1;Wg(a,this.supportsBinary,o=>{try{this.doWrite(a,o)}catch{}s&&cd(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=Kw()),this.supportsBinary||(r.b64=1),this.createUri(t,r)}}const Lm=$r.WebSocket||$r.MozWebSocket;class zA extends BA{createSocket(t,r,a){return Jw?new Lm(t,r,a):r?new Lm(t,r):new Lm(t)}doWrite(t,r){this.ws.send(r)}}class UA extends Yg{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const r=NA(Number.MAX_SAFE_INTEGER,this.socket.binaryType),a=t.readable.pipeThrough(r).getReader(),s=wA();s.readable.pipeTo(t.writable),this._writer=s.writable.getWriter();const o=()=>{a.read().then(({done:i,value:c})=>{i||(this.onPacket(c),o())}).catch(i=>{})};o();const l={type:"open"};this.query.sid&&(l.data=`{"sid":"${this.query.sid}"}`),this._writer.write(l).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const a=t[r],s=r===t.length-1;this._writer.write(a).then(()=>{s&&cd(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const VA={websocket:zA,webtransport:UA,polling:jA},WA=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,HA=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function cp(e){if(e.length>8e3)throw"URI too long";const t=e,r=e.indexOf("["),a=e.indexOf("]");r!=-1&&a!=-1&&(e=e.substring(0,r)+e.substring(r,a).replace(/:/g,";")+e.substring(a,e.length));let s=WA.exec(e||""),o={},l=14;for(;l--;)o[HA[l]]=s[l]||"";return r!=-1&&a!=-1&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=YA(o,o.path),o.queryKey=qA(o,o.query),o}function YA(e,t){const r=/\/{2,9}/g,a=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&a.splice(0,1),t.slice(-1)=="/"&&a.splice(a.length-1,1),a}function qA(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(a,s,o){s&&(r[s]=o)}),r}const up=typeof addEventListener=="function"&&typeof removeEventListener=="function",Rc=[];up&&addEventListener("offline",()=>{Rc.forEach(e=>e())},!1);class Oa extends wt{constructor(t,r){if(super(),this.binaryType=CA,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(r=t,t=null),t){const a=cp(t);r.hostname=a.host,r.secure=a.protocol==="https"||a.protocol==="wss",r.port=a.port,a.query&&(r.query=a.query)}else r.host&&(r.hostname=cp(r.host).host);ud(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(a=>{const s=a.prototype.name;this.transports.push(s),this._transportsByName[s]=a}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=RA(this.opts.query)),up&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Rc.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=qw,r.transport=t,this.id&&(r.sid=this.id);const a=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](a)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&Oa.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(t);r.open(),this.setTransport(r)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",Oa.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=t.data,this._onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let a=0;a<this.writeBuffer.length;a++){const s=this.writeBuffer[a].data;if(s&&(r+=TA(s)),a>0&&r>this._maxPayload)return this.writeBuffer.slice(0,a);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,cd(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,r,a){return this._sendPacket("message",t,r,a),this}send(t,r,a){return this._sendPacket("message",t,r,a),this}_sendPacket(t,r,a,s){if(typeof r=="function"&&(s=r,r=void 0),typeof a=="function"&&(s=a,a=null),this.readyState==="closing"||this.readyState==="closed")return;a=a||{},a.compress=a.compress!==!1;const o={type:t,data:r,options:a};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),s&&this.once("flush",s),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},a=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?a():t()}):this.upgrading?a():t()),this}_onError(t){if(Oa.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),up&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const a=Rc.indexOf(this._offlineEventListener);a!==-1&&Rc.splice(a,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this._prevBufferLen=0}}}Oa.protocol=qw;class GA extends Oa{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let r=this.createTransport(t),a=!1;Oa.priorWebsocketSuccess=!1;const s=()=>{a||(r.send([{type:"ping",data:"probe"}]),r.once("packet",m=>{if(!a)if(m.type==="pong"&&m.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;Oa.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{a||this.readyState!=="closed"&&(u(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=r.name,this.emitReserved("upgradeError",f)}}))};function o(){a||(a=!0,u(),r.close(),r=null)}const l=m=>{const f=new Error("probe error: "+m);f.transport=r.name,o(),this.emitReserved("upgradeError",f)};function i(){l("transport closed")}function c(){l("socket closed")}function d(m){r&&m.name!==r.name&&o()}const u=()=>{r.removeListener("open",s),r.removeListener("error",l),r.removeListener("close",i),this.off("close",c),this.off("upgrading",d)};r.once("open",s),r.once("error",l),r.once("close",i),this.once("close",c),this.once("upgrading",d),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{a||r.open()},200):r.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const r=[];for(let a=0;a<t.length;a++)~this.transports.indexOf(t[a])&&r.push(t[a]);return r}}let KA=class extends GA{constructor(t,r={}){const a=typeof t=="object"?t:r;(!a.transports||a.transports&&typeof a.transports[0]=="string")&&(a.transports=(a.transports||["polling","websocket","webtransport"]).map(s=>VA[s]).filter(s=>!!s)),super(t,a)}};function XA(e,t="",r){let a=e;r=r||typeof location<"u"&&location,e==null&&(e=r.protocol+"//"+r.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=r.protocol+e:e=r.host+e),/^(https?|wss?):\/\//.test(e)||(typeof r<"u"?e=r.protocol+"//"+e:e="https://"+e),a=cp(e)),a.port||(/^(http|ws)$/.test(a.protocol)?a.port="80":/^(http|ws)s$/.test(a.protocol)&&(a.port="443")),a.path=a.path||"/";const o=a.host.indexOf(":")!==-1?"["+a.host+"]":a.host;return a.id=a.protocol+"://"+o+":"+a.port+t,a.href=a.protocol+"://"+o+(r&&r.port===a.port?"":":"+a.port),a}const QA=typeof ArrayBuffer=="function",JA=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,Zw=Object.prototype.toString,ZA=typeof Blob=="function"||typeof Blob<"u"&&Zw.call(Blob)==="[object BlobConstructor]",eT=typeof File=="function"||typeof File<"u"&&Zw.call(File)==="[object FileConstructor]";function qg(e){return QA&&(e instanceof ArrayBuffer||JA(e))||ZA&&e instanceof Blob||eT&&e instanceof File}function Mc(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let r=0,a=e.length;r<a;r++)if(Mc(e[r]))return!0;return!1}if(qg(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return Mc(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&Mc(e[r]))return!0;return!1}function tT(e){const t=[],r=e.data,a=e;return a.data=dp(r,t),a.attachments=t.length,{packet:a,buffers:t}}function dp(e,t){if(!e)return e;if(qg(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}else if(Array.isArray(e)){const r=new Array(e.length);for(let a=0;a<e.length;a++)r[a]=dp(e[a],t);return r}else if(typeof e=="object"&&!(e instanceof Date)){const r={};for(const a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=dp(e[a],t));return r}return e}function rT(e,t){return e.data=mp(e.data,t),delete e.attachments,e}function mp(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=mp(e[r],t);else if(typeof e=="object")for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=mp(e[r],t));return e}const nT=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],aT=5;var Fe;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(Fe||(Fe={}));class sT{constructor(t){this.replacer=t}encode(t){return(t.type===Fe.EVENT||t.type===Fe.ACK)&&Mc(t)?this.encodeAsBinary({type:t.type===Fe.EVENT?Fe.BINARY_EVENT:Fe.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===Fe.BINARY_EVENT||t.type===Fe.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=tT(t),a=this.encodeAsString(r.packet),s=r.buffers;return s.unshift(a),s}}function Xv(e){return Object.prototype.toString.call(e)==="[object Object]"}class Gg extends wt{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t);const a=r.type===Fe.BINARY_EVENT;a||r.type===Fe.BINARY_ACK?(r.type=a?Fe.EVENT:Fe.ACK,this.reconstructor=new oT(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(qg(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const a={type:Number(t.charAt(0))};if(Fe[a.type]===void 0)throw new Error("unknown packet type "+a.type);if(a.type===Fe.BINARY_EVENT||a.type===Fe.BINARY_ACK){const o=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const l=t.substring(o,r);if(l!=Number(l)||t.charAt(r)!=="-")throw new Error("Illegal attachments");a.attachments=Number(l)}if(t.charAt(r+1)==="/"){const o=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););a.nsp=t.substring(o,r)}else a.nsp="/";const s=t.charAt(r+1);if(s!==""&&Number(s)==s){const o=r+1;for(;++r;){const l=t.charAt(r);if(l==null||Number(l)!=l){--r;break}if(r===t.length)break}a.id=Number(t.substring(o,r+1))}if(t.charAt(++r)){const o=this.tryParse(t.substr(r));if(Gg.isPayloadValid(a.type,o))a.data=o;else throw new Error("invalid payload")}return a}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case Fe.CONNECT:return Xv(r);case Fe.DISCONNECT:return r===void 0;case Fe.CONNECT_ERROR:return typeof r=="string"||Xv(r);case Fe.EVENT:case Fe.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&nT.indexOf(r[0])===-1);case Fe.ACK:case Fe.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class oT{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=rT(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const lT=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Gg,Encoder:sT,get PacketType(){return Fe},protocol:aT},Symbol.toStringTag,{value:"Module"}));function nn(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const iT=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class eN extends wt{constructor(t,r,a){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,a&&a.auth&&(this.auth=a.auth),this._opts=Object.assign({},a),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[nn(t,"open",this.onopen.bind(this)),nn(t,"packet",this.onpacket.bind(this)),nn(t,"error",this.onerror.bind(this)),nn(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){var a,s,o;if(iT.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(r.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const l={type:Fe.EVENT,data:r};if(l.options={},l.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const u=this.ids++,m=r.pop();this._registerAckCallback(u,m),l.id=u}const i=(s=(a=this.io.engine)===null||a===void 0?void 0:a.transport)===null||s===void 0?void 0:s.writable,c=this.connected&&!(!((o=this.io.engine)===null||o===void 0)&&o._hasPingExpired());return this.flags.volatile&&!i||(c?(this.notifyOutgoingListeners(l),this.packet(l)):this.sendBuffer.push(l)),this.flags={},this}_registerAckCallback(t,r){var a;const s=(a=this.flags.timeout)!==null&&a!==void 0?a:this._opts.ackTimeout;if(s===void 0){this.acks[t]=r;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let i=0;i<this.sendBuffer.length;i++)this.sendBuffer[i].id===t&&this.sendBuffer.splice(i,1);r.call(this,new Error("operation has timed out"))},s),l=(...i)=>{this.io.clearTimeoutFn(o),r.apply(this,i)};l.withError=!0,this.acks[t]=l}emitWithAck(t,...r){return new Promise((a,s)=>{const o=(l,i)=>l?s(l):a(i);o.withError=!0,r.push(o),this.emit(t,...r)})}_addToQueue(t){let r;typeof t[t.length-1]=="function"&&(r=t.pop());const a={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((s,...o)=>a!==this._queue[0]?void 0:(s!==null?a.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(s)):(this._queue.shift(),r&&r(null,...o)),a.pending=!1,this._drainQueue())),this._queue.push(a),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!t||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Fe.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(a=>String(a.id)===t)){const a=this.acks[t];delete this.acks[t],a.withError&&a.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Fe.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Fe.EVENT:case Fe.BINARY_EVENT:this.onevent(t);break;case Fe.ACK:case Fe.BINARY_ACK:this.onack(t);break;case Fe.DISCONNECT:this.ondisconnect();break;case Fe.CONNECT_ERROR:this.destroy();const a=new Error(t.data.message);a.data=t.data.data,this.emitReserved("connect_error",a);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const a of r)a.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const r=this;let a=!1;return function(...s){a||(a=!0,r.packet({type:Fe.ACK,id:t,data:s}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(delete this.acks[t.id],r.withError&&t.data.unshift(null),r.apply(this,t.data))}onconnect(t,r){this.id=t,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Fe.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let a=0;a<r.length;a++)if(t===r[a])return r.splice(a,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let a=0;a<r.length;a++)if(t===r[a])return r.splice(a,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const a of r)a.apply(this,t.data)}}}function So(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}So.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+r:e-r}return Math.min(e,this.max)|0};So.prototype.reset=function(){this.attempts=0};So.prototype.setMin=function(e){this.ms=e};So.prototype.setMax=function(e){this.max=e};So.prototype.setJitter=function(e){this.jitter=e};class fp extends wt{constructor(t,r){var a;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,ud(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((a=r.randomizationFactor)!==null&&a!==void 0?a:.5),this.backoff=new So({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const s=r.parser||lT;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new KA(this.uri,this.opts);const r=this.engine,a=this;this._readyState="opening",this.skipReconnect=!1;const s=nn(r,"open",function(){a.onopen(),t&&t()}),o=i=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",i),t?t(i):this.maybeReconnectOnOpen()},l=nn(r,"error",o);if(this._timeout!==!1){const i=this._timeout,c=this.setTimeoutFn(()=>{s(),o(new Error("timeout")),r.close()},i);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(s),this.subs.push(l),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(nn(t,"ping",this.onping.bind(this)),nn(t,"data",this.ondata.bind(this)),nn(t,"error",this.onerror.bind(this)),nn(t,"close",this.onclose.bind(this)),nn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){cd(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let a=this.nsps[t];return a?this._autoConnect&&!a.active&&a.connect():(a=new eN(this,t,r),this.nsps[t]=a),a}_destroy(t){const r=Object.keys(this.nsps);for(const a of r)if(this.nsps[a].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let a=0;a<r.length;a++)this.engine.write(r[a],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,r){var a;this.cleanup(),(a=this.engine)===null||a===void 0||a.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const a=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(s=>{s?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",s)):t.onreconnect()}))},r);this.opts.autoUnref&&a.unref(),this.subs.push(()=>{this.clearTimeoutFn(a)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Qo={};function Qs(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const r=XA(e,t.path||"/socket.io"),a=r.source,s=r.id,o=r.path,l=Qo[s]&&o in Qo[s].nsps,i=t.forceNew||t["force new connection"]||t.multiplex===!1||l;let c;return i?c=new fp(a,t):(Qo[s]||(Qo[s]=new fp(a,t)),c=Qo[s]),r.query&&!t.query&&(t.query=r.queryKey),c.socket(r.path,t)}Object.assign(Qs,{Manager:fp,Socket:eN,io:Qs,connect:Qs});const cT=()=>{var Tt,Jt,Qr,ir;const[e,t]=g.useState(!1),[r,a]=g.useState([]),[s,o]=g.useState([]),[l,i]=g.useState(""),[c,d]=g.useState(""),[u,m]=g.useState(!0),[f,x]=g.useState(null),[b,y]=g.useState(!1),[v,p]=g.useState(null),[h,E]=g.useState([]),[w,N]=g.useState(new Set),[S,C]=g.useState(!1),[D,k]=g.useState(0),[O,A]=g.useState([]),[$,P]=g.useState(!1),[I,L]=g.useState(!1),[F,T]=g.useState(!1),[M,V]=g.useState(60),X=g.useRef(null),z=g.useRef(null),U=g.useRef(null),Y=g.useRef(null),{user:Q}=Pe();g.useEffect(()=>{if(!Q||!e)return;const ne=localStorage.getItem("token"),Ee=Qs("http://localhost:3000",{auth:{token:ne,user:{id:Q.id,name:Q.name,role:Q.role}}});return Ee.on("connect",()=>{console.log("🔌 WebSocket connected:",Ee.id)}),Ee.on("disconnect",()=>{console.log("🔌 WebSocket disconnected")}),Ee.on("new_message",we=>{console.log("📨 Received new message:",we),a(Ne=>[...Ne,we]),o(Ne=>Ne.map(R=>R.userId===we.senderId?{...R,lastMessage:we.content,lastMessageTime:we.createdAt}:R)),l!==we.senderId&&"Notification"in window&&Notification.permission==="granted"&&new Notification(we.senderName,{body:we.content}),console.log("✅ Message sent confirmation:",we),a(Ne=>[...Ne,we])}),Ee.on("message_error",we=>{console.error("❌ Message error:",we.error),x(we.error)}),Ee.on("user_typing",we=>{we.isTyping?N(Ne=>new Set(Ne).add(we.userId)):N(Ne=>{const R=new Set(Ne);return R.delete(we.userId),R})}),Ee.on("user_connected",we=>{E(Ne=>[...Ne,we])}),Ee.on("user_disconnected",we=>{E(Ne=>Ne.filter(R=>R.userId!==we.userId))}),p(Ee),()=>{Ee.close()}},[Q,e]),g.useEffect(()=>{e&&(j(),B())},[e]),g.useEffect(()=>{l&&(H(l),k(0))},[l]),g.useEffect(()=>{K()},[r]),g.useEffect(()=>{if(!e)return;const ne=()=>{le()},Ee=["mousedown","mousemove","keypress","scroll","touchstart","click"];return Ee.forEach(we=>{document.addEventListener(we,ne,!0)}),le(),()=>{Ee.forEach(we=>{document.removeEventListener(we,ne,!0)}),U.current&&clearTimeout(U.current),Y.current&&clearInterval(Y.current)}},[e]);const j=async()=>{try{m(!0);const ne=localStorage.getItem("token"),Ee=await Z.get("/chat/conversations",{headers:{Authorization:`Bearer ${ne}`}});o(Ee.data);const we=Ee.data.reduce((Ne,R)=>Ne+R.unreadCount,0);k(we)}catch(ne){console.error("Error fetching conversations:",ne),x("Error al cargar las conversaciones")}finally{m(!1)}},B=async()=>{try{const ne=localStorage.getItem("token");let Ee="";if((Q==null?void 0:Q.role)==="CLIENTE")Ee="/users/lawyers";else if((Q==null?void 0:Q.role)==="ABOGADO")Ee="/users/clients";else return;const we=await Z.get(Ee,{headers:{Authorization:`Bearer ${ne}`}});(Q==null?void 0:Q.role)==="ABOGADO"?A(we.data.map(Ne=>({id:Ne.user.id,name:Ne.user.name,email:Ne.user.email,role:"CLIENTE"}))):A(we.data.map(Ne=>({id:Ne.id,name:Ne.name,email:Ne.email,role:"ABOGADO"})))}catch(ne){console.error("Error fetching available users:",ne)}},H=async ne=>{try{const Ee=localStorage.getItem("token"),we=await Z.get(`/chat/messages/${ne}`,{headers:{Authorization:`Bearer ${Ee}`}});a(we.data)}catch(Ee){console.error("Error fetching messages:",Ee),x("Error al cargar los mensajes")}},K=()=>{var ne;(ne=X.current)==null||ne.scrollIntoView({behavior:"smooth"})},fe=async ne=>{var Ee,we;if(ne.preventDefault(),console.log("🚀 SEND MESSAGE TRIGGERED!",{newMessage:c,selectedConversation:l}),!(!c.trim()||!l||!v))try{y(!0);const Ne={id:`temp-${Date.now()}`,content:c,senderId:Q.id,senderName:Q.name,receiverId:l,receiverName:((Ee=s.find(ue=>ue.userId===l))==null?void 0:Ee.userName)||((we=O.find(ue=>ue.id===l))==null?void 0:we.name)||"Usuario",createdAt:new Date().toISOString(),isOwnMessage:!0};a(ue=>[...ue,Ne]),console.log("📤 Sending message via WebSocket",{receiverId:l,content:c,socketId:v.id});const R=c;d(""),v.emit("send_message",{receiverId:l,content:R}),v.emit("typing_stop",{receiverId:l}),C(!1),setTimeout(()=>{K()},100),le(),console.log("✅ Message sent successfully")}catch(Ne){console.error("❌ Error sending message:",Ne),x("Error al enviar el mensaje")}finally{y(!1)}},W=ne=>{ne.key==="Enter"&&!ne.shiftKey&&(ne.preventDefault(),c.trim()&&!b&&fe({preventDefault:()=>{}}))},pe=ne=>{i(ne),P(!1),H(ne)},se=ne=>{i(ne),P(!1),a([])},be=ne=>{d(ne.target.value),!(!v||!l)&&(S||(C(!0),v.emit("typing_start",{receiverId:l})),z.current&&clearTimeout(z.current),z.current=setTimeout(()=>{C(!1),v.emit("typing_stop",{receiverId:l})},1e3))},$e=ne=>{const Ee=new Date(ne),Ne=(new Date().getTime()-Ee.getTime())/(1e3*60*60);return Ne<24?Ee.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):Ne<48?"Ayer":Ee.toLocaleDateString()},qe=ne=>h.some(Ee=>Ee.userId===ne),J=ne=>ne.charAt(0).toUpperCase(),le=()=>{U.current&&clearTimeout(U.current),Y.current&&clearInterval(Y.current),T(!1),V(60),U.current=setTimeout(()=>{T(!0),Se()},6e4)},Se=()=>{const ne=setInterval(()=>{V(Ee=>Ee<=1?(clearInterval(ne),Ce(),0):Ee-1)},1e3);Y.current=ne},Ce=()=>{a([]),o([]),i(""),d(""),x(null),k(0),T(!1),V(60),t(!1),U.current&&clearTimeout(U.current),Y.current&&clearInterval(Y.current),v&&v.emit("end_chat"),console.log("💬 Chat finalizado y historial limpiado")},ke=()=>{T(!1),V(60),le()},Re=()=>{t(!e),e?(a([]),o([]),i(""),d(""),x(null),k(0),U.current&&clearTimeout(U.current),Y.current&&clearInterval(Y.current),T(!1),V(60),v&&v.emit("end_chat")):(x(null),le())},He=()=>{a([])};return Q?n.createElement(n.Fragment,null,n.createElement("button",{onClick:Re,className:"fixed bottom-4 right-4 w-14 h-14 bg-blue-600 text-white rounded-full shadow-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 z-50","aria-label":"Abrir chat"},n.createElement("svg",{className:"w-6 h-6 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})),D>0&&n.createElement("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center"},D>9?"9+":D)),e&&n.createElement("div",{className:`fixed bottom-20 right-4 bg-white rounded-lg shadow-xl border z-50 flex flex-col transition-all duration-300 ${I?"w-80 h-96":"w-[450px] h-[600px]"}`},n.createElement("div",{className:"p-4 border-b bg-blue-600 text-white rounded-t-lg"},n.createElement("div",{className:"flex justify-between items-center"},n.createElement("h3",{className:"font-medium"},"Chat"),n.createElement("div",{className:"flex items-center space-x-2"},n.createElement("button",{onClick:Ce,className:"text-white hover:text-red-200 text-xs px-2 py-1 bg-red-600 rounded",title:"Finalizar chat"},"Finalizar"),n.createElement("button",{onClick:()=>L(!I),className:"text-white hover:text-gray-200","aria-label":I?"Maximizar":"Minimizar"},n.createElement("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},I?n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"}):n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4h16v16H4V4z"}))),n.createElement("button",{onClick:Re,className:"text-white hover:text-gray-200","aria-label":"Cerrar chat"},n.createElement("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})))))),F&&n.createElement("div",{className:"bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-3"},n.createElement("div",{className:"flex items-center justify-between"},n.createElement("div",{className:"flex items-center"},n.createElement("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})),n.createElement("span",{className:"text-sm font-medium"},"El chat se cerrará automáticamente en ",M," segundos por inactividad")),n.createElement("button",{onClick:ke,className:"ml-2 text-yellow-800 hover:text-yellow-900 text-sm font-medium underline"},"Mantener abierto"))),n.createElement("div",{className:"flex-1 flex flex-col"},l?n.createElement(n.Fragment,null,n.createElement("div",{className:"p-3 border-b bg-gray-50 flex items-center justify-between"},n.createElement("div",{className:"flex items-center"},n.createElement("button",{onClick:()=>i(""),className:"mr-2 text-gray-500 hover:text-gray-700","aria-label":"Volver a conversaciones"},n.createElement("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"}))),n.createElement("div",{className:"relative"},n.createElement("div",{className:"w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center"},n.createElement("span",{className:"text-white text-xs font-medium"},J(((Tt=s.find(ne=>ne.userId===l))==null?void 0:Tt.userName)||((Jt=O.find(ne=>ne.id===l))==null?void 0:Jt.name)||"U"))),qe(l)&&n.createElement("div",{className:"absolute -bottom-0.5 -right-0.5 w-2 h-2 bg-green-500 rounded-full border border-white"})),n.createElement("div",{className:"ml-2"},n.createElement("p",{className:"text-sm font-medium text-gray-900"},((Qr=s.find(ne=>ne.userId===l))==null?void 0:Qr.userName)||((ir=O.find(ne=>ne.id===l))==null?void 0:ir.name)||"Usuario"),n.createElement("p",{className:"text-xs text-gray-500"},qe(l)?"En línea":"Desconectado"))),n.createElement("div",{className:"flex items-center space-x-2"},n.createElement("button",{onClick:He,className:"text-blue-600 hover:text-blue-800 text-xs px-2 py-1 border border-blue-200 rounded",title:"Reiniciar conversación"},"Reiniciar"),n.createElement("button",{onClick:Re,className:"text-gray-500 hover:text-red-600 ml-2","aria-label":"Cerrar chat"},n.createElement("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}))))),n.createElement("div",{className:"flex-1 overflow-y-auto p-3 space-y-2 max-h-[60vh] min-h-[200px]",style:{scrollBehavior:"smooth"}},r.length===0?n.createElement("div",{className:"text-center text-gray-500 text-sm"},"No hay mensajes aún"):r.map(ne=>n.createElement("div",{key:ne.id,className:`flex ${ne.isOwnMessage?"justify-end":"justify-start"}`},n.createElement("div",{className:`max-w-[280px] px-3 py-2 rounded-lg text-sm break-words ${ne.isOwnMessage?"bg-blue-600 text-white":"bg-gray-200 text-gray-900"}`},n.createElement("div",null,ne.content),n.createElement("div",{className:`text-xs mt-1 ${ne.isOwnMessage?"text-blue-100":"text-gray-500"}`},$e(ne.createdAt))))),w.has(l)&&n.createElement("div",{className:"flex justify-start"},n.createElement("div",{className:"bg-gray-200 text-gray-900 px-3 py-2 rounded-lg text-sm"},"Escribiendo...")),n.createElement("div",{ref:X})),n.createElement("form",{onSubmit:fe,className:"p-3 border-t"},n.createElement("div",{className:"flex space-x-2"},n.createElement("textarea",{value:c,onChange:be,placeholder:"Escribe tu mensaje...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 min-h-[40px] max-h-[100px] resize-none",disabled:b,rows:1,onKeyDown:W}),n.createElement("button",{type:"submit",disabled:!c.trim()||b,className:"px-4 py-2 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed min-h-[40px] min-w-[40px]"},b?"...":"→")))):n.createElement("div",{className:"flex-1 overflow-y-auto p-4"},n.createElement("div",{className:"flex justify-between items-center mb-3"},n.createElement("h4",{className:"font-medium text-gray-900"},"Conversaciones"),n.createElement("button",{onClick:()=>P(!$),className:"text-blue-600 hover:text-blue-700 text-sm"},$?"Cancelar":"Nueva")),$?n.createElement("div",{className:"space-y-2"},n.createElement("h5",{className:"text-sm font-medium text-gray-700 mb-2"},(Q==null?void 0:Q.role)==="CLIENTE"?"Seleccionar Abogado":"Seleccionar Cliente"),O.length===0?n.createElement("div",{className:"text-center text-gray-500 text-sm"},"Cargando usuarios..."):O.map(ne=>n.createElement("div",{key:ne.id,onClick:()=>se(ne.id),className:"p-3 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors"},n.createElement("div",{className:"flex items-center space-x-3"},n.createElement("div",{className:"w-8 h-8 bg-green-600 rounded-full flex items-center justify-center"},n.createElement("span",{className:"text-white text-sm font-medium"},J(ne.name))),n.createElement("div",{className:"flex-1 min-w-0"},n.createElement("p",{className:"text-sm font-medium text-gray-900 truncate"},ne.name),n.createElement("p",{className:"text-xs text-gray-500 truncate"},ne.email)))))):n.createElement(n.Fragment,null,u?n.createElement("div",{className:"text-center text-gray-500"},"Cargando..."):s.length===0?n.createElement("div",{className:"text-center text-gray-500"},"No hay conversaciones"):n.createElement("div",{className:"space-y-2"},s.map(ne=>n.createElement("div",{key:ne.userId,onClick:()=>pe(ne.userId),className:"p-3 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors"},n.createElement("div",{className:"flex items-center space-x-3"},n.createElement("div",{className:"relative"},n.createElement("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center"},n.createElement("span",{className:"text-white text-sm font-medium"},J(ne.userName))),qe(ne.userId)&&n.createElement("div",{className:"absolute -bottom-1 -right-1 w-2 h-2 bg-green-500 rounded-full border border-white"})),n.createElement("div",{className:"flex-1 min-w-0"},n.createElement("div",{className:"flex justify-between items-start"},n.createElement("p",{className:"text-sm font-medium text-gray-900 truncate"},ne.userName),n.createElement("div",{className:"text-xs text-gray-400"},$e(ne.lastMessageTime))),n.createElement("p",{className:"text-xs text-gray-500 truncate"},ne.lastMessage),ne.unreadCount>0&&n.createElement("div",{className:"mt-1"},n.createElement("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800"},ne.unreadCount)))))))))),f&&n.createElement("div",{className:"p-3 bg-red-50 border-t border-red-200"},n.createElement("div",{className:"text-red-600 text-xs"},f)))):null},uT=()=>{const[e,t]=g.useState([]),[r,a]=g.useState(!0),[s,o]=g.useState(new Set),{user:l}=Pe(),i=bo();g.useEffect(()=>{if(!l)return;const u=async()=>{try{a(!0);const f=localStorage.getItem("token"),x=await Z.get("/appointments",{headers:{Authorization:`Bearer ${f}`}});let b=0;try{b=(await Z.get("/chat/unread-count",{headers:{Authorization:`Bearer ${f}`}})).data.count||0}catch{}const y=[],v=new Date,p=new Date(v.getFullYear(),v.getMonth(),v.getDate()),h=new Date(p);if(h.setDate(h.getDate()+1),l.role!=="ADMIN"){const E=x.data.filter(w=>new Date(w.date)>=p);if(E.length>0){const w=E.filter(N=>{const S=new Date(N.date);return S>=p&&S<h});w.length>0?y.push({id:"appointments-today",type:"appointment",count:w.length,title:"Citas de Hoy",description:`Tienes ${w.length} cita${w.length>1?"s":""} programada${w.length>1?"s":""} para hoy`,link:l.role==="CLIENTE"?"/client/appointments":"/lawyer/appointments"}):y.push({id:"appointments-upcoming",type:"appointment",count:E.length,title:"Próximas Citas",description:`Tienes ${E.length} cita${E.length>1?"s":""} programada${E.length>1?"s":""}`,link:l.role==="CLIENTE"?"/client/appointments":"/lawyer/appointments"})}}b>0&&y.push({id:"unread-messages",type:"message",count:b,title:"Mensajes Nuevos",description:`Tienes ${b} mensaje${b>1?"s":""} sin leer`,link:l.role==="CLIENTE"?"/client/chat":"/lawyer/chat"}),t(y)}catch(f){console.error("Error fetching notifications:",f)}finally{a(!1)}};u();const m=setInterval(u,3e4);return()=>clearInterval(m)},[l]),g.useEffect(()=>{const u=new Set(s);e.forEach(m=>{i.pathname===m.link&&u.add(m.id)}),u.size!==s.size&&o(u)},[i.pathname,e,s]);const c=u=>{o(m=>new Set([...m,u]))},d=e.filter(u=>!s.has(u.id));return r||d.length===0?null:n.createElement("div",{className:"fixed top-20 left-4 z-50 space-y-2 max-w-sm"},d.map(u=>n.createElement("div",{key:u.id,className:`bg-white rounded-lg shadow-lg border-l-4 p-4 transform transition-all duration-300 ${u.type==="appointment"?"border-blue-500":"border-green-500"}`},n.createElement("div",{className:"flex items-start justify-between"},n.createElement("div",{className:"flex-1"},n.createElement("div",{className:"flex items-center space-x-2 mb-1"},n.createElement("span",{className:"text-sm font-semibold text-gray-900"},u.title),n.createElement("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${u.type==="appointment"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`},u.count)),n.createElement("p",{className:"text-sm text-gray-600 mb-2"},u.description),n.createElement("div",{className:"flex space-x-2"},n.createElement("a",{href:u.link,className:`text-sm font-medium px-3 py-1 rounded-md transition-colors ${u.type==="appointment"?"bg-blue-100 text-blue-700 hover:bg-blue-200":"bg-green-100 text-green-700 hover:bg-green-200"}`},"Ver ",u.type==="appointment"?"Citas":"Mensajes"),n.createElement("button",{onClick:()=>c(u.id),className:"text-sm text-gray-500 hover:text-gray-700 px-2 py-1 rounded-md hover:bg-gray-100"},"Ocultar"))),n.createElement("button",{onClick:()=>c(u.id),className:"text-gray-400 hover:text-gray-600 ml-2"},n.createElement("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})))))))},dT=()=>{const[e,t]=g.useState({}),[r,a]=g.useState(!0),[s,o]=g.useState(null);g.useEffect(()=>{l()},[]);const l=async()=>{try{a(!0),o(null);const m=await Z.get("/site-config/public"),f={};m.data.forEach(x=>{f[x.key]=x.value}),t(f)}catch(m){console.error("Error fetching site configs:",m),o("Error al cargar las configuraciones del sitio")}finally{a(!1)}};return{configs:e,loading:r,error:s,getConfig:(m,f="")=>e[m]||f,getBooleanConfig:(m,f=!1)=>e[m]==="true"||f,getNumberConfig:(m,f=0)=>{const x=e[m];return x?parseInt(x,10):f},updateConfig:async(m,f)=>{try{return await Z.patch(`/site-config/key/${m}`,{value:f}),t(x=>({...x,[m]:f})),!0}catch(x){return console.error("Error updating config:",x),!1}},refresh:l}},mT=e=>{const[t,r]=g.useState(null),[a,s]=g.useState(!0),[o,l]=g.useState(null);g.useEffect(()=>{i()},[e]);const i=async()=>{try{s(!0),l(null);const u=await Z.get(`/menu-config/role/${e}`);r(u.data)}catch(u){console.error("Error fetching menu config:",u),l("Error al cargar la configuración del menú"),r(null)}finally{s(!1)}},c=()=>t?t.items.filter(u=>u.isVisible).sort((u,m)=>u.order-m.order):[],d=()=>(t==null?void 0:t.orientation)||"horizontal";return{menuConfig:t,menuItems:c(),orientation:d(),loading:a,error:o,refresh:i}},fT=e=>{const t=dT(),r=mT(e);return{siteName:t.getConfig("site_name","Despacho Legal"),siteDescription:t.getConfig("site_description","Servicios legales profesionales"),logoUrl:t.getConfig("logo_url","/images/logo.png"),faviconUrl:t.getConfig("favicon_url","/images/favicon.ico"),primaryColor:t.getConfig("primary_color","#1e40af"),secondaryColor:t.getConfig("secondary_color","#3b82f6"),sidebarPosition:t.getConfig("sidebar_position","left"),sidebarWidth:t.getConfig("sidebar_width","250px"),headerFixed:t.getBooleanConfig("header_fixed",!0),footerVisible:t.getBooleanConfig("footer_visible",!0),contactEmail:t.getConfig("contact_email","info@despacholegal.com"),contactPhone:t.getConfig("contact_phone","+34 123 456 789"),contactAddress:t.getConfig("contact_address","Calle Principal 123, Madrid"),officeHours:t.getConfig("office_hours","Lunes a Viernes: 9:00 - 18:00"),socialFacebook:t.getConfig("social_facebook",""),socialTwitter:t.getConfig("social_twitter",""),socialLinkedin:t.getConfig("social_linkedin",""),socialInstagram:t.getConfig("social_instagram",""),maintenanceMode:t.getBooleanConfig("maintenance_mode",!1),defaultLanguage:t.getConfig("default_language","es"),timezone:t.getConfig("timezone","Europe/Madrid"),dateFormat:t.getConfig("date_format","DD/MM/YYYY"),menuItems:r.menuItems,menuOrientation:r.orientation,loading:t.loading||r.loading,error:t.error||r.error,updateSiteConfig:t.updateConfig,refreshSiteConfig:t.refresh,refreshMenuConfig:r.refresh}},tN=()=>{const{user:e,logout:t}=Pe(),[r,a]=g.useState(!1),[s,o]=g.useState([]),[l,i]=g.useState("© 2024 Despacho Legal. Todos los derechos reservados."),[c,d]=g.useState(0),u=(e==null?void 0:e.role)==="ADMIN",m=(e==null?void 0:e.role)==="ABOGADO",f=(e==null?void 0:e.role)==="CLIENTE",{siteName:x,logoUrl:b,primaryColor:y,menuItems:v,menuOrientation:p,headerFixed:h,footerVisible:E,loading:w}=fT((e==null?void 0:e.role)||"CLIENTE"),N={backgroundColor:y},S=h?"fixed top-0 w-full z-50":"",C=A=>{if(A.children&&A.children.length>0)return n.createElement("div",{className:"relative"},n.createElement("button",{className:"hover:text-blue-200 px-2 py-1 rounded focus:outline-none flex items-center",onClick:()=>a(P=>!P),onBlur:()=>setTimeout(()=>a(!1),150)},A.icon&&n.createElement("span",{className:"mr-1"},A.icon),A.label,n.createElement("svg",{className:"inline w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"}))),r&&n.createElement("div",{className:"absolute right-0 mt-2 w-56 bg-white text-gray-900 rounded shadow-lg z-50"},A.children.map((P,I)=>n.createElement(De,{key:P.id||P.label||`child-${I}`,to:P.url,className:"block px-4 py-2 hover:bg-blue-100",onClick:()=>a(!1)},P.icon&&n.createElement("span",{className:"mr-2"},P.icon),P.label))));const $=A.url&&A.url.includes("/chat");return n.createElement(De,{to:A.url,className:"hover:text-blue-200 flex items-center relative",target:A.isExternal?"_blank":void 0,rel:A.isExternal?"noopener noreferrer":void 0},A.icon&&n.createElement("span",{className:"mr-1"},A.icon),A.label,$&&c>0&&n.createElement("span",{className:"ml-1 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-600 text-white absolute -top-2 -right-4"},c))},k=w?u?[{label:"Admin Dashboard",url:"/admin/dashboard",icon:"🏠"},{label:"Usuarios",url:"/admin/users",icon:"👥"},{label:"Expedientes",url:"/admin/cases",icon:"📋"},{label:"Citas",url:"/admin/appointments",icon:"📅"},{label:"Tareas",url:"/admin/tasks",icon:"✅"},{label:"Documentos",url:"/admin/documents",icon:"📄"},{label:"Reportes",url:"/admin/reports",icon:"📊"},{label:"Home Builder",url:"/admin/home-builder",icon:"🎨"}]:m?[{label:"Dashboard",url:"/dashboard",icon:"🏠"},{label:"Mis Expedientes",url:"/lawyer/cases",icon:"📋"},{label:"Citas",url:"/lawyer/appointments",icon:"📅"},{label:"Tareas",url:"/lawyer/tasks",icon:"✅"},{label:"Chat",url:"/lawyer/chat",icon:"💬"},{label:"Reportes",url:"/lawyer/reports",icon:"📊"},{label:"Facturación",url:"/lawyer/facturacion",icon:"🧾",children:[{label:"Provisión de Fondos",url:"/lawyer/provisiones",icon:"💰"},{label:"Facturación Electrónica",url:"/lawyer/facturacion",icon:"📄"}]}]:f?[{label:"Dashboard",url:"/dashboard",icon:"🏠"},{label:"Mis Expedientes",url:"/client/cases",icon:"📋"},{label:"Provisiones",url:"/client/provisiones",icon:"💰"},{label:"Mis Citas",url:"/client/appointments",icon:"📅"},{label:"Chat",url:"/client/chat",icon:"💬"}]:[]:v;g.useEffect(()=>{(async()=>{try{const[$,P]=await Promise.all([Z.get("/parametros/contact"),Z.get("/parametros/legal")]);o($.data);const I=P.data.find(L=>L.clave==="COPYRIGHT_TEXT");I&&i(I.valor)}catch($){console.error("Error fetching contact and legal params:",$)}})()},[]),g.useEffect(()=>{e&&(async()=>{try{const $=localStorage.getItem("token");if(!e)return;const P=await Z.get("/chat/unread-count",{headers:{Authorization:`Bearer ${$}`}});d(P.data.count||0)}catch{d(0)}})()},[e]);const O=A=>{const $=s.find(P=>P.clave===A);return $?$.valor:""};return n.createElement("div",{className:"min-h-screen flex flex-col"},n.createElement("nav",{className:`text-white ${S}`,style:N},n.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"flex items-center justify-between h-16"},n.createElement("div",{className:"flex items-center"},n.createElement(De,{to:"/",className:"text-xl font-bold flex items-center"},b&&n.createElement("img",{src:b,alt:x,className:"h-8 w-auto mr-2",onError:A=>{A.currentTarget.style.display="none"}}),x)),n.createElement("div",{className:"flex items-center space-x-4 relative"},e?n.createElement(n.Fragment,null,n.createElement("div",{className:`flex items-center space-x-4 ${p==="vertical"?"flex-col":""}`},k.map((A,$)=>n.createElement(n.Fragment,{key:A.id||A.label||`menu-item-${$}`},C(A)))),n.createElement("span",{className:"text-sm font-medium text-white bg-blue-900 rounded px-3 py-1"},e.name," ",e.email&&n.createElement("span",{className:"text-gray-300"},"(",e.email,")")),n.createElement("button",{onClick:t,className:"hover:text-blue-200"},"Cerrar Sesión")):n.createElement(n.Fragment,null,n.createElement(De,{to:"/login",className:"hover:text-blue-200"},"Iniciar Sesión"),n.createElement(De,{to:"/register",className:"hover:text-blue-200"},"Registro")))))),h&&n.createElement("div",{className:"h-16"}),e&&n.createElement(uT,null),n.createElement("main",{className:"flex-grow"},n.createElement("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},n.createElement(Bg,null))),E&&n.createElement("footer",{className:"bg-gray-800 text-white"},n.createElement("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8"},n.createElement("div",null,n.createElement("h3",{className:"text-lg font-semibold mb-4"},"Contacto"),n.createElement("div",{className:"space-y-2 text-sm"},O("CONTACT_INFO")&&n.createElement("p",{className:"text-gray-300 mb-2"},O("CONTACT_INFO")),O("CONTACT_EMAIL")&&n.createElement("p",null,"📧 ",O("CONTACT_EMAIL")),O("CONTACT_PHONE_PREFIX")&&O("CONTACT_PHONE")&&n.createElement("p",null,"📞 ",O("CONTACT_PHONE_PREFIX")," ",O("CONTACT_PHONE")))),n.createElement("div",null,n.createElement("h3",{className:"text-lg font-semibold mb-4"},"Enlaces"),n.createElement("div",{className:"space-y-2 text-sm"},n.createElement(De,{to:"/privacidad",className:"hover:text-gray-300 block"},"Política de Privacidad"),n.createElement(De,{to:"/terminos",className:"hover:text-gray-300 block"},"Términos de Servicio"),n.createElement(De,{to:"/cookies",className:"hover:text-gray-300 block"},"Política de Cookies"))),n.createElement("div",null,n.createElement("h3",{className:"text-lg font-semibold mb-4"},"Síguenos"),n.createElement("div",{className:"flex space-x-4"},O("SOCIAL_FACEBOOK")&&n.createElement("a",{href:O("SOCIAL_FACEBOOK"),target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-white"},"📘 Facebook"),O("SOCIAL_TWITTER")&&n.createElement("a",{href:O("SOCIAL_TWITTER"),target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-white"},"🐦 Twitter"),O("SOCIAL_LINKEDIN")&&n.createElement("a",{href:O("SOCIAL_LINKEDIN"),target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-white"},"💼 LinkedIn"),O("SOCIAL_INSTAGRAM")&&n.createElement("a",{href:O("SOCIAL_INSTAGRAM"),target:"_blank",rel:"noopener noreferrer",className:"text-gray-300 hover:text-white"},"📷 Instagram")))),n.createElement("div",{className:"mt-8 pt-8 border-t border-gray-700 text-center"},n.createElement("p",null,l)))),!e&&n.createElement(cT,null))},rN=({component:e})=>{console.log("ComponentRenderer - Rendering component:",e.type,e.props);const t=()=>{switch(e.type){case"hero-banner":return n.createElement(pT,{props:e.props});case"service-cards":return n.createElement(gT,{props:e.props});case"contact-form":return n.createElement(hT,{props:e.props});case"testimonials":return n.createElement(vT,{props:e.props});case"stats":return n.createElement(yT,{props:e.props});case"text-block":return n.createElement(ET,{props:e.props});case"image-gallery":return n.createElement(xT,{props:e.props});case"map":return n.createElement(bT,{props:e.props});case"divider":return n.createElement(wT,{props:e.props});case"spacer":return n.createElement(NT,{props:e.props});default:return n.createElement("div",{className:"p-4 bg-red-100 border border-red-300 rounded"},n.createElement("p",{className:"text-red-700"},"Componente no reconocido: ",e.type))}};return n.createElement("div",{className:"component-renderer"},t())},pT=({props:e})=>n.createElement("div",{className:"relative bg-gradient-to-r from-blue-600 to-purple-700 text-white p-8 rounded-lg"},n.createElement("div",{className:"text-center"},n.createElement("h1",{className:"text-4xl font-bold mb-4"},e.title||"Banner Principal"),n.createElement("p",{className:"text-xl mb-6 opacity-90"},e.subtitle||"Subtítulo del banner"),n.createElement("a",{href:e.ctaLink||"/contact",className:"inline-block bg-white text-blue-600 px-6 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors"},e.ctaText||"Consultar Ahora"))),gT=({props:e})=>n.createElement("div",{className:"bg-white p-6 rounded-lg border"},n.createElement("h2",{className:"text-2xl font-bold text-center mb-6"},e.title||"Nuestros Servicios"),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6"},(e.services||[]).map((t,r)=>n.createElement("div",{key:r,className:"text-center p-4 border rounded-lg hover:shadow-md transition-shadow"},n.createElement("div",{className:"text-4xl mb-3"},t.icon||"⚖️"),n.createElement("h3",{className:"text-lg font-semibold mb-2"},t.title||"Servicio"),n.createElement("p",{className:"text-gray-600"},t.description||"Descripción del servicio"))))),hT=({props:e})=>n.createElement("div",{className:"bg-white p-6 rounded-lg border"},n.createElement("h2",{className:"text-2xl font-bold text-center mb-4"},e.title||"Contáctanos"),n.createElement("p",{className:"text-center text-gray-600 mb-6"},e.subtitle||"Estamos aquí para ayudarte"),n.createElement("form",{className:"space-y-4"},n.createElement("input",{type:"text",placeholder:"Nombre",className:"w-full p-3 border rounded-lg",disabled:!0}),n.createElement("input",{type:"email",placeholder:"Email",className:"w-full p-3 border rounded-lg",disabled:!0}),n.createElement("input",{type:"tel",placeholder:"Teléfono",className:"w-full p-3 border rounded-lg",disabled:!0}),n.createElement("textarea",{placeholder:"Mensaje",rows:4,className:"w-full p-3 border rounded-lg",disabled:!0}),n.createElement("button",{type:"submit",className:"w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors",disabled:!0},"Enviar Mensaje"))),vT=({props:e})=>n.createElement("div",{className:"bg-gray-50 p-6 rounded-lg"},n.createElement("h2",{className:"text-2xl font-bold text-center mb-6"},e.title||"Lo que dicen nuestros clientes"),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},(e.testimonials||[]).map((t,r)=>n.createElement("div",{key:r,className:"bg-white p-4 rounded-lg shadow-sm"},n.createElement("div",{className:"flex items-center mb-3"},n.createElement("div",{className:"text-yellow-400 text-lg"},"★★★★★")),n.createElement("p",{className:"text-gray-700 mb-3"},'"',t.text||"Excelente servicio",'"'),n.createElement("p",{className:"font-semibold text-gray-900"},t.name||"Cliente"))))),yT=({props:e})=>n.createElement("div",{className:"bg-white p-6 rounded-lg border"},n.createElement("h2",{className:"text-2xl font-bold text-center mb-6"},e.title||"Nuestros Números"),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6"},(e.stats||[]).map((t,r)=>n.createElement("div",{key:r,className:"text-center"},n.createElement("div",{className:"text-3xl font-bold text-blue-600 mb-2"},t.value||"0"),n.createElement("div",{className:"text-gray-600"},t.label||"Estadística"))))),ET=({props:e})=>n.createElement("div",{className:`bg-white p-6 rounded-lg border text-${e.alignment||"left"}`},n.createElement("h2",{className:"text-2xl font-bold mb-4"},e.title||"Título del bloque"),n.createElement("p",{className:`text-gray-700 ${e.fontSize==="large"?"text-lg":e.fontSize==="small"?"text-sm":"text-base"}`},e.content||"Contenido del bloque de texto. Aquí puedes escribir cualquier información relevante.")),xT=({props:e})=>n.createElement("div",{className:"bg-white p-6 rounded-lg border"},n.createElement("h2",{className:"text-2xl font-bold text-center mb-6"},e.title||"Galería de Imágenes"),n.createElement("div",{className:`grid grid-cols-${e.columns||3} gap-4`},(e.images||[]).map((t,r)=>n.createElement("div",{key:r,className:"aspect-square bg-gray-200 rounded-lg flex items-center justify-center"},n.createElement("span",{className:"text-gray-500"},"🖼️ Imagen ",r+1))))),bT=({props:e})=>n.createElement("div",{className:"bg-white p-6 rounded-lg border"},n.createElement("h2",{className:"text-2xl font-bold text-center mb-4"},e.title||"Nuestra Ubicación"),n.createElement("div",{className:"bg-gray-200 h-64 rounded-lg flex items-center justify-center"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-4xl mb-2"},"🗺️"),n.createElement("p",{className:"text-gray-600"},e.address||"Dirección del despacho")))),wT=({props:e})=>n.createElement("div",{className:"flex items-center justify-center py-4"},n.createElement("div",{className:`w-full h-${e.thickness||1} bg-${e.color||"gray-300"}`,style:{backgroundColor:e.color||"#e5e7eb"}})),NT=({props:e})=>n.createElement("div",{style:{height:`${e.height||40}px`}}),Kg=xe.create({baseURL:"http://localhost:8000"});Kg.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e});Kg.interceptors.response.use(e=>e,e=>(console.error("Chatbot API Error:",e),Promise.reject(e)));const ST=()=>{const[e,t]=g.useState(!1),[r,a]=g.useState([]),[s,o]=g.useState(""),[l,i]=g.useState(!1),[c,d]=g.useState(null),u=g.useRef(null);g.useEffect(()=>{e&&r.length===0&&a([{text:"¡Hola! Soy el asistente virtual del despacho legal. ¿En qué puedo ayudarte hoy? Puedo informarte sobre nuestros servicios, honorarios, horarios de atención o ayudarte a agendar una cita.",isUser:!1,timestamp:new Date().toISOString()}])},[e,r.length]),g.useEffect(()=>{m()},[r]);const m=()=>{var y;(y=u.current)==null||y.scrollIntoView({behavior:"smooth"})},f=async y=>{if(y.preventDefault(),!s.trim()||l)return;const v=s.trim();o(""),i(!0),d(null);const p={text:v,isUser:!0,timestamp:new Date().toISOString()};a(h=>[...h,p]);try{const E={text:(await Kg.post("/chat",{text:v,language:"es"})).data.response,isUser:!1,timestamp:new Date().toISOString()};a(w=>[...w,E])}catch(h){console.error("Error sending message:",h),d("Error al enviar el mensaje. Por favor, intenta de nuevo.");const E={text:"Lo siento, estoy teniendo problemas para procesar tu mensaje. Por favor, intenta de nuevo o contacta directamente al despacho.",isUser:!1,timestamp:new Date().toISOString()};a(w=>[...w,E])}finally{i(!1)}},x=()=>{t(!e),e||d(null)},b=y=>new Date(y).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"});return n.createElement("div",{className:"fixed bottom-4 right-4 z-50"},n.createElement("button",{onClick:x,className:"bg-blue-600 hover:bg-blue-700 text-white rounded-full p-4 shadow-lg transition-all duration-200 transform hover:scale-110",title:"Chat del despacho - ¡Consulta gratis!"},n.createElement("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"}))),e&&n.createElement("div",{className:"absolute bottom-16 right-0 w-96 h-96 bg-white rounded-lg shadow-xl border border-gray-200 flex flex-col"},n.createElement("div",{className:"bg-blue-600 text-white p-4 rounded-t-lg"},n.createElement("div",{className:"flex justify-between items-center"},n.createElement("div",null,n.createElement("h3",{className:"font-semibold"},"Asistente Virtual"),n.createElement("p",{className:"text-sm opacity-90"},"Despacho Legal García & Asociados"),n.createElement("p",{className:"text-xs opacity-75"},"Consulta inicial gratuita")),n.createElement("button",{onClick:x,className:"text-white hover:text-gray-200"},n.createElement("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}))))),n.createElement("div",{className:"flex-1 overflow-y-auto p-4 space-y-3"},r.map((y,v)=>n.createElement("div",{key:v,className:`flex ${y.isUser?"justify-end":"justify-start"}`},n.createElement("div",{className:`max-w-xs px-3 py-2 rounded-lg ${y.isUser?"bg-blue-600 text-white":"bg-gray-100 text-gray-800"}`},n.createElement("p",{className:"text-sm whitespace-pre-wrap"},y.text),n.createElement("p",{className:`text-xs mt-1 ${y.isUser?"text-blue-100":"text-gray-500"}`},b(y.timestamp))))),l&&n.createElement("div",{className:"flex justify-start"},n.createElement("div",{className:"bg-gray-100 text-gray-800 max-w-xs px-3 py-2 rounded-lg"},n.createElement("div",{className:"flex space-x-1"},n.createElement("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),n.createElement("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),n.createElement("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})))),c&&n.createElement("div",{className:"flex justify-start"},n.createElement("div",{className:"bg-red-100 text-red-800 max-w-xs px-3 py-2 rounded-lg"},n.createElement("p",{className:"text-sm"},c))),n.createElement("div",{ref:u})),n.createElement("div",{className:"p-4 border-t border-gray-200"},n.createElement("div",{className:"mb-3 flex flex-wrap gap-2"},["Honorarios","Servicios","Cita","Horarios"].map(y=>n.createElement("button",{key:y,onClick:()=>o(y),className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded hover:bg-blue-200 transition-colors"},y))),n.createElement("form",{onSubmit:f,className:"flex space-x-2"},n.createElement("input",{type:"text",value:s,onChange:y=>o(y.target.value),placeholder:"Escribe tu consulta...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:l}),n.createElement("button",{type:"submit",disabled:l||!s.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"},n.createElement("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})))))))},CT=()=>{const[e,t]=g.useState(!0);return e?n.createElement("div",{className:"fixed bottom-20 right-4 z-40 bg-blue-600 text-white p-4 rounded-lg shadow-lg max-w-sm animate-pulse"},n.createElement("div",{className:"flex items-start space-x-3"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"}))),n.createElement("div",{className:"flex-1"},n.createElement("h4",{className:"font-semibold text-sm"},"¿Necesitas ayuda legal?"),n.createElement("p",{className:"text-xs opacity-90 mt-1"},"Nuestro asistente virtual está aquí para ayudarte. Consulta gratuita disponible.")),n.createElement("button",{onClick:()=>t(!1),className:"text-white hover:text-gray-200"},n.createElement("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}))))):null},kT=()=>{const[e,t]=g.useState(null),[r,a]=g.useState(!0),[s,o]=g.useState(null),{user:l}=Pe();return g.useEffect(()=>{(async()=>{try{a(!0);const c=await fetch("/api/layouts/home");if(c.ok){const d=await c.json();t(d)}else if(c.status===404)t(Qv());else throw new Error("Error al cargar el layout")}catch(c){console.error("Error fetching layout:",c),o("Error al cargar la página"),t(Qv())}finally{a(!1)}})()},[]),r?n.createElement("div",{className:"min-h-screen flex items-center justify-center"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.createElement("p",{className:"text-gray-600"},"Cargando..."))):s&&!e?n.createElement("div",{className:"min-h-screen flex items-center justify-center"},n.createElement("div",{className:"text-center"},n.createElement("h2",{className:"text-2xl font-bold text-red-600 mb-4"},"Error"),n.createElement("p",{className:"text-gray-600"},s))):e?n.createElement("div",{className:"min-h-screen"},e.components.map(i=>n.createElement("div",{key:i.id},n.createElement(rN,{component:i}))),!l&&n.createElement(n.Fragment,null,n.createElement(ST,null),n.createElement(CT,null))):n.createElement("div",{className:"min-h-screen flex items-center justify-center"},n.createElement("div",{className:"text-center"},n.createElement("h2",{className:"text-2xl font-bold text-gray-600 mb-4"},"Página no encontrada"),n.createElement("p",{className:"text-gray-500"},"No hay contenido configurado para esta página.")))},Qv=()=>({id:"default-home",name:"Home Page",components:[{id:"default-hero",type:"hero-banner",props:{title:"Bienvenido a Nuestro Despacho Legal",subtitle:"Servicios legales profesionales y confiables para proteger sus derechos",backgroundImage:"/images/hero-bg.jpg",ctaText:"Consultar Ahora",ctaLink:"/contact"},order:0},{id:"default-services",type:"service-cards",props:{title:"Nuestros Servicios",services:[{title:"Derecho Civil",description:"Asesoría especializada en casos civiles y comerciales",icon:"⚖️"},{title:"Derecho Laboral",description:"Protección de sus derechos laborales y reclamaciones",icon:"👥"},{title:"Derecho Familiar",description:"Divorcios, custodia y asuntos familiares",icon:"👨‍👩‍👧‍👦"}]},order:1},{id:"default-stats",type:"stats",props:{title:"Nuestros Números",stats:[{label:"Casos Exitosos",value:"500+",icon:"✅"},{label:"Años de Experiencia",value:"15",icon:"📅"},{label:"Clientes Satisfechos",value:"1000+",icon:"👥"}]},order:2},{id:"default-contact",type:"contact-form",props:{title:"Contáctanos",subtitle:"Estamos aquí para ayudarte con tu caso legal",fields:["nombre","email","telefono","mensaje"],submitText:"Enviar Consulta"},order:3}],version:1,lastModified:new Date().toISOString()}),DT=()=>n.createElement(kT,null),AT=()=>{const[e,t]=g.useState({nombre:"",email:"",telefono:"",asunto:"",mensaje:""}),[r,a]=g.useState(!1),[s,o]=g.useState("idle"),l=c=>{const{name:d,value:u}=c.target;t(m=>({...m,[d]:u}))},i=async c=>{c.preventDefault(),a(!0),o("idle");try{if((await fetch("/api/contact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,ip:"unknown",userAgent:navigator.userAgent})})).ok)o("success"),t({nombre:"",email:"",telefono:"",asunto:"",mensaje:""});else throw new Error("Error en el servidor")}catch(d){console.error("Error al enviar formulario:",d),o("error")}finally{a(!1)}};return n.createElement(tN,null,n.createElement("div",{className:"min-h-screen bg-gray-50 py-12"},n.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"text-center mb-12"},n.createElement("h1",{className:"text-4xl font-bold text-gray-900 mb-4"},"Contáctanos"),n.createElement("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto"},"Estamos aquí para ayudarte. Nuestros abogados especialistas están listos para atender tu consulta y brindarte la asesoría legal que necesitas.")),n.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12"},n.createElement("div",{className:"space-y-8"},n.createElement("div",{className:"bg-white rounded-lg shadow-sm border p-8"},n.createElement("h2",{className:"text-2xl font-semibold text-gray-900 mb-6"},"Información de Contacto"),n.createElement("div",{className:"space-y-6"},n.createElement("div",{className:"flex items-start space-x-4"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center"},n.createElement("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})))),n.createElement("div",null,n.createElement("h3",{className:"text-lg font-medium text-gray-900"},"Dirección"),n.createElement("p",{className:"text-gray-600 mt-1"},"Calle Principal 123",n.createElement("br",null),"Madrid, 28001",n.createElement("br",null),"España"))),n.createElement("div",{className:"flex items-start space-x-4"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center"},n.createElement("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})))),n.createElement("div",null,n.createElement("h3",{className:"text-lg font-medium text-gray-900"},"Teléfono"),n.createElement("p",{className:"text-gray-600 mt-1"},n.createElement("a",{href:"tel:+34612345678",className:"hover:text-blue-600"},"+34 612 345 678")))),n.createElement("div",{className:"flex items-start space-x-4"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center"},n.createElement("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})))),n.createElement("div",null,n.createElement("h3",{className:"text-lg font-medium text-gray-900"},"Email"),n.createElement("p",{className:"text-gray-600 mt-1"},n.createElement("a",{href:"mailto:info@despachoabogados.com",className:"hover:text-blue-600"},"info@despachoabogados.com")))),n.createElement("div",{className:"flex items-start space-x-4"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center"},n.createElement("svg",{className:"w-6 h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})))),n.createElement("div",null,n.createElement("h3",{className:"text-lg font-medium text-gray-900"},"Horario de Atención"),n.createElement("p",{className:"text-gray-600 mt-1"},"Lunes - Viernes: 9:00 - 18:00",n.createElement("br",null),"Sábados: 9:00 - 14:00",n.createElement("br",null),"Domingos: Cerrado"))))),n.createElement("div",{className:"bg-white rounded-lg shadow-sm border p-8"},n.createElement("h2",{className:"text-2xl font-semibold text-gray-900 mb-6"},"Servicios Destacados"),n.createElement("div",{className:"space-y-4"},n.createElement("div",{className:"flex items-center space-x-3"},n.createElement("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center"},n.createElement("span",{className:"text-blue-600 text-sm font-semibold"},"⚖️")),n.createElement("span",{className:"text-gray-700"},"Derecho Civil")),n.createElement("div",{className:"flex items-center space-x-3"},n.createElement("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center"},n.createElement("span",{className:"text-green-600 text-sm font-semibold"},"👥")),n.createElement("span",{className:"text-gray-700"},"Derecho Laboral")),n.createElement("div",{className:"flex items-center space-x-3"},n.createElement("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center"},n.createElement("span",{className:"text-purple-600 text-sm font-semibold"},"👨‍👩‍👧‍👦")),n.createElement("span",{className:"text-gray-700"},"Derecho Familiar")),n.createElement("div",{className:"flex items-center space-x-3"},n.createElement("div",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center"},n.createElement("span",{className:"text-orange-600 text-sm font-semibold"},"🏢")),n.createElement("span",{className:"text-gray-700"},"Derecho Empresarial"))))),n.createElement("div",{className:"bg-white rounded-lg shadow-sm border p-8"},n.createElement("h2",{className:"text-2xl font-semibold text-gray-900 mb-6"},"Solicita tu Consulta Gratuita"),s==="success"&&n.createElement("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg"},n.createElement("div",{className:"flex"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor"},n.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"}))),n.createElement("div",{className:"ml-3"},n.createElement("p",{className:"text-sm text-green-800"},"¡Gracias por tu mensaje! Nos pondremos en contacto contigo en las próximas 24 horas.")))),s==="error"&&n.createElement("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg"},n.createElement("div",{className:"flex"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},n.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))),n.createElement("div",{className:"ml-3"},n.createElement("p",{className:"text-sm text-red-800"},"Ha ocurrido un error al enviar tu mensaje. Por favor, inténtalo de nuevo.")))),n.createElement("form",{onSubmit:i,className:"space-y-6"},n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},n.createElement("div",null,n.createElement("label",{htmlFor:"nombre",className:"block text-sm font-medium text-gray-700 mb-2"},"Nombre Completo *"),n.createElement("input",{type:"text",id:"nombre",name:"nombre",value:e.nombre,onChange:l,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Tu nombre completo"})),n.createElement("div",null,n.createElement("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2"},"Email *"),n.createElement("input",{type:"email",id:"email",name:"email",value:e.email,onChange:l,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"tu@email.com"}))),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},n.createElement("div",null,n.createElement("label",{htmlFor:"telefono",className:"block text-sm font-medium text-gray-700 mb-2"},"Teléfono"),n.createElement("input",{type:"tel",id:"telefono",name:"telefono",value:e.telefono,onChange:l,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"+34 612 345 678"})),n.createElement("div",null,n.createElement("label",{htmlFor:"asunto",className:"block text-sm font-medium text-gray-700 mb-2"},"Asunto *"),n.createElement("select",{id:"asunto",name:"asunto",value:e.asunto,onChange:l,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},n.createElement("option",{value:""},"Selecciona un asunto"),n.createElement("option",{value:"consulta-civil"},"Consulta - Derecho Civil"),n.createElement("option",{value:"consulta-laboral"},"Consulta - Derecho Laboral"),n.createElement("option",{value:"consulta-familiar"},"Consulta - Derecho Familiar"),n.createElement("option",{value:"consulta-empresarial"},"Consulta - Derecho Empresarial"),n.createElement("option",{value:"contratos"},"Elaboración de Contratos"),n.createElement("option",{value:"herencias"},"Gestión de Herencias"),n.createElement("option",{value:"otro"},"Otro")))),n.createElement("div",null,n.createElement("label",{htmlFor:"mensaje",className:"block text-sm font-medium text-gray-700 mb-2"},"Mensaje *"),n.createElement("textarea",{id:"mensaje",name:"mensaje",value:e.mensaje,onChange:l,required:!0,rows:6,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Describe tu consulta o situación legal..."})),n.createElement("div",{className:"flex items-start space-x-3"},n.createElement("input",{type:"checkbox",id:"privacidad",required:!0,className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),n.createElement("label",{htmlFor:"privacidad",className:"text-sm text-gray-600"},"Acepto la"," ",n.createElement("a",{href:"/privacidad",className:"text-blue-600 hover:text-blue-500"},"política de privacidad")," ","y el"," ",n.createElement("a",{href:"/terminos",className:"text-blue-600 hover:text-blue-500"},"tratamiento de datos personales"))),n.createElement("button",{type:"submit",disabled:r,className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},r?n.createElement("div",{className:"flex items-center justify-center"},n.createElement("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},n.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),"Enviando..."):"Enviar Consulta")))),n.createElement("div",{className:"mt-16"},n.createElement("div",{className:"bg-white rounded-lg shadow-sm border p-8"},n.createElement("h2",{className:"text-2xl font-semibold text-gray-900 mb-6 text-center"},"Nuestra Ubicación"),n.createElement("div",{className:"bg-gray-200 h-96 rounded-lg flex items-center justify-center"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-6xl mb-4"},"🗺️"),n.createElement("p",{className:"text-gray-600 text-lg"},"Calle Principal 123, Madrid, 28001"),n.createElement("p",{className:"text-gray-500 mt-2"},"Mapa interactivo (integrado con Google Maps)"))))))))},Im=()=>{const{user:e}=Pe(),t=qr(),[r,a]=g.useState({totalCases:0,activeCases:0,pendingAppointments:0,recentDocuments:0,totalUsers:0}),[s,o]=g.useState(!0),[l,i]=g.useState(null),[c,d]=g.useState([]);g.useEffect(()=>{e&&window.location.pathname==="/dashboard"&&(e.role==="ADMIN"?t("/admin/dashboard",{replace:!0}):e.role==="ABOGADO"?t("/lawyer/dashboard",{replace:!0}):e.role==="CLIENTE"&&t("/client/dashboard",{replace:!0}))},[e,t]);const u=(v,p)=>{if(v===0)return{value:"0%",positive:!1,neutral:!0};const h=Math.random()*20+5;return Math.random()>.3?{value:`+${h.toFixed(1)}%`,positive:!0,neutral:!1}:{value:`-${(h*.5).toFixed(1)}%`,positive:!1,neutral:!1}},m=()=>{const v=u(r.totalCases),p=u(r.activeCases),h=u(r.pendingAppointments),E=u(r.recentDocuments);return{cases:v,activeCases:p,appointments:h,documents:E}};g.useEffect(()=>{if(console.log("Dashboard useEffect: user",e),!e)return;(async()=>{o(!0),i(null);try{const p=localStorage.getItem("token"),h=[Z.get("/cases/stats"),Z.get("/appointments"),Z.get("/documents/stats")];(e==null?void 0:e.role)==="ADMIN"&&h.push(Z.get("/users")),h.push(Z.get("/cases/recent")),(e==null?void 0:e.role)==="ABOGADO"&&h.push(Z.get("/cases/recent-activities"));const E=await Promise.allSettled(h);E.forEach((F,T)=>{F.status==="fulfilled"&&"value"in F?console.log(`Dashboard stats result[${T}]`,F.value.data):F.status==="rejected"&&"reason"in F&&console.error(`Dashboard stats error[${T}]`,F.reason)});const w=E[0].status==="fulfilled"?E[0].value.data:{},N=E[1].status==="fulfilled"?E[1].value.data:[],S=E[2].status==="fulfilled"?E[2].value.data:{},C=(e==null?void 0:e.role)==="ADMIN"&&E[3]&&E[3].status==="fulfilled"?E[3].value.data:[],D=E[(e==null?void 0:e.role)==="ADMIN"?4:3]&&E[(e==null?void 0:e.role)==="ADMIN"?4:3].status==="fulfilled"?E[(e==null?void 0:e.role)==="ADMIN"?4:3].value.data:[],k=(e==null?void 0:e.role)==="ABOGADO"&&E[4]&&E[4].status==="fulfilled"?E[4].value.data:null;let O=0,A=0,$=0,P=0,I=0;if(((e==null?void 0:e.role)==="ADMIN"||(e==null?void 0:e.role)==="ABOGADO"||(e==null?void 0:e.role)==="CLIENTE")&&(O=w.total||0,A=(w.abiertos||0)+(w.enProceso||0)),Array.isArray(N)){const F=new Date;(e==null?void 0:e.role)==="ADMIN"?$=N.filter(T=>new Date(T.date)>F).length:((e==null?void 0:e.role)==="ABOGADO"||(e==null?void 0:e.role)==="CLIENTE")&&($=N.filter(T=>{const M=new Date(T.date);return M.getDate()===F.getDate()&&M.getMonth()===F.getMonth()&&M.getFullYear()===F.getFullYear()}).length)}S&&typeof S.total=="number"&&(P=S.total),(e==null?void 0:e.role)==="ADMIN"&&Array.isArray(C)&&(I=C.length),a({totalCases:O,activeCases:A,pendingAppointments:$,recentDocuments:P,totalUsers:I});const L=[];(e==null?void 0:e.role)==="ABOGADO"&&k?(k.cases&&k.cases.length>0&&k.cases.forEach(F=>{L.push({action:`Expediente: ${F.title}`,time:F.createdAt,type:"case",id:F.id,link:`/lawyer/cases/${F.id}`,entityType:"Expediente"})}),k.tasks&&k.tasks.length>0&&k.tasks.forEach(F=>{var V,X,z;const T=((X=(V=F.client)==null?void 0:V.user)==null?void 0:X.name)||"Cliente",M=(z=F.expediente)!=null&&z.title?` - ${F.expediente.title}`:"";L.push({action:`Tarea: ${F.title} (${T}${M})`,time:new Date(F.createdAt).toLocaleDateString(),type:"task",id:F.id,link:"/lawyer/tasks",entityType:"task"})}),k.appointments&&k.appointments.length>0&&k.appointments.forEach(F=>{var M,V;const T=((V=(M=F.client)==null?void 0:M.user)==null?void 0:V.name)||"Cliente";L.push({action:`Cita con ${T} - ${new Date(F.date).toLocaleDateString()}`,time:new Date(F.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),type:"appointment",id:F.id,link:"/lawyer/appointments",entityType:"appointment"})}),k.provisions&&k.provisions.length>0&&k.provisions.forEach(F=>{var V,X,z;const T=((X=(V=F.client)==null?void 0:V.user)==null?void 0:X.name)||"Cliente",M=(z=F.expediente)!=null&&z.title?` - ${F.expediente.title}`:"";L.push({action:`Provisión de fondos: ${F.amount}€ (${T}${M})`,time:new Date(F.createdAt).toLocaleDateString(),type:"provision",id:F.id,link:"/lawyer/provisiones",entityType:"provision"})})):(e==null?void 0:e.role)==="CLIENTE"?(Array.isArray(D)&&D.length>0&&D.slice(0,2).forEach(F=>{L.push({action:`Expediente: ${F.title}`,time:new Date(F.createdAt).toLocaleDateString(),type:"case",id:F.id,link:`/client/cases/${F.id}`,entityType:"case"})}),Array.isArray(N)&&N.length>0&&N.filter(T=>new Date(T.date)>new Date).slice(0,2).forEach(T=>{var V;const M=((V=T.lawyer)==null?void 0:V.name)||"Abogado";L.push({action:`Cita con ${M} - ${new Date(T.date).toLocaleDateString()}`,time:new Date(T.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),type:"appointment",id:T.id,link:"/client/appointments",entityType:"appointment"})}),S&&S.total>0&&L.push({action:`${S.total} documentos disponibles`,time:"Total",type:"document",link:"/client/documents",entityType:"document"}),r.totalCases>0&&L.push({action:"Ver mis provisiones de fondos",time:"Acceso directo",type:"provision",link:"/client/provisiones",entityType:"provision"})):(Array.isArray(D)&&D.length>0&&D.slice(0,3).forEach(F=>{L.push({action:`Expediente: ${F.title}`,time:new Date(F.createdAt).toLocaleDateString(),type:"case",id:F.id,link:(e==null?void 0:e.role)==="ADMIN"?`/admin/cases/${F.id}`:(e==null?void 0:e.role)==="ABOGADO"?`/lawyer/cases/${F.id}`:`/client/cases/${F.id}`,entityType:"case"})}),Array.isArray(N)&&N.length>0&&N.filter(T=>new Date(T.date)>new Date).slice(0,2).forEach(T=>{var M,V;L.push({action:`Cita con ${((V=(M=T.client)==null?void 0:M.user)==null?void 0:V.name)||"Cliente"} - ${new Date(T.date).toLocaleDateString()}`,time:new Date(T.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),type:"appointment",id:T.id,link:(e==null?void 0:e.role)==="ADMIN"?`/admin/appointments/${T.id}`:(e==null?void 0:e.role)==="ABOGADO"?"/lawyer/appointments":"/client/appointments",entityType:"appointment"})}),S&&S.total>0&&L.push({action:`${S.total} documentos en el sistema`,time:"Total",type:"document",link:(e==null?void 0:e.role)==="ADMIN"?"/admin/documents":(e==null?void 0:e.role)==="ABOGADO"?"/lawyer/documents":"/client/documents",entityType:"document"}),(e==null?void 0:e.role)==="ADMIN"&&I>0&&L.push({action:`${I} usuarios registrados`,time:"Total",type:"user",link:"/admin/users",entityType:"user"})),d(L.slice(0,4))}catch{i("Error al cargar las estadísticas del dashboard")}finally{o(!1)}})()},[e]);const f=()=>{const v=m();return n.createElement("div",{className:"space-y-6"},n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},n.createElement(_r,{title:"Total Usuarios",value:r.totalUsers,change:u(r.totalUsers).value,positive:u(r.totalUsers).positive,neutral:u(r.totalUsers).neutral}),n.createElement(_r,{title:"Expedientes Activos",value:r.activeCases,change:v.activeCases.value,positive:v.activeCases.positive,neutral:v.activeCases.neutral}),n.createElement(_r,{title:"Citas Pendientes",value:r.pendingAppointments,change:v.appointments.value,positive:v.appointments.positive,neutral:v.appointments.neutral}),n.createElement(_r,{title:"Documentos",value:r.recentDocuments,change:v.documents.value,positive:v.documents.positive,neutral:v.documents.neutral})),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},n.createElement(vt,{title:"Gestión de Usuarios",description:"Administrar usuarios, roles y permisos",icon:"👥",link:"/admin/users",color:"blue"}),n.createElement(vt,{title:"Todos los Expedientes",description:"Ver y gestionar todos los casos",icon:"📋",link:"/admin/cases",color:"green"}),n.createElement(vt,{title:"Reportes y Estadísticas",description:"Análisis y reportes del sistema",icon:"📊",link:"/admin/reports",color:"purple"}),n.createElement(vt,{title:"Configuración del Sistema",description:"Configurar parámetros generales",icon:"⚙️",link:"/admin/settings",color:"gray"}),n.createElement(vt,{title:"Auditoría",description:"Registros de actividad del sistema",icon:"🔍",link:"/admin/audit",color:"yellow"}),n.createElement(vt,{title:"Backup y Restauración",description:"Gestionar copias de seguridad",icon:"💾",link:"/admin/backup",color:"red"})),n.createElement($m,{role:"ADMIN",activities:c}))},x=()=>{const v=m();return n.createElement("div",{className:"space-y-6"},n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},n.createElement(_r,{title:"Mis Casos",value:r.totalCases,change:v.cases.value,positive:v.cases.positive,neutral:v.cases.neutral}),n.createElement(_r,{title:"Casos Activos",value:r.activeCases,change:v.activeCases.value,positive:v.activeCases.positive,neutral:v.activeCases.neutral}),n.createElement(_r,{title:"Citas Hoy",value:r.pendingAppointments,change:v.appointments.value,positive:v.appointments.positive,neutral:v.appointments.neutral}),n.createElement(_r,{title:"Documentos",value:r.recentDocuments,change:v.documents.value,positive:v.documents.positive,neutral:v.documents.neutral})),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},n.createElement(vt,{title:"Mis Casos",description:"Gestionar casos asignados",icon:"📁",link:"/lawyer/cases",color:"blue"}),n.createElement(vt,{title:"Mis Clientes",description:"Ver información de clientes",icon:"👤",link:"/lawyer/clients",color:"green"}),n.createElement(vt,{title:"Provisión de Fondos",description:"Gestiona provisiones de fondos",icon:"💰",link:"/lawyer/provisiones",color:"blue"}),n.createElement(vt,{title:"Facturación Electrónica",description:"Gestiona y firma tus facturas",icon:"🧾",link:"/lawyer/facturacion",color:"green"}),n.createElement(vt,{title:"Calendario de Citas",description:"Programar y gestionar citas",icon:"📅",link:"/lawyer/appointments",color:"purple"}),n.createElement(vt,{title:"Documentos",description:"Gestionar documentos legales",icon:"📄",link:"/lawyer/documents",color:"yellow"}),n.createElement(vt,{title:"Tareas Pendientes",description:"Ver tareas y recordatorios",icon:"✅",link:"/lawyer/tasks",color:"red"}),n.createElement(vt,{title:"Reportes Personales",description:"Mis estadísticas y reportes",icon:"📊",link:"/lawyer/reports",color:"gray"})),n.createElement($m,{role:"ABOGADO",activities:c}))},b=()=>{const v=m();return n.createElement("div",{className:"space-y-6"},n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},n.createElement(_r,{title:"Mis Expedientes",value:r.totalCases,change:v.cases.value,positive:v.cases.positive,neutral:v.cases.neutral}),n.createElement(_r,{title:"Casos Activos",value:r.activeCases,change:v.activeCases.value,positive:v.activeCases.positive,neutral:v.activeCases.neutral}),n.createElement(_r,{title:"Próxima Cita",value:r.pendingAppointments,change:v.appointments.value,positive:v.appointments.positive,neutral:v.appointments.neutral}),n.createElement(_r,{title:"Documentos",value:r.recentDocuments,change:v.documents.value,positive:v.documents.positive,neutral:v.documents.neutral})),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},n.createElement(vt,{title:"Mis Expedientes",description:"Ver el estado de mis casos",icon:"📋",link:"/client/cases",color:"blue"}),n.createElement(vt,{title:"Mis Documentos",description:"Acceder a documentos legales",icon:"📄",link:"/client/documents",color:"green"}),n.createElement(vt,{title:"Provisiones de Fondos",description:"Consulta tus provisiones de fondos",icon:"💰",link:"/client/provisiones",color:"blue"}),n.createElement(vt,{title:"Pagos y Facturas",description:"Gestiona tus pagos y facturas",icon:"🧾",link:"/client/payments",color:"green"}),n.createElement(vt,{title:"Programar Cita",description:"Agendar consulta con abogado",icon:"📅",link:"/client/appointments",color:"purple"}),n.createElement(vt,{title:"Chat con Abogado",description:"Comunicación directa",icon:"💬",link:"/client/chat",color:"yellow"}),n.createElement(vt,{title:"Perfil",description:"Actualizar información personal",icon:"👤",link:"/client/profile",color:"gray"})),n.createElement($m,{role:"CLIENTE",activities:c}))},y=()=>{switch(e==null?void 0:e.role){case"ADMIN":return f();case"ABOGADO":return x();case"CLIENTE":return b();default:return n.createElement("div",null,"Acceso no autorizado")}};return s?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})):l?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-red-600 text-xl mb-4"},"Error"),n.createElement("div",{className:"text-gray-600"},l),n.createElement("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},"Reintentar"))):n.createElement("div",{className:"py-6"},n.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"mb-8"},n.createElement("h1",{className:"text-3xl font-bold text-gray-900"},"Bienvenido, ",e==null?void 0:e.name,(e==null?void 0:e.email)&&` (${e.email})`),n.createElement("p",{className:"mt-2 text-gray-600"},(e==null?void 0:e.role)==="ADMIN"&&"Panel de administración del sistema",(e==null?void 0:e.role)==="ABOGADO"&&"Gestiona tus casos y clientes",(e==null?void 0:e.role)==="CLIENTE"&&"Sigue el progreso de tus casos legales")),y()))},_r=({title:e,value:t,change:r,positive:a,negative:s,neutral:o})=>n.createElement("div",{className:"bg-white overflow-hidden shadow rounded-lg"},n.createElement("div",{className:"p-5"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"text-2xl font-bold text-gray-900"},t)),n.createElement("div",{className:"ml-5 w-0 flex-1"},n.createElement("dl",null,n.createElement("dt",{className:"text-sm font-medium text-gray-500 truncate"},e),n.createElement("dd",{className:"flex items-baseline"},n.createElement("div",{className:`text-sm font-semibold ${a?"text-green-600":s?"text-red-600":"text-gray-500"}`},r))))))),vt=({title:e,description:t,icon:r,link:a,color:s})=>{const o={blue:"bg-blue-50 border-blue-200 hover:bg-blue-100",green:"bg-green-50 border-green-200 hover:bg-green-100",purple:"bg-purple-50 border-purple-200 hover:bg-purple-100",yellow:"bg-yellow-50 border-yellow-200 hover:bg-yellow-100",red:"bg-red-50 border-red-200 hover:bg-red-100",gray:"bg-gray-50 border-gray-200 hover:bg-gray-100"};return n.createElement(De,{to:a,className:"block"},n.createElement("div",{className:`bg-white overflow-hidden shadow rounded-lg border-2 transition-colors duration-200 ${o[s]}`},n.createElement("div",{className:"p-6"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"text-3xl"},r)),n.createElement("div",{className:"ml-4"},n.createElement("h3",{className:"text-lg font-medium text-gray-900"},e),n.createElement("p",{className:"text-sm text-gray-600"},t))))))},$m=({role:e,activities:t=[]})=>{const r=qr(),a=()=>{if(t&&t.length>0)return t;switch(e){case"ADMIN":return[{action:"Nuevo usuario registrado",time:"Hace 5 minutos",type:"user",link:"/admin/users",entityType:"user"},{action:"Expediente creado #1234",time:"Hace 15 minutos",type:"case",link:"/admin/cases",entityType:"case"},{action:"Cita programada",time:"Hace 1 hora",type:"appointment",link:"/admin/appointments",entityType:"appointment"},{action:"Documento subido",time:"Hace 2 horas",type:"document",link:"/admin/documents",entityType:"document"}];case"ABOGADO":return[{action:"Nuevo caso asignado",time:"Hace 10 minutos",type:"case",link:"/lawyer/cases",entityType:"case"},{action:"Cita con cliente",time:"Hace 30 minutos",type:"appointment",link:"/lawyer/appointments",entityType:"appointment"},{action:"Documento revisado",time:"Hace 1 hora",type:"document",link:"/lawyer/documents",entityType:"document"},{action:"Tarea completada",time:"Hace 2 horas",type:"task",link:"/lawyer/tasks",entityType:"task"}];case"CLIENTE":return[{action:"Documento recibido",time:"Hace 5 minutos",type:"document",link:"/client/documents",entityType:"document"},{action:"Cita confirmada",time:"Hace 1 hora",type:"appointment",link:"/client/appointments",entityType:"appointment"},{action:"Actualización de caso",time:"Hace 3 horas",type:"case",link:"/client/cases",entityType:"case"},{action:"Pago procesado",time:"Hace 1 día",type:"payment",link:"/client/payments",entityType:"payment"}];default:return[]}},s=i=>{i.link&&r(i.link)},o=i=>{switch(i){case"case":return"📋";case"appointment":return"📅";case"document":return"📄";case"task":return"✅";case"user":return"👤";case"payment":return"💰";case"provision":return"💳";default:return"📌"}},l=a();return n.createElement("div",{className:"bg-white shadow rounded-lg"},n.createElement("div",{className:"px-6 py-4 border-b border-gray-200"},n.createElement("h3",{className:"text-lg font-medium text-gray-900"},"Actividad Reciente")),n.createElement("div",{className:"divide-y divide-gray-200"},l.map((i,c)=>n.createElement("div",{key:c,className:`px-6 py-4 ${i.link?"cursor-pointer hover:bg-gray-50 transition-colors":""}`,onClick:()=>i.link&&s(i)},n.createElement("div",{className:"flex items-center justify-between"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"text-lg mr-3"},o(i.type))),n.createElement("div",{className:"ml-3 flex-1"},n.createElement("p",{className:`text-sm font-medium ${i.link?"text-blue-600 hover:text-blue-800":"text-gray-900"}`},i.action),n.createElement("p",{className:"text-sm text-gray-500"},i.time))),i.link&&n.createElement("div",{className:"flex-shrink-0"},n.createElement("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"}))))))))};class il extends Error{}il.prototype.name="InvalidTokenError";function TT(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,r)=>{let a=r.charCodeAt(0).toString(16).toUpperCase();return a.length<2&&(a="0"+a),"%"+a}))}function _T(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return TT(t)}catch{return atob(t)}}function OT(e,t){if(typeof e!="string")throw new il("Invalid token specified: must be a string");t||(t={});const r=t.header===!0?0:1,a=e.split(".")[r];if(typeof a!="string")throw new il(`Invalid token specified: missing part #${r+1}`);let s;try{s=_T(a)}catch(o){throw new il(`Invalid token specified: invalid base64 for part #${r+1} (${o.message})`)}try{return JSON.parse(s)}catch(o){throw new il(`Invalid token specified: invalid json for part #${r+1} (${o.message})`)}}const RT=()=>{const e=qr(),{login:t}=Pe(),[r,a]=g.useState({email:"admin@despacho.com",password:"password123"}),[s,o]=g.useState(""),[l,i]=g.useState(!1),c=u=>{const{name:m,value:f}=u.target;a(x=>({...x,[m]:f}))},d=async u=>{u.preventDefault();try{o(""),i(!0),await t(r.email,r.password);const m=localStorage.getItem("token");if(m){const f=OT(m);switch(console.log("Usuario decodificado:",f),f.role){case"ADMIN":e("/admin/dashboard");break;case"ABOGADO":e("/lawyer/dashboard");break;case"CLIENTE":e("/client/dashboard");break;default:e("/")}}}catch(m){console.error("Error completo:",m),o("Error al iniciar sesión. Por favor, verifique sus credenciales.")}finally{i(!1)}};return n.createElement("div",{className:"min-h-[calc(100vh-64px)] flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"max-w-md w-full space-y-8"},n.createElement("div",null,n.createElement("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900"},"Iniciar Sesión"),n.createElement("p",{className:"mt-2 text-center text-sm text-gray-600"},"¿No tiene una cuenta?"," ",n.createElement(De,{to:"/register",className:"font-medium text-blue-600 hover:text-blue-500"},"Regístrese aquí"))),n.createElement("form",{className:"mt-8 space-y-6",onSubmit:d},s&&n.createElement("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert"},n.createElement("span",{className:"block sm:inline"},s)),n.createElement("div",{className:"rounded-md shadow-sm -space-y-px"},n.createElement("div",null,n.createElement("label",{htmlFor:"email",className:"sr-only"},"Correo Electrónico"),n.createElement("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Correo Electrónico",value:r.email,onChange:c})),n.createElement("div",null,n.createElement("label",{htmlFor:"password",className:"sr-only"},"Contraseña"),n.createElement("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Contraseña",value:r.password,onChange:c}))),n.createElement("div",{className:"flex items-center justify-between"},n.createElement("div",{className:"text-sm"},n.createElement(De,{to:"/forgot-password",className:"font-medium text-blue-600 hover:text-blue-500"},"¿Olvidó su contraseña?"))),n.createElement("div",null,n.createElement("button",{type:"submit",disabled:l,className:`group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${l?"opacity-50 cursor-not-allowed":""}`},l?"Iniciando sesión...":"Iniciar Sesión")))))},MT=()=>{const e=qr(),{register:t}=Pe(),[r,a]=g.useState({email:"",password:"",confirmPassword:"",name:"",role:"CLIENTE"}),[s,o]=g.useState(""),[l,i]=g.useState(!1),c=u=>{const{name:m,value:f}=u.target;a(x=>({...x,[m]:f}))},d=async u=>{if(u.preventDefault(),r.password!==r.confirmPassword)return o("Las contraseñas no coinciden");try{o(""),i(!0),await t({email:r.email,password:r.password,name:r.name,role:r.role}),e("/dashboard")}catch{o("Error al crear la cuenta. Por favor, inténtelo de nuevo.")}finally{i(!1)}};return n.createElement("div",{className:"min-h-[calc(100vh-64px)] flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"max-w-md w-full space-y-8"},n.createElement("div",null,n.createElement("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900"},"Crear una cuenta"),n.createElement("p",{className:"mt-2 text-center text-sm text-gray-600"},"¿Ya tiene una cuenta?"," ",n.createElement(De,{to:"/login",className:"font-medium text-blue-600 hover:text-blue-500"},"Inicie sesión aquí"))),n.createElement("form",{className:"mt-8 space-y-6",onSubmit:d},s&&n.createElement("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert"},n.createElement("span",{className:"block sm:inline"},s)),n.createElement("div",{className:"rounded-md shadow-sm -space-y-px"},n.createElement("div",null,n.createElement("label",{htmlFor:"name",className:"sr-only"},"Nombre Completo"),n.createElement("input",{id:"name",name:"name",type:"text",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Nombre Completo",value:r.name,onChange:c})),n.createElement("div",null,n.createElement("label",{htmlFor:"email",className:"sr-only"},"Correo Electrónico"),n.createElement("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Correo Electrónico",value:r.email,onChange:c})),n.createElement("div",null,n.createElement("label",{htmlFor:"password",className:"sr-only"},"Contraseña"),n.createElement("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Contraseña",value:r.password,onChange:c})),n.createElement("div",null,n.createElement("label",{htmlFor:"confirmPassword",className:"sr-only"},"Confirmar Contraseña"),n.createElement("input",{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Confirmar Contraseña",value:r.confirmPassword,onChange:c})),n.createElement("div",null,n.createElement("label",{htmlFor:"role",className:"sr-only"},"Tipo de Usuario"),n.createElement("select",{id:"role",name:"role",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",value:r.role,onChange:c},n.createElement("option",{value:"CLIENTE"},"Cliente"),n.createElement("option",{value:"ABOGADO"},"Abogado")))),n.createElement("div",null,n.createElement("button",{type:"submit",disabled:l,className:`group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${l?"opacity-50 cursor-not-allowed":""}`},l?"Creando cuenta...":"Registrarse")))))},Fm=({allowedRoles:e})=>{const{user:t,loading:r}=Pe();return r?n.createElement("div",null,"Cargando..."):!t||!e.includes(t.role)?n.createElement(gw,{to:"/login",replace:!0}):n.createElement(Bg,null)},PT=()=>{const{user:e,loading:t}=Pe();return t?n.createElement("div",null,"Cargando..."):e?n.createElement(Bg,null):n.createElement(gw,{to:"/login",replace:!0})},nc=({title:e,description:t,icon:r="🚧"})=>React.createElement("div",{className:"min-h-[calc(100vh-200px)] flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8"},React.createElement("div",{className:"max-w-md w-full text-center"},React.createElement("div",{className:"text-6xl mb-6"},r),React.createElement("h1",{className:"text-3xl font-bold text-gray-900 mb-4"},e),React.createElement("p",{className:"text-lg text-gray-600 mb-8"},t||"Esta funcionalidad está en desarrollo y estará disponible pronto."),React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4"},React.createElement("h3",{className:"font-semibold text-blue-900 mb-2"},"Próximas funcionalidades:"),React.createElement("ul",{className:"text-sm text-blue-800 space-y-1"},React.createElement("li",null,"• Interfaz completa y funcional"),React.createElement("li",null,"• Integración con backend"),React.createElement("li",null,"• Gestión de datos en tiempo real"),React.createElement("li",null,"• Reportes y estadísticas"))),React.createElement(De,{to:"/dashboard",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},"Volver al Dashboard")))),LT=()=>{const[e,t]=g.useState([]),[r,a]=g.useState([]),[s,o]=g.useState(!0),[l,i]=g.useState(null),[c,d]=g.useState(""),[u,m]=g.useState("todos"),[f,x]=g.useState(null),{user:b}=Pe(),[y,v]=g.useState([]);return g.useEffect(()=>{(async()=>{try{o(!0);const h=localStorage.getItem("token"),[E,w]=await Promise.all([Z.get("/cases",{headers:{Authorization:`Bearer ${h}`}}),Z.get("/cases/stats",{headers:{Authorization:`Bearer ${h}`}})]);t(E.data),i(w.data),x(null)}catch(h){console.error("Error fetching cases:",h),x("Error al cargar los expedientes")}finally{o(!1)}})()},[]),g.useEffect(()=>{(async()=>{try{const h=localStorage.getItem("token"),E=await Z.get("/chat/conversations",{headers:{Authorization:`Bearer ${h}`}});v(E.data)}catch{}})()},[]),g.useEffect(()=>{let p=e;c&&(p=p.filter(h=>{var E;return h.title.toLowerCase().includes(c.toLowerCase())||h.client.user.name.toLowerCase().includes(c.toLowerCase())||((E=h.description)==null?void 0:E.toLowerCase().includes(c.toLowerCase()))})),u!=="todos"&&(p=p.filter(h=>h.status===u)),a(p)},[e,c,u]),s?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})):f?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-red-600 text-xl mb-4"},"Error"),n.createElement("div",{className:"text-gray-600"},f),n.createElement("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},"Reintentar"))):n.createElement("div",{className:"py-6"},n.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"flex justify-between items-center"},n.createElement("div",null,n.createElement("h1",{className:"text-3xl font-bold text-gray-900"},"Mis Expedientes"),n.createElement("p",{className:"mt-2 text-gray-600"},"Gestiona y da seguimiento a todos tus casos legales")),n.createElement(De,{to:"/lawyer/cases/new",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"},"Nuevo Expediente"))),l&&n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6"},n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-blue-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Total Expedientes"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},l.total)))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-green-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Abiertos"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},l.abiertos)))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-yellow-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"En Proceso"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},l.enProceso)))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-gray-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Cerrados"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},l.cerrados))))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow mb-6"},n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Buscar"),n.createElement("input",{type:"text",placeholder:"Buscar por título, cliente o descripción...",value:c,onChange:p=>d(p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Estado"),n.createElement("select",{value:u,onChange:p=>m(p.target.value),"aria-label":"Filtrar por estado",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},n.createElement("option",{value:"todos"},"Todos los estados"),n.createElement("option",{value:"ABIERTO"},"Abierto"),n.createElement("option",{value:"EN_PROCESO"},"En Proceso"),n.createElement("option",{value:"CERRADO"},"Cerrado"))),n.createElement("div",{className:"flex items-end"},n.createElement("button",{onClick:()=>{d(""),m("todos")},className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"},"Limpiar Filtros")))),n.createElement("div",{className:"bg-white shadow rounded-lg overflow-hidden"},n.createElement("div",{className:"overflow-x-auto"},n.createElement("table",{className:"min-w-full divide-y divide-gray-200"},n.createElement("thead",{className:"bg-gray-50"},n.createElement("tr",null,n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"ID de Expediente"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Título"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Cliente"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Estado"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Acciones"))),n.createElement("tbody",{className:"bg-white divide-y divide-gray-200"},r.map(p=>{const h=y.find(E=>E.userId===p.client.user.id);return n.createElement("tr",{key:p.id,className:"hover:bg-gray-50"},n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 flex items-center gap-2"},n.createElement("span",null,p.id),n.createElement("button",{className:"ml-2 px-2 py-1 text-xs bg-gray-200 rounded hover:bg-gray-300",title:"Copiar ID",onClick:()=>navigator.clipboard.writeText(p.id)},"Copiar")),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},p.title),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 flex items-center gap-2"},p.client.user.name,h&&h.unreadCount>0&&n.createElement("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-yellow-100 text-yellow-800",title:"Mensajes no leídos"},n.createElement("svg",{className:"w-3 h-3 mr-1 text-yellow-600",fill:"currentColor",viewBox:"0 0 20 20"},n.createElement("path",{d:"M10 2a8 8 0 100 16 8 8 0 000-16zm1 12H9v-2h2v2zm0-4H9V6h2v4z"})),h.unreadCount)),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},p.status),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},n.createElement("div",{className:"flex space-x-2"},n.createElement(De,{to:`/lawyer/cases/${p.id}`,className:"text-blue-600 hover:text-blue-900"},"Ver"),n.createElement(De,{to:`/lawyer/cases/${p.id}/edit`,className:"text-green-600 hover:text-green-900"},"Editar"))))}))))),r.length===0&&n.createElement("div",{className:"text-center py-12"},n.createElement("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})),n.createElement("h3",{className:"mt-2 text-sm font-medium text-gray-900"},"No se encontraron expedientes"),n.createElement("p",{className:"mt-1 text-sm text-gray-500"},"Intenta ajustar los filtros o crear un nuevo expediente."))))},IT=()=>{const e=qr(),{user:t}=Pe(),[r,a]=g.useState(!1),[s,o]=g.useState(!1),[l,i]=g.useState(null),[c,d]=g.useState([]),[u,m]=g.useState([]),[f,x]=g.useState({title:"",description:"",clientId:"",lawyerId:(t==null?void 0:t.role)==="ABOGADO"?t.id:""});g.useEffect(()=>{(async()=>{try{a(!0);const p=localStorage.getItem("token"),[h,E]=await Promise.all([Z.get("/users/clients"),Z.get("/users/lawyers")]);d(h.data),m(E.data)}catch(p){console.error("Error fetching data:",p),i("Error al cargar los datos")}finally{a(!1)}})()},[t]);const b=v=>{const{name:p,value:h}=v.target;x(E=>({...E,[p]:h}))},y=async v=>{var p,h;if(v.preventDefault(),!f.title||!f.clientId||!f.lawyerId){i("Por favor completa todos los campos obligatorios");return}try{o(!0),i(null);const E=localStorage.getItem("token");await Z.post("/cases",f,{headers:{Authorization:`Bearer ${E}`}}),e("/lawyer/cases")}catch(E){console.error("Error creating case:",E),i(((h=(p=E.response)==null?void 0:p.data)==null?void 0:h.message)||"Error al crear el expediente")}finally{o(!1)}};return r?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})):n.createElement("div",{className:"py-6"},n.createElement("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"flex items-center justify-between"},n.createElement("div",null,n.createElement("h1",{className:"text-3xl font-bold text-gray-900"},"Nuevo Expediente"),n.createElement("p",{className:"mt-2 text-gray-600"},"Crea un nuevo expediente legal")),n.createElement("button",{onClick:()=>e("/lawyer/cases"),className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"},"Cancelar"))),n.createElement("div",{className:"bg-white shadow rounded-lg"},n.createElement("form",{onSubmit:y,className:"p-6 space-y-6"},l&&n.createElement("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md"},l),n.createElement("div",null,n.createElement("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2"},"Título del Expediente *"),n.createElement("input",{type:"text",id:"title",name:"title",value:f.title,onChange:b,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: Contrato de Compraventa"})),n.createElement("div",null,n.createElement("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2"},"Descripción"),n.createElement("textarea",{id:"description",name:"description",value:f.description,onChange:b,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe brevemente el caso..."})),n.createElement("div",null,n.createElement("label",{htmlFor:"clientId",className:"block text-sm font-medium text-gray-700 mb-2"},"Cliente *"),n.createElement("select",{id:"clientId",name:"clientId",value:f.clientId,onChange:b,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},n.createElement("option",{value:""},"Selecciona un cliente"),c.filter(v=>v.user).length===0&&n.createElement("option",{disabled:!0,value:""},"No hay clientes disponibles"),c.filter(v=>v.user).map(v=>{var p,h;return n.createElement("option",{key:v.id,value:v.id},((p=v.user)==null?void 0:p.name)||"Sin nombre"," - ",((h=v.user)==null?void 0:h.email)||"Sin email"," (DNI: ",v.dni,")")}))),n.createElement("div",null,n.createElement("label",{htmlFor:"lawyerId",className:"block text-sm font-medium text-gray-700 mb-2"},"Abogado Asignado *"),n.createElement("select",{id:"lawyerId",name:"lawyerId",value:f.lawyerId,onChange:b,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:(t==null?void 0:t.role)==="ABOGADO"},n.createElement("option",{value:""},"Selecciona un abogado"),u.map(v=>n.createElement("option",{key:v.id,value:v.id},v.name," - ",v.email))),(t==null?void 0:t.role)==="ABOGADO"&&n.createElement("p",{className:"mt-1 text-sm text-gray-500"},"Serás asignado automáticamente como abogado responsable")),n.createElement("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200"},n.createElement("button",{type:"button",onClick:()=>e("/lawyer/cases"),className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"},"Cancelar"),n.createElement("button",{type:"submit",disabled:s,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"},s?"Creando...":"Crear Expediente"))))))},nN=({expedienteId:e,expedienteData:t,onAppointmentCreated:r,onNoteAdded:a,onMessageSent:s})=>{const[o,l]=g.useState(null),[i,c]=g.useState({}),[d,u]=g.useState(!1),[m,f]=g.useState(null),[x,b]=g.useState(null),y=()=>{l(null),c({}),f(null),b(null)},v=h=>{c({...i,[h.target.name]:h.target.value})},p=async h=>{var E,w,N,S;if(h.preventDefault(),u(!0),f(null),b(null),o==="cita"){let C=(E=t==null?void 0:t.client)==null?void 0:E.id,D=(w=t==null?void 0:t.lawyer)==null?void 0:w.id;if(!C||!D){f("No se pudo obtener el cliente o abogado del expediente."),u(!1);return}try{const k=localStorage.getItem("token"),O={clientId:C,lawyerId:D,date:i.datetime,location:i.location,notes:i.notes},A=await Z.post("/appointments",O,{headers:{Authorization:`Bearer ${k}`}});b("Cita programada con éxito"),r&&r(A.data),setTimeout(y,1200)}catch(k){f(((S=(N=k.response)==null?void 0:N.data)==null?void 0:S.message)||"Error al programar la cita")}finally{u(!1)}return}setTimeout(()=>{u(!1),b("Acción realizada con éxito"),o==="nota"&&a&&a(i),o==="mensaje"&&s&&s(i),setTimeout(y,1e3)},800)};return n.createElement("div",{className:"flex flex-col md:flex-row gap-2 md:gap-4 my-4"},n.createElement("button",{className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:()=>l("cita")},"Programar Cita"),n.createElement("button",{className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",onClick:()=>l("nota")},"Agregar Nota"),n.createElement("button",{className:"px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700",onClick:()=>l("mensaje")},"Enviar Mensaje"),o==="cita"&&n.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40"},n.createElement("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md relative"},n.createElement("button",{className:"absolute top-2 right-2 text-gray-500",onClick:y},"×"),n.createElement("h2",{className:"text-xl font-bold mb-4"},"Programar Cita"),n.createElement("form",{onSubmit:p,className:"space-y-4"},n.createElement("input",{type:"hidden",name:"expedienteId",value:e||""}),n.createElement("div",null,n.createElement("label",{htmlFor:"datetime",className:"block text-sm font-medium mb-1"},"Fecha y hora"),n.createElement("input",{id:"datetime",type:"datetime-local",name:"datetime",required:!0,className:"w-full border rounded px-2 py-1",onChange:v,title:"Seleccione la fecha y hora",placeholder:"Seleccione la fecha y hora"})),n.createElement("div",null,n.createElement("label",{htmlFor:"location",className:"block text-sm font-medium mb-1"},"Lugar"),n.createElement("input",{id:"location",type:"text",name:"location",required:!0,className:"w-full border rounded px-2 py-1",onChange:v,title:"Ingrese el lugar",placeholder:"Ingrese el lugar"})),n.createElement("div",null,n.createElement("label",{htmlFor:"notes",className:"block text-sm font-medium mb-1"},"Notas"),n.createElement("textarea",{id:"notes",name:"notes",className:"w-full border rounded px-2 py-1",onChange:v,title:"Ingrese notas adicionales",placeholder:"Ingrese notas adicionales"})),m&&n.createElement("div",{className:"text-red-600 text-sm"},m),x&&n.createElement("div",{className:"text-green-600 text-sm"},x),n.createElement("div",{className:"flex justify-end gap-2"},n.createElement("button",{type:"button",onClick:y,className:"px-3 py-1 bg-gray-200 rounded"},"Cancelar"),n.createElement("button",{type:"submit",disabled:d,className:"px-4 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50"},d?"Guardando...":"Guardar"))))),o==="nota"&&n.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40"},n.createElement("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md relative"},n.createElement("button",{className:"absolute top-2 right-2 text-gray-500",onClick:y},"×"),n.createElement("h2",{className:"text-xl font-bold mb-4"},"Agregar Nota"),n.createElement("form",{onSubmit:p,className:"space-y-4"},n.createElement("input",{type:"hidden",name:"expedienteId",value:e||""}),n.createElement("div",null,n.createElement("label",{htmlFor:"nota-textarea",className:"block text-sm font-medium mb-1"},"Nota"),n.createElement("textarea",{id:"nota-textarea",name:"note",required:!0,className:"w-full border rounded px-2 py-1",onChange:v,title:"Ingrese la nota",placeholder:"Ingrese la nota"})),m&&n.createElement("div",{className:"text-red-600 text-sm"},m),x&&n.createElement("div",{className:"text-green-600 text-sm"},x),n.createElement("div",{className:"flex justify-end gap-2"},n.createElement("button",{type:"button",onClick:y,className:"px-3 py-1 bg-gray-200 rounded"},"Cancelar"),n.createElement("button",{type:"submit",disabled:d,className:"px-4 py-1 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50"},d?"Guardando...":"Guardar"))))),o==="mensaje"&&n.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40"},n.createElement("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md relative"},n.createElement("button",{className:"absolute top-2 right-2 text-gray-500",onClick:y},"×"),n.createElement("h2",{className:"text-xl font-bold mb-4"},"Enviar Mensaje"),n.createElement("form",{onSubmit:p,className:"space-y-4"},n.createElement("input",{type:"hidden",name:"expedienteId",value:e||""}),n.createElement("div",null,n.createElement("label",{htmlFor:"mensaje-textarea",className:"block text-sm font-medium mb-1"},"Mensaje"),n.createElement("textarea",{id:"mensaje-textarea",name:"message",required:!0,className:"w-full border rounded px-2 py-1",onChange:v,title:"Ingrese el mensaje a enviar",placeholder:"Escriba su mensaje aquí"})),m&&n.createElement("div",{className:"text-red-600 text-sm"},m),x&&n.createElement("div",{className:"text-green-600 text-sm"},x),n.createElement("div",{className:"flex justify-end gap-2"},n.createElement("button",{type:"button",onClick:y,className:"px-3 py-1 bg-gray-200 rounded"},"Cancelar"),n.createElement("button",{type:"submit",disabled:d,className:"px-4 py-1 bg-purple-600 text-white rounded hover:bg-purple-700 disabled:opacity-50"},d?"Enviando...":"Enviar"))))))},Jv=()=>{const{id:e}=jg(),t=qr(),{user:r}=Pe();console.log("Usuario en frontend:",r);const[a,s]=g.useState(null),[o,l]=g.useState(!0),[i,c]=g.useState(null),[d,u]=g.useState(!1);g.useEffect(()=>{(async()=>{var y,v;if(e)try{l(!0);const p=localStorage.getItem("token"),h=await xe.get(`/api/cases/${e}`,{headers:{Authorization:`Bearer ${p}`}});s(h.data),c(null)}catch(p){console.error("Error fetching case:",p),c(((v=(y=p.response)==null?void 0:y.data)==null?void 0:v.message)||"Error al cargar el expediente")}finally{l(!1)}})()},[e]);const m=async b=>{if(a)try{u(!0);const y=localStorage.getItem("token");await xe.patch(`/api/cases/${e}/status`,{status:b},{headers:{Authorization:`Bearer ${y}`}}),s(v=>v?{...v,status:b}:null)}catch(y){console.error("Error updating status:",y),c("Error al actualizar el estado del expediente")}finally{u(!1)}},f=b=>{switch(b){case"ABIERTO":return"bg-green-100 text-green-800";case"EN_PROCESO":return"bg-yellow-100 text-yellow-800";case"CERRADO":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},x=b=>{switch(b){case"ABIERTO":return"Abierto";case"EN_PROCESO":return"En Proceso";case"CERRADO":return"Cerrado";default:return b}};return o?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})):i||!a?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-red-600 text-xl mb-4"},"Error"),n.createElement("div",{className:"text-gray-600"},i||"Expediente no encontrado"),n.createElement("button",{onClick:()=>t("/lawyer/cases"),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},"Volver a Expedientes"))):n.createElement("div",{className:"py-6"},n.createElement("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"flex items-center justify-between"},n.createElement("div",null,n.createElement("div",{className:"flex items-center space-x-4"},n.createElement("button",{onClick:()=>t("/lawyer/cases"),className:"text-gray-400 hover:text-gray-600","aria-label":"Volver a Expedientes",title:"Volver a Expedientes",type:"button"},n.createElement("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"}))),n.createElement("h1",{className:"text-3xl font-bold text-gray-900"},a.title)),n.createElement("p",{className:"mt-2 text-gray-600"},"Expediente creado el ",new Date(a.createdAt).toLocaleDateString())),n.createElement("div",{className:"flex space-x-3"},n.createElement(De,{to:`/lawyer/cases/${e}/edit`,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2"},"Editar")))),n.createElement(nN,{expedienteId:a.id,expedienteData:a}),n.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6"},n.createElement("div",{className:"lg:col-span-2 space-y-6"},n.createElement("div",{className:"bg-white shadow rounded-lg p-6"},n.createElement("h2",{className:"text-lg font-semibold text-gray-900 mb-4"},"Estado del Expediente"),n.createElement("div",{className:"flex items-center space-x-4"},n.createElement("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${f(a.status)}`},x(a.status)),((r==null?void 0:r.role)==="ABOGADO"||(r==null?void 0:r.role)==="ADMIN")&&n.createElement("label",null,n.createElement("span",{className:"sr-only"},"Cambiar estado del expediente"),n.createElement("select",{value:a.status,onChange:b=>m(b.target.value),disabled:d,className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",title:"Cambiar estado del expediente"},n.createElement("option",{value:"ABIERTO"},"Abierto"),n.createElement("option",{value:"EN_PROCESO"},"En Proceso"),n.createElement("option",{value:"CERRADO"},"Cerrado"))))),n.createElement("div",{className:"bg-white shadow rounded-lg p-6"},n.createElement("h2",{className:"text-lg font-semibold text-gray-900 mb-4"},"Descripción"),n.createElement("p",{className:"text-gray-700"},a.description||"No hay descripción disponible para este expediente.")),n.createElement("div",{className:"bg-white shadow rounded-lg p-6"},n.createElement("div",{className:"flex items-center justify-between mb-4"},n.createElement("h2",{className:"text-lg font-semibold text-gray-900"},"Documentos"),n.createElement("button",{className:"px-3 py-1 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700"},"Subir Documento")),a.documents.length>0?n.createElement("div",{className:"space-y-3"},a.documents.map(b=>n.createElement("div",{key:b.id,className:"flex items-center justify-between p-3 border border-gray-200 rounded-md"},n.createElement("div",{className:"flex items-center space-x-3"},n.createElement("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})),n.createElement("div",null,n.createElement("p",{className:"text-sm font-medium text-gray-900"},b.filename),n.createElement("p",{className:"text-xs text-gray-500"},"Subido el ",new Date(b.uploadedAt).toLocaleDateString()))),n.createElement("a",{href:b.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-sm"},"Ver")))):n.createElement("p",{className:"text-gray-500 text-center py-4"},"No hay documentos subidos aún."))),n.createElement("div",{className:"space-y-6"},n.createElement("div",{className:"bg-white shadow rounded-lg p-6"},n.createElement("h2",{className:"text-lg font-semibold text-gray-900 mb-4"},"Información del Cliente"),n.createElement("div",{className:"space-y-3"},n.createElement("div",null,n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Nombre"),n.createElement("p",{className:"text-sm text-gray-900"},a.client.user.name)),n.createElement("div",null,n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Email"),n.createElement("p",{className:"text-sm text-gray-900"},a.client.user.email)),n.createElement("div",null,n.createElement("p",{className:"text-sm font-medium text-gray-500"},"DNI"),n.createElement("p",{className:"text-sm text-gray-900"},a.client.dni)),a.client.phone&&n.createElement("div",null,n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Teléfono"),n.createElement("p",{className:"text-sm text-gray-900"},a.client.phone)),a.client.address&&n.createElement("div",null,n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Dirección"),n.createElement("p",{className:"text-sm text-gray-900"},a.client.address)))),n.createElement("div",{className:"bg-white shadow rounded-lg p-6"},n.createElement("h2",{className:"text-lg font-semibold text-gray-900 mb-4"},"Abogado Asignado"),n.createElement("div",{className:"space-y-3"},n.createElement("div",null,n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Nombre"),n.createElement("p",{className:"text-sm text-gray-900"},a.lawyer.name)),n.createElement("div",null,n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Email"),n.createElement("p",{className:"text-sm text-gray-900"},a.lawyer.email)))),n.createElement("div",{className:"bg-white shadow rounded-lg p-6"},n.createElement("h2",{className:"text-lg font-semibold text-gray-900 mb-4"},"Acciones Rápidas"),n.createElement("div",{className:"space-y-3"},n.createElement("button",{className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm"},"Programar Cita"),n.createElement("button",{className:"w-full px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 text-sm"},"Agregar Nota"),n.createElement("button",{className:"w-full px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 text-sm"},"Enviar Mensaje")))))))},$T=()=>{const[e,t]=g.useState([]),[r,a]=g.useState([]),[s,o]=g.useState(!0),[l,i]=g.useState(""),[c,d]=g.useState("todos"),[u,m]=g.useState(null),{user:f}=Pe(),[x,b]=g.useState(!1),[y,v]=g.useState(null),[p,h]=g.useState(""),[E,w]=g.useState(!1),[N,S]=g.useState(null),[C,D]=g.useState({}),[k,O]=g.useState([]),[A,$]=g.useState({});g.useEffect(()=>{(async()=>{try{o(!0);const M=localStorage.getItem("token"),V=await xe.get("/api/cases",{headers:{Authorization:`Bearer ${M}`}});t(V.data),m(null)}catch(M){console.error("Error fetching cases:",M),m("Error al cargar los expedientes")}finally{o(!1)}})()},[]),g.useEffect(()=>{(async()=>{try{const M=localStorage.getItem("token"),V=await xe.get("/chat/conversations",{headers:{Authorization:`Bearer ${M}`}});O(V.data)}catch{}})()},[]),g.useEffect(()=>{const T=async()=>{const M=localStorage.getItem("token"),V={};for(const X of e)try{const Y=[...(await xe.get(`/chat/messages/${X.lawyer.id}`,{headers:{Authorization:`Bearer ${M}`}})).data].reverse().find(Q=>Q.isOwnMessage);Y?V[X.lawyer.id]={read:!!Y.read,lastMessage:Y.content}:V[X.lawyer.id]={read:null,lastMessage:null}}catch{V[X.lawyer.id]={read:null,lastMessage:null}}$(V)};e.length>0&&T()},[e]),g.useEffect(()=>{let T=e;l&&(T=T.filter(M=>{var V,X,z;return M.title.toLowerCase().includes(l.toLowerCase())||((V=M.description)==null?void 0:V.toLowerCase().includes(l.toLowerCase()))||((z=(X=M.lawyer)==null?void 0:X.name)==null?void 0:z.toLowerCase().includes(l.toLowerCase()))})),c!=="todos"&&(T=T.filter(M=>M.status===c)),a(T)},[e,l,c]);const P=T=>{switch(T){case"ABIERTO":return"bg-green-100 text-green-800";case"EN_PROCESO":return"bg-yellow-100 text-yellow-800";case"CERRADO":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},I=T=>{switch(T){case"ABIERTO":return"Abierto";case"EN_PROCESO":return"En Proceso";case"CERRADO":return"Cerrado";default:return T}},L=T=>{v(T),h(""),S(null),b(!0)},F=async()=>{if(!(!p.trim()||!y)){w(!0),S(null);try{const T=localStorage.getItem("token");await xe.post("/api/chat/messages",{content:p,receiverId:y.lawyer.id},{headers:{Authorization:`Bearer ${T}`}}),D(M=>({...M,[y.id]:!0})),b(!1)}catch{S("Error al enviar el mensaje")}finally{w(!1)}}};return s?React.createElement("div",{className:"flex items-center justify-center min-h-screen"},React.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})):u?React.createElement("div",{className:"flex items-center justify-center min-h-screen"},React.createElement("div",{className:"text-center"},React.createElement("div",{className:"text-red-600 text-xl mb-4"},"Error"),React.createElement("div",{className:"text-gray-600"},u),React.createElement("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},"Reintentar"))):React.createElement("div",{className:"py-6"},React.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},React.createElement("div",{className:"mb-8"},React.createElement("div",null,React.createElement("h1",{className:"text-3xl font-bold text-gray-900"},"Mis Expedientes"),React.createElement("p",{className:"mt-2 text-gray-600"},"Revisa el estado de tus casos legales"))),React.createElement("div",{className:"bg-white p-6 rounded-lg shadow mb-6"},React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},React.createElement("div",null,React.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Buscar"),React.createElement("input",{type:"text",placeholder:"Buscar por título, descripción o abogado...",value:l,onChange:T=>i(T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),React.createElement("div",null,React.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Estado"),React.createElement("select",{id:"statusFilter","aria-label":"Estado",value:c,onChange:T=>d(T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},React.createElement("option",{value:"todos"},"Todos los estados"),React.createElement("option",{value:"ABIERTO"},"Abierto"),React.createElement("option",{value:"EN_PROCESO"},"En Proceso"),React.createElement("option",{value:"CERRADO"},"Cerrado"))),React.createElement("div",{className:"flex items-end"},React.createElement("button",{onClick:()=>{i(""),d("todos")},className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"},"Limpiar Filtros")))),React.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},r.map(T=>{var M;return React.createElement("div",{key:T.id,className:"bg-white shadow rounded-lg overflow-hidden"},React.createElement("div",{className:"p-6"},React.createElement("div",{className:"flex items-center justify-between mb-4"},React.createElement("h3",{className:"text-lg font-semibold text-gray-900 truncate"},T.title),React.createElement("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${P(T.status)}`},I(T.status))),React.createElement("p",{className:"text-gray-600 text-sm mb-4 line-clamp-3"},T.description||"Sin descripción disponible"),React.createElement("div",{className:"space-y-2 mb-4"},React.createElement("div",{className:"flex items-center text-sm text-gray-500"},React.createElement("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})),((M=T.lawyer)==null?void 0:M.name)||"Abogado no asignado"),React.createElement("div",{className:"flex items-center text-sm text-gray-500"},React.createElement("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3a4 4 0 118 0v4m-4 6v6m-4-6h8"})),T.documents.length," documentos"),React.createElement("div",{className:"flex items-center text-sm text-gray-500"},React.createElement("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})),new Date(T.createdAt).toLocaleDateString())),React.createElement("div",{className:"flex space-x-2 items-center"},React.createElement(De,{to:`/client/cases/${T.id}`,className:"flex-1 px-3 py-2 bg-blue-600 text-white text-center text-sm rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"},"Ver Detalles"),React.createElement("button",{className:`px-3 py-2 text-white text-sm rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 ${C[T.id]?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"}`,onClick:()=>L(T),disabled:!!C[T.id]},C[T.id]?"Mensaje enviado":"Contactar"),A[T.lawyer.id]&&A[T.lawyer.id].lastMessage&&React.createElement("span",{className:`ml-2 text-xs font-semibold ${A[T.lawyer.id].read?"text-green-600":"text-yellow-600"}`},A[T.lawyer.id].read?"Leído":"No leído"))))})),x&&y&&React.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40"},React.createElement("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md"},React.createElement("h2",{className:"text-lg font-semibold mb-4"},"Contactar a ",y.lawyer.name),React.createElement("textarea",{className:"w-full border border-gray-300 rounded-md p-2 mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500",rows:4,placeholder:"Escribe tu mensaje...",value:p,onChange:T=>h(T.target.value),disabled:E}),N&&React.createElement("div",{className:"text-red-600 mb-2"},N),React.createElement("div",{className:"flex justify-end space-x-2"},React.createElement("button",{className:"px-4 py-2 bg-gray-300 rounded hover:bg-gray-400",onClick:()=>b(!1),disabled:E},"Cancelar"),React.createElement("button",{className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50",onClick:F,disabled:E||!p.trim()},E?"Enviando...":"Enviar")))),r.length===0&&React.createElement("div",{className:"text-center py-12"},React.createElement("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})),React.createElement("h3",{className:"mt-2 text-sm font-medium text-gray-900"},"No se encontraron expedientes"),React.createElement("p",{className:"mt-1 text-sm text-gray-500"},e.length===0?"Aún no tienes expedientes asignados. Contacta con un abogado para iniciar un caso.":"Intenta ajustar los filtros de búsqueda."),e.length===0&&React.createElement("div",{className:"mt-6"},React.createElement(De,{to:"/client/appointments",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"},"Programar Consulta")))))},FT=()=>{var u,m,f,x;const{id:e}=jg(),t=qr(),[r,a]=g.useState(null),[s,o]=g.useState(!0),[l,i]=g.useState(null);g.useEffect(()=>{(async()=>{var y,v;if(e)try{o(!0);const p=localStorage.getItem("token"),h=await xe.get(`/api/cases/${e}`,{headers:{Authorization:`Bearer ${p}`}});a(h.data),i(null)}catch(p){console.error("Error fetching case:",p),i(((v=(y=p.response)==null?void 0:y.data)==null?void 0:v.message)||"Error al cargar el expediente")}finally{o(!1)}})()},[e]);const c=b=>{switch(b){case"ABIERTO":return"bg-green-100 text-green-800";case"EN_PROCESO":return"bg-yellow-100 text-yellow-800";case"CERRADO":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},d=b=>{switch(b){case"ABIERTO":return"Abierto";case"EN_PROCESO":return"En Proceso";case"CERRADO":return"Cerrado";default:return b}};return s?React.createElement("div",{className:"flex items-center justify-center min-h-screen"},React.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})):l||!r?React.createElement("div",{className:"flex items-center justify-center min-h-screen"},React.createElement("div",{className:"text-center"},React.createElement("div",{className:"text-red-600 text-xl mb-4"},"Error"),React.createElement("div",{className:"text-gray-600"},l||"Expediente no encontrado"),React.createElement("button",{onClick:()=>t("/client/cases"),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},"Volver a Expedientes"))):React.createElement("div",{className:"py-6"},React.createElement("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},React.createElement("div",{className:"mb-8"},React.createElement("div",{className:"flex items-center justify-between"},React.createElement("div",null,React.createElement("div",{className:"flex items-center space-x-4"},React.createElement("button",{onClick:()=>t("/client/cases"),className:"text-gray-400 hover:text-gray-600","aria-label":"Volver a Expedientes",title:"Volver a Expedientes"},React.createElement("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"}))),React.createElement("h1",{className:"text-3xl font-bold text-gray-900"},r.title)),React.createElement("p",{className:"mt-2 text-gray-600"},"Expediente creado el ",new Date(r.createdAt).toLocaleDateString())))),React.createElement(nN,{expedienteId:r.id,expedienteData:r}),React.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6"},React.createElement("div",{className:"lg:col-span-2 space-y-6"},React.createElement("div",{className:"bg-white shadow rounded-lg p-6"},React.createElement("h2",{className:"text-lg font-semibold text-gray-900 mb-4"},"Estado del Expediente"),React.createElement("div",{className:"flex items-center space-x-4"},React.createElement("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${c(r.status)}`},d(r.status)),React.createElement("p",{className:"text-sm text-gray-600"},r.status==="ABIERTO"&&"Tu caso está siendo revisado por nuestro equipo legal.",r.status==="EN_PROCESO"&&"Tu caso está en proceso activo. Nuestro abogado está trabajando en él.",r.status==="CERRADO"&&"Tu caso ha sido completado y cerrado."))),React.createElement("div",{className:"bg-white shadow rounded-lg p-6"},React.createElement("h2",{className:"text-lg font-semibold text-gray-900 mb-4"},"Descripción del Caso"),React.createElement("p",{className:"text-gray-700"},r.description||"No hay descripción disponible para este expediente.")),React.createElement("div",{className:"bg-white shadow rounded-lg p-6"},React.createElement("h2",{className:"text-lg font-semibold text-gray-900 mb-4"},"Documentos del Caso"),r.documents.length>0?React.createElement("div",{className:"space-y-3"},r.documents.map(b=>React.createElement("div",{key:b.id,className:"flex items-center justify-between p-3 border border-gray-200 rounded-md"},React.createElement("div",{className:"flex items-center space-x-3"},React.createElement("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})),React.createElement("div",null,React.createElement("p",{className:"text-sm font-medium text-gray-900"},b.filename),React.createElement("p",{className:"text-xs text-gray-500"},"Subido el ",new Date(b.uploadedAt).toLocaleDateString()))),React.createElement("a",{href:b.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-sm"},"Descargar")))):React.createElement("p",{className:"text-gray-500 text-center py-4"},"No hay documentos disponibles aún.")),React.createElement("div",{className:"bg-white shadow rounded-lg p-6"},React.createElement("h2",{className:"text-lg font-semibold text-gray-900 mb-4"},"Próximos Pasos"),React.createElement("div",{className:"space-y-3"},r.status==="ABIERTO"&&React.createElement(React.Fragment,null,React.createElement("div",{className:"flex items-start space-x-3"},React.createElement("div",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center"},React.createElement("span",{className:"text-blue-600 text-xs font-semibold"},"1")),React.createElement("div",null,React.createElement("p",{className:"text-sm font-medium text-gray-900"},"Revisión Inicial"),React.createElement("p",{className:"text-sm text-gray-600"},"Nuestro abogado está revisando los detalles de tu caso."))),React.createElement("div",{className:"flex items-start space-x-3"},React.createElement("div",{className:"flex-shrink-0 w-6 h-6 bg-gray-100 rounded-full flex items-center justify-center"},React.createElement("span",{className:"text-gray-400 text-xs font-semibold"},"2")),React.createElement("div",null,React.createElement("p",{className:"text-sm font-medium text-gray-400"},"Análisis Legal"),React.createElement("p",{className:"text-sm text-gray-400"},"Se realizará un análisis completo de tu situación legal.")))),r.status==="EN_PROCESO"&&React.createElement(React.Fragment,null,React.createElement("div",{className:"flex items-start space-x-3"},React.createElement("div",{className:"flex-shrink-0 w-6 h-6 bg-green-100 rounded-full flex items-center justify-center"},React.createElement("svg",{className:"w-3 h-3 text-green-600",fill:"currentColor",viewBox:"0 0 20 20"},React.createElement("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"}))),React.createElement("div",null,React.createElement("p",{className:"text-sm font-medium text-gray-900"},"Análisis Completado"),React.createElement("p",{className:"text-sm text-gray-600"},"El análisis inicial de tu caso ha sido completado."))),React.createElement("div",{className:"flex items-start space-x-3"},React.createElement("div",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center"},React.createElement("span",{className:"text-blue-600 text-xs font-semibold"},"2")),React.createElement("div",null,React.createElement("p",{className:"text-sm font-medium text-gray-900"},"Proceso Activo"),React.createElement("p",{className:"text-sm text-gray-600"},"Tu abogado está trabajando activamente en tu caso.")))),r.status==="CERRADO"&&React.createElement("div",{className:"flex items-start space-x-3"},React.createElement("div",{className:"flex-shrink-0 w-6 h-6 bg-green-100 rounded-full flex items-center justify-center"},React.createElement("svg",{className:"w-3 h-3 text-green-600",fill:"currentColor",viewBox:"0 0 20 20"},React.createElement("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"}))),React.createElement("div",null,React.createElement("p",{className:"text-sm font-medium text-gray-900"},"Caso Completado"),React.createElement("p",{className:"text-sm text-gray-600"},"Tu caso ha sido completado exitosamente.")))))),React.createElement("div",{className:"space-y-6"},React.createElement("div",{className:"bg-white shadow rounded-lg p-6"},React.createElement("h2",{className:"text-lg font-semibold text-gray-900 mb-4"},"Tu Abogado"),React.createElement("div",{className:"space-y-3"},React.createElement("div",{className:"flex items-center space-x-3"},React.createElement("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center"},React.createElement("span",{className:"text-blue-600 font-semibold"},((m=(u=r.lawyer)==null?void 0:u.name)==null?void 0:m.split(" ").map(b=>b[0]).join(""))||"AB")),React.createElement("div",null,React.createElement("p",{className:"text-sm font-medium text-gray-900"},((f=r.lawyer)==null?void 0:f.name)||"Abogado no asignado"),React.createElement("p",{className:"text-sm text-gray-500"},((x=r.lawyer)==null?void 0:x.email)||"Email no disponible"))),React.createElement("button",{className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm"},"Contactar Abogado"))),React.createElement("div",{className:"bg-white shadow rounded-lg p-6"},React.createElement("h2",{className:"text-lg font-semibold text-gray-900 mb-4"},"Acciones Rápidas"),React.createElement("div",{className:"space-y-3"},React.createElement("button",{className:"w-full px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 text-sm"},"Programar Cita"),React.createElement("button",{className:"w-full px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 text-sm"},"Enviar Mensaje"),React.createElement("button",{className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 text-sm"},"Solicitar Información"))),React.createElement("div",{className:"bg-white shadow rounded-lg p-6"},React.createElement("h2",{className:"text-lg font-semibold text-gray-900 mb-4"},"Información de Contacto"),React.createElement("div",{className:"space-y-3 text-sm"},React.createElement("div",{className:"flex items-center space-x-2"},React.createElement("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})),React.createElement("span",{className:"text-gray-600"},"(555) 123-4567")),React.createElement("div",{className:"flex items-center space-x-2"},React.createElement("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})),React.createElement("span",{className:"text-gray-600"},"info@despacholegal.com")),React.createElement("div",{className:"flex items-center space-x-2"},React.createElement("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})),React.createElement("span",{className:"text-gray-600"},"Av. Principal 123, Ciudad"))))))))},jT=({onFileSelect:e,maxFiles:t=5,maxSize:r=5*1024*1024,acceptedTypes:a=[".pdf",".txt",".csv",".doc",".docx",".jpg",".jpeg",".png",".gif",".webp"],disabled:s=!1})=>{const[o,l]=g.useState(!1),[i,c]=g.useState(null),d=g.useRef(null),u=p=>{const h=[],E=[];return p.length>t&&E.push(`No se pueden subir más de ${t} archivos`),Array.from(p).forEach(w=>{var S;w.size>r&&E.push(`${w.name} excede el tamaño máximo de ${r/(1024*1024)}MB`);const N="."+((S=w.name.split(".").pop())==null?void 0:S.toLowerCase());a.includes(N)||E.push(`${w.name} no es un tipo de archivo permitido`),w.size===0&&E.push(`${w.name} está vacío`),E.length===0&&h.push(w)}),E.length>0?(c(E.join(", ")),[]):(c(null),h)},m=p=>{console.log("FileUpload: handleFiles called with",p.length,"files"),console.log("FileUpload: File names:",Array.from(p).map(E=>E.name));const h=u(p);h.length>0&&(console.log("FileUpload: Valid files to send:",h.map(E=>E.name)),e(h)),d.current&&(d.current.value="")},f=p=>{p.preventDefault(),p.stopPropagation(),p.type==="dragenter"||p.type==="dragover"?l(!0):p.type==="dragleave"&&l(!1)},x=p=>{p.preventDefault(),p.stopPropagation(),l(!1),p.dataTransfer.files&&p.dataTransfer.files[0]&&m(p.dataTransfer.files)},b=p=>{p.preventDefault(),p.target.files&&p.target.files[0]&&m(p.target.files)},y=p=>{p.preventDefault(),p.stopPropagation(),d.current&&!s&&d.current.click()},v=p=>{p.preventDefault(),p.stopPropagation(),s||y(p)};return n.createElement("div",{className:"w-full"},n.createElement("input",{ref:d,type:"file",multiple:!0,accept:a.join(","),"aria-label":"Seleccionar archivos para subir",title:"Seleccionar archivos para subir",placeholder:"Selecciona archivos",onChange:b,className:"hidden",disabled:s,style:{display:"none"}}),n.createElement("div",{className:`relative border-2 border-dashed rounded-lg p-6 text-center ${o?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"} ${s?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,onDragEnter:f,onDragLeave:f,onDragOver:f,onDrop:x,onClick:v,"aria-label":"Área de carga de archivos"},n.createElement("div",{className:"space-y-2"},n.createElement("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true"},n.createElement("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),n.createElement("div",{className:"text-gray-600"},n.createElement("span",{className:"font-medium"},"Haz clic para subir")," o arrastra y suelta"),n.createElement("p",{className:"text-xs text-gray-500"},"PDF, TXT, CSV, DOC, DOCX, JPG, PNG, GIF, WEBP hasta ",r/(1024*1024),"MB"),n.createElement("p",{className:"text-xs text-gray-500"},"Máximo ",t," archivos"))),i&&n.createElement("div",{className:"mt-2 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md p-2"},i))},BT=()=>{const[e,t]=g.useState([]),[r,a]=g.useState([]),[s,o]=g.useState(!0),[l,i]=g.useState(null),[c,d]=g.useState(""),[u,m]=g.useState("todos"),[f,x]=g.useState(null),[b,y]=g.useState(!1),[v,p]=g.useState([]),[h,E]=g.useState(!1),[w,N]=g.useState({expedienteId:"",description:""}),[S,C]=g.useState([]),{user:D}=Pe();g.useEffect(()=>{(async()=>{try{o(!0);const M=localStorage.getItem("token"),[V,X,z]=await Promise.all([xe.get("/documents",{headers:{Authorization:`Bearer ${M}`}}),xe.get("/documents/stats",{headers:{Authorization:`Bearer ${M}`}}),xe.get("/cases",{headers:{Authorization:`Bearer ${M}`}})]);t(V.data),i(X.data),C(z.data),x(null)}catch(M){console.error("Error fetching documents:",M),x("Error al cargar los documentos")}finally{o(!1)}})()},[]),g.useEffect(()=>{let T=Array.isArray(e)?e:[];c&&(T=T.filter(M=>{var V;return M.originalName.toLowerCase().includes(c.toLowerCase())||M.expediente.title.toLowerCase().includes(c.toLowerCase())||M.expediente.client.user.name.toLowerCase().includes(c.toLowerCase())||((V=M.description)==null?void 0:V.toLowerCase().includes(c.toLowerCase()))})),u!=="todos"&&(T=T.filter(M=>M.mimeType===u)),a(T)},[e,c,u]);const k=T=>{console.log("handleFileSelect called with:",T.length,"files"),console.log("Files:",T.map(V=>V.name)),console.log("Files details:",T.map(V=>({name:V.name,size:V.size,type:V.type})));const M=T.filter((V,X,z)=>X===z.findIndex(U=>U.name===V.name&&U.size===V.size));M.length!==T.length&&console.warn("Se encontraron archivos duplicados, eliminando..."),p(M)},O=()=>{p([])},A=()=>{E(!0),x(null),p([])},$=()=>{E(!1),p([]),N({expedienteId:"",description:""}),x(null)},P=async()=>{var T,M,V;if(v.length===0||!w.expedienteId){x("Por favor selecciona archivos y un expediente");return}try{y(!0),x(null);const X=localStorage.getItem("token"),z=v.map(j=>{const B=new FormData;return B.append("file",j),B.append("expedienteId",w.expedienteId),w.description&&B.append("description",w.description),xe.post("/documents/upload",B,{headers:{Authorization:`Bearer ${X}`,"Content-Type":"multipart/form-data"}})});console.log("Subiendo archivos...");const U=await Promise.all(z);console.log("Resultados de subida:",U.map(j=>j.data)),console.log("Recargando documentos...");const Y=await xe.get("/documents",{headers:{Authorization:`Bearer ${X}`}});console.log("Documentos cargados:",Y.data);const Q=Y.data.filter(j=>{const B=j&&j.id&&j.originalName;return B||console.warn("Documento inválido encontrado:",j),B});t(Q),$()}catch(X){console.error("Error uploading files:",X),console.error("Error response:",(T=X.response)==null?void 0:T.data),x(((V=(M=X.response)==null?void 0:M.data)==null?void 0:V.message)||"Error al subir los archivos")}finally{y(!1)}},I=async T=>{if(confirm("¿Estás seguro de que quieres eliminar este documento?"))try{const M=localStorage.getItem("token");await xe.delete(`/documents/${T}`,{headers:{Authorization:`Bearer ${M}`}}),t(V=>V.filter(X=>X.id!==T))}catch(M){console.error("Error deleting document:",M),x("Error al eliminar el documento")}},L=T=>{if(T===0)return"0 Bytes";const M=1024,V=["Bytes","KB","MB","GB"],X=Math.floor(Math.log(T)/Math.log(M));return parseFloat((T/Math.pow(M,X)).toFixed(2))+" "+V[X]},F=T=>T.includes("pdf")?"📄":T.includes("image")?"🖼️":T.includes("text")?"📝":T.includes("word")?"📄":"📎";return s?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})):n.createElement("div",{className:"py-6"},n.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"flex justify-between items-center"},n.createElement("div",null,n.createElement("h1",{className:"text-3xl font-bold text-gray-900"},"Documentos"),n.createElement("p",{className:"mt-2 text-gray-600"},"Gestiona todos los documentos legales")),n.createElement("button",{onClick:A,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"},"Subir Documentos"))),l&&n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6"},n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-blue-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Total Documentos"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},typeof l.total=="number"&&!isNaN(l.total)?l.total:0)))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-green-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Tamaño Total"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},typeof l.totalSize=="number"&&!isNaN(l.totalSize)?L(l.totalSize):"-")))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-yellow-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"PDFs"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},(Array.isArray(l.byType)?l.byType:[]).filter(T=>T.type.includes("pdf")).reduce((T,M)=>T+M.count,0))))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-purple-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 002 2z"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Imágenes"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},(Array.isArray(l.byType)?l.byType:[]).filter(T=>T.type.includes("image")).reduce((T,M)=>T+M.count,0)))))),l&&n.createElement("div",{className:"bg-white p-6 rounded-lg shadow mb-6"},n.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-4"},"Estadísticas por Tipo"),n.createElement("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-2xl font-bold text-blue-600"},(Array.isArray(l.byType)?l.byType:[]).filter(T=>T.type.includes("pdf")).reduce((T,M)=>T+M.count,0)),n.createElement("div",{className:"text-sm text-gray-600"},"PDFs")),n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-2xl font-bold text-green-600"},(Array.isArray(l.byType)?l.byType:[]).filter(T=>T.type.includes("text")).reduce((T,M)=>T+M.count,0)),n.createElement("div",{className:"text-sm text-gray-600"},"Documentos de Texto")),n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-2xl font-bold text-purple-600"},(Array.isArray(l.byType)?l.byType:[]).filter(T=>T.type.includes("image")).reduce((T,M)=>T+M.count,0)),n.createElement("div",{className:"text-sm text-gray-600"},"Imágenes")),n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-2xl font-bold text-orange-600"},(Array.isArray(l.byType)?l.byType:[]).filter(T=>T.type.includes("word")||T.type.includes("document")).reduce((T,M)=>T+M.count,0)),n.createElement("div",{className:"text-sm text-gray-600"},"Documentos Word")))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow mb-6"},n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Buscar"),n.createElement("input",{type:"text",placeholder:"Buscar por nombre, expediente o descripción...",value:c,onChange:T=>d(T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Tipo de Archivo"),n.createElement("select",{value:u,onChange:T=>m(T.target.value),"aria-label":"Filtrar por tipo de archivo",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},n.createElement("option",{value:"todos"},"Todos los tipos"),n.createElement("option",{value:"application/pdf"},"PDF"),n.createElement("option",{value:"text/plain"},"Texto"),n.createElement("option",{value:"image/jpeg"},"Imágenes"),n.createElement("option",{value:"application/msword"},"Word"))),n.createElement("div",{className:"flex items-end"},n.createElement("button",{onClick:()=>{d(""),m("todos")},className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"},"Limpiar Filtros")))),n.createElement("div",{className:"bg-white shadow rounded-lg overflow-hidden"},n.createElement("div",{className:"overflow-x-auto"},n.createElement("table",{className:"min-w-full divide-y divide-gray-200"},n.createElement("thead",{className:"bg-gray-50"},n.createElement("tr",null,n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Documento"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Expediente"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Cliente"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Tamaño"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Subido Por"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Fecha"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Acciones"))),n.createElement("tbody",{className:"bg-white divide-y divide-gray-200"},(Array.isArray(r)?r:[]).map(T=>{var M,V,X,z,U;return n.createElement("tr",{key:T.id,className:"hover:bg-gray-50"},n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("div",{className:"flex items-center"},n.createElement("span",{className:"text-2xl mr-3"},F(T.mimeType)),n.createElement("div",null,n.createElement("div",{className:"text-sm font-medium text-gray-900"},T.originalName),T.description&&n.createElement("div",{className:"text-sm text-gray-500"},T.description)))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement(De,{to:`/lawyer/cases/${T.expedienteId}`,className:"text-blue-600 hover:text-blue-900 text-sm"},((M=T.expediente)==null?void 0:M.title)||"Sin título")),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},((z=(X=(V=T.expediente)==null?void 0:V.client)==null?void 0:X.user)==null?void 0:z.name)||"Cliente no disponible"),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},L(T.fileSize)),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},((U=T.uploadedByUser)==null?void 0:U.name)||"Usuario no disponible"),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},new Date(T.uploadedAt).toLocaleDateString()),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium"},n.createElement("div",{className:"flex space-x-2"},n.createElement("a",{href:`/api/documents/${T.id}/download`,className:"text-blue-600 hover:text-blue-900",target:"_blank",rel:"noopener noreferrer"},"Descargar"),n.createElement("button",{onClick:()=>I(T.id),className:"text-red-600 hover:text-red-900"},"Eliminar"))))}))))),r.length===0&&n.createElement("div",{className:"text-center py-12"},n.createElement("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})),n.createElement("h3",{className:"mt-2 text-sm font-medium text-gray-900"},"No se encontraron documentos"),n.createElement("p",{className:"mt-1 text-sm text-gray-500"},"Intenta ajustar los filtros o subir nuevos documentos."))),h&&n.createElement("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},n.createElement("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},n.createElement("div",{className:"mt-3"},n.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-4"},"Subir Documentos"),f&&n.createElement("div",{className:"mb-4 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md p-2"},f),n.createElement("div",{className:"space-y-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Expediente"),n.createElement("select",{id:"expediente-select","aria-label":"Expediente",value:w.expedienteId,onChange:T=>N(M=>({...M,expedienteId:T.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},n.createElement("option",{value:""},"Selecciona un expediente"),S.map(T=>n.createElement("option",{key:T.id,value:T.id},T.title," - ",T.client.user.name)))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Descripción (opcional)"),n.createElement("textarea",{value:w.description,onChange:T=>N(M=>({...M,description:T.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Descripción del documento..."})),n.createElement(jT,{onFileSelect:k,maxFiles:5,maxSize:5*1024*1024}),v.length>0&&n.createElement("div",{className:"mt-4"},n.createElement("div",{className:"flex justify-between items-center mb-2"},n.createElement("h4",{className:"text-sm font-medium text-gray-700"},"Archivos seleccionados:"),n.createElement("button",{onClick:O,className:"text-sm text-red-600 hover:text-red-800"},"Limpiar")),n.createElement("ul",{className:"text-sm text-gray-600 space-y-1"},v.map((T,M)=>n.createElement("li",{key:M},T.name," (",L(T.size),")"))))),n.createElement("div",{className:"flex justify-end space-x-3 mt-6"},n.createElement("button",{onClick:$,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"},"Cancelar"),n.createElement("button",{onClick:P,disabled:b||v.length===0||!w.expedienteId,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"},b?"Subiendo...":"Subir Documentos"))))))},zT=()=>{const[e,t]=g.useState([]),[r,a]=g.useState([]),[s,o]=g.useState(!0),[l,i]=g.useState(""),[c,d]=g.useState("todos"),[u,m]=g.useState(null),{user:f}=Pe();g.useEffect(()=>{(async()=>{try{o(!0);const h=localStorage.getItem("token"),E=await Z.get("/documents",{headers:{Authorization:`Bearer ${h}`}});t(E.data),m(null)}catch(h){console.error("Error fetching documents:",h),m("Error al cargar los documentos")}finally{o(!1)}})()},[]),g.useEffect(()=>{let p=e;l&&(p=p.filter(h=>{var E;return h.originalName.toLowerCase().includes(l.toLowerCase())||h.expediente.title.toLowerCase().includes(l.toLowerCase())||((E=h.description)==null?void 0:E.toLowerCase().includes(l.toLowerCase()))})),c!=="todos"&&(p=p.filter(h=>h.mimeType===c)),a(p)},[e,l,c]);const x=p=>{if(p===0)return"0 Bytes";const h=1024,E=["Bytes","KB","MB","GB"],w=Math.floor(Math.log(p)/Math.log(h));return parseFloat((p/Math.pow(h,w)).toFixed(2))+" "+E[w]},b=p=>p.includes("pdf")?"📄":p.includes("image")?"🖼️":p.includes("text")?"📝":p.includes("word")?"📄":"📎",y=p=>{switch(p){case"ABIERTO":return"bg-green-100 text-green-800";case"EN_PROCESO":return"bg-yellow-100 text-yellow-800";case"CERRADO":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},v=p=>{switch(p){case"ABIERTO":return"Abierto";case"EN_PROCESO":return"En Proceso";case"CERRADO":return"Cerrado";default:return p}};return s?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})):u?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-red-600 text-xl mb-4"},"Error"),n.createElement("div",{className:"text-gray-600"},u),n.createElement("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},"Reintentar"))):n.createElement("div",{className:"py-6"},n.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"mb-8"},n.createElement("div",null,n.createElement("h1",{className:"text-3xl font-bold text-gray-900"},"Mis Documentos"),n.createElement("p",{className:"mt-2 text-gray-600"},"Accede a todos los documentos de tus expedientes"))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow mb-6"},n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Buscar"),n.createElement("input",{type:"text",placeholder:"Buscar por nombre de documento o expediente...",value:l,onChange:p=>i(p.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Tipo de Archivo"),n.createElement("select",{value:c,onChange:p=>d(p.target.value),"aria-label":"Filtrar por tipo de archivo",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},n.createElement("option",{value:"todos"},"Todos los tipos"),n.createElement("option",{value:"application/pdf"},"PDF"),n.createElement("option",{value:"text/plain"},"Texto"),n.createElement("option",{value:"image/jpeg"},"Imágenes"),n.createElement("option",{value:"application/msword"},"Word"))),n.createElement("div",{className:"flex items-end"},n.createElement("button",{onClick:()=>{i(""),d("todos")},className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"},"Limpiar Filtros")))),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},r.map(p=>n.createElement("div",{key:p.id,className:"bg-white shadow rounded-lg overflow-hidden"},n.createElement("div",{className:"p-6"},n.createElement("div",{className:"flex items-center justify-between mb-4"},n.createElement("span",{className:"text-3xl"},b(p.mimeType)),n.createElement("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${y(p.expediente.status)}`},v(p.expediente.status))),n.createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-2 truncate"},p.originalName),p.description&&n.createElement("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2"},p.description),n.createElement("div",{className:"space-y-2 mb-4"},n.createElement("div",{className:"flex items-center text-sm text-gray-500"},n.createElement("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})),p.expediente.title),n.createElement("div",{className:"flex items-center text-sm text-gray-500"},n.createElement("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})),p.uploadedBy.name),n.createElement("div",{className:"flex items-center text-sm text-gray-500"},n.createElement("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"})),x(p.fileSize)),n.createElement("div",{className:"flex items-center text-sm text-gray-500"},n.createElement("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})),new Date(p.uploadedAt).toLocaleDateString())),n.createElement("div",{className:"flex space-x-2"},n.createElement("a",{href:`/api/documents/${p.id}/download`,className:"flex-1 px-3 py-2 bg-blue-600 text-white text-center text-sm rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",target:"_blank",rel:"noopener noreferrer"},"Descargar"),n.createElement("button",{className:"px-3 py-2 bg-green-600 text-white text-sm rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2"},"Ver")))))),r.length===0&&n.createElement("div",{className:"text-center py-12"},n.createElement("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})),n.createElement("h3",{className:"mt-2 text-sm font-medium text-gray-900"},"No se encontraron documentos"),n.createElement("p",{className:"mt-1 text-sm text-gray-500"},e.length===0?"Aún no tienes documentos en tus expedientes.":"Intenta ajustar los filtros de búsqueda."))))},UT=()=>{const e=qr(),{id:t}=jg(),{user:r}=Pe(),[a,s]=g.useState(!0),[o,l]=g.useState(!1),[i,c]=g.useState(null),[d,u]=g.useState([]),[m,f]=g.useState([]),[x,b]=g.useState({title:"",description:"",clientId:"",lawyerId:(r==null?void 0:r.role)==="ABOGADO"?r.id:""});g.useEffect(()=>{(async()=>{var h,E;try{s(!0);const w=localStorage.getItem("token"),[N,S,C]=await Promise.all([Z.get("/users/clients"),Z.get("/users/lawyers"),Z.get(`/cases/${t}`)]);u(N.data),f(S.data);const D=C.data;b({title:D.title||"",description:D.description||"",clientId:((h=D.client)==null?void 0:h.id)||"",lawyerId:((E=D.lawyer)==null?void 0:E.id)||((r==null?void 0:r.role)==="ABOGADO"?r.id:"")}),c(null)}catch(w){console.error("Error fetching data:",w),c("Error al cargar los datos del expediente")}finally{s(!1)}})()},[t,r]);const y=p=>{const{name:h,value:E}=p.target;b(w=>({...w,[h]:E}))},v=async p=>{var h,E;if(p.preventDefault(),!x.title||!x.clientId||!x.lawyerId){c("Por favor completa todos los campos obligatorios");return}try{l(!0),c(null),await Z.patch(`/cases/${t}`,x),e(`/lawyer/cases/${t}`)}catch(w){console.error("Error updating case:",w),c(((E=(h=w.response)==null?void 0:h.data)==null?void 0:E.message)||"Error al actualizar el expediente")}finally{l(!1)}};return a?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})):n.createElement("div",{className:"py-6"},n.createElement("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"flex items-center justify-between"},n.createElement("div",null,n.createElement("h1",{className:"text-3xl font-bold text-gray-900"},"Editar Expediente"),n.createElement("p",{className:"mt-2 text-gray-600"},"Modifica los datos del expediente legal")),n.createElement("button",{onClick:()=>e(`/lawyer/cases/${t}`),className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"},"Cancelar"))),n.createElement("div",{className:"bg-white shadow rounded-lg"},n.createElement("form",{onSubmit:v,className:"p-6 space-y-6"},i&&n.createElement("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md"},i),n.createElement("div",null,n.createElement("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2"},"Título del Expediente *"),n.createElement("input",{type:"text",id:"title",name:"title",value:x.title,onChange:y,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ej: Contrato de Compraventa"})),n.createElement("div",null,n.createElement("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2"},"Descripción"),n.createElement("textarea",{id:"description",name:"description",value:x.description,onChange:y,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe brevemente el caso..."})),n.createElement("div",null,n.createElement("label",{htmlFor:"clientId",className:"block text-sm font-medium text-gray-700 mb-2"},"Cliente *"),n.createElement("select",{id:"clientId",name:"clientId",value:x.clientId,onChange:y,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},n.createElement("option",{value:""},"Selecciona un cliente"),d.filter(p=>p.user).length===0&&n.createElement("option",{disabled:!0,value:""},"No hay clientes disponibles"),d.filter(p=>p.user).map(p=>{var h,E;return n.createElement("option",{key:p.id,value:p.id},((h=p.user)==null?void 0:h.name)||"Sin nombre"," - ",((E=p.user)==null?void 0:E.email)||"Sin email"," (DNI: ",p.dni,")")}))),n.createElement("div",null,n.createElement("label",{htmlFor:"lawyerId",className:"block text-sm font-medium text-gray-700 mb-2"},"Abogado Asignado *"),n.createElement("select",{id:"lawyerId",name:"lawyerId",value:x.lawyerId,onChange:y,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:(r==null?void 0:r.role)==="ABOGADO"},n.createElement("option",{value:""},"Selecciona un abogado"),m.map(p=>n.createElement("option",{key:p.id,value:p.id},p.name," - ",p.email))),(r==null?void 0:r.role)==="ABOGADO"&&n.createElement("p",{className:"mt-1 text-sm text-gray-500"},"Serás asignado automáticamente como abogado responsable")),n.createElement("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200"},n.createElement("button",{type:"button",onClick:()=>e(`/lawyer/cases/${t}`),className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"},"Cancelar"),n.createElement("button",{type:"submit",disabled:o,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"},o?"Guardando...":"Guardar Cambios"))))))};function ra(e){"@babel/helpers - typeof";return ra=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ra(e)}function VT(e,t){if(ra(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(ra(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aN(e){var t=VT(e,"string");return ra(t)=="symbol"?t:t+""}function Qa(e,t,r){return(t=aN(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Je(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Zv(Object(r),!0).forEach(function(a){Qa(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zv(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function dd(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function On(e,t){if(e==null)return{};var r,a,s=dd(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Dt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ey(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,aN(a.key),a)}}function At(e,t,r){return t&&ey(e.prototype,t),r&&ey(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function yu(e){return yu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yu(e)}function sN(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sN=function(){return!!e})()}function WT(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function HT(e,t){if(t&&(ra(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return WT(e)}function Xt(e,t,r){return t=yu(t),HT(e,sN()?Reflect.construct(t,r||[],yu(e).constructor):t.apply(e,r))}function Eu(e,t){return Eu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Eu(e,t)}function Qt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Eu(e,t)}function oN(e){if(Array.isArray(e))return e}function YT(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,o,l,i=[],c=!0,d=!1;try{if(o=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(a=o.call(r)).done)&&(i.push(a.value),i.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(d)throw s}}return i}}function pp(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=Array(t);r<t;r++)a[r]=e[r];return a}function Xg(e,t){if(e){if(typeof e=="string")return pp(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pp(e,t):void 0}}function lN(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jr(e,t){return oN(e)||YT(e,t)||Xg(e,t)||lN()}function iN(e){var t,r,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=iN(e[t]))&&(a&&(a+=" "),a+=r);else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}function ht(){for(var e,t,r=0,a="";r<arguments.length;)(e=arguments[r++])&&(t=iN(e))&&(a&&(a+=" "),a+=t);return a}function gt(){return gt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},gt.apply(null,arguments)}var qT=function(e,t,r,a,s,o,l,i){if(!e){var c;if(t===void 0)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[r,a,s,o,l,i],u=0;c=new Error(t.replace(/%s/g,function(){return d[u++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}},GT=qT;const Hl=xr(GT);var KT=function(){};function XT(e,t){var r={};return Object.keys(e).forEach(function(a){r[Pc(a)]=KT}),r}function ty(e,t){return e[t]!==void 0}function Pc(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function QT(e){return!!e&&(typeof e!="function"||e.prototype&&e.prototype.isReactComponent)}function JT(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Eu(e,t)}function cN(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);e!=null&&this.setState(e)}function uN(e){function t(r){var a=this.constructor.getDerivedStateFromProps(e,r);return a??null}this.setState(t.bind(this))}function dN(e,t){try{var r=this.props,a=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(r,a)}finally{this.props=r,this.state=a}}cN.__suppressDeprecationWarning=!0;uN.__suppressDeprecationWarning=!0;dN.__suppressDeprecationWarning=!0;function ZT(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if(typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function")return e;var r=null,a=null,s=null;if(typeof t.componentWillMount=="function"?r="componentWillMount":typeof t.UNSAFE_componentWillMount=="function"&&(r="UNSAFE_componentWillMount"),typeof t.componentWillReceiveProps=="function"?a="componentWillReceiveProps":typeof t.UNSAFE_componentWillReceiveProps=="function"&&(a="UNSAFE_componentWillReceiveProps"),typeof t.componentWillUpdate=="function"?s="componentWillUpdate":typeof t.UNSAFE_componentWillUpdate=="function"&&(s="UNSAFE_componentWillUpdate"),r!==null||a!==null||s!==null){var o=e.displayName||e.name,l=typeof e.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+o+" uses "+l+" but also contains the following legacy lifecycles:"+(r!==null?`
  `+r:"")+(a!==null?`
  `+a:"")+(s!==null?`
  `+s:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof e.getDerivedStateFromProps=="function"&&(t.componentWillMount=cN,t.componentWillReceiveProps=uN),typeof t.getSnapshotBeforeUpdate=="function"){if(typeof t.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=dN;var i=t.componentDidUpdate;t.componentDidUpdate=function(d,u,m){var f=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:m;i.call(this,d,u,f)}}return e}var e6="/Users/jquense/src/uncontrollable/src/uncontrollable.js";function mN(e,t,r){r===void 0&&(r=[]);var a=e.displayName||e.name||"Component",s=QT(e),o=Object.keys(t),l=o.map(Pc);s||!r.length||Hl(!1);var i=function(d){JT(u,d);function u(){for(var f,x=arguments.length,b=new Array(x),y=0;y<x;y++)b[y]=arguments[y];f=d.call.apply(d,[this].concat(b))||this,f.handlers=Object.create(null),o.forEach(function(p){var h=t[p],E=function(N){if(f.props[h]){var S;f._notifying=!0;for(var C=arguments.length,D=new Array(C>1?C-1:0),k=1;k<C;k++)D[k-1]=arguments[k];(S=f.props)[h].apply(S,[N].concat(D)),f._notifying=!1}f.unmounted||f.setState(function(O){var A,$=O.values;return{values:gt(Object.create(null),$,(A={},A[p]=N,A))}})};f.handlers[h]=E}),r.length&&(f.attachRef=function(p){f.inner=p});var v=Object.create(null);return o.forEach(function(p){v[p]=f.props[Pc(p)]}),f.state={values:v,prevProps:{}},f}var m=u.prototype;return m.shouldComponentUpdate=function(){return!this._notifying},u.getDerivedStateFromProps=function(x,b){var y=b.values,v=b.prevProps,p={values:gt(Object.create(null),y),prevProps:{}};return o.forEach(function(h){p.prevProps[h]=x[h],!ty(x,h)&&ty(v,h)&&(p.values[h]=x[Pc(h)])}),p},m.componentWillUnmount=function(){this.unmounted=!0},m.render=function(){var x=this,b=this.props,y=b.innerRef,v=dd(b,["innerRef"]);l.forEach(function(h){delete v[h]});var p={};return o.forEach(function(h){var E=x.props[h];p[h]=E!==void 0?E:x.state.values[h]}),n.createElement(e,gt({},v,p,this.handlers,{ref:y||this.attachRef}))},u}(n.Component);ZT(i),i.displayName="Uncontrolled("+a+")",i.propTypes=gt({innerRef:function(){}},XT(t)),r.forEach(function(d){i.prototype[d]=function(){var m;return(m=this.inner)[d].apply(m,arguments)}});var c=i;return n.forwardRef&&(c=n.forwardRef(function(d,u){return n.createElement(i,gt({},d,{innerRef:u,__source:{fileName:e6,lineNumber:128},__self:this}))}),c.propTypes=i.propTypes),c.ControlledComponent=e,c.deferControlTo=function(d,u,m){return u===void 0&&(u={}),mN(d,gt({},t,u),m)},c}var fN={exports:{}},t6="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",r6=t6,n6=r6;function pN(){}function gN(){}gN.resetWarningCache=pN;var a6=function(){function e(a,s,o,l,i,c){if(c!==n6){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:gN,resetWarningCache:pN};return r.PropTypes=r,r};fN.exports=a6();var Qg=fN.exports;const ae=xr(Qg);var xu="milliseconds",Yl="seconds",ql="minutes",Gl="hours",hs="day",co="week",Kl="month",vs="year",ys="decade",Es="century",hN={milliseconds:1,seconds:1e3,minutes:60*1e3,hours:60*60*1e3,day:24*60*60*1e3,week:7*24*60*60*1e3},s6={month:1,year:12,decade:10*12,century:100*12};function o6(e){return[31,l6(e),31,30,31,30,31,31,30,31,30,31]}function l6(e){return e%4===0&&e%100!==0||e%400===0?29:28}function dn(e,t,r){switch(e=new Date(e),r){case xu:case Yl:case ql:case Gl:case hs:case co:return i6(e,t*hN[r]);case Kl:case vs:case ys:case Es:return c6(e,t*s6[r])}throw new TypeError('Invalid units: "'+r+'"')}function i6(e,t){var r=new Date(+e+t);return u6(e,r)}function c6(e,t){var r=e.getFullYear(),a=e.getMonth(),s=e.getDate(),o=r*12+a+t,l=Math.trunc(o/12),i=o%12,c=Math.min(s,o6(l)[i]),d=new Date(e);return d.setFullYear(l),d.setDate(1),d.setMonth(i),d.setDate(c),d}function u6(e,t){var r=e.getTimezoneOffset(),a=t.getTimezoneOffset(),s=a-r;return new Date(+t+s*hN.minutes)}function Xl(e,t,r){return dn(e,-t,r)}function Ut(e,t,r){switch(e=new Date(e),t){case Es:case ys:case vs:e=wu(e,0);case Kl:e=bN(e,1);case co:case hs:e=Zl(e,0);case Gl:e=uo(e,0);case ql:e=Jl(e,0);case Yl:e=Ql(e,0)}return t===ys&&(e=Xl(e,xs(e)%10,"year")),t===Es&&(e=Xl(e,xs(e)%100,"year")),t===co&&(e=wN(e,0,r)),e}function bu(e,t,r){switch(e=new Date(e),e=Ut(e,t,r),t){case Es:case ys:case vs:case Kl:case co:e=dn(e,1,t),e=Xl(e,1,hs),e.setHours(23,59,59,999);break;case hs:e.setHours(23,59,59,999);break;case Gl:case ql:case Yl:e=dn(e,1,t),e=Xl(e,1,xu)}return e}var yi=ko(function(e,t){return e===t}),Jg=ko(function(e,t){return e!==t}),md=ko(function(e,t){return e>t}),Ei=ko(function(e,t){return e>=t}),Zg=ko(function(e,t){return e<t}),Co=ko(function(e,t){return e<=t});function vN(){return new Date(Math.min.apply(Math,arguments))}function yN(){return new Date(Math.max.apply(Math,arguments))}function EN(e,t,r,a){return a=a||"day",(!t||Ei(e,t,a))&&(!r||Co(e,r,a))}var Ql=Ua("Milliseconds"),Jl=Ua("Seconds"),uo=Ua("Minutes"),Zl=Ua("Hours"),xN=Ua("Day"),bN=Ua("Date"),wu=Ua("Month"),xs=Ua("FullYear");function d6(e,t){return t===void 0?xs(Ut(e,ys)):dn(e,t+10,vs)}function m6(e,t){return t===void 0?xs(Ut(e,Es)):dn(e,t+100,vs)}function wN(e,t,r){var a=(xN(e)+7-(r||0))%7;return t===void 0?a:dn(e,t-a,hs)}function f6(e,t,r,a){var s,o,l;switch(r){case xu:case Yl:case ql:case Gl:case hs:case co:s=t.getTime()-e.getTime();break;case Kl:case vs:case ys:case Es:s=(xs(t)-xs(e))*12+wu(t)-wu(e);break;default:throw new TypeError('Invalid units: "'+r+'"')}switch(r){case xu:o=1;break;case Yl:o=1e3;break;case ql:o=1e3*60;break;case Gl:o=1e3*60*60;break;case hs:o=1e3*60*60*24;break;case co:o=1e3*60*60*24*7;break;case Kl:o=1;break;case vs:o=12;break;case ys:o=120;break;case Es:o=1200;break;default:throw new TypeError('Invalid units: "'+r+'"')}return l=s/o,a?l:Math.round(l)}function Ua(e){var t=function(r){switch(r){case"Milliseconds":return 36e5;case"Seconds":return 3600;case"Minutes":return 60;case"Hours":return 1;default:return null}}(e);return function(r,a){if(a===void 0)return r["get"+e]();var s=new Date(r);return s["set"+e](a),t&&s["get"+e]()!=a&&(e==="Hours"||a>=t&&s.getHours()-r.getHours()<Math.floor(a/t))&&s["set"+e](a+t),s}}function ko(e){return function(t,r,a){return e(+Ut(t,a),+Ut(r,a))}}const ry=Object.freeze(Object.defineProperty({__proto__:null,add:dn,century:m6,date:bN,day:xN,decade:d6,diff:f6,endOf:bu,eq:yi,gt:md,gte:Ei,hours:Zl,inRange:EN,lt:Zg,lte:Co,max:yN,milliseconds:Ql,min:vN,minutes:uo,month:wu,neq:Jg,seconds:Jl,startOf:Ut,subtract:Xl,weekday:wN,year:xs},Symbol.toStringTag,{value:"Module"}));function p6(e){if(Array.isArray(e))return pp(e)}function NN(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function g6(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lc(e){return p6(e)||NN(e)||Xg(e)||g6()}function h6(e,t,r){var a=-1,s=e.length;t<0&&(t=-t>s?0:s+t),r=r>s?s:r,r<0&&(r+=s),s=t>r?0:r-t>>>0,t>>>=0;for(var o=Array(s);++a<s;)o[a]=e[a+t];return o}var SN=h6;function v6(e,t){return e===t||e!==e&&t!==t}var xi=v6,y6=typeof Br=="object"&&Br&&Br.Object===Object&&Br,CN=y6,E6=CN,x6=typeof self=="object"&&self&&self.Object===Object&&self,b6=E6||x6||Function("return this")(),Ln=b6,w6=Ln,N6=w6.Symbol,Do=N6,ny=Do,kN=Object.prototype,S6=kN.hasOwnProperty,C6=kN.toString,Jo=ny?ny.toStringTag:void 0;function k6(e){var t=S6.call(e,Jo),r=e[Jo];try{e[Jo]=void 0;var a=!0}catch{}var s=C6.call(e);return a&&(t?e[Jo]=r:delete e[Jo]),s}var D6=k6,A6=Object.prototype,T6=A6.toString;function _6(e){return T6.call(e)}var O6=_6,ay=Do,R6=D6,M6=O6,P6="[object Null]",L6="[object Undefined]",sy=ay?ay.toStringTag:void 0;function I6(e){return e==null?e===void 0?L6:P6:sy&&sy in Object(e)?R6(e):M6(e)}var Ao=I6;function $6(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var oa=$6,F6=Ao,j6=oa,B6="[object AsyncFunction]",z6="[object Function]",U6="[object GeneratorFunction]",V6="[object Proxy]";function W6(e){if(!j6(e))return!1;var t=F6(e);return t==z6||t==U6||t==B6||t==V6}var eh=W6,H6=9007199254740991;function Y6(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=H6}var th=Y6,q6=eh,G6=th;function K6(e){return e!=null&&G6(e.length)&&!q6(e)}var bi=K6,X6=9007199254740991,Q6=/^(?:0|[1-9]\d*)$/;function J6(e,t){var r=typeof e;return t=t??X6,!!t&&(r=="number"||r!="symbol"&&Q6.test(e))&&e>-1&&e%1==0&&e<t}var rh=J6,Z6=xi,e_=bi,t_=rh,r_=oa;function n_(e,t,r){if(!r_(r))return!1;var a=typeof t;return(a=="number"?e_(r)&&t_(t,r.length):a=="string"&&t in r)?Z6(r[t],e):!1}var fd=n_,a_=/\s/;function s_(e){for(var t=e.length;t--&&a_.test(e.charAt(t)););return t}var o_=s_,l_=o_,i_=/^\s+/;function c_(e){return e&&e.slice(0,l_(e)+1).replace(i_,"")}var u_=c_;function d_(e){return e!=null&&typeof e=="object"}var Va=d_,m_=Ao,f_=Va,p_="[object Symbol]";function g_(e){return typeof e=="symbol"||f_(e)&&m_(e)==p_}var wi=g_,h_=u_,oy=oa,v_=wi,ly=NaN,y_=/^[-+]0x[0-9a-f]+$/i,E_=/^0b[01]+$/i,x_=/^0o[0-7]+$/i,b_=parseInt;function w_(e){if(typeof e=="number")return e;if(v_(e))return ly;if(oy(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=oy(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=h_(e);var r=E_.test(e);return r||x_.test(e)?b_(e.slice(2),r?2:8):y_.test(e)?ly:+e}var N_=w_,S_=N_,iy=1/0,C_=17976931348623157e292;function k_(e){if(!e)return e===0?e:0;if(e=S_(e),e===iy||e===-iy){var t=e<0?-1:1;return t*C_}return e===e?e:0}var DN=k_,D_=DN;function A_(e){var t=D_(e),r=t%1;return t===t?r?t-r:t:0}var AN=A_,T_=SN,__=fd,O_=AN,R_=Math.ceil,M_=Math.max;function P_(e,t,r){(r?__(e,t,r):t===void 0)?t=1:t=M_(O_(t),0);var a=e==null?0:e.length;if(!a||t<1)return[];for(var s=0,o=0,l=Array(R_(a/t));s<a;)l[o++]=T_(e,s,s+=t);return l}var L_=P_;const I_=xr(L_);function Ni(e){return e&&e.ownerDocument||document}function $_(e){var t=Ni(e);return t&&t.defaultView||window}function F_(e,t){return $_(e).getComputedStyle(e,t)}var j_=/([A-Z])/g;function B_(e){return e.replace(j_,"-$1").toLowerCase()}var z_=/^ms-/;function ac(e){return B_(e).replace(z_,"-ms-")}var U_=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function V_(e){return!!(e&&U_.test(e))}function Ts(e,t){var r="",a="";if(typeof t=="string")return e.style.getPropertyValue(ac(t))||F_(e).getPropertyValue(ac(t));Object.keys(t).forEach(function(s){var o=t[s];!o&&o!==0?e.style.removeProperty(ac(s)):V_(s)?a+=s+"("+o+") ":r+=ac(s)+": "+o+";"}),a&&(r+="transform: "+a+";"),e.style.cssText+=";"+r}function ei(e,t){if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return e===t||!!(e.compareDocumentPosition(t)&16)}function W_(e){return"nodeType"in e&&e.nodeType===document.DOCUMENT_NODE}function nh(e){return"window"in e&&e.window===e?e:W_(e)&&e.defaultView||!1}function TN(e){var t=e==="pageXOffset"?"scrollLeft":"scrollTop";function r(a,s){var o=nh(a);if(s===void 0)return o?o[e]:a[t];o?o.scrollTo(o[e],s):a[t]=s}return r}const _N=TN("pageXOffset"),ON=TN("pageYOffset");function ls(e){var t=Ni(e),r={top:0,left:0,height:0,width:0},a=t&&t.documentElement;return!a||!ei(a,e)||(e.getBoundingClientRect!==void 0&&(r=e.getBoundingClientRect()),r={top:r.top+ON(a)-(a.clientTop||0),left:r.left+_N(a)-(a.clientLeft||0),width:r.width,height:r.height}),r}var H_=function(t){return!!t&&"offsetParent"in t};function Y_(e){for(var t=Ni(e),r=e&&e.offsetParent;H_(r)&&r.nodeName!=="HTML"&&Ts(r,"position")==="static";)r=r.offsetParent;return r||t.documentElement}var q_=function(t){return t.nodeName&&t.nodeName.toLowerCase()};function RN(e,t){var r={top:0,left:0},a;if(Ts(e,"position")==="fixed")a=e.getBoundingClientRect();else{var s=t||Y_(e);a=ls(e),q_(s)!=="html"&&(r=ls(s));var o=String(Ts(s,"borderTopWidth")||0);r.top+=parseInt(o,10)-ON(s)||0;var l=String(Ts(s,"borderLeftWidth")||0);r.left+=parseInt(l,10)-_N(s)||0}var i=String(Ts(e,"marginTop")||0),c=String(Ts(e,"marginLeft")||0);return gt({},a,{top:a.top-r.top-(parseInt(i,10)||0),left:a.left-r.left-(parseInt(c,10)||0)})}const ah=!!(typeof window<"u"&&window.document&&window.document.createElement);var cy=new Date().getTime();function G_(e){var t=new Date().getTime(),r=Math.max(0,16-(t-cy)),a=setTimeout(e,r);return cy=t,a}var K_=["","webkit","moz","o","ms"],gp="clearTimeout",hp=G_,uy=function(t,r){return t+(t?r[0].toUpperCase()+r.substr(1):r)+"AnimationFrame"};ah&&K_.some(function(e){var t=uy(e,"request");return t in window&&(gp=uy(e,"cancel"),hp=function(a){return window[t](a)}),!!hp});var dy=function(t){typeof window[gp]=="function"&&window[gp](t)},MN=hp,jm;function X_(e,t){if(!jm){var r=document.body,a=r.matches||r.matchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector;jm=function(o,l){return a.call(o,l)}}return jm(e,t)}var Q_=Function.prototype.bind.call(Function.prototype.call,[].slice);function J_(e,t){return Q_(e.querySelectorAll(t))}var vp=!1,yp=!1;try{var Bm={get passive(){return vp=!0},get once(){return yp=vp=!0}};ah&&(window.addEventListener("test",Bm,Bm),window.removeEventListener("test",Bm,!0))}catch{}function Z_(e,t,r,a){if(a&&typeof a!="boolean"&&!yp){var s=a.once,o=a.capture,l=r;!yp&&s&&(l=r.__once||function i(c){this.removeEventListener(t,i,o),r.call(this,c)},r.__once=l),e.addEventListener(t,l,vp?a:o)}e.addEventListener(t,r,a)}function e5(e){const t=g.useRef(e);return g.useEffect(()=>{t.current=e},[e]),t}function my(e){const t=e5(e);return g.useCallback(function(...r){return t.current&&t.current(...r)},[t])}function fy(){return g.useState(null)}function t5(){const e=g.useRef(!0),t=g.useRef(()=>e.current);return g.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}function r5(e){const t=t5();return[e[0],g.useCallback(r=>{if(t())return e[1](r)},[t,e[1]])]}var vr="top",Hr="bottom",Yr="right",yr="left",sh="auto",Si=[vr,Hr,Yr,yr],mo="start",ti="end",n5="clippingParents",PN="viewport",Zo="popper",a5="reference",py=Si.reduce(function(e,t){return e.concat([t+"-"+mo,t+"-"+ti])},[]),oh=[].concat(Si,[sh]).reduce(function(e,t){return e.concat([t,t+"-"+mo,t+"-"+ti])},[]),s5="beforeRead",o5="read",l5="afterRead",i5="beforeMain",c5="main",u5="afterMain",d5="beforeWrite",m5="write",f5="afterWrite",p5=[s5,o5,l5,i5,c5,u5,d5,m5,f5];function An(e){return e.split("-")[0]}function Cr(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function bs(e){var t=Cr(e).Element;return e instanceof t||e instanceof Element}function Tn(e){var t=Cr(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function lh(e){if(typeof ShadowRoot>"u")return!1;var t=Cr(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}var is=Math.max,Nu=Math.min,fo=Math.round;function Ep(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function LN(){return!/^((?!chrome|android).)*safari/i.test(Ep())}function po(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var a=e.getBoundingClientRect(),s=1,o=1;t&&Tn(e)&&(s=e.offsetWidth>0&&fo(a.width)/e.offsetWidth||1,o=e.offsetHeight>0&&fo(a.height)/e.offsetHeight||1);var l=bs(e)?Cr(e):window,i=l.visualViewport,c=!LN()&&r,d=(a.left+(c&&i?i.offsetLeft:0))/s,u=(a.top+(c&&i?i.offsetTop:0))/o,m=a.width/s,f=a.height/o;return{width:m,height:f,top:u,right:d+m,bottom:u+f,left:d,x:d,y:u}}function ih(e){var t=po(e),r=e.offsetWidth,a=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-a)<=1&&(a=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:a}}function IN(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&lh(r)){var a=t;do{if(a&&e.isSameNode(a))return!0;a=a.parentNode||a.host}while(a)}return!1}function La(e){return e?(e.nodeName||"").toLowerCase():null}function na(e){return Cr(e).getComputedStyle(e)}function g5(e){return["table","td","th"].indexOf(La(e))>=0}function Wa(e){return((bs(e)?e.ownerDocument:e.document)||window.document).documentElement}function pd(e){return La(e)==="html"?e:e.assignedSlot||e.parentNode||(lh(e)?e.host:null)||Wa(e)}function gy(e){return!Tn(e)||na(e).position==="fixed"?null:e.offsetParent}function h5(e){var t=/firefox/i.test(Ep()),r=/Trident/i.test(Ep());if(r&&Tn(e)){var a=na(e);if(a.position==="fixed")return null}var s=pd(e);for(lh(s)&&(s=s.host);Tn(s)&&["html","body"].indexOf(La(s))<0;){var o=na(s);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||t&&o.willChange==="filter"||t&&o.filter&&o.filter!=="none")return s;s=s.parentNode}return null}function Ci(e){for(var t=Cr(e),r=gy(e);r&&g5(r)&&na(r).position==="static";)r=gy(r);return r&&(La(r)==="html"||La(r)==="body"&&na(r).position==="static")?t:r||h5(e)||t}function ch(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function El(e,t,r){return is(e,Nu(t,r))}function v5(e,t,r){var a=El(e,t,r);return a>r?r:a}function $N(){return{top:0,right:0,bottom:0,left:0}}function FN(e){return Object.assign({},$N(),e)}function jN(e,t){return t.reduce(function(r,a){return r[a]=e,r},{})}var y5=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,FN(typeof t!="number"?t:jN(t,Si))};function E5(e){var t,r=e.state,a=e.name,s=e.options,o=r.elements.arrow,l=r.modifiersData.popperOffsets,i=An(r.placement),c=ch(i),d=[yr,Yr].indexOf(i)>=0,u=d?"height":"width";if(!(!o||!l)){var m=y5(s.padding,r),f=ih(o),x=c==="y"?vr:yr,b=c==="y"?Hr:Yr,y=r.rects.reference[u]+r.rects.reference[c]-l[c]-r.rects.popper[u],v=l[c]-r.rects.reference[c],p=Ci(o),h=p?c==="y"?p.clientHeight||0:p.clientWidth||0:0,E=y/2-v/2,w=m[x],N=h-f[u]-m[b],S=h/2-f[u]/2+E,C=El(w,S,N),D=c;r.modifiersData[a]=(t={},t[D]=C,t.centerOffset=C-S,t)}}function x5(e){var t=e.state,r=e.options,a=r.element,s=a===void 0?"[data-popper-arrow]":a;s!=null&&(typeof s=="string"&&(s=t.elements.popper.querySelector(s),!s)||IN(t.elements.popper,s)&&(t.elements.arrow=s))}const b5={name:"arrow",enabled:!0,phase:"main",fn:E5,effect:x5,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function go(e){return e.split("-")[1]}var w5={top:"auto",right:"auto",bottom:"auto",left:"auto"};function N5(e,t){var r=e.x,a=e.y,s=t.devicePixelRatio||1;return{x:fo(r*s)/s||0,y:fo(a*s)/s||0}}function hy(e){var t,r=e.popper,a=e.popperRect,s=e.placement,o=e.variation,l=e.offsets,i=e.position,c=e.gpuAcceleration,d=e.adaptive,u=e.roundOffsets,m=e.isFixed,f=l.x,x=f===void 0?0:f,b=l.y,y=b===void 0?0:b,v=typeof u=="function"?u({x,y}):{x,y};x=v.x,y=v.y;var p=l.hasOwnProperty("x"),h=l.hasOwnProperty("y"),E=yr,w=vr,N=window;if(d){var S=Ci(r),C="clientHeight",D="clientWidth";if(S===Cr(r)&&(S=Wa(r),na(S).position!=="static"&&i==="absolute"&&(C="scrollHeight",D="scrollWidth")),S=S,s===vr||(s===yr||s===Yr)&&o===ti){w=Hr;var k=m&&S===N&&N.visualViewport?N.visualViewport.height:S[C];y-=k-a.height,y*=c?1:-1}if(s===yr||(s===vr||s===Hr)&&o===ti){E=Yr;var O=m&&S===N&&N.visualViewport?N.visualViewport.width:S[D];x-=O-a.width,x*=c?1:-1}}var A=Object.assign({position:i},d&&w5),$=u===!0?N5({x,y},Cr(r)):{x,y};if(x=$.x,y=$.y,c){var P;return Object.assign({},A,(P={},P[w]=h?"0":"",P[E]=p?"0":"",P.transform=(N.devicePixelRatio||1)<=1?"translate("+x+"px, "+y+"px)":"translate3d("+x+"px, "+y+"px, 0)",P))}return Object.assign({},A,(t={},t[w]=h?y+"px":"",t[E]=p?x+"px":"",t.transform="",t))}function S5(e){var t=e.state,r=e.options,a=r.gpuAcceleration,s=a===void 0?!0:a,o=r.adaptive,l=o===void 0?!0:o,i=r.roundOffsets,c=i===void 0?!0:i,d={placement:An(t.placement),variation:go(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:s,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,hy(Object.assign({},d,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:l,roundOffsets:c})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,hy(Object.assign({},d,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const C5={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:S5,data:{}};var sc={passive:!0};function k5(e){var t=e.state,r=e.instance,a=e.options,s=a.scroll,o=s===void 0?!0:s,l=a.resize,i=l===void 0?!0:l,c=Cr(t.elements.popper),d=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&d.forEach(function(u){u.addEventListener("scroll",r.update,sc)}),i&&c.addEventListener("resize",r.update,sc),function(){o&&d.forEach(function(u){u.removeEventListener("scroll",r.update,sc)}),i&&c.removeEventListener("resize",r.update,sc)}}const D5={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:k5,data:{}};var A5={left:"right",right:"left",bottom:"top",top:"bottom"};function Ic(e){return e.replace(/left|right|bottom|top/g,function(t){return A5[t]})}var T5={start:"end",end:"start"};function vy(e){return e.replace(/start|end/g,function(t){return T5[t]})}function uh(e){var t=Cr(e),r=t.pageXOffset,a=t.pageYOffset;return{scrollLeft:r,scrollTop:a}}function dh(e){return po(Wa(e)).left+uh(e).scrollLeft}function _5(e,t){var r=Cr(e),a=Wa(e),s=r.visualViewport,o=a.clientWidth,l=a.clientHeight,i=0,c=0;if(s){o=s.width,l=s.height;var d=LN();(d||!d&&t==="fixed")&&(i=s.offsetLeft,c=s.offsetTop)}return{width:o,height:l,x:i+dh(e),y:c}}function O5(e){var t,r=Wa(e),a=uh(e),s=(t=e.ownerDocument)==null?void 0:t.body,o=is(r.scrollWidth,r.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),l=is(r.scrollHeight,r.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),i=-a.scrollLeft+dh(e),c=-a.scrollTop;return na(s||r).direction==="rtl"&&(i+=is(r.clientWidth,s?s.clientWidth:0)-o),{width:o,height:l,x:i,y:c}}function mh(e){var t=na(e),r=t.overflow,a=t.overflowX,s=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+s+a)}function BN(e){return["html","body","#document"].indexOf(La(e))>=0?e.ownerDocument.body:Tn(e)&&mh(e)?e:BN(pd(e))}function xl(e,t){var r;t===void 0&&(t=[]);var a=BN(e),s=a===((r=e.ownerDocument)==null?void 0:r.body),o=Cr(a),l=s?[o].concat(o.visualViewport||[],mh(a)?a:[]):a,i=t.concat(l);return s?i:i.concat(xl(pd(l)))}function xp(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function R5(e,t){var r=po(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function yy(e,t,r){return t===PN?xp(_5(e,r)):bs(t)?R5(t,r):xp(O5(Wa(e)))}function M5(e){var t=xl(pd(e)),r=["absolute","fixed"].indexOf(na(e).position)>=0,a=r&&Tn(e)?Ci(e):e;return bs(a)?t.filter(function(s){return bs(s)&&IN(s,a)&&La(s)!=="body"}):[]}function P5(e,t,r,a){var s=t==="clippingParents"?M5(e):[].concat(t),o=[].concat(s,[r]),l=o[0],i=o.reduce(function(c,d){var u=yy(e,d,a);return c.top=is(u.top,c.top),c.right=Nu(u.right,c.right),c.bottom=Nu(u.bottom,c.bottom),c.left=is(u.left,c.left),c},yy(e,l,a));return i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}function zN(e){var t=e.reference,r=e.element,a=e.placement,s=a?An(a):null,o=a?go(a):null,l=t.x+t.width/2-r.width/2,i=t.y+t.height/2-r.height/2,c;switch(s){case vr:c={x:l,y:t.y-r.height};break;case Hr:c={x:l,y:t.y+t.height};break;case Yr:c={x:t.x+t.width,y:i};break;case yr:c={x:t.x-r.width,y:i};break;default:c={x:t.x,y:t.y}}var d=s?ch(s):null;if(d!=null){var u=d==="y"?"height":"width";switch(o){case mo:c[d]=c[d]-(t[u]/2-r[u]/2);break;case ti:c[d]=c[d]+(t[u]/2-r[u]/2);break}}return c}function ri(e,t){t===void 0&&(t={});var r=t,a=r.placement,s=a===void 0?e.placement:a,o=r.strategy,l=o===void 0?e.strategy:o,i=r.boundary,c=i===void 0?n5:i,d=r.rootBoundary,u=d===void 0?PN:d,m=r.elementContext,f=m===void 0?Zo:m,x=r.altBoundary,b=x===void 0?!1:x,y=r.padding,v=y===void 0?0:y,p=FN(typeof v!="number"?v:jN(v,Si)),h=f===Zo?a5:Zo,E=e.rects.popper,w=e.elements[b?h:f],N=P5(bs(w)?w:w.contextElement||Wa(e.elements.popper),c,u,l),S=po(e.elements.reference),C=zN({reference:S,element:E,placement:s}),D=xp(Object.assign({},E,C)),k=f===Zo?D:S,O={top:N.top-k.top+p.top,bottom:k.bottom-N.bottom+p.bottom,left:N.left-k.left+p.left,right:k.right-N.right+p.right},A=e.modifiersData.offset;if(f===Zo&&A){var $=A[s];Object.keys(O).forEach(function(P){var I=[Yr,Hr].indexOf(P)>=0?1:-1,L=[vr,Hr].indexOf(P)>=0?"y":"x";O[P]+=$[L]*I})}return O}function L5(e,t){t===void 0&&(t={});var r=t,a=r.placement,s=r.boundary,o=r.rootBoundary,l=r.padding,i=r.flipVariations,c=r.allowedAutoPlacements,d=c===void 0?oh:c,u=go(a),m=u?i?py:py.filter(function(b){return go(b)===u}):Si,f=m.filter(function(b){return d.indexOf(b)>=0});f.length===0&&(f=m);var x=f.reduce(function(b,y){return b[y]=ri(e,{placement:y,boundary:s,rootBoundary:o,padding:l})[An(y)],b},{});return Object.keys(x).sort(function(b,y){return x[b]-x[y]})}function I5(e){if(An(e)===sh)return[];var t=Ic(e);return[vy(e),t,vy(t)]}function $5(e){var t=e.state,r=e.options,a=e.name;if(!t.modifiersData[a]._skip){for(var s=r.mainAxis,o=s===void 0?!0:s,l=r.altAxis,i=l===void 0?!0:l,c=r.fallbackPlacements,d=r.padding,u=r.boundary,m=r.rootBoundary,f=r.altBoundary,x=r.flipVariations,b=x===void 0?!0:x,y=r.allowedAutoPlacements,v=t.options.placement,p=An(v),h=p===v,E=c||(h||!b?[Ic(v)]:I5(v)),w=[v].concat(E).reduce(function(Q,j){return Q.concat(An(j)===sh?L5(t,{placement:j,boundary:u,rootBoundary:m,padding:d,flipVariations:b,allowedAutoPlacements:y}):j)},[]),N=t.rects.reference,S=t.rects.popper,C=new Map,D=!0,k=w[0],O=0;O<w.length;O++){var A=w[O],$=An(A),P=go(A)===mo,I=[vr,Hr].indexOf($)>=0,L=I?"width":"height",F=ri(t,{placement:A,boundary:u,rootBoundary:m,altBoundary:f,padding:d}),T=I?P?Yr:yr:P?Hr:vr;N[L]>S[L]&&(T=Ic(T));var M=Ic(T),V=[];if(o&&V.push(F[$]<=0),i&&V.push(F[T]<=0,F[M]<=0),V.every(function(Q){return Q})){k=A,D=!1;break}C.set(A,V)}if(D)for(var X=b?3:1,z=function(j){var B=w.find(function(H){var K=C.get(H);if(K)return K.slice(0,j).every(function(fe){return fe})});if(B)return k=B,"break"},U=X;U>0;U--){var Y=z(U);if(Y==="break")break}t.placement!==k&&(t.modifiersData[a]._skip=!0,t.placement=k,t.reset=!0)}}const F5={name:"flip",enabled:!0,phase:"main",fn:$5,requiresIfExists:["offset"],data:{_skip:!1}};function Ey(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function xy(e){return[vr,Yr,Hr,yr].some(function(t){return e[t]>=0})}function j5(e){var t=e.state,r=e.name,a=t.rects.reference,s=t.rects.popper,o=t.modifiersData.preventOverflow,l=ri(t,{elementContext:"reference"}),i=ri(t,{altBoundary:!0}),c=Ey(l,a),d=Ey(i,s,o),u=xy(c),m=xy(d);t.modifiersData[r]={referenceClippingOffsets:c,popperEscapeOffsets:d,isReferenceHidden:u,hasPopperEscaped:m},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":m})}const B5={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:j5};function z5(e,t,r){var a=An(e),s=[yr,vr].indexOf(a)>=0?-1:1,o=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,l=o[0],i=o[1];return l=l||0,i=(i||0)*s,[yr,Yr].indexOf(a)>=0?{x:i,y:l}:{x:l,y:i}}function U5(e){var t=e.state,r=e.options,a=e.name,s=r.offset,o=s===void 0?[0,0]:s,l=oh.reduce(function(u,m){return u[m]=z5(m,t.rects,o),u},{}),i=l[t.placement],c=i.x,d=i.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=d),t.modifiersData[a]=l}const V5={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:U5};function W5(e){var t=e.state,r=e.name;t.modifiersData[r]=zN({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}const H5={name:"popperOffsets",enabled:!0,phase:"read",fn:W5,data:{}};function Y5(e){return e==="x"?"y":"x"}function q5(e){var t=e.state,r=e.options,a=e.name,s=r.mainAxis,o=s===void 0?!0:s,l=r.altAxis,i=l===void 0?!1:l,c=r.boundary,d=r.rootBoundary,u=r.altBoundary,m=r.padding,f=r.tether,x=f===void 0?!0:f,b=r.tetherOffset,y=b===void 0?0:b,v=ri(t,{boundary:c,rootBoundary:d,padding:m,altBoundary:u}),p=An(t.placement),h=go(t.placement),E=!h,w=ch(p),N=Y5(w),S=t.modifiersData.popperOffsets,C=t.rects.reference,D=t.rects.popper,k=typeof y=="function"?y(Object.assign({},t.rects,{placement:t.placement})):y,O=typeof k=="number"?{mainAxis:k,altAxis:k}:Object.assign({mainAxis:0,altAxis:0},k),A=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,$={x:0,y:0};if(S){if(o){var P,I=w==="y"?vr:yr,L=w==="y"?Hr:Yr,F=w==="y"?"height":"width",T=S[w],M=T+v[I],V=T-v[L],X=x?-D[F]/2:0,z=h===mo?C[F]:D[F],U=h===mo?-D[F]:-C[F],Y=t.elements.arrow,Q=x&&Y?ih(Y):{width:0,height:0},j=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:$N(),B=j[I],H=j[L],K=El(0,C[F],Q[F]),fe=E?C[F]/2-X-K-B-O.mainAxis:z-K-B-O.mainAxis,W=E?-C[F]/2+X+K+H+O.mainAxis:U+K+H+O.mainAxis,pe=t.elements.arrow&&Ci(t.elements.arrow),se=pe?w==="y"?pe.clientTop||0:pe.clientLeft||0:0,be=(P=A==null?void 0:A[w])!=null?P:0,$e=T+fe-be-se,qe=T+W-be,J=El(x?Nu(M,$e):M,T,x?is(V,qe):V);S[w]=J,$[w]=J-T}if(i){var le,Se=w==="x"?vr:yr,Ce=w==="x"?Hr:Yr,ke=S[N],Re=N==="y"?"height":"width",He=ke+v[Se],Tt=ke-v[Ce],Jt=[vr,yr].indexOf(p)!==-1,Qr=(le=A==null?void 0:A[N])!=null?le:0,ir=Jt?He:ke-C[Re]-D[Re]-Qr+O.altAxis,ne=Jt?ke+C[Re]+D[Re]-Qr-O.altAxis:Tt,Ee=x&&Jt?v5(ir,ke,ne):El(x?ir:He,ke,x?ne:Tt);S[N]=Ee,$[N]=Ee-ke}t.modifiersData[a]=$}}const G5={name:"preventOverflow",enabled:!0,phase:"main",fn:q5,requiresIfExists:["offset"]};function K5(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function X5(e){return e===Cr(e)||!Tn(e)?uh(e):K5(e)}function Q5(e){var t=e.getBoundingClientRect(),r=fo(t.width)/e.offsetWidth||1,a=fo(t.height)/e.offsetHeight||1;return r!==1||a!==1}function J5(e,t,r){r===void 0&&(r=!1);var a=Tn(t),s=Tn(t)&&Q5(t),o=Wa(t),l=po(e,s,r),i={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(a||!a&&!r)&&((La(t)!=="body"||mh(o))&&(i=X5(t)),Tn(t)?(c=po(t,!0),c.x+=t.clientLeft,c.y+=t.clientTop):o&&(c.x=dh(o))),{x:l.left+i.scrollLeft-c.x,y:l.top+i.scrollTop-c.y,width:l.width,height:l.height}}function Z5(e){var t=new Map,r=new Set,a=[];e.forEach(function(o){t.set(o.name,o)});function s(o){r.add(o.name);var l=[].concat(o.requires||[],o.requiresIfExists||[]);l.forEach(function(i){if(!r.has(i)){var c=t.get(i);c&&s(c)}}),a.push(o)}return e.forEach(function(o){r.has(o.name)||s(o)}),a}function e3(e){var t=Z5(e);return p5.reduce(function(r,a){return r.concat(t.filter(function(s){return s.phase===a}))},[])}function t3(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function r3(e){var t=e.reduce(function(r,a){var s=r[a.name];return r[a.name]=s?Object.assign({},s,a,{options:Object.assign({},s.options,a.options),data:Object.assign({},s.data,a.data)}):a,r},{});return Object.keys(t).map(function(r){return t[r]})}var by={placement:"bottom",modifiers:[],strategy:"absolute"};function wy(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(a){return!(a&&typeof a.getBoundingClientRect=="function")})}function n3(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,a=r===void 0?[]:r,s=t.defaultOptions,o=s===void 0?by:s;return function(i,c,d){d===void 0&&(d=o);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},by,o),modifiersData:{},elements:{reference:i,popper:c},attributes:{},styles:{}},m=[],f=!1,x={state:u,setOptions:function(p){var h=typeof p=="function"?p(u.options):p;y(),u.options=Object.assign({},o,u.options,h),u.scrollParents={reference:bs(i)?xl(i):i.contextElement?xl(i.contextElement):[],popper:xl(c)};var E=e3(r3([].concat(a,u.options.modifiers)));return u.orderedModifiers=E.filter(function(w){return w.enabled}),b(),x.update()},forceUpdate:function(){if(!f){var p=u.elements,h=p.reference,E=p.popper;if(wy(h,E)){u.rects={reference:J5(h,Ci(E),u.options.strategy==="fixed"),popper:ih(E)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(O){return u.modifiersData[O.name]=Object.assign({},O.data)});for(var w=0;w<u.orderedModifiers.length;w++){if(u.reset===!0){u.reset=!1,w=-1;continue}var N=u.orderedModifiers[w],S=N.fn,C=N.options,D=C===void 0?{}:C,k=N.name;typeof S=="function"&&(u=S({state:u,options:D,name:k,instance:x})||u)}}}},update:t3(function(){return new Promise(function(v){x.forceUpdate(),v(u)})}),destroy:function(){y(),f=!0}};if(!wy(i,c))return x;x.setOptions(d).then(function(v){!f&&d.onFirstUpdate&&d.onFirstUpdate(v)});function b(){u.orderedModifiers.forEach(function(v){var p=v.name,h=v.options,E=h===void 0?{}:h,w=v.effect;if(typeof w=="function"){var N=w({state:u,name:p,instance:x,options:E}),S=function(){};m.push(N||S)}})}function y(){m.forEach(function(v){return v()}),m=[]}return x}}var a3=n3({defaultModifiers:[B5,H5,C5,D5,V5,F5,G5,b5]}),Ny=function(t){return{position:t,top:"0",left:"0",opacity:"0",pointerEvents:"none"}},s3={name:"applyStyles",enabled:!1},o3={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:function(t){var r=t.state;return function(){var a=r.elements,s=a.reference,o=a.popper;if("removeAttribute"in s){var l=(s.getAttribute("aria-describedby")||"").split(",").filter(function(i){return i.trim()!==o.id});l.length?s.setAttribute("aria-describedby",l.join(",")):s.removeAttribute("aria-describedby")}}},fn:function(t){var r,a=t.state,s=a.elements,o=s.popper,l=s.reference,i=(r=o.getAttribute("role"))==null?void 0:r.toLowerCase();if(o.id&&i==="tooltip"&&"setAttribute"in l){var c=l.getAttribute("aria-describedby");if(c&&c.split(",").indexOf(o.id)!==-1)return;l.setAttribute("aria-describedby",c?c+","+o.id:o.id)}}},l3=[];function i3(e,t,r){var a=r===void 0?{}:r,s=a.enabled,o=s===void 0?!0:s,l=a.placement,i=l===void 0?"bottom":l,c=a.strategy,d=c===void 0?"absolute":c,u=a.modifiers,m=u===void 0?l3:u,f=dd(a,["enabled","placement","strategy","modifiers"]),x=g.useRef(),b=g.useCallback(function(){var w;(w=x.current)==null||w.update()},[]),y=g.useCallback(function(){var w;(w=x.current)==null||w.forceUpdate()},[]),v=r5(g.useState({placement:i,update:b,forceUpdate:y,attributes:{},styles:{popper:Ny(d),arrow:{}}})),p=v[0],h=v[1],E=g.useMemo(function(){return{name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:function(N){var S=N.state,C={},D={};Object.keys(S.elements).forEach(function(k){C[k]=S.styles[k],D[k]=S.attributes[k]}),h({state:S,styles:C,attributes:D,update:b,forceUpdate:y,placement:S.placement})}}},[b,y,h]);return g.useEffect(function(){!x.current||!o||x.current.setOptions({placement:i,strategy:d,modifiers:[].concat(m,[E,s3])})},[d,i,E,o]),g.useEffect(function(){if(!(!o||e==null||t==null))return x.current=a3(e,t,gt({},f,{placement:i,strategy:d,modifiers:[].concat(m,[o3,E])})),function(){x.current!=null&&(x.current.destroy(),x.current=void 0,h(function(w){return gt({},w,{attributes:{},styles:{popper:Ny(d)}})}))}},[o,e,t]),p}function c3(e,t,r,a){var s=a&&typeof a!="boolean"?a.capture:a;e.removeEventListener(t,r,s),r.__once&&e.removeEventListener(t,r.__once,s)}function cl(e,t,r,a){return Z_(e,t,r,a),function(){c3(e,t,r,a)}}var u3=function(){},d3=u3;const m3=xr(d3);function f3(e){return e&&"setState"in e?aw.findDOMNode(e):e??null}const p3=function(e){return Ni(f3(e))};var g3=27,Sy=function(){};function h3(e){return e.button===0}function v3(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}var Cy=function(t){return t&&("current"in t?t.current:t)};function y3(e,t,r){var a=r===void 0?{}:r,s=a.disabled,o=a.clickTrigger,l=o===void 0?"click":o,i=g.useRef(!1),c=t||Sy,d=g.useCallback(function(f){var x,b=Cy(e);m3(!!b,"RootClose captured a close event but does not have a ref to compare it to. useRootClose(), should be passed a ref that resolves to a DOM node"),i.current=!b||v3(f)||!h3(f)||!!ei(b,(x=f.composedPath==null?void 0:f.composedPath()[0])!=null?x:f.target)},[e]),u=my(function(f){i.current||c(f)}),m=my(function(f){f.keyCode===g3&&c(f)});g.useEffect(function(){if(!(s||e==null)){var f=window.event,x=p3(Cy(e)),b=cl(x,l,d,!0),y=cl(x,l,function(h){if(h===f){f=void 0;return}u(h)}),v=cl(x,"keyup",function(h){if(h===f){f=void 0;return}m(h)}),p=[];return"ontouchstart"in x.documentElement&&(p=[].slice.call(x.body.children).map(function(h){return cl(h,"mousemove",Sy)})),function(){b(),y(),v(),p.forEach(function(h){return h()})}}},[e,s,l,d,u,m])}function E3(e){var t={};return Array.isArray(e)?(e==null||e.forEach(function(r){t[r.name]=r}),t):e||t}function x3(e){return e===void 0&&(e={}),Array.isArray(e)?e:Object.keys(e).map(function(t){return e[t].name=t,e[t]})}function b3(e){var t,r,a,s,o=e.enabled,l=e.enableEvents,i=e.placement,c=e.flip,d=e.offset,u=e.fixed,m=e.containerPadding,f=e.arrowElement,x=e.popperConfig,b=x===void 0?{}:x,y=E3(b.modifiers);return gt({},b,{placement:i,enabled:o,strategy:u?"fixed":b.strategy,modifiers:x3(gt({},y,{eventListeners:{enabled:l},preventOverflow:gt({},y.preventOverflow,{options:m?gt({padding:m},(t=y.preventOverflow)==null?void 0:t.options):(r=y.preventOverflow)==null?void 0:r.options}),offset:{options:gt({offset:d},(a=y.offset)==null?void 0:a.options)},arrow:gt({},y.arrow,{enabled:!!f,options:gt({},(s=y.arrow)==null?void 0:s.options,{element:f})}),flip:gt({enabled:!!c},y.flip)}))})}function w3(e,t){return e.classList?e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function N3(e,t){e.classList?e.classList.add(t):w3(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function ky(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function S3(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=ky(e.className,t):e.setAttribute("class",ky(e.className&&e.className.baseVal||"",t))}var oc;function fh(e){if((!oc&&oc!==0||e)&&ah){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),oc=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return oc}var zm=function(t){var r;return typeof document>"u"?null:t==null?Ni().body:(typeof t=="function"&&(t=t()),t&&"current"in t&&(t=t.current),(r=t)!=null&&r.nodeType&&t||null)};function Dy(e,t){var r=g.useState(function(){return zm(e)}),a=r[0],s=r[1];if(!a){var o=zm(e);o&&s(o)}return g.useEffect(function(){},[t,a]),g.useEffect(function(){var l=zm(e);l!==a&&s(l)},[e,a]),a}const Ay=e=>!e||typeof e=="function"?e:t=>{e.current=t};function C3(e,t){const r=Ay(e),a=Ay(t);return s=>{r&&r(s),a&&a(s)}}function k3(e,t){return g.useMemo(()=>C3(e,t),[e,t])}var ph=n.forwardRef(function(e,t){var r=e.flip,a=e.offset,s=e.placement,o=e.containerPadding,l=o===void 0?5:o,i=e.popperConfig,c=i===void 0?{}:i,d=e.transition,u=fy(),m=u[0],f=u[1],x=fy(),b=x[0],y=x[1],v=k3(f,t),p=Dy(e.container),h=Dy(e.target),E=g.useState(!e.show),w=E[0],N=E[1],S=i3(h,m,b3({placement:s,enableEvents:!!e.show,containerPadding:l||5,flip:r,offset:a,arrowElement:b,popperConfig:c})),C=S.styles,D=S.attributes,k=dd(S,["styles","attributes"]);e.show?w&&N(!1):!e.transition&&!w&&N(!0);var O=function(){N(!0),e.onExited&&e.onExited.apply(e,arguments)},A=e.show||d&&!w;if(y3(m,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!A)return null;var $=e.children(gt({},k,{show:!!e.show,props:gt({},D.popper,{style:C.popper,ref:v}),arrowProps:gt({},D.arrow,{style:C.arrow,ref:y})}));if(d){var P=e.onExit,I=e.onExiting,L=e.onEnter,F=e.onEntering,T=e.onEntered;$=n.createElement(d,{in:e.show,appear:!0,onExit:P,onExiting:I,onExited:O,onEnter:L,onEntering:F,onEntered:T},$)}return p?aw.createPortal($,p):null});ph.displayName="Overlay";ph.propTypes={show:ae.bool,placement:ae.oneOf(oh),target:ae.any,container:ae.any,flip:ae.bool,children:ae.func.isRequired,containerPadding:ae.number,popperConfig:ae.object,rootClose:ae.bool,rootCloseEvent:ae.oneOf(["click","mousedown"]),rootCloseDisabled:ae.bool,onHide:function(t){for(var r=arguments.length,a=new Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];if(t.rootClose){var o;return(o=ae.func).isRequired.apply(o,[t].concat(a))}return ae.func.apply(ae,[t].concat(a))},transition:ae.elementType,onEnter:ae.func,onEntering:ae.func,onEntered:ae.func,onExit:ae.func,onExiting:ae.func,onExited:ae.func};function D3(){this.__data__=[],this.size=0}var A3=D3,T3=xi;function _3(e,t){for(var r=e.length;r--;)if(T3(e[r][0],t))return r;return-1}var gd=_3,O3=gd,R3=Array.prototype,M3=R3.splice;function P3(e){var t=this.__data__,r=O3(t,e);if(r<0)return!1;var a=t.length-1;return r==a?t.pop():M3.call(t,r,1),--this.size,!0}var L3=P3,I3=gd;function $3(e){var t=this.__data__,r=I3(t,e);return r<0?void 0:t[r][1]}var F3=$3,j3=gd;function B3(e){return j3(this.__data__,e)>-1}var z3=B3,U3=gd;function V3(e,t){var r=this.__data__,a=U3(r,e);return a<0?(++this.size,r.push([e,t])):r[a][1]=t,this}var W3=V3,H3=A3,Y3=L3,q3=F3,G3=z3,K3=W3;function To(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}To.prototype.clear=H3;To.prototype.delete=Y3;To.prototype.get=q3;To.prototype.has=G3;To.prototype.set=K3;var hd=To,X3=hd;function Q3(){this.__data__=new X3,this.size=0}var J3=Q3;function Z3(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var eO=Z3;function tO(e){return this.__data__.get(e)}var rO=tO;function nO(e){return this.__data__.has(e)}var aO=nO,sO=Ln,oO=sO["__core-js_shared__"],lO=oO,Um=lO,Ty=function(){var e=/[^.]+$/.exec(Um&&Um.keys&&Um.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function iO(e){return!!Ty&&Ty in e}var cO=iO,uO=Function.prototype,dO=uO.toString;function mO(e){if(e!=null){try{return dO.call(e)}catch{}try{return e+""}catch{}}return""}var UN=mO,fO=eh,pO=cO,gO=oa,hO=UN,vO=/[\\^$.*+?()[\]{}|]/g,yO=/^\[object .+?Constructor\]$/,EO=Function.prototype,xO=Object.prototype,bO=EO.toString,wO=xO.hasOwnProperty,NO=RegExp("^"+bO.call(wO).replace(vO,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function SO(e){if(!gO(e)||pO(e))return!1;var t=fO(e)?NO:yO;return t.test(hO(e))}var CO=SO;function kO(e,t){return e==null?void 0:e[t]}var DO=kO,AO=CO,TO=DO;function _O(e,t){var r=TO(e,t);return AO(r)?r:void 0}var Cs=_O,OO=Cs,RO=Ln,MO=OO(RO,"Map"),gh=MO,PO=Cs,LO=PO(Object,"create"),vd=LO,_y=vd;function IO(){this.__data__=_y?_y(null):{},this.size=0}var $O=IO;function FO(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var jO=FO,BO=vd,zO="__lodash_hash_undefined__",UO=Object.prototype,VO=UO.hasOwnProperty;function WO(e){var t=this.__data__;if(BO){var r=t[e];return r===zO?void 0:r}return VO.call(t,e)?t[e]:void 0}var HO=WO,YO=vd,qO=Object.prototype,GO=qO.hasOwnProperty;function KO(e){var t=this.__data__;return YO?t[e]!==void 0:GO.call(t,e)}var XO=KO,QO=vd,JO="__lodash_hash_undefined__";function ZO(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=QO&&t===void 0?JO:t,this}var eR=ZO,tR=$O,rR=jO,nR=HO,aR=XO,sR=eR;function _o(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}_o.prototype.clear=tR;_o.prototype.delete=rR;_o.prototype.get=nR;_o.prototype.has=aR;_o.prototype.set=sR;var oR=_o,Oy=oR,lR=hd,iR=gh;function cR(){this.size=0,this.__data__={hash:new Oy,map:new(iR||lR),string:new Oy}}var uR=cR;function dR(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var mR=dR,fR=mR;function pR(e,t){var r=e.__data__;return fR(t)?r[typeof t=="string"?"string":"hash"]:r.map}var yd=pR,gR=yd;function hR(e){var t=gR(this,e).delete(e);return this.size-=t?1:0,t}var vR=hR,yR=yd;function ER(e){return yR(this,e).get(e)}var xR=ER,bR=yd;function wR(e){return bR(this,e).has(e)}var NR=wR,SR=yd;function CR(e,t){var r=SR(this,e),a=r.size;return r.set(e,t),this.size+=r.size==a?0:1,this}var kR=CR,DR=uR,AR=vR,TR=xR,_R=NR,OR=kR;function Oo(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}Oo.prototype.clear=DR;Oo.prototype.delete=AR;Oo.prototype.get=TR;Oo.prototype.has=_R;Oo.prototype.set=OR;var hh=Oo,RR=hd,MR=gh,PR=hh,LR=200;function IR(e,t){var r=this.__data__;if(r instanceof RR){var a=r.__data__;if(!MR||a.length<LR-1)return a.push([e,t]),this.size=++r.size,this;r=this.__data__=new PR(a)}return r.set(e,t),this.size=r.size,this}var $R=IR,FR=hd,jR=J3,BR=eO,zR=rO,UR=aO,VR=$R;function Ro(e){var t=this.__data__=new FR(e);this.size=t.size}Ro.prototype.clear=jR;Ro.prototype.delete=BR;Ro.prototype.get=zR;Ro.prototype.has=UR;Ro.prototype.set=VR;var vh=Ro,WR="__lodash_hash_undefined__";function HR(e){return this.__data__.set(e,WR),this}var YR=HR;function qR(e){return this.__data__.has(e)}var GR=qR,KR=hh,XR=YR,QR=GR;function Su(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new KR;++t<r;)this.add(e[t])}Su.prototype.add=Su.prototype.push=XR;Su.prototype.has=QR;var JR=Su;function ZR(e,t){for(var r=-1,a=e==null?0:e.length;++r<a;)if(t(e[r],r,e))return!0;return!1}var eM=ZR;function tM(e,t){return e.has(t)}var rM=tM,nM=JR,aM=eM,sM=rM,oM=1,lM=2;function iM(e,t,r,a,s,o){var l=r&oM,i=e.length,c=t.length;if(i!=c&&!(l&&c>i))return!1;var d=o.get(e),u=o.get(t);if(d&&u)return d==t&&u==e;var m=-1,f=!0,x=r&lM?new nM:void 0;for(o.set(e,t),o.set(t,e);++m<i;){var b=e[m],y=t[m];if(a)var v=l?a(y,b,m,t,e,o):a(b,y,m,e,t,o);if(v!==void 0){if(v)continue;f=!1;break}if(x){if(!aM(t,function(p,h){if(!sM(x,h)&&(b===p||s(b,p,r,a,o)))return x.push(h)})){f=!1;break}}else if(!(b===y||s(b,y,r,a,o))){f=!1;break}}return o.delete(e),o.delete(t),f}var VN=iM,cM=Ln,uM=cM.Uint8Array,WN=uM;function dM(e){var t=-1,r=Array(e.size);return e.forEach(function(a,s){r[++t]=[s,a]}),r}var mM=dM;function fM(e){var t=-1,r=Array(e.size);return e.forEach(function(a){r[++t]=a}),r}var pM=fM,Ry=Do,My=WN,gM=xi,hM=VN,vM=mM,yM=pM,EM=1,xM=2,bM="[object Boolean]",wM="[object Date]",NM="[object Error]",SM="[object Map]",CM="[object Number]",kM="[object RegExp]",DM="[object Set]",AM="[object String]",TM="[object Symbol]",_M="[object ArrayBuffer]",OM="[object DataView]",Py=Ry?Ry.prototype:void 0,Vm=Py?Py.valueOf:void 0;function RM(e,t,r,a,s,o,l){switch(r){case OM:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case _M:return!(e.byteLength!=t.byteLength||!o(new My(e),new My(t)));case bM:case wM:case CM:return gM(+e,+t);case NM:return e.name==t.name&&e.message==t.message;case kM:case AM:return e==t+"";case SM:var i=vM;case DM:var c=a&EM;if(i||(i=yM),e.size!=t.size&&!c)return!1;var d=l.get(e);if(d)return d==t;a|=xM,l.set(e,t);var u=hM(i(e),i(t),a,s,o,l);return l.delete(e),u;case TM:if(Vm)return Vm.call(e)==Vm.call(t)}return!1}var MM=RM;function PM(e,t){for(var r=-1,a=t.length,s=e.length;++r<a;)e[s+r]=t[r];return e}var yh=PM,LM=Array.isArray,Gr=LM,IM=yh,$M=Gr;function FM(e,t,r){var a=t(e);return $M(e)?a:IM(a,r(e))}var HN=FM;function jM(e,t){for(var r=-1,a=e==null?0:e.length,s=0,o=[];++r<a;){var l=e[r];t(l,r,e)&&(o[s++]=l)}return o}var BM=jM;function zM(){return[]}var YN=zM,UM=BM,VM=YN,WM=Object.prototype,HM=WM.propertyIsEnumerable,Ly=Object.getOwnPropertySymbols,YM=Ly?function(e){return e==null?[]:(e=Object(e),UM(Ly(e),function(t){return HM.call(e,t)}))}:VM,Eh=YM;function qM(e,t){for(var r=-1,a=Array(e);++r<e;)a[r]=t(r);return a}var GM=qM,KM=Ao,XM=Va,QM="[object Arguments]";function JM(e){return XM(e)&&KM(e)==QM}var ZM=JM,Iy=ZM,eP=Va,qN=Object.prototype,tP=qN.hasOwnProperty,rP=qN.propertyIsEnumerable,nP=Iy(function(){return arguments}())?Iy:function(e){return eP(e)&&tP.call(e,"callee")&&!rP.call(e,"callee")},xh=nP,Cu={exports:{}};function aP(){return!1}var sP=aP;Cu.exports;(function(e,t){var r=Ln,a=sP,s=t&&!t.nodeType&&t,o=s&&!0&&e&&!e.nodeType&&e,l=o&&o.exports===s,i=l?r.Buffer:void 0,c=i?i.isBuffer:void 0,d=c||a;e.exports=d})(Cu,Cu.exports);var Ed=Cu.exports,oP=Ao,lP=th,iP=Va,cP="[object Arguments]",uP="[object Array]",dP="[object Boolean]",mP="[object Date]",fP="[object Error]",pP="[object Function]",gP="[object Map]",hP="[object Number]",vP="[object Object]",yP="[object RegExp]",EP="[object Set]",xP="[object String]",bP="[object WeakMap]",wP="[object ArrayBuffer]",NP="[object DataView]",SP="[object Float32Array]",CP="[object Float64Array]",kP="[object Int8Array]",DP="[object Int16Array]",AP="[object Int32Array]",TP="[object Uint8Array]",_P="[object Uint8ClampedArray]",OP="[object Uint16Array]",RP="[object Uint32Array]",nt={};nt[SP]=nt[CP]=nt[kP]=nt[DP]=nt[AP]=nt[TP]=nt[_P]=nt[OP]=nt[RP]=!0;nt[cP]=nt[uP]=nt[wP]=nt[dP]=nt[NP]=nt[mP]=nt[fP]=nt[pP]=nt[gP]=nt[hP]=nt[vP]=nt[yP]=nt[EP]=nt[xP]=nt[bP]=!1;function MP(e){return iP(e)&&lP(e.length)&&!!nt[oP(e)]}var PP=MP;function LP(e){return function(t){return e(t)}}var xd=LP,ku={exports:{}};ku.exports;(function(e,t){var r=CN,a=t&&!t.nodeType&&t,s=a&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===a,l=o&&r.process,i=function(){try{var c=s&&s.require&&s.require("util").types;return c||l&&l.binding&&l.binding("util")}catch{}}();e.exports=i})(ku,ku.exports);var bh=ku.exports,IP=PP,$P=xd,$y=bh,Fy=$y&&$y.isTypedArray,FP=Fy?$P(Fy):IP,wh=FP,jP=GM,BP=xh,zP=Gr,UP=Ed,VP=rh,WP=wh,HP=Object.prototype,YP=HP.hasOwnProperty;function qP(e,t){var r=zP(e),a=!r&&BP(e),s=!r&&!a&&UP(e),o=!r&&!a&&!s&&WP(e),l=r||a||s||o,i=l?jP(e.length,String):[],c=i.length;for(var d in e)(t||YP.call(e,d))&&!(l&&(d=="length"||s&&(d=="offset"||d=="parent")||o&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||VP(d,c)))&&i.push(d);return i}var GN=qP,GP=Object.prototype;function KP(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||GP;return e===r}var Nh=KP;function XP(e,t){return function(r){return e(t(r))}}var KN=XP,QP=KN,JP=QP(Object.keys,Object),ZP=JP,eL=Nh,tL=ZP,rL=Object.prototype,nL=rL.hasOwnProperty;function aL(e){if(!eL(e))return tL(e);var t=[];for(var r in Object(e))nL.call(e,r)&&r!="constructor"&&t.push(r);return t}var sL=aL,oL=GN,lL=sL,iL=bi;function cL(e){return iL(e)?oL(e):lL(e)}var ki=cL,uL=HN,dL=Eh,mL=ki;function fL(e){return uL(e,mL,dL)}var XN=fL,jy=XN,pL=1,gL=Object.prototype,hL=gL.hasOwnProperty;function vL(e,t,r,a,s,o){var l=r&pL,i=jy(e),c=i.length,d=jy(t),u=d.length;if(c!=u&&!l)return!1;for(var m=c;m--;){var f=i[m];if(!(l?f in t:hL.call(t,f)))return!1}var x=o.get(e),b=o.get(t);if(x&&b)return x==t&&b==e;var y=!0;o.set(e,t),o.set(t,e);for(var v=l;++m<c;){f=i[m];var p=e[f],h=t[f];if(a)var E=l?a(h,p,f,t,e,o):a(p,h,f,e,t,o);if(!(E===void 0?p===h||s(p,h,r,a,o):E)){y=!1;break}v||(v=f=="constructor")}if(y&&!v){var w=e.constructor,N=t.constructor;w!=N&&"constructor"in e&&"constructor"in t&&!(typeof w=="function"&&w instanceof w&&typeof N=="function"&&N instanceof N)&&(y=!1)}return o.delete(e),o.delete(t),y}var yL=vL,EL=Cs,xL=Ln,bL=EL(xL,"DataView"),wL=bL,NL=Cs,SL=Ln,CL=NL(SL,"Promise"),kL=CL,DL=Cs,AL=Ln,TL=DL(AL,"Set"),_L=TL,OL=Cs,RL=Ln,ML=OL(RL,"WeakMap"),PL=ML,bp=wL,wp=gh,Np=kL,Sp=_L,Cp=PL,QN=Ao,Mo=UN,By="[object Map]",LL="[object Object]",zy="[object Promise]",Uy="[object Set]",Vy="[object WeakMap]",Wy="[object DataView]",IL=Mo(bp),$L=Mo(wp),FL=Mo(Np),jL=Mo(Sp),BL=Mo(Cp),Xa=QN;(bp&&Xa(new bp(new ArrayBuffer(1)))!=Wy||wp&&Xa(new wp)!=By||Np&&Xa(Np.resolve())!=zy||Sp&&Xa(new Sp)!=Uy||Cp&&Xa(new Cp)!=Vy)&&(Xa=function(e){var t=QN(e),r=t==LL?e.constructor:void 0,a=r?Mo(r):"";if(a)switch(a){case IL:return Wy;case $L:return By;case FL:return zy;case jL:return Uy;case BL:return Vy}return t});var bd=Xa,Wm=vh,zL=VN,UL=MM,VL=yL,Hy=bd,Yy=Gr,qy=Ed,WL=wh,HL=1,Gy="[object Arguments]",Ky="[object Array]",lc="[object Object]",YL=Object.prototype,Xy=YL.hasOwnProperty;function qL(e,t,r,a,s,o){var l=Yy(e),i=Yy(t),c=l?Ky:Hy(e),d=i?Ky:Hy(t);c=c==Gy?lc:c,d=d==Gy?lc:d;var u=c==lc,m=d==lc,f=c==d;if(f&&qy(e)){if(!qy(t))return!1;l=!0,u=!1}if(f&&!u)return o||(o=new Wm),l||WL(e)?zL(e,t,r,a,s,o):UL(e,t,c,r,a,s,o);if(!(r&HL)){var x=u&&Xy.call(e,"__wrapped__"),b=m&&Xy.call(t,"__wrapped__");if(x||b){var y=x?e.value():e,v=b?t.value():t;return o||(o=new Wm),s(y,v,r,a,o)}}return f?(o||(o=new Wm),VL(e,t,r,a,s,o)):!1}var GL=qL,KL=GL,Qy=Va;function JN(e,t,r,a,s){return e===t?!0:e==null||t==null||!Qy(e)&&!Qy(t)?e!==e&&t!==t:KL(e,t,r,a,JN,s)}var Sh=JN,XL=Sh;function QL(e,t){return XL(e,t)}var JL=QL;const ZL=xr(JL);function Hm(e,t){var r=nh(e);return r?r.innerHeight:ls(e).height}function ZN(e,t,r){e.closest&&!r&&e.closest(t);var a=e;do{if(X_(a,t))return a;a=a.parentElement}while(a&&a!==r&&a.nodeType===document.ELEMENT_NODE);return null}function eI(e,t,r,a){for(var s=e.length,o=r+(a?1:-1);a?o--:++o<s;)if(t(e[o],o,e))return o;return-1}var tI=eI,rI=vh,nI=Sh,aI=1,sI=2;function oI(e,t,r,a){var s=r.length,o=s,l=!a;if(e==null)return!o;for(e=Object(e);s--;){var i=r[s];if(l&&i[2]?i[1]!==e[i[0]]:!(i[0]in e))return!1}for(;++s<o;){i=r[s];var c=i[0],d=e[c],u=i[1];if(l&&i[2]){if(d===void 0&&!(c in e))return!1}else{var m=new rI;if(a)var f=a(d,u,c,e,t,m);if(!(f===void 0?nI(u,d,aI|sI,a,m):f))return!1}}return!0}var lI=oI,iI=oa;function cI(e){return e===e&&!iI(e)}var e1=cI,uI=e1,dI=ki;function mI(e){for(var t=dI(e),r=t.length;r--;){var a=t[r],s=e[a];t[r]=[a,s,uI(s)]}return t}var fI=mI;function pI(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var t1=pI,gI=lI,hI=fI,vI=t1;function yI(e){var t=hI(e);return t.length==1&&t[0][2]?vI(t[0][0],t[0][1]):function(r){return r===e||gI(r,e,t)}}var EI=yI,xI=Gr,bI=wi,wI=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,NI=/^\w*$/;function SI(e,t){if(xI(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||bI(e)?!0:NI.test(e)||!wI.test(e)||t!=null&&e in Object(t)}var Ch=SI,r1=hh,CI="Expected a function";function kh(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(CI);var r=function(){var a=arguments,s=t?t.apply(this,a):a[0],o=r.cache;if(o.has(s))return o.get(s);var l=e.apply(this,a);return r.cache=o.set(s,l)||o,l};return r.cache=new(kh.Cache||r1),r}kh.Cache=r1;var kI=kh,DI=kI,AI=500;function TI(e){var t=DI(e,function(a){return r.size===AI&&r.clear(),a}),r=t.cache;return t}var _I=TI,OI=_I,RI=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,MI=/\\(\\)?/g,PI=OI(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(RI,function(r,a,s,o){t.push(s?o.replace(MI,"$1"):a||r)}),t}),LI=PI;function II(e,t){for(var r=-1,a=e==null?0:e.length,s=Array(a);++r<a;)s[r]=t(e[r],r,e);return s}var Dh=II,Jy=Do,$I=Dh,FI=Gr,jI=wi,Zy=Jy?Jy.prototype:void 0,eE=Zy?Zy.toString:void 0;function n1(e){if(typeof e=="string")return e;if(FI(e))return $I(e,n1)+"";if(jI(e))return eE?eE.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var BI=n1,zI=BI;function UI(e){return e==null?"":zI(e)}var VI=UI,WI=Gr,HI=Ch,YI=LI,qI=VI;function GI(e,t){return WI(e)?e:HI(e,t)?[e]:YI(qI(e))}var wd=GI,KI=wi;function XI(e){if(typeof e=="string"||KI(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var Di=XI,QI=wd,JI=Di;function ZI(e,t){t=QI(t,e);for(var r=0,a=t.length;e!=null&&r<a;)e=e[JI(t[r++])];return r&&r==a?e:void 0}var Nd=ZI,e$=Nd;function t$(e,t,r){var a=e==null?void 0:e$(e,t);return a===void 0?r:a}var r$=t$;function n$(e,t){return e!=null&&t in Object(e)}var a$=n$,s$=wd,o$=xh,l$=Gr,i$=rh,c$=th,u$=Di;function d$(e,t,r){t=s$(t,e);for(var a=-1,s=t.length,o=!1;++a<s;){var l=u$(t[a]);if(!(o=e!=null&&r(e,l)))break;e=e[l]}return o||++a!=s?o:(s=e==null?0:e.length,!!s&&c$(s)&&i$(l,s)&&(l$(e)||o$(e)))}var m$=d$,f$=a$,p$=m$;function g$(e,t){return e!=null&&p$(e,t,f$)}var h$=g$,v$=Sh,y$=r$,E$=h$,x$=Ch,b$=e1,w$=t1,N$=Di,S$=1,C$=2;function k$(e,t){return x$(e)&&b$(t)?w$(N$(e),t):function(r){var a=y$(r,e);return a===void 0&&a===t?E$(r,e):v$(t,a,S$|C$)}}var D$=k$;function A$(e){return e}var Sd=A$;function T$(e){return function(t){return t==null?void 0:t[e]}}var _$=T$,O$=Nd;function R$(e){return function(t){return O$(t,e)}}var M$=R$,P$=_$,L$=M$,I$=Ch,$$=Di;function F$(e){return I$(e)?P$($$(e)):L$(e)}var j$=F$,B$=EI,z$=D$,U$=Sd,V$=Gr,W$=j$;function H$(e){return typeof e=="function"?e:e==null?U$:typeof e=="object"?V$(e)?z$(e[0],e[1]):B$(e):W$(e)}var Cd=H$,Y$=tI,q$=Cd,G$=AN,K$=Math.max;function X$(e,t,r){var a=e==null?0:e.length;if(!a)return-1;var s=r==null?0:G$(r);return s<0&&(s=K$(a+s,0)),Y$(e,q$(t),s)}var Q$=X$;const J$=xr(Q$);var Z$=Math.ceil,e8=Math.max;function t8(e,t,r,a){for(var s=-1,o=e8(Z$((t-e)/(r||1)),0),l=Array(o);o--;)l[a?o:++s]=e,e+=r;return l}var r8=t8,n8=r8,a8=fd,Ym=DN;function s8(e){return function(t,r,a){return a&&typeof a!="number"&&a8(t,r,a)&&(r=a=void 0),t=Ym(t),r===void 0?(r=t,t=0):r=Ym(r),a=a===void 0?t<r?1:-1:Ym(a),n8(t,r,a,e)}}var o8=s8,l8=o8,i8=l8(),c8=i8;const u8=xr(c8);var tE=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function d8(e,t){return!!(e===t||tE(e)&&tE(t))}function m8(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!d8(e[r],t[r]))return!1;return!0}function a1(e,t){t===void 0&&(t=m8);var r=null;function a(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];if(r&&r.lastThis===this&&t(s,r.lastArgs))return r.lastResult;var l=e.apply(this,s);return r={lastResult:l,lastArgs:s,lastThis:this},l}return a.clear=function(){r=null},a}function kp(e,t){var r=nh(e);return r?r.innerWidth:ls(e).width}var rE=Do,f8=xh,p8=Gr,nE=rE?rE.isConcatSpreadable:void 0;function g8(e){return p8(e)||f8(e)||!!(nE&&e&&e[nE])}var h8=g8,v8=yh,y8=h8;function s1(e,t,r,a,s){var o=-1,l=e.length;for(r||(r=y8),s||(s=[]);++o<l;){var i=e[o];t>0&&r(i)?t>1?s1(i,t-1,r,a,s):v8(s,i):a||(s[s.length]=i)}return s}var o1=s1;function E8(e){return function(t,r,a){for(var s=-1,o=Object(t),l=a(t),i=l.length;i--;){var c=l[e?i:++s];if(r(o[c],c,o)===!1)break}return t}}var x8=E8,b8=x8,w8=b8(),N8=w8,S8=N8,C8=ki;function k8(e,t){return e&&S8(e,t,C8)}var Ah=k8,D8=bi;function A8(e,t){return function(r,a){if(r==null)return r;if(!D8(r))return e(r,a);for(var s=r.length,o=t?s:-1,l=Object(r);(t?o--:++o<s)&&a(l[o],o,l)!==!1;);return r}}var T8=A8,_8=Ah,O8=T8,R8=O8(_8),M8=R8,P8=M8,L8=bi;function I8(e,t){var r=-1,a=L8(e)?Array(e.length):[];return P8(e,function(s,o,l){a[++r]=t(s,o,l)}),a}var $8=I8;function F8(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var j8=F8,aE=wi;function B8(e,t){if(e!==t){var r=e!==void 0,a=e===null,s=e===e,o=aE(e),l=t!==void 0,i=t===null,c=t===t,d=aE(t);if(!i&&!d&&!o&&e>t||o&&l&&c&&!i&&!d||a&&l&&c||!r&&c||!s)return 1;if(!a&&!o&&!d&&e<t||d&&r&&s&&!a&&!o||i&&r&&s||!l&&s||!c)return-1}return 0}var z8=B8,U8=z8;function V8(e,t,r){for(var a=-1,s=e.criteria,o=t.criteria,l=s.length,i=r.length;++a<l;){var c=U8(s[a],o[a]);if(c){if(a>=i)return c;var d=r[a];return c*(d=="desc"?-1:1)}}return e.index-t.index}var W8=V8,qm=Dh,H8=Nd,Y8=Cd,q8=$8,G8=j8,K8=xd,X8=W8,Q8=Sd,J8=Gr;function Z8(e,t,r){t.length?t=qm(t,function(o){return J8(o)?function(l){return H8(l,o.length===1?o[0]:o)}:o}):t=[Q8];var a=-1;t=qm(t,K8(Y8));var s=q8(e,function(o,l,i){var c=qm(t,function(d){return d(o)});return{criteria:c,index:++a,value:o}});return G8(s,function(o,l){return X8(o,l,r)})}var eF=Z8;function tF(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var rF=tF,nF=rF,sE=Math.max;function aF(e,t,r){return t=sE(t===void 0?e.length-1:t,0),function(){for(var a=arguments,s=-1,o=sE(a.length-t,0),l=Array(o);++s<o;)l[s]=a[t+s];s=-1;for(var i=Array(t+1);++s<t;)i[s]=a[s];return i[t]=r(l),nF(e,this,i)}}var l1=aF;function sF(e){return function(){return e}}var oF=sF,lF=Cs,iF=function(){try{var e=lF(Object,"defineProperty");return e({},"",{}),e}catch{}}(),i1=iF,cF=oF,oE=i1,uF=Sd,dF=oE?function(e,t){return oE(e,"toString",{configurable:!0,enumerable:!1,value:cF(t),writable:!0})}:uF,mF=dF,fF=800,pF=16,gF=Date.now;function hF(e){var t=0,r=0;return function(){var a=gF(),s=pF-(a-r);if(r=a,s>0){if(++t>=fF)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var vF=hF,yF=mF,EF=vF,xF=EF(yF),c1=xF,bF=Sd,wF=l1,NF=c1;function SF(e,t){return NF(wF(e,t,bF),e+"")}var u1=SF,CF=o1,kF=eF,DF=u1,lE=fd,AF=DF(function(e,t){if(e==null)return[];var r=t.length;return r>1&&lE(e,t[0],t[1])?t=[]:r>2&&lE(t[0],t[1],t[2])&&(t=[t[0]]),kF(e,CF(t,1),[])}),TF=AF;const _F=xr(TF);function d1(e){return oN(e)||NN(e)||Xg(e)||lN()}function OF(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var RF=OF,MF=oa,PF=Nh,LF=RF,IF=Object.prototype,$F=IF.hasOwnProperty;function FF(e){if(!MF(e))return LF(e);var t=PF(e),r=[];for(var a in e)a=="constructor"&&(t||!$F.call(e,a))||r.push(a);return r}var jF=FF,BF=GN,zF=jF,UF=bi;function VF(e){return UF(e)?BF(e,!0):zF(e)}var kd=VF,WF=u1,HF=xi,YF=fd,qF=kd,m1=Object.prototype,GF=m1.hasOwnProperty,KF=WF(function(e,t){e=Object(e);var r=-1,a=t.length,s=a>2?t[2]:void 0;for(s&&YF(t[0],t[1],s)&&(a=1);++r<a;)for(var o=t[r],l=qF(o),i=-1,c=l.length;++i<c;){var d=l[i],u=e[d];(u===void 0||HF(u,m1[d])&&!GF.call(e,d))&&(e[d]=o[d])}return e}),XF=KF;const QF=xr(XF);var iE=i1;function JF(e,t,r){t=="__proto__"&&iE?iE(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var Th=JF,ZF=Th,e7=Ah,t7=Cd;function r7(e,t){var r={};return t=t7(t),e7(e,function(a,s,o){ZF(r,s,t(a,s,o))}),r}var n7=r7;const a7=xr(n7);function s7(e,t){for(var r=-1,a=e==null?0:e.length;++r<a&&t(e[r],r,e)!==!1;);return e}var f1=s7,o7=Th,l7=xi,i7=Object.prototype,c7=i7.hasOwnProperty;function u7(e,t,r){var a=e[t];(!(c7.call(e,t)&&l7(a,r))||r===void 0&&!(t in e))&&o7(e,t,r)}var p1=u7,d7=p1,m7=Th;function f7(e,t,r,a){var s=!r;r||(r={});for(var o=-1,l=t.length;++o<l;){var i=t[o],c=a?a(r[i],e[i],i,r,e):void 0;c===void 0&&(c=e[i]),s?m7(r,i,c):d7(r,i,c)}return r}var Ai=f7,p7=Ai,g7=ki;function h7(e,t){return e&&p7(t,g7(t),e)}var v7=h7,y7=Ai,E7=kd;function x7(e,t){return e&&y7(t,E7(t),e)}var b7=x7,Du={exports:{}};Du.exports;(function(e,t){var r=Ln,a=t&&!t.nodeType&&t,s=a&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===a,l=o?r.Buffer:void 0,i=l?l.allocUnsafe:void 0;function c(d,u){if(u)return d.slice();var m=d.length,f=i?i(m):new d.constructor(m);return d.copy(f),f}e.exports=c})(Du,Du.exports);var w7=Du.exports;function N7(e,t){var r=-1,a=e.length;for(t||(t=Array(a));++r<a;)t[r]=e[r];return t}var S7=N7,C7=Ai,k7=Eh;function D7(e,t){return C7(e,k7(e),t)}var A7=D7,T7=KN,_7=T7(Object.getPrototypeOf,Object),Dd=_7,O7=yh,R7=Dd,M7=Eh,P7=YN,L7=Object.getOwnPropertySymbols,I7=L7?function(e){for(var t=[];e;)O7(t,M7(e)),e=R7(e);return t}:P7,g1=I7,$7=Ai,F7=g1;function j7(e,t){return $7(e,F7(e),t)}var B7=j7,z7=HN,U7=g1,V7=kd;function W7(e){return z7(e,V7,U7)}var h1=W7,H7=Object.prototype,Y7=H7.hasOwnProperty;function q7(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&Y7.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var G7=q7,cE=WN;function K7(e){var t=new e.constructor(e.byteLength);return new cE(t).set(new cE(e)),t}var _h=K7,X7=_h;function Q7(e,t){var r=t?X7(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var J7=Q7,Z7=/\w*$/;function ej(e){var t=new e.constructor(e.source,Z7.exec(e));return t.lastIndex=e.lastIndex,t}var tj=ej,uE=Do,dE=uE?uE.prototype:void 0,mE=dE?dE.valueOf:void 0;function rj(e){return mE?Object(mE.call(e)):{}}var nj=rj,aj=_h;function sj(e,t){var r=t?aj(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var oj=sj,lj=_h,ij=J7,cj=tj,uj=nj,dj=oj,mj="[object Boolean]",fj="[object Date]",pj="[object Map]",gj="[object Number]",hj="[object RegExp]",vj="[object Set]",yj="[object String]",Ej="[object Symbol]",xj="[object ArrayBuffer]",bj="[object DataView]",wj="[object Float32Array]",Nj="[object Float64Array]",Sj="[object Int8Array]",Cj="[object Int16Array]",kj="[object Int32Array]",Dj="[object Uint8Array]",Aj="[object Uint8ClampedArray]",Tj="[object Uint16Array]",_j="[object Uint32Array]";function Oj(e,t,r){var a=e.constructor;switch(t){case xj:return lj(e);case mj:case fj:return new a(+e);case bj:return ij(e,r);case wj:case Nj:case Sj:case Cj:case kj:case Dj:case Aj:case Tj:case _j:return dj(e,r);case pj:return new a;case gj:case yj:return new a(e);case hj:return cj(e);case vj:return new a;case Ej:return uj(e)}}var Rj=Oj,Mj=oa,fE=Object.create,Pj=function(){function e(){}return function(t){if(!Mj(t))return{};if(fE)return fE(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),v1=Pj,Lj=v1,Ij=Dd,$j=Nh;function Fj(e){return typeof e.constructor=="function"&&!$j(e)?Lj(Ij(e)):{}}var jj=Fj,Bj=bd,zj=Va,Uj="[object Map]";function Vj(e){return zj(e)&&Bj(e)==Uj}var Wj=Vj,Hj=Wj,Yj=xd,pE=bh,gE=pE&&pE.isMap,qj=gE?Yj(gE):Hj,Gj=qj,Kj=bd,Xj=Va,Qj="[object Set]";function Jj(e){return Xj(e)&&Kj(e)==Qj}var Zj=Jj,e9=Zj,t9=xd,hE=bh,vE=hE&&hE.isSet,r9=vE?t9(vE):e9,n9=r9,a9=vh,s9=f1,o9=p1,l9=v7,i9=b7,c9=w7,u9=S7,d9=A7,m9=B7,f9=XN,p9=h1,g9=bd,h9=G7,v9=Rj,y9=jj,E9=Gr,x9=Ed,b9=Gj,w9=oa,N9=n9,S9=ki,C9=kd,k9=1,D9=2,A9=4,y1="[object Arguments]",T9="[object Array]",_9="[object Boolean]",O9="[object Date]",R9="[object Error]",E1="[object Function]",M9="[object GeneratorFunction]",P9="[object Map]",L9="[object Number]",x1="[object Object]",I9="[object RegExp]",$9="[object Set]",F9="[object String]",j9="[object Symbol]",B9="[object WeakMap]",z9="[object ArrayBuffer]",U9="[object DataView]",V9="[object Float32Array]",W9="[object Float64Array]",H9="[object Int8Array]",Y9="[object Int16Array]",q9="[object Int32Array]",G9="[object Uint8Array]",K9="[object Uint8ClampedArray]",X9="[object Uint16Array]",Q9="[object Uint32Array]",Ze={};Ze[y1]=Ze[T9]=Ze[z9]=Ze[U9]=Ze[_9]=Ze[O9]=Ze[V9]=Ze[W9]=Ze[H9]=Ze[Y9]=Ze[q9]=Ze[P9]=Ze[L9]=Ze[x1]=Ze[I9]=Ze[$9]=Ze[F9]=Ze[j9]=Ze[G9]=Ze[K9]=Ze[X9]=Ze[Q9]=!0;Ze[R9]=Ze[E1]=Ze[B9]=!1;function $c(e,t,r,a,s,o){var l,i=t&k9,c=t&D9,d=t&A9;if(r&&(l=s?r(e,a,s,o):r(e)),l!==void 0)return l;if(!w9(e))return e;var u=E9(e);if(u){if(l=h9(e),!i)return u9(e,l)}else{var m=g9(e),f=m==E1||m==M9;if(x9(e))return c9(e,i);if(m==x1||m==y1||f&&!s){if(l=c||f?{}:y9(e),!i)return c?m9(e,i9(l,e)):d9(e,l9(l,e))}else{if(!Ze[m])return s?e:{};l=v9(e,m,i)}}o||(o=new a9);var x=o.get(e);if(x)return x;o.set(e,l),N9(e)?e.forEach(function(v){l.add($c(v,t,r,v,e,o))}):b9(e)&&e.forEach(function(v,p){l.set(p,$c(v,t,r,p,e,o))});var b=d?c?p9:f9:c?C9:S9,y=u?void 0:b(e);return s9(y||e,function(v,p){y&&(p=v,v=e[p]),o9(l,p,$c(v,t,r,p,e,o))}),l}var J9=$c;function Z9(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var eB=Z9,tB=Nd,rB=SN;function nB(e,t){return t.length<2?e:tB(e,rB(t,0,-1))}var aB=nB,sB=wd,oB=eB,lB=aB,iB=Di;function cB(e,t){return t=sB(t,e),e=lB(e,t),e==null||delete e[iB(oB(t))]}var uB=cB,dB=Ao,mB=Dd,fB=Va,pB="[object Object]",gB=Function.prototype,hB=Object.prototype,b1=gB.toString,vB=hB.hasOwnProperty,yB=b1.call(Object);function EB(e){if(!fB(e)||dB(e)!=pB)return!1;var t=mB(e);if(t===null)return!0;var r=vB.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&b1.call(r)==yB}var xB=EB,bB=xB;function wB(e){return bB(e)?void 0:e}var NB=wB,SB=o1;function CB(e){var t=e==null?0:e.length;return t?SB(e,1):[]}var kB=CB,DB=kB,AB=l1,TB=c1;function _B(e){return TB(AB(e,void 0,DB),e+"")}var OB=_B,RB=Dh,MB=J9,PB=uB,LB=wd,IB=Ai,$B=NB,FB=OB,jB=h1,BB=1,zB=2,UB=4,VB=FB(function(e,t){var r={};if(e==null)return r;var a=!1;t=RB(t,function(o){return o=LB(o,e),a||(a=o.length>1),o}),IB(e,jB(e),r),a&&(r=MB(r,BB|zB|UB,$B));for(var s=t.length;s--;)PB(r,t[s]);return r}),WB=VB;const HB=xr(WB);var YB=f1,qB=v1,GB=Ah,KB=Cd,XB=Dd,QB=Gr,JB=Ed,ZB=eh,ez=oa,tz=wh;function rz(e,t,r){var a=QB(e),s=a||JB(e)||tz(e);if(t=KB(t),r==null){var o=e&&e.constructor;s?r=a?new o:[]:ez(e)?r=ZB(o)?qB(XB(e)):{}:r={}}return(s?YB:GB)(e,function(l,i,c){return t(r,l,i,c)}),r}var nz=rz;const az=xr(nz);var sz={exports:{}};(function(e,t){(function(r,a){e.exports=a()})(Br,function(){return function(r,a,s){a.prototype.isBetween=function(o,l,i,c){var d=s(o),u=s(l),m=(c=c||"()")[0]==="(",f=c[1]===")";return(m?this.isAfter(d,i):!this.isBefore(d,i))&&(f?this.isBefore(u,i):!this.isAfter(u,i))||(m?this.isBefore(d,i):!this.isAfter(d,i))&&(f?this.isAfter(u,i):!this.isBefore(u,i))}}})})(sz);var oz={exports:{}};(function(e,t){(function(r,a){e.exports=a()})(Br,function(){return function(r,a){a.prototype.isSameOrAfter=function(s,o){return this.isSame(s,o)||this.isAfter(s,o)}}})})(oz);var lz={exports:{}};(function(e,t){(function(r,a){e.exports=a()})(Br,function(){return function(r,a){a.prototype.isSameOrBefore=function(s,o){return this.isSame(s,o)||this.isBefore(s,o)}}})})(lz);var iz={exports:{}};(function(e,t){(function(r,a){e.exports=a()})(Br,function(){return function(r,a,s){var o=a.prototype,l=function(m){return m&&(m.indexOf?m:m.s)},i=function(m,f,x,b,y){var v=m.name?m:m.$locale(),p=l(v[f]),h=l(v[x]),E=p||h.map(function(N){return N.slice(0,b)});if(!y)return E;var w=v.weekStart;return E.map(function(N,S){return E[(S+(w||0))%7]})},c=function(){return s.Ls[s.locale()]},d=function(m,f){return m.formats[f]||function(x){return x.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(b,y,v){return y||v.slice(1)})}(m.formats[f.toUpperCase()])},u=function(){var m=this;return{months:function(f){return f?f.format("MMMM"):i(m,"months")},monthsShort:function(f){return f?f.format("MMM"):i(m,"monthsShort","months",3)},firstDayOfWeek:function(){return m.$locale().weekStart||0},weekdays:function(f){return f?f.format("dddd"):i(m,"weekdays")},weekdaysMin:function(f){return f?f.format("dd"):i(m,"weekdaysMin","weekdays",2)},weekdaysShort:function(f){return f?f.format("ddd"):i(m,"weekdaysShort","weekdays",3)},longDateFormat:function(f){return d(m.$locale(),f)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};o.localeData=function(){return u.bind(this)()},s.localeData=function(){var m=c();return{firstDayOfWeek:function(){return m.weekStart||0},weekdays:function(){return s.weekdays()},weekdaysShort:function(){return s.weekdaysShort()},weekdaysMin:function(){return s.weekdaysMin()},months:function(){return s.months()},monthsShort:function(){return s.monthsShort()},longDateFormat:function(f){return d(m,f)},meridiem:m.meridiem,ordinal:m.ordinal}},s.months=function(){return i(c(),"months")},s.monthsShort=function(){return i(c(),"monthsShort","months",3)},s.weekdays=function(m){return i(c(),"weekdays",null,null,m)},s.weekdaysShort=function(m){return i(c(),"weekdaysShort","weekdays",3,m)},s.weekdaysMin=function(m){return i(c(),"weekdaysMin","weekdays",2,m)}}})})(iz);var cz={exports:{}};(function(e,t){(function(r,a){e.exports=a()})(Br,function(){var r={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(a,s,o){var l=s.prototype,i=l.format;o.en.formats=r,l.format=function(c){c===void 0&&(c="YYYY-MM-DDTHH:mm:ssZ");var d=this.$locale().formats,u=function(m,f){return m.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(x,b,y){var v=y&&y.toUpperCase();return b||f[y]||r[y]||f[v].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(p,h,E){return h||E.slice(1)})})}(c,d===void 0?{}:d);return i.call(this,u)}}})})(cz);var uz={exports:{}};(function(e,t){(function(r,a){e.exports=a()})(Br,function(){return function(r,a,s){var o=function(l,i){if(!i||!i.length||i.length===1&&!i[0]||i.length===1&&Array.isArray(i[0])&&!i[0].length)return null;var c;i.length===1&&i[0].length>0&&(i=i[0]),c=(i=i.filter(function(u){return u}))[0];for(var d=1;d<i.length;d+=1)i[d].isValid()&&!i[d][l](c)||(c=i[d]);return c};s.max=function(){var l=[].slice.call(arguments,0);return o("isAfter",l)},s.min=function(){var l=[].slice.call(arguments,0);return o("isBefore",l)}}})})(uz);var dz={exports:{}};(function(e,t){(function(r,a){e.exports=a()})(Br,function(){var r="minute",a=/[+-]\d\d(?::?\d\d)?/g,s=/([+-]|\d\d)/g;return function(o,l,i){var c=l.prototype;i.utc=function(y){var v={date:y,utc:!0,args:arguments};return new l(v)},c.utc=function(y){var v=i(this.toDate(),{locale:this.$L,utc:!0});return y?v.add(this.utcOffset(),r):v},c.local=function(){return i(this.toDate(),{locale:this.$L,utc:!1})};var d=c.parse;c.parse=function(y){y.utc&&(this.$u=!0),this.$utils().u(y.$offset)||(this.$offset=y.$offset),d.call(this,y)};var u=c.init;c.init=function(){if(this.$u){var y=this.$d;this.$y=y.getUTCFullYear(),this.$M=y.getUTCMonth(),this.$D=y.getUTCDate(),this.$W=y.getUTCDay(),this.$H=y.getUTCHours(),this.$m=y.getUTCMinutes(),this.$s=y.getUTCSeconds(),this.$ms=y.getUTCMilliseconds()}else u.call(this)};var m=c.utcOffset;c.utcOffset=function(y,v){var p=this.$utils().u;if(p(y))return this.$u?0:p(this.$offset)?m.call(this):this.$offset;if(typeof y=="string"&&(y=function(N){N===void 0&&(N="");var S=N.match(a);if(!S)return null;var C=(""+S[0]).match(s)||["-",0,0],D=C[0],k=60*+C[1]+ +C[2];return k===0?0:D==="+"?k:-k}(y),y===null))return this;var h=Math.abs(y)<=16?60*y:y,E=this;if(v)return E.$offset=h,E.$u=y===0,E;if(y!==0){var w=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(E=this.local().add(h+w,r)).$offset=h,E.$x.$localOffset=w}else E=this.utc();return E};var f=c.format;c.format=function(y){var v=y||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return f.call(this,v)},c.valueOf=function(){var y=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*y},c.isUTC=function(){return!!this.$u},c.toISOString=function(){return this.toDate().toISOString()},c.toString=function(){return this.toDate().toUTCString()};var x=c.toDate;c.toDate=function(y){return y==="s"&&this.$offset?i(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():x.call(this)};var b=c.diff;c.diff=function(y,v,p){if(y&&this.$u===y.$u)return b.call(this,y,v,p);var h=this.local(),E=i(y).local();return b.call(h,E,v,p)}}})})(dz);var mz={exports:{}};(function(e,t){(function(r,a){e.exports=a()})(Br,function(){return function(r,a){a.prototype.isLeapYear=function(){return this.$y%4==0&&this.$y%100!=0||this.$y%400==0}}})})(mz);function bn(e){return e.children}var Er={PREVIOUS:"PREV",NEXT:"NEXT",TODAY:"TODAY",DATE:"DATE"},nr={MONTH:"month",WEEK:"week",WORK_WEEK:"work_week",DAY:"day",AGENDA:"agenda"},yE=Object.keys(nr).map(function(e){return nr[e]});ae.oneOfType([ae.string,ae.func]);ae.any;ae.func;ae.oneOfType([ae.arrayOf(ae.oneOf(yE)),ae.objectOf(function(e,t){var r=yE.indexOf(t)!==-1&&typeof e[t]=="boolean";if(r)return null;for(var a=arguments.length,s=new Array(a>2?a-2:0),o=2;o<a;o++)s[o-2]=arguments[o];return ae.elementType.apply(ae,[e,t].concat(s))})]);ae.oneOfType([ae.oneOf(["overlap","no-overlap"]),ae.func]);var EE={seconds:1e3,minutes:1e3*60,hours:1e3*60*60,day:1e3*60*60*24};function w1(e,t){var r=Ut(e,"month");return Ut(r,"week",t.startOfWeek())}function N1(e,t){var r=bu(e,"month");return bu(r,"week",t.startOfWeek())}function fz(e,t){for(var r=w1(e,t),a=N1(e,t),s=[];Co(r,a,"day");)s.push(r),r=dn(r,1,"day");return s}function pz(e,t){var r=Ut(e,t);return yi(r,e)?r:dn(r,1,t)}function gz(e,t){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"day",a=e,s=[];Co(a,t,r);)s.push(a),a=dn(a,1,r);return s}function hz(e,t){return t==null&&e==null?null:(t==null&&(t=new Date),e==null&&(e=new Date),e=Ut(e,"day"),e=Zl(e,Zl(t)),e=uo(e,uo(t)),e=Jl(e,Jl(t)),Ql(e,Ql(t)))}function xE(e){return Zl(e)===0&&uo(e)===0&&Jl(e)===0&&Ql(e)===0}function vz(e,t,r,a){return r==="day"&&(r="date"),Math.abs(ry[r](e,void 0,a)-ry[r](t,void 0,a))}function Oh(e,t,r){return!r||r==="milliseconds"?Math.abs(+e-+t):Math.round(Math.abs(+Ut(e,r)/EE[r]-+Ut(t,r)/EE[r]))}var yz=ae.oneOfType([ae.string,ae.func]);function Ez(e,t,r,a,s){var o=typeof a=="function"?a(r,s,e):t.call(e,r,a,s);return Hl(o==null||typeof o=="string","`localizer format(..)` must return a string, null, or undefined"),o}function xz(e,t,r){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,t+r,0,0)}function Rh(e,t){return e.getTimezoneOffset()-t.getTimezoneOffset()}function bz(e,t){return Oh(e,t,"minutes")+Rh(e,t)}function wz(e){var t=Ut(e,"day");return Oh(t,e,"minutes")+Rh(t,e)}function Nz(e,t){return Zg(e,t,"day")}function Sz(e,t,r){var a=yi(e,t,"minutes");return a?Ei(t,r,"minutes"):md(t,r,"minutes")}function Dp(e,t){return vz(e,t,"day")}function Cz(e){var t=e.evtA,r=t.start,a=t.end,s=t.allDay,o=e.evtB,l=o.start,i=o.end,c=o.allDay,d=+Ut(r,"day")-+Ut(l,"day"),u=Dp(r,a),m=Dp(l,i);return d||m-u||!!c-!!s||+r-+l||+a-+i}function kz(e){var t=e.event,r=t.start,a=t.end,s=e.range,o=s.start,l=s.end,i=Ut(r,"day"),c=Co(i,l,"day"),d=Jg(i,a,"minutes"),u=d?md(a,o,"minutes"):Ei(a,o,"minutes");return c&&u}function Dz(e,t){return yi(e,t,"day")}function Az(e,t){return xE(e)&&xE(t)}var Tz=At(function e(t){var r=this;Dt(this,e),Hl(typeof t.format=="function","date localizer `format(..)` must be a function"),Hl(typeof t.firstOfWeek=="function","date localizer `firstOfWeek(..)` must be a function"),this.propType=t.propType||yz,this.formats=t.formats,this.format=function(){for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return Ez.apply(void 0,[r,t.format].concat(s))},this.startOfWeek=t.firstOfWeek,this.merge=t.merge||hz,this.inRange=t.inRange||EN,this.lt=t.lt||Zg,this.lte=t.lte||Co,this.gt=t.gt||md,this.gte=t.gte||Ei,this.eq=t.eq||yi,this.neq=t.neq||Jg,this.startOf=t.startOf||Ut,this.endOf=t.endOf||bu,this.add=t.add||dn,this.range=t.range||gz,this.diff=t.diff||Oh,this.ceil=t.ceil||pz,this.min=t.min||vN,this.max=t.max||yN,this.minutes=t.minutes||uo,this.daySpan=t.daySpan||Dp,this.firstVisibleDay=t.firstVisibleDay||w1,this.lastVisibleDay=t.lastVisibleDay||N1,this.visibleDays=t.visibleDays||fz,this.getSlotDate=t.getSlotDate||xz,this.getTimezoneOffset=t.getTimezoneOffset||function(a){return a.getTimezoneOffset()},this.getDstOffset=t.getDstOffset||Rh,this.getTotalMin=t.getTotalMin||bz,this.getMinutesFromMidnight=t.getMinutesFromMidnight||wz,this.continuesPrior=t.continuesPrior||Nz,this.continuesAfter=t.continuesAfter||Sz,this.sortEvents=t.sortEvents||Cz,this.inEventRange=t.inEventRange||kz,this.isSameDate=t.isSameDate||Dz,this.startAndEndAreDateOnly=t.startAndEndAreDateOnly||Az,this.segmentOffset=t.browserTZOffset?t.browserTZOffset():0});function _z(e,t,r,a){var s=Je(Je({},e.formats),r);return Je(Je({},e),{},{messages:a,startOfWeek:function(){return e.startOfWeek(t)},format:function(l,i){return e.format(l,s[i]||i,t)}})}var Oz=function(e){function t(){var r;Dt(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return r=Xt(this,t,[].concat(s)),r.navigate=function(l){r.props.onNavigate(l)},r.view=function(l){r.props.onView(l)},r}return Qt(t,e),At(t,[{key:"render",value:function(){var a=this.props,s=a.localizer.messages,o=a.label;return n.createElement("div",{className:"rbc-toolbar"},n.createElement("span",{className:"rbc-btn-group"},n.createElement("button",{type:"button",onClick:this.navigate.bind(null,Er.TODAY)},s.today),n.createElement("button",{type:"button",onClick:this.navigate.bind(null,Er.PREVIOUS)},s.previous),n.createElement("button",{type:"button",onClick:this.navigate.bind(null,Er.NEXT)},s.next)),n.createElement("span",{className:"rbc-toolbar-label"},o),n.createElement("span",{className:"rbc-btn-group"},this.viewNamesGroup(s)))}},{key:"viewNamesGroup",value:function(a){var s=this,o=this.props.views,l=this.props.view;if(o.length>1)return o.map(function(i){return n.createElement("button",{type:"button",key:i,className:ht({"rbc-active":l===i}),onClick:s.view.bind(null,i)},a[i])})}}])}(n.Component);function at(e,t){e&&e.apply(null,[].concat(t))}var Rz={date:"Date",time:"Time",event:"Event",allDay:"All Day",week:"Week",work_week:"Work Week",day:"Day",month:"Month",previous:"Back",next:"Next",yesterday:"Yesterday",tomorrow:"Tomorrow",today:"Today",agenda:"Agenda",noEventsInRange:"There are no events in this range.",showMore:function(t){return"+".concat(t," more")}};function Mz(e){return Je(Je({},Rz),e)}function Pz(e){var t=e.ref,r=e.callback;g.useEffect(function(){var a=function(o){t.current&&!t.current.contains(o.target)&&r()};return document.addEventListener("mousedown",a),function(){document.removeEventListener("mousedown",a)}},[t,r])}var Lz=["style","className","event","selected","isAllDay","onSelect","onDoubleClick","onKeyPress","localizer","continuesPrior","continuesAfter","accessors","getters","children","components","slotStart","slotEnd"],S1=function(e){function t(){return Dt(this,t),Xt(this,t,arguments)}return Qt(t,e),At(t,[{key:"render",value:function(){var a=this.props,s=a.style,o=a.className,l=a.event,i=a.selected,c=a.isAllDay,d=a.onSelect,u=a.onDoubleClick,m=a.onKeyPress,f=a.localizer,x=a.continuesPrior,b=a.continuesAfter,y=a.accessors,v=a.getters,p=a.children,h=a.components,E=h.event,w=h.eventWrapper,N=a.slotStart,S=a.slotEnd,C=On(a,Lz);delete C.resizable;var D=y.title(l),k=y.tooltip(l),O=y.end(l),A=y.start(l),$=y.allDay(l),P=c||$||f.diff(A,f.ceil(O,"day"),"day")>1,I=v.eventProp(l,A,O,i),L=n.createElement("div",{className:"rbc-event-content",title:k||void 0},E?n.createElement(E,{event:l,continuesPrior:x,continuesAfter:b,title:D,isAllDay:$,localizer:f,slotStart:N,slotEnd:S}):D);return n.createElement(w,Object.assign({},this.props,{type:"date"}),n.createElement("div",Object.assign({},C,{style:Je(Je({},I.style),s),className:ht("rbc-event",o,I.className,{"rbc-selected":i,"rbc-event-allday":P,"rbc-event-continues-prior":x,"rbc-event-continues-after":b}),onClick:function(T){return d&&d(l,T)},onDoubleClick:function(T){return u&&u(l,T)},onKeyDown:function(T){return m&&m(l,T)}}),typeof p=="function"?p(L):L))}}])}(n.Component);function Ad(e,t){return!e||t==null?!1:ZL(e,t)}function C1(e,t){var r=e.right-e.left,a=r/t;return a}function k1(e,t,r,a){var s=C1(e,a);return r?a-1-Math.floor((t-e.left)/s):Math.floor((t-e.left)/s)}function Iz(e,t){var r=t.x,a=t.y;return a>=e.top&&a<=e.bottom&&r>=e.left&&r<=e.right}function $z(e,t,r,a,s){var o=-1,l=-1,i=a-1,c=C1(t,a),d=k1(t,r.x,s,a),u=t.top<r.y&&t.bottom>r.y,m=t.top<e.y&&t.bottom>e.y,f=e.y>t.bottom,x=t.top>e.y,b=r.top<t.top&&r.bottom>t.bottom;return b&&(o=0,l=i),u&&(x?(o=0,l=d):f&&(o=d,l=i)),m&&(o=l=s?i-Math.floor((e.x-t.left)/c):Math.floor((e.x-t.left)/c),u?d<o?o=d:l=d:e.y<r.y?l=i:o=0),{startIdx:o,endIdx:l}}function Fz(e){var t=e.target,r=e.offset,a=e.container,s=e.box,o=ls(t),l=o.top,i=o.left,c=o.width,d=o.height,u=ls(a),m=u.top,f=u.left,x=u.width,b=u.height,y=ls(s),v=y.width,p=y.height,h=m+b,E=f+x,w=l+p,N=i+v,S=r.x,C=r.y,D=w>h?l-p-C:l+C+d,k=N>E?i+S-v+c:i+S;return{topOffset:D,leftOffset:k}}function jz(e){var t=e.containerRef,r=e.accessors,a=e.getters,s=e.selected,o=e.components,l=e.localizer,i=e.position,c=e.show,d=e.events,u=e.slotStart,m=e.slotEnd,f=e.onSelect,x=e.onDoubleClick,b=e.onKeyPress,y=e.handleDragStart,v=e.popperRef,p=e.target,h=e.offset;Pz({ref:v,callback:c}),g.useLayoutEffect(function(){var N=Fz({target:p,offset:h,container:t.current,box:v.current}),S=N.topOffset,C=N.leftOffset;v.current.style.top="".concat(S,"px"),v.current.style.left="".concat(C,"px")},[h.x,h.y,p]);var E=i.width,w={minWidth:E+E/2};return n.createElement("div",{style:w,className:"rbc-overlay",ref:v},n.createElement("div",{className:"rbc-overlay-header"},l.format(u,"dayHeaderFormat")),d.map(function(N,S){return n.createElement(S1,{key:S,type:"popup",localizer:l,event:N,getters:a,onSelect:f,accessors:r,components:o,onDoubleClick:x,onKeyPress:b,continuesPrior:l.lt(r.end(N),u,"day"),continuesAfter:l.gte(r.start(N),m,"day"),slotStart:u,slotEnd:m,selected:Ad(N,s),draggable:!0,onDragStart:function(){return y(N)},onDragEnd:function(){return c()}})}))}var D1=n.forwardRef(function(e,t){return n.createElement(jz,Object.assign({},e,{popperRef:t}))});D1.propTypes={accessors:ae.object.isRequired,getters:ae.object.isRequired,selected:ae.object,components:ae.object.isRequired,localizer:ae.object.isRequired,position:ae.object.isRequired,show:ae.func.isRequired,events:ae.array.isRequired,slotStart:ae.instanceOf(Date).isRequired,slotEnd:ae.instanceOf(Date),onSelect:ae.func,onDoubleClick:ae.func,onKeyPress:ae.func,handleDragStart:ae.func,style:ae.object,offset:ae.shape({x:ae.number,y:ae.number})};function Bz(e){var t=e.containerRef,r=e.popupOffset,a=r===void 0?5:r,s=e.overlay,o=e.accessors,l=e.localizer,i=e.components,c=e.getters,d=e.selected,u=e.handleSelectEvent,m=e.handleDoubleClickEvent,f=e.handleKeyPressEvent,x=e.handleDragStart,b=e.onHide,y=e.overlayDisplay,v=g.useRef(null);if(!s.position)return null;var p=a;isNaN(a)||(p={x:a,y:a});var h=s.position,E=s.events,w=s.date,N=s.end;return n.createElement(ph,{rootClose:!0,flip:!0,show:!0,placement:"bottom",onHide:b,target:s.target},function(S){var C=S.props;return n.createElement(D1,Object.assign({},C,{containerRef:t,ref:v,target:s.target,offset:p,accessors:o,getters:c,selected:d,components:i,localizer:l,position:h,show:y,events:E,slotStart:w,slotEnd:N,onSelect:u,onDoubleClick:m,onKeyPress:f,handleDragStart:x}))})}var Mh=n.forwardRef(function(e,t){return n.createElement(Bz,Object.assign({},e,{containerRef:t}))});Mh.propTypes={popupOffset:ae.oneOfType([ae.number,ae.shape({x:ae.number,y:ae.number})]),overlay:ae.shape({position:ae.object,events:ae.array,date:ae.instanceOf(Date),end:ae.instanceOf(Date)}),accessors:ae.object.isRequired,localizer:ae.object.isRequired,components:ae.object.isRequired,getters:ae.object.isRequired,selected:ae.object,handleSelectEvent:ae.func,handleDoubleClickEvent:ae.func,handleKeyPressEvent:ae.func,handleDragStart:ae.func,onHide:ae.func,overlayDisplay:ae.func};function Ht(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document;return cl(r,e,t,{passive:!1})}function zz(e,t,r){return!e||ei(e,document.elementFromPoint(t,r))}function Uz(e,t){var r=t.clientX,a=t.clientY,s=document.elementFromPoint(r,a);return ZN(s,".rbc-event",e)}function Vz(e,t){var r=t.clientX,a=t.clientY,s=document.elementFromPoint(r,a);return ZN(s,".rbc-show-more",e)}function Au(e,t){return!!Uz(e,t)}function Wz(e,t){return!!Vz(e,t)}function el(e){var t=e;return e.touches&&e.touches.length&&(t=e.touches[0]),{clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY}}var bE=5,Hz=250,A1=function(){function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=r.global,s=a===void 0?!1:a,o=r.longPressThreshold,l=o===void 0?250:o,i=r.validContainers,c=i===void 0?[]:i;Dt(this,e),this._initialEvent=null,this.selecting=!1,this.isDetached=!1,this.container=t,this.globalMouse=!t||s,this.longPressThreshold=l,this.validContainers=c,this._listeners=Object.create(null),this._handleInitialEvent=this._handleInitialEvent.bind(this),this._handleMoveEvent=this._handleMoveEvent.bind(this),this._handleTerminatingEvent=this._handleTerminatingEvent.bind(this),this._keyListener=this._keyListener.bind(this),this._dropFromOutsideListener=this._dropFromOutsideListener.bind(this),this._dragOverFromOutsideListener=this._dragOverFromOutsideListener.bind(this),this._removeTouchMoveWindowListener=Ht("touchmove",function(){},window),this._removeKeyDownListener=Ht("keydown",this._keyListener),this._removeKeyUpListener=Ht("keyup",this._keyListener),this._removeDropFromOutsideListener=Ht("drop",this._dropFromOutsideListener),this._removeDragOverFromOutsideListener=Ht("dragover",this._dragOverFromOutsideListener),this._addInitialEventListener()}return At(e,[{key:"on",value:function(r,a){var s=this._listeners[r]||(this._listeners[r]=[]);return s.push(a),{remove:function(){var l=s.indexOf(a);l!==-1&&s.splice(l,1)}}}},{key:"emit",value:function(r){for(var a=arguments.length,s=new Array(a>1?a-1:0),o=1;o<a;o++)s[o-1]=arguments[o];var l,i=this._listeners[r]||[];return i.forEach(function(c){l===void 0&&(l=c.apply(void 0,s))}),l}},{key:"teardown",value:function(){this._initialEvent=null,this._initialEventData=null,this._selectRect=null,this.selecting=!1,this._lastClickData=null,this.isDetached=!0,this._listeners=Object.create(null),this._removeTouchMoveWindowListener&&this._removeTouchMoveWindowListener(),this._removeInitialEventListener&&this._removeInitialEventListener(),this._removeEndListener&&this._removeEndListener(),this._onEscListener&&this._onEscListener(),this._removeMoveListener&&this._removeMoveListener(),this._removeKeyUpListener&&this._removeKeyUpListener(),this._removeKeyDownListener&&this._removeKeyDownListener(),this._removeDropFromOutsideListener&&this._removeDropFromOutsideListener(),this._removeDragOverFromOutsideListener&&this._removeDragOverFromOutsideListener()}},{key:"isSelected",value:function(r){var a=this._selectRect;return!a||!this.selecting?!1:wE(a,ws(r))}},{key:"filter",value:function(r){var a=this._selectRect;return!a||!this.selecting?[]:r.filter(this.isSelected,this)}},{key:"_addLongPressListener",value:function(r,a){var s=this,o=null,l=null,i=null,c=function(f){o=setTimeout(function(){u(),r(f)},s.longPressThreshold),l=Ht("touchmove",function(){return u()}),i=Ht("touchend",function(){return u()})},d=Ht("touchstart",c),u=function(){o&&clearTimeout(o),l&&l(),i&&i(),o=null,l=null,i=null};return a&&c(a),function(){u(),d()}}},{key:"_addInitialEventListener",value:function(){var r=this,a=Ht("mousedown",function(o){r._removeInitialEventListener(),r._handleInitialEvent(o),r._removeInitialEventListener=Ht("mousedown",r._handleInitialEvent)}),s=Ht("touchstart",function(o){r._removeInitialEventListener(),r._removeInitialEventListener=r._addLongPressListener(r._handleInitialEvent,o)});this._removeInitialEventListener=function(){a(),s()}}},{key:"_dropFromOutsideListener",value:function(r){var a=el(r),s=a.pageX,o=a.pageY,l=a.clientX,i=a.clientY;this.emit("dropFromOutside",{x:s,y:o,clientX:l,clientY:i}),r.preventDefault()}},{key:"_dragOverFromOutsideListener",value:function(r){var a=el(r),s=a.pageX,o=a.pageY,l=a.clientX,i=a.clientY;this.emit("dragOverFromOutside",{x:s,y:o,clientX:l,clientY:i}),r.preventDefault()}},{key:"_handleInitialEvent",value:function(r){if(this._initialEvent=r,!this.isDetached){var a=el(r),s=a.clientX,o=a.clientY,l=a.pageX,i=a.pageY,c=this.container(),d,u;if(!(r.which===3||r.button===2||!zz(c,s,o))){if(!this.globalMouse&&c&&!ei(c,r.target)){var m=Yz(0),f=m.top,x=m.left,b=m.bottom,y=m.right;if(u=ws(c),d=wE({top:u.top-f,left:u.left-x,bottom:u.bottom+b,right:u.right+y},{top:i,left:l}),!d)return}var v=this.emit("beforeSelect",this._initialEventData={isTouch:/^touch/.test(r.type),x:l,y:i,clientX:s,clientY:o});if(v!==!1)switch(r.type){case"mousedown":this._removeEndListener=Ht("mouseup",this._handleTerminatingEvent),this._onEscListener=Ht("keydown",this._handleTerminatingEvent),this._removeMoveListener=Ht("mousemove",this._handleMoveEvent);break;case"touchstart":this._handleMoveEvent(r),this._removeEndListener=Ht("touchend",this._handleTerminatingEvent),this._removeMoveListener=Ht("touchmove",this._handleMoveEvent);break}}}}},{key:"_isWithinValidContainer",value:function(r){var a=r.target,s=this.validContainers;return!s||!s.length||!a?!0:s.some(function(o){return!!a.closest(o)})}},{key:"_handleTerminatingEvent",value:function(r){var a=this.selecting,s=this._selectRect;if(!a&&r.type.includes("key")&&(r=this._initialEvent),this.selecting=!1,this._removeEndListener&&this._removeEndListener(),this._removeMoveListener&&this._removeMoveListener(),this._selectRect=null,this._initialEvent=null,this._initialEventData=null,!!r){var o=!this.container||ei(this.container(),r.target),l=this._isWithinValidContainer(r);return r.key==="Escape"||!l?this.emit("reset"):!a&&o?this._handleClickEvent(r):a?this.emit("select",s):this.emit("reset")}}},{key:"_handleClickEvent",value:function(r){var a=el(r),s=a.pageX,o=a.pageY,l=a.clientX,i=a.clientY,c=new Date().getTime();return this._lastClickData&&c-this._lastClickData.timestamp<Hz?(this._lastClickData=null,this.emit("doubleClick",{x:s,y:o,clientX:l,clientY:i})):(this._lastClickData={timestamp:c},this.emit("click",{x:s,y:o,clientX:l,clientY:i}))}},{key:"_handleMoveEvent",value:function(r){if(!(this._initialEventData===null||this.isDetached)){var a=this._initialEventData,s=a.x,o=a.y,l=el(r),i=l.pageX,c=l.pageY,d=Math.abs(s-i),u=Math.abs(o-c),m=Math.min(i,s),f=Math.min(c,o),x=this.selecting,b=this.isClick(i,c);b&&!x&&!(d||u)||(!x&&!b&&this.emit("selectStart",this._initialEventData),b||(this.selecting=!0,this._selectRect={top:f,left:m,x:i,y:c,right:m+d,bottom:f+u},this.emit("selecting",this._selectRect)),r.preventDefault())}}},{key:"_keyListener",value:function(r){this.ctrl=r.metaKey||r.ctrlKey}},{key:"isClick",value:function(r,a){var s=this._initialEventData,o=s.x,l=s.y,i=s.isTouch;return!i&&Math.abs(r-o)<=bE&&Math.abs(a-l)<=bE}}])}();function Yz(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return ra(e)!=="object"&&(e={top:e,left:e,right:e,bottom:e}),e}function wE(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=ws(e),s=a.top,o=a.left,l=a.right,i=l===void 0?o:l,c=a.bottom,d=c===void 0?s:c,u=ws(t),m=u.top,f=u.left,x=u.right,b=x===void 0?f:x,y=u.bottom,v=y===void 0?m:y;return!(d-r<m||s+r>v||i-r<f||o+r>b)}function ws(e){if(!e.getBoundingClientRect)return e;var t=e.getBoundingClientRect(),r=t.left+NE("left"),a=t.top+NE("top");return{top:a,left:r,right:(e.offsetWidth||0)+r,bottom:(e.offsetHeight||0)+a}}function NE(e){if(e==="left")return window.pageXOffset||document.body.scrollLeft||0;if(e==="top")return window.pageYOffset||document.body.scrollTop||0}var qz=function(e){function t(r,a){var s;return Dt(this,t),s=Xt(this,t,[r,a]),s.state={selecting:!1},s.containerRef=g.createRef(),s}return Qt(t,e),At(t,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable()}},{key:"componentDidUpdate",value:function(a){!a.selectable&&this.props.selectable&&this._selectable(),a.selectable&&!this.props.selectable&&this._teardownSelectable()}},{key:"render",value:function(){var a=this.props,s=a.range,o=a.getNow,l=a.getters,i=a.date,c=a.components.dateCellWrapper,d=a.localizer,u=this.state,m=u.selecting,f=u.startIdx,x=u.endIdx,b=o();return n.createElement("div",{className:"rbc-row-bg",ref:this.containerRef},s.map(function(y,v){var p=m&&v>=f&&v<=x,h=l.dayProp(y),E=h.className,w=h.style;return n.createElement(c,{key:v,value:y,range:s},n.createElement("div",{style:w,className:ht("rbc-day-bg",E,p&&"rbc-selected-cell",d.isSameDate(y,b)&&"rbc-today",i&&d.neq(i,y,"month")&&"rbc-off-range-bg")}))}))}},{key:"_selectable",value:function(){var a=this,s=this.containerRef.current,o=this._selector=new A1(this.props.container,{longPressThreshold:this.props.longPressThreshold}),l=function(c,d){if(!Au(s,c)&&!Wz(s,c)){var u=ws(s),m=a.props,f=m.range,x=m.rtl;if(Iz(u,c)){var b=k1(u,c.x,x,f.length);a._selectSlot({startIdx:b,endIdx:b,action:d,box:c})}}a._initial={},a.setState({selecting:!1})};o.on("selecting",function(i){var c=a.props,d=c.range,u=c.rtl,m=-1,f=-1;if(a.state.selecting||(at(a.props.onSelectStart,[i]),a._initial={x:i.x,y:i.y}),o.isSelected(s)){var x=ws(s),b=$z(a._initial,x,i,d.length,u);m=b.startIdx,f=b.endIdx}a.setState({selecting:!0,startIdx:m,endIdx:f})}),o.on("beforeSelect",function(i){if(a.props.selectable==="ignoreEvents")return!Au(a.containerRef.current,i)}),o.on("click",function(i){return l(i,"click")}),o.on("doubleClick",function(i){return l(i,"doubleClick")}),o.on("select",function(i){a._selectSlot(Je(Je({},a.state),{},{action:"select",bounds:i})),a._initial={},a.setState({selecting:!1}),at(a.props.onSelectEnd,[a.state])})}},{key:"_teardownSelectable",value:function(){this._selector&&(this._selector.teardown(),this._selector=null)}},{key:"_selectSlot",value:function(a){var s=a.endIdx,o=a.startIdx,l=a.action,i=a.bounds,c=a.box;s!==-1&&o!==-1&&this.props.onSelectSlot&&this.props.onSelectSlot({start:o,end:s,action:l,bounds:i,box:c,resourceId:this.props.resourceId})}}])}(n.Component),Mr={propTypes:{slotMetrics:ae.object.isRequired,selected:ae.object,isAllDay:ae.bool,accessors:ae.object.isRequired,localizer:ae.object.isRequired,components:ae.object.isRequired,getters:ae.object.isRequired,onSelect:ae.func,onDoubleClick:ae.func,onKeyPress:ae.func},defaultProps:{segments:[],selected:{}},renderEvent:function(t,r){var a=t.selected;t.isAllDay;var s=t.accessors,o=t.getters,l=t.onSelect,i=t.onDoubleClick,c=t.onKeyPress,d=t.localizer,u=t.slotMetrics,m=t.components,f=t.resizable,x=u.continuesPrior(r),b=u.continuesAfter(r);return n.createElement(S1,{event:r,getters:o,localizer:d,accessors:s,components:m,onSelect:l,onDoubleClick:i,onKeyPress:c,continuesPrior:x,continuesAfter:b,slotStart:u.first,slotEnd:u.last,selected:Ad(r,a),resizable:f})},renderSpan:function(t,r,a){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:" ",o=Math.abs(r)/t*100+"%";return n.createElement("div",{key:a,className:"rbc-row-segment",style:{WebkitFlexBasis:o,flexBasis:o,maxWidth:o}},s)}},T1=function(e){function t(){return Dt(this,t),Xt(this,t,arguments)}return Qt(t,e),At(t,[{key:"render",value:function(){var a=this,s=this.props,o=s.segments,l=s.slotMetrics.slots,i=s.className,c=1;return n.createElement("div",{className:ht(i,"rbc-row")},o.reduce(function(d,u,m){var f=u.event,x=u.left,b=u.right,y=u.span,v="_lvl_"+m,p=x-c,h=Mr.renderEvent(a.props,f);return p&&d.push(Mr.renderSpan(l,p,"".concat(v,"_gap"))),d.push(Mr.renderSpan(l,y,v,h)),c=b+1,d},[]))}}])}(n.Component);T1.defaultProps=Je({},Mr.defaultProps);function _1(e){var t=e.dateRange,r=e.unit,a=r===void 0?"day":r,s=e.localizer;return{first:t[0],last:s.add(t[t.length-1],1,a)}}function Gz(e,t,r,a){var s=_1({dateRange:t,localizer:a}),o=s.first,l=s.last,i=a.diff(o,l,"day"),c=a.max(a.startOf(r.start(e),"day"),o),d=a.min(a.ceil(r.end(e),"day"),l),u=J$(t,function(f){return a.isSameDate(f,c)}),m=a.diff(c,d,"day");return m=Math.min(m,i),m=Math.max(m-a.segmentOffset,1),{event:e,span:m,left:u+1,right:Math.max(u+m,1)}}function Ap(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1/0,r,a,s,o=[],l=[];for(r=0;r<e.length;r++){for(s=e[r],a=0;a<o.length&&Kz(s,o[a]);a++);a>=t?l.push(s):(o[a]||(o[a]=[])).push(s)}for(r=0;r<o.length;r++)o[r].sort(function(i,c){return i.left-c.left});return{levels:o,extra:l}}function ni(e,t,r,a,s){var o={start:a.start(e),end:a.end(e)},l={start:t,end:r};return s.inEventRange({event:o,range:l})}function Kz(e,t){return t.some(function(r){return r.left<=e.right&&r.right>=e.left})}function Xz(e,t,r){var a=Lc(e),s=[],o=[];a.forEach(function(c){var d=t.start(c),u=t.end(c);r.daySpan(d,u)>1?s.push(c):o.push(c)});var l=s.sort(function(c,d){return Tp(c,d,t,r)}),i=o.sort(function(c,d){return Tp(c,d,t,r)});return[].concat(Lc(l),Lc(i))}function Tp(e,t,r,a){var s={start:r.start(e),end:r.end(e),allDay:r.allDay(e)},o={start:r.start(t),end:r.end(t),allDay:r.allDay(t)};return a.sortEvents({evtA:s,evtB:o})}var _p=function(t,r){return t.left<=r&&t.right>=r},Gm=function(t,r){return t.filter(function(a){return _p(a,r)}).map(function(a){return a.event})},O1=function(e){function t(){return Dt(this,t),Xt(this,t,arguments)}return Qt(t,e),At(t,[{key:"render",value:function(){for(var a=this.props,s=a.segments,o=a.slotMetrics.slots,l=Ap(s).levels[0],i=1,c=1,d=[];i<=o;){var u="_lvl_"+i,m=l.filter(function(w){return _p(w,i)})[0]||{},f=m.event,x=m.left,b=m.right,y=m.span;if(!f){var v=this.getHiddenEventsForSlot(s,i);if(v.length>0){var p=i-c;p&&d.push(Mr.renderSpan(o,p,u+"_gap")),d.push(Mr.renderSpan(o,1,u,this.renderShowMore(s,i))),c=i=i+1;continue}i++;continue}var h=Math.max(0,x-c);if(this.canRenderSlotEvent(x,y)){var E=Mr.renderEvent(this.props,f);h&&d.push(Mr.renderSpan(o,h,u+"_gap")),d.push(Mr.renderSpan(o,y,u,E)),c=i=b+1}else h&&d.push(Mr.renderSpan(o,h,u+"_gap")),d.push(Mr.renderSpan(o,1,u,this.renderShowMore(s,i))),c=i=i+1}return n.createElement("div",{className:"rbc-row"},d)}},{key:"getHiddenEventsForSlot",value:function(a,s){var o=Gm(a,s),l=Ap(a).levels[0],i=l.filter(function(c){return _p(c,s)}).map(function(c){return c.event});return o.filter(function(c){return!i.some(function(d){return d===c})})}},{key:"canRenderSlotEvent",value:function(a,s){var o=this.props.segments;return u8(a,a+s).every(function(l){var i=Gm(o,l).length;return i===1})}},{key:"renderShowMore",value:function(a,s){var o=this,l=this.props,i=l.localizer,c=l.slotMetrics,d=l.components,u=c.getEventsForSlot(s),m=Gm(a,s),f=m.length;if(d!=null&&d.showMore){var x=d.showMore,b=c.getDateForSlot(s-1);return f?n.createElement(x,{localizer:i,slotDate:b,slot:s,count:f,events:u,remainingEvents:m}):!1}return f?n.createElement("button",{type:"button",key:"sm_"+s,className:ht("rbc-button-link","rbc-show-more"),onClick:function(v){return o.showMore(s,v)}},i.messages.showMore(f,m,u)):!1}},{key:"showMore",value:function(a,s){s.preventDefault(),s.stopPropagation(),this.props.onShowMore(a,s.target)}}])}(n.Component);O1.defaultProps=Je({},Mr.defaultProps);var Qz=function(t){var r=t.children;return n.createElement("div",{className:"rbc-row-content-scroll-container"},r)},Jz=function(t,r){return t.left<=r&&t.right>=r},Zz=function(t,r){return t[0].range===r[0].range&&t[0].events===r[0].events};function R1(){return a1(function(e){for(var t=e.range,r=e.events,a=e.maxRows,s=e.minRows,o=e.accessors,l=e.localizer,i=_1({dateRange:t,localizer:l}),c=i.first,d=i.last,u=r.map(function(y){return Gz(y,t,o,l)}),m=Ap(u,Math.max(a-1,1)),f=m.levels,x=m.extra,b=x.length>0?s-1:s;f.length<b;)f.push([]);return{first:c,last:d,levels:f,extra:x,range:t,slots:t.length,clone:function(v){var p=R1();return p(Je(Je({},e),v))},getDateForSlot:function(v){return t[v]},getSlotForDate:function(v){return t.find(function(p){return l.isSameDate(p,v)})},getEventsForSlot:function(v){return u.filter(function(p){return Jz(p,v)}).map(function(p){return p.event})},continuesPrior:function(v){return l.continuesPrior(o.start(v),c)},continuesAfter:function(v){var p=o.start(v),h=o.end(v);return l.continuesAfter(p,h,d)}}},Zz)}var ai=function(e){function t(){var r;Dt(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return r=Xt(this,t,[].concat(s)),r.handleSelectSlot=function(l){var i=r.props,c=i.range,d=i.onSelectSlot;d(c.slice(l.start,l.end+1),l)},r.handleShowMore=function(l,i){var c=r.props,d=c.range,u=c.onShowMore,m=r.slotMetrics(r.props),f=J_(r.containerRef.current,".rbc-row-bg")[0],x;f&&(x=f.children[l-1]);var b=m.getEventsForSlot(l);u(b,d[l-1],x,l,i)},r.getContainer=function(){var l=r.props.container;return l?l():r.containerRef.current},r.renderHeadingCell=function(l,i){var c=r.props,d=c.renderHeader,u=c.getNow,m=c.localizer;return d({date:l,key:"header_".concat(i),className:ht("rbc-date-cell",m.isSameDate(l,u())&&"rbc-now")})},r.renderDummy=function(){var l=r.props,i=l.className,c=l.range,d=l.renderHeader,u=l.showAllEvents;return n.createElement("div",{className:i,ref:r.containerRef},n.createElement("div",{className:ht("rbc-row-content",u&&"rbc-row-content-scrollable")},d&&n.createElement("div",{className:"rbc-row",ref:r.headingRowRef},c.map(r.renderHeadingCell)),n.createElement("div",{className:"rbc-row",ref:r.eventRowRef},n.createElement("div",{className:"rbc-row-segment"},n.createElement("div",{className:"rbc-event"},n.createElement("div",{className:"rbc-event-content"}," "))))))},r.containerRef=g.createRef(),r.headingRowRef=g.createRef(),r.eventRowRef=g.createRef(),r.slotMetrics=R1(),r}return Qt(t,e),At(t,[{key:"getRowLimit",value:function(){var a,s=Hm(this.eventRowRef.current),o=(a=this.headingRowRef)!==null&&a!==void 0&&a.current?Hm(this.headingRowRef.current):0,l=Hm(this.containerRef.current)-o;return Math.max(Math.floor(l/s),1)}},{key:"render",value:function(){var a=this.props,s=a.date,o=a.rtl,l=a.range,i=a.className,c=a.selected,d=a.selectable,u=a.renderForMeasure,m=a.accessors,f=a.getters,x=a.components,b=a.getNow,y=a.renderHeader,v=a.onSelect,p=a.localizer,h=a.onSelectStart,E=a.onSelectEnd,w=a.onDoubleClick,N=a.onKeyPress,S=a.resourceId,C=a.longPressThreshold,D=a.isAllDay,k=a.resizable,O=a.showAllEvents;if(u)return this.renderDummy();var A=this.slotMetrics(this.props),$=A.levels,P=A.extra,I=O?Qz:bn,L=x.weekWrapper,F={selected:c,accessors:m,getters:f,localizer:p,components:x,onSelect:v,onDoubleClick:w,onKeyPress:N,resourceId:S,slotMetrics:A,resizable:k};return n.createElement("div",{className:i,role:"rowgroup",ref:this.containerRef},n.createElement(qz,{localizer:p,date:s,getNow:b,rtl:o,range:l,selectable:d,container:this.getContainer,getters:f,onSelectStart:h,onSelectEnd:E,onSelectSlot:this.handleSelectSlot,components:x,longPressThreshold:C,resourceId:S}),n.createElement("div",{className:ht("rbc-row-content",O&&"rbc-row-content-scrollable"),role:"row"},y&&n.createElement("div",{className:"rbc-row ",ref:this.headingRowRef},l.map(this.renderHeadingCell)),n.createElement(I,null,n.createElement(L,Object.assign({isAllDay:D},F,{rtl:this.props.rtl}),$.map(function(T,M){return n.createElement(T1,Object.assign({key:M,segments:T},F))}),!!P.length&&n.createElement(O1,Object.assign({segments:P,onShowMore:this.handleShowMore},F))))))}}])}(n.Component);ai.defaultProps={minRows:0,maxRows:1/0};var Ph=function(t){var r=t.label;return n.createElement("span",{role:"columnheader","aria-sort":"none"},r)},eU=function(t){var r=t.label,a=t.drilldownView,s=t.onDrillDown;return a?n.createElement("button",{type:"button",className:"rbc-button-link",onClick:s},r):n.createElement("span",null,r)},tU=["date","className"],rU=function(t,r,a,s,o){return t.filter(function(l){return ni(l,r,a,s,o)})},Td=function(e){function t(){var r;Dt(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return r=Xt(this,t,[].concat(s)),r.getContainer=function(){return r.containerRef.current},r.renderWeek=function(l,i){var c=r.props,d=c.events,u=c.components,m=c.selectable,f=c.getNow,x=c.selected,b=c.date,y=c.localizer,v=c.longPressThreshold,p=c.accessors,h=c.getters,E=c.showAllEvents,w=r.state,N=w.needLimitMeasure,S=w.rowLimit,C=rU(Lc(d),l[0],l[l.length-1],p,y),D=Xz(C,p,y);return n.createElement(ai,{key:i,ref:i===0?r.slotRowRef:void 0,container:r.getContainer,className:"rbc-month-row",getNow:f,date:b,range:l,events:D,maxRows:E?1/0:S,selected:x,selectable:m,components:u,accessors:p,getters:h,localizer:y,renderHeader:r.readerDateHeading,renderForMeasure:N,onShowMore:r.handleShowMore,onSelect:r.handleSelectEvent,onDoubleClick:r.handleDoubleClickEvent,onKeyPress:r.handleKeyPressEvent,onSelectSlot:r.handleSelectSlot,longPressThreshold:v,rtl:r.props.rtl,resizable:r.props.resizable,showAllEvents:E})},r.readerDateHeading=function(l){var i=l.date,c=l.className,d=On(l,tU),u=r.props,m=u.date,f=u.getDrilldownView,x=u.localizer,b=x.neq(m,i,"month"),y=x.isSameDate(i,m),v=f(i),p=x.format(i,"dateFormat"),h=r.props.components.dateHeader||eU;return n.createElement("div",Object.assign({},d,{className:ht(c,b&&"rbc-off-range",y&&"rbc-current"),role:"cell"}),n.createElement(h,{label:p,date:i,drilldownView:v,isOffRange:b,onDrillDown:function(w){return r.handleHeadingClick(i,v,w)}}))},r.handleSelectSlot=function(l,i){r._pendingSelection=r._pendingSelection.concat(l),clearTimeout(r._selectTimer),r._selectTimer=setTimeout(function(){return r.selectDates(i)})},r.handleHeadingClick=function(l,i,c){c.preventDefault(),r.clearSelection(),at(r.props.onDrillDown,[l,i])},r.handleSelectEvent=function(){r.clearSelection();for(var l=arguments.length,i=new Array(l),c=0;c<l;c++)i[c]=arguments[c];at(r.props.onSelectEvent,i)},r.handleDoubleClickEvent=function(){r.clearSelection();for(var l=arguments.length,i=new Array(l),c=0;c<l;c++)i[c]=arguments[c];at(r.props.onDoubleClickEvent,i)},r.handleKeyPressEvent=function(){r.clearSelection();for(var l=arguments.length,i=new Array(l),c=0;c<l;c++)i[c]=arguments[c];at(r.props.onKeyPressEvent,i)},r.handleShowMore=function(l,i,c,d,u){var m=r.props,f=m.popup,x=m.onDrillDown,b=m.onShowMore,y=m.getDrilldownView,v=m.doShowMoreDrillDown;if(r.clearSelection(),f){var p=RN(c,r.containerRef.current);r.setState({overlay:{date:i,events:l,position:p,target:u}})}else v&&at(x,[i,y(i)||nr.DAY]);at(b,[l,i,d])},r.overlayDisplay=function(){r.setState({overlay:null})},r.state={rowLimit:5,needLimitMeasure:!0,date:null},r.containerRef=g.createRef(),r.slotRowRef=g.createRef(),r._bgRows=[],r._pendingSelection=[],r}return Qt(t,e),At(t,[{key:"componentDidMount",value:function(){var a=this,s;this.state.needLimitMeasure&&this.measureRowLimit(this.props),window.addEventListener("resize",this._resizeListener=function(){s||MN(function(){s=!1,a.setState({needLimitMeasure:!0})})},!1)}},{key:"componentDidUpdate",value:function(){this.state.needLimitMeasure&&this.measureRowLimit(this.props)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._resizeListener,!1)}},{key:"render",value:function(){var a=this.props,s=a.date,o=a.localizer,l=a.className,i=o.visibleDays(s,o),c=I_(i,7);return this._weekCount=c.length,n.createElement("div",{className:ht("rbc-month-view",l),role:"table","aria-label":"Month View",ref:this.containerRef},n.createElement("div",{className:"rbc-row rbc-month-header",role:"row"},this.renderHeaders(c[0])),c.map(this.renderWeek),this.props.popup&&this.renderOverlay())}},{key:"renderHeaders",value:function(a){var s=this.props,o=s.localizer,l=s.components,i=a[0],c=a[a.length-1],d=l.header||Ph;return o.range(i,c,"day").map(function(u,m){return n.createElement("div",{key:"header_"+m,className:"rbc-header"},n.createElement(d,{date:u,localizer:o,label:o.format(u,"weekdayFormat")}))})}},{key:"renderOverlay",value:function(){var a,s,o=this,l=(a=(s=this.state)===null||s===void 0?void 0:s.overlay)!==null&&a!==void 0?a:{},i=this.props,c=i.accessors,d=i.localizer,u=i.components,m=i.getters,f=i.selected,x=i.popupOffset,b=i.handleDragStart,y=function(){return o.setState({overlay:null})};return n.createElement(Mh,{overlay:l,accessors:c,localizer:d,components:u,getters:m,selected:f,popupOffset:x,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:b,show:!!l.position,overlayDisplay:this.overlayDisplay,onHide:y})}},{key:"measureRowLimit",value:function(){this.setState({needLimitMeasure:!1,rowLimit:this.slotRowRef.current.getRowLimit()})}},{key:"selectDates",value:function(a){var s=this._pendingSelection.slice();this._pendingSelection=[],s.sort(function(i,c){return+i-+c});var o=new Date(s[0]),l=new Date(s[s.length-1]);l.setDate(s[s.length-1].getDate()+1),at(this.props.onSelectSlot,{slots:s,start:o,end:l,action:a.action,bounds:a.bounds,box:a.box})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}}],[{key:"getDerivedStateFromProps",value:function(a,s){var o=a.date,l=a.localizer;return{date:o,needLimitMeasure:l.neq(o,s.date,"month")}}}])}(n.Component);Td.range=function(e,t){var r=t.localizer,a=r.firstVisibleDay(e,r),s=r.lastVisibleDay(e,r);return{start:a,end:s}};Td.navigate=function(e,t,r){var a=r.localizer;switch(t){case Er.PREVIOUS:return a.add(e,-1,"month");case Er.NEXT:return a.add(e,1,"month");default:return e}};Td.title=function(e,t){var r=t.localizer;return r.format(e,"monthHeaderFormat")};var SE=function(t){var r=t.min,a=t.max,s=t.step,o=t.slots,l=t.localizer;return"".concat(+l.startOf(r,"minutes"))+"".concat(+l.startOf(a,"minutes"))+"".concat(s,"-").concat(o)};function Lh(e){for(var t=e.min,r=e.max,a=e.step,s=e.timeslots,o=e.localizer,l=SE({step:a,localizer:o}),i=1+o.getTotalMin(t,r),c=o.getMinutesFromMidnight(t),d=Math.ceil((i-1)/(a*s)),u=d*s,m=new Array(d),f=new Array(u),x=0;x<d;x++){m[x]=new Array(s);for(var b=0;b<s;b++){var y=x*s+b,v=y*a;f[y]=m[x][b]=o.getSlotDate(t,c,v)}}var p=f.length*a;f.push(o.getSlotDate(t,c,p));function h(E){var w=o.diff(t,E,"minutes")+o.getDstOffset(t,E);return Math.min(w,i)}return{groups:m,update:function(w){return SE(w)!==l?Lh(w):this},dateIsInGroup:function(w,N){var S=m[N+1];return o.inRange(w,m[N][0],S?S[0]:r,"minutes")},nextSlot:function(w){var N=f[Math.min(f.findIndex(function(S){return S===w||o.eq(S,w)})+1,f.length-1)];return o.eq(N,w)&&(N=o.add(w,a,"minutes")),N},closestSlotToPosition:function(w){var N=Math.min(f.length-1,Math.max(0,Math.floor(w*u)));return f[N]},closestSlotFromPoint:function(w,N){var S=Math.abs(N.top-N.bottom);return this.closestSlotToPosition((w.y-N.top)/S)},closestSlotFromDate:function(w){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(o.lt(w,t,"minutes"))return f[0];if(o.gt(w,r,"minutes"))return f[f.length-1];var S=o.diff(t,w,"minutes");return f[(S-S%a)/a+N]},startsBeforeDay:function(w){return o.lt(w,t,"day")},startsAfterDay:function(w){return o.gt(w,r,"day")},startsBefore:function(w){return o.lt(o.merge(t,w),t,"minutes")},startsAfter:function(w){return o.gt(o.merge(r,w),r,"minutes")},getRange:function(w,N,S,C){S||(w=o.min(r,o.max(t,w))),C||(N=o.min(r,o.max(t,N)));var D=h(w),k=h(N),O=k>a*u&&!o.eq(r,N)?(D-a)/(a*u)*100:D/(a*u)*100;return{top:O,height:k/(a*u)*100-O,start:h(w),startDate:w,end:h(N),endDate:N}},getCurrentTimePosition:function(w){var N=h(w),S=N/(a*u)*100;return S}}}var nU=function(){function e(t,r){var a=r.accessors,s=r.slotMetrics;Dt(this,e);var o=s.getRange(a.start(t),a.end(t)),l=o.start,i=o.startDate,c=o.end,d=o.endDate,u=o.top,m=o.height;this.start=l,this.end=c,this.startMs=+i,this.endMs=+d,this.top=u,this.height=m,this.data=t}return At(e,[{key:"_width",get:function(){if(this.rows){var r=this.rows.reduce(function(s,o){return Math.max(s,o.leaves.length+1)},0)+1;return 100/r}if(this.leaves){var a=100-this.container._width;return a/(this.leaves.length+1)}return this.row._width}},{key:"width",get:function(){var r=this._width,a=Math.min(100,this._width*1.7);if(this.rows)return a;if(this.leaves)return this.leaves.length>0?a:r;var s=this.row.leaves,o=s.indexOf(this);return o===s.length-1?r:a}},{key:"xOffset",get:function(){if(this.rows)return 0;if(this.leaves)return this.container._width;var r=this.row,a=r.leaves,s=r.xOffset,o=r._width,l=a.indexOf(this)+1;return s+l*o}}])}();function aU(e,t,r){return Math.abs(t.start-e.start)<r||t.start>e.start&&t.start<e.end}function sU(e){for(var t=_F(e,["startMs",function(i){return-i.endMs}]),r=[];t.length>0;){var a=t.shift();r.push(a);for(var s=0;s<t.length;s++){var o=t[s];if(!(a.endMs>o.startMs)){if(s>0){var l=t.splice(s,1)[0];r.push(l)}break}}}return r}function M1(e){for(var t=e.events,r=e.minimumStartDifference,a=e.slotMetrics,s=e.accessors,o=t.map(function(u){return new nU(u,{slotMetrics:a,accessors:s})}),l=sU(o),i=[],c=function(){var m=l[d],f=i.find(function(y){return y.end>m.start||Math.abs(m.start-y.start)<r});if(!f)return m.rows=[],i.push(m),1;m.container=f;for(var x=null,b=f.rows.length-1;!x&&b>=0;b--)aU(f.rows[b],m,r)&&(x=f.rows[b]);x?(x.leaves.push(m),m.row=x):(m.leaves=[],f.rows.push(m))},d=0;d<l.length;d++)c();return l.map(function(u){return{event:u.data,style:{top:u.top,height:u.height,width:u.width,xOffset:Math.max(0,u.xOffset)}}})}function P1(e,t,r){for(var a=0;a<e.friends.length;++a)if(!(r.indexOf(e.friends[a])>-1)){t=t>e.friends[a].idx?t:e.friends[a].idx,r.push(e.friends[a]);var s=P1(e.friends[a],t,r);t=t>s?t:s}return t}function oU(e){var t=e.events,r=e.minimumStartDifference,a=e.slotMetrics,s=e.accessors,o=M1({events:t,minimumStartDifference:r,slotMetrics:a,accessors:s});o.sort(function(L,F){return L=L.style,F=F.style,L.top!==F.top?L.top>F.top?1:-1:L.height!==F.height?L.top+L.height<F.top+F.height?1:-1:0});for(var l=0;l<o.length;++l)o[l].friends=[],delete o[l].style.left,delete o[l].style.left,delete o[l].idx,delete o[l].size;for(var i=0;i<o.length-1;++i)for(var c=o[i],d=c.style.top,u=c.style.top+c.style.height,m=i+1;m<o.length;++m){var f=o[m],x=f.style.top,b=f.style.top+f.style.height;(x>=d&&b<=u||b>d&&b<=u||x>=d&&x<u)&&(c.friends.push(f),f.friends.push(c))}for(var y=0;y<o.length;++y){for(var v=o[y],p=[],h=0;h<100;++h)p.push(1);for(var E=0;E<v.friends.length;++E)v.friends[E].idx!==void 0&&(p[v.friends[E].idx]=0);v.idx=p.indexOf(1)}for(var w=0;w<o.length;++w){var N=0;if(!o[w].size){var S=[],C=P1(o[w],0,S);N=100/(C+1),o[w].size=N;for(var D=0;D<S.length;++D)S[D].size=N}}for(var k=0;k<o.length;++k){var O=o[k];O.style.left=O.idx*O.size;for(var A=0,$=0;$<O.friends.length;++$){var P=O.friends[$].idx;A=A>P?A:P}A<=O.idx&&(O.size=100-O.idx*O.size);var I=O.idx===0?0:3;O.style.width="calc(".concat(O.size,"% - ").concat(I,"px)"),O.style.height="calc(".concat(O.style.height,"% - 2px)"),O.style.xOffset="calc(".concat(O.style.left,"% + ").concat(I,"px)")}return o}var CE={overlap:M1,"no-overlap":oU};function lU(e){return!!(e&&e.constructor&&e.call&&e.apply)}function iU(e){e.events,e.minimumStartDifference,e.slotMetrics,e.accessors;var t=e.dayLayoutAlgorithm,r=t;return t in CE&&(r=CE[t]),lU(r)?r.apply(this,arguments):[]}var L1=function(e){function t(){return Dt(this,t),Xt(this,t,arguments)}return Qt(t,e),At(t,[{key:"render",value:function(){var a=this.props,s=a.renderSlot,o=a.resource,l=a.group,i=a.getters,c=a.components,d=c===void 0?{}:c,u=d.timeSlotWrapper,m=u===void 0?bn:u,f=i?i.slotGroupProp(l):{};return n.createElement("div",Object.assign({className:"rbc-timeslot-group"},f),l.map(function(x,b){var y=i?i.slotProp(x,o):{};return n.createElement(m,{key:b,value:x,resource:o},n.createElement("div",Object.assign({},y,{className:ht("rbc-time-slot",y.className)}),s&&s(x,b)))}))}}])}(g.Component);function ic(e){return typeof e=="string"?e:e+"%"}function cU(e){var t=e.style,r=e.className,a=e.event,s=e.accessors,o=e.rtl,l=e.selected,i=e.label,c=e.continuesPrior,d=e.continuesAfter,u=e.getters,m=e.onClick,f=e.onDoubleClick,x=e.isBackgroundEvent,b=e.onKeyPress,y=e.components,v=y.event,p=y.eventWrapper,h=s.title(a),E=s.tooltip(a),w=s.end(a),N=s.start(a),S=u.eventProp(a,N,w,l),C=[n.createElement("div",{key:"1",className:"rbc-event-label"},i),n.createElement("div",{key:"2",className:"rbc-event-content"},v?n.createElement(v,{event:a,title:h}):h)],D=t.height,k=t.top,O=t.width,A=t.xOffset,$=Je(Je({},S.style),{},Qa({top:ic(k),height:ic(D),width:ic(O)},o?"right":"left",ic(A)));return n.createElement(p,Object.assign({type:"time"},e),n.createElement("div",{role:"button",tabIndex:0,onClick:m,onDoubleClick:f,style:$,onKeyDown:b,title:E?(typeof i=="string"?i+": ":"")+E:void 0,className:ht(x?"rbc-background-event":"rbc-event",r,S.className,{"rbc-selected":l,"rbc-event-continues-earlier":c,"rbc-event-continues-later":d})},C))}var uU=function(t){var r=t.children,a=t.className,s=t.style,o=t.innerRef;return n.createElement("div",{className:a,style:s,ref:o},r)},dU=n.forwardRef(function(e,t){return n.createElement(uU,Object.assign({},e,{innerRef:t}))}),mU=["dayProp"],fU=["eventContainerWrapper","timeIndicatorWrapper"],I1=function(e){function t(){var r;Dt(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return r=Xt(this,t,[].concat(s)),r.state={selecting:!1,timeIndicatorPosition:null},r.intervalTriggered=!1,r.renderEvents=function(l){var i=l.events,c=l.isBackgroundEvent,d=r.props,u=d.rtl,m=d.selected,f=d.accessors,x=d.localizer,b=d.getters,y=d.components,v=d.step,p=d.timeslots,h=d.dayLayoutAlgorithm,E=d.resizable,w=r,N=w.slotMetrics,S=x.messages,C=iU({events:i,accessors:f,slotMetrics:N,minimumStartDifference:Math.ceil(v*p/2),dayLayoutAlgorithm:h});return C.map(function(D,k){var O,A=D.event,$=D.style,P=f.end(A),I=f.start(A),L=(O=f.eventId(A))!==null&&O!==void 0?O:"evt_"+k,F="eventTimeRangeFormat",T,M=N.startsBeforeDay(I),V=N.startsAfterDay(P);M?F="eventTimeRangeEndFormat":V&&(F="eventTimeRangeStartFormat"),M&&V?T=S.allDay:T=x.format({start:I,end:P},F);var X=M||N.startsBefore(I),z=V||N.startsAfter(P);return n.createElement(cU,{style:$,event:A,label:T,key:L,getters:b,rtl:u,components:y,continuesPrior:X,continuesAfter:z,accessors:f,resource:r.props.resource,selected:Ad(A,m),onClick:function(Y){return r._select(Je(Je(Je({},A),r.props.resource&&{sourceResource:r.props.resource}),c&&{isBackgroundEvent:!0}),Y)},onDoubleClick:function(Y){return r._doubleClick(A,Y)},isBackgroundEvent:c,onKeyPress:function(Y){return r._keyPress(A,Y)},resizable:E})})},r._selectable=function(){var l=r.containerRef.current,i=r.props,c=i.longPressThreshold,d=i.localizer,u=r._selector=new A1(function(){return l},{longPressThreshold:c}),m=function(y){var v=r.props.onSelecting,p=r.state||{},h=f(y),E=h.startDate,w=h.endDate;v&&(d.eq(p.startDate,E,"minutes")&&d.eq(p.endDate,w,"minutes")||v({start:E,end:w,resourceId:r.props.resource})===!1)||(r.state.start!==h.start||r.state.end!==h.end||r.state.selecting!==h.selecting)&&r.setState(h)},f=function(y){var v=r.slotMetrics.closestSlotFromPoint(y,ws(l));r.state.selecting||(r._initialSlot=v);var p=r._initialSlot;d.lte(p,v)?v=r.slotMetrics.nextSlot(v):d.gt(p,v)&&(p=r.slotMetrics.nextSlot(p));var h=r.slotMetrics.getRange(d.min(p,v),d.max(p,v));return Je(Je({},h),{},{selecting:!0,top:"".concat(h.top,"%"),height:"".concat(h.height,"%")})},x=function(y,v){if(!Au(r.containerRef.current,y)){var p=f(y),h=p.startDate,E=p.endDate;r._selectSlot({startDate:h,endDate:E,action:v,box:y})}r.setState({selecting:!1})};u.on("selecting",m),u.on("selectStart",m),u.on("beforeSelect",function(b){if(r.props.selectable==="ignoreEvents")return!Au(r.containerRef.current,b)}),u.on("click",function(b){return x(b,"click")}),u.on("doubleClick",function(b){return x(b,"doubleClick")}),u.on("select",function(b){r.state.selecting&&(r._selectSlot(Je(Je({},r.state),{},{action:"select",bounds:b})),r.setState({selecting:!1}))}),u.on("reset",function(){r.state.selecting&&r.setState({selecting:!1})})},r._teardownSelectable=function(){r._selector&&(r._selector.teardown(),r._selector=null)},r._selectSlot=function(l){for(var i=l.startDate,c=l.endDate,d=l.action,u=l.bounds,m=l.box,f=i,x=[];r.props.localizer.lte(f,c);)x.push(f),f=new Date(+f+r.props.step*60*1e3);at(r.props.onSelectSlot,{slots:x,start:i,end:c,resourceId:r.props.resource,action:d,bounds:u,box:m})},r._select=function(){for(var l=arguments.length,i=new Array(l),c=0;c<l;c++)i[c]=arguments[c];at(r.props.onSelectEvent,i)},r._doubleClick=function(){for(var l=arguments.length,i=new Array(l),c=0;c<l;c++)i[c]=arguments[c];at(r.props.onDoubleClickEvent,i)},r._keyPress=function(){for(var l=arguments.length,i=new Array(l),c=0;c<l;c++)i[c]=arguments[c];at(r.props.onKeyPressEvent,i)},r.slotMetrics=Lh(r.props),r.containerRef=g.createRef(),r}return Qt(t,e),At(t,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable(),this.props.isNow&&this.setTimeIndicatorPositionUpdateInterval()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable(),this.clearTimeIndicatorInterval()}},{key:"componentDidUpdate",value:function(a,s){this.props.selectable&&!a.selectable&&this._selectable(),!this.props.selectable&&a.selectable&&this._teardownSelectable();var o=this.props,l=o.getNow,i=o.isNow,c=o.localizer,d=o.date,u=o.min,m=o.max,f=c.neq(a.getNow(),l(),"minutes");if(a.isNow!==i||f){if(this.clearTimeIndicatorInterval(),i){var x=!f&&c.eq(a.date,d,"minutes")&&s.timeIndicatorPosition===this.state.timeIndicatorPosition;this.setTimeIndicatorPositionUpdateInterval(x)}}else i&&(c.neq(a.min,u,"minutes")||c.neq(a.max,m,"minutes"))&&this.positionTimeIndicator()}},{key:"setTimeIndicatorPositionUpdateInterval",value:function(){var a=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;!this.intervalTriggered&&!s&&this.positionTimeIndicator(),this._timeIndicatorTimeout=window.setTimeout(function(){a.intervalTriggered=!0,a.positionTimeIndicator(),a.setTimeIndicatorPositionUpdateInterval()},6e4)}},{key:"clearTimeIndicatorInterval",value:function(){this.intervalTriggered=!1,window.clearTimeout(this._timeIndicatorTimeout)}},{key:"positionTimeIndicator",value:function(){var a=this.props,s=a.min,o=a.max,l=a.getNow,i=l();if(i>=s&&i<=o){var c=this.slotMetrics.getCurrentTimePosition(i);this.intervalTriggered=!0,this.setState({timeIndicatorPosition:c})}else this.clearTimeIndicatorInterval()}},{key:"render",value:function(){var a=this.props,s=a.date,o=a.max,l=a.rtl,i=a.isNow,c=a.resource,d=a.accessors,u=a.localizer,m=a.getters,f=m.dayProp,x=On(m,mU),b=a.components,y=b.eventContainerWrapper,v=b.timeIndicatorWrapper,p=On(b,fU);this.slotMetrics=this.slotMetrics.update(this.props);var h=this.slotMetrics,E=this.state,w=E.selecting,N=E.top,S=E.height,C=E.startDate,D=E.endDate,k={start:C,end:D},O=f(o,c),A=O.className,$=O.style,P={className:"rbc-current-time-indicator",style:{top:"".concat(this.state.timeIndicatorPosition,"%")}},I=p.dayColumnWrapper||dU;return n.createElement(I,{ref:this.containerRef,date:s,style:$,className:ht(A,"rbc-day-slot","rbc-time-column",i&&"rbc-now",i&&"rbc-today",w&&"rbc-slot-selecting"),slotMetrics:h,resource:c},h.groups.map(function(L,F){return n.createElement(L1,{key:F,group:L,resource:c,getters:x,components:p})}),n.createElement(y,{localizer:u,resource:c,accessors:d,getters:x,components:p,slotMetrics:h},n.createElement("div",{className:ht("rbc-events-container",l&&"rtl")},this.renderEvents({events:this.props.backgroundEvents,isBackgroundEvent:!0}),this.renderEvents({events:this.props.events}))),w&&n.createElement("div",{className:"rbc-slot-selection",style:{top:N,height:S}},n.createElement("span",null,u.format(k,"selectRangeFormat"))),i&&this.intervalTriggered&&n.createElement(v,P,n.createElement("div",P)))}}])}(n.Component);I1.defaultProps={dragThroughEvents:!0,timeslots:2};var $1=function(t){var r=t.label;return n.createElement(n.Fragment,null,r)},pU=function(e){function t(){var r;Dt(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return r=Xt(this,t,[].concat(s)),r.handleHeaderClick=function(l,i,c){c.preventDefault(),at(r.props.onDrillDown,[l,i])},r.renderRow=function(l){var i=r.props,c=i.events,d=i.rtl,u=i.selectable,m=i.getNow,f=i.range,x=i.getters,b=i.localizer,y=i.accessors,v=i.components,p=i.resizable,h=y.resourceId(l),E=l?c.filter(function(w){return y.resource(w)===h}):c;return n.createElement(ai,{isAllDay:!0,rtl:d,getNow:m,minRows:2,maxRows:r.props.allDayMaxRows+1,range:f,events:E,resourceId:h,className:"rbc-allday-cell",selectable:u,selected:r.props.selected,components:v,accessors:y,getters:x,localizer:b,onSelect:r.props.onSelectEvent,onShowMore:r.props.onShowMore,onDoubleClick:r.props.onDoubleClickEvent,onKeyPress:r.props.onKeyPressEvent,onSelectSlot:r.props.onSelectSlot,longPressThreshold:r.props.longPressThreshold,resizable:p})},r}return Qt(t,e),At(t,[{key:"renderHeaderCells",value:function(a){var s=this,o=this.props,l=o.localizer,i=o.getDrilldownView,c=o.getNow,d=o.getters.dayProp,u=o.components.header,m=u===void 0?Ph:u,f=c();return a.map(function(x,b){var y=i(x),v=l.format(x,"dayFormat"),p=d(x),h=p.className,E=p.style,w=n.createElement(m,{date:x,label:v,localizer:l});return n.createElement("div",{key:b,style:E,className:ht("rbc-header",h,l.isSameDate(x,f)&&"rbc-today")},y?n.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(S){return s.handleHeaderClick(x,y,S)}},w):n.createElement("span",null,w))})}},{key:"render",value:function(){var a=this,s=this.props,o=s.width,l=s.rtl,i=s.resources,c=s.range,d=s.events,u=s.getNow,m=s.accessors,f=s.selectable,x=s.components,b=s.getters,y=s.scrollRef,v=s.localizer,p=s.isOverflowing,h=s.components,E=h.timeGutterHeader,w=h.resourceHeader,N=w===void 0?$1:w,S=s.resizable,C={};p&&(C[l?"marginLeft":"marginRight"]="".concat(fh()-1,"px"));var D=i.groupEvents(d);return n.createElement("div",{style:C,ref:y,className:ht("rbc-time-header",p&&"rbc-overflowing")},n.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:o,minWidth:o,maxWidth:o}},E&&n.createElement(E,null)),i.map(function(k,O){var A=jr(k,2),$=A[0],P=A[1];return n.createElement("div",{className:"rbc-time-header-content",key:$||O},P&&n.createElement("div",{className:"rbc-row rbc-row-resource",key:"resource_".concat(O)},n.createElement("div",{className:"rbc-header"},n.createElement(N,{index:O,label:m.resourceTitle(P),resource:P}))),n.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(c.length<=1?" rbc-time-header-cell-single-day":"")},a.renderHeaderCells(c)),n.createElement(ai,{isAllDay:!0,rtl:l,getNow:u,minRows:2,maxRows:a.props.allDayMaxRows+1,range:c,events:D.get($)||[],resourceId:P&&$,className:"rbc-allday-cell",selectable:f,selected:a.props.selected,components:x,accessors:m,getters:b,localizer:v,onSelect:a.props.onSelectEvent,onShowMore:a.props.onShowMore,onDoubleClick:a.props.onDoubleClickEvent,onKeyDown:a.props.onKeyPressEvent,onSelectSlot:a.props.onSelectSlot,longPressThreshold:a.props.longPressThreshold,resizable:S}))}))}}])}(n.Component),gU=function(e){function t(){var r;Dt(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return r=Xt(this,t,[].concat(s)),r.handleHeaderClick=function(l,i,c){c.preventDefault(),at(r.props.onDrillDown,[l,i])},r}return Qt(t,e),At(t,[{key:"renderHeaderCells",value:function(a){var s=this,o=this.props,l=o.localizer,i=o.getDrilldownView,c=o.getNow,d=o.getters.dayProp,u=o.components,m=u.header,f=m===void 0?Ph:m,x=u.resourceHeader,b=x===void 0?$1:x,y=o.resources,v=o.accessors,p=o.events,h=o.rtl,E=o.selectable,w=o.components,N=o.getters,S=o.resizable,C=c(),D=y.groupEvents(p);return a.map(function(k,O){var A=i(k),$=l.format(k,"dayFormat"),P=d(k),I=P.className,L=P.style,F=n.createElement(f,{date:k,label:$,localizer:l});return n.createElement("div",{key:O,className:"rbc-time-header-content rbc-resource-grouping"},n.createElement("div",{className:"rbc-row rbc-time-header-cell".concat(a.length<=1?" rbc-time-header-cell-single-day":"")},n.createElement("div",{style:L,className:ht("rbc-header",I,l.isSameDate(k,C)&&"rbc-today")},A?n.createElement("button",{type:"button",className:"rbc-button-link",onClick:function(M){return s.handleHeaderClick(k,A,M)}},F):n.createElement("span",null,F))),n.createElement("div",{className:"rbc-row"},y.map(function(T,M){var V=jr(T,2),X=V[0],z=V[1];return n.createElement("div",{key:"resource_".concat(X,"_").concat(M),className:ht("rbc-header",I,l.isSameDate(k,C)&&"rbc-today")},n.createElement(b,{index:M,label:v.resourceTitle(z),resource:z}))})),n.createElement("div",{className:"rbc-row rbc-m-b-negative-3 rbc-h-full"},y.map(function(T,M){var V=jr(T,2),X=V[0],z=V[1],U=(D.get(X)||[]).filter(function(Y){return l.isSameDate(Y.start,k)||l.isSameDate(Y.end,k)});return n.createElement(ai,{key:"resource_".concat(X,"_").concat(M),isAllDay:!0,rtl:h,getNow:c,minRows:2,maxRows:s.props.allDayMaxRows+1,range:[k],events:U,resourceId:z&&X,className:"rbc-allday-cell",selectable:E,selected:s.props.selected,components:w,accessors:v,getters:N,localizer:l,onSelect:s.props.onSelectEvent,onShowMore:s.props.onShowMore,onDoubleClick:s.props.onDoubleClickEvent,onKeyDown:s.props.onKeyPressEvent,onSelectSlot:s.props.onSelectSlot,longPressThreshold:s.props.longPressThreshold,resizable:S})})))})}},{key:"render",value:function(){var a=this.props,s=a.width,o=a.rtl,l=a.range,i=a.scrollRef,c=a.isOverflowing,d=a.components.timeGutterHeader,u={};return c&&(u[o?"marginLeft":"marginRight"]="".concat(fh()-1,"px")),n.createElement("div",{style:u,ref:i,className:ht("rbc-time-header",c&&"rbc-overflowing")},n.createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:s,minWidth:s,maxWidth:s}},d&&n.createElement(d,null)),this.renderHeaderCells(l))}}])}(n.Component);function hU(e){var t=e.min,r=e.max,a=e.localizer;return a.getTimezoneOffset(t)!==a.getTimezoneOffset(r)?{start:a.add(t,-1,"day"),end:a.add(r,-1,"day")}:{start:t,end:r}}var vU=function(t){var r=t.min,a=t.max,s=t.timeslots,o=t.step,l=t.localizer,i=t.getNow,c=t.resource,d=t.components,u=t.getters,m=t.gutterRef,f=d.timeGutterWrapper,x=g.useMemo(function(){return hU({min:r,max:a,localizer:l})},[r==null?void 0:r.toISOString(),a==null?void 0:a.toISOString(),l]),b=x.start,y=x.end,v=g.useState(Lh({min:b,max:y,timeslots:s,step:o,localizer:l})),p=jr(v,2),h=p[0],E=p[1];g.useEffect(function(){h&&E(h.update({min:b,max:y,timeslots:s,step:o,localizer:l}))},[b==null?void 0:b.toISOString(),y==null?void 0:y.toISOString(),s,o]);var w=g.useCallback(function(N,S){if(S)return null;var C=h.dateIsInGroup(i(),S);return n.createElement("span",{className:ht("rbc-label",C&&"rbc-now")},l.format(N,"timeGutterFormat"))},[h,l,i]);return n.createElement(f,{slotMetrics:h},n.createElement("div",{className:"rbc-time-gutter rbc-time-column",ref:m},h.groups.map(function(N,S){return n.createElement(L1,{key:S,group:N,resource:c,components:d,renderSlot:w,getters:u})})))},yU=n.forwardRef(function(e,t){return n.createElement(vU,Object.assign({gutterRef:t},e))}),Km={};function EU(e,t){return{map:function(a){return e?e.map(function(s,o){return a([t.resourceId(s),s],o)}):[a([Km,null],0)]},groupEvents:function(a){var s=new Map;return e?(a.forEach(function(o){var l=t.resource(o)||Km;if(Array.isArray(l))l.forEach(function(c){var d=s.get(c)||[];d.push(o),s.set(c,d)});else{var i=s.get(l)||[];i.push(o),s.set(l,i)}}),s):(s.set(Km,a),s)}}}var Po=function(e){function t(r){var a;return Dt(this,t),a=Xt(this,t,[r]),a.handleScroll=function(s){a.scrollRef.current&&(a.scrollRef.current.scrollLeft=s.target.scrollLeft)},a.handleResize=function(){dy(a.rafHandle),a.rafHandle=MN(a.checkOverflow)},a.handleKeyPressEvent=function(){a.clearSelection();for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];at(a.props.onKeyPressEvent,o)},a.handleSelectEvent=function(){a.clearSelection();for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];at(a.props.onSelectEvent,o)},a.handleDoubleClickEvent=function(){a.clearSelection();for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];at(a.props.onDoubleClickEvent,o)},a.handleShowMore=function(s,o,l,i,c){var d=a.props,u=d.popup,m=d.onDrillDown,f=d.onShowMore,x=d.getDrilldownView,b=d.doShowMoreDrillDown;if(a.clearSelection(),u){var y=RN(l,a.containerRef.current);a.setState({overlay:{date:o,events:s,position:Je(Je({},y),{},{width:"200px"}),target:c}})}else b&&at(m,[o,x(o)||nr.DAY]);at(f,[s,o,i])},a.handleSelectAllDaySlot=function(s,o){var l=a.props.onSelectSlot,i=new Date(s[0]),c=new Date(s[s.length-1]);c.setDate(s[s.length-1].getDate()+1),at(l,{slots:s,start:i,end:c,action:o.action,resourceId:o.resourceId})},a.overlayDisplay=function(){a.setState({overlay:null})},a.checkOverflow=function(){if(!a._updatingOverflow){var s=a.contentRef.current;if(s!=null&&s.scrollHeight){var o=s.scrollHeight>s.clientHeight;a.state.isOverflowing!==o&&(a._updatingOverflow=!0,a.setState({isOverflowing:o},function(){a._updatingOverflow=!1}))}}},a.memoizedResources=a1(function(s,o){return EU(s,o)}),a.state={gutterWidth:void 0,isOverflowing:null},a.scrollRef=n.createRef(),a.contentRef=n.createRef(),a.containerRef=n.createRef(),a._scrollRatio=null,a.gutterRef=g.createRef(),a}return Qt(t,e),At(t,[{key:"getSnapshotBeforeUpdate",value:function(){return this.checkOverflow(),null}},{key:"componentDidMount",value:function(){this.props.width==null&&this.measureGutter(),this.calculateScroll(),this.applyScroll(),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),dy(this.rafHandle),this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest)}},{key:"componentDidUpdate",value:function(){this.applyScroll()}},{key:"renderDayColumn",value:function(a,s,o,l,i,c,d,u,m,f){var x=this.props,b=x.min,y=x.max,v=(l.get(s)||[]).filter(function(h){return c.inRange(a,d.start(h),d.end(h),"day")}),p=(i.get(s)||[]).filter(function(h){return c.inRange(a,d.start(h),d.end(h),"day")});return n.createElement(I1,Object.assign({},this.props,{localizer:c,min:c.merge(a,b),max:c.merge(a,y),resource:o&&s,components:u,isNow:c.isSameDate(a,f),key:"".concat(s,"-").concat(a),date:a,events:v,backgroundEvents:p,dayLayoutAlgorithm:m}))}},{key:"renderResourcesFirst",value:function(a,s,o,l,i,c,d,u,m){var f=this;return s.map(function(x){var b=jr(x,2),y=b[0],v=b[1];return a.map(function(p){return f.renderDayColumn(p,y,v,o,l,i,c,u,m,d)})})}},{key:"renderRangeFirst",value:function(a,s,o,l,i,c,d,u,m){var f=this;return a.map(function(x){return n.createElement("div",{style:{display:"flex",minHeight:"100%",flex:1},key:x},s.map(function(b){var y=jr(b,2),v=y[0],p=y[1];return n.createElement("div",{style:{flex:1},key:c.resourceId(p)},f.renderDayColumn(x,v,p,o,l,i,c,u,m,d))}))})}},{key:"renderEvents",value:function(a,s,o,l){var i=this.props,c=i.accessors,d=i.localizer,u=i.resourceGroupingLayout,m=i.components,f=i.dayLayoutAlgorithm,x=this.memoizedResources(this.props.resources,c),b=x.groupEvents(s),y=x.groupEvents(o);return u?this.renderRangeFirst(a,x,b,y,d,c,l,m,f):this.renderResourcesFirst(a,x,b,y,d,c,l,m,f)}},{key:"render",value:function(){var a,s=this.props,o=s.events,l=s.backgroundEvents,i=s.range,c=s.width,d=s.rtl,u=s.selected,m=s.getNow,f=s.resources,x=s.components,b=s.accessors,y=s.getters,v=s.localizer,p=s.min,h=s.max,E=s.showMultiDayTimes,w=s.longPressThreshold,N=s.resizable,S=s.resourceGroupingLayout;c=c||this.state.gutterWidth;var C=i[0],D=i[i.length-1];this.slots=i.length;var k=[],O=[],A=[];o.forEach(function(P){if(ni(P,C,D,b,v)){var I=b.start(P),L=b.end(P);b.allDay(P)||v.startAndEndAreDateOnly(I,L)||!E&&!v.isSameDate(I,L)?k.push(P):O.push(P)}}),l.forEach(function(P){ni(P,C,D,b,v)&&A.push(P)}),k.sort(function(P,I){return Tp(P,I,b,v)});var $={range:i,events:k,width:c,rtl:d,getNow:m,localizer:v,selected:u,allDayMaxRows:this.props.showAllEvents?1/0:(a=this.props.allDayMaxRows)!==null&&a!==void 0?a:1/0,resources:this.memoizedResources(f,b),selectable:this.props.selectable,accessors:b,getters:y,components:x,scrollRef:this.scrollRef,isOverflowing:this.state.isOverflowing,longPressThreshold:w,onSelectSlot:this.handleSelectAllDaySlot,onSelectEvent:this.handleSelectEvent,onShowMore:this.handleShowMore,onDoubleClickEvent:this.props.onDoubleClickEvent,onKeyPressEvent:this.props.onKeyPressEvent,onDrillDown:this.props.onDrillDown,getDrilldownView:this.props.getDrilldownView,resizable:N};return n.createElement("div",{className:ht("rbc-time-view",f&&"rbc-time-view-resources"),ref:this.containerRef},f&&f.length>1&&S?n.createElement(gU,$):n.createElement(pU,$),this.props.popup&&this.renderOverlay(),n.createElement("div",{ref:this.contentRef,className:"rbc-time-content",onScroll:this.handleScroll},n.createElement(yU,{date:C,ref:this.gutterRef,localizer:v,min:v.merge(C,p),max:v.merge(C,h),step:this.props.step,getNow:this.props.getNow,timeslots:this.props.timeslots,components:x,className:"rbc-time-gutter",getters:y}),this.renderEvents(i,O,A,m())))}},{key:"renderOverlay",value:function(){var a,s,o=this,l=(a=(s=this.state)===null||s===void 0?void 0:s.overlay)!==null&&a!==void 0?a:{},i=this.props,c=i.accessors,d=i.localizer,u=i.components,m=i.getters,f=i.selected,x=i.popupOffset,b=i.handleDragStart,y=function(){return o.setState({overlay:null})};return n.createElement(Mh,{overlay:l,accessors:c,localizer:d,components:u,getters:m,selected:f,popupOffset:x,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:b,show:!!l.position,overlayDisplay:this.overlayDisplay,onHide:y})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}},{key:"measureGutter",value:function(){var a=this;this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest),this.measureGutterAnimationFrameRequest=window.requestAnimationFrame(function(){var s,o=(s=a.gutterRef)!==null&&s!==void 0&&s.current?kp(a.gutterRef.current):void 0;o&&a.state.gutterWidth!==o&&a.setState({gutterWidth:o})})}},{key:"applyScroll",value:function(){if(this._scrollRatio!=null&&this.props.enableAutoScroll===!0){var a=this.contentRef.current;a.scrollTop=a.scrollHeight*this._scrollRatio,this._scrollRatio=null}}},{key:"calculateScroll",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props,s=a.min,o=a.max,l=a.scrollToTime,i=a.localizer,c=i.diff(i.merge(l,s),l,"milliseconds"),d=i.diff(s,o,"milliseconds");this._scrollRatio=c/d}}])}(g.Component);Po.defaultProps={step:30,timeslots:2,resourceGroupingLayout:!1};var xU=["date","localizer","min","max","scrollToTime","enableAutoScroll"],_d=function(e){function t(){return Dt(this,t),Xt(this,t,arguments)}return Qt(t,e),At(t,[{key:"render",value:function(){var a=this.props,s=a.date,o=a.localizer,l=a.min,i=l===void 0?o.startOf(new Date,"day"):l,c=a.max,d=c===void 0?o.endOf(new Date,"day"):c,u=a.scrollToTime,m=u===void 0?o.startOf(new Date,"day"):u,f=a.enableAutoScroll,x=f===void 0?!0:f,b=On(a,xU),y=t.range(s,{localizer:o});return n.createElement(Po,Object.assign({},b,{range:y,eventOffset:10,localizer:o,min:i,max:d,scrollToTime:m,enableAutoScroll:x}))}}])}(n.Component);_d.range=function(e,t){var r=t.localizer;return[r.startOf(e,"day")]};_d.navigate=function(e,t,r){var a=r.localizer;switch(t){case Er.PREVIOUS:return a.add(e,-1,"day");case Er.NEXT:return a.add(e,1,"day");default:return e}};_d.title=function(e,t){var r=t.localizer;return r.format(e,"dayHeaderFormat")};var bU=["date","localizer","min","max","scrollToTime","enableAutoScroll"],Ia=function(e){function t(){return Dt(this,t),Xt(this,t,arguments)}return Qt(t,e),At(t,[{key:"render",value:function(){var a=this.props,s=a.date,o=a.localizer,l=a.min,i=l===void 0?o.startOf(new Date,"day"):l,c=a.max,d=c===void 0?o.endOf(new Date,"day"):c,u=a.scrollToTime,m=u===void 0?o.startOf(new Date,"day"):u,f=a.enableAutoScroll,x=f===void 0?!0:f,b=On(a,bU),y=t.range(s,this.props);return n.createElement(Po,Object.assign({},b,{range:y,eventOffset:15,localizer:o,min:i,max:d,scrollToTime:m,enableAutoScroll:x}))}}])}(n.Component);Ia.defaultProps=Po.defaultProps;Ia.navigate=function(e,t,r){var a=r.localizer;switch(t){case Er.PREVIOUS:return a.add(e,-1,"week");case Er.NEXT:return a.add(e,1,"week");default:return e}};Ia.range=function(e,t){var r=t.localizer,a=r.startOfWeek(),s=r.startOf(e,"week",a),o=r.endOf(e,"week",a);return r.range(s,o)};Ia.title=function(e,t){var r=t.localizer,a=Ia.range(e,{localizer:r}),s=d1(a),o=s[0],l=s.slice(1);return r.format({start:o,end:l.pop()},"dayRangeHeaderFormat")};var wU=["date","localizer","min","max","scrollToTime","enableAutoScroll"];function Ih(e,t){return Ia.range(e,t).filter(function(r){return[6,0].indexOf(r.getDay())===-1})}var Ti=function(e){function t(){return Dt(this,t),Xt(this,t,arguments)}return Qt(t,e),At(t,[{key:"render",value:function(){var a=this.props,s=a.date,o=a.localizer,l=a.min,i=l===void 0?o.startOf(new Date,"day"):l,c=a.max,d=c===void 0?o.endOf(new Date,"day"):c,u=a.scrollToTime,m=u===void 0?o.startOf(new Date,"day"):u,f=a.enableAutoScroll,x=f===void 0?!0:f,b=On(a,wU),y=Ih(s,this.props);return n.createElement(Po,Object.assign({},b,{range:y,eventOffset:15,localizer:o,min:i,max:d,scrollToTime:m,enableAutoScroll:x}))}}])}(n.Component);Ti.defaultProps=Po.defaultProps;Ti.range=Ih;Ti.navigate=Ia.navigate;Ti.title=function(e,t){var r=t.localizer,a=Ih(e,{localizer:r}),s=d1(a),o=s[0],l=s.slice(1);return r.format({start:o,end:l.pop()},"dayRangeHeaderFormat")};var Od=30;function Rd(e){var t=e.accessors,r=e.components,a=e.date,s=e.events,o=e.getters,l=e.length,i=l===void 0?Od:l,c=e.localizer,d=e.onDoubleClickEvent,u=e.onSelectEvent,m=e.selected,f=g.useRef(null),x=g.useRef(null),b=g.useRef(null),y=g.useRef(null),v=g.useRef(null);g.useEffect(function(){E()});var p=function(D,k,O){var A=r.event,$=r.date;return k=k.filter(function(P){return ni(P,c.startOf(D,"day"),c.endOf(D,"day"),t,c)}),k.map(function(P,I){var L=t.title(P),F=t.end(P),T=t.start(P),M=o.eventProp(P,T,F,Ad(P,m)),V=I===0&&c.format(D,"agendaDateFormat"),X=I===0?n.createElement("td",{rowSpan:k.length,className:"rbc-agenda-date-cell"},$?n.createElement($,{day:D,label:V}):V):!1;return n.createElement("tr",{key:O+"_"+I,className:M.className,style:M.style},X,n.createElement("td",{className:"rbc-agenda-time-cell"},h(D,P)),n.createElement("td",{className:"rbc-agenda-event-cell",onClick:function(U){return u&&u(P,U)},onDoubleClick:function(U){return d&&d(P,U)}},A?n.createElement(A,{event:P,title:L}):L))},[])},h=function(D,k){var O="",A=r.time,$=c.messages.allDay,P=t.end(k),I=t.start(k);return t.allDay(k)||(c.eq(I,P)?$=c.format(I,"agendaTimeFormat"):c.isSameDate(I,P)?$=c.format({start:I,end:P},"agendaTimeRangeFormat"):c.isSameDate(D,I)?$=c.format(I,"agendaTimeFormat"):c.isSameDate(D,P)&&($=c.format(P,"agendaTimeFormat"))),c.gt(D,I,"day")&&(O="rbc-continues-prior"),c.lt(D,P,"day")&&(O+=" rbc-continues-after"),n.createElement("span",{className:O.trim()},A?n.createElement(A,{event:k,day:D,label:$}):$)},E=function(){if(v.current){var D=f.current,k=v.current.firstChild;if(k){var O=y.current.scrollHeight>y.current.clientHeight,A=[],$=A;A=[kp(k.children[0]),kp(k.children[1])],($[0]!==A[0]||$[1]!==A[1])&&(x.current.style.width=A[0]+"px",b.current.style.width=A[1]+"px"),O?(N3(D,"rbc-header-overflowing"),D.style.marginRight=fh()+"px"):S3(D,"rbc-header-overflowing")}}},w=c.messages,N=c.add(a,i,"day"),S=c.range(a,N,"day");return s=s.filter(function(C){return ni(C,c.startOf(a,"day"),c.endOf(N,"day"),t,c)}),s.sort(function(C,D){return+t.start(C)-+t.start(D)}),n.createElement("div",{className:"rbc-agenda-view"},s.length!==0?n.createElement(n.Fragment,null,n.createElement("table",{ref:f,className:"rbc-agenda-table"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",{className:"rbc-header",ref:x},w.date),n.createElement("th",{className:"rbc-header",ref:b},w.time),n.createElement("th",{className:"rbc-header"},w.event)))),n.createElement("div",{className:"rbc-agenda-content",ref:y},n.createElement("table",{className:"rbc-agenda-table"},n.createElement("tbody",{ref:v},S.map(function(C,D){return p(C,s,D)}))))):n.createElement("span",{className:"rbc-agenda-empty"},w.noEventsInRange))}Rd.range=function(e,t){var r=t.length,a=r===void 0?Od:r,s=t.localizer,o=s.add(e,a,"day");return{start:e,end:o}};Rd.navigate=function(e,t,r){var a=r.length,s=a===void 0?Od:a,o=r.localizer;switch(t){case Er.PREVIOUS:return o.add(e,-s,"day");case Er.NEXT:return o.add(e,s,"day");default:return e}};Rd.title=function(e,t){var r=t.length,a=r===void 0?Od:r,s=t.localizer,o=s.add(e,a,"day");return s.format({start:e,end:o},"agendaHeaderFormat")};var Fc=Qa(Qa(Qa(Qa(Qa({},nr.MONTH,Td),nr.WEEK,Ia),nr.WORK_WEEK,Ti),nr.DAY,_d),nr.AGENDA,Rd),NU=["action","date","today"];function SU(e,t){var r=t.action,a=t.date,s=t.today,o=On(t,NU);switch(e=typeof e=="string"?Fc[e]:e,r){case Er.TODAY:a=s||new Date;break;case Er.DATE:break;default:Hl(e&&typeof e.navigate=="function","Calendar View components must implement a static `.navigate(date, action)` method.s"),a=e.navigate(a,r,o)}return a}function CU(e,t){var r=null;return typeof t=="function"?r=t(e):typeof t=="string"&&ra(e)==="object"&&e!=null&&t in e&&(r=e[t]),r}var jn=function(t){return function(r){return CU(r,t)}},kU=["view","date","getNow","onNavigate"],DU=["view","toolbar","events","backgroundEvents","resourceGroupingLayout","style","className","elementProps","date","getNow","length","showMultiDayTimes","onShowMore","doShowMoreDrillDown","components","formats","messages","culture"];function F1(e){if(Array.isArray(e))return e;for(var t=[],r=0,a=Object.entries(e);r<a.length;r++){var s=jr(a[r],2),o=s[0],l=s[1];l&&t.push(o)}return t}function AU(e,t){var r=t.views,a=F1(r);return a.indexOf(e)!==-1}var j1=function(e){function t(){var r;Dt(this,t);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return r=Xt(this,t,[].concat(s)),r.getViews=function(){var l=r.props.views;return Array.isArray(l)?az(l,function(i,c){return i[c]=Fc[c]},{}):ra(l)==="object"?a7(l,function(i,c){return i===!0?Fc[c]:i}):Fc},r.getView=function(){var l=r.getViews();return l[r.props.view]},r.getDrilldownView=function(l){var i=r.props,c=i.view,d=i.drilldownView,u=i.getDrilldownView;return u?u(l,c,Object.keys(r.getViews())):d},r.handleRangeChange=function(l,i,c){var d=r.props,u=d.onRangeChange,m=d.localizer;u&&i.range&&u(i.range(l,{localizer:m}),c)},r.handleNavigate=function(l,i){var c=r.props,d=c.view,u=c.date,m=c.getNow,f=c.onNavigate,x=On(c,kU),b=r.getView(),y=m();u=SU(b,Je(Je({},x),{},{action:l,date:i||u||y,today:y})),f(u,d,l),r.handleRangeChange(u,b)},r.handleViewChange=function(l){l!==r.props.view&&AU(l,r.props)&&r.props.onView(l);var i=r.getViews();r.handleRangeChange(r.props.date||r.props.getNow(),i[l],l)},r.handleSelectEvent=function(){for(var l=arguments.length,i=new Array(l),c=0;c<l;c++)i[c]=arguments[c];at(r.props.onSelectEvent,i)},r.handleDoubleClickEvent=function(){for(var l=arguments.length,i=new Array(l),c=0;c<l;c++)i[c]=arguments[c];at(r.props.onDoubleClickEvent,i)},r.handleKeyPressEvent=function(){for(var l=arguments.length,i=new Array(l),c=0;c<l;c++)i[c]=arguments[c];at(r.props.onKeyPressEvent,i)},r.handleSelectSlot=function(l){at(r.props.onSelectSlot,l)},r.handleDrillDown=function(l,i){var c=r.props.onDrillDown;if(c){c(l,i,r.drilldownView);return}i&&r.handleViewChange(i),r.handleNavigate(Er.DATE,l)},r.state={context:t.getContext(r.props)},r}return Qt(t,e),At(t,[{key:"render",value:function(){var a=this.props,s=a.view,o=a.toolbar,l=a.events,i=a.backgroundEvents,c=a.resourceGroupingLayout,d=a.style,u=a.className,m=a.elementProps,f=a.date,x=a.getNow,b=a.length,y=a.showMultiDayTimes,v=a.onShowMore,p=a.doShowMoreDrillDown;a.components,a.formats,a.messages,a.culture;var h=On(a,DU);f=f||x();var E=this.getView(),w=this.state.context,N=w.accessors,S=w.components,C=w.getters,D=w.localizer,k=w.viewNames,O=S.toolbar||Oz,A=E.title(f,{localizer:D,length:b});return n.createElement("div",Object.assign({},m,{className:ht(u,"rbc-calendar",h.rtl&&"rbc-rtl"),style:d}),o&&n.createElement(O,{date:f,view:s,views:k,label:A,onView:this.handleViewChange,onNavigate:this.handleNavigate,localizer:D}),n.createElement(E,Object.assign({},h,{events:l,backgroundEvents:i,date:f,getNow:x,length:b,localizer:D,getters:C,components:S,accessors:N,showMultiDayTimes:y,getDrilldownView:this.getDrilldownView,onNavigate:this.handleNavigate,onDrillDown:this.handleDrillDown,onSelectEvent:this.handleSelectEvent,onDoubleClickEvent:this.handleDoubleClickEvent,onKeyPressEvent:this.handleKeyPressEvent,onSelectSlot:this.handleSelectSlot,onShowMore:v,doShowMoreDrillDown:p,resourceGroupingLayout:c})))}}],[{key:"getDerivedStateFromProps",value:function(a){return{context:t.getContext(a)}}},{key:"getContext",value:function(a){var s=a.startAccessor,o=a.endAccessor,l=a.allDayAccessor,i=a.tooltipAccessor,c=a.titleAccessor,d=a.resourceAccessor,u=a.resourceIdAccessor,m=a.resourceTitleAccessor,f=a.eventIdAccessor,x=a.eventPropGetter,b=a.backgroundEventPropGetter,y=a.slotPropGetter,v=a.slotGroupPropGetter,p=a.dayPropGetter,h=a.view,E=a.views,w=a.localizer,N=a.culture,S=a.messages,C=S===void 0?{}:S,D=a.components,k=D===void 0?{}:D,O=a.formats,A=O===void 0?{}:O,$=F1(E),P=Mz(C);return{viewNames:$,localizer:_z(w,N,A,P),getters:{eventProp:function(){return x&&x.apply(void 0,arguments)||{}},backgroundEventProp:function(){return b&&b.apply(void 0,arguments)||{}},slotProp:function(){return y&&y.apply(void 0,arguments)||{}},slotGroupProp:function(){return v&&v.apply(void 0,arguments)||{}},dayProp:function(){return p&&p.apply(void 0,arguments)||{}}},components:QF(k[h]||{},HB(k,$),{eventWrapper:bn,backgroundEventWrapper:bn,eventContainerWrapper:bn,dateCellWrapper:bn,weekWrapper:bn,timeSlotWrapper:bn,timeGutterWrapper:bn,timeIndicatorWrapper:bn}),accessors:{start:jn(s),end:jn(o),allDay:jn(l),tooltip:jn(i),title:jn(c),resource:jn(d),resourceId:jn(u),resourceTitle:jn(m),eventId:jn(f)}}}}])}(n.Component);j1.defaultProps={events:[],backgroundEvents:[],elementProps:{},popup:!1,toolbar:!0,view:nr.MONTH,views:[nr.MONTH,nr.WEEK,nr.DAY,nr.AGENDA],step:30,length:30,allDayMaxRows:1/0,doShowMoreDrillDown:!0,drilldownView:nr.DAY,titleAccessor:"title",tooltipAccessor:"title",allDayAccessor:"allDay",startAccessor:"start",endAccessor:"end",resourceAccessor:"resourceId",resourceIdAccessor:"id",resourceTitleAccessor:"title",eventIdAccessor:"id",longPressThreshold:250,getNow:function(){return new Date},dayLayoutAlgorithm:"overlap"};var TU=mN(j1,{view:"onView",date:"onNavigate",selected:"onSelectEvent"}),_U=function(t,r,a){var s=t.start,o=t.end;return a.format(s,"MMMM DD",r)+" – "+a.format(o,a.eq(s,o,"month")?"DD":"MMMM DD",r)},OU=function(t,r,a){var s=t.start,o=t.end;return a.format(s,"L",r)+" – "+a.format(o,"L",r)},Xm=function(t,r,a){var s=t.start,o=t.end;return a.format(s,"LT",r)+" – "+a.format(o,"LT",r)},RU=function(t,r,a){var s=t.start;return a.format(s,"LT",r)+" – "},MU=function(t,r,a){var s=t.end;return" – "+a.format(s,"LT",r)},PU={dateFormat:"DD",dayFormat:"DD ddd",weekdayFormat:"ddd",selectRangeFormat:Xm,eventTimeRangeFormat:Xm,eventTimeRangeStartFormat:RU,eventTimeRangeEndFormat:MU,timeGutterFormat:"LT",monthHeaderFormat:"MMMM YYYY",dayHeaderFormat:"dddd MMM DD",dayRangeHeaderFormat:_U,agendaHeaderFormat:OU,agendaDateFormat:"ddd MMM DD",agendaTimeFormat:"LT",agendaTimeRangeFormat:Xm};function ua(e){var t=e&&e.toLowerCase();return t==="FullYear"?t="year":t||(t=void 0),t}function LU(e){var t=function(U,Y){return Y?U.locale(Y):U};function r(z){return e(z).toDate().getTimezoneOffset()}function a(z,U){var Y,Q,j=e(z).local(),B=e(U).local();if(!e.tz)return j.toDate().getTimezoneOffset()-B.toDate().getTimezoneOffset();var H=(Y=j==null||(Q=j._z)===null||Q===void 0?void 0:Q.name)!==null&&Y!==void 0?Y:e.tz.guess(),K=e.tz.zone(H).utcOffset(+j),fe=e.tz.zone(H).utcOffset(+B);return K-fe}function s(z){var U=e(z).startOf("day");return a(U,z)}function o(z,U,Y){var Q=ua(Y),j=Q?e(z).startOf(Q):e(z),B=Q?e(U).startOf(Q):e(U);return[j,B,Q]}function l(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,U=arguments.length>1?arguments[1]:void 0,Y=ua(U);return Y?e(z).startOf(Y).toDate():e(z).toDate()}function i(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,U=arguments.length>1?arguments[1]:void 0,Y=ua(U);return Y?e(z).endOf(Y).toDate():e(z).toDate()}function c(z,U,Y){var Q=o(z,U,Y),j=jr(Q,3),B=j[0],H=j[1],K=j[2];return B.isSame(H,K)}function d(z,U,Y){return!c(z,U,Y)}function u(z,U,Y){var Q=o(z,U,Y),j=jr(Q,3),B=j[0],H=j[1],K=j[2];return B.isAfter(H,K)}function m(z,U,Y){var Q=o(z,U,Y),j=jr(Q,3),B=j[0],H=j[1],K=j[2];return B.isBefore(H,K)}function f(z,U,Y){var Q=o(z,U,Y),j=jr(Q,3),B=j[0],H=j[1],K=j[2];return B.isSameOrBefore(H,K)}function x(z,U,Y){var Q=o(z,U,Y),j=jr(Q,3),B=j[0],H=j[1],K=j[2];return B.isSameOrBefore(H,K)}function b(z,U,Y){var Q=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"day",j=ua(Q),B=e(z),H=e(U),K=e(Y);return B.isBetween(H,K,j,"[]")}function y(z,U){var Y=e(z),Q=e(U),j=e.min(Y,Q);return j.toDate()}function v(z,U){var Y=e(z),Q=e(U),j=e.max(Y,Q);return j.toDate()}function p(z,U){if(!z&&!U)return null;var Y=e(U).format("HH:mm:ss"),Q=e(z).startOf("day").format("MM/DD/YYYY");return e("".concat(Q," ").concat(Y),"MM/DD/YYYY HH:mm:ss").toDate()}function h(z,U,Y){var Q=ua(Y);return e(z).add(U,Q).toDate()}function E(z,U){for(var Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"day",Q=ua(Y),j=e(z).toDate(),B=[];x(j,U);)B.push(j),j=h(j,1,Q);return B}function w(z,U){var Y=ua(U),Q=l(z,Y);return c(Q,z)?Q:h(Q,1,Y)}function N(z,U){var Y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"day",Q=ua(Y),j=e(z),B=e(U);return B.diff(j,Q)}function S(z){var U=e(z);return U.minutes()}function C(z){var U=z?e.localeData(z):e.localeData();return U?U.firstDayOfWeek():0}function D(z){return e(z).startOf("month").startOf("week").toDate()}function k(z){return e(z).endOf("month").endOf("week").toDate()}function O(z){for(var U=D(z),Y=k(z),Q=[];x(U,Y);)Q.push(U),U=h(U,1,"d");return Q}function A(z,U,Y){return e(z).startOf("day").minute(U+Y).toDate()}function $(z,U){return N(z,U,"minutes")}function P(z){var U=e(z).startOf("day"),Y=e(z);return Y.diff(U,"minutes")+s(z)}function I(z,U){var Y=e(z),Q=e(U);return Y.isBefore(Q,"day")}function L(z,U,Y){var Q=e(U),j=e(Y);return Q.isSameOrAfter(j,"minutes")}function F(z,U){var Y=e(z),Q=e(U),j=e.duration(Q.diff(Y));return j.days()}function T(z){var U=z.evtA,Y=U.start,Q=U.end,j=U.allDay,B=z.evtB,H=B.start,K=B.end,fe=B.allDay,W=+l(Y,"day")-+l(H,"day"),pe=F(Y,Q),se=F(H,K);return W||se-pe||!!fe-!!j||+Y-+H||+Q-+K}function M(z){var U=z.event,Y=U.start,Q=U.end,j=z.range,B=j.start,H=j.end,K=e(Y).startOf("day"),fe=e(Q),W=e(B),pe=e(H),se=K.isSameOrBefore(pe,"day"),be=!K.isSame(fe,"minutes"),$e=be?fe.isAfter(W,"minutes"):fe.isSameOrAfter(W,"minutes");return se&&$e}function V(z,U){var Y=e(z),Q=e(U);return Y.isSame(Q,"day")}function X(){var z=new Date,U=/-/.test(z.toString())?"-":"",Y=z.getTimezoneOffset(),Q=Number("".concat(U).concat(Math.abs(Y))),j=e().utcOffset();return j>Q?1:0}return new Tz({formats:PU,firstOfWeek:C,firstVisibleDay:D,lastVisibleDay:k,visibleDays:O,format:function(U,Y,Q){return t(e(U),Q).format(Y)},lt:m,lte:x,gt:u,gte:f,eq:c,neq:d,merge:p,inRange:b,startOf:l,endOf:i,range:E,add:h,diff:N,ceil:w,min:y,max:v,minutes:S,getSlotDate:A,getTimezoneOffset:r,getDstOffset:a,getTotalMin:$,getMinutesFromMidnight:P,continuesPrior:I,continuesAfter:L,sortEvents:T,inEventRange:M,isSameDate:V,daySpan:F,browserTZOffset:X})}//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var B1;function oe(){return B1.apply(null,arguments)}function IU(e){B1=e}function mn(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function cs(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function Ve(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function $h(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var t;for(t in e)if(Ve(e,t))return!1;return!0}function cr(e){return e===void 0}function aa(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function _i(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function z1(e,t){var r=[],a,s=e.length;for(a=0;a<s;++a)r.push(t(e[a],a));return r}function xa(e,t){for(var r in t)Ve(t,r)&&(e[r]=t[r]);return Ve(t,"toString")&&(e.toString=t.toString),Ve(t,"valueOf")&&(e.valueOf=t.valueOf),e}function In(e,t,r,a){return u2(e,t,r,a,!0).utc()}function $U(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function Oe(e){return e._pf==null&&(e._pf=$U()),e._pf}var Op;Array.prototype.some?Op=Array.prototype.some:Op=function(e){var t=Object(this),r=t.length>>>0,a;for(a=0;a<r;a++)if(a in t&&e.call(this,t[a],a,t))return!0;return!1};function Fh(e){var t=null,r=!1,a=e._d&&!isNaN(e._d.getTime());if(a&&(t=Oe(e),r=Op.call(t.parsedDateParts,function(s){return s!=null}),a=t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&r),e._strict&&(a=a&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=a;else return a;return e._isValid}function Md(e){var t=In(NaN);return e!=null?xa(Oe(t),e):Oe(t).userInvalidated=!0,t}var kE=oe.momentProperties=[],Qm=!1;function jh(e,t){var r,a,s,o=kE.length;if(cr(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),cr(t._i)||(e._i=t._i),cr(t._f)||(e._f=t._f),cr(t._l)||(e._l=t._l),cr(t._strict)||(e._strict=t._strict),cr(t._tzm)||(e._tzm=t._tzm),cr(t._isUTC)||(e._isUTC=t._isUTC),cr(t._offset)||(e._offset=t._offset),cr(t._pf)||(e._pf=Oe(t)),cr(t._locale)||(e._locale=t._locale),o>0)for(r=0;r<o;r++)a=kE[r],s=t[a],cr(s)||(e[a]=s);return e}function Oi(e){jh(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),Qm===!1&&(Qm=!0,oe.updateOffset(this),Qm=!1)}function fn(e){return e instanceof Oi||e!=null&&e._isAMomentObject!=null}function U1(e){oe.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+e)}function Kr(e,t){var r=!0;return xa(function(){if(oe.deprecationHandler!=null&&oe.deprecationHandler(null,e),r){var a=[],s,o,l,i=arguments.length;for(o=0;o<i;o++){if(s="",typeof arguments[o]=="object"){s+=`
[`+o+"] ";for(l in arguments[0])Ve(arguments[0],l)&&(s+=l+": "+arguments[0][l]+", ");s=s.slice(0,-2)}else s=arguments[o];a.push(s)}U1(e+`
Arguments: `+Array.prototype.slice.call(a).join("")+`
`+new Error().stack),r=!1}return t.apply(this,arguments)},t)}var DE={};function V1(e,t){oe.deprecationHandler!=null&&oe.deprecationHandler(e,t),DE[e]||(U1(t),DE[e]=!0)}oe.suppressDeprecationWarnings=!1;oe.deprecationHandler=null;function $n(e){return typeof Function<"u"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function FU(e){var t,r;for(r in e)Ve(e,r)&&(t=e[r],$n(t)?this[r]=t:this["_"+r]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function Rp(e,t){var r=xa({},e),a;for(a in t)Ve(t,a)&&(cs(e[a])&&cs(t[a])?(r[a]={},xa(r[a],e[a]),xa(r[a],t[a])):t[a]!=null?r[a]=t[a]:delete r[a]);for(a in e)Ve(e,a)&&!Ve(t,a)&&cs(e[a])&&(r[a]=xa({},r[a]));return r}function Bh(e){e!=null&&this.set(e)}var Mp;Object.keys?Mp=Object.keys:Mp=function(e){var t,r=[];for(t in e)Ve(e,t)&&r.push(t);return r};var jU={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function BU(e,t,r){var a=this._calendar[e]||this._calendar.sameElse;return $n(a)?a.call(t,r):a}function Rn(e,t,r){var a=""+Math.abs(e),s=t-a.length,o=e>=0;return(o?r?"+":"":"-")+Math.pow(10,Math.max(0,s)).toString().substr(1)+a}var zh=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,cc=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Jm={},Js={};function ve(e,t,r,a){var s=a;typeof a=="string"&&(s=function(){return this[a]()}),e&&(Js[e]=s),t&&(Js[t[0]]=function(){return Rn(s.apply(this,arguments),t[1],t[2])}),r&&(Js[r]=function(){return this.localeData().ordinal(s.apply(this,arguments),e)})}function zU(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function UU(e){var t=e.match(zh),r,a;for(r=0,a=t.length;r<a;r++)Js[t[r]]?t[r]=Js[t[r]]:t[r]=zU(t[r]);return function(s){var o="",l;for(l=0;l<a;l++)o+=$n(t[l])?t[l].call(s,e):t[l];return o}}function jc(e,t){return e.isValid()?(t=W1(t,e.localeData()),Jm[t]=Jm[t]||UU(t),Jm[t](e)):e.localeData().invalidDate()}function W1(e,t){var r=5;function a(s){return t.longDateFormat(s)||s}for(cc.lastIndex=0;r>=0&&cc.test(e);)e=e.replace(cc,a),cc.lastIndex=0,r-=1;return e}var VU={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function WU(e){var t=this._longDateFormat[e],r=this._longDateFormat[e.toUpperCase()];return t||!r?t:(this._longDateFormat[e]=r.match(zh).map(function(a){return a==="MMMM"||a==="MM"||a==="DD"||a==="dddd"?a.slice(1):a}).join(""),this._longDateFormat[e])}var HU="Invalid date";function YU(){return this._invalidDate}var qU="%d",GU=/\d{1,2}/;function KU(e){return this._ordinal.replace("%d",e)}var XU={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function QU(e,t,r,a){var s=this._relativeTime[r];return $n(s)?s(e,t,r,a):s.replace(/%d/i,e)}function JU(e,t){var r=this._relativeTime[e>0?"future":"past"];return $n(r)?r(t):r.replace(/%s/i,t)}var AE={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function Xr(e){return typeof e=="string"?AE[e]||AE[e.toLowerCase()]:void 0}function Uh(e){var t={},r,a;for(a in e)Ve(e,a)&&(r=Xr(a),r&&(t[r]=e[a]));return t}var ZU={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function eV(e){var t=[],r;for(r in e)Ve(e,r)&&t.push({unit:r,priority:ZU[r]});return t.sort(function(a,s){return a.priority-s.priority}),t}var H1=/\d/,Ar=/\d\d/,Y1=/\d{3}/,Vh=/\d{4}/,Pd=/[+-]?\d{6}/,lt=/\d\d?/,q1=/\d\d\d\d?/,G1=/\d\d\d\d\d\d?/,Ld=/\d{1,3}/,Wh=/\d{1,4}/,Id=/[+-]?\d{1,6}/,Lo=/\d+/,$d=/[+-]?\d+/,tV=/Z|[+-]\d\d:?\d\d/gi,Fd=/Z|[+-]\d\d(?::?\d\d)?/gi,rV=/[+-]?\d+(\.\d{1,3})?/,Ri=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Io=/^[1-9]\d?/,Hh=/^([1-9]\d|\d)/,Tu;Tu={};function de(e,t,r){Tu[e]=$n(t)?t:function(a,s){return a&&r?r:t}}function nV(e,t){return Ve(Tu,e)?Tu[e](t._strict,t._locale):new RegExp(aV(e))}function aV(e){return Xn(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,r,a,s,o){return r||a||s||o}))}function Xn(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Fr(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function Ie(e){var t=+e,r=0;return t!==0&&isFinite(t)&&(r=Fr(t)),r}var Pp={};function Xe(e,t){var r,a=t,s;for(typeof e=="string"&&(e=[e]),aa(t)&&(a=function(o,l){l[t]=Ie(o)}),s=e.length,r=0;r<s;r++)Pp[e[r]]=a}function Mi(e,t){Xe(e,function(r,a,s,o){s._w=s._w||{},t(r,s._w,s,o)})}function sV(e,t,r){t!=null&&Ve(Pp,e)&&Pp[e](t,r._a,r,e)}function jd(e){return e%4===0&&e%100!==0||e%400===0}var Gt=0,qn=1,Nn=2,kt=3,on=4,Gn=5,ns=6,oV=7,lV=8;ve("Y",0,0,function(){var e=this.year();return e<=9999?Rn(e,4):"+"+e});ve(0,["YY",2],0,function(){return this.year()%100});ve(0,["YYYY",4],0,"year");ve(0,["YYYYY",5],0,"year");ve(0,["YYYYYY",6,!0],0,"year");de("Y",$d);de("YY",lt,Ar);de("YYYY",Wh,Vh);de("YYYYY",Id,Pd);de("YYYYYY",Id,Pd);Xe(["YYYYY","YYYYYY"],Gt);Xe("YYYY",function(e,t){t[Gt]=e.length===2?oe.parseTwoDigitYear(e):Ie(e)});Xe("YY",function(e,t){t[Gt]=oe.parseTwoDigitYear(e)});Xe("Y",function(e,t){t[Gt]=parseInt(e,10)});function bl(e){return jd(e)?366:365}oe.parseTwoDigitYear=function(e){return Ie(e)+(Ie(e)>68?1900:2e3)};var K1=$o("FullYear",!0);function iV(){return jd(this.year())}function $o(e,t){return function(r){return r!=null?(X1(this,e,r),oe.updateOffset(this,t),this):si(this,e)}}function si(e,t){if(!e.isValid())return NaN;var r=e._d,a=e._isUTC;switch(t){case"Milliseconds":return a?r.getUTCMilliseconds():r.getMilliseconds();case"Seconds":return a?r.getUTCSeconds():r.getSeconds();case"Minutes":return a?r.getUTCMinutes():r.getMinutes();case"Hours":return a?r.getUTCHours():r.getHours();case"Date":return a?r.getUTCDate():r.getDate();case"Day":return a?r.getUTCDay():r.getDay();case"Month":return a?r.getUTCMonth():r.getMonth();case"FullYear":return a?r.getUTCFullYear():r.getFullYear();default:return NaN}}function X1(e,t,r){var a,s,o,l,i;if(!(!e.isValid()||isNaN(r))){switch(a=e._d,s=e._isUTC,t){case"Milliseconds":return void(s?a.setUTCMilliseconds(r):a.setMilliseconds(r));case"Seconds":return void(s?a.setUTCSeconds(r):a.setSeconds(r));case"Minutes":return void(s?a.setUTCMinutes(r):a.setMinutes(r));case"Hours":return void(s?a.setUTCHours(r):a.setHours(r));case"Date":return void(s?a.setUTCDate(r):a.setDate(r));case"FullYear":break;default:return}o=r,l=e.month(),i=e.date(),i=i===29&&l===1&&!jd(o)?28:i,s?a.setUTCFullYear(o,l,i):a.setFullYear(o,l,i)}}function cV(e){return e=Xr(e),$n(this[e])?this[e]():this}function uV(e,t){if(typeof e=="object"){e=Uh(e);var r=eV(e),a,s=r.length;for(a=0;a<s;a++)this[r[a].unit](e[r[a].unit])}else if(e=Xr(e),$n(this[e]))return this[e](t);return this}function dV(e,t){return(e%t+t)%t}var yt;Array.prototype.indexOf?yt=Array.prototype.indexOf:yt=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function Yh(e,t){if(isNaN(e)||isNaN(t))return NaN;var r=dV(t,12);return e+=(t-r)/12,r===1?jd(e)?29:28:31-r%7%2}ve("M",["MM",2],"Mo",function(){return this.month()+1});ve("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});ve("MMMM",0,0,function(e){return this.localeData().months(this,e)});de("M",lt,Io);de("MM",lt,Ar);de("MMM",function(e,t){return t.monthsShortRegex(e)});de("MMMM",function(e,t){return t.monthsRegex(e)});Xe(["M","MM"],function(e,t){t[qn]=Ie(e)-1});Xe(["MMM","MMMM"],function(e,t,r,a){var s=r._locale.monthsParse(e,a,r._strict);s!=null?t[qn]=s:Oe(r).invalidMonth=e});var mV="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Q1="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),J1=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,fV=Ri,pV=Ri;function gV(e,t){return e?mn(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||J1).test(t)?"format":"standalone"][e.month()]:mn(this._months)?this._months:this._months.standalone}function hV(e,t){return e?mn(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[J1.test(t)?"format":"standalone"][e.month()]:mn(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function vV(e,t,r){var a,s,o,l=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],a=0;a<12;++a)o=In([2e3,a]),this._shortMonthsParse[a]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[a]=this.months(o,"").toLocaleLowerCase();return r?t==="MMM"?(s=yt.call(this._shortMonthsParse,l),s!==-1?s:null):(s=yt.call(this._longMonthsParse,l),s!==-1?s:null):t==="MMM"?(s=yt.call(this._shortMonthsParse,l),s!==-1?s:(s=yt.call(this._longMonthsParse,l),s!==-1?s:null)):(s=yt.call(this._longMonthsParse,l),s!==-1?s:(s=yt.call(this._shortMonthsParse,l),s!==-1?s:null))}function yV(e,t,r){var a,s,o;if(this._monthsParseExact)return vV.call(this,e,t,r);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),a=0;a<12;a++){if(s=In([2e3,a]),r&&!this._longMonthsParse[a]&&(this._longMonthsParse[a]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i"),this._shortMonthsParse[a]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")),!r&&!this._monthsParse[a]&&(o="^"+this.months(s,"")+"|^"+this.monthsShort(s,""),this._monthsParse[a]=new RegExp(o.replace(".",""),"i")),r&&t==="MMMM"&&this._longMonthsParse[a].test(e))return a;if(r&&t==="MMM"&&this._shortMonthsParse[a].test(e))return a;if(!r&&this._monthsParse[a].test(e))return a}}function Z1(e,t){if(!e.isValid())return e;if(typeof t=="string"){if(/^\d+$/.test(t))t=Ie(t);else if(t=e.localeData().monthsParse(t),!aa(t))return e}var r=t,a=e.date();return a=a<29?a:Math.min(a,Yh(e.year(),r)),e._isUTC?e._d.setUTCMonth(r,a):e._d.setMonth(r,a),e}function e2(e){return e!=null?(Z1(this,e),oe.updateOffset(this,!0),this):si(this,"Month")}function EV(){return Yh(this.year(),this.month())}function xV(e){return this._monthsParseExact?(Ve(this,"_monthsRegex")||t2.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(Ve(this,"_monthsShortRegex")||(this._monthsShortRegex=fV),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function bV(e){return this._monthsParseExact?(Ve(this,"_monthsRegex")||t2.call(this),e?this._monthsStrictRegex:this._monthsRegex):(Ve(this,"_monthsRegex")||(this._monthsRegex=pV),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function t2(){function e(c,d){return d.length-c.length}var t=[],r=[],a=[],s,o,l,i;for(s=0;s<12;s++)o=In([2e3,s]),l=Xn(this.monthsShort(o,"")),i=Xn(this.months(o,"")),t.push(l),r.push(i),a.push(i),a.push(l);t.sort(e),r.sort(e),a.sort(e),this._monthsRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}function wV(e,t,r,a,s,o,l){var i;return e<100&&e>=0?(i=new Date(e+400,t,r,a,s,o,l),isFinite(i.getFullYear())&&i.setFullYear(e)):i=new Date(e,t,r,a,s,o,l),i}function oi(e){var t,r;return e<100&&e>=0?(r=Array.prototype.slice.call(arguments),r[0]=e+400,t=new Date(Date.UTC.apply(null,r)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function _u(e,t,r){var a=7+t-r,s=(7+oi(e,0,a).getUTCDay()-t)%7;return-s+a-1}function r2(e,t,r,a,s){var o=(7+r-a)%7,l=_u(e,a,s),i=1+7*(t-1)+o+l,c,d;return i<=0?(c=e-1,d=bl(c)+i):i>bl(e)?(c=e+1,d=i-bl(e)):(c=e,d=i),{year:c,dayOfYear:d}}function li(e,t,r){var a=_u(e.year(),t,r),s=Math.floor((e.dayOfYear()-a-1)/7)+1,o,l;return s<1?(l=e.year()-1,o=s+Qn(l,t,r)):s>Qn(e.year(),t,r)?(o=s-Qn(e.year(),t,r),l=e.year()+1):(l=e.year(),o=s),{week:o,year:l}}function Qn(e,t,r){var a=_u(e,t,r),s=_u(e+1,t,r);return(bl(e)-a+s)/7}ve("w",["ww",2],"wo","week");ve("W",["WW",2],"Wo","isoWeek");de("w",lt,Io);de("ww",lt,Ar);de("W",lt,Io);de("WW",lt,Ar);Mi(["w","ww","W","WW"],function(e,t,r,a){t[a.substr(0,1)]=Ie(e)});function NV(e){return li(e,this._week.dow,this._week.doy).week}var SV={dow:0,doy:6};function CV(){return this._week.dow}function kV(){return this._week.doy}function DV(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function AV(e){var t=li(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}ve("d",0,"do","day");ve("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});ve("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});ve("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});ve("e",0,0,"weekday");ve("E",0,0,"isoWeekday");de("d",lt);de("e",lt);de("E",lt);de("dd",function(e,t){return t.weekdaysMinRegex(e)});de("ddd",function(e,t){return t.weekdaysShortRegex(e)});de("dddd",function(e,t){return t.weekdaysRegex(e)});Mi(["dd","ddd","dddd"],function(e,t,r,a){var s=r._locale.weekdaysParse(e,a,r._strict);s!=null?t.d=s:Oe(r).invalidWeekday=e});Mi(["d","e","E"],function(e,t,r,a){t[a]=Ie(e)});function TV(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function _V(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function qh(e,t){return e.slice(t,7).concat(e.slice(0,t))}var OV="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),n2="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),RV="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),MV=Ri,PV=Ri,LV=Ri;function IV(e,t){var r=mn(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===!0?qh(r,this._week.dow):e?r[e.day()]:r}function $V(e){return e===!0?qh(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function FV(e){return e===!0?qh(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function jV(e,t,r){var a,s,o,l=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],a=0;a<7;++a)o=In([2e3,1]).day(a),this._minWeekdaysParse[a]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[a]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[a]=this.weekdays(o,"").toLocaleLowerCase();return r?t==="dddd"?(s=yt.call(this._weekdaysParse,l),s!==-1?s:null):t==="ddd"?(s=yt.call(this._shortWeekdaysParse,l),s!==-1?s:null):(s=yt.call(this._minWeekdaysParse,l),s!==-1?s:null):t==="dddd"?(s=yt.call(this._weekdaysParse,l),s!==-1||(s=yt.call(this._shortWeekdaysParse,l),s!==-1)?s:(s=yt.call(this._minWeekdaysParse,l),s!==-1?s:null)):t==="ddd"?(s=yt.call(this._shortWeekdaysParse,l),s!==-1||(s=yt.call(this._weekdaysParse,l),s!==-1)?s:(s=yt.call(this._minWeekdaysParse,l),s!==-1?s:null)):(s=yt.call(this._minWeekdaysParse,l),s!==-1||(s=yt.call(this._weekdaysParse,l),s!==-1)?s:(s=yt.call(this._shortWeekdaysParse,l),s!==-1?s:null))}function BV(e,t,r){var a,s,o;if(this._weekdaysParseExact)return jV.call(this,e,t,r);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),a=0;a<7;a++){if(s=In([2e3,1]).day(a),r&&!this._fullWeekdaysParse[a]&&(this._fullWeekdaysParse[a]=new RegExp("^"+this.weekdays(s,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[a]=new RegExp("^"+this.weekdaysShort(s,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[a]=new RegExp("^"+this.weekdaysMin(s,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[a]||(o="^"+this.weekdays(s,"")+"|^"+this.weekdaysShort(s,"")+"|^"+this.weekdaysMin(s,""),this._weekdaysParse[a]=new RegExp(o.replace(".",""),"i")),r&&t==="dddd"&&this._fullWeekdaysParse[a].test(e))return a;if(r&&t==="ddd"&&this._shortWeekdaysParse[a].test(e))return a;if(r&&t==="dd"&&this._minWeekdaysParse[a].test(e))return a;if(!r&&this._weekdaysParse[a].test(e))return a}}function zV(e){if(!this.isValid())return e!=null?this:NaN;var t=si(this,"Day");return e!=null?(e=TV(e,this.localeData()),this.add(e-t,"d")):t}function UV(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function VV(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=_V(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function WV(e){return this._weekdaysParseExact?(Ve(this,"_weekdaysRegex")||Gh.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(Ve(this,"_weekdaysRegex")||(this._weekdaysRegex=MV),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function HV(e){return this._weekdaysParseExact?(Ve(this,"_weekdaysRegex")||Gh.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(Ve(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=PV),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function YV(e){return this._weekdaysParseExact?(Ve(this,"_weekdaysRegex")||Gh.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(Ve(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=LV),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Gh(){function e(u,m){return m.length-u.length}var t=[],r=[],a=[],s=[],o,l,i,c,d;for(o=0;o<7;o++)l=In([2e3,1]).day(o),i=Xn(this.weekdaysMin(l,"")),c=Xn(this.weekdaysShort(l,"")),d=Xn(this.weekdays(l,"")),t.push(i),r.push(c),a.push(d),s.push(i),s.push(c),s.push(d);t.sort(e),r.sort(e),a.sort(e),s.sort(e),this._weekdaysRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function Kh(){return this.hours()%12||12}function qV(){return this.hours()||24}ve("H",["HH",2],0,"hour");ve("h",["hh",2],0,Kh);ve("k",["kk",2],0,qV);ve("hmm",0,0,function(){return""+Kh.apply(this)+Rn(this.minutes(),2)});ve("hmmss",0,0,function(){return""+Kh.apply(this)+Rn(this.minutes(),2)+Rn(this.seconds(),2)});ve("Hmm",0,0,function(){return""+this.hours()+Rn(this.minutes(),2)});ve("Hmmss",0,0,function(){return""+this.hours()+Rn(this.minutes(),2)+Rn(this.seconds(),2)});function a2(e,t){ve(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}a2("a",!0);a2("A",!1);function s2(e,t){return t._meridiemParse}de("a",s2);de("A",s2);de("H",lt,Hh);de("h",lt,Io);de("k",lt,Io);de("HH",lt,Ar);de("hh",lt,Ar);de("kk",lt,Ar);de("hmm",q1);de("hmmss",G1);de("Hmm",q1);de("Hmmss",G1);Xe(["H","HH"],kt);Xe(["k","kk"],function(e,t,r){var a=Ie(e);t[kt]=a===24?0:a});Xe(["a","A"],function(e,t,r){r._isPm=r._locale.isPM(e),r._meridiem=e});Xe(["h","hh"],function(e,t,r){t[kt]=Ie(e),Oe(r).bigHour=!0});Xe("hmm",function(e,t,r){var a=e.length-2;t[kt]=Ie(e.substr(0,a)),t[on]=Ie(e.substr(a)),Oe(r).bigHour=!0});Xe("hmmss",function(e,t,r){var a=e.length-4,s=e.length-2;t[kt]=Ie(e.substr(0,a)),t[on]=Ie(e.substr(a,2)),t[Gn]=Ie(e.substr(s)),Oe(r).bigHour=!0});Xe("Hmm",function(e,t,r){var a=e.length-2;t[kt]=Ie(e.substr(0,a)),t[on]=Ie(e.substr(a))});Xe("Hmmss",function(e,t,r){var a=e.length-4,s=e.length-2;t[kt]=Ie(e.substr(0,a)),t[on]=Ie(e.substr(a,2)),t[Gn]=Ie(e.substr(s))});function GV(e){return(e+"").toLowerCase().charAt(0)==="p"}var KV=/[ap]\.?m?\.?/i,XV=$o("Hours",!0);function QV(e,t,r){return e>11?r?"pm":"PM":r?"am":"AM"}var o2={calendar:jU,longDateFormat:VU,invalidDate:HU,ordinal:qU,dayOfMonthOrdinalParse:GU,relativeTime:XU,months:mV,monthsShort:Q1,week:SV,weekdays:OV,weekdaysMin:RV,weekdaysShort:n2,meridiemParse:KV},it={},tl={},ii;function JV(e,t){var r,a=Math.min(e.length,t.length);for(r=0;r<a;r+=1)if(e[r]!==t[r])return r;return a}function TE(e){return e&&e.toLowerCase().replace("_","-")}function ZV(e){for(var t=0,r,a,s,o;t<e.length;){for(o=TE(e[t]).split("-"),r=o.length,a=TE(e[t+1]),a=a?a.split("-"):null;r>0;){if(s=Bd(o.slice(0,r).join("-")),s)return s;if(a&&a.length>=r&&JV(o,a)>=r-1)break;r--}t++}return ii}function eW(e){return!!(e&&e.match("^[^/\\\\]*$"))}function Bd(e){var t=null,r;if(it[e]===void 0&&typeof Wc<"u"&&Wc&&Wc.exports&&eW(e))try{t=ii._abbr,r=require,r("./locale/"+e),Ra(t)}catch{it[e]=null}return it[e]}function Ra(e,t){var r;return e&&(cr(t)?r=la(e):r=Xh(e,t),r?ii=r:typeof console<"u"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),ii._abbr}function Xh(e,t){if(t!==null){var r,a=o2;if(t.abbr=e,it[e]!=null)V1("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),a=it[e]._config;else if(t.parentLocale!=null)if(it[t.parentLocale]!=null)a=it[t.parentLocale]._config;else if(r=Bd(t.parentLocale),r!=null)a=r._config;else return tl[t.parentLocale]||(tl[t.parentLocale]=[]),tl[t.parentLocale].push({name:e,config:t}),null;return it[e]=new Bh(Rp(a,t)),tl[e]&&tl[e].forEach(function(s){Xh(s.name,s.config)}),Ra(e),it[e]}else return delete it[e],null}function tW(e,t){if(t!=null){var r,a,s=o2;it[e]!=null&&it[e].parentLocale!=null?it[e].set(Rp(it[e]._config,t)):(a=Bd(e),a!=null&&(s=a._config),t=Rp(s,t),a==null&&(t.abbr=e),r=new Bh(t),r.parentLocale=it[e],it[e]=r),Ra(e)}else it[e]!=null&&(it[e].parentLocale!=null?(it[e]=it[e].parentLocale,e===Ra()&&Ra(e)):it[e]!=null&&delete it[e]);return it[e]}function la(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return ii;if(!mn(e)){if(t=Bd(e),t)return t;e=[e]}return ZV(e)}function rW(){return Mp(it)}function Qh(e){var t,r=e._a;return r&&Oe(e).overflow===-2&&(t=r[qn]<0||r[qn]>11?qn:r[Nn]<1||r[Nn]>Yh(r[Gt],r[qn])?Nn:r[kt]<0||r[kt]>24||r[kt]===24&&(r[on]!==0||r[Gn]!==0||r[ns]!==0)?kt:r[on]<0||r[on]>59?on:r[Gn]<0||r[Gn]>59?Gn:r[ns]<0||r[ns]>999?ns:-1,Oe(e)._overflowDayOfYear&&(t<Gt||t>Nn)&&(t=Nn),Oe(e)._overflowWeeks&&t===-1&&(t=oV),Oe(e)._overflowWeekday&&t===-1&&(t=lV),Oe(e).overflow=t),e}var nW=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,aW=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,sW=/Z|[+-]\d\d(?::?\d\d)?/,uc=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Zm=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],oW=/^\/?Date\((-?\d+)/i,lW=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,iW={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function l2(e){var t,r,a=e._i,s=nW.exec(a)||aW.exec(a),o,l,i,c,d=uc.length,u=Zm.length;if(s){for(Oe(e).iso=!0,t=0,r=d;t<r;t++)if(uc[t][1].exec(s[1])){l=uc[t][0],o=uc[t][2]!==!1;break}if(l==null){e._isValid=!1;return}if(s[3]){for(t=0,r=u;t<r;t++)if(Zm[t][1].exec(s[3])){i=(s[2]||" ")+Zm[t][0];break}if(i==null){e._isValid=!1;return}}if(!o&&i!=null){e._isValid=!1;return}if(s[4])if(sW.exec(s[4]))c="Z";else{e._isValid=!1;return}e._f=l+(i||"")+(c||""),Zh(e)}else e._isValid=!1}function cW(e,t,r,a,s,o){var l=[uW(e),Q1.indexOf(t),parseInt(r,10),parseInt(a,10),parseInt(s,10)];return o&&l.push(parseInt(o,10)),l}function uW(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function dW(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function mW(e,t,r){if(e){var a=n2.indexOf(e),s=new Date(t[0],t[1],t[2]).getDay();if(a!==s)return Oe(r).weekdayMismatch=!0,r._isValid=!1,!1}return!0}function fW(e,t,r){if(e)return iW[e];if(t)return 0;var a=parseInt(r,10),s=a%100,o=(a-s)/100;return o*60+s}function i2(e){var t=lW.exec(dW(e._i)),r;if(t){if(r=cW(t[4],t[3],t[2],t[5],t[6],t[7]),!mW(t[1],r,e))return;e._a=r,e._tzm=fW(t[8],t[9],t[10]),e._d=oi.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),Oe(e).rfc2822=!0}else e._isValid=!1}function pW(e){var t=oW.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}if(l2(e),e._isValid===!1)delete e._isValid;else return;if(i2(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:oe.createFromInputFallback(e)}oe.createFromInputFallback=Kr("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function _s(e,t,r){return e??t??r}function gW(e){var t=new Date(oe.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Jh(e){var t,r,a=[],s,o,l;if(!e._d){for(s=gW(e),e._w&&e._a[Nn]==null&&e._a[qn]==null&&hW(e),e._dayOfYear!=null&&(l=_s(e._a[Gt],s[Gt]),(e._dayOfYear>bl(l)||e._dayOfYear===0)&&(Oe(e)._overflowDayOfYear=!0),r=oi(l,0,e._dayOfYear),e._a[qn]=r.getUTCMonth(),e._a[Nn]=r.getUTCDate()),t=0;t<3&&e._a[t]==null;++t)e._a[t]=a[t]=s[t];for(;t<7;t++)e._a[t]=a[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[kt]===24&&e._a[on]===0&&e._a[Gn]===0&&e._a[ns]===0&&(e._nextDay=!0,e._a[kt]=0),e._d=(e._useUTC?oi:wV).apply(null,a),o=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[kt]=24),e._w&&typeof e._w.d<"u"&&e._w.d!==o&&(Oe(e).weekdayMismatch=!0)}}function hW(e){var t,r,a,s,o,l,i,c,d;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(o=1,l=4,r=_s(t.GG,e._a[Gt],li(ot(),1,4).year),a=_s(t.W,1),s=_s(t.E,1),(s<1||s>7)&&(c=!0)):(o=e._locale._week.dow,l=e._locale._week.doy,d=li(ot(),o,l),r=_s(t.gg,e._a[Gt],d.year),a=_s(t.w,d.week),t.d!=null?(s=t.d,(s<0||s>6)&&(c=!0)):t.e!=null?(s=t.e+o,(t.e<0||t.e>6)&&(c=!0)):s=o),a<1||a>Qn(r,o,l)?Oe(e)._overflowWeeks=!0:c!=null?Oe(e)._overflowWeekday=!0:(i=r2(r,a,s,o,l),e._a[Gt]=i.year,e._dayOfYear=i.dayOfYear)}oe.ISO_8601=function(){};oe.RFC_2822=function(){};function Zh(e){if(e._f===oe.ISO_8601){l2(e);return}if(e._f===oe.RFC_2822){i2(e);return}e._a=[],Oe(e).empty=!0;var t=""+e._i,r,a,s,o,l,i=t.length,c=0,d,u;for(s=W1(e._f,e._locale).match(zh)||[],u=s.length,r=0;r<u;r++)o=s[r],a=(t.match(nV(o,e))||[])[0],a&&(l=t.substr(0,t.indexOf(a)),l.length>0&&Oe(e).unusedInput.push(l),t=t.slice(t.indexOf(a)+a.length),c+=a.length),Js[o]?(a?Oe(e).empty=!1:Oe(e).unusedTokens.push(o),sV(o,a,e)):e._strict&&!a&&Oe(e).unusedTokens.push(o);Oe(e).charsLeftOver=i-c,t.length>0&&Oe(e).unusedInput.push(t),e._a[kt]<=12&&Oe(e).bigHour===!0&&e._a[kt]>0&&(Oe(e).bigHour=void 0),Oe(e).parsedDateParts=e._a.slice(0),Oe(e).meridiem=e._meridiem,e._a[kt]=vW(e._locale,e._a[kt],e._meridiem),d=Oe(e).era,d!==null&&(e._a[Gt]=e._locale.erasConvertYear(d,e._a[Gt])),Jh(e),Qh(e)}function vW(e,t,r){var a;return r==null?t:e.meridiemHour!=null?e.meridiemHour(t,r):(e.isPM!=null&&(a=e.isPM(r),a&&t<12&&(t+=12),!a&&t===12&&(t=0)),t)}function yW(e){var t,r,a,s,o,l,i=!1,c=e._f.length;if(c===0){Oe(e).invalidFormat=!0,e._d=new Date(NaN);return}for(s=0;s<c;s++)o=0,l=!1,t=jh({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[s],Zh(t),Fh(t)&&(l=!0),o+=Oe(t).charsLeftOver,o+=Oe(t).unusedTokens.length*10,Oe(t).score=o,i?o<a&&(a=o,r=t):(a==null||o<a||l)&&(a=o,r=t,l&&(i=!0));xa(e,r||t)}function EW(e){if(!e._d){var t=Uh(e._i),r=t.day===void 0?t.date:t.day;e._a=z1([t.year,t.month,r,t.hour,t.minute,t.second,t.millisecond],function(a){return a&&parseInt(a,10)}),Jh(e)}}function xW(e){var t=new Oi(Qh(c2(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function c2(e){var t=e._i,r=e._f;return e._locale=e._locale||la(e._l),t===null||r===void 0&&t===""?Md({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),fn(t)?new Oi(Qh(t)):(_i(t)?e._d=t:mn(r)?yW(e):r?Zh(e):bW(e),Fh(e)||(e._d=null),e))}function bW(e){var t=e._i;cr(t)?e._d=new Date(oe.now()):_i(t)?e._d=new Date(t.valueOf()):typeof t=="string"?pW(e):mn(t)?(e._a=z1(t.slice(0),function(r){return parseInt(r,10)}),Jh(e)):cs(t)?EW(e):aa(t)?e._d=new Date(t):oe.createFromInputFallback(e)}function u2(e,t,r,a,s){var o={};return(t===!0||t===!1)&&(a=t,t=void 0),(r===!0||r===!1)&&(a=r,r=void 0),(cs(e)&&$h(e)||mn(e)&&e.length===0)&&(e=void 0),o._isAMomentObject=!0,o._useUTC=o._isUTC=s,o._l=r,o._i=e,o._f=t,o._strict=a,xW(o)}function ot(e,t,r,a){return u2(e,t,r,a,!1)}var wW=Kr("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=ot.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:Md()}),NW=Kr("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=ot.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:Md()});function d2(e,t){var r,a;if(t.length===1&&mn(t[0])&&(t=t[0]),!t.length)return ot();for(r=t[0],a=1;a<t.length;++a)(!t[a].isValid()||t[a][e](r))&&(r=t[a]);return r}function SW(){var e=[].slice.call(arguments,0);return d2("isBefore",e)}function CW(){var e=[].slice.call(arguments,0);return d2("isAfter",e)}var kW=function(){return Date.now?Date.now():+new Date},rl=["year","quarter","month","week","day","hour","minute","second","millisecond"];function DW(e){var t,r=!1,a,s=rl.length;for(t in e)if(Ve(e,t)&&!(yt.call(rl,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return!1;for(a=0;a<s;++a)if(e[rl[a]]){if(r)return!1;parseFloat(e[rl[a]])!==Ie(e[rl[a]])&&(r=!0)}return!0}function AW(){return this._isValid}function TW(){return hn(NaN)}function zd(e){var t=Uh(e),r=t.year||0,a=t.quarter||0,s=t.month||0,o=t.week||t.isoWeek||0,l=t.day||0,i=t.hour||0,c=t.minute||0,d=t.second||0,u=t.millisecond||0;this._isValid=DW(t),this._milliseconds=+u+d*1e3+c*6e4+i*1e3*60*60,this._days=+l+o*7,this._months=+s+a*3+r*12,this._data={},this._locale=la(),this._bubble()}function Bc(e){return e instanceof zd}function Lp(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function _W(e,t,r){var a=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),o=0,l;for(l=0;l<a;l++)Ie(e[l])!==Ie(t[l])&&o++;return o+s}function m2(e,t){ve(e,0,0,function(){var r=this.utcOffset(),a="+";return r<0&&(r=-r,a="-"),a+Rn(~~(r/60),2)+t+Rn(~~r%60,2)})}m2("Z",":");m2("ZZ","");de("Z",Fd);de("ZZ",Fd);Xe(["Z","ZZ"],function(e,t,r){r._useUTC=!0,r._tzm=e0(Fd,e)});var OW=/([\+\-]|\d\d)/gi;function e0(e,t){var r=(t||"").match(e),a,s,o;return r===null?null:(a=r[r.length-1]||[],s=(a+"").match(OW)||["-",0,0],o=+(s[1]*60)+Ie(s[2]),o===0?0:s[0]==="+"?o:-o)}function t0(e,t){var r,a;return t._isUTC?(r=t.clone(),a=(fn(e)||_i(e)?e.valueOf():ot(e).valueOf())-r.valueOf(),r._d.setTime(r._d.valueOf()+a),oe.updateOffset(r,!1),r):ot(e).local()}function Ip(e){return-Math.round(e._d.getTimezoneOffset())}oe.updateOffset=function(){};function RW(e,t,r){var a=this._offset||0,s;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=e0(Fd,e),e===null)return this}else Math.abs(e)<16&&!r&&(e=e*60);return!this._isUTC&&t&&(s=Ip(this)),this._offset=e,this._isUTC=!0,s!=null&&this.add(s,"m"),a!==e&&(!t||this._changeInProgress?g2(this,hn(e-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,oe.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?a:Ip(this)}function MW(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function PW(e){return this.utcOffset(0,e)}function LW(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Ip(this),"m")),this}function IW(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=e0(tV,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function $W(e){return this.isValid()?(e=e?ot(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function FW(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function jW(){if(!cr(this._isDSTShifted))return this._isDSTShifted;var e={},t;return jh(e,this),e=c2(e),e._a?(t=e._isUTC?In(e._a):ot(e._a),this._isDSTShifted=this.isValid()&&_W(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function BW(){return this.isValid()?!this._isUTC:!1}function zW(){return this.isValid()?this._isUTC:!1}function f2(){return this.isValid()?this._isUTC&&this._offset===0:!1}var UW=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,VW=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function hn(e,t){var r=e,a=null,s,o,l;return Bc(e)?r={ms:e._milliseconds,d:e._days,M:e._months}:aa(e)||!isNaN(+e)?(r={},t?r[t]=+e:r.milliseconds=+e):(a=UW.exec(e))?(s=a[1]==="-"?-1:1,r={y:0,d:Ie(a[Nn])*s,h:Ie(a[kt])*s,m:Ie(a[on])*s,s:Ie(a[Gn])*s,ms:Ie(Lp(a[ns]*1e3))*s}):(a=VW.exec(e))?(s=a[1]==="-"?-1:1,r={y:Ya(a[2],s),M:Ya(a[3],s),w:Ya(a[4],s),d:Ya(a[5],s),h:Ya(a[6],s),m:Ya(a[7],s),s:Ya(a[8],s)}):r==null?r={}:typeof r=="object"&&("from"in r||"to"in r)&&(l=WW(ot(r.from),ot(r.to)),r={},r.ms=l.milliseconds,r.M=l.months),o=new zd(r),Bc(e)&&Ve(e,"_locale")&&(o._locale=e._locale),Bc(e)&&Ve(e,"_isValid")&&(o._isValid=e._isValid),o}hn.fn=zd.prototype;hn.invalid=TW;function Ya(e,t){var r=e&&parseFloat(e.replace(",","."));return(isNaN(r)?0:r)*t}function _E(e,t){var r={};return r.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(r.months,"M").isAfter(t)&&--r.months,r.milliseconds=+t-+e.clone().add(r.months,"M"),r}function WW(e,t){var r;return e.isValid()&&t.isValid()?(t=t0(t,e),e.isBefore(t)?r=_E(e,t):(r=_E(t,e),r.milliseconds=-r.milliseconds,r.months=-r.months),r):{milliseconds:0,months:0}}function p2(e,t){return function(r,a){var s,o;return a!==null&&!isNaN(+a)&&(V1(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),o=r,r=a,a=o),s=hn(r,a),g2(this,s,e),this}}function g2(e,t,r,a){var s=t._milliseconds,o=Lp(t._days),l=Lp(t._months);e.isValid()&&(a=a??!0,l&&Z1(e,si(e,"Month")+l*r),o&&X1(e,"Date",si(e,"Date")+o*r),s&&e._d.setTime(e._d.valueOf()+s*r),a&&oe.updateOffset(e,o||l))}var HW=p2(1,"add"),YW=p2(-1,"subtract");function h2(e){return typeof e=="string"||e instanceof String}function qW(e){return fn(e)||_i(e)||h2(e)||aa(e)||KW(e)||GW(e)||e===null||e===void 0}function GW(e){var t=cs(e)&&!$h(e),r=!1,a=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],s,o,l=a.length;for(s=0;s<l;s+=1)o=a[s],r=r||Ve(e,o);return t&&r}function KW(e){var t=mn(e),r=!1;return t&&(r=e.filter(function(a){return!aa(a)&&h2(e)}).length===0),t&&r}function XW(e){var t=cs(e)&&!$h(e),r=!1,a=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],s,o;for(s=0;s<a.length;s+=1)o=a[s],r=r||Ve(e,o);return t&&r}function QW(e,t){var r=e.diff(t,"days",!0);return r<-6?"sameElse":r<-1?"lastWeek":r<0?"lastDay":r<1?"sameDay":r<2?"nextDay":r<7?"nextWeek":"sameElse"}function JW(e,t){arguments.length===1&&(arguments[0]?qW(arguments[0])?(e=arguments[0],t=void 0):XW(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var r=e||ot(),a=t0(r,this).startOf("day"),s=oe.calendarFormat(this,a)||"sameElse",o=t&&($n(t[s])?t[s].call(this,r):t[s]);return this.format(o||this.localeData().calendar(s,this,ot(r)))}function ZW(){return new Oi(this)}function eH(e,t){var r=fn(e)?e:ot(e);return this.isValid()&&r.isValid()?(t=Xr(t)||"millisecond",t==="millisecond"?this.valueOf()>r.valueOf():r.valueOf()<this.clone().startOf(t).valueOf()):!1}function tH(e,t){var r=fn(e)?e:ot(e);return this.isValid()&&r.isValid()?(t=Xr(t)||"millisecond",t==="millisecond"?this.valueOf()<r.valueOf():this.clone().endOf(t).valueOf()<r.valueOf()):!1}function rH(e,t,r,a){var s=fn(e)?e:ot(e),o=fn(t)?t:ot(t);return this.isValid()&&s.isValid()&&o.isValid()?(a=a||"()",(a[0]==="("?this.isAfter(s,r):!this.isBefore(s,r))&&(a[1]===")"?this.isBefore(o,r):!this.isAfter(o,r))):!1}function nH(e,t){var r=fn(e)?e:ot(e),a;return this.isValid()&&r.isValid()?(t=Xr(t)||"millisecond",t==="millisecond"?this.valueOf()===r.valueOf():(a=r.valueOf(),this.clone().startOf(t).valueOf()<=a&&a<=this.clone().endOf(t).valueOf())):!1}function aH(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function sH(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function oH(e,t,r){var a,s,o;if(!this.isValid())return NaN;if(a=t0(e,this),!a.isValid())return NaN;switch(s=(a.utcOffset()-this.utcOffset())*6e4,t=Xr(t),t){case"year":o=zc(this,a)/12;break;case"month":o=zc(this,a);break;case"quarter":o=zc(this,a)/3;break;case"second":o=(this-a)/1e3;break;case"minute":o=(this-a)/6e4;break;case"hour":o=(this-a)/36e5;break;case"day":o=(this-a-s)/864e5;break;case"week":o=(this-a-s)/6048e5;break;default:o=this-a}return r?o:Fr(o)}function zc(e,t){if(e.date()<t.date())return-zc(t,e);var r=(t.year()-e.year())*12+(t.month()-e.month()),a=e.clone().add(r,"months"),s,o;return t-a<0?(s=e.clone().add(r-1,"months"),o=(t-a)/(a-s)):(s=e.clone().add(r+1,"months"),o=(t-a)/(s-a)),-(r+o)||0}oe.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";oe.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function lH(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function iH(e){if(!this.isValid())return null;var t=e!==!0,r=t?this.clone().utc():this;return r.year()<0||r.year()>9999?jc(r,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):$n(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",jc(r,"Z")):jc(r,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function cH(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",r,a,s,o;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z"),r="["+e+'("]',a=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",s="-MM-DD[T]HH:mm:ss.SSS",o=t+'[")]',this.format(r+a+s+o)}function uH(e){e||(e=this.isUtc()?oe.defaultFormatUtc:oe.defaultFormat);var t=jc(this,e);return this.localeData().postformat(t)}function dH(e,t){return this.isValid()&&(fn(e)&&e.isValid()||ot(e).isValid())?hn({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function mH(e){return this.from(ot(),e)}function fH(e,t){return this.isValid()&&(fn(e)&&e.isValid()||ot(e).isValid())?hn({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function pH(e){return this.to(ot(),e)}function v2(e){var t;return e===void 0?this._locale._abbr:(t=la(e),t!=null&&(this._locale=t),this)}var y2=Kr("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function E2(){return this._locale}var Ou=1e3,Zs=60*Ou,Ru=60*Zs,x2=(365*400+97)*24*Ru;function eo(e,t){return(e%t+t)%t}function b2(e,t,r){return e<100&&e>=0?new Date(e+400,t,r)-x2:new Date(e,t,r).valueOf()}function w2(e,t,r){return e<100&&e>=0?Date.UTC(e+400,t,r)-x2:Date.UTC(e,t,r)}function gH(e){var t,r;if(e=Xr(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(r=this._isUTC?w2:b2,e){case"year":t=r(this.year(),0,1);break;case"quarter":t=r(this.year(),this.month()-this.month()%3,1);break;case"month":t=r(this.year(),this.month(),1);break;case"week":t=r(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=r(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=eo(t+(this._isUTC?0:this.utcOffset()*Zs),Ru);break;case"minute":t=this._d.valueOf(),t-=eo(t,Zs);break;case"second":t=this._d.valueOf(),t-=eo(t,Ou);break}return this._d.setTime(t),oe.updateOffset(this,!0),this}function hH(e){var t,r;if(e=Xr(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(r=this._isUTC?w2:b2,e){case"year":t=r(this.year()+1,0,1)-1;break;case"quarter":t=r(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=r(this.year(),this.month()+1,1)-1;break;case"week":t=r(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=r(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=r(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=Ru-eo(t+(this._isUTC?0:this.utcOffset()*Zs),Ru)-1;break;case"minute":t=this._d.valueOf(),t+=Zs-eo(t,Zs)-1;break;case"second":t=this._d.valueOf(),t+=Ou-eo(t,Ou)-1;break}return this._d.setTime(t),oe.updateOffset(this,!0),this}function vH(){return this._d.valueOf()-(this._offset||0)*6e4}function yH(){return Math.floor(this.valueOf()/1e3)}function EH(){return new Date(this.valueOf())}function xH(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function bH(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function wH(){return this.isValid()?this.toISOString():null}function NH(){return Fh(this)}function SH(){return xa({},Oe(this))}function CH(){return Oe(this).overflow}function kH(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}ve("N",0,0,"eraAbbr");ve("NN",0,0,"eraAbbr");ve("NNN",0,0,"eraAbbr");ve("NNNN",0,0,"eraName");ve("NNNNN",0,0,"eraNarrow");ve("y",["y",1],"yo","eraYear");ve("y",["yy",2],0,"eraYear");ve("y",["yyy",3],0,"eraYear");ve("y",["yyyy",4],0,"eraYear");de("N",r0);de("NN",r0);de("NNN",r0);de("NNNN",$H);de("NNNNN",FH);Xe(["N","NN","NNN","NNNN","NNNNN"],function(e,t,r,a){var s=r._locale.erasParse(e,a,r._strict);s?Oe(r).era=s:Oe(r).invalidEra=e});de("y",Lo);de("yy",Lo);de("yyy",Lo);de("yyyy",Lo);de("yo",jH);Xe(["y","yy","yyy","yyyy"],Gt);Xe(["yo"],function(e,t,r,a){var s;r._locale._eraYearOrdinalRegex&&(s=e.match(r._locale._eraYearOrdinalRegex)),r._locale.eraYearOrdinalParse?t[Gt]=r._locale.eraYearOrdinalParse(e,s):t[Gt]=parseInt(e,10)});function DH(e,t){var r,a,s,o=this._eras||la("en")._eras;for(r=0,a=o.length;r<a;++r){switch(typeof o[r].since){case"string":s=oe(o[r].since).startOf("day"),o[r].since=s.valueOf();break}switch(typeof o[r].until){case"undefined":o[r].until=1/0;break;case"string":s=oe(o[r].until).startOf("day").valueOf(),o[r].until=s.valueOf();break}}return o}function AH(e,t,r){var a,s,o=this.eras(),l,i,c;for(e=e.toUpperCase(),a=0,s=o.length;a<s;++a)if(l=o[a].name.toUpperCase(),i=o[a].abbr.toUpperCase(),c=o[a].narrow.toUpperCase(),r)switch(t){case"N":case"NN":case"NNN":if(i===e)return o[a];break;case"NNNN":if(l===e)return o[a];break;case"NNNNN":if(c===e)return o[a];break}else if([l,i,c].indexOf(e)>=0)return o[a]}function TH(e,t){var r=e.since<=e.until?1:-1;return t===void 0?oe(e.since).year():oe(e.since).year()+(t-e.offset)*r}function _H(){var e,t,r,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e)if(r=this.clone().startOf("day").valueOf(),a[e].since<=r&&r<=a[e].until||a[e].until<=r&&r<=a[e].since)return a[e].name;return""}function OH(){var e,t,r,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e)if(r=this.clone().startOf("day").valueOf(),a[e].since<=r&&r<=a[e].until||a[e].until<=r&&r<=a[e].since)return a[e].narrow;return""}function RH(){var e,t,r,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e)if(r=this.clone().startOf("day").valueOf(),a[e].since<=r&&r<=a[e].until||a[e].until<=r&&r<=a[e].since)return a[e].abbr;return""}function MH(){var e,t,r,a,s=this.localeData().eras();for(e=0,t=s.length;e<t;++e)if(r=s[e].since<=s[e].until?1:-1,a=this.clone().startOf("day").valueOf(),s[e].since<=a&&a<=s[e].until||s[e].until<=a&&a<=s[e].since)return(this.year()-oe(s[e].since).year())*r+s[e].offset;return this.year()}function PH(e){return Ve(this,"_erasNameRegex")||n0.call(this),e?this._erasNameRegex:this._erasRegex}function LH(e){return Ve(this,"_erasAbbrRegex")||n0.call(this),e?this._erasAbbrRegex:this._erasRegex}function IH(e){return Ve(this,"_erasNarrowRegex")||n0.call(this),e?this._erasNarrowRegex:this._erasRegex}function r0(e,t){return t.erasAbbrRegex(e)}function $H(e,t){return t.erasNameRegex(e)}function FH(e,t){return t.erasNarrowRegex(e)}function jH(e,t){return t._eraYearOrdinalRegex||Lo}function n0(){var e=[],t=[],r=[],a=[],s,o,l,i,c,d=this.eras();for(s=0,o=d.length;s<o;++s)l=Xn(d[s].name),i=Xn(d[s].abbr),c=Xn(d[s].narrow),t.push(l),e.push(i),r.push(c),a.push(l),a.push(i),a.push(c);this._erasRegex=new RegExp("^("+a.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+r.join("|")+")","i")}ve(0,["gg",2],0,function(){return this.weekYear()%100});ve(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Ud(e,t){ve(0,[e,e.length],0,t)}Ud("gggg","weekYear");Ud("ggggg","weekYear");Ud("GGGG","isoWeekYear");Ud("GGGGG","isoWeekYear");de("G",$d);de("g",$d);de("GG",lt,Ar);de("gg",lt,Ar);de("GGGG",Wh,Vh);de("gggg",Wh,Vh);de("GGGGG",Id,Pd);de("ggggg",Id,Pd);Mi(["gggg","ggggg","GGGG","GGGGG"],function(e,t,r,a){t[a.substr(0,2)]=Ie(e)});Mi(["gg","GG"],function(e,t,r,a){t[a]=oe.parseTwoDigitYear(e)});function BH(e){return N2.call(this,e,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function zH(e){return N2.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function UH(){return Qn(this.year(),1,4)}function VH(){return Qn(this.isoWeekYear(),1,4)}function WH(){var e=this.localeData()._week;return Qn(this.year(),e.dow,e.doy)}function HH(){var e=this.localeData()._week;return Qn(this.weekYear(),e.dow,e.doy)}function N2(e,t,r,a,s){var o;return e==null?li(this,a,s).year:(o=Qn(e,a,s),t>o&&(t=o),YH.call(this,e,t,r,a,s))}function YH(e,t,r,a,s){var o=r2(e,t,r,a,s),l=oi(o.year,0,o.dayOfYear);return this.year(l.getUTCFullYear()),this.month(l.getUTCMonth()),this.date(l.getUTCDate()),this}ve("Q",0,"Qo","quarter");de("Q",H1);Xe("Q",function(e,t){t[qn]=(Ie(e)-1)*3});function qH(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}ve("D",["DD",2],"Do","date");de("D",lt,Io);de("DD",lt,Ar);de("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});Xe(["D","DD"],Nn);Xe("Do",function(e,t){t[Nn]=Ie(e.match(lt)[0])});var S2=$o("Date",!0);ve("DDD",["DDDD",3],"DDDo","dayOfYear");de("DDD",Ld);de("DDDD",Y1);Xe(["DDD","DDDD"],function(e,t,r){r._dayOfYear=Ie(e)});function GH(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}ve("m",["mm",2],0,"minute");de("m",lt,Hh);de("mm",lt,Ar);Xe(["m","mm"],on);var KH=$o("Minutes",!1);ve("s",["ss",2],0,"second");de("s",lt,Hh);de("ss",lt,Ar);Xe(["s","ss"],Gn);var XH=$o("Seconds",!1);ve("S",0,0,function(){return~~(this.millisecond()/100)});ve(0,["SS",2],0,function(){return~~(this.millisecond()/10)});ve(0,["SSS",3],0,"millisecond");ve(0,["SSSS",4],0,function(){return this.millisecond()*10});ve(0,["SSSSS",5],0,function(){return this.millisecond()*100});ve(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});ve(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});ve(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});ve(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});de("S",Ld,H1);de("SS",Ld,Ar);de("SSS",Ld,Y1);var ba,C2;for(ba="SSSS";ba.length<=9;ba+="S")de(ba,Lo);function QH(e,t){t[ns]=Ie(("0."+e)*1e3)}for(ba="S";ba.length<=9;ba+="S")Xe(ba,QH);C2=$o("Milliseconds",!1);ve("z",0,0,"zoneAbbr");ve("zz",0,0,"zoneName");function JH(){return this._isUTC?"UTC":""}function ZH(){return this._isUTC?"Coordinated Universal Time":""}var re=Oi.prototype;re.add=HW;re.calendar=JW;re.clone=ZW;re.diff=oH;re.endOf=hH;re.format=uH;re.from=dH;re.fromNow=mH;re.to=fH;re.toNow=pH;re.get=cV;re.invalidAt=CH;re.isAfter=eH;re.isBefore=tH;re.isBetween=rH;re.isSame=nH;re.isSameOrAfter=aH;re.isSameOrBefore=sH;re.isValid=NH;re.lang=y2;re.locale=v2;re.localeData=E2;re.max=NW;re.min=wW;re.parsingFlags=SH;re.set=uV;re.startOf=gH;re.subtract=YW;re.toArray=xH;re.toObject=bH;re.toDate=EH;re.toISOString=iH;re.inspect=cH;typeof Symbol<"u"&&Symbol.for!=null&&(re[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});re.toJSON=wH;re.toString=lH;re.unix=yH;re.valueOf=vH;re.creationData=kH;re.eraName=_H;re.eraNarrow=OH;re.eraAbbr=RH;re.eraYear=MH;re.year=K1;re.isLeapYear=iV;re.weekYear=BH;re.isoWeekYear=zH;re.quarter=re.quarters=qH;re.month=e2;re.daysInMonth=EV;re.week=re.weeks=DV;re.isoWeek=re.isoWeeks=AV;re.weeksInYear=WH;re.weeksInWeekYear=HH;re.isoWeeksInYear=UH;re.isoWeeksInISOWeekYear=VH;re.date=S2;re.day=re.days=zV;re.weekday=UV;re.isoWeekday=VV;re.dayOfYear=GH;re.hour=re.hours=XV;re.minute=re.minutes=KH;re.second=re.seconds=XH;re.millisecond=re.milliseconds=C2;re.utcOffset=RW;re.utc=PW;re.local=LW;re.parseZone=IW;re.hasAlignedHourOffset=$W;re.isDST=FW;re.isLocal=BW;re.isUtcOffset=zW;re.isUtc=f2;re.isUTC=f2;re.zoneAbbr=JH;re.zoneName=ZH;re.dates=Kr("dates accessor is deprecated. Use date instead.",S2);re.months=Kr("months accessor is deprecated. Use month instead",e2);re.years=Kr("years accessor is deprecated. Use year instead",K1);re.zone=Kr("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",MW);re.isDSTShifted=Kr("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",jW);function eY(e){return ot(e*1e3)}function tY(){return ot.apply(null,arguments).parseZone()}function k2(e){return e}var We=Bh.prototype;We.calendar=BU;We.longDateFormat=WU;We.invalidDate=YU;We.ordinal=KU;We.preparse=k2;We.postformat=k2;We.relativeTime=QU;We.pastFuture=JU;We.set=FU;We.eras=DH;We.erasParse=AH;We.erasConvertYear=TH;We.erasAbbrRegex=LH;We.erasNameRegex=PH;We.erasNarrowRegex=IH;We.months=gV;We.monthsShort=hV;We.monthsParse=yV;We.monthsRegex=bV;We.monthsShortRegex=xV;We.week=NV;We.firstDayOfYear=kV;We.firstDayOfWeek=CV;We.weekdays=IV;We.weekdaysMin=FV;We.weekdaysShort=$V;We.weekdaysParse=BV;We.weekdaysRegex=WV;We.weekdaysShortRegex=HV;We.weekdaysMinRegex=YV;We.isPM=GV;We.meridiem=QV;function Mu(e,t,r,a){var s=la(),o=In().set(a,t);return s[r](o,e)}function D2(e,t,r){if(aa(e)&&(t=e,e=void 0),e=e||"",t!=null)return Mu(e,t,r,"month");var a,s=[];for(a=0;a<12;a++)s[a]=Mu(e,a,r,"month");return s}function a0(e,t,r,a){typeof e=="boolean"?(aa(t)&&(r=t,t=void 0),t=t||""):(t=e,r=t,e=!1,aa(t)&&(r=t,t=void 0),t=t||"");var s=la(),o=e?s._week.dow:0,l,i=[];if(r!=null)return Mu(t,(r+o)%7,a,"day");for(l=0;l<7;l++)i[l]=Mu(t,(l+o)%7,a,"day");return i}function rY(e,t){return D2(e,t,"months")}function nY(e,t){return D2(e,t,"monthsShort")}function aY(e,t,r){return a0(e,t,r,"weekdays")}function sY(e,t,r){return a0(e,t,r,"weekdaysShort")}function oY(e,t,r){return a0(e,t,r,"weekdaysMin")}Ra("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,r=Ie(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+r}});oe.lang=Kr("moment.lang is deprecated. Use moment.locale instead.",Ra);oe.langData=Kr("moment.langData is deprecated. Use moment.localeData instead.",la);var Bn=Math.abs;function lY(){var e=this._data;return this._milliseconds=Bn(this._milliseconds),this._days=Bn(this._days),this._months=Bn(this._months),e.milliseconds=Bn(e.milliseconds),e.seconds=Bn(e.seconds),e.minutes=Bn(e.minutes),e.hours=Bn(e.hours),e.months=Bn(e.months),e.years=Bn(e.years),this}function A2(e,t,r,a){var s=hn(t,r);return e._milliseconds+=a*s._milliseconds,e._days+=a*s._days,e._months+=a*s._months,e._bubble()}function iY(e,t){return A2(this,e,t,1)}function cY(e,t){return A2(this,e,t,-1)}function OE(e){return e<0?Math.floor(e):Math.ceil(e)}function uY(){var e=this._milliseconds,t=this._days,r=this._months,a=this._data,s,o,l,i,c;return e>=0&&t>=0&&r>=0||e<=0&&t<=0&&r<=0||(e+=OE($p(r)+t)*864e5,t=0,r=0),a.milliseconds=e%1e3,s=Fr(e/1e3),a.seconds=s%60,o=Fr(s/60),a.minutes=o%60,l=Fr(o/60),a.hours=l%24,t+=Fr(l/24),c=Fr(T2(t)),r+=c,t-=OE($p(c)),i=Fr(r/12),r%=12,a.days=t,a.months=r,a.years=i,this}function T2(e){return e*4800/146097}function $p(e){return e*146097/4800}function dY(e){if(!this.isValid())return NaN;var t,r,a=this._milliseconds;if(e=Xr(e),e==="month"||e==="quarter"||e==="year")switch(t=this._days+a/864e5,r=this._months+T2(t),e){case"month":return r;case"quarter":return r/3;case"year":return r/12}else switch(t=this._days+Math.round($p(this._months)),e){case"week":return t/7+a/6048e5;case"day":return t+a/864e5;case"hour":return t*24+a/36e5;case"minute":return t*1440+a/6e4;case"second":return t*86400+a/1e3;case"millisecond":return Math.floor(t*864e5)+a;default:throw new Error("Unknown unit "+e)}}function ia(e){return function(){return this.as(e)}}var _2=ia("ms"),mY=ia("s"),fY=ia("m"),pY=ia("h"),gY=ia("d"),hY=ia("w"),vY=ia("M"),yY=ia("Q"),EY=ia("y"),xY=_2;function bY(){return hn(this)}function wY(e){return e=Xr(e),this.isValid()?this[e+"s"]():NaN}function ks(e){return function(){return this.isValid()?this._data[e]:NaN}}var NY=ks("milliseconds"),SY=ks("seconds"),CY=ks("minutes"),kY=ks("hours"),DY=ks("days"),AY=ks("months"),TY=ks("years");function _Y(){return Fr(this.days()/7)}var Vn=Math.round,Vs={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function OY(e,t,r,a,s){return s.relativeTime(t||1,!!r,e,a)}function RY(e,t,r,a){var s=hn(e).abs(),o=Vn(s.as("s")),l=Vn(s.as("m")),i=Vn(s.as("h")),c=Vn(s.as("d")),d=Vn(s.as("M")),u=Vn(s.as("w")),m=Vn(s.as("y")),f=o<=r.ss&&["s",o]||o<r.s&&["ss",o]||l<=1&&["m"]||l<r.m&&["mm",l]||i<=1&&["h"]||i<r.h&&["hh",i]||c<=1&&["d"]||c<r.d&&["dd",c];return r.w!=null&&(f=f||u<=1&&["w"]||u<r.w&&["ww",u]),f=f||d<=1&&["M"]||d<r.M&&["MM",d]||m<=1&&["y"]||["yy",m],f[2]=t,f[3]=+e>0,f[4]=a,OY.apply(null,f)}function MY(e){return e===void 0?Vn:typeof e=="function"?(Vn=e,!0):!1}function PY(e,t){return Vs[e]===void 0?!1:t===void 0?Vs[e]:(Vs[e]=t,e==="s"&&(Vs.ss=t-1),!0)}function LY(e,t){if(!this.isValid())return this.localeData().invalidDate();var r=!1,a=Vs,s,o;return typeof e=="object"&&(t=e,e=!1),typeof e=="boolean"&&(r=e),typeof t=="object"&&(a=Object.assign({},Vs,t),t.s!=null&&t.ss==null&&(a.ss=t.s-1)),s=this.localeData(),o=RY(this,!r,a,s),r&&(o=s.pastFuture(+this,o)),s.postformat(o)}var ef=Math.abs;function As(e){return(e>0)-(e<0)||+e}function Vd(){if(!this.isValid())return this.localeData().invalidDate();var e=ef(this._milliseconds)/1e3,t=ef(this._days),r=ef(this._months),a,s,o,l,i=this.asSeconds(),c,d,u,m;return i?(a=Fr(e/60),s=Fr(a/60),e%=60,a%=60,o=Fr(r/12),r%=12,l=e?e.toFixed(3).replace(/\.?0+$/,""):"",c=i<0?"-":"",d=As(this._months)!==As(i)?"-":"",u=As(this._days)!==As(i)?"-":"",m=As(this._milliseconds)!==As(i)?"-":"",c+"P"+(o?d+o+"Y":"")+(r?d+r+"M":"")+(t?u+t+"D":"")+(s||a||e?"T":"")+(s?m+s+"H":"")+(a?m+a+"M":"")+(e?m+l+"S":"")):"P0D"}var ze=zd.prototype;ze.isValid=AW;ze.abs=lY;ze.add=iY;ze.subtract=cY;ze.as=dY;ze.asMilliseconds=_2;ze.asSeconds=mY;ze.asMinutes=fY;ze.asHours=pY;ze.asDays=gY;ze.asWeeks=hY;ze.asMonths=vY;ze.asQuarters=yY;ze.asYears=EY;ze.valueOf=xY;ze._bubble=uY;ze.clone=bY;ze.get=wY;ze.milliseconds=NY;ze.seconds=SY;ze.minutes=CY;ze.hours=kY;ze.days=DY;ze.weeks=_Y;ze.months=AY;ze.years=TY;ze.humanize=LY;ze.toISOString=Vd;ze.toString=Vd;ze.toJSON=Vd;ze.locale=v2;ze.localeData=E2;ze.toIsoString=Kr("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Vd);ze.lang=y2;ve("X",0,0,"unix");ve("x",0,0,"valueOf");de("x",$d);de("X",rV);Xe("X",function(e,t,r){r._d=new Date(parseFloat(e)*1e3)});Xe("x",function(e,t,r){r._d=new Date(Ie(e))});//! moment.js
oe.version="2.30.1";IU(ot);oe.fn=re;oe.min=SW;oe.max=CW;oe.now=kW;oe.utc=In;oe.unix=eY;oe.months=rY;oe.isDate=_i;oe.locale=Ra;oe.invalid=Md;oe.duration=hn;oe.isMoment=fn;oe.weekdays=aY;oe.parseZone=tY;oe.localeData=la;oe.isDuration=Bc;oe.monthsShort=nY;oe.weekdaysMin=oY;oe.defineLocale=Xh;oe.updateLocale=tW;oe.locales=rW;oe.weekdaysShort=sY;oe.normalizeUnits=Xr;oe.relativeTimeRounding=MY;oe.relativeTimeThreshold=PY;oe.calendarFormat=QW;oe.prototype=re;oe.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const IY=LU(oe),$Y=()=>{const[e,t]=g.useState([]),[r,a]=g.useState(!0),[s,o]=g.useState(null),[l,i]=g.useState(null),[c,d]=g.useState(null),[u,m]=g.useState(!1),[f,x]=g.useState({date:"",location:"",notes:""}),[b,y]=g.useState(!1);g.useEffect(()=>{(async()=>{try{a(!0);const S=localStorage.getItem("token"),C=await xe.get("/appointments",{headers:{Authorization:`Bearer ${S}`}});t(Array.isArray(C.data)?C.data:[]),o(null)}catch{o("Error al cargar las citas"),t([])}finally{a(!1)}})()},[]);const v=g.useMemo(()=>{const N=Array.isArray(e)?e:[],S=N.length,C=N.filter(k=>oe(k.date).isAfter(oe())).length,D=N.filter(k=>oe(k.date).isBefore(oe())).length;return{total:S,upcoming:C,past:D}},[e]),p=(Array.isArray(e)?e:[]).map(N=>({id:N.id,title:`${N.client.user.name} - ${oe(N.date).format("HH:mm")}`,start:new Date(N.date),end:oe(N.date).add(1,"hour").toDate(),resource:N})),h=N=>{d(N),x({date:oe(N.date).format("YYYY-MM-DDTHH:mm"),location:N.location||"",notes:""}),m(!0)},E=async N=>{var S,C;if(N.preventDefault(),!!c)try{y(!0);const D=localStorage.getItem("token"),k=await xe.put(`/api/appointments/${c.id}/reschedule`,f,{headers:{Authorization:`Bearer ${D}`}});t(O=>O.map(A=>A.id===c.id?k.data:A)),i("Cita reprogramada exitosamente. Se ha enviado una notificación al cliente."),m(!1),d(null),setTimeout(()=>i(null),5e3)}catch(D){o(((C=(S=D.response)==null?void 0:S.data)==null?void 0:C.message)||"Error al reprogramar la cita")}finally{y(!1)}},w=N=>{x(S=>({...S,[N.target.name]:N.target.value}))};return n.createElement("div",{className:"py-6"},n.createElement("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("h1",{className:"text-3xl font-bold mb-6"},"Calendario de Citas"),l&&n.createElement("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-md"},n.createElement("p",{className:"text-green-700 text-sm"},l)),s&&n.createElement("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-md"},n.createElement("p",{className:"text-red-700 text-sm"},s)),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},n.createElement("div",{className:"bg-white p-4 rounded shadow text-center"},n.createElement("div",{className:"text-gray-500 text-sm"},"Total Citas"),n.createElement("div",{className:"text-2xl font-bold"},v.total)),n.createElement("div",{className:"bg-white p-4 rounded shadow text-center"},n.createElement("div",{className:"text-gray-500 text-sm"},"Próximas"),n.createElement("div",{className:"text-2xl font-bold"},v.upcoming)),n.createElement("div",{className:"bg-white p-4 rounded shadow text-center"},n.createElement("div",{className:"text-gray-500 text-sm"},"Pasadas"),n.createElement("div",{className:"text-2xl font-bold"},v.past))),n.createElement("div",{className:"bg-white rounded shadow p-4"},n.createElement(TU,{localizer:IY,events:p,startAccessor:"start",endAccessor:"end",style:{height:500},onSelectEvent:N=>d(N.resource),messages:{next:"Sig",previous:"Ant",today:"Hoy",month:"Mes",week:"Semana",day:"Día",agenda:"Agenda"}})),c&&!u&&n.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40"},n.createElement("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md relative"},n.createElement("button",{className:"absolute top-2 right-2 text-gray-500",onClick:()=>d(null)},"×"),n.createElement("h2",{className:"text-xl font-bold mb-4"},"Detalle de la Cita"),n.createElement("div",{className:"mb-2"},n.createElement("b",null,"Cliente:")," ",c.client.user.name," (",c.client.user.email,")"),n.createElement("div",{className:"mb-2"},n.createElement("b",null,"Abogado:")," ",c.lawyer.name," (",c.lawyer.email,")"),n.createElement("div",{className:"mb-2"},n.createElement("b",null,"Fecha y hora:")," ",oe(c.date).format("DD/MM/YYYY HH:mm")),n.createElement("div",{className:"mb-2"},n.createElement("b",null,"Lugar:")," ",c.location),c.notes&&n.createElement("div",{className:"mb-2"},n.createElement("b",null,"Notas:")," ",c.notes),n.createElement("div",{className:"flex justify-end space-x-2 mt-4"},n.createElement("button",{className:"px-4 py-2 bg-orange-600 text-white rounded hover:bg-orange-700",onClick:()=>h(c)},"Reprogramar"),n.createElement("button",{className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",onClick:()=>d(null)},"Cerrar")))),u&&c&&n.createElement("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40"},n.createElement("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md relative"},n.createElement("button",{className:"absolute top-2 right-2 text-gray-500",onClick:()=>{m(!1),d(null)}},"×"),n.createElement("h2",{className:"text-xl font-bold mb-4"},"Reprogramar Cita"),n.createElement("p",{className:"text-sm text-gray-600 mb-4"},"Cliente: ",n.createElement("strong",null,c.client.user.name)),n.createElement("form",{onSubmit:E,className:"space-y-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Nueva fecha y hora"),n.createElement("input",{type:"datetime-local",name:"date",value:f.date,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Ubicación"),n.createElement("input",{type:"text",name:"location",value:f.location,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Oficina, online, etc."})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Notas adicionales (opcional)"),n.createElement("textarea",{name:"notes",value:f.notes,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Motivo del cambio, instrucciones especiales, etc."})),n.createElement("div",{className:"flex justify-end space-x-2 pt-4"},n.createElement("button",{type:"button",className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",onClick:()=>{m(!1),d(null)},disabled:b},"Cancelar"),n.createElement("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",disabled:b},b?"Reprogramando...":"Reprogramar Cita"))))),r&&n.createElement("div",{className:"text-center py-8"},"Cargando...")))},FY=()=>{var Q,j;const[e,t]=g.useState([]),[r,a]=g.useState([]),[s,o]=g.useState(!0),[l,i]=g.useState(null),[c,d]=g.useState(""),[u,m]=g.useState("todos"),[f,x]=g.useState(null),[b,y]=g.useState(null),[v,p]=g.useState(!1),[h,E]=g.useState(!1),[w,N]=g.useState(null),{user:S}=Pe(),[C,D]=g.useState("asc");g.useEffect(()=>{(async()=>{try{o(!0);const H=localStorage.getItem("token"),[K,fe]=await Promise.all([Z.get("/users/clients/my"),Z.get("/users/clients/stats")]);t(K.data),i(fe.data),x(null)}catch(H){console.error("Error fetching clients:",H),x("Error al cargar los clientes")}finally{o(!1)}})()},[]),g.useEffect(()=>{let B=e;c&&(B=B.filter(H=>{var K;return H.user.name.toLowerCase().includes(c.toLowerCase())||H.user.email.toLowerCase().includes(c.toLowerCase())||H.dni.toLowerCase().includes(c.toLowerCase())||((K=H.phone)==null?void 0:K.toLowerCase().includes(c.toLowerCase()))})),u==="activos"?B=B.filter(H=>{var K;return((K=H._count)==null?void 0:K.expedientes)&&H._count.expedientes>0}):u==="inactivos"&&(B=B.filter(H=>{var K;return!((K=H._count)!=null&&K.expedientes)||H._count.expedientes===0})),a(B)},[e,c,u]),g.useEffect(()=>()=>{w&&clearTimeout(w)},[w]);function k(B){if(!B)return"";const H=B.trim().split(" ");return H.length>1?H[1].toLowerCase():""}const O=g.useMemo(()=>[...r].sort((H,K)=>{const fe=k(H.user.name),W=k(K.user.name);return fe<W?C==="asc"?-1:1:fe>W?C==="asc"?1:-1:0}),[r,C]),A=B=>{y(B),p(!0)},$=()=>{y(null),p(!1)},P=B=>{var K;return((K=B._count)==null?void 0:K.expedientes)&&B._count.expedientes>0?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"},I=B=>{var K;return((K=B._count)==null?void 0:K.expedientes)&&B._count.expedientes>0?"Activo":"Inactivo"},L=()=>{const B=r.map(pe=>{var se,be;return{Nombre:pe.user.name,Email:pe.user.email,DNI:pe.dni,Teléfono:pe.phone||"N/A",Dirección:pe.address||"N/A",Estado:I(pe),Expedientes:((se=pe._count)==null?void 0:se.expedientes)||0,Citas:((be=pe._count)==null?void 0:be.appointments)||0}}),H=[Object.keys(B[0]).join(","),...B.map(pe=>Object.values(pe).map(se=>`"${se}"`).join(","))].join(`
`),K=new Blob([H],{type:"text/csv;charset=utf-8;"}),fe=document.createElement("a"),W=URL.createObjectURL(K);fe.setAttribute("href",W),fe.setAttribute("download",`clientes_${new Date().toISOString().split("T")[0]}.csv`),fe.style.visibility="hidden",document.body.appendChild(fe),fe.click(),document.body.removeChild(fe)},F=B=>{const H=encodeURIComponent("Consulta Legal - Despacho"),K=encodeURIComponent(`Estimado/a ${B.user.name},

Esperamos que se encuentre bien.

Saludos cordiales,
Su equipo legal`);window.open(`mailto:${B.user.email}?subject=${H}&body=${K}`)},T=B=>{B.phone&&window.open(`tel:${B.phone}`)},M=()=>{E(!0),setTimeout(()=>{E(!1)},500)},V=()=>{d(""),m("todos"),E(!1)},X=B=>{B.key==="Enter"&&M()},z=B=>{m(B.target.value),E(!0),setTimeout(()=>{E(!1)},300)},U=B=>{const H=B.target.value;if(d(H),w&&clearTimeout(w),H.trim()){E(!0);const K=setTimeout(()=>{E(!1)},500);N(K)}else E(!1)},Y=()=>{D(B=>B==="asc"?"desc":"asc")};return s?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})):f?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-red-600 text-xl mb-4"},"Error"),n.createElement("div",{className:"text-gray-600"},f),n.createElement("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},"Reintentar"))):n.createElement("div",{className:"py-6"},n.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"flex justify-between items-center"},n.createElement("div",null,n.createElement("h1",{className:"text-3xl font-bold text-gray-900"},"Mis Clientes"),n.createElement("p",{className:"mt-2 text-gray-600"},"Gestiona y da seguimiento a todos tus clientes")),n.createElement("div",{className:"flex space-x-3"},n.createElement("button",{onClick:L,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2"},"Exportar Datos"),n.createElement(De,{to:"/lawyer/cases/new",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"},"Nuevo Cliente")))),l&&n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-6 mb-6"},n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-blue-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Total Clientes"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},l.total)))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-green-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Activos"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},l.active)))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-gray-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L18.364 5.636M5.636 18.364l12.728-12.728"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Inactivos"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},l.inactive)))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-yellow-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Total Expedientes"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},l.totalCases)))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-purple-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Total Citas"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},l.totalAppointments)))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-indigo-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Promedio Expedientes"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},l.averageCasesPerClient))))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow mb-6"},n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Buscar"),n.createElement("input",{type:"text",placeholder:"Buscar por nombre, email, DNI o teléfono...",value:c,onChange:U,onKeyDown:X,className:`w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${h&&c?"bg-blue-50 border-blue-300":""}`}),h&&c&&n.createElement("div",{className:"mt-1 text-xs text-blue-600 flex items-center"},n.createElement("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-blue-600 mr-1"}),"Buscando...")),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Estado"),n.createElement("select",{value:u,onChange:z,"aria-label":"Filtrar por estado",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"},n.createElement("option",{value:"todos"},"Todos los estados"),n.createElement("option",{value:"activos"},"Solo activos"),n.createElement("option",{value:"inactivos"},"Solo inactivos"))),n.createElement("div",{className:"flex items-end"},n.createElement("button",{onClick:M,disabled:h,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"},h?n.createElement("div",{className:"flex items-center justify-center"},n.createElement("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Buscando..."):"🔍 Buscar")),n.createElement("div",{className:"flex items-end"},n.createElement("button",{onClick:V,className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"},"🗑️ Limpiar Filtros"))),(c||u!=="todos")&&n.createElement("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md"},n.createElement("div",{className:"flex items-center justify-between"},n.createElement("div",{className:"text-sm text-blue-800"},n.createElement("span",{className:"font-medium"},"Resultados de búsqueda:"),c&&n.createElement("span",{className:"ml-2"},'"',c,'"',u!=="todos"&&` + ${u}`),!c&&u!=="todos"&&n.createElement("span",{className:"ml-2"},"Estado: ",u)),n.createElement("div",{className:"text-sm text-blue-600"},r.length," de ",e.length," clientes encontrados")))),n.createElement("div",{className:"bg-white shadow rounded-lg overflow-hidden"},n.createElement("div",{className:"overflow-x-auto"},n.createElement("table",{className:"min-w-full divide-y divide-gray-200"},n.createElement("thead",{className:"bg-gray-50"},n.createElement("tr",null,n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:Y},"Cliente",n.createElement("span",{className:"ml-1"},C==="asc"?"▲":"▼")),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Contacto"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Estado"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Expedientes"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Citas"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Acciones"))),n.createElement("tbody",{className:"bg-white divide-y divide-gray-200"},O.map(B=>{var H,K;return n.createElement("tr",{key:B.id,className:"hover:bg-gray-50"},n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("div",null,n.createElement("div",{className:"text-sm font-medium text-gray-900"},B.user.name),n.createElement("div",{className:"text-sm text-gray-500"},"DNI: ",B.dni),B.address&&n.createElement("div",{className:"text-sm text-gray-500"},B.address))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("div",null,n.createElement("div",{className:"text-sm text-gray-900"},B.user.email),B.phone&&n.createElement("div",{className:"text-sm text-gray-500"},B.phone))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${P(B)}`},I(B))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},((H=B._count)==null?void 0:H.expedientes)||0),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},((K=B._count)==null?void 0:K.appointments)||0),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium"},n.createElement("div",{className:"flex flex-col space-y-1"},n.createElement("div",{className:"flex space-x-2"},n.createElement("button",{onClick:()=>A(B),className:"text-blue-600 hover:text-blue-900 text-xs"},"Ver Detalles"),n.createElement(De,{to:`/lawyer/cases/new?clientId=${B.id}`,className:"text-green-600 hover:text-green-900 text-xs"},"Nuevo Expediente")),n.createElement("div",{className:"flex space-x-2"},B.user.email&&n.createElement("button",{onClick:()=>F(B),className:"text-purple-600 hover:text-purple-900 text-xs",title:"Enviar email"},"📧 Email"),B.phone&&n.createElement("button",{onClick:()=>T(B),className:"text-orange-600 hover:text-orange-900 text-xs",title:"Llamar"},"📞 Llamar"),n.createElement(De,{to:`/lawyer/appointments?clientId=${B.id}`,className:"text-indigo-600 hover:text-indigo-900 text-xs"},"📅 Cita")))))}))))),r.length===0&&n.createElement("div",{className:"text-center py-12"},n.createElement("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})),n.createElement("h3",{className:"mt-2 text-sm font-medium text-gray-900"},"No se encontraron clientes"),n.createElement("p",{className:"mt-1 text-sm text-gray-500"},"Intenta ajustar los filtros o agregar nuevos clientes."))),v&&b&&n.createElement("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},n.createElement("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},n.createElement("div",{className:"mt-3"},n.createElement("div",{className:"flex justify-between items-center mb-4"},n.createElement("h3",{className:"text-lg font-medium text-gray-900"},"Detalles del Cliente"),n.createElement("button",{onClick:$,className:"text-gray-400 hover:text-gray-600",title:"Cerrar"},n.createElement("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})))),n.createElement("div",{className:"space-y-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Nombre"),n.createElement("p",{className:"text-sm text-gray-900"},b.user.name)),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Email"),n.createElement("p",{className:"text-sm text-gray-900"},b.user.email)),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700"},"DNI"),n.createElement("p",{className:"text-sm text-gray-900"},b.dni)),b.phone&&n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Teléfono"),n.createElement("p",{className:"text-sm text-gray-900"},b.phone)),b.address&&n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Dirección"),n.createElement("p",{className:"text-sm text-gray-900"},b.address)),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Estado"),n.createElement("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${P(b)}`},I(b))),n.createElement("div",{className:"grid grid-cols-2 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Expedientes"),n.createElement("p",{className:"text-sm text-gray-900"},((Q=b._count)==null?void 0:Q.expedientes)||0)),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Citas"),n.createElement("p",{className:"text-sm text-gray-900"},((j=b._count)==null?void 0:j.appointments)||0)))),n.createElement("div",{className:"flex justify-end space-x-3 mt-6"},n.createElement("button",{onClick:$,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"},"Cerrar"),b.user.email&&n.createElement("button",{onClick:()=>F(b),className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2"},"Enviar Email"),b.phone&&n.createElement("button",{onClick:()=>T(b),className:"px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2"},"Llamar"),n.createElement(De,{to:`/lawyer/cases/new?clientId=${b.id}`,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"},"Nuevo Expediente"))))))},jY=()=>{var qe;const[e,t]=g.useState([]),[r,a]=g.useState([]),[s,o]=g.useState(!0),[l,i]=g.useState(null),[c,d]=g.useState(""),[u,m]=g.useState("todos"),[f,x]=g.useState("todos"),[b,y]=g.useState(null),[v,p]=g.useState(null),[h,E]=g.useState(!1),[w,N]=g.useState(!1),[S,C]=g.useState(!1),[D,k]=g.useState(null),[O,A]=g.useState([]),[$,P]=g.useState([]),{user:I}=Pe(),[L,F]=g.useState({title:"",description:"",dueDate:"",priority:"MEDIA",expedienteId:"",clientId:"",assignedTo:""});g.useEffect(()=>{(async()=>{try{o(!0);const le=localStorage.getItem("token"),[Se,Ce,ke,Re]=await Promise.all([xe.get("/tasks",{headers:{Authorization:`Bearer ${le}`}}),xe.get("/tasks/stats",{headers:{Authorization:`Bearer ${le}`}}),xe.get("/cases",{headers:{Authorization:`Bearer ${le}`}}),xe.get("/users/clients",{headers:{Authorization:`Bearer ${le}`}})]);t(Se.data),i(Ce.data),A(ke.data),P(Re.data),y(null)}catch(le){console.error("Error fetching data:",le),y("Error al cargar los datos")}finally{o(!1)}})()},[]),g.useEffect(()=>{let J=e;c&&(J=J.filter(le=>{var Se,Ce,ke;return le.title.toLowerCase().includes(c.toLowerCase())||((Se=le.description)==null?void 0:Se.toLowerCase().includes(c.toLowerCase()))||((Ce=le.expediente)==null?void 0:Ce.title.toLowerCase().includes(c.toLowerCase()))||((ke=le.client)==null?void 0:ke.user.name.toLowerCase().includes(c.toLowerCase()))})),u!=="todos"&&(J=J.filter(le=>le.status===u)),f!=="todos"&&(J=J.filter(le=>le.priority===f)),a(J)},[e,c,u,f]),g.useEffect(()=>()=>{D&&clearTimeout(D)},[D]);const T=J=>{p(J),E(!0)},M=()=>{p(null),E(!1)},V=()=>{N(!0),y(null)},X=()=>{N(!1),F({title:"",description:"",dueDate:"",priority:"MEDIA",expedienteId:"",clientId:"",assignedTo:""}),y(null)},z=async()=>{var J,le;if(!L.title.trim()){y("El título es obligatorio");return}try{const Se=localStorage.getItem("token"),Ce={title:L.title,description:L.description||void 0,dueDate:L.dueDate||void 0,priority:L.priority,expedienteId:L.expedienteId||void 0,clientId:L.clientId||void 0,assignedTo:L.assignedTo||void 0},ke=await xe.post("/tasks",Ce,{headers:{Authorization:`Bearer ${Se}`}});t(Re=>[ke.data,...Re]),X()}catch(Se){console.error("Error creating task:",Se),y(((le=(J=Se.response)==null?void 0:J.data)==null?void 0:le.message)||"Error al crear la tarea")}},U=async(J,le)=>{try{const Se=localStorage.getItem("token");await xe.patch(`/tasks/${J}/status`,{status:le},{headers:{Authorization:`Bearer ${Se}`}}),t(Ce=>Ce.map(ke=>ke.id===J?{...ke,status:le}:ke))}catch(Se){console.error("Error updating task status:",Se),y("Error al actualizar el estado de la tarea")}},Y=async J=>{if(confirm("¿Estás seguro de que quieres eliminar esta tarea?"))try{const le=localStorage.getItem("token");await xe.delete(`/tasks/${J}`,{headers:{Authorization:`Bearer ${le}`}}),t(Se=>Se.filter(Ce=>Ce.id!==J))}catch(le){console.error("Error deleting task:",le),y("Error al eliminar la tarea")}},Q=J=>{switch(J){case"URGENTE":return"bg-red-100 text-red-800";case"ALTA":return"bg-orange-100 text-orange-800";case"MEDIA":return"bg-yellow-100 text-yellow-800";case"BAJA":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},j=J=>{switch(J){case"PENDIENTE":return"bg-yellow-100 text-yellow-800";case"EN_PROGRESO":return"bg-blue-100 text-blue-800";case"COMPLETADA":return"bg-green-100 text-green-800";case"CANCELADA":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},B=J=>{switch(J){case"URGENTE":return"Urgente";case"ALTA":return"Alta";case"MEDIA":return"Media";case"BAJA":return"Baja";default:return J}},H=J=>{switch(J){case"PENDIENTE":return"Pendiente";case"EN_PROGRESO":return"En Progreso";case"COMPLETADA":return"Completada";case"CANCELADA":return"Cancelada";default:return J}},K=J=>new Date(J)<new Date,fe=()=>{C(!0),setTimeout(()=>{C(!1)},500)},W=()=>{d(""),m("todos"),x("todos"),C(!1)},pe=J=>{J.key==="Enter"&&fe()},se=J=>{m(J.target.value),C(!0),setTimeout(()=>{C(!1)},300)},be=J=>{x(J.target.value),C(!0),setTimeout(()=>{C(!1)},300)},$e=J=>{const le=J.target.value;if(d(le),D&&clearTimeout(D),le.trim()){C(!0);const Se=setTimeout(()=>{C(!1)},500);k(Se)}else C(!1)};return s?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})):b?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-red-600 text-xl mb-4"},"Error"),n.createElement("div",{className:"text-gray-600"},b),n.createElement("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},"Reintentar"))):n.createElement("div",{className:"py-6"},n.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"flex justify-between items-center"},n.createElement("div",null,n.createElement("h1",{className:"text-3xl font-bold text-gray-900"},"Tareas Pendientes"),n.createElement("p",{className:"mt-2 text-gray-600"},"Gestiona y da seguimiento a todas tus tareas y recordatorios")),n.createElement("button",{onClick:V,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"},"Nueva Tarea"))),l&&n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-6 mb-6"},n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-blue-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Total Tareas"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},typeof l.total=="number"&&!isNaN(l.total)?l.total:0)))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-yellow-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Pendientes"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},typeof l.pendientes=="number"&&!isNaN(l.pendientes)?l.pendientes:0)))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-blue-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"En Progreso"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},typeof l.enProgreso=="number"&&!isNaN(l.enProgreso)?l.enProgreso:0)))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-green-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Completadas"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},typeof l.completadas=="number"&&!isNaN(l.completadas)?l.completadas:0)))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-gray-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728L5.636 5.636m12.728 12.728L18.364 5.636M5.636 18.364l12.728-12.728"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Canceladas"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},typeof l.canceladas=="number"&&!isNaN(l.canceladas)?l.canceladas:0)))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-red-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Vencidas"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},typeof l.vencidas=="number"&&!isNaN(l.vencidas)?l.vencidas:0))))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow mb-6"},n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Buscar"),n.createElement("input",{type:"text",placeholder:"Buscar por título, descripción o expediente...",value:c,onChange:$e,onKeyDown:pe,className:`w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${S&&c?"bg-blue-50 border-blue-300":""}`}),S&&c&&n.createElement("div",{className:"mt-1 text-xs text-blue-600 flex items-center"},n.createElement("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-blue-600 mr-1"}),"Buscando...")),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Estado"),n.createElement("select",{value:u,onChange:se,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Filtrar por estado"},n.createElement("option",{value:"todos"},"Todos los estados"),n.createElement("option",{value:"PENDIENTE"},"Pendiente"),n.createElement("option",{value:"EN_PROGRESO"},"En Progreso"),n.createElement("option",{value:"COMPLETADA"},"Completada"),n.createElement("option",{value:"CANCELADA"},"Cancelada"))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Prioridad"),n.createElement("select",{value:f,onChange:be,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Filtrar por prioridad"},n.createElement("option",{value:"todos"},"Todas las prioridades"),n.createElement("option",{value:"URGENTE"},"Urgente"),n.createElement("option",{value:"ALTA"},"Alta"),n.createElement("option",{value:"MEDIA"},"Media"),n.createElement("option",{value:"BAJA"},"Baja"))),n.createElement("div",{className:"flex items-end"},n.createElement("button",{onClick:fe,disabled:S,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"},S?n.createElement("div",{className:"flex items-center justify-center"},n.createElement("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Buscando..."):"🔍 Buscar")),n.createElement("div",{className:"flex items-end"},n.createElement("button",{onClick:W,className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"},"🗑️ Limpiar"))),(c||u!=="todos"||f!=="todos")&&n.createElement("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md"},n.createElement("div",{className:"flex items-center justify-between"},n.createElement("div",{className:"text-sm text-blue-800"},n.createElement("span",{className:"font-medium"},"Resultados de búsqueda:"),c&&n.createElement("span",{className:"ml-2"},'"',c,'"'),u!=="todos"&&n.createElement("span",{className:"ml-2"},"+ Estado: ",u),f!=="todos"&&n.createElement("span",{className:"ml-2"},"+ Prioridad: ",f)),n.createElement("div",{className:"text-sm text-blue-600"},r.length," de ",e.length," tareas encontradas")))),n.createElement("div",{className:"bg-white shadow rounded-lg overflow-hidden"},n.createElement("div",{className:"overflow-x-auto"},n.createElement("table",{className:"min-w-full divide-y divide-gray-200"},n.createElement("thead",{className:"bg-gray-50"},n.createElement("tr",null,n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Tarea"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Prioridad"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Estado"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Fecha Límite"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Asignado"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Acciones"))),n.createElement("tbody",{className:"bg-white divide-y divide-gray-200"},(Array.isArray(r)?r:[]).map(J=>{var le;return n.createElement("tr",{key:J.id,className:`hover:bg-gray-50 ${J.dueDate&&K(J.dueDate)&&J.status!=="COMPLETADA"?"bg-red-50":""}`},n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("div",null,n.createElement("div",{className:"text-sm font-medium text-gray-900"},J.title),n.createElement("div",{className:"text-sm text-gray-500"},J.description||"Sin descripción"),J.expediente&&n.createElement("div",{className:"text-xs text-blue-600"},"📋 ",J.expediente.title),J.client&&n.createElement("div",{className:"text-xs text-green-600"},"👤 ",J.client.user.name))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${Q(J.priority)}`},B(J.priority))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("select",{value:J.status,onChange:Se=>U(J.id,Se.target.value),className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full border ${j(J.status)}`,"aria-label":`Cambiar estado de tarea: ${J.title}`},n.createElement("option",{value:"PENDIENTE"},"Pendiente"),n.createElement("option",{value:"EN_PROGRESO"},"En Progreso"),n.createElement("option",{value:"COMPLETADA"},"Completada"),n.createElement("option",{value:"CANCELADA"},"Cancelada"))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},J.dueDate?n.createElement("div",null,n.createElement("div",{className:J.dueDate&&K(J.dueDate)&&J.status!=="COMPLETADA"?"text-red-600 font-medium":""},new Date(J.dueDate).toLocaleDateString()),J.dueDate&&K(J.dueDate)&&J.status!=="COMPLETADA"&&n.createElement("div",{className:"text-xs text-red-500"},"⚠️ Vencida")):"Sin fecha límite"),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},((le=J.assignedToUser)==null?void 0:le.name)||"Sin asignar"),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium"},n.createElement("div",{className:"flex space-x-2"},n.createElement("button",{onClick:()=>T(J),className:"text-blue-600 hover:text-blue-900"},"Ver"),n.createElement("button",{onClick:()=>Y(J.id),className:"text-red-600 hover:text-red-900"},"Eliminar"))))}))))),r.length===0&&n.createElement("div",{className:"text-center py-12"},n.createElement("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})),n.createElement("h3",{className:"mt-2 text-sm font-medium text-gray-900"},"No se encontraron tareas"),n.createElement("p",{className:"mt-1 text-sm text-gray-500"},"Intenta ajustar los filtros o crear una nueva tarea."))),h&&v&&n.createElement("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},n.createElement("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},n.createElement("div",{className:"mt-3"},n.createElement("div",{className:"flex justify-between items-center mb-4"},n.createElement("h3",{className:"text-lg font-medium text-gray-900"},"Detalles de la Tarea"),n.createElement("button",{onClick:M,className:"text-gray-400 hover:text-gray-600",title:"Cerrar modal"},n.createElement("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})))),n.createElement("div",{className:"space-y-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Título"),n.createElement("p",{className:"text-sm text-gray-900"},v.title)),v.description&&n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Descripción"),n.createElement("p",{className:"text-sm text-gray-900"},v.description)),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Prioridad"),n.createElement("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${Q(v.priority)}`},B(v.priority))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Estado"),n.createElement("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${j(v.status)}`},H(v.status))),v.dueDate&&n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Fecha Límite"),n.createElement("p",{className:`text-sm ${K(v.dueDate)&&v.status!=="COMPLETADA"?"text-red-600 font-medium":"text-gray-900"}`},new Date(v.dueDate).toLocaleDateString(),K(v.dueDate)&&v.status!=="COMPLETADA"&&n.createElement("span",{className:"ml-2 text-red-500"},"⚠️ Vencida"))),v.expediente&&n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Expediente"),n.createElement("p",{className:"text-sm text-blue-600"},v.expediente.title),n.createElement("p",{className:"text-xs text-gray-500"},"Cliente: ",v.expediente.client.user.name)),v.client&&n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Cliente"),n.createElement("p",{className:"text-sm text-gray-900"},v.client.user.name),n.createElement("p",{className:"text-xs text-gray-500"},v.client.user.email)),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Asignado a"),n.createElement("p",{className:"text-sm text-gray-900"},((qe=v.assignedToUser)==null?void 0:qe.name)||"Sin asignar")),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Creado por"),n.createElement("p",{className:"text-sm text-gray-900"},v.createdByUser.name)),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Fecha de creación"),n.createElement("p",{className:"text-sm text-gray-900"},new Date(v.createdAt).toLocaleDateString()))),n.createElement("div",{className:"flex justify-end mt-6"},n.createElement("button",{onClick:M,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700"},"Cerrar"))))),w&&n.createElement("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},n.createElement("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},n.createElement("div",{className:"mt-3"},n.createElement("div",{className:"flex justify-between items-center mb-4"},n.createElement("h3",{className:"text-lg font-medium text-gray-900"},"Nueva Tarea"),n.createElement("button",{onClick:X,className:"text-gray-400 hover:text-gray-600",title:"Cerrar modal"},n.createElement("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})))),b&&n.createElement("div",{className:"mb-4 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md p-2"},b),n.createElement("div",{className:"space-y-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Título *"),n.createElement("input",{type:"text",value:L.title,onChange:J=>F(le=>({...le,title:J.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Título de la tarea"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Descripción"),n.createElement("textarea",{value:L.description,onChange:J=>F(le=>({...le,description:J.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Descripción de la tarea"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Fecha Límite"),n.createElement("input",{type:"datetime-local",value:L.dueDate,onChange:J=>F(le=>({...le,dueDate:J.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Fecha límite de la tarea"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Prioridad"),n.createElement("select",{value:L.priority,onChange:J=>F(le=>({...le,priority:J.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Prioridad de la tarea"},n.createElement("option",{value:"BAJA"},"Baja"),n.createElement("option",{value:"MEDIA"},"Media"),n.createElement("option",{value:"ALTA"},"Alta"),n.createElement("option",{value:"URGENTE"},"Urgente"))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Expediente (opcional)"),n.createElement("select",{value:L.expedienteId,onChange:J=>F(le=>({...le,expedienteId:J.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Seleccionar expediente"},n.createElement("option",{value:""},"Seleccionar expediente"),O.map(J=>n.createElement("option",{key:J.id,value:J.id},J.title," - ",J.client.user.name)))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Cliente (opcional)"),n.createElement("select",{value:L.clientId,onChange:J=>F(le=>({...le,clientId:J.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Seleccionar cliente"},n.createElement("option",{value:""},"Seleccionar cliente"),$.map(J=>n.createElement("option",{key:J.id,value:J.id},J.user.name," - ",J.user.email))))),n.createElement("div",{className:"flex justify-end space-x-3 mt-6"},n.createElement("button",{onClick:X,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"},"Cancelar"),n.createElement("button",{onClick:z,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"},"Crear Tarea"))))))},BY=()=>{var d,u,m,f,x,b,y,v;const[e,t]=g.useState(null),[r,a]=g.useState(!0),[s,o]=g.useState(null),{user:l}=Pe();g.useEffect(()=>{(async()=>{try{a(!0);const h=localStorage.getItem("token"),E=await xe.get("/lawyer/reports",{headers:{Authorization:`Bearer ${h}`}});t(E.data),o(null)}catch(h){console.error("Error fetching reports:",h),o("Error al cargar los reportes")}finally{a(!1)}})()},[]);const i=p=>{switch(p){case"PENDIENTE":return"bg-yellow-100 text-yellow-800";case"EN_PROGRESO":return"bg-blue-100 text-blue-800";case"COMPLETADA":return"bg-green-100 text-green-800";case"CANCELADA":return"bg-gray-100 text-gray-800";case"ABIERTO":return"bg-green-100 text-green-800";case"EN_PROCESO":return"bg-blue-100 text-blue-800";case"CERRADO":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},c=p=>{switch(p){case"PENDIENTE":return"Pendiente";case"EN_PROGRESO":return"En Progreso";case"COMPLETADA":return"Completada";case"CANCELADA":return"Cancelada";case"ABIERTO":return"Abierto";case"EN_PROCESO":return"En Proceso";case"CERRADO":return"Cerrado";default:return p}};return r?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})):s?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-red-600 text-xl mb-4"},"Error"),n.createElement("div",{className:"text-gray-600"},s),n.createElement("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},"Reintentar"))):e?n.createElement("div",{className:"py-6"},n.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"mb-8"},n.createElement("h1",{className:"text-3xl font-bold text-gray-900"},"Mis Reportes"),n.createElement("p",{className:"mt-2 text-gray-600"},"Estadísticas y reportes personales de tu actividad")),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-blue-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Total Tareas"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},((d=e.tasks)==null?void 0:d.total)??0)))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-green-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Total Casos"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},((u=e.cases)==null?void 0:u.total)??0)))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-red-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Tareas Vencidas"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},((m=e.tasks)==null?void 0:m.overdue)??0)))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-purple-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Próximas Citas"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},((f=e.appointments)==null?void 0:f.upcoming)??0))))),n.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8"},n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-4"},"Estado de Tareas"),n.createElement("div",{className:"space-y-3"},Object.entries(((x=e.tasks)==null?void 0:x.byStatus)??{}).map(([p,h])=>n.createElement("div",{key:p,className:"flex items-center justify-between"},n.createElement("div",{className:"flex items-center"},n.createElement("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${i(p)}`},c(p))),n.createElement("span",{className:"text-sm font-medium text-gray-900"},h)))),n.createElement("div",{className:"mt-6"},n.createElement("div",{className:"flex items-end space-x-2 h-32"},Object.entries(((b=e.tasks)==null?void 0:b.byStatus)??{}).map(([p,h])=>{var N;const E=Math.max(...Object.values(((N=e.tasks)==null?void 0:N.byStatus)??{})),w=E>0?h/E*100:0;return n.createElement("div",{key:p,className:"flex-1 flex flex-col items-center"},n.createElement("div",{className:"w-full bg-blue-500 rounded-t",style:{height:`${w}%`}}),n.createElement("span",{className:"text-xs text-gray-500 mt-1"},h))})))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-4"},"Estado de Casos"),n.createElement("div",{className:"space-y-3"},Object.entries(((y=e.cases)==null?void 0:y.byStatus)??{}).map(([p,h])=>n.createElement("div",{key:p,className:"flex items-center justify-between"},n.createElement("div",{className:"flex items-center"},n.createElement("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${i(p)}`},c(p))),n.createElement("span",{className:"text-sm font-medium text-gray-900"},h)))),n.createElement("div",{className:"mt-6"},n.createElement("div",{className:"flex justify-center"},n.createElement("div",{className:"relative w-32 h-32"},(()=>{var w,N;const p=Object.values(((w=e.cases)==null?void 0:w.byStatus)??{}).reduce((S,C)=>S+C,0);let h=0;const E=["#10B981","#3B82F6","#6B7280"];return Object.entries(((N=e.cases)==null?void 0:N.byStatus)??{}).map(([S,C],D)=>{if(p===0)return null;const O=C/p*100/100*360,A=n.createElement("div",{key:S,className:"absolute inset-0 rounded-full",style:{background:`conic-gradient(from ${h}deg, ${E[D]} 0deg, ${E[D]} ${O}deg, transparent ${O}deg)`}});return h+=O,A})})())),n.createElement("div",{className:"mt-4 flex justify-center space-x-4"},Object.entries(((v=e.cases)==null?void 0:v.byStatus)??{}).map(([p,h],E)=>n.createElement("div",{key:p,className:"flex items-center"},n.createElement("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:["#10B981","#3B82F6","#6B7280"][E]}}),n.createElement("span",{className:"text-xs text-gray-600"},c(p)))))))))):n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-gray-600"},"No hay datos disponibles")))},zY=()=>{var i,c,d;const[e,t]=g.useState(null),[r,a]=g.useState(!0),[s,o]=g.useState(null),{user:l}=Pe();return g.useEffect(()=>{(async()=>{var m,f;try{a(!0);const x=await Z.get("/admin/dashboard");t(x.data),o(null)}catch(x){console.error("Error fetching dashboard stats:",x),o(((f=(m=x.response)==null?void 0:m.data)==null?void 0:f.message)||"Error al cargar las estadísticas")}finally{a(!1)}})()},[]),r?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})):s?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-red-600 text-xl mb-4"},"Error"),n.createElement("div",{className:"text-gray-600"},s),n.createElement("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},"Reintentar"))):n.createElement("div",{className:"py-6"},n.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"flex justify-between items-center"},n.createElement("div",null,n.createElement("h1",{className:"text-3xl font-bold text-gray-900"},"Bienvenido, ",l==null?void 0:l.name,(l==null?void 0:l.email)&&` (${l.email})`)),n.createElement("div",{className:"flex items-center gap-4"},n.createElement("div",{className:"text-sm text-gray-500"},"Última actualización: ",new Date().toLocaleString())))),e&&n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-blue-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Total Usuarios"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},e.totalUsers||0)))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-green-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Expedientes"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},e.totalCases||0)))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-purple-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Citas"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},e.totalAppointments||0)))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-orange-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Tareas"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},e.totalTasks||0))))),e&&n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center justify-between mb-4"},n.createElement("h3",{className:"text-lg font-medium text-gray-900"},"Usuarios por Rol")),n.createElement("div",{className:"space-y-3"},n.createElement("div",{className:"flex justify-between"},n.createElement("span",{className:"text-sm text-gray-600"},"Abogados"),n.createElement("span",{className:"text-sm font-medium text-gray-900"},e.totalLawyers||0)),n.createElement("div",{className:"flex justify-between"},n.createElement("span",{className:"text-sm text-gray-600"},"Clientes"),n.createElement("span",{className:"text-sm font-medium text-gray-900"},e.totalClients||0)),n.createElement("div",{className:"flex justify-between"},n.createElement("span",{className:"text-sm text-gray-600"},"Documentos"),n.createElement("span",{className:"text-sm font-medium text-gray-900"},e.totalDocuments||0)))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center justify-between mb-4"},n.createElement("h3",{className:"text-lg font-medium text-gray-900"},"Tareas Vencidas"),n.createElement("span",{className:"text-sm text-red-600 font-medium"},((i=e.overdueTasks)==null?void 0:i.length)||0)),n.createElement("div",{className:"space-y-2"},(c=e.overdueTasks)==null?void 0:c.slice(0,3).map(u=>{var m;return n.createElement("div",{key:u.id,className:"text-sm"},n.createElement("div",{className:"font-medium text-gray-900"},u.title),n.createElement("div",{className:"text-gray-500"},"Asignado a: ",((m=u.assignedToUser)==null?void 0:m.name)||"Sin asignar"))}),(!e.overdueTasks||e.overdueTasks.length===0)&&n.createElement("div",{className:"text-sm text-gray-500"},"No hay tareas vencidas"))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("div",{className:"flex items-center justify-between mb-4"},n.createElement("h3",{className:"text-lg font-medium text-gray-900"},"Citas Recientes")),n.createElement("div",{className:"space-y-2"},(d=e.recentAppointments)==null?void 0:d.slice(0,3).map(u=>{var m,f,x;return n.createElement("div",{key:u.id,className:"text-sm"},n.createElement("div",{className:"font-medium text-gray-900"},u.fullName||((f=(m=u.client)==null?void 0:m.user)==null?void 0:f.name)||"Cliente"," - ",((x=u.lawyer)==null?void 0:x.name)||"Sin asignar"),n.createElement("div",{className:"text-gray-500"},new Date(u.date).toLocaleDateString(),u.type==="VISITOR"&&n.createElement("span",{className:"ml-2 inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-purple-100 text-purple-800"},"Visitante")))}),(!e.recentAppointments||e.recentAppointments.length===0)&&n.createElement("div",{className:"text-sm text-gray-500"},"No hay citas recientes")))),n.createElement("div",{className:"bg-white rounded-lg shadow"},n.createElement("div",{className:"px-6 py-4 border-b border-gray-200"},n.createElement("h3",{className:"text-lg font-medium text-gray-900"},"Acciones Rápidas")),n.createElement("div",{className:"p-6"},n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},n.createElement(De,{to:"/admin/users",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-blue-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})))),n.createElement("div",{className:"ml-3"},n.createElement("p",{className:"text-sm font-medium text-gray-900"},"Gestionar Usuarios"),n.createElement("p",{className:"text-xs text-gray-500"},"Ver y editar usuarios"))),n.createElement(De,{to:"/admin/cases",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-green-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})))),n.createElement("div",{className:"ml-3"},n.createElement("p",{className:"text-sm font-medium text-gray-900"},"Gestionar Expedientes"),n.createElement("p",{className:"text-xs text-gray-500"},"Ver y editar casos"))),n.createElement(De,{to:"/admin/appointments",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-purple-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})))),n.createElement("div",{className:"ml-3"},n.createElement("p",{className:"text-sm font-medium text-gray-900"},"Gestionar Citas"),n.createElement("p",{className:"text-xs text-gray-500"},"Ver y editar citas"))),n.createElement(De,{to:"/admin/tasks",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-orange-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})))),n.createElement("div",{className:"ml-3"},n.createElement("p",{className:"text-sm font-medium text-gray-900"},"Gestionar Tareas"),n.createElement("p",{className:"text-xs text-gray-500"},"Ver y editar tareas"))),n.createElement(De,{to:"/admin/documents",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-indigo-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})))),n.createElement("div",{className:"ml-3"},n.createElement("p",{className:"text-sm font-medium text-gray-900"},"Gestionar Documentos"),n.createElement("p",{className:"text-xs text-gray-500"},"Ver y gestionar archivos"))),n.createElement(De,{to:"/admin/invoices",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-emerald-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})))),n.createElement("div",{className:"ml-3"},n.createElement("p",{className:"text-sm font-medium text-gray-900"},"Gestionar Facturas"),n.createElement("p",{className:"text-xs text-gray-500"},"Ver y gestionar facturas"))),n.createElement(De,{to:"/admin/reports",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-red-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})))),n.createElement("div",{className:"ml-3"},n.createElement("p",{className:"text-sm font-medium text-gray-900"},"Reportes"),n.createElement("p",{className:"text-xs text-gray-500"},"Ver estadísticas del sistema"))),n.createElement(De,{to:"/admin/parametros",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-gray-700 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6 1a9 9 0 11-18 0 9 9 0 0118 0z"})))),n.createElement("div",{className:"ml-3"},n.createElement("p",{className:"text-sm font-medium text-gray-900"},"Configurar Parámetros"),n.createElement("p",{className:"text-xs text-gray-500"},"Gestionar parámetros globales"))),n.createElement(De,{to:"/admin/backup",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-pink-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})))),n.createElement("div",{className:"ml-3"},n.createElement("p",{className:"text-sm font-medium text-gray-900"},"Backup y Restauración"),n.createElement("p",{className:"text-xs text-gray-500"},"Gestionar copias de seguridad"))),n.createElement(De,{to:"/admin/menu-config",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-yellow-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})))),n.createElement("div",{className:"ml-3"},n.createElement("p",{className:"text-sm font-medium text-gray-900"},"Configurar Menús"),n.createElement("p",{className:"text-xs text-gray-500"},"Gestionar navegación del sitio"))),n.createElement(De,{to:"/admin/site-config",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-teal-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})))),n.createElement("div",{className:"ml-3"},n.createElement("p",{className:"text-sm font-medium text-gray-900"},"Configurar Sitio"),n.createElement("p",{className:"text-xs text-gray-500"},"Personalizar apariencia y contenido"))),n.createElement(De,{to:"/admin/home-builder",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-purple-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v12a4 4 0 004 4h4a2 2 0 002-2V5z"})))),n.createElement("div",{className:"ml-3"},n.createElement("p",{className:"text-sm font-medium text-gray-900"},"Home Builder"),n.createElement("p",{className:"text-xs text-gray-500"},"Diseñar página principal"))),n.createElement(De,{to:"/admin/guided-config",className:"flex items-center p-4 border-2 border-blue-500 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-blue-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})))),n.createElement("div",{className:"ml-3"},n.createElement("p",{className:"text-sm font-medium text-blue-900"},"🎯 Configuración Guiada"),n.createElement("p",{className:"text-xs text-blue-700"},"Configurar sistema paso a paso"))),n.createElement(De,{to:"/admin/teleassistance",className:"flex items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-green-600 rounded-md flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})))),n.createElement("div",{className:"ml-3"},n.createElement("p",{className:"text-sm font-medium text-gray-900"},"🖥️ Teleasistencia"),n.createElement("p",{className:"text-xs text-gray-500"},"Asistencia remota a usuarios"))))))))},UY=()=>{const[e,t]=g.useState(""),[r,a]=g.useState(""),s=()=>{e?(localStorage.setItem("token",e),a("Token establecido correctamente. Recargando página..."),setTimeout(()=>{window.location.reload()},1e3)):a("Por favor, ingresa un token válido")},o=()=>{localStorage.removeItem("token"),a("Token eliminado. Recargando página..."),setTimeout(()=>{window.location.reload()},1e3)},l=localStorage.getItem("token");return n.createElement("div",{className:"fixed top-4 right-4 bg-white p-4 border rounded-lg shadow-lg z-50 max-w-md"},n.createElement("h3",{className:"text-lg font-bold mb-2"},"Debug Auth"),n.createElement("div",{className:"mb-2"},n.createElement("label",{className:"block text-sm font-medium mb-1"},"Token actual:"),n.createElement("div",{className:"text-xs bg-gray-100 p-2 rounded break-all"},l?`${l.substring(0,50)}...`:"No hay token")),n.createElement("div",{className:"mb-2"},n.createElement("label",{className:"block text-sm font-medium mb-1"},"Nuevo token:"),n.createElement("textarea",{value:e,onChange:i=>t(i.target.value),className:"w-full p-2 border rounded text-xs",rows:3,placeholder:"Pega el token aquí..."})),n.createElement("div",{className:"flex gap-2 mb-2"},n.createElement("button",{onClick:s,className:"px-3 py-1 bg-blue-600 text-white rounded text-sm hover:bg-blue-700"},"Establecer Token"),n.createElement("button",{onClick:o,className:"px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700"},"Limpiar Token")),r&&n.createElement("div",{className:"text-sm text-blue-600 bg-blue-50 p-2 rounded"},r))},VY=()=>{const[e,t]=g.useState([]),[r,a]=g.useState([]),[s,o]=g.useState(!0),[l,i]=g.useState(null),[c,d]=g.useState(""),[u,m]=g.useState("todos"),[f,x]=g.useState(null),[b,y]=g.useState(!1),[v,p]=g.useState({name:"",email:"",role:"CLIENTE",dni:"",phone:"",address:""}),[h,E]=g.useState("asc"),{user:w}=Pe(),N=async()=>{try{const L=await Z.post("/auth/login",{email:"admin@despacho.com",password:"password123"}),{token:F,user:T}=L.data;localStorage.setItem("token",F),console.log("Auto login successful:",T),window.location.reload()}catch(L){console.error("Auto login failed:",L)}};g.useEffect(()=>{S()},[]);const S=async()=>{var L,F,T,M;try{o(!0);const V=localStorage.getItem("token");if(console.log("Fetching users with token:",V?"Token exists":"No token"),console.log("Current user from context:",w),!V){console.error("No token found in localStorage"),i("No hay token de autenticación");return}const X=await Z.get("/admin/users");console.log("Users response:",X.data),console.log("Response type:",typeof X.data),console.log("Is array:",Array.isArray(X.data)),Array.isArray(X.data)&&(console.log("Number of users:",X.data.length),X.data.forEach((z,U)=>{console.log(`User ${U}:`,{id:z.id,name:z.name,email:z.email,role:z.role,createdAt:z.createdAt,client:z.client,expedientesAsLawyer:z.expedientesAsLawyer,appointmentsAsLawyer:z.appointmentsAsLawyer,assignedTasks:z.assignedTasks})})),t(X.data),i(null)}catch(V){console.error("Error fetching users:",V),console.error("Error response:",V.response),console.error("Error status:",(L=V.response)==null?void 0:L.status),console.error("Error data:",(F=V.response)==null?void 0:F.data),i(((M=(T=V.response)==null?void 0:T.data)==null?void 0:M.message)||"Error al cargar usuarios")}finally{o(!1)}};g.useEffect(()=>{let L=e;c&&(L=L.filter(F=>{var T;return F.name.toLowerCase().includes(c.toLowerCase())||F.email.toLowerCase().includes(c.toLowerCase())||((T=F.client)==null?void 0:T.dni.toLowerCase().includes(c.toLowerCase()))})),u!=="todos"&&(L=L.filter(F=>F.role===u)),a(L)},[e,c,u]);function C(L){if(!L)return"";const F=L.trim().split(" ");return F.length>1?F[1].toLowerCase():""}const D=g.useMemo(()=>[...r].sort((F,T)=>{const M=C(F.name),V=C(T.name);return M<V?h==="asc"?-1:1:M>V?h==="asc"?1:-1:0}),[r,h]),k=()=>{E(L=>L==="asc"?"desc":"asc")},O=L=>{var F,T,M;x(L),p({name:L.name,email:L.email,role:L.role,dni:((F=L.client)==null?void 0:F.dni)||"",phone:((T=L.client)==null?void 0:T.phone)||"",address:((M=L.client)==null?void 0:M.address)||""}),y(!0)},A=async()=>{var L,F;if(f)try{const T=localStorage.getItem("token"),M={name:v.name,email:v.email,role:v.role,client:v.role==="CLIENTE"?{dni:v.dni,phone:v.phone,address:v.address}:void 0};await Z.put(`/admin/users/${f.id}`,M),y(!1),S()}catch(T){console.error("Error updating user:",T),i(((F=(L=T.response)==null?void 0:L.data)==null?void 0:F.message)||"Error al actualizar usuario")}},$=async L=>{var F,T;if(confirm("¿Estás seguro de que quieres eliminar este usuario?"))try{const M=localStorage.getItem("token");await Z.delete(`/admin/users/${L}`),S()}catch(M){console.error("Error deleting user:",M),i(((T=(F=M.response)==null?void 0:F.data)==null?void 0:T.message)||"Error al eliminar usuario")}},P=L=>{switch(L){case"ADMIN":return"bg-red-100 text-red-800";case"ABOGADO":return"bg-blue-100 text-blue-800";case"CLIENTE":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},I=L=>{switch(L){case"ADMIN":return"Administrador";case"ABOGADO":return"Abogado";case"CLIENTE":return"Cliente";default:return L}};return s?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})):l?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-red-600 text-xl mb-4"},"Error"),n.createElement("div",{className:"text-gray-600"},l),n.createElement("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},"Reintentar"))):n.createElement("div",{className:"py-6"},n.createElement(UY,null),n.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"flex justify-between items-center"},n.createElement("div",null,n.createElement("h1",{className:"text-3xl font-bold text-gray-900"},"Gestión de Usuarios"),n.createElement("p",{className:"mt-2 text-gray-600"},"Administra todos los usuarios del sistema")),n.createElement("div",null,n.createElement("button",{onClick:N,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700"},"Login Admin (Pruebas)")))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow mb-6"},n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Buscar"),n.createElement("input",{type:"text",placeholder:"Buscar por nombre, email o DNI...",value:c,onChange:L=>d(L.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Rol"),n.createElement("select",{value:u,onChange:L=>m(L.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Filtrar por rol"},n.createElement("option",{value:"todos"},"Todos los roles"),n.createElement("option",{value:"ADMIN"},"Administrador"),n.createElement("option",{value:"ABOGADO"},"Abogado"),n.createElement("option",{value:"CLIENTE"},"Cliente"))),n.createElement("div",{className:"flex items-end"},n.createElement("button",{onClick:()=>{d(""),m("todos")},className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"},"Limpiar Filtros")))),n.createElement("div",{className:"bg-white shadow rounded-lg overflow-hidden"},n.createElement("div",{className:"overflow-x-auto"},n.createElement("table",{className:"min-w-full divide-y divide-gray-200"},n.createElement("thead",{className:"bg-gray-50"},n.createElement("tr",null,n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:k},"Usuario",n.createElement("span",{className:"ml-1"},h==="asc"?"▲":"▼")),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Rol"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Información Adicional"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actividad"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Acciones"))),n.createElement("tbody",{className:"bg-white divide-y divide-gray-200"},D.map(L=>{var F,T,M;return n.createElement("tr",{key:L.id,className:"hover:bg-gray-50"},n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("div",null,n.createElement("div",{className:"text-sm font-medium text-gray-900"},L.name),n.createElement("div",{className:"text-sm text-gray-500"},L.email),n.createElement("div",{className:"text-xs text-gray-400"},"Registrado: ",L.createdAt?new Date(L.createdAt).toLocaleDateString():"Fecha no disponible"))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${P(L.role)}`},I(L.role))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},L.client&&n.createElement("div",null,n.createElement("div",null,"DNI: ",L.client.dni),L.client.phone&&n.createElement("div",{key:L.client.dni+"-phone"},"Tel: ",L.client.phone),L.client.address&&n.createElement("div",{key:L.client.dni+"-address"},"Dir: ",L.client.address))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},n.createElement("div",null,n.createElement("div",null,"Casos: ",((F=L.expedientesAsLawyer)==null?void 0:F.length)||0),n.createElement("div",null,"Citas: ",((T=L.appointmentsAsLawyer)==null?void 0:T.length)||0),n.createElement("div",null,"Tareas: ",((M=L.assignedTasks)==null?void 0:M.length)||0))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium"},n.createElement("div",{className:"flex space-x-2"},n.createElement("button",{onClick:()=>O(L),className:"text-blue-600 hover:text-blue-900",key:L.id+"-edit"},"Editar"),L.id!==(w==null?void 0:w.id)&&n.createElement("button",{onClick:()=>$(L.id),className:"text-red-600 hover:text-red-900",key:L.id+"-delete"},"Eliminar"))))}))))),(!D||D.length===0)&&n.createElement("div",{className:"text-center py-12"},n.createElement("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})),n.createElement("h3",{className:"mt-2 text-sm font-medium text-gray-900"},"No se encontraron usuarios"),n.createElement("p",{className:"mt-1 text-sm text-gray-500"},"Intenta ajustar los filtros de búsqueda."))),b&&f&&n.createElement("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},n.createElement("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},n.createElement("div",{className:"mt-3"},n.createElement("div",{className:"flex justify-between items-center mb-4"},n.createElement("h3",{className:"text-lg font-medium text-gray-900"},"Editar Usuario"),n.createElement("button",{onClick:()=>y(!1),className:"text-gray-400 hover:text-gray-600","aria-label":"Cerrar modal de edición",title:"Cerrar modal de edición"},n.createElement("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})))),l&&n.createElement("div",{className:"mb-4 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md p-2"},l),n.createElement("div",{className:"space-y-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Nombre"),n.createElement("input",{type:"text",value:v.name,onChange:L=>p(F=>({...F,name:L.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ingrese el nombre","aria-label":"Nombre del usuario",title:"Nombre del usuario"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Email"),n.createElement("input",{type:"email",value:v.email,onChange:L=>p(F=>({...F,email:L.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ingrese el email","aria-label":"Email del usuario",title:"Email del usuario"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Rol"),n.createElement("select",{value:v.role,onChange:L=>p(F=>({...F,role:L.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Rol del usuario",title:"Rol del usuario"},n.createElement("option",{value:"CLIENTE"},"Cliente"),n.createElement("option",{value:"ABOGADO"},"Abogado"),n.createElement("option",{value:"ADMIN"},"Administrador"))),v.role==="CLIENTE"&&n.createElement(n.Fragment,null,n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"DNI"),n.createElement("input",{type:"text",value:v.dni,onChange:L=>p(F=>({...F,dni:L.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ingrese el DNI","aria-label":"DNI del cliente",title:"DNI del cliente"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Teléfono"),n.createElement("input",{type:"text",value:v.phone,onChange:L=>p(F=>({...F,phone:L.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ingrese el teléfono","aria-label":"Teléfono del cliente",title:"Teléfono del cliente"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Dirección"),n.createElement("input",{type:"text",value:v.address,onChange:L=>p(F=>({...F,address:L.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ingrese la dirección","aria-label":"Dirección del cliente",title:"Dirección del cliente"})))),n.createElement("div",{className:"flex justify-end space-x-3 mt-6"},n.createElement("button",{onClick:()=>y(!1),className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"},"Cancelar"),n.createElement("button",{onClick:A,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"},"Actualizar"))))))},WY=()=>{const{user:e}=Pe(),t=o=>e?o.includes(e.role):!1,r=(e==null?void 0:e.role)==="ADMIN",a=(e==null?void 0:e.role)==="ABOGADO",s=(e==null?void 0:e.role)==="CLIENTE";return{hasPermission:t,isAdmin:r,isLawyer:a,isClient:s,userRole:(e==null?void 0:e.role)||null}},HY=()=>{const[e,t]=g.useState([]),[r,a]=g.useState([]),[s,o]=g.useState(!0),[l,i]=g.useState(null),[c,d]=g.useState(""),[u,m]=g.useState("todos"),[f,x]=g.useState("asc"),{isAdmin:b,userRole:y}=WY();g.useEffect(()=>{v()},[]);const v=async()=>{var S,C;try{o(!0);const D=await Z.get("/admin/cases");console.log("Cases response:",D.data),Array.isArray(D.data)&&D.data.forEach((k,O)=>{console.log(`Case ${O}:`,{id:k.id,title:k.title,description:k.description,status:k.status,createdAt:k.createdAt,client:k.client,lawyer:k.lawyer,documents:k.documents,tasks:k.tasks})}),t(D.data),i(null)}catch(D){console.error("Error fetching cases:",D),i(((C=(S=D.response)==null?void 0:S.data)==null?void 0:C.message)||"Error al cargar expedientes")}finally{o(!1)}};g.useEffect(()=>{let S=e;c&&(S=S.filter(C=>{var D;return C.title.toLowerCase().includes(c.toLowerCase())||((D=C.description)==null?void 0:D.toLowerCase().includes(c.toLowerCase()))||C.client.user.name.toLowerCase().includes(c.toLowerCase())||C.lawyer.name.toLowerCase().includes(c.toLowerCase())})),u!=="todos"&&(S=S.filter(C=>C.status===u)),a(S)},[e,c,u]);const p=g.useMemo(()=>[...r].sort((C,D)=>C.id<D.id?f==="asc"?-1:1:C.id>D.id?f==="asc"?1:-1:0),[r,f]),h=()=>{x(S=>S==="asc"?"desc":"asc")},E=async S=>{var C,D;if(confirm("¿Estás seguro de que quieres eliminar este expediente?"))try{await Z.delete(`/admin/cases/${S}`),v()}catch(k){console.error("Error deleting case:",k),i(((D=(C=k.response)==null?void 0:C.data)==null?void 0:D.message)||"Error al eliminar expediente")}},w=S=>{switch(S){case"ABIERTO":return"bg-green-100 text-green-800";case"EN_PROCESO":return"bg-yellow-100 text-yellow-800";case"CERRADO":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},N=S=>{switch(S){case"ABIERTO":return"Abierto";case"EN_PROCESO":return"En Proceso";case"CERRADO":return"Cerrado";default:return S}};return b?s?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})):l?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-red-600 text-xl mb-4"},"Error"),n.createElement("div",{className:"text-gray-600"},l),n.createElement("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},"Reintentar"))):n.createElement("div",{className:"py-6"},n.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"flex justify-between items-center"},n.createElement("div",null,n.createElement("h1",{className:"text-3xl font-bold text-gray-900"},"Gestión de Expedientes"),n.createElement("p",{className:"mt-2 text-gray-600"},"Administra todos los expedientes del sistema")))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow mb-6"},n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Buscar"),n.createElement("input",{type:"text",placeholder:"Buscar por título, descripción, cliente o abogado...",value:c,onChange:S=>d(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Estado"),n.createElement("select",{value:u,onChange:S=>m(S.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Filtrar por estado"},n.createElement("option",{value:"todos"},"Todos los estados"),n.createElement("option",{value:"ABIERTO"},"Abierto"),n.createElement("option",{value:"EN_PROCESO"},"En Proceso"),n.createElement("option",{value:"CERRADO"},"Cerrado"))),n.createElement("div",{className:"flex items-end"},n.createElement("button",{onClick:()=>{d(""),m("todos")},className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"},"Limpiar Filtros")))),n.createElement("div",{className:"bg-white shadow rounded-lg overflow-hidden"},n.createElement("div",{className:"overflow-x-auto"},n.createElement("table",{className:"min-w-full divide-y divide-gray-200"},n.createElement("thead",{className:"bg-gray-50"},n.createElement("tr",null,n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:h},"Expediente",n.createElement("span",{className:"ml-1"},f==="asc"?"▲":"▼")),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Cliente"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Abogado"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Estado"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actividad"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Acciones"))),n.createElement("tbody",{className:"bg-white divide-y divide-gray-200"},p.map(S=>{var C,D,k,O,A,$,P,I,L;return n.createElement("tr",{key:S.id||Math.random(),className:"hover:bg-gray-50"},n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("div",null,n.createElement("div",{className:"text-sm font-medium text-gray-900"},S.title||"Sin título"),n.createElement("div",{className:"text-sm text-gray-500"},S.description||"Sin descripción"),n.createElement("div",{className:"text-xs text-gray-400"},"Creado: ",S.createdAt&&!isNaN(Date.parse(S.createdAt))?new Date(S.createdAt).toLocaleDateString():"Fecha no disponible"))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("div",null,n.createElement("div",{className:"text-sm font-medium text-gray-900"},((D=(C=S.client)==null?void 0:C.user)==null?void 0:D.name)||((O=(k=S.client)==null?void 0:k.user)==null?void 0:O.email)||"Cliente no disponible"),n.createElement("div",{className:"text-sm text-gray-500"},(($=(A=S.client)==null?void 0:A.user)==null?void 0:$.email)||"Email no disponible"))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("div",null,n.createElement("div",{className:"text-sm font-medium text-gray-900"},((P=S.lawyer)==null?void 0:P.name)||((I=S.lawyer)==null?void 0:I.email)||"Abogado no disponible"),n.createElement("div",{className:"text-sm text-gray-500"},((L=S.lawyer)==null?void 0:L.email)||"Email no disponible"))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${w(S.status)}`},N(S.status))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},n.createElement("div",null,n.createElement("div",null,"Documentos: ",Array.isArray(S.documents)?S.documents.length:0),n.createElement("div",null,"Tareas: ",Array.isArray(S.tasks)?S.tasks.length:0))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium"},n.createElement("div",{className:"flex space-x-2"},n.createElement(De,{to:`/admin/cases/${S.id}`,className:"text-blue-600 hover:text-blue-900",key:S.id+"-ver"},"Ver"),n.createElement("button",{onClick:()=>E(S.id),className:"text-red-600 hover:text-red-900",key:S.id+"-eliminar"},"Eliminar"))))}))))),(!r||r.length===0)&&n.createElement("div",{className:"text-center py-12"},n.createElement("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})),n.createElement("h3",{className:"mt-2 text-sm font-medium text-gray-900"},"No se encontraron expedientes"),n.createElement("p",{className:"mt-1 text-sm text-gray-500"},"Intenta ajustar los filtros de búsqueda.")))):(console.warn(`Access denied: User role ${y} does not have admin permissions`),n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-red-600 text-xl mb-4"},"Acceso Denegado"),n.createElement("div",{className:"text-gray-600"},"No tienes permisos para acceder a esta página."))))},YY=()=>{var K,fe;const[e,t]=g.useState([]),[r,a]=g.useState([]),[s,o]=g.useState([]),[l,i]=g.useState(!0),[c,d]=g.useState(null),[u,m]=g.useState(""),[f,x]=g.useState(""),[b,y]=g.useState("date"),[v,p]=g.useState("desc"),[h,E]=g.useState(1),[w]=g.useState(10),[N,S]=g.useState(null),[C,D]=g.useState(!1),[k,O]=g.useState(new Date),[A,$]=g.useState({date:"",time:"",location:"",notes:"",lawyerId:""});g.useEffect(()=>{P(),I();const W=setInterval(()=>{P()},3e4);return()=>clearInterval(W)},[]);const P=async()=>{var W,pe;try{i(!0);const se=await Z.get("/admin/appointments");t(se.data),O(new Date),d(null)}catch(se){console.error("Error fetching appointments:",se),d(((pe=(W=se.response)==null?void 0:W.data)==null?void 0:pe.message)||"Error al cargar citas")}finally{i(!1)}},I=async()=>{try{console.log("🔍 Fetching lawyers...");const W=await Z.get("/admin/users");if(console.log("📊 Response from /admin/users:",W),console.log("📋 Response data type:",typeof W.data),console.log("📋 Response data:",W.data),Array.isArray(W.data)){const pe=W.data.filter(se=>se.role==="ABOGADO");console.log("👨‍💼 Found lawyers:",pe),o(pe)}else console.error("Error: response.data is not an array:",W.data),o([])}catch(W){console.error("Error fetching lawyers:",W)}};g.useEffect(()=>{let W=e;if(u){const pe=u.toLowerCase().split(";").filter(se=>se.trim().length>0);W=W.filter(se=>pe.every(be=>{var J,le,Se,Ce,ke,Re;const $e=be.trim(),qe={clientName:se.fullName||((le=(J=se.client)==null?void 0:J.user)==null?void 0:le.name)||"",clientEmail:se.email||((Ce=(Se=se.client)==null?void 0:Se.user)==null?void 0:Ce.email)||"",lawyerName:((ke=se.lawyer)==null?void 0:ke.name)||"",lawyerEmail:((Re=se.lawyer)==null?void 0:Re.email)||"",location:se.location||"No especificada",notes:se.notes||"",type:se.type==="VISITOR"?"visitante":"cliente",status:L(se.date)?"próxima":"pasada"};return Object.values(qe).some(He=>He.toLowerCase().includes($e))}))}if(f){const pe=new Date(f);W=W.filter(se=>new Date(se.date).toDateString()===pe.toDateString())}a(W),E(1)},[e,u,f]);const L=W=>new Date(W)>new Date,F=W=>new Date(W)<new Date,T=(W,pe)=>{var se,be,$e;switch(pe){case"date":return new Date(W.date).getTime();case"client":return(W.fullName||((be=(se=W.client)==null?void 0:se.user)==null?void 0:be.name)||"").toLowerCase();case"lawyer":return((($e=W.lawyer)==null?void 0:$e.name)||"").toLowerCase();case"location":return(W.location||"").toLowerCase();case"status":return L(W.date)?1:0;case"type":return W.type;default:return""}},M=g.useMemo(()=>[...r].sort((W,pe)=>{const se=T(W,b),be=T(pe,b);return typeof se=="string"&&typeof be=="string"?v==="asc"?se.localeCompare(be):be.localeCompare(se):v==="asc"?se-be:be-se}),[r,b,v]),V=Math.ceil(M.length/w),X=(h-1)*w,z=X+w,U=M.slice(X,z),Y=W=>{b===W?p(pe=>pe==="asc"?"desc":"asc"):(y(W),p("asc"))},Q=W=>{E(W)},j=W=>{var se;const pe=new Date(W.date);$({date:pe.toISOString().split("T")[0],time:pe.toTimeString().slice(0,5),location:W.location||"",notes:W.notes||"",lawyerId:((se=W.lawyer)==null?void 0:se.id)||""}),S(W),D(!0)},B=async()=>{var W,pe;if(N)try{const se=localStorage.getItem("token"),be={date:`${A.date}T${A.time}:00`,location:A.location,notes:A.notes,lawyerId:A.lawyerId};await Z.put(`/admin/appointments/${N.id}`,be),D(!1),S(null),P()}catch(se){console.error("Error updating appointment:",se),d(((pe=(W=se.response)==null?void 0:W.data)==null?void 0:pe.message)||"Error al actualizar cita")}},H=async W=>{var pe,se;if(confirm("¿Estás seguro de que quieres eliminar esta cita?"))try{await Z.delete(`/admin/appointments/${W}`),P()}catch(be){console.error("Error deleting appointment:",be),d(((se=(pe=be.response)==null?void 0:pe.data)==null?void 0:se.message)||"Error al eliminar cita")}};return l?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})):c?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-red-600 text-xl mb-4"},"Error"),n.createElement("div",{className:"text-gray-600"},c),n.createElement("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},"Reintentar"))):n.createElement("div",{className:"py-6"},n.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"flex justify-between items-center"},n.createElement("div",null,n.createElement("h1",{className:"text-3xl font-bold text-gray-900"},"Gestión de Citas"),n.createElement("p",{className:"mt-2 text-gray-600"},"Administra todas las citas del sistema - Asigna abogados y reprograma citas"),n.createElement("p",{className:"mt-1 text-sm text-gray-500"},"Última actualización: ",k.toLocaleString(),n.createElement("span",{className:"ml-2 text-blue-600"},"(Actualización automática cada 30s)"))),n.createElement("div",{className:"flex items-center space-x-3"},n.createElement("button",{onClick:P,disabled:l,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2"},n.createElement("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})),n.createElement("span",null,"Refrescar")),u&&n.createElement("button",{onClick:()=>{console.log("🔍 DEBUG: Analizando búsqueda actual"),console.log("📝 Término de búsqueda:",u),console.log("📊 Total de citas:",e.length),console.log("🎯 Citas filtradas:",r.length),console.log("---"),e.forEach(W=>{var be,$e,qe,J,le,Se;const pe=u.toLowerCase().split(";").filter(Ce=>Ce.trim().length>0),se={clientName:W.fullName||(($e=(be=W.client)==null?void 0:be.user)==null?void 0:$e.name)||"",clientEmail:W.email||((J=(qe=W.client)==null?void 0:qe.user)==null?void 0:J.email)||"",lawyerName:((le=W.lawyer)==null?void 0:le.name)||"",lawyerEmail:((Se=W.lawyer)==null?void 0:Se.email)||"",location:W.location||"No especificada",notes:W.notes||"",type:W.type==="VISITOR"?"visitante":"cliente",status:L(W.date)?"próxima":"pasada"};console.log(`🔍 Cita ${W.id}:`),console.log("📋 Campos:",se),pe.forEach(Ce=>{const ke=Ce.trim(),Re=Object.entries(se).filter(([He,Tt])=>Tt.toLowerCase().includes(ke)).map(([He,Tt])=>`${He}: "${Tt}"`);Re.length>0?console.log(`✅ "${ke}" encontrado en:`,Re):console.log(`❌ "${ke}" NO encontrado`)}),console.log("---")})},className:"px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 flex items-center space-x-2"},n.createElement("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})),n.createElement("span",null,"Debug"))))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow mb-6"},n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Buscar"),n.createElement("input",{type:"text",placeholder:"Buscar por cliente, abogado, ubicación, notas, tipo (cliente/visitante) o estado (próxima/pasada). Puedes combinar términos separados por punto y coma (;)...",value:u,onChange:W=>m(W.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Fecha"),n.createElement("input",{type:"date",value:f,onChange:W=>x(W.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Filtrar por fecha"})),n.createElement("div",{className:"flex items-end"},n.createElement("button",{onClick:()=>{m(""),x("")},className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"},"Limpiar Filtros")))),n.createElement("div",{className:"bg-white p-4 rounded-lg shadow mb-4"},n.createElement("div",{className:"flex justify-between items-center"},n.createElement("div",{className:"text-sm text-gray-600"},n.createElement("span",{className:"font-medium"},M.length)," citas encontradas",u&&n.createElement("span",{className:"ml-2"},'para "',n.createElement("span",{className:"font-medium"},u),'"'),f&&n.createElement("span",{className:"ml-2"},"en ",n.createElement("span",{className:"font-medium"},new Date(f).toLocaleDateString()))),n.createElement("div",{className:"text-sm text-gray-500"},"Mostrando ",X+1,"-",Math.min(z,M.length)," de ",M.length," citas"))),n.createElement("div",{className:"bg-white shadow rounded-lg overflow-hidden"},n.createElement("div",{className:"overflow-x-auto"},n.createElement("table",{className:"min-w-full divide-y divide-gray-200"},n.createElement("thead",{className:"bg-gray-50"},n.createElement("tr",null,n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:()=>Y("date")},"Fecha y Hora",n.createElement("span",{className:"ml-1"},b==="date"?v==="asc"?"▲":"▼":"")),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:()=>Y("client")},"Cliente",n.createElement("span",{className:"ml-1"},b==="client"?v==="asc"?"▲":"▼":"")),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:()=>Y("lawyer")},"Abogado",n.createElement("span",{className:"ml-1"},b==="lawyer"?v==="asc"?"▲":"▼":"")),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:()=>Y("location")},"Ubicación",n.createElement("span",{className:"ml-1"},b==="location"?v==="asc"?"▲":"▼":"")),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:()=>Y("status")},"Estado",n.createElement("span",{className:"ml-1"},b==="status"?v==="asc"?"▲":"▼":"")),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:()=>Y("type")},"Tipo",n.createElement("span",{className:"ml-1"},b==="type"?v==="asc"?"▲":"▼":"")),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Acciones"))),n.createElement("tbody",{className:"bg-white divide-y divide-gray-200"},U.map(W=>{var pe,se,be,$e,qe,J;return n.createElement("tr",{key:W.id,className:`hover:bg-gray-50 ${F(W.date)?"bg-gray-50":""}`},n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("div",null,n.createElement("div",{className:"text-sm font-medium text-gray-900"},new Date(W.date).toLocaleDateString()),n.createElement("div",{className:"text-sm text-gray-500"},new Date(W.date).toLocaleTimeString()))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("div",null,n.createElement("div",{className:"text-sm font-medium text-gray-900"},W.fullName||((se=(pe=W.client)==null?void 0:pe.user)==null?void 0:se.name)||"—"),n.createElement("div",{className:"text-sm text-gray-500"},W.email||(($e=(be=W.client)==null?void 0:be.user)==null?void 0:$e.email)||"—"))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("div",null,n.createElement("div",{className:"text-sm font-medium text-gray-900"},((qe=W.lawyer)==null?void 0:qe.name)||"—"),n.createElement("div",{className:"text-sm text-gray-500"},((J=W.lawyer)==null?void 0:J.email)||"—"))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},W.location||"No especificada"),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},L(W.date)?n.createElement("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800"},"Próxima"):n.createElement("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800"},"Pasada")),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},W.type==="VISITOR"?n.createElement("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-purple-100 text-purple-800"},"Visitante (Chatbot)"):n.createElement("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800"},"Cliente")),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium"},n.createElement("div",{className:"flex space-x-2"},n.createElement("button",{onClick:()=>j(W),className:"text-blue-600 hover:text-blue-900"},"Editar"),n.createElement("button",{onClick:()=>H(W.id),className:"text-red-600 hover:text-red-900"},"Eliminar"))))}))))),V>1&&n.createElement("div",{className:"flex justify-center items-center space-x-2 mt-6"},n.createElement("button",{onClick:()=>Q(h-1),disabled:h===1,className:"px-3 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed"},"Anterior"),n.createElement("span",{className:"text-sm text-gray-700"},"Página ",h," de ",V),n.createElement("button",{onClick:()=>Q(h+1),disabled:h===V,className:"px-3 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed"},"Siguiente")),r.length===0&&n.createElement("div",{className:"text-center py-12"},n.createElement("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})),n.createElement("h3",{className:"mt-2 text-sm font-medium text-gray-900"},"No se encontraron citas"),n.createElement("p",{className:"mt-1 text-sm text-gray-500"},"Intenta ajustar los filtros de búsqueda."))),C&&N&&n.createElement("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},n.createElement("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},n.createElement("div",{className:"mt-3"},n.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-4"},"Editar Cita - ",((fe=(K=N.client)==null?void 0:K.user)==null?void 0:fe.name)||"Desconocido"),n.createElement("div",{className:"space-y-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Fecha"),n.createElement("input",{type:"date",value:A.date,onChange:W=>$({...A,date:W.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Hora"),n.createElement("input",{type:"time",value:A.time,onChange:W=>$({...A,time:W.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Abogado"),n.createElement("select",{value:A.lawyerId,onChange:W=>$({...A,lawyerId:W.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},s.map(W=>n.createElement("option",{key:W.id,value:W.id},W.name," (",W.email,")")))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Ubicación"),n.createElement("input",{type:"text",value:A.location,onChange:W=>$({...A,location:W.target.value}),placeholder:"Ubicación de la cita",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Notas"),n.createElement("textarea",{value:A.notes,onChange:W=>$({...A,notes:W.target.value}),placeholder:"Notas adicionales",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}))),n.createElement("div",{className:"flex justify-end space-x-3 mt-6"},n.createElement("button",{onClick:()=>{D(!1),S(null)},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400"},"Cancelar"),n.createElement("button",{onClick:B,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},"Guardar Cambios"))))))},qY=()=>{const[e,t]=g.useState([]),[r,a]=g.useState([]),[s,o]=g.useState(!0),[l,i]=g.useState(null),[c,d]=g.useState(""),[u,m]=g.useState("todos"),[f,x]=g.useState("todos"),[b,y]=g.useState("asc");g.useEffect(()=>{v()},[]);const v=async()=>{var k,O;try{o(!0);const A=await Z.get("/admin/tasks");t(A.data),i(null)}catch(A){console.error("Error fetching tasks:",A),i(((O=(k=A.response)==null?void 0:k.data)==null?void 0:O.message)||"Error al cargar tareas")}finally{o(!1)}};g.useEffect(()=>{let k=e;c&&(k=k.filter(O=>{var A,$,P,I;return O.title.toLowerCase().includes(c.toLowerCase())||((A=O.description)==null?void 0:A.toLowerCase().includes(c.toLowerCase()))||(($=O.expediente)==null?void 0:$.title.toLowerCase().includes(c.toLowerCase()))||((P=O.client)==null?void 0:P.user.name.toLowerCase().includes(c.toLowerCase()))||((I=O.assignedToUser)==null?void 0:I.name.toLowerCase().includes(c.toLowerCase()))})),u!=="todos"&&(k=k.filter(O=>O.status===u)),f!=="todos"&&(k=k.filter(O=>O.priority===f)),a(k)},[e,c,u,f]);const p=g.useMemo(()=>[...r].sort((k,O)=>{if(!k.dueDate)return 1;if(!O.dueDate)return-1;const A=new Date(k.dueDate).getTime(),$=new Date(O.dueDate).getTime();return b==="asc"?A-$:$-A}),[r,b]),h=()=>{y(k=>k==="asc"?"desc":"asc")},E=async k=>{var O,A;if(confirm("¿Estás seguro de que quieres eliminar esta tarea?"))try{await Z.delete(`/admin/tasks/${k}`),v()}catch($){console.error("Error deleting task:",$),i(((A=(O=$.response)==null?void 0:O.data)==null?void 0:A.message)||"Error al eliminar tarea")}},w=k=>{switch(k){case"URGENTE":return"bg-red-100 text-red-800";case"ALTA":return"bg-orange-100 text-orange-800";case"MEDIA":return"bg-yellow-100 text-yellow-800";case"BAJA":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},N=k=>{switch(k){case"PENDIENTE":return"bg-yellow-100 text-yellow-800";case"EN_PROGRESO":return"bg-blue-100 text-blue-800";case"COMPLETADA":return"bg-green-100 text-green-800";case"CANCELADA":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},S=k=>{switch(k){case"URGENTE":return"Urgente";case"ALTA":return"Alta";case"MEDIA":return"Media";case"BAJA":return"Baja";default:return k}},C=k=>{switch(k){case"PENDIENTE":return"Pendiente";case"EN_PROGRESO":return"En Progreso";case"COMPLETADA":return"Completada";case"CANCELADA":return"Cancelada";default:return k}},D=k=>new Date(k)<new Date;return s?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})):l?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-red-600 text-xl mb-4"},"Error"),n.createElement("div",{className:"text-gray-600"},l),n.createElement("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},"Reintentar"))):n.createElement("div",{className:"py-6"},n.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"flex justify-between items-center"},n.createElement("div",null,n.createElement("h1",{className:"text-3xl font-bold text-gray-900"},"Gestión de Tareas"),n.createElement("p",{className:"mt-2 text-gray-600"},"Administra todas las tareas del sistema")))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow mb-6"},n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Buscar"),n.createElement("input",{type:"text",placeholder:"Buscar por título, descripción, expediente, cliente o asignado...",value:c,onChange:k=>d(k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Estado"),n.createElement("select",{value:u,onChange:k=>m(k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Filtrar por estado"},n.createElement("option",{value:"todos"},"Todos los estados"),n.createElement("option",{value:"PENDIENTE"},"Pendiente"),n.createElement("option",{value:"EN_PROGRESO"},"En Progreso"),n.createElement("option",{value:"COMPLETADA"},"Completada"),n.createElement("option",{value:"CANCELADA"},"Cancelada"))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Prioridad"),n.createElement("select",{value:f,onChange:k=>x(k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Filtrar por prioridad"},n.createElement("option",{value:"todos"},"Todas las prioridades"),n.createElement("option",{value:"URGENTE"},"Urgente"),n.createElement("option",{value:"ALTA"},"Alta"),n.createElement("option",{value:"MEDIA"},"Media"),n.createElement("option",{value:"BAJA"},"Baja"))),n.createElement("div",{className:"flex items-end"},n.createElement("button",{onClick:()=>{d(""),m("todos"),x("todos")},className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"},"Limpiar Filtros")))),n.createElement("div",{className:"bg-white shadow rounded-lg overflow-hidden"},n.createElement("div",{className:"overflow-x-auto"},n.createElement("table",{className:"min-w-full divide-y divide-gray-200"},n.createElement("thead",{className:"bg-gray-50"},n.createElement("tr",null,n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Tarea"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Prioridad"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Estado"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer select-none",onClick:h},"Vencimiento",n.createElement("span",{className:"ml-1"},b==="asc"?"▲":"▼")),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Asignado"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Acciones"))),n.createElement("tbody",{className:"bg-white divide-y divide-gray-200"},p.map(k=>{var O;return n.createElement("tr",{key:k.id,className:`hover:bg-gray-50 ${k.dueDate&&D(k.dueDate)&&k.status!=="COMPLETADA"?"bg-red-50":""}`},n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("div",null,n.createElement("div",{className:"text-sm font-medium text-gray-900"},k.title),n.createElement("div",{className:"text-sm text-gray-500"},k.description||"Sin descripción"),k.expediente&&n.createElement("div",{className:"text-xs text-blue-600"},"📋 ",k.expediente.title),k.client&&n.createElement("div",{className:"text-xs text-green-600"},"👤 ",k.client.user.name))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${w(k.priority)}`},S(k.priority))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${N(k.status)}`},C(k.status))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},k.dueDate?n.createElement("div",null,n.createElement("div",{className:k.dueDate&&D(k.dueDate)&&k.status!=="COMPLETADA"?"text-red-600 font-medium":""},new Date(k.dueDate).toLocaleDateString()),k.dueDate&&D(k.dueDate)&&k.status!=="COMPLETADA"&&n.createElement("div",{className:"text-xs text-red-500"},"⚠️ Vencida")):"Sin fecha límite"),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},((O=k.assignedToUser)==null?void 0:O.name)||"Sin asignar"),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium"},n.createElement("div",{className:"flex space-x-2"},n.createElement("button",{onClick:()=>E(k.id),className:"text-red-600 hover:text-red-900"},"Eliminar"))))}))))),p.length===0&&n.createElement("div",{className:"text-center py-12"},n.createElement("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})),n.createElement("h3",{className:"mt-2 text-sm font-medium text-gray-900"},"No se encontraron tareas"),n.createElement("p",{className:"mt-1 text-sm text-gray-500"},"Intenta ajustar los filtros de búsqueda."))))},GY=()=>{const[e,t]=g.useState([]),[r,a]=g.useState([]),[s,o]=g.useState(!0),[l,i]=g.useState(null),[c,d]=g.useState(""),[u,m]=g.useState("todos");g.useEffect(()=>{f()},[]);const f=async()=>{var v,p;try{o(!0);const h=localStorage.getItem("token"),E=await Z.get("/admin/documents",{headers:{Authorization:`Bearer ${h}`}});t(E.data),i(null)}catch(h){console.error("Error fetching documents:",h),i(((p=(v=h.response)==null?void 0:v.data)==null?void 0:p.message)||"Error al cargar documentos")}finally{o(!1)}};g.useEffect(()=>{let v=e;c&&(v=v.filter(p=>{var h;return p.originalName.toLowerCase().includes(c.toLowerCase())||((h=p.description)==null?void 0:h.toLowerCase().includes(c.toLowerCase()))||p.expediente.title.toLowerCase().includes(c.toLowerCase())||p.expediente.client.user.name.toLowerCase().includes(c.toLowerCase())||p.uploadedByUser.name.toLowerCase().includes(c.toLowerCase())})),u!=="todos"&&(v=v.filter(p=>p.mimeType.includes(u))),a(v)},[e,c,u]);const x=async v=>{var p,h;if(confirm("¿Estás seguro de que quieres eliminar este documento?"))try{const E=localStorage.getItem("token");await Z.delete(`/admin/documents/${v}`,{headers:{Authorization:`Bearer ${E}`}}),f()}catch(E){console.error("Error deleting document:",E),i(((h=(p=E.response)==null?void 0:p.data)==null?void 0:h.message)||"Error al eliminar documento")}},b=v=>{if(v===0)return"0 Bytes";const p=1024,h=["Bytes","KB","MB","GB"],E=Math.floor(Math.log(v)/Math.log(p));return parseFloat((v/Math.pow(p,E)).toFixed(2))+" "+h[E]},y=v=>v.includes("pdf")?"📄":v.includes("image")?"🖼️":v.includes("word")||v.includes("document")?"📝":v.includes("excel")||v.includes("spreadsheet")?"📊":v.includes("powerpoint")||v.includes("presentation")?"📈":"📎";return s?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})):l?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-red-600 text-xl mb-4"},"Error"),n.createElement("div",{className:"text-gray-600"},l),n.createElement("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},"Reintentar"))):n.createElement("div",{className:"py-6"},n.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"flex justify-between items-center"},n.createElement("div",null,n.createElement("h1",{className:"text-3xl font-bold text-gray-900"},"Gestión de Documentos"),n.createElement("p",{className:"mt-2 text-gray-600"},"Administra todos los documentos del sistema")))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow mb-6"},n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Buscar"),n.createElement("input",{type:"text",placeholder:"Buscar por nombre, descripción, expediente, cliente o subido por...",value:c,onChange:v=>d(v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Tipo de Archivo"),n.createElement("select",{value:u,onChange:v=>m(v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Filtrar por tipo de archivo"},n.createElement("option",{value:"todos"},"Todos los tipos"),n.createElement("option",{value:"pdf"},"PDF"),n.createElement("option",{value:"image"},"Imágenes"),n.createElement("option",{value:"word"},"Documentos Word"),n.createElement("option",{value:"excel"},"Hojas de cálculo"),n.createElement("option",{value:"powerpoint"},"Presentaciones"))),n.createElement("div",{className:"flex items-end"},n.createElement("button",{onClick:()=>{d(""),m("todos")},className:"w-full px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2"},"Limpiar Filtros")))),n.createElement("div",{className:"bg-white shadow rounded-lg overflow-hidden"},n.createElement("div",{className:"overflow-x-auto"},n.createElement("table",{className:"min-w-full divide-y divide-gray-200"},n.createElement("thead",{className:"bg-gray-50"},n.createElement("tr",null,n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Documento"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Expediente"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Cliente"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Subido por"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Tamaño"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Acciones"))),n.createElement("tbody",{className:"bg-white divide-y divide-gray-200"},r.map(v=>{var p,h,E,w,N,S,C,D,k;return n.createElement("tr",{key:v.id,className:"hover:bg-gray-50"},n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("span",{className:"text-2xl"},y(v.mimeType))),n.createElement("div",{className:"ml-3"},n.createElement("div",{className:"text-sm font-medium text-gray-900"},v.originalName),n.createElement("div",{className:"text-sm text-gray-500"},v.description||"Sin descripción"),n.createElement("div",{className:"text-xs text-gray-400"},"Subido: ",new Date(v.uploadedAt).toLocaleDateString())))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("div",{className:"text-sm text-gray-900"},((p=v.expediente)==null?void 0:p.title)||"Sin expediente")),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("div",null,n.createElement("div",{className:"text-sm font-medium text-gray-900"},((w=(E=(h=v.expediente)==null?void 0:h.client)==null?void 0:E.user)==null?void 0:w.name)||"Sin cliente"),n.createElement("div",{className:"text-sm text-gray-500"},((C=(S=(N=v.expediente)==null?void 0:N.client)==null?void 0:S.user)==null?void 0:C.email)||"Sin email"))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("div",null,n.createElement("div",{className:"text-sm font-medium text-gray-900"},((D=v.uploadedByUser)==null?void 0:D.name)||"Sin usuario"),n.createElement("div",{className:"text-sm text-gray-500"},((k=v.uploadedByUser)==null?void 0:k.email)||"Sin email"))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},b(v.fileSize)),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium"},n.createElement("div",{className:"flex space-x-2"},n.createElement("a",{href:v.fileUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-900"},"Ver"),n.createElement("button",{onClick:()=>x(v.id),className:"text-red-600 hover:text-red-900"},"Eliminar"))))}))))),r.length===0&&n.createElement("div",{className:"text-center py-12"},n.createElement("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})),n.createElement("h3",{className:"mt-2 text-sm font-medium text-gray-900"},"No se encontraron documentos"),n.createElement("p",{className:"mt-1 text-sm text-gray-500"},"Intenta ajustar los filtros de búsqueda."))))};var Wd={},O2={L:1,M:0,Q:3,H:2},R2={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},KY=R2;function M2(e){this.mode=KY.MODE_8BIT_BYTE,this.data=e}M2.prototype={getLength:function(e){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}};var XY=M2,dc=O2;function Sn(e,t){this.totalCount=e,this.dataCount=t}Sn.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];Sn.getRSBlocks=function(e,t){var r=Sn.getRsBlockTable(e,t);if(r==null)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var a=r.length/3,s=new Array,o=0;o<a;o++)for(var l=r[o*3+0],i=r[o*3+1],c=r[o*3+2],d=0;d<l;d++)s.push(new Sn(i,c));return s};Sn.getRsBlockTable=function(e,t){switch(t){case dc.L:return Sn.RS_BLOCK_TABLE[(e-1)*4+0];case dc.M:return Sn.RS_BLOCK_TABLE[(e-1)*4+1];case dc.Q:return Sn.RS_BLOCK_TABLE[(e-1)*4+2];case dc.H:return Sn.RS_BLOCK_TABLE[(e-1)*4+3];default:return}};var QY=Sn;function P2(){this.buffer=new Array,this.length=0}P2.prototype={get:function(e){var t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1},put:function(e,t){for(var r=0;r<t;r++)this.putBit((e>>>t-r-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var JY=P2,sn={glog:function(e){if(e<1)throw new Error("glog("+e+")");return sn.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return sn.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var jt=0;jt<8;jt++)sn.EXP_TABLE[jt]=1<<jt;for(var jt=8;jt<256;jt++)sn.EXP_TABLE[jt]=sn.EXP_TABLE[jt-4]^sn.EXP_TABLE[jt-5]^sn.EXP_TABLE[jt-6]^sn.EXP_TABLE[jt-8];for(var jt=0;jt<255;jt++)sn.LOG_TABLE[sn.EXP_TABLE[jt]]=jt;var L2=sn,qa=L2;function Uc(e,t){if(e.length==null)throw new Error(e.length+"/"+t);for(var r=0;r<e.length&&e[r]==0;)r++;this.num=new Array(e.length-r+t);for(var a=0;a<e.length-r;a++)this.num[a]=e[a+r]}Uc.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),r=0;r<this.getLength();r++)for(var a=0;a<e.getLength();a++)t[r+a]^=qa.gexp(qa.glog(this.get(r))+qa.glog(e.get(a)));return new Uc(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=qa.glog(this.get(0))-qa.glog(e.get(0)),r=new Array(this.getLength()),a=0;a<this.getLength();a++)r[a]=this.get(a);for(var a=0;a<e.getLength();a++)r[a]^=qa.gexp(qa.glog(e.get(a))+t);return new Uc(r,0).mod(e)}};var I2=Uc,Or=R2,RE=I2,ZY=L2,da={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},$t={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;$t.getBCHDigit(t)-$t.getBCHDigit($t.G15)>=0;)t^=$t.G15<<$t.getBCHDigit(t)-$t.getBCHDigit($t.G15);return(e<<10|t)^$t.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;$t.getBCHDigit(t)-$t.getBCHDigit($t.G18)>=0;)t^=$t.G18<<$t.getBCHDigit(t)-$t.getBCHDigit($t.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;e!=0;)t++,e>>>=1;return t},getPatternPosition:function(e){return $t.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,r){switch(e){case da.PATTERN000:return(t+r)%2==0;case da.PATTERN001:return t%2==0;case da.PATTERN010:return r%3==0;case da.PATTERN011:return(t+r)%3==0;case da.PATTERN100:return(Math.floor(t/2)+Math.floor(r/3))%2==0;case da.PATTERN101:return t*r%2+t*r%3==0;case da.PATTERN110:return(t*r%2+t*r%3)%2==0;case da.PATTERN111:return(t*r%3+(t+r)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new RE([1],0),r=0;r<e;r++)t=t.multiply(new RE([1,ZY.gexp(r)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case Or.MODE_NUMBER:return 10;case Or.MODE_ALPHA_NUM:return 9;case Or.MODE_8BIT_BYTE:return 8;case Or.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case Or.MODE_NUMBER:return 12;case Or.MODE_ALPHA_NUM:return 11;case Or.MODE_8BIT_BYTE:return 16;case Or.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else if(t<41)switch(e){case Or.MODE_NUMBER:return 14;case Or.MODE_ALPHA_NUM:return 13;case Or.MODE_8BIT_BYTE:return 16;case Or.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}else throw new Error("type:"+t)},getLostPoint:function(e){for(var t=e.getModuleCount(),r=0,a=0;a<t;a++)for(var s=0;s<t;s++){for(var o=0,l=e.isDark(a,s),i=-1;i<=1;i++)if(!(a+i<0||t<=a+i))for(var c=-1;c<=1;c++)s+c<0||t<=s+c||i==0&&c==0||l==e.isDark(a+i,s+c)&&o++;o>5&&(r+=3+o-5)}for(var a=0;a<t-1;a++)for(var s=0;s<t-1;s++){var d=0;e.isDark(a,s)&&d++,e.isDark(a+1,s)&&d++,e.isDark(a,s+1)&&d++,e.isDark(a+1,s+1)&&d++,(d==0||d==4)&&(r+=3)}for(var a=0;a<t;a++)for(var s=0;s<t-6;s++)e.isDark(a,s)&&!e.isDark(a,s+1)&&e.isDark(a,s+2)&&e.isDark(a,s+3)&&e.isDark(a,s+4)&&!e.isDark(a,s+5)&&e.isDark(a,s+6)&&(r+=40);for(var s=0;s<t;s++)for(var a=0;a<t-6;a++)e.isDark(a,s)&&!e.isDark(a+1,s)&&e.isDark(a+2,s)&&e.isDark(a+3,s)&&e.isDark(a+4,s)&&!e.isDark(a+5,s)&&e.isDark(a+6,s)&&(r+=40);for(var u=0,s=0;s<t;s++)for(var a=0;a<t;a++)e.isDark(a,s)&&u++;var m=Math.abs(100*u/t/t-50)/5;return r+=m*10,r}},eq=$t,tq=XY,$2=QY,F2=JY,Ha=eq,rq=I2;function Cn(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var Tr=Cn.prototype;Tr.addData=function(e){var t=new tq(e);this.dataList.push(t),this.dataCache=null};Tr.isDark=function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]};Tr.getModuleCount=function(){return this.moduleCount};Tr.make=function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){for(var t=$2.getRSBlocks(e,this.errorCorrectLevel),r=new F2,a=0,s=0;s<t.length;s++)a+=t[s].dataCount;for(var s=0;s<this.dataList.length;s++){var o=this.dataList[s];r.put(o.mode,4),r.put(o.getLength(),Ha.getLengthInBits(o.mode,e)),o.write(r)}if(r.getLengthInBits()<=a*8)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())};Tr.makeImpl=function(e,t){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var a=0;a<this.moduleCount;a++)this.modules[r][a]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),this.dataCache==null&&(this.dataCache=Cn.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)};Tr.setupPositionProbePattern=function(e,t){for(var r=-1;r<=7;r++)if(!(e+r<=-1||this.moduleCount<=e+r))for(var a=-1;a<=7;a++)t+a<=-1||this.moduleCount<=t+a||(0<=r&&r<=6&&(a==0||a==6)||0<=a&&a<=6&&(r==0||r==6)||2<=r&&r<=4&&2<=a&&a<=4?this.modules[e+r][t+a]=!0:this.modules[e+r][t+a]=!1)};Tr.getBestMaskPattern=function(){for(var e=0,t=0,r=0;r<8;r++){this.makeImpl(!0,r);var a=Ha.getLostPoint(this);(r==0||e>a)&&(e=a,t=r)}return t};Tr.createMovieClip=function(e,t,r){var a=e.createEmptyMovieClip(t,r),s=1;this.make();for(var o=0;o<this.modules.length;o++)for(var l=o*s,i=0;i<this.modules[o].length;i++){var c=i*s,d=this.modules[o][i];d&&(a.beginFill(0,100),a.moveTo(c,l),a.lineTo(c+s,l),a.lineTo(c+s,l+s),a.lineTo(c,l+s),a.endFill())}return a};Tr.setupTimingPattern=function(){for(var e=8;e<this.moduleCount-8;e++)this.modules[e][6]==null&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)this.modules[6][t]==null&&(this.modules[6][t]=t%2==0)};Tr.setupPositionAdjustPattern=function(){for(var e=Ha.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var r=0;r<e.length;r++){var a=e[t],s=e[r];if(this.modules[a][s]==null)for(var o=-2;o<=2;o++)for(var l=-2;l<=2;l++)o==-2||o==2||l==-2||l==2||o==0&&l==0?this.modules[a+o][s+l]=!0:this.modules[a+o][s+l]=!1}};Tr.setupTypeNumber=function(e){for(var t=Ha.getBCHTypeNumber(this.typeNumber),r=0;r<18;r++){var a=!e&&(t>>r&1)==1;this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=a}for(var r=0;r<18;r++){var a=!e&&(t>>r&1)==1;this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=a}};Tr.setupTypeInfo=function(e,t){for(var r=this.errorCorrectLevel<<3|t,a=Ha.getBCHTypeInfo(r),s=0;s<15;s++){var o=!e&&(a>>s&1)==1;s<6?this.modules[s][8]=o:s<8?this.modules[s+1][8]=o:this.modules[this.moduleCount-15+s][8]=o}for(var s=0;s<15;s++){var o=!e&&(a>>s&1)==1;s<8?this.modules[8][this.moduleCount-s-1]=o:s<9?this.modules[8][15-s-1+1]=o:this.modules[8][15-s-1]=o}this.modules[this.moduleCount-8][8]=!e};Tr.mapData=function(e,t){for(var r=-1,a=this.moduleCount-1,s=7,o=0,l=this.moduleCount-1;l>0;l-=2)for(l==6&&l--;;){for(var i=0;i<2;i++)if(this.modules[a][l-i]==null){var c=!1;o<e.length&&(c=(e[o]>>>s&1)==1);var d=Ha.getMask(t,a,l-i);d&&(c=!c),this.modules[a][l-i]=c,s--,s==-1&&(o++,s=7)}if(a+=r,a<0||this.moduleCount<=a){a-=r,r=-r;break}}};Cn.PAD0=236;Cn.PAD1=17;Cn.createData=function(e,t,r){for(var a=$2.getRSBlocks(e,t),s=new F2,o=0;o<r.length;o++){var l=r[o];s.put(l.mode,4),s.put(l.getLength(),Ha.getLengthInBits(l.mode,e)),l.write(s)}for(var i=0,o=0;o<a.length;o++)i+=a[o].dataCount;if(s.getLengthInBits()>i*8)throw new Error("code length overflow. ("+s.getLengthInBits()+">"+i*8+")");for(s.getLengthInBits()+4<=i*8&&s.put(0,4);s.getLengthInBits()%8!=0;)s.putBit(!1);for(;!(s.getLengthInBits()>=i*8||(s.put(Cn.PAD0,8),s.getLengthInBits()>=i*8));)s.put(Cn.PAD1,8);return Cn.createBytes(s,a)};Cn.createBytes=function(e,t){for(var r=0,a=0,s=0,o=new Array(t.length),l=new Array(t.length),i=0;i<t.length;i++){var c=t[i].dataCount,d=t[i].totalCount-c;a=Math.max(a,c),s=Math.max(s,d),o[i]=new Array(c);for(var u=0;u<o[i].length;u++)o[i][u]=255&e.buffer[u+r];r+=c;var m=Ha.getErrorCorrectPolynomial(d),f=new rq(o[i],m.getLength()-1),x=f.mod(m);l[i]=new Array(m.getLength()-1);for(var u=0;u<l[i].length;u++){var b=u+x.getLength()-l[i].length;l[i][u]=b>=0?x.get(b):0}}for(var y=0,u=0;u<t.length;u++)y+=t[u].totalCount;for(var v=new Array(y),p=0,u=0;u<a;u++)for(var i=0;i<t.length;i++)u<o[i].length&&(v[p++]=o[i][u]);for(var u=0;u<s;u++)for(var i=0;i<t.length;i++)u<l[i].length&&(v[p++]=l[i][u]);return v};var nq=Cn,s0={};Object.defineProperty(s0,"__esModule",{value:!0});var aq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},sq=Qg,Rr=B2(sq),j2=g,mc=B2(j2);function B2(e){return e&&e.__esModule?e:{default:e}}function oq(e,t){var r={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a]);return r}var lq={bgColor:Rr.default.oneOfType([Rr.default.object,Rr.default.string]).isRequired,bgD:Rr.default.string.isRequired,fgColor:Rr.default.oneOfType([Rr.default.object,Rr.default.string]).isRequired,fgD:Rr.default.string.isRequired,size:Rr.default.number.isRequired,title:Rr.default.string,viewBoxSize:Rr.default.number.isRequired,xmlns:Rr.default.string},o0=(0,j2.forwardRef)(function(e,t){var r=e.bgColor,a=e.bgD,s=e.fgD,o=e.fgColor,l=e.size,i=e.title,c=e.viewBoxSize,d=e.xmlns,u=d===void 0?"http://www.w3.org/2000/svg":d,m=oq(e,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return mc.default.createElement("svg",aq({},m,{height:l,ref:t,viewBox:"0 0 "+c+" "+c,width:l,xmlns:u}),i?mc.default.createElement("title",null,i):null,mc.default.createElement("path",{d:a,fill:r}),mc.default.createElement("path",{d:s,fill:o}))});o0.displayName="QRCodeSvg";o0.propTypes=lq;s0.default=o0;Object.defineProperty(Wd,"__esModule",{value:!0});Wd.QRCode=void 0;var iq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},cq=Qg,zn=Pi(cq),uq=O2,dq=Pi(uq),mq=nq,fq=Pi(mq),z2=g,pq=Pi(z2),gq=s0,hq=Pi(gq);function Pi(e){return e&&e.__esModule?e:{default:e}}function vq(e,t){var r={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a]);return r}var yq={bgColor:zn.default.oneOfType([zn.default.object,zn.default.string]),fgColor:zn.default.oneOfType([zn.default.object,zn.default.string]),level:zn.default.string,size:zn.default.number,value:zn.default.string.isRequired},Hd=(0,z2.forwardRef)(function(e,t){var r=e.bgColor,a=r===void 0?"#FFFFFF":r,s=e.fgColor,o=s===void 0?"#000000":s,l=e.level,i=l===void 0?"L":l,c=e.size,d=c===void 0?256:c,u=e.value,m=vq(e,["bgColor","fgColor","level","size","value"]),f=new fq.default(-1,dq.default[i]);f.addData(u),f.make();var x=f.modules;return pq.default.createElement(hq.default,iq({},m,{bgColor:a,bgD:x.map(function(b,y){return b.map(function(v,p){return v?"":"M "+p+" "+y+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:o,fgD:x.map(function(b,y){return b.map(function(v,p){return v?"M "+p+" "+y+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:t,size:d,viewBoxSize:x.length}))});Wd.QRCode=Hd;Hd.displayName="QRCode";Hd.propTypes=yq;var U2=Wd.default=Hd;const Eq=()=>{var Ne;const{user:e}=Pe(),[t,r]=g.useState([]),[a,s]=g.useState([]),[o,l]=g.useState([]),[i,c]=g.useState(""),[d,u]=g.useState(""),[m,f]=g.useState(""),[x,b]=g.useState(!0),[y,v]=g.useState(null),[p,h]=g.useState(null),[E,w]=g.useState(!1),[N,S]=g.useState(null),[C,D]=g.useState(null),[k,O]=g.useState(null),[A,$]=g.useState([]),[P,I]=g.useState(null),[L,F]=g.useState(null),[T,M]=g.useState(!1),[V,X]=g.useState(null),[z,U]=g.useState(!1),[Y,Q]=g.useState(null),[j,B]=g.useState(!1),[H,K]=g.useState(null),[fe,W]=g.useState(!1);g.useEffect(()=>{pe(),se()},[]),g.useEffect(()=>{se()},[i,d,m]);const pe=async()=>{try{const[R,ue]=await Promise.all([Z.get("/admin/users?role=ABOGADO"),Z.get("/admin/users?role=CLIENTE")]);s(R.data),l(ue.data)}catch(R){console.error("Error fetching users:",R)}},se=async()=>{try{b(!0);const R={};i&&(R.lawyerId=i),d&&(R.clientId=d),m&&(R.paymentDate=m);const ue=await Z.get("/invoices",{params:R});console.log("📊 Admin invoices response:",ue.data),r(ue.data),v(null)}catch(R){console.error("Error fetching invoices:",R),v("Error al cargar las facturas"),r([])}finally{b(!1)}},be=async R=>{X(R),U(!0)},$e=async R=>{D(R.id);try{const ue=await Z.get(`/invoices/${R.id}/pdf-qr`,{responseType:"blob"}),Me=new Blob([ue.data],{type:"application/pdf"}),ye=window.URL.createObjectURL(Me),Qe=document.createElement("a");Qe.href=ye,Qe.target="_blank",Qe.download=`factura_${R.numeroFactura||R.id}.pdf`,document.body.appendChild(Qe),Qe.click(),document.body.removeChild(Qe),window.URL.revokeObjectURL(ye),O(`✅ PDF de factura ${R.numeroFactura} descargado`),setTimeout(()=>O(null),3e3)}catch(ue){console.error("Error downloading PDF:",ue),v("Error al descargar el PDF de la factura"),setTimeout(()=>v(null),3e3)}finally{D(null)}},qe=R=>{h(R),w(!0)},J=async R=>{if(confirm("¿Estás seguro de que quieres eliminar esta factura? Esta acción no se puede deshacer.")){S(R);try{await Z.delete(`/invoices/${R}`),O("✅ Factura eliminada correctamente"),se(),setTimeout(()=>O(null),5e3)}catch(ue){console.error("Error deleting invoice:",ue),v("Error al eliminar la factura"),setTimeout(()=>v(null),5e3)}finally{S(null)}}},le=R=>{F(R),M(!0)},Se=async R=>{Q(R),B(!0),W(!0);try{const ue=await Z.get(`/invoices/${R.id}/audit-history`);K(ue.data)}catch(ue){console.error("Error fetching audit history:",ue),v("Error al cargar el historial de auditoría"),setTimeout(()=>v(null),5e3)}finally{W(!1)}},Ce=R=>{var Me,ye;const ue={ID:R.id,"Número de Factura":R.numeroFactura,"Fecha de Factura":R.fechaFactura,"Fecha de Creación":R.createdAt,"Última Actualización":R.updatedAt,Estado:R.estado,"XML Generado":R.xml?"Sí":"No","XML Firmado":R.xmlFirmado?"Sí":"No","Sello de Tiempo":R.selloTiempo||"No aplicado",Emisor:R.emisor?`${R.emisor.name} (${R.emisor.email})`:"No especificado",Receptor:R.receptor?`${R.receptor.name} (${R.receptor.email})`:"No especificado",Expediente:R.expediente?`${R.expediente.title} (ID: ${R.expediente.id})`:"No asociado",Items:((Me=R.items)==null?void 0:Me.length)||0,Provisiones:((ye=R.provisionFondos)==null?void 0:ye.length)||0};return Object.entries(ue).map(([Qe,Ge])=>`${Qe}: ${Ge}`).join(`
`)},ke=async R=>{var ue;if(R.preventDefault(),!!p)try{const Me={fechaFactura:p.fechaFactura,estado:p.estado,paymentDate:p.paymentDate,tipoIVA:p.tipoIVA,descuento:p.descuento,retencion:p.retencion,items:(ue=p.items)==null?void 0:ue.map(ye=>({description:ye.description,quantity:ye.quantity,unitPrice:ye.unitPrice}))};await Z.put(`/invoices/${p.id}`,Me),O("✅ Factura actualizada correctamente"),w(!1),se(),setTimeout(()=>O(null),5e3)}catch(Me){console.error("Error updating invoice:",Me),v("Error al actualizar la factura"),setTimeout(()=>v(null),5e3)}},Re=R=>new Date(R).toLocaleDateString("es-ES"),He=R=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(R||0),Tt=async(R,ue)=>{I(ue);try{await navigator.clipboard.writeText(R),O(`✅ ${ue} copiado al portapapeles`),setTimeout(()=>O(null),3e3)}catch{v("Error al copiar al portapapeles"),setTimeout(()=>v(null),3e3)}finally{I(null)}},Jt=R=>{$(ue=>ue.includes(R)?ue.filter(Me=>Me!==R):[...ue,R])},Qr=()=>{A.length===t.length?$([]):$(t.map(R=>R.id))},ir=()=>{if(t.length===0){v("No hay facturas para exportar"),setTimeout(()=>v(null),3e3);return}const ue=[["ID","Número Factura","Fecha Factura","Importe Total","Estado","Abogado","Cliente","Fecha de Pago","Base Imponible","IVA","Fecha de Creación"].join(","),...t.map(Ge=>{var ut,Zt;return[Ge.id,Ge.numeroFactura||"",Ge.fechaFactura||"",Ge.importeTotal||0,Ge.estado||"",((ut=Ge.emisor)==null?void 0:ut.name)||"",((Zt=Ge.receptor)==null?void 0:Zt.name)||"",Ge.paymentDate||"",Ge.baseImponible||0,Ge.cuotaIVA||0,Ge.createdAt||""].join(",")})].join(`
`),Me=new Blob([ue],{type:"text/csv;charset=utf-8;"}),ye=document.createElement("a"),Qe=URL.createObjectURL(Me);ye.setAttribute("href",Qe),ye.setAttribute("download",`facturas_${new Date().toISOString().split("T")[0]}.csv`),ye.style.visibility="hidden",document.body.appendChild(ye),ye.click(),document.body.removeChild(ye),O("✅ CSV exportado correctamente"),setTimeout(()=>O(null),3e3)},ne=R=>{var ye,Qe,Ge,ut;const ue={"Número de Factura":R.numeroFactura||"N/A","Fecha de Factura":R.fechaFactura?Re(R.fechaFactura):"N/A","Importe Total":He(R.importeTotal||0),Estado:R.estado||"N/A",Abogado:((ye=R.emisor)==null?void 0:ye.name)||"N/A",Cliente:((Qe=R.receptor)==null?void 0:Qe.name)||"N/A","Fecha de Pago":R.paymentDate?Re(R.paymentDate):"N/A","Base Imponible":He(R.baseImponible||0),IVA:He(R.cuotaIVA||0),Items:((Ge=R.items)==null?void 0:Ge.length)||0,Provisiones:((ut=R.provisionFondos)==null?void 0:ut.length)||0},Me=Object.entries(ue).map(([Zt,zo])=>`${Zt}: ${zo}`).join(`
`);Tt(Me,`Datos de factura ${R.numeroFactura}`)},Ee=()=>{if(A.length===0){v("No hay facturas seleccionadas"),setTimeout(()=>v(null),3e3);return}const Me=t.filter(ye=>A.includes(ye.id)).map(ye=>{var Qe,Ge;return{"Número de Factura":ye.numeroFactura||"N/A","Fecha de Factura":ye.fechaFactura?Re(ye.fechaFactura):"N/A","Importe Total":He(ye.importeTotal||0),Estado:ye.estado||"N/A",Abogado:((Qe=ye.emisor)==null?void 0:Qe.name)||"N/A",Cliente:((Ge=ye.receptor)==null?void 0:Ge.name)||"N/A"}}).map((ye,Qe)=>`Factura ${Qe+1}:
${Object.entries(ye).map(([Ge,ut])=>`${Ge}: ${ut}`).join(`
`)}`).join(`

`);Tt(Me,`Datos de ${A.length} facturas seleccionadas`)},we=({invoice:R})=>{var ue,Me,ye,Qe,Ge;return n.createElement("div",{className:"bg-white p-8 max-w-4xl mx-auto"},n.createElement("div",{className:"border-b-2 border-gray-300 pb-6 mb-6"},n.createElement("div",{className:"flex justify-between items-start"},n.createElement("div",null,n.createElement("h1",{className:"text-3xl font-bold text-gray-800 mb-2"},"FACTURA"),n.createElement("div",{className:"my-4 flex flex-col items-center"},R.qrData?n.createElement(n.Fragment,null,n.createElement("h4",{className:"text-xs text-gray-600 mb-1"},"Código QR de la factura"),n.createElement(U2,{value:R.qrData,size:120}),n.createElement("pre",{className:"text-xs mt-1 bg-gray-100 p-1 rounded"},R.qrData)):n.createElement("span",{className:"text-xs text-gray-400"},"QR no disponible")),n.createElement("div",{className:"text-lg text-gray-600"},n.createElement("div",null,n.createElement("strong",null,"Número:")," ",R.numeroFactura||"N/A"),n.createElement("div",null,n.createElement("strong",null,"Fecha:")," ",R.fechaFactura?Re(R.fechaFactura):"N/A"),n.createElement("div",null,n.createElement("strong",null,"Estado:")," ",n.createElement("span",{className:`px-2 py-1 rounded text-xs ${R.estado==="emitida"?"bg-green-100 text-green-800":R.estado==="pagada"?"bg-blue-100 text-blue-800":R.estado==="anulada"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`},(R.estado||"N/A").toUpperCase())))),n.createElement("div",{className:"text-right text-gray-600"},n.createElement("div",null,n.createElement("strong",null,"Fecha de Operación:")," ",R.fechaOperacion?Re(R.fechaOperacion):"N/A"),n.createElement("div",null,n.createElement("strong",null,"Método de Pago:")," ",R.metodoPago||"N/A"),n.createElement("div",null,n.createElement("strong",null,"Clave de Operación:")," ",R.claveOperacion||"N/A")))),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8"},n.createElement("div",null,n.createElement("h3",{className:"text-lg font-bold text-gray-800 mb-3"},"DATOS DEL EMISOR"),n.createElement("div",{className:"bg-gray-50 p-4 rounded border"},n.createElement("div",null,n.createElement("strong",null,"Nombre:")," ",((ue=R.emisor)==null?void 0:ue.name)||"N/A"),n.createElement("div",null,n.createElement("strong",null,"Email:")," ",((Me=R.emisor)==null?void 0:Me.email)||"N/A"),n.createElement("div",null,n.createElement("strong",null,"Régimen IVA:")," ",R.regimenIvaEmisor||"N/A"))),n.createElement("div",null,n.createElement("h3",{className:"text-lg font-bold text-gray-800 mb-3"},"DATOS DEL RECEPTOR"),n.createElement("div",{className:"bg-gray-50 p-4 rounded border"},n.createElement("div",null,n.createElement("strong",null,"Nombre:")," ",((ye=R.receptor)==null?void 0:ye.name)||"N/A"),n.createElement("div",null,n.createElement("strong",null,"Email:")," ",((Qe=R.receptor)==null?void 0:Qe.email)||"N/A"),R.expediente&&n.createElement("div",null,n.createElement("strong",null,"Expediente:")," ",R.expediente.title)))),R.items&&R.items.length>0&&n.createElement("div",{className:"mb-8"},n.createElement("h3",{className:"text-lg font-bold text-gray-800 mb-3"},"CONCEPTOS"),n.createElement("table",{className:"w-full border-collapse border border-gray-300"},n.createElement("thead",null,n.createElement("tr",{className:"bg-gray-100"},n.createElement("th",{className:"border border-gray-300 px-3 py-2 text-left"},"Descripción"),n.createElement("th",{className:"border border-gray-300 px-3 py-2 text-center"},"Cantidad"),n.createElement("th",{className:"border border-gray-300 px-3 py-2 text-right"},"Precio Unitario"),n.createElement("th",{className:"border border-gray-300 px-3 py-2 text-right"},"Total"))),n.createElement("tbody",null,R.items.map((ut,Zt)=>n.createElement("tr",{key:Zt,className:Zt%2===0?"bg-white":"bg-gray-50"},n.createElement("td",{className:"border border-gray-300 px-3 py-2"},ut.description),n.createElement("td",{className:"border border-gray-300 px-3 py-2 text-center"},ut.quantity),n.createElement("td",{className:"border border-gray-300 px-3 py-2 text-right"},He(ut.unitPrice)),n.createElement("td",{className:"border border-gray-300 px-3 py-2 text-right font-semibold"},He(ut.total))))))),R.descuento&&R.descuento>0&&n.createElement("div",{className:"mb-8"},n.createElement("h3",{className:"text-lg font-bold text-gray-800 mb-3"},"DESCUENTOS"),n.createElement("div",{className:"bg-yellow-50 p-4 rounded border border-yellow-200"},n.createElement("div",{className:"flex justify-between items-center"},n.createElement("span",{className:"font-semibold text-yellow-800"},"Descuento (",R.descuento,"%)"),n.createElement("span",{className:"font-bold text-yellow-800 text-lg"},"-",He((((Ge=R.items)==null?void 0:Ge.reduce((ut,Zt)=>ut+Zt.quantity*Zt.unitPrice,0))||0)*(R.descuento/100)))))),R.provisionFondos&&R.provisionFondos.length>0&&n.createElement("div",{className:"mb-8"},n.createElement("h3",{className:"text-lg font-bold text-gray-800 mb-3"},"PROVISIONES DE FONDOS ASOCIADAS"),n.createElement("div",{className:"bg-blue-50 p-4 rounded border"},n.createElement("table",{className:"w-full"},n.createElement("thead",null,n.createElement("tr",{className:"border-b border-blue-200"},n.createElement("th",{className:"text-left py-2"},"Descripción"),n.createElement("th",{className:"text-right py-2"},"Fecha"),n.createElement("th",{className:"text-right py-2"},"Importe"))),n.createElement("tbody",null,R.provisionFondos.map(ut=>n.createElement("tr",{key:ut.id,className:"border-b border-blue-100"},n.createElement("td",{className:"py-2"},ut.description||"Sin descripción"),n.createElement("td",{className:"text-right py-2"},Re(ut.date)),n.createElement("td",{className:"text-right py-2 font-semibold"},He(ut.amount)))))))),n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"flex justify-end"},n.createElement("div",{className:"w-64 space-y-2"},n.createElement("div",{className:"flex justify-between"},n.createElement("span",null,"Base Imponible:"),n.createElement("span",{className:"font-semibold"},He(R.baseImponible??0))),n.createElement("div",{className:"flex justify-between"},n.createElement("span",null,"IVA (",R.tipoIVA??21,"%):"),n.createElement("span",{className:"font-semibold"},He(R.cuotaIVA??0))),n.createElement("div",{className:"flex justify-between text-lg font-bold border-t border-gray-300 pt-2"},n.createElement("span",null,"TOTAL:"),n.createElement("span",null,He(R.importeTotal??0)))))),n.createElement("div",{className:"mt-8 pt-6 border-t border-gray-200"},n.createElement("div",{className:"grid grid-cols-2 gap-8 text-sm text-gray-600"},n.createElement("div",null,n.createElement("div",null,n.createElement("strong",null,"Método de pago:")," ",R.metodoPago||"N/A"),n.createElement("div",null,n.createElement("strong",null,"Clave de operación:")," ",R.claveOperacion||"N/A")),n.createElement("div",null,n.createElement("div",null,n.createElement("strong",null,"Fecha de creación:")," ",Re(R.createdAt)),R.motivoAnulacion&&n.createElement("div",null,n.createElement("strong",null,"Motivo de anulación:")," ",R.motivoAnulacion)))),n.createElement("div",{className:"mt-8 pt-6 border-t border-gray-200 flex justify-end space-x-4"},n.createElement("button",{onClick:()=>$e(R),disabled:C===R.id,className:`px-4 py-2 rounded flex items-center space-x-2 ${C===R.id?"bg-gray-400 text-white cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`},n.createElement("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})),n.createElement("span",null,C===R.id?"Descargando...":"📄 Descargar PDF")),n.createElement("button",{onClick:()=>ne(R),disabled:P!==null,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50 flex items-center space-x-2"},n.createElement("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})),n.createElement("span",null,P===`Datos de factura ${R.numeroFactura}`?"Copiando...":"📋 Copiar Datos"))))};return x?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})):n.createElement("div",{className:"py-6"},n.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"bg-white rounded-lg shadow p-6"},n.createElement("div",{className:"flex justify-between items-center mb-6"},n.createElement("div",null,n.createElement("h1",{className:"text-2xl font-semibold mb-2"},"Gestión de Facturas"),n.createElement("p",{className:"text-gray-600"},"Administra todas las facturas del sistema")),n.createElement("div",{className:"flex space-x-2"},n.createElement("button",{onClick:ir,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 flex items-center space-x-2",title:"Exportar todas las facturas a CSV"},n.createElement("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})),n.createElement("span",null,"Exportar CSV")),n.createElement("button",{onClick:se,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center space-x-2"},n.createElement("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})),n.createElement("span",null,"Refrescar")))),k&&n.createElement("div",{className:"mb-4 p-3 bg-green-100 text-green-700 rounded"},k),y&&n.createElement("div",{className:"mb-4 p-3 bg-red-100 text-red-700 rounded"},y),n.createElement("div",{className:"flex flex-wrap gap-4 mb-6"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Abogado"),n.createElement("select",{value:i,onChange:R=>c(R.target.value),className:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},n.createElement("option",{value:""},"Todos"),a.map(R=>n.createElement("option",{key:R.id,value:R.id},R.name)))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Cliente"),n.createElement("select",{value:d,onChange:R=>u(R.target.value),className:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},n.createElement("option",{value:""},"Todos"),o.map(R=>n.createElement("option",{key:R.id,value:R.id},R.name)))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Fecha de pago"),n.createElement("input",{type:"date",value:m,onChange:R=>f(R.target.value),className:"border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"})),n.createElement("div",{className:"flex items-end"},n.createElement("button",{onClick:()=>{c(""),u(""),f("")},className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700"},"Limpiar Filtros"))),t.length===0?n.createElement("div",{className:"text-center py-12"},n.createElement("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})),n.createElement("h3",{className:"mt-2 text-sm font-medium text-gray-900"},"No se encontraron facturas"),n.createElement("p",{className:"mt-1 text-sm text-gray-500"},i||d||m?"Intenta ajustar los filtros de búsqueda.":"No hay facturas registradas en el sistema.")):n.createElement(n.Fragment,null,A.length>0&&n.createElement("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg"},n.createElement("div",{className:"flex items-center justify-between"},n.createElement("span",{className:"text-sm text-blue-800"},A.length," factura",A.length!==1?"s":""," seleccionada",A.length!==1?"s":""),n.createElement("div",{className:"flex space-x-2"},n.createElement("button",{onClick:Ee,disabled:P!==null,className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 disabled:opacity-50",title:"Copiar datos de facturas seleccionadas"},P?"📋 Copiando...":"📋 Copiar Seleccionadas"),n.createElement("button",{onClick:()=>$([]),className:"px-3 py-1 bg-gray-600 text-white text-sm rounded hover:bg-gray-700"},"Deseleccionar Todo")))),n.createElement("div",{className:"overflow-x-auto"},n.createElement("table",{className:"min-w-full divide-y divide-gray-200"},n.createElement("thead",{className:"bg-gray-50"},n.createElement("tr",null,n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},n.createElement("input",{type:"checkbox",checked:A.length===t.length&&t.length>0,onChange:Qr,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",title:"Seleccionar todas las facturas"})),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Nº Factura"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Fecha"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Importe"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Estado"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Abogado"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Cliente"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Fecha de pago"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Acciones"))),n.createElement("tbody",{className:"bg-white divide-y divide-gray-200"},t.map(R=>{var ue,Me;return n.createElement("tr",{key:R.id,className:"hover:bg-gray-50"},n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("input",{type:"checkbox",checked:A.includes(R.id),onChange:()=>Jt(R.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",title:`Seleccionar factura ${R.numeroFactura}`})),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},R.numeroFactura||"N/A"),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},R.fechaFactura?Re(R.fechaFactura):"N/A"),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},He(R.importeTotal||0)),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${R.estado==="emitida"?"bg-green-100 text-green-800":R.estado==="pagada"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`},R.estado||"N/A")),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},((ue=R.emisor)==null?void 0:ue.name)||"-"),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},((Me=R.receptor)==null?void 0:Me.name)||"-"),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},R.paymentDate?Re(R.paymentDate):"-"),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium"},n.createElement("div",{className:"flex space-x-2"},n.createElement("button",{onClick:()=>be(R),className:"text-blue-600 hover:text-blue-900 hover:bg-blue-50 px-2 py-1 rounded",title:"Ver factura completa con todos los detalles"},"👁️ Ver"),n.createElement("button",{onClick:()=>ne(R),disabled:P!==null,className:"text-green-600 hover:text-green-900 px-2 py-1 rounded hover:bg-green-50",title:"Copiar datos de la factura"},P===`Datos de factura ${R.numeroFactura}`?"📋 Copiando...":"📋 Copiar"),n.createElement("button",{onClick:()=>qe(R),className:"text-yellow-600 hover:text-yellow-900 px-2 py-1 rounded hover:bg-yellow-50",title:"Editar factura"},"✏️ Editar"),n.createElement("button",{onClick:()=>J(R.id),disabled:N===R.id,className:`px-2 py-1 rounded ${N===R.id?"text-gray-400 cursor-not-allowed":"text-red-600 hover:text-red-900 hover:bg-red-50"}`,title:"Eliminar factura"},N===R.id?"🗑️ Borrando...":"🗑️ Borrar"),n.createElement("button",{onClick:()=>le(R),className:"text-gray-600 hover:text-gray-900 px-2 py-1 rounded hover:bg-gray-50",title:"Ver metadatos técnicos"},"🔍 Metadatos"),n.createElement("button",{onClick:()=>Se(R),className:"text-purple-600 hover:text-purple-900 px-2 py-1 rounded hover:bg-purple-50",title:"Ver historial de cambios"},"📋 Auditoría"))))})))),n.createElement("div",{className:"mt-4 text-sm text-gray-500"},"Mostrando ",t.length," factura",t.length!==1?"s":"")))),E&&p&&n.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},n.createElement("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto"},n.createElement("div",{className:"flex justify-between items-center mb-4"},n.createElement("h2",{className:"text-xl font-bold"},"Editar Factura ",p.numeroFactura),n.createElement("button",{onClick:()=>w(!1),className:"text-gray-500 hover:text-gray-700 text-2xl"},"×")),n.createElement("form",{onSubmit:ke,className:"space-y-6"},n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Número de Factura"),n.createElement("input",{type:"text",value:p.numeroFactura||"",readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500"}),n.createElement("p",{className:"text-xs text-gray-500 mt-1"},"No editable")),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Fecha de Factura"),n.createElement("input",{type:"date",value:p.fechaFactura?p.fechaFactura.split("T")[0]:"",onChange:R=>h({...p,fechaFactura:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Estado"),n.createElement("select",{value:p.estado||"emitida",onChange:R=>h({...p,estado:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"},n.createElement("option",{value:"emitida"},"Emitida"),n.createElement("option",{value:"pagada"},"Pagada"),n.createElement("option",{value:"anulada"},"Anulada"))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Fecha de Pago"),n.createElement("input",{type:"date",value:p.paymentDate?p.paymentDate.split("T")[0]:"",onChange:R=>h({...p,paymentDate:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"}))),n.createElement("div",{className:"border-t pt-4"},n.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-4"},"Configuración Fiscal"),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Tipo IVA (%)"),n.createElement("input",{type:"number",step:"0.01",value:p.tipoIVA||21,onChange:R=>h({...p,tipoIVA:parseFloat(R.target.value)||21}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Descuento (%)"),n.createElement("input",{type:"number",step:"0.01",value:p.descuento||0,onChange:R=>h({...p,descuento:parseFloat(R.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Retención (%)"),n.createElement("input",{type:"number",step:"0.01",value:p.retencion||0,onChange:R=>h({...p,retencion:parseFloat(R.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})))),n.createElement("div",{className:"border-t pt-4"},n.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-4"},"Conceptos"),n.createElement("div",{className:"space-y-3"},(Ne=p.items)==null?void 0:Ne.map((R,ue)=>n.createElement("div",{key:ue,className:"grid grid-cols-1 md:grid-cols-4 gap-3 p-3 border border-gray-200 rounded-md"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Descripción"),n.createElement("input",{type:"text",value:R.description,onChange:Me=>{const ye=[...p.items||[]];ye[ue]={...ye[ue],description:Me.target.value},h({...p,items:ye})},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Cantidad"),n.createElement("input",{type:"number",value:R.quantity,onChange:Me=>{const ye=[...p.items||[]];ye[ue]={...ye[ue],quantity:parseInt(Me.target.value)||0,total:(parseInt(Me.target.value)||0)*ye[ue].unitPrice},h({...p,items:ye})},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Precio Unitario"),n.createElement("input",{type:"number",step:"0.01",value:R.unitPrice,onChange:Me=>{const ye=[...p.items||[]];ye[ue]={...ye[ue],unitPrice:parseFloat(Me.target.value)||0,total:ye[ue].quantity*(parseFloat(Me.target.value)||0)},h({...p,items:ye})},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Total"),n.createElement("input",{type:"number",step:"0.01",value:R.total,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500"}))))),n.createElement("button",{type:"button",onClick:()=>{const R=[...p.items||[],{id:`temp-${Date.now()}`,description:"",quantity:1,unitPrice:0,total:0}];h({...p,items:R})},className:"mt-3 px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700"},"+ Agregar Concepto")),n.createElement("div",{className:"border-t pt-4"},n.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-4"},"Totales"),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Base Imponible"),n.createElement("input",{type:"number",step:"0.01",value:p.baseImponible||0,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Cuota IVA"),n.createElement("input",{type:"number",step:"0.01",value:p.cuotaIVA||0,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Importe Total"),n.createElement("input",{type:"number",step:"0.01",value:p.importeTotal||0,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-500"})))),n.createElement("div",{className:"flex justify-end space-x-3 pt-4 border-t"},n.createElement("button",{type:"button",onClick:()=>w(!1),className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700"},"Cancelar"),n.createElement("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"},"Guardar Cambios"))))),T&&L&&n.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},n.createElement("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto"},n.createElement("div",{className:"flex justify-between items-center mb-4"},n.createElement("h2",{className:"text-xl font-bold"},"Metadatos - Factura ",L.numeroFactura),n.createElement("button",{onClick:()=>M(!1),className:"text-gray-500 hover:text-gray-700 text-2xl"},"×")),n.createElement("div",{className:"mb-4"},n.createElement("p",{className:"text-sm text-gray-600 mb-2"},"Información técnica de la factura. Puedes copiar estos datos al portapapeles.")),n.createElement("div",{className:"bg-gray-50 p-4 rounded-lg border"},n.createElement("pre",{className:"text-sm text-gray-800 whitespace-pre-wrap font-mono"},Ce(L))),n.createElement("div",{className:"flex justify-end space-x-3 mt-6"},n.createElement("button",{onClick:()=>{const R=Ce(L);Tt(R,`Metadatos de factura ${L.numeroFactura}`)},disabled:P!==null,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 flex items-center space-x-2"},n.createElement("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})),n.createElement("span",null,P===`Metadatos de factura ${L.numeroFactura}`?"Copiando...":"Copiar Metadatos")),n.createElement("button",{onClick:()=>M(!1),className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700"},"Cerrar")))),z&&V&&n.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},n.createElement("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[95vh] overflow-y-auto"},n.createElement("div",{className:"flex justify-between items-center p-6 border-b border-gray-200"},n.createElement("h2",{className:"text-xl font-bold"},"Factura ",V.numeroFactura),n.createElement("button",{onClick:()=>U(!1),className:"text-gray-500 hover:text-gray-700 text-2xl"},"×")),n.createElement("div",{className:"p-6"},n.createElement(we,{invoice:V})))),j&&Y&&n.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},n.createElement("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[95vh] overflow-y-auto"},n.createElement("div",{className:"flex justify-between items-center p-6 border-b border-gray-200"},n.createElement("h2",{className:"text-xl font-bold"},"Historial de Auditoría - Factura ",Y.numeroFactura),n.createElement("button",{onClick:()=>B(!1),className:"text-gray-500 hover:text-gray-700 text-2xl"},"×")),n.createElement("div",{className:"p-6"},fe?n.createElement("div",{className:"flex items-center justify-center py-8"},n.createElement("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"}),n.createElement("span",{className:"ml-2"},"Cargando historial...")):H?n.createElement("div",{className:"space-y-6"},n.createElement("div",{className:"bg-blue-50 p-4 rounded-lg"},n.createElement("h3",{className:"text-lg font-medium text-blue-900 mb-2"},"Resumen de Cambios"),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm"},n.createElement("div",null,n.createElement("span",{className:"font-medium"},"Total de cambios:")," ",H.summary.totalChanges),n.createElement("div",null,n.createElement("span",{className:"font-medium"},"Última modificación:")," ",H.summary.lastModified?new Date(H.summary.lastModified).toLocaleString():"N/A"),n.createElement("div",null,n.createElement("span",{className:"font-medium"},"Último modificador:")," ",H.summary.lastModifiedBy||"N/A"))),Object.keys(H.summary.changesByField).length>0&&n.createElement("div",null,n.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-3"},"Cambios por Campo"),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},Object.entries(H.summary.changesByField).map(([R,ue])=>n.createElement("div",{key:R,className:"bg-gray-50 p-3 rounded"},n.createElement("span",{className:"font-medium"},R,":")," ",ue," cambio",ue!==1?"s":"")))),Object.keys(H.summary.changesByUser).length>0&&n.createElement("div",null,n.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-3"},"Cambios por Usuario"),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},Object.entries(H.summary.changesByUser).map(([R,ue])=>n.createElement("div",{key:R,className:"bg-gray-50 p-3 rounded"},n.createElement("span",{className:"font-medium"},R,":")," ",ue," cambio",ue!==1?"s":"")))),n.createElement("div",null,n.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-3"},"Historial Detallado"),n.createElement("div",{className:"space-y-3"},H.auditHistory.map(R=>{var ue,Me;return n.createElement("div",{key:R.id,className:"border border-gray-200 rounded-lg p-4"},n.createElement("div",{className:"flex justify-between items-start mb-2"},n.createElement("div",{className:"flex items-center space-x-2"},n.createElement("span",{className:`px-2 py-1 text-xs rounded-full ${R.action==="created"?"bg-green-100 text-green-800":R.action==="updated"?"bg-blue-100 text-blue-800":R.action==="deleted"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`},R.action==="created"?"Creado":R.action==="updated"?"Actualizado":R.action==="deleted"?"Eliminado":R.action==="status_changed"?"Estado Cambiado":R.action),R.fieldName&&n.createElement("span",{className:"text-sm text-gray-600"},"Campo: ",R.fieldName)),n.createElement("span",{className:"text-sm text-gray-500"},new Date(R.createdAt).toLocaleString())),n.createElement("div",{className:"text-sm text-gray-700 mb-2"},R.description),R.fieldName&&R.oldValue!==R.newValue&&n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},n.createElement("div",null,n.createElement("span",{className:"font-medium text-red-600"},"Valor anterior:"),n.createElement("div",{className:"bg-red-50 p-2 rounded mt-1 break-all"},R.oldValue||"Vacío")),n.createElement("div",null,n.createElement("span",{className:"font-medium text-green-600"},"Nuevo valor:"),n.createElement("div",{className:"bg-green-50 p-2 rounded mt-1 break-all"},R.newValue||"Vacío"))),n.createElement("div",{className:"mt-3 pt-3 border-t border-gray-200"},n.createElement("div",{className:"flex justify-between items-center text-xs text-gray-500"},n.createElement("div",null,n.createElement("span",{className:"font-medium"},"Usuario:")," ",(ue=R.user)==null?void 0:ue.name," (",(Me=R.user)==null?void 0:Me.email,")"),R.ipAddress&&n.createElement("div",null,n.createElement("span",{className:"font-medium"},"IP:")," ",R.ipAddress)),R.userAgent&&n.createElement("div",{className:"text-xs text-gray-500 mt-1 break-all"},n.createElement("span",{className:"font-medium"},"User Agent:")," ",R.userAgent)))})))):n.createElement("div",{className:"text-center py-8 text-gray-500"},"No se encontró historial de auditoría para esta factura.")))))},xq=()=>{const[e,t]=g.useState(null),[r,a]=g.useState(!0),[s,o]=g.useState(null);g.useEffect(()=>{l()},[]);const l=async()=>{var u,m;try{a(!0);const f=localStorage.getItem("token"),x=await Z.get("/admin/reports",{headers:{Authorization:`Bearer ${f}`}});t(x.data),o(null)}catch(f){console.error("Error fetching reports:",f),o(((m=(u=f.response)==null?void 0:u.data)==null?void 0:m.message)||"Error al cargar reportes")}finally{a(!1)}},i=u=>{if(!u||u===0)return"0 Bytes";const m=1024,f=["Bytes","KB","MB","GB"],x=Math.floor(Math.log(u)/Math.log(m));return parseFloat((u/Math.pow(m,x)).toFixed(2))+" "+f[x]},c=u=>{switch(u){case"ABIERTO":return"Abierto";case"EN_PROCESO":return"En Proceso";case"CERRADO":return"Cerrado";case"PENDIENTE":return"Pendiente";case"EN_PROGRESO":return"En Progreso";case"COMPLETADA":return"Completada";case"CANCELADA":return"Cancelada";default:return u}},d=u=>{switch(u){case"ADMIN":return"Administrador";case"ABOGADO":return"Abogado";case"CLIENTE":return"Cliente";default:return u}};return r?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})):s?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-red-600 text-xl mb-4"},"Error"),n.createElement("div",{className:"text-gray-600"},s),n.createElement("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},"Reintentar"))):n.createElement("div",{className:"py-6"},n.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"flex justify-between items-center"},n.createElement("div",null,n.createElement("h1",{className:"text-3xl font-bold text-gray-900"},"Reportes del Sistema"),n.createElement("p",{className:"mt-2 text-gray-600"},"Análisis y estadísticas del sistema")),n.createElement("button",{onClick:l,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"},"Actualizar"))),e&&n.createElement("div",{className:"space-y-6"},n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-4"},"Estadísticas de Expedientes"),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},e.casesByStatus.map(u=>n.createElement("div",{key:u.status,className:"bg-gray-50 p-4 rounded-lg"},n.createElement("div",{className:"text-sm font-medium text-gray-500"},c(u.status)),n.createElement("div",{className:"text-2xl font-semibold text-gray-900"},u._count.status))))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-4"},"Estadísticas de Tareas"),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4"},e.tasksByStatus.map(u=>n.createElement("div",{key:u.status,className:"bg-gray-50 p-4 rounded-lg"},n.createElement("div",{className:"text-sm font-medium text-gray-500"},c(u.status)),n.createElement("div",{className:"text-2xl font-semibold text-gray-900"},u._count.status))))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-4"},"Actividad de Usuarios"),n.createElement("div",{className:"overflow-x-auto"},n.createElement("table",{className:"min-w-full divide-y divide-gray-200"},n.createElement("thead",{className:"bg-gray-50"},n.createElement("tr",null,n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Usuario"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Rol"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Expedientes"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Citas"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Tareas"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Registro"))),n.createElement("tbody",{className:"bg-white divide-y divide-gray-200"},e.userActivity.map(u=>{var m,f,x;return n.createElement("tr",{key:u.id,className:"hover:bg-gray-50"},n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("div",{className:"text-sm font-medium text-gray-900"},u.name)),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},n.createElement("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800"},d(u.role))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},((m=u.expedientesAsLawyer)==null?void 0:m.length)||0),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},((f=u.appointmentsAsLawyer)==null?void 0:f.length)||0),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},((x=u.assignedTasks)==null?void 0:x.length)||0),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},new Date(u.createdAt).toLocaleDateString()))}))))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-4"},"Estadísticas de Documentos"),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},e.documentStats.map(u=>n.createElement("div",{key:u.mimeType,className:"bg-gray-50 p-4 rounded-lg"},n.createElement("div",{className:"text-sm font-medium text-gray-500"},u.mimeType),n.createElement("div",{className:"text-2xl font-semibold text-gray-900"},u._count.mimeType),n.createElement("div",{className:"text-sm text-gray-500"},i(u._sum.fileSize)))))),n.createElement("div",{className:"bg-white p-6 rounded-lg shadow"},n.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-4"},"Citas por Mes"),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},e.appointmentsByMonth.map(u=>n.createElement("div",{key:u.date,className:"bg-gray-50 p-4 rounded-lg"},n.createElement("div",{className:"text-sm font-medium text-gray-500"},new Date(u.date).toLocaleDateString("es-ES",{month:"long",year:"numeric"})),n.createElement("div",{className:"text-2xl font-semibold text-gray-900"},u._count.date))))))))};async function bq(e){return(await Z.get("/parametros",{headers:{Authorization:`Bearer ${e}`}})).data}async function wq(e,t){return(await Z.post("/parametros",e,{headers:{Authorization:`Bearer ${t}`}})).data}async function Nq(e,t,r){return(await Z.put(`/parametros/${e}`,t,{headers:{Authorization:`Bearer ${r}`}})).data}async function Sq(e,t){await Z.delete(`/parametros/${e}`,{headers:{Authorization:`Bearer ${t}`}})}const Cq=()=>{const e=localStorage.getItem("token"),[t,r]=g.useState([]),[a,s]=g.useState(!0),[o,l]=g.useState(null),[i,c]=g.useState(!1),[d,u]=g.useState(null),[m,f]=g.useState({}),[x,b]=g.useState(!1),y=async()=>{var N,S;s(!0),l(null);try{if(!e)throw new Error("No autenticado");const C=await bq(e);r(C)}catch(C){l(((S=(N=C.response)==null?void 0:N.data)==null?void 0:S.message)||C.message||"Error al cargar parámetros")}finally{s(!1)}};g.useEffect(()=>{y()},[e]);const v=N=>{u(N||null),f(N||{}),c(!0)},p=()=>{c(!1),u(null),f({})},h=N=>{f({...m,[N.target.name]:N.target.value})},E=async()=>{var N,S;b(!0),l(null);try{if(!e)throw new Error("No autenticado");d?await Nq(d.id,{valor:m.valor,etiqueta:m.etiqueta,tipo:m.tipo},e):await wq({clave:m.clave,valor:m.valor,etiqueta:m.etiqueta,tipo:m.tipo},e),await y(),p()}catch(C){l(((S=(N=C.response)==null?void 0:N.data)==null?void 0:S.message)||C.message||"Error al guardar parámetro")}finally{b(!1)}},w=async N=>{var S,C;if(window.confirm("¿Seguro que deseas eliminar este parámetro?")){l(null),b(!0);try{if(!e)throw new Error("No autenticado");await Sq(N,e),await y()}catch(D){l(((C=(S=D.response)==null?void 0:S.data)==null?void 0:C.message)||D.message||"Error al eliminar parámetro")}finally{b(!1)}}};return n.createElement("div",{className:"max-w-3xl mx-auto py-8"},n.createElement("h1",{className:"text-2xl font-bold mb-6"},"Configuración de Parámetros Globales"),n.createElement("div",{className:"mb-4 flex justify-between items-center"},n.createElement("button",{className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",onClick:async()=>{var N,S;if(window.confirm("¿Desea inicializar los parámetros por defecto? Esto creará o actualizará los parámetros básicos del sistema."))try{if(!e)throw new Error("No autenticado");await fetch("/api/parametros/initialize",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}}),await y(),alert("Parámetros inicializados correctamente")}catch(C){l(((S=(N=C.response)==null?void 0:N.data)==null?void 0:S.message)||C.message||"Error al inicializar parámetros")}}},"🔧 Inicializar Parámetros"),n.createElement("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",onClick:()=>v()},"Nuevo Parámetro")),a?n.createElement("div",{className:"text-center py-8"},"Cargando..."):o?n.createElement("div",{className:"text-center text-red-600"},o):n.createElement("table",{className:"min-w-full bg-white border rounded shadow"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",{className:"px-4 py-2 border"},"Clave"),n.createElement("th",{className:"px-4 py-2 border"},"Valor"),n.createElement("th",{className:"px-4 py-2 border"},"Etiqueta"),n.createElement("th",{className:"px-4 py-2 border"},"Tipo"),n.createElement("th",{className:"px-4 py-2 border"},"Acciones"))),n.createElement("tbody",null,t.map(N=>n.createElement("tr",{key:N.id},n.createElement("td",{className:"px-4 py-2 border font-mono text-sm"},N.clave),n.createElement("td",{className:"px-4 py-2 border"},N.tipo==="html"?n.createElement("div",{className:"max-w-xs"},n.createElement("div",{className:"text-xs text-gray-500 mb-1"},"HTML Content"),n.createElement("div",{className:"text-xs bg-gray-100 p-2 rounded max-h-20 overflow-y-auto"},N.valor.substring(0,100),"...")):N.valor.length>50?n.createElement("div",{className:"max-w-xs"},n.createElement("div",{className:"text-sm truncate",title:N.valor},N.valor.substring(0,50),"...")):n.createElement("span",{className:"text-sm"},N.valor)),n.createElement("td",{className:"px-4 py-2 border text-sm"},N.etiqueta),n.createElement("td",{className:"px-4 py-2 border"},n.createElement("span",{className:`px-2 py-1 rounded text-xs font-medium ${N.tipo==="html"?"bg-purple-100 text-purple-800":N.tipo==="email"?"bg-blue-100 text-blue-800":N.tipo==="url"?"bg-green-100 text-green-800":N.tipo==="text"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`},N.tipo)),n.createElement("td",{className:"px-4 py-2 border"},n.createElement("button",{className:"text-blue-600 hover:underline mr-2 text-sm",onClick:()=>v(N)},"Editar"),n.createElement("button",{className:"text-red-600 hover:underline text-sm",onClick:()=>w(N.id),disabled:x},"Eliminar")))))),i&&n.createElement("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-30 z-50"},n.createElement("div",{className:"bg-white rounded-lg shadow-lg p-8 w-full max-w-md"},n.createElement("h2",{className:"text-xl font-bold mb-4"},d?"Editar":"Nuevo"," Parámetro"),o&&n.createElement("div",{className:"text-red-600 mb-2"},o),n.createElement("div",{className:"mb-4"},n.createElement("label",{className:"block mb-1 font-medium"},"Clave"),n.createElement("input",{type:"text",name:"clave",value:m.clave||"",onChange:h,className:"w-full border px-3 py-2 rounded",disabled:!!d})),n.createElement("div",{className:"mb-4"},n.createElement("label",{className:"block mb-1 font-medium"},"Valor"),m.tipo==="html"||m.tipo==="text"?n.createElement("textarea",{name:"valor",value:m.valor||"",onChange:N=>f({...m,valor:N.target.value}),className:"w-full border px-3 py-2 rounded",rows:m.tipo==="html"?10:5,placeholder:m.tipo==="html"?"Contenido HTML...":"Texto largo..."}):n.createElement("input",{type:m.tipo==="email"?"email":m.tipo==="number"?"number":"text",name:"valor",value:m.valor||"",onChange:h,className:"w-full border px-3 py-2 rounded"})),n.createElement("div",{className:"mb-4"},n.createElement("label",{className:"block mb-1 font-medium"},"Etiqueta"),n.createElement("input",{type:"text",name:"etiqueta",value:m.etiqueta||"",onChange:h,className:"w-full border px-3 py-2 rounded"})),n.createElement("div",{className:"mb-4"},n.createElement("label",{className:"block mb-1 font-medium"},"Tipo"),n.createElement("select",{name:"tipo",value:m.tipo||"",onChange:h,className:"w-full border px-3 py-2 rounded"},n.createElement("option",{value:""},"Selecciona tipo"),n.createElement("option",{value:"string"},"Texto"),n.createElement("option",{value:"number"},"Número"),n.createElement("option",{value:"email"},"Email"),n.createElement("option",{value:"url"},"URL"),n.createElement("option",{value:"text"},"Texto largo"),n.createElement("option",{value:"html"},"HTML"),n.createElement("option",{value:"image"},"Imagen/Base64"),n.createElement("option",{value:"boolean"},"Booleano"))),n.createElement("div",{className:"flex justify-end space-x-2"},n.createElement("button",{className:"px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",onClick:p,disabled:x},"Cancelar"),n.createElement("button",{className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:E,disabled:x},x?"Guardando...":"Guardar")))))};function kq(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return g.useMemo(()=>a=>{t.forEach(s=>s(a))},t)}const Yd=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Fo(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function l0(e){return"nodeType"in e}function lr(e){var t,r;return e?Fo(e)?e:l0(e)&&(t=(r=e.ownerDocument)==null?void 0:r.defaultView)!=null?t:window:window}function i0(e){const{Document:t}=lr(e);return e instanceof t}function Li(e){return Fo(e)?!1:e instanceof lr(e).HTMLElement}function V2(e){return e instanceof lr(e).SVGElement}function jo(e){return e?Fo(e)?e.document:l0(e)?i0(e)?e:Li(e)||V2(e)?e.ownerDocument:document:document:document}const Mn=Yd?g.useLayoutEffect:g.useEffect;function qd(e){const t=g.useRef(e);return Mn(()=>{t.current=e}),g.useCallback(function(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return t.current==null?void 0:t.current(...a)},[])}function Dq(){const e=g.useRef(null),t=g.useCallback((a,s)=>{e.current=setInterval(a,s)},[]),r=g.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,r]}function ci(e,t){t===void 0&&(t=[e]);const r=g.useRef(e);return Mn(()=>{r.current!==e&&(r.current=e)},t),r}function Ii(e,t){const r=g.useRef();return g.useMemo(()=>{const a=e(r.current);return r.current=a,a},[...t])}function Pu(e){const t=qd(e),r=g.useRef(null),a=g.useCallback(s=>{s!==r.current&&(t==null||t(s,r.current)),r.current=s},[]);return[r,a]}function Lu(e){const t=g.useRef();return g.useEffect(()=>{t.current=e},[e]),t.current}let tf={};function Gd(e,t){return g.useMemo(()=>{if(t)return t;const r=tf[e]==null?0:tf[e]+1;return tf[e]=r,e+"-"+r},[e,t])}function W2(e){return function(t){for(var r=arguments.length,a=new Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];return a.reduce((o,l)=>{const i=Object.entries(l);for(const[c,d]of i){const u=o[c];u!=null&&(o[c]=u+e*d)}return o},{...t})}}const to=W2(1),Iu=W2(-1);function Aq(e){return"clientX"in e&&"clientY"in e}function Kd(e){if(!e)return!1;const{KeyboardEvent:t}=lr(e.target);return t&&e instanceof t}function Tq(e){if(!e)return!1;const{TouchEvent:t}=lr(e.target);return t&&e instanceof t}function $u(e){if(Tq(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return Aq(e)?{x:e.clientX,y:e.clientY}:null}const $a=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[$a.Translate.toString(e),$a.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:a}=e;return t+" "+r+"ms "+a}}}),ME="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function _q(e){return e.matches(ME)?e:e.querySelector(ME)}const Oq={display:"none"};function Rq(e){let{id:t,value:r}=e;return n.createElement("div",{id:t,style:Oq},r)}function Mq(e){let{id:t,announcement:r,ariaLiveType:a="assertive"}=e;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return n.createElement("div",{id:t,style:s,role:"status","aria-live":a,"aria-atomic":!0},r)}function Pq(){const[e,t]=g.useState("");return{announce:g.useCallback(a=>{a!=null&&t(a)},[]),announcement:e}}const H2=g.createContext(null);function Lq(e){const t=g.useContext(H2);g.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function Iq(){const[e]=g.useState(()=>new Set),t=g.useCallback(a=>(e.add(a),()=>e.delete(a)),[e]);return[g.useCallback(a=>{let{type:s,event:o}=a;e.forEach(l=>{var i;return(i=l[s])==null?void 0:i.call(l,o)})},[e]),t]}const $q={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Fq={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function jq(e){let{announcements:t=Fq,container:r,hiddenTextDescribedById:a,screenReaderInstructions:s=$q}=e;const{announce:o,announcement:l}=Pq(),i=Gd("DndLiveRegion"),[c,d]=g.useState(!1);if(g.useEffect(()=>{d(!0)},[]),Lq(g.useMemo(()=>({onDragStart(m){let{active:f}=m;o(t.onDragStart({active:f}))},onDragMove(m){let{active:f,over:x}=m;t.onDragMove&&o(t.onDragMove({active:f,over:x}))},onDragOver(m){let{active:f,over:x}=m;o(t.onDragOver({active:f,over:x}))},onDragEnd(m){let{active:f,over:x}=m;o(t.onDragEnd({active:f,over:x}))},onDragCancel(m){let{active:f,over:x}=m;o(t.onDragCancel({active:f,over:x}))}}),[o,t])),!c)return null;const u=n.createElement(n.Fragment,null,n.createElement(Rq,{id:a,value:s.draggable}),n.createElement(Mq,{id:i,announcement:l}));return r?ts.createPortal(u,r):u}var St;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(St||(St={}));function Fu(){}function Bq(e,t){return g.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function zq(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return g.useMemo(()=>[...t].filter(a=>a!=null),[...t])}const pn=Object.freeze({x:0,y:0});function Uq(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Vq(e,t){const r=$u(e);if(!r)return"0 0";const a={x:(r.x-t.left)/t.width*100,y:(r.y-t.top)/t.height*100};return a.x+"% "+a.y+"%"}function Wq(e,t){let{data:{value:r}}=e,{data:{value:a}}=t;return r-a}function Hq(e,t){let{data:{value:r}}=e,{data:{value:a}}=t;return a-r}function Yq(e,t){if(!e||e.length===0)return null;const[r]=e;return r[t]}function PE(e,t,r){return t===void 0&&(t=e.left),r===void 0&&(r=e.top),{x:t+e.width*.5,y:r+e.height*.5}}const qq=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:a}=e;const s=PE(t,t.left,t.top),o=[];for(const l of a){const{id:i}=l,c=r.get(i);if(c){const d=Uq(PE(c),s);o.push({id:i,data:{droppableContainer:l,value:d}})}}return o.sort(Wq)};function Gq(e,t){const r=Math.max(t.top,e.top),a=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),o=Math.min(t.top+t.height,e.top+e.height),l=s-a,i=o-r;if(a<s&&r<o){const c=t.width*t.height,d=e.width*e.height,u=l*i,m=u/(c+d-u);return Number(m.toFixed(4))}return 0}const Kq=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:a}=e;const s=[];for(const o of a){const{id:l}=o,i=r.get(l);if(i){const c=Gq(i,t);c>0&&s.push({id:l,data:{droppableContainer:o,value:c}})}}return s.sort(Hq)};function Xq(e,t,r){return{...e,scaleX:t&&r?t.width/r.width:1,scaleY:t&&r?t.height/r.height:1}}function Y2(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:pn}function Qq(e){return function(r){for(var a=arguments.length,s=new Array(a>1?a-1:0),o=1;o<a;o++)s[o-1]=arguments[o];return s.reduce((l,i)=>({...l,top:l.top+e*i.y,bottom:l.bottom+e*i.y,left:l.left+e*i.x,right:l.right+e*i.x}),{...r})}}const Jq=Qq(1);function q2(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Zq(e,t,r){const a=q2(t);if(!a)return e;const{scaleX:s,scaleY:o,x:l,y:i}=a,c=e.left-l-(1-s)*parseFloat(r),d=e.top-i-(1-o)*parseFloat(r.slice(r.indexOf(" ")+1)),u=s?e.width/s:e.width,m=o?e.height/o:e.height;return{width:u,height:m,top:d,right:c+u,bottom:d+m,left:c}}const eG={ignoreTransform:!1};function Bo(e,t){t===void 0&&(t=eG);let r=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:d,transformOrigin:u}=lr(e).getComputedStyle(e);d&&(r=Zq(r,d,u))}const{top:a,left:s,width:o,height:l,bottom:i,right:c}=r;return{top:a,left:s,width:o,height:l,bottom:i,right:c}}function LE(e){return Bo(e,{ignoreTransform:!0})}function tG(e){const t=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:t,bottom:r,width:t,height:r}}function rG(e,t){return t===void 0&&(t=lr(e).getComputedStyle(e)),t.position==="fixed"}function nG(e,t){t===void 0&&(t=lr(e).getComputedStyle(e));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const o=t[s];return typeof o=="string"?r.test(o):!1})}function c0(e,t){const r=[];function a(s){if(t!=null&&r.length>=t||!s)return r;if(i0(s)&&s.scrollingElement!=null&&!r.includes(s.scrollingElement))return r.push(s.scrollingElement),r;if(!Li(s)||V2(s)||r.includes(s))return r;const o=lr(e).getComputedStyle(s);return s!==e&&nG(s,o)&&r.push(s),rG(s,o)?r:a(s.parentNode)}return e?a(e):r}function G2(e){const[t]=c0(e,1);return t??null}function rf(e){return!Yd||!e?null:Fo(e)?e:l0(e)?i0(e)||e===jo(e).scrollingElement?window:Li(e)?e:null:null}function K2(e){return Fo(e)?e.scrollX:e.scrollLeft}function X2(e){return Fo(e)?e.scrollY:e.scrollTop}function Fp(e){return{x:K2(e),y:X2(e)}}var Rt;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Rt||(Rt={}));function Q2(e){return!Yd||!e?!1:e===document.scrollingElement}function J2(e){const t={x:0,y:0},r=Q2(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},a={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},s=e.scrollTop<=t.y,o=e.scrollLeft<=t.x,l=e.scrollTop>=a.y,i=e.scrollLeft>=a.x;return{isTop:s,isLeft:o,isBottom:l,isRight:i,maxScroll:a,minScroll:t}}const aG={x:.2,y:.2};function sG(e,t,r,a,s){let{top:o,left:l,right:i,bottom:c}=r;a===void 0&&(a=10),s===void 0&&(s=aG);const{isTop:d,isBottom:u,isLeft:m,isRight:f}=J2(e),x={x:0,y:0},b={x:0,y:0},y={height:t.height*s.y,width:t.width*s.x};return!d&&o<=t.top+y.height?(x.y=Rt.Backward,b.y=a*Math.abs((t.top+y.height-o)/y.height)):!u&&c>=t.bottom-y.height&&(x.y=Rt.Forward,b.y=a*Math.abs((t.bottom-y.height-c)/y.height)),!f&&i>=t.right-y.width?(x.x=Rt.Forward,b.x=a*Math.abs((t.right-y.width-i)/y.width)):!m&&l<=t.left+y.width&&(x.x=Rt.Backward,b.x=a*Math.abs((t.left+y.width-l)/y.width)),{direction:x,speed:b}}function oG(e){if(e===document.scrollingElement){const{innerWidth:o,innerHeight:l}=window;return{top:0,left:0,right:o,bottom:l,width:o,height:l}}const{top:t,left:r,right:a,bottom:s}=e.getBoundingClientRect();return{top:t,left:r,right:a,bottom:s,width:e.clientWidth,height:e.clientHeight}}function Z2(e){return e.reduce((t,r)=>to(t,Fp(r)),pn)}function lG(e){return e.reduce((t,r)=>t+K2(r),0)}function iG(e){return e.reduce((t,r)=>t+X2(r),0)}function eS(e,t){if(t===void 0&&(t=Bo),!e)return;const{top:r,left:a,bottom:s,right:o}=t(e);G2(e)&&(s<=0||o<=0||r>=window.innerHeight||a>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const cG=[["x",["left","right"],lG],["y",["top","bottom"],iG]];class u0{constructor(t,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const a=c0(r),s=Z2(a);this.rect={...t},this.width=t.width,this.height=t.height;for(const[o,l,i]of cG)for(const c of l)Object.defineProperty(this,c,{get:()=>{const d=i(a),u=s[o]-d;return this.rect[c]+u},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class wl{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var a;return(a=this.target)==null?void 0:a.removeEventListener(...r)})},this.target=t}add(t,r,a){var s;(s=this.target)==null||s.addEventListener(t,r,a),this.listeners.push([t,r,a])}}function uG(e){const{EventTarget:t}=lr(e);return e instanceof t?e:jo(e)}function nf(e,t){const r=Math.abs(e.x),a=Math.abs(e.y);return typeof t=="number"?Math.sqrt(r**2+a**2)>t:"x"in t&&"y"in t?r>t.x&&a>t.y:"x"in t?r>t.x:"y"in t?a>t.y:!1}var Pr;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Pr||(Pr={}));function IE(e){e.preventDefault()}function dG(e){e.stopPropagation()}var Ye;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Ye||(Ye={}));const tS={start:[Ye.Space,Ye.Enter],cancel:[Ye.Esc],end:[Ye.Space,Ye.Enter,Ye.Tab]},mG=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case Ye.Right:return{...r,x:r.x+25};case Ye.Left:return{...r,x:r.x-25};case Ye.Down:return{...r,y:r.y+25};case Ye.Up:return{...r,y:r.y-25}}};class rS{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:r}}=t;this.props=t,this.listeners=new wl(jo(r)),this.windowListeners=new wl(lr(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Pr.Resize,this.handleCancel),this.windowListeners.add(Pr.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Pr.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:r}=this.props,a=t.node.current;a&&eS(a),r(pn)}handleKeyDown(t){if(Kd(t)){const{active:r,context:a,options:s}=this.props,{keyboardCodes:o=tS,coordinateGetter:l=mG,scrollBehavior:i="smooth"}=s,{code:c}=t;if(o.end.includes(c)){this.handleEnd(t);return}if(o.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:d}=a.current,u=d?{x:d.left,y:d.top}:pn;this.referenceCoordinates||(this.referenceCoordinates=u);const m=l(t,{active:r,context:a.current,currentCoordinates:u});if(m){const f=Iu(m,u),x={x:0,y:0},{scrollableAncestors:b}=a.current;for(const y of b){const v=t.code,{isTop:p,isRight:h,isLeft:E,isBottom:w,maxScroll:N,minScroll:S}=J2(y),C=oG(y),D={x:Math.min(v===Ye.Right?C.right-C.width/2:C.right,Math.max(v===Ye.Right?C.left:C.left+C.width/2,m.x)),y:Math.min(v===Ye.Down?C.bottom-C.height/2:C.bottom,Math.max(v===Ye.Down?C.top:C.top+C.height/2,m.y))},k=v===Ye.Right&&!h||v===Ye.Left&&!E,O=v===Ye.Down&&!w||v===Ye.Up&&!p;if(k&&D.x!==m.x){const A=y.scrollLeft+f.x,$=v===Ye.Right&&A<=N.x||v===Ye.Left&&A>=S.x;if($&&!f.y){y.scrollTo({left:A,behavior:i});return}$?x.x=y.scrollLeft-A:x.x=v===Ye.Right?y.scrollLeft-N.x:y.scrollLeft-S.x,x.x&&y.scrollBy({left:-x.x,behavior:i});break}else if(O&&D.y!==m.y){const A=y.scrollTop+f.y,$=v===Ye.Down&&A<=N.y||v===Ye.Up&&A>=S.y;if($&&!f.x){y.scrollTo({top:A,behavior:i});return}$?x.y=y.scrollTop-A:x.y=v===Ye.Down?y.scrollTop-N.y:y.scrollTop-S.y,x.y&&y.scrollBy({top:-x.y,behavior:i});break}}this.handleMove(t,to(Iu(m,this.referenceCoordinates),x))}}}handleMove(t,r){const{onMove:a}=this.props;t.preventDefault(),a(r)}handleEnd(t){const{onEnd:r}=this.props;t.preventDefault(),this.detach(),r()}handleCancel(t){const{onCancel:r}=this.props;t.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}rS.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:a=tS,onActivation:s}=t,{active:o}=r;const{code:l}=e.nativeEvent;if(a.start.includes(l)){const i=o.activatorNode.current;return i&&e.target!==i?!1:(e.preventDefault(),s==null||s({event:e.nativeEvent}),!0)}return!1}}];function $E(e){return!!(e&&"distance"in e)}function FE(e){return!!(e&&"delay"in e)}class d0{constructor(t,r,a){var s;a===void 0&&(a=uG(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=r;const{event:o}=t,{target:l}=o;this.props=t,this.events=r,this.document=jo(l),this.documentListeners=new wl(this.document),this.listeners=new wl(a),this.windowListeners=new wl(lr(l)),this.initialCoordinates=(s=$u(o))!=null?s:pn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:r,bypassActivationConstraint:a}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Pr.Resize,this.handleCancel),this.windowListeners.add(Pr.DragStart,IE),this.windowListeners.add(Pr.VisibilityChange,this.handleCancel),this.windowListeners.add(Pr.ContextMenu,IE),this.documentListeners.add(Pr.Keydown,this.handleKeydown),r){if(a!=null&&a({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(FE(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if($E(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,r){const{active:a,onPending:s}=this.props;s(a,t,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:t}=this,{onStart:r}=this.props;t&&(this.activated=!0,this.documentListeners.add(Pr.Click,dG,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Pr.SelectionChange,this.removeTextSelection),r(t))}handleMove(t){var r;const{activated:a,initialCoordinates:s,props:o}=this,{onMove:l,options:{activationConstraint:i}}=o;if(!s)return;const c=(r=$u(t))!=null?r:pn,d=Iu(s,c);if(!a&&i){if($E(i)){if(i.tolerance!=null&&nf(d,i.tolerance))return this.handleCancel();if(nf(d,i.distance))return this.handleStart()}if(FE(i)&&nf(d,i.tolerance))return this.handleCancel();this.handlePending(i,d);return}t.cancelable&&t.preventDefault(),l(c)}handleEnd(){const{onAbort:t,onEnd:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleCancel(){const{onAbort:t,onCancel:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleKeydown(t){t.code===Ye.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const fG={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class m0 extends d0{constructor(t){const{event:r}=t,a=jo(r.target);super(t,fG,a)}}m0.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:a}=t;return!r.isPrimary||r.button!==0?!1:(a==null||a({event:r}),!0)}}];const pG={move:{name:"mousemove"},end:{name:"mouseup"}};var jp;(function(e){e[e.RightClick=2]="RightClick"})(jp||(jp={}));class gG extends d0{constructor(t){super(t,pG,jo(t.event.target))}}gG.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:a}=t;return r.button===jp.RightClick?!1:(a==null||a({event:r}),!0)}}];const af={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class hG extends d0{constructor(t){super(t,af)}static setup(){return window.addEventListener(af.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(af.move.name,t)};function t(){}}}hG.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:a}=t;const{touches:s}=r;return s.length>1?!1:(a==null||a({event:r}),!0)}}];var Nl;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Nl||(Nl={}));var ju;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(ju||(ju={}));function vG(e){let{acceleration:t,activator:r=Nl.Pointer,canScroll:a,draggingRect:s,enabled:o,interval:l=5,order:i=ju.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:u,delta:m,threshold:f}=e;const x=EG({delta:m,disabled:!o}),[b,y]=Dq(),v=g.useRef({x:0,y:0}),p=g.useRef({x:0,y:0}),h=g.useMemo(()=>{switch(r){case Nl.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Nl.DraggableRect:return s}},[r,s,c]),E=g.useRef(null),w=g.useCallback(()=>{const S=E.current;if(!S)return;const C=v.current.x*p.current.x,D=v.current.y*p.current.y;S.scrollBy(C,D)},[]),N=g.useMemo(()=>i===ju.TreeOrder?[...d].reverse():d,[i,d]);g.useEffect(()=>{if(!o||!d.length||!h){y();return}for(const S of N){if((a==null?void 0:a(S))===!1)continue;const C=d.indexOf(S),D=u[C];if(!D)continue;const{direction:k,speed:O}=sG(S,D,h,t,f);for(const A of["x","y"])x[A][k[A]]||(O[A]=0,k[A]=0);if(O.x>0||O.y>0){y(),E.current=S,b(w,l),v.current=O,p.current=k;return}}v.current={x:0,y:0},p.current={x:0,y:0},y()},[t,w,a,y,o,l,JSON.stringify(h),JSON.stringify(x),b,d,N,u,JSON.stringify(f)])}const yG={x:{[Rt.Backward]:!1,[Rt.Forward]:!1},y:{[Rt.Backward]:!1,[Rt.Forward]:!1}};function EG(e){let{delta:t,disabled:r}=e;const a=Lu(t);return Ii(s=>{if(r||!a||!s)return yG;const o={x:Math.sign(t.x-a.x),y:Math.sign(t.y-a.y)};return{x:{[Rt.Backward]:s.x[Rt.Backward]||o.x===-1,[Rt.Forward]:s.x[Rt.Forward]||o.x===1},y:{[Rt.Backward]:s.y[Rt.Backward]||o.y===-1,[Rt.Forward]:s.y[Rt.Forward]||o.y===1}}},[r,t,a])}function xG(e,t){const r=t!=null?e.get(t):void 0,a=r?r.node.current:null;return Ii(s=>{var o;return t==null?null:(o=a??s)!=null?o:null},[a,t])}function bG(e,t){return g.useMemo(()=>e.reduce((r,a)=>{const{sensor:s}=a,o=s.activators.map(l=>({eventName:l.eventName,handler:t(l.handler,a)}));return[...r,...o]},[]),[e,t])}var ui;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(ui||(ui={}));var Bp;(function(e){e.Optimized="optimized"})(Bp||(Bp={}));const jE=new Map;function wG(e,t){let{dragging:r,dependencies:a,config:s}=t;const[o,l]=g.useState(null),{frequency:i,measure:c,strategy:d}=s,u=g.useRef(e),m=v(),f=ci(m),x=g.useCallback(function(p){p===void 0&&(p=[]),!f.current&&l(h=>h===null?p:h.concat(p.filter(E=>!h.includes(E))))},[f]),b=g.useRef(null),y=Ii(p=>{if(m&&!r)return jE;if(!p||p===jE||u.current!==e||o!=null){const h=new Map;for(let E of e){if(!E)continue;if(o&&o.length>0&&!o.includes(E.id)&&E.rect.current){h.set(E.id,E.rect.current);continue}const w=E.node.current,N=w?new u0(c(w),w):null;E.rect.current=N,N&&h.set(E.id,N)}return h}return p},[e,o,r,m,c]);return g.useEffect(()=>{u.current=e},[e]),g.useEffect(()=>{m||x()},[r,m]),g.useEffect(()=>{o&&o.length>0&&l(null)},[JSON.stringify(o)]),g.useEffect(()=>{m||typeof i!="number"||b.current!==null||(b.current=setTimeout(()=>{x(),b.current=null},i))},[i,m,x,...a]),{droppableRects:y,measureDroppableContainers:x,measuringScheduled:o!=null};function v(){switch(d){case ui.Always:return!1;case ui.BeforeDragging:return r;default:return!r}}}function f0(e,t){return Ii(r=>e?r||(typeof t=="function"?t(e):e):null,[t,e])}function NG(e,t){return f0(e,t)}function SG(e){let{callback:t,disabled:r}=e;const a=qd(t),s=g.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(a)},[a,r]);return g.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Xd(e){let{callback:t,disabled:r}=e;const a=qd(t),s=g.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(a)},[r]);return g.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function CG(e){return new u0(Bo(e),e)}function BE(e,t,r){t===void 0&&(t=CG);const[a,s]=g.useState(null);function o(){s(c=>{if(!e)return null;if(e.isConnected===!1){var d;return(d=c??r)!=null?d:null}const u=t(e);return JSON.stringify(c)===JSON.stringify(u)?c:u})}const l=SG({callback(c){if(e)for(const d of c){const{type:u,target:m}=d;if(u==="childList"&&m instanceof HTMLElement&&m.contains(e)){o();break}}}}),i=Xd({callback:o});return Mn(()=>{o(),e?(i==null||i.observe(e),l==null||l.observe(document.body,{childList:!0,subtree:!0})):(i==null||i.disconnect(),l==null||l.disconnect())},[e]),a}function kG(e){const t=f0(e);return Y2(e,t)}const zE=[];function DG(e){const t=g.useRef(e),r=Ii(a=>e?a&&a!==zE&&e&&t.current&&e.parentNode===t.current.parentNode?a:c0(e):zE,[e]);return g.useEffect(()=>{t.current=e},[e]),r}function AG(e){const[t,r]=g.useState(null),a=g.useRef(e),s=g.useCallback(o=>{const l=rf(o.target);l&&r(i=>i?(i.set(l,Fp(l)),new Map(i)):null)},[]);return g.useEffect(()=>{const o=a.current;if(e!==o){l(o);const i=e.map(c=>{const d=rf(c);return d?(d.addEventListener("scroll",s,{passive:!0}),[d,Fp(d)]):null}).filter(c=>c!=null);r(i.length?new Map(i):null),a.current=e}return()=>{l(e),l(o)};function l(i){i.forEach(c=>{const d=rf(c);d==null||d.removeEventListener("scroll",s)})}},[s,e]),g.useMemo(()=>e.length?t?Array.from(t.values()).reduce((o,l)=>to(o,l),pn):Z2(e):pn,[e,t])}function UE(e,t){t===void 0&&(t=[]);const r=g.useRef(null);return g.useEffect(()=>{r.current=null},t),g.useEffect(()=>{const a=e!==pn;a&&!r.current&&(r.current=e),!a&&r.current&&(r.current=null)},[e]),r.current?Iu(e,r.current):pn}function TG(e){g.useEffect(()=>{if(!Yd)return;const t=e.map(r=>{let{sensor:a}=r;return a.setup==null?void 0:a.setup()});return()=>{for(const r of t)r==null||r()}},e.map(t=>{let{sensor:r}=t;return r}))}function _G(e,t){return g.useMemo(()=>e.reduce((r,a)=>{let{eventName:s,handler:o}=a;return r[s]=l=>{o(l,t)},r},{}),[e,t])}function nS(e){return g.useMemo(()=>e?tG(e):null,[e])}const VE=[];function OG(e,t){t===void 0&&(t=Bo);const[r]=e,a=nS(r?lr(r):null),[s,o]=g.useState(VE);function l(){o(()=>e.length?e.map(c=>Q2(c)?a:new u0(t(c),c)):VE)}const i=Xd({callback:l});return Mn(()=>{i==null||i.disconnect(),l(),e.forEach(c=>i==null?void 0:i.observe(c))},[e]),s}function aS(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Li(t)?t:e}function RG(e){let{measure:t}=e;const[r,a]=g.useState(null),s=g.useCallback(d=>{for(const{target:u}of d)if(Li(u)){a(m=>{const f=t(u);return m?{...m,width:f.width,height:f.height}:f});break}},[t]),o=Xd({callback:s}),l=g.useCallback(d=>{const u=aS(d);o==null||o.disconnect(),u&&(o==null||o.observe(u)),a(u?t(u):null)},[t,o]),[i,c]=Pu(l);return g.useMemo(()=>({nodeRef:i,rect:r,setRef:c}),[r,i,c])}const MG=[{sensor:m0,options:{}},{sensor:rS,options:{}}],PG={current:{}},Vc={draggable:{measure:LE},droppable:{measure:LE,strategy:ui.WhileDragging,frequency:Bp.Optimized},dragOverlay:{measure:Bo}};class Sl extends Map{get(t){var r;return t!=null&&(r=super.get(t))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:r}=t;return!r})}getNodeFor(t){var r,a;return(r=(a=this.get(t))==null?void 0:a.node.current)!=null?r:void 0}}const LG={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Sl,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Fu},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Vc,measureDroppableContainers:Fu,windowRect:null,measuringScheduled:!1},sS={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Fu,draggableNodes:new Map,over:null,measureDroppableContainers:Fu},$i=g.createContext(sS),oS=g.createContext(LG);function IG(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Sl}}}function $G(e,t){switch(t.type){case St.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case St.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case St.DragEnd:case St.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case St.RegisterDroppable:{const{element:r}=t,{id:a}=r,s=new Sl(e.droppable.containers);return s.set(a,r),{...e,droppable:{...e.droppable,containers:s}}}case St.SetDroppableDisabled:{const{id:r,key:a,disabled:s}=t,o=e.droppable.containers.get(r);if(!o||a!==o.key)return e;const l=new Sl(e.droppable.containers);return l.set(r,{...o,disabled:s}),{...e,droppable:{...e.droppable,containers:l}}}case St.UnregisterDroppable:{const{id:r,key:a}=t,s=e.droppable.containers.get(r);if(!s||a!==s.key)return e;const o=new Sl(e.droppable.containers);return o.delete(r),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function FG(e){let{disabled:t}=e;const{active:r,activatorEvent:a,draggableNodes:s}=g.useContext($i),o=Lu(a),l=Lu(r==null?void 0:r.id);return g.useEffect(()=>{if(!t&&!a&&o&&l!=null){if(!Kd(o)||document.activeElement===o.target)return;const i=s.get(l);if(!i)return;const{activatorNode:c,node:d}=i;if(!c.current&&!d.current)return;requestAnimationFrame(()=>{for(const u of[c.current,d.current]){if(!u)continue;const m=_q(u);if(m){m.focus();break}}})}},[a,t,s,l,o]),null}function lS(e,t){let{transform:r,...a}=t;return e!=null&&e.length?e.reduce((s,o)=>o({transform:s,...a}),r):r}function jG(e){return g.useMemo(()=>({draggable:{...Vc.draggable,...e==null?void 0:e.draggable},droppable:{...Vc.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Vc.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function BG(e){let{activeNode:t,measure:r,initialRect:a,config:s=!0}=e;const o=g.useRef(!1),{x:l,y:i}=typeof s=="boolean"?{x:s,y:s}:s;Mn(()=>{if(!l&&!i||!t){o.current=!1;return}if(o.current||!a)return;const d=t==null?void 0:t.node.current;if(!d||d.isConnected===!1)return;const u=r(d),m=Y2(u,a);if(l||(m.x=0),i||(m.y=0),o.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const f=G2(d);f&&f.scrollBy({top:m.y,left:m.x})}},[t,l,i,a,r])}const Qd=g.createContext({...pn,scaleX:1,scaleY:1});var pa;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(pa||(pa={}));const zG=g.memo(function(t){var r,a,s,o;let{id:l,accessibility:i,autoScroll:c=!0,children:d,sensors:u=MG,collisionDetection:m=Kq,measuring:f,modifiers:x,...b}=t;const y=g.useReducer($G,void 0,IG),[v,p]=y,[h,E]=Iq(),[w,N]=g.useState(pa.Uninitialized),S=w===pa.Initialized,{draggable:{active:C,nodes:D,translate:k},droppable:{containers:O}}=v,A=C!=null?D.get(C):null,$=g.useRef({initial:null,translated:null}),P=g.useMemo(()=>{var _t;return C!=null?{id:C,data:(_t=A==null?void 0:A.data)!=null?_t:PG,rect:$}:null},[C,A]),I=g.useRef(null),[L,F]=g.useState(null),[T,M]=g.useState(null),V=ci(b,Object.values(b)),X=Gd("DndDescribedBy",l),z=g.useMemo(()=>O.getEnabled(),[O]),U=jG(f),{droppableRects:Y,measureDroppableContainers:Q,measuringScheduled:j}=wG(z,{dragging:S,dependencies:[k.x,k.y],config:U.droppable}),B=xG(D,C),H=g.useMemo(()=>T?$u(T):null,[T]),K=Zd(),fe=NG(B,U.draggable.measure);BG({activeNode:C!=null?D.get(C):null,config:K.layoutShiftCompensation,initialRect:fe,measure:U.draggable.measure});const W=BE(B,U.draggable.measure,fe),pe=BE(B?B.parentElement:null),se=g.useRef({activatorEvent:null,active:null,activeNode:B,collisionRect:null,collisions:null,droppableRects:Y,draggableNodes:D,draggingNode:null,draggingNodeRect:null,droppableContainers:O,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),be=O.getNodeFor((r=se.current.over)==null?void 0:r.id),$e=RG({measure:U.dragOverlay.measure}),qe=(a=$e.nodeRef.current)!=null?a:B,J=S?(s=$e.rect)!=null?s:W:null,le=!!($e.nodeRef.current&&$e.rect),Se=kG(le?null:W),Ce=nS(qe?lr(qe):null),ke=DG(S?be??B:null),Re=OG(ke),He=lS(x,{transform:{x:k.x-Se.x,y:k.y-Se.y,scaleX:1,scaleY:1},activatorEvent:T,active:P,activeNodeRect:W,containerNodeRect:pe,draggingNodeRect:J,over:se.current.over,overlayNodeRect:$e.rect,scrollableAncestors:ke,scrollableAncestorRects:Re,windowRect:Ce}),Tt=H?to(H,k):null,Jt=AG(ke),Qr=UE(Jt),ir=UE(Jt,[W]),ne=to(He,Qr),Ee=J?Jq(J,He):null,we=P&&Ee?m({active:P,collisionRect:Ee,droppableRects:Y,droppableContainers:z,pointerCoordinates:Tt}):null,Ne=Yq(we,"id"),[R,ue]=g.useState(null),Me=le?He:to(He,ir),ye=Xq(Me,(o=R==null?void 0:R.rect)!=null?o:null,W),Qe=g.useRef(null),Ge=g.useCallback((_t,er)=>{let{sensor:tr,options:_}=er;if(I.current==null)return;const G=D.get(I.current);if(!G)return;const ie=_t.nativeEvent,ee=new tr({active:I.current,activeNode:G,event:ie,options:_,context:se,onAbort(he){if(!D.get(he))return;const{onDragAbort:je}=V.current,Be={id:he};je==null||je(Be),h({type:"onDragAbort",event:Be})},onPending(he,Te,je,Be){if(!D.get(he))return;const{onDragPending:Lt}=V.current,_e={id:he,constraint:Te,initialCoordinates:je,offset:Be};Lt==null||Lt(_e),h({type:"onDragPending",event:_e})},onStart(he){const Te=I.current;if(Te==null)return;const je=D.get(Te);if(!je)return;const{onDragStart:Be}=V.current,Pt={activatorEvent:ie,active:{id:Te,data:je.data,rect:$}};ts.unstable_batchedUpdates(()=>{Be==null||Be(Pt),N(pa.Initializing),p({type:St.DragStart,initialCoordinates:he,active:Te}),h({type:"onDragStart",event:Pt}),F(Qe.current),M(ie)})},onMove(he){p({type:St.DragMove,coordinates:he})},onEnd:ce(St.DragEnd),onCancel:ce(St.DragCancel)});Qe.current=ee;function ce(he){return async function(){const{active:je,collisions:Be,over:Pt,scrollAdjustedTranslate:Lt}=se.current;let _e=null;if(je&&Lt){const{cancelDrop:It}=V.current;_e={activatorEvent:ie,active:je,collisions:Be,delta:Lt,over:Pt},he===St.DragEnd&&typeof It=="function"&&await Promise.resolve(It(_e))&&(he=St.DragCancel)}I.current=null,ts.unstable_batchedUpdates(()=>{p({type:he}),N(pa.Uninitialized),ue(null),F(null),M(null),Qe.current=null;const It=he===St.DragEnd?"onDragEnd":"onDragCancel";if(_e){const vn=V.current[It];vn==null||vn(_e),h({type:It,event:_e})}})}}},[D]),ut=g.useCallback((_t,er)=>(tr,_)=>{const G=tr.nativeEvent,ie=D.get(_);if(I.current!==null||!ie||G.dndKit||G.defaultPrevented)return;const ee={active:ie};_t(tr,er.options,ee)===!0&&(G.dndKit={capturedBy:er.sensor},I.current=_,Ge(tr,er))},[D,Ge]),Zt=bG(u,ut);TG(u),Mn(()=>{W&&w===pa.Initializing&&N(pa.Initialized)},[W,w]),g.useEffect(()=>{const{onDragMove:_t}=V.current,{active:er,activatorEvent:tr,collisions:_,over:G}=se.current;if(!er||!tr)return;const ie={active:er,activatorEvent:tr,collisions:_,delta:{x:ne.x,y:ne.y},over:G};ts.unstable_batchedUpdates(()=>{_t==null||_t(ie),h({type:"onDragMove",event:ie})})},[ne.x,ne.y]),g.useEffect(()=>{const{active:_t,activatorEvent:er,collisions:tr,droppableContainers:_,scrollAdjustedTranslate:G}=se.current;if(!_t||I.current==null||!er||!G)return;const{onDragOver:ie}=V.current,ee=_.get(Ne),ce=ee&&ee.rect.current?{id:ee.id,rect:ee.rect.current,data:ee.data,disabled:ee.disabled}:null,he={active:_t,activatorEvent:er,collisions:tr,delta:{x:G.x,y:G.y},over:ce};ts.unstable_batchedUpdates(()=>{ue(ce),ie==null||ie(he),h({type:"onDragOver",event:he})})},[Ne]),Mn(()=>{se.current={activatorEvent:T,active:P,activeNode:B,collisionRect:Ee,collisions:we,droppableRects:Y,draggableNodes:D,draggingNode:qe,draggingNodeRect:J,droppableContainers:O,over:R,scrollableAncestors:ke,scrollAdjustedTranslate:ne},$.current={initial:J,translated:Ee}},[P,B,we,Ee,D,qe,J,Y,O,R,ke,ne]),vG({...K,delta:k,draggingRect:Ee,pointerCoordinates:Tt,scrollableAncestors:ke,scrollableAncestorRects:Re});const zo=g.useMemo(()=>({active:P,activeNode:B,activeNodeRect:W,activatorEvent:T,collisions:we,containerNodeRect:pe,dragOverlay:$e,draggableNodes:D,droppableContainers:O,droppableRects:Y,over:R,measureDroppableContainers:Q,scrollableAncestors:ke,scrollableAncestorRects:Re,measuringConfiguration:U,measuringScheduled:j,windowRect:Ce}),[P,B,W,T,we,pe,$e,D,O,Y,R,Q,ke,Re,U,j,Ce]),Jd=g.useMemo(()=>({activatorEvent:T,activators:Zt,active:P,activeNodeRect:W,ariaDescribedById:{draggable:X},dispatch:p,draggableNodes:D,over:R,measureDroppableContainers:Q}),[T,Zt,P,W,p,X,D,R,Q]);return n.createElement(H2.Provider,{value:E},n.createElement($i.Provider,{value:Jd},n.createElement(oS.Provider,{value:zo},n.createElement(Qd.Provider,{value:ye},d)),n.createElement(FG,{disabled:(i==null?void 0:i.restoreFocus)===!1})),n.createElement(jq,{...i,hiddenTextDescribedById:X}));function Zd(){const _t=(L==null?void 0:L.autoScrollEnabled)===!1,er=typeof c=="object"?c.enabled===!1:c===!1,tr=S&&!_t&&!er;return typeof c=="object"?{...c,enabled:tr}:{enabled:tr}}}),UG=g.createContext(null),WE="button",VG="Draggable";function iS(e){let{id:t,data:r,disabled:a=!1,attributes:s}=e;const o=Gd(VG),{activators:l,activatorEvent:i,active:c,activeNodeRect:d,ariaDescribedById:u,draggableNodes:m,over:f}=g.useContext($i),{role:x=WE,roleDescription:b="draggable",tabIndex:y=0}=s??{},v=(c==null?void 0:c.id)===t,p=g.useContext(v?Qd:UG),[h,E]=Pu(),[w,N]=Pu(),S=_G(l,t),C=ci(r);Mn(()=>(m.set(t,{id:t,key:o,node:h,activatorNode:w,data:C}),()=>{const k=m.get(t);k&&k.key===o&&m.delete(t)}),[m,t]);const D=g.useMemo(()=>({role:x,tabIndex:y,"aria-disabled":a,"aria-pressed":v&&x===WE?!0:void 0,"aria-roledescription":b,"aria-describedby":u.draggable}),[a,x,y,v,b,u.draggable]);return{active:c,activatorEvent:i,activeNodeRect:d,attributes:D,isDragging:v,listeners:a?void 0:S,node:h,over:f,setNodeRef:E,setActivatorNodeRef:N,transform:p}}function WG(){return g.useContext(oS)}const HG="Droppable",YG={timeout:25};function cS(e){let{data:t,disabled:r=!1,id:a,resizeObserverConfig:s}=e;const o=Gd(HG),{active:l,dispatch:i,over:c,measureDroppableContainers:d}=g.useContext($i),u=g.useRef({disabled:r}),m=g.useRef(!1),f=g.useRef(null),x=g.useRef(null),{disabled:b,updateMeasurementsFor:y,timeout:v}={...YG,...s},p=ci(y??a),h=g.useCallback(()=>{if(!m.current){m.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{d(Array.isArray(p.current)?p.current:[p.current]),x.current=null},v)},[v]),E=Xd({callback:h,disabled:b||!l}),w=g.useCallback((D,k)=>{E&&(k&&(E.unobserve(k),m.current=!1),D&&E.observe(D))},[E]),[N,S]=Pu(w),C=ci(t);return g.useEffect(()=>{!E||!N.current||(E.disconnect(),m.current=!1,E.observe(N.current))},[N,E]),g.useEffect(()=>(i({type:St.RegisterDroppable,element:{id:a,key:o,disabled:r,node:N,rect:f,data:C}}),()=>i({type:St.UnregisterDroppable,key:o,id:a})),[a]),g.useEffect(()=>{r!==u.current.disabled&&(i({type:St.SetDroppableDisabled,id:a,key:o,disabled:r}),u.current.disabled=r)},[a,o,r,i]),{active:l,rect:f,isOver:(c==null?void 0:c.id)===a,node:N,over:c,setNodeRef:S}}function qG(e){let{animation:t,children:r}=e;const[a,s]=g.useState(null),[o,l]=g.useState(null),i=Lu(r);return!r&&!a&&i&&s(i),Mn(()=>{if(!o)return;const c=a==null?void 0:a.key,d=a==null?void 0:a.props.id;if(c==null||d==null){s(null);return}Promise.resolve(t(d,o)).then(()=>{s(null)})},[t,a,o]),n.createElement(n.Fragment,null,r,a?g.cloneElement(a,{ref:l}):null)}const GG={x:0,y:0,scaleX:1,scaleY:1};function KG(e){let{children:t}=e;return n.createElement($i.Provider,{value:sS},n.createElement(Qd.Provider,{value:GG},t))}const XG={position:"fixed",touchAction:"none"},QG=e=>Kd(e)?"transform 250ms ease":void 0,JG=g.forwardRef((e,t)=>{let{as:r,activatorEvent:a,adjustScale:s,children:o,className:l,rect:i,style:c,transform:d,transition:u=QG}=e;if(!i)return null;const m=s?d:{...d,scaleX:1,scaleY:1},f={...XG,width:i.width,height:i.height,top:i.top,left:i.left,transform:$a.Transform.toString(m),transformOrigin:s&&a?Vq(a,i):void 0,transition:typeof u=="function"?u(a):u,...c};return n.createElement(r,{className:l,style:f,ref:t},o)}),ZG=e=>t=>{let{active:r,dragOverlay:a}=t;const s={},{styles:o,className:l}=e;if(o!=null&&o.active)for(const[i,c]of Object.entries(o.active))c!==void 0&&(s[i]=r.node.style.getPropertyValue(i),r.node.style.setProperty(i,c));if(o!=null&&o.dragOverlay)for(const[i,c]of Object.entries(o.dragOverlay))c!==void 0&&a.node.style.setProperty(i,c);return l!=null&&l.active&&r.node.classList.add(l.active),l!=null&&l.dragOverlay&&a.node.classList.add(l.dragOverlay),function(){for(const[c,d]of Object.entries(s))r.node.style.setProperty(c,d);l!=null&&l.active&&r.node.classList.remove(l.active)}},eK=e=>{let{transform:{initial:t,final:r}}=e;return[{transform:$a.Transform.toString(t)},{transform:$a.Transform.toString(r)}]},tK={duration:250,easing:"ease",keyframes:eK,sideEffects:ZG({styles:{active:{opacity:"0"}}})};function rK(e){let{config:t,draggableNodes:r,droppableContainers:a,measuringConfiguration:s}=e;return qd((o,l)=>{if(t===null)return;const i=r.get(o);if(!i)return;const c=i.node.current;if(!c)return;const d=aS(l);if(!d)return;const{transform:u}=lr(l).getComputedStyle(l),m=q2(u);if(!m)return;const f=typeof t=="function"?t:nK(t);return eS(c,s.draggable.measure),f({active:{id:o,data:i.data,node:c,rect:s.draggable.measure(c)},draggableNodes:r,dragOverlay:{node:l,rect:s.dragOverlay.measure(d)},droppableContainers:a,measuringConfiguration:s,transform:m})})}function nK(e){const{duration:t,easing:r,sideEffects:a,keyframes:s}={...tK,...e};return o=>{let{active:l,dragOverlay:i,transform:c,...d}=o;if(!t)return;const u={x:i.rect.left-l.rect.left,y:i.rect.top-l.rect.top},m={scaleX:c.scaleX!==1?l.rect.width*c.scaleX/i.rect.width:1,scaleY:c.scaleY!==1?l.rect.height*c.scaleY/i.rect.height:1},f={x:c.x-u.x,y:c.y-u.y,...m},x=s({...d,active:l,dragOverlay:i,transform:{initial:c,final:f}}),[b]=x,y=x[x.length-1];if(JSON.stringify(b)===JSON.stringify(y))return;const v=a==null?void 0:a({active:l,dragOverlay:i,...d}),p=i.node.animate(x,{duration:t,easing:r,fill:"forwards"});return new Promise(h=>{p.onfinish=()=>{v==null||v(),h()}})}}let HE=0;function aK(e){return g.useMemo(()=>{if(e!=null)return HE++,HE},[e])}const sK=n.memo(e=>{let{adjustScale:t=!1,children:r,dropAnimation:a,style:s,transition:o,modifiers:l,wrapperElement:i="div",className:c,zIndex:d=999}=e;const{activatorEvent:u,active:m,activeNodeRect:f,containerNodeRect:x,draggableNodes:b,droppableContainers:y,dragOverlay:v,over:p,measuringConfiguration:h,scrollableAncestors:E,scrollableAncestorRects:w,windowRect:N}=WG(),S=g.useContext(Qd),C=aK(m==null?void 0:m.id),D=lS(l,{activatorEvent:u,active:m,activeNodeRect:f,containerNodeRect:x,draggingNodeRect:v.rect,over:p,overlayNodeRect:v.rect,scrollableAncestors:E,scrollableAncestorRects:w,transform:S,windowRect:N}),k=f0(f),O=rK({config:a,draggableNodes:b,droppableContainers:y,measuringConfiguration:h}),A=k?v.setRef:void 0;return n.createElement(KG,null,n.createElement(qG,{animation:O},m&&C?n.createElement(JG,{key:C,id:m.id,ref:A,as:i,activatorEvent:u,adjustScale:t,className:c,transition:o,rect:k,style:{zIndex:d,...s},transform:D},r):null))});function p0(e,t,r){const a=e.slice();return a.splice(r<0?a.length+r:r,0,a.splice(t,1)[0]),a}function fc(e){return e!==null&&e>=0}const oK=e=>{let{rects:t,activeIndex:r,overIndex:a,index:s}=e;const o=p0(t,a,r),l=t[s],i=o[s];return!i||!l?null:{x:i.left-l.left,y:i.top-l.top,scaleX:i.width/l.width,scaleY:i.height/l.height}},lK="Sortable",iK=n.createContext({activeIndex:-1,containerId:lK,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:oK,disabled:{draggable:!1,droppable:!1}}),cK=e=>{let{id:t,items:r,activeIndex:a,overIndex:s}=e;return p0(r,a,s).indexOf(t)},uK=e=>{let{containerId:t,isSorting:r,wasDragging:a,index:s,items:o,newIndex:l,previousItems:i,previousContainerId:c,transition:d}=e;return!d||!a||i!==o&&s===l?!1:r?!0:l!==s&&t===c},dK={duration:200,easing:"ease"},uS="transform",mK=$a.Transition.toString({property:uS,duration:0,easing:"linear"}),fK={roleDescription:"sortable"};function pK(e){let{disabled:t,index:r,node:a,rect:s}=e;const[o,l]=g.useState(null),i=g.useRef(r);return Mn(()=>{if(!t&&r!==i.current&&a.current){const c=s.current;if(c){const d=Bo(a.current,{ignoreTransform:!0}),u={x:c.left-d.left,y:c.top-d.top,scaleX:c.width/d.width,scaleY:c.height/d.height};(u.x||u.y)&&l(u)}}r!==i.current&&(i.current=r)},[t,r,a,s]),g.useEffect(()=>{o&&l(null)},[o]),o}function gK(e){let{animateLayoutChanges:t=uK,attributes:r,disabled:a,data:s,getNewIndex:o=cK,id:l,strategy:i,resizeObserverConfig:c,transition:d=dK}=e;const{items:u,containerId:m,activeIndex:f,disabled:x,disableTransforms:b,sortedRects:y,overIndex:v,useDragOverlay:p,strategy:h}=g.useContext(iK),E=hK(a,x),w=u.indexOf(l),N=g.useMemo(()=>({sortable:{containerId:m,index:w,items:u},...s}),[m,s,w,u]),S=g.useMemo(()=>u.slice(u.indexOf(l)),[u,l]),{rect:C,node:D,isOver:k,setNodeRef:O}=cS({id:l,data:N,disabled:E.droppable,resizeObserverConfig:{updateMeasurementsFor:S,...c}}),{active:A,activatorEvent:$,activeNodeRect:P,attributes:I,setNodeRef:L,listeners:F,isDragging:T,over:M,setActivatorNodeRef:V,transform:X}=iS({id:l,data:N,attributes:{...fK,...r},disabled:E.draggable}),z=kq(O,L),U=!!A,Y=U&&!b&&fc(f)&&fc(v),Q=!p&&T,j=Q&&Y?X:null,H=Y?j??(i??h)({rects:y,activeNodeRect:P,activeIndex:f,overIndex:v,index:w}):null,K=fc(f)&&fc(v)?o({id:l,items:u,activeIndex:f,overIndex:v}):w,fe=A==null?void 0:A.id,W=g.useRef({activeId:fe,items:u,newIndex:K,containerId:m}),pe=u!==W.current.items,se=t({active:A,containerId:m,isDragging:T,isSorting:U,id:l,index:w,items:u,newIndex:W.current.newIndex,previousItems:W.current.items,previousContainerId:W.current.containerId,transition:d,wasDragging:W.current.activeId!=null}),be=pK({disabled:!se,index:w,node:D,rect:C});return g.useEffect(()=>{U&&W.current.newIndex!==K&&(W.current.newIndex=K),m!==W.current.containerId&&(W.current.containerId=m),u!==W.current.items&&(W.current.items=u)},[U,K,m,u]),g.useEffect(()=>{if(fe===W.current.activeId)return;if(fe!=null&&W.current.activeId==null){W.current.activeId=fe;return}const qe=setTimeout(()=>{W.current.activeId=fe},50);return()=>clearTimeout(qe)},[fe]),{active:A,activeIndex:f,attributes:I,data:N,rect:C,index:w,newIndex:K,items:u,isOver:k,isSorting:U,isDragging:T,listeners:F,node:D,overIndex:v,over:M,setNodeRef:z,setActivatorNodeRef:V,setDroppableNodeRef:O,setDraggableNodeRef:L,transform:be??H,transition:$e()};function $e(){if(be||pe&&W.current.newIndex===w)return mK;if(!(Q&&!Kd($)||!d)&&(U||se))return $a.Transition.toString({...d,property:uS})}}function hK(e,t){var r,a;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(r=e==null?void 0:e.draggable)!=null?r:t.draggable,droppable:(a=e==null?void 0:e.droppable)!=null?a:t.droppable}}Ye.Down,Ye.Right,Ye.Up,Ye.Left;const vK=()=>{console.log("ComponentLibrary - Rendering");const e=[{type:"hero-banner",name:"Banner Principal",description:"Banner destacado con título, subtítulo y botón CTA",icon:"🎯",category:"Contenido Principal",color:"bg-gradient-to-r from-blue-500 to-purple-600"},{type:"service-cards",name:"Tarjetas de Servicios",description:"Grid de servicios con iconos y descripciones",icon:"⚖️",category:"Servicios",color:"bg-gradient-to-r from-green-500 to-teal-600"},{type:"contact-form",name:"Formulario de Contacto",description:"Formulario para que los clientes se pongan en contacto",icon:"📧",category:"Contacto",color:"bg-gradient-to-r from-orange-500 to-red-600"},{type:"testimonials",name:"Testimonios",description:"Opiniones y comentarios de clientes satisfechos",icon:"💬",category:"Social Proof",color:"bg-gradient-to-r from-purple-500 to-pink-600"},{type:"stats",name:"Estadísticas",description:"Números y métricas importantes del despacho",icon:"📊",category:"Social Proof",color:"bg-gradient-to-r from-indigo-500 to-blue-600"},{type:"text-block",name:"Bloque de Texto",description:"Texto con título y contenido personalizable",icon:"📝",category:"Contenido",color:"bg-gradient-to-r from-gray-500 to-gray-700"},{type:"image-gallery",name:"Galería de Imágenes",description:"Grid de imágenes con títulos opcionales",icon:"🖼️",category:"Contenido",color:"bg-gradient-to-r from-yellow-500 to-orange-600"},{type:"map",name:"Mapa de Ubicación",description:"Mapa interactivo con la ubicación del despacho",icon:"🗺️",category:"Contacto",color:"bg-gradient-to-r from-teal-500 to-green-600"},{type:"divider",name:"Separador",description:"Línea divisoria para separar secciones",icon:"➖",category:"Layout",color:"bg-gradient-to-r from-gray-400 to-gray-600"},{type:"spacer",name:"Espaciador",description:"Espacio vertical para separar elementos",icon:"⬜",category:"Layout",color:"bg-gradient-to-r from-gray-300 to-gray-500"}],t=[...new Set(e.map(r=>r.category))];return n.createElement("div",{className:"bg-white rounded-lg shadow-sm border"},n.createElement("div",{className:"p-4 border-b bg-gradient-to-r from-blue-50 to-indigo-50"},n.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"📚 Biblioteca de Componentes"),n.createElement("p",{className:"text-sm text-gray-600"},"Arrastra componentes al canvas")),n.createElement("div",{className:"p-4 max-h-[800px] overflow-y-auto"},t.map(r=>n.createElement("div",{key:r,className:"mb-6"},n.createElement("h4",{className:"text-sm font-medium text-gray-700 mb-3 px-2 py-1 bg-gray-100 rounded"},r),n.createElement("div",{className:"space-y-2"},e.filter(a=>a.category===r).map(a=>n.createElement(yK,{key:a.type,component:a})))))))},yK=({component:e})=>{const{attributes:t,listeners:r,setNodeRef:a,transform:s,isDragging:o}=iS({id:e.type,data:{type:"component-library",component:e}}),l=s?{transform:`translate3d(${s.x}px, ${s.y}px, 0)`}:void 0;return console.log(`DraggableComponent - ${e.type} - isDragging:`,o),n.createElement("div",{ref:a,...r,...t,style:l,className:`
        p-4 border rounded-lg cursor-move transition-all hover:shadow-md
        ${o?"bg-blue-50 border-blue-300 shadow-lg opacity-50 scale-105":"bg-white border-gray-200 hover:border-blue-300 hover:bg-blue-50"}
      `},n.createElement("div",{className:"flex items-center space-x-3"},n.createElement("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center text-2xl ${e.color}`},e.icon),n.createElement("div",{className:"flex-1 min-w-0"},n.createElement("h5",{className:"text-sm font-semibold text-gray-900 truncate"},e.name),n.createElement("p",{className:"text-xs text-gray-500 mt-1 leading-relaxed"},e.description))),n.createElement("div",{className:"mt-2 text-xs text-gray-400 text-center"},"← Arrastra al canvas"))},EK=({layout:e,onComponentSelect:t,onComponentDelete:r,selectedComponent:a,isPreviewMode:s})=>{const{setNodeRef:o,isOver:l}=cS({id:"canvas-drop-zone"});return console.log("Canvas - Rendering, components:",e.components.length),console.log("Canvas - isPreviewMode:",s),n.createElement("div",{className:"bg-white rounded-lg shadow-sm border"},n.createElement("div",{className:"p-4 border-b bg-gradient-to-r from-green-50 to-emerald-50"},n.createElement("h3",{className:"text-lg font-semibold text-gray-900"},s?"👁️ Vista Previa":"🎨 Canvas de Diseño"),n.createElement("p",{className:"text-sm text-gray-600"},s?"Vista previa de la página principal":"Arrastra componentes aquí para diseñar la página")),n.createElement("div",{ref:o,className:`
          min-h-[600px] p-6 transition-all
          ${l?"bg-blue-50 border-2 border-dashed border-blue-400":"bg-gray-50 border-2 border-dashed border-gray-300"}
          ${s?"bg-white":""}
        `},e.components.length===0?n.createElement("div",{className:"flex flex-col items-center justify-center h-96 text-center"},n.createElement("div",{className:"text-6xl mb-4"},"🎨"),n.createElement("h3",{className:"text-xl font-semibold text-gray-700 mb-2"},"Canvas Vacío"),n.createElement("p",{className:"text-gray-500 mb-4 max-w-md"},s?"No hay componentes para mostrar en la vista previa":"Arrastra componentes desde la biblioteca para comenzar a diseñar"),!s&&n.createElement("div",{className:"text-sm text-gray-400"},"💡 Tip: Comienza con un Banner Principal")):n.createElement("div",{className:"space-y-4"},e.components.map((i,c)=>n.createElement(xK,{key:i.id,component:i,index:c,onSelect:t,onDelete:r,isSelected:(a==null?void 0:a.id)===i.id,isPreviewMode:s}))),l&&!s&&n.createElement("div",{className:"text-center py-8 text-blue-600 font-medium"},"✨ Suelta aquí para agregar el componente")))},xK=({component:e,index:t,onSelect:r,onDelete:a,isSelected:s,isPreviewMode:o})=>{const{attributes:l,listeners:i,setNodeRef:c,transform:d,transition:u,isDragging:m}=gK({id:e.id,data:{type:"canvas-component",component:e}}),f={transform:$a.Transform.toString(d),transition:u};return console.log(`CanvasComponent - ${e.type} - isSelected:`,s),n.createElement("div",{ref:c,style:f,...l,...i,className:`
        relative group transition-all
        ${m?"opacity-50 scale-95":""}
        ${s&&!o?"ring-2 ring-blue-500 ring-offset-2":"hover:ring-1 hover:ring-gray-300"}
      `},!o&&n.createElement("div",{className:"absolute -top-2 -left-2 z-10 flex space-x-1 opacity-0 group-hover:opacity-100 transition-opacity"},n.createElement("button",{onClick:x=>{x.stopPropagation(),r(e)},className:"bg-blue-500 text-white p-1 rounded-full text-xs hover:bg-blue-600 transition-colors",title:"Editar componente"},"✏️"),n.createElement("button",{onClick:x=>{x.stopPropagation(),a(e.id)},className:"bg-red-500 text-white p-1 rounded-full text-xs hover:bg-red-600 transition-colors",title:"Eliminar componente"},"🗑️")),!o&&n.createElement("div",{className:"absolute -top-2 -right-2 bg-gray-500 text-white text-xs px-2 py-1 rounded-full"},t+1),n.createElement("div",{className:`
          ${o?"":"cursor-move"}
          ${s&&!o?"bg-blue-50":""}
        `,onClick:()=>!o&&r(e)},n.createElement(rN,{component:e})),s&&!o&&n.createElement("div",{className:"absolute inset-0 border-2 border-blue-500 pointer-events-none rounded-lg"}))},bK=({component:e,onUpdate:t})=>{const[r,a]=g.useState(e.props);g.useEffect(()=>{a(e.props)},[e]),console.log("PropertiesPanel - Rendering for component:",e.type);const s=(d,u)=>{const m={...r,[d]:u};a(m),t(e.id,m)},o=(d,u,m,f)=>{const x=[...r[d]||[]];x[u]={...x[u],[m]:f},s(d,x)},l=(d,u)=>{const m=[...r[d]||[],u];s(d,m)},i=(d,u)=>{const m=[...r[d]||[]];m.splice(u,1),s(d,m)},c=()=>{switch(e.type){case"hero-banner":return n.createElement("div",{className:"space-y-4"},n.createElement(tt,{label:"Título Principal",value:r.title||"",onChange:d=>s("title",d),type:"text",placeholder:"Ej: Despacho de Abogados García & Asociados"}),n.createElement(tt,{label:"Subtítulo",value:r.subtitle||"",onChange:d=>s("subtitle",d),type:"textarea",placeholder:"Ej: Más de 15 años de experiencia en servicios legales profesionales"}),n.createElement(tt,{label:"Texto del Botón",value:r.ctaText||"",onChange:d=>s("ctaText",d),type:"text",placeholder:"Ej: Consulta Gratuita"}),n.createElement(tt,{label:"Enlace del Botón",value:r.ctaLink||"",onChange:d=>s("ctaLink",d),type:"text",placeholder:"Ej: /contacto o https://wa.me/34612345678"}));case"service-cards":return n.createElement("div",{className:"space-y-4"},n.createElement(tt,{label:"Título de la Sección",value:r.title||"",onChange:d=>s("title",d),type:"text",placeholder:"Ej: Nuestros Servicios Legales"}),n.createElement("div",{className:"space-y-3"},n.createElement("div",{className:"flex justify-between items-center"},n.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Servicios"),n.createElement("button",{onClick:()=>l("services",{icon:"⚖️",title:"Nuevo Servicio",description:"Descripción del servicio"}),className:"text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600"},"+ Agregar")),(r.services||[]).map((d,u)=>n.createElement("div",{key:u,className:"p-3 border rounded-lg bg-gray-50 space-y-2"},n.createElement("div",{className:"flex justify-between items-center"},n.createElement("span",{className:"text-xs font-medium text-gray-600"},"Servicio ",u+1),n.createElement("button",{onClick:()=>i("services",u),className:"text-xs bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600"},"Eliminar")),n.createElement(tt,{label:"Icono (emoji)",value:d.icon||"",onChange:m=>o("services",u,"icon",m),type:"text",placeholder:"Ej: ⚖️ 👥 🏢"}),n.createElement(tt,{label:"Título del Servicio",value:d.title||"",onChange:m=>o("services",u,"title",m),type:"text",placeholder:"Ej: Derecho Civil"}),n.createElement(tt,{label:"Descripción",value:d.description||"",onChange:m=>o("services",u,"description",m),type:"textarea",placeholder:"Ej: Asesoría especializada en casos civiles"})))));case"contact-form":return n.createElement("div",{className:"space-y-4"},n.createElement(tt,{label:"Título del Formulario",value:r.title||"",onChange:d=>s("title",d),type:"text",placeholder:"Ej: Solicita tu Consulta Gratuita"}),n.createElement(tt,{label:"Subtítulo",value:r.subtitle||"",onChange:d=>s("subtitle",d),type:"textarea",placeholder:"Ej: Nuestros abogados especialistas están listos para ayudarte"}),n.createElement(tt,{label:"Texto del Botón",value:r.submitText||"",onChange:d=>s("submitText",d),type:"text",placeholder:"Ej: Enviar Consulta"}));case"testimonials":return n.createElement("div",{className:"space-y-4"},n.createElement(tt,{label:"Título de la Sección",value:r.title||"",onChange:d=>s("title",d),type:"text",placeholder:"Ej: Lo que dicen nuestros clientes"}),n.createElement("div",{className:"space-y-3"},n.createElement("div",{className:"flex justify-between items-center"},n.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Testimonios"),n.createElement("button",{onClick:()=>l("testimonials",{name:"Cliente",text:"Excelente servicio",rating:5}),className:"text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600"},"+ Agregar")),(r.testimonials||[]).map((d,u)=>n.createElement("div",{key:u,className:"p-3 border rounded-lg bg-gray-50 space-y-2"},n.createElement("div",{className:"flex justify-between items-center"},n.createElement("span",{className:"text-xs font-medium text-gray-600"},"Testimonio ",u+1),n.createElement("button",{onClick:()=>i("testimonials",u),className:"text-xs bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600"},"Eliminar")),n.createElement(tt,{label:"Nombre del Cliente",value:d.name||"",onChange:m=>o("testimonials",u,"name",m),type:"text",placeholder:"Ej: María García"}),n.createElement(tt,{label:"Testimonio",value:d.text||"",onChange:m=>o("testimonials",u,"text",m),type:"textarea",placeholder:"Ej: Excelente servicio profesional..."})))));case"stats":return n.createElement("div",{className:"space-y-4"},n.createElement(tt,{label:"Título de la Sección",value:r.title||"",onChange:d=>s("title",d),type:"text",placeholder:"Ej: Nuestros Números"}),n.createElement("div",{className:"space-y-3"},n.createElement("div",{className:"flex justify-between items-center"},n.createElement("label",{className:"block text-sm font-medium text-gray-700"},"Estadísticas"),n.createElement("button",{onClick:()=>l("stats",{value:"0",label:"Nueva Estadística"}),className:"text-xs bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600"},"+ Agregar")),(r.stats||[]).map((d,u)=>n.createElement("div",{key:u,className:"p-3 border rounded-lg bg-gray-50 space-y-2"},n.createElement("div",{className:"flex justify-between items-center"},n.createElement("span",{className:"text-xs font-medium text-gray-600"},"Estadística ",u+1),n.createElement("button",{onClick:()=>i("stats",u),className:"text-xs bg-red-500 text-white px-2 py-1 rounded hover:bg-red-600"},"Eliminar")),n.createElement(tt,{label:"Valor",value:d.value||"",onChange:m=>o("stats",u,"value",m),type:"text",placeholder:"Ej: 500+"}),n.createElement(tt,{label:"Etiqueta",value:d.label||"",onChange:m=>o("stats",u,"label",m),type:"text",placeholder:"Ej: Casos Exitosos"})))));case"text-block":return n.createElement("div",{className:"space-y-4"},n.createElement(tt,{label:"Título",value:r.title||"",onChange:d=>s("title",d),type:"text",placeholder:"Ej: Sobre Nosotros"}),n.createElement(tt,{label:"Contenido",value:r.content||"",onChange:d=>s("content",d),type:"textarea",placeholder:"Ej: Somos un despacho de abogados comprometido..."}),n.createElement(pc,{label:"Alineación del Texto",value:r.alignment||"left",onChange:d=>s("alignment",d),options:[{value:"left",label:"Izquierda"},{value:"center",label:"Centro"},{value:"right",label:"Derecha"}]}),n.createElement(pc,{label:"Tamaño de Fuente",value:r.fontSize||"medium",onChange:d=>s("fontSize",d),options:[{value:"small",label:"Pequeño"},{value:"medium",label:"Mediano"},{value:"large",label:"Grande"}]}));case"image-gallery":return n.createElement("div",{className:"space-y-4"},n.createElement(tt,{label:"Título de la Galería",value:r.title||"",onChange:d=>s("title",d),type:"text",placeholder:"Ej: Nuestras Instalaciones"}),n.createElement(pc,{label:"Número de Columnas",value:r.columns||3,onChange:d=>s("columns",parseInt(d)),options:[{value:2,label:"2 columnas"},{value:3,label:"3 columnas"},{value:4,label:"4 columnas"}]}));case"map":return n.createElement("div",{className:"space-y-4"},n.createElement(tt,{label:"Título",value:r.title||"",onChange:d=>s("title",d),type:"text",placeholder:"Ej: Nuestra Ubicación"}),n.createElement(tt,{label:"Dirección",value:r.address||"",onChange:d=>s("address",d),type:"text",placeholder:"Ej: Calle Principal 123, Madrid"}));case"divider":return n.createElement("div",{className:"space-y-4"},n.createElement(pc,{label:"Tipo de Línea",value:r.type||"solid",onChange:d=>s("type",d),options:[{value:"solid",label:"Sólida"},{value:"dashed",label:"Punteada"},{value:"dotted",label:"Puntos"}]}),n.createElement(tt,{label:"Color",value:r.color||"#e5e7eb",onChange:d=>s("color",d),type:"color"}),n.createElement(tt,{label:"Grosor (px)",value:r.thickness||1,onChange:d=>s("thickness",parseInt(d)),type:"number"}));case"spacer":return n.createElement("div",{className:"space-y-4"},n.createElement(tt,{label:"Altura (px)",value:r.height||40,onChange:d=>s("height",parseInt(d)),type:"number"}));default:return n.createElement("div",{className:"text-gray-500 text-center py-4"},"No hay propiedades editables para este componente")}};return n.createElement("div",{className:"bg-white rounded-lg shadow-sm border"},n.createElement("div",{className:"p-4 border-b bg-gradient-to-r from-purple-50 to-pink-50"},n.createElement("h3",{className:"text-lg font-semibold text-gray-900"},"⚙️ Propiedades"),n.createElement("p",{className:"text-sm text-gray-600"},wK(e.type))),n.createElement("div",{className:"p-4 max-h-[600px] overflow-y-auto"},c()))},tt=({label:e,value:t,onChange:r,type:a,placeholder:s})=>n.createElement("div",{className:"space-y-1"},n.createElement("label",{className:"block text-sm font-medium text-gray-700"},e),a==="textarea"?n.createElement("textarea",{value:t,onChange:o=>r(o.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",rows:3,placeholder:s}):n.createElement("input",{type:a,value:t,onChange:o=>r(o.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",placeholder:s})),pc=({label:e,value:t,onChange:r,options:a})=>n.createElement("div",{className:"space-y-1"},n.createElement("label",{className:"block text-sm font-medium text-gray-700"},e),n.createElement("select",{value:t,onChange:s=>r(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"},a.map(s=>n.createElement("option",{key:s.value,value:s.value},s.label)))),wK=e=>({"hero-banner":"Banner Principal","service-cards":"Tarjetas de Servicios","contact-form":"Formulario de Contacto",testimonials:"Testimonios",stats:"Estadísticas","text-block":"Bloque de Texto","image-gallery":"Galería de Imágenes",map:"Mapa de Ubicación",divider:"Separador",spacer:"Espaciador"})[e]||e,NK=()=>{const[e,t]=g.useState({id:"home-layout",name:"Home Page",components:[],version:1,lastModified:new Date().toISOString()}),[r,a]=g.useState(null),[s,o]=g.useState(!1),[l,i]=g.useState(null),c=zq(Bq(m0,{activationConstraint:{distance:8}}));console.log("HomeBuilder - Rendering, components:",e.components.length);const d=v=>{console.log("Drag start:",v),i(v.active.id)},u=g.useCallback(v=>{var E;console.log("Drag end:",v);const{active:p,over:h}=v;if(i(null),!!h)if(((E=p.data.current)==null?void 0:E.type)==="component-library"){const w=p.id,N={id:`component-${Date.now()}`,type:w,props:SK(w),order:e.components.length};console.log("Adding new component:",N),t(S=>({...S,components:[...S.components,N]}))}else p.id!==h.id&&t(w=>({...w,components:p0(w.components,w.components.findIndex(N=>N.id===p.id),w.components.findIndex(N=>N.id===h.id)).map((N,S)=>({...N,order:S}))}))},[e.components]),m=g.useCallback(v=>{console.log("Component selected:",v),a(v)},[]),f=g.useCallback((v,p)=>{t(h=>({...h,components:h.components.map(E=>E.id===v?{...E,props:{...E.props,...p}}:E)}))},[]),x=g.useCallback(v=>{t(p=>({...p,components:p.components.filter(h=>h.id!==v)})),a(null)},[]),b=async()=>{try{console.log("Saving layout:",e),alert("Layout guardado exitosamente! (Modo demo)")}catch(v){console.error("Error saving layout:",v),alert("Error al guardar el layout")}},y=async()=>{try{console.log("Loading layout..."),alert("Layout cargado exitosamente! (Modo demo)")}catch(v){console.error("Error loading layout:",v)}};return n.createElement("div",{className:"min-h-screen bg-gray-50"},n.createElement("div",{className:"bg-white shadow-sm border-b"},n.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"flex justify-between items-center py-4"},n.createElement("div",null,n.createElement("h1",{className:"text-2xl font-bold text-gray-900"},"🎨 Home Builder"),n.createElement("p",{className:"text-sm text-gray-600"},"Diseña la página principal arrastrando componentes")),n.createElement("div",{className:"flex space-x-3"},n.createElement("button",{onClick:()=>o(!s),className:`px-4 py-2 rounded-md text-sm font-medium ${s?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`},s?"Editar":"Vista Previa"),n.createElement("button",{onClick:y,className:"px-4 py-2 bg-gray-600 text-white rounded-md text-sm font-medium hover:bg-gray-700"},"Cargar"),n.createElement("button",{onClick:b,className:"px-4 py-2 bg-green-600 text-white rounded-md text-sm font-medium hover:bg-green-700"},"Guardar"))))),n.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},n.createElement(zG,{sensors:c,collisionDetection:qq,onDragStart:d,onDragEnd:u},n.createElement("div",{className:"grid grid-cols-12 gap-6"},!s&&n.createElement("div",{className:"col-span-3"},n.createElement(vK,null)),n.createElement("div",{className:s?"col-span-12":"col-span-6"},n.createElement(EK,{layout:e,onComponentSelect:m,onComponentDelete:x,selectedComponent:r,isPreviewMode:s})),!s&&r&&n.createElement("div",{className:"col-span-3"},n.createElement(bK,{component:r,onUpdate:f}))),n.createElement(sK,null,l?n.createElement("div",{className:"bg-white border-2 border-blue-500 rounded-lg p-4 shadow-lg opacity-80"},n.createElement("div",{className:"text-sm font-medium text-gray-900"},l.startsWith("component-")?"Nuevo componente":"Componente")):null))))},SK=e=>({"hero-banner":{title:"Bienvenido a Nuestro Despacho",subtitle:"Servicios legales profesionales y confiables",backgroundImage:"/images/hero-bg.jpg",ctaText:"Consultar Ahora",ctaLink:"/contact"},"service-cards":{title:"Nuestros Servicios",services:[{title:"Derecho Civil",description:"Asesoría en casos civiles",icon:"⚖️"},{title:"Derecho Laboral",description:"Protección de derechos laborales",icon:"👥"},{title:"Derecho Familiar",description:"Divorcios y custodia",icon:"👨‍👩‍👧‍👦"}]},"contact-form":{title:"Contáctanos",subtitle:"Estamos aquí para ayudarte",fields:["nombre","email","telefono","mensaje"]},testimonials:{title:"Lo que dicen nuestros clientes",testimonials:[{name:"María García",text:"Excelente servicio profesional",rating:5},{name:"Juan Pérez",text:"Muy satisfecho con el resultado",rating:5}]},stats:{title:"Nuestros Números",stats:[{label:"Casos Exitosos",value:"500+"},{label:"Años de Experiencia",value:"15"},{label:"Clientes Satisfechos",value:"1000+"}]},"text-block":{title:"Sobre Nosotros",content:"Somos un despacho de abogados comprometido con la excelencia y la justicia.",alignment:"left",fontSize:"medium"},"image-gallery":{title:"Nuestras Instalaciones",columns:3,showCaptions:!0,images:["/images/office-1.jpg","/images/office-2.jpg","/images/office-3.jpg"]},map:{title:"Nuestra Ubicación",address:"Calle Principal 123, Ciudad",latitude:40.4168,longitude:-3.7038,zoom:15},divider:{type:"solid",color:"#e5e7eb",thickness:1},spacer:{height:40}})[e]||{},CK=()=>n.createElement(NK,null),kK=()=>{const{user:e}=Pe(),[t,r]=g.useState([]),[a,s]=g.useState(!0),[o,l]=g.useState(null),[i,c]=g.useState(null),[d,u]=g.useState(!1),[m,f]=g.useState({name:"",role:"ADMIN",orientation:"horizontal",isActive:!0,items:[]});g.useEffect(()=>{x()},[]);const x=async()=>{try{s(!0);const N=await Z.get("/api/menu-config");r(N.data)}catch(N){console.error("Error fetching menu configs:",N)}finally{s(!1)}},b=async()=>{try{await Z.post("/api/menu-config",m),u(!1),f({name:"",role:"ADMIN",orientation:"horizontal",isActive:!0,items:[]}),x()}catch(N){console.error("Error creating menu:",N)}},y=async()=>{if(i)try{await Z.patch(`/api/menu-config/${i.id}`,i),c(null),x()}catch(N){console.error("Error updating menu:",N)}},v=async N=>{if(confirm("¿Estás seguro de que quieres eliminar este menú?"))try{await Z.delete(`/api/menu-config/${N}`),x()}catch(S){console.error("Error deleting menu:",S)}},p=N=>{const S={label:"Nuevo elemento",url:"/",icon:"📄",order:N.items.length,isVisible:!0,isExternal:!1},C={...N,items:[...N.items,S]};(i==null?void 0:i.id)===N.id&&c(C)},h=(N,S,C,D)=>{const k=[...N.items];k[S]={...k[S],[C]:D};const O={...N,items:k};(i==null?void 0:i.id)===N.id&&c(O)},E=(N,S)=>{const C=N.items.filter((k,O)=>O!==S),D={...N,items:C};(i==null?void 0:i.id)===N.id&&c(D)},w=N=>({ADMIN:"Administrador",ABOGADO:"Abogado",CLIENTE:"Cliente"})[N]||N;return a?n.createElement("div",{className:"min-h-screen flex items-center justify-center"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.createElement("p",{className:"text-gray-600"},"Cargando configuraciones de menús..."))):n.createElement("div",{className:"min-h-screen bg-gray-50 py-8"},n.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"mb-8"},n.createElement("h1",{className:"text-3xl font-bold text-gray-900"},"🍽️ Configuración de Menús"),n.createElement("p",{className:"mt-2 text-gray-600"},"Gestiona los menús de navegación para cada rol de usuario")),n.createElement("div",{className:"mb-6"},n.createElement("button",{onClick:()=>u(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors"},"➕ Crear Nuevo Menú")),d&&n.createElement("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6"},n.createElement("h3",{className:"text-lg font-semibold mb-4"},"Crear Nuevo Menú"),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Nombre del Menú"),n.createElement("input",{type:"text",value:m.name,onChange:N=>f({...m,name:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ej: Menú Principal"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Rol"),n.createElement("select",{value:m.role,onChange:N=>f({...m,role:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},n.createElement("option",{value:"ADMIN"},"Administrador"),n.createElement("option",{value:"ABOGADO"},"Abogado"),n.createElement("option",{value:"CLIENTE"},"Cliente"))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Orientación"),n.createElement("select",{value:m.orientation,onChange:N=>f({...m,orientation:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},n.createElement("option",{value:"horizontal"},"Horizontal"),n.createElement("option",{value:"vertical"},"Vertical"))),n.createElement("div",{className:"flex items-center"},n.createElement("input",{type:"checkbox",checked:m.isActive,onChange:N=>f({...m,isActive:N.target.checked}),className:"mr-2"}),n.createElement("label",{className:"text-sm font-medium text-gray-700"},"Menú Activo"))),n.createElement("div",{className:"mt-4 flex space-x-3"},n.createElement("button",{onClick:b,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors"},"✅ Crear Menú"),n.createElement("button",{onClick:()=>u(!1),className:"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition-colors"},"❌ Cancelar"))),n.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6"},t.map(N=>n.createElement("div",{key:N.id,className:"bg-white rounded-lg shadow-md overflow-hidden"},n.createElement("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-4"},n.createElement("div",{className:"flex justify-between items-center"},n.createElement("div",null,n.createElement("h3",{className:"text-lg font-semibold"},N.name),n.createElement("p",{className:"text-blue-100 text-sm"},w(N.role)," • ",N.orientation==="horizontal"?"Horizontal":"Vertical")),n.createElement("div",{className:"flex space-x-2"},N.isActive&&n.createElement("span",{className:"bg-green-500 text-white px-2 py-1 rounded-full text-xs"},"Activo"),n.createElement("button",{onClick:()=>c((i==null?void 0:i.id)===N.id?null:N),className:"bg-white bg-opacity-20 hover:bg-opacity-30 px-3 py-1 rounded text-sm transition-colors"},(i==null?void 0:i.id)===N.id?"❌ Cancelar":"✏️ Editar"),n.createElement("button",{onClick:()=>v(N.id),className:"bg-red-500 hover:bg-red-600 px-3 py-1 rounded text-sm transition-colors"},"🗑️ Eliminar")))),n.createElement("div",{className:"p-4"},(i==null?void 0:i.id)===N.id?n.createElement("div",null,n.createElement("div",{className:"mb-4"},n.createElement("button",{onClick:()=>p(i),className:"bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600 transition-colors"},"➕ Agregar Elemento")),i.items.map((S,C)=>n.createElement("div",{key:C,className:"border border-gray-200 rounded p-3 mb-3"},n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3"},n.createElement("input",{type:"text",value:S.label,onChange:D=>h(i,C,"label",D.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"Etiqueta"}),n.createElement("input",{type:"text",value:S.url,onChange:D=>h(i,C,"url",D.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"URL"}),n.createElement("input",{type:"text",value:S.icon,onChange:D=>h(i,C,"icon",D.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"Icono (emoji)"}),n.createElement("input",{type:"number",value:S.order,onChange:D=>h(i,C,"order",parseInt(D.target.value)),className:"px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"Orden"}),n.createElement("div",{className:"flex items-center space-x-4"},n.createElement("label",{className:"flex items-center text-sm"},n.createElement("input",{type:"checkbox",checked:S.isVisible,onChange:D=>h(i,C,"isVisible",D.target.checked),className:"mr-2"}),"Visible"),n.createElement("label",{className:"flex items-center text-sm"},n.createElement("input",{type:"checkbox",checked:S.isExternal,onChange:D=>h(i,C,"isExternal",D.target.checked),className:"mr-2"}),"Externo")),n.createElement("button",{onClick:()=>E(i,C),className:"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600 transition-colors"},"🗑️ Eliminar")))),n.createElement("div",{className:"mt-4 flex space-x-3"},n.createElement("button",{onClick:y,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors"},"💾 Guardar Cambios"),n.createElement("button",{onClick:()=>c(null),className:"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition-colors"},"❌ Cancelar"))):n.createElement("div",null,N.items.length===0?n.createElement("p",{className:"text-gray-500 text-center py-4"},"No hay elementos en este menú"):n.createElement("div",{className:"space-y-2"},N.items.sort((S,C)=>S.order-C.order).map((S,C)=>n.createElement("div",{key:C,className:"flex items-center justify-between p-2 bg-gray-50 rounded"},n.createElement("div",{className:"flex items-center space-x-3"},n.createElement("span",{className:"text-lg"},S.icon),n.createElement("div",null,n.createElement("p",{className:"font-medium"},S.label),n.createElement("p",{className:"text-sm text-gray-500"},S.url))),n.createElement("div",{className:"flex items-center space-x-2"},!S.isVisible&&n.createElement("span",{className:"text-xs bg-gray-300 text-gray-600 px-2 py-1 rounded"},"Oculto"),S.isExternal&&n.createElement("span",{className:"text-xs bg-blue-300 text-blue-600 px-2 py-1 rounded"},"Externo"),n.createElement("span",{className:"text-xs bg-gray-200 text-gray-600 px-2 py-1 rounded"},S.order)))))))))),t.length===0&&n.createElement("div",{className:"text-center py-12"},n.createElement("p",{className:"text-gray-500 text-lg"},"No hay configuraciones de menús creadas"),n.createElement("button",{onClick:()=>u(!0),className:"mt-4 bg-blue-600 text-white px-6 py-3 rounded-md hover:bg-blue-700 transition-colors"},"➕ Crear Primer Menú"))))},DK=()=>{const{user:e}=Pe(),[t,r]=g.useState([]),[a,s]=g.useState(!0),[o,l]=g.useState(null),[i,c]=g.useState(!1),[d,u]=g.useState({key:"",value:"",type:"string",category:"general",description:"",isPublic:!1});g.useEffect(()=>{m()},[]);const m=async()=>{try{s(!0);const E=await Z.get("/api/site-config/categories");r(E.data)}catch(E){console.error("Error fetching site configs:",E)}finally{s(!1)}},f=async()=>{try{await Z.post("/api/site-config",d),c(!1),u({key:"",value:"",type:"string",category:"general",description:"",isPublic:!1}),m()}catch(E){console.error("Error creating config:",E)}},x=async()=>{if(o)try{await Z.patch(`/api/site-config/${o.id}`,o),l(null),m()}catch(E){console.error("Error updating config:",E)}},b=async E=>{if(confirm("¿Estás seguro de que quieres eliminar esta configuración?"))try{await Z.delete(`/api/site-config/${E}`),m()}catch(w){console.error("Error deleting config:",w)}},y=async(E,w)=>{try{await Z.patch(`/api/site-config/key/${E}`,{value:w}),m()}catch(N){console.error("Error updating config:",N)}},v=E=>({branding:"🎨 Marca",layout:"📐 Diseño",contact:"📞 Contacto",social:"🌐 Social",general:"⚙️ General"})[E]||E,p=E=>({string:"Texto",image:"Imagen",color:"Color",boolean:"Booleano",json:"JSON"})[E]||E,h=E=>{switch(E.type){case"boolean":return n.createElement("div",{className:"flex items-center"},n.createElement("input",{type:"checkbox",checked:E.value==="true",onChange:w=>y(E.key,w.target.checked.toString()),className:"mr-2"}),n.createElement("span",{className:"text-sm text-gray-600"},E.value==="true"?"Activado":"Desactivado"));case"color":return n.createElement("div",{className:"flex items-center space-x-2"},n.createElement("input",{type:"color",value:E.value,onChange:w=>y(E.key,w.target.value),className:"w-8 h-8 border border-gray-300 rounded"}),n.createElement("span",{className:"text-sm font-mono"},E.value));case"image":return n.createElement("div",{className:"flex items-center space-x-2"},n.createElement("img",{src:E.value,alt:"Preview",className:"w-8 h-8 object-cover border border-gray-300 rounded",onError:w=>{w.currentTarget.style.display="none"}}),n.createElement("input",{type:"text",value:E.value,onChange:w=>y(E.key,w.target.value),className:"flex-1 px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"URL de la imagen"}));default:return n.createElement("input",{type:"text",value:E.value,onChange:w=>y(E.key,w.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded text-sm",placeholder:"Valor"})}};return a?n.createElement("div",{className:"min-h-screen flex items-center justify-center"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.createElement("p",{className:"text-gray-600"},"Cargando configuraciones del sitio..."))):n.createElement("div",{className:"min-h-screen bg-gray-50 py-8"},n.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"mb-8"},n.createElement("h1",{className:"text-3xl font-bold text-gray-900"},"⚙️ Configuración del Sitio"),n.createElement("p",{className:"mt-2 text-gray-600"},"Gestiona la configuración general del sitio web")),n.createElement("div",{className:"mb-6 flex space-x-4"},n.createElement("button",{onClick:()=>c(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors"},"➕ Nueva Configuración"),n.createElement("button",{onClick:async()=>{try{await Z.post("/api/site-config/initialize"),m(),alert("Configuraciones por defecto inicializadas")}catch(E){console.error("Error initializing configs:",E)}},className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors"},"🔄 Inicializar Configuraciones")),i&&n.createElement("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6"},n.createElement("h3",{className:"text-lg font-semibold mb-4"},"Crear Nueva Configuración"),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Clave"),n.createElement("input",{type:"text",value:d.key,onChange:E=>u({...d,key:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ej: site_name"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Valor"),n.createElement("input",{type:"text",value:d.value,onChange:E=>u({...d,value:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Valor de la configuración"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Tipo"),n.createElement("select",{value:d.type,onChange:E=>u({...d,type:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},n.createElement("option",{value:"string"},"Texto"),n.createElement("option",{value:"image"},"Imagen"),n.createElement("option",{value:"color"},"Color"),n.createElement("option",{value:"boolean"},"Booleano"),n.createElement("option",{value:"json"},"JSON"))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Categoría"),n.createElement("select",{value:d.category,onChange:E=>u({...d,category:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},n.createElement("option",{value:"branding"},"Marca"),n.createElement("option",{value:"layout"},"Diseño"),n.createElement("option",{value:"contact"},"Contacto"),n.createElement("option",{value:"social"},"Social"),n.createElement("option",{value:"general"},"General"))),n.createElement("div",{className:"md:col-span-2"},n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Descripción"),n.createElement("input",{type:"text",value:d.description,onChange:E=>u({...d,description:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Descripción de la configuración"})),n.createElement("div",{className:"flex items-center"},n.createElement("input",{type:"checkbox",checked:d.isPublic,onChange:E=>u({...d,isPublic:E.target.checked}),className:"mr-2"}),n.createElement("label",{className:"text-sm font-medium text-gray-700"},"Configuración Pública"))),n.createElement("div",{className:"mt-4 flex space-x-3"},n.createElement("button",{onClick:f,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors"},"✅ Crear Configuración"),n.createElement("button",{onClick:()=>c(!1),className:"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition-colors"},"❌ Cancelar"))),n.createElement("div",{className:"space-y-6"},t.map(E=>n.createElement("div",{key:E.category,className:"bg-white rounded-lg shadow-md overflow-hidden"},n.createElement("div",{className:"bg-gradient-to-r from-gray-600 to-gray-700 text-white p-4"},n.createElement("h3",{className:"text-lg font-semibold"},v(E.category)),n.createElement("p",{className:"text-gray-200 text-sm"},E.configs.length," configuración",E.configs.length!==1?"es":"")),n.createElement("div",{className:"p-4"},n.createElement("div",{className:"space-y-4"},E.configs.map(w=>n.createElement("div",{key:w.id,className:"border border-gray-200 rounded-lg p-4"},n.createElement("div",{className:"flex justify-between items-start mb-3"},n.createElement("div",{className:"flex-1"},n.createElement("div",{className:"flex items-center space-x-2 mb-1"},n.createElement("h4",{className:"font-medium text-gray-900"},w.key),n.createElement("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded"},p(w.type)),w.isPublic&&n.createElement("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded"},"Público")),w.description&&n.createElement("p",{className:"text-sm text-gray-600"},w.description)),n.createElement("div",{className:"flex space-x-2"},n.createElement("button",{onClick:()=>l((o==null?void 0:o.id)===w.id?null:w),className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm transition-colors"},(o==null?void 0:o.id)===w.id?"❌ Cancelar":"✏️ Editar"),n.createElement("button",{onClick:()=>b(w.id),className:"bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm transition-colors"},"🗑️ Eliminar"))),(o==null?void 0:o.id)===w.id?n.createElement("div",{className:"space-y-3"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Valor"),w.type==="boolean"?n.createElement("select",{value:w.value,onChange:N=>l({...w,value:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"},n.createElement("option",{value:"true"},"Activado"),n.createElement("option",{value:"false"},"Desactivado")):w.type==="color"?n.createElement("input",{type:"color",value:w.value,onChange:N=>l({...w,value:N.target.value}),className:"w-full h-10 border border-gray-300 rounded-md"}):n.createElement("input",{type:"text",value:w.value,onChange:N=>l({...w,value:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Descripción"),n.createElement("input",{type:"text",value:w.description||"",onChange:N=>l({...w,description:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})),n.createElement("div",{className:"flex items-center"},n.createElement("input",{type:"checkbox",checked:w.isPublic,onChange:N=>l({...w,isPublic:N.target.checked}),className:"mr-2"}),n.createElement("label",{className:"text-sm font-medium text-gray-700"},"Configuración Pública")),n.createElement("div",{className:"flex space-x-3"},n.createElement("button",{onClick:x,className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors"},"💾 Guardar Cambios"),n.createElement("button",{onClick:()=>l(null),className:"bg-gray-500 text-white px-4 py-2 rounded-md hover:bg-gray-600 transition-colors"},"❌ Cancelar"))):n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Valor Actual"),h(w))))))))),t.length===0&&n.createElement("div",{className:"text-center py-12"},n.createElement("p",{className:"text-gray-500 text-lg"},"No hay configuraciones del sitio"),n.createElement("button",{onClick:()=>c(!0),className:"mt-4 bg-blue-600 text-white px-6 py-3 rounded-md hover:bg-blue-700 transition-colors"},"➕ Crear Primera Configuración"))))},AK=()=>{var D,k,O;const{user:e}=Pe(),t=qr(),[r,a]=g.useState(0),[s,o]=g.useState(null),[l,i]=g.useState({}),[c,d]=g.useState(!1),[u,m]=g.useState(!1),f=[{id:"legal-office",name:"Despacho Legal",description:"Gestión completa de casos legales, clientes y documentación",icon:"⚖️",category:"Legal",features:["Gestión de expedientes y casos","Sistema de citas y calendario","Documentación legal","Facturación y pagos","Comunicación con clientes"],configSteps:[{id:"basic-info",title:"Información Básica del Despacho",description:"Configura los datos fundamentales de tu despacho",type:"site",questions:[{id:"office_name",question:"¿Cuál es el nombre de tu despacho legal?",type:"text",defaultValue:"Despacho Legal"},{id:"specialties",question:"¿En qué especialidades legales te enfocas?",type:"multiselect",options:["Derecho Civil","Derecho Penal","Derecho Laboral","Derecho Mercantil","Derecho Administrativo","Derecho de Familia","Derecho Inmobiliario","Derecho Fiscal"]},{id:"office_hours",question:"¿Cuáles son tus horarios de atención?",type:"text",defaultValue:"Lunes a Viernes: 9:00 - 18:00"}]},{id:"menu-setup",title:"Configuración de Menús",description:"Personaliza la navegación para abogados y clientes",type:"menu",questions:[{id:"enable_consultations",question:"¿Quieres ofrecer consultas online?",type:"boolean",defaultValue:!0},{id:"enable_document_templates",question:"¿Quieres vender plantillas de documentos legales?",type:"boolean",defaultValue:!0},{id:"enable_payment_plans",question:"¿Quieres ofrecer planes de pago a plazos?",type:"boolean",defaultValue:!1}]},{id:"ecommerce-setup",title:"Configuración de Tienda Online",description:"Configura la venta de servicios y productos legales",type:"ecommerce",questions:[{id:"enable_online_payments",question:"¿Quieres habilitar pagos online?",type:"boolean",defaultValue:!0},{id:"payment_methods",question:"¿Qué métodos de pago quieres aceptar?",type:"multiselect",options:["PayPal","Tarjeta de Crédito","Transferencia Bancaria"],dependsOn:"enable_online_payments",dependsValue:!0},{id:"consultation_price",question:"¿Cuál será el precio de la consulta inicial?",type:"text",defaultValue:"50",dependsOn:"enable_consultations",dependsValue:!0}]}]},{id:"consulting-firm",name:"Empresa de Consultoría",description:"Servicios de consultoría empresarial y estratégica",icon:"💼",category:"Business",features:["Consultoría estratégica","Análisis de procesos","Gestión de proyectos","Formación empresarial","Auditorías y reportes"],configSteps:[{id:"basic-info",title:"Información de la Consultora",description:"Configura los datos de tu empresa de consultoría",type:"site",questions:[{id:"company_name",question:"¿Cuál es el nombre de tu consultora?",type:"text",defaultValue:"Consultora Empresarial"},{id:"consulting_areas",question:"¿En qué áreas de consultoría te especializas?",type:"multiselect",options:["Estrategia Empresarial","Optimización de Procesos","Recursos Humanos","Finanzas Corporativas","Marketing Digital","Transformación Digital","Gestión de Calidad","Compliance y Legal"]}]},{id:"service-catalog",title:"Catálogo de Servicios",description:"Configura los servicios que ofreces",type:"ecommerce",questions:[{id:"service_types",question:"¿Qué tipos de servicios quieres ofrecer?",type:"multiselect",options:["Consultoría por Horas","Proyectos Completos","Auditorías","Formación","Mentoring","Análisis de Datos"]},{id:"enable_packages",question:"¿Quieres ofrecer paquetes de servicios?",type:"boolean",defaultValue:!0}]}]},{id:"online-academy",name:"Academia Online",description:"Plataforma de formación y cursos online",icon:"🎓",category:"Education",features:["Cursos online","Sistema de evaluación","Certificaciones","Comunidad de estudiantes","Contenido multimedia"],configSteps:[{id:"academy-info",title:"Información de la Academia",description:"Configura los datos de tu academia online",type:"site",questions:[{id:"academy_name",question:"¿Cuál es el nombre de tu academia?",type:"text",defaultValue:"Academia Online"},{id:"academic_areas",question:"¿En qué áreas académicas te especializas?",type:"multiselect",options:["Tecnología y Programación","Negocios y Emprendimiento","Idiomas","Arte y Diseño","Salud y Bienestar","Ciencias y Matemáticas","Humanidades","Formación Profesional"]}]},{id:"course-structure",title:"Estructura de Cursos",description:"Configura cómo organizarás tus cursos",type:"custom",questions:[{id:"course_types",question:"¿Qué tipos de cursos quieres ofrecer?",type:"multiselect",options:["Cursos Autodidactas","Cursos con Tutor","Bootcamps Intensivos","Webinars","Talleres Prácticos","Certificaciones"]},{id:"enable_subscriptions",question:"¿Quieres ofrecer suscripciones mensuales?",type:"boolean",defaultValue:!0}]}]},{id:"digital-agency",name:"Agencia Digital",description:"Servicios de marketing digital y desarrollo web",icon:"🚀",category:"Digital",features:["Desarrollo web","Marketing digital","SEO y SEM","Redes sociales","Analytics y reportes"],configSteps:[{id:"agency-info",title:"Información de la Agencia",description:"Configura los datos de tu agencia digital",type:"site",questions:[{id:"agency_name",question:"¿Cuál es el nombre de tu agencia?",type:"text",defaultValue:"Agencia Digital"},{id:"digital_services",question:"¿Qué servicios digitales ofreces?",type:"multiselect",options:["Desarrollo Web","Diseño Gráfico","Marketing Digital","SEO y SEM","Gestión de Redes Sociales","Email Marketing","Analytics y Reportes","Consultoría Digital"]}]},{id:"project-management",title:"Gestión de Proyectos",description:"Configura el sistema de gestión de proyectos",type:"custom",questions:[{id:"project_tracking",question:"¿Quieres que los clientes puedan seguir sus proyectos?",type:"boolean",defaultValue:!0},{id:"client_portal",question:"¿Quieres crear un portal para clientes?",type:"boolean",defaultValue:!0}]}]},{id:"health-clinic",name:"Clínica de Salud",description:"Gestión de citas médicas y pacientes",icon:"🏥",category:"Health",features:["Gestión de citas","Historiales médicos","Facturación médica","Comunicación con pacientes","Reportes médicos"],configSteps:[{id:"clinic-info",title:"Información de la Clínica",description:"Configura los datos de tu clínica",type:"site",questions:[{id:"clinic_name",question:"¿Cuál es el nombre de tu clínica?",type:"text",defaultValue:"Clínica de Salud"},{id:"medical_specialties",question:"¿Qué especialidades médicas ofreces?",type:"multiselect",options:["Medicina General","Cardiología","Dermatología","Ginecología","Pediatría","Psicología","Fisioterapia","Odontología"]}]},{id:"appointment-system",title:"Sistema de Citas",description:"Configura el sistema de citas médicas",type:"custom",questions:[{id:"online_booking",question:"¿Quieres que los pacientes puedan reservar citas online?",type:"boolean",defaultValue:!0},{id:"appointment_reminders",question:"¿Quieres enviar recordatorios de citas?",type:"boolean",defaultValue:!0}]}]}],x=A=>{o(A),a(0),i({})},b=(A,$)=>{i(P=>({...P,[A]:$}))},y=A=>A.dependsOn?l[A.dependsOn]===A.dependsValue:!0,v=()=>s?s.configSteps[r]:null,p=()=>{r<s.configSteps.length-1?a(r+1):E()},h=()=>{r>0&&a(r-1)},E=async()=>{m(!0);try{await w(),t("/admin/menu-config")}catch(A){console.error("Error applying configuration:",A)}finally{m(!1)}},w=async()=>{const A=N();for(const P of A)await Z.post("/api/site-config",P);const $=S();for(const P of $)await Z.post("/api/menu-config",P)},N=()=>{const A=[];return(s==null?void 0:s.id)==="legal-office"?A.push({key:"site_name",value:l.office_name||"Despacho Legal",type:"string",category:"branding",isPublic:!0},{key:"site_description",value:"Servicios legales profesionales",type:"string",category:"branding",isPublic:!0},{key:"office_hours",value:l.office_hours||"Lunes a Viernes: 9:00 - 18:00",type:"string",category:"contact",isPublic:!0}):(s==null?void 0:s.id)==="consulting-firm"&&A.push({key:"site_name",value:l.company_name||"Consultora Empresarial",type:"string",category:"branding",isPublic:!0},{key:"site_description",value:"Consultoría empresarial y estratégica",type:"string",category:"branding",isPublic:!0}),A},S=()=>{const A=[];if((s==null?void 0:s.id)==="legal-office"){const $={name:"Menú Abogado",role:"ABOGADO",orientation:"horizontal",isActive:!0,items:[{label:"Dashboard",url:"/dashboard",icon:"🏠",order:1,isVisible:!0,isExternal:!1},{label:"Expedientes",url:"/lawyer/cases",icon:"📋",order:2,isVisible:!0,isExternal:!1},{label:"Citas",url:"/lawyer/appointments",icon:"📅",order:3,isVisible:!0,isExternal:!1}]};l.enable_consultations&&$.items.push({label:"Consultas",url:"/lawyer/consultations",icon:"💬",order:4,isVisible:!0,isExternal:!1}),A.push($)}return A},C=A=>{var $,P;if(!y(A))return null;switch(A.type){case"boolean":return n.createElement("div",{key:A.id,className:"mb-6"},n.createElement("label",{className:"flex items-center space-x-3"},n.createElement("input",{type:"checkbox",checked:l[A.id]??A.defaultValue,onChange:I=>b(A.id,I.target.checked),className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),n.createElement("span",{className:"text-lg font-medium text-gray-900"},A.question)));case"text":return n.createElement("div",{key:A.id,className:"mb-6"},n.createElement("label",{className:"block text-lg font-medium text-gray-900 mb-2"},A.question),n.createElement("input",{type:"text",value:l[A.id]??A.defaultValue??"",onChange:I=>b(A.id,I.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Escribe tu respuesta..."}));case"select":return n.createElement("div",{key:A.id,className:"mb-6"},n.createElement("label",{className:"block text-lg font-medium text-gray-900 mb-2"},A.question),n.createElement("select",{value:l[A.id]??"",onChange:I=>b(A.id,I.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},n.createElement("option",{value:""},"Selecciona una opción"),($=A.options)==null?void 0:$.map(I=>n.createElement("option",{key:I,value:I},I))));case"multiselect":return n.createElement("div",{key:A.id,className:"mb-6"},n.createElement("label",{className:"block text-lg font-medium text-gray-900 mb-2"},A.question),n.createElement("div",{className:"space-y-2"},(P=A.options)==null?void 0:P.map(I=>n.createElement("label",{key:I,className:"flex items-center space-x-3"},n.createElement("input",{type:"checkbox",checked:(l[A.id]||[]).includes(I),onChange:L=>{const F=l[A.id]||[],T=L.target.checked?[...F,I]:F.filter(M=>M!==I);b(A.id,T)},className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),n.createElement("span",{className:"text-gray-700"},I)))));default:return null}};return c?n.createElement("div",{className:"min-h-screen flex items-center justify-center"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})):n.createElement("div",{className:"min-h-screen bg-gray-50 py-8"},n.createElement("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"text-center mb-8"},n.createElement("h1",{className:"text-3xl font-bold text-gray-900 mb-4"},"🎯 Configuración Guiada del Sistema"),n.createElement("p",{className:"text-lg text-gray-600"},"Te ayudaremos a configurar tu sistema paso a paso según tu tipo de negocio")),s?n.createElement("div",{className:"bg-white rounded-lg shadow-md p-8"},n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"flex items-center justify-between mb-2"},n.createElement("span",{className:"text-sm font-medium text-gray-700"},"Paso ",r+1," de ",s.configSteps.length),n.createElement("span",{className:"text-sm text-gray-500"},Math.round((r+1)/s.configSteps.length*100),"% completado")),n.createElement("div",{className:"w-full bg-gray-200 rounded-full h-2"},n.createElement("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${(r+1)/s.configSteps.length*100}%`}}))),n.createElement("div",{className:"mb-8 p-4 bg-blue-50 rounded-lg"},n.createElement("div",{className:"flex items-center"},n.createElement("span",{className:"text-2xl mr-3"},s.icon),n.createElement("div",null,n.createElement("h3",{className:"text-lg font-bold text-gray-900"},"Configurando: ",s.name),n.createElement("p",{className:"text-gray-600"},s.description)))),n.createElement("div",{className:"mb-8"},n.createElement("h2",{className:"text-2xl font-bold text-gray-900 mb-2"},(D=v())==null?void 0:D.title),n.createElement("p",{className:"text-gray-600 mb-6"},(k=v())==null?void 0:k.description),n.createElement("div",{className:"space-y-6"},(O=v())==null?void 0:O.questions.map(C))),n.createElement("div",{className:"flex justify-between"},n.createElement("button",{onClick:()=>o(null),className:"px-6 py-3 text-gray-600 hover:text-gray-800 transition-colors"},"← Cambiar tipo de negocio"),n.createElement("div",{className:"flex space-x-4"},r>0&&n.createElement("button",{onClick:h,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors"},"← Anterior"),n.createElement("button",{onClick:p,disabled:u,className:"px-6 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50"},u?n.createElement("span",{className:"flex items-center"},n.createElement("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Configurando..."):r===s.configSteps.length-1?"Finalizar Configuración":"Siguiente →")))):n.createElement("div",{className:"bg-white rounded-lg shadow-md p-8"},n.createElement("h2",{className:"text-2xl font-bold text-gray-900 mb-6 text-center"},"¿Qué tipo de negocio quieres configurar?"),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},f.map(A=>n.createElement("div",{key:A.id,onClick:()=>x(A),className:"border-2 border-gray-200 rounded-lg p-6 hover:border-blue-500 hover:shadow-lg transition-all cursor-pointer"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-4xl mb-4"},A.icon),n.createElement("h3",{className:"text-xl font-bold text-gray-900 mb-2"},A.name),n.createElement("p",{className:"text-gray-600 mb-4"},A.description),n.createElement("div",{className:"text-sm text-gray-500"},n.createElement("strong",null,"Características principales:"),n.createElement("ul",{className:"mt-2 space-y-1"},A.features.slice(0,3).map(($,P)=>n.createElement("li",{key:P},"• ",$))))))))),n.createElement("div",{className:"mt-8 bg-blue-50 rounded-lg p-6"},n.createElement("h3",{className:"text-lg font-bold text-gray-900 mb-4"},"💡 ¿Necesitas ayuda?"),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600"},n.createElement("div",null,n.createElement("strong",null,"Para Despachos Legales:"),n.createElement("ul",{className:"mt-1 space-y-1"},n.createElement("li",null,"• Configura especialidades legales"),n.createElement("li",null,"• Habilita consultas online"),n.createElement("li",null,"• Establece precios de servicios"))),n.createElement("div",null,n.createElement("strong",null,"Para Consultorías:"),n.createElement("ul",{className:"mt-1 space-y-1"},n.createElement("li",null,"• Define áreas de consultoría"),n.createElement("li",null,"• Configura tipos de servicios"),n.createElement("li",null,"• Establece paquetes de servicios")))))))},YE=()=>{var A,$,P;const{user:e}=Pe(),[t,r]=g.useState([]),[a,s]=g.useState([]),[o,l]=g.useState(null),[i,c]=g.useState(!0),[d,u]=g.useState("pending"),[m,f]=g.useState([]),[x,b]=g.useState(""),[y,v]=g.useState({}),[p,h]=g.useState(!1);g.useEffect(()=>{E(),h(!0),Z.get("/teleassistance/remote-tools").then(I=>f(I.data)).catch(()=>f([])).finally(()=>h(!1))},[e]);const E=async()=>{try{c(!0);const I=await Z.get("/teleassistance/sessions/pending");if(s(I.data),e){const L=await Z.get("/teleassistance/sessions/assistant/"+e.id);r(L.data)}if((e==null?void 0:e.role)==="ADMIN"){const L=await Z.get("/teleassistance/stats");l(L.data)}}catch(I){console.error("Error loading teleassistance data:",I)}finally{c(!1)}},w=async I=>{try{await Z.post(`/teleassistance/sessions/${I}/start`),E()}catch(L){console.error("Error starting session:",L)}},N=async(I,L)=>{try{await Z.post(`/teleassistance/sessions/${I}/end`,{resolution:L}),E()}catch(F){console.error("Error ending session:",F)}},S=I=>{const L={PENDING:{color:"bg-yellow-100 text-yellow-800",text:"Pendiente"},ACTIVE:{color:"bg-green-100 text-green-800",text:"Activa"},COMPLETED:{color:"bg-blue-100 text-blue-800",text:"Completada"},CANCELLED:{color:"bg-red-100 text-red-800",text:"Cancelada"}},F=L[I]||L.PENDING;return n.createElement("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${F.color}`},F.text)},C=I=>({AUTOFIRMA:"🔐",CERTIFICADO_DIGITAL:"🆔",SEDES:"🏛️",CLAVE_PIN:"📱",NAVEGADOR:"🌐",SISTEMA_OPERATIVO:"💻",OTRO:"❓"})[I]||"❓",D=I=>{if(!I)return"N/A";const L=Math.floor(I/60),F=I%60;return L>0?`${L}h ${F}m`:`${F}m`},k=I=>new Date(I).toLocaleString("es-ES"),O=()=>{if(!x)return null;switch(x){case"teamviewer-quicksupport":return n.createElement(n.Fragment,null,n.createElement("label",null,"ID de TeamViewer",n.createElement("input",{type:"text",required:!0,value:y.teamviewerId||"",onChange:I=>v({...y,teamviewerId:I.target.value})})),n.createElement("label",null,"Contraseña",n.createElement("input",{type:"text",required:!0,value:y.teamviewerPassword||"",onChange:I=>v({...y,teamviewerPassword:I.target.value})})));case"remotely-anywhere":return n.createElement(n.Fragment,null,n.createElement("label",null,"Código de acceso",n.createElement("input",{type:"text",required:!0,value:y.remotelyCode||"",onChange:I=>v({...y,remotelyCode:I.target.value})})));case"anydesk":return n.createElement(n.Fragment,null,n.createElement("label",null,"Código de AnyDesk",n.createElement("input",{type:"text",required:!0,value:y.anydeskCode||"",onChange:I=>v({...y,anydeskCode:I.target.value})})));case"chrome-remote-desktop":return n.createElement(n.Fragment,null,n.createElement("label",null,"Código de acceso",n.createElement("input",{type:"text",required:!0,value:y.chromeCode||"",onChange:I=>v({...y,chromeCode:I.target.value})})));default:return null}};return i?n.createElement("div",{className:"min-h-screen flex items-center justify-center"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})):n.createElement("div",{className:"min-h-screen bg-gray-50 py-8"},n.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"mb-8"},n.createElement("h1",{className:"text-3xl font-bold text-gray-900 mb-2"},"🖥️ Sistema de Teleasistencia"),n.createElement("p",{className:"text-lg text-gray-600"},"Gestiona sesiones de asistencia remota para problemas de administración electrónica")),o&&n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6 mb-8"},n.createElement("div",{className:"bg-white rounded-lg shadow p-6"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"p-2 bg-blue-100 rounded-lg"},n.createElement("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"}))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Total Sesiones"),n.createElement("p",{className:"text-2xl font-bold text-gray-900"},o.totalSessions)))),n.createElement("div",{className:"bg-white rounded-lg shadow p-6"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"p-2 bg-yellow-100 rounded-lg"},n.createElement("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"}))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Pendientes"),n.createElement("p",{className:"text-2xl font-bold text-gray-900"},o.pendingSessions)))),n.createElement("div",{className:"bg-white rounded-lg shadow p-6"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"p-2 bg-green-100 rounded-lg"},n.createElement("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"}))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Activas"),n.createElement("p",{className:"text-2xl font-bold text-gray-900"},o.activeSessions)))),n.createElement("div",{className:"bg-white rounded-lg shadow p-6"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"p-2 bg-blue-100 rounded-lg"},n.createElement("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Completadas"),n.createElement("p",{className:"text-2xl font-bold text-gray-900"},o.completedSessions)))),n.createElement("div",{className:"bg-white rounded-lg shadow p-6"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"p-2 bg-purple-100 rounded-lg"},n.createElement("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"}))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Duración Promedio"),n.createElement("p",{className:"text-2xl font-bold text-gray-900"},D(o.averageDuration)))))),n.createElement("div",{className:"bg-white rounded-lg shadow mb-8"},n.createElement("div",{className:"border-b border-gray-200"},n.createElement("nav",{className:"-mb-px flex space-x-8 px-6"},n.createElement("button",{onClick:()=>u("pending"),className:`py-4 px-1 border-b-2 font-medium text-sm ${d==="pending"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`},"Sesiones Pendientes (",a.length,")"),n.createElement("button",{onClick:()=>u("all"),className:`py-4 px-1 border-b-2 font-medium text-sm ${d==="all"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`},"Mis Sesiones (",t.length,")"),(e==null?void 0:e.role)==="ADMIN"&&n.createElement("button",{onClick:()=>u("stats"),className:`py-4 px-1 border-b-2 font-medium text-sm ${d==="stats"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`},"Estadísticas"))),n.createElement("div",{className:"p-6"},d==="pending"&&n.createElement("div",null,n.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-4"},"Sesiones Pendientes de Asistencia"),a.length===0?n.createElement("div",{className:"text-center py-8"},n.createElement("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})),n.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No hay sesiones pendientes")):n.createElement("div",{className:"space-y-4"},a.map(I=>n.createElement("div",{key:I.id,className:"border border-gray-200 rounded-lg p-4"},n.createElement("div",{className:"flex items-center justify-between"},n.createElement("div",{className:"flex items-center space-x-4"},n.createElement("div",{className:"text-2xl"},C(I.issueType)),n.createElement("div",null,n.createElement("h4",{className:"text-lg font-medium text-gray-900"},I.user.name),n.createElement("p",{className:"text-sm text-gray-500"},I.issueType.replace("_"," ")," - ",I.description),n.createElement("p",{className:"text-xs text-gray-400"},"Creada: ",k(I.createdAt)))),n.createElement("div",{className:"flex items-center space-x-2"},S(I.status),n.createElement("button",{onClick:()=>w(I.id),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors"},"Iniciar Sesión"))))))),d==="all"&&n.createElement("div",null,n.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-4"},"Mis Sesiones de Teleasistencia"),t.length===0?n.createElement("div",{className:"text-center py-8"},n.createElement("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})),n.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No tienes sesiones de teleasistencia")):n.createElement("div",{className:"space-y-4"},t.map(I=>n.createElement("div",{key:I.id,className:"border border-gray-200 rounded-lg p-4"},n.createElement("div",{className:"flex items-center justify-between"},n.createElement("div",{className:"flex items-center space-x-4"},n.createElement("div",{className:"text-2xl"},C(I.issueType)),n.createElement("div",null,n.createElement("h4",{className:"text-lg font-medium text-gray-900"},I.user.name),n.createElement("p",{className:"text-sm text-gray-500"},I.issueType.replace("_"," ")," - ",I.description),n.createElement("p",{className:"text-xs text-gray-400"},I.startedAt&&`Iniciada: ${k(I.startedAt)}`,I.duration&&` | Duración: ${D(I.duration)}`))),n.createElement("div",{className:"flex items-center space-x-2"},S(I.status),I.status==="ACTIVE"&&n.createElement("button",{onClick:()=>N(I.id),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors"},"Finalizar"))))))),d==="stats"&&o&&n.createElement("div",null,n.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-4"},"Estadísticas Detalladas"),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},n.createElement("div",{className:"bg-gray-50 rounded-lg p-4"},n.createElement("h4",{className:"font-medium text-gray-900 mb-2"},"Resumen General"),n.createElement("ul",{className:"space-y-2 text-sm text-gray-600"},n.createElement("li",null,"Total de sesiones: ",o.totalSessions),n.createElement("li",null,"Sesiones pendientes: ",o.pendingSessions),n.createElement("li",null,"Sesiones activas: ",o.activeSessions),n.createElement("li",null,"Sesiones completadas: ",o.completedSessions))),n.createElement("div",{className:"bg-gray-50 rounded-lg p-4"},n.createElement("h4",{className:"font-medium text-gray-900 mb-2"},"Métricas de Tiempo"),n.createElement("ul",{className:"space-y-2 text-sm text-gray-600"},n.createElement("li",null,"Duración promedio: ",D(o.averageDuration)),n.createElement("li",null,"Tasa de resolución: ",o.totalSessions>0?Math.round(o.completedSessions/o.totalSessions*100):0,"%"))))),n.createElement("div",{className:"bg-white rounded-lg shadow p-6 mb-8"},n.createElement("h2",{className:"text-xl font-bold mb-4"},"Conectar con el cliente autenticado"),n.createElement("label",null,"Herramienta de escritorio remoto",n.createElement("select",{required:!0,value:x,onChange:I=>b(I.target.value)},n.createElement("option",{value:""},"Selecciona una herramienta"),m.map(I=>n.createElement("option",{key:I.id,value:I.id},I.name)))),O(),x&&n.createElement("div",{style:{marginTop:24,background:"#f8f8f8",borderRadius:6,padding:16}},n.createElement("h4",null,"Instrucciones para ",(A=m.find(I=>I.id===x))==null?void 0:A.name),n.createElement("ul",null,($=m.find(I=>I.id===x))==null?void 0:$.instructions.map((I,L)=>n.createElement("li",{key:L},I))),n.createElement("a",{href:(P=m.find(I=>I.id===x))==null?void 0:P.downloadUrl,target:"_blank",rel:"noopener noreferrer"},"Descargar / Abrir herramienta")))))))},TK=()=>{var Y,Q;const[e,t]=g.useState([]),[r,a]=g.useState([]),[s,o]=g.useState([]),[l,i]=g.useState(""),[c,d]=g.useState(""),[u,m]=g.useState(""),[f,x]=g.useState(!0),[b,y]=g.useState(null),[v,p]=g.useState(!1),[h,E]=g.useState(null),[w,N]=g.useState([]),[S,C]=g.useState(new Set),[D,k]=g.useState(!1),O=g.useRef(null),A=g.useRef(null),{user:$}=Pe();g.useEffect(()=>{if(!$)return;const j=localStorage.getItem("token"),B=Qs("http://localhost:3000",{auth:{token:j,user:{id:$.id,name:$.name,role:$.role}}});return B.on("connect",()=>{console.log("Conectado al servidor de chat")}),B.on("disconnect",()=>{console.log("Desconectado del servidor de chat")}),B.on("new_message",H=>{t(K=>[...K,H]),a(K=>K.map(fe=>fe.userId===H.senderId?{...fe,lastMessage:H.content,lastMessageTime:H.createdAt}:fe)),c!==H.senderId&&V(H.senderName,H.content)}),B.on("message_sent",H=>{t(K=>[...K,H])}),B.on("user_typing",H=>{H.isTyping?C(K=>new Set(K).add(H.userId)):C(K=>{const fe=new Set(K);return fe.delete(H.userId),fe})}),B.on("user_connected",H=>{N(K=>[...K,H])}),B.on("user_disconnected",H=>{N(K=>K.filter(fe=>fe.userId!==H.userId))}),B.on("message_error",H=>{y(H.error)}),E(B),()=>{B.close()}},[$]),g.useEffect(()=>{(async()=>{try{x(!0);const B=localStorage.getItem("token");if(console.log("Token from localStorage:",B?"Token exists":"No token found"),console.log("User from context:",$),!B||!$){console.error("No token or user found"),y("Usuario no autenticado"),a([]),o([]);return}const[H,K]=await Promise.all([xe.get("/api/users/lawyers",{headers:{Authorization:`Bearer ${B}`}}),xe.get("/api/chat/conversations",{headers:{Authorization:`Bearer ${B}`}})]);console.log("Lawyers response:",H.data),console.log("Lawyers response type:",typeof H.data),console.log("Lawyers response isArray:",Array.isArray(H.data)),console.log("Lawyers response status:",H.status),console.log("Conversations response:",K.data),console.log("Conversations response type:",typeof K.data),console.log("Conversations response isArray:",Array.isArray(K.data)),console.log("Conversations response status:",K.status),console.log("Conversations response headers:",K.headers),o(Array.isArray(H.data)?H.data:[]),a(Array.isArray(K.data)?K.data:[]),y(null)}catch(B){console.error("Error fetching data:",B),y("Error al cargar los datos"),a([]),o([])}finally{x(!1)}})()},[]),g.useEffect(()=>{c&&P(c)},[c]),g.useEffect(()=>{I()},[e]);const P=async j=>{try{const B=localStorage.getItem("token"),H=await xe.get(`/api/chat/messages/${j}`,{headers:{Authorization:`Bearer ${B}`}});t(H.data)}catch(B){console.error("Error fetching messages:",B),y("Error al cargar los mensajes")}},I=()=>{var j;(j=O.current)==null||j.scrollIntoView({behavior:"smooth"})},L=async j=>{if(j.preventDefault(),!(!u.trim()||!c||!h))try{p(!0),h.emit("send_message",{receiverId:c,content:u}),m(""),h.emit("typing_stop",{receiverId:c}),k(!1)}catch(B){console.error("Error sending message:",B),y("Error al enviar el mensaje")}finally{p(!1)}},F=j=>{i(j),d(j),t([])},T=j=>{d(j)},M=j=>{m(j.target.value),!(!h||!c)&&(D||(k(!0),h.emit("typing_start",{receiverId:c})),A.current&&clearTimeout(A.current),A.current=setTimeout(()=>{k(!1),h.emit("typing_stop",{receiverId:c})},1e3))},V=(j,B)=>{"Notification"in window&&Notification.permission==="granted"&&new Notification(`Nuevo mensaje de ${j}`,{body:B,icon:"/favicon.ico"})},X=j=>{const B=new Date(j),K=(new Date().getTime()-B.getTime())/(1e3*60*60);return K<24?B.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):K<48?"Ayer":B.toLocaleDateString()},z=j=>w.some(B=>B.userId===j),U=j=>j.charAt(0).toUpperCase();return f?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})):n.createElement("div",{className:"py-6"},n.createElement("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"bg-white rounded-lg shadow"},n.createElement("div",{className:"p-4 border-b"},n.createElement("h1",{className:"text-xl font-semibold"},"Chat con Abogado"),n.createElement("p",{className:"text-sm text-gray-600"},"Comunicación directa con tu abogado")),n.createElement("div",{className:"flex h-96"},n.createElement("div",{className:"w-1/3 border-r bg-gray-50"},n.createElement("div",{className:"p-4 border-b"},n.createElement("h2",{className:"font-medium text-gray-900 mb-3"},"Conversaciones"),!Array.isArray(r)||r.length===0?n.createElement("p",{className:"text-sm text-gray-500"},"No hay conversaciones activas"):n.createElement("div",{className:"space-y-2"},r.map(j=>n.createElement("div",{key:j.userId,onClick:()=>T(j.userId),className:`p-3 rounded-lg cursor-pointer transition-colors ${c===j.userId?"bg-blue-100 border-blue-300":"bg-white hover:bg-gray-100"}`},n.createElement("div",{className:"flex items-center space-x-3"},n.createElement("div",{className:"relative"},n.createElement("div",{className:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center"},n.createElement("span",{className:"text-white text-sm font-medium"},U(j.userName))),z(j.userId)&&n.createElement("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})),n.createElement("div",{className:"flex-1 min-w-0"},n.createElement("div",{className:"flex justify-between items-start"},n.createElement("p",{className:"text-sm font-medium text-gray-900 truncate"},j.userName),n.createElement("div",{className:"text-xs text-gray-400"},X(j.lastMessageTime))),n.createElement("p",{className:"text-xs text-gray-500 truncate"},j.lastMessage),j.unreadCount>0&&n.createElement("div",{className:"mt-1"},n.createElement("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800"},j.unreadCount)))))))),n.createElement("div",{className:"p-4 border-t"},n.createElement("h3",{className:"font-medium text-gray-900 mb-3"},"Nueva conversación"),n.createElement("select",{value:l,onChange:j=>F(j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Seleccionar abogado para nueva conversación"},n.createElement("option",{value:""},"Selecciona un abogado"),s.map(j=>n.createElement("option",{key:j.id,value:j.id},j.name," (",j.email,")"))))),n.createElement("div",{className:"flex-1 flex flex-col"},c?n.createElement(n.Fragment,null,n.createElement("div",{className:"p-4 border-b bg-gray-50"},n.createElement("div",{className:"flex items-center justify-between"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"relative"},n.createElement("div",{className:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center"},n.createElement("span",{className:"text-white text-sm font-medium"},U(Array.isArray(r)&&((Y=r.find(j=>j.userId===c))==null?void 0:Y.userName)||"A"))),z(c)&&n.createElement("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})),n.createElement("div",{className:"ml-3"},n.createElement("p",{className:"font-medium text-gray-900"},Array.isArray(r)&&((Q=r.find(j=>j.userId===c))==null?void 0:Q.userName)||"Abogado"),n.createElement("p",{className:"text-sm text-gray-500"},z(c)?"En línea":"Desconectado"))))),n.createElement("div",{className:"flex-1 overflow-y-auto p-4 space-y-4"},e.length===0?n.createElement("div",{className:"text-center text-gray-500 mt-8"},n.createElement("p",null,"No hay mensajes aún. ¡Inicia la conversación!")):e.map(j=>n.createElement("div",{key:j.id,className:`flex ${j.isOwnMessage?"justify-end":"justify-start"}`},n.createElement("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${j.isOwnMessage?"bg-blue-600 text-white":"bg-gray-200 text-gray-900"}`},n.createElement("div",{className:"text-sm"},j.content),n.createElement("div",{className:`text-xs mt-1 ${j.isOwnMessage?"text-blue-100":"text-gray-500"}`},X(j.createdAt))))),S.has(c)&&n.createElement("div",{className:"flex justify-start"},n.createElement("div",{className:"bg-gray-200 text-gray-900 px-4 py-2 rounded-lg"},n.createElement("div",{className:"text-sm"},"Escribiendo..."))),n.createElement("div",{ref:O})),n.createElement("form",{onSubmit:L,className:"p-4 border-t"},n.createElement("div",{className:"flex space-x-2"},n.createElement("input",{type:"text",value:u,onChange:M,placeholder:"Escribe tu mensaje...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:v}),n.createElement("button",{type:"submit",disabled:!u.trim()||v,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"},v?"Enviando...":"Enviar")))):n.createElement("div",{className:"flex-1 flex items-center justify-center"},n.createElement("div",{className:"text-center text-gray-500"},n.createElement("svg",{className:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})),n.createElement("p",{className:"text-lg font-medium"},"Selecciona una conversación"),n.createElement("p",{className:"text-sm"},"O inicia una nueva conversación con un abogado"))))),b&&n.createElement("div",{className:"p-4 bg-red-50 border-t border-red-200"},n.createElement("div",{className:"text-red-600 text-sm"},b)))))},_K=()=>{var Y,Q;const[e,t]=g.useState([]),[r,a]=g.useState([]),[s,o]=g.useState([]),[l,i]=g.useState(""),[c,d]=g.useState(""),[u,m]=g.useState(""),[f,x]=g.useState(!0),[b,y]=g.useState(null),[v,p]=g.useState(!1),[h,E]=g.useState(null),[w,N]=g.useState([]),[S,C]=g.useState(new Set),[D,k]=g.useState(!1),O=g.useRef(null),A=g.useRef(null),{user:$}=Pe();g.useEffect(()=>{if(!$)return;const j=localStorage.getItem("token"),B=Qs("http://localhost:3000",{auth:{token:j,user:{id:$.id,name:$.name,role:$.role}}});return B.on("connect",()=>{console.log("Conectado al servidor de chat")}),B.on("disconnect",()=>{console.log("Desconectado del servidor de chat")}),B.on("new_message",H=>{t(K=>[...K,H]),a(K=>K.map(fe=>fe.userId===H.senderId?{...fe,lastMessage:H.content,lastMessageTime:H.createdAt}:fe)),c!==H.senderId&&V(H.senderName,H.content)}),B.on("message_sent",H=>{t(K=>[...K,H])}),B.on("user_typing",H=>{H.isTyping?C(K=>new Set(K).add(H.userId)):C(K=>{const fe=new Set(K);return fe.delete(H.userId),fe})}),B.on("user_connected",H=>{N(K=>[...K,H])}),B.on("user_disconnected",H=>{N(K=>K.filter(fe=>fe.userId!==H.userId))}),B.on("message_error",H=>{y(H.error)}),E(B),()=>{B.close()}},[$]),g.useEffect(()=>{(async()=>{try{x(!0);const B=localStorage.getItem("token"),[H,K]=await Promise.all([Z.get("/users/clients",{headers:{Authorization:`Bearer ${B}`}}),Z.get("/chat/conversations",{headers:{Authorization:`Bearer ${B}`}})]);o(H.data),a(K.data),y(null)}catch(B){console.error("Error fetching data:",B),y("Error al cargar los datos")}finally{x(!1)}})()},[]),g.useEffect(()=>{c&&P(c)},[c]),g.useEffect(()=>{I()},[e]);const P=async j=>{try{const B=localStorage.getItem("token"),H=await Z.get(`/chat/messages/${j}`,{headers:{Authorization:`Bearer ${B}`}});t(H.data)}catch(B){console.error("Error fetching messages:",B),y("Error al cargar los mensajes")}},I=()=>{var j;(j=O.current)==null||j.scrollIntoView({behavior:"smooth"})},L=async j=>{if(j.preventDefault(),!(!u.trim()||!c||!h))try{p(!0),h.emit("send_message",{receiverId:c,content:u}),m(""),h.emit("typing_stop",{receiverId:c}),k(!1)}catch(B){console.error("Error sending message:",B),y("Error al enviar el mensaje")}finally{p(!1)}},F=j=>{i(j),d(j),t([])},T=j=>{d(j)},M=j=>{m(j.target.value),!(!h||!c)&&(D||(k(!0),h.emit("typing_start",{receiverId:c})),A.current&&clearTimeout(A.current),A.current=setTimeout(()=>{k(!1),h.emit("typing_stop",{receiverId:c})},1e3))},V=(j,B)=>{"Notification"in window&&Notification.permission==="granted"&&new Notification(`Nuevo mensaje de ${j}`,{body:B,icon:"/favicon.ico"})},X=j=>{const B=new Date(j),K=(new Date().getTime()-B.getTime())/(1e3*60*60);return K<24?B.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):K<48?"Ayer":B.toLocaleDateString()},z=j=>w.some(B=>B.userId===j),U=j=>j.charAt(0).toUpperCase();return f?n.createElement("div",{className:"flex items-center justify-center min-h-screen"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})):n.createElement("div",{className:"py-6"},n.createElement("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"bg-white rounded-lg shadow"},n.createElement("div",{className:"p-4 border-b"},n.createElement("h1",{className:"text-xl font-semibold"},"Chat con Clientes"),n.createElement("p",{className:"text-sm text-gray-600"},"Comunicación directa con tus clientes")),n.createElement("div",{className:"flex h-96"},n.createElement("div",{className:"w-1/3 border-r bg-gray-50"},n.createElement("div",{className:"p-4 border-b"},n.createElement("h2",{className:"font-medium text-gray-900 mb-3"},"Conversaciones"),r.length===0?n.createElement("p",{className:"text-sm text-gray-500"},"No hay conversaciones activas"):n.createElement("div",{className:"space-y-2"},r.map(j=>n.createElement("div",{key:j.userId,onClick:()=>T(j.userId),className:`p-3 rounded-lg cursor-pointer transition-colors ${c===j.userId?"bg-blue-100 border-blue-300":"bg-white hover:bg-gray-100"}`},n.createElement("div",{className:"flex items-center space-x-3"},n.createElement("div",{className:"relative"},n.createElement("div",{className:"w-10 h-10 bg-green-600 rounded-full flex items-center justify-center"},n.createElement("span",{className:"text-white text-sm font-medium"},U(j.userName))),z(j.userId)&&n.createElement("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})),n.createElement("div",{className:"flex-1 min-w-0"},n.createElement("div",{className:"flex justify-between items-start"},n.createElement("p",{className:"text-sm font-medium text-gray-900 truncate"},j.userName),n.createElement("div",{className:"text-xs text-gray-400"},X(j.lastMessageTime))),n.createElement("p",{className:"text-xs text-gray-500 truncate"},j.lastMessage),j.unreadCount>0&&n.createElement("div",{className:"mt-1"},n.createElement("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800"},j.unreadCount)))))))),n.createElement("div",{className:"p-4 border-t"},n.createElement("h3",{className:"font-medium text-gray-900 mb-3"},"Nueva conversación"),n.createElement("select",{value:l,onChange:j=>F(j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Seleccionar cliente para nueva conversación"},n.createElement("option",{value:""},"Selecciona un cliente"),s.map(j=>n.createElement("option",{key:j.id,value:j.user.id},j.user.name," (",j.user.email,")"))))),n.createElement("div",{className:"flex-1 flex flex-col"},c?n.createElement(n.Fragment,null,n.createElement("div",{className:"p-4 border-b bg-gray-50"},n.createElement("div",{className:"flex items-center justify-between"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"relative"},n.createElement("div",{className:"w-10 h-10 bg-green-600 rounded-full flex items-center justify-center"},n.createElement("span",{className:"text-white text-sm font-medium"},U(((Y=r.find(j=>j.userId===c))==null?void 0:Y.userName)||"C"))),z(c)&&n.createElement("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})),n.createElement("div",{className:"ml-3"},n.createElement("p",{className:"font-medium text-gray-900"},((Q=r.find(j=>j.userId===c))==null?void 0:Q.userName)||"Cliente"),n.createElement("p",{className:"text-sm text-gray-500"},z(c)?"En línea":"Desconectado"))))),n.createElement("div",{className:"flex-1 overflow-y-auto p-4 space-y-4"},e.length===0?n.createElement("div",{className:"text-center text-gray-500 mt-8"},n.createElement("p",null,"No hay mensajes aún. ¡Inicia la conversación!")):e.map(j=>n.createElement("div",{key:j.id,className:`flex ${j.isOwnMessage?"justify-end":"justify-start"}`},n.createElement("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${j.isOwnMessage?"bg-blue-600 text-white":"bg-gray-200 text-gray-900"}`},n.createElement("div",{className:"text-sm"},j.content),n.createElement("div",{className:`text-xs mt-1 ${j.isOwnMessage?"text-blue-100":"text-gray-500"}`},X(j.createdAt))))),S.has(c)&&n.createElement("div",{className:"flex justify-start"},n.createElement("div",{className:"bg-gray-200 text-gray-900 px-4 py-2 rounded-lg"},n.createElement("div",{className:"text-sm"},"Escribiendo..."))),n.createElement("div",{ref:O})),n.createElement("form",{onSubmit:L,className:"p-4 border-t"},n.createElement("div",{className:"flex space-x-2"},n.createElement("input",{type:"text",value:u,onChange:M,placeholder:"Escribe tu mensaje...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:v}),n.createElement("button",{type:"submit",disabled:!u.trim()||v,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"},v?"Enviando...":"Enviar")))):n.createElement("div",{className:"flex-1 flex items-center justify-center"},n.createElement("div",{className:"text-center text-gray-500"},n.createElement("svg",{className:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})),n.createElement("p",{className:"text-lg font-medium"},"Selecciona una conversación"),n.createElement("p",{className:"text-sm"},"O inicia una nueva conversación con un cliente"))))),b&&n.createElement("div",{className:"p-4 bg-red-50 border-t border-red-200"},n.createElement("div",{className:"text-red-600 text-sm"},b)))))};async function OK(e){return(await Z.get("/invoices",{headers:{Authorization:`Bearer ${e}`}})).data}async function RK(e,t){return(await Z.post("/invoices",e,{headers:{Authorization:`Bearer ${t}`}})).data}async function MK(e,t,r){return(await Z.put(`/invoices/${e}`,t,{headers:{Authorization:`Bearer ${r}`}})).data}async function PK(e,t){return(await Z.delete(`/invoices/${e}`,{headers:{Authorization:`Bearer ${t}`}})).data}async function LK(e){return(await Z.get("/users/clients",{headers:{Authorization:`Bearer ${e}`}})).data}const IK=async(e,t)=>(await Z.post("/provision-fondos",e,{headers:{Authorization:`Bearer ${t}`}})).data,$K=async(e,t,r)=>(await Z.patch("/provision-fondos/link-to-invoice",{provisionId:e,invoiceId:t},{headers:{Authorization:`Bearer ${r}`}})).data,FK=async e=>(await Z.get("/provision-fondos",{params:{soloPendientes:!0},headers:{Authorization:`Bearer ${e}`}})).data,jK=async(e,t,r)=>(await Z.get("/provision-fondos",{params:{clientId:e,expedienteId:t,soloPendientes:!0},headers:{Authorization:`Bearer ${r}`}})).data,BK=async(e,t)=>(await Z.get("/provision-fondos",{params:{clientId:e},headers:{Authorization:`Bearer ${t}`}})).data,qE={numeroFactura:"",fechaFactura:"",tipoFactura:"F",receptorId:"",importeTotal:0,baseImponible:0,cuotaIVA:0,tipoIVA:21,regimenIvaEmisor:"General",claveOperacion:"01",metodoPago:"TRANSFERENCIA",fechaOperacion:"",items:[{description:"",quantity:1,unitPrice:0,total:0}],aplicarIVA:!0,retencion:"",descuento:""},zK=()=>{const{user:e}=Pe(),t=localStorage.getItem("token"),[r,a]=g.useState([]),[s,o]=g.useState(!0),[l,i]=g.useState(null),[c,d]=g.useState(!1),[u,m]=g.useState(qE),[f,x]=g.useState(null),[b,y]=g.useState(""),[v,p]=g.useState(""),[h,E]=g.useState([]),[w,N]=g.useState(null),[S,C]=g.useState(null),[D,k]=g.useState(!1),[O,A]=g.useState(null),[$,P]=g.useState(null),[I,L]=g.useState([]),[F,T]=g.useState(""),[M,V]=g.useState(null),[X,z]=g.useState([]),[U,Y]=g.useState([]),[Q,j]=g.useState([]),[B,H]=g.useState([]),[K,fe]=g.useState(null),[W,pe]=g.useState(null),[se,be]=g.useState(!1),$e=g.useRef(null),qe=g.useRef(null),J=g.useRef(null),le=g.useRef([]),[Se,Ce]=g.useState({}),ke=h.find(_=>_.user.id===u.receptorId),Re=ke==null?void 0:ke.id,[He,Tt]=g.useState(""),[Jt,Qr]=g.useState(""),ir=_=>_?new Date(_).toISOString().split("T")[0]:void 0;g.useEffect(()=>{ne(),Ee()},[]),g.useEffect(()=>{(async()=>{if(u.receptorId&&u.expedienteId)try{const G=localStorage.getItem("token");if(!G)throw new Error("No token found");const ie=await FK(G);console.log("Provisiones recibidas:",ie),console.log("Buscando clientProfileId:",Re,"expedienteId:",u.expedienteId);const ee=ie.filter(ce=>ce.clientId===Re&&ce.expedienteId===u.expedienteId&&(!ce.invoiceId||ce.invoiceId===u.id));console.log("Provisiones filtradas:",ee),ee.length>0?(V(ee[0]),Y(ee)):(V(null),Y([]))}catch{V(null),Y([])}else V(null),Y([])})()},[u.receptorId,u.expedienteId,Re,u.id]),g.useEffect(()=>{(async()=>{if(u.receptorId&&u.expedienteId&&Re)try{const G=localStorage.getItem("token"),ie=await jK(Re??"",u.expedienteId??"",G??"");if(u.id){const ee=u.provisionFondos||[],he=[...ie,...ee].filter((Te,je,Be)=>je===Be.findIndex(Pt=>Pt.id===Te.id));j(he)}else j(ie)}catch{j([])}else j([])})()},[u.receptorId,u.expedienteId,Re,u.id]);const ne=async()=>{o(!0);try{if(!t)throw new Error("No token available");const _={};He&&(_.clientId=He),Jt&&(_.paymentDate=Jt);const G=await Z.get("/invoices",{headers:{Authorization:`Bearer ${t}`},params:_});a(G.data)}catch{i("Error al cargar las facturas")}finally{o(!1)}},Ee=async()=>{try{if(!t)throw new Error("No token available");const _=await LK(t);E(_)}catch{E([])}},we=()=>{m(qE),H([]),Y([]),V(null),d(!0)},Ne=_=>{const{name:G,value:ie}=_.target;m(ee=>({...ee,[G]:ie})),Se[G]&&Ce(ee=>({...ee,[G]:!1}))},R=async _=>{Ne(_);const G=_.target.value;if(m(ie=>({...ie,expedienteId:""})),G)try{const ie=localStorage.getItem("token"),ce=(await Z.get("/cases",{headers:{Authorization:`Bearer ${ie}`}})).data.filter(he=>{var Te,je;return((je=(Te=he.client)==null?void 0:Te.user)==null?void 0:je.id)===G||he.clientId===G});z(ce)}catch{z([])}else z([])},ue=(_,G,ie)=>{var ee,ce;m(he=>{const Te=[...he.items];return Te[_][G]=ie,Te[_].total=Te[_].quantity*Te[_].unitPrice,{...he,items:Te}}),(ce=(ee=Se.items)==null?void 0:ee[_])!=null&&ce[G]&&Ce(he=>{var Te;return{...he,items:{...he.items,[_]:{...(Te=he.items)==null?void 0:Te[_],[G]:!1}}}})},Me=()=>{m(_=>({..._,items:[..._.items,{description:"",quantity:1,unitPrice:0,total:0}]}))},ye=async _=>{if(_.preventDefault(),N(null),C(null),k(!0),!u.receptorId||!u.fechaOperacion||!u.items.length){N("Completa todos los campos obligatorios."),k(!1);return}if(u.items.some(G=>!G.description||G.quantity<=0||G.unitPrice===void 0)){N("Todos los conceptos deben tener descripción, cantidad y precio válidos."),k(!1);return}try{const{emisorId:G,fechaFactura:ie,importeTotal:ee,baseImponible:ce,cuotaIVA:he,...Te}=u,je={...Te,descuento:u.descuento===""||u.descuento==null?0:Number(u.descuento),retencion:u.retencion===""||u.retencion==null?0:Number(u.retencion),tipoIVA:u.tipoIVA===""||u.tipoIVA==null?21:Number(u.tipoIVA),estado:u.estado||"emitida",provisionIds:B,fechaOperacion:ir(u.fechaOperacion),paymentDate:u.paymentDate?ir(u.paymentDate):void 0};console.log("FRONTEND - provisionesSeleccionadas:",B),console.log("FRONTEND - facturaData a enviar:",je),await RK(je,t??""),C("✅ Factura creada correctamente."),d(!1),ne(),setTimeout(()=>C(null),5e3)}catch(G){console.error("Error al crear factura:",G),N("❌ Error al crear la factura. Verifica los datos e intenta de nuevo.")}finally{k(!1)}},Qe=async _=>{if(_.preventDefault(),N(null),C(null),Ce({}),k(!0),!u.receptorId){N("Debes seleccionar un cliente."),Ce({cliente:!0}),k(!1),setTimeout(()=>{var G;return(G=$e.current)==null?void 0:G.focus()},100);return}if(!u.expedienteId){N("Debes seleccionar un expediente."),Ce({expediente:!0}),k(!1),setTimeout(()=>{var G;return(G=qe.current)==null?void 0:G.focus()},100);return}if(!u.fechaOperacion){N("Debes indicar la fecha de operación."),Ce({fechaOperacion:!0}),k(!1),setTimeout(()=>{var G;return(G=J.current)==null?void 0:G.focus()},100);return}if(!u.items.length){N("Debes añadir al menos un concepto."),k(!1);return}for(let G=0;G<u.items.length;G++){const ie=u.items[G];if(!ie.description){N("Todos los conceptos deben tener descripción."),Ce({items:{[G]:{description:!0}}}),k(!1),setTimeout(()=>{var ee,ce;return(ce=(ee=le.current[G])==null?void 0:ee.description)==null?void 0:ce.focus()},100);return}if(!ie.quantity||ie.quantity<=0){N("Todos los conceptos deben tener cantidad válida."),Ce({items:{[G]:{quantity:!0}}}),k(!1),setTimeout(()=>{var ee,ce;return(ce=(ee=le.current[G])==null?void 0:ee.quantity)==null?void 0:ce.focus()},100);return}if(ie.unitPrice===void 0||ie.unitPrice===null){N("Todos los conceptos deben tener precio unitario."),Ce({items:{[G]:{unitPrice:!0}}}),k(!1),setTimeout(()=>{var ee,ce;return(ce=(ee=le.current[G])==null?void 0:ee.unitPrice)==null?void 0:ce.focus()},100);return}}try{const{id:G,emisorId:ie,fechaFactura:ee,importeTotal:ce,baseImponible:he,cuotaIVA:Te,xml:je,xmlFirmado:Be,selloTiempo:Pt,createdAt:Lt,updatedAt:_e,emisor:It,receptor:vn,expediente:Fn,provisionFondos:em,numeroFactura:tm,tipoFactura:rm,qrData:Jr,...Zr}=u,dS=Zr.items.map(mS=>{const{id:ZK,invoiceId:eX,total:tX,...fS}=mS;return fS}),g0={receptorId:Zr.receptorId,expedienteId:Zr.expedienteId,fechaOperacion:ir(u.fechaOperacion),metodoPago:Zr.metodoPago,regimenIvaEmisor:Zr.regimenIvaEmisor,claveOperacion:Zr.claveOperacion,tipoIVA:u.tipoIVA===""||u.tipoIVA==null?21:Number(u.tipoIVA),aplicarIVA:Zr.aplicarIVA!==!1,descuento:u.descuento===""||u.descuento==null?0:Number(u.descuento),retencion:u.retencion===""||u.retencion==null?0:Number(u.retencion),items:dS,provisionIds:B,estado:u.estado||"emitida",motivoAnulacion:Zr.motivoAnulacion||null,paymentDate:u.paymentDate?ir(u.paymentDate):void 0};console.log("Datos a enviar al backend:",g0),await MK(u.id,g0,t??""),C("✅ Factura actualizada correctamente."),N(null),ne(),setTimeout(()=>{C(null),d(!1)},3e3)}catch(G){if(console.error("Error al actualizar factura:",G),C(null),G.response&&G.response.data&&G.response.data.message){const ie=Array.isArray(G.response.data.message)?G.response.data.message:[G.response.data.message];let ee=`❌ Error al actualizar la factura:

`,ce=[];ie.forEach(he=>{he.includes("numeroFactura should not exist")?(ee+=`• No puedes editar el número de factura
`,ce.push("El número de factura se asigna automáticamente")):he.includes("tipoFactura should not exist")?(ee+=`• No puedes editar el tipo de factura
`,ce.push("El tipo de factura no se puede modificar después de la creación")):he.includes("qrData should not exist")?(ee+=`• El código QR se genera automáticamente
`,ce.push("El código QR se calcula automáticamente")):he.includes("total should not exist")?(ee+=`• Los totales de los conceptos se calculan automáticamente
`,ce.push("No edites manualmente los totales de los conceptos")):ee+=`• ${he}
`}),ce.length>0&&(ee+=`
💡 Sugerencias:
`,ce.forEach(he=>{ee+=`• ${he}
`})),N(ee)}else N("❌ Error al actualizar la factura. Verifica los datos e intenta de nuevo.");if(G.response&&G.response.data&&G.response.data.message){const ie=Array.isArray(G.response.data.message)?G.response.data.message:[G.response.data.message];ie.some(ee=>ee.includes("fechaOperacion"))?(Ce({fechaOperacion:!0}),setTimeout(()=>{var ee;return(ee=J.current)==null?void 0:ee.focus()},100)):ie.some(ee=>ee.includes("receptorId"))?(Ce({cliente:!0}),setTimeout(()=>{var ee;return(ee=$e.current)==null?void 0:ee.focus()},100)):ie.some(ee=>ee.includes("expedienteId"))&&(Ce({expediente:!0}),setTimeout(()=>{var ee;return(ee=qe.current)==null?void 0:ee.focus()},100))}}finally{k(!1)}},Ge=()=>n.createElement("div",{className:"mb-6 p-4 bg-blue-50 border-l-4 border-blue-400 rounded"},n.createElement("h2",{className:"font-bold mb-2 text-blue-800"},"¿Cómo funciona la firma electrónica de facturas?"),n.createElement("ol",{className:"list-decimal pl-6 mb-2 text-sm text-blue-900"},n.createElement("li",null,"Selecciona una o varias facturas pendientes de firma en la tabla."),n.createElement("li",null,"Pulsa ",n.createElement("b",null,'"Firmar electrónicamente"')," para iniciar el proceso."),n.createElement("li",null,"El sistema generará el XML Facturae y lo enviará a ",n.createElement("b",null,"Autofirma")," (debes tenerlo instalado y abierto)."),n.createElement("li",null,"Autofirma te pedirá seleccionar tu certificado y firmará el XML localmente, sin exponer tu clave privada."),n.createElement("li",null,"El XML firmado se subirá automáticamente y la factura quedará firmada digitalmente.")),n.createElement("div",{className:"text-xs text-blue-700"},n.createElement("b",null,"Seguridad:")," Tu clave privada ",n.createElement("b",null,"nunca se almacena")," en el sistema. Si subes archivos PEM, solo se usan en memoria para la firma y se descartan después.",n.createElement("br",null),n.createElement("b",null,"¿Qué es Autofirma?")," Es una aplicación oficial del Gobierno de España para firmar documentos electrónicos con tu certificado digital.",n.createElement("br",null),n.createElement("b",null,"¿Problemas?")," Si no tienes Autofirma, puedes descargarlo en ",n.createElement("a",{href:"https://firmaelectronica.gob.es/Home/Descargas.html",target:"_blank",rel:"noopener noreferrer",className:"underline text-blue-600"},"firmaelectronica.gob.es"),".")),ut=_=>{L(G=>G.includes(_)?G.filter(ie=>ie!==_):[...G,_])},Zt=()=>{const _=document.createElement("a");_.href="afirma://service?op=launch",_.style.display="none",document.body.appendChild(_),_.click(),document.body.removeChild(_)},zo=async()=>{Zt(),T("Generando XML de las facturas seleccionadas...");try{const _=await fetch("/api/invoices/generate-xml",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({ids:I})});if(!_.ok)throw new Error("Error generando XML");const G=await _.json();for(const{id:ie,xml:ee}of G){T(`Firmando factura ${ie} con Autofirma...`);const ce=await fetch("http://127.0.0.1:8080/afirma-signature-http",{method:"POST",body:new Blob([ee],{type:"text/xml"}),headers:{"Content-Type":"application/xml"}});if(!ce.ok)throw new Error("Error en Autofirma");const he=await ce.text();if(T(`Subiendo XML firmado de la factura ${ie}...`),!(await fetch("/api/invoices/upload-signed",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({id:ie,signedXml:he})})).ok)throw new Error("Error subiendo XML firmado")}T("¡Facturas firmadas correctamente!"),L([]),ne(),C("🔐 Facturas firmadas electrónicamente correctamente."),setTimeout(()=>C(null),5e3)}catch(_){T("Error en el proceso de firma: "+(_.message||_)),i("❌ Error en el proceso de firma: "+(_.message||_)),setTimeout(()=>i(null),5e3)}},Jd=_=>{pe(_),be(!0)},Zd=async _=>{console.log("EDITANDO FACTURA:",_),console.log("PROVISIONES DE LA FACTURA:",_.provisionFondos);const G={..._,items:_.items||[],aplicarIVA:_.aplicarIVA!==!1,retencion:_.retencion??"",descuento:_.descuento??"",fechaOperacion:_.fechaOperacion?_.fechaOperacion.slice(0,10):""};if(m(G),d(!0),_.receptorId)try{const ie=localStorage.getItem("token"),ce=(await Z.get("/cases",{headers:{Authorization:`Bearer ${ie}`}})).data.filter(he=>{var Te,je;return((je=(Te=he.client)==null?void 0:Te.user)==null?void 0:je.id)===_.receptorId||he.clientId===_.receptorId});z(ce)}catch{z([])}if(_.provisionFondos&&_.provisionFondos.length>0){console.log("PROVISIONES ENCONTRADAS:",_.provisionFondos);const ie=_.provisionFondos.map(ee=>ee.id);console.log("PROVISION IDs:",ie),H(ie),Y(_.provisionFondos),V(_.provisionFondos[0])}else console.log("NO HAY PROVISIONES EN LA FACTURA"),H([]),Y([]),V(null)},_t=async _=>{var G,ie;if(window.confirm("¿Estás seguro de que quieres eliminar esta factura? Esta acción no se puede deshacer.")){fe(_);try{await PK(_,t??""),await ne(),C("🗑️ Factura eliminada correctamente."),setTimeout(()=>C(null),5e3)}catch(ee){console.error("Error al eliminar factura:",ee);const ce=((ie=(G=ee==null?void 0:ee.response)==null?void 0:G.data)==null?void 0:ie.message)||(ee==null?void 0:ee.message)||"Error al eliminar la factura.";i(`❌ Error al eliminar la factura: ${ce}`),setTimeout(()=>i(null),5e3)}finally{fe(null)}}},er=_=>{var ee,ce,he,Te,je;const G={"Información General":{ID:_.id,"Número de Factura":_.numeroFactura,Tipo:_.tipoFactura,Estado:_.estado,"Fecha de Creación":new Date(_.createdAt).toLocaleString("es-ES"),"Última Actualización":new Date(_.updatedAt).toLocaleString("es-ES")},Fechas:{"Fecha de Factura":new Date(_.fechaFactura).toLocaleDateString("es-ES"),"Fecha de Operación":new Date(_.fechaOperacion).toLocaleDateString("es-ES"),"Sello de Tiempo":_.selloTiempo?new Date(_.selloTiempo).toLocaleString("es-ES"):"No aplicado"},"Datos Fiscales":{"Base Imponible":`${(ee=_.baseImponible)==null?void 0:ee.toFixed(2)} €`,"Cuota IVA":`${(ce=_.cuotaIVA)==null?void 0:ce.toFixed(2)} €`,"Tipo IVA":`${_.tipoIVA}%`,"Importe Total":`${(he=_.importeTotal)==null?void 0:he.toFixed(2)} €`,"Régimen IVA Emisor":_.regimenIvaEmisor,"Clave de Operación":_.claveOperacion,"Método de Pago":_.metodoPago},Relaciones:{"Emisor ID":_.emisorId,"Receptor ID":_.receptorId,"Expediente ID":_.expedienteId||"No asociado","Número de Items":((Te=_.items)==null?void 0:Te.length)||0,"Provisiones Asociadas":((je=_.provisionFondos)==null?void 0:je.length)||0},XML:{"XML Generado":_.xml?"Sí":"No","XML Firmado":_.xmlFirmado?"Sí":"No","Tamaño XML":_.xml?`${Math.round(_.xml.length/1024)} KB`:"N/A","Tamaño XML Firmado":_.xmlFirmado?`${Math.round(_.xmlFirmado.length/1024)} KB`:"N/A"},Anulación:_.motivoAnulacion?{"Motivo de Anulación":_.motivoAnulacion}:"No anulada"},ie=Object.entries(G).map(([Be,Pt])=>typeof Pt=="string"?`${Be}: ${Pt}`:`${Be}:
${Object.entries(Pt).map(([Lt,_e])=>`  ${Lt}: ${_e}`).join(`
`)}`).join(`

`);alert(`METADATOS DE LA FACTURA

${ie}`)},tr=({invoice:_})=>{var he,Te,je,Be,Pt,Lt;console.log("Invoice data for view:",{descuento:_.descuento,baseImponible:_.baseImponible,cuotaIVA:_.cuotaIVA,importeTotal:_.importeTotal});const G=()=>{var It,vn,Fn,em,tm,rm;const _e=window.open("","_blank");_e&&(_e.document.write(`
          <!DOCTYPE html>
          <html>
            <head>
              <title>Factura ${_.numeroFactura}</title>
              <style>
                body { font-family: Arial, sans-serif; margin: 0; padding: 20px; }
                .invoice-container { max-width: 800px; margin: 0 auto; }
                table { width: 100%; border-collapse: collapse; margin: 20px 0; }
                th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
                th { background-color: #f2f2f2; }
                .totals { text-align: right; margin-top: 20px; }
                .totals div { margin: 5px 0; }
                .header { border-bottom: 2px solid #333; padding-bottom: 20px; margin-bottom: 20px; }
                .section { margin: 20px 0; }
                .section h3 { color: #333; margin-bottom: 10px; }
                .discount { background-color: #fff3cd; padding: 10px; border: 1px solid #ffeaa7; margin: 10px 0; }
                .provisions { background-color: #d1ecf1; padding: 10px; border: 1px solid #bee5eb; margin: 10px 0; }
                @media print {
                  body { margin: 0; }
                  .no-print { display: none; }
                }
              </style>
            </head>
            <body>
              <div class="invoice-container">
                <div class="header">
                  <h1>FACTURA</h1>
                  <div><strong>Número:</strong> ${_.numeroFactura}</div>
                  <div><strong>Fecha:</strong> ${ee(_.fechaFactura)}</div>
                  <div><strong>Tipo:</strong> ${_.tipoFactura==="F"?"Completa":"Rectificativa"}</div>
                  <div><strong>Estado:</strong> ${_.estado.toUpperCase()}</div>
                  <div><strong>Fecha de operación:</strong> ${ee(_.fechaOperacion)}</div>
                </div>
                
                <div class="section">
                  <h3>DATOS DEL EMISOR</h3>
                  <div><strong>Nombre:</strong> ${((It=_.emisor)==null?void 0:It.name)||"N/A"}</div>
                  <div><strong>Email:</strong> ${((vn=_.emisor)==null?void 0:vn.email)||"N/A"}</div>
                  <div><strong>Régimen IVA:</strong> ${_.regimenIvaEmisor}</div>
                </div>
                
                <div class="section">
                  <h3>DATOS DEL RECEPTOR</h3>
                  <div><strong>Nombre:</strong> ${((Fn=_.receptor)==null?void 0:Fn.name)||"N/A"}</div>
                  <div><strong>Email:</strong> ${((em=_.receptor)==null?void 0:em.email)||"N/A"}</div>
                  ${_.expediente?`<div><strong>Expediente:</strong> ${_.expediente.title}</div>`:""}
                </div>
                
                <div class="section">
                  <h3>CONCEPTOS</h3>
                  <table>
                    <thead>
                      <tr>
                        <th>Descripción</th>
                        <th>Cantidad</th>
                        <th>Precio Unitario</th>
                        <th>Total</th>
                      </tr>
                    </thead>
                    <tbody>
                      ${((tm=_.items)==null?void 0:tm.map(Jr=>`
                        <tr>
                          <td>${Jr.description}</td>
                          <td>${Jr.quantity}</td>
                          <td>${ce(Jr.unitPrice)}</td>
                          <td>${ce(Jr.total)}</td>
                        </tr>
                      `).join(""))||""}
                    </tbody>
                  </table>
                </div>
                
                ${_.descuento&&_.descuento>0?`
                <div class="section">
                  <h3>DESCUENTOS</h3>
                  <div class="discount">
                    <strong>Descuento (${_.descuento??0}%):</strong> 
                    -${ce((((rm=_.items)==null?void 0:rm.reduce((Jr,Zr)=>Jr+Zr.quantity*Zr.unitPrice,0))||0)*((_.descuento??0)/100))}
                  </div>
                </div>
                `:""}
                
                ${_.provisionFondos&&_.provisionFondos.length>0?`
                <div class="section">
                  <h3>PROVISIONES DE FONDOS ASOCIADAS</h3>
                  <div class="provisions">
                    <table>
                      <thead>
                        <tr>
                          <th>Descripción</th>
                          <th>Fecha</th>
                          <th>Importe</th>
                        </tr>
                      </thead>
                      <tbody>
                        ${_.provisionFondos.map(Jr=>`
                          <tr>
                            <td>${Jr.description||"Sin descripción"}</td>
                            <td>${ee(Jr.date)}</td>
                            <td>${ce(Jr.amount)}</td>
                          </tr>
                        `).join("")}
                      </tbody>
                    </table>
                  </div>
                </div>
                `:""}
                
                <div class="totals">
                  <div><strong>Base Imponible:</strong> ${ce(_.baseImponible??0)}</div>
                  <div><strong>IVA (${_.tipoIVA??21}%):</strong> ${ce(_.cuotaIVA??0)}</div>
                  <div style="font-size: 1.2em; font-weight: bold; border-top: 1px solid #333; padding-top: 10px;">
                    <strong>TOTAL:</strong> ${ce(_.importeTotal??0)}
                  </div>
                </div>
                
                <div class="section">
                  <div><strong>Método de pago:</strong> ${_.metodoPago}</div>
                  <div><strong>Clave de operación:</strong> ${_.claveOperacion}</div>
                  <div><strong>Fecha de creación:</strong> ${ee(_.createdAt)}</div>
                  ${_.motivoAnulacion?`<div><strong>Motivo de anulación:</strong> ${_.motivoAnulacion}</div>`:""}
                </div>
              </div>
            </body>
          </html>
        `),_e.document.close(),_e.focus(),_e.print(),_e.close())},ie=async()=>{try{const It=(await Z.get(`/invoices/${_.id}/pdf-qr`,{responseType:"blob"})).data,vn=window.URL.createObjectURL(It),Fn=document.createElement("a");Fn.href=vn,Fn.download=`factura_${_.numeroFactura||_.id}.pdf`,document.body.appendChild(Fn),Fn.click(),document.body.removeChild(Fn),window.URL.revokeObjectURL(vn)}catch(_e){console.error("Error downloading PDF:",_e),alert("Error al descargar el PDF de la factura")}},ee=_e=>new Date(_e).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}),ce=_e=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(_e);return n.createElement("div",{className:"bg-white p-8 max-w-4xl mx-auto"},n.createElement("div",{className:"border-b-2 border-gray-300 pb-6 mb-6"},n.createElement("div",{className:"flex justify-between items-start"},n.createElement("div",null,n.createElement("h1",{className:"text-3xl font-bold text-gray-800 mb-2"},"FACTURA"),n.createElement("div",{className:"my-4 flex flex-col items-center"},_.qrData?n.createElement(n.Fragment,null,n.createElement("h4",{className:"text-xs text-gray-600 mb-1"},"Código QR de la factura"),n.createElement(U2,{value:_.qrData,size:120}),n.createElement("pre",{className:"text-xs mt-1 bg-gray-100 p-1 rounded"},_.qrData)):n.createElement("span",{className:"text-xs text-gray-400"},"QR no disponible")),n.createElement("div",{className:"text-lg text-gray-600"},n.createElement("div",null,n.createElement("strong",null,"Número:")," ",_.numeroFactura||"N/A"),n.createElement("div",null,n.createElement("strong",null,"Fecha:")," ",_.fechaFactura?ee(_.fechaFactura):"N/A"),n.createElement("div",null,n.createElement("strong",null,"Tipo:")," ",_.tipoFactura==="F"?"Completa":_.tipoFactura==="R"?"Rectificativa":"N/A"),n.createElement("div",null,n.createElement("strong",null,"Estado:")," ",n.createElement("span",{className:`px-2 py-1 rounded text-xs ${_.estado==="emitida"?"bg-green-100 text-green-800":_.estado==="anulada"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`},(_.estado||"N/A").toUpperCase())))),n.createElement("div",{className:"text-right"},n.createElement("div",{className:"text-sm text-gray-600"},n.createElement("div",null,n.createElement("strong",null,"Fecha de operación:")),n.createElement("div",null,ee(_.fechaOperacion)))))),n.createElement("div",{className:"grid grid-cols-2 gap-8 mb-8"},n.createElement("div",{className:"border-r border-gray-200 pr-4"},n.createElement("h3",{className:"text-lg font-bold text-gray-800 mb-3"},"DATOS DEL EMISOR"),n.createElement("div",{className:"space-y-1 text-sm"},n.createElement("div",null,n.createElement("strong",null,"Nombre:")," ",((he=_.emisor)==null?void 0:he.name)||"N/A"),n.createElement("div",null,n.createElement("strong",null,"Email:")," ",((Te=_.emisor)==null?void 0:Te.email)||"N/A"),n.createElement("div",null,n.createElement("strong",null,"Régimen IVA:")," ",_.regimenIvaEmisor))),n.createElement("div",null,n.createElement("h3",{className:"text-lg font-bold text-gray-800 mb-3"},"DATOS DEL RECEPTOR"),n.createElement("div",{className:"space-y-1 text-sm"},n.createElement("div",null,n.createElement("strong",null,"Nombre:")," ",((je=_.receptor)==null?void 0:je.name)||"N/A"),n.createElement("div",null,n.createElement("strong",null,"Email:")," ",((Be=_.receptor)==null?void 0:Be.email)||"N/A"),_.expediente&&n.createElement("div",null,n.createElement("strong",null,"Expediente:")," ",_.expediente.title)))),n.createElement("div",{className:"mb-8"},n.createElement("h3",{className:"text-lg font-bold text-gray-800 mb-3"},"CONCEPTOS"),n.createElement("table",{className:"w-full border-collapse border border-gray-300"},n.createElement("thead",null,n.createElement("tr",{className:"bg-gray-100"},n.createElement("th",{className:"border border-gray-300 px-3 py-2 text-left"},"Descripción"),n.createElement("th",{className:"border border-gray-300 px-3 py-2 text-center"},"Cantidad"),n.createElement("th",{className:"border border-gray-300 px-3 py-2 text-right"},"Precio Unitario"),n.createElement("th",{className:"border border-gray-300 px-3 py-2 text-right"},"Total"))),n.createElement("tbody",null,(Pt=_.items)==null?void 0:Pt.map((_e,It)=>n.createElement("tr",{key:It,className:It%2===0?"bg-white":"bg-gray-50"},n.createElement("td",{className:"border border-gray-300 px-3 py-2"},_e.description),n.createElement("td",{className:"border border-gray-300 px-3 py-2 text-center"},_e.quantity),n.createElement("td",{className:"border border-gray-300 px-3 py-2 text-right"},ce(_e.unitPrice)),n.createElement("td",{className:"border border-gray-300 px-3 py-2 text-right font-semibold"},ce(_e.total))))))),_.descuento&&_.descuento>0&&n.createElement("div",{className:"mb-8"},n.createElement("h3",{className:"text-lg font-bold text-gray-800 mb-3"},"DESCUENTOS"),n.createElement("div",{className:"bg-yellow-50 p-4 rounded border border-yellow-200"},n.createElement("div",{className:"flex justify-between items-center"},n.createElement("span",{className:"font-semibold text-yellow-800"},"Descuento (",_.descuento??0,"%)"),n.createElement("span",{className:"font-bold text-yellow-800 text-lg"},"-",ce((((Lt=_.items)==null?void 0:Lt.reduce((_e,It)=>_e+It.quantity*It.unitPrice,0))||0)*((_.descuento??0)/100)))))),_.provisionFondos&&_.provisionFondos.length>0&&n.createElement("div",{className:"mb-8"},n.createElement("h3",{className:"text-lg font-bold text-gray-800 mb-3"},"PROVISIONES DE FONDOS ASOCIADAS"),n.createElement("div",{className:"bg-blue-50 p-4 rounded border"},n.createElement("table",{className:"w-full"},n.createElement("thead",null,n.createElement("tr",{className:"border-b border-blue-200"},n.createElement("th",{className:"text-left py-2"},"Descripción"),n.createElement("th",{className:"text-right py-2"},"Fecha"),n.createElement("th",{className:"text-right py-2"},"Importe"))),n.createElement("tbody",null,_.provisionFondos.map(_e=>n.createElement("tr",{key:_e.id,className:"border-b border-blue-100"},n.createElement("td",{className:"py-2"},_e.description||"Sin descripción"),n.createElement("td",{className:"text-right py-2"},ee(_e.date)),n.createElement("td",{className:"text-right py-2 font-semibold"},ce(_e.amount)))))))),n.createElement("div",{className:"border-t-2 border-gray-300 pt-6"},n.createElement("div",{className:"flex justify-end"},n.createElement("div",{className:"w-64 space-y-2"},n.createElement("div",{className:"flex justify-between"},n.createElement("span",null,"Base Imponible:"),n.createElement("span",{className:"font-semibold"},ce(_.baseImponible??0))),n.createElement("div",{className:"flex justify-between"},n.createElement("span",null,"IVA (",_.tipoIVA??21,"%):"),n.createElement("span",{className:"font-semibold"},ce(_.cuotaIVA??0))),n.createElement("div",{className:"flex justify-between text-lg font-bold border-t border-gray-300 pt-2"},n.createElement("span",null,"TOTAL:"),n.createElement("span",null,ce(_.importeTotal??0)))))),n.createElement("div",{className:"mt-8 pt-6 border-t border-gray-200"},n.createElement("div",{className:"grid grid-cols-2 gap-8 text-sm text-gray-600"},n.createElement("div",null,n.createElement("div",null,n.createElement("strong",null,"Método de pago:")," ",_.metodoPago),n.createElement("div",null,n.createElement("strong",null,"Clave de operación:")," ",_.claveOperacion)),n.createElement("div",null,n.createElement("div",null,n.createElement("strong",null,"Fecha de creación:")," ",ee(_.createdAt)),_.motivoAnulacion&&n.createElement("div",null,n.createElement("strong",null,"Motivo de anulación:")," ",_.motivoAnulacion)))),n.createElement("div",{className:"mt-8 flex justify-center gap-4 print:hidden"},n.createElement("button",{onClick:G,className:"px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center gap-2"},n.createElement("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})),"Imprimir"),n.createElement("button",{onClick:ie,className:"px-6 py-2 bg-green-600 text-white rounded hover:bg-green-700 flex items-center gap-2"},n.createElement("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})),"Descargar PDF")))};return n.createElement("div",{className:"py-6 max-w-5xl mx-auto"},n.createElement(Ge,null),n.createElement("div",{className:"flex justify-between items-center mb-4"},n.createElement("h1",{className:"text-2xl font-bold"},"Facturación Electrónica"),n.createElement("button",{className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:we},"Nueva factura")),F&&n.createElement("div",{className:"mb-2 text-blue-700 font-semibold"},F),S&&n.createElement("div",{className:"mb-2 text-green-700 font-semibold"},S),s?n.createElement("div",{className:"flex items-center gap-2"},n.createElement("span",{className:"animate-spin h-5 w-5 border-2 border-blue-500 rounded-full"})," Cargando..."):l?n.createElement("div",{className:"text-red-600"},l):n.createElement(n.Fragment,null,n.createElement("div",{className:"flex flex-wrap gap-4 mb-6"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Cliente"),n.createElement("select",{value:He,onChange:_=>Tt(_.target.value),className:"border rounded px-2 py-1"},n.createElement("option",{value:""},"Todos"),h.map(_=>n.createElement("option",{key:_.user.id,value:_.user.id},_.user.name)))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Fecha de pago"),n.createElement("input",{type:"date",value:Jt,onChange:_=>Qr(_.target.value),className:"border rounded px-2 py-1"}))),n.createElement("div",{className:"overflow-x-auto"},n.createElement("table",{className:"min-w-full bg-white border"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",{className:"border px-2 py-1"}),n.createElement("th",{className:"border px-2 py-1"},"Nº Factura"),n.createElement("th",{className:"border px-2 py-1"},"Fecha"),n.createElement("th",{className:"border px-2 py-1"},"Cliente"),n.createElement("th",{className:"border px-2 py-1"},"Importe"),n.createElement("th",{className:"border px-2 py-1"},"Estado"),n.createElement("th",{className:"border px-2 py-1"},"Fecha de pago"),n.createElement("th",{className:"border px-2 py-1"},"Provisiones"),n.createElement("th",{className:"border px-2 py-1"},"Acciones"))),n.createElement("tbody",null,r.map(_=>{var G,ie,ee,ce;return n.createElement("tr",{key:_.id},n.createElement("td",{className:"border px-2 py-1 text-center"},!_.xmlFirmado&&_.xml&&n.createElement("input",{type:"checkbox",checked:I.includes(_.id),onChange:()=>ut(_.id),"aria-label":`Seleccionar factura ${_.numeroFactura}`})),n.createElement("td",{className:"border px-2 py-1"},_.numeroFactura),n.createElement("td",{className:"border px-2 py-1"},(G=_.fechaFactura)==null?void 0:G.slice(0,10)),n.createElement("td",{className:"border px-2 py-1"},((ie=_.receptor)==null?void 0:ie.name)||_.receptorId),n.createElement("td",{className:"border px-2 py-1"},(ee=_.importeTotal)==null?void 0:ee.toFixed(2)," €"),n.createElement("td",{className:"border px-2 py-1"},_.estado),n.createElement("td",{className:"border px-2 py-1"},_.paymentDate?new Date(_.paymentDate).toLocaleDateString():"-"),n.createElement("td",{className:"border px-2 py-1"},((ce=_.provisionFondos)==null?void 0:ce.length)||0),n.createElement("td",{className:"border px-2 py-1 flex gap-1"},n.createElement("button",{className:"px-3 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 transition-colors",onClick:()=>Jd(_),title:"Ver factura completa"},"👁️ Ver"),n.createElement("button",{className:"px-3 py-1 bg-yellow-600 text-white text-xs rounded hover:bg-yellow-700 transition-colors",onClick:()=>Zd(_),title:"Editar factura"},"✏️ Editar"),n.createElement("button",{className:`px-3 py-1 text-xs rounded transition-colors ${K===_.id?"bg-gray-400 text-white cursor-not-allowed":"bg-red-600 text-white hover:bg-red-700"}`,onClick:()=>_t(_.id),disabled:K===_.id,title:"Eliminar factura"},K===_.id?"🗑️ Borrando...":"🗑️ Borrar"),n.createElement("button",{className:"px-3 py-1 bg-gray-600 text-white text-xs rounded hover:bg-gray-700 transition-colors",onClick:()=>er(_),title:"Ver metadatos técnicos"},"🔍 Metadatos")))})))),n.createElement("div",{className:"mt-6 mb-2 p-3 bg-yellow-50 border-l-4 border-yellow-400 rounded"},n.createElement("ol",{className:"list-decimal pl-6 text-sm text-yellow-900"},n.createElement("li",null,"A continuación tiene que elegir su ",n.createElement("b",null,"certificado digital")," (.pem)."),n.createElement("li",null,"Después, elija la ",n.createElement("b",null,"clave privada asociada")," (.pem)."),n.createElement("li",null,"Con eso, el sistema preparará el XML de las facturas seleccionadas y lo enviará a ",n.createElement("b",null,"Autofirma"),"."),n.createElement("li",null,"Finalmente, pulse en ",n.createElement("b",null,"Firmar Electrónicamente"),": se producirá la firma digital y la subida automática del XML firmado."))),n.createElement("div",{className:"mt-6 flex gap-2 items-center"},n.createElement("input",{type:"file",accept:".pem",onChange:_=>{var G;return A(((G=_.target.files)==null?void 0:G[0])||null)},title:"Subir certificado PEM","aria-label":"Subir certificado PEM"}),n.createElement("span",{className:"text-xs text-gray-600"},"Certificado digital (.pem)"),n.createElement("input",{type:"file",accept:".pem",onChange:_=>{var G;return P(((G=_.target.files)==null?void 0:G[0])||null)},title:"Subir clave privada PEM","aria-label":"Subir clave privada PEM"}),n.createElement("span",{className:"text-xs text-gray-600"},"Clave privada (.pem)"),n.createElement("button",{className:"ml-4 px-4 py-2 bg-green-600 text-white rounded disabled:bg-gray-300",disabled:I.length===0||!!F,onClick:zo},"Firmar electrónicamente (",I.length,")"))),c&&n.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50"},n.createElement("div",{className:"bg-white rounded shadow-lg p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto relative"},n.createElement("button",{className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800",onClick:()=>d(!1)},"×"),n.createElement("h2",{className:"text-xl font-bold mb-4"},u.id?"Editar factura":"Nueva factura"),n.createElement("form",{onSubmit:u.id?Qe:ye,className:"space-y-4"},S&&n.createElement("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg"},n.createElement("div",{className:"flex items-center justify-between"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor"},n.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"}))),n.createElement("div",{className:"ml-3"},n.createElement("p",{className:"text-sm font-medium text-green-800"},S))),n.createElement("button",{onClick:()=>{C(null),d(!1)},className:"text-green-400 hover:text-green-600",title:"Cerrar"},n.createElement("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}))))),w&&n.createElement("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},n.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))),n.createElement("div",{className:"ml-3"},n.createElement("p",{className:"text-sm font-medium text-red-800 whitespace-pre-line"},w)))),n.createElement("div",{className:"mb-2"},n.createElement("label",{className:"block text-sm font-medium mb-1"},"Nº Factura"),n.createElement("input",{name:"numeroFactura",value:u.numeroFactura||"Se asignará automáticamente",readOnly:!0,className:"border px-2 py-1 rounded w-full bg-gray-100"})),!u.fechaFactura&&n.createElement("div",{className:"mb-2 text-xs text-gray-500"},"La fecha de la factura se asignará automáticamente al crearla."),u.fechaFactura&&n.createElement("div",{className:"mb-2"},n.createElement("label",{className:"block text-sm font-medium mb-1"},"Fecha de factura"),n.createElement("input",{value:u.fechaFactura.slice(0,10),readOnly:!0,className:"border px-2 py-1 rounded w-full bg-gray-100"})),n.createElement("div",{className:"mb-2"},n.createElement("label",{className:"block text-sm font-medium mb-1"},"Cliente"),n.createElement("select",{ref:$e,name:"receptorId",value:u.receptorId,onChange:R,className:`border px-2 py-1 rounded w-full ${Se.cliente?"border-red-500 bg-red-50":""}`,required:!0},n.createElement("option",{value:""},"Selecciona un cliente"),h.map(_=>n.createElement("option",{key:_.user.id,value:_.user.id},_.user.name," (",_.dni,")")))),u.receptorId&&n.createElement("div",{className:"mb-2"},n.createElement("label",{className:"block text-sm font-medium mb-1"},"Expediente"),n.createElement("select",{ref:qe,name:"expedienteId",value:u.expedienteId,onChange:Ne,className:`border px-2 py-1 rounded w-full ${Se.expediente?"border-red-500 bg-red-50":""}`,required:!0},n.createElement("option",{value:""},"Selecciona un expediente"),X.map(_=>n.createElement("option",{key:_.id,value:_.id},_.title," (ID: ",_.id,")")))),M&&n.createElement("div",{className:"mb-2 p-2 bg-green-50 border-l-4 border-green-400 text-green-800 text-sm rounded"},n.createElement("b",null,"Provisiones de fondos disponibles:"),n.createElement("br",null),"Se han encontrado ",U.length," provisiones de fondos asociadas a este cliente y expediente.",n.createElement("br",null),n.createElement("ul",{className:"list-disc pl-5"},U.map((_,G)=>n.createElement("li",{key:_.id},"Provisión #",G+1,": ",_.amount," € (ID: ",_.id,")"))),n.createElement("b",null,"Total disponible:")," ",U.reduce((_,G)=>_+G.amount,0)," €",n.createElement("br",null),n.createElement("em",null,"Selecciona las provisiones que quieres incluir en la factura. Se descontarán automáticamente del total final.")),U.length>0&&n.createElement("div",{className:"mb-2 p-2 bg-blue-50 border rounded"},n.createElement("label",{className:"block text-sm font-medium mb-2 text-blue-800"},"Seleccionar provisiones a incluir en la factura:"),U.map(_=>{var G;return n.createElement("div",{key:_.id,className:"flex items-center mb-1"},n.createElement("input",{type:"checkbox",id:`provision-${_.id}`,checked:B.includes(_.id),onChange:ie=>{ie.target.checked?H(ee=>[...ee,_.id]):H(ee=>ee.filter(ce=>ce!==_.id))},className:"mr-2"}),n.createElement("label",{htmlFor:`provision-${_.id}`,className:"text-sm"},"Provisión de ",_.amount," € - ",_.description||"sin descripción"," (",((G=_.date)==null?void 0:G.slice(0,10))||"sin fecha",")"))}),B.length>0&&n.createElement("div",{className:"mt-2 text-sm font-semibold text-blue-700"},"Provisiones seleccionadas: ",B.length,"(Total: ",U.filter(_=>B.includes(_.id)).reduce((_,G)=>_+G.amount,0)," €)")),n.createElement("div",{className:"mb-2"},n.createElement("label",{className:"block text-sm font-medium mb-1"},"Tipo Factura"),n.createElement("select",{name:"tipoFactura",value:u.tipoFactura,onChange:Ne,className:"border px-2 py-1 rounded w-full"},n.createElement("option",{value:"F"},"Completa"),n.createElement("option",{value:"R"},"Rectificativa"))),n.createElement("div",{className:"mb-2"},n.createElement("label",{className:"block text-sm font-medium mb-1"},"Fecha Operación"),n.createElement("input",{ref:J,name:"fechaOperacion",type:"date",value:u.fechaOperacion,onChange:Ne,className:`border px-2 py-1 rounded w-full ${Se.fechaOperacion?"border-red-500 bg-red-50":""}`,required:!0})),n.createElement("div",{className:"mb-2"},n.createElement("label",{className:"block text-sm font-medium mb-1"},"Método de Pago"),n.createElement("input",{name:"metodoPago",value:u.metodoPago,onChange:Ne,className:"border px-2 py-1 rounded w-full",required:!0})),n.createElement("div",{className:"mb-2"},n.createElement("label",{className:"block text-sm font-medium mb-1"},"Régimen IVA Emisor"),n.createElement("input",{name:"regimenIvaEmisor",value:u.regimenIvaEmisor,onChange:Ne,className:"border px-2 py-1 rounded w-full",required:!0})),n.createElement("div",{className:"mb-2"},n.createElement("label",{className:"block text-sm font-medium mb-1"},"Clave Operación"),n.createElement("input",{name:"claveOperacion",value:u.claveOperacion,onChange:Ne,className:"border px-2 py-1 rounded w-full",required:!0})),n.createElement("div",{className:"mb-2"},n.createElement("label",{className:"block text-sm font-medium mb-1"},"Tipo IVA (%)"),n.createElement("input",{name:"tipoIVA",type:"number",value:u.tipoIVA,onChange:Ne,className:"border px-2 py-1 rounded w-full",required:!0})),n.createElement("div",{className:"mb-2 flex gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium mb-1"},"Aplicar IVA"),n.createElement("input",{type:"checkbox",name:"aplicarIVA",checked:u.aplicarIVA!==!1,onChange:_=>m(G=>({...G,aplicarIVA:_.target.checked})),className:"mr-2"}),n.createElement("span",{className:"text-sm"},"Marcar si la factura debe llevar IVA")),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium mb-1"},"Retención (%)"),n.createElement("input",{type:"number",name:"retencion",min:"0",max:"100",step:"0.01",value:u.retencion??"",onChange:_=>m(G=>({...G,retencion:_.target.value===""?void 0:Number(_.target.value)})),className:"border px-2 py-1 rounded w-24",placeholder:"0"}),n.createElement("span",{className:"text-xs text-gray-500 ml-2"},"(opcional)")),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium mb-1"},"Descuento (%)"),n.createElement("input",{type:"number",name:"descuento",min:"0",max:"100",step:"0.01",value:u.descuento??"",onChange:_=>m(G=>({...G,descuento:_.target.value===""?void 0:Number(_.target.value)})),className:"border px-2 py-1 rounded w-24",placeholder:"0"}),n.createElement("span",{className:"text-xs text-gray-500 ml-2"},"(opcional)"))),n.createElement("div",{className:"mb-2"},n.createElement("label",{className:"block text-sm font-bold mb-1"},"Conceptos"),u.items.map((_,G)=>{var ie,ee,ce,he,Te,je;return n.createElement("div",{key:G,className:"flex flex-wrap gap-2 mb-1"},n.createElement("input",{ref:Be=>le.current[G]={...le.current[G]||{},description:Be},placeholder:"Descripción",value:_.description,onChange:Be=>ue(G,"description",Be.target.value),className:`border px-2 py-1 rounded w-full sm:w-1/2 ${(ee=(ie=Se.items)==null?void 0:ie[G])!=null&&ee.description?"border-red-500 bg-red-50":""}`,required:!0}),n.createElement("input",{ref:Be=>le.current[G]={...le.current[G]||{},quantity:Be},type:"number",placeholder:"Cantidad",value:_.quantity,onChange:Be=>ue(G,"quantity",Number(Be.target.value)),className:`border px-2 py-1 rounded w-full sm:w-1/4 ${(he=(ce=Se.items)==null?void 0:ce[G])!=null&&he.quantity?"border-red-500 bg-red-50":""}`,required:!0}),n.createElement("input",{ref:Be=>le.current[G]={...le.current[G]||{},unitPrice:Be},type:"number",placeholder:"Precio unitario",value:_.unitPrice,onChange:Be=>ue(G,"unitPrice",Number(Be.target.value)),className:`border px-2 py-1 rounded w-full sm:w-1/4 ${(je=(Te=Se.items)==null?void 0:Te[G])!=null&&je.unitPrice?"border-red-500 bg-red-50":""}`,required:!0}),n.createElement("span",{className:"px-2"},"Total: ",_.total))}),n.createElement("button",{type:"button",className:"text-blue-600 underline mt-1",onClick:Me},"Añadir concepto")),(()=>{const _=u.items.reduce((Lt,_e)=>Lt+(_e.total||0),0),G=u.descuento?Number(u.descuento):0,ie=_*(1-G/100),ee=u.aplicarIVA!==!1,ce=u.tipoIVA||21,he=ee?ie*(ce/100):0,Te=u.retencion?Number(u.retencion):0,je=ie*(Te/100),Be=U.filter(Lt=>B.includes(Lt.id)).reduce((Lt,_e)=>Lt+_e.amount,0),Pt=ie+he-je-Be;return n.createElement("div",{className:"mb-4 p-3 bg-blue-50 border rounded"},n.createElement("h3",{className:"font-bold text-blue-800 mb-2"},"Resumen de totales (calculado automáticamente):"),n.createElement("div",{className:"grid grid-cols-2 gap-2 text-sm"},n.createElement("div",null,"Base imponible: ",n.createElement("span",{className:"font-semibold"},ie.toFixed(2)," €")),n.createElement("div",null,"Descuento: ",n.createElement("span",{className:"font-semibold"},G.toFixed(2)," %")),n.createElement("div",null,"IVA (",ee?ce:0,"%): ",n.createElement("span",{className:"font-semibold"},he.toFixed(2)," €")),n.createElement("div",null,"Retención: ",n.createElement("span",{className:"font-semibold"},Te.toFixed(2)," % (",je.toFixed(2)," €)")),Be>0&&n.createElement("div",{className:"col-span-2 text-green-700"},"Descuento por provisiones: ",n.createElement("span",{className:"font-semibold"},"-",Be.toFixed(2)," €")),n.createElement("div",{className:"col-span-2 border-t pt-1"},n.createElement("strong",null,"Total factura: ",Pt.toFixed(2)," €"))))})(),n.createElement("div",{className:"flex justify-end gap-2 mt-4"},n.createElement("button",{type:"button",className:"px-4 py-2 bg-gray-300 rounded",onClick:()=>d(!1),disabled:D},"Cancelar"),n.createElement("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded",disabled:D},D?u.id?"Actualizando...":"Creando...":u.id?"Actualizar":"Crear"))))),se&&W&&n.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50 modal-overlay"},n.createElement("div",{className:"bg-white rounded shadow-lg p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto relative modal-content"},n.createElement("button",{className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800 print:hidden",onClick:()=>be(!1)},"×"),n.createElement("div",{className:"invoice-print"},n.createElement(tr,{invoice:W})))))},UK=()=>{const e=localStorage.getItem("token")||"",[t,r]=g.useState({expedienteId:"",amount:"",date:"",description:""}),[a,s]=g.useState(null),[o,l]=g.useState([]),[i,c]=g.useState(""),[d,u]=g.useState(""),[m,f]=g.useState(""),[x,b]=g.useState(!1),[y,v]=g.useState([]);g.useEffect(()=>{(async()=>{try{const C=await Z.get("/cases",{headers:{Authorization:`Bearer ${e}`}});v(C.data)}catch{v([])}})()},[e]);const p=S=>{r({...t,[S.target.name]:S.target.value})},h=S=>{r({...t,expedienteId:S.target.value})},E=S=>{r({...t,expedienteId:S.target.value})},w=async S=>{var C;S.preventDefault(),f(""),u(""),b(!0);try{const D=y.find(P=>P.id===t.expedienteId),k=((C=D==null?void 0:D.client)==null?void 0:C.id)||"";if(!k){f("No se pudo determinar el cliente del expediente seleccionado"),b(!1);return}const O={clientId:k,expedienteId:t.expedienteId,amount:Number(t.amount),...t.date?{date:t.date}:{},description:t.description},A=await IK(O,e);s(A.id),u("Provisión creada. Ahora puedes vincularla a una factura.");const $=await OK(e);l($)}catch{f("Error al crear la provisión")}finally{b(!1)}},N=async()=>{if(!(!a||!i)){f(""),u(""),b(!0);try{await $K(a,i,e),u("Provisión vinculada correctamente a la factura."),s(null),c("")}catch{f("Error al vincular la provisión")}finally{b(!1)}}};return n.createElement("div",{className:"max-w-md mx-auto py-8"},n.createElement("h2",{className:"text-xl font-bold mb-4"},"Crear Provisión de Fondos"),d&&n.createElement("div",{className:"mb-2 text-green-700"},d),m&&n.createElement("div",{className:"mb-2 text-red-600"},m),a?n.createElement("div",{className:"space-y-3"},n.createElement("div",null,n.createElement("label",{htmlFor:"invoice-select",className:"block text-sm"},"Selecciona Factura para vincular"),n.createElement("select",{id:"invoice-select",value:i,onChange:S=>c(S.target.value),className:"border px-2 py-1 rounded w-full"},n.createElement("option",{value:""},"Selecciona una factura"),o.map(S=>{var C;return n.createElement("option",{key:S.id,value:S.id},S.numeroFactura," - ",(C=S.receptor)==null?void 0:C.name)}))),n.createElement("button",{onClick:N,className:"px-4 py-2 bg-green-600 text-white rounded",disabled:x||!i},x?"Vinculando...":"Vincular Provisión")):n.createElement("form",{onSubmit:w,className:"space-y-3"},n.createElement("div",{className:"mb-2"},n.createElement("label",{className:"block text-sm"},"Expediente (elige del desplegable o pega el ID)"),n.createElement("select",{className:"border px-2 py-1 rounded w-full mb-1",value:t.expedienteId,onChange:h},n.createElement("option",{value:""},"Selecciona un expediente"),y.map(S=>{var C,D;return n.createElement("option",{key:S.id,value:S.id},S.title," - ",((D=(C=S.client)==null?void 0:C.user)==null?void 0:D.name)||"Sin cliente"," (ID: ",S.id,")")})),n.createElement("input",{className:"border px-2 py-1 rounded w-full",placeholder:"O pega el ID del expediente",value:t.expedienteId,onChange:E})),!t.date&&n.createElement("div",{className:"mb-2 text-xs text-gray-500"},"La fecha de la provisión se asignará automáticamente al crearla."),t.date&&n.createElement("div",{className:"mb-2"},n.createElement("label",{className:"block text-sm font-medium mb-1"},"Fecha de provisión"),n.createElement("input",{value:t.date.slice(0,10),readOnly:!0,className:"border px-2 py-1 rounded w-full bg-gray-100"})),n.createElement("div",null,n.createElement("label",{htmlFor:"amount",className:"block text-sm"},"Importe"),n.createElement("input",{id:"amount",name:"amount",type:"number",value:t.amount,onChange:p,className:"border px-2 py-1 rounded w-full",required:!0})),n.createElement("div",null,n.createElement("label",{htmlFor:"description",className:"block text-sm"},"Descripción"),n.createElement("input",{id:"description",name:"description",value:t.description,onChange:p,className:"border px-2 py-1 rounded w-full"})),n.createElement("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded",disabled:x},x?"Creando...":"Crear Provisión")))},VK=()=>{const{user:e}=Pe(),t=localStorage.getItem("token"),[r,a]=g.useState([]),[s,o]=g.useState(!0),[l,i]=g.useState(null),[c,d]=g.useState(null);g.useEffect(()=>{(async()=>{try{if(!t)throw new Error("No token available");const E=await Z.get("/users/clients/profile",{headers:{Authorization:`Bearer ${t}`}});E.data?(d(E.data),await u(E.data.id)):i("No se encontró el perfil de cliente")}catch(E){console.error("Error fetching client profile:",E),i("Error al cargar el perfil de cliente")}finally{o(!1)}})()},[t,e]);const u=async h=>{try{const E=await BK(h,t);a(E)}catch{i("Error al cargar las provisiones")}},m=h=>new Date(h).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"}),f=h=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"EUR"}).format(h),x=h=>h.invoiceId?n.createElement("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"},"Facturada"):n.createElement("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800"},"Pendiente");if(s)return n.createElement("div",{className:"max-w-6xl mx-auto py-8 px-4"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.createElement("p",{className:"mt-4 text-gray-600"},"Cargando provisiones...")));if(l)return n.createElement("div",{className:"max-w-6xl mx-auto py-8 px-4"},n.createElement("div",{className:"bg-red-50 border border-red-200 rounded-md p-4"},n.createElement("div",{className:"flex"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},n.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))),n.createElement("div",{className:"ml-3"},n.createElement("h3",{className:"text-sm font-medium text-red-800"},"Error"),n.createElement("div",{className:"mt-2 text-sm text-red-700"},l)))));const b=r.filter(h=>!h.invoiceId),y=r.filter(h=>h.invoiceId),v=b.reduce((h,E)=>h+E.amount,0),p=y.reduce((h,E)=>h+E.amount,0);return n.createElement("div",{className:"max-w-6xl mx-auto py-8 px-4"},n.createElement("div",{className:"mb-8"},n.createElement("h1",{className:"text-3xl font-bold text-gray-900 mb-2"},"Mis Provisiones de Fondos"),n.createElement("p",{className:"text-gray-600"},"Aquí puedes ver todas las provisiones de fondos asociadas a tus expedientes")),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},n.createElement("div",{className:"bg-white rounded-lg shadow p-6"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Total Provisiones"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},r.length)))),n.createElement("div",{className:"bg-white rounded-lg shadow p-6"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Pendientes"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},f(v))))),n.createElement("div",{className:"bg-white rounded-lg shadow p-6"},n.createElement("div",{className:"flex items-center"},n.createElement("div",{className:"flex-shrink-0"},n.createElement("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center"},n.createElement("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})))),n.createElement("div",{className:"ml-4"},n.createElement("p",{className:"text-sm font-medium text-gray-500"},"Facturadas"),n.createElement("p",{className:"text-2xl font-semibold text-gray-900"},f(p)))))),b.length>0&&n.createElement("div",{className:"bg-white rounded-lg shadow mb-8"},n.createElement("div",{className:"px-6 py-4 border-b border-gray-200"},n.createElement("h2",{className:"text-lg font-medium text-gray-900"},"Provisiones Pendientes (",b.length,")"),n.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Provisiones que aún no han sido facturadas")),n.createElement("div",{className:"overflow-x-auto"},n.createElement("table",{className:"min-w-full divide-y divide-gray-200"},n.createElement("thead",{className:"bg-gray-50"},n.createElement("tr",null,n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Fecha"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Importe"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Descripción"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Expediente"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Abogado"))),n.createElement("tbody",{className:"bg-white divide-y divide-gray-200"},b.map(h=>{var E,w,N;return n.createElement("tr",{key:h.id,className:"hover:bg-gray-50"},n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},m(h.date)),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},f(h.amount)),n.createElement("td",{className:"px-6 py-4 text-sm text-gray-900"},h.description||"Sin descripción"),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},((E=h.expediente)==null?void 0:E.title)||"Sin expediente"),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},((N=(w=h.expediente)==null?void 0:w.lawyer)==null?void 0:N.name)||"No asignado"))}))))),y.length>0&&n.createElement("div",{className:"bg-white rounded-lg shadow"},n.createElement("div",{className:"px-6 py-4 border-b border-gray-200"},n.createElement("h2",{className:"text-lg font-medium text-gray-900"},"Provisiones Facturadas (",y.length,")"),n.createElement("p",{className:"text-sm text-gray-500 mt-1"},"Provisiones que ya han sido incluidas en facturas")),n.createElement("div",{className:"overflow-x-auto"},n.createElement("table",{className:"min-w-full divide-y divide-gray-200"},n.createElement("thead",{className:"bg-gray-50"},n.createElement("tr",null,n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Fecha Provisión"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Importe"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Descripción"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Expediente"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Factura"),n.createElement("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Estado"))),n.createElement("tbody",{className:"bg-white divide-y divide-gray-200"},y.map(h=>{var E,w,N,S;return n.createElement("tr",{key:h.id,className:"hover:bg-gray-50"},n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},m(h.date)),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},f(h.amount)),n.createElement("td",{className:"px-6 py-4 text-sm text-gray-900"},h.description||"Sin descripción"),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},((E=h.expediente)==null?void 0:E.title)||"Sin expediente"),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},n.createElement("div",null,n.createElement("div",{className:"font-medium"},(w=h.invoice)==null?void 0:w.numeroFactura),n.createElement("div",{className:"text-gray-500"},m(((N=h.invoice)==null?void 0:N.fechaFactura)||"")),n.createElement("div",{className:"text-gray-500"},f(((S=h.invoice)==null?void 0:S.importeTotal)||0)))),n.createElement("td",{className:"px-6 py-4 whitespace-nowrap"},x(h)))}))))),r.length===0&&n.createElement("div",{className:"bg-white rounded-lg shadow p-8 text-center"},n.createElement("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-gray-100 mb-4"},n.createElement("svg",{className:"h-6 w-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"}))),n.createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"No hay provisiones de fondos"),n.createElement("p",{className:"text-gray-500"},"Aún no se han creado provisiones de fondos para tus expedientes.")))},WK=()=>{const[e,t]=g.useState([]),[r,a]=g.useState([]),[s,o]=g.useState({lawyerId:"",date:"",location:"",notes:""}),[l,i]=g.useState(!0),[c,d]=g.useState(null),[u,m]=g.useState(null),[f,x]=g.useState(!1),[b,y]=g.useState("all"),[v,p]=g.useState("list"),{user:h}=Pe();g.useEffect(()=>{(async()=>{try{i(!0);const I=localStorage.getItem("token"),[L,F]=await Promise.all([Z.get("/users/lawyers"),Z.get("/appointments")]);t(L.data),a(F.data),d(null)}catch{d("Error al cargar los datos")}finally{i(!1)}})()},[]);const E=P=>{o({...s,[P.target.name]:P.target.value})},w=async P=>{var I,L;if(P.preventDefault(),d(null),m(null),!s.lawyerId||!s.date){d("Selecciona abogado y fecha/hora");return}try{const F=localStorage.getItem("token"),T=await Z.post("/appointments",{lawyerId:s.lawyerId,date:s.date,location:s.location||void 0,notes:s.notes||void 0},{headers:{Authorization:`Bearer ${F}`}});a(M=>[T.data,...M]),o({lawyerId:"",date:"",location:"",notes:""}),x(!1),m("Cita agendada correctamente"),setTimeout(()=>m(null),3e3)}catch(F){d(((L=(I=F.response)==null?void 0:I.data)==null?void 0:L.message)||"Error al agendar la cita")}},N=async P=>{if(confirm("¿Estás seguro de que quieres cancelar esta cita?"))try{const I=localStorage.getItem("token");await Z.delete(`/appointments/${P}`,{headers:{Authorization:`Bearer ${I}`}}),a(L=>L.filter(F=>F.id!==P)),m("Cita cancelada correctamente"),setTimeout(()=>m(null),3e3)}catch{d("Error al cancelar la cita")}},S=g.useMemo(()=>b==="all"?r:r.filter(P=>P.lawyer.id===b),[r,b]),C=g.useMemo(()=>{const P=new Date,I=new Date(P.getFullYear(),P.getMonth(),P.getDate()),L=new Date(I);return L.setDate(L.getDate()+1),{past:S.filter(F=>new Date(F.date)<I),today:S.filter(F=>{const T=new Date(F.date);return T>=I&&T<L}),upcoming:S.filter(F=>new Date(F.date)>=L)}},[S]),D=P=>new Date(P).toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),k=P=>new Date(P).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}),O=P=>{const I=new Date,L=new Date(P),F=new Date(I.getFullYear(),I.getMonth(),I.getDate()),T=new Date(F);return T.setDate(T.getDate()+1),L<F?n.createElement("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"},"Pasada"):L>=F&&L<T?n.createElement("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"},"Hoy"):n.createElement("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},"Próxima")},A=P=>n.createElement("div",{key:P.id,className:"bg-white rounded-lg shadow-md p-6 border-l-4 border-blue-500"},n.createElement("div",{className:"flex justify-between items-start mb-4"},n.createElement("div",null,n.createElement("h3",{className:"text-lg font-semibold text-gray-900"},P.lawyer.name),n.createElement("p",{className:"text-sm text-gray-600"},P.lawyer.email)),n.createElement("div",{className:"flex items-center space-x-2"},O(P.date),n.createElement("button",{onClick:()=>N(P.id),className:"text-red-600 hover:text-red-800 text-sm font-medium",title:"Cancelar cita"},"✕"))),n.createElement("div",{className:"space-y-2"},n.createElement("div",{className:"flex items-center text-sm text-gray-700"},n.createElement("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})),D(P.date)," a las ",k(P.date)),P.location&&n.createElement("div",{className:"flex items-center text-sm text-gray-700"},n.createElement("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})),P.location),P.notes&&n.createElement("div",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded-md"},n.createElement("strong",null,"Notas:")," ",P.notes))),$=()=>{const P=new Date,I=Array.from({length:7},(L,F)=>{const T=new Date(P);return T.setDate(T.getDate()+F),T});return n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-4"},I.map((L,F)=>{const T=S.filter(M=>new Date(M.date).toDateString()===L.toDateString());return n.createElement("div",{key:F,className:"bg-white rounded-lg shadow p-4"},n.createElement("div",{className:"text-center mb-3"},n.createElement("div",{className:"text-sm font-medium text-gray-500"},L.toLocaleDateString("es-ES",{weekday:"short"})),n.createElement("div",{className:`text-lg font-bold ${L.toDateString()===P.toDateString()?"text-blue-600":"text-gray-900"}`},L.getDate())),n.createElement("div",{className:"space-y-2"},T.map(M=>n.createElement("div",{key:M.id,className:"text-xs bg-blue-50 p-2 rounded border-l-2 border-blue-500"},n.createElement("div",{className:"font-medium"},M.lawyer.name),n.createElement("div",{className:"text-gray-600"},k(M.date))))))}))};return l?n.createElement("div",{className:"max-w-6xl mx-auto py-8 px-4"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.createElement("p",{className:"mt-4 text-gray-600"},"Cargando citas..."))):n.createElement("div",{className:"max-w-6xl mx-auto py-8 px-4"},n.createElement("div",{className:"mb-8"},n.createElement("h1",{className:"text-3xl font-bold text-gray-900 mb-2"},"Mis Citas"),n.createElement("p",{className:"text-gray-600"},"Gestiona tus citas con los abogados")),n.createElement("div",{className:"bg-white rounded-lg shadow p-6 mb-8"},n.createElement("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0"},n.createElement("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4"},n.createElement("button",{onClick:()=>x(!f),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},f?"Cancelar":"Nueva Cita"),n.createElement("select",{value:b,onChange:P=>y(P.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},n.createElement("option",{value:"all"},"Todos los abogados"),e.map(P=>n.createElement("option",{key:P.id,value:P.id},P.name)))),n.createElement("div",{className:"flex space-x-2"},n.createElement("button",{onClick:()=>p("list"),className:`px-3 py-2 rounded-md text-sm font-medium ${v==="list"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`},"Lista"),n.createElement("button",{onClick:()=>p("calendar"),className:`px-3 py-2 rounded-md text-sm font-medium ${v==="calendar"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`},"Calendario"))),c&&n.createElement("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-md"},n.createElement("p",{className:"text-red-700 text-sm"},c)),u&&n.createElement("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-md"},n.createElement("p",{className:"text-green-700 text-sm"},u))),f&&n.createElement("div",{className:"bg-white rounded-lg shadow p-6 mb-8"},n.createElement("h2",{className:"text-xl font-semibold mb-4"},"Agendar Nueva Cita"),n.createElement("form",{onSubmit:w,className:"space-y-4"},n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Abogado"),n.createElement("select",{name:"lawyerId",value:s.lawyerId,onChange:E,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0},n.createElement("option",{value:""},"Selecciona un abogado"),e.map(P=>n.createElement("option",{key:P.id,value:P.id},P.name," (",P.email,")")))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Fecha y hora"),n.createElement("input",{type:"datetime-local",name:"date",value:s.date,onChange:E,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Ubicación (opcional)"),n.createElement("input",{type:"text",name:"location",value:s.location,onChange:E,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Oficina, online, etc."})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Motivo / Notas (opcional)"),n.createElement("textarea",{name:"notes",value:s.notes,onChange:E,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Motivo de la cita, detalles, etc."})),n.createElement("div",{className:"flex justify-end space-x-3"},n.createElement("button",{type:"button",onClick:()=>x(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500"},"Cancelar"),n.createElement("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},"Agendar Cita")))),v==="calendar"?n.createElement("div",{className:"mb-8"},n.createElement("h2",{className:"text-xl font-semibold mb-4"},"Vista de Calendario"),$()):n.createElement("div",{className:"space-y-8"},C.today.length>0&&n.createElement("div",null,n.createElement("h2",{className:"text-xl font-semibold mb-4 text-green-700"},"Citas de Hoy"),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},C.today.map(A))),C.upcoming.length>0&&n.createElement("div",null,n.createElement("h2",{className:"text-xl font-semibold mb-4 text-blue-700"},"Próximas Citas"),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},C.upcoming.map(A))),C.past.length>0&&n.createElement("div",null,n.createElement("h2",{className:"text-xl font-semibold mb-4 text-gray-700"},"Citas Pasadas"),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},C.past.map(A))),S.length===0&&n.createElement("div",{className:"text-center py-12"},n.createElement("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})),n.createElement("h3",{className:"mt-2 text-sm font-medium text-gray-900"},"No hay citas"),n.createElement("p",{className:"mt-1 text-sm text-gray-500"},b==="all"?"No tienes citas agendadas. Agenda una nueva cita para comenzar.":"No tienes citas con este abogado."),n.createElement("div",{className:"mt-6"},n.createElement("button",{onClick:()=>x(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500"},"Agendar Nueva Cita")))))},HK=()=>{const{user:e}=Pe(),[t,r]=g.useState([]),[a,s]=g.useState(!0),[o,l]=g.useState(null),[i,c]=g.useState([]),[d,u]=g.useState(""),[m,f]=g.useState("");return g.useEffect(()=>{(async()=>{try{const b=localStorage.getItem("token"),y=await xe.get("/api/users/lawyers",{headers:{Authorization:`Bearer ${b}`}});c(y.data)}catch{}})()},[]),g.useEffect(()=>{(async()=>{try{s(!0);const b=localStorage.getItem("token"),y={};d&&(y.lawyerId=d),m&&(y.paymentDate=m);const v=await xe.get("/api/invoices/my",{headers:{Authorization:`Bearer ${b}`},params:y});r(v.data),l(null)}catch{l("Error al cargar las facturas"),r([])}finally{s(!1)}})()},[d,m]),n.createElement("div",{className:"py-6"},n.createElement("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"bg-white rounded-lg shadow p-6"},n.createElement("h1",{className:"text-2xl font-semibold mb-2"},"Gestionar pagos y facturas"),n.createElement("p",{className:"text-gray-600 mb-6"},"Aquí puedes consultar tus facturas, descargar el PDF y acceder al QR para pago o verificación."),n.createElement("div",{className:"flex flex-wrap gap-4 mb-6"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Abogado"),n.createElement("select",{value:d,onChange:x=>u(x.target.value),className:"border rounded px-2 py-1"},n.createElement("option",{value:""},"Todos"),i.map(x=>n.createElement("option",{key:x.id,value:x.id},x.name)))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},"Fecha de pago"),n.createElement("input",{type:"date",value:m,onChange:x=>f(x.target.value),className:"border rounded px-2 py-1"}))),a?n.createElement("div",{className:"flex items-center justify-center h-40"},n.createElement("div",{className:"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-blue-500"})):o?n.createElement("div",{className:"bg-red-100 text-red-700 p-3 rounded mb-4"},o):t.length===0?n.createElement("div",{className:"text-gray-500"},"No tienes facturas registradas."):n.createElement("div",{className:"overflow-x-auto"},n.createElement("table",{className:"min-w-full divide-y divide-gray-200"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Nº Factura"),n.createElement("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Fecha"),n.createElement("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Importe"),n.createElement("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Estado"),n.createElement("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Abogado"),n.createElement("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"Fecha de pago"),n.createElement("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"QR"),n.createElement("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase"},"PDF"))),n.createElement("tbody",{className:"bg-white divide-y divide-gray-200"},t.map(x=>n.createElement("tr",{key:x.id},n.createElement("td",{className:"px-4 py-2"},x.number),n.createElement("td",{className:"px-4 py-2"},new Date(x.date).toLocaleDateString()),n.createElement("td",{className:"px-4 py-2"},x.amount.toFixed(2)," €"),n.createElement("td",{className:"px-4 py-2"},n.createElement("span",{className:`px-2 py-1 rounded text-xs font-semibold ${x.status==="PAGADA"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`},x.status)),n.createElement("td",{className:"px-4 py-2"},x.lawyerName||"-"),n.createElement("td",{className:"px-4 py-2"},x.paymentDate?new Date(x.paymentDate).toLocaleDateString():"-"),n.createElement("td",{className:"px-4 py-2"},x.qrUrl?n.createElement("img",{src:x.qrUrl,alt:"QR Factura",className:"h-12 w-12 object-contain"}):n.createElement("span",{className:"text-gray-400"},"No disponible")),n.createElement("td",{className:"px-4 py-2"},x.pdfUrl?n.createElement("a",{href:x.pdfUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline"},"Descargar"):n.createElement("span",{className:"text-gray-400"},"No disponible"))))))),n.createElement("div",{className:"mt-8 flex justify-between items-center"},n.createElement(De,{to:"/dashboard",className:"text-blue-600 hover:underline"},"Volver al Dashboard")))))},YK=()=>{const[e,t]=g.useState(""),[r,a]=g.useState(!0),[s,o]=g.useState(""),{user:l}=Pe();return g.useEffect(()=>{(async()=>{try{a(!0);const c=await Z.get("/parametros/legal/PRIVACY_POLICY");t(c.data.valor)}catch(c){console.error("Error fetching privacy content:",c),o("No se pudo cargar la política de privacidad"),t(`
          <h1>Política de Privacidad</h1>
          <p>Esta política de privacidad describe cómo recopilamos, usamos y protegemos su información personal.</p>
          <h2>Información que recopilamos</h2>
          <p>Recopilamos información que usted nos proporciona directamente, como cuando se registra en nuestro sitio web, nos contacta o utiliza nuestros servicios.</p>
          <h2>Cómo usamos su información</h2>
          <p>Utilizamos la información recopilada para proporcionar, mantener y mejorar nuestros servicios, comunicarnos con usted y cumplir con nuestras obligaciones legales.</p>
          <h2>Protección de la información</h2>
          <p>Implementamos medidas de seguridad técnicas y organizativas apropiadas para proteger su información personal contra acceso no autorizado, alteración, divulgación o destrucción.</p>
          <h2>Sus derechos</h2>
          <p>Usted tiene derecho a acceder, corregir, eliminar y oponerse al procesamiento de su información personal. Para ejercer estos derechos, contáctenos.</p>
          <h2>Contacto</h2>
          <p>Si tiene preguntas sobre esta política de privacidad, contáctenos en info@despacholegal.com</p>
        `)}finally{a(!1)}})()},[]),r?n.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.createElement("p",{className:"mt-4 text-gray-600"},"Cargando política de privacidad..."))):s?n.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-red-600 text-6xl mb-4"},"⚠️"),n.createElement("h1",{className:"text-2xl font-bold text-gray-900 mb-2"},"Error"),n.createElement("p",{className:"text-gray-600"},s))):n.createElement("div",{className:"min-h-screen bg-gray-50"},n.createElement("div",{className:"max-w-4xl mx-auto py-12 px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden"},n.createElement("div",{className:"px-6 py-8"},n.createElement("div",{className:"prose prose-lg max-w-none",dangerouslySetInnerHTML:{__html:e}})),(l==null?void 0:l.role)==="ADMIN"&&n.createElement("div",{className:"px-6 py-4 bg-gray-50 border-t"},n.createElement("button",{onClick:()=>window.location.href="/admin/parametros",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},"✏️ Editar Contenido")))))},qK=()=>{const[e,t]=g.useState(""),[r,a]=g.useState(!0),[s,o]=g.useState(""),{user:l}=Pe();return g.useEffect(()=>{(async()=>{try{a(!0);const c=await Z.get("/parametros/legal/TERMS_OF_SERVICE");t(c.data.valor)}catch(c){console.error("Error fetching terms content:",c),o("No se pudo cargar los términos de servicio"),t(`
          <h1>Términos de Servicio</h1>
          <p>Al utilizar nuestros servicios, usted acepta estos términos de servicio.</p>
          <h2>Servicios proporcionados</h2>
          <p>Proporcionamos servicios de asesoramiento jurídico y gestión legal a través de nuestra plataforma digital.</p>
          <h2>Uso aceptable</h2>
          <p>Usted se compromete a utilizar nuestros servicios únicamente para fines legales y de acuerdo con estos términos.</p>
          <h2>Propiedad intelectual</h2>
          <p>Todos los derechos de propiedad intelectual relacionados con nuestros servicios son propiedad de Despacho Legal.</p>
          <h2>Limitación de responsabilidad</h2>
          <p>En la máxima medida permitida por la ley, Despacho Legal no será responsable de daños indirectos, incidentales o consecuentes.</p>
          <h2>Modificaciones</h2>
          <p>Nos reservamos el derecho de modificar estos términos en cualquier momento. Los cambios serán efectivos inmediatamente después de su publicación.</p>
          <h2>Contacto</h2>
          <p>Si tiene preguntas sobre estos términos, contáctenos en info@despacholegal.com</p>
        `)}finally{a(!1)}})()},[]),r?n.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.createElement("p",{className:"mt-4 text-gray-600"},"Cargando términos de servicio..."))):s?n.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-red-600 text-6xl mb-4"},"⚠️"),n.createElement("h1",{className:"text-2xl font-bold text-gray-900 mb-2"},"Error"),n.createElement("p",{className:"text-gray-600"},s))):n.createElement("div",{className:"min-h-screen bg-gray-50"},n.createElement("div",{className:"max-w-4xl mx-auto py-12 px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden"},n.createElement("div",{className:"px-6 py-8"},n.createElement("div",{className:"prose prose-lg max-w-none",dangerouslySetInnerHTML:{__html:e}})),(l==null?void 0:l.role)==="ADMIN"&&n.createElement("div",{className:"px-6 py-4 bg-gray-50 border-t"},n.createElement("button",{onClick:()=>window.location.href="/admin/parametros",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},"✏️ Editar Contenido")))))},GK=()=>{const[e,t]=g.useState(""),[r,a]=g.useState(!0),[s,o]=g.useState(""),{user:l}=Pe();return g.useEffect(()=>{(async()=>{try{a(!0);const c=await Z.get("/parametros/legal/COOKIE_POLICY");t(c.data.valor)}catch(c){console.error("Error fetching cookies content:",c),o("No se pudo cargar la política de cookies"),t(`
          <h1>Política de Cookies</h1>
          <p>Esta política de cookies explica qué son las cookies, cómo las utilizamos y cómo puede gestionarlas.</p>
          
          <h2>¿Qué son las cookies?</h2>
          <p>Las cookies son pequeños archivos de texto que se almacenan en su dispositivo cuando visita nuestro sitio web. Nos ayudan a mejorar su experiencia y a analizar el tráfico del sitio.</p>
          
          <h2>Tipos de cookies que utilizamos</h2>
          
          <h3>Cookies técnicas (necesarias)</h3>
          <p>Estas cookies son esenciales para el funcionamiento del sitio web y no se pueden desactivar. Incluyen:</p>
          <ul>
            <li>Cookies de sesión para mantener su sesión activa</li>
            <li>Cookies de seguridad para proteger contra ataques</li>
            <li>Cookies de preferencias para recordar su configuración</li>
          </ul>
          
          <h3>Cookies analíticas</h3>
          <p>Nos ayudan a entender cómo interactúan los visitantes con nuestro sitio web:</p>
          <ul>
            <li>Análisis de tráfico y uso del sitio</li>
            <li>Identificación de páginas más populares</li>
            <li>Mejora de la experiencia del usuario</li>
          </ul>
          
          <h3>Cookies de funcionalidad</h3>
          <p>Mejoran la funcionalidad del sitio web:</p>
          <ul>
            <li>Recordar sus preferencias de idioma</li>
            <li>Personalizar el contenido mostrado</li>
            <li>Mejorar la navegación</li>
          </ul>
          
          <h2>Gestión de cookies</h2>
          <p>Puede gestionar las cookies a través de la configuración de su navegador:</p>
          <ul>
            <li><strong>Chrome:</strong> Configuración > Privacidad y seguridad > Cookies</li>
            <li><strong>Firefox:</strong> Opciones > Privacidad y seguridad > Cookies</li>
            <li><strong>Safari:</strong> Preferencias > Privacidad > Cookies</li>
            <li><strong>Edge:</strong> Configuración > Cookies y permisos del sitio</li>
          </ul>
          
          <h2>Cookies de terceros</h2>
          <p>Algunos servicios de terceros pueden instalar cookies en su dispositivo:</p>
          <ul>
            <li>Google Analytics para análisis web</li>
            <li>Servicios de chat en vivo</li>
            <li>Herramientas de redes sociales</li>
          </ul>
          
          <h2>Actualizaciones de esta política</h2>
          <p>Podemos actualizar esta política de cookies ocasionalmente. Le notificaremos cualquier cambio significativo.</p>
          
          <h2>Contacto</h2>
          <p>Si tiene preguntas sobre nuestra política de cookies, contáctenos en info@despacholegal.com</p>
          
          <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mt-6">
            <p class="text-sm text-blue-700">
              <strong>Nota:</strong> Esta política cumple con las directrices de la Agencia Española de Protección de Datos (AEPD) y el Reglamento General de Protección de Datos (RGPD).
            </p>
          </div>
        `)}finally{a(!1)}})()},[]),r?n.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),n.createElement("p",{className:"mt-4 text-gray-600"},"Cargando política de cookies..."))):s?n.createElement("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center"},n.createElement("div",{className:"text-center"},n.createElement("div",{className:"text-red-600 text-6xl mb-4"},"⚠️"),n.createElement("h1",{className:"text-2xl font-bold text-gray-900 mb-2"},"Error"),n.createElement("p",{className:"text-gray-600"},s))):n.createElement("div",{className:"min-h-screen bg-gray-50"},n.createElement("div",{className:"max-w-4xl mx-auto py-12 px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"bg-white shadow-lg rounded-lg overflow-hidden"},n.createElement("div",{className:"px-6 py-8"},n.createElement("div",{className:"prose prose-lg max-w-none",dangerouslySetInnerHTML:{__html:e}})),(l==null?void 0:l.role)==="ADMIN"&&n.createElement("div",{className:"px-6 py-4 bg-gray-50 border-t"},n.createElement("button",{onClick:()=>window.location.href="/admin/parametros",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},"✏️ Editar Contenido")))))},KK=()=>{const{user:e}=Pe(),[t,r]=g.useState([]),[a,s]=g.useState(!0),[o,l]=g.useState(null),[i,c]=g.useState(""),[d,u]=g.useState(!1);g.useEffect(()=>{m()},[]);const m=async()=>{try{s(!0);const h=await Z.get("/teleassistance/sessions/user/"+(e==null?void 0:e.id));r(h.data)}catch(h){console.error("Error loading sessions:",h)}finally{s(!1)}},f=async h=>{try{const E=await Z.get(`/api/teleassistance/sessions/${h}`);l(E.data)}catch(E){console.error("Error loading session details:",E)}},x=async h=>{if(i.trim())try{u(!0),await Z.post(`/api/teleassistance/sessions/${h}/messages`,{content:i,messageType:"TEXT"}),c(""),await f(h)}catch(E){console.error("Error sending message:",E)}finally{u(!1)}},b=h=>{const E={PENDING:{color:"bg-yellow-100 text-yellow-800",text:"Pendiente"},ACTIVE:{color:"bg-green-100 text-green-800",text:"Activa"},COMPLETED:{color:"bg-blue-100 text-blue-800",text:"Completada"},CANCELLED:{color:"bg-red-100 text-red-800",text:"Cancelada"}},w=E[h]||E.PENDING;return n.createElement("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${w.color}`},w.text)},y=h=>({AUTOFIRMA:"🔐",CERTIFICADO_DIGITAL:"🆔",SEDES:"🏛️",CLAVE_PIN:"📱",NAVEGADOR:"🌐",SISTEMA_OPERATIVO:"💻",OTRO:"❓"})[h]||"❓",v=h=>new Date(h).toLocaleString("es-ES"),p=h=>{if(!h)return"N/A";const E=Math.floor(h/60),w=h%60;return E>0?`${E}h ${w}m`:`${w}m`};return a?n.createElement("div",{className:"min-h-screen flex items-center justify-center"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})):n.createElement("div",{className:"min-h-screen bg-gray-50 py-8"},n.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"mb-8"},n.createElement("div",{className:"flex items-center justify-between"},n.createElement("div",null,n.createElement("h1",{className:"text-3xl font-bold text-gray-900 mb-2"},"🖥️ Mis Sesiones de Teleasistencia"),n.createElement("p",{className:"text-lg text-gray-600"},"Gestiona tus solicitudes de asistencia remota")),n.createElement(De,{to:"/client/teleassistance/request",className:"bg-blue-600 text-white px-6 py-3 rounded-md hover:bg-blue-700 transition-colors"},"Nueva Solicitud"))),n.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8"},n.createElement("div",{className:"lg:col-span-1"},n.createElement("div",{className:"bg-white rounded-lg shadow-md p-6"},n.createElement("h2",{className:"text-xl font-bold text-gray-900 mb-4"},"Mis Sesiones (",t.length,")"),t.length===0?n.createElement("div",{className:"text-center py-8"},n.createElement("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})),n.createElement("p",{className:"mt-2 text-sm text-gray-500"},"No tienes sesiones de teleasistencia"),n.createElement(De,{to:"/client/teleassistance/request",className:"mt-4 inline-block bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors"},"Solicitar Asistencia")):n.createElement("div",{className:"space-y-3"},t.map(h=>n.createElement("div",{key:h.id,onClick:()=>f(h.id),className:`border rounded-lg p-3 cursor-pointer transition-colors ${(o==null?void 0:o.id)===h.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`},n.createElement("div",{className:"flex items-center justify-between mb-2"},n.createElement("div",{className:"flex items-center space-x-2"},n.createElement("span",{className:"text-lg"},y(h.issueType)),n.createElement("span",{className:"font-medium text-gray-900"},h.issueType.replace("_"," "))),b(h.status)),n.createElement("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2"},h.description),n.createElement("div",{className:"flex items-center justify-between text-xs text-gray-500"},n.createElement("span",null,"Asistente: ",h.assistant.name),n.createElement("span",null,v(h.createdAt)))))))),n.createElement("div",{className:"lg:col-span-2"},o?n.createElement("div",{className:"bg-white rounded-lg shadow-md"},n.createElement("div",{className:"border-b border-gray-200 p-6"},n.createElement("div",{className:"flex items-center justify-between mb-4"},n.createElement("div",{className:"flex items-center space-x-3"},n.createElement("span",{className:"text-2xl"},y(o.issueType)),n.createElement("div",null,n.createElement("h2",{className:"text-xl font-bold text-gray-900"},o.issueType.replace("_"," ")),n.createElement("p",{className:"text-sm text-gray-600"},"Asistente: ",o.assistant.name))),b(o.status)),n.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},n.createElement("div",null,n.createElement("span",{className:"font-medium text-gray-700"},"Descripción:"),n.createElement("p",{className:"text-gray-600"},o.description)),n.createElement("div",null,n.createElement("span",{className:"font-medium text-gray-700"},"Código de Sesión:"),n.createElement("p",{className:"text-gray-600 font-mono"},o.sessionCode)),o.startedAt&&n.createElement("div",null,n.createElement("span",{className:"font-medium text-gray-700"},"Iniciada:"),n.createElement("p",{className:"text-gray-600"},v(o.startedAt))),o.duration&&n.createElement("div",null,n.createElement("span",{className:"font-medium text-gray-700"},"Duración:"),n.createElement("p",{className:"text-gray-600"},p(o.duration)))),o.resolution&&n.createElement("div",{className:"mt-4 p-4 bg-green-50 rounded-lg"},n.createElement("h4",{className:"font-medium text-green-900 mb-2"},"Resolución:"),n.createElement("p",{className:"text-green-800"},o.resolution))),n.createElement("div",{className:"p-6"},n.createElement("h3",{className:"text-lg font-bold text-gray-900 mb-4"},"Mensajes"),n.createElement("div",{className:"space-y-4 mb-4 max-h-96 overflow-y-auto"},o.messages.length===0?n.createElement("p",{className:"text-gray-500 text-center py-4"},"No hay mensajes en esta sesión"):o.messages.map(h=>n.createElement("div",{key:h.id,className:`flex ${h.sender.id===(e==null?void 0:e.id)?"justify-end":"justify-start"}`},n.createElement("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${h.sender.id===(e==null?void 0:e.id)?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"}`},n.createElement("div",{className:"text-xs opacity-75 mb-1"},h.sender.name," - ",v(h.createdAt)),n.createElement("p",null,h.content))))),o.status==="ACTIVE"&&n.createElement("div",{className:"flex space-x-2"},n.createElement("input",{type:"text",value:i,onChange:h=>c(h.target.value),onKeyPress:h=>h.key==="Enter"&&x(o.id),placeholder:"Escribe un mensaje...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),n.createElement("button",{onClick:()=>x(o.id),disabled:d||!i.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50"},d?"Enviando...":"Enviar")))):n.createElement("div",{className:"bg-white rounded-lg shadow-md p-6"},n.createElement("div",{className:"text-center py-8"},n.createElement("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})),n.createElement("p",{className:"mt-2 text-sm text-gray-500"},"Selecciona una sesión para ver los detalles")))))))},XK=()=>{const{user:e}=Pe(),t=qr(),[r,a]=g.useState([]),[s,o]=g.useState([]),[l,i]=g.useState([]),[c,d]=g.useState(!0),[u,m]=g.useState(!1),[f,x]=g.useState(""),[b,y]=g.useState(""),[v,p]=g.useState(""),[h,E]=g.useState(""),[w,N]=g.useState(!1),[S,C]=g.useState(null);g.useEffect(()=>{D()},[]);const D=async()=>{try{d(!0);const[$,P,I]=await Promise.all([Z.get("/teleassistance/available-assistants"),Z.get("/teleassistance/remote-tools"),Z.get("/teleassistance/common-issues")]);a($.data),o(P.data),i(I.data)}catch($){console.error("Error loading teleassistance data:",$)}finally{d(!1)}},k=async $=>{if($.preventDefault(),!f||!b||!h){alert("Por favor completa todos los campos obligatorios");return}try{m(!0);const P={userId:e==null?void 0:e.id,assistantId:f,issueType:b,description:h,remoteTool:v||void 0},I=await Z.post("/api/teleassistance/sessions",P);alert("Solicitud de teleasistencia enviada exitosamente. Te contactaremos pronto."),t("/client/teleassistance")}catch(P){console.error("Error creating teleassistance session:",P),alert("Error al enviar la solicitud. Por favor intenta de nuevo.")}finally{m(!1)}},O=$=>{C($),N(!0)},A=$=>({AUTOFIRMA:"🔐",CERTIFICADO_DIGITAL:"🆔",SEDES:"🏛️",CLAVE_PIN:"📱",NAVEGADOR:"🌐",SISTEMA_OPERATIVO:"💻",OTRO:"❓"})[$]||"❓";return c?n.createElement("div",{className:"min-h-screen flex items-center justify-center"},n.createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})):n.createElement("div",{className:"min-h-screen bg-gray-50 py-8"},n.createElement("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},n.createElement("div",{className:"mb-8"},n.createElement("h1",{className:"text-3xl font-bold text-gray-900 mb-2"},"🖥️ Solicitar Teleasistencia"),n.createElement("p",{className:"text-lg text-gray-600"},"¿Necesitas ayuda con problemas de administración electrónica? Solicita asistencia remota")),n.createElement("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8"},n.createElement("div",{className:"lg:col-span-2"},n.createElement("div",{className:"bg-white rounded-lg shadow-md p-6"},n.createElement("h2",{className:"text-xl font-bold text-gray-900 mb-6"},"Nueva Solicitud de Teleasistencia"),n.createElement("form",{onSubmit:k,className:"space-y-6"},n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Seleccionar Asistente *"),n.createElement("select",{value:f,onChange:$=>x($.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0},n.createElement("option",{value:""},"Selecciona un asistente"),r.map($=>n.createElement("option",{key:$.id,value:$.id},$.name," (",$.role,")")))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Tipo de Problema *"),n.createElement("select",{value:b,onChange:$=>y($.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0},n.createElement("option",{value:""},"Selecciona el tipo de problema"),l.map($=>n.createElement("option",{key:$.id,value:$.id},A($.id)," ",$.name)))),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Descripción del Problema *"),n.createElement("textarea",{value:h,onChange:$=>E($.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Describe detalladamente el problema que estás experimentando...",required:!0})),n.createElement("div",null,n.createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},"Herramienta de Control Remoto (Opcional)"),n.createElement("select",{value:v,onChange:$=>p($.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},n.createElement("option",{value:""},"Sin preferencia"),s.map($=>n.createElement("option",{key:$.id,value:$.id},$.name)))),n.createElement("div",{className:"pt-4"},n.createElement("button",{type:"submit",disabled:u,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50"},u?"Enviando...":"Enviar Solicitud de Teleasistencia"))))),n.createElement("div",{className:"space-y-6"},n.createElement("div",{className:"bg-white rounded-lg shadow-md p-6"},n.createElement("h3",{className:"text-lg font-bold text-gray-900 mb-4"},"🛠️ Herramientas de Control Remoto"),n.createElement("div",{className:"space-y-3"},s.map($=>n.createElement("div",{key:$.id,className:"border border-gray-200 rounded-lg p-3"},n.createElement("h4",{className:"font-medium text-gray-900 mb-1"},$.name),n.createElement("p",{className:"text-sm text-gray-600 mb-2"},$.description),n.createElement("button",{onClick:()=>O($),className:"text-blue-600 text-sm hover:text-blue-800"},"Ver instrucciones"))))),n.createElement("div",{className:"bg-white rounded-lg shadow-md p-6"},n.createElement("h3",{className:"text-lg font-bold text-gray-900 mb-4"},"❓ Problemas Comunes"),n.createElement("div",{className:"space-y-3"},l.slice(0,5).map($=>n.createElement("div",{key:$.id,className:"border border-gray-200 rounded-lg p-3"},n.createElement("div",{className:"flex items-center mb-2"},n.createElement("span",{className:"text-lg mr-2"},A($.id)),n.createElement("h4",{className:"font-medium text-gray-900"},$.name)),n.createElement("p",{className:"text-sm text-gray-600"},$.description))))),n.createElement("div",{className:"bg-blue-50 rounded-lg p-6"},n.createElement("h3",{className:"text-lg font-bold text-blue-900 mb-2"},"📞 Información de Contacto"),n.createElement("p",{className:"text-sm text-blue-800 mb-3"},"Una vez enviada tu solicitud, el asistente te contactará para coordinar la sesión de teleasistencia."),n.createElement("div",{className:"text-sm text-blue-700"},n.createElement("p",null,"• Tiempo de respuesta: 15-30 minutos"),n.createElement("p",null,"• Horario de atención: Lunes a Viernes 9:00-18:00"),n.createElement("p",null,"• Sesiones gratuitas incluidas en tu plan"))))),w&&S&&n.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},n.createElement("div",{className:"bg-white rounded-lg p-6 max-w-2xl mx-4 max-h-[80vh] overflow-y-auto"},n.createElement("div",{className:"flex items-center justify-between mb-4"},n.createElement("h3",{className:"text-xl font-bold text-gray-900"},"Instrucciones: ",S.name),n.createElement("button",{onClick:()=>N(!1),className:"text-gray-400 hover:text-gray-600"},n.createElement("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})))),n.createElement("div",{className:"mb-4"},n.createElement("h4",{className:"font-medium text-gray-900 mb-2"},"Características:"),n.createElement("ul",{className:"list-disc list-inside text-sm text-gray-600 space-y-1"},S.features.map(($,P)=>n.createElement("li",{key:P},$)))),n.createElement("div",{className:"mb-4"},n.createElement("h4",{className:"font-medium text-gray-900 mb-2"},"Instrucciones de Instalación:"),n.createElement("ol",{className:"list-decimal list-inside text-sm text-gray-600 space-y-1"},S.instructions.map(($,P)=>n.createElement("li",{key:P},$)))),n.createElement("div",{className:"flex justify-between"},n.createElement("a",{href:S.downloadUrl,target:"_blank",rel:"noopener noreferrer",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors"},"Descargar ",S.name),n.createElement("button",{onClick:()=>N(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors"},"Cerrar"))))))};function QK(){return n.createElement(gA,null,n.createElement(L4,null,n.createElement(A4,null,n.createElement(ge,{path:"/",element:n.createElement(tN,null)},n.createElement(ge,{index:!0,element:n.createElement(DT,null)}),n.createElement(ge,{path:"contact",element:n.createElement(AT,null)}),n.createElement(ge,{path:"login",element:n.createElement(RT,null)}),n.createElement(ge,{path:"register",element:n.createElement(MT,null)}),n.createElement(ge,{path:"privacidad",element:n.createElement(YK,null)}),n.createElement(ge,{path:"terminos",element:n.createElement(qK,null)}),n.createElement(ge,{path:"cookies",element:n.createElement(GK,null)}),n.createElement(ge,{path:"dashboard",element:n.createElement(Im,null)}),n.createElement(ge,{element:n.createElement(PT,null)},n.createElement(ge,{element:n.createElement(Fm,{allowedRoles:["ADMIN"]})},n.createElement(ge,{path:"admin"},n.createElement(ge,{path:"dashboard",element:n.createElement(zY,null)}),n.createElement(ge,{path:"users",element:n.createElement(VY,null)}),n.createElement(ge,{path:"cases",element:n.createElement(HY,null)}),n.createElement(ge,{path:"cases/:id",element:n.createElement(Jv,null)}),n.createElement(ge,{path:"appointments",element:n.createElement(YY,null)}),n.createElement(ge,{path:"tasks",element:n.createElement(qY,null)}),n.createElement(ge,{path:"documents",element:n.createElement(GY,null)}),n.createElement(ge,{path:"invoices",element:n.createElement(Eq,null)}),n.createElement(ge,{path:"reports",element:n.createElement(xq,null)}),n.createElement(ge,{path:"home-builder",element:n.createElement(CK,null)}),n.createElement(ge,{path:"menu-config",element:n.createElement(kK,null)}),n.createElement(ge,{path:"site-config",element:n.createElement(DK,null)}),n.createElement(ge,{path:"guided-config",element:n.createElement(AK,null)}),n.createElement(ge,{path:"teleassistance",element:n.createElement(YE,null)}),n.createElement(ge,{path:"settings",element:n.createElement(nc,{title:"Configuración del Sistema",description:"Configurar parámetros generales",icon:"⚙️"})}),n.createElement(ge,{path:"audit",element:n.createElement(nc,{title:"Auditoría",description:"Registros de actividad del sistema",icon:"🔍"})}),n.createElement(ge,{path:"backup",element:n.createElement(nc,{title:"Backup y Restauración",description:"Gestionar copias de seguridad",icon:"💾"})}),n.createElement(ge,{path:"/admin/parametros",element:n.createElement(Cq,null)}))),n.createElement(ge,{element:n.createElement(Fm,{allowedRoles:["ABOGADO"]})},n.createElement(ge,{path:"lawyer"},n.createElement(ge,{path:"dashboard",element:n.createElement(Im,null)}),n.createElement(ge,{path:"facturacion",element:n.createElement(zK,null)}),n.createElement(ge,{path:"provisiones",element:n.createElement(UK,null)}),n.createElement(ge,{path:"cases"},n.createElement(ge,{index:!0,element:n.createElement(LT,null)}),n.createElement(ge,{path:"new",element:n.createElement(IT,null)}),n.createElement(ge,{path:":id",element:n.createElement(Jv,null)}),n.createElement(ge,{path:":id/edit",element:n.createElement(UT,null)})),n.createElement(ge,{path:"clients",element:n.createElement(FY,null)}),n.createElement(ge,{path:"appointments",element:n.createElement($Y,null)}),n.createElement(ge,{path:"documents",element:n.createElement(BT,null)}),n.createElement(ge,{path:"tasks",element:n.createElement(jY,null)}),n.createElement(ge,{path:"reports",element:n.createElement(BY,null)}),n.createElement(ge,{path:"chat",element:n.createElement(_K,null)}),n.createElement(ge,{path:"teleassistance",element:n.createElement(YE,null)}))),n.createElement(ge,{element:n.createElement(Fm,{allowedRoles:["CLIENTE"]})},n.createElement(ge,{path:"client"},n.createElement(ge,{path:"dashboard",element:n.createElement(Im,null)}),n.createElement(ge,{path:"cases",element:n.createElement($T,null)}),n.createElement(ge,{path:"cases/:id",element:n.createElement(FT,null)}),n.createElement(ge,{path:"documents",element:n.createElement(zT,null)}),n.createElement(ge,{path:"provisiones",element:n.createElement(VK,null)}),n.createElement(ge,{path:"appointments",element:n.createElement(WK,null)}),n.createElement(ge,{path:"chat",element:n.createElement(TK,null)}),n.createElement(ge,{path:"teleassistance",element:n.createElement(KK,null)}),n.createElement(ge,{path:"teleassistance/request",element:n.createElement(XK,null)}),n.createElement(ge,{path:"payments",element:n.createElement(HK,null)}),n.createElement(ge,{path:"profile",element:n.createElement(nc,{title:"Perfil",description:"Actualizar información personal",icon:"👤"})}))))))))}sf.createRoot(document.getElementById("root")).render(n.createElement(n.StrictMode,null,n.createElement(QK,null)))});export default JK();
