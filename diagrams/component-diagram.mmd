graph TB
    %% Frontend Components
    subgraph "Frontend - React"
        subgraph "Pages"
            LoginPage[ðŸ” LoginPage]
            DashboardPage[ðŸ“Š DashboardPage]
            CasesPage[ðŸ“ CasesPage]
            InvoicesPage[ðŸ“„ InvoicesPage]
            ReportsPage[ðŸ“ˆ ReportsPage]
            AdminPage[âš™ï¸ AdminPage]
            HomePage[ðŸ  HomePage]
        end

        subgraph "Components"
            Layout[ðŸŽ¨ Layout]
            Navbar[ðŸ§­ Navbar]
            Sidebar[ðŸ“‹ Sidebar]
            Footer[ðŸ‘£ Footer]
            ChatbotWidget[ðŸ¤– ChatbotWidget]
            ChatbotButton[ðŸ”˜ ChatbotButton]
            InvoiceForm[ðŸ“ InvoiceForm]
            CaseForm[ðŸ“‹ CaseForm]
            DataTable[ðŸ“Š DataTable]
            Modal[ðŸªŸ Modal]
        end

        subgraph "Services"
            ApiService[ðŸŒ ApiService]
            AuthService[ðŸ” AuthService]
            ChatbotService[ðŸ’¬ ChatbotService]
            StorageService[ðŸ’¾ StorageService]
        end
    end

    %% Backend Components
    subgraph "Backend - NestJS"
        subgraph "Controllers"
            AuthController[ðŸ” AuthController]
            InvoicesController[ðŸ“„ InvoicesController]
            CasesController[ðŸ“ CasesController]
            ReportsController[ðŸ“ˆ ReportsController]
            ParametrosController[âš™ï¸ ParametrosController]
            LayoutsController[ðŸŽ¨ LayoutsController]
            ChatController[ðŸ’¬ ChatController]
        end

        subgraph "Services"
            AuthService[ðŸ” AuthService]
            InvoicesService[ðŸ“„ InvoicesService]
            CasesService[ðŸ“ CasesService]
            ReportsService[ðŸ“ˆ ReportsService]
            ParametrosService[âš™ï¸ ParametrosService]
            LayoutsService[ðŸŽ¨ LayoutsService]
            ChatService[ðŸ’¬ ChatService]
            PrismaService[ðŸ—„ï¸ PrismaService]
        end

        subgraph "Guards & Decorators"
            JwtAuthGuard[ðŸ” JwtAuthGuard]
            RolesGuard[ðŸ‘¥ RolesGuard]
            Roles[ðŸ·ï¸ Roles]
        end
    end

    %% Chatbot Components
    subgraph "Chatbot - FastAPI"
        subgraph "Core"
            MainApp[ðŸš€ MainApp]
            Router[ðŸ›£ï¸ Router]
            Middleware[ðŸ”§ Middleware]
        end

        subgraph "Services"
            NLPService[ðŸ§  NLPService]
            IntentService[ðŸŽ¯ IntentService]
            EntityService[ðŸ·ï¸ EntityService]
            ResponseService[ðŸ’­ ResponseService]
            BackendService[ðŸ”— BackendService]
        end

        subgraph "Models"
            ChatRequest[ðŸ“¤ ChatRequest]
            ChatResponse[ðŸ“¥ ChatResponse]
            Intent[ðŸŽ¯ Intent]
            Entity[ðŸ·ï¸ Entity]
        end
    end

    %% Database
    subgraph "Database"
        PostgreSQL[(ðŸ—„ï¸ PostgreSQL)]
        PrismaORM[ðŸ”§ Prisma ORM]
        Migrations[ðŸ”„ Migrations]
    end

    %% External Services
    subgraph "External Services"
        Vercel[ðŸš€ Vercel]
        Railway[ðŸš‚ Railway]
        AutoFirma[ðŸ“ AutoFirma]
        EmailService[ðŸ“§ EmailService]
    end

    %% Connections Frontend
    LoginPage --> AuthService
    DashboardPage --> ApiService
    CasesPage --> ApiService
    InvoicesPage --> ApiService
    ReportsPage --> ApiService
    AdminPage --> ApiService
    HomePage --> ChatbotService

    Layout --> Navbar
    Layout --> Sidebar
    Layout --> Footer
    Layout --> ChatbotWidget
    Layout --> ChatbotButton

    ChatbotWidget --> ChatbotService
    ChatbotButton --> ChatbotService

    %% Connections Backend
    AuthController --> AuthService
    InvoicesController --> InvoicesService
    CasesController --> CasesService
    ReportsController --> ReportsService
    ParametrosController --> ParametrosService
    LayoutsController --> LayoutsService
    ChatController --> ChatService

    AuthService --> PrismaService
    InvoicesService --> PrismaService
    CasesService --> PrismaService
    ReportsService --> PrismaService
    ParametrosService --> PrismaService
    LayoutsService --> PrismaService
    ChatService --> PrismaService

    PrismaService --> PostgreSQL

    %% Connections Chatbot
    MainApp --> Router
    Router --> NLPService
    NLPService --> IntentService
    NLPService --> EntityService
    NLPService --> ResponseService
    ResponseService --> BackendService

    ChatRequest --> MainApp
    MainApp --> ChatResponse
    IntentService --> Intent
    EntityService --> Entity

    %% External Connections
    Frontend -.-> Vercel
    Backend -.-> Railway
    Chatbot -.-> Railway
    Backend -.-> AutoFirma
    Backend -.-> EmailService

    %% API Connections
    ApiService --> AuthController
    ApiService --> InvoicesController
    ApiService --> CasesController
    ApiService --> ReportsController
    ApiService --> ParametrosController
    ApiService --> LayoutsController
    ApiService --> ChatController

    ChatbotService --> MainApp

    %% Styles
    classDef frontend fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    classDef backend fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    classDef chatbot fill:#e8f5e8,stroke:#1b5e20,stroke-width:2px
    classDef database fill:#fff3e0,stroke:#e65100,stroke-width:2px
    classDef external fill:#fce4ec,stroke:#880e4f,stroke-width:2px

    class LoginPage,DashboardPage,CasesPage,InvoicesPage,ReportsPage,AdminPage,HomePage,Layout,Navbar,Sidebar,Footer,ChatbotWidget,ChatbotButton,InvoiceForm,CaseForm,DataTable,Modal,ApiService,AuthService,ChatbotService,StorageService frontend
    class AuthController,InvoicesController,CasesController,ReportsController,ParametrosController,LayoutsController,ChatController,AuthService,InvoicesService,CasesService,ReportsService,ParametrosService,LayoutsService,ChatService,PrismaService,JwtAuthGuard,RolesGuard,Roles backend
    class MainApp,Router,Middleware,NLPService,IntentService,EntityService,ResponseService,BackendService,ChatRequest,ChatResponse,Intent,Entity chatbot
    class PostgreSQL,PrismaORM,Migrations database
    class Vercel,Railway,AutoFirma,EmailService external 